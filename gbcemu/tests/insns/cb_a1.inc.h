    TEST(gbcemu, opcode_cb_a1) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB A1 0000
        gbc.setState(0x1e82, 0x733c, 0xa260, 0x9384, 0x9154, 0x45c8, 0x1, 0x1);
        gbc.writeMem(0x1e82, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x733c);
        EXPECT(gbc.pc(), 0x1e84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0001
        gbc.setState(0x8bef, 0x4e2d, 0x70b0, 0x9d4b, 0x7cdd, 0xc5d8, 0x0, 0x1);
        gbc.writeMem(0x8bef, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4e2d);
        EXPECT(gbc.pc(), 0x8bf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bef), 0xcb);
        EXPECT(gbc.readMem(0x8bf0), 0xa1);
        // CB A1 0002
        gbc.setState(0x389d, 0x3e8e, 0x9da0, 0x827f, 0x2b7c, 0x469e, 0x0, 0x1);
        gbc.writeMem(0x389d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3e8e);
        EXPECT(gbc.pc(), 0x389f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0003
        gbc.setState(0x6c00, 0x2963, 0xa660, 0x238a, 0x2700, 0x1b02, 0x0, 0x0);
        gbc.writeMem(0x6c00, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2963);
        EXPECT(gbc.pc(), 0x6c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0004
        gbc.setState(0xa682, 0x1f01, 0xe700, 0xeeef, 0xb951, 0x5c39, 0x1, 0x1);
        gbc.writeMem(0xa682, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1f01);
        EXPECT(gbc.pc(), 0xa684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa682), 0xcb);
        EXPECT(gbc.readMem(0xa683), 0xa1);
        // CB A1 0005
        gbc.setState(0x9bb9, 0x9588, 0x3580, 0x1269, 0x647e, 0xd649, 0x0, 0x0);
        gbc.writeMem(0x9bb9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9588);
        EXPECT(gbc.pc(), 0x9bbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb9), 0xcb);
        EXPECT(gbc.readMem(0x9bba), 0xa1);
        // CB A1 0006
        gbc.setState(0x48d7, 0x1fa7, 0xa9f0, 0x550e, 0x31b7, 0x25b8, 0x0, 0x0);
        gbc.writeMem(0x48d7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1fa7);
        EXPECT(gbc.pc(), 0x48d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0007
        gbc.setState(0x10ce, 0x8b5, 0xf40, 0xd40, 0xee1c, 0x2fe8, 0x1, 0x0);
        gbc.writeMem(0x10ce, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8b5);
        EXPECT(gbc.pc(), 0x10d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0008
        gbc.setState(0x207c, 0x38dc, 0xae30, 0xfa81, 0xad4b, 0xbecd, 0x1, 0x0);
        gbc.writeMem(0x207c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x38dc);
        EXPECT(gbc.pc(), 0x207e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0009
        gbc.setState(0x7b55, 0x81e0, 0xd6a0, 0x9734, 0x67bb, 0xf44c, 0x0, 0x1);
        gbc.writeMem(0x7b55, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x81e0);
        EXPECT(gbc.pc(), 0x7b57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 000A
        gbc.setState(0xb568, 0xd85f, 0xcd10, 0xe0de, 0xc7e5, 0x384b, 0x1, 0x0);
        gbc.writeMem(0xb568, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd85f);
        EXPECT(gbc.pc(), 0xb56a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb568), 0xcb);
        EXPECT(gbc.readMem(0xb569), 0xa1);
        // CB A1 000B
        gbc.setState(0xcbdc, 0x956, 0xddb0, 0xb0cd, 0x7755, 0x91bb, 0x1, 0x0);
        gbc.writeMem(0xcbdc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x956);
        EXPECT(gbc.pc(), 0xcbde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbdc), 0xcb);
        EXPECT(gbc.readMem(0xcbdd), 0xa1);
        // CB A1 000C
        gbc.setState(0x9ac3, 0xd817, 0x5fd0, 0x5ddc, 0xe88f, 0xe871, 0x1, 0x1);
        gbc.writeMem(0x9ac3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd817);
        EXPECT(gbc.pc(), 0x9ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac3), 0xcb);
        EXPECT(gbc.readMem(0x9ac4), 0xa1);
        // CB A1 000D
        gbc.setState(0x81ad, 0x875a, 0xe3f0, 0xc05f, 0xb933, 0xea67, 0x1, 0x1);
        gbc.writeMem(0x81ad, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x875a);
        EXPECT(gbc.pc(), 0x81af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ad), 0xcb);
        EXPECT(gbc.readMem(0x81ae), 0xa1);
        // CB A1 000E
        gbc.setState(0xbe18, 0x1f41, 0xd9c0, 0x1974, 0xbc5d, 0xbace, 0x0, 0x1);
        gbc.writeMem(0xbe18, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1f41);
        EXPECT(gbc.pc(), 0xbe1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe18), 0xcb);
        EXPECT(gbc.readMem(0xbe19), 0xa1);
        // CB A1 000F
        gbc.setState(0xeec6, 0xdf17, 0x72e0, 0xfc62, 0x2186, 0x30a8, 0x0, 0x0);
        gbc.writeMem(0xeec6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xdf17);
        EXPECT(gbc.pc(), 0xeec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeec6), 0xcb);
        EXPECT(gbc.readMem(0xeec7), 0xa1);
        // CB A1 0010
        gbc.setState(0xdce1, 0x4d07, 0xa030, 0xfe28, 0xa821, 0x5986, 0x0, 0x0);
        gbc.writeMem(0xdce1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4d07);
        EXPECT(gbc.pc(), 0xdce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdce1), 0xcb);
        EXPECT(gbc.readMem(0xdce2), 0xa1);
        // CB A1 0011
        gbc.setState(0x339a, 0xfb93, 0xf230, 0x58ff, 0xf84f, 0xa035, 0x0, 0x1);
        gbc.writeMem(0x339a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfb93);
        EXPECT(gbc.pc(), 0x339c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0012
        gbc.setState(0x1047, 0x178b, 0x310, 0xf418, 0x3a37, 0xa5ad, 0x0, 0x1);
        gbc.writeMem(0x1047, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x178b);
        EXPECT(gbc.pc(), 0x1049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0013
        gbc.setState(0xaa94, 0x6099, 0xc7b0, 0x9a75, 0xdf2b, 0xa792, 0x0, 0x0);
        gbc.writeMem(0xaa94, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6099);
        EXPECT(gbc.pc(), 0xaa96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa94), 0xcb);
        EXPECT(gbc.readMem(0xaa95), 0xa1);
        // CB A1 0014
        gbc.setState(0xb494, 0x410c, 0xa260, 0x422e, 0x933d, 0x6f03, 0x0, 0x0);
        gbc.writeMem(0xb494, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x410c);
        EXPECT(gbc.pc(), 0xb496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb494), 0xcb);
        EXPECT(gbc.readMem(0xb495), 0xa1);
        // CB A1 0016
        gbc.setState(0xd92c, 0x54f6, 0x3960, 0x8537, 0x3687, 0x392d, 0x1, 0x0);
        gbc.writeMem(0xd92c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x54f6);
        EXPECT(gbc.pc(), 0xd92e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92c), 0xcb);
        EXPECT(gbc.readMem(0xd92d), 0xa1);
        // CB A1 0017
        gbc.setState(0xe7ed, 0xa214, 0x2e0, 0x9d9e, 0x6d49, 0x6cb8, 0x1, 0x0);
        gbc.writeMem(0xe7ed, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa214);
        EXPECT(gbc.pc(), 0xe7ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ed), 0xcb);
        EXPECT(gbc.readMem(0xe7ee), 0xa1);
        // CB A1 0018
        gbc.setState(0x112e, 0xd257, 0x1f50, 0x1cb1, 0x3af1, 0x4122, 0x0, 0x0);
        gbc.writeMem(0x112e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0x1130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 001A
        gbc.setState(0x206e, 0x9044, 0x5d80, 0x1248, 0x3cdf, 0xfded, 0x0, 0x0);
        gbc.writeMem(0x206e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9044);
        EXPECT(gbc.pc(), 0x2070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 001B
        gbc.setState(0x1c10, 0xaaaf, 0x6fd0, 0x1971, 0x3621, 0x7998, 0x1, 0x0);
        gbc.writeMem(0x1c10, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xaaaf);
        EXPECT(gbc.pc(), 0x1c12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 001C
        gbc.setState(0x547f, 0xa8a8, 0xd8a0, 0xc5bd, 0xcf08, 0xf81e, 0x0, 0x1);
        gbc.writeMem(0x547f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa8a8);
        EXPECT(gbc.pc(), 0x5481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 001D
        gbc.setState(0x4529, 0xb6b7, 0x3730, 0xac36, 0xcf46, 0xe017, 0x1, 0x0);
        gbc.writeMem(0x4529, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb6b7);
        EXPECT(gbc.pc(), 0x452b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 001F
        gbc.setState(0x15ff, 0x7f29, 0xd370, 0x9834, 0x1769, 0x806a, 0x1, 0x0);
        gbc.writeMem(0x15ff, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7f29);
        EXPECT(gbc.pc(), 0x1601);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0020
        gbc.setState(0x849b, 0xadf1, 0xb250, 0xca23, 0xf6d4, 0x9062, 0x0, 0x0);
        gbc.writeMem(0x849b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xadf1);
        EXPECT(gbc.pc(), 0x849d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x849b), 0xcb);
        EXPECT(gbc.readMem(0x849c), 0xa1);
        // CB A1 0021
        gbc.setState(0x5327, 0xc893, 0xcf0, 0x2562, 0x3437, 0xffef, 0x0, 0x0);
        gbc.writeMem(0x5327, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc893);
        EXPECT(gbc.pc(), 0x5329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0022
        gbc.setState(0x3468, 0xce0f, 0xdb30, 0xa3b, 0x6f01, 0x687e, 0x1, 0x0);
        gbc.writeMem(0x3468, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xce0f);
        EXPECT(gbc.pc(), 0x346a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0023
        gbc.setState(0x4b42, 0xe98d, 0x4b40, 0xde5, 0x795e, 0x4501, 0x0, 0x0);
        gbc.writeMem(0x4b42, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe98d);
        EXPECT(gbc.pc(), 0x4b44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0024
        gbc.setState(0x73f5, 0x793a, 0x1090, 0xcd63, 0x47c5, 0xa462, 0x0, 0x0);
        gbc.writeMem(0x73f5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x793a);
        EXPECT(gbc.pc(), 0x73f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0025
        gbc.setState(0xdc01, 0x3268, 0xe2d0, 0xbc30, 0x5d07, 0x74b0, 0x1, 0x0);
        gbc.writeMem(0xdc01, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3268);
        EXPECT(gbc.pc(), 0xdc03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc01), 0xcb);
        EXPECT(gbc.readMem(0xdc02), 0xa1);
        // CB A1 0026
        gbc.setState(0x338b, 0x4992, 0x87f0, 0xfc65, 0xa29b, 0x63c, 0x1, 0x1);
        gbc.writeMem(0x338b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4992);
        EXPECT(gbc.pc(), 0x338d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0027
        gbc.setState(0x2b0d, 0x3d0f, 0xcb80, 0x87fb, 0xc00b, 0x3b27, 0x1, 0x0);
        gbc.writeMem(0x2b0d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3d0f);
        EXPECT(gbc.pc(), 0x2b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0028
        gbc.setState(0xded4, 0xfb22, 0x39a0, 0xeef2, 0xf917, 0xf39c, 0x0, 0x1);
        gbc.writeMem(0xded4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfb22);
        EXPECT(gbc.pc(), 0xded6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded4), 0xcb);
        EXPECT(gbc.readMem(0xded5), 0xa1);
        // CB A1 0029
        gbc.setState(0x4748, 0x9bfb, 0xace0, 0x23bd, 0x2de1, 0x521f, 0x1, 0x0);
        gbc.writeMem(0x4748, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9bfb);
        EXPECT(gbc.pc(), 0x474a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 002A
        gbc.setState(0x24af, 0xd2aa, 0xccf0, 0x84b0, 0xd29a, 0xbf54, 0x0, 0x0);
        gbc.writeMem(0x24af, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd2aa);
        EXPECT(gbc.pc(), 0x24b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 002B
        gbc.setState(0x22ee, 0xfc71, 0x7c10, 0x3110, 0x463f, 0x16f6, 0x1, 0x0);
        gbc.writeMem(0x22ee, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfc71);
        EXPECT(gbc.pc(), 0x22f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 002C
        gbc.setState(0x3f12, 0xc04b, 0x260, 0x6e8, 0x5b27, 0x66cb, 0x0, 0x0);
        gbc.writeMem(0x3f12, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc04b);
        EXPECT(gbc.pc(), 0x3f14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 002D
        gbc.setState(0xdd0d, 0x7494, 0x2820, 0x1866, 0x3baa, 0x76d6, 0x0, 0x1);
        gbc.writeMem(0xdd0d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7494);
        EXPECT(gbc.pc(), 0xdd0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd0d), 0xcb);
        EXPECT(gbc.readMem(0xdd0e), 0xa1);
        // CB A1 002E
        gbc.setState(0x2ae5, 0xfe5f, 0x3bf0, 0x7c64, 0x3775, 0x6aea, 0x1, 0x1);
        gbc.writeMem(0x2ae5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfe5f);
        EXPECT(gbc.pc(), 0x2ae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 002F
        gbc.setState(0x3007, 0x69df, 0xafe0, 0xcd21, 0x4ac9, 0x3091, 0x0, 0x1);
        gbc.writeMem(0x3007, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x69df);
        EXPECT(gbc.pc(), 0x3009);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0030
        gbc.setState(0x728a, 0x53da, 0x3340, 0xc640, 0xa599, 0xb996, 0x0, 0x1);
        gbc.writeMem(0x728a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x53da);
        EXPECT(gbc.pc(), 0x728c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0031
        gbc.setState(0xb800, 0xffa8, 0x3da0, 0x87b6, 0xce2c, 0x8b87, 0x0, 0x1);
        gbc.writeMem(0xb800, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xffa8);
        EXPECT(gbc.pc(), 0xb802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb800), 0xcb);
        EXPECT(gbc.readMem(0xb801), 0xa1);
        // CB A1 0032
        gbc.setState(0x9869, 0x4b99, 0xd150, 0xad6b, 0x1381, 0x2a47, 0x1, 0x1);
        gbc.writeMem(0x9869, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4b99);
        EXPECT(gbc.pc(), 0x986b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9869), 0xcb);
        EXPECT(gbc.readMem(0x986a), 0xa1);
        // CB A1 0033
        gbc.setState(0x1252, 0x17ea, 0x6a40, 0x67f8, 0x93c1, 0xb178, 0x1, 0x0);
        gbc.writeMem(0x1252, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x17ea);
        EXPECT(gbc.pc(), 0x1254);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0034
        gbc.setState(0x266f, 0xad9c, 0x3f20, 0x2b0c, 0x1e0d, 0xdb90, 0x1, 0x1);
        gbc.writeMem(0x266f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xad9c);
        EXPECT(gbc.pc(), 0x2671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0035
        gbc.setState(0x71b5, 0x7394, 0xaa90, 0xe943, 0x7336, 0xcef1, 0x1, 0x1);
        gbc.writeMem(0x71b5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7394);
        EXPECT(gbc.pc(), 0x71b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0036
        gbc.setState(0xdbe7, 0x7d31, 0x2650, 0x6d84, 0x1062, 0x4ab7, 0x0, 0x0);
        gbc.writeMem(0xdbe7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7d31);
        EXPECT(gbc.pc(), 0xdbe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe7), 0xcb);
        EXPECT(gbc.readMem(0xdbe8), 0xa1);
        // CB A1 0037
        gbc.setState(0x393e, 0x753f, 0x80e0, 0x68bf, 0x1df7, 0x4da1, 0x1, 0x1);
        gbc.writeMem(0x393e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x753f);
        EXPECT(gbc.pc(), 0x3940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0038
        gbc.setState(0xeeb7, 0x54ff, 0x380, 0xca51, 0xd4b6, 0x903e, 0x0, 0x0);
        gbc.writeMem(0xeeb7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x54ff);
        EXPECT(gbc.pc(), 0xeeb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb7), 0xcb);
        EXPECT(gbc.readMem(0xeeb8), 0xa1);
        // CB A1 0039
        gbc.setState(0x71c8, 0x8e85, 0x260, 0xb61f, 0xf054, 0xad93, 0x0, 0x1);
        gbc.writeMem(0x71c8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8e85);
        EXPECT(gbc.pc(), 0x71ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 003A
        gbc.setState(0x6252, 0x5252, 0x3300, 0x8f78, 0x2aa, 0x53e5, 0x0, 0x1);
        gbc.writeMem(0x6252, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5252);
        EXPECT(gbc.pc(), 0x6254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 003B
        gbc.setState(0x863f, 0x23ac, 0xc8a0, 0x707c, 0xab13, 0xb800, 0x0, 0x0);
        gbc.writeMem(0x863f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x23ac);
        EXPECT(gbc.pc(), 0x8641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863f), 0xcb);
        EXPECT(gbc.readMem(0x8640), 0xa1);
        // CB A1 003C
        gbc.setState(0x7030, 0xc056, 0xc9f0, 0xdd19, 0x6d92, 0x3713, 0x1, 0x1);
        gbc.writeMem(0x7030, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc056);
        EXPECT(gbc.pc(), 0x7032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 003D
        gbc.setState(0x8fd0, 0xcee3, 0x8d10, 0xec62, 0xcbe, 0x5dd0, 0x0, 0x0);
        gbc.writeMem(0x8fd0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xcee3);
        EXPECT(gbc.pc(), 0x8fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd0), 0xcb);
        EXPECT(gbc.readMem(0x8fd1), 0xa1);
        // CB A1 003E
        gbc.setState(0x4472, 0x85d3, 0x6250, 0xd714, 0xfd4, 0x9cc8, 0x0, 0x1);
        gbc.writeMem(0x4472, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x85d3);
        EXPECT(gbc.pc(), 0x4474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 003F
        gbc.setState(0x32bc, 0x32b3, 0x7e50, 0x2674, 0x414c, 0x1194, 0x0, 0x1);
        gbc.writeMem(0x32bc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x32b3);
        EXPECT(gbc.pc(), 0x32be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0040
        gbc.setState(0x72d8, 0xd79a, 0x8330, 0x55f2, 0xf1e0, 0xf82e, 0x0, 0x1);
        gbc.writeMem(0x72d8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd79a);
        EXPECT(gbc.pc(), 0x72da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0041
        gbc.setState(0xe5fd, 0x3504, 0xba90, 0x427d, 0x59e0, 0x620, 0x1, 0x0);
        gbc.writeMem(0xe5fd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3504);
        EXPECT(gbc.pc(), 0xe5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5fd), 0xcb);
        EXPECT(gbc.readMem(0xe5fe), 0xa1);
        // CB A1 0042
        gbc.setState(0xb218, 0xea5d, 0x68c0, 0x96c8, 0x6b34, 0xf00a, 0x1, 0x0);
        gbc.writeMem(0xb218, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xea5d);
        EXPECT(gbc.pc(), 0xb21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb218), 0xcb);
        EXPECT(gbc.readMem(0xb219), 0xa1);
        // CB A1 0043
        gbc.setState(0x2b82, 0x5ed3, 0x5a50, 0xf566, 0x1a63, 0xda9a, 0x0, 0x0);
        gbc.writeMem(0x2b82, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5ed3);
        EXPECT(gbc.pc(), 0x2b84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0044
        gbc.setState(0x26bd, 0xecc7, 0x3b20, 0x959, 0x5d5, 0xcffe, 0x1, 0x0);
        gbc.writeMem(0x26bd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xecc7);
        EXPECT(gbc.pc(), 0x26bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0046
        gbc.setState(0x107c, 0x131d, 0xc1c0, 0x4761, 0x3dba, 0xb7f9, 0x0, 0x0);
        gbc.writeMem(0x107c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x131d);
        EXPECT(gbc.pc(), 0x107e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0047
        gbc.setState(0x37d1, 0x4b82, 0x4b20, 0x75fd, 0x5282, 0xa6a6, 0x0, 0x0);
        gbc.writeMem(0x37d1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4b82);
        EXPECT(gbc.pc(), 0x37d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0048
        gbc.setState(0x5f11, 0x9c55, 0xd1c0, 0x2215, 0xcb3, 0xeb42, 0x0, 0x0);
        gbc.writeMem(0x5f11, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9c55);
        EXPECT(gbc.pc(), 0x5f13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0049
        gbc.setState(0x52ab, 0x5ea2, 0xb7e0, 0x51ae, 0x842b, 0x8241, 0x1, 0x0);
        gbc.writeMem(0x52ab, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5ea2);
        EXPECT(gbc.pc(), 0x52ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 004B
        gbc.setState(0xe4c, 0xac6f, 0xc400, 0x1795, 0x707a, 0x4658, 0x0, 0x1);
        gbc.writeMem(0xe4c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xac6f);
        EXPECT(gbc.pc(), 0xe4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 004C
        gbc.setState(0xdb63, 0xac36, 0x710, 0xc17, 0xb322, 0xe8a0, 0x1, 0x1);
        gbc.writeMem(0xdb63, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xac36);
        EXPECT(gbc.pc(), 0xdb65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb63), 0xcb);
        EXPECT(gbc.readMem(0xdb64), 0xa1);
        // CB A1 004D
        gbc.setState(0x382e, 0xebf1, 0x9c90, 0xf979, 0xa5e5, 0x5785, 0x0, 0x1);
        gbc.writeMem(0x382e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xebf1);
        EXPECT(gbc.pc(), 0x3830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 004E
        gbc.setState(0x61ae, 0x8af7, 0xf2a0, 0x97f, 0xe636, 0x4aa, 0x1, 0x1);
        gbc.writeMem(0x61ae, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8af7);
        EXPECT(gbc.pc(), 0x61b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 004F
        gbc.setState(0x78f0, 0x20ef, 0x9750, 0xcb33, 0x1f7a, 0x4cd, 0x1, 0x1);
        gbc.writeMem(0x78f0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x20ef);
        EXPECT(gbc.pc(), 0x78f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0050
        gbc.setState(0xa9d7, 0xcfdc, 0xa7d0, 0xaaa1, 0xa5c4, 0x23c1, 0x1, 0x0);
        gbc.writeMem(0xa9d7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcfdc);
        EXPECT(gbc.pc(), 0xa9d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d7), 0xcb);
        EXPECT(gbc.readMem(0xa9d8), 0xa1);
        // CB A1 0051
        gbc.setState(0x6f3b, 0xb6d, 0x1a0, 0xc791, 0x5ac4, 0x3753, 0x0, 0x1);
        gbc.writeMem(0x6f3b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb6d);
        EXPECT(gbc.pc(), 0x6f3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0052
        gbc.setState(0xb836, 0x3b48, 0xba40, 0x2c35, 0x6721, 0xb6c4, 0x1, 0x1);
        gbc.writeMem(0xb836, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3b48);
        EXPECT(gbc.pc(), 0xb838);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb836), 0xcb);
        EXPECT(gbc.readMem(0xb837), 0xa1);
        // CB A1 0053
        gbc.setState(0x1935, 0x10ea, 0x9790, 0xeb4d, 0x4f9a, 0xc723, 0x0, 0x1);
        gbc.writeMem(0x1935, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x10ea);
        EXPECT(gbc.pc(), 0x1937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0054
        gbc.setState(0x1eca, 0x8691, 0xebe0, 0xa2c2, 0xac51, 0x905b, 0x1, 0x0);
        gbc.writeMem(0x1eca, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8691);
        EXPECT(gbc.pc(), 0x1ecc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0055
        gbc.setState(0xe565, 0xdbf8, 0xe0f0, 0x4643, 0xba62, 0x57d0, 0x0, 0x1);
        gbc.writeMem(0xe565, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xdbf8);
        EXPECT(gbc.pc(), 0xe567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe565), 0xcb);
        EXPECT(gbc.readMem(0xe566), 0xa1);
        // CB A1 0056
        gbc.setState(0xc322, 0xaaa9, 0x1050, 0xe747, 0xfb, 0xc644, 0x1, 0x0);
        gbc.writeMem(0xc322, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaaa9);
        EXPECT(gbc.pc(), 0xc324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc322), 0xcb);
        EXPECT(gbc.readMem(0xc323), 0xa1);
        // CB A1 0057
        gbc.setState(0xa240, 0x540f, 0xf550, 0xce50, 0x526a, 0x91a5, 0x1, 0x0);
        gbc.writeMem(0xa240, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x540f);
        EXPECT(gbc.pc(), 0xa242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa240), 0xcb);
        EXPECT(gbc.readMem(0xa241), 0xa1);
        // CB A1 0058
        gbc.setState(0x6ad1, 0xcfbc, 0x2430, 0xddae, 0xc48a, 0x16dc, 0x1, 0x1);
        gbc.writeMem(0x6ad1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xcfbc);
        EXPECT(gbc.pc(), 0x6ad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0059
        gbc.setState(0xa290, 0xb45c, 0x5470, 0x5f7f, 0xd7fd, 0x2021, 0x1, 0x1);
        gbc.writeMem(0xa290, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb45c);
        EXPECT(gbc.pc(), 0xa292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa290), 0xcb);
        EXPECT(gbc.readMem(0xa291), 0xa1);
        // CB A1 005A
        gbc.setState(0x3c5f, 0xfcdc, 0x5e90, 0xeacd, 0x6e8a, 0x85eb, 0x1, 0x0);
        gbc.writeMem(0x3c5f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfcdc);
        EXPECT(gbc.pc(), 0x3c61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 005B
        gbc.setState(0x70ef, 0x7540, 0xcb50, 0x1c70, 0x1124, 0xade9, 0x0, 0x1);
        gbc.writeMem(0x70ef, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7540);
        EXPECT(gbc.pc(), 0x70f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 005C
        gbc.setState(0x1c30, 0xc75, 0x1fe0, 0x2818, 0xd1f4, 0xa59f, 0x1, 0x0);
        gbc.writeMem(0x1c30, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc75);
        EXPECT(gbc.pc(), 0x1c32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 005D
        gbc.setState(0xb0b, 0x79a5, 0xab70, 0xbbc9, 0xdb6f, 0x2e94, 0x1, 0x1);
        gbc.writeMem(0xb0b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x79a5);
        EXPECT(gbc.pc(), 0xb0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 005E
        gbc.setState(0x756c, 0x697e, 0xdc30, 0x4a39, 0x31d8, 0x7f9, 0x0, 0x1);
        gbc.writeMem(0x756c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x697e);
        EXPECT(gbc.pc(), 0x756e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 005F
        gbc.setState(0x4891, 0xd053, 0x4260, 0x6a5b, 0xf17b, 0xfd2d, 0x1, 0x0);
        gbc.writeMem(0x4891, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd053);
        EXPECT(gbc.pc(), 0x4893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0060
        gbc.setState(0x9082, 0x55f6, 0xb660, 0x4559, 0x59a6, 0xabcf, 0x0, 0x1);
        gbc.writeMem(0x9082, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x55f6);
        EXPECT(gbc.pc(), 0x9084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9082), 0xcb);
        EXPECT(gbc.readMem(0x9083), 0xa1);
        // CB A1 0061
        gbc.setState(0x1f00, 0x4c9d, 0x9db0, 0xd826, 0x8ccb, 0xfce0, 0x0, 0x1);
        gbc.writeMem(0x1f00, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4c9d);
        EXPECT(gbc.pc(), 0x1f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0062
        gbc.setState(0x610a, 0x3591, 0xbc50, 0xf6f1, 0x9719, 0xc641, 0x0, 0x1);
        gbc.writeMem(0x610a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3591);
        EXPECT(gbc.pc(), 0x610c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0063
        gbc.setState(0x4ccb, 0x57d1, 0xbf40, 0x6929, 0x635d, 0x2c89, 0x1, 0x1);
        gbc.writeMem(0x4ccb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x57d1);
        EXPECT(gbc.pc(), 0x4ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0064
        gbc.setState(0xcae4, 0xbd75, 0xfc10, 0x11a4, 0x4d5c, 0x5be3, 0x1, 0x0);
        gbc.writeMem(0xcae4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xbd75);
        EXPECT(gbc.pc(), 0xcae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae4), 0xcb);
        EXPECT(gbc.readMem(0xcae5), 0xa1);
        // CB A1 0065
        gbc.setState(0xfee, 0xef91, 0x7870, 0x19fa, 0x7522, 0x94da, 0x1, 0x0);
        gbc.writeMem(0xfee, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xef91);
        EXPECT(gbc.pc(), 0xff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0066
        gbc.setState(0xa885, 0xe4ad, 0x1f60, 0x9c8c, 0xbf7, 0xd80b, 0x0, 0x0);
        gbc.writeMem(0xa885, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe4ad);
        EXPECT(gbc.pc(), 0xa887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa885), 0xcb);
        EXPECT(gbc.readMem(0xa886), 0xa1);
        // CB A1 0067
        gbc.setState(0xcfcb, 0xf84, 0xb270, 0xef6f, 0xd844, 0xdc51, 0x1, 0x0);
        gbc.writeMem(0xcfcb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf84);
        EXPECT(gbc.pc(), 0xcfcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfcb), 0xcb);
        EXPECT(gbc.readMem(0xcfcc), 0xa1);
        // CB A1 0068
        gbc.setState(0x883b, 0x869a, 0xe590, 0xf58d, 0xa326, 0x30c7, 0x0, 0x1);
        gbc.writeMem(0x883b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x869a);
        EXPECT(gbc.pc(), 0x883d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x883b), 0xcb);
        EXPECT(gbc.readMem(0x883c), 0xa1);
        // CB A1 0069
        gbc.setState(0x5923, 0xfaef, 0xbea0, 0x2a38, 0x8ed9, 0xa7c9, 0x1, 0x1);
        gbc.writeMem(0x5923, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfaef);
        EXPECT(gbc.pc(), 0x5925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 006A
        gbc.setState(0xb468, 0x6f6d, 0x1b0, 0xc7e4, 0x9529, 0x7713, 0x1, 0x0);
        gbc.writeMem(0xb468, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6f6d);
        EXPECT(gbc.pc(), 0xb46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb468), 0xcb);
        EXPECT(gbc.readMem(0xb469), 0xa1);
        // CB A1 006B
        gbc.setState(0xd14f, 0x8ca7, 0xab90, 0x4dda, 0x13e7, 0x6d88, 0x0, 0x1);
        gbc.writeMem(0xd14f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8ca7);
        EXPECT(gbc.pc(), 0xd151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd14f), 0xcb);
        EXPECT(gbc.readMem(0xd150), 0xa1);
        // CB A1 006C
        gbc.setState(0x3946, 0x24a6, 0x4170, 0x9990, 0xb777, 0xa4f3, 0x0, 0x1);
        gbc.writeMem(0x3946, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x24a6);
        EXPECT(gbc.pc(), 0x3948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 006D
        gbc.setState(0x53de, 0x1347, 0x29d0, 0xf103, 0x458d, 0xbdac, 0x0, 0x0);
        gbc.writeMem(0x53de, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1347);
        EXPECT(gbc.pc(), 0x53e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 006F
        gbc.setState(0x8c60, 0x3624, 0x1300, 0x39d9, 0x58d4, 0xa227, 0x0, 0x1);
        gbc.writeMem(0x8c60, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3624);
        EXPECT(gbc.pc(), 0x8c62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c60), 0xcb);
        EXPECT(gbc.readMem(0x8c61), 0xa1);
        // CB A1 0070
        gbc.setState(0x5650, 0x56e7, 0x44e0, 0xde6c, 0x179e, 0xe97, 0x0, 0x1);
        gbc.writeMem(0x5650, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x56e7);
        EXPECT(gbc.pc(), 0x5652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0071
        gbc.setState(0x221b, 0x2cb3, 0x7bd0, 0x313b, 0xd2d5, 0x8167, 0x0, 0x1);
        gbc.writeMem(0x221b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2cb3);
        EXPECT(gbc.pc(), 0x221d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0072
        gbc.setState(0xbb6b, 0x8f6c, 0x8af0, 0xcdfa, 0x2aed, 0xb0e7, 0x0, 0x1);
        gbc.writeMem(0xbb6b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8f6c);
        EXPECT(gbc.pc(), 0xbb6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb6b), 0xcb);
        EXPECT(gbc.readMem(0xbb6c), 0xa1);
        // CB A1 0073
        gbc.setState(0x52bd, 0xe673, 0xfa00, 0x64de, 0x6638, 0x1c6f, 0x1, 0x1);
        gbc.writeMem(0x52bd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe673);
        EXPECT(gbc.pc(), 0x52bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0075
        gbc.setState(0xa2ff, 0x492b, 0xa280, 0x628b, 0x6e57, 0x7ba8, 0x0, 0x1);
        gbc.writeMem(0xa2ff, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x492b);
        EXPECT(gbc.pc(), 0xa301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ff), 0xcb);
        EXPECT(gbc.readMem(0xa300), 0xa1);
        // CB A1 0076
        gbc.setState(0x5d25, 0xe891, 0x29b0, 0xbf94, 0xc23d, 0x21ed, 0x0, 0x1);
        gbc.writeMem(0x5d25, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe891);
        EXPECT(gbc.pc(), 0x5d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0077
        gbc.setState(0x4d97, 0x19b, 0x2f30, 0x954d, 0xf489, 0x6753, 0x1, 0x1);
        gbc.writeMem(0x4d97, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x19b);
        EXPECT(gbc.pc(), 0x4d99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0078
        gbc.setState(0x846c, 0xdf09, 0x2850, 0x7279, 0xca85, 0x8beb, 0x0, 0x1);
        gbc.writeMem(0x846c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdf09);
        EXPECT(gbc.pc(), 0x846e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x846c), 0xcb);
        EXPECT(gbc.readMem(0x846d), 0xa1);
        // CB A1 0079
        gbc.setState(0xe35c, 0xd453, 0x1be0, 0x76c7, 0xa8f3, 0xa719, 0x0, 0x0);
        gbc.writeMem(0xe35c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd453);
        EXPECT(gbc.pc(), 0xe35e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe35c), 0xcb);
        EXPECT(gbc.readMem(0xe35d), 0xa1);
        // CB A1 007A
        gbc.setState(0xd218, 0x7501, 0xf9f0, 0xea9b, 0x5885, 0x775c, 0x1, 0x1);
        gbc.writeMem(0xd218, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7501);
        EXPECT(gbc.pc(), 0xd21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd218), 0xcb);
        EXPECT(gbc.readMem(0xd219), 0xa1);
        // CB A1 007B
        gbc.setState(0x1f7f, 0x91e0, 0x21f0, 0x87fb, 0x13bd, 0x97a6, 0x0, 0x0);
        gbc.writeMem(0x1f7f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x91e0);
        EXPECT(gbc.pc(), 0x1f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 007C
        gbc.setState(0xa290, 0x127, 0xb320, 0xd958, 0xf657, 0x501, 0x1, 0x1);
        gbc.writeMem(0xa290, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x127);
        EXPECT(gbc.pc(), 0xa292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa290), 0xcb);
        EXPECT(gbc.readMem(0xa291), 0xa1);
        // CB A1 007D
        gbc.setState(0xa7c6, 0x2512, 0x7ec0, 0xe82c, 0x430f, 0xbbb1, 0x0, 0x1);
        gbc.writeMem(0xa7c6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2512);
        EXPECT(gbc.pc(), 0xa7c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c6), 0xcb);
        EXPECT(gbc.readMem(0xa7c7), 0xa1);
        // CB A1 007E
        gbc.setState(0x8573, 0xed21, 0x29c0, 0x7f4, 0xe333, 0x849d, 0x1, 0x1);
        gbc.writeMem(0x8573, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xed21);
        EXPECT(gbc.pc(), 0x8575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8573), 0xcb);
        EXPECT(gbc.readMem(0x8574), 0xa1);
        // CB A1 007F
        gbc.setState(0x8d95, 0x96c9, 0x6f40, 0xeb66, 0x6f92, 0x45a5, 0x0, 0x0);
        gbc.writeMem(0x8d95, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x96c9);
        EXPECT(gbc.pc(), 0x8d97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d95), 0xcb);
        EXPECT(gbc.readMem(0x8d96), 0xa1);
        // CB A1 0080
        gbc.setState(0xf82, 0x8377, 0xcf80, 0xfbba, 0xdab5, 0xac14, 0x0, 0x1);
        gbc.writeMem(0xf82, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8377);
        EXPECT(gbc.pc(), 0xf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0081
        gbc.setState(0x93a9, 0xd2db, 0x7e80, 0x6fcd, 0xaf29, 0x5cb4, 0x0, 0x0);
        gbc.writeMem(0x93a9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd2db);
        EXPECT(gbc.pc(), 0x93ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93a9), 0xcb);
        EXPECT(gbc.readMem(0x93aa), 0xa1);
        // CB A1 0082
        gbc.setState(0x5fff, 0x4b03, 0x8c80, 0x46e7, 0x5bc5, 0xc3bc, 0x1, 0x1);
        gbc.writeMem(0x5fff, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4b03);
        EXPECT(gbc.pc(), 0x6001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0083
        gbc.setState(0xcba7, 0xa140, 0xece0, 0xf3be, 0x3f19, 0x5609, 0x0, 0x1);
        gbc.writeMem(0xcba7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa140);
        EXPECT(gbc.pc(), 0xcba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba7), 0xcb);
        EXPECT(gbc.readMem(0xcba8), 0xa1);
        // CB A1 0084
        gbc.setState(0x4ea2, 0x812d, 0xa6e0, 0x2f1e, 0xcf4c, 0x7216, 0x0, 0x1);
        gbc.writeMem(0x4ea2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x812d);
        EXPECT(gbc.pc(), 0x4ea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0085
        gbc.setState(0xb48b, 0x6d31, 0x2e10, 0xc3de, 0x674, 0xa781, 0x0, 0x1);
        gbc.writeMem(0xb48b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6d31);
        EXPECT(gbc.pc(), 0xb48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb48b), 0xcb);
        EXPECT(gbc.readMem(0xb48c), 0xa1);
        // CB A1 0086
        gbc.setState(0x94d4, 0x2896, 0x79f0, 0xca01, 0xa2d4, 0x2a76, 0x1, 0x0);
        gbc.writeMem(0x94d4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2896);
        EXPECT(gbc.pc(), 0x94d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94d4), 0xcb);
        EXPECT(gbc.readMem(0x94d5), 0xa1);
        // CB A1 0087
        gbc.setState(0x8789, 0xd8f9, 0x17e0, 0x785e, 0x1b20, 0x11ea, 0x1, 0x1);
        gbc.writeMem(0x8789, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd8f9);
        EXPECT(gbc.pc(), 0x878b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8789), 0xcb);
        EXPECT(gbc.readMem(0x878a), 0xa1);
        // CB A1 0088
        gbc.setState(0x68a, 0x406e, 0xb9f0, 0x2fc4, 0x87ec, 0x37d2, 0x1, 0x0);
        gbc.writeMem(0x68a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x406e);
        EXPECT(gbc.pc(), 0x68c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0089
        gbc.setState(0x8159, 0x58ac, 0xd360, 0xc602, 0x8abc, 0x5830, 0x0, 0x0);
        gbc.writeMem(0x8159, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x58ac);
        EXPECT(gbc.pc(), 0x815b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8159), 0xcb);
        EXPECT(gbc.readMem(0x815a), 0xa1);
        // CB A1 008A
        gbc.setState(0x2256, 0x8d2b, 0x4570, 0x6ee9, 0xa6d4, 0xe0ba, 0x0, 0x0);
        gbc.writeMem(0x2256, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8d2b);
        EXPECT(gbc.pc(), 0x2258);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 008B
        gbc.setState(0x3c69, 0xf681, 0xe450, 0x8601, 0x6106, 0xff0f, 0x0, 0x1);
        gbc.writeMem(0x3c69, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf681);
        EXPECT(gbc.pc(), 0x3c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 008D
        gbc.setState(0x1860, 0x950, 0xf7f0, 0x4c1, 0xf167, 0x16e9, 0x1, 0x1);
        gbc.writeMem(0x1860, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x950);
        EXPECT(gbc.pc(), 0x1862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 008E
        gbc.setState(0x420, 0x4c72, 0xf2b0, 0x8e2b, 0xe73e, 0xea48, 0x1, 0x1);
        gbc.writeMem(0x420, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4c72);
        EXPECT(gbc.pc(), 0x422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 008F
        gbc.setState(0xe136, 0x52d, 0xd600, 0x3d98, 0xf3f0, 0xc41, 0x1, 0x1);
        gbc.writeMem(0xe136, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x52d);
        EXPECT(gbc.pc(), 0xe138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe136), 0xcb);
        EXPECT(gbc.readMem(0xe137), 0xa1);
        // CB A1 0090
        gbc.setState(0x12da, 0xc720, 0x9810, 0x2c52, 0x244, 0x71dc, 0x0, 0x1);
        gbc.writeMem(0x12da, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc720);
        EXPECT(gbc.pc(), 0x12dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0091
        gbc.setState(0xe081, 0x2e9d, 0x9880, 0xaddd, 0x6002, 0xc30d, 0x1, 0x0);
        gbc.writeMem(0xe081, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2e9d);
        EXPECT(gbc.pc(), 0xe083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe081), 0xcb);
        EXPECT(gbc.readMem(0xe082), 0xa1);
        // CB A1 0092
        gbc.setState(0xeac9, 0x4b03, 0x8790, 0x8e01, 0x1834, 0x4b95, 0x1, 0x1);
        gbc.writeMem(0xeac9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4b03);
        EXPECT(gbc.pc(), 0xeacb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac9), 0xcb);
        EXPECT(gbc.readMem(0xeaca), 0xa1);
        // CB A1 0093
        gbc.setState(0x95a8, 0x4c15, 0x3260, 0x1522, 0xd223, 0x6bd5, 0x1, 0x1);
        gbc.writeMem(0x95a8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4c15);
        EXPECT(gbc.pc(), 0x95aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a8), 0xcb);
        EXPECT(gbc.readMem(0x95a9), 0xa1);
        // CB A1 0094
        gbc.setState(0x7668, 0x7c74, 0x83d0, 0xe7a7, 0x10dc, 0x21cf, 0x1, 0x0);
        gbc.writeMem(0x7668, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7c74);
        EXPECT(gbc.pc(), 0x766a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0095
        gbc.setState(0x339d, 0xab39, 0xfaf0, 0x3c21, 0xd853, 0x645b, 0x1, 0x0);
        gbc.writeMem(0x339d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xab39);
        EXPECT(gbc.pc(), 0x339f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0096
        gbc.setState(0x6dc, 0x5e07, 0xff40, 0x9e0, 0xb304, 0x2384, 0x1, 0x1);
        gbc.writeMem(0x6dc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5e07);
        EXPECT(gbc.pc(), 0x6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0097
        gbc.setState(0x5592, 0xd203, 0x3220, 0x50ae, 0x4e56, 0x9b, 0x1, 0x0);
        gbc.writeMem(0x5592, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd203);
        EXPECT(gbc.pc(), 0x5594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0098
        gbc.setState(0x7ebd, 0x355b, 0x8c00, 0x6fa3, 0xa029, 0xc57f, 0x1, 0x1);
        gbc.writeMem(0x7ebd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x355b);
        EXPECT(gbc.pc(), 0x7ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0099
        gbc.setState(0x8f5a, 0x80fb, 0x68f0, 0x5d9, 0xcd42, 0xfb6a, 0x0, 0x0);
        gbc.writeMem(0x8f5a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x80fb);
        EXPECT(gbc.pc(), 0x8f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5a), 0xcb);
        EXPECT(gbc.readMem(0x8f5b), 0xa1);
        // CB A1 009A
        gbc.setState(0xa190, 0x8ebe, 0x2710, 0x748f, 0xfb6b, 0xbbc2, 0x0, 0x0);
        gbc.writeMem(0xa190, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8ebe);
        EXPECT(gbc.pc(), 0xa192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa190), 0xcb);
        EXPECT(gbc.readMem(0xa191), 0xa1);
        // CB A1 009B
        gbc.setState(0x4654, 0xaff6, 0x4b40, 0x6c0f, 0xf1e8, 0x5780, 0x1, 0x0);
        gbc.writeMem(0x4654, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xaff6);
        EXPECT(gbc.pc(), 0x4656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 009C
        gbc.setState(0x77a8, 0x8c86, 0xb8a0, 0xd947, 0x8269, 0x9e19, 0x0, 0x1);
        gbc.writeMem(0x77a8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8c86);
        EXPECT(gbc.pc(), 0x77aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 009D
        gbc.setState(0x6b7d, 0x40bb, 0x7990, 0x2ed0, 0x875c, 0xb5b3, 0x1, 0x1);
        gbc.writeMem(0x6b7d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x40bb);
        EXPECT(gbc.pc(), 0x6b7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 009E
        gbc.setState(0x36a9, 0x2f2e, 0x330, 0x679b, 0xa956, 0xfa93, 0x0, 0x1);
        gbc.writeMem(0x36a9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2f2e);
        EXPECT(gbc.pc(), 0x36ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 009F
        gbc.setState(0xcdd1, 0x9603, 0x1010, 0x3f59, 0x67d6, 0x20da, 0x1, 0x1);
        gbc.writeMem(0xcdd1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0xcdd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdd1), 0xcb);
        EXPECT(gbc.readMem(0xcdd2), 0xa1);
        // CB A1 00A0
        gbc.setState(0x144b, 0xb881, 0x2fb0, 0xed75, 0x87df, 0x2ef2, 0x0, 0x1);
        gbc.writeMem(0x144b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb881);
        EXPECT(gbc.pc(), 0x144d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00A1
        gbc.setState(0x349e, 0xb93f, 0x8eb0, 0xc23e, 0x5a8d, 0x4bed, 0x0, 0x1);
        gbc.writeMem(0x349e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb93f);
        EXPECT(gbc.pc(), 0x34a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00A2
        gbc.setState(0x90a8, 0x412f, 0x1ef0, 0x629c, 0xbe46, 0xb118, 0x1, 0x0);
        gbc.writeMem(0x90a8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x412f);
        EXPECT(gbc.pc(), 0x90aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90a8), 0xcb);
        EXPECT(gbc.readMem(0x90a9), 0xa1);
        // CB A1 00A3
        gbc.setState(0x286a, 0x9446, 0x6ed0, 0x3883, 0x407d, 0xb25b, 0x0, 0x0);
        gbc.writeMem(0x286a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9446);
        EXPECT(gbc.pc(), 0x286c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00A5
        gbc.setState(0x5d45, 0xa0aa, 0x6fb0, 0x9e00, 0x6e49, 0x8df, 0x0, 0x1);
        gbc.writeMem(0x5d45, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa0aa);
        EXPECT(gbc.pc(), 0x5d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00A6
        gbc.setState(0x257c, 0x1092, 0x40f0, 0x66ce, 0x3b50, 0xd0de, 0x1, 0x1);
        gbc.writeMem(0x257c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1092);
        EXPECT(gbc.pc(), 0x257e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00A7
        gbc.setState(0x22ba, 0x50b3, 0x4b20, 0xd3be, 0xa70a, 0xbca0, 0x0, 0x0);
        gbc.writeMem(0x22ba, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x50b3);
        EXPECT(gbc.pc(), 0x22bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00A8
        gbc.setState(0x6c24, 0x5f66, 0xd530, 0x7387, 0x5ff3, 0x301d, 0x1, 0x0);
        gbc.writeMem(0x6c24, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5f66);
        EXPECT(gbc.pc(), 0x6c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00A9
        gbc.setState(0x3c20, 0xfa82, 0x220, 0xa294, 0x219a, 0x1b04, 0x1, 0x1);
        gbc.writeMem(0x3c20, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfa82);
        EXPECT(gbc.pc(), 0x3c22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00AA
        gbc.setState(0x5487, 0xf496, 0x5e10, 0xac6, 0x8893, 0x1a0e, 0x0, 0x1);
        gbc.writeMem(0x5487, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf496);
        EXPECT(gbc.pc(), 0x5489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00AC
        gbc.setState(0xd63, 0x7930, 0x6640, 0xefe1, 0x6919, 0xfdb, 0x1, 0x0);
        gbc.writeMem(0xd63, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7930);
        EXPECT(gbc.pc(), 0xd65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00AD
        gbc.setState(0xe572, 0x366, 0xd8b0, 0x19b7, 0x9d25, 0x5b1f, 0x1, 0x1);
        gbc.writeMem(0xe572, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x366);
        EXPECT(gbc.pc(), 0xe574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe572), 0xcb);
        EXPECT(gbc.readMem(0xe573), 0xa1);
        // CB A1 00AE
        gbc.setState(0x7354, 0xd5c7, 0xe040, 0x71d2, 0x4a74, 0x2932, 0x0, 0x0);
        gbc.writeMem(0x7354, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd5c7);
        EXPECT(gbc.pc(), 0x7356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00AF
        gbc.setState(0x5e60, 0x3c66, 0xdd30, 0x5a4c, 0xb7a3, 0x4079, 0x1, 0x1);
        gbc.writeMem(0x5e60, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3c66);
        EXPECT(gbc.pc(), 0x5e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00B0
        gbc.setState(0x664, 0x3936, 0xe730, 0x3f49, 0x3f63, 0x98fb, 0x1, 0x0);
        gbc.writeMem(0x664, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3936);
        EXPECT(gbc.pc(), 0x666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00B1
        gbc.setState(0x4a3e, 0x6b95, 0x4a0, 0x809, 0xe73e, 0x5b99, 0x0, 0x0);
        gbc.writeMem(0x4a3e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6b95);
        EXPECT(gbc.pc(), 0x4a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00B2
        gbc.setState(0xd4d4, 0x3c3e, 0x7870, 0xc1fc, 0x1f28, 0xa528, 0x1, 0x0);
        gbc.writeMem(0xd4d4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3c3e);
        EXPECT(gbc.pc(), 0xd4d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4d4), 0xcb);
        EXPECT(gbc.readMem(0xd4d5), 0xa1);
        // CB A1 00B3
        gbc.setState(0x94c7, 0x9ccb, 0xe0e0, 0x737d, 0x321, 0x2cd2, 0x0, 0x1);
        gbc.writeMem(0x94c7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9ccb);
        EXPECT(gbc.pc(), 0x94c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c7), 0xcb);
        EXPECT(gbc.readMem(0x94c8), 0xa1);
        // CB A1 00B4
        gbc.setState(0xc188, 0x3dc, 0x43c0, 0x2fd0, 0xc0c8, 0x62fb, 0x0, 0x1);
        gbc.writeMem(0xc188, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3dc);
        EXPECT(gbc.pc(), 0xc18a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc188), 0xcb);
        EXPECT(gbc.readMem(0xc189), 0xa1);
        // CB A1 00B5
        gbc.setState(0x451f, 0xc5ff, 0xc990, 0x5d86, 0x8272, 0xb0d6, 0x0, 0x0);
        gbc.writeMem(0x451f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc5ff);
        EXPECT(gbc.pc(), 0x4521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00B6
        gbc.setState(0xebc3, 0xbb5, 0x7700, 0x3ee8, 0xef93, 0xb6c, 0x0, 0x0);
        gbc.writeMem(0xebc3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbb5);
        EXPECT(gbc.pc(), 0xebc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebc3), 0xcb);
        EXPECT(gbc.readMem(0xebc4), 0xa1);
        // CB A1 00B8
        gbc.setState(0x49dd, 0xa95, 0x7eb0, 0x8bb9, 0x78f4, 0xb8d5, 0x0, 0x0);
        gbc.writeMem(0x49dd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa95);
        EXPECT(gbc.pc(), 0x49df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00B9
        gbc.setState(0x9ef5, 0x5096, 0xaef0, 0xed80, 0x3385, 0x3be3, 0x1, 0x0);
        gbc.writeMem(0x9ef5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5096);
        EXPECT(gbc.pc(), 0x9ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ef5), 0xcb);
        EXPECT(gbc.readMem(0x9ef6), 0xa1);
        // CB A1 00BA
        gbc.setState(0x54e9, 0x57da, 0xf7a0, 0x1a8a, 0x927, 0x72a4, 0x1, 0x1);
        gbc.writeMem(0x54e9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x57da);
        EXPECT(gbc.pc(), 0x54eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00BB
        gbc.setState(0x4905, 0x6811, 0x9770, 0xb8c7, 0x1c1a, 0xe6e2, 0x0, 0x1);
        gbc.writeMem(0x4905, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6811);
        EXPECT(gbc.pc(), 0x4907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00BC
        gbc.setState(0x41a5, 0x7f5e, 0x7940, 0xde4, 0xe053, 0xe1ed, 0x0, 0x1);
        gbc.writeMem(0x41a5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7f5e);
        EXPECT(gbc.pc(), 0x41a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00BE
        gbc.setState(0xba0, 0x3098, 0x8a20, 0xe0dd, 0x331c, 0x539, 0x0, 0x0);
        gbc.writeMem(0xba0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3098);
        EXPECT(gbc.pc(), 0xba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00BF
        gbc.setState(0xda08, 0x8b79, 0x9510, 0x518a, 0xfa44, 0xbb73, 0x0, 0x0);
        gbc.writeMem(0xda08, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8b79);
        EXPECT(gbc.pc(), 0xda0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda08), 0xcb);
        EXPECT(gbc.readMem(0xda09), 0xa1);
        // CB A1 00C0
        gbc.setState(0x1a, 0xe7b5, 0xb160, 0xc16c, 0xf136, 0x168a, 0x0, 0x0);
        gbc.writeMem(0x1a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe7b5);
        EXPECT(gbc.pc(), 0x1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00C1
        gbc.setState(0x3d5a, 0x1c21, 0x1760, 0xb2b2, 0xb78f, 0x9eac, 0x1, 0x1);
        gbc.writeMem(0x3d5a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1c21);
        EXPECT(gbc.pc(), 0x3d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00C2
        gbc.setState(0xbe30, 0xcc10, 0xf070, 0x20e1, 0x42e4, 0xdfab, 0x1, 0x0);
        gbc.writeMem(0xbe30, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xcc10);
        EXPECT(gbc.pc(), 0xbe32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe30), 0xcb);
        EXPECT(gbc.readMem(0xbe31), 0xa1);
        // CB A1 00C3
        gbc.setState(0x5450, 0x27b5, 0x1f80, 0xed55, 0x62d7, 0x6c09, 0x0, 0x0);
        gbc.writeMem(0x5450, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x27b5);
        EXPECT(gbc.pc(), 0x5452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00C4
        gbc.setState(0xe156, 0xbfb6, 0xd090, 0x5928, 0x9b87, 0xec6a, 0x0, 0x0);
        gbc.writeMem(0xe156, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xbfb6);
        EXPECT(gbc.pc(), 0xe158);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe156), 0xcb);
        EXPECT(gbc.readMem(0xe157), 0xa1);
        // CB A1 00C5
        gbc.setState(0xdd01, 0xe83d, 0xc710, 0x9cb0, 0x26e6, 0x653, 0x0, 0x1);
        gbc.writeMem(0xdd01, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe83d);
        EXPECT(gbc.pc(), 0xdd03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd01), 0xcb);
        EXPECT(gbc.readMem(0xdd02), 0xa1);
        // CB A1 00C6
        gbc.setState(0x8a8b, 0xdab1, 0x21d0, 0x8f39, 0x15c6, 0x4d94, 0x1, 0x1);
        gbc.writeMem(0x8a8b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xdab1);
        EXPECT(gbc.pc(), 0x8a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a8b), 0xcb);
        EXPECT(gbc.readMem(0x8a8c), 0xa1);
        // CB A1 00C7
        gbc.setState(0xb333, 0xd4df, 0xf950, 0xf8a1, 0x2771, 0x204, 0x0, 0x1);
        gbc.writeMem(0xb333, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd4df);
        EXPECT(gbc.pc(), 0xb335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb333), 0xcb);
        EXPECT(gbc.readMem(0xb334), 0xa1);
        // CB A1 00C8
        gbc.setState(0xecf7, 0xf4a7, 0x9030, 0xdfa6, 0x9ff8, 0x90ca, 0x1, 0x1);
        gbc.writeMem(0xecf7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf4a7);
        EXPECT(gbc.pc(), 0xecf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecf7), 0xcb);
        EXPECT(gbc.readMem(0xecf8), 0xa1);
        // CB A1 00C9
        gbc.setState(0x8e14, 0x934a, 0x1c70, 0x5db4, 0xa123, 0x837, 0x1, 0x1);
        gbc.writeMem(0x8e14, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x934a);
        EXPECT(gbc.pc(), 0x8e16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e14), 0xcb);
        EXPECT(gbc.readMem(0x8e15), 0xa1);
        // CB A1 00CA
        gbc.setState(0x8e, 0x265, 0xb6a0, 0x73c5, 0x385c, 0x464b, 0x0, 0x0);
        gbc.writeMem(0x8e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x265);
        EXPECT(gbc.pc(), 0x90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00CB
        gbc.setState(0xd50c, 0x285f, 0xf0, 0x55b3, 0xb009, 0x428b, 0x1, 0x1);
        gbc.writeMem(0xd50c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x285f);
        EXPECT(gbc.pc(), 0xd50e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd50c), 0xcb);
        EXPECT(gbc.readMem(0xd50d), 0xa1);
        // CB A1 00CC
        gbc.setState(0xea4a, 0x642c, 0x1a40, 0x71e2, 0xc733, 0x8ba7, 0x0, 0x0);
        gbc.writeMem(0xea4a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x642c);
        EXPECT(gbc.pc(), 0xea4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea4a), 0xcb);
        EXPECT(gbc.readMem(0xea4b), 0xa1);
        // CB A1 00CD
        gbc.setState(0x35ca, 0x6a61, 0xc9c0, 0x84d6, 0x3c68, 0x173d, 0x0, 0x1);
        gbc.writeMem(0x35ca, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6a61);
        EXPECT(gbc.pc(), 0x35cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00CE
        gbc.setState(0xb88b, 0x842c, 0x33e0, 0x7f78, 0xfbe0, 0x3c41, 0x0, 0x0);
        gbc.writeMem(0xb88b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x842c);
        EXPECT(gbc.pc(), 0xb88d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb88b), 0xcb);
        EXPECT(gbc.readMem(0xb88c), 0xa1);
        // CB A1 00CF
        gbc.setState(0x825e, 0x8f18, 0xdb80, 0x6855, 0x1cd2, 0xf78a, 0x1, 0x1);
        gbc.writeMem(0x825e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8f18);
        EXPECT(gbc.pc(), 0x8260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x825e), 0xcb);
        EXPECT(gbc.readMem(0x825f), 0xa1);
        // CB A1 00D0
        gbc.setState(0x59b2, 0x2f06, 0x4360, 0x542a, 0xd1e1, 0x13e7, 0x1, 0x1);
        gbc.writeMem(0x59b2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2f06);
        EXPECT(gbc.pc(), 0x59b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00D1
        gbc.setState(0xf2d, 0xd8f2, 0x90f0, 0xf1f8, 0x6716, 0x1b4d, 0x0, 0x1);
        gbc.writeMem(0xf2d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd8f2);
        EXPECT(gbc.pc(), 0xf2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00D2
        gbc.setState(0xb720, 0x3ec9, 0x6bc0, 0xfed9, 0x1a48, 0x68ba, 0x0, 0x0);
        gbc.writeMem(0xb720, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3ec9);
        EXPECT(gbc.pc(), 0xb722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb720), 0xcb);
        EXPECT(gbc.readMem(0xb721), 0xa1);
        // CB A1 00D3
        gbc.setState(0x31ac, 0x7deb, 0xfa90, 0xd3d9, 0xee2, 0xaa25, 0x0, 0x0);
        gbc.writeMem(0x31ac, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7deb);
        EXPECT(gbc.pc(), 0x31ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00D4
        gbc.setState(0x4e34, 0xa361, 0x99d0, 0x7a91, 0xcfb2, 0x9ef7, 0x0, 0x1);
        gbc.writeMem(0x4e34, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa361);
        EXPECT(gbc.pc(), 0x4e36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00D5
        gbc.setState(0x958, 0x213e, 0xdd70, 0x9e07, 0x5021, 0xb139, 0x1, 0x0);
        gbc.writeMem(0x958, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x213e);
        EXPECT(gbc.pc(), 0x95a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00D6
        gbc.setState(0xa3fc, 0xc7ad, 0x3140, 0x1d63, 0xc0eb, 0x9999, 0x0, 0x1);
        gbc.writeMem(0xa3fc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc7ad);
        EXPECT(gbc.pc(), 0xa3fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3fc), 0xcb);
        EXPECT(gbc.readMem(0xa3fd), 0xa1);
        // CB A1 00D7
        gbc.setState(0xea59, 0x3d0a, 0x6020, 0x7b26, 0xc9aa, 0x2f4c, 0x1, 0x1);
        gbc.writeMem(0xea59, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3d0a);
        EXPECT(gbc.pc(), 0xea5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea59), 0xcb);
        EXPECT(gbc.readMem(0xea5a), 0xa1);
        // CB A1 00D8
        gbc.setState(0x2f27, 0xd7c8, 0xbf00, 0x6d45, 0x84b9, 0x14c0, 0x0, 0x1);
        gbc.writeMem(0x2f27, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd7c8);
        EXPECT(gbc.pc(), 0x2f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00DA
        gbc.setState(0x6f2b, 0xabe2, 0x8af0, 0xaac4, 0x86f7, 0xa89c, 0x1, 0x1);
        gbc.writeMem(0x6f2b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xabe2);
        EXPECT(gbc.pc(), 0x6f2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00DB
        gbc.setState(0x64fb, 0x95d3, 0x7680, 0x31a9, 0x1b38, 0xbb1, 0x0, 0x1);
        gbc.writeMem(0x64fb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x95d3);
        EXPECT(gbc.pc(), 0x64fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00DD
        gbc.setState(0x9499, 0xefbe, 0xb150, 0x12be, 0x6060, 0x9011, 0x0, 0x0);
        gbc.writeMem(0x9499, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xefbe);
        EXPECT(gbc.pc(), 0x949b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9499), 0xcb);
        EXPECT(gbc.readMem(0x949a), 0xa1);
        // CB A1 00DE
        gbc.setState(0x44ba, 0x88c7, 0x3190, 0xaefb, 0x1e52, 0x611c, 0x1, 0x0);
        gbc.writeMem(0x44ba, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x88c7);
        EXPECT(gbc.pc(), 0x44bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00DF
        gbc.setState(0xb710, 0xdff2, 0x1d70, 0x7e9f, 0x14e4, 0xc908, 0x0, 0x1);
        gbc.writeMem(0xb710, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xdff2);
        EXPECT(gbc.pc(), 0xb712);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb710), 0xcb);
        EXPECT(gbc.readMem(0xb711), 0xa1);
        // CB A1 00E0
        gbc.setState(0xc6a0, 0xb00c, 0x9d70, 0x4df0, 0xa237, 0xa68, 0x0, 0x0);
        gbc.writeMem(0xc6a0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb00c);
        EXPECT(gbc.pc(), 0xc6a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6a0), 0xcb);
        EXPECT(gbc.readMem(0xc6a1), 0xa1);
        // CB A1 00E1
        gbc.setState(0x6846, 0x9cad, 0xf520, 0x193a, 0x93e1, 0x68dc, 0x0, 0x0);
        gbc.writeMem(0x6846, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9cad);
        EXPECT(gbc.pc(), 0x6848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00E2
        gbc.setState(0xbdf1, 0x5196, 0xbb40, 0x7d23, 0x4df3, 0x6204, 0x1, 0x0);
        gbc.writeMem(0xbdf1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5196);
        EXPECT(gbc.pc(), 0xbdf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf1), 0xcb);
        EXPECT(gbc.readMem(0xbdf2), 0xa1);
        // CB A1 00E3
        gbc.setState(0xe68c, 0x9de0, 0x18b0, 0x1b7b, 0xc621, 0xcc10, 0x1, 0x0);
        gbc.writeMem(0xe68c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9de0);
        EXPECT(gbc.pc(), 0xe68e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe68c), 0xcb);
        EXPECT(gbc.readMem(0xe68d), 0xa1);
        // CB A1 00E5
        gbc.setState(0xea76, 0x6f44, 0x7c90, 0x3355, 0xca9a, 0x78cd, 0x0, 0x1);
        gbc.writeMem(0xea76, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6f44);
        EXPECT(gbc.pc(), 0xea78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea76), 0xcb);
        EXPECT(gbc.readMem(0xea77), 0xa1);
        // CB A1 00E6
        gbc.setState(0x883b, 0xf6ce, 0xa360, 0x427e, 0x4b49, 0x92f9, 0x1, 0x1);
        gbc.writeMem(0x883b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf6ce);
        EXPECT(gbc.pc(), 0x883d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x883b), 0xcb);
        EXPECT(gbc.readMem(0x883c), 0xa1);
        // CB A1 00E7
        gbc.setState(0x72f3, 0xe5f2, 0xf680, 0x2f9c, 0x9e8b, 0xe0dc, 0x0, 0x0);
        gbc.writeMem(0x72f3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe5f2);
        EXPECT(gbc.pc(), 0x72f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00E8
        gbc.setState(0xea25, 0x77b, 0x4010, 0x4f5c, 0x2db7, 0x99be, 0x1, 0x0);
        gbc.writeMem(0xea25, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x77b);
        EXPECT(gbc.pc(), 0xea27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea25), 0xcb);
        EXPECT(gbc.readMem(0xea26), 0xa1);
        // CB A1 00E9
        gbc.setState(0x52ef, 0x414e, 0x96e0, 0x2b63, 0xe5bf, 0x7cea, 0x1, 0x0);
        gbc.writeMem(0x52ef, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x414e);
        EXPECT(gbc.pc(), 0x52f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00EB
        gbc.setState(0x418c, 0x50b, 0xaf30, 0xf82c, 0x9afb, 0xccfb, 0x0, 0x1);
        gbc.writeMem(0x418c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x50b);
        EXPECT(gbc.pc(), 0x418e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00EC
        gbc.setState(0xd53, 0xe979, 0xa0d0, 0x58ae, 0x832a, 0x5146, 0x0, 0x0);
        gbc.writeMem(0xd53, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe979);
        EXPECT(gbc.pc(), 0xd55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00ED
        gbc.setState(0x7e15, 0x126e, 0x1c0, 0x720, 0x8698, 0xea30, 0x0, 0x1);
        gbc.writeMem(0x7e15, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x126e);
        EXPECT(gbc.pc(), 0x7e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00EE
        gbc.setState(0x53f5, 0xffbe, 0x41a0, 0x3a1a, 0x6d57, 0xf519, 0x0, 0x0);
        gbc.writeMem(0x53f5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xffbe);
        EXPECT(gbc.pc(), 0x53f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00EF
        gbc.setState(0xbdfc, 0x5d6b, 0xce50, 0xe8f4, 0xd95a, 0x4efb, 0x1, 0x1);
        gbc.writeMem(0xbdfc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5d6b);
        EXPECT(gbc.pc(), 0xbdfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdfc), 0xcb);
        EXPECT(gbc.readMem(0xbdfd), 0xa1);
        // CB A1 00F0
        gbc.setState(0x3e82, 0xc95c, 0x35f0, 0xc032, 0x1984, 0x9929, 0x0, 0x1);
        gbc.writeMem(0x3e82, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc95c);
        EXPECT(gbc.pc(), 0x3e84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00F1
        gbc.setState(0xd529, 0xab45, 0x6e60, 0x613, 0xf882, 0x83b8, 0x1, 0x0);
        gbc.writeMem(0xd529, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xab45);
        EXPECT(gbc.pc(), 0xd52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd529), 0xcb);
        EXPECT(gbc.readMem(0xd52a), 0xa1);
        // CB A1 00F2
        gbc.setState(0x167a, 0xf6f5, 0x290, 0x6db6, 0x5dab, 0xbc9, 0x1, 0x1);
        gbc.writeMem(0x167a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf6f5);
        EXPECT(gbc.pc(), 0x167c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00F3
        gbc.setState(0x5ed7, 0xdab3, 0xbcb0, 0x3728, 0x59eb, 0x99b6, 0x0, 0x0);
        gbc.writeMem(0x5ed7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xdab3);
        EXPECT(gbc.pc(), 0x5ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00F4
        gbc.setState(0x76c0, 0xd68, 0xc190, 0x1534, 0xc49f, 0xd6b9, 0x1, 0x1);
        gbc.writeMem(0x76c0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd68);
        EXPECT(gbc.pc(), 0x76c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00F5
        gbc.setState(0xee8e, 0x4d6f, 0x51e0, 0xaa13, 0x476c, 0x9f41, 0x1, 0x0);
        gbc.writeMem(0xee8e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4d6f);
        EXPECT(gbc.pc(), 0xee90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee8e), 0xcb);
        EXPECT(gbc.readMem(0xee8f), 0xa1);
        // CB A1 00F6
        gbc.setState(0x97fc, 0x71c9, 0xecd0, 0xaff3, 0x8bf7, 0x1877, 0x1, 0x1);
        gbc.writeMem(0x97fc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x71c9);
        EXPECT(gbc.pc(), 0x97fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97fc), 0xcb);
        EXPECT(gbc.readMem(0x97fd), 0xa1);
        // CB A1 00F7
        gbc.setState(0x6611, 0x2ceb, 0xc9c0, 0xa38b, 0x2413, 0x27a6, 0x1, 0x0);
        gbc.writeMem(0x6611, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2ceb);
        EXPECT(gbc.pc(), 0x6613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 00F8
        gbc.setState(0x4a67, 0xeed6, 0x1110, 0x8f15, 0xde74, 0x7682, 0x0, 0x0);
        gbc.writeMem(0x4a67, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xeed6);
        EXPECT(gbc.pc(), 0x4a69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00F9
        gbc.setState(0xea48, 0x40c4, 0x7920, 0xa589, 0x1d90, 0x97e2, 0x1, 0x1);
        gbc.writeMem(0xea48, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x40c4);
        EXPECT(gbc.pc(), 0xea4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea48), 0xcb);
        EXPECT(gbc.readMem(0xea49), 0xa1);
        // CB A1 00FA
        gbc.setState(0x8f3c, 0x1b8d, 0x7f30, 0x2f5, 0x5d2d, 0xf07b, 0x0, 0x1);
        gbc.writeMem(0x8f3c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1b8d);
        EXPECT(gbc.pc(), 0x8f3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f3c), 0xcb);
        EXPECT(gbc.readMem(0x8f3d), 0xa1);
        // CB A1 00FB
        gbc.setState(0xc6f3, 0x748, 0x1620, 0x4aa7, 0x6a3e, 0xf80f, 0x1, 0x0);
        gbc.writeMem(0xc6f3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x748);
        EXPECT(gbc.pc(), 0xc6f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f3), 0xcb);
        EXPECT(gbc.readMem(0xc6f4), 0xa1);
        // CB A1 00FC
        gbc.setState(0xee02, 0xc212, 0x29d0, 0x2826, 0xbd2e, 0xb01b, 0x1, 0x0);
        gbc.writeMem(0xee02, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc212);
        EXPECT(gbc.pc(), 0xee04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee02), 0xcb);
        EXPECT(gbc.readMem(0xee03), 0xa1);
        // CB A1 00FD
        gbc.setState(0x9faa, 0xcda, 0xdee0, 0xca1f, 0xe135, 0xf0b1, 0x0, 0x0);
        gbc.writeMem(0x9faa, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xcda);
        EXPECT(gbc.pc(), 0x9fac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9faa), 0xcb);
        EXPECT(gbc.readMem(0x9fab), 0xa1);
        // CB A1 00FE
        gbc.setState(0x6f40, 0x49f5, 0xee90, 0xdc67, 0x18e3, 0x8fb5, 0x0, 0x0);
        gbc.writeMem(0x6f40, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x49f5);
        EXPECT(gbc.pc(), 0x6f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 00FF
        gbc.setState(0xbff1, 0xeddf, 0x320, 0x8381, 0x1bf7, 0xe81a, 0x1, 0x0);
        gbc.writeMem(0xbff1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xeddf);
        EXPECT(gbc.pc(), 0xbff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff1), 0xcb);
        EXPECT(gbc.readMem(0xbff2), 0xa1);
        // CB A1 0100
        gbc.setState(0xdfb8, 0xccaa, 0xa8e0, 0xa327, 0x6fa0, 0x7768, 0x1, 0x0);
        gbc.writeMem(0xdfb8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xccaa);
        EXPECT(gbc.pc(), 0xdfba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfb8), 0xcb);
        EXPECT(gbc.readMem(0xdfb9), 0xa1);
        // CB A1 0101
        gbc.setState(0xc0cd, 0x4b21, 0xabf0, 0x529, 0x8cf0, 0xe458, 0x0, 0x0);
        gbc.writeMem(0xc0cd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4b21);
        EXPECT(gbc.pc(), 0xc0cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0cd), 0xcb);
        EXPECT(gbc.readMem(0xc0ce), 0xa1);
        // CB A1 0102
        gbc.setState(0xc9ce, 0x9b9f, 0x7240, 0x9bf1, 0xf4a5, 0xba9d, 0x1, 0x1);
        gbc.writeMem(0xc9ce, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9b9f);
        EXPECT(gbc.pc(), 0xc9d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ce), 0xcb);
        EXPECT(gbc.readMem(0xc9cf), 0xa1);
        // CB A1 0103
        gbc.setState(0x3035, 0xe960, 0x7340, 0x1ecc, 0x8576, 0xb611, 0x0, 0x0);
        gbc.writeMem(0x3035, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe960);
        EXPECT(gbc.pc(), 0x3037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0104
        gbc.setState(0x1dee, 0x765e, 0x7ed0, 0x4920, 0x5fe7, 0x1bf7, 0x0, 0x0);
        gbc.writeMem(0x1dee, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x765e);
        EXPECT(gbc.pc(), 0x1df0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0105
        gbc.setState(0x747b, 0x2be9, 0x260, 0xc707, 0xfa35, 0x6937, 0x1, 0x0);
        gbc.writeMem(0x747b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2be9);
        EXPECT(gbc.pc(), 0x747d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0106
        gbc.setState(0xb7a4, 0x8489, 0xd500, 0xc9cb, 0x8f12, 0x59b4, 0x1, 0x1);
        gbc.writeMem(0xb7a4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8489);
        EXPECT(gbc.pc(), 0xb7a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a4), 0xcb);
        EXPECT(gbc.readMem(0xb7a5), 0xa1);
        // CB A1 0107
        gbc.setState(0x6fa1, 0x8fd0, 0x49f0, 0x353d, 0x9388, 0x42f2, 0x0, 0x1);
        gbc.writeMem(0x6fa1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8fd0);
        EXPECT(gbc.pc(), 0x6fa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0108
        gbc.setState(0x4f5d, 0xea4f, 0x6b70, 0xb2d9, 0x24e, 0xe25a, 0x1, 0x0);
        gbc.writeMem(0x4f5d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xea4f);
        EXPECT(gbc.pc(), 0x4f5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 010A
        gbc.setState(0xe2ae, 0xee9a, 0xea30, 0xaafd, 0xc5c0, 0xce6, 0x0, 0x0);
        gbc.writeMem(0xe2ae, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xee9a);
        EXPECT(gbc.pc(), 0xe2b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ae), 0xcb);
        EXPECT(gbc.readMem(0xe2af), 0xa1);
        // CB A1 010B
        gbc.setState(0x344e, 0xd3bc, 0x37b0, 0xc01b, 0x1fb8, 0x9cdf, 0x1, 0x1);
        gbc.writeMem(0x344e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd3bc);
        EXPECT(gbc.pc(), 0x3450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 010C
        gbc.setState(0xaaff, 0x4b05, 0xe80, 0x6d5e, 0xec63, 0x3097, 0x1, 0x1);
        gbc.writeMem(0xaaff, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4b05);
        EXPECT(gbc.pc(), 0xab01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaff), 0xcb);
        EXPECT(gbc.readMem(0xab00), 0xa1);
        // CB A1 010D
        gbc.setState(0x499e, 0x9304, 0x5c30, 0x756, 0x106b, 0x1d59, 0x1, 0x0);
        gbc.writeMem(0x499e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9304);
        EXPECT(gbc.pc(), 0x49a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 010E
        gbc.setState(0xd196, 0xc12e, 0x4630, 0x4deb, 0x463e, 0x379, 0x1, 0x1);
        gbc.writeMem(0xd196, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc12e);
        EXPECT(gbc.pc(), 0xd198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd196), 0xcb);
        EXPECT(gbc.readMem(0xd197), 0xa1);
        // CB A1 010F
        gbc.setState(0xcc7b, 0xa329, 0xab10, 0xf2dc, 0x58be, 0xa22, 0x1, 0x1);
        gbc.writeMem(0xcc7b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa329);
        EXPECT(gbc.pc(), 0xcc7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc7b), 0xcb);
        EXPECT(gbc.readMem(0xcc7c), 0xa1);
        // CB A1 0110
        gbc.setState(0x5b3d, 0x17b8, 0x96c0, 0x5df, 0x7d81, 0x7a0b, 0x0, 0x0);
        gbc.writeMem(0x5b3d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x17b8);
        EXPECT(gbc.pc(), 0x5b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0111
        gbc.setState(0x4add, 0xb7fb, 0xf7e0, 0x2c2c, 0xc791, 0x9751, 0x0, 0x1);
        gbc.writeMem(0x4add, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb7fb);
        EXPECT(gbc.pc(), 0x4adf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0112
        gbc.setState(0x6560, 0x6acb, 0x17d0, 0x2112, 0x1bab, 0x3c20, 0x0, 0x1);
        gbc.writeMem(0x6560, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6acb);
        EXPECT(gbc.pc(), 0x6562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0113
        gbc.setState(0x813a, 0x7a2a, 0x16f0, 0xe3a9, 0x6966, 0x58f5, 0x1, 0x0);
        gbc.writeMem(0x813a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7a2a);
        EXPECT(gbc.pc(), 0x813c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x813a), 0xcb);
        EXPECT(gbc.readMem(0x813b), 0xa1);
        // CB A1 0114
        gbc.setState(0x1fb2, 0xc40c, 0xb980, 0x65f0, 0x45c8, 0x800a, 0x0, 0x1);
        gbc.writeMem(0x1fb2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc40c);
        EXPECT(gbc.pc(), 0x1fb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0115
        gbc.setState(0x240d, 0x92c1, 0xd150, 0xd3bc, 0xd8f8, 0x7112, 0x0, 0x0);
        gbc.writeMem(0x240d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x92c1);
        EXPECT(gbc.pc(), 0x240f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0116
        gbc.setState(0x7759, 0x16d0, 0x7f70, 0x5f35, 0x4572, 0xdb66, 0x0, 0x0);
        gbc.writeMem(0x7759, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x16d0);
        EXPECT(gbc.pc(), 0x775b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0117
        gbc.setState(0xe886, 0x7885, 0x40e0, 0xc149, 0x2d42, 0x663a, 0x0, 0x1);
        gbc.writeMem(0xe886, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x7885);
        EXPECT(gbc.pc(), 0xe888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe886), 0xcb);
        EXPECT(gbc.readMem(0xe887), 0xa1);
        // CB A1 0118
        gbc.setState(0x44d6, 0x49f, 0x8d0, 0xccd5, 0x9d00, 0x9da3, 0x0, 0x1);
        gbc.writeMem(0x44d6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x49f);
        EXPECT(gbc.pc(), 0x44d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0119
        gbc.setState(0x370c, 0xf0d9, 0x1b0, 0x9689, 0xb784, 0xfe3a, 0x0, 0x1);
        gbc.writeMem(0x370c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf0d9);
        EXPECT(gbc.pc(), 0x370e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 011A
        gbc.setState(0x9f9d, 0x2f18, 0x9640, 0xf7e9, 0x268e, 0x4d96, 0x1, 0x0);
        gbc.writeMem(0x9f9d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2f18);
        EXPECT(gbc.pc(), 0x9f9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9d), 0xcb);
        EXPECT(gbc.readMem(0x9f9e), 0xa1);
        // CB A1 011C
        gbc.setState(0xd297, 0xf4ef, 0x6390, 0x20e4, 0x10f9, 0x800e, 0x1, 0x1);
        gbc.writeMem(0xd297, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf4ef);
        EXPECT(gbc.pc(), 0xd299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd297), 0xcb);
        EXPECT(gbc.readMem(0xd298), 0xa1);
        // CB A1 011E
        gbc.setState(0xa1e7, 0x28ce, 0x9420, 0x9b05, 0xee5, 0x161e, 0x1, 0x0);
        gbc.writeMem(0xa1e7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x28ce);
        EXPECT(gbc.pc(), 0xa1e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1e7), 0xcb);
        EXPECT(gbc.readMem(0xa1e8), 0xa1);
        // CB A1 011F
        gbc.setState(0xdecb, 0x95d8, 0x1730, 0x4589, 0x69bd, 0x8d0e, 0x0, 0x1);
        gbc.writeMem(0xdecb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x95d8);
        EXPECT(gbc.pc(), 0xdecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdecb), 0xcb);
        EXPECT(gbc.readMem(0xdecc), 0xa1);
        // CB A1 0120
        gbc.setState(0x9d96, 0x7cbc, 0xea50, 0xf739, 0x5a65, 0x5151, 0x0, 0x0);
        gbc.writeMem(0x9d96, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7cbc);
        EXPECT(gbc.pc(), 0x9d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d96), 0xcb);
        EXPECT(gbc.readMem(0x9d97), 0xa1);
        // CB A1 0121
        gbc.setState(0x1503, 0x69df, 0xc0f0, 0xe44b, 0x6364, 0xf5a, 0x1, 0x1);
        gbc.writeMem(0x1503, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x69df);
        EXPECT(gbc.pc(), 0x1505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0122
        gbc.setState(0x204d, 0x4a83, 0x4210, 0x7077, 0xd818, 0x4c5c, 0x0, 0x1);
        gbc.writeMem(0x204d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4a83);
        EXPECT(gbc.pc(), 0x204f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0123
        gbc.setState(0xb8eb, 0x94f2, 0xb70, 0x4dd6, 0x9c14, 0x7f22, 0x1, 0x0);
        gbc.writeMem(0xb8eb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x94f2);
        EXPECT(gbc.pc(), 0xb8ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8eb), 0xcb);
        EXPECT(gbc.readMem(0xb8ec), 0xa1);
        // CB A1 0124
        gbc.setState(0x6b6d, 0x48d0, 0x69c0, 0xbd2a, 0xc1eb, 0xcbbb, 0x1, 0x1);
        gbc.writeMem(0x6b6d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x48d0);
        EXPECT(gbc.pc(), 0x6b6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0125
        gbc.setState(0xb9de, 0xe286, 0x2940, 0x6e85, 0xad05, 0x1716, 0x0, 0x1);
        gbc.writeMem(0xb9de, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe286);
        EXPECT(gbc.pc(), 0xb9e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9de), 0xcb);
        EXPECT(gbc.readMem(0xb9df), 0xa1);
        // CB A1 0126
        gbc.setState(0x5ae1, 0xd1e, 0x1d00, 0x84f3, 0x7fce, 0xe895, 0x1, 0x0);
        gbc.writeMem(0x5ae1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd1e);
        EXPECT(gbc.pc(), 0x5ae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0127
        gbc.setState(0x4626, 0x55f8, 0xd6d0, 0x8f4a, 0x77de, 0x9f02, 0x0, 0x0);
        gbc.writeMem(0x4626, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x55f8);
        EXPECT(gbc.pc(), 0x4628);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0128
        gbc.setState(0x219, 0xcea0, 0xdb20, 0x7205, 0x72ec, 0x5ee8, 0x1, 0x1);
        gbc.writeMem(0x219, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcea0);
        EXPECT(gbc.pc(), 0x21b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0129
        gbc.setState(0xba9b, 0x49ca, 0x2760, 0xa8dc, 0x1368, 0x7a16, 0x1, 0x0);
        gbc.writeMem(0xba9b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x49ca);
        EXPECT(gbc.pc(), 0xba9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba9b), 0xcb);
        EXPECT(gbc.readMem(0xba9c), 0xa1);
        // CB A1 012A
        gbc.setState(0xb13, 0x3ff2, 0x55c0, 0x2e1f, 0x5527, 0x1, 0x1, 0x1);
        gbc.writeMem(0xb13, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3ff2);
        EXPECT(gbc.pc(), 0xb15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 012C
        gbc.setState(0x9a51, 0x3741, 0x8c10, 0x9ac1, 0xf17e, 0x3b82, 0x0, 0x0);
        gbc.writeMem(0x9a51, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3741);
        EXPECT(gbc.pc(), 0x9a53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a51), 0xcb);
        EXPECT(gbc.readMem(0x9a52), 0xa1);
        // CB A1 012D
        gbc.setState(0x268b, 0x1c88, 0x6a0, 0x4329, 0xe2a4, 0x37af, 0x1, 0x0);
        gbc.writeMem(0x268b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1c88);
        EXPECT(gbc.pc(), 0x268d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 012E
        gbc.setState(0x2424, 0x5fa5, 0x17b0, 0xc4cf, 0xa4ec, 0x424b, 0x1, 0x0);
        gbc.writeMem(0x2424, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x5fa5);
        EXPECT(gbc.pc(), 0x2426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 012F
        gbc.setState(0x7fd9, 0x1187, 0x45a0, 0x35c6, 0xa278, 0x7ae4, 0x0, 0x1);
        gbc.writeMem(0x7fd9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1187);
        EXPECT(gbc.pc(), 0x7fdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0130
        gbc.setState(0x804d, 0xcc29, 0x4b60, 0x99f7, 0x9ec7, 0x1f9c, 0x0, 0x1);
        gbc.writeMem(0x804d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcc29);
        EXPECT(gbc.pc(), 0x804f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x804d), 0xcb);
        EXPECT(gbc.readMem(0x804e), 0xa1);
        // CB A1 0131
        gbc.setState(0x41d7, 0xcd04, 0x79c0, 0x1b5a, 0x2f58, 0x8c1f, 0x1, 0x0);
        gbc.writeMem(0x41d7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xcd04);
        EXPECT(gbc.pc(), 0x41d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0132
        gbc.setState(0xb053, 0x8f36, 0x1a50, 0x292e, 0x7544, 0x7b39, 0x1, 0x0);
        gbc.writeMem(0xb053, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8f36);
        EXPECT(gbc.pc(), 0xb055);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb053), 0xcb);
        EXPECT(gbc.readMem(0xb054), 0xa1);
        // CB A1 0134
        gbc.setState(0x9772, 0x5eb9, 0xc4e0, 0xf2d9, 0xa933, 0x32eb, 0x1, 0x0);
        gbc.writeMem(0x9772, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5eb9);
        EXPECT(gbc.pc(), 0x9774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9772), 0xcb);
        EXPECT(gbc.readMem(0x9773), 0xa1);
        // CB A1 0135
        gbc.setState(0x1c99, 0xdc33, 0x5ed0, 0xc192, 0x62a4, 0xe6dc, 0x0, 0x1);
        gbc.writeMem(0x1c99, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xdc33);
        EXPECT(gbc.pc(), 0x1c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0136
        gbc.setState(0xa5ba, 0x2103, 0x3700, 0x5d4c, 0xbd1, 0xce5a, 0x1, 0x1);
        gbc.writeMem(0xa5ba, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2103);
        EXPECT(gbc.pc(), 0xa5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ba), 0xcb);
        EXPECT(gbc.readMem(0xa5bb), 0xa1);
        // CB A1 0137
        gbc.setState(0x5b3f, 0xcdf2, 0x70f0, 0xe04, 0x8922, 0x3da3, 0x1, 0x0);
        gbc.writeMem(0x5b3f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcdf2);
        EXPECT(gbc.pc(), 0x5b41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0138
        gbc.setState(0x8301, 0x89ee, 0xa020, 0xaa14, 0x70a7, 0x2e1, 0x1, 0x1);
        gbc.writeMem(0x8301, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x89ee);
        EXPECT(gbc.pc(), 0x8303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8301), 0xcb);
        EXPECT(gbc.readMem(0x8302), 0xa1);
        // CB A1 0139
        gbc.setState(0x9f25, 0x820d, 0x1b30, 0xaf4f, 0xb519, 0xee8d, 0x1, 0x0);
        gbc.writeMem(0x9f25, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x820d);
        EXPECT(gbc.pc(), 0x9f27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f25), 0xcb);
        EXPECT(gbc.readMem(0x9f26), 0xa1);
        // CB A1 013A
        gbc.setState(0x5e9, 0xa2ef, 0x14a0, 0x2dd6, 0xa014, 0xed0e, 0x0, 0x1);
        gbc.writeMem(0x5e9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa2ef);
        EXPECT(gbc.pc(), 0x5eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 013B
        gbc.setState(0x825a, 0xbb73, 0x43c0, 0x3c47, 0xd30b, 0x1412, 0x1, 0x0);
        gbc.writeMem(0x825a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xbb73);
        EXPECT(gbc.pc(), 0x825c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x825a), 0xcb);
        EXPECT(gbc.readMem(0x825b), 0xa1);
        // CB A1 013C
        gbc.setState(0x73d4, 0xbb78, 0x3120, 0x7cd6, 0x58de, 0x478a, 0x1, 0x1);
        gbc.writeMem(0x73d4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xbb78);
        EXPECT(gbc.pc(), 0x73d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 013D
        gbc.setState(0xa0d9, 0x699b, 0x9d40, 0x96f8, 0xf576, 0xa2e8, 0x0, 0x0);
        gbc.writeMem(0xa0d9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x699b);
        EXPECT(gbc.pc(), 0xa0db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d9), 0xcb);
        EXPECT(gbc.readMem(0xa0da), 0xa1);
        // CB A1 013E
        gbc.setState(0x294f, 0x4335, 0xfd10, 0x6bee, 0x548e, 0x2c04, 0x1, 0x0);
        gbc.writeMem(0x294f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4335);
        EXPECT(gbc.pc(), 0x2951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 013F
        gbc.setState(0x5c7d, 0xaf2d, 0x8870, 0xe30d, 0x96b3, 0x56f1, 0x1, 0x0);
        gbc.writeMem(0x5c7d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xaf2d);
        EXPECT(gbc.pc(), 0x5c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0140
        gbc.setState(0x133, 0x61d4, 0xdf00, 0x52b3, 0x1dc2, 0x2ec6, 0x0, 0x0);
        gbc.writeMem(0x133, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x61d4);
        EXPECT(gbc.pc(), 0x135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0141
        gbc.setState(0x5db0, 0x9795, 0xf0e0, 0xd1fc, 0xa374, 0x5d84, 0x1, 0x1);
        gbc.writeMem(0x5db0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9795);
        EXPECT(gbc.pc(), 0x5db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0142
        gbc.setState(0x763f, 0x8feb, 0x3f70, 0x4d5e, 0x81f4, 0xb18d, 0x1, 0x1);
        gbc.writeMem(0x763f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8feb);
        EXPECT(gbc.pc(), 0x7641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0143
        gbc.setState(0xa048, 0x26f, 0xbfc0, 0x23f8, 0x55d7, 0xee73, 0x1, 0x1);
        gbc.writeMem(0xa048, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x26f);
        EXPECT(gbc.pc(), 0xa04a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa048), 0xcb);
        EXPECT(gbc.readMem(0xa049), 0xa1);
        // CB A1 0144
        gbc.setState(0xb579, 0x5b94, 0x7310, 0xbe0, 0x735d, 0x6119, 0x0, 0x0);
        gbc.writeMem(0xb579, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5b94);
        EXPECT(gbc.pc(), 0xb57b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb579), 0xcb);
        EXPECT(gbc.readMem(0xb57a), 0xa1);
        // CB A1 0145
        gbc.setState(0x9603, 0x192, 0xacf0, 0x2c35, 0xfcb6, 0x50c1, 0x1, 0x0);
        gbc.writeMem(0x9603, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x192);
        EXPECT(gbc.pc(), 0x9605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9603), 0xcb);
        EXPECT(gbc.readMem(0x9604), 0xa1);
        // CB A1 0146
        gbc.setState(0x4954, 0xb69c, 0xd000, 0x322, 0x2bc3, 0xc93, 0x0, 0x0);
        gbc.writeMem(0x4954, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb69c);
        EXPECT(gbc.pc(), 0x4956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0147
        gbc.setState(0x1407, 0xd271, 0x7630, 0xb6c9, 0x1da, 0x39f6, 0x1, 0x1);
        gbc.writeMem(0x1407, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd271);
        EXPECT(gbc.pc(), 0x1409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0148
        gbc.setState(0xca8b, 0x22cd, 0x3810, 0x704b, 0x6d89, 0xade2, 0x1, 0x0);
        gbc.writeMem(0xca8b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x22cd);
        EXPECT(gbc.pc(), 0xca8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca8b), 0xcb);
        EXPECT(gbc.readMem(0xca8c), 0xa1);
        // CB A1 0149
        gbc.setState(0xbdde, 0x294, 0xaa90, 0xcd5d, 0x35ff, 0x6975, 0x0, 0x0);
        gbc.writeMem(0xbdde, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x294);
        EXPECT(gbc.pc(), 0xbde0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdde), 0xcb);
        EXPECT(gbc.readMem(0xbddf), 0xa1);
        // CB A1 014A
        gbc.setState(0x6022, 0x2adc, 0xbed0, 0xd959, 0x6b07, 0x1ee9, 0x0, 0x0);
        gbc.writeMem(0x6022, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2adc);
        EXPECT(gbc.pc(), 0x6024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 014B
        gbc.setState(0xd0b9, 0x63df, 0xd220, 0x8428, 0xb483, 0xc3cf, 0x1, 0x1);
        gbc.writeMem(0xd0b9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x63df);
        EXPECT(gbc.pc(), 0xd0bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b9), 0xcb);
        EXPECT(gbc.readMem(0xd0ba), 0xa1);
        // CB A1 014C
        gbc.setState(0xe530, 0x66, 0x6400, 0x137c, 0x8b36, 0xb481, 0x0, 0x1);
        gbc.writeMem(0xe530, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x66);
        EXPECT(gbc.pc(), 0xe532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe530), 0xcb);
        EXPECT(gbc.readMem(0xe531), 0xa1);
        // CB A1 014D
        gbc.setState(0x768e, 0xa388, 0x4710, 0x2d5, 0xd35b, 0xdc11, 0x0, 0x1);
        gbc.writeMem(0x768e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa388);
        EXPECT(gbc.pc(), 0x7690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 014E
        gbc.setState(0xe69e, 0x3428, 0x4a40, 0x279e, 0xb327, 0x9e35, 0x0, 0x1);
        gbc.writeMem(0xe69e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3428);
        EXPECT(gbc.pc(), 0xe6a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe69e), 0xcb);
        EXPECT(gbc.readMem(0xe69f), 0xa1);
        // CB A1 014F
        gbc.setState(0xbc6c, 0xf27d, 0x2ac0, 0xbc9, 0x7ceb, 0x851f, 0x1, 0x0);
        gbc.writeMem(0xbc6c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf27d);
        EXPECT(gbc.pc(), 0xbc6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6c), 0xcb);
        EXPECT(gbc.readMem(0xbc6d), 0xa1);
        // CB A1 0150
        gbc.setState(0x24b8, 0xbca2, 0xee0, 0x90f2, 0x6f28, 0x62ed, 0x1, 0x0);
        gbc.writeMem(0x24b8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbca2);
        EXPECT(gbc.pc(), 0x24ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0151
        gbc.setState(0x49fa, 0x32a7, 0x7f50, 0x97e4, 0x148, 0x8075, 0x1, 0x0);
        gbc.writeMem(0x49fa, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x32a7);
        EXPECT(gbc.pc(), 0x49fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0152
        gbc.setState(0x8344, 0x83c9, 0xf90, 0x6f89, 0xf6bb, 0x4cec, 0x0, 0x1);
        gbc.writeMem(0x8344, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x83c9);
        EXPECT(gbc.pc(), 0x8346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8344), 0xcb);
        EXPECT(gbc.readMem(0x8345), 0xa1);
        // CB A1 0153
        gbc.setState(0x583c, 0x18ed, 0x6560, 0xe60, 0xea4, 0x4c67, 0x0, 0x1);
        gbc.writeMem(0x583c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x18ed);
        EXPECT(gbc.pc(), 0x583e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0154
        gbc.setState(0x7bb9, 0xc894, 0xda20, 0x83bc, 0xbb22, 0xd76b, 0x0, 0x1);
        gbc.writeMem(0x7bb9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc894);
        EXPECT(gbc.pc(), 0x7bbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0155
        gbc.setState(0xab34, 0xc68e, 0x3190, 0xe39b, 0xbe02, 0x6406, 0x1, 0x0);
        gbc.writeMem(0xab34, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc68e);
        EXPECT(gbc.pc(), 0xab36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab34), 0xcb);
        EXPECT(gbc.readMem(0xab35), 0xa1);
        // CB A1 0156
        gbc.setState(0xb781, 0xa71f, 0xa5b0, 0xb2bc, 0xfeac, 0x76cc, 0x1, 0x1);
        gbc.writeMem(0xb781, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa71f);
        EXPECT(gbc.pc(), 0xb783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb781), 0xcb);
        EXPECT(gbc.readMem(0xb782), 0xa1);
        // CB A1 0157
        gbc.setState(0xe8d8, 0x5712, 0x7820, 0xe427, 0x54df, 0xbed8, 0x0, 0x1);
        gbc.writeMem(0xe8d8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5712);
        EXPECT(gbc.pc(), 0xe8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d8), 0xcb);
        EXPECT(gbc.readMem(0xe8d9), 0xa1);
        // CB A1 0158
        gbc.setState(0xbf09, 0x2c8d, 0x9900, 0xf632, 0xcd10, 0x29b5, 0x0, 0x0);
        gbc.writeMem(0xbf09, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2c8d);
        EXPECT(gbc.pc(), 0xbf0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf09), 0xcb);
        EXPECT(gbc.readMem(0xbf0a), 0xa1);
        // CB A1 0159
        gbc.setState(0xe0ca, 0xd184, 0xeee0, 0x33f1, 0xbea5, 0xc9ea, 0x1, 0x0);
        gbc.writeMem(0xe0ca, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd184);
        EXPECT(gbc.pc(), 0xe0cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ca), 0xcb);
        EXPECT(gbc.readMem(0xe0cb), 0xa1);
        // CB A1 015A
        gbc.setState(0x53a, 0xa9af, 0xd960, 0x519f, 0x67d, 0xb0b, 0x1, 0x0);
        gbc.writeMem(0x53a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa9af);
        EXPECT(gbc.pc(), 0x53c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 015B
        gbc.setState(0x2038, 0x56a6, 0x8a20, 0x45f0, 0x58eb, 0xea8, 0x0, 0x1);
        gbc.writeMem(0x2038, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x56a6);
        EXPECT(gbc.pc(), 0x203a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 015C
        gbc.setState(0x3cb5, 0x946f, 0x8c20, 0x4052, 0x3f08, 0x329f, 0x0, 0x0);
        gbc.writeMem(0x3cb5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x946f);
        EXPECT(gbc.pc(), 0x3cb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 015D
        gbc.setState(0xb52, 0x84a0, 0x3c20, 0x99e, 0xbd12, 0x28f, 0x1, 0x1);
        gbc.writeMem(0xb52, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x84a0);
        EXPECT(gbc.pc(), 0xb54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 015E
        gbc.setState(0x47a6, 0xca06, 0x3cb0, 0xcbac, 0xa307, 0x8f33, 0x0, 0x0);
        gbc.writeMem(0x47a6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xca06);
        EXPECT(gbc.pc(), 0x47a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 015F
        gbc.setState(0x3824, 0x152a, 0x78e0, 0x283c, 0xace2, 0xeaed, 0x0, 0x0);
        gbc.writeMem(0x3824, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x152a);
        EXPECT(gbc.pc(), 0x3826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0160
        gbc.setState(0xbbe3, 0xa704, 0xada0, 0xa97d, 0x3a51, 0xf95c, 0x1, 0x0);
        gbc.writeMem(0xbbe3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa704);
        EXPECT(gbc.pc(), 0xbbe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe3), 0xcb);
        EXPECT(gbc.readMem(0xbbe4), 0xa1);
        // CB A1 0161
        gbc.setState(0x4b3, 0x96bb, 0xf010, 0x4eee, 0x4c8a, 0x5285, 0x0, 0x1);
        gbc.writeMem(0x4b3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x96bb);
        EXPECT(gbc.pc(), 0x4b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0163
        gbc.setState(0xd08a, 0x60b8, 0x1e40, 0xc7d6, 0x3390, 0xb5b3, 0x1, 0x0);
        gbc.writeMem(0xd08a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x60b8);
        EXPECT(gbc.pc(), 0xd08c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd08a), 0xcb);
        EXPECT(gbc.readMem(0xd08b), 0xa1);
        // CB A1 0164
        gbc.setState(0xcee9, 0xc6a2, 0xb5b0, 0xe12b, 0xece3, 0xb234, 0x0, 0x1);
        gbc.writeMem(0xcee9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc6a2);
        EXPECT(gbc.pc(), 0xceeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcee9), 0xcb);
        EXPECT(gbc.readMem(0xceea), 0xa1);
        // CB A1 0165
        gbc.setState(0x4d9b, 0xcd58, 0xf4c0, 0x8cba, 0x6f37, 0x7c8c, 0x0, 0x1);
        gbc.writeMem(0x4d9b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcd58);
        EXPECT(gbc.pc(), 0x4d9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0166
        gbc.setState(0xa8da, 0x791c, 0xeb20, 0x7579, 0xf56f, 0x2570, 0x1, 0x0);
        gbc.writeMem(0xa8da, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x791c);
        EXPECT(gbc.pc(), 0xa8dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8da), 0xcb);
        EXPECT(gbc.readMem(0xa8db), 0xa1);
        // CB A1 0168
        gbc.setState(0x4de2, 0x34cd, 0x3140, 0x1250, 0xbdbe, 0xd112, 0x1, 0x1);
        gbc.writeMem(0x4de2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x34cd);
        EXPECT(gbc.pc(), 0x4de4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0169
        gbc.setState(0x8501, 0x87cb, 0xee60, 0x6046, 0x9bc0, 0x864a, 0x1, 0x1);
        gbc.writeMem(0x8501, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x87cb);
        EXPECT(gbc.pc(), 0x8503);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8501), 0xcb);
        EXPECT(gbc.readMem(0x8502), 0xa1);
        // CB A1 016A
        gbc.setState(0x856d, 0xe04a, 0x33f0, 0x380d, 0x26cc, 0x626a, 0x0, 0x1);
        gbc.writeMem(0x856d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe04a);
        EXPECT(gbc.pc(), 0x856f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856d), 0xcb);
        EXPECT(gbc.readMem(0x856e), 0xa1);
        // CB A1 016B
        gbc.setState(0xb6ba, 0xcaa3, 0x720, 0xe69, 0x438a, 0x7cba, 0x0, 0x0);
        gbc.writeMem(0xb6ba, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcaa3);
        EXPECT(gbc.pc(), 0xb6bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ba), 0xcb);
        EXPECT(gbc.readMem(0xb6bb), 0xa1);
        // CB A1 016C
        gbc.setState(0x53c1, 0x672b, 0xeaa0, 0xfc0c, 0x4df1, 0x11ca, 0x0, 0x0);
        gbc.writeMem(0x53c1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x672b);
        EXPECT(gbc.pc(), 0x53c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 016D
        gbc.setState(0x9d26, 0xa54f, 0xc310, 0xb9d8, 0x45c, 0xaeaf, 0x0, 0x1);
        gbc.writeMem(0x9d26, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa54f);
        EXPECT(gbc.pc(), 0x9d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d26), 0xcb);
        EXPECT(gbc.readMem(0x9d27), 0xa1);
        // CB A1 016E
        gbc.setState(0xa50e, 0x8c06, 0x7250, 0xc452, 0x501f, 0x21a5, 0x1, 0x1);
        gbc.writeMem(0xa50e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8c06);
        EXPECT(gbc.pc(), 0xa510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50e), 0xcb);
        EXPECT(gbc.readMem(0xa50f), 0xa1);
        // CB A1 016F
        gbc.setState(0x4be2, 0xae96, 0x5470, 0x1296, 0x4bdd, 0xa6bd, 0x1, 0x0);
        gbc.writeMem(0x4be2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xae96);
        EXPECT(gbc.pc(), 0x4be4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0170
        gbc.setState(0x9b35, 0xbaed, 0x99c0, 0x9d22, 0x232f, 0x2f2b, 0x1, 0x1);
        gbc.writeMem(0x9b35, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xbaed);
        EXPECT(gbc.pc(), 0x9b37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b35), 0xcb);
        EXPECT(gbc.readMem(0x9b36), 0xa1);
        // CB A1 0172
        gbc.setState(0xc312, 0x4e6f, 0x63a0, 0x665e, 0x7a60, 0x8851, 0x0, 0x0);
        gbc.writeMem(0xc312, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4e6f);
        EXPECT(gbc.pc(), 0xc314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc312), 0xcb);
        EXPECT(gbc.readMem(0xc313), 0xa1);
        // CB A1 0173
        gbc.setState(0xb4c, 0x48a7, 0x45a0, 0xd294, 0x9989, 0x1a84, 0x0, 0x0);
        gbc.writeMem(0xb4c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x48a7);
        EXPECT(gbc.pc(), 0xb4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0174
        gbc.setState(0x9aad, 0xf38e, 0x99a0, 0xbad9, 0x27c1, 0x8dcd, 0x0, 0x1);
        gbc.writeMem(0x9aad, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf38e);
        EXPECT(gbc.pc(), 0x9aaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aad), 0xcb);
        EXPECT(gbc.readMem(0x9aae), 0xa1);
        // CB A1 0175
        gbc.setState(0x3b9a, 0xf99a, 0xf260, 0xc094, 0xc020, 0xa35, 0x1, 0x1);
        gbc.writeMem(0x3b9a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf99a);
        EXPECT(gbc.pc(), 0x3b9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0176
        gbc.setState(0xa03e, 0xc4f0, 0x2fd0, 0x6e81, 0x90a, 0x463, 0x0, 0x0);
        gbc.writeMem(0xa03e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc4f0);
        EXPECT(gbc.pc(), 0xa040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03e), 0xcb);
        EXPECT(gbc.readMem(0xa03f), 0xa1);
        // CB A1 0177
        gbc.setState(0xed08, 0x97cc, 0x1de0, 0x8bfe, 0xf5de, 0x4d75, 0x1, 0x0);
        gbc.writeMem(0xed08, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x97cc);
        EXPECT(gbc.pc(), 0xed0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed08), 0xcb);
        EXPECT(gbc.readMem(0xed09), 0xa1);
        // CB A1 0178
        gbc.setState(0xb0e6, 0x89e9, 0xd880, 0xa05f, 0x6829, 0x60d4, 0x1, 0x0);
        gbc.writeMem(0xb0e6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x89e9);
        EXPECT(gbc.pc(), 0xb0e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0e6), 0xcb);
        EXPECT(gbc.readMem(0xb0e7), 0xa1);
        // CB A1 0179
        gbc.setState(0x7eff, 0x3fa1, 0xd40, 0x6b2b, 0xcd59, 0x7a06, 0x0, 0x0);
        gbc.writeMem(0x7eff, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3fa1);
        EXPECT(gbc.pc(), 0x7f01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 017A
        gbc.setState(0xe9f0, 0x11d7, 0xf7e0, 0x6f8c, 0x1656, 0x8963, 0x0, 0x0);
        gbc.writeMem(0xe9f0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x11d7);
        EXPECT(gbc.pc(), 0xe9f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f0), 0xcb);
        EXPECT(gbc.readMem(0xe9f1), 0xa1);
        // CB A1 017B
        gbc.setState(0x7fe5, 0x879b, 0x7960, 0xe660, 0x5212, 0x484c, 0x1, 0x0);
        gbc.writeMem(0x7fe5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x879b);
        EXPECT(gbc.pc(), 0x7fe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 017C
        gbc.setState(0x29e7, 0xb71a, 0x18e0, 0x3f47, 0x2568, 0xaa73, 0x1, 0x0);
        gbc.writeMem(0x29e7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb71a);
        EXPECT(gbc.pc(), 0x29e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 017D
        gbc.setState(0x99d0, 0x9828, 0x1120, 0x4170, 0x9173, 0xb0d0, 0x0, 0x1);
        gbc.writeMem(0x99d0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9828);
        EXPECT(gbc.pc(), 0x99d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99d0), 0xcb);
        EXPECT(gbc.readMem(0x99d1), 0xa1);
        // CB A1 017E
        gbc.setState(0xad47, 0xe60a, 0xfd80, 0xa695, 0x366a, 0xeea6, 0x0, 0x1);
        gbc.writeMem(0xad47, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe60a);
        EXPECT(gbc.pc(), 0xad49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad47), 0xcb);
        EXPECT(gbc.readMem(0xad48), 0xa1);
        // CB A1 017F
        gbc.setState(0x6659, 0x5e1a, 0x33d0, 0xfee3, 0x8cc8, 0x9b5c, 0x1, 0x1);
        gbc.writeMem(0x6659, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x5e1a);
        EXPECT(gbc.pc(), 0x665b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0180
        gbc.setState(0xe2a7, 0xa5f6, 0x1280, 0x929d, 0x4c3a, 0x6b86, 0x1, 0x0);
        gbc.writeMem(0xe2a7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa5f6);
        EXPECT(gbc.pc(), 0xe2a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2a7), 0xcb);
        EXPECT(gbc.readMem(0xe2a8), 0xa1);
        // CB A1 0181
        gbc.setState(0xe994, 0x8fd5, 0x12a0, 0xb8b3, 0xf006, 0x66f1, 0x0, 0x1);
        gbc.writeMem(0xe994, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8fd5);
        EXPECT(gbc.pc(), 0xe996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe994), 0xcb);
        EXPECT(gbc.readMem(0xe995), 0xa1);
        // CB A1 0182
        gbc.setState(0xd4fa, 0xbf6b, 0x14c0, 0x9410, 0x9119, 0x9bad, 0x1, 0x0);
        gbc.writeMem(0xd4fa, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xbf6b);
        EXPECT(gbc.pc(), 0xd4fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4fa), 0xcb);
        EXPECT(gbc.readMem(0xd4fb), 0xa1);
        // CB A1 0183
        gbc.setState(0xc8f1, 0xe4ec, 0x1580, 0x13f, 0xf9f2, 0xb96f, 0x0, 0x1);
        gbc.writeMem(0xc8f1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe4ec);
        EXPECT(gbc.pc(), 0xc8f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8f1), 0xcb);
        EXPECT(gbc.readMem(0xc8f2), 0xa1);
        // CB A1 0184
        gbc.setState(0x2d0b, 0x75b4, 0xfb70, 0xa309, 0xfe72, 0xd89, 0x1, 0x1);
        gbc.writeMem(0x2d0b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x75b4);
        EXPECT(gbc.pc(), 0x2d0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0185
        gbc.setState(0x76f7, 0x1237, 0xf7b0, 0xbc4, 0x9bf0, 0x1cc, 0x1, 0x0);
        gbc.writeMem(0x76f7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1237);
        EXPECT(gbc.pc(), 0x76f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0186
        gbc.setState(0x1cd1, 0x7f30, 0x2960, 0x2f6c, 0xcdd1, 0x69cf, 0x0, 0x1);
        gbc.writeMem(0x1cd1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7f30);
        EXPECT(gbc.pc(), 0x1cd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0188
        gbc.setState(0xbf5b, 0xebf6, 0xb2b0, 0xa02, 0xadef, 0x7348, 0x1, 0x1);
        gbc.writeMem(0xbf5b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xebf6);
        EXPECT(gbc.pc(), 0xbf5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf5b), 0xcb);
        EXPECT(gbc.readMem(0xbf5c), 0xa1);
        // CB A1 0189
        gbc.setState(0x5ebb, 0x784d, 0xc00, 0xb14, 0x24f6, 0x62b6, 0x1, 0x1);
        gbc.writeMem(0x5ebb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x784d);
        EXPECT(gbc.pc(), 0x5ebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 018A
        gbc.setState(0xcaea, 0x636f, 0xf590, 0x399f, 0x59ae, 0x8596, 0x1, 0x1);
        gbc.writeMem(0xcaea, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x636f);
        EXPECT(gbc.pc(), 0xcaec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaea), 0xcb);
        EXPECT(gbc.readMem(0xcaeb), 0xa1);
        // CB A1 018B
        gbc.setState(0x1f89, 0x11b3, 0xe1a0, 0xaeed, 0x2456, 0xcb75, 0x1, 0x1);
        gbc.writeMem(0x1f89, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x11b3);
        EXPECT(gbc.pc(), 0x1f8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 018C
        gbc.setState(0x1c78, 0xd2af, 0xaa90, 0xb6c4, 0x99c8, 0xaf81, 0x0, 0x0);
        gbc.writeMem(0x1c78, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd2af);
        EXPECT(gbc.pc(), 0x1c7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 018D
        gbc.setState(0x3f88, 0x970e, 0xea30, 0x2a0f, 0xbb, 0x667e, 0x0, 0x0);
        gbc.writeMem(0x3f88, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x970e);
        EXPECT(gbc.pc(), 0x3f8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 018E
        gbc.setState(0xa483, 0xa1c6, 0x9e40, 0x983d, 0x402a, 0x2390, 0x1, 0x0);
        gbc.writeMem(0xa483, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa1c6);
        EXPECT(gbc.pc(), 0xa485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa483), 0xcb);
        EXPECT(gbc.readMem(0xa484), 0xa1);
        // CB A1 018F
        gbc.setState(0x87c0, 0xf322, 0x0, 0x684e, 0x188b, 0x7325, 0x0, 0x1);
        gbc.writeMem(0x87c0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf322);
        EXPECT(gbc.pc(), 0x87c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c0), 0xcb);
        EXPECT(gbc.readMem(0x87c1), 0xa1);
        // CB A1 0190
        gbc.setState(0x7384, 0x7ac9, 0x30d0, 0xe791, 0x451b, 0xc9f0, 0x0, 0x1);
        gbc.writeMem(0x7384, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7ac9);
        EXPECT(gbc.pc(), 0x7386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0191
        gbc.setState(0x4833, 0xea18, 0x6a0, 0x6efb, 0xf18f, 0x923f, 0x1, 0x0);
        gbc.writeMem(0x4833, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xea18);
        EXPECT(gbc.pc(), 0x4835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0192
        gbc.setState(0x9b79, 0xea21, 0x1780, 0xf567, 0x48b9, 0x1a42, 0x1, 0x1);
        gbc.writeMem(0x9b79, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xea21);
        EXPECT(gbc.pc(), 0x9b7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b79), 0xcb);
        EXPECT(gbc.readMem(0x9b7a), 0xa1);
        // CB A1 0193
        gbc.setState(0xaab9, 0x112b, 0x1410, 0x9b3b, 0x5a44, 0x725, 0x0, 0x1);
        gbc.writeMem(0xaab9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x112b);
        EXPECT(gbc.pc(), 0xaabb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaab9), 0xcb);
        EXPECT(gbc.readMem(0xaaba), 0xa1);
        // CB A1 0194
        gbc.setState(0xbaaf, 0xba14, 0x7070, 0x9583, 0x3a64, 0x28c9, 0x1, 0x1);
        gbc.writeMem(0xbaaf, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xba14);
        EXPECT(gbc.pc(), 0xbab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaaf), 0xcb);
        EXPECT(gbc.readMem(0xbab0), 0xa1);
        // CB A1 0195
        gbc.setState(0x89c8, 0x5ae5, 0x6920, 0x7e87, 0x749, 0x325a, 0x0, 0x1);
        gbc.writeMem(0x89c8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5ae5);
        EXPECT(gbc.pc(), 0x89ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c8), 0xcb);
        EXPECT(gbc.readMem(0x89c9), 0xa1);
        // CB A1 0196
        gbc.setState(0x1e82, 0x80f0, 0x91b0, 0xfc3f, 0xbda7, 0xedf5, 0x1, 0x0);
        gbc.writeMem(0x1e82, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x80f0);
        EXPECT(gbc.pc(), 0x1e84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0197
        gbc.setState(0x7785, 0xacaa, 0xa750, 0x1268, 0x14f, 0x7200, 0x1, 0x0);
        gbc.writeMem(0x7785, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xacaa);
        EXPECT(gbc.pc(), 0x7787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0198
        gbc.setState(0x38e6, 0x95fe, 0xd7c0, 0x3a3f, 0xf812, 0x29b7, 0x1, 0x0);
        gbc.writeMem(0x38e6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x95fe);
        EXPECT(gbc.pc(), 0x38e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0199
        gbc.setState(0x51ab, 0x2104, 0x9910, 0x2a50, 0x73bb, 0x40bd, 0x0, 0x1);
        gbc.writeMem(0x51ab, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2104);
        EXPECT(gbc.pc(), 0x51ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 019B
        gbc.setState(0x6c78, 0xf7ab, 0x4e0, 0xcb77, 0x62c6, 0xb798, 0x1, 0x1);
        gbc.writeMem(0x6c78, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf7ab);
        EXPECT(gbc.pc(), 0x6c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 019C
        gbc.setState(0x4d5, 0x2233, 0x4f40, 0x2f07, 0x4ad3, 0x7968, 0x0, 0x0);
        gbc.writeMem(0x4d5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2233);
        EXPECT(gbc.pc(), 0x4d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 019D
        gbc.setState(0x1b8b, 0xa1ce, 0x3280, 0xa3b3, 0x2dfd, 0x9ddd, 0x0, 0x1);
        gbc.writeMem(0x1b8b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa1ce);
        EXPECT(gbc.pc(), 0x1b8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 019F
        gbc.setState(0x6e81, 0x138e, 0x6b0, 0x3ba7, 0x726, 0x5f87, 0x0, 0x0);
        gbc.writeMem(0x6e81, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x138e);
        EXPECT(gbc.pc(), 0x6e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01A0
        gbc.setState(0xb00, 0x6c78, 0x9af0, 0x4a35, 0x669, 0xe715, 0x0, 0x0);
        gbc.writeMem(0xb00, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6c78);
        EXPECT(gbc.pc(), 0xb02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01A1
        gbc.setState(0x3aab, 0x45db, 0x19c0, 0x8575, 0x3802, 0x8f6d, 0x0, 0x0);
        gbc.writeMem(0x3aab, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x45db);
        EXPECT(gbc.pc(), 0x3aad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01A2
        gbc.setState(0x767a, 0x487a, 0xe50, 0xfd09, 0xd33f, 0xb9f, 0x0, 0x0);
        gbc.writeMem(0x767a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x487a);
        EXPECT(gbc.pc(), 0x767c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01A3
        gbc.setState(0x971c, 0x3868, 0x3ba0, 0xe729, 0xc97d, 0xe3f4, 0x1, 0x1);
        gbc.writeMem(0x971c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3868);
        EXPECT(gbc.pc(), 0x971e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x971c), 0xcb);
        EXPECT(gbc.readMem(0x971d), 0xa1);
        // CB A1 01A4
        gbc.setState(0x6f1, 0x9562, 0x9dc0, 0x2ab5, 0x8037, 0x4957, 0x1, 0x1);
        gbc.writeMem(0x6f1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9562);
        EXPECT(gbc.pc(), 0x6f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01A5
        gbc.setState(0x7603, 0x792b, 0x8a50, 0x4c68, 0x90c3, 0x3d4a, 0x1, 0x0);
        gbc.writeMem(0x7603, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x792b);
        EXPECT(gbc.pc(), 0x7605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01A6
        gbc.setState(0xbe72, 0xb6c0, 0x15f0, 0x9404, 0xc6e8, 0xe88b, 0x0, 0x1);
        gbc.writeMem(0xbe72, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0xbe74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe72), 0xcb);
        EXPECT(gbc.readMem(0xbe73), 0xa1);
        // CB A1 01A7
        gbc.setState(0xd500, 0xe939, 0x88b0, 0x1b40, 0x9948, 0x26d, 0x0, 0x1);
        gbc.writeMem(0xd500, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe939);
        EXPECT(gbc.pc(), 0xd502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd500), 0xcb);
        EXPECT(gbc.readMem(0xd501), 0xa1);
        // CB A1 01A8
        gbc.setState(0xe7bc, 0x9738, 0x4c10, 0xa5db, 0xf3ef, 0xb01f, 0x0, 0x0);
        gbc.writeMem(0xe7bc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9738);
        EXPECT(gbc.pc(), 0xe7be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7bc), 0xcb);
        EXPECT(gbc.readMem(0xe7bd), 0xa1);
        // CB A1 01A9
        gbc.setState(0xca01, 0xd99e, 0xaed0, 0xb855, 0xa00, 0xe9c7, 0x1, 0x1);
        gbc.writeMem(0xca01, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd99e);
        EXPECT(gbc.pc(), 0xca03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca01), 0xcb);
        EXPECT(gbc.readMem(0xca02), 0xa1);
        // CB A1 01AA
        gbc.setState(0x31c0, 0xbd1d, 0x7c90, 0xe88a, 0x42a, 0x3351, 0x0, 0x1);
        gbc.writeMem(0x31c0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbd1d);
        EXPECT(gbc.pc(), 0x31c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01AB
        gbc.setState(0x93b9, 0x976a, 0xd9f0, 0xdf06, 0x191, 0x845b, 0x0, 0x0);
        gbc.writeMem(0x93b9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x976a);
        EXPECT(gbc.pc(), 0x93bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93b9), 0xcb);
        EXPECT(gbc.readMem(0x93ba), 0xa1);
        // CB A1 01AC
        gbc.setState(0xcd07, 0x40d, 0x8860, 0xc21a, 0xa59, 0xbb3e, 0x1, 0x0);
        gbc.writeMem(0xcd07, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x40d);
        EXPECT(gbc.pc(), 0xcd09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd07), 0xcb);
        EXPECT(gbc.readMem(0xcd08), 0xa1);
        // CB A1 01AD
        gbc.setState(0xd363, 0x9d6e, 0xd6f0, 0x72a9, 0xacfd, 0x8ed9, 0x1, 0x0);
        gbc.writeMem(0xd363, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9d6e);
        EXPECT(gbc.pc(), 0xd365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd363), 0xcb);
        EXPECT(gbc.readMem(0xd364), 0xa1);
        // CB A1 01AE
        gbc.setState(0xb2e1, 0xfd6, 0x42a0, 0x58e5, 0x402, 0x2a02, 0x1, 0x0);
        gbc.writeMem(0xb2e1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xfd6);
        EXPECT(gbc.pc(), 0xb2e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e1), 0xcb);
        EXPECT(gbc.readMem(0xb2e2), 0xa1);
        // CB A1 01AF
        gbc.setState(0x9c4f, 0xecab, 0xb390, 0x3048, 0xcf7b, 0xe02f, 0x1, 0x0);
        gbc.writeMem(0x9c4f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xecab);
        EXPECT(gbc.pc(), 0x9c51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c4f), 0xcb);
        EXPECT(gbc.readMem(0x9c50), 0xa1);
        // CB A1 01B0
        gbc.setState(0x94e4, 0x76a8, 0x7500, 0xd776, 0xb5a5, 0xe284, 0x0, 0x1);
        gbc.writeMem(0x94e4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x76a8);
        EXPECT(gbc.pc(), 0x94e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e4), 0xcb);
        EXPECT(gbc.readMem(0x94e5), 0xa1);
        // CB A1 01B1
        gbc.setState(0xa218, 0xec10, 0x8c10, 0xae6a, 0x4ed8, 0xc6f6, 0x1, 0x0);
        gbc.writeMem(0xa218, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xec10);
        EXPECT(gbc.pc(), 0xa21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa218), 0xcb);
        EXPECT(gbc.readMem(0xa219), 0xa1);
        // CB A1 01B2
        gbc.setState(0x15ea, 0x314a, 0xbdd0, 0xd14b, 0x69eb, 0x563d, 0x0, 0x0);
        gbc.writeMem(0x15ea, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x314a);
        EXPECT(gbc.pc(), 0x15ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01B3
        gbc.setState(0x16bb, 0x3b1b, 0x3cf0, 0x277c, 0xb7f8, 0xfbef, 0x1, 0x0);
        gbc.writeMem(0x16bb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3b1b);
        EXPECT(gbc.pc(), 0x16bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01B4
        gbc.setState(0xdb6c, 0x9a92, 0x9910, 0x9080, 0x415a, 0x846, 0x1, 0x1);
        gbc.writeMem(0xdb6c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9a92);
        EXPECT(gbc.pc(), 0xdb6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb6c), 0xcb);
        EXPECT(gbc.readMem(0xdb6d), 0xa1);
        // CB A1 01B5
        gbc.setState(0xe07b, 0x6f4a, 0xe510, 0xd37c, 0x9941, 0xc047, 0x0, 0x1);
        gbc.writeMem(0xe07b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6f4a);
        EXPECT(gbc.pc(), 0xe07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe07b), 0xcb);
        EXPECT(gbc.readMem(0xe07c), 0xa1);
        // CB A1 01B6
        gbc.setState(0x2704, 0x3dd5, 0x9dc0, 0x5471, 0xb164, 0x5e25, 0x0, 0x1);
        gbc.writeMem(0x2704, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3dd5);
        EXPECT(gbc.pc(), 0x2706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01B7
        gbc.setState(0xdb9, 0xfd9b, 0xc0b0, 0x8996, 0xf061, 0xe85a, 0x1, 0x1);
        gbc.writeMem(0xdb9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfd9b);
        EXPECT(gbc.pc(), 0xdbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01B8
        gbc.setState(0x7ac, 0x58bc, 0x6af0, 0x8986, 0xf83a, 0xd04e, 0x1, 0x1);
        gbc.writeMem(0x7ac, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x58bc);
        EXPECT(gbc.pc(), 0x7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01B9
        gbc.setState(0x41ac, 0xa6d4, 0xd5f0, 0xf5b6, 0x902c, 0xfefc, 0x0, 0x0);
        gbc.writeMem(0x41ac, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa6d4);
        EXPECT(gbc.pc(), 0x41ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01BA
        gbc.setState(0xa903, 0xbe18, 0x3370, 0xec55, 0x174f, 0x7c5f, 0x0, 0x0);
        gbc.writeMem(0xa903, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbe18);
        EXPECT(gbc.pc(), 0xa905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa903), 0xcb);
        EXPECT(gbc.readMem(0xa904), 0xa1);
        // CB A1 01BB
        gbc.setState(0xeb80, 0xd1c9, 0xd460, 0x7bb4, 0x44ef, 0x49d4, 0x1, 0x0);
        gbc.writeMem(0xeb80, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd1c9);
        EXPECT(gbc.pc(), 0xeb82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb80), 0xcb);
        EXPECT(gbc.readMem(0xeb81), 0xa1);
        // CB A1 01BD
        gbc.setState(0xc947, 0xcd1d, 0x3040, 0x6312, 0x86b0, 0x5b83, 0x1, 0x1);
        gbc.writeMem(0xc947, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xcd1d);
        EXPECT(gbc.pc(), 0xc949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc947), 0xcb);
        EXPECT(gbc.readMem(0xc948), 0xa1);
        // CB A1 01BE
        gbc.setState(0x5d2f, 0xfc13, 0x85f0, 0x3de9, 0xd773, 0xe431, 0x1, 0x0);
        gbc.writeMem(0x5d2f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfc13);
        EXPECT(gbc.pc(), 0x5d31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01BF
        gbc.setState(0xe62b, 0x63e1, 0xe280, 0xbf94, 0x7e6f, 0x9b13, 0x0, 0x1);
        gbc.writeMem(0xe62b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x63e1);
        EXPECT(gbc.pc(), 0xe62d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe62b), 0xcb);
        EXPECT(gbc.readMem(0xe62c), 0xa1);
        // CB A1 01C0
        gbc.setState(0x4bd8, 0xbfeb, 0x6b00, 0x8d77, 0x3a90, 0x2cd4, 0x1, 0x1);
        gbc.writeMem(0x4bd8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbfeb);
        EXPECT(gbc.pc(), 0x4bda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01C2
        gbc.setState(0xd786, 0x4f75, 0xb5e0, 0xd473, 0x4bf8, 0xd0d4, 0x1, 0x1);
        gbc.writeMem(0xd786, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4f75);
        EXPECT(gbc.pc(), 0xd788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd786), 0xcb);
        EXPECT(gbc.readMem(0xd787), 0xa1);
        // CB A1 01C3
        gbc.setState(0x6011, 0xe371, 0x9f20, 0x2ac7, 0x9c48, 0x9f67, 0x1, 0x0);
        gbc.writeMem(0x6011, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe371);
        EXPECT(gbc.pc(), 0x6013);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01C4
        gbc.setState(0xe77f, 0xbf10, 0xd420, 0x4a56, 0x35fd, 0x9a53, 0x0, 0x0);
        gbc.writeMem(0xe77f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xbf10);
        EXPECT(gbc.pc(), 0xe781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe77f), 0xcb);
        EXPECT(gbc.readMem(0xe780), 0xa1);
        // CB A1 01C5
        gbc.setState(0xefe7, 0x9dee, 0x56f0, 0xecb3, 0x1509, 0x4be, 0x1, 0x0);
        gbc.writeMem(0xefe7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9dee);
        EXPECT(gbc.pc(), 0xefe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefe7), 0xcb);
        EXPECT(gbc.readMem(0xefe8), 0xa1);
        // CB A1 01C6
        gbc.setState(0x5b95, 0xe6b9, 0x8500, 0xeecb, 0xe1bf, 0x644, 0x1, 0x0);
        gbc.writeMem(0x5b95, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe6b9);
        EXPECT(gbc.pc(), 0x5b97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01C7
        gbc.setState(0xdc13, 0xd472, 0x7560, 0xa9d1, 0xf461, 0x377e, 0x1, 0x1);
        gbc.writeMem(0xdc13, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xd472);
        EXPECT(gbc.pc(), 0xdc15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc13), 0xcb);
        EXPECT(gbc.readMem(0xdc14), 0xa1);
        // CB A1 01C8
        gbc.setState(0xce5d, 0xf2ad, 0x4e80, 0xa7e6, 0x2e99, 0x82a0, 0x0, 0x0);
        gbc.writeMem(0xce5d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf2ad);
        EXPECT(gbc.pc(), 0xce5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce5d), 0xcb);
        EXPECT(gbc.readMem(0xce5e), 0xa1);
        // CB A1 01C9
        gbc.setState(0x1915, 0x702e, 0xb760, 0xda64, 0xbb5c, 0x20, 0x1, 0x0);
        gbc.writeMem(0x1915, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x702e);
        EXPECT(gbc.pc(), 0x1917);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01CA
        gbc.setState(0x9578, 0x231f, 0x4220, 0xd61, 0x8472, 0x7bb9, 0x1, 0x0);
        gbc.writeMem(0x9578, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x231f);
        EXPECT(gbc.pc(), 0x957a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9578), 0xcb);
        EXPECT(gbc.readMem(0x9579), 0xa1);
        // CB A1 01CB
        gbc.setState(0xd8ee, 0x2be8, 0xe770, 0x9265, 0x32b3, 0x11b, 0x1, 0x0);
        gbc.writeMem(0xd8ee, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2be8);
        EXPECT(gbc.pc(), 0xd8f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ee), 0xcb);
        EXPECT(gbc.readMem(0xd8ef), 0xa1);
        // CB A1 01CC
        gbc.setState(0xebae, 0x5166, 0xf410, 0xb01, 0xa003, 0xa19a, 0x0, 0x1);
        gbc.writeMem(0xebae, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5166);
        EXPECT(gbc.pc(), 0xebb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebae), 0xcb);
        EXPECT(gbc.readMem(0xebaf), 0xa1);
        // CB A1 01CD
        gbc.setState(0x3ae, 0xb7b2, 0xd130, 0xd462, 0x779c, 0xeacb, 0x1, 0x0);
        gbc.writeMem(0x3ae, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb7b2);
        EXPECT(gbc.pc(), 0x3b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01CE
        gbc.setState(0x64fb, 0x54b5, 0x1a50, 0x4461, 0xb1d3, 0x1eff, 0x0, 0x1);
        gbc.writeMem(0x64fb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x54b5);
        EXPECT(gbc.pc(), 0x64fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01CF
        gbc.setState(0xce7c, 0x9a27, 0xe140, 0xceac, 0x886d, 0x95f9, 0x0, 0x1);
        gbc.writeMem(0xce7c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9a27);
        EXPECT(gbc.pc(), 0xce7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce7c), 0xcb);
        EXPECT(gbc.readMem(0xce7d), 0xa1);
        // CB A1 01D0
        gbc.setState(0x70f6, 0x3e0, 0xb8c0, 0x82a8, 0xbf03, 0x5372, 0x0, 0x1);
        gbc.writeMem(0x70f6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3e0);
        EXPECT(gbc.pc(), 0x70f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01D1
        gbc.setState(0x2bd6, 0x1ef3, 0x18c0, 0x4386, 0x8856, 0x73b5, 0x0, 0x0);
        gbc.writeMem(0x2bd6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1ef3);
        EXPECT(gbc.pc(), 0x2bd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01D2
        gbc.setState(0x9ca5, 0x68e6, 0xe970, 0xba9c, 0x7175, 0x64ad, 0x1, 0x1);
        gbc.writeMem(0x9ca5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x68e6);
        EXPECT(gbc.pc(), 0x9ca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca5), 0xcb);
        EXPECT(gbc.readMem(0x9ca6), 0xa1);
        // CB A1 01D3
        gbc.setState(0x9aa1, 0x7dcd, 0xbe20, 0x9405, 0xaa96, 0x6d84, 0x0, 0x1);
        gbc.writeMem(0x9aa1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7dcd);
        EXPECT(gbc.pc(), 0x9aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa1), 0xcb);
        EXPECT(gbc.readMem(0x9aa2), 0xa1);
        // CB A1 01D4
        gbc.setState(0x369c, 0xb61d, 0x1330, 0x7433, 0x9f26, 0xf7fa, 0x0, 0x0);
        gbc.writeMem(0x369c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb61d);
        EXPECT(gbc.pc(), 0x369e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01D5
        gbc.setState(0xe318, 0xa647, 0xe0a0, 0x1b56, 0x1e49, 0x3ec6, 0x0, 0x1);
        gbc.writeMem(0xe318, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa647);
        EXPECT(gbc.pc(), 0xe31a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe318), 0xcb);
        EXPECT(gbc.readMem(0xe319), 0xa1);
        // CB A1 01D6
        gbc.setState(0xa838, 0xf9d5, 0x4f00, 0xa427, 0x3932, 0x5253, 0x0, 0x0);
        gbc.writeMem(0xa838, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf9d5);
        EXPECT(gbc.pc(), 0xa83a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa838), 0xcb);
        EXPECT(gbc.readMem(0xa839), 0xa1);
        // CB A1 01D7
        gbc.setState(0x91b7, 0x5171, 0x4a50, 0x7e3b, 0x25e7, 0xa2c5, 0x1, 0x0);
        gbc.writeMem(0x91b7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5171);
        EXPECT(gbc.pc(), 0x91b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b7), 0xcb);
        EXPECT(gbc.readMem(0x91b8), 0xa1);
        // CB A1 01D8
        gbc.setState(0x3a32, 0x92d5, 0x1880, 0x5a7, 0xee66, 0x5c23, 0x0, 0x1);
        gbc.writeMem(0x3a32, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x92d5);
        EXPECT(gbc.pc(), 0x3a34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01D9
        gbc.setState(0x6e3b, 0xd600, 0x2e50, 0x4990, 0x6f90, 0xb4d8, 0x0, 0x1);
        gbc.writeMem(0x6e3b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd600);
        EXPECT(gbc.pc(), 0x6e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01DA
        gbc.setState(0x80c1, 0x4cc9, 0x2000, 0xd816, 0xc073, 0x95cd, 0x0, 0x1);
        gbc.writeMem(0x80c1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4cc9);
        EXPECT(gbc.pc(), 0x80c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c1), 0xcb);
        EXPECT(gbc.readMem(0x80c2), 0xa1);
        // CB A1 01DB
        gbc.setState(0x1d05, 0x2e7b, 0x680, 0xf28c, 0xc354, 0xa597, 0x1, 0x0);
        gbc.writeMem(0x1d05, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2e7b);
        EXPECT(gbc.pc(), 0x1d07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01DC
        gbc.setState(0x4096, 0x8d7, 0xb870, 0x1ee5, 0x9172, 0xbe45, 0x1, 0x0);
        gbc.writeMem(0x4096, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8d7);
        EXPECT(gbc.pc(), 0x4098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01DD
        gbc.setState(0x1788, 0xa78c, 0xeb40, 0x11d7, 0x7d68, 0xcfe8, 0x0, 0x0);
        gbc.writeMem(0x1788, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa78c);
        EXPECT(gbc.pc(), 0x178a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01DE
        gbc.setState(0xa721, 0xb6c0, 0x7440, 0xe675, 0xe404, 0x421d, 0x1, 0x1);
        gbc.writeMem(0xa721, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0xa723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa721), 0xcb);
        EXPECT(gbc.readMem(0xa722), 0xa1);
        // CB A1 01DF
        gbc.setState(0x6791, 0xf117, 0x65b0, 0xfb5a, 0xdb21, 0xa052, 0x1, 0x0);
        gbc.writeMem(0x6791, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf117);
        EXPECT(gbc.pc(), 0x6793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01E0
        gbc.setState(0xa315, 0xb7f4, 0x7f30, 0x9343, 0x31c5, 0x8764, 0x1, 0x0);
        gbc.writeMem(0xa315, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb7f4);
        EXPECT(gbc.pc(), 0xa317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa315), 0xcb);
        EXPECT(gbc.readMem(0xa316), 0xa1);
        // CB A1 01E1
        gbc.setState(0x3881, 0xbba7, 0xddb0, 0xfb8a, 0xab42, 0xaf8e, 0x1, 0x1);
        gbc.writeMem(0x3881, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbba7);
        EXPECT(gbc.pc(), 0x3883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01E2
        gbc.setState(0x1993, 0x4cda, 0x9130, 0x8e69, 0x4aec, 0x3018, 0x1, 0x0);
        gbc.writeMem(0x1993, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4cda);
        EXPECT(gbc.pc(), 0x1995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01E3
        gbc.setState(0xd795, 0xcef2, 0x71d0, 0x4f64, 0xaae6, 0xbe55, 0x0, 0x1);
        gbc.writeMem(0xd795, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xcef2);
        EXPECT(gbc.pc(), 0xd797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd795), 0xcb);
        EXPECT(gbc.readMem(0xd796), 0xa1);
        // CB A1 01E4
        gbc.setState(0x31f9, 0x522a, 0x5110, 0x99e, 0xea7d, 0x798b, 0x0, 0x1);
        gbc.writeMem(0x31f9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x522a);
        EXPECT(gbc.pc(), 0x31fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01E5
        gbc.setState(0x17f5, 0x5d80, 0x2e0, 0xb802, 0x2064, 0x4c68, 0x1, 0x0);
        gbc.writeMem(0x17f5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5d80);
        EXPECT(gbc.pc(), 0x17f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01E6
        gbc.setState(0xc98c, 0xcbdf, 0x1660, 0xd6a9, 0xaa10, 0x252e, 0x0, 0x0);
        gbc.writeMem(0xc98c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcbdf);
        EXPECT(gbc.pc(), 0xc98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc98c), 0xcb);
        EXPECT(gbc.readMem(0xc98d), 0xa1);
        // CB A1 01E7
        gbc.setState(0x753b, 0x1e93, 0x9830, 0x1644, 0xcde5, 0xd62f, 0x1, 0x1);
        gbc.writeMem(0x753b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1e93);
        EXPECT(gbc.pc(), 0x753d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01E8
        gbc.setState(0xb698, 0x6223, 0x9e00, 0xbad6, 0xf0f7, 0xe699, 0x1, 0x1);
        gbc.writeMem(0xb698, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6223);
        EXPECT(gbc.pc(), 0xb69a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb698), 0xcb);
        EXPECT(gbc.readMem(0xb699), 0xa1);
        // CB A1 01E9
        gbc.setState(0x5759, 0x65bd, 0x4970, 0xa188, 0x471f, 0xab9f, 0x0, 0x1);
        gbc.writeMem(0x5759, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x65bd);
        EXPECT(gbc.pc(), 0x575b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01EA
        gbc.setState(0x668a, 0x1257, 0xa9e0, 0x84d9, 0x68fe, 0x145d, 0x0, 0x1);
        gbc.writeMem(0x668a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x1257);
        EXPECT(gbc.pc(), 0x668c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01EC
        gbc.setState(0x5571, 0xc81c, 0x68b0, 0x4a45, 0x169a, 0xdfa8, 0x0, 0x0);
        gbc.writeMem(0x5571, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc81c);
        EXPECT(gbc.pc(), 0x5573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01ED
        gbc.setState(0x294e, 0x4458, 0x3860, 0xa6f, 0x3012, 0x5645, 0x0, 0x1);
        gbc.writeMem(0x294e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4458);
        EXPECT(gbc.pc(), 0x2950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01EE
        gbc.setState(0x6be4, 0xd287, 0xde00, 0xae02, 0xd32c, 0xe6ce, 0x0, 0x0);
        gbc.writeMem(0x6be4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd287);
        EXPECT(gbc.pc(), 0x6be6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01EF
        gbc.setState(0x4a8a, 0xeb67, 0xe150, 0xebb6, 0x9f70, 0xd5a8, 0x1, 0x1);
        gbc.writeMem(0x4a8a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xeb67);
        EXPECT(gbc.pc(), 0x4a8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01F0
        gbc.setState(0xa491, 0xcd24, 0xae0, 0xa081, 0x67b2, 0x5db0, 0x0, 0x1);
        gbc.writeMem(0xa491, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xcd24);
        EXPECT(gbc.pc(), 0xa493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa491), 0xcb);
        EXPECT(gbc.readMem(0xa492), 0xa1);
        // CB A1 01F1
        gbc.setState(0x34a8, 0xb6da, 0x1a70, 0x8f57, 0x6c10, 0xf35b, 0x0, 0x0);
        gbc.writeMem(0x34a8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb6da);
        EXPECT(gbc.pc(), 0x34aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 01F2
        gbc.setState(0xc2de, 0x5cbc, 0x4470, 0x927f, 0x274c, 0x9c47, 0x0, 0x1);
        gbc.writeMem(0xc2de, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5cbc);
        EXPECT(gbc.pc(), 0xc2e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2de), 0xcb);
        EXPECT(gbc.readMem(0xc2df), 0xa1);
        // CB A1 01F3
        gbc.setState(0x7d75, 0xaf1f, 0xa8a0, 0xd9b, 0xc210, 0x6fd9, 0x1, 0x0);
        gbc.writeMem(0x7d75, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xaf1f);
        EXPECT(gbc.pc(), 0x7d77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01F5
        gbc.setState(0xe919, 0xd7ed, 0x8680, 0x571d, 0x8e93, 0x4034, 0x1, 0x0);
        gbc.writeMem(0xe919, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd7ed);
        EXPECT(gbc.pc(), 0xe91b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe919), 0xcb);
        EXPECT(gbc.readMem(0xe91a), 0xa1);
        // CB A1 01F6
        gbc.setState(0x3da5, 0xafab, 0x1300, 0xb55f, 0xad2c, 0x6ffa, 0x1, 0x1);
        gbc.writeMem(0x3da5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xafab);
        EXPECT(gbc.pc(), 0x3da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01F7
        gbc.setState(0x7ac6, 0xae40, 0x1da0, 0x1280, 0xb362, 0xfe6c, 0x1, 0x0);
        gbc.writeMem(0x7ac6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xae40);
        EXPECT(gbc.pc(), 0x7ac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01F8
        gbc.setState(0xa563, 0x40a2, 0x9ef0, 0xe3ba, 0x3ccf, 0x2cfc, 0x0, 0x0);
        gbc.writeMem(0xa563, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x40a2);
        EXPECT(gbc.pc(), 0xa565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa563), 0xcb);
        EXPECT(gbc.readMem(0xa564), 0xa1);
        // CB A1 01F9
        gbc.setState(0x50a, 0xea02, 0x7700, 0x1101, 0xf04c, 0x2030, 0x1, 0x0);
        gbc.writeMem(0x50a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xea02);
        EXPECT(gbc.pc(), 0x50c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01FA
        gbc.setState(0xc2c1, 0x110b, 0x2c30, 0x377, 0x5d48, 0x5274, 0x0, 0x1);
        gbc.writeMem(0xc2c1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x110b);
        EXPECT(gbc.pc(), 0xc2c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c1), 0xcb);
        EXPECT(gbc.readMem(0xc2c2), 0xa1);
        // CB A1 01FB
        gbc.setState(0xd9b3, 0xcb88, 0xbe60, 0xd916, 0xaae2, 0x76f2, 0x1, 0x1);
        gbc.writeMem(0xd9b3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcb88);
        EXPECT(gbc.pc(), 0xd9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b3), 0xcb);
        EXPECT(gbc.readMem(0xd9b4), 0xa1);
        // CB A1 01FC
        gbc.setState(0xea4c, 0x3e34, 0x35d0, 0xed5e, 0x7a85, 0xd39c, 0x1, 0x1);
        gbc.writeMem(0xea4c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3e34);
        EXPECT(gbc.pc(), 0xea4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea4c), 0xcb);
        EXPECT(gbc.readMem(0xea4d), 0xa1);
        // CB A1 01FD
        gbc.setState(0x9d46, 0xd60d, 0xd450, 0x3e7e, 0x66ba, 0x820e, 0x1, 0x1);
        gbc.writeMem(0x9d46, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd60d);
        EXPECT(gbc.pc(), 0x9d48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d46), 0xcb);
        EXPECT(gbc.readMem(0x9d47), 0xa1);
        // CB A1 01FE
        gbc.setState(0x1e97, 0xb09e, 0xfd60, 0xdacd, 0x5cf5, 0xdc34, 0x0, 0x0);
        gbc.writeMem(0x1e97, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb09e);
        EXPECT(gbc.pc(), 0x1e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 01FF
        gbc.setState(0x32f3, 0x69d0, 0x1cc0, 0x5f5f, 0x489e, 0x46ef, 0x1, 0x1);
        gbc.writeMem(0x32f3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x69d0);
        EXPECT(gbc.pc(), 0x32f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0200
        gbc.setState(0x8498, 0xee61, 0xd9a0, 0xca2f, 0x5f4a, 0x1bce, 0x0, 0x1);
        gbc.writeMem(0x8498, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xee61);
        EXPECT(gbc.pc(), 0x849a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8498), 0xcb);
        EXPECT(gbc.readMem(0x8499), 0xa1);
        // CB A1 0201
        gbc.setState(0x44dc, 0x1379, 0x350, 0x85aa, 0x9b08, 0xe612, 0x0, 0x1);
        gbc.writeMem(0x44dc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1379);
        EXPECT(gbc.pc(), 0x44de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0202
        gbc.setState(0x1703, 0x1082, 0x2ae0, 0xd879, 0xe6f1, 0x8222, 0x0, 0x0);
        gbc.writeMem(0x1703, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1082);
        EXPECT(gbc.pc(), 0x1705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0203
        gbc.setState(0x574a, 0xa5b1, 0x1560, 0x3ef4, 0xf5c6, 0x511a, 0x1, 0x0);
        gbc.writeMem(0x574a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa5b1);
        EXPECT(gbc.pc(), 0x574c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0204
        gbc.setState(0x84f6, 0x59e0, 0x2260, 0x8f47, 0xeb03, 0x5303, 0x1, 0x0);
        gbc.writeMem(0x84f6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x59e0);
        EXPECT(gbc.pc(), 0x84f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f6), 0xcb);
        EXPECT(gbc.readMem(0x84f7), 0xa1);
        // CB A1 0205
        gbc.setState(0x4c51, 0x9ee8, 0x5270, 0xda10, 0x9c73, 0x5bbb, 0x0, 0x0);
        gbc.writeMem(0x4c51, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9ee8);
        EXPECT(gbc.pc(), 0x4c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0206
        gbc.setState(0x56a6, 0xc3e, 0x7030, 0x78ba, 0xfab1, 0x5dd8, 0x1, 0x0);
        gbc.writeMem(0x56a6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc3e);
        EXPECT(gbc.pc(), 0x56a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0207
        gbc.setState(0x1eda, 0x3b0e, 0x6eb0, 0x959b, 0x223b, 0x4fe3, 0x1, 0x1);
        gbc.writeMem(0x1eda, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3b0e);
        EXPECT(gbc.pc(), 0x1edc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0208
        gbc.setState(0x34dd, 0x471, 0xfcc0, 0x892, 0x86e1, 0xf51f, 0x0, 0x1);
        gbc.writeMem(0x34dd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x471);
        EXPECT(gbc.pc(), 0x34df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0209
        gbc.setState(0xc459, 0xeb25, 0x1480, 0xcc65, 0x2362, 0xeca4, 0x0, 0x0);
        gbc.writeMem(0xc459, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xeb25);
        EXPECT(gbc.pc(), 0xc45b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc459), 0xcb);
        EXPECT(gbc.readMem(0xc45a), 0xa1);
        // CB A1 020A
        gbc.setState(0x762, 0x60d2, 0x7660, 0xc511, 0x9153, 0xa513, 0x0, 0x1);
        gbc.writeMem(0x762, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x60d2);
        EXPECT(gbc.pc(), 0x764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 020B
        gbc.setState(0xcc7e, 0xec2c, 0x4ac0, 0x9880, 0xdc3f, 0xd495, 0x0, 0x1);
        gbc.writeMem(0xcc7e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xec2c);
        EXPECT(gbc.pc(), 0xcc80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc7e), 0xcb);
        EXPECT(gbc.readMem(0xcc7f), 0xa1);
        // CB A1 020C
        gbc.setState(0x5479, 0x9add, 0x1290, 0x110e, 0xa3cd, 0x96b3, 0x1, 0x1);
        gbc.writeMem(0x5479, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9add);
        EXPECT(gbc.pc(), 0x547b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 020D
        gbc.setState(0xa266, 0xb600, 0x7910, 0x8155, 0xba53, 0x8325, 0x1, 0x0);
        gbc.writeMem(0xa266, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb600);
        EXPECT(gbc.pc(), 0xa268);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa266), 0xcb);
        EXPECT(gbc.readMem(0xa267), 0xa1);
        // CB A1 020E
        gbc.setState(0x9d40, 0xb2f, 0x31f0, 0x3af0, 0xf240, 0x3fd1, 0x1, 0x0);
        gbc.writeMem(0x9d40, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb2f);
        EXPECT(gbc.pc(), 0x9d42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d40), 0xcb);
        EXPECT(gbc.readMem(0x9d41), 0xa1);
        // CB A1 020F
        gbc.setState(0x463d, 0x303b, 0xf150, 0x977, 0x49f9, 0x3956, 0x0, 0x1);
        gbc.writeMem(0x463d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x303b);
        EXPECT(gbc.pc(), 0x463f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0210
        gbc.setState(0x4aac, 0xf4dc, 0x7030, 0x3b15, 0xbae9, 0x6ddd, 0x0, 0x0);
        gbc.writeMem(0x4aac, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf4dc);
        EXPECT(gbc.pc(), 0x4aae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0211
        gbc.setState(0x2035, 0x43fb, 0x7e0, 0x9cd0, 0x8c87, 0xc74a, 0x1, 0x1);
        gbc.writeMem(0x2035, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x43fb);
        EXPECT(gbc.pc(), 0x2037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0212
        gbc.setState(0xc95b, 0x952, 0x1eb0, 0x1901, 0x8e07, 0x816d, 0x1, 0x0);
        gbc.writeMem(0xc95b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x952);
        EXPECT(gbc.pc(), 0xc95d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc95b), 0xcb);
        EXPECT(gbc.readMem(0xc95c), 0xa1);
        // CB A1 0213
        gbc.setState(0xd7f0, 0xda6b, 0x1310, 0xeda, 0x7a8e, 0x7c13, 0x0, 0x1);
        gbc.writeMem(0xd7f0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xda6b);
        EXPECT(gbc.pc(), 0xd7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f0), 0xcb);
        EXPECT(gbc.readMem(0xd7f1), 0xa1);
        // CB A1 0214
        gbc.setState(0xd726, 0x988, 0x5230, 0x4ea9, 0x15fb, 0x3b93, 0x1, 0x1);
        gbc.writeMem(0xd726, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x988);
        EXPECT(gbc.pc(), 0xd728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd726), 0xcb);
        EXPECT(gbc.readMem(0xd727), 0xa1);
        // CB A1 0215
        gbc.setState(0xe669, 0x20ba, 0x4890, 0x5241, 0xe8a8, 0x30b, 0x0, 0x1);
        gbc.writeMem(0xe669, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x20ba);
        EXPECT(gbc.pc(), 0xe66b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe669), 0xcb);
        EXPECT(gbc.readMem(0xe66a), 0xa1);
        // CB A1 0217
        gbc.setState(0xc2f3, 0xc4b7, 0xa250, 0xe712, 0x7c22, 0x1a01, 0x0, 0x1);
        gbc.writeMem(0xc2f3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc4b7);
        EXPECT(gbc.pc(), 0xc2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2f3), 0xcb);
        EXPECT(gbc.readMem(0xc2f4), 0xa1);
        // CB A1 0218
        gbc.setState(0xcb15, 0x2170, 0x36e0, 0xc126, 0xd9af, 0x5be3, 0x1, 0x0);
        gbc.writeMem(0xcb15, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2170);
        EXPECT(gbc.pc(), 0xcb17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb15), 0xcb);
        EXPECT(gbc.readMem(0xcb16), 0xa1);
        // CB A1 0219
        gbc.setState(0xcd6c, 0xa2ed, 0xe5e0, 0x6d4f, 0x67e6, 0x3d53, 0x1, 0x1);
        gbc.writeMem(0xcd6c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa2ed);
        EXPECT(gbc.pc(), 0xcd6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd6c), 0xcb);
        EXPECT(gbc.readMem(0xcd6d), 0xa1);
        // CB A1 021A
        gbc.setState(0x68df, 0x9223, 0x4db0, 0x6f37, 0x87b9, 0x28fd, 0x1, 0x0);
        gbc.writeMem(0x68df, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9223);
        EXPECT(gbc.pc(), 0x68e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 021B
        gbc.setState(0xa456, 0x96fa, 0x27b0, 0x7c5f, 0x16ba, 0x6cd9, 0x0, 0x0);
        gbc.writeMem(0xa456, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x96fa);
        EXPECT(gbc.pc(), 0xa458);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa456), 0xcb);
        EXPECT(gbc.readMem(0xa457), 0xa1);
        // CB A1 021C
        gbc.setState(0x953b, 0x1d3e, 0xaa0, 0xb8f7, 0x2bd7, 0x4bcb, 0x0, 0x0);
        gbc.writeMem(0x953b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1d3e);
        EXPECT(gbc.pc(), 0x953d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x953b), 0xcb);
        EXPECT(gbc.readMem(0x953c), 0xa1);
        // CB A1 021D
        gbc.setState(0x921, 0x4aec, 0xcd0, 0x7804, 0x6648, 0xd8d, 0x0, 0x1);
        gbc.writeMem(0x921, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4aec);
        EXPECT(gbc.pc(), 0x923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 021E
        gbc.setState(0xda3d, 0x9904, 0x4400, 0x25c0, 0xcc46, 0x50f6, 0x0, 0x1);
        gbc.writeMem(0xda3d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9904);
        EXPECT(gbc.pc(), 0xda3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3d), 0xcb);
        EXPECT(gbc.readMem(0xda3e), 0xa1);
        // CB A1 021F
        gbc.setState(0xe41e, 0xb134, 0x16e0, 0x7c92, 0xb730, 0xa68d, 0x1, 0x0);
        gbc.writeMem(0xe41e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb134);
        EXPECT(gbc.pc(), 0xe420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe41e), 0xcb);
        EXPECT(gbc.readMem(0xe41f), 0xa1);
        // CB A1 0220
        gbc.setState(0x12e1, 0x45c3, 0x10b0, 0x639, 0xbf2, 0xb28f, 0x1, 0x0);
        gbc.writeMem(0x12e1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x45c3);
        EXPECT(gbc.pc(), 0x12e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0221
        gbc.setState(0xaa67, 0xbca0, 0x9e00, 0x422b, 0x6447, 0x2c30, 0x1, 0x1);
        gbc.writeMem(0xaa67, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbca0);
        EXPECT(gbc.pc(), 0xaa69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa67), 0xcb);
        EXPECT(gbc.readMem(0xaa68), 0xa1);
        // CB A1 0222
        gbc.setState(0xb6bd, 0xe50c, 0x4100, 0xc9ee, 0xe69a, 0x4567, 0x1, 0x1);
        gbc.writeMem(0xb6bd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe50c);
        EXPECT(gbc.pc(), 0xb6bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6bd), 0xcb);
        EXPECT(gbc.readMem(0xb6be), 0xa1);
        // CB A1 0223
        gbc.setState(0xaee4, 0xed31, 0x85a0, 0xe1de, 0x9d1f, 0x8b6f, 0x1, 0x1);
        gbc.writeMem(0xaee4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xed31);
        EXPECT(gbc.pc(), 0xaee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee4), 0xcb);
        EXPECT(gbc.readMem(0xaee5), 0xa1);
        // CB A1 0224
        gbc.setState(0x224d, 0x2460, 0x9fa0, 0x8a35, 0x1fc3, 0xdda1, 0x1, 0x1);
        gbc.writeMem(0x224d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2460);
        EXPECT(gbc.pc(), 0x224f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0225
        gbc.setState(0xb72d, 0xa5fd, 0xc7f0, 0xe032, 0xf50a, 0xb1d3, 0x0, 0x1);
        gbc.writeMem(0xb72d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa5fd);
        EXPECT(gbc.pc(), 0xb72f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb72d), 0xcb);
        EXPECT(gbc.readMem(0xb72e), 0xa1);
        // CB A1 0226
        gbc.setState(0xed3c, 0x6fe4, 0x5760, 0x7c1a, 0x7874, 0x9f82, 0x0, 0x0);
        gbc.writeMem(0xed3c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6fe4);
        EXPECT(gbc.pc(), 0xed3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed3c), 0xcb);
        EXPECT(gbc.readMem(0xed3d), 0xa1);
        // CB A1 0227
        gbc.setState(0x6f15, 0xabe3, 0xc490, 0x11bd, 0xb1bb, 0x4cdb, 0x0, 0x1);
        gbc.writeMem(0x6f15, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xabe3);
        EXPECT(gbc.pc(), 0x6f17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0228
        gbc.setState(0x2b18, 0xe80d, 0xb480, 0x4909, 0xbc3, 0xdb48, 0x1, 0x1);
        gbc.writeMem(0x2b18, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe80d);
        EXPECT(gbc.pc(), 0x2b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0229
        gbc.setState(0xe650, 0xe7d8, 0x3f30, 0x5419, 0xa591, 0xaa6f, 0x0, 0x0);
        gbc.writeMem(0xe650, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe7d8);
        EXPECT(gbc.pc(), 0xe652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe650), 0xcb);
        EXPECT(gbc.readMem(0xe651), 0xa1);
        // CB A1 022A
        gbc.setState(0x8532, 0xe893, 0x1150, 0x343f, 0x4da7, 0xfddc, 0x1, 0x1);
        gbc.writeMem(0x8532, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe893);
        EXPECT(gbc.pc(), 0x8534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8532), 0xcb);
        EXPECT(gbc.readMem(0x8533), 0xa1);
        // CB A1 022B
        gbc.setState(0xa09a, 0x7b36, 0x930, 0xd116, 0x18de, 0xdc01, 0x0, 0x0);
        gbc.writeMem(0xa09a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7b36);
        EXPECT(gbc.pc(), 0xa09c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa09a), 0xcb);
        EXPECT(gbc.readMem(0xa09b), 0xa1);
        // CB A1 022C
        gbc.setState(0xe4ed, 0x9834, 0xb8b0, 0xff5f, 0xa9dc, 0x3ac6, 0x0, 0x0);
        gbc.writeMem(0xe4ed, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9834);
        EXPECT(gbc.pc(), 0xe4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ed), 0xcb);
        EXPECT(gbc.readMem(0xe4ee), 0xa1);
        // CB A1 022E
        gbc.setState(0x932f, 0x93d4, 0x19b0, 0xbd40, 0x38f4, 0x4260, 0x1, 0x1);
        gbc.writeMem(0x932f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x93d4);
        EXPECT(gbc.pc(), 0x9331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932f), 0xcb);
        EXPECT(gbc.readMem(0x9330), 0xa1);
        // CB A1 022F
        gbc.setState(0x9009, 0x87b5, 0xa900, 0x1f30, 0xcf47, 0x8d5, 0x0, 0x1);
        gbc.writeMem(0x9009, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x87b5);
        EXPECT(gbc.pc(), 0x900b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9009), 0xcb);
        EXPECT(gbc.readMem(0x900a), 0xa1);
        // CB A1 0230
        gbc.setState(0x9ab0, 0xb42e, 0x3370, 0x89ec, 0xb0dd, 0xfb7d, 0x1, 0x1);
        gbc.writeMem(0x9ab0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb42e);
        EXPECT(gbc.pc(), 0x9ab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ab0), 0xcb);
        EXPECT(gbc.readMem(0x9ab1), 0xa1);
        // CB A1 0231
        gbc.setState(0xdb76, 0xfc48, 0x1800, 0x415e, 0x42e3, 0x3ce4, 0x0, 0x1);
        gbc.writeMem(0xdb76, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfc48);
        EXPECT(gbc.pc(), 0xdb78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb76), 0xcb);
        EXPECT(gbc.readMem(0xdb77), 0xa1);
        // CB A1 0232
        gbc.setState(0xacf5, 0xe37c, 0x3ce0, 0x63c5, 0x80ce, 0x2d60, 0x0, 0x0);
        gbc.writeMem(0xacf5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe37c);
        EXPECT(gbc.pc(), 0xacf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf5), 0xcb);
        EXPECT(gbc.readMem(0xacf6), 0xa1);
        // CB A1 0233
        gbc.setState(0x41a1, 0xe51, 0xf040, 0x2a0a, 0x5ffe, 0x1d3f, 0x1, 0x1);
        gbc.writeMem(0x41a1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe51);
        EXPECT(gbc.pc(), 0x41a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0235
        gbc.setState(0xa361, 0x2816, 0xd120, 0x2f8a, 0x326d, 0x7aff, 0x1, 0x0);
        gbc.writeMem(0xa361, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2816);
        EXPECT(gbc.pc(), 0xa363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa361), 0xcb);
        EXPECT(gbc.readMem(0xa362), 0xa1);
        // CB A1 0236
        gbc.setState(0x3fca, 0xab8b, 0x3ac0, 0x24a5, 0xb583, 0x3a2e, 0x1, 0x1);
        gbc.writeMem(0x3fca, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xab8b);
        EXPECT(gbc.pc(), 0x3fcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0237
        gbc.setState(0xdf35, 0x379a, 0x9030, 0xb18c, 0x262a, 0x9761, 0x1, 0x0);
        gbc.writeMem(0xdf35, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x379a);
        EXPECT(gbc.pc(), 0xdf37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf35), 0xcb);
        EXPECT(gbc.readMem(0xdf36), 0xa1);
        // CB A1 0238
        gbc.setState(0x82ef, 0x7f56, 0x9930, 0x8a7e, 0x7802, 0x9f1a, 0x1, 0x1);
        gbc.writeMem(0x82ef, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7f56);
        EXPECT(gbc.pc(), 0x82f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ef), 0xcb);
        EXPECT(gbc.readMem(0x82f0), 0xa1);
        // CB A1 0239
        gbc.setState(0x9343, 0xc634, 0x7ab0, 0xff9f, 0x796a, 0x256d, 0x0, 0x0);
        gbc.writeMem(0x9343, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc634);
        EXPECT(gbc.pc(), 0x9345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9343), 0xcb);
        EXPECT(gbc.readMem(0x9344), 0xa1);
        // CB A1 023A
        gbc.setState(0x2a9e, 0xbd65, 0x98a0, 0x3015, 0x81e, 0xe7cc, 0x0, 0x0);
        gbc.writeMem(0x2a9e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbd65);
        EXPECT(gbc.pc(), 0x2aa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 023B
        gbc.setState(0x7c40, 0x7d02, 0xa060, 0x94e7, 0xf095, 0x4457, 0x0, 0x0);
        gbc.writeMem(0x7c40, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7d02);
        EXPECT(gbc.pc(), 0x7c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 023C
        gbc.setState(0x413e, 0xeeaa, 0xb2f0, 0x4c69, 0x5b3d, 0xa3dc, 0x1, 0x0);
        gbc.writeMem(0x413e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xeeaa);
        EXPECT(gbc.pc(), 0x4140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 023D
        gbc.setState(0x6489, 0x5869, 0x1a60, 0x181, 0x6fa5, 0x89ca, 0x0, 0x1);
        gbc.writeMem(0x6489, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5869);
        EXPECT(gbc.pc(), 0x648b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 023E
        gbc.setState(0xd5bd, 0x1cbf, 0xe6e0, 0xbdec, 0xf550, 0x161f, 0x0, 0x1);
        gbc.writeMem(0xd5bd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x1cbf);
        EXPECT(gbc.pc(), 0xd5bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5bd), 0xcb);
        EXPECT(gbc.readMem(0xd5be), 0xa1);
        // CB A1 023F
        gbc.setState(0xbe31, 0xecf1, 0xa310, 0x63e9, 0x7721, 0x249c, 0x0, 0x0);
        gbc.writeMem(0xbe31, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xecf1);
        EXPECT(gbc.pc(), 0xbe33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe31), 0xcb);
        EXPECT(gbc.readMem(0xbe32), 0xa1);
        // CB A1 0240
        gbc.setState(0x2827, 0xbe8c, 0xf910, 0x8fbd, 0x9454, 0xf161, 0x1, 0x1);
        gbc.writeMem(0x2827, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbe8c);
        EXPECT(gbc.pc(), 0x2829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0242
        gbc.setState(0xc837, 0xa39b, 0xbd50, 0x1de7, 0x276a, 0x2213, 0x1, 0x1);
        gbc.writeMem(0xc837, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa39b);
        EXPECT(gbc.pc(), 0xc839);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc837), 0xcb);
        EXPECT(gbc.readMem(0xc838), 0xa1);
        // CB A1 0243
        gbc.setState(0x3fd1, 0x1007, 0x8cf0, 0x99fd, 0x5f1e, 0xd92a, 0x0, 0x1);
        gbc.writeMem(0x3fd1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1007);
        EXPECT(gbc.pc(), 0x3fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0245
        gbc.setState(0x278e, 0x6ef6, 0xda20, 0xf79, 0x9c6d, 0xeeb2, 0x0, 0x1);
        gbc.writeMem(0x278e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6ef6);
        EXPECT(gbc.pc(), 0x2790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0247
        gbc.setState(0x9cbc, 0xb855, 0x4550, 0x53d5, 0x2431, 0x6a67, 0x1, 0x0);
        gbc.writeMem(0x9cbc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb855);
        EXPECT(gbc.pc(), 0x9cbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cbc), 0xcb);
        EXPECT(gbc.readMem(0x9cbd), 0xa1);
        // CB A1 0248
        gbc.setState(0x6a9f, 0xef5d, 0xca0, 0xc57, 0xc237, 0x3fc7, 0x0, 0x1);
        gbc.writeMem(0x6a9f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xef5d);
        EXPECT(gbc.pc(), 0x6aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0249
        gbc.setState(0x20fd, 0x440e, 0x3b80, 0x5ea6, 0x723f, 0xd187, 0x0, 0x1);
        gbc.writeMem(0x20fd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x440e);
        EXPECT(gbc.pc(), 0x20ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 024A
        gbc.setState(0xa0f8, 0xd0c1, 0xb620, 0x594f, 0x872f, 0xb165, 0x1, 0x0);
        gbc.writeMem(0xa0f8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd0c1);
        EXPECT(gbc.pc(), 0xa0fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f8), 0xcb);
        EXPECT(gbc.readMem(0xa0f9), 0xa1);
        // CB A1 024B
        gbc.setState(0xcb57, 0xefe9, 0xb800, 0x1b2a, 0xa80b, 0xb4fc, 0x1, 0x1);
        gbc.writeMem(0xcb57, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xefe9);
        EXPECT(gbc.pc(), 0xcb59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb57), 0xcb);
        EXPECT(gbc.readMem(0xcb58), 0xa1);
        // CB A1 024C
        gbc.setState(0xa0d8, 0xafbc, 0x21b0, 0xeb2d, 0x3a1e, 0x943b, 0x1, 0x1);
        gbc.writeMem(0xa0d8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xafbc);
        EXPECT(gbc.pc(), 0xa0da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0d8), 0xcb);
        EXPECT(gbc.readMem(0xa0d9), 0xa1);
        // CB A1 024D
        gbc.setState(0x778c, 0x6605, 0xfb10, 0x92a6, 0xb483, 0x1f03, 0x1, 0x1);
        gbc.writeMem(0x778c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6605);
        EXPECT(gbc.pc(), 0x778e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 024E
        gbc.setState(0xdd41, 0xbb84, 0xa3f0, 0x3842, 0xb04d, 0x9014, 0x0, 0x0);
        gbc.writeMem(0xdd41, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xbb84);
        EXPECT(gbc.pc(), 0xdd43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd41), 0xcb);
        EXPECT(gbc.readMem(0xdd42), 0xa1);
        // CB A1 024F
        gbc.setState(0x90f0, 0xd004, 0x3240, 0xf1e7, 0x21b9, 0xc127, 0x1, 0x0);
        gbc.writeMem(0x90f0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd004);
        EXPECT(gbc.pc(), 0x90f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f0), 0xcb);
        EXPECT(gbc.readMem(0x90f1), 0xa1);
        // CB A1 0250
        gbc.setState(0x5aeb, 0x214d, 0xb3c0, 0xb0f, 0x5109, 0x772, 0x0, 0x0);
        gbc.writeMem(0x5aeb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x214d);
        EXPECT(gbc.pc(), 0x5aed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0251
        gbc.setState(0x95f4, 0xfa8f, 0x56a0, 0x6c7f, 0x7bad, 0x3f33, 0x1, 0x0);
        gbc.writeMem(0x95f4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfa8f);
        EXPECT(gbc.pc(), 0x95f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f4), 0xcb);
        EXPECT(gbc.readMem(0x95f5), 0xa1);
        // CB A1 0252
        gbc.setState(0xcc8e, 0x37a8, 0x6a10, 0xf309, 0xbdc7, 0x8bba, 0x0, 0x0);
        gbc.writeMem(0xcc8e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x37a8);
        EXPECT(gbc.pc(), 0xcc90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8e), 0xcb);
        EXPECT(gbc.readMem(0xcc8f), 0xa1);
        // CB A1 0253
        gbc.setState(0x5e9a, 0x1fe2, 0xe6a0, 0xc3dd, 0x773c, 0xa263, 0x0, 0x1);
        gbc.writeMem(0x5e9a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1fe2);
        EXPECT(gbc.pc(), 0x5e9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0254
        gbc.setState(0xc891, 0x2b1c, 0x7ef0, 0xe70c, 0x9ae3, 0xc5bc, 0x1, 0x1);
        gbc.writeMem(0xc891, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2b1c);
        EXPECT(gbc.pc(), 0xc893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc891), 0xcb);
        EXPECT(gbc.readMem(0xc892), 0xa1);
        // CB A1 0255
        gbc.setState(0xad0c, 0x43c0, 0xba80, 0x2773, 0x8917, 0x6ac3, 0x0, 0x0);
        gbc.writeMem(0xad0c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x43c0);
        EXPECT(gbc.pc(), 0xad0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0c), 0xcb);
        EXPECT(gbc.readMem(0xad0d), 0xa1);
        // CB A1 0256
        gbc.setState(0x5e01, 0x6bc1, 0x6a60, 0x3257, 0xb032, 0xf0d7, 0x1, 0x1);
        gbc.writeMem(0x5e01, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6bc1);
        EXPECT(gbc.pc(), 0x5e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0257
        gbc.setState(0xcac9, 0x9298, 0xefb0, 0xd81e, 0xc769, 0xb97b, 0x1, 0x0);
        gbc.writeMem(0xcac9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9298);
        EXPECT(gbc.pc(), 0xcacb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcac9), 0xcb);
        EXPECT(gbc.readMem(0xcaca), 0xa1);
        // CB A1 0258
        gbc.setState(0x714, 0xb9e5, 0x1110, 0xf510, 0x45bb, 0xe6fe, 0x1, 0x0);
        gbc.writeMem(0x714, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb9e5);
        EXPECT(gbc.pc(), 0x716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0259
        gbc.setState(0x5004, 0x1997, 0x300, 0x5e9e, 0x9d61, 0xb6dd, 0x1, 0x0);
        gbc.writeMem(0x5004, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1997);
        EXPECT(gbc.pc(), 0x5006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 025A
        gbc.setState(0xcc32, 0xf9c0, 0x7950, 0xbbe4, 0x7fc9, 0x1b09, 0x0, 0x1);
        gbc.writeMem(0xcc32, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf9c0);
        EXPECT(gbc.pc(), 0xcc34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc32), 0xcb);
        EXPECT(gbc.readMem(0xcc33), 0xa1);
        // CB A1 025B
        gbc.setState(0x6199, 0x4dec, 0x7f40, 0xa114, 0x2fc5, 0x238b, 0x1, 0x1);
        gbc.writeMem(0x6199, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4dec);
        EXPECT(gbc.pc(), 0x619b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 025C
        gbc.setState(0x5331, 0xea8a, 0xec40, 0x17c5, 0x8e2e, 0x56f, 0x1, 0x0);
        gbc.writeMem(0x5331, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xea8a);
        EXPECT(gbc.pc(), 0x5333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 025E
        gbc.setState(0x5e35, 0x387e, 0x8890, 0x6a0b, 0x27ac, 0x4900, 0x1, 0x0);
        gbc.writeMem(0x5e35, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x387e);
        EXPECT(gbc.pc(), 0x5e37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 025F
        gbc.setState(0xe6cf, 0x348b, 0x19b0, 0x9e50, 0x9cce, 0x4727, 0x1, 0x1);
        gbc.writeMem(0xe6cf, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x348b);
        EXPECT(gbc.pc(), 0xe6d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6cf), 0xcb);
        EXPECT(gbc.readMem(0xe6d0), 0xa1);
        // CB A1 0260
        gbc.setState(0x9c61, 0x93aa, 0xcdb0, 0x8e73, 0xc78b, 0x301d, 0x1, 0x0);
        gbc.writeMem(0x9c61, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x93aa);
        EXPECT(gbc.pc(), 0x9c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c61), 0xcb);
        EXPECT(gbc.readMem(0x9c62), 0xa1);
        // CB A1 0261
        gbc.setState(0xe219, 0x2190, 0x10d0, 0xe008, 0x48ef, 0xd4eb, 0x1, 0x1);
        gbc.writeMem(0xe219, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2190);
        EXPECT(gbc.pc(), 0xe21b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe219), 0xcb);
        EXPECT(gbc.readMem(0xe21a), 0xa1);
        // CB A1 0262
        gbc.setState(0xe360, 0xda60, 0xc210, 0xf5b8, 0x2782, 0x1e05, 0x1, 0x1);
        gbc.writeMem(0xe360, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xda60);
        EXPECT(gbc.pc(), 0xe362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe360), 0xcb);
        EXPECT(gbc.readMem(0xe361), 0xa1);
        // CB A1 0263
        gbc.setState(0xdf4, 0x3eb, 0x2dc0, 0x227c, 0x5e2a, 0xbee7, 0x1, 0x1);
        gbc.writeMem(0xdf4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3eb);
        EXPECT(gbc.pc(), 0xdf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0264
        gbc.setState(0x433e, 0x6d85, 0xe440, 0xd06d, 0x90ce, 0xb00b, 0x0, 0x0);
        gbc.writeMem(0x433e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6d85);
        EXPECT(gbc.pc(), 0x4340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0265
        gbc.setState(0x6ffc, 0x3fa8, 0xd3d0, 0x92f6, 0xfab3, 0x8891, 0x1, 0x0);
        gbc.writeMem(0x6ffc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3fa8);
        EXPECT(gbc.pc(), 0x6ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0266
        gbc.setState(0x565b, 0x8232, 0x7470, 0x4694, 0xfb95, 0xc065, 0x1, 0x0);
        gbc.writeMem(0x565b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8232);
        EXPECT(gbc.pc(), 0x565d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0267
        gbc.setState(0x227, 0x2b0e, 0x660, 0x3775, 0xca8c, 0xd0fc, 0x1, 0x1);
        gbc.writeMem(0x227, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2b0e);
        EXPECT(gbc.pc(), 0x229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0268
        gbc.setState(0xa3c7, 0x2936, 0x87f0, 0x5f68, 0x162b, 0xc68, 0x0, 0x0);
        gbc.writeMem(0xa3c7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2936);
        EXPECT(gbc.pc(), 0xa3c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3c7), 0xcb);
        EXPECT(gbc.readMem(0xa3c8), 0xa1);
        // CB A1 0269
        gbc.setState(0xe2e5, 0xe635, 0x84d0, 0x45e0, 0x3748, 0xcb34, 0x0, 0x1);
        gbc.writeMem(0xe2e5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe635);
        EXPECT(gbc.pc(), 0xe2e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2e5), 0xcb);
        EXPECT(gbc.readMem(0xe2e6), 0xa1);
        // CB A1 026A
        gbc.setState(0xe56, 0x4219, 0x6840, 0x7892, 0x5e06, 0xebef, 0x0, 0x0);
        gbc.writeMem(0xe56, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4219);
        EXPECT(gbc.pc(), 0xe58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 026B
        gbc.setState(0x7fb7, 0x4e53, 0xc9f0, 0x60d, 0x4dd1, 0x72ee, 0x1, 0x0);
        gbc.writeMem(0x7fb7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4e53);
        EXPECT(gbc.pc(), 0x7fb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 026C
        gbc.setState(0x989a, 0x7003, 0x2410, 0x7ef4, 0x3394, 0xbc03, 0x0, 0x0);
        gbc.writeMem(0x989a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7003);
        EXPECT(gbc.pc(), 0x989c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x989a), 0xcb);
        EXPECT(gbc.readMem(0x989b), 0xa1);
        // CB A1 026D
        gbc.setState(0x6aec, 0xc2e8, 0xcf90, 0x8326, 0x61fa, 0xa79f, 0x1, 0x1);
        gbc.writeMem(0x6aec, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc2e8);
        EXPECT(gbc.pc(), 0x6aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 026E
        gbc.setState(0x9bb7, 0xc254, 0x1ee0, 0xe37f, 0x4f4b, 0xe128, 0x1, 0x1);
        gbc.writeMem(0x9bb7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc254);
        EXPECT(gbc.pc(), 0x9bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb7), 0xcb);
        EXPECT(gbc.readMem(0x9bb8), 0xa1);
        // CB A1 026F
        gbc.setState(0x3c44, 0xa47f, 0xd260, 0x38b7, 0xe239, 0x9fa5, 0x0, 0x0);
        gbc.writeMem(0x3c44, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa47f);
        EXPECT(gbc.pc(), 0x3c46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0270
        gbc.setState(0x5211, 0xaad, 0xa320, 0x177e, 0xdeb2, 0xaa20, 0x0, 0x0);
        gbc.writeMem(0x5211, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xaad);
        EXPECT(gbc.pc(), 0x5213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0271
        gbc.setState(0x5b08, 0x631c, 0x38b0, 0x7209, 0xf479, 0x3a9e, 0x1, 0x1);
        gbc.writeMem(0x5b08, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x631c);
        EXPECT(gbc.pc(), 0x5b0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0272
        gbc.setState(0xb026, 0xadb0, 0xe250, 0x42, 0x7d07, 0x5daa, 0x0, 0x1);
        gbc.writeMem(0xb026, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xadb0);
        EXPECT(gbc.pc(), 0xb028);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb026), 0xcb);
        EXPECT(gbc.readMem(0xb027), 0xa1);
        // CB A1 0274
        gbc.setState(0x57a, 0x3b8b, 0xd2e0, 0x218, 0xf0aa, 0xd0d0, 0x0, 0x0);
        gbc.writeMem(0x57a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3b8b);
        EXPECT(gbc.pc(), 0x57c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0275
        gbc.setState(0xb908, 0xb703, 0x6f50, 0x7410, 0xafc3, 0x8964, 0x1, 0x0);
        gbc.writeMem(0xb908, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb703);
        EXPECT(gbc.pc(), 0xb90a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb908), 0xcb);
        EXPECT(gbc.readMem(0xb909), 0xa1);
        // CB A1 0276
        gbc.setState(0x1951, 0xc6ed, 0x6120, 0x3f81, 0xefbe, 0x660c, 0x1, 0x0);
        gbc.writeMem(0x1951, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc6ed);
        EXPECT(gbc.pc(), 0x1953);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0277
        gbc.setState(0x52f4, 0x3890, 0xa790, 0xc6d, 0x1314, 0x21ac, 0x1, 0x1);
        gbc.writeMem(0x52f4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3890);
        EXPECT(gbc.pc(), 0x52f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0278
        gbc.setState(0xa3dd, 0x8205, 0xab40, 0xd6ec, 0x50a7, 0x1b71, 0x0, 0x0);
        gbc.writeMem(0xa3dd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8205);
        EXPECT(gbc.pc(), 0xa3df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3dd), 0xcb);
        EXPECT(gbc.readMem(0xa3de), 0xa1);
        // CB A1 0279
        gbc.setState(0x435b, 0x3633, 0x4e70, 0x9790, 0x28fc, 0x91ce, 0x1, 0x0);
        gbc.writeMem(0x435b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3633);
        EXPECT(gbc.pc(), 0x435d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 027A
        gbc.setState(0x1859, 0x1604, 0x5430, 0xeea1, 0xe5f9, 0xf440, 0x0, 0x0);
        gbc.writeMem(0x1859, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1604);
        EXPECT(gbc.pc(), 0x185b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 027B
        gbc.setState(0x6866, 0x6316, 0x24d0, 0xcb11, 0x3632, 0xc625, 0x0, 0x1);
        gbc.writeMem(0x6866, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6316);
        EXPECT(gbc.pc(), 0x6868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 027C
        gbc.setState(0x438d, 0x7bb0, 0x3d50, 0xad7b, 0x750f, 0x9de8, 0x1, 0x1);
        gbc.writeMem(0x438d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7bb0);
        EXPECT(gbc.pc(), 0x438f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 027D
        gbc.setState(0x5e9e, 0xbb72, 0xb8f0, 0xc81b, 0x1871, 0xa761, 0x1, 0x0);
        gbc.writeMem(0x5e9e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbb72);
        EXPECT(gbc.pc(), 0x5ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 027E
        gbc.setState(0x8b9e, 0x32f5, 0x83a0, 0xc999, 0x48a1, 0x5720, 0x0, 0x1);
        gbc.writeMem(0x8b9e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x32f5);
        EXPECT(gbc.pc(), 0x8ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b9e), 0xcb);
        EXPECT(gbc.readMem(0x8b9f), 0xa1);
        // CB A1 027F
        gbc.setState(0xda42, 0xb57f, 0x62e0, 0xc4f1, 0x3a70, 0xb335, 0x1, 0x1);
        gbc.writeMem(0xda42, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb57f);
        EXPECT(gbc.pc(), 0xda44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda42), 0xcb);
        EXPECT(gbc.readMem(0xda43), 0xa1);
        // CB A1 0280
        gbc.setState(0xb69f, 0x641d, 0x9bb0, 0x7147, 0x654, 0xbca5, 0x0, 0x0);
        gbc.writeMem(0xb69f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x641d);
        EXPECT(gbc.pc(), 0xb6a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb69f), 0xcb);
        EXPECT(gbc.readMem(0xb6a0), 0xa1);
        // CB A1 0281
        gbc.setState(0xbb56, 0x69f1, 0x2860, 0xcde1, 0x4020, 0x8a18, 0x0, 0x1);
        gbc.writeMem(0xbb56, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x69f1);
        EXPECT(gbc.pc(), 0xbb58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb56), 0xcb);
        EXPECT(gbc.readMem(0xbb57), 0xa1);
        // CB A1 0282
        gbc.setState(0xb3f7, 0xc059, 0x1dc0, 0x1554, 0xad7b, 0x6f7, 0x0, 0x0);
        gbc.writeMem(0xb3f7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc059);
        EXPECT(gbc.pc(), 0xb3f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f7), 0xcb);
        EXPECT(gbc.readMem(0xb3f8), 0xa1);
        // CB A1 0283
        gbc.setState(0xd0d1, 0xae48, 0xf700, 0x88f0, 0xbbbf, 0xc290, 0x1, 0x0);
        gbc.writeMem(0xd0d1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xae48);
        EXPECT(gbc.pc(), 0xd0d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0d1), 0xcb);
        EXPECT(gbc.readMem(0xd0d2), 0xa1);
        // CB A1 0284
        gbc.setState(0xeafe, 0xfa3, 0xd370, 0xf7bb, 0x2b94, 0x50ea, 0x0, 0x1);
        gbc.writeMem(0xeafe, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfa3);
        EXPECT(gbc.pc(), 0xeb00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeafe), 0xcb);
        EXPECT(gbc.readMem(0xeaff), 0xa1);
        // CB A1 0286
        gbc.setState(0x5971, 0xe66c, 0x52b0, 0xe3fe, 0x62f7, 0xb1f2, 0x1, 0x1);
        gbc.writeMem(0x5971, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe66c);
        EXPECT(gbc.pc(), 0x5973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0287
        gbc.setState(0x9560, 0xd5da, 0x9af0, 0x4317, 0xe068, 0xcb41, 0x1, 0x1);
        gbc.writeMem(0x9560, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd5da);
        EXPECT(gbc.pc(), 0x9562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9560), 0xcb);
        EXPECT(gbc.readMem(0x9561), 0xa1);
        // CB A1 0289
        gbc.setState(0xcb4d, 0x85b9, 0x6fd0, 0x65bd, 0xa39c, 0x7ba3, 0x0, 0x1);
        gbc.writeMem(0xcb4d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x85b9);
        EXPECT(gbc.pc(), 0xcb4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb4d), 0xcb);
        EXPECT(gbc.readMem(0xcb4e), 0xa1);
        // CB A1 028A
        gbc.setState(0xa2b0, 0xcfa3, 0xc30, 0x42f1, 0xea48, 0x85b7, 0x0, 0x1);
        gbc.writeMem(0xa2b0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xcfa3);
        EXPECT(gbc.pc(), 0xa2b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b0), 0xcb);
        EXPECT(gbc.readMem(0xa2b1), 0xa1);
        // CB A1 028B
        gbc.setState(0xc637, 0x77b1, 0xba90, 0x14bb, 0x70f2, 0x4c62, 0x1, 0x1);
        gbc.writeMem(0xc637, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x77b1);
        EXPECT(gbc.pc(), 0xc639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc637), 0xcb);
        EXPECT(gbc.readMem(0xc638), 0xa1);
        // CB A1 028C
        gbc.setState(0xe130, 0x8e3a, 0x6680, 0x9dea, 0x2fe, 0xde94, 0x1, 0x0);
        gbc.writeMem(0xe130, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8e3a);
        EXPECT(gbc.pc(), 0xe132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe130), 0xcb);
        EXPECT(gbc.readMem(0xe131), 0xa1);
        // CB A1 028D
        gbc.setState(0x501a, 0xcb2b, 0x8d70, 0x405e, 0x5c33, 0xe09e, 0x0, 0x0);
        gbc.writeMem(0x501a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcb2b);
        EXPECT(gbc.pc(), 0x501c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 028E
        gbc.setState(0x620d, 0xe5e0, 0x78d0, 0x269, 0x27f4, 0x6533, 0x1, 0x0);
        gbc.writeMem(0x620d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe5e0);
        EXPECT(gbc.pc(), 0x620f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 028F
        gbc.setState(0xc9d2, 0x8b09, 0xd880, 0xc844, 0xf57f, 0x5bc7, 0x1, 0x0);
        gbc.writeMem(0xc9d2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x8b09);
        EXPECT(gbc.pc(), 0xc9d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d2), 0xcb);
        EXPECT(gbc.readMem(0xc9d3), 0xa1);
        // CB A1 0290
        gbc.setState(0x77c3, 0xf780, 0x2db0, 0x998a, 0xc1e4, 0xc882, 0x1, 0x0);
        gbc.writeMem(0x77c3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf780);
        EXPECT(gbc.pc(), 0x77c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0291
        gbc.setState(0x7478, 0x3d4c, 0x49d0, 0x3f7c, 0x7ec4, 0x67d4, 0x1, 0x1);
        gbc.writeMem(0x7478, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3d4c);
        EXPECT(gbc.pc(), 0x747a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0292
        gbc.setState(0xe942, 0x1cb, 0x51d0, 0xdb74, 0xabf9, 0x4218, 0x0, 0x1);
        gbc.writeMem(0xe942, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1cb);
        EXPECT(gbc.pc(), 0xe944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe942), 0xcb);
        EXPECT(gbc.readMem(0xe943), 0xa1);
        // CB A1 0293
        gbc.setState(0xde85, 0xb502, 0xb8c0, 0xf161, 0xa313, 0xb4ba, 0x1, 0x0);
        gbc.writeMem(0xde85, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb502);
        EXPECT(gbc.pc(), 0xde87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde85), 0xcb);
        EXPECT(gbc.readMem(0xde86), 0xa1);
        // CB A1 0294
        gbc.setState(0x2f75, 0x492c, 0x3310, 0x348, 0xacdb, 0x9c91, 0x0, 0x1);
        gbc.writeMem(0x2f75, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x492c);
        EXPECT(gbc.pc(), 0x2f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0295
        gbc.setState(0xa70a, 0xb272, 0xe7d0, 0x363a, 0xbadc, 0x898b, 0x0, 0x0);
        gbc.writeMem(0xa70a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb272);
        EXPECT(gbc.pc(), 0xa70c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa70a), 0xcb);
        EXPECT(gbc.readMem(0xa70b), 0xa1);
        // CB A1 0296
        gbc.setState(0x521a, 0xbb00, 0x5960, 0xeb91, 0x528f, 0x29b3, 0x1, 0x1);
        gbc.writeMem(0x521a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xbb00);
        EXPECT(gbc.pc(), 0x521c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0297
        gbc.setState(0x10a8, 0x9019, 0xd4e0, 0xd129, 0x324a, 0xd42d, 0x1, 0x1);
        gbc.writeMem(0x10a8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9019);
        EXPECT(gbc.pc(), 0x10aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0298
        gbc.setState(0x62ba, 0x86a6, 0x24d0, 0x1e74, 0x1e36, 0xd4d, 0x0, 0x0);
        gbc.writeMem(0x62ba, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x86a6);
        EXPECT(gbc.pc(), 0x62bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0299
        gbc.setState(0x3a05, 0x506b, 0xab20, 0x62c1, 0x87c, 0xaf68, 0x0, 0x1);
        gbc.writeMem(0x3a05, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x506b);
        EXPECT(gbc.pc(), 0x3a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 029B
        gbc.setState(0xc8fb, 0x8d9d, 0xf810, 0xe009, 0x8a7, 0xfda1, 0x0, 0x0);
        gbc.writeMem(0xc8fb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8d9d);
        EXPECT(gbc.pc(), 0xc8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8fb), 0xcb);
        EXPECT(gbc.readMem(0xc8fc), 0xa1);
        // CB A1 029C
        gbc.setState(0x5e9f, 0xb503, 0x4980, 0x8b58, 0x2ad, 0x99c3, 0x0, 0x0);
        gbc.writeMem(0x5e9f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb503);
        EXPECT(gbc.pc(), 0x5ea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 029D
        gbc.setState(0xa325, 0x1cc8, 0x5e60, 0xcb2a, 0x4e32, 0xb142, 0x0, 0x0);
        gbc.writeMem(0xa325, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1cc8);
        EXPECT(gbc.pc(), 0xa327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa325), 0xcb);
        EXPECT(gbc.readMem(0xa326), 0xa1);
        // CB A1 029E
        gbc.setState(0x9057, 0xf539, 0xf1d0, 0x40c7, 0x81a7, 0x5a1, 0x1, 0x0);
        gbc.writeMem(0x9057, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf539);
        EXPECT(gbc.pc(), 0x9059);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9057), 0xcb);
        EXPECT(gbc.readMem(0x9058), 0xa1);
        // CB A1 029F
        gbc.setState(0x5995, 0x4530, 0xbc80, 0xc499, 0xc9c8, 0xb4a3, 0x0, 0x0);
        gbc.writeMem(0x5995, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4530);
        EXPECT(gbc.pc(), 0x5997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02A0
        gbc.setState(0x9e41, 0x1e5e, 0xced0, 0xf2f3, 0x43b8, 0x7535, 0x1, 0x0);
        gbc.writeMem(0x9e41, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x1e5e);
        EXPECT(gbc.pc(), 0x9e43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e41), 0xcb);
        EXPECT(gbc.readMem(0x9e42), 0xa1);
        // CB A1 02A1
        gbc.setState(0xce30, 0x34ca, 0x88b0, 0x10ac, 0x8f2b, 0x4807, 0x0, 0x1);
        gbc.writeMem(0xce30, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x34ca);
        EXPECT(gbc.pc(), 0xce32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce30), 0xcb);
        EXPECT(gbc.readMem(0xce31), 0xa1);
        // CB A1 02A2
        gbc.setState(0xc6f1, 0x61b3, 0xe4a0, 0xaeaf, 0x579f, 0x3197, 0x1, 0x0);
        gbc.writeMem(0xc6f1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x61b3);
        EXPECT(gbc.pc(), 0xc6f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f1), 0xcb);
        EXPECT(gbc.readMem(0xc6f2), 0xa1);
        // CB A1 02A3
        gbc.setState(0xd8a0, 0x67cd, 0x72a0, 0x2431, 0xdb9e, 0x163a, 0x0, 0x1);
        gbc.writeMem(0xd8a0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x67cd);
        EXPECT(gbc.pc(), 0xd8a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8a0), 0xcb);
        EXPECT(gbc.readMem(0xd8a1), 0xa1);
        // CB A1 02A4
        gbc.setState(0x4662, 0x4150, 0x1340, 0xfcb8, 0xc810, 0x9f9f, 0x0, 0x0);
        gbc.writeMem(0x4662, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4150);
        EXPECT(gbc.pc(), 0x4664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02A5
        gbc.setState(0xec6f, 0x7032, 0xed60, 0xce63, 0xa804, 0x60a3, 0x0, 0x0);
        gbc.writeMem(0xec6f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7032);
        EXPECT(gbc.pc(), 0xec71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec6f), 0xcb);
        EXPECT(gbc.readMem(0xec70), 0xa1);
        // CB A1 02A6
        gbc.setState(0xba13, 0x7a24, 0xfc90, 0x9d3f, 0xf7a6, 0x8a90, 0x1, 0x1);
        gbc.writeMem(0xba13, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7a24);
        EXPECT(gbc.pc(), 0xba15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba13), 0xcb);
        EXPECT(gbc.readMem(0xba14), 0xa1);
        // CB A1 02A7
        gbc.setState(0xeadf, 0x27a2, 0xa9a0, 0x103f, 0x9d68, 0x1b5f, 0x1, 0x1);
        gbc.writeMem(0xeadf, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x27a2);
        EXPECT(gbc.pc(), 0xeae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeadf), 0xcb);
        EXPECT(gbc.readMem(0xeae0), 0xa1);
        // CB A1 02A8
        gbc.setState(0xc544, 0x2e98, 0xb550, 0x4d59, 0xfcc7, 0x316f, 0x1, 0x0);
        gbc.writeMem(0xc544, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2e98);
        EXPECT(gbc.pc(), 0xc546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc544), 0xcb);
        EXPECT(gbc.readMem(0xc545), 0xa1);
        // CB A1 02A9
        gbc.setState(0xfc1, 0x5b16, 0x9110, 0xed20, 0x8da7, 0xf035, 0x0, 0x1);
        gbc.writeMem(0xfc1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5b16);
        EXPECT(gbc.pc(), 0xfc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02AA
        gbc.setState(0x3905, 0xb4cc, 0x3ce0, 0xf6b0, 0xfd17, 0xf5ea, 0x0, 0x0);
        gbc.writeMem(0x3905, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb4cc);
        EXPECT(gbc.pc(), 0x3907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02AB
        gbc.setState(0xa3f4, 0x889b, 0xbf60, 0xfe81, 0x3050, 0x6512, 0x1, 0x0);
        gbc.writeMem(0xa3f4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x889b);
        EXPECT(gbc.pc(), 0xa3f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f4), 0xcb);
        EXPECT(gbc.readMem(0xa3f5), 0xa1);
        // CB A1 02AC
        gbc.setState(0x2fbf, 0x8809, 0x5510, 0x3d52, 0x5bd2, 0x7999, 0x1, 0x1);
        gbc.writeMem(0x2fbf, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8809);
        EXPECT(gbc.pc(), 0x2fc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02AD
        gbc.setState(0xb651, 0x40a6, 0xc4a0, 0x1605, 0x8d54, 0x3a35, 0x1, 0x0);
        gbc.writeMem(0xb651, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x40a6);
        EXPECT(gbc.pc(), 0xb653);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb651), 0xcb);
        EXPECT(gbc.readMem(0xb652), 0xa1);
        // CB A1 02AE
        gbc.setState(0x52da, 0x8f8a, 0xd9e0, 0x1335, 0x4003, 0xe46a, 0x0, 0x0);
        gbc.writeMem(0x52da, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8f8a);
        EXPECT(gbc.pc(), 0x52dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02AF
        gbc.setState(0x9f07, 0x781f, 0xa70, 0xf7a7, 0x2790, 0x89e3, 0x0, 0x0);
        gbc.writeMem(0x9f07, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x781f);
        EXPECT(gbc.pc(), 0x9f09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f07), 0xcb);
        EXPECT(gbc.readMem(0x9f08), 0xa1);
        // CB A1 02B0
        gbc.setState(0xec39, 0x4b44, 0x7960, 0x1046, 0x1d3b, 0xf589, 0x1, 0x1);
        gbc.writeMem(0xec39, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4b44);
        EXPECT(gbc.pc(), 0xec3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec39), 0xcb);
        EXPECT(gbc.readMem(0xec3a), 0xa1);
        // CB A1 02B1
        gbc.setState(0x6677, 0xdbe4, 0x9590, 0xa65, 0xf07f, 0x8237, 0x0, 0x0);
        gbc.writeMem(0x6677, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdbe4);
        EXPECT(gbc.pc(), 0x6679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02B2
        gbc.setState(0x3b51, 0x77f2, 0x9960, 0x7ee8, 0xcaf4, 0x269f, 0x1, 0x1);
        gbc.writeMem(0x3b51, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x77f2);
        EXPECT(gbc.pc(), 0x3b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02B3
        gbc.setState(0x1580, 0x1c26, 0x8270, 0x95a8, 0x42bb, 0x636a, 0x0, 0x1);
        gbc.writeMem(0x1580, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1c26);
        EXPECT(gbc.pc(), 0x1582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02B4
        gbc.setState(0xafd7, 0x76f0, 0xd150, 0xc60, 0x36ef, 0xf59, 0x1, 0x0);
        gbc.writeMem(0xafd7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x76f0);
        EXPECT(gbc.pc(), 0xafd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd7), 0xcb);
        EXPECT(gbc.readMem(0xafd8), 0xa1);
        // CB A1 02B5
        gbc.setState(0xc590, 0xbe06, 0x8680, 0x7fc1, 0x6138, 0x50d0, 0x0, 0x0);
        gbc.writeMem(0xc590, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbe06);
        EXPECT(gbc.pc(), 0xc592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc590), 0xcb);
        EXPECT(gbc.readMem(0xc591), 0xa1);
        // CB A1 02B6
        gbc.setState(0x3311, 0x77cd, 0x8670, 0x7e35, 0xb4cb, 0xadbb, 0x0, 0x0);
        gbc.writeMem(0x3311, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x77cd);
        EXPECT(gbc.pc(), 0x3313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02B7
        gbc.setState(0x2b80, 0x642d, 0x5ac0, 0x30be, 0x4691, 0x158c, 0x1, 0x0);
        gbc.writeMem(0x2b80, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x642d);
        EXPECT(gbc.pc(), 0x2b82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02B8
        gbc.setState(0xc417, 0x9902, 0x5140, 0x51ef, 0x3da5, 0x939b, 0x1, 0x1);
        gbc.writeMem(0xc417, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9902);
        EXPECT(gbc.pc(), 0xc419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc417), 0xcb);
        EXPECT(gbc.readMem(0xc418), 0xa1);
        // CB A1 02B9
        gbc.setState(0x9a5c, 0x572d, 0xc0f0, 0xa48d, 0x2279, 0xc61a, 0x0, 0x1);
        gbc.writeMem(0x9a5c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x572d);
        EXPECT(gbc.pc(), 0x9a5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a5c), 0xcb);
        EXPECT(gbc.readMem(0x9a5d), 0xa1);
        // CB A1 02BA
        gbc.setState(0x1a2e, 0x7f9, 0x5680, 0x8b4e, 0x3820, 0x9ce, 0x0, 0x1);
        gbc.writeMem(0x1a2e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7f9);
        EXPECT(gbc.pc(), 0x1a30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02BB
        gbc.setState(0x1453, 0x4534, 0xd9c0, 0x2cd2, 0x32fe, 0x71ff, 0x1, 0x0);
        gbc.writeMem(0x1453, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4534);
        EXPECT(gbc.pc(), 0x1455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02BC
        gbc.setState(0x1a3c, 0x44fb, 0x2e80, 0xe328, 0xa8, 0xdf80, 0x1, 0x1);
        gbc.writeMem(0x1a3c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x44fb);
        EXPECT(gbc.pc(), 0x1a3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02BD
        gbc.setState(0xd030, 0xf5a1, 0x7b00, 0x72c, 0x3969, 0xf443, 0x1, 0x1);
        gbc.writeMem(0xd030, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf5a1);
        EXPECT(gbc.pc(), 0xd032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd030), 0xcb);
        EXPECT(gbc.readMem(0xd031), 0xa1);
        // CB A1 02BE
        gbc.setState(0xdc42, 0x3437, 0x39c0, 0x905d, 0xc54f, 0xd9cf, 0x1, 0x1);
        gbc.writeMem(0xdc42, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3437);
        EXPECT(gbc.pc(), 0xdc44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc42), 0xcb);
        EXPECT(gbc.readMem(0xdc43), 0xa1);
        // CB A1 02BF
        gbc.setState(0x36a6, 0x8b6b, 0xeff0, 0xf105, 0x851f, 0x489f, 0x0, 0x1);
        gbc.writeMem(0x36a6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8b6b);
        EXPECT(gbc.pc(), 0x36a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02C0
        gbc.setState(0x40c2, 0x16df, 0x16e0, 0xff4, 0x935e, 0xdebe, 0x0, 0x0);
        gbc.writeMem(0x40c2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x16df);
        EXPECT(gbc.pc(), 0x40c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02C1
        gbc.setState(0x2161, 0x992d, 0xf320, 0x3f67, 0xd9a3, 0xa903, 0x1, 0x0);
        gbc.writeMem(0x2161, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x992d);
        EXPECT(gbc.pc(), 0x2163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02C2
        gbc.setState(0x8666, 0x18fd, 0x1900, 0x3926, 0xeb3b, 0x71a9, 0x1, 0x0);
        gbc.writeMem(0x8666, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x18fd);
        EXPECT(gbc.pc(), 0x8668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8666), 0xcb);
        EXPECT(gbc.readMem(0x8667), 0xa1);
        // CB A1 02C3
        gbc.setState(0x69dc, 0xb2f3, 0xe250, 0x8cad, 0xe940, 0xfcbf, 0x0, 0x0);
        gbc.writeMem(0x69dc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb2f3);
        EXPECT(gbc.pc(), 0x69de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02C4
        gbc.setState(0x70b0, 0xfba9, 0x7e50, 0x33a2, 0x4cf1, 0xb3b6, 0x1, 0x0);
        gbc.writeMem(0x70b0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfba9);
        EXPECT(gbc.pc(), 0x70b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02C5
        gbc.setState(0xb5c0, 0xf8da, 0x1c0, 0x1566, 0x9c6a, 0x7ce4, 0x0, 0x0);
        gbc.writeMem(0xb5c0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf8da);
        EXPECT(gbc.pc(), 0xb5c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c0), 0xcb);
        EXPECT(gbc.readMem(0xb5c1), 0xa1);
        // CB A1 02C6
        gbc.setState(0x4341, 0xa31, 0x5f0, 0x9ce3, 0x8873, 0x4994, 0x1, 0x0);
        gbc.writeMem(0x4341, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa31);
        EXPECT(gbc.pc(), 0x4343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02C7
        gbc.setState(0xe8cb, 0x5d2c, 0x67f0, 0x7a22, 0xa89e, 0xc9a6, 0x0, 0x0);
        gbc.writeMem(0xe8cb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5d2c);
        EXPECT(gbc.pc(), 0xe8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8cb), 0xcb);
        EXPECT(gbc.readMem(0xe8cc), 0xa1);
        // CB A1 02C8
        gbc.setState(0xd5ea, 0x85c9, 0x7640, 0xcd70, 0x3c7a, 0x1eda, 0x0, 0x1);
        gbc.writeMem(0xd5ea, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x85c9);
        EXPECT(gbc.pc(), 0xd5ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ea), 0xcb);
        EXPECT(gbc.readMem(0xd5eb), 0xa1);
        // CB A1 02C9
        gbc.setState(0x5f83, 0x3a4b, 0x8980, 0xc970, 0xe5f9, 0x3700, 0x0, 0x1);
        gbc.writeMem(0x5f83, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3a4b);
        EXPECT(gbc.pc(), 0x5f85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02CA
        gbc.setState(0x7a7, 0x7f1c, 0xabc0, 0x86dc, 0xdc8c, 0x4378, 0x0, 0x0);
        gbc.writeMem(0x7a7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7f1c);
        EXPECT(gbc.pc(), 0x7a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02CB
        gbc.setState(0xd497, 0xc29d, 0xc570, 0x30d7, 0xc174, 0xaf9b, 0x0, 0x0);
        gbc.writeMem(0xd497, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc29d);
        EXPECT(gbc.pc(), 0xd499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd497), 0xcb);
        EXPECT(gbc.readMem(0xd498), 0xa1);
        // CB A1 02CC
        gbc.setState(0x278f, 0x7c39, 0x9200, 0x5cd3, 0x34f0, 0x20ee, 0x1, 0x1);
        gbc.writeMem(0x278f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7c39);
        EXPECT(gbc.pc(), 0x2791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02CD
        gbc.setState(0x9463, 0x650e, 0x4820, 0xb8e, 0x32ed, 0x6423, 0x1, 0x1);
        gbc.writeMem(0x9463, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x650e);
        EXPECT(gbc.pc(), 0x9465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9463), 0xcb);
        EXPECT(gbc.readMem(0x9464), 0xa1);
        // CB A1 02CE
        gbc.setState(0xeb93, 0x20b3, 0x2ee0, 0x5cd, 0x3c99, 0x3e84, 0x1, 0x1);
        gbc.writeMem(0xeb93, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x20b3);
        EXPECT(gbc.pc(), 0xeb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb93), 0xcb);
        EXPECT(gbc.readMem(0xeb94), 0xa1);
        // CB A1 02CF
        gbc.setState(0x6fbd, 0x2dde, 0x6e80, 0xd954, 0xf51d, 0x8ca2, 0x0, 0x0);
        gbc.writeMem(0x6fbd, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2dde);
        EXPECT(gbc.pc(), 0x6fbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02D0
        gbc.setState(0x15fc, 0x70c9, 0x3bd0, 0x7872, 0xf8ea, 0x4109, 0x0, 0x0);
        gbc.writeMem(0x15fc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x70c9);
        EXPECT(gbc.pc(), 0x15fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02D1
        gbc.setState(0x2d0c, 0xf084, 0x34b0, 0xb91a, 0x269, 0x235c, 0x0, 0x0);
        gbc.writeMem(0x2d0c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf084);
        EXPECT(gbc.pc(), 0x2d0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02D2
        gbc.setState(0x11bc, 0x9ef2, 0xd580, 0xa5e0, 0x9446, 0x35e, 0x1, 0x0);
        gbc.writeMem(0x11bc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9ef2);
        EXPECT(gbc.pc(), 0x11be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02D3
        gbc.setState(0xb881, 0xfaa8, 0xe3a0, 0x649, 0x93c, 0xb303, 0x1, 0x0);
        gbc.writeMem(0xb881, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xfaa8);
        EXPECT(gbc.pc(), 0xb883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb881), 0xcb);
        EXPECT(gbc.readMem(0xb882), 0xa1);
        // CB A1 02D4
        gbc.setState(0x167e, 0xe69c, 0x2e50, 0x59bf, 0x303c, 0xbcbd, 0x1, 0x1);
        gbc.writeMem(0x167e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe69c);
        EXPECT(gbc.pc(), 0x1680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02D5
        gbc.setState(0x110c, 0xba14, 0x28b0, 0x285d, 0x858e, 0x9bff, 0x0, 0x0);
        gbc.writeMem(0x110c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xba14);
        EXPECT(gbc.pc(), 0x110e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02D6
        gbc.setState(0x7c, 0x2d7, 0xed00, 0xf9a, 0x79a6, 0x4478, 0x1, 0x0);
        gbc.writeMem(0x7c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2d7);
        EXPECT(gbc.pc(), 0x7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02D7
        gbc.setState(0xc8da, 0xda47, 0xd0a0, 0xc40, 0xb279, 0x6875, 0x0, 0x0);
        gbc.writeMem(0xc8da, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xda47);
        EXPECT(gbc.pc(), 0xc8dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8da), 0xcb);
        EXPECT(gbc.readMem(0xc8db), 0xa1);
        // CB A1 02D8
        gbc.setState(0xb38a, 0x16f9, 0x3c20, 0xca60, 0xc2a3, 0x764c, 0x0, 0x1);
        gbc.writeMem(0xb38a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x16f9);
        EXPECT(gbc.pc(), 0xb38c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb38a), 0xcb);
        EXPECT(gbc.readMem(0xb38b), 0xa1);
        // CB A1 02D9
        gbc.setState(0x715e, 0x6b10, 0xc5f0, 0x3b48, 0xce48, 0xd7e, 0x0, 0x1);
        gbc.writeMem(0x715e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6b10);
        EXPECT(gbc.pc(), 0x7160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02DA
        gbc.setState(0x7f33, 0xb533, 0xa130, 0xd72a, 0xe108, 0x96bb, 0x1, 0x1);
        gbc.writeMem(0x7f33, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb533);
        EXPECT(gbc.pc(), 0x7f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02DB
        gbc.setState(0xcbf7, 0x5e81, 0x140, 0x5f9b, 0xdd19, 0xa8e2, 0x0, 0x0);
        gbc.writeMem(0xcbf7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5e81);
        EXPECT(gbc.pc(), 0xcbf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbf7), 0xcb);
        EXPECT(gbc.readMem(0xcbf8), 0xa1);
        // CB A1 02DC
        gbc.setState(0x274d, 0x9b49, 0xaaa0, 0xf787, 0x7dfa, 0x9900, 0x1, 0x1);
        gbc.writeMem(0x274d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9b49);
        EXPECT(gbc.pc(), 0x274f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02DD
        gbc.setState(0x5336, 0xb2b0, 0xf0f0, 0x4107, 0x724, 0x1bad, 0x0, 0x1);
        gbc.writeMem(0x5336, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb2b0);
        EXPECT(gbc.pc(), 0x5338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02DE
        gbc.setState(0x7bdc, 0x38f3, 0xa0, 0x70ab, 0x2f81, 0x99e6, 0x1, 0x0);
        gbc.writeMem(0x7bdc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x38f3);
        EXPECT(gbc.pc(), 0x7bde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02DF
        gbc.setState(0xd13c, 0xdbe1, 0xde00, 0xc69d, 0x312e, 0x2221, 0x0, 0x0);
        gbc.writeMem(0xd13c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xdbe1);
        EXPECT(gbc.pc(), 0xd13e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13c), 0xcb);
        EXPECT(gbc.readMem(0xd13d), 0xa1);
        // CB A1 02E0
        gbc.setState(0x7390, 0x4fbf, 0xd0f0, 0xed4c, 0x10bb, 0xa83, 0x0, 0x1);
        gbc.writeMem(0x7390, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4fbf);
        EXPECT(gbc.pc(), 0x7392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02E1
        gbc.setState(0x6dc2, 0x1c09, 0xe360, 0x9651, 0xb860, 0x545d, 0x1, 0x0);
        gbc.writeMem(0x6dc2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x1c09);
        EXPECT(gbc.pc(), 0x6dc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02E2
        gbc.setState(0xc933, 0x27fd, 0x87b0, 0x2a91, 0xe285, 0x5ff6, 0x1, 0x0);
        gbc.writeMem(0xc933, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x27fd);
        EXPECT(gbc.pc(), 0xc935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc933), 0xcb);
        EXPECT(gbc.readMem(0xc934), 0xa1);
        // CB A1 02E3
        gbc.setState(0x8cf2, 0x5249, 0x260, 0xb32a, 0x7287, 0x5dfb, 0x0, 0x0);
        gbc.writeMem(0x8cf2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5249);
        EXPECT(gbc.pc(), 0x8cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf2), 0xcb);
        EXPECT(gbc.readMem(0x8cf3), 0xa1);
        // CB A1 02E4
        gbc.setState(0x3c3d, 0x26d, 0xfaa0, 0x3dbc, 0xc571, 0x1ea8, 0x1, 0x0);
        gbc.writeMem(0x3c3d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x26d);
        EXPECT(gbc.pc(), 0x3c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02E5
        gbc.setState(0xad7, 0xed86, 0xa4c0, 0xdedd, 0x5fd7, 0x3597, 0x1, 0x1);
        gbc.writeMem(0xad7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xed86);
        EXPECT(gbc.pc(), 0xad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02E6
        gbc.setState(0x4bd7, 0xc1d3, 0xdad0, 0xf69d, 0xff6a, 0xdb03, 0x0, 0x0);
        gbc.writeMem(0x4bd7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc1d3);
        EXPECT(gbc.pc(), 0x4bd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02E7
        gbc.setState(0x845f, 0x324a, 0x4ef0, 0xa654, 0x8de6, 0xa700, 0x1, 0x0);
        gbc.writeMem(0x845f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x324a);
        EXPECT(gbc.pc(), 0x8461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x845f), 0xcb);
        EXPECT(gbc.readMem(0x8460), 0xa1);
        // CB A1 02E8
        gbc.setState(0xe90c, 0x9174, 0x270, 0x6fc0, 0x5a65, 0x1b8a, 0x0, 0x1);
        gbc.writeMem(0xe90c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9174);
        EXPECT(gbc.pc(), 0xe90e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe90c), 0xcb);
        EXPECT(gbc.readMem(0xe90d), 0xa1);
        // CB A1 02E9
        gbc.setState(0xb1f7, 0x4c45, 0xff60, 0x266c, 0x550c, 0x7053, 0x0, 0x1);
        gbc.writeMem(0xb1f7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4c45);
        EXPECT(gbc.pc(), 0xb1f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1f7), 0xcb);
        EXPECT(gbc.readMem(0xb1f8), 0xa1);
        // CB A1 02EA
        gbc.setState(0x3793, 0x9229, 0xc8e0, 0x100, 0x4ea7, 0x9757, 0x1, 0x1);
        gbc.writeMem(0x3793, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9229);
        EXPECT(gbc.pc(), 0x3795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02EB
        gbc.setState(0x3e9f, 0x62d8, 0x5e80, 0xb8bf, 0x4a26, 0xca5a, 0x1, 0x1);
        gbc.writeMem(0x3e9f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x62d8);
        EXPECT(gbc.pc(), 0x3ea1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02EC
        gbc.setState(0x5fc5, 0x97c9, 0x3560, 0xdb3a, 0x1576, 0x5905, 0x0, 0x1);
        gbc.writeMem(0x5fc5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x97c9);
        EXPECT(gbc.pc(), 0x5fc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02ED
        gbc.setState(0x3991, 0x2dba, 0xbd90, 0x581d, 0xef51, 0x5874, 0x1, 0x0);
        gbc.writeMem(0x3991, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2dba);
        EXPECT(gbc.pc(), 0x3993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02EE
        gbc.setState(0xd03a, 0xd549, 0x57b0, 0x4fd8, 0x95f8, 0x7213, 0x1, 0x0);
        gbc.writeMem(0xd03a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd549);
        EXPECT(gbc.pc(), 0xd03c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd03a), 0xcb);
        EXPECT(gbc.readMem(0xd03b), 0xa1);
        // CB A1 02EF
        gbc.setState(0xce22, 0x88e7, 0x3460, 0x9093, 0x1531, 0x97f4, 0x1, 0x1);
        gbc.writeMem(0xce22, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x88e7);
        EXPECT(gbc.pc(), 0xce24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce22), 0xcb);
        EXPECT(gbc.readMem(0xce23), 0xa1);
        // CB A1 02F0
        gbc.setState(0x6f6d, 0x3a7c, 0xec20, 0xe2f5, 0xb3ba, 0xd1f1, 0x1, 0x0);
        gbc.writeMem(0x6f6d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3a7c);
        EXPECT(gbc.pc(), 0x6f6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02F1
        gbc.setState(0xcfde, 0x1a02, 0x4da0, 0x7a9, 0x7031, 0x7271, 0x0, 0x1);
        gbc.writeMem(0xcfde, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x1a02);
        EXPECT(gbc.pc(), 0xcfe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfde), 0xcb);
        EXPECT(gbc.readMem(0xcfdf), 0xa1);
        // CB A1 02F2
        gbc.setState(0x2257, 0xfcdf, 0x7b0, 0xd885, 0x1355, 0x4fe0, 0x0, 0x1);
        gbc.writeMem(0x2257, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfcdf);
        EXPECT(gbc.pc(), 0x2259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02F3
        gbc.setState(0x1d26, 0x6956, 0xaba0, 0xb2c5, 0xe360, 0xeba0, 0x0, 0x1);
        gbc.writeMem(0x1d26, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6956);
        EXPECT(gbc.pc(), 0x1d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02F4
        gbc.setState(0xb5dc, 0x4767, 0xd040, 0x352c, 0x9fc, 0x3559, 0x1, 0x0);
        gbc.writeMem(0xb5dc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4767);
        EXPECT(gbc.pc(), 0xb5de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5dc), 0xcb);
        EXPECT(gbc.readMem(0xb5dd), 0xa1);
        // CB A1 02F5
        gbc.setState(0xafc5, 0x7f61, 0xfeb0, 0xfb58, 0xd5d5, 0x7adf, 0x0, 0x1);
        gbc.writeMem(0xafc5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7f61);
        EXPECT(gbc.pc(), 0xafc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafc5), 0xcb);
        EXPECT(gbc.readMem(0xafc6), 0xa1);
        // CB A1 02F6
        gbc.setState(0x96cf, 0x1d96, 0x3ab0, 0x304a, 0xff24, 0xe30, 0x0, 0x1);
        gbc.writeMem(0x96cf, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1d96);
        EXPECT(gbc.pc(), 0x96d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96cf), 0xcb);
        EXPECT(gbc.readMem(0x96d0), 0xa1);
        // CB A1 02F7
        gbc.setState(0xe4c6, 0x3480, 0x6bd0, 0xafa1, 0x294b, 0x5e7, 0x1, 0x1);
        gbc.writeMem(0xe4c6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3480);
        EXPECT(gbc.pc(), 0xe4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c6), 0xcb);
        EXPECT(gbc.readMem(0xe4c7), 0xa1);
        // CB A1 02F8
        gbc.setState(0xe1e3, 0xbc50, 0x7440, 0xdd83, 0x209f, 0x33a9, 0x0, 0x1);
        gbc.writeMem(0xe1e3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbc50);
        EXPECT(gbc.pc(), 0xe1e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e3), 0xcb);
        EXPECT(gbc.readMem(0xe1e4), 0xa1);
        // CB A1 02F9
        gbc.setState(0x471c, 0x33ba, 0x8500, 0x9e3e, 0x8c82, 0x4be2, 0x0, 0x0);
        gbc.writeMem(0x471c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x33ba);
        EXPECT(gbc.pc(), 0x471e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02FA
        gbc.setState(0x4b, 0xd546, 0x3270, 0x911f, 0xf77e, 0x4280, 0x0, 0x0);
        gbc.writeMem(0x4b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd546);
        EXPECT(gbc.pc(), 0x4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02FB
        gbc.setState(0xeec, 0x28a9, 0xfc50, 0x7db, 0xc5e7, 0x9bc6, 0x1, 0x1);
        gbc.writeMem(0xeec, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x28a9);
        EXPECT(gbc.pc(), 0xeee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02FC
        gbc.setState(0x27, 0x2891, 0xf2e0, 0x551, 0x71e3, 0x5c5e, 0x0, 0x0);
        gbc.writeMem(0x27, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2891);
        EXPECT(gbc.pc(), 0x29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 02FD
        gbc.setState(0x109, 0xf08, 0xc130, 0x4c4f, 0x588e, 0xb3a5, 0x0, 0x1);
        gbc.writeMem(0x109, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf08);
        EXPECT(gbc.pc(), 0x10b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 02FE
        gbc.setState(0x86a5, 0x9c51, 0x1360, 0x189d, 0x9c8b, 0x65c0, 0x1, 0x1);
        gbc.writeMem(0x86a5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9c51);
        EXPECT(gbc.pc(), 0x86a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a5), 0xcb);
        EXPECT(gbc.readMem(0x86a6), 0xa1);
        // CB A1 02FF
        gbc.setState(0x2aaa, 0x39ff, 0x67a0, 0xca0a, 0x213f, 0x28a1, 0x0, 0x0);
        gbc.writeMem(0x2aaa, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x39ff);
        EXPECT(gbc.pc(), 0x2aac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0300
        gbc.setState(0x8399, 0x2e6, 0xf6b0, 0x1de8, 0x28dc, 0xd5f8, 0x1, 0x0);
        gbc.writeMem(0x8399, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2e6);
        EXPECT(gbc.pc(), 0x839b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8399), 0xcb);
        EXPECT(gbc.readMem(0x839a), 0xa1);
        // CB A1 0301
        gbc.setState(0x5be7, 0xd82, 0xad90, 0x2fc5, 0xd700, 0x42c3, 0x1, 0x1);
        gbc.writeMem(0x5be7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd82);
        EXPECT(gbc.pc(), 0x5be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0302
        gbc.setState(0xab3, 0xf9ef, 0xcba0, 0xceeb, 0xdb2d, 0xf4e1, 0x0, 0x1);
        gbc.writeMem(0xab3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf9ef);
        EXPECT(gbc.pc(), 0xab5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0303
        gbc.setState(0xe71a, 0xed43, 0x3720, 0xc6b9, 0x1f9f, 0x2459, 0x0, 0x1);
        gbc.writeMem(0xe71a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xed43);
        EXPECT(gbc.pc(), 0xe71c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe71a), 0xcb);
        EXPECT(gbc.readMem(0xe71b), 0xa1);
        // CB A1 0304
        gbc.setState(0xaa7, 0xc163, 0xada0, 0x2a27, 0xc772, 0x5054, 0x0, 0x1);
        gbc.writeMem(0xaa7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc163);
        EXPECT(gbc.pc(), 0xaa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0305
        gbc.setState(0xbaa3, 0xbcbc, 0x6910, 0x9bc9, 0x12d8, 0x8d06, 0x1, 0x0);
        gbc.writeMem(0xbaa3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xbcbc);
        EXPECT(gbc.pc(), 0xbaa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaa3), 0xcb);
        EXPECT(gbc.readMem(0xbaa4), 0xa1);
        // CB A1 0306
        gbc.setState(0x9f04, 0xb9e0, 0x2c30, 0x6fc0, 0x777e, 0xc52d, 0x1, 0x1);
        gbc.writeMem(0x9f04, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb9e0);
        EXPECT(gbc.pc(), 0x9f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f04), 0xcb);
        EXPECT(gbc.readMem(0x9f05), 0xa1);
        // CB A1 0308
        gbc.setState(0x216b, 0x220d, 0xddd0, 0xa91, 0xdc80, 0x426, 0x0, 0x1);
        gbc.writeMem(0x216b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x220d);
        EXPECT(gbc.pc(), 0x216d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0309
        gbc.setState(0xe5fb, 0x268d, 0x7ad0, 0xee51, 0xc57d, 0xe11c, 0x1, 0x0);
        gbc.writeMem(0xe5fb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x268d);
        EXPECT(gbc.pc(), 0xe5fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5fb), 0xcb);
        EXPECT(gbc.readMem(0xe5fc), 0xa1);
        // CB A1 030A
        gbc.setState(0xc291, 0x583a, 0x33c0, 0x9a27, 0x4fd6, 0xa89f, 0x0, 0x0);
        gbc.writeMem(0xc291, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x583a);
        EXPECT(gbc.pc(), 0xc293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc291), 0xcb);
        EXPECT(gbc.readMem(0xc292), 0xa1);
        // CB A1 030B
        gbc.setState(0x6e0c, 0x7dfb, 0x58e0, 0xee87, 0x92a3, 0x9aac, 0x1, 0x1);
        gbc.writeMem(0x6e0c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7dfb);
        EXPECT(gbc.pc(), 0x6e0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 030C
        gbc.setState(0x5a98, 0x1272, 0x2510, 0xa6c0, 0x4311, 0x12d3, 0x0, 0x1);
        gbc.writeMem(0x5a98, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1272);
        EXPECT(gbc.pc(), 0x5a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 030D
        gbc.setState(0x1aa8, 0x6234, 0x6490, 0x93e7, 0x4997, 0xf799, 0x0, 0x0);
        gbc.writeMem(0x1aa8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6234);
        EXPECT(gbc.pc(), 0x1aaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 030E
        gbc.setState(0xd7a, 0x65aa, 0xca0, 0xf541, 0xf8af, 0x60d0, 0x1, 0x0);
        gbc.writeMem(0xd7a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x65aa);
        EXPECT(gbc.pc(), 0xd7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 030F
        gbc.setState(0x8b18, 0x8c86, 0xeb60, 0x7d91, 0xf34e, 0xb662, 0x1, 0x1);
        gbc.writeMem(0x8b18, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8c86);
        EXPECT(gbc.pc(), 0x8b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b18), 0xcb);
        EXPECT(gbc.readMem(0x8b19), 0xa1);
        // CB A1 0310
        gbc.setState(0x112b, 0xa85c, 0x35c0, 0xcb32, 0xebd, 0xa4b7, 0x1, 0x0);
        gbc.writeMem(0x112b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa85c);
        EXPECT(gbc.pc(), 0x112d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0311
        gbc.setState(0x87a, 0x897c, 0x45f0, 0x75cb, 0x2a89, 0x8285, 0x0, 0x0);
        gbc.writeMem(0x87a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x897c);
        EXPECT(gbc.pc(), 0x87c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0312
        gbc.setState(0xacff, 0xb4c6, 0x76b0, 0x5032, 0x8436, 0x7ab2, 0x1, 0x1);
        gbc.writeMem(0xacff, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb4c6);
        EXPECT(gbc.pc(), 0xad01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacff), 0xcb);
        EXPECT(gbc.readMem(0xad00), 0xa1);
        // CB A1 0313
        gbc.setState(0x22f7, 0x72ee, 0x8ac0, 0xe9a9, 0xad21, 0xebc8, 0x0, 0x0);
        gbc.writeMem(0x22f7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x72ee);
        EXPECT(gbc.pc(), 0x22f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0315
        gbc.setState(0x3b4c, 0x6a8, 0x70, 0x810c, 0x3a08, 0x81a, 0x0, 0x1);
        gbc.writeMem(0x3b4c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6a8);
        EXPECT(gbc.pc(), 0x3b4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0316
        gbc.setState(0xc774, 0xf521, 0x2600, 0x56ab, 0x8c99, 0x19, 0x1, 0x1);
        gbc.writeMem(0xc774, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf521);
        EXPECT(gbc.pc(), 0xc776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc774), 0xcb);
        EXPECT(gbc.readMem(0xc775), 0xa1);
        // CB A1 0317
        gbc.setState(0x7e7e, 0x4864, 0x5270, 0x7a76, 0xbbce, 0xc9b4, 0x0, 0x0);
        gbc.writeMem(0x7e7e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4864);
        EXPECT(gbc.pc(), 0x7e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0318
        gbc.setState(0xd1af, 0x164c, 0x3ab0, 0x170c, 0x7dee, 0x44c0, 0x0, 0x0);
        gbc.writeMem(0xd1af, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x164c);
        EXPECT(gbc.pc(), 0xd1b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1af), 0xcb);
        EXPECT(gbc.readMem(0xd1b0), 0xa1);
        // CB A1 0319
        gbc.setState(0xc2af, 0x57b5, 0x6910, 0x6c07, 0x9228, 0xcbb8, 0x1, 0x0);
        gbc.writeMem(0xc2af, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x57b5);
        EXPECT(gbc.pc(), 0xc2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2af), 0xcb);
        EXPECT(gbc.readMem(0xc2b0), 0xa1);
        // CB A1 031A
        gbc.setState(0xe70, 0x81af, 0x6460, 0xa8b6, 0x1bd5, 0xf16a, 0x0, 0x0);
        gbc.writeMem(0xe70, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x81af);
        EXPECT(gbc.pc(), 0xe72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 031B
        gbc.setState(0x411d, 0x4ef6, 0x130, 0xa8ed, 0x4538, 0x76b5, 0x0, 0x1);
        gbc.writeMem(0x411d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4ef6);
        EXPECT(gbc.pc(), 0x411f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 031C
        gbc.setState(0x979c, 0xda1e, 0xe4a0, 0xd573, 0xadda, 0x5898, 0x1, 0x0);
        gbc.writeMem(0x979c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xda1e);
        EXPECT(gbc.pc(), 0x979e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x979c), 0xcb);
        EXPECT(gbc.readMem(0x979d), 0xa1);
        // CB A1 031D
        gbc.setState(0xcad5, 0xb57e, 0xdd0, 0x266e, 0x18c8, 0x6f0d, 0x0, 0x0);
        gbc.writeMem(0xcad5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb57e);
        EXPECT(gbc.pc(), 0xcad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcad5), 0xcb);
        EXPECT(gbc.readMem(0xcad6), 0xa1);
        // CB A1 031E
        gbc.setState(0x49d3, 0x575, 0x86f0, 0x6397, 0xbc18, 0x3ace, 0x0, 0x0);
        gbc.writeMem(0x49d3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x575);
        EXPECT(gbc.pc(), 0x49d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 031F
        gbc.setState(0x4613, 0x4bcd, 0xeeb0, 0xb1db, 0x9307, 0xf9f6, 0x1, 0x1);
        gbc.writeMem(0x4613, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4bcd);
        EXPECT(gbc.pc(), 0x4615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0320
        gbc.setState(0xb0f9, 0x2961, 0x56f0, 0xb561, 0x6f9b, 0xe10a, 0x0, 0x1);
        gbc.writeMem(0xb0f9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x2961);
        EXPECT(gbc.pc(), 0xb0fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f9), 0xcb);
        EXPECT(gbc.readMem(0xb0fa), 0xa1);
        // CB A1 0321
        gbc.setState(0x13ef, 0xf53c, 0xfc20, 0x508a, 0xd6e8, 0x9657, 0x1, 0x0);
        gbc.writeMem(0x13ef, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf53c);
        EXPECT(gbc.pc(), 0x13f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0322
        gbc.setState(0x908a, 0xa185, 0x1dc0, 0x5e6a, 0x527f, 0xc48d, 0x0, 0x0);
        gbc.writeMem(0x908a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa185);
        EXPECT(gbc.pc(), 0x908c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908a), 0xcb);
        EXPECT(gbc.readMem(0x908b), 0xa1);
        // CB A1 0323
        gbc.setState(0x6156, 0x3e86, 0x7a90, 0xfc90, 0x9f92, 0xc55c, 0x1, 0x1);
        gbc.writeMem(0x6156, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3e86);
        EXPECT(gbc.pc(), 0x6158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0324
        gbc.setState(0xc8de, 0x6e4e, 0x19d0, 0x52d3, 0x8b2c, 0xa46f, 0x1, 0x0);
        gbc.writeMem(0xc8de, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6e4e);
        EXPECT(gbc.pc(), 0xc8e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8de), 0xcb);
        EXPECT(gbc.readMem(0xc8df), 0xa1);
        // CB A1 0325
        gbc.setState(0xe0f1, 0x7443, 0xf7c0, 0xd6fc, 0x3e1a, 0x8b53, 0x0, 0x0);
        gbc.writeMem(0xe0f1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7443);
        EXPECT(gbc.pc(), 0xe0f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0f1), 0xcb);
        EXPECT(gbc.readMem(0xe0f2), 0xa1);
        // CB A1 0326
        gbc.setState(0xac9c, 0xcc10, 0x69c0, 0xedad, 0x2748, 0xde0b, 0x0, 0x0);
        gbc.writeMem(0xac9c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcc10);
        EXPECT(gbc.pc(), 0xac9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac9c), 0xcb);
        EXPECT(gbc.readMem(0xac9d), 0xa1);
        // CB A1 0327
        gbc.setState(0xe52c, 0x930f, 0x750, 0xe7c7, 0x6d19, 0x881d, 0x1, 0x1);
        gbc.writeMem(0xe52c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x930f);
        EXPECT(gbc.pc(), 0xe52e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe52c), 0xcb);
        EXPECT(gbc.readMem(0xe52d), 0xa1);
        // CB A1 0328
        gbc.setState(0x2dd8, 0xc964, 0x50b0, 0xa819, 0x59b9, 0x1bfa, 0x0, 0x0);
        gbc.writeMem(0x2dd8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc964);
        EXPECT(gbc.pc(), 0x2dda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0329
        gbc.setState(0x875a, 0x7802, 0x93b0, 0x7ae6, 0xa683, 0xd2be, 0x0, 0x0);
        gbc.writeMem(0x875a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7802);
        EXPECT(gbc.pc(), 0x875c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x875a), 0xcb);
        EXPECT(gbc.readMem(0x875b), 0xa1);
        // CB A1 032A
        gbc.setState(0x9d5, 0xa40b, 0x1a00, 0x25ea, 0xaa6b, 0x3a1c, 0x0, 0x0);
        gbc.writeMem(0x9d5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa40b);
        EXPECT(gbc.pc(), 0x9d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 032B
        gbc.setState(0xe3b6, 0x6dc2, 0x5de0, 0xe84, 0x544d, 0xae49, 0x0, 0x1);
        gbc.writeMem(0xe3b6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6dc2);
        EXPECT(gbc.pc(), 0xe3b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b6), 0xcb);
        EXPECT(gbc.readMem(0xe3b7), 0xa1);
        // CB A1 032C
        gbc.setState(0x37c6, 0x89a7, 0xb480, 0xfa38, 0xb92f, 0x2d1a, 0x1, 0x0);
        gbc.writeMem(0x37c6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x89a7);
        EXPECT(gbc.pc(), 0x37c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 032D
        gbc.setState(0x1ef, 0xf017, 0xfdd0, 0xe36, 0xf67f, 0x3e44, 0x0, 0x1);
        gbc.writeMem(0x1ef, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf017);
        EXPECT(gbc.pc(), 0x1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 032E
        gbc.setState(0x666a, 0x5e7a, 0x26d0, 0x8574, 0x5edf, 0x979d, 0x0, 0x1);
        gbc.writeMem(0x666a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5e7a);
        EXPECT(gbc.pc(), 0x666c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0330
        gbc.setState(0x8fe5, 0x9600, 0xb8c0, 0x6c85, 0xd103, 0xff29, 0x0, 0x0);
        gbc.writeMem(0x8fe5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9600);
        EXPECT(gbc.pc(), 0x8fe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe5), 0xcb);
        EXPECT(gbc.readMem(0x8fe6), 0xa1);
        // CB A1 0332
        gbc.setState(0x94c6, 0xd183, 0x6930, 0x720a, 0xc59f, 0x1bd8, 0x1, 0x0);
        gbc.writeMem(0x94c6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd183);
        EXPECT(gbc.pc(), 0x94c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c6), 0xcb);
        EXPECT(gbc.readMem(0x94c7), 0xa1);
        // CB A1 0333
        gbc.setState(0xdf83, 0x81d, 0xfb70, 0xe65, 0x579, 0xed06, 0x1, 0x1);
        gbc.writeMem(0xdf83, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x81d);
        EXPECT(gbc.pc(), 0xdf85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf83), 0xcb);
        EXPECT(gbc.readMem(0xdf84), 0xa1);
        // CB A1 0334
        gbc.setState(0x3a27, 0x9551, 0x6990, 0xa73e, 0xc1d0, 0x7dd8, 0x1, 0x0);
        gbc.writeMem(0x3a27, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9551);
        EXPECT(gbc.pc(), 0x3a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0335
        gbc.setState(0x3ca3, 0x8196, 0x52a0, 0x2e4, 0xec1f, 0xdc10, 0x1, 0x0);
        gbc.writeMem(0x3ca3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8196);
        EXPECT(gbc.pc(), 0x3ca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0336
        gbc.setState(0xb89, 0xa1be, 0xba90, 0xea97, 0x55b9, 0x4c1d, 0x1, 0x1);
        gbc.writeMem(0xb89, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa1be);
        EXPECT(gbc.pc(), 0xb8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0337
        gbc.setState(0xeb70, 0xeac3, 0x4560, 0xeec0, 0x5c71, 0x11c3, 0x1, 0x0);
        gbc.writeMem(0xeb70, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xeac3);
        EXPECT(gbc.pc(), 0xeb72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb70), 0xcb);
        EXPECT(gbc.readMem(0xeb71), 0xa1);
        // CB A1 0338
        gbc.setState(0x7815, 0xf3c0, 0x92a0, 0xfb9, 0x1f2e, 0xfd4, 0x0, 0x1);
        gbc.writeMem(0x7815, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf3c0);
        EXPECT(gbc.pc(), 0x7817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0339
        gbc.setState(0xd6ee, 0x6543, 0x8290, 0xae39, 0x2033, 0xb520, 0x1, 0x0);
        gbc.writeMem(0xd6ee, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6543);
        EXPECT(gbc.pc(), 0xd6f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ee), 0xcb);
        EXPECT(gbc.readMem(0xd6ef), 0xa1);
        // CB A1 033A
        gbc.setState(0x65f7, 0xff07, 0x7230, 0x8a82, 0x409, 0x9008, 0x1, 0x0);
        gbc.writeMem(0x65f7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xff07);
        EXPECT(gbc.pc(), 0x65f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 033B
        gbc.setState(0xba22, 0xfa6c, 0x9c20, 0x86f, 0x1090, 0xbe9d, 0x0, 0x0);
        gbc.writeMem(0xba22, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfa6c);
        EXPECT(gbc.pc(), 0xba24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba22), 0xcb);
        EXPECT(gbc.readMem(0xba23), 0xa1);
        // CB A1 033C
        gbc.setState(0x4681, 0x39bf, 0x880, 0xae85, 0xe527, 0x1b36, 0x1, 0x0);
        gbc.writeMem(0x4681, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x39bf);
        EXPECT(gbc.pc(), 0x4683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 033D
        gbc.setState(0x4cc5, 0xe9a3, 0x9110, 0x1fc1, 0xaa60, 0x940, 0x1, 0x0);
        gbc.writeMem(0x4cc5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe9a3);
        EXPECT(gbc.pc(), 0x4cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 033E
        gbc.setState(0x43df, 0x6543, 0x8d50, 0xbd85, 0xaf04, 0x9b37, 0x0, 0x0);
        gbc.writeMem(0x43df, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6543);
        EXPECT(gbc.pc(), 0x43e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 033F
        gbc.setState(0xb06, 0x8b62, 0x90e0, 0xfe31, 0xdebd, 0x3205, 0x1, 0x0);
        gbc.writeMem(0xb06, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8b62);
        EXPECT(gbc.pc(), 0xb08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0340
        gbc.setState(0x4b46, 0x1dc8, 0xdbd0, 0x320, 0x360d, 0xe3cc, 0x0, 0x0);
        gbc.writeMem(0x4b46, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1dc8);
        EXPECT(gbc.pc(), 0x4b48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0341
        gbc.setState(0x5d58, 0x8441, 0x8240, 0x906f, 0xa9d4, 0xe74a, 0x0, 0x0);
        gbc.writeMem(0x5d58, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8441);
        EXPECT(gbc.pc(), 0x5d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0342
        gbc.setState(0x8c9, 0x25c5, 0x9a0, 0xdd15, 0x4338, 0x3c1, 0x0, 0x1);
        gbc.writeMem(0x8c9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x25c5);
        EXPECT(gbc.pc(), 0x8cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0343
        gbc.setState(0x464f, 0x5a15, 0x8810, 0x5d14, 0x58f3, 0xd766, 0x1, 0x1);
        gbc.writeMem(0x464f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5a15);
        EXPECT(gbc.pc(), 0x4651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0345
        gbc.setState(0x6d1, 0x8895, 0x9560, 0xfb61, 0x1041, 0x513c, 0x0, 0x0);
        gbc.writeMem(0x6d1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8895);
        EXPECT(gbc.pc(), 0x6d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0346
        gbc.setState(0xadc8, 0xc891, 0xf550, 0xc54e, 0xf4cd, 0xcb0e, 0x1, 0x1);
        gbc.writeMem(0xadc8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc891);
        EXPECT(gbc.pc(), 0xadca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc8), 0xcb);
        EXPECT(gbc.readMem(0xadc9), 0xa1);
        // CB A1 0347
        gbc.setState(0x9c99, 0x45f6, 0xbed0, 0x5d08, 0x6b4e, 0xfb9b, 0x0, 0x1);
        gbc.writeMem(0x9c99, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x45f6);
        EXPECT(gbc.pc(), 0x9c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c99), 0xcb);
        EXPECT(gbc.readMem(0x9c9a), 0xa1);
        // CB A1 0348
        gbc.setState(0x7358, 0x933, 0xc140, 0x458d, 0xb96e, 0xc30c, 0x0, 0x1);
        gbc.writeMem(0x7358, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x933);
        EXPECT(gbc.pc(), 0x735a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0349
        gbc.setState(0xb738, 0xca58, 0x5380, 0xf983, 0xeae1, 0x2ed9, 0x0, 0x0);
        gbc.writeMem(0xb738, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xca58);
        EXPECT(gbc.pc(), 0xb73a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb738), 0xcb);
        EXPECT(gbc.readMem(0xb739), 0xa1);
        // CB A1 034B
        gbc.setState(0xb55d, 0x53fa, 0xa0c0, 0x3309, 0xed57, 0xecf1, 0x0, 0x0);
        gbc.writeMem(0xb55d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x53fa);
        EXPECT(gbc.pc(), 0xb55f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb55d), 0xcb);
        EXPECT(gbc.readMem(0xb55e), 0xa1);
        // CB A1 034C
        gbc.setState(0x7b8f, 0xcd39, 0xd270, 0xabd4, 0x4b4e, 0xfb8b, 0x1, 0x1);
        gbc.writeMem(0x7b8f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xcd39);
        EXPECT(gbc.pc(), 0x7b91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 034D
        gbc.setState(0xcfa2, 0x2e37, 0x2070, 0xc1e5, 0xaa87, 0x7289, 0x1, 0x0);
        gbc.writeMem(0xcfa2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2e37);
        EXPECT(gbc.pc(), 0xcfa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa2), 0xcb);
        EXPECT(gbc.readMem(0xcfa3), 0xa1);
        // CB A1 034E
        gbc.setState(0x8bb9, 0xfa5b, 0xee20, 0x4d71, 0x2dd6, 0xc933, 0x1, 0x0);
        gbc.writeMem(0x8bb9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfa5b);
        EXPECT(gbc.pc(), 0x8bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb9), 0xcb);
        EXPECT(gbc.readMem(0x8bba), 0xa1);
        // CB A1 034F
        gbc.setState(0x779, 0xd478, 0x8c70, 0x54c, 0x4de9, 0x6b3e, 0x1, 0x1);
        gbc.writeMem(0x779, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd478);
        EXPECT(gbc.pc(), 0x77b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0350
        gbc.setState(0x4e81, 0xdd0f, 0xa940, 0xfa17, 0xe77, 0xd63, 0x0, 0x1);
        gbc.writeMem(0x4e81, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xdd0f);
        EXPECT(gbc.pc(), 0x4e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0352
        gbc.setState(0x18f5, 0xa563, 0x18d0, 0x85e9, 0x55fb, 0xd34c, 0x1, 0x1);
        gbc.writeMem(0x18f5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa563);
        EXPECT(gbc.pc(), 0x18f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0353
        gbc.setState(0xa045, 0x511b, 0xdbe0, 0xad23, 0xd342, 0xd3b1, 0x0, 0x1);
        gbc.writeMem(0xa045, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x511b);
        EXPECT(gbc.pc(), 0xa047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa045), 0xcb);
        EXPECT(gbc.readMem(0xa046), 0xa1);
        // CB A1 0354
        gbc.setState(0x2c73, 0xec51, 0x85a0, 0xa236, 0xaa4c, 0x7c65, 0x1, 0x0);
        gbc.writeMem(0x2c73, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xec51);
        EXPECT(gbc.pc(), 0x2c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0355
        gbc.setState(0x6d59, 0x5d59, 0xbe20, 0x4719, 0xa0da, 0xb366, 0x1, 0x0);
        gbc.writeMem(0x6d59, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5d59);
        EXPECT(gbc.pc(), 0x6d5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0356
        gbc.setState(0xed97, 0x7fe1, 0xffd0, 0xda78, 0x6bd, 0xfc41, 0x0, 0x1);
        gbc.writeMem(0xed97, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7fe1);
        EXPECT(gbc.pc(), 0xed99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed97), 0xcb);
        EXPECT(gbc.readMem(0xed98), 0xa1);
        // CB A1 0357
        gbc.setState(0xc385, 0x55c2, 0x6800, 0xe07, 0x7c04, 0x48bd, 0x0, 0x0);
        gbc.writeMem(0xc385, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x55c2);
        EXPECT(gbc.pc(), 0xc387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc385), 0xcb);
        EXPECT(gbc.readMem(0xc386), 0xa1);
        // CB A1 0358
        gbc.setState(0xd1fe, 0xab56, 0x8d80, 0x526e, 0x729e, 0xdba7, 0x1, 0x0);
        gbc.writeMem(0xd1fe, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xab56);
        EXPECT(gbc.pc(), 0xd200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fe), 0xcb);
        EXPECT(gbc.readMem(0xd1ff), 0xa1);
        // CB A1 035A
        gbc.setState(0xb763, 0xe2de, 0x2170, 0x75be, 0x9fea, 0x675f, 0x0, 0x1);
        gbc.writeMem(0xb763, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe2de);
        EXPECT(gbc.pc(), 0xb765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb763), 0xcb);
        EXPECT(gbc.readMem(0xb764), 0xa1);
        // CB A1 035B
        gbc.setState(0x9308, 0xefc, 0x3150, 0xb0d5, 0x9ea8, 0xe2b5, 0x1, 0x1);
        gbc.writeMem(0x9308, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xefc);
        EXPECT(gbc.pc(), 0x930a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9308), 0xcb);
        EXPECT(gbc.readMem(0x9309), 0xa1);
        // CB A1 035C
        gbc.setState(0x473e, 0xe527, 0x8200, 0x684d, 0x242d, 0xb1c0, 0x0, 0x0);
        gbc.writeMem(0x473e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe527);
        EXPECT(gbc.pc(), 0x4740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 035D
        gbc.setState(0x32a9, 0x2662, 0xa1f0, 0x57a2, 0x753b, 0x58a, 0x1, 0x1);
        gbc.writeMem(0x32a9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2662);
        EXPECT(gbc.pc(), 0x32ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 035E
        gbc.setState(0x4d0f, 0xd93e, 0xb9d0, 0x89a3, 0x470f, 0x218e, 0x0, 0x1);
        gbc.writeMem(0x4d0f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd93e);
        EXPECT(gbc.pc(), 0x4d11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0360
        gbc.setState(0xcac6, 0x11e8, 0x3a40, 0x1828, 0xd3d3, 0x9641, 0x0, 0x0);
        gbc.writeMem(0xcac6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x11e8);
        EXPECT(gbc.pc(), 0xcac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcac6), 0xcb);
        EXPECT(gbc.readMem(0xcac7), 0xa1);
        // CB A1 0361
        gbc.setState(0x6b41, 0x453a, 0x9ed0, 0x842f, 0x5555, 0x561a, 0x1, 0x0);
        gbc.writeMem(0x6b41, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x453a);
        EXPECT(gbc.pc(), 0x6b43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0362
        gbc.setState(0x508a, 0xe1cb, 0x2670, 0xe5ba, 0xec15, 0xf652, 0x1, 0x1);
        gbc.writeMem(0x508a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe1cb);
        EXPECT(gbc.pc(), 0x508c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0363
        gbc.setState(0x46fc, 0xe488, 0xe3c0, 0xf441, 0x5f72, 0x71ed, 0x1, 0x0);
        gbc.writeMem(0x46fc, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe488);
        EXPECT(gbc.pc(), 0x46fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0364
        gbc.setState(0xcab1, 0x3fcc, 0x40b0, 0x98e6, 0x7b14, 0xebdb, 0x0, 0x0);
        gbc.writeMem(0xcab1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3fcc);
        EXPECT(gbc.pc(), 0xcab3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcab1), 0xcb);
        EXPECT(gbc.readMem(0xcab2), 0xa1);
        // CB A1 0365
        gbc.setState(0xab84, 0x6230, 0xdbe0, 0x370, 0x3b1e, 0x4025, 0x0, 0x1);
        gbc.writeMem(0xab84, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6230);
        EXPECT(gbc.pc(), 0xab86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab84), 0xcb);
        EXPECT(gbc.readMem(0xab85), 0xa1);
        // CB A1 0367
        gbc.setState(0x1db4, 0x1472, 0xb9e0, 0xc75e, 0xf819, 0x9736, 0x0, 0x1);
        gbc.writeMem(0x1db4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1472);
        EXPECT(gbc.pc(), 0x1db6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0368
        gbc.setState(0x1a71, 0xa248, 0x2a0, 0x9dba, 0xe907, 0xf4fa, 0x0, 0x1);
        gbc.writeMem(0x1a71, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa248);
        EXPECT(gbc.pc(), 0x1a73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0369
        gbc.setState(0x47a4, 0x44c5, 0x7140, 0x3e49, 0xd786, 0xfa3d, 0x0, 0x0);
        gbc.writeMem(0x47a4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x44c5);
        EXPECT(gbc.pc(), 0x47a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 036A
        gbc.setState(0x9443, 0x6de1, 0xc640, 0x40d4, 0x4699, 0x3d82, 0x1, 0x1);
        gbc.writeMem(0x9443, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6de1);
        EXPECT(gbc.pc(), 0x9445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9443), 0xcb);
        EXPECT(gbc.readMem(0x9444), 0xa1);
        // CB A1 036B
        gbc.setState(0x9d9b, 0x3f5e, 0x33b0, 0xa001, 0x5c99, 0x7b28, 0x1, 0x0);
        gbc.writeMem(0x9d9b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3f5e);
        EXPECT(gbc.pc(), 0x9d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d9b), 0xcb);
        EXPECT(gbc.readMem(0x9d9c), 0xa1);
        // CB A1 036C
        gbc.setState(0x2e6, 0xdeae, 0x2d80, 0xcfd6, 0xb9e7, 0x987e, 0x0, 0x0);
        gbc.writeMem(0x2e6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xdeae);
        EXPECT(gbc.pc(), 0x2e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 036D
        gbc.setState(0x6b86, 0xe0fb, 0xb40, 0x50d6, 0xd616, 0x54d9, 0x1, 0x1);
        gbc.writeMem(0x6b86, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe0fb);
        EXPECT(gbc.pc(), 0x6b88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 036E
        gbc.setState(0xae08, 0xba6b, 0xec80, 0x2b12, 0x4e26, 0x3e6d, 0x0, 0x1);
        gbc.writeMem(0xae08, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xba6b);
        EXPECT(gbc.pc(), 0xae0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae08), 0xcb);
        EXPECT(gbc.readMem(0xae09), 0xa1);
        // CB A1 0370
        gbc.setState(0x6950, 0x244b, 0xb960, 0xc794, 0x1600, 0x1b4b, 0x1, 0x1);
        gbc.writeMem(0x6950, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x244b);
        EXPECT(gbc.pc(), 0x6952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0371
        gbc.setState(0x26fe, 0x2c6e, 0xb2f0, 0xea21, 0xfc79, 0x5516, 0x1, 0x1);
        gbc.writeMem(0x26fe, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2c6e);
        EXPECT(gbc.pc(), 0x2700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0372
        gbc.setState(0x9afb, 0xff08, 0x99f0, 0xcd70, 0x20fd, 0xb2ab, 0x0, 0x1);
        gbc.writeMem(0x9afb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xff08);
        EXPECT(gbc.pc(), 0x9afd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9afb), 0xcb);
        EXPECT(gbc.readMem(0x9afc), 0xa1);
        // CB A1 0373
        gbc.setState(0x97a0, 0x1f15, 0xf6a0, 0xc6e, 0x8e90, 0xd80a, 0x1, 0x0);
        gbc.writeMem(0x97a0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1f15);
        EXPECT(gbc.pc(), 0x97a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97a0), 0xcb);
        EXPECT(gbc.readMem(0x97a1), 0xa1);
        // CB A1 0374
        gbc.setState(0x32a0, 0x87fb, 0x2890, 0xd9f5, 0x877c, 0xc14, 0x1, 0x0);
        gbc.writeMem(0x32a0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x87fb);
        EXPECT(gbc.pc(), 0x32a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0375
        gbc.setState(0x835c, 0x6b33, 0x4290, 0x2be1, 0x6e2c, 0xa460, 0x1, 0x0);
        gbc.writeMem(0x835c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6b33);
        EXPECT(gbc.pc(), 0x835e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x835c), 0xcb);
        EXPECT(gbc.readMem(0x835d), 0xa1);
        // CB A1 0376
        gbc.setState(0x378c, 0x4c92, 0xc8d0, 0x15a3, 0x74ad, 0x47f, 0x1, 0x1);
        gbc.writeMem(0x378c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4c92);
        EXPECT(gbc.pc(), 0x378e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0377
        gbc.setState(0xbf25, 0x4602, 0x2630, 0x5b2c, 0xf0f2, 0xc809, 0x1, 0x1);
        gbc.writeMem(0xbf25, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4602);
        EXPECT(gbc.pc(), 0xbf27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf25), 0xcb);
        EXPECT(gbc.readMem(0xbf26), 0xa1);
        // CB A1 0378
        gbc.setState(0x6c5e, 0x1056, 0x3540, 0x7dc9, 0x8603, 0x7ffc, 0x0, 0x0);
        gbc.writeMem(0x6c5e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1056);
        EXPECT(gbc.pc(), 0x6c60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0379
        gbc.setState(0xa621, 0x3fae, 0xb20, 0x4d0e, 0x9281, 0xccef, 0x0, 0x1);
        gbc.writeMem(0xa621, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3fae);
        EXPECT(gbc.pc(), 0xa623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa621), 0xcb);
        EXPECT(gbc.readMem(0xa622), 0xa1);
        // CB A1 037A
        gbc.setState(0x4303, 0x6025, 0xcd60, 0x3ea9, 0xa08a, 0x1253, 0x0, 0x1);
        gbc.writeMem(0x4303, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6025);
        EXPECT(gbc.pc(), 0x4305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 037B
        gbc.setState(0x31b9, 0x15f4, 0x6db0, 0xac0c, 0xc4ce, 0x9271, 0x0, 0x1);
        gbc.writeMem(0x31b9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x15f4);
        EXPECT(gbc.pc(), 0x31bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 037C
        gbc.setState(0x7847, 0x400d, 0x7a70, 0x7d8e, 0x41fd, 0x8afd, 0x1, 0x0);
        gbc.writeMem(0x7847, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x400d);
        EXPECT(gbc.pc(), 0x7849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 037E
        gbc.setState(0xaf9, 0x424d, 0x9d60, 0x1117, 0xb29e, 0x94ab, 0x1, 0x0);
        gbc.writeMem(0xaf9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x424d);
        EXPECT(gbc.pc(), 0xafb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 037F
        gbc.setState(0x5ce8, 0x9443, 0xca70, 0x635a, 0x36, 0x9ad9, 0x1, 0x0);
        gbc.writeMem(0x5ce8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9443);
        EXPECT(gbc.pc(), 0x5cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0380
        gbc.setState(0xe9c, 0x1697, 0x2270, 0x193f, 0x868b, 0x352d, 0x1, 0x1);
        gbc.writeMem(0xe9c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1697);
        EXPECT(gbc.pc(), 0xe9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0381
        gbc.setState(0x864e, 0xedbd, 0x91c0, 0x11d8, 0xf658, 0xa430, 0x1, 0x0);
        gbc.writeMem(0x864e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xedbd);
        EXPECT(gbc.pc(), 0x8650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x864e), 0xcb);
        EXPECT(gbc.readMem(0x864f), 0xa1);
        // CB A1 0382
        gbc.setState(0xceb, 0x3371, 0xfaa0, 0xc949, 0xfc27, 0x1191, 0x0, 0x0);
        gbc.writeMem(0xceb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3371);
        EXPECT(gbc.pc(), 0xced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0383
        gbc.setState(0x50a0, 0x6c, 0x6c30, 0x1eaa, 0x6c39, 0x638b, 0x1, 0x0);
        gbc.writeMem(0x50a0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6c);
        EXPECT(gbc.pc(), 0x50a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0384
        gbc.setState(0x110, 0x8636, 0x2250, 0x635f, 0x8c2f, 0xaa14, 0x0, 0x1);
        gbc.writeMem(0x110, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8636);
        EXPECT(gbc.pc(), 0x112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0385
        gbc.setState(0x2071, 0x6fa2, 0xa2c0, 0xbecc, 0xd7fb, 0x8960, 0x0, 0x0);
        gbc.writeMem(0x2071, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6fa2);
        EXPECT(gbc.pc(), 0x2073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0386
        gbc.setState(0x765f, 0xa43f, 0x1af0, 0x1325, 0x6095, 0x79fb, 0x0, 0x0);
        gbc.writeMem(0x765f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa43f);
        EXPECT(gbc.pc(), 0x7661);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0387
        gbc.setState(0x325f, 0x9099, 0x3f70, 0x84e5, 0x77ad, 0x6929, 0x0, 0x0);
        gbc.writeMem(0x325f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9099);
        EXPECT(gbc.pc(), 0x3261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0388
        gbc.setState(0x36ff, 0x4a4c, 0xf090, 0x3f3e, 0x30d7, 0xea64, 0x1, 0x0);
        gbc.writeMem(0x36ff, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4a4c);
        EXPECT(gbc.pc(), 0x3701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0389
        gbc.setState(0x71e3, 0x9b02, 0xd920, 0x14eb, 0x1cf, 0x5204, 0x0, 0x1);
        gbc.writeMem(0x71e3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9b02);
        EXPECT(gbc.pc(), 0x71e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 038A
        gbc.setState(0xc937, 0xf378, 0xb80, 0x3550, 0xf889, 0xd7b, 0x1, 0x0);
        gbc.writeMem(0xc937, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf378);
        EXPECT(gbc.pc(), 0xc939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc937), 0xcb);
        EXPECT(gbc.readMem(0xc938), 0xa1);
        // CB A1 038B
        gbc.setState(0x8ec9, 0xea4f, 0x2f80, 0x6384, 0x4027, 0x8ece, 0x0, 0x0);
        gbc.writeMem(0x8ec9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xea4f);
        EXPECT(gbc.pc(), 0x8ecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec9), 0xcb);
        EXPECT(gbc.readMem(0x8eca), 0xa1);
        // CB A1 038C
        gbc.setState(0x64a6, 0xef52, 0x9ac0, 0x1488, 0xb64f, 0x520e, 0x0, 0x1);
        gbc.writeMem(0x64a6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xef52);
        EXPECT(gbc.pc(), 0x64a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 038D
        gbc.setState(0x7b4a, 0x2f79, 0x24f0, 0xdacf, 0x2b9f, 0x6878, 0x1, 0x1);
        gbc.writeMem(0x7b4a, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2f79);
        EXPECT(gbc.pc(), 0x7b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 038E
        gbc.setState(0x1532, 0x4387, 0x7070, 0x682, 0x6bb9, 0x1898, 0x0, 0x1);
        gbc.writeMem(0x1532, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4387);
        EXPECT(gbc.pc(), 0x1534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 038F
        gbc.setState(0x3ec9, 0xa4df, 0xa7b0, 0x4540, 0x82b9, 0xcf60, 0x0, 0x0);
        gbc.writeMem(0x3ec9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa4df);
        EXPECT(gbc.pc(), 0x3ecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0390
        gbc.setState(0xb495, 0xc6c1, 0xbe40, 0xbbf7, 0xa0c5, 0xee27, 0x0, 0x0);
        gbc.writeMem(0xb495, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc6c1);
        EXPECT(gbc.pc(), 0xb497);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb495), 0xcb);
        EXPECT(gbc.readMem(0xb496), 0xa1);
        // CB A1 0391
        gbc.setState(0x7a1f, 0x28f4, 0xff90, 0x3c9f, 0x25c2, 0x348f, 0x1, 0x1);
        gbc.writeMem(0x7a1f, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x28f4);
        EXPECT(gbc.pc(), 0x7a21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 0392
        gbc.setState(0xdbaa, 0x614c, 0x90c0, 0x8d86, 0x3e52, 0x8b62, 0x1, 0x1);
        gbc.writeMem(0xdbaa, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x614c);
        EXPECT(gbc.pc(), 0xdbac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbaa), 0xcb);
        EXPECT(gbc.readMem(0xdbab), 0xa1);
        // CB A1 0393
        gbc.setState(0xaeb0, 0x6ee7, 0xa9b0, 0x83da, 0xbece, 0x4575, 0x1, 0x0);
        gbc.writeMem(0xaeb0, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6ee7);
        EXPECT(gbc.pc(), 0xaeb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeb0), 0xcb);
        EXPECT(gbc.readMem(0xaeb1), 0xa1);
        // CB A1 0394
        gbc.setState(0x1ece, 0xe548, 0xf7a0, 0x10c0, 0xb438, 0xb7f3, 0x1, 0x1);
        gbc.writeMem(0x1ece, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe548);
        EXPECT(gbc.pc(), 0x1ed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0395
        gbc.setState(0xb87e, 0x575, 0x3cc0, 0xf3b8, 0x469e, 0x2891, 0x0, 0x0);
        gbc.writeMem(0xb87e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x575);
        EXPECT(gbc.pc(), 0xb880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb87e), 0xcb);
        EXPECT(gbc.readMem(0xb87f), 0xa1);
        // CB A1 0396
        gbc.setState(0xbfd5, 0x17b9, 0x84a0, 0xe9e3, 0xee37, 0x9fdc, 0x1, 0x0);
        gbc.writeMem(0xbfd5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x17b9);
        EXPECT(gbc.pc(), 0xbfd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd5), 0xcb);
        EXPECT(gbc.readMem(0xbfd6), 0xa1);
        // CB A1 0397
        gbc.setState(0x69ab, 0xf219, 0x8f40, 0xc6d8, 0x95c7, 0xf6c6, 0x1, 0x0);
        gbc.writeMem(0x69ab, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf219);
        EXPECT(gbc.pc(), 0x69ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 0398
        gbc.setState(0xee95, 0x7618, 0x8c70, 0x4c2e, 0x8634, 0x6cb1, 0x1, 0x0);
        gbc.writeMem(0xee95, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7618);
        EXPECT(gbc.pc(), 0xee97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee95), 0xcb);
        EXPECT(gbc.readMem(0xee96), 0xa1);
        // CB A1 0399
        gbc.setState(0x972e, 0xc5b7, 0x2130, 0x74c8, 0x294a, 0x2dff, 0x0, 0x1);
        gbc.writeMem(0x972e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc5b7);
        EXPECT(gbc.pc(), 0x9730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x972e), 0xcb);
        EXPECT(gbc.readMem(0x972f), 0xa1);
        // CB A1 039A
        gbc.setState(0x5dc2, 0x541f, 0xfd90, 0x5490, 0x54dc, 0x4a3b, 0x0, 0x1);
        gbc.writeMem(0x5dc2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x541f);
        EXPECT(gbc.pc(), 0x5dc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 039B
        gbc.setState(0x257b, 0x54c0, 0x8000, 0x319a, 0xa112, 0x9755, 0x1, 0x1);
        gbc.writeMem(0x257b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x54c0);
        EXPECT(gbc.pc(), 0x257d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 039C
        gbc.setState(0xa6d8, 0x64fb, 0xb5e0, 0xabee, 0xd818, 0xac04, 0x1, 0x1);
        gbc.writeMem(0xa6d8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x64fb);
        EXPECT(gbc.pc(), 0xa6da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d8), 0xcb);
        EXPECT(gbc.readMem(0xa6d9), 0xa1);
        // CB A1 039D
        gbc.setState(0x8383, 0x64d7, 0xab00, 0xd450, 0x746, 0x3aba, 0x1, 0x0);
        gbc.writeMem(0x8383, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x64d7);
        EXPECT(gbc.pc(), 0x8385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8383), 0xcb);
        EXPECT(gbc.readMem(0x8384), 0xa1);
        // CB A1 039E
        gbc.setState(0x6026, 0x72d4, 0xfaa0, 0x4174, 0xf017, 0x4f79, 0x1, 0x0);
        gbc.writeMem(0x6026, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x72d4);
        EXPECT(gbc.pc(), 0x6028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 039F
        gbc.setState(0x483d, 0x9756, 0xdf10, 0x7d67, 0x3a01, 0x3f8, 0x1, 0x0);
        gbc.writeMem(0x483d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9756);
        EXPECT(gbc.pc(), 0x483f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03A0
        gbc.setState(0x4930, 0x1e0c, 0xc920, 0x540e, 0x14e7, 0x6070, 0x1, 0x1);
        gbc.writeMem(0x4930, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1e0c);
        EXPECT(gbc.pc(), 0x4932);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03A1
        gbc.setState(0xd967, 0x3028, 0xc2a0, 0xe4ef, 0xaf39, 0xb705, 0x0, 0x0);
        gbc.writeMem(0xd967, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3028);
        EXPECT(gbc.pc(), 0xd969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd967), 0xcb);
        EXPECT(gbc.readMem(0xd968), 0xa1);
        // CB A1 03A2
        gbc.setState(0x6d72, 0xa9fb, 0xb8b0, 0x363c, 0x88bb, 0x1918, 0x0, 0x0);
        gbc.writeMem(0x6d72, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa9fb);
        EXPECT(gbc.pc(), 0x6d74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03A3
        gbc.setState(0xa89e, 0xea78, 0xc160, 0x157a, 0x72e6, 0x32e3, 0x0, 0x1);
        gbc.writeMem(0xa89e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xea78);
        EXPECT(gbc.pc(), 0xa8a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa89e), 0xcb);
        EXPECT(gbc.readMem(0xa89f), 0xa1);
        // CB A1 03A4
        gbc.setState(0x4e46, 0xfb88, 0x14b0, 0xdbff, 0xcc0e, 0x1308, 0x1, 0x1);
        gbc.writeMem(0x4e46, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfb88);
        EXPECT(gbc.pc(), 0x4e48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03A5
        gbc.setState(0x1874, 0x2ec9, 0xfe20, 0x2430, 0x8663, 0xfd11, 0x1, 0x1);
        gbc.writeMem(0x1874, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2ec9);
        EXPECT(gbc.pc(), 0x1876);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03A6
        gbc.setState(0x9cae, 0x138, 0x19f0, 0xea6d, 0x4d85, 0x421d, 0x1, 0x0);
        gbc.writeMem(0x9cae, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x138);
        EXPECT(gbc.pc(), 0x9cb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cae), 0xcb);
        EXPECT(gbc.readMem(0x9caf), 0xa1);
        // CB A1 03A7
        gbc.setState(0x3171, 0xb840, 0xdb20, 0xc909, 0x16e4, 0x23f1, 0x1, 0x0);
        gbc.writeMem(0x3171, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb840);
        EXPECT(gbc.pc(), 0x3173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03A9
        gbc.setState(0x3418, 0x63b4, 0xbe70, 0xec23, 0xff6e, 0xf9f4, 0x1, 0x0);
        gbc.writeMem(0x3418, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x63b4);
        EXPECT(gbc.pc(), 0x341a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03AA
        gbc.setState(0x7437, 0xbd11, 0x53d0, 0x5c60, 0xc73c, 0xc2b7, 0x0, 0x1);
        gbc.writeMem(0x7437, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbd11);
        EXPECT(gbc.pc(), 0x7439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03AB
        gbc.setState(0x49c4, 0xfb04, 0xbb60, 0xcc23, 0xfc0, 0xd40c, 0x1, 0x0);
        gbc.writeMem(0x49c4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfb04);
        EXPECT(gbc.pc(), 0x49c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03AC
        gbc.setState(0xe7ec, 0x73e6, 0x8960, 0x47fd, 0xbc38, 0x318f, 0x0, 0x1);
        gbc.writeMem(0xe7ec, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x73e6);
        EXPECT(gbc.pc(), 0xe7ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ec), 0xcb);
        EXPECT(gbc.readMem(0xe7ed), 0xa1);
        // CB A1 03AE
        gbc.setState(0xefb5, 0x547, 0x7720, 0xdc6, 0xea0a, 0x86e9, 0x1, 0x1);
        gbc.writeMem(0xefb5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x547);
        EXPECT(gbc.pc(), 0xefb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefb5), 0xcb);
        EXPECT(gbc.readMem(0xefb6), 0xa1);
        // CB A1 03AF
        gbc.setState(0x8425, 0xdaa5, 0xad10, 0x2e17, 0xec2b, 0xdf68, 0x1, 0x0);
        gbc.writeMem(0x8425, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xdaa5);
        EXPECT(gbc.pc(), 0x8427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8425), 0xcb);
        EXPECT(gbc.readMem(0x8426), 0xa1);
        // CB A1 03B0
        gbc.setState(0x12b3, 0x9d72, 0xee30, 0x8fc9, 0x3f61, 0xf050, 0x0, 0x1);
        gbc.writeMem(0x12b3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9d72);
        EXPECT(gbc.pc(), 0x12b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03B1
        gbc.setState(0x1c26, 0xfb38, 0xf740, 0xd530, 0x349e, 0x130d, 0x1, 0x0);
        gbc.writeMem(0x1c26, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfb38);
        EXPECT(gbc.pc(), 0x1c28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03B2
        gbc.setState(0x1453, 0xa7, 0x4f0, 0x74f2, 0xc00d, 0x86f2, 0x1, 0x1);
        gbc.writeMem(0x1453, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa7);
        EXPECT(gbc.pc(), 0x1455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03B3
        gbc.setState(0x13e6, 0xb8cd, 0x9180, 0x8c56, 0x1a1d, 0xe993, 0x0, 0x0);
        gbc.writeMem(0x13e6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb8cd);
        EXPECT(gbc.pc(), 0x13e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03B4
        gbc.setState(0x6596, 0x85c2, 0xf420, 0x9c0e, 0xcfeb, 0xa2f3, 0x1, 0x1);
        gbc.writeMem(0x6596, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x85c2);
        EXPECT(gbc.pc(), 0x6598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03B5
        gbc.setState(0x3555, 0xf8ef, 0x54e0, 0x55fd, 0xd8b3, 0x2e9c, 0x0, 0x1);
        gbc.writeMem(0x3555, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf8ef);
        EXPECT(gbc.pc(), 0x3557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03B6
        gbc.setState(0xd717, 0xa21c, 0xa580, 0x5df2, 0x5ec8, 0x8c82, 0x0, 0x1);
        gbc.writeMem(0xd717, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa21c);
        EXPECT(gbc.pc(), 0xd719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd717), 0xcb);
        EXPECT(gbc.readMem(0xd718), 0xa1);
        // CB A1 03B7
        gbc.setState(0xcb19, 0x8f78, 0x6900, 0x84c, 0xb43e, 0x32d5, 0x0, 0x1);
        gbc.writeMem(0xcb19, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8f78);
        EXPECT(gbc.pc(), 0xcb1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb19), 0xcb);
        EXPECT(gbc.readMem(0xcb1a), 0xa1);
        // CB A1 03B8
        gbc.setState(0xd396, 0xaf7c, 0xb160, 0x5e6e, 0xbd44, 0xa78e, 0x0, 0x1);
        gbc.writeMem(0xd396, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xaf7c);
        EXPECT(gbc.pc(), 0xd398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd396), 0xcb);
        EXPECT(gbc.readMem(0xd397), 0xa1);
        // CB A1 03B9
        gbc.setState(0x263b, 0x14a1, 0xbe70, 0x66f5, 0x3f94, 0xf485, 0x1, 0x1);
        gbc.writeMem(0x263b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x14a1);
        EXPECT(gbc.pc(), 0x263d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03BA
        gbc.setState(0xa5a2, 0x82e7, 0x4080, 0xa0bd, 0x114d, 0x3f56, 0x0, 0x1);
        gbc.writeMem(0xa5a2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x82e7);
        EXPECT(gbc.pc(), 0xa5a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a2), 0xcb);
        EXPECT(gbc.readMem(0xa5a3), 0xa1);
        // CB A1 03BB
        gbc.setState(0x71eb, 0x6345, 0x61f0, 0xcc20, 0x6255, 0x5186, 0x0, 0x0);
        gbc.writeMem(0x71eb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6345);
        EXPECT(gbc.pc(), 0x71ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03BC
        gbc.setState(0xb611, 0x47b2, 0xa6b0, 0xef2e, 0x9995, 0xb6e, 0x1, 0x0);
        gbc.writeMem(0xb611, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x47b2);
        EXPECT(gbc.pc(), 0xb613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb611), 0xcb);
        EXPECT(gbc.readMem(0xb612), 0xa1);
        // CB A1 03BD
        gbc.setState(0x1949, 0x5a47, 0xabf0, 0xbd23, 0x4eb2, 0xf8e3, 0x1, 0x1);
        gbc.writeMem(0x1949, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5a47);
        EXPECT(gbc.pc(), 0x194b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03BE
        gbc.setState(0x654b, 0x2b6b, 0x7e70, 0x6c9a, 0xc30d, 0x4ca5, 0x1, 0x1);
        gbc.writeMem(0x654b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2b6b);
        EXPECT(gbc.pc(), 0x654d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03BF
        gbc.setState(0xa5a3, 0x5a23, 0x4cc0, 0x7ada, 0x8f1c, 0x6bbf, 0x0, 0x1);
        gbc.writeMem(0xa5a3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5a23);
        EXPECT(gbc.pc(), 0xa5a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a3), 0xcb);
        EXPECT(gbc.readMem(0xa5a4), 0xa1);
        // CB A1 03C0
        gbc.setState(0x13ad, 0x653e, 0xdb30, 0x663f, 0xd9c4, 0xac0f, 0x0, 0x1);
        gbc.writeMem(0x13ad, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x653e);
        EXPECT(gbc.pc(), 0x13af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03C1
        gbc.setState(0xcdcb, 0x1ac4, 0xdee0, 0xb619, 0x9b7c, 0x26b6, 0x1, 0x0);
        gbc.writeMem(0xcdcb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1ac4);
        EXPECT(gbc.pc(), 0xcdcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdcb), 0xcb);
        EXPECT(gbc.readMem(0xcdcc), 0xa1);
        // CB A1 03C2
        gbc.setState(0x8ea3, 0xcff0, 0xc3b0, 0x454, 0x26f1, 0x7ba5, 0x0, 0x0);
        gbc.writeMem(0x8ea3, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcff0);
        EXPECT(gbc.pc(), 0x8ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ea3), 0xcb);
        EXPECT(gbc.readMem(0x8ea4), 0xa1);
        // CB A1 03C3
        gbc.setState(0x6405, 0x305f, 0xa460, 0x95e8, 0xad68, 0x2cee, 0x0, 0x0);
        gbc.writeMem(0x6405, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x305f);
        EXPECT(gbc.pc(), 0x6407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03C4
        gbc.setState(0x2292, 0xed3, 0x4640, 0x6ca8, 0x944e, 0x4298, 0x1, 0x0);
        gbc.writeMem(0x2292, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xed3);
        EXPECT(gbc.pc(), 0x2294);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03C5
        gbc.setState(0xb736, 0x58f7, 0x5ae0, 0x57d8, 0x8b69, 0x4207, 0x1, 0x1);
        gbc.writeMem(0xb736, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x58f7);
        EXPECT(gbc.pc(), 0xb738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb736), 0xcb);
        EXPECT(gbc.readMem(0xb737), 0xa1);
        // CB A1 03C6
        gbc.setState(0xd2e7, 0x3ec3, 0xac80, 0xbc73, 0xbe25, 0x43dd, 0x1, 0x1);
        gbc.writeMem(0xd2e7, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3ec3);
        EXPECT(gbc.pc(), 0xd2e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e7), 0xcb);
        EXPECT(gbc.readMem(0xd2e8), 0xa1);
        // CB A1 03C8
        gbc.setState(0x74ed, 0xa09b, 0x9a70, 0x30a1, 0x76de, 0x5135, 0x0, 0x1);
        gbc.writeMem(0x74ed, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa09b);
        EXPECT(gbc.pc(), 0x74ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03C9
        gbc.setState(0x75da, 0x47f9, 0x1fa0, 0xeb2, 0xa449, 0x85b, 0x1, 0x0);
        gbc.writeMem(0x75da, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x47f9);
        EXPECT(gbc.pc(), 0x75dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03CA
        gbc.setState(0x1151, 0x6b47, 0xce50, 0xb357, 0x81c5, 0xadaf, 0x1, 0x0);
        gbc.writeMem(0x1151, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6b47);
        EXPECT(gbc.pc(), 0x1153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03CB
        gbc.setState(0xb1ac, 0x23f9, 0xb7e0, 0xb2ff, 0xca49, 0x92b2, 0x0, 0x0);
        gbc.writeMem(0xb1ac, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x23f9);
        EXPECT(gbc.pc(), 0xb1ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ac), 0xcb);
        EXPECT(gbc.readMem(0xb1ad), 0xa1);
        // CB A1 03CC
        gbc.setState(0x3fb2, 0x67d4, 0x200, 0x7245, 0x19e5, 0x59ec, 0x1, 0x0);
        gbc.writeMem(0x3fb2, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x67d4);
        EXPECT(gbc.pc(), 0x3fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03CD
        gbc.setState(0x1f12, 0x9572, 0xcb20, 0xef36, 0x53db, 0x5232, 0x1, 0x1);
        gbc.writeMem(0x1f12, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9572);
        EXPECT(gbc.pc(), 0x1f14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03CF
        gbc.setState(0x68e5, 0xd91d, 0x5560, 0x9cd3, 0xc7ac, 0xd9cf, 0x1, 0x0);
        gbc.writeMem(0x68e5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd91d);
        EXPECT(gbc.pc(), 0x68e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03D1
        gbc.setState(0x7876, 0xcbac, 0xe000, 0xfe33, 0x7c1c, 0x8baf, 0x1, 0x1);
        gbc.writeMem(0x7876, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcbac);
        EXPECT(gbc.pc(), 0x7878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03D2
        gbc.setState(0xd62e, 0xb87d, 0xa960, 0xc096, 0x3fad, 0xca20, 0x0, 0x0);
        gbc.writeMem(0xd62e, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb87d);
        EXPECT(gbc.pc(), 0xd630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd62e), 0xcb);
        EXPECT(gbc.readMem(0xd62f), 0xa1);
        // CB A1 03D3
        gbc.setState(0x7e7c, 0x940b, 0x8a80, 0x6868, 0xfac5, 0xeba4, 0x0, 0x0);
        gbc.writeMem(0x7e7c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x940b);
        EXPECT(gbc.pc(), 0x7e7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03D4
        gbc.setState(0x35f6, 0xdbac, 0x2d80, 0x23dc, 0x4620, 0xb1f9, 0x0, 0x1);
        gbc.writeMem(0x35f6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xdbac);
        EXPECT(gbc.pc(), 0x35f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03D5
        gbc.setState(0x305c, 0xd2a1, 0xb310, 0xa771, 0x985, 0xbb2c, 0x0, 0x1);
        gbc.writeMem(0x305c, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd2a1);
        EXPECT(gbc.pc(), 0x305e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03D6
        gbc.setState(0xb2d1, 0x5d2f, 0x140, 0x9151, 0x46d8, 0x82c0, 0x1, 0x1);
        gbc.writeMem(0xb2d1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5d2f);
        EXPECT(gbc.pc(), 0xb2d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d1), 0xcb);
        EXPECT(gbc.readMem(0xb2d2), 0xa1);
        // CB A1 03D7
        gbc.setState(0x179d, 0xf925, 0xd340, 0xf980, 0xc7dc, 0xc28e, 0x0, 0x1);
        gbc.writeMem(0x179d, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf925);
        EXPECT(gbc.pc(), 0x179f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03D8
        gbc.setState(0x7bdb, 0x578f, 0x9960, 0x50b5, 0x607, 0xe27d, 0x1, 0x0);
        gbc.writeMem(0x7bdb, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x578f);
        EXPECT(gbc.pc(), 0x7bdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03D9
        gbc.setState(0xee3b, 0xd1ce, 0x88a0, 0xdd9f, 0xc4fb, 0x1b29, 0x0, 0x0);
        gbc.writeMem(0xee3b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd1ce);
        EXPECT(gbc.pc(), 0xee3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee3b), 0xcb);
        EXPECT(gbc.readMem(0xee3c), 0xa1);
        // CB A1 03DA
        gbc.setState(0xe205, 0xddb, 0x8870, 0x91e5, 0xdd50, 0x6df1, 0x1, 0x1);
        gbc.writeMem(0xe205, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xddb);
        EXPECT(gbc.pc(), 0xe207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe205), 0xcb);
        EXPECT(gbc.readMem(0xe206), 0xa1);
        // CB A1 03DB
        gbc.setState(0x29c6, 0x3f38, 0x86b0, 0xc9e3, 0x90f7, 0xf899, 0x0, 0x0);
        gbc.writeMem(0x29c6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3f38);
        EXPECT(gbc.pc(), 0x29c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03DC
        gbc.setState(0xe0f5, 0xaade, 0xab80, 0x95c5, 0xda06, 0xbe3a, 0x1, 0x0);
        gbc.writeMem(0xe0f5, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xaade);
        EXPECT(gbc.pc(), 0xe0f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0f5), 0xcb);
        EXPECT(gbc.readMem(0xe0f6), 0xa1);
        // CB A1 03DD
        gbc.setState(0xee10, 0xd208, 0xea40, 0x77c6, 0x71f0, 0x697a, 0x1, 0x1);
        gbc.writeMem(0xee10, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd208);
        EXPECT(gbc.pc(), 0xee12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee10), 0xcb);
        EXPECT(gbc.readMem(0xee11), 0xa1);
        // CB A1 03DE
        gbc.setState(0x2ecf, 0x430, 0xd530, 0xc01b, 0x507b, 0xe789, 0x0, 0x1);
        gbc.writeMem(0x2ecf, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x430);
        EXPECT(gbc.pc(), 0x2ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03DF
        gbc.setState(0x28c9, 0x25ff, 0x8760, 0xbb11, 0xe8f5, 0x8bb2, 0x1, 0x1);
        gbc.writeMem(0x28c9, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x25ff);
        EXPECT(gbc.pc(), 0x28cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03E0
        gbc.setState(0xab, 0x19ec, 0x6e30, 0x4c67, 0x85a7, 0xeb32, 0x1, 0x1);
        gbc.writeMem(0xab, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x19ec);
        EXPECT(gbc.pc(), 0xad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03E2
        gbc.setState(0x76c6, 0xd1d0, 0xf600, 0xbe7a, 0xf6b6, 0x23f5, 0x1, 0x0);
        gbc.writeMem(0x76c6, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd1d0);
        EXPECT(gbc.pc(), 0x76c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A1 03E3
        gbc.setState(0x97d8, 0xad60, 0x4300, 0xe81c, 0x17e2, 0xb22d, 0x0, 0x1);
        gbc.writeMem(0x97d8, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xad60);
        EXPECT(gbc.pc(), 0x97da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d8), 0xcb);
        EXPECT(gbc.readMem(0x97d9), 0xa1);
        // CB A1 03E4
        gbc.setState(0x1abf, 0xb16e, 0x2e10, 0xa10d, 0x9ecd, 0x67f9, 0x0, 0x0);
        gbc.writeMem(0x1abf, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb16e);
        EXPECT(gbc.pc(), 0x1ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03E5
        gbc.setState(0xad7b, 0x4e9b, 0x61d0, 0x51f6, 0xdb2c, 0xd8be, 0x0, 0x1);
        gbc.writeMem(0xad7b, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4e9b);
        EXPECT(gbc.pc(), 0xad7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad7b), 0xcb);
        EXPECT(gbc.readMem(0xad7c), 0xa1);
        // CB A1 03E6
        gbc.setState(0x7ee1, 0x65f4, 0xcd30, 0xe579, 0x373d, 0xe3d5, 0x1, 0x1);
        gbc.writeMem(0x7ee1, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x65f4);
        EXPECT(gbc.pc(), 0x7ee3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A1 03E7
        gbc.setState(0x90d4, 0x8791, 0xfaf0, 0x4337, 0x130, 0x2606, 0x1, 0x0);
        gbc.writeMem(0x90d4, { 0xcb, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8791);
        EXPECT(gbc.pc(), 0x90d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d4), 0xcb);
        EXPECT(gbc.readMem(0x90d5), 0xa1);
    }
