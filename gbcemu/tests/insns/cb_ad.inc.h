    TEST(gbcemu, opcode_cb_ad) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB AD 0000
        gbc.setState(0x1de1, 0xca33, 0xa300, 0x6e2a, 0x3fd9, 0x33ac, 0x1, 0x1);
        gbc.writeMem(0x1de1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xca33);
        EXPECT(gbc.pc(), 0x1de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0002
        gbc.setState(0x2ada, 0x2fd3, 0x2690, 0x1b1f, 0xdadf, 0xae55, 0x1, 0x0);
        gbc.writeMem(0x2ada, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2fd3);
        EXPECT(gbc.pc(), 0x2adc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0003
        gbc.setState(0xa98c, 0x639b, 0x45b0, 0x108, 0x97f7, 0xc490, 0x0, 0x0);
        gbc.writeMem(0xa98c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x639b);
        EXPECT(gbc.pc(), 0xa98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98c), 0xcb);
        EXPECT(gbc.readMem(0xa98d), 0xad);
        // CB AD 0005
        gbc.setState(0x9de1, 0xcc8f, 0x9c50, 0x8b44, 0xecf7, 0x6d56, 0x0, 0x0);
        gbc.writeMem(0x9de1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcc8f);
        EXPECT(gbc.pc(), 0x9de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9de1), 0xcb);
        EXPECT(gbc.readMem(0x9de2), 0xad);
        // CB AD 0006
        gbc.setState(0xd4ab, 0x69ad, 0x6d60, 0x3ed7, 0x89a1, 0x5d37, 0x1, 0x0);
        gbc.writeMem(0xd4ab, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x69ad);
        EXPECT(gbc.pc(), 0xd4ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ab), 0xcb);
        EXPECT(gbc.readMem(0xd4ac), 0xad);
        // CB AD 0007
        gbc.setState(0xec79, 0x1620, 0xcdb0, 0xba6, 0xac13, 0x21e, 0x1, 0x1);
        gbc.writeMem(0xec79, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1620);
        EXPECT(gbc.pc(), 0xec7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec79), 0xcb);
        EXPECT(gbc.readMem(0xec7a), 0xad);
        // CB AD 0008
        gbc.setState(0x2276, 0x4ed6, 0x3bb0, 0xa3fe, 0x8ae6, 0x7397, 0x1, 0x1);
        gbc.writeMem(0x2276, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4ed6);
        EXPECT(gbc.pc(), 0x2278);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0009
        gbc.setState(0x69ba, 0x1e4a, 0x6050, 0xc4ca, 0xdb69, 0xb0ba, 0x1, 0x1);
        gbc.writeMem(0x69ba, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x1e4a);
        EXPECT(gbc.pc(), 0x69bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 000A
        gbc.setState(0xad40, 0xc21, 0xb480, 0xcd9c, 0x6744, 0xb3e0, 0x0, 0x1);
        gbc.writeMem(0xad40, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc21);
        EXPECT(gbc.pc(), 0xad42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad40), 0xcb);
        EXPECT(gbc.readMem(0xad41), 0xad);
        // CB AD 000B
        gbc.setState(0xa70e, 0xb941, 0x4b50, 0x6dd4, 0x41a9, 0xa3ae, 0x1, 0x1);
        gbc.writeMem(0xa70e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb941);
        EXPECT(gbc.pc(), 0xa710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa70e), 0xcb);
        EXPECT(gbc.readMem(0xa70f), 0xad);
        // CB AD 000C
        gbc.setState(0xb636, 0x4f81, 0x8230, 0x6ac8, 0x8d0f, 0xba94, 0x1, 0x0);
        gbc.writeMem(0xb636, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4f81);
        EXPECT(gbc.pc(), 0xb638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb636), 0xcb);
        EXPECT(gbc.readMem(0xb637), 0xad);
        // CB AD 000D
        gbc.setState(0xb985, 0xc62e, 0xb600, 0x4778, 0x467f, 0xf507, 0x0, 0x0);
        gbc.writeMem(0xb985, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc62e);
        EXPECT(gbc.pc(), 0xb987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb985), 0xcb);
        EXPECT(gbc.readMem(0xb986), 0xad);
        // CB AD 000E
        gbc.setState(0xa416, 0x393e, 0xafd0, 0x2ab6, 0xad9b, 0xcd87, 0x1, 0x1);
        gbc.writeMem(0xa416, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x393e);
        EXPECT(gbc.pc(), 0xa418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa416), 0xcb);
        EXPECT(gbc.readMem(0xa417), 0xad);
        // CB AD 000F
        gbc.setState(0x9352, 0xd87, 0xeb50, 0xf120, 0x9eeb, 0x497e, 0x1, 0x0);
        gbc.writeMem(0x9352, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd87);
        EXPECT(gbc.pc(), 0x9354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9352), 0xcb);
        EXPECT(gbc.readMem(0x9353), 0xad);
        // CB AD 0010
        gbc.setState(0x3e7a, 0x335e, 0x1340, 0x7209, 0x59d4, 0x54ad, 0x0, 0x0);
        gbc.writeMem(0x3e7a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x335e);
        EXPECT(gbc.pc(), 0x3e7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0011
        gbc.setState(0x4712, 0x6f2f, 0xe860, 0x8cdd, 0xc2b1, 0x6ecf, 0x0, 0x1);
        gbc.writeMem(0x4712, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6f2f);
        EXPECT(gbc.pc(), 0x4714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0012
        gbc.setState(0x68d8, 0x94c6, 0x7a70, 0x6a1d, 0x7b96, 0x5c21, 0x1, 0x1);
        gbc.writeMem(0x68d8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x94c6);
        EXPECT(gbc.pc(), 0x68da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0013
        gbc.setState(0x2f1b, 0xe5dd, 0x7c70, 0xfd, 0x9019, 0xa3b8, 0x0, 0x0);
        gbc.writeMem(0x2f1b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe5dd);
        EXPECT(gbc.pc(), 0x2f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0014
        gbc.setState(0x1aab, 0x7ccc, 0x6830, 0xc24e, 0xcec3, 0xf64a, 0x1, 0x0);
        gbc.writeMem(0x1aab, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7ccc);
        EXPECT(gbc.pc(), 0x1aad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0015
        gbc.setState(0x8172, 0xa3ce, 0x9840, 0x7914, 0x19a2, 0x1abc, 0x1, 0x1);
        gbc.writeMem(0x8172, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa3ce);
        EXPECT(gbc.pc(), 0x8174);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8172), 0xcb);
        EXPECT(gbc.readMem(0x8173), 0xad);
        // CB AD 0016
        gbc.setState(0xbfca, 0x3ea3, 0x84e0, 0x73af, 0x6e16, 0x255a, 0x1, 0x1);
        gbc.writeMem(0xbfca, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3ea3);
        EXPECT(gbc.pc(), 0xbfcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfca), 0xcb);
        EXPECT(gbc.readMem(0xbfcb), 0xad);
        // CB AD 0017
        gbc.setState(0xb2ba, 0x2de7, 0x6ba0, 0xb298, 0x7742, 0xbdf5, 0x0, 0x1);
        gbc.writeMem(0xb2ba, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2de7);
        EXPECT(gbc.pc(), 0xb2bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2ba), 0xcb);
        EXPECT(gbc.readMem(0xb2bb), 0xad);
        // CB AD 0018
        gbc.setState(0x9446, 0x7dad, 0xd5f0, 0xade6, 0xa87a, 0xb7d4, 0x1, 0x0);
        gbc.writeMem(0x9446, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7dad);
        EXPECT(gbc.pc(), 0x9448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9446), 0xcb);
        EXPECT(gbc.readMem(0x9447), 0xad);
        // CB AD 0019
        gbc.setState(0x2ca, 0xe7d4, 0x2b40, 0x6166, 0x90d2, 0xe9, 0x0, 0x1);
        gbc.writeMem(0x2ca, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe7d4);
        EXPECT(gbc.pc(), 0x2cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 001B
        gbc.setState(0xef4c, 0xc2f8, 0x9f70, 0x91fe, 0x4241, 0x5b01, 0x1, 0x1);
        gbc.writeMem(0xef4c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc2f8);
        EXPECT(gbc.pc(), 0xef4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef4c), 0xcb);
        EXPECT(gbc.readMem(0xef4d), 0xad);
        // CB AD 001C
        gbc.setState(0x99f4, 0x80b1, 0x4b20, 0xeeee, 0x9ed6, 0x9450, 0x1, 0x0);
        gbc.writeMem(0x99f4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x80b1);
        EXPECT(gbc.pc(), 0x99f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f4), 0xcb);
        EXPECT(gbc.readMem(0x99f5), 0xad);
        // CB AD 001D
        gbc.setState(0x9fb1, 0x4da8, 0xf970, 0xe39, 0x31b, 0x2670, 0x1, 0x0);
        gbc.writeMem(0x9fb1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4da8);
        EXPECT(gbc.pc(), 0x9fb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb1), 0xcb);
        EXPECT(gbc.readMem(0x9fb2), 0xad);
        // CB AD 001E
        gbc.setState(0xbc87, 0x5d27, 0x4570, 0x511b, 0x494d, 0xc85a, 0x0, 0x1);
        gbc.writeMem(0xbc87, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5d27);
        EXPECT(gbc.pc(), 0xbc89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc87), 0xcb);
        EXPECT(gbc.readMem(0xbc88), 0xad);
        // CB AD 001F
        gbc.setState(0xb78, 0xcb9f, 0x3c30, 0xf584, 0x2778, 0xf3aa, 0x0, 0x0);
        gbc.writeMem(0xb78, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcb9f);
        EXPECT(gbc.pc(), 0xb7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0020
        gbc.setState(0x26fe, 0x8938, 0x59a0, 0x89b3, 0x77df, 0x3e7a, 0x1, 0x0);
        gbc.writeMem(0x26fe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8938);
        EXPECT(gbc.pc(), 0x2700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0021
        gbc.setState(0x9c2e, 0xe451, 0x76d0, 0x8d39, 0xae0a, 0x9591, 0x1, 0x0);
        gbc.writeMem(0x9c2e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe451);
        EXPECT(gbc.pc(), 0x9c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c2e), 0xcb);
        EXPECT(gbc.readMem(0x9c2f), 0xad);
        // CB AD 0022
        gbc.setState(0x2d0c, 0x1bad, 0x6590, 0xef6e, 0xb32e, 0xc0d8, 0x0, 0x0);
        gbc.writeMem(0x2d0c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1bad);
        EXPECT(gbc.pc(), 0x2d0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0023
        gbc.setState(0x477b, 0x3950, 0xc290, 0xb568, 0x8806, 0x7114, 0x0, 0x1);
        gbc.writeMem(0x477b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x3950);
        EXPECT(gbc.pc(), 0x477d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0024
        gbc.setState(0x75a8, 0xf469, 0xfc80, 0x39ca, 0x246f, 0x9bb1, 0x1, 0x1);
        gbc.writeMem(0x75a8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf469);
        EXPECT(gbc.pc(), 0x75aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0025
        gbc.setState(0xe6a8, 0x55bc, 0x6040, 0x8203, 0x1d61, 0xe521, 0x0, 0x0);
        gbc.writeMem(0xe6a8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x55bc);
        EXPECT(gbc.pc(), 0xe6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a8), 0xcb);
        EXPECT(gbc.readMem(0xe6a9), 0xad);
        // CB AD 0026
        gbc.setState(0x19f7, 0x5db, 0x1ac0, 0x62c6, 0x5b1d, 0x2d3e, 0x1, 0x0);
        gbc.writeMem(0x19f7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5db);
        EXPECT(gbc.pc(), 0x19f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0027
        gbc.setState(0xbed, 0x34a1, 0xc3a0, 0xde61, 0x12a2, 0xa6e8, 0x1, 0x1);
        gbc.writeMem(0xbed, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x34a1);
        EXPECT(gbc.pc(), 0xbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0028
        gbc.setState(0xc695, 0x258b, 0x9c0, 0xc6b9, 0xafaf, 0x4d5a, 0x0, 0x0);
        gbc.writeMem(0xc695, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x258b);
        EXPECT(gbc.pc(), 0xc697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc695), 0xcb);
        EXPECT(gbc.readMem(0xc696), 0xad);
        // CB AD 0029
        gbc.setState(0xb97e, 0x9f22, 0xb500, 0x5240, 0x9343, 0x3961, 0x1, 0x1);
        gbc.writeMem(0xb97e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9f22);
        EXPECT(gbc.pc(), 0xb980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97e), 0xcb);
        EXPECT(gbc.readMem(0xb97f), 0xad);
        // CB AD 002A
        gbc.setState(0xd14, 0x5206, 0x2f90, 0x1da6, 0xdcfc, 0x5771, 0x1, 0x0);
        gbc.writeMem(0xd14, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5206);
        EXPECT(gbc.pc(), 0xd16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 002B
        gbc.setState(0xe22c, 0xb88e, 0xe5e0, 0x3214, 0xf4b9, 0x1d9a, 0x1, 0x1);
        gbc.writeMem(0xe22c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xb88e);
        EXPECT(gbc.pc(), 0xe22e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe22c), 0xcb);
        EXPECT(gbc.readMem(0xe22d), 0xad);
        // CB AD 002C
        gbc.setState(0x7b01, 0x1837, 0x9970, 0x5e26, 0x2f5a, 0x57b, 0x1, 0x0);
        gbc.writeMem(0x7b01, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1837);
        EXPECT(gbc.pc(), 0x7b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 002D
        gbc.setState(0x734, 0x7fff, 0xc50, 0xede4, 0xb2b4, 0x2d5a, 0x0, 0x1);
        gbc.writeMem(0x734, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7fff);
        EXPECT(gbc.pc(), 0x736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 002E
        gbc.setState(0x851f, 0x3aaf, 0xc020, 0x7ba7, 0x9a9d, 0xf4a8, 0x1, 0x1);
        gbc.writeMem(0x851f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3aaf);
        EXPECT(gbc.pc(), 0x8521);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x851f), 0xcb);
        EXPECT(gbc.readMem(0x8520), 0xad);
        // CB AD 002F
        gbc.setState(0x3491, 0xe18e, 0xea70, 0xce7, 0x47ac, 0x2b31, 0x1, 0x0);
        gbc.writeMem(0x3491, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe18e);
        EXPECT(gbc.pc(), 0x3493);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0030
        gbc.setState(0x8f19, 0x607a, 0x380, 0x82bd, 0x46a5, 0xf2ab, 0x0, 0x0);
        gbc.writeMem(0x8f19, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x607a);
        EXPECT(gbc.pc(), 0x8f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f19), 0xcb);
        EXPECT(gbc.readMem(0x8f1a), 0xad);
        // CB AD 0031
        gbc.setState(0x34d2, 0xcb9b, 0x7a20, 0xc162, 0xd042, 0x77da, 0x0, 0x0);
        gbc.writeMem(0x34d2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xcb9b);
        EXPECT(gbc.pc(), 0x34d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0032
        gbc.setState(0x7846, 0x80bd, 0xb6a0, 0x840f, 0x90a4, 0x628b, 0x1, 0x1);
        gbc.writeMem(0x7846, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x80bd);
        EXPECT(gbc.pc(), 0x7848);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0033
        gbc.setState(0xa5e6, 0x2118, 0x85b0, 0xeb90, 0xe295, 0xbd89, 0x1, 0x1);
        gbc.writeMem(0xa5e6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2118);
        EXPECT(gbc.pc(), 0xa5e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5e6), 0xcb);
        EXPECT(gbc.readMem(0xa5e7), 0xad);
        // CB AD 0034
        gbc.setState(0x181b, 0x76d6, 0x8110, 0xb14c, 0x1dae, 0x9ac3, 0x0, 0x0);
        gbc.writeMem(0x181b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x76d6);
        EXPECT(gbc.pc(), 0x181d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0035
        gbc.setState(0x34ec, 0xd940, 0x3490, 0x72d1, 0xe0b7, 0x33b0, 0x0, 0x0);
        gbc.writeMem(0x34ec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd940);
        EXPECT(gbc.pc(), 0x34ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0036
        gbc.setState(0x2bc, 0xce2f, 0x9ac0, 0x6db3, 0x60e8, 0xa4b, 0x1, 0x1);
        gbc.writeMem(0x2bc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xce2f);
        EXPECT(gbc.pc(), 0x2be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0038
        gbc.setState(0x660f, 0xc2f1, 0xa320, 0x977, 0xdddf, 0x4504, 0x0, 0x1);
        gbc.writeMem(0x660f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc2f1);
        EXPECT(gbc.pc(), 0x6611);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0039
        gbc.setState(0xc20d, 0x6a9, 0xec0, 0xbbbc, 0xdb0a, 0x30cb, 0x0, 0x1);
        gbc.writeMem(0xc20d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6a9);
        EXPECT(gbc.pc(), 0xc20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc20d), 0xcb);
        EXPECT(gbc.readMem(0xc20e), 0xad);
        // CB AD 003A
        gbc.setState(0x8afe, 0x3e35, 0xb290, 0x371c, 0x9dec, 0x6e2, 0x0, 0x0);
        gbc.writeMem(0x8afe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3e35);
        EXPECT(gbc.pc(), 0x8b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8afe), 0xcb);
        EXPECT(gbc.readMem(0x8aff), 0xad);
        // CB AD 003B
        gbc.setState(0xbac5, 0x93c1, 0x2360, 0x3124, 0xf085, 0x1ada, 0x1, 0x1);
        gbc.writeMem(0xbac5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x93c1);
        EXPECT(gbc.pc(), 0xbac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac5), 0xcb);
        EXPECT(gbc.readMem(0xbac6), 0xad);
        // CB AD 003C
        gbc.setState(0xcb96, 0x32cd, 0xe5b0, 0xe780, 0x9536, 0x259c, 0x1, 0x0);
        gbc.writeMem(0xcb96, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x32cd);
        EXPECT(gbc.pc(), 0xcb98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb96), 0xcb);
        EXPECT(gbc.readMem(0xcb97), 0xad);
        // CB AD 003D
        gbc.setState(0x1389, 0xdb7b, 0xfed0, 0x6a91, 0xdad2, 0xd284, 0x0, 0x0);
        gbc.writeMem(0x1389, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xdb7b);
        EXPECT(gbc.pc(), 0x138b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 003E
        gbc.setState(0x7720, 0x23e3, 0x9b90, 0x248c, 0x86f7, 0x4a73, 0x1, 0x1);
        gbc.writeMem(0x7720, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x23e3);
        EXPECT(gbc.pc(), 0x7722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 003F
        gbc.setState(0x38f, 0x3830, 0xb420, 0xd9fa, 0x18a7, 0x1942, 0x1, 0x0);
        gbc.writeMem(0x38f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3830);
        EXPECT(gbc.pc(), 0x391);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0040
        gbc.setState(0xeadb, 0xad9, 0xea20, 0xd262, 0x5941, 0x4835, 0x1, 0x1);
        gbc.writeMem(0xeadb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xad9);
        EXPECT(gbc.pc(), 0xeadd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeadb), 0xcb);
        EXPECT(gbc.readMem(0xeadc), 0xad);
        // CB AD 0041
        gbc.setState(0x754, 0x7b1c, 0x9960, 0x725b, 0x124f, 0x3e35, 0x1, 0x1);
        gbc.writeMem(0x754, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7b1c);
        EXPECT(gbc.pc(), 0x756);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0042
        gbc.setState(0x1b4c, 0xaeb9, 0xf3b0, 0x24d5, 0xbd2a, 0xa5d4, 0x0, 0x1);
        gbc.writeMem(0x1b4c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xaeb9);
        EXPECT(gbc.pc(), 0x1b4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0043
        gbc.setState(0x98f3, 0x7372, 0xf890, 0x42c4, 0x74ca, 0xdc50, 0x0, 0x0);
        gbc.writeMem(0x98f3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7372);
        EXPECT(gbc.pc(), 0x98f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f3), 0xcb);
        EXPECT(gbc.readMem(0x98f4), 0xad);
        // CB AD 0044
        gbc.setState(0x221e, 0x88e2, 0x3bd0, 0xc085, 0x3504, 0xdfdd, 0x1, 0x1);
        gbc.writeMem(0x221e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x88e2);
        EXPECT(gbc.pc(), 0x2220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0045
        gbc.setState(0xb839, 0xa71f, 0x8420, 0xa7e, 0x7c61, 0xd80f, 0x1, 0x0);
        gbc.writeMem(0xb839, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa71f);
        EXPECT(gbc.pc(), 0xb83b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb839), 0xcb);
        EXPECT(gbc.readMem(0xb83a), 0xad);
        // CB AD 0046
        gbc.setState(0x1d99, 0x3350, 0x2760, 0xbaf, 0x659e, 0xbf33, 0x1, 0x1);
        gbc.writeMem(0x1d99, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3350);
        EXPECT(gbc.pc(), 0x1d9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0047
        gbc.setState(0x5522, 0xfef2, 0x7590, 0x9625, 0x36c4, 0x486, 0x0, 0x1);
        gbc.writeMem(0x5522, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xfef2);
        EXPECT(gbc.pc(), 0x5524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0048
        gbc.setState(0xe390, 0x69eb, 0xced0, 0xd188, 0xaef3, 0x235d, 0x1, 0x0);
        gbc.writeMem(0xe390, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x69eb);
        EXPECT(gbc.pc(), 0xe392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe390), 0xcb);
        EXPECT(gbc.readMem(0xe391), 0xad);
        // CB AD 0049
        gbc.setState(0x4485, 0x8ed4, 0x4a80, 0xf60f, 0x9430, 0x3881, 0x0, 0x0);
        gbc.writeMem(0x4485, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8ed4);
        EXPECT(gbc.pc(), 0x4487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 004A
        gbc.setState(0x5a8c, 0x607a, 0xf70, 0x57bf, 0xbf36, 0xd102, 0x1, 0x1);
        gbc.writeMem(0x5a8c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x607a);
        EXPECT(gbc.pc(), 0x5a8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 004B
        gbc.setState(0x3613, 0xca0b, 0xa7f0, 0x25d9, 0x6465, 0x59e2, 0x1, 0x0);
        gbc.writeMem(0x3613, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xca0b);
        EXPECT(gbc.pc(), 0x3615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 004C
        gbc.setState(0xd2fd, 0x1fa2, 0x80, 0x16ea, 0x1ec3, 0x2cb4, 0x1, 0x0);
        gbc.writeMem(0xd2fd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1fa2);
        EXPECT(gbc.pc(), 0xd2ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2fd), 0xcb);
        EXPECT(gbc.readMem(0xd2fe), 0xad);
        // CB AD 004D
        gbc.setState(0x4f0a, 0x77ad, 0xac00, 0x3607, 0xad3c, 0xaf55, 0x0, 0x1);
        gbc.writeMem(0x4f0a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x77ad);
        EXPECT(gbc.pc(), 0x4f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 004E
        gbc.setState(0x8705, 0xdaeb, 0xa900, 0x5fc7, 0x50ba, 0x7e0d, 0x1, 0x1);
        gbc.writeMem(0x8705, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdaeb);
        EXPECT(gbc.pc(), 0x8707);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8705), 0xcb);
        EXPECT(gbc.readMem(0x8706), 0xad);
        // CB AD 004F
        gbc.setState(0xbd5a, 0x851a, 0xb9a0, 0x6c2a, 0xaa11, 0x98c9, 0x0, 0x1);
        gbc.writeMem(0xbd5a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x851a);
        EXPECT(gbc.pc(), 0xbd5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd5a), 0xcb);
        EXPECT(gbc.readMem(0xbd5b), 0xad);
        // CB AD 0050
        gbc.setState(0xeeda, 0xeda1, 0xe730, 0x21fd, 0x61bd, 0xa15f, 0x1, 0x1);
        gbc.writeMem(0xeeda, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xeda1);
        EXPECT(gbc.pc(), 0xeedc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeda), 0xcb);
        EXPECT(gbc.readMem(0xeedb), 0xad);
        // CB AD 0051
        gbc.setState(0x91dc, 0x802f, 0xdd40, 0xaf03, 0xab8d, 0x24ca, 0x0, 0x0);
        gbc.writeMem(0x91dc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x802f);
        EXPECT(gbc.pc(), 0x91de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91dc), 0xcb);
        EXPECT(gbc.readMem(0x91dd), 0xad);
        // CB AD 0052
        gbc.setState(0x5af0, 0x347a, 0x410, 0x6f95, 0x3364, 0xd83, 0x0, 0x0);
        gbc.writeMem(0x5af0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x347a);
        EXPECT(gbc.pc(), 0x5af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0053
        gbc.setState(0x65a1, 0x4ea5, 0x13e0, 0xd404, 0x4853, 0x3583, 0x0, 0x1);
        gbc.writeMem(0x65a1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4ea5);
        EXPECT(gbc.pc(), 0x65a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0054
        gbc.setState(0x243, 0xdcf5, 0xa5a0, 0xc34a, 0x5f26, 0xc4a, 0x0, 0x1);
        gbc.writeMem(0x243, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdcf5);
        EXPECT(gbc.pc(), 0x245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0055
        gbc.setState(0xefbd, 0xcb2a, 0xcef0, 0xe7dc, 0x382b, 0xd5c3, 0x0, 0x0);
        gbc.writeMem(0xefbd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xcb2a);
        EXPECT(gbc.pc(), 0xefbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefbd), 0xcb);
        EXPECT(gbc.readMem(0xefbe), 0xad);
        // CB AD 0056
        gbc.setState(0x569a, 0x24cb, 0xba70, 0xec4f, 0xe5ec, 0xe07a, 0x1, 0x0);
        gbc.writeMem(0x569a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x24cb);
        EXPECT(gbc.pc(), 0x569c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0057
        gbc.setState(0x6720, 0x14a3, 0xb460, 0xbeee, 0x15c6, 0xea93, 0x0, 0x1);
        gbc.writeMem(0x6720, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x14a3);
        EXPECT(gbc.pc(), 0x6722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0058
        gbc.setState(0x59e7, 0x449b, 0x3dd0, 0xbcd8, 0x5202, 0xcb75, 0x0, 0x1);
        gbc.writeMem(0x59e7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x449b);
        EXPECT(gbc.pc(), 0x59e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0059
        gbc.setState(0xe04c, 0x2bf1, 0xca60, 0x6ece, 0x2c9d, 0x80f4, 0x1, 0x0);
        gbc.writeMem(0xe04c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2bf1);
        EXPECT(gbc.pc(), 0xe04e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04c), 0xcb);
        EXPECT(gbc.readMem(0xe04d), 0xad);
        // CB AD 005A
        gbc.setState(0x6427, 0x337a, 0x2430, 0x2660, 0x680e, 0x8df8, 0x0, 0x1);
        gbc.writeMem(0x6427, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x337a);
        EXPECT(gbc.pc(), 0x6429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 005B
        gbc.setState(0x60ca, 0xf202, 0x38b0, 0x15fd, 0xdf0, 0x339d, 0x0, 0x0);
        gbc.writeMem(0x60ca, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf202);
        EXPECT(gbc.pc(), 0x60cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 005C
        gbc.setState(0x4495, 0x4f1, 0xe760, 0x156d, 0x615, 0x73dd, 0x1, 0x1);
        gbc.writeMem(0x4495, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4f1);
        EXPECT(gbc.pc(), 0x4497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 005D
        gbc.setState(0xecff, 0x99ab, 0xf750, 0xc19d, 0xda5d, 0x94d0, 0x1, 0x1);
        gbc.writeMem(0xecff, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x99ab);
        EXPECT(gbc.pc(), 0xed01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecff), 0xcb);
        EXPECT(gbc.readMem(0xed00), 0xad);
        // CB AD 005E
        gbc.setState(0x8849, 0xf05a, 0xbd00, 0x9587, 0x1493, 0x5cb, 0x1, 0x1);
        gbc.writeMem(0x8849, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf05a);
        EXPECT(gbc.pc(), 0x884b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8849), 0xcb);
        EXPECT(gbc.readMem(0x884a), 0xad);
        // CB AD 005F
        gbc.setState(0x209e, 0x9049, 0x5740, 0x26aa, 0x1ff0, 0x1248, 0x0, 0x1);
        gbc.writeMem(0x209e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9049);
        EXPECT(gbc.pc(), 0x20a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0060
        gbc.setState(0xb352, 0x8a85, 0x8f30, 0x6c3b, 0x3c4a, 0xdd18, 0x0, 0x0);
        gbc.writeMem(0xb352, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8a85);
        EXPECT(gbc.pc(), 0xb354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb352), 0xcb);
        EXPECT(gbc.readMem(0xb353), 0xad);
        // CB AD 0061
        gbc.setState(0x9bec, 0xf387, 0x9c40, 0x82f5, 0xb7a4, 0x3876, 0x1, 0x0);
        gbc.writeMem(0x9bec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf387);
        EXPECT(gbc.pc(), 0x9bee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bec), 0xcb);
        EXPECT(gbc.readMem(0x9bed), 0xad);
        // CB AD 0062
        gbc.setState(0xb003, 0xb3d2, 0xcb50, 0xe66d, 0x6a1e, 0x789b, 0x0, 0x0);
        gbc.writeMem(0xb003, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb3d2);
        EXPECT(gbc.pc(), 0xb005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb003), 0xcb);
        EXPECT(gbc.readMem(0xb004), 0xad);
        // CB AD 0063
        gbc.setState(0xb59b, 0xb2cb, 0x4fb0, 0x1ca, 0xa39a, 0x88b9, 0x1, 0x0);
        gbc.writeMem(0xb59b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb2cb);
        EXPECT(gbc.pc(), 0xb59d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb59b), 0xcb);
        EXPECT(gbc.readMem(0xb59c), 0xad);
        // CB AD 0064
        gbc.setState(0x3042, 0x2171, 0xf680, 0xb99c, 0x666a, 0x95a5, 0x0, 0x1);
        gbc.writeMem(0x3042, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2171);
        EXPECT(gbc.pc(), 0x3044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0065
        gbc.setState(0x3f24, 0x39d9, 0xd470, 0x653d, 0xe429, 0xdfd3, 0x1, 0x1);
        gbc.writeMem(0x3f24, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x39d9);
        EXPECT(gbc.pc(), 0x3f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0067
        gbc.setState(0x194a, 0x26d3, 0x6080, 0xf45, 0x306f, 0x31e0, 0x1, 0x0);
        gbc.writeMem(0x194a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x26d3);
        EXPECT(gbc.pc(), 0x194c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0068
        gbc.setState(0xa43e, 0x5c03, 0x2990, 0x939e, 0x423c, 0xcf38, 0x1, 0x1);
        gbc.writeMem(0xa43e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5c03);
        EXPECT(gbc.pc(), 0xa440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa43e), 0xcb);
        EXPECT(gbc.readMem(0xa43f), 0xad);
        // CB AD 0069
        gbc.setState(0x8763, 0x3a3f, 0xf720, 0x3734, 0x9734, 0x1763, 0x0, 0x0);
        gbc.writeMem(0x8763, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3a3f);
        EXPECT(gbc.pc(), 0x8765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8763), 0xcb);
        EXPECT(gbc.readMem(0x8764), 0xad);
        // CB AD 006A
        gbc.setState(0x7695, 0x2ecf, 0xb270, 0x4525, 0x8294, 0x7d21, 0x1, 0x1);
        gbc.writeMem(0x7695, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2ecf);
        EXPECT(gbc.pc(), 0x7697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 006B
        gbc.setState(0x1d79, 0xf625, 0x8470, 0x82d6, 0x699d, 0x20f9, 0x0, 0x1);
        gbc.writeMem(0x1d79, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf625);
        EXPECT(gbc.pc(), 0x1d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 006C
        gbc.setState(0x6523, 0x4f00, 0x59e0, 0x7401, 0xe408, 0xae25, 0x0, 0x1);
        gbc.writeMem(0x6523, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4f00);
        EXPECT(gbc.pc(), 0x6525);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 006D
        gbc.setState(0xd8a, 0x10d4, 0xac10, 0x4c6, 0xdeea, 0x3bc6, 0x0, 0x0);
        gbc.writeMem(0xd8a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x10d4);
        EXPECT(gbc.pc(), 0xd8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 006E
        gbc.setState(0x315, 0xcbf3, 0x4610, 0xc048, 0xe2e8, 0xb86b, 0x1, 0x0);
        gbc.writeMem(0x315, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xcbf3);
        EXPECT(gbc.pc(), 0x317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 006F
        gbc.setState(0x304, 0x9bc0, 0x5b80, 0x24d8, 0x68ac, 0x400f, 0x0, 0x1);
        gbc.writeMem(0x304, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9bc0);
        EXPECT(gbc.pc(), 0x306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0070
        gbc.setState(0xa267, 0xee2c, 0xbb90, 0xe792, 0xafca, 0x1e90, 0x1, 0x0);
        gbc.writeMem(0xa267, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xee2c);
        EXPECT(gbc.pc(), 0xa269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa267), 0xcb);
        EXPECT(gbc.readMem(0xa268), 0xad);
        // CB AD 0071
        gbc.setState(0x5de0, 0x8025, 0x6c00, 0x7831, 0x6e64, 0x670f, 0x0, 0x1);
        gbc.writeMem(0x5de0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8025);
        EXPECT(gbc.pc(), 0x5de2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0072
        gbc.setState(0x52ed, 0x92d7, 0x40e0, 0x29d6, 0xb448, 0x3dee, 0x0, 0x1);
        gbc.writeMem(0x52ed, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x92d7);
        EXPECT(gbc.pc(), 0x52ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0073
        gbc.setState(0x9af7, 0xf43, 0x5ea0, 0xcd8a, 0x815d, 0x23a7, 0x1, 0x0);
        gbc.writeMem(0x9af7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf43);
        EXPECT(gbc.pc(), 0x9af9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af7), 0xcb);
        EXPECT(gbc.readMem(0x9af8), 0xad);
        // CB AD 0074
        gbc.setState(0x52da, 0x410d, 0x5760, 0x53e2, 0xc0f3, 0xc3f6, 0x1, 0x0);
        gbc.writeMem(0x52da, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x410d);
        EXPECT(gbc.pc(), 0x52dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0075
        gbc.setState(0xf90, 0x10ed, 0x17d0, 0xca67, 0x5c5f, 0xac5d, 0x0, 0x1);
        gbc.writeMem(0xf90, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x10ed);
        EXPECT(gbc.pc(), 0xf92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0076
        gbc.setState(0x15cc, 0xa600, 0x6150, 0x1aaa, 0xcc26, 0xb595, 0x1, 0x1);
        gbc.writeMem(0x15cc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa600);
        EXPECT(gbc.pc(), 0x15ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0077
        gbc.setState(0x711b, 0xe16a, 0x7580, 0x70db, 0xa762, 0x2fe1, 0x1, 0x1);
        gbc.writeMem(0x711b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe16a);
        EXPECT(gbc.pc(), 0x711d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0078
        gbc.setState(0x6a5c, 0xd799, 0xea0, 0x7f6d, 0xe326, 0xda20, 0x0, 0x0);
        gbc.writeMem(0x6a5c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd799);
        EXPECT(gbc.pc(), 0x6a5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0079
        gbc.setState(0x6f9, 0x3524, 0xde30, 0xf56d, 0xdd25, 0x8467, 0x1, 0x0);
        gbc.writeMem(0x6f9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3524);
        EXPECT(gbc.pc(), 0x6fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 007A
        gbc.setState(0xe29c, 0x65bc, 0xbfd0, 0x23d7, 0x66af, 0x6157, 0x1, 0x1);
        gbc.writeMem(0xe29c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x65bc);
        EXPECT(gbc.pc(), 0xe29e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe29c), 0xcb);
        EXPECT(gbc.readMem(0xe29d), 0xad);
        // CB AD 007B
        gbc.setState(0xdd48, 0x10bc, 0x2f00, 0xef5e, 0x77, 0xe8c6, 0x1, 0x0);
        gbc.writeMem(0xdd48, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x10bc);
        EXPECT(gbc.pc(), 0xdd4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd48), 0xcb);
        EXPECT(gbc.readMem(0xdd49), 0xad);
        // CB AD 007C
        gbc.setState(0xa994, 0x3782, 0x74a0, 0x340c, 0x34d5, 0x8fc2, 0x0, 0x0);
        gbc.writeMem(0xa994, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3782);
        EXPECT(gbc.pc(), 0xa996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa994), 0xcb);
        EXPECT(gbc.readMem(0xa995), 0xad);
        // CB AD 007D
        gbc.setState(0x1762, 0x2dcd, 0xff50, 0x7146, 0x2b63, 0x972b, 0x1, 0x0);
        gbc.writeMem(0x1762, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2dcd);
        EXPECT(gbc.pc(), 0x1764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 007E
        gbc.setState(0x6a35, 0xc7f9, 0xb3b0, 0xc84, 0x2735, 0xe379, 0x0, 0x1);
        gbc.writeMem(0x6a35, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc7f9);
        EXPECT(gbc.pc(), 0x6a37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 007F
        gbc.setState(0x449b, 0x520, 0x2f20, 0x44dc, 0xe3b0, 0xdacb, 0x0, 0x0);
        gbc.writeMem(0x449b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x520);
        EXPECT(gbc.pc(), 0x449d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0080
        gbc.setState(0xe54b, 0x74f7, 0xc020, 0xd18b, 0xd14, 0xb434, 0x0, 0x0);
        gbc.writeMem(0xe54b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x74f7);
        EXPECT(gbc.pc(), 0xe54d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54b), 0xcb);
        EXPECT(gbc.readMem(0xe54c), 0xad);
        // CB AD 0081
        gbc.setState(0x2e84, 0x29a1, 0x6110, 0x5400, 0xd5aa, 0x16f4, 0x0, 0x0);
        gbc.writeMem(0x2e84, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x29a1);
        EXPECT(gbc.pc(), 0x2e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0082
        gbc.setState(0xee04, 0xd7bc, 0x7ec0, 0x32e8, 0xaa38, 0x7086, 0x1, 0x0);
        gbc.writeMem(0xee04, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd7bc);
        EXPECT(gbc.pc(), 0xee06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee04), 0xcb);
        EXPECT(gbc.readMem(0xee05), 0xad);
        // CB AD 0083
        gbc.setState(0x18c9, 0x88c3, 0xedc0, 0x439c, 0xca29, 0x711e, 0x0, 0x1);
        gbc.writeMem(0x18c9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x88c3);
        EXPECT(gbc.pc(), 0x18cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0085
        gbc.setState(0xaf70, 0x16b0, 0x6370, 0xdae2, 0x6184, 0xac2a, 0x0, 0x1);
        gbc.writeMem(0xaf70, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x16b0);
        EXPECT(gbc.pc(), 0xaf72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf70), 0xcb);
        EXPECT(gbc.readMem(0xaf71), 0xad);
        // CB AD 0086
        gbc.setState(0xcf9b, 0x6c8, 0x1490, 0x7b50, 0x11d1, 0x8f6c, 0x1, 0x0);
        gbc.writeMem(0xcf9b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6c8);
        EXPECT(gbc.pc(), 0xcf9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf9b), 0xcb);
        EXPECT(gbc.readMem(0xcf9c), 0xad);
        // CB AD 0087
        gbc.setState(0x1f0c, 0x7ff6, 0x5940, 0xb8c7, 0x6c91, 0x3629, 0x0, 0x0);
        gbc.writeMem(0x1f0c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7ff6);
        EXPECT(gbc.pc(), 0x1f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0088
        gbc.setState(0xc9a7, 0xb9b5, 0xae60, 0xebef, 0xcf0b, 0x517, 0x0, 0x1);
        gbc.writeMem(0xc9a7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb9b5);
        EXPECT(gbc.pc(), 0xc9a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a7), 0xcb);
        EXPECT(gbc.readMem(0xc9a8), 0xad);
        // CB AD 0089
        gbc.setState(0xbfa2, 0x45c2, 0x8fd0, 0x4170, 0x2012, 0x5d23, 0x1, 0x1);
        gbc.writeMem(0xbfa2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x45c2);
        EXPECT(gbc.pc(), 0xbfa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa2), 0xcb);
        EXPECT(gbc.readMem(0xbfa3), 0xad);
        // CB AD 008A
        gbc.setState(0x62b5, 0x2b0, 0xf7f0, 0x795b, 0x893d, 0xcf80, 0x0, 0x0);
        gbc.writeMem(0x62b5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2b0);
        EXPECT(gbc.pc(), 0x62b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 008B
        gbc.setState(0x5616, 0xa0ee, 0xaf50, 0x7a0, 0x9f26, 0x9409, 0x1, 0x0);
        gbc.writeMem(0x5616, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa0ee);
        EXPECT(gbc.pc(), 0x5618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 008C
        gbc.setState(0xbb38, 0x6b59, 0x2d10, 0x3c94, 0xf537, 0x83f2, 0x0, 0x0);
        gbc.writeMem(0xbb38, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6b59);
        EXPECT(gbc.pc(), 0xbb3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb38), 0xcb);
        EXPECT(gbc.readMem(0xbb39), 0xad);
        // CB AD 008D
        gbc.setState(0x3780, 0x3897, 0x9c60, 0xd77b, 0x31c3, 0x1811, 0x0, 0x0);
        gbc.writeMem(0x3780, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3897);
        EXPECT(gbc.pc(), 0x3782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 008F
        gbc.setState(0xd73e, 0x1448, 0xfe90, 0xc99e, 0x573, 0x1449, 0x1, 0x1);
        gbc.writeMem(0xd73e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1448);
        EXPECT(gbc.pc(), 0xd740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd73e), 0xcb);
        EXPECT(gbc.readMem(0xd73f), 0xad);
        // CB AD 0090
        gbc.setState(0x31b7, 0x902c, 0x1b90, 0x5407, 0x1194, 0xdb9d, 0x1, 0x0);
        gbc.writeMem(0x31b7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x902c);
        EXPECT(gbc.pc(), 0x31b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0091
        gbc.setState(0xd456, 0xb7e8, 0xa060, 0xffd8, 0xce70, 0x500c, 0x1, 0x0);
        gbc.writeMem(0xd456, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb7e8);
        EXPECT(gbc.pc(), 0xd458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd456), 0xcb);
        EXPECT(gbc.readMem(0xd457), 0xad);
        // CB AD 0092
        gbc.setState(0xd961, 0xc86, 0x4090, 0x5eaa, 0x128a, 0xe18d, 0x0, 0x0);
        gbc.writeMem(0xd961, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc86);
        EXPECT(gbc.pc(), 0xd963);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd961), 0xcb);
        EXPECT(gbc.readMem(0xd962), 0xad);
        // CB AD 0093
        gbc.setState(0x456c, 0x7dd1, 0x1c80, 0x6feb, 0xd473, 0xa742, 0x1, 0x0);
        gbc.writeMem(0x456c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7dd1);
        EXPECT(gbc.pc(), 0x456e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0094
        gbc.setState(0x61ca, 0x4448, 0xdca0, 0x4405, 0x5bb5, 0xe4c0, 0x1, 0x0);
        gbc.writeMem(0x61ca, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4448);
        EXPECT(gbc.pc(), 0x61cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0095
        gbc.setState(0x3eba, 0x5029, 0xd020, 0xeca1, 0x1f9b, 0x1e8b, 0x0, 0x0);
        gbc.writeMem(0x3eba, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5029);
        EXPECT(gbc.pc(), 0x3ebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0096
        gbc.setState(0x3ef, 0x12c0, 0xef30, 0x4459, 0xb2f8, 0x3476, 0x1, 0x1);
        gbc.writeMem(0x3ef, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x12c0);
        EXPECT(gbc.pc(), 0x3f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0097
        gbc.setState(0x86c8, 0x7813, 0xa390, 0xbddf, 0xd8f6, 0xad49, 0x1, 0x0);
        gbc.writeMem(0x86c8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7813);
        EXPECT(gbc.pc(), 0x86ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c8), 0xcb);
        EXPECT(gbc.readMem(0x86c9), 0xad);
        // CB AD 0099
        gbc.setState(0x446, 0xd20d, 0xaa30, 0xedcf, 0x7c68, 0x2737, 0x1, 0x0);
        gbc.writeMem(0x446, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd20d);
        EXPECT(gbc.pc(), 0x448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 009A
        gbc.setState(0x98d5, 0xaf79, 0x8300, 0x64c7, 0xfd03, 0x976c, 0x0, 0x1);
        gbc.writeMem(0x98d5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xaf79);
        EXPECT(gbc.pc(), 0x98d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d5), 0xcb);
        EXPECT(gbc.readMem(0x98d6), 0xad);
        // CB AD 009B
        gbc.setState(0x3cd0, 0xc366, 0x6a60, 0xed3d, 0x6dfb, 0x54c5, 0x0, 0x0);
        gbc.writeMem(0x3cd0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc366);
        EXPECT(gbc.pc(), 0x3cd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 009C
        gbc.setState(0x5adf, 0xb2e0, 0x8430, 0x742a, 0xf51c, 0x442e, 0x0, 0x0);
        gbc.writeMem(0x5adf, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb2e0);
        EXPECT(gbc.pc(), 0x5ae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 009D
        gbc.setState(0x23a2, 0xa136, 0xeb60, 0xb290, 0xc1c6, 0x6146, 0x0, 0x0);
        gbc.writeMem(0x23a2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa136);
        EXPECT(gbc.pc(), 0x23a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 009E
        gbc.setState(0x4043, 0xbf4e, 0x17c0, 0xfc19, 0xb87f, 0x36f9, 0x1, 0x0);
        gbc.writeMem(0x4043, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xbf4e);
        EXPECT(gbc.pc(), 0x4045);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 009F
        gbc.setState(0x25ba, 0xc856, 0xeab0, 0x2a84, 0x6f47, 0xce42, 0x1, 0x1);
        gbc.writeMem(0x25ba, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc856);
        EXPECT(gbc.pc(), 0x25bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00A0
        gbc.setState(0x65af, 0x4791, 0xcd10, 0xf929, 0xf46, 0xda5e, 0x1, 0x1);
        gbc.writeMem(0x65af, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4791);
        EXPECT(gbc.pc(), 0x65b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00A1
        gbc.setState(0x7a9a, 0x269b, 0x9e50, 0x9e7a, 0xf2a6, 0x1760, 0x0, 0x1);
        gbc.writeMem(0x7a9a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x269b);
        EXPECT(gbc.pc(), 0x7a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00A3
        gbc.setState(0xe3dd, 0xded1, 0x7810, 0x7bad, 0xe02d, 0x8892, 0x1, 0x1);
        gbc.writeMem(0xe3dd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xded1);
        EXPECT(gbc.pc(), 0xe3df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3dd), 0xcb);
        EXPECT(gbc.readMem(0xe3de), 0xad);
        // CB AD 00A4
        gbc.setState(0x2b1e, 0xd81b, 0x490, 0x169, 0xea52, 0x8692, 0x1, 0x0);
        gbc.writeMem(0x2b1e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd81b);
        EXPECT(gbc.pc(), 0x2b20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00A5
        gbc.setState(0x6508, 0x3c9d, 0x7ca0, 0xba52, 0xf6a4, 0x1da4, 0x0, 0x0);
        gbc.writeMem(0x6508, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3c9d);
        EXPECT(gbc.pc(), 0x650a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00A6
        gbc.setState(0x9b35, 0xc3ee, 0x44b0, 0xad36, 0xea, 0x88, 0x0, 0x1);
        gbc.writeMem(0x9b35, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc3ee);
        EXPECT(gbc.pc(), 0x9b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b35), 0xcb);
        EXPECT(gbc.readMem(0x9b36), 0xad);
        // CB AD 00A7
        gbc.setState(0x5295, 0x5a4b, 0xe7e0, 0x5224, 0x145c, 0x3ae5, 0x1, 0x1);
        gbc.writeMem(0x5295, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5a4b);
        EXPECT(gbc.pc(), 0x5297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00A8
        gbc.setState(0xb98e, 0x80d6, 0x35f0, 0x8dbe, 0xa08d, 0x30dd, 0x0, 0x1);
        gbc.writeMem(0xb98e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x80d6);
        EXPECT(gbc.pc(), 0xb990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb98e), 0xcb);
        EXPECT(gbc.readMem(0xb98f), 0xad);
        // CB AD 00A9
        gbc.setState(0x178d, 0xb382, 0xa0a0, 0x18f7, 0x104, 0x39e6, 0x1, 0x0);
        gbc.writeMem(0x178d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb382);
        EXPECT(gbc.pc(), 0x178f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00AA
        gbc.setState(0x89be, 0xe914, 0xec20, 0xd41c, 0xddc4, 0xe66d, 0x0, 0x0);
        gbc.writeMem(0x89be, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe914);
        EXPECT(gbc.pc(), 0x89c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89be), 0xcb);
        EXPECT(gbc.readMem(0x89bf), 0xad);
        // CB AD 00AB
        gbc.setState(0xded, 0x80cb, 0xdd20, 0xcc4f, 0xa91a, 0xe930, 0x1, 0x1);
        gbc.writeMem(0xded, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x80cb);
        EXPECT(gbc.pc(), 0xdef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00AC
        gbc.setState(0x87e0, 0x729e, 0xf450, 0x10e5, 0x787a, 0x6bee, 0x1, 0x0);
        gbc.writeMem(0x87e0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x729e);
        EXPECT(gbc.pc(), 0x87e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e0), 0xcb);
        EXPECT(gbc.readMem(0x87e1), 0xad);
        // CB AD 00AD
        gbc.setState(0xa1ce, 0x7489, 0xbd00, 0x224a, 0x82f2, 0xd15f, 0x0, 0x0);
        gbc.writeMem(0xa1ce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7489);
        EXPECT(gbc.pc(), 0xa1d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ce), 0xcb);
        EXPECT(gbc.readMem(0xa1cf), 0xad);
        // CB AD 00AE
        gbc.setState(0xe5b7, 0x8a3a, 0xcc20, 0x69d1, 0x20f7, 0x9f2d, 0x0, 0x1);
        gbc.writeMem(0xe5b7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8a3a);
        EXPECT(gbc.pc(), 0xe5b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5b7), 0xcb);
        EXPECT(gbc.readMem(0xe5b8), 0xad);
        // CB AD 00AF
        gbc.setState(0x840a, 0x7bed, 0x3aa0, 0xf35c, 0x8753, 0x2375, 0x0, 0x1);
        gbc.writeMem(0x840a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7bed);
        EXPECT(gbc.pc(), 0x840c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840a), 0xcb);
        EXPECT(gbc.readMem(0x840b), 0xad);
        // CB AD 00B0
        gbc.setState(0x1f6b, 0xd0c8, 0x7290, 0xa9fd, 0x651f, 0x9ca2, 0x1, 0x1);
        gbc.writeMem(0x1f6b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd0c8);
        EXPECT(gbc.pc(), 0x1f6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00B1
        gbc.setState(0xf0a, 0x7029, 0xa6d0, 0xb9e7, 0x42, 0xe7cb, 0x0, 0x1);
        gbc.writeMem(0xf0a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7029);
        EXPECT(gbc.pc(), 0xf0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00B2
        gbc.setState(0xa524, 0x2e92, 0xf3a0, 0x8ddb, 0x16ef, 0x623e, 0x1, 0x1);
        gbc.writeMem(0xa524, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2e92);
        EXPECT(gbc.pc(), 0xa526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa524), 0xcb);
        EXPECT(gbc.readMem(0xa525), 0xad);
        // CB AD 00B3
        gbc.setState(0x7bf4, 0x5856, 0xe400, 0xc0f2, 0x4699, 0x2df3, 0x0, 0x1);
        gbc.writeMem(0x7bf4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x5856);
        EXPECT(gbc.pc(), 0x7bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00B4
        gbc.setState(0x371c, 0x94ca, 0x6240, 0x262e, 0x4650, 0x55fb, 0x0, 0x1);
        gbc.writeMem(0x371c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x94ca);
        EXPECT(gbc.pc(), 0x371e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00B5
        gbc.setState(0x2f3, 0xcd68, 0xc500, 0xb24e, 0x7cf9, 0x5404, 0x0, 0x0);
        gbc.writeMem(0x2f3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xcd68);
        EXPECT(gbc.pc(), 0x2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00B6
        gbc.setState(0xdde2, 0xed5d, 0xb210, 0x33eb, 0x309d, 0x5078, 0x1, 0x1);
        gbc.writeMem(0xdde2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xed5d);
        EXPECT(gbc.pc(), 0xdde4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde2), 0xcb);
        EXPECT(gbc.readMem(0xdde3), 0xad);
        // CB AD 00B9
        gbc.setState(0x5716, 0x50ab, 0xe720, 0x6193, 0x1fbb, 0x863b, 0x0, 0x0);
        gbc.writeMem(0x5716, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x50ab);
        EXPECT(gbc.pc(), 0x5718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00BA
        gbc.setState(0x791b, 0xf20b, 0x15a0, 0x4528, 0xf657, 0x73d9, 0x0, 0x1);
        gbc.writeMem(0x791b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf20b);
        EXPECT(gbc.pc(), 0x791d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00BB
        gbc.setState(0x21cc, 0xb52f, 0x9eb0, 0x28de, 0xb15c, 0x739d, 0x1, 0x0);
        gbc.writeMem(0x21cc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb52f);
        EXPECT(gbc.pc(), 0x21ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00BC
        gbc.setState(0x6087, 0xc21e, 0x87b0, 0xc977, 0x359d, 0xc521, 0x0, 0x1);
        gbc.writeMem(0x6087, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc21e);
        EXPECT(gbc.pc(), 0x6089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00BD
        gbc.setState(0x7154, 0x27a1, 0x9a40, 0xd89a, 0x2b97, 0xb977, 0x1, 0x1);
        gbc.writeMem(0x7154, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x27a1);
        EXPECT(gbc.pc(), 0x7156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00BE
        gbc.setState(0x23f3, 0xf2e4, 0x4320, 0x7c1c, 0x3916, 0x9331, 0x0, 0x1);
        gbc.writeMem(0x23f3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf2e4);
        EXPECT(gbc.pc(), 0x23f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00BF
        gbc.setState(0xdfe3, 0x428a, 0x4140, 0xb4d9, 0xb26c, 0x522b, 0x1, 0x1);
        gbc.writeMem(0xdfe3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x428a);
        EXPECT(gbc.pc(), 0xdfe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe3), 0xcb);
        EXPECT(gbc.readMem(0xdfe4), 0xad);
        // CB AD 00C0
        gbc.setState(0x8292, 0xdea9, 0x8800, 0xaa, 0x24de, 0x1f97, 0x0, 0x0);
        gbc.writeMem(0x8292, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xdea9);
        EXPECT(gbc.pc(), 0x8294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8292), 0xcb);
        EXPECT(gbc.readMem(0x8293), 0xad);
        // CB AD 00C1
        gbc.setState(0xe8e9, 0x35ed, 0x94b0, 0x65d8, 0x3384, 0x7aee, 0x1, 0x1);
        gbc.writeMem(0xe8e9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x35ed);
        EXPECT(gbc.pc(), 0xe8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8e9), 0xcb);
        EXPECT(gbc.readMem(0xe8ea), 0xad);
        // CB AD 00C2
        gbc.setState(0xc4c8, 0x9554, 0x2fb0, 0xac58, 0xeb6, 0x5e57, 0x0, 0x0);
        gbc.writeMem(0xc4c8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9554);
        EXPECT(gbc.pc(), 0xc4ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4c8), 0xcb);
        EXPECT(gbc.readMem(0xc4c9), 0xad);
        // CB AD 00C3
        gbc.setState(0x743a, 0x98c0, 0xf180, 0xb5bd, 0x256a, 0xb7bc, 0x0, 0x0);
        gbc.writeMem(0x743a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x98c0);
        EXPECT(gbc.pc(), 0x743c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00C4
        gbc.setState(0x2089, 0xbd0c, 0xf770, 0xd63c, 0xcfad, 0x9b43, 0x0, 0x1);
        gbc.writeMem(0x2089, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xbd0c);
        EXPECT(gbc.pc(), 0x208b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00C7
        gbc.setState(0xc968, 0x8e96, 0xcd50, 0x8908, 0x2a89, 0x80da, 0x0, 0x1);
        gbc.writeMem(0xc968, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8e96);
        EXPECT(gbc.pc(), 0xc96a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc968), 0xcb);
        EXPECT(gbc.readMem(0xc969), 0xad);
        // CB AD 00C8
        gbc.setState(0xd11a, 0xaf0f, 0x8cb0, 0x4e9a, 0xe18c, 0x5a27, 0x1, 0x1);
        gbc.writeMem(0xd11a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xaf0f);
        EXPECT(gbc.pc(), 0xd11c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd11a), 0xcb);
        EXPECT(gbc.readMem(0xd11b), 0xad);
        // CB AD 00C9
        gbc.setState(0x1bd9, 0xffe, 0x8a10, 0xdd33, 0xab1e, 0x3b53, 0x1, 0x1);
        gbc.writeMem(0x1bd9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xffe);
        EXPECT(gbc.pc(), 0x1bdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00CA
        gbc.setState(0x42a5, 0x1257, 0xa880, 0x4a80, 0x5ded, 0x8946, 0x1, 0x1);
        gbc.writeMem(0x42a5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1257);
        EXPECT(gbc.pc(), 0x42a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00CB
        gbc.setState(0x4790, 0x50e5, 0x3e70, 0xa665, 0x1029, 0x25b9, 0x0, 0x0);
        gbc.writeMem(0x4790, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x50e5);
        EXPECT(gbc.pc(), 0x4792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00CC
        gbc.setState(0x8da3, 0x4bfe, 0x94b0, 0xb0fb, 0xdf5c, 0x4754, 0x1, 0x1);
        gbc.writeMem(0x8da3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4bfe);
        EXPECT(gbc.pc(), 0x8da5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da3), 0xcb);
        EXPECT(gbc.readMem(0x8da4), 0xad);
        // CB AD 00CD
        gbc.setState(0x4387, 0xbf05, 0xbe50, 0xf687, 0x7b31, 0x8d18, 0x1, 0x1);
        gbc.writeMem(0x4387, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xbf05);
        EXPECT(gbc.pc(), 0x4389);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00CE
        gbc.setState(0x7920, 0x84be, 0x8a40, 0x762c, 0xe318, 0x72cc, 0x1, 0x1);
        gbc.writeMem(0x7920, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x84be);
        EXPECT(gbc.pc(), 0x7922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00CF
        gbc.setState(0xc816, 0xf613, 0x4050, 0xf78a, 0xc1cd, 0x4296, 0x1, 0x0);
        gbc.writeMem(0xc816, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf613);
        EXPECT(gbc.pc(), 0xc818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc816), 0xcb);
        EXPECT(gbc.readMem(0xc817), 0xad);
        // CB AD 00D0
        gbc.setState(0x36c4, 0x159a, 0xfc0, 0x4d67, 0xf06e, 0xe289, 0x1, 0x1);
        gbc.writeMem(0x36c4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x159a);
        EXPECT(gbc.pc(), 0x36c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00D1
        gbc.setState(0x326a, 0x511a, 0xe650, 0x78fe, 0x629d, 0x39f5, 0x1, 0x1);
        gbc.writeMem(0x326a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x511a);
        EXPECT(gbc.pc(), 0x326c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00D2
        gbc.setState(0x66db, 0x172d, 0x80f0, 0x2412, 0xe0ce, 0xe104, 0x1, 0x0);
        gbc.writeMem(0x66db, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x172d);
        EXPECT(gbc.pc(), 0x66dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00D3
        gbc.setState(0x309, 0xe3a4, 0x2580, 0x5b3b, 0x1213, 0x7ebf, 0x1, 0x1);
        gbc.writeMem(0x309, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe3a4);
        EXPECT(gbc.pc(), 0x30b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00D4
        gbc.setState(0xded1, 0xae53, 0x1270, 0xb8c4, 0x7120, 0x1e31, 0x0, 0x0);
        gbc.writeMem(0xded1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xae53);
        EXPECT(gbc.pc(), 0xded3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xded1), 0xcb);
        EXPECT(gbc.readMem(0xded2), 0xad);
        // CB AD 00D5
        gbc.setState(0xab0f, 0x36da, 0xb590, 0x565f, 0x6e99, 0x6a15, 0x0, 0x1);
        gbc.writeMem(0xab0f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x36da);
        EXPECT(gbc.pc(), 0xab11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab0f), 0xcb);
        EXPECT(gbc.readMem(0xab10), 0xad);
        // CB AD 00D6
        gbc.setState(0xc137, 0x7b7d, 0x2dc0, 0xdb1, 0xaa73, 0x599d, 0x1, 0x0);
        gbc.writeMem(0xc137, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7b7d);
        EXPECT(gbc.pc(), 0xc139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc137), 0xcb);
        EXPECT(gbc.readMem(0xc138), 0xad);
        // CB AD 00D7
        gbc.setState(0x2e43, 0x6f37, 0x8ea0, 0xe46d, 0xc79a, 0x24cb, 0x0, 0x0);
        gbc.writeMem(0x2e43, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6f37);
        EXPECT(gbc.pc(), 0x2e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00D8
        gbc.setState(0x27c4, 0x21ea, 0x8550, 0xf55a, 0x604a, 0x9601, 0x1, 0x1);
        gbc.writeMem(0x27c4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x21ea);
        EXPECT(gbc.pc(), 0x27c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00D9
        gbc.setState(0x6d37, 0x9cd1, 0xf240, 0xfc5b, 0x4bec, 0x4d7e, 0x1, 0x0);
        gbc.writeMem(0x6d37, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9cd1);
        EXPECT(gbc.pc(), 0x6d39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00DA
        gbc.setState(0x1375, 0x88d7, 0x6060, 0x2860, 0x180c, 0xa198, 0x1, 0x0);
        gbc.writeMem(0x1375, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x88d7);
        EXPECT(gbc.pc(), 0x1377);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00DB
        gbc.setState(0x5bbc, 0xf4af, 0xe240, 0xabec, 0x1b27, 0x9750, 0x1, 0x1);
        gbc.writeMem(0x5bbc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf4af);
        EXPECT(gbc.pc(), 0x5bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00DC
        gbc.setState(0x520b, 0x7e10, 0x6460, 0xdbdd, 0xf55c, 0x4d06, 0x1, 0x0);
        gbc.writeMem(0x520b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7e10);
        EXPECT(gbc.pc(), 0x520d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00DE
        gbc.setState(0x70cd, 0xffe9, 0x1620, 0xf08, 0xaa36, 0xa97e, 0x0, 0x1);
        gbc.writeMem(0x70cd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xffe9);
        EXPECT(gbc.pc(), 0x70cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00DF
        gbc.setState(0xd67e, 0x2791, 0x1ea0, 0x97b2, 0x7964, 0x6872, 0x0, 0x0);
        gbc.writeMem(0xd67e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2791);
        EXPECT(gbc.pc(), 0xd680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd67e), 0xcb);
        EXPECT(gbc.readMem(0xd67f), 0xad);
        // CB AD 00E0
        gbc.setState(0x6479, 0xe77f, 0xabb0, 0xb089, 0xcca9, 0x8ed8, 0x0, 0x0);
        gbc.writeMem(0x6479, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe77f);
        EXPECT(gbc.pc(), 0x647b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00E1
        gbc.setState(0xbd9a, 0xc241, 0xd500, 0x8373, 0x6756, 0xd9cd, 0x0, 0x0);
        gbc.writeMem(0xbd9a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc241);
        EXPECT(gbc.pc(), 0xbd9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd9a), 0xcb);
        EXPECT(gbc.readMem(0xbd9b), 0xad);
        // CB AD 00E2
        gbc.setState(0x71bd, 0x52ce, 0x9f10, 0xa531, 0xeae, 0x53ca, 0x0, 0x0);
        gbc.writeMem(0x71bd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x52ce);
        EXPECT(gbc.pc(), 0x71bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00E3
        gbc.setState(0x2c3a, 0x68df, 0x3c70, 0xec26, 0x4020, 0xfe2b, 0x1, 0x0);
        gbc.writeMem(0x2c3a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x68df);
        EXPECT(gbc.pc(), 0x2c3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00E4
        gbc.setState(0x186a, 0x8701, 0x5e00, 0x9649, 0xec87, 0x6d7a, 0x1, 0x1);
        gbc.writeMem(0x186a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8701);
        EXPECT(gbc.pc(), 0x186c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00E5
        gbc.setState(0xbb07, 0x7376, 0x9100, 0x7cb1, 0xa6d9, 0x3495, 0x0, 0x1);
        gbc.writeMem(0xbb07, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7376);
        EXPECT(gbc.pc(), 0xbb09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb07), 0xcb);
        EXPECT(gbc.readMem(0xbb08), 0xad);
        // CB AD 00E6
        gbc.setState(0xadf8, 0x923b, 0x500, 0x3cc3, 0xe864, 0x1057, 0x1, 0x1);
        gbc.writeMem(0xadf8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x923b);
        EXPECT(gbc.pc(), 0xadfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf8), 0xcb);
        EXPECT(gbc.readMem(0xadf9), 0xad);
        // CB AD 00E7
        gbc.setState(0xcb4, 0xc93b, 0x1d10, 0x48a, 0x6e9b, 0x440e, 0x0, 0x0);
        gbc.writeMem(0xcb4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc93b);
        EXPECT(gbc.pc(), 0xcb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00E8
        gbc.setState(0x6e93, 0xebee, 0x4700, 0xc908, 0x1e68, 0x5a99, 0x0, 0x0);
        gbc.writeMem(0x6e93, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xebee);
        EXPECT(gbc.pc(), 0x6e95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00E9
        gbc.setState(0x8ad1, 0x5a36, 0x9eb0, 0x116e, 0x23c7, 0xda68, 0x1, 0x1);
        gbc.writeMem(0x8ad1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5a36);
        EXPECT(gbc.pc(), 0x8ad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad1), 0xcb);
        EXPECT(gbc.readMem(0x8ad2), 0xad);
        // CB AD 00EA
        gbc.setState(0x5f98, 0x1445, 0x8db0, 0x73e4, 0xede5, 0x57cb, 0x1, 0x0);
        gbc.writeMem(0x5f98, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1445);
        EXPECT(gbc.pc(), 0x5f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00EB
        gbc.setState(0x2019, 0xd97b, 0xeb20, 0x245d, 0x6773, 0x83e7, 0x0, 0x1);
        gbc.writeMem(0x2019, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd97b);
        EXPECT(gbc.pc(), 0x201b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00EC
        gbc.setState(0xd439, 0x55fc, 0x9370, 0xc2f8, 0x7fa6, 0xf83a, 0x1, 0x1);
        gbc.writeMem(0xd439, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x55fc);
        EXPECT(gbc.pc(), 0xd43b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd439), 0xcb);
        EXPECT(gbc.readMem(0xd43a), 0xad);
        // CB AD 00ED
        gbc.setState(0x5c79, 0xf6a5, 0x5010, 0xfc89, 0x2271, 0x4f71, 0x1, 0x1);
        gbc.writeMem(0x5c79, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf6a5);
        EXPECT(gbc.pc(), 0x5c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00EE
        gbc.setState(0xcca5, 0x51a4, 0x1a90, 0x220e, 0x504d, 0xf4c0, 0x0, 0x1);
        gbc.writeMem(0xcca5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x51a4);
        EXPECT(gbc.pc(), 0xcca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca5), 0xcb);
        EXPECT(gbc.readMem(0xcca6), 0xad);
        // CB AD 00EF
        gbc.setState(0xc9f0, 0x28ec, 0x2590, 0x3d98, 0xb9da, 0xe887, 0x1, 0x1);
        gbc.writeMem(0xc9f0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x28ec);
        EXPECT(gbc.pc(), 0xc9f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f0), 0xcb);
        EXPECT(gbc.readMem(0xc9f1), 0xad);
        // CB AD 00F0
        gbc.setState(0xd5aa, 0x3ea5, 0x6a40, 0x6247, 0x2fcf, 0x10d4, 0x1, 0x0);
        gbc.writeMem(0xd5aa, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3ea5);
        EXPECT(gbc.pc(), 0xd5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5aa), 0xcb);
        EXPECT(gbc.readMem(0xd5ab), 0xad);
        // CB AD 00F1
        gbc.setState(0x600b, 0xe719, 0x1cb0, 0x594, 0xaa75, 0xb1da, 0x1, 0x0);
        gbc.writeMem(0x600b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe719);
        EXPECT(gbc.pc(), 0x600d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00F3
        gbc.setState(0xeb1f, 0xf628, 0x3e10, 0x2fd6, 0xfcc5, 0x9575, 0x0, 0x1);
        gbc.writeMem(0xeb1f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf628);
        EXPECT(gbc.pc(), 0xeb21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb1f), 0xcb);
        EXPECT(gbc.readMem(0xeb20), 0xad);
        // CB AD 00F4
        gbc.setState(0x2c9c, 0xa969, 0x7570, 0xc095, 0xf9c0, 0x1522, 0x1, 0x0);
        gbc.writeMem(0x2c9c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa969);
        EXPECT(gbc.pc(), 0x2c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00F5
        gbc.setState(0x64db, 0xcf55, 0x5f30, 0x9a23, 0x5882, 0x6642, 0x0, 0x1);
        gbc.writeMem(0x64db, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcf55);
        EXPECT(gbc.pc(), 0x64dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00F7
        gbc.setState(0x2ac6, 0xd3c7, 0x4a30, 0x64d5, 0xf31e, 0xbbc2, 0x0, 0x0);
        gbc.writeMem(0x2ac6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd3c7);
        EXPECT(gbc.pc(), 0x2ac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 00F8
        gbc.setState(0x97bd, 0xa32e, 0xa0b0, 0x8be1, 0xd086, 0x608f, 0x0, 0x0);
        gbc.writeMem(0x97bd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa32e);
        EXPECT(gbc.pc(), 0x97bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97bd), 0xcb);
        EXPECT(gbc.readMem(0x97be), 0xad);
        // CB AD 00F9
        gbc.setState(0xaccf, 0x5985, 0xa5f0, 0xd2ad, 0x7548, 0x5ca2, 0x1, 0x1);
        gbc.writeMem(0xaccf, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5985);
        EXPECT(gbc.pc(), 0xacd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaccf), 0xcb);
        EXPECT(gbc.readMem(0xacd0), 0xad);
        // CB AD 00FA
        gbc.setState(0x96dc, 0xcd07, 0x6050, 0x9dcc, 0x6e77, 0xc51f, 0x0, 0x1);
        gbc.writeMem(0x96dc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xcd07);
        EXPECT(gbc.pc(), 0x96de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96dc), 0xcb);
        EXPECT(gbc.readMem(0x96dd), 0xad);
        // CB AD 00FB
        gbc.setState(0xc809, 0x5ef3, 0x82d0, 0xa3c7, 0x75fc, 0xbe30, 0x0, 0x0);
        gbc.writeMem(0xc809, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5ef3);
        EXPECT(gbc.pc(), 0xc80b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc809), 0xcb);
        EXPECT(gbc.readMem(0xc80a), 0xad);
        // CB AD 00FC
        gbc.setState(0x7cff, 0x702e, 0x2740, 0x4cf7, 0x5aaf, 0x86be, 0x0, 0x1);
        gbc.writeMem(0x7cff, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x702e);
        EXPECT(gbc.pc(), 0x7d01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00FD
        gbc.setState(0xdfb6, 0x88e0, 0xb710, 0xc5bc, 0x2454, 0xa13f, 0x0, 0x0);
        gbc.writeMem(0xdfb6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x88e0);
        EXPECT(gbc.pc(), 0xdfb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfb6), 0xcb);
        EXPECT(gbc.readMem(0xdfb7), 0xad);
        // CB AD 00FE
        gbc.setState(0x4144, 0x46e8, 0xbd60, 0x79fc, 0x96aa, 0x10d6, 0x0, 0x1);
        gbc.writeMem(0x4144, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x46e8);
        EXPECT(gbc.pc(), 0x4146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 00FF
        gbc.setState(0xd42, 0x65aa, 0x57d0, 0x1b3c, 0x1b5b, 0x1180, 0x0, 0x0);
        gbc.writeMem(0xd42, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x65aa);
        EXPECT(gbc.pc(), 0xd44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0100
        gbc.setState(0x856b, 0xe9c2, 0x25f0, 0xb5c3, 0x3777, 0xf8cb, 0x0, 0x1);
        gbc.writeMem(0x856b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe9c2);
        EXPECT(gbc.pc(), 0x856d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856b), 0xcb);
        EXPECT(gbc.readMem(0x856c), 0xad);
        // CB AD 0101
        gbc.setState(0xa498, 0xaee5, 0x4d40, 0xba4e, 0xc0a1, 0x432d, 0x1, 0x1);
        gbc.writeMem(0xa498, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xaee5);
        EXPECT(gbc.pc(), 0xa49a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa498), 0xcb);
        EXPECT(gbc.readMem(0xa499), 0xad);
        // CB AD 0102
        gbc.setState(0x62ec, 0x430b, 0x3040, 0xd1ef, 0x1706, 0xe10c, 0x1, 0x1);
        gbc.writeMem(0x62ec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x430b);
        EXPECT(gbc.pc(), 0x62ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0103
        gbc.setState(0x88a4, 0xab07, 0xdcb0, 0x20c4, 0xb567, 0x2097, 0x0, 0x0);
        gbc.writeMem(0x88a4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xab07);
        EXPECT(gbc.pc(), 0x88a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a4), 0xcb);
        EXPECT(gbc.readMem(0x88a5), 0xad);
        // CB AD 0104
        gbc.setState(0x3d5d, 0x29a5, 0x12c0, 0x8a03, 0x86f, 0x22bc, 0x0, 0x0);
        gbc.writeMem(0x3d5d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x29a5);
        EXPECT(gbc.pc(), 0x3d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0105
        gbc.setState(0xccc4, 0x84d8, 0x5df0, 0x1a9c, 0x1ae7, 0x40e9, 0x0, 0x0);
        gbc.writeMem(0xccc4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x84d8);
        EXPECT(gbc.pc(), 0xccc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc4), 0xcb);
        EXPECT(gbc.readMem(0xccc5), 0xad);
        // CB AD 0106
        gbc.setState(0x8b59, 0xc6b0, 0xd1c0, 0x6450, 0x7636, 0x22ec, 0x0, 0x1);
        gbc.writeMem(0x8b59, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc6b0);
        EXPECT(gbc.pc(), 0x8b5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b59), 0xcb);
        EXPECT(gbc.readMem(0x8b5a), 0xad);
        // CB AD 0107
        gbc.setState(0xc2f6, 0x3818, 0x68a0, 0xa90, 0x20cd, 0x3bd5, 0x1, 0x1);
        gbc.writeMem(0xc2f6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3818);
        EXPECT(gbc.pc(), 0xc2f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f6), 0xcb);
        EXPECT(gbc.readMem(0xc2f7), 0xad);
        // CB AD 0108
        gbc.setState(0x4d57, 0x4852, 0x4ec0, 0xb505, 0x75a5, 0xaaae, 0x1, 0x0);
        gbc.writeMem(0x4d57, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4852);
        EXPECT(gbc.pc(), 0x4d59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0109
        gbc.setState(0x4b99, 0x3d83, 0x2320, 0x93af, 0xa0c4, 0xbe95, 0x0, 0x1);
        gbc.writeMem(0x4b99, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3d83);
        EXPECT(gbc.pc(), 0x4b9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 010A
        gbc.setState(0x5d09, 0xb2c3, 0x9b90, 0xc14e, 0x3c25, 0x5e5, 0x0, 0x0);
        gbc.writeMem(0x5d09, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb2c3);
        EXPECT(gbc.pc(), 0x5d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 010B
        gbc.setState(0x5e81, 0x3167, 0x50e0, 0xd92c, 0x245d, 0x67fb, 0x1, 0x1);
        gbc.writeMem(0x5e81, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3167);
        EXPECT(gbc.pc(), 0x5e83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 010C
        gbc.setState(0x8f8d, 0x9036, 0x44f0, 0xa282, 0x78b1, 0xe97f, 0x0, 0x0);
        gbc.writeMem(0x8f8d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9036);
        EXPECT(gbc.pc(), 0x8f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f8d), 0xcb);
        EXPECT(gbc.readMem(0x8f8e), 0xad);
        // CB AD 010D
        gbc.setState(0x6f0e, 0xc703, 0x2610, 0x4955, 0xe07, 0x7642, 0x0, 0x1);
        gbc.writeMem(0x6f0e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc703);
        EXPECT(gbc.pc(), 0x6f10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 010E
        gbc.setState(0x358a, 0x2e80, 0x1f0, 0xd244, 0x5cce, 0xcc16, 0x1, 0x0);
        gbc.writeMem(0x358a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2e80);
        EXPECT(gbc.pc(), 0x358c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 010F
        gbc.setState(0xc5ac, 0xe5d, 0x7310, 0xfaad, 0xf555, 0xc1a1, 0x1, 0x0);
        gbc.writeMem(0xc5ac, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe5d);
        EXPECT(gbc.pc(), 0xc5ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ac), 0xcb);
        EXPECT(gbc.readMem(0xc5ad), 0xad);
        // CB AD 0110
        gbc.setState(0x575a, 0xdd28, 0x1100, 0xe5c2, 0x6733, 0x1908, 0x1, 0x1);
        gbc.writeMem(0x575a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xdd28);
        EXPECT(gbc.pc(), 0x575c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0111
        gbc.setState(0x4d7e, 0xa6df, 0x7250, 0x5609, 0xa113, 0xe266, 0x0, 0x1);
        gbc.writeMem(0x4d7e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa6df);
        EXPECT(gbc.pc(), 0x4d80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0112
        gbc.setState(0x2e04, 0x21d2, 0x9140, 0x1d1c, 0x9ac0, 0x1985, 0x0, 0x1);
        gbc.writeMem(0x2e04, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x21d2);
        EXPECT(gbc.pc(), 0x2e06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0113
        gbc.setState(0x905c, 0x9010, 0xc680, 0x4474, 0x74c2, 0xb177, 0x0, 0x1);
        gbc.writeMem(0x905c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9010);
        EXPECT(gbc.pc(), 0x905e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x905c), 0xcb);
        EXPECT(gbc.readMem(0x905d), 0xad);
        // CB AD 0114
        gbc.setState(0x6df0, 0x57e9, 0x8210, 0x51be, 0x38ab, 0xf0f4, 0x0, 0x1);
        gbc.writeMem(0x6df0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x57e9);
        EXPECT(gbc.pc(), 0x6df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0115
        gbc.setState(0x67f9, 0x89d7, 0xd3a0, 0x1b2, 0x34e7, 0x8921, 0x0, 0x1);
        gbc.writeMem(0x67f9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x89d7);
        EXPECT(gbc.pc(), 0x67fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0116
        gbc.setState(0xcba3, 0x195a, 0x82c0, 0x4809, 0xd991, 0x6c59, 0x1, 0x1);
        gbc.writeMem(0xcba3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x195a);
        EXPECT(gbc.pc(), 0xcba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba3), 0xcb);
        EXPECT(gbc.readMem(0xcba4), 0xad);
        // CB AD 0117
        gbc.setState(0x7422, 0xb032, 0xe4f0, 0x5ed6, 0x70ef, 0xe9c5, 0x0, 0x1);
        gbc.writeMem(0x7422, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb032);
        EXPECT(gbc.pc(), 0x7424);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0118
        gbc.setState(0xee33, 0x638c, 0xa400, 0xdd62, 0xcc97, 0x6ff8, 0x1, 0x0);
        gbc.writeMem(0xee33, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x638c);
        EXPECT(gbc.pc(), 0xee35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee33), 0xcb);
        EXPECT(gbc.readMem(0xee34), 0xad);
        // CB AD 0119
        gbc.setState(0x4650, 0xe415, 0x9b00, 0xbd04, 0x81, 0x9f57, 0x1, 0x0);
        gbc.writeMem(0x4650, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe415);
        EXPECT(gbc.pc(), 0x4652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 011B
        gbc.setState(0x3dc5, 0x5ce8, 0xebc0, 0xaca8, 0x5b77, 0xdc3c, 0x0, 0x0);
        gbc.writeMem(0x3dc5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5ce8);
        EXPECT(gbc.pc(), 0x3dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 011C
        gbc.setState(0xbb6e, 0x4afd, 0x8fe0, 0x499c, 0x2d6, 0xeb0d, 0x0, 0x1);
        gbc.writeMem(0xbb6e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4afd);
        EXPECT(gbc.pc(), 0xbb70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6e), 0xcb);
        EXPECT(gbc.readMem(0xbb6f), 0xad);
        // CB AD 011D
        gbc.setState(0x2f5c, 0x80c7, 0x6fd0, 0x7ef7, 0xb4ee, 0x5f22, 0x0, 0x1);
        gbc.writeMem(0x2f5c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x80c7);
        EXPECT(gbc.pc(), 0x2f5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 011E
        gbc.setState(0xe92e, 0xbf8f, 0xaff0, 0x1c30, 0x5736, 0xe829, 0x0, 0x0);
        gbc.writeMem(0xe92e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbf8f);
        EXPECT(gbc.pc(), 0xe930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe92e), 0xcb);
        EXPECT(gbc.readMem(0xe92f), 0xad);
        // CB AD 011F
        gbc.setState(0x7cb1, 0x6305, 0xed40, 0x68d1, 0xac64, 0x487d, 0x1, 0x0);
        gbc.writeMem(0x7cb1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6305);
        EXPECT(gbc.pc(), 0x7cb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0120
        gbc.setState(0x7d9f, 0x49a5, 0x6560, 0x371a, 0x35e7, 0xf5a1, 0x1, 0x1);
        gbc.writeMem(0x7d9f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x49a5);
        EXPECT(gbc.pc(), 0x7da1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0121
        gbc.setState(0x7ee2, 0x721, 0xbbd0, 0xe410, 0xd533, 0xde8e, 0x1, 0x0);
        gbc.writeMem(0x7ee2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x721);
        EXPECT(gbc.pc(), 0x7ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0122
        gbc.setState(0x9843, 0xcd39, 0x56c0, 0x6467, 0xe635, 0xdbd1, 0x0, 0x0);
        gbc.writeMem(0x9843, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xcd39);
        EXPECT(gbc.pc(), 0x9845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9843), 0xcb);
        EXPECT(gbc.readMem(0x9844), 0xad);
        // CB AD 0123
        gbc.setState(0x884d, 0xf914, 0xd550, 0x3960, 0xcf99, 0x5b4b, 0x1, 0x1);
        gbc.writeMem(0x884d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf914);
        EXPECT(gbc.pc(), 0x884f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884d), 0xcb);
        EXPECT(gbc.readMem(0x884e), 0xad);
        // CB AD 0124
        gbc.setState(0xd445, 0x8138, 0x2d0, 0x311a, 0x7802, 0x1aa2, 0x0, 0x1);
        gbc.writeMem(0xd445, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8138);
        EXPECT(gbc.pc(), 0xd447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd445), 0xcb);
        EXPECT(gbc.readMem(0xd446), 0xad);
        // CB AD 0125
        gbc.setState(0x74cf, 0xf0a6, 0x6d80, 0xa5d4, 0xade8, 0x90bb, 0x1, 0x0);
        gbc.writeMem(0x74cf, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf0a6);
        EXPECT(gbc.pc(), 0x74d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0126
        gbc.setState(0x972c, 0xafaf, 0x5e10, 0x9646, 0xebe4, 0x2fed, 0x1, 0x1);
        gbc.writeMem(0x972c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xafaf);
        EXPECT(gbc.pc(), 0x972e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x972c), 0xcb);
        EXPECT(gbc.readMem(0x972d), 0xad);
        // CB AD 0127
        gbc.setState(0x3ca2, 0xdba, 0x47b0, 0x5fee, 0x2c25, 0x58e9, 0x1, 0x1);
        gbc.writeMem(0x3ca2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdba);
        EXPECT(gbc.pc(), 0x3ca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0128
        gbc.setState(0x410c, 0x2b33, 0xd6f0, 0x3901, 0x8536, 0x8a91, 0x0, 0x0);
        gbc.writeMem(0x410c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2b33);
        EXPECT(gbc.pc(), 0x410e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0129
        gbc.setState(0xb27e, 0x473f, 0x6bd0, 0x969e, 0xa8b0, 0xe8fb, 0x1, 0x0);
        gbc.writeMem(0xb27e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x473f);
        EXPECT(gbc.pc(), 0xb280);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb27e), 0xcb);
        EXPECT(gbc.readMem(0xb27f), 0xad);
        // CB AD 012B
        gbc.setState(0xa830, 0x3f98, 0xc4c0, 0x6490, 0x4425, 0x2e53, 0x1, 0x1);
        gbc.writeMem(0xa830, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3f98);
        EXPECT(gbc.pc(), 0xa832);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa830), 0xcb);
        EXPECT(gbc.readMem(0xa831), 0xad);
        // CB AD 012C
        gbc.setState(0xa3cb, 0xa8be, 0x2b0, 0x525f, 0x6c78, 0x9e48, 0x1, 0x1);
        gbc.writeMem(0xa3cb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa8be);
        EXPECT(gbc.pc(), 0xa3cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3cb), 0xcb);
        EXPECT(gbc.readMem(0xa3cc), 0xad);
        // CB AD 012D
        gbc.setState(0x7597, 0xd017, 0x3e20, 0xbb9, 0x9e63, 0x7a7e, 0x0, 0x0);
        gbc.writeMem(0x7597, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd017);
        EXPECT(gbc.pc(), 0x7599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 012F
        gbc.setState(0x310c, 0xa89d, 0x11b0, 0x3b87, 0xf88e, 0x9f, 0x1, 0x1);
        gbc.writeMem(0x310c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa89d);
        EXPECT(gbc.pc(), 0x310e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0130
        gbc.setState(0x364e, 0x3179, 0x9c30, 0x1064, 0xb1c9, 0x3b79, 0x1, 0x0);
        gbc.writeMem(0x364e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3179);
        EXPECT(gbc.pc(), 0x3650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0131
        gbc.setState(0x753f, 0xaf71, 0x2220, 0x2be8, 0x85eb, 0xefa7, 0x1, 0x1);
        gbc.writeMem(0x753f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xaf71);
        EXPECT(gbc.pc(), 0x7541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0132
        gbc.setState(0x9d70, 0x19ba, 0x8f90, 0x5da3, 0x6606, 0x7002, 0x0, 0x1);
        gbc.writeMem(0x9d70, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x19ba);
        EXPECT(gbc.pc(), 0x9d72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d70), 0xcb);
        EXPECT(gbc.readMem(0x9d71), 0xad);
        // CB AD 0133
        gbc.setState(0xdb4e, 0xab24, 0x10a0, 0xf533, 0xd3d1, 0x38c, 0x0, 0x1);
        gbc.writeMem(0xdb4e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xab24);
        EXPECT(gbc.pc(), 0xdb50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb4e), 0xcb);
        EXPECT(gbc.readMem(0xdb4f), 0xad);
        // CB AD 0134
        gbc.setState(0x7968, 0x402, 0x5240, 0x29db, 0xe7fe, 0xa013, 0x0, 0x1);
        gbc.writeMem(0x7968, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x402);
        EXPECT(gbc.pc(), 0x796a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0135
        gbc.setState(0xe076, 0xadb3, 0x5b50, 0x90e8, 0x9996, 0xca9, 0x0, 0x0);
        gbc.writeMem(0xe076, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xadb3);
        EXPECT(gbc.pc(), 0xe078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe076), 0xcb);
        EXPECT(gbc.readMem(0xe077), 0xad);
        // CB AD 0136
        gbc.setState(0x95b3, 0xb9a5, 0x4500, 0x6af1, 0x4d34, 0x9a15, 0x0, 0x1);
        gbc.writeMem(0x95b3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb9a5);
        EXPECT(gbc.pc(), 0x95b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b3), 0xcb);
        EXPECT(gbc.readMem(0x95b4), 0xad);
        // CB AD 0137
        gbc.setState(0x9d80, 0x3ed9, 0xf2a0, 0xa219, 0x6fbb, 0xc4e2, 0x0, 0x0);
        gbc.writeMem(0x9d80, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3ed9);
        EXPECT(gbc.pc(), 0x9d82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d80), 0xcb);
        EXPECT(gbc.readMem(0x9d81), 0xad);
        // CB AD 0138
        gbc.setState(0x6487, 0x2a12, 0x2880, 0x8c25, 0x4452, 0x6147, 0x0, 0x0);
        gbc.writeMem(0x6487, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2a12);
        EXPECT(gbc.pc(), 0x6489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 013A
        gbc.setState(0x69de, 0x6e80, 0xdc40, 0x3577, 0xec53, 0x1e3c, 0x1, 0x0);
        gbc.writeMem(0x69de, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6e80);
        EXPECT(gbc.pc(), 0x69e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 013B
        gbc.setState(0xca0e, 0x5e08, 0xc510, 0xcfd5, 0xcbae, 0x10db, 0x0, 0x1);
        gbc.writeMem(0xca0e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5e08);
        EXPECT(gbc.pc(), 0xca10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca0e), 0xcb);
        EXPECT(gbc.readMem(0xca0f), 0xad);
        // CB AD 013C
        gbc.setState(0x9eb8, 0x67c0, 0x34a0, 0xd590, 0xdd76, 0x7c45, 0x0, 0x0);
        gbc.writeMem(0x9eb8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x67c0);
        EXPECT(gbc.pc(), 0x9eba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb8), 0xcb);
        EXPECT(gbc.readMem(0x9eb9), 0xad);
        // CB AD 013D
        gbc.setState(0xa6a2, 0xdd2c, 0xb620, 0xda9a, 0x41f5, 0xdd53, 0x1, 0x1);
        gbc.writeMem(0xa6a2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdd2c);
        EXPECT(gbc.pc(), 0xa6a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a2), 0xcb);
        EXPECT(gbc.readMem(0xa6a3), 0xad);
        // CB AD 013E
        gbc.setState(0xc29, 0xa759, 0x3170, 0x8927, 0xb4aa, 0x6479, 0x1, 0x1);
        gbc.writeMem(0xc29, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa759);
        EXPECT(gbc.pc(), 0xc2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 013F
        gbc.setState(0x7d21, 0x8bbd, 0x1b70, 0xffc8, 0x4cbb, 0xe42e, 0x1, 0x1);
        gbc.writeMem(0x7d21, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8bbd);
        EXPECT(gbc.pc(), 0x7d23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0140
        gbc.setState(0x60d5, 0xc9cf, 0x8680, 0xf9b5, 0x9ce7, 0x53b4, 0x1, 0x1);
        gbc.writeMem(0x60d5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc9cf);
        EXPECT(gbc.pc(), 0x60d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0141
        gbc.setState(0xa4d9, 0x759a, 0xafd0, 0x8c8, 0x5056, 0xb0c1, 0x1, 0x1);
        gbc.writeMem(0xa4d9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x759a);
        EXPECT(gbc.pc(), 0xa4db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4d9), 0xcb);
        EXPECT(gbc.readMem(0xa4da), 0xad);
        // CB AD 0142
        gbc.setState(0x1037, 0xe442, 0x8fd0, 0x21e4, 0xb836, 0xdee3, 0x1, 0x1);
        gbc.writeMem(0x1037, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe442);
        EXPECT(gbc.pc(), 0x1039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0143
        gbc.setState(0xe576, 0xcec4, 0x1f0, 0xe029, 0x48bb, 0xdb87, 0x1, 0x0);
        gbc.writeMem(0xe576, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xcec4);
        EXPECT(gbc.pc(), 0xe578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe576), 0xcb);
        EXPECT(gbc.readMem(0xe577), 0xad);
        // CB AD 0144
        gbc.setState(0x99be, 0x9de4, 0xe3e0, 0xaf4c, 0x8b90, 0xc417, 0x0, 0x1);
        gbc.writeMem(0x99be, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9de4);
        EXPECT(gbc.pc(), 0x99c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99be), 0xcb);
        EXPECT(gbc.readMem(0x99bf), 0xad);
        // CB AD 0145
        gbc.setState(0xcb4f, 0xa76e, 0xf8d0, 0x8f3f, 0xd6dc, 0xd3ed, 0x0, 0x1);
        gbc.writeMem(0xcb4f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa76e);
        EXPECT(gbc.pc(), 0xcb51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb4f), 0xcb);
        EXPECT(gbc.readMem(0xcb50), 0xad);
        // CB AD 0146
        gbc.setState(0x9721, 0xe76d, 0x5c30, 0xe51c, 0xae73, 0xb0c, 0x0, 0x1);
        gbc.writeMem(0x9721, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe76d);
        EXPECT(gbc.pc(), 0x9723);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9721), 0xcb);
        EXPECT(gbc.readMem(0x9722), 0xad);
        // CB AD 0147
        gbc.setState(0xd525, 0x9925, 0x2380, 0x2010, 0xfd7, 0x68ce, 0x0, 0x1);
        gbc.writeMem(0xd525, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9925);
        EXPECT(gbc.pc(), 0xd527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd525), 0xcb);
        EXPECT(gbc.readMem(0xd526), 0xad);
        // CB AD 0148
        gbc.setState(0x9847, 0x4aea, 0xc30, 0x42b4, 0x1dc1, 0x2092, 0x1, 0x1);
        gbc.writeMem(0x9847, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4aea);
        EXPECT(gbc.pc(), 0x9849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9847), 0xcb);
        EXPECT(gbc.readMem(0x9848), 0xad);
        // CB AD 0149
        gbc.setState(0x1615, 0x6fc7, 0x19a0, 0xdbce, 0x48f5, 0xac7d, 0x0, 0x0);
        gbc.writeMem(0x1615, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6fc7);
        EXPECT(gbc.pc(), 0x1617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 014A
        gbc.setState(0xded6, 0x628b, 0x840, 0x611e, 0x91d8, 0x3b5, 0x1, 0x0);
        gbc.writeMem(0xded6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x628b);
        EXPECT(gbc.pc(), 0xded8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded6), 0xcb);
        EXPECT(gbc.readMem(0xded7), 0xad);
        // CB AD 014B
        gbc.setState(0x90be, 0x3572, 0x1c50, 0x6c3c, 0x5954, 0x2b6e, 0x0, 0x1);
        gbc.writeMem(0x90be, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3572);
        EXPECT(gbc.pc(), 0x90c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90be), 0xcb);
        EXPECT(gbc.readMem(0x90bf), 0xad);
        // CB AD 014C
        gbc.setState(0xb274, 0x253f, 0x37f0, 0xf940, 0x513c, 0xb318, 0x0, 0x0);
        gbc.writeMem(0xb274, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x253f);
        EXPECT(gbc.pc(), 0xb276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb274), 0xcb);
        EXPECT(gbc.readMem(0xb275), 0xad);
        // CB AD 014D
        gbc.setState(0xe0d3, 0xf483, 0x4fa0, 0xf908, 0xf394, 0x1795, 0x1, 0x0);
        gbc.writeMem(0xe0d3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf483);
        EXPECT(gbc.pc(), 0xe0d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d3), 0xcb);
        EXPECT(gbc.readMem(0xe0d4), 0xad);
        // CB AD 014E
        gbc.setState(0x33b1, 0x3b78, 0x4690, 0x6fb3, 0x1d6e, 0xba43, 0x1, 0x0);
        gbc.writeMem(0x33b1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3b78);
        EXPECT(gbc.pc(), 0x33b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 014F
        gbc.setState(0x2118, 0xb174, 0xae10, 0xf54f, 0xcf13, 0x116b, 0x0, 0x1);
        gbc.writeMem(0x2118, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb174);
        EXPECT(gbc.pc(), 0x211a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0150
        gbc.setState(0xb615, 0xc859, 0xe1c0, 0x22c3, 0x1816, 0xa9a5, 0x0, 0x1);
        gbc.writeMem(0xb615, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc859);
        EXPECT(gbc.pc(), 0xb617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb615), 0xcb);
        EXPECT(gbc.readMem(0xb616), 0xad);
        // CB AD 0151
        gbc.setState(0x106f, 0x32dd, 0x3df0, 0x4218, 0x790d, 0x2e5e, 0x0, 0x1);
        gbc.writeMem(0x106f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x32dd);
        EXPECT(gbc.pc(), 0x1071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0153
        gbc.setState(0xbef2, 0x5d3d, 0x27f0, 0x473b, 0x8cfe, 0xbd70, 0x0, 0x0);
        gbc.writeMem(0xbef2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5d3d);
        EXPECT(gbc.pc(), 0xbef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef2), 0xcb);
        EXPECT(gbc.readMem(0xbef3), 0xad);
        // CB AD 0154
        gbc.setState(0x914f, 0x6407, 0x4ad0, 0x8c17, 0x6a29, 0x45d9, 0x0, 0x0);
        gbc.writeMem(0x914f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6407);
        EXPECT(gbc.pc(), 0x9151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x914f), 0xcb);
        EXPECT(gbc.readMem(0x9150), 0xad);
        // CB AD 0156
        gbc.setState(0x2fe0, 0x1550, 0xd150, 0xd702, 0x161, 0xc092, 0x1, 0x1);
        gbc.writeMem(0x2fe0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1550);
        EXPECT(gbc.pc(), 0x2fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0157
        gbc.setState(0xbd0d, 0xc737, 0xb3d0, 0xd46, 0x51b0, 0x9a19, 0x1, 0x1);
        gbc.writeMem(0xbd0d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc737);
        EXPECT(gbc.pc(), 0xbd0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd0d), 0xcb);
        EXPECT(gbc.readMem(0xbd0e), 0xad);
        // CB AD 0159
        gbc.setState(0x8279, 0xbdb3, 0x76d0, 0xd574, 0x52a, 0x910c, 0x1, 0x1);
        gbc.writeMem(0x8279, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbdb3);
        EXPECT(gbc.pc(), 0x827b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8279), 0xcb);
        EXPECT(gbc.readMem(0x827a), 0xad);
        // CB AD 015A
        gbc.setState(0x53d4, 0x420f, 0x2440, 0x44c3, 0xf53e, 0x10ab, 0x1, 0x0);
        gbc.writeMem(0x53d4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x420f);
        EXPECT(gbc.pc(), 0x53d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 015B
        gbc.setState(0xa1a2, 0x5dc8, 0x9b70, 0xa5a1, 0x1c51, 0x7b6a, 0x1, 0x1);
        gbc.writeMem(0xa1a2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5dc8);
        EXPECT(gbc.pc(), 0xa1a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a2), 0xcb);
        EXPECT(gbc.readMem(0xa1a3), 0xad);
        // CB AD 015C
        gbc.setState(0x27aa, 0x209f, 0x170, 0x672a, 0x3b85, 0x2e0e, 0x0, 0x1);
        gbc.writeMem(0x27aa, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x209f);
        EXPECT(gbc.pc(), 0x27ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 015D
        gbc.setState(0x144, 0x145, 0xecc0, 0xfb0, 0xb17b, 0xcf6a, 0x1, 0x1);
        gbc.writeMem(0x144, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x145);
        EXPECT(gbc.pc(), 0x146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 015E
        gbc.setState(0xd9a6, 0x7c74, 0xf6d0, 0x5272, 0xb5b2, 0x2c1, 0x0, 0x0);
        gbc.writeMem(0xd9a6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7c74);
        EXPECT(gbc.pc(), 0xd9a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9a6), 0xcb);
        EXPECT(gbc.readMem(0xd9a7), 0xad);
        // CB AD 015F
        gbc.setState(0xd81f, 0x6a29, 0xb7c0, 0x80be, 0xa92c, 0x1a5d, 0x0, 0x1);
        gbc.writeMem(0xd81f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6a29);
        EXPECT(gbc.pc(), 0xd821);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81f), 0xcb);
        EXPECT(gbc.readMem(0xd820), 0xad);
        // CB AD 0160
        gbc.setState(0x285c, 0xbf2, 0xe9b0, 0xc124, 0x6369, 0xa881, 0x1, 0x0);
        gbc.writeMem(0x285c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbf2);
        EXPECT(gbc.pc(), 0x285e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0161
        gbc.setState(0x98e0, 0x2b75, 0x25c0, 0x65a5, 0x78e3, 0xabed, 0x0, 0x0);
        gbc.writeMem(0x98e0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2b75);
        EXPECT(gbc.pc(), 0x98e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e0), 0xcb);
        EXPECT(gbc.readMem(0x98e1), 0xad);
        // CB AD 0162
        gbc.setState(0xa261, 0x5b0c, 0x5740, 0xd7e3, 0x9fb0, 0x91ed, 0x1, 0x1);
        gbc.writeMem(0xa261, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5b0c);
        EXPECT(gbc.pc(), 0xa263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa261), 0xcb);
        EXPECT(gbc.readMem(0xa262), 0xad);
        // CB AD 0163
        gbc.setState(0x6e34, 0xbdcb, 0x1460, 0xe006, 0x446e, 0x9cb1, 0x1, 0x1);
        gbc.writeMem(0x6e34, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbdcb);
        EXPECT(gbc.pc(), 0x6e36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0164
        gbc.setState(0x4cb6, 0x7a71, 0xdbd0, 0xb94e, 0xf26c, 0x87e8, 0x0, 0x1);
        gbc.writeMem(0x4cb6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7a71);
        EXPECT(gbc.pc(), 0x4cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0165
        gbc.setState(0x797e, 0xbba7, 0x6360, 0xee9c, 0x58f9, 0x5e30, 0x1, 0x0);
        gbc.writeMem(0x797e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbba7);
        EXPECT(gbc.pc(), 0x7980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0166
        gbc.setState(0xbadb, 0xeb5d, 0xda00, 0x699c, 0xc77b, 0xab0, 0x1, 0x0);
        gbc.writeMem(0xbadb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xeb5d);
        EXPECT(gbc.pc(), 0xbadd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbadb), 0xcb);
        EXPECT(gbc.readMem(0xbadc), 0xad);
        // CB AD 0167
        gbc.setState(0xc6, 0xb407, 0x17e0, 0x28da, 0x46db, 0x571, 0x1, 0x0);
        gbc.writeMem(0xc6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb407);
        EXPECT(gbc.pc(), 0xc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0168
        gbc.setState(0xc6a4, 0xac60, 0x9eb0, 0x170c, 0x918e, 0x76f1, 0x0, 0x0);
        gbc.writeMem(0xc6a4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xac60);
        EXPECT(gbc.pc(), 0xc6a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6a4), 0xcb);
        EXPECT(gbc.readMem(0xc6a5), 0xad);
        // CB AD 0169
        gbc.setState(0x705c, 0x7334, 0x7a90, 0xbfbc, 0xea9f, 0xe7ad, 0x1, 0x1);
        gbc.writeMem(0x705c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7334);
        EXPECT(gbc.pc(), 0x705e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 016A
        gbc.setState(0x53ed, 0x6741, 0xbb20, 0x52e5, 0x6d6b, 0x1cb0, 0x0, 0x0);
        gbc.writeMem(0x53ed, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6741);
        EXPECT(gbc.pc(), 0x53ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 016B
        gbc.setState(0xfed, 0x6ef, 0x2810, 0x65fd, 0x4ea1, 0x94e2, 0x0, 0x1);
        gbc.writeMem(0xfed, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6ef);
        EXPECT(gbc.pc(), 0xfef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 016C
        gbc.setState(0x15ea, 0x7614, 0xde60, 0xb7c3, 0x78b, 0x9357, 0x1, 0x1);
        gbc.writeMem(0x15ea, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7614);
        EXPECT(gbc.pc(), 0x15ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 016D
        gbc.setState(0x79e0, 0x174d, 0x6c90, 0xeb24, 0x75cd, 0x5616, 0x1, 0x0);
        gbc.writeMem(0x79e0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x174d);
        EXPECT(gbc.pc(), 0x79e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 016E
        gbc.setState(0x501f, 0x269e, 0x93c0, 0x2b21, 0x5a31, 0x752e, 0x1, 0x1);
        gbc.writeMem(0x501f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x269e);
        EXPECT(gbc.pc(), 0x5021);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 016F
        gbc.setState(0x82ca, 0x9bc7, 0xde70, 0xf7ee, 0x49d0, 0x2a5c, 0x1, 0x0);
        gbc.writeMem(0x82ca, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9bc7);
        EXPECT(gbc.pc(), 0x82cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ca), 0xcb);
        EXPECT(gbc.readMem(0x82cb), 0xad);
        // CB AD 0170
        gbc.setState(0x5f78, 0xf24d, 0xac50, 0xc1a, 0x7a35, 0xa11e, 0x1, 0x0);
        gbc.writeMem(0x5f78, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf24d);
        EXPECT(gbc.pc(), 0x5f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0171
        gbc.setState(0x7601, 0xa1f7, 0x96c0, 0x5136, 0x193a, 0xa8bf, 0x1, 0x1);
        gbc.writeMem(0x7601, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa1f7);
        EXPECT(gbc.pc(), 0x7603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0172
        gbc.setState(0x2ff3, 0xed75, 0x28c0, 0x7b2, 0xd4cd, 0x1caa, 0x1, 0x0);
        gbc.writeMem(0x2ff3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xed75);
        EXPECT(gbc.pc(), 0x2ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0173
        gbc.setState(0xad31, 0xf8fb, 0x9d30, 0xe4cd, 0x1207, 0x75dd, 0x0, 0x1);
        gbc.writeMem(0xad31, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf8fb);
        EXPECT(gbc.pc(), 0xad33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad31), 0xcb);
        EXPECT(gbc.readMem(0xad32), 0xad);
        // CB AD 0174
        gbc.setState(0xeb6a, 0xedd8, 0x5060, 0xca8f, 0x4a64, 0xa6c7, 0x1, 0x0);
        gbc.writeMem(0xeb6a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xedd8);
        EXPECT(gbc.pc(), 0xeb6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb6a), 0xcb);
        EXPECT(gbc.readMem(0xeb6b), 0xad);
        // CB AD 0175
        gbc.setState(0xff5, 0x5bfc, 0xecc0, 0x5e8, 0x73ec, 0x879a, 0x1, 0x0);
        gbc.writeMem(0xff5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5bfc);
        EXPECT(gbc.pc(), 0xff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0176
        gbc.setState(0x19a, 0x5887, 0xf920, 0x1d9a, 0x91e0, 0x34c9, 0x1, 0x1);
        gbc.writeMem(0x19a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5887);
        EXPECT(gbc.pc(), 0x19c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0177
        gbc.setState(0x41fe, 0x7356, 0xf910, 0x58a4, 0xf37d, 0xc5af, 0x0, 0x1);
        gbc.writeMem(0x41fe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7356);
        EXPECT(gbc.pc(), 0x4200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0178
        gbc.setState(0x8dab, 0x5f1b, 0x2790, 0x484c, 0xc18d, 0x6f5d, 0x0, 0x0);
        gbc.writeMem(0x8dab, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5f1b);
        EXPECT(gbc.pc(), 0x8dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dab), 0xcb);
        EXPECT(gbc.readMem(0x8dac), 0xad);
        // CB AD 0179
        gbc.setState(0x2957, 0x21e7, 0xec80, 0x1460, 0x3ae2, 0x3e37, 0x1, 0x0);
        gbc.writeMem(0x2957, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x21e7);
        EXPECT(gbc.pc(), 0x2959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 017A
        gbc.setState(0x9cba, 0x97de, 0x5bc0, 0x2d99, 0xc4d5, 0x299, 0x0, 0x1);
        gbc.writeMem(0x9cba, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x97de);
        EXPECT(gbc.pc(), 0x9cbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cba), 0xcb);
        EXPECT(gbc.readMem(0x9cbb), 0xad);
        // CB AD 017B
        gbc.setState(0x2216, 0x95dd, 0x8c10, 0x7d3b, 0xb9a, 0x63c9, 0x1, 0x1);
        gbc.writeMem(0x2216, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x95dd);
        EXPECT(gbc.pc(), 0x2218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 017C
        gbc.setState(0x5dbe, 0x7660, 0x7830, 0xa301, 0x8d1e, 0x1402, 0x1, 0x0);
        gbc.writeMem(0x5dbe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7660);
        EXPECT(gbc.pc(), 0x5dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 017D
        gbc.setState(0x364e, 0x4ea9, 0xe9e0, 0x566c, 0xf028, 0x5d43, 0x0, 0x1);
        gbc.writeMem(0x364e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4ea9);
        EXPECT(gbc.pc(), 0x3650);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 017E
        gbc.setState(0x4e25, 0x9529, 0xc010, 0xb7c9, 0xccee, 0x3469, 0x0, 0x1);
        gbc.writeMem(0x4e25, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9529);
        EXPECT(gbc.pc(), 0x4e27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 017F
        gbc.setState(0x8924, 0xbb3b, 0x6350, 0xfd4e, 0x6f06, 0xa45a, 0x1, 0x0);
        gbc.writeMem(0x8924, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbb3b);
        EXPECT(gbc.pc(), 0x8926);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8924), 0xcb);
        EXPECT(gbc.readMem(0x8925), 0xad);
        // CB AD 0180
        gbc.setState(0x8d55, 0xbb6b, 0x7340, 0x4b59, 0x1085, 0x607a, 0x1, 0x0);
        gbc.writeMem(0x8d55, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbb6b);
        EXPECT(gbc.pc(), 0x8d57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d55), 0xcb);
        EXPECT(gbc.readMem(0x8d56), 0xad);
        // CB AD 0181
        gbc.setState(0x9f61, 0x655d, 0xf1d0, 0xbef2, 0x8e58, 0xcc37, 0x0, 0x1);
        gbc.writeMem(0x9f61, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x655d);
        EXPECT(gbc.pc(), 0x9f63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f61), 0xcb);
        EXPECT(gbc.readMem(0x9f62), 0xad);
        // CB AD 0182
        gbc.setState(0x4206, 0x7877, 0x6870, 0x326c, 0xfd66, 0xe62, 0x1, 0x0);
        gbc.writeMem(0x4206, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7877);
        EXPECT(gbc.pc(), 0x4208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0183
        gbc.setState(0x1add, 0xe4ad, 0x3e60, 0x9f46, 0x4621, 0xf88a, 0x0, 0x0);
        gbc.writeMem(0x1add, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe4ad);
        EXPECT(gbc.pc(), 0x1adf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0184
        gbc.setState(0xe9f7, 0x955, 0x4830, 0xb063, 0xccf3, 0xd3e3, 0x0, 0x1);
        gbc.writeMem(0xe9f7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x955);
        EXPECT(gbc.pc(), 0xe9f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f7), 0xcb);
        EXPECT(gbc.readMem(0xe9f8), 0xad);
        // CB AD 0185
        gbc.setState(0x15e3, 0x1c56, 0xaa30, 0x3213, 0xf370, 0xe39c, 0x0, 0x0);
        gbc.writeMem(0x15e3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1c56);
        EXPECT(gbc.pc(), 0x15e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0186
        gbc.setState(0x8917, 0x3db4, 0x3ec0, 0xa30a, 0x1e94, 0xeaab, 0x0, 0x1);
        gbc.writeMem(0x8917, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3db4);
        EXPECT(gbc.pc(), 0x8919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8917), 0xcb);
        EXPECT(gbc.readMem(0x8918), 0xad);
        // CB AD 0187
        gbc.setState(0x87a5, 0x9f3, 0x5d90, 0xeb3b, 0xa89e, 0x20d0, 0x1, 0x1);
        gbc.writeMem(0x87a5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9f3);
        EXPECT(gbc.pc(), 0x87a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a5), 0xcb);
        EXPECT(gbc.readMem(0x87a6), 0xad);
        // CB AD 0188
        gbc.setState(0xae0f, 0x9009, 0x98e0, 0x4259, 0x1e9f, 0x567d, 0x1, 0x1);
        gbc.writeMem(0xae0f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9009);
        EXPECT(gbc.pc(), 0xae11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae0f), 0xcb);
        EXPECT(gbc.readMem(0xae10), 0xad);
        // CB AD 0189
        gbc.setState(0xade8, 0x62be, 0x6ae0, 0x2959, 0x59af, 0xe4b2, 0x0, 0x0);
        gbc.writeMem(0xade8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x62be);
        EXPECT(gbc.pc(), 0xadea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xade8), 0xcb);
        EXPECT(gbc.readMem(0xade9), 0xad);
        // CB AD 018A
        gbc.setState(0x3300, 0x35e9, 0xd7c0, 0xe17, 0x2722, 0x8a5a, 0x1, 0x0);
        gbc.writeMem(0x3300, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x35e9);
        EXPECT(gbc.pc(), 0x3302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 018B
        gbc.setState(0xbfa1, 0x78f5, 0x7bf0, 0x5e3c, 0x3669, 0xf54b, 0x1, 0x0);
        gbc.writeMem(0xbfa1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x78f5);
        EXPECT(gbc.pc(), 0xbfa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa1), 0xcb);
        EXPECT(gbc.readMem(0xbfa2), 0xad);
        // CB AD 018C
        gbc.setState(0xa709, 0x311, 0x3d50, 0xe050, 0xf2b, 0x8cb4, 0x0, 0x0);
        gbc.writeMem(0xa709, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x311);
        EXPECT(gbc.pc(), 0xa70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa709), 0xcb);
        EXPECT(gbc.readMem(0xa70a), 0xad);
        // CB AD 018D
        gbc.setState(0x246e, 0x3491, 0x75c0, 0x5fcd, 0xaa75, 0xb0e8, 0x0, 0x0);
        gbc.writeMem(0x246e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3491);
        EXPECT(gbc.pc(), 0x2470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 018E
        gbc.setState(0xede6, 0xd3e2, 0xf310, 0x8da2, 0x4681, 0x94d3, 0x0, 0x1);
        gbc.writeMem(0xede6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd3e2);
        EXPECT(gbc.pc(), 0xede8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede6), 0xcb);
        EXPECT(gbc.readMem(0xede7), 0xad);
        // CB AD 018F
        gbc.setState(0x25f5, 0x215d, 0x94c0, 0xbc38, 0x9dc7, 0x3045, 0x0, 0x1);
        gbc.writeMem(0x25f5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x215d);
        EXPECT(gbc.pc(), 0x25f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0190
        gbc.setState(0x7630, 0x69e8, 0xa750, 0x9cf9, 0xc9b7, 0xd865, 0x1, 0x0);
        gbc.writeMem(0x7630, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x69e8);
        EXPECT(gbc.pc(), 0x7632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0191
        gbc.setState(0x807d, 0x31b6, 0x5af0, 0x896f, 0xd76c, 0x6092, 0x0, 0x1);
        gbc.writeMem(0x807d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x31b6);
        EXPECT(gbc.pc(), 0x807f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x807d), 0xcb);
        EXPECT(gbc.readMem(0x807e), 0xad);
        // CB AD 0192
        gbc.setState(0x8884, 0xde19, 0x28f0, 0xe64c, 0xb3e3, 0x3a56, 0x1, 0x0);
        gbc.writeMem(0x8884, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xde19);
        EXPECT(gbc.pc(), 0x8886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8884), 0xcb);
        EXPECT(gbc.readMem(0x8885), 0xad);
        // CB AD 0193
        gbc.setState(0xe9ad, 0xbd04, 0x1f10, 0xdd62, 0xa3da, 0xe958, 0x0, 0x0);
        gbc.writeMem(0xe9ad, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbd04);
        EXPECT(gbc.pc(), 0xe9af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9ad), 0xcb);
        EXPECT(gbc.readMem(0xe9ae), 0xad);
        // CB AD 0194
        gbc.setState(0x417d, 0x7452, 0xfcc0, 0x214, 0x7d77, 0x67b5, 0x0, 0x0);
        gbc.writeMem(0x417d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7452);
        EXPECT(gbc.pc(), 0x417f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0195
        gbc.setState(0x87d8, 0x4d8, 0xae0, 0x9d96, 0xb3bd, 0x1386, 0x1, 0x0);
        gbc.writeMem(0x87d8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4d8);
        EXPECT(gbc.pc(), 0x87da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d8), 0xcb);
        EXPECT(gbc.readMem(0x87d9), 0xad);
        // CB AD 0196
        gbc.setState(0x57fb, 0x6bef, 0xdd50, 0x877a, 0xf400, 0x3202, 0x1, 0x0);
        gbc.writeMem(0x57fb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6bef);
        EXPECT(gbc.pc(), 0x57fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0197
        gbc.setState(0x1ef4, 0x2616, 0x94e0, 0x75b4, 0x7d3f, 0xeb6e, 0x0, 0x1);
        gbc.writeMem(0x1ef4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2616);
        EXPECT(gbc.pc(), 0x1ef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0198
        gbc.setState(0x952b, 0xd581, 0xd9c0, 0xf8a2, 0xf46f, 0x457f, 0x1, 0x0);
        gbc.writeMem(0x952b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd581);
        EXPECT(gbc.pc(), 0x952d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952b), 0xcb);
        EXPECT(gbc.readMem(0x952c), 0xad);
        // CB AD 0199
        gbc.setState(0x8ba9, 0x5a7a, 0x9550, 0x2575, 0xa07d, 0x2477, 0x1, 0x0);
        gbc.writeMem(0x8ba9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5a7a);
        EXPECT(gbc.pc(), 0x8bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba9), 0xcb);
        EXPECT(gbc.readMem(0x8baa), 0xad);
        // CB AD 019A
        gbc.setState(0x5f50, 0x7fa6, 0x2790, 0x5003, 0xdd33, 0x2f58, 0x1, 0x1);
        gbc.writeMem(0x5f50, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7fa6);
        EXPECT(gbc.pc(), 0x5f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 019B
        gbc.setState(0xdb10, 0xf643, 0x8fc0, 0x907f, 0xbb9a, 0xedb3, 0x1, 0x1);
        gbc.writeMem(0xdb10, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf643);
        EXPECT(gbc.pc(), 0xdb12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb10), 0xcb);
        EXPECT(gbc.readMem(0xdb11), 0xad);
        // CB AD 019C
        gbc.setState(0x79c5, 0xd036, 0x5370, 0x2600, 0xc525, 0x40dc, 0x0, 0x0);
        gbc.writeMem(0x79c5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd036);
        EXPECT(gbc.pc(), 0x79c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 019D
        gbc.setState(0x2d3e, 0x1a70, 0xb90, 0xb25e, 0x7df0, 0xd1cb, 0x0, 0x1);
        gbc.writeMem(0x2d3e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1a70);
        EXPECT(gbc.pc(), 0x2d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 019E
        gbc.setState(0x70ef, 0x7e6b, 0x8ba0, 0xdddb, 0xe4ab, 0xed31, 0x1, 0x0);
        gbc.writeMem(0x70ef, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7e6b);
        EXPECT(gbc.pc(), 0x70f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 019F
        gbc.setState(0x30ff, 0xac2f, 0x2f50, 0xe1d6, 0x2ffe, 0x5fd3, 0x0, 0x1);
        gbc.writeMem(0x30ff, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xac2f);
        EXPECT(gbc.pc(), 0x3101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01A0
        gbc.setState(0x6e15, 0xa616, 0x5310, 0x7fcf, 0xa94b, 0x5e1, 0x1, 0x0);
        gbc.writeMem(0x6e15, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa616);
        EXPECT(gbc.pc(), 0x6e17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01A1
        gbc.setState(0x589e, 0xfd8d, 0x28e0, 0x9baf, 0xe0b2, 0x8fd7, 0x1, 0x0);
        gbc.writeMem(0x589e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xfd8d);
        EXPECT(gbc.pc(), 0x58a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01A2
        gbc.setState(0x6d6c, 0xc532, 0xaf20, 0x6f83, 0xcba9, 0x55c0, 0x1, 0x0);
        gbc.writeMem(0x6d6c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc532);
        EXPECT(gbc.pc(), 0x6d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01A4
        gbc.setState(0xc587, 0x2faf, 0x4490, 0x45f5, 0xf463, 0x4f4c, 0x0, 0x0);
        gbc.writeMem(0xc587, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2faf);
        EXPECT(gbc.pc(), 0xc589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc587), 0xcb);
        EXPECT(gbc.readMem(0xc588), 0xad);
        // CB AD 01A5
        gbc.setState(0xa423, 0xc97, 0x4c10, 0x5d55, 0x3e3f, 0xc560, 0x0, 0x0);
        gbc.writeMem(0xa423, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc97);
        EXPECT(gbc.pc(), 0xa425);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa423), 0xcb);
        EXPECT(gbc.readMem(0xa424), 0xad);
        // CB AD 01A6
        gbc.setState(0x5e19, 0xae8f, 0xe390, 0x1, 0xad58, 0x476e, 0x1, 0x1);
        gbc.writeMem(0x5e19, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xae8f);
        EXPECT(gbc.pc(), 0x5e1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01A8
        gbc.setState(0xe43f, 0x5843, 0x3a20, 0x5aeb, 0x7b15, 0xfc32, 0x0, 0x0);
        gbc.writeMem(0xe43f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5843);
        EXPECT(gbc.pc(), 0xe441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe43f), 0xcb);
        EXPECT(gbc.readMem(0xe440), 0xad);
        // CB AD 01A9
        gbc.setState(0x3b58, 0x6286, 0x3610, 0x8d2e, 0xb0a6, 0xf62d, 0x1, 0x1);
        gbc.writeMem(0x3b58, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6286);
        EXPECT(gbc.pc(), 0x3b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01AA
        gbc.setState(0x5516, 0x637e, 0xc370, 0xf7fc, 0x80e1, 0x1ee7, 0x0, 0x0);
        gbc.writeMem(0x5516, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x637e);
        EXPECT(gbc.pc(), 0x5518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01AB
        gbc.setState(0xd05b, 0xd0fe, 0xbcb0, 0x7e3, 0xd79a, 0x99b5, 0x0, 0x0);
        gbc.writeMem(0xd05b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd0fe);
        EXPECT(gbc.pc(), 0xd05d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd05b), 0xcb);
        EXPECT(gbc.readMem(0xd05c), 0xad);
        // CB AD 01AC
        gbc.setState(0x627c, 0x26be, 0x6c80, 0x7467, 0xa295, 0xef59, 0x0, 0x0);
        gbc.writeMem(0x627c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x26be);
        EXPECT(gbc.pc(), 0x627e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01AD
        gbc.setState(0x924f, 0xeb5b, 0xa920, 0xfb9f, 0x10a7, 0x1883, 0x0, 0x1);
        gbc.writeMem(0x924f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xeb5b);
        EXPECT(gbc.pc(), 0x9251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x924f), 0xcb);
        EXPECT(gbc.readMem(0x9250), 0xad);
        // CB AD 01AE
        gbc.setState(0x1f1, 0x46e0, 0xd30, 0x33bf, 0x233c, 0x75, 0x0, 0x1);
        gbc.writeMem(0x1f1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x46e0);
        EXPECT(gbc.pc(), 0x1f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01AF
        gbc.setState(0x501b, 0xf4dc, 0xa820, 0xc73f, 0x4541, 0xbec9, 0x1, 0x0);
        gbc.writeMem(0x501b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf4dc);
        EXPECT(gbc.pc(), 0x501d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01B0
        gbc.setState(0xbdc5, 0x8cd2, 0xff70, 0x574b, 0x362a, 0xbde9, 0x0, 0x1);
        gbc.writeMem(0xbdc5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8cd2);
        EXPECT(gbc.pc(), 0xbdc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdc5), 0xcb);
        EXPECT(gbc.readMem(0xbdc6), 0xad);
        // CB AD 01B1
        gbc.setState(0x3f69, 0xbc31, 0xf750, 0x680b, 0xc8c7, 0x125c, 0x0, 0x1);
        gbc.writeMem(0x3f69, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xbc31);
        EXPECT(gbc.pc(), 0x3f6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01B3
        gbc.setState(0xcbf9, 0x4e12, 0x3c70, 0xd0c4, 0x74ca, 0x8f3f, 0x1, 0x1);
        gbc.writeMem(0xcbf9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4e12);
        EXPECT(gbc.pc(), 0xcbfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf9), 0xcb);
        EXPECT(gbc.readMem(0xcbfa), 0xad);
        // CB AD 01B4
        gbc.setState(0x8d6f, 0xb48d, 0x63c0, 0xe925, 0xa7c2, 0x99b3, 0x1, 0x1);
        gbc.writeMem(0x8d6f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb48d);
        EXPECT(gbc.pc(), 0x8d71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d6f), 0xcb);
        EXPECT(gbc.readMem(0x8d70), 0xad);
        // CB AD 01B5
        gbc.setState(0xcec, 0xe31b, 0xdac0, 0xcb05, 0x3652, 0x43b2, 0x0, 0x1);
        gbc.writeMem(0xcec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe31b);
        EXPECT(gbc.pc(), 0xcee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01B6
        gbc.setState(0x3e51, 0x2ee0, 0xc200, 0xd37b, 0x9be2, 0x5774, 0x0, 0x0);
        gbc.writeMem(0x3e51, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2ee0);
        EXPECT(gbc.pc(), 0x3e53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01B7
        gbc.setState(0x4cce, 0xa21c, 0xa3a0, 0x52c1, 0x9e84, 0xa670, 0x1, 0x0);
        gbc.writeMem(0x4cce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa21c);
        EXPECT(gbc.pc(), 0x4cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01B8
        gbc.setState(0xb971, 0x3ed5, 0x6a30, 0xecf3, 0x19d9, 0xbc44, 0x1, 0x1);
        gbc.writeMem(0xb971, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x3ed5);
        EXPECT(gbc.pc(), 0xb973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb971), 0xcb);
        EXPECT(gbc.readMem(0xb972), 0xad);
        // CB AD 01B9
        gbc.setState(0x4fa9, 0x30d6, 0x4e40, 0x926e, 0xf4cb, 0xd99d, 0x1, 0x1);
        gbc.writeMem(0x4fa9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x30d6);
        EXPECT(gbc.pc(), 0x4fab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01BA
        gbc.setState(0xb749, 0xe0a3, 0x4d50, 0x3efe, 0xf944, 0xe019, 0x1, 0x1);
        gbc.writeMem(0xb749, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe0a3);
        EXPECT(gbc.pc(), 0xb74b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb749), 0xcb);
        EXPECT(gbc.readMem(0xb74a), 0xad);
        // CB AD 01BB
        gbc.setState(0xd41a, 0xefb4, 0x43c0, 0xd94d, 0xbfbe, 0xbc92, 0x0, 0x0);
        gbc.writeMem(0xd41a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xefb4);
        EXPECT(gbc.pc(), 0xd41c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41a), 0xcb);
        EXPECT(gbc.readMem(0xd41b), 0xad);
        // CB AD 01BC
        gbc.setState(0x201b, 0xab21, 0xe680, 0x89a5, 0x8d77, 0x6e87, 0x1, 0x1);
        gbc.writeMem(0x201b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xab21);
        EXPECT(gbc.pc(), 0x201d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01BD
        gbc.setState(0xcef0, 0x12f, 0x4f30, 0x83c8, 0xffd5, 0xcea7, 0x1, 0x0);
        gbc.writeMem(0xcef0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x12f);
        EXPECT(gbc.pc(), 0xcef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcef0), 0xcb);
        EXPECT(gbc.readMem(0xcef1), 0xad);
        // CB AD 01BE
        gbc.setState(0xb78e, 0xd1be, 0xa370, 0x541e, 0x716f, 0x2e2b, 0x0, 0x0);
        gbc.writeMem(0xb78e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd1be);
        EXPECT(gbc.pc(), 0xb790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb78e), 0xcb);
        EXPECT(gbc.readMem(0xb78f), 0xad);
        // CB AD 01BF
        gbc.setState(0x8dec, 0xd9ed, 0xe700, 0x9672, 0x127d, 0x2022, 0x1, 0x1);
        gbc.writeMem(0x8dec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd9ed);
        EXPECT(gbc.pc(), 0x8dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dec), 0xcb);
        EXPECT(gbc.readMem(0x8ded), 0xad);
        // CB AD 01C0
        gbc.setState(0x636c, 0xbfcb, 0x7cc0, 0x4187, 0x1f53, 0x2ccc, 0x0, 0x0);
        gbc.writeMem(0x636c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbfcb);
        EXPECT(gbc.pc(), 0x636e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01C1
        gbc.setState(0x77e, 0x7767, 0xd950, 0x726b, 0xaa92, 0xa528, 0x1, 0x0);
        gbc.writeMem(0x77e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7767);
        EXPECT(gbc.pc(), 0x780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01C3
        gbc.setState(0xad40, 0x5d43, 0x1cd0, 0xb7e4, 0x582b, 0x5c51, 0x1, 0x0);
        gbc.writeMem(0xad40, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5d43);
        EXPECT(gbc.pc(), 0xad42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad40), 0xcb);
        EXPECT(gbc.readMem(0xad41), 0xad);
        // CB AD 01C4
        gbc.setState(0x8288, 0x4f4c, 0x40c0, 0xdb58, 0xcfe6, 0x1c28, 0x0, 0x1);
        gbc.writeMem(0x8288, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4f4c);
        EXPECT(gbc.pc(), 0x828a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8288), 0xcb);
        EXPECT(gbc.readMem(0x8289), 0xad);
        // CB AD 01C6
        gbc.setState(0x5913, 0x2a95, 0xfd90, 0xc, 0x1d85, 0x5f27, 0x0, 0x0);
        gbc.writeMem(0x5913, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2a95);
        EXPECT(gbc.pc(), 0x5915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01C7
        gbc.setState(0x8cd8, 0x5148, 0x5a0, 0x7044, 0xab8e, 0xbfa7, 0x0, 0x0);
        gbc.writeMem(0x8cd8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5148);
        EXPECT(gbc.pc(), 0x8cda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd8), 0xcb);
        EXPECT(gbc.readMem(0x8cd9), 0xad);
        // CB AD 01C8
        gbc.setState(0x98ce, 0xc64f, 0x6dd0, 0xa610, 0x1fb5, 0xec1b, 0x0, 0x0);
        gbc.writeMem(0x98ce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc64f);
        EXPECT(gbc.pc(), 0x98d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98ce), 0xcb);
        EXPECT(gbc.readMem(0x98cf), 0xad);
        // CB AD 01C9
        gbc.setState(0xb1d7, 0x57cc, 0x4c20, 0xb9f4, 0xf3ab, 0x48, 0x0, 0x1);
        gbc.writeMem(0xb1d7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x57cc);
        EXPECT(gbc.pc(), 0xb1d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d7), 0xcb);
        EXPECT(gbc.readMem(0xb1d8), 0xad);
        // CB AD 01CA
        gbc.setState(0x5cdf, 0x3fe1, 0xf320, 0x195f, 0x8da5, 0x10fd, 0x0, 0x0);
        gbc.writeMem(0x5cdf, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3fe1);
        EXPECT(gbc.pc(), 0x5ce1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01CB
        gbc.setState(0x79eb, 0x70f4, 0xa900, 0xd47f, 0xcac7, 0x939a, 0x1, 0x0);
        gbc.writeMem(0x79eb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x70f4);
        EXPECT(gbc.pc(), 0x79ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01CC
        gbc.setState(0x1c2f, 0xed0, 0xb220, 0x2e6, 0x880a, 0xb94c, 0x0, 0x1);
        gbc.writeMem(0x1c2f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xed0);
        EXPECT(gbc.pc(), 0x1c31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01CD
        gbc.setState(0x97af, 0xc98e, 0x55c0, 0xc2ef, 0xbd13, 0xdf20, 0x0, 0x0);
        gbc.writeMem(0x97af, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc98e);
        EXPECT(gbc.pc(), 0x97b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97af), 0xcb);
        EXPECT(gbc.readMem(0x97b0), 0xad);
        // CB AD 01CE
        gbc.setState(0x34e2, 0x88d4, 0x2290, 0xb19d, 0xebc2, 0xf358, 0x0, 0x0);
        gbc.writeMem(0x34e2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x88d4);
        EXPECT(gbc.pc(), 0x34e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01CF
        gbc.setState(0x55ac, 0x6540, 0xab50, 0x62b0, 0x542, 0x8cc, 0x1, 0x0);
        gbc.writeMem(0x55ac, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6540);
        EXPECT(gbc.pc(), 0x55ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01D0
        gbc.setState(0x6b87, 0x5d8a, 0x4ce0, 0x2055, 0x8c51, 0x8900, 0x0, 0x1);
        gbc.writeMem(0x6b87, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5d8a);
        EXPECT(gbc.pc(), 0x6b89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01D1
        gbc.setState(0x429d, 0xab9f, 0x7d90, 0x7246, 0x4057, 0xef6c, 0x1, 0x1);
        gbc.writeMem(0x429d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xab9f);
        EXPECT(gbc.pc(), 0x429f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01D2
        gbc.setState(0xb784, 0xc4b, 0x4f50, 0xfc40, 0xe8a1, 0x4da6, 0x1, 0x0);
        gbc.writeMem(0xb784, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc4b);
        EXPECT(gbc.pc(), 0xb786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb784), 0xcb);
        EXPECT(gbc.readMem(0xb785), 0xad);
        // CB AD 01D3
        gbc.setState(0x6703, 0x6d00, 0x1bd0, 0xb9d, 0x81d1, 0x12a1, 0x1, 0x1);
        gbc.writeMem(0x6703, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6d00);
        EXPECT(gbc.pc(), 0x6705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01D4
        gbc.setState(0x3844, 0xc38e, 0xe9a0, 0x9e33, 0xf541, 0x290e, 0x1, 0x0);
        gbc.writeMem(0x3844, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc38e);
        EXPECT(gbc.pc(), 0x3846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01D5
        gbc.setState(0x45dc, 0x1dc, 0xb9c0, 0xa34e, 0x255, 0xaa2, 0x1, 0x1);
        gbc.writeMem(0x45dc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1dc);
        EXPECT(gbc.pc(), 0x45de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01D6
        gbc.setState(0x59c4, 0xb6d0, 0x5a60, 0xf6d4, 0xd951, 0x6c48, 0x1, 0x0);
        gbc.writeMem(0x59c4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xb6d0);
        EXPECT(gbc.pc(), 0x59c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01D7
        gbc.setState(0x6c6e, 0x1815, 0x9330, 0xd8c, 0x3671, 0xdce8, 0x0, 0x0);
        gbc.writeMem(0x6c6e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1815);
        EXPECT(gbc.pc(), 0x6c70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01D8
        gbc.setState(0xd3, 0x6f7c, 0xe150, 0x8707, 0x3ddf, 0x9434, 0x0, 0x1);
        gbc.writeMem(0xd3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6f7c);
        EXPECT(gbc.pc(), 0xd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01D9
        gbc.setState(0x572, 0x2a58, 0x4430, 0xab02, 0x5112, 0x39, 0x1, 0x1);
        gbc.writeMem(0x572, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2a58);
        EXPECT(gbc.pc(), 0x574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01DA
        gbc.setState(0xdc9c, 0x3073, 0xaf40, 0x4bb8, 0xe56b, 0x5262, 0x1, 0x0);
        gbc.writeMem(0xdc9c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3073);
        EXPECT(gbc.pc(), 0xdc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc9c), 0xcb);
        EXPECT(gbc.readMem(0xdc9d), 0xad);
        // CB AD 01DB
        gbc.setState(0xd10c, 0x6b4a, 0x95b0, 0x7ed1, 0xffdf, 0xfd42, 0x1, 0x0);
        gbc.writeMem(0xd10c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6b4a);
        EXPECT(gbc.pc(), 0xd10e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd10c), 0xcb);
        EXPECT(gbc.readMem(0xd10d), 0xad);
        // CB AD 01DC
        gbc.setState(0x6f55, 0xf33f, 0x9a20, 0x5594, 0xdfdb, 0x2f95, 0x0, 0x1);
        gbc.writeMem(0x6f55, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf33f);
        EXPECT(gbc.pc(), 0x6f57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01DD
        gbc.setState(0xdeb, 0xb032, 0x8e60, 0x9faa, 0x1ca9, 0x830b, 0x1, 0x0);
        gbc.writeMem(0xdeb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb032);
        EXPECT(gbc.pc(), 0xded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01DF
        gbc.setState(0xb26a, 0xa819, 0x4c00, 0x25a, 0x9c19, 0xbfc3, 0x0, 0x1);
        gbc.writeMem(0xb26a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa819);
        EXPECT(gbc.pc(), 0xb26c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb26a), 0xcb);
        EXPECT(gbc.readMem(0xb26b), 0xad);
        // CB AD 01E0
        gbc.setState(0x7fbe, 0x9e9f, 0xf30, 0xe5c8, 0x2ef6, 0x770, 0x1, 0x0);
        gbc.writeMem(0x7fbe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9e9f);
        EXPECT(gbc.pc(), 0x7fc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01E1
        gbc.setState(0x60f9, 0x3671, 0xc3a0, 0xb9fb, 0x1fbc, 0xd419, 0x1, 0x1);
        gbc.writeMem(0x60f9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3671);
        EXPECT(gbc.pc(), 0x60fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01E2
        gbc.setState(0x8513, 0xb1a5, 0x8bb0, 0xe177, 0x98b8, 0xf3c9, 0x1, 0x0);
        gbc.writeMem(0x8513, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb1a5);
        EXPECT(gbc.pc(), 0x8515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8513), 0xcb);
        EXPECT(gbc.readMem(0x8514), 0xad);
        // CB AD 01E3
        gbc.setState(0x7942, 0xb8d6, 0x2ab0, 0xf669, 0x31b5, 0xeb9b, 0x0, 0x0);
        gbc.writeMem(0x7942, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb8d6);
        EXPECT(gbc.pc(), 0x7944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01E4
        gbc.setState(0xe4e6, 0xfe92, 0x9200, 0x56bd, 0x5953, 0xb99f, 0x0, 0x0);
        gbc.writeMem(0xe4e6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfe92);
        EXPECT(gbc.pc(), 0xe4e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e6), 0xcb);
        EXPECT(gbc.readMem(0xe4e7), 0xad);
        // CB AD 01E5
        gbc.setState(0x9aad, 0xbb77, 0x7da0, 0x6cfc, 0xb389, 0x340f, 0x1, 0x0);
        gbc.writeMem(0x9aad, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbb77);
        EXPECT(gbc.pc(), 0x9aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aad), 0xcb);
        EXPECT(gbc.readMem(0x9aae), 0xad);
        // CB AD 01E6
        gbc.setState(0x7a83, 0xf943, 0xedc0, 0xe285, 0x8d11, 0x68aa, 0x1, 0x1);
        gbc.writeMem(0x7a83, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf943);
        EXPECT(gbc.pc(), 0x7a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01E9
        gbc.setState(0xdcb5, 0x90ad, 0xc3e0, 0xa853, 0x8557, 0xe1bd, 0x1, 0x0);
        gbc.writeMem(0xdcb5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x90ad);
        EXPECT(gbc.pc(), 0xdcb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb5), 0xcb);
        EXPECT(gbc.readMem(0xdcb6), 0xad);
        // CB AD 01EA
        gbc.setState(0xed2f, 0x6c1a, 0x2930, 0x9586, 0xcc3e, 0xb71, 0x0, 0x0);
        gbc.writeMem(0xed2f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6c1a);
        EXPECT(gbc.pc(), 0xed31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed2f), 0xcb);
        EXPECT(gbc.readMem(0xed30), 0xad);
        // CB AD 01EB
        gbc.setState(0x7169, 0x3b4f, 0xd6d0, 0x56e2, 0xcd12, 0xefab, 0x0, 0x1);
        gbc.writeMem(0x7169, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3b4f);
        EXPECT(gbc.pc(), 0x716b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01EC
        gbc.setState(0xbf23, 0xc71b, 0x7100, 0x319b, 0x153, 0x6931, 0x1, 0x1);
        gbc.writeMem(0xbf23, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc71b);
        EXPECT(gbc.pc(), 0xbf25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf23), 0xcb);
        EXPECT(gbc.readMem(0xbf24), 0xad);
        // CB AD 01ED
        gbc.setState(0xaeb6, 0x8bc6, 0x9030, 0xeff3, 0xef4b, 0xdb43, 0x0, 0x1);
        gbc.writeMem(0xaeb6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8bc6);
        EXPECT(gbc.pc(), 0xaeb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeb6), 0xcb);
        EXPECT(gbc.readMem(0xaeb7), 0xad);
        // CB AD 01EE
        gbc.setState(0xa5e7, 0x7224, 0x60, 0x1dd0, 0x7b71, 0x2066, 0x1, 0x0);
        gbc.writeMem(0xa5e7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7224);
        EXPECT(gbc.pc(), 0xa5e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e7), 0xcb);
        EXPECT(gbc.readMem(0xa5e8), 0xad);
        // CB AD 01EF
        gbc.setState(0x9d63, 0x6c16, 0x10c0, 0xc753, 0xbe4b, 0xa024, 0x0, 0x0);
        gbc.writeMem(0x9d63, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6c16);
        EXPECT(gbc.pc(), 0x9d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d63), 0xcb);
        EXPECT(gbc.readMem(0x9d64), 0xad);
        // CB AD 01F0
        gbc.setState(0xcd0b, 0x483d, 0x77e0, 0x8bf2, 0x524e, 0xd3d7, 0x0, 0x0);
        gbc.writeMem(0xcd0b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x483d);
        EXPECT(gbc.pc(), 0xcd0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd0b), 0xcb);
        EXPECT(gbc.readMem(0xcd0c), 0xad);
        // CB AD 01F1
        gbc.setState(0x9c43, 0x327f, 0x3d00, 0x3163, 0x2efd, 0xa3d4, 0x1, 0x1);
        gbc.writeMem(0x9c43, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x327f);
        EXPECT(gbc.pc(), 0x9c45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c43), 0xcb);
        EXPECT(gbc.readMem(0x9c44), 0xad);
        // CB AD 01F2
        gbc.setState(0xabd5, 0xb0d8, 0x4870, 0xef85, 0x14b4, 0x11d, 0x0, 0x0);
        gbc.writeMem(0xabd5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb0d8);
        EXPECT(gbc.pc(), 0xabd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabd5), 0xcb);
        EXPECT(gbc.readMem(0xabd6), 0xad);
        // CB AD 01F3
        gbc.setState(0x221a, 0x9154, 0xce00, 0xec7d, 0x87c0, 0xefba, 0x0, 0x0);
        gbc.writeMem(0x221a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9154);
        EXPECT(gbc.pc(), 0x221c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01F4
        gbc.setState(0x2cf6, 0xe525, 0xe920, 0xeeca, 0xbed7, 0xae83, 0x0, 0x1);
        gbc.writeMem(0x2cf6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe525);
        EXPECT(gbc.pc(), 0x2cf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01F5
        gbc.setState(0x92ed, 0xce25, 0x48f0, 0xe4e0, 0x95f8, 0x49b3, 0x0, 0x0);
        gbc.writeMem(0x92ed, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xce25);
        EXPECT(gbc.pc(), 0x92ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92ed), 0xcb);
        EXPECT(gbc.readMem(0x92ee), 0xad);
        // CB AD 01F6
        gbc.setState(0x679e, 0xaeb9, 0xbf80, 0x1ff0, 0x2bdf, 0x1152, 0x0, 0x0);
        gbc.writeMem(0x679e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xaeb9);
        EXPECT(gbc.pc(), 0x67a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01F7
        gbc.setState(0xacbf, 0x77a9, 0x9c50, 0x9001, 0x66e9, 0xbd7a, 0x0, 0x0);
        gbc.writeMem(0xacbf, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x77a9);
        EXPECT(gbc.pc(), 0xacc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacbf), 0xcb);
        EXPECT(gbc.readMem(0xacc0), 0xad);
        // CB AD 01F8
        gbc.setState(0x8dfe, 0x1c9a, 0xd3c0, 0xa30e, 0xf653, 0x232b, 0x0, 0x0);
        gbc.writeMem(0x8dfe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1c9a);
        EXPECT(gbc.pc(), 0x8e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dfe), 0xcb);
        EXPECT(gbc.readMem(0x8dff), 0xad);
        // CB AD 01F9
        gbc.setState(0x4471, 0x58bb, 0xaa70, 0x4b2a, 0xd832, 0x6bed, 0x1, 0x1);
        gbc.writeMem(0x4471, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x58bb);
        EXPECT(gbc.pc(), 0x4473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01FA
        gbc.setState(0x1966, 0x3d5c, 0xbbe0, 0x6452, 0xa773, 0xf59, 0x0, 0x0);
        gbc.writeMem(0x1966, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3d5c);
        EXPECT(gbc.pc(), 0x1968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01FB
        gbc.setState(0x14c7, 0x7007, 0x8680, 0xb810, 0xb9c3, 0x4228, 0x0, 0x1);
        gbc.writeMem(0x14c7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7007);
        EXPECT(gbc.pc(), 0x14c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01FC
        gbc.setState(0x203f, 0x4664, 0x500, 0x51ed, 0x535a, 0xab3f, 0x0, 0x0);
        gbc.writeMem(0x203f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4664);
        EXPECT(gbc.pc(), 0x2041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 01FD
        gbc.setState(0x58fa, 0x539f, 0x2c30, 0x8cc9, 0xc347, 0x7984, 0x0, 0x1);
        gbc.writeMem(0x58fa, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x539f);
        EXPECT(gbc.pc(), 0x58fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 01FE
        gbc.setState(0x909f, 0xbcef, 0x6f00, 0x1b5, 0x88a5, 0x3c51, 0x1, 0x0);
        gbc.writeMem(0x909f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbcef);
        EXPECT(gbc.pc(), 0x90a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x909f), 0xcb);
        EXPECT(gbc.readMem(0x90a0), 0xad);
        // CB AD 01FF
        gbc.setState(0xe51d, 0x33e8, 0x1fd0, 0xf9b3, 0xc604, 0x2586, 0x0, 0x1);
        gbc.writeMem(0xe51d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x33e8);
        EXPECT(gbc.pc(), 0xe51f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe51d), 0xcb);
        EXPECT(gbc.readMem(0xe51e), 0xad);
        // CB AD 0201
        gbc.setState(0x48ea, 0x78f6, 0xf980, 0x1f0b, 0x493, 0xcd48, 0x1, 0x1);
        gbc.writeMem(0x48ea, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x78f6);
        EXPECT(gbc.pc(), 0x48ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0202
        gbc.setState(0x8e4c, 0xeb59, 0x32c0, 0x16b7, 0x649b, 0xcaa3, 0x0, 0x1);
        gbc.writeMem(0x8e4c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xeb59);
        EXPECT(gbc.pc(), 0x8e4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e4c), 0xcb);
        EXPECT(gbc.readMem(0x8e4d), 0xad);
        // CB AD 0203
        gbc.setState(0x9a15, 0xbc49, 0x5bb0, 0x860f, 0xda52, 0x4433, 0x0, 0x0);
        gbc.writeMem(0x9a15, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xbc49);
        EXPECT(gbc.pc(), 0x9a17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a15), 0xcb);
        EXPECT(gbc.readMem(0x9a16), 0xad);
        // CB AD 0204
        gbc.setState(0x65d1, 0x9e8, 0x23b0, 0xd54f, 0x4b5b, 0xfec0, 0x0, 0x1);
        gbc.writeMem(0x65d1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9e8);
        EXPECT(gbc.pc(), 0x65d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0205
        gbc.setState(0x868f, 0x56c5, 0x5640, 0x7830, 0x4c77, 0x260b, 0x1, 0x0);
        gbc.writeMem(0x868f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x56c5);
        EXPECT(gbc.pc(), 0x8691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x868f), 0xcb);
        EXPECT(gbc.readMem(0x8690), 0xad);
        // CB AD 0206
        gbc.setState(0x24ee, 0x8074, 0x740, 0x78e1, 0xa298, 0x525f, 0x0, 0x0);
        gbc.writeMem(0x24ee, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8074);
        EXPECT(gbc.pc(), 0x24f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0207
        gbc.setState(0x19d7, 0x481a, 0x7810, 0xee2e, 0x57c3, 0x8e57, 0x1, 0x1);
        gbc.writeMem(0x19d7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x481a);
        EXPECT(gbc.pc(), 0x19d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0208
        gbc.setState(0x10e1, 0x23f7, 0x7600, 0xcad2, 0xa0d2, 0xe3f1, 0x1, 0x1);
        gbc.writeMem(0x10e1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x23f7);
        EXPECT(gbc.pc(), 0x10e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0209
        gbc.setState(0x4732, 0x8194, 0xb9c0, 0x375c, 0x8812, 0x9e9c, 0x0, 0x1);
        gbc.writeMem(0x4732, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8194);
        EXPECT(gbc.pc(), 0x4734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 020A
        gbc.setState(0xa16d, 0xbbb4, 0xa7d0, 0xaec7, 0xb6d1, 0x1768, 0x1, 0x0);
        gbc.writeMem(0xa16d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbbb4);
        EXPECT(gbc.pc(), 0xa16f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa16d), 0xcb);
        EXPECT(gbc.readMem(0xa16e), 0xad);
        // CB AD 020C
        gbc.setState(0x7000, 0xf27f, 0x7670, 0xe4fc, 0x294f, 0x94e4, 0x1, 0x0);
        gbc.writeMem(0x7000, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf27f);
        EXPECT(gbc.pc(), 0x7002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 020D
        gbc.setState(0x699, 0xa797, 0xf330, 0xf6fc, 0x6f3a, 0x48bc, 0x1, 0x1);
        gbc.writeMem(0x699, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa797);
        EXPECT(gbc.pc(), 0x69b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 020E
        gbc.setState(0x3354, 0xf5ab, 0x8d20, 0x95f9, 0xb608, 0xa8de, 0x0, 0x0);
        gbc.writeMem(0x3354, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf5ab);
        EXPECT(gbc.pc(), 0x3356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 020F
        gbc.setState(0x982a, 0xecff, 0xf090, 0x8ad9, 0x60e6, 0x7a2a, 0x0, 0x1);
        gbc.writeMem(0x982a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xecff);
        EXPECT(gbc.pc(), 0x982c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x982a), 0xcb);
        EXPECT(gbc.readMem(0x982b), 0xad);
        // CB AD 0210
        gbc.setState(0xe148, 0x8d78, 0xa650, 0xe17, 0xf4ca, 0xe85d, 0x1, 0x1);
        gbc.writeMem(0xe148, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8d78);
        EXPECT(gbc.pc(), 0xe14a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe148), 0xcb);
        EXPECT(gbc.readMem(0xe149), 0xad);
        // CB AD 0211
        gbc.setState(0xa4b4, 0x2a87, 0x9990, 0x83f, 0x68f1, 0xa89a, 0x0, 0x1);
        gbc.writeMem(0xa4b4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2a87);
        EXPECT(gbc.pc(), 0xa4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4b4), 0xcb);
        EXPECT(gbc.readMem(0xa4b5), 0xad);
        // CB AD 0212
        gbc.setState(0xd497, 0xa6f9, 0x8b0, 0xd703, 0x8707, 0x278f, 0x0, 0x1);
        gbc.writeMem(0xd497, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa6f9);
        EXPECT(gbc.pc(), 0xd499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd497), 0xcb);
        EXPECT(gbc.readMem(0xd498), 0xad);
        // CB AD 0213
        gbc.setState(0xcbe8, 0x85fb, 0xc190, 0x2fd3, 0xbb8d, 0x2eb5, 0x1, 0x0);
        gbc.writeMem(0xcbe8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x85fb);
        EXPECT(gbc.pc(), 0xcbea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe8), 0xcb);
        EXPECT(gbc.readMem(0xcbe9), 0xad);
        // CB AD 0214
        gbc.setState(0x4cce, 0xc63, 0xf990, 0x89f1, 0x8a4b, 0xa774, 0x1, 0x0);
        gbc.writeMem(0x4cce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc63);
        EXPECT(gbc.pc(), 0x4cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0215
        gbc.setState(0x52f5, 0xbb02, 0x37a0, 0xf045, 0x239a, 0x1dc2, 0x1, 0x0);
        gbc.writeMem(0x52f5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xbb02);
        EXPECT(gbc.pc(), 0x52f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0216
        gbc.setState(0x4b53, 0xa91a, 0xe380, 0x4afc, 0x16f5, 0xaa35, 0x0, 0x1);
        gbc.writeMem(0x4b53, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa91a);
        EXPECT(gbc.pc(), 0x4b55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0217
        gbc.setState(0xaec0, 0xa5a4, 0x5a00, 0x2da4, 0x85b2, 0x5842, 0x0, 0x1);
        gbc.writeMem(0xaec0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa5a4);
        EXPECT(gbc.pc(), 0xaec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec0), 0xcb);
        EXPECT(gbc.readMem(0xaec1), 0xad);
        // CB AD 0218
        gbc.setState(0xab92, 0xac2e, 0x6450, 0x958f, 0x67b7, 0x23e5, 0x0, 0x1);
        gbc.writeMem(0xab92, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xac2e);
        EXPECT(gbc.pc(), 0xab94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab92), 0xcb);
        EXPECT(gbc.readMem(0xab93), 0xad);
        // CB AD 0219
        gbc.setState(0x87fc, 0x2bd0, 0xdaa0, 0x6f7d, 0xf3c4, 0xbc3, 0x0, 0x0);
        gbc.writeMem(0x87fc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2bd0);
        EXPECT(gbc.pc(), 0x87fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87fc), 0xcb);
        EXPECT(gbc.readMem(0x87fd), 0xad);
        // CB AD 021A
        gbc.setState(0x2ee2, 0xe8b2, 0xac70, 0x61e1, 0x9fb5, 0xb9bd, 0x0, 0x1);
        gbc.writeMem(0x2ee2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe8b2);
        EXPECT(gbc.pc(), 0x2ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 021B
        gbc.setState(0x10e6, 0x8fdf, 0xbc00, 0xf10b, 0x2546, 0x6934, 0x0, 0x1);
        gbc.writeMem(0x10e6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8fdf);
        EXPECT(gbc.pc(), 0x10e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 021C
        gbc.setState(0x7502, 0xb295, 0xcf10, 0xbd8e, 0xa928, 0xdbd1, 0x0, 0x1);
        gbc.writeMem(0x7502, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb295);
        EXPECT(gbc.pc(), 0x7504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 021D
        gbc.setState(0x7873, 0xee0f, 0x8240, 0x9c1, 0xe121, 0x8f72, 0x1, 0x0);
        gbc.writeMem(0x7873, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xee0f);
        EXPECT(gbc.pc(), 0x7875);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 021E
        gbc.setState(0x6697, 0xcde2, 0x99e0, 0x3553, 0xa04e, 0x9306, 0x0, 0x1);
        gbc.writeMem(0x6697, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcde2);
        EXPECT(gbc.pc(), 0x6699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 021F
        gbc.setState(0xcc3f, 0xfa58, 0xfff0, 0xad8d, 0xc38a, 0xbac9, 0x0, 0x1);
        gbc.writeMem(0xcc3f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfa58);
        EXPECT(gbc.pc(), 0xcc41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc3f), 0xcb);
        EXPECT(gbc.readMem(0xcc40), 0xad);
        // CB AD 0220
        gbc.setState(0x9122, 0x6cd, 0x4420, 0x534a, 0xb8da, 0xbe93, 0x1, 0x0);
        gbc.writeMem(0x9122, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6cd);
        EXPECT(gbc.pc(), 0x9124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9122), 0xcb);
        EXPECT(gbc.readMem(0x9123), 0xad);
        // CB AD 0222
        gbc.setState(0x874f, 0xb66b, 0xafb0, 0x4c43, 0x643c, 0xcb51, 0x0, 0x0);
        gbc.writeMem(0x874f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb66b);
        EXPECT(gbc.pc(), 0x8751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x874f), 0xcb);
        EXPECT(gbc.readMem(0x8750), 0xad);
        // CB AD 0223
        gbc.setState(0x74dd, 0x2a46, 0xfe30, 0x3be1, 0x2040, 0x444, 0x1, 0x1);
        gbc.writeMem(0x74dd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2a46);
        EXPECT(gbc.pc(), 0x74df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0224
        gbc.setState(0x6920, 0x94a4, 0xf0a0, 0x9424, 0x319c, 0xffef, 0x0, 0x1);
        gbc.writeMem(0x6920, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x94a4);
        EXPECT(gbc.pc(), 0x6922);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0225
        gbc.setState(0x72f9, 0x4712, 0x4800, 0x343b, 0x8d53, 0xd96f, 0x1, 0x0);
        gbc.writeMem(0x72f9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4712);
        EXPECT(gbc.pc(), 0x72fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0226
        gbc.setState(0x3fff, 0x965e, 0xf020, 0xcbc3, 0xce34, 0x3db5, 0x1, 0x0);
        gbc.writeMem(0x3fff, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x965e);
        EXPECT(gbc.pc(), 0x4001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0227
        gbc.setState(0x198d, 0x226c, 0xe090, 0x899c, 0x275c, 0x7832, 0x1, 0x1);
        gbc.writeMem(0x198d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x226c);
        EXPECT(gbc.pc(), 0x198f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0228
        gbc.setState(0xcac, 0xadc9, 0x72c0, 0x728, 0x237f, 0x9565, 0x0, 0x1);
        gbc.writeMem(0xcac, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xadc9);
        EXPECT(gbc.pc(), 0xcae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0229
        gbc.setState(0xcfeb, 0x793, 0x9210, 0x23a5, 0xb080, 0xa648, 0x0, 0x0);
        gbc.writeMem(0xcfeb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x793);
        EXPECT(gbc.pc(), 0xcfed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfeb), 0xcb);
        EXPECT(gbc.readMem(0xcfec), 0xad);
        // CB AD 022B
        gbc.setState(0xb842, 0xf94, 0x61c0, 0xc47, 0xf314, 0xa22e, 0x0, 0x1);
        gbc.writeMem(0xb842, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf94);
        EXPECT(gbc.pc(), 0xb844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb842), 0xcb);
        EXPECT(gbc.readMem(0xb843), 0xad);
        // CB AD 022C
        gbc.setState(0xa104, 0x527, 0x4c60, 0xae0c, 0xbd16, 0xcaf7, 0x1, 0x1);
        gbc.writeMem(0xa104, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x527);
        EXPECT(gbc.pc(), 0xa106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa104), 0xcb);
        EXPECT(gbc.readMem(0xa105), 0xad);
        // CB AD 022D
        gbc.setState(0xe5ce, 0x1ea9, 0x7800, 0xbb8d, 0xe135, 0x3e1, 0x0, 0x1);
        gbc.writeMem(0xe5ce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1ea9);
        EXPECT(gbc.pc(), 0xe5d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ce), 0xcb);
        EXPECT(gbc.readMem(0xe5cf), 0xad);
        // CB AD 022E
        gbc.setState(0x23a7, 0x174, 0x85f0, 0x3c47, 0x5aff, 0xc588, 0x0, 0x1);
        gbc.writeMem(0x23a7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x174);
        EXPECT(gbc.pc(), 0x23a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 022F
        gbc.setState(0xb0fb, 0xb1eb, 0x13b0, 0xca8a, 0xe7eb, 0x454a, 0x0, 0x1);
        gbc.writeMem(0xb0fb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb1eb);
        EXPECT(gbc.pc(), 0xb0fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0fb), 0xcb);
        EXPECT(gbc.readMem(0xb0fc), 0xad);
        // CB AD 0230
        gbc.setState(0xd8e5, 0x83b4, 0x18c0, 0x81e7, 0xc974, 0x12c2, 0x0, 0x1);
        gbc.writeMem(0xd8e5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x83b4);
        EXPECT(gbc.pc(), 0xd8e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e5), 0xcb);
        EXPECT(gbc.readMem(0xd8e6), 0xad);
        // CB AD 0231
        gbc.setState(0x8351, 0x7dd5, 0xfe40, 0xb7e5, 0x796c, 0xc4b9, 0x0, 0x1);
        gbc.writeMem(0x8351, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7dd5);
        EXPECT(gbc.pc(), 0x8353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8351), 0xcb);
        EXPECT(gbc.readMem(0x8352), 0xad);
        // CB AD 0232
        gbc.setState(0xb44b, 0xfa85, 0x3bb0, 0xa816, 0xa9a4, 0xc13d, 0x1, 0x0);
        gbc.writeMem(0xb44b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfa85);
        EXPECT(gbc.pc(), 0xb44d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb44b), 0xcb);
        EXPECT(gbc.readMem(0xb44c), 0xad);
        // CB AD 0233
        gbc.setState(0x97e7, 0x7350, 0x7920, 0x5943, 0x60f9, 0xb1c7, 0x1, 0x1);
        gbc.writeMem(0x97e7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7350);
        EXPECT(gbc.pc(), 0x97e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97e7), 0xcb);
        EXPECT(gbc.readMem(0x97e8), 0xad);
        // CB AD 0234
        gbc.setState(0x7a73, 0x2baf, 0x55e0, 0xfd2f, 0xd02e, 0xd406, 0x0, 0x1);
        gbc.writeMem(0x7a73, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2baf);
        EXPECT(gbc.pc(), 0x7a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0235
        gbc.setState(0x6be4, 0x6673, 0x5140, 0x6b95, 0x81e5, 0x4ef8, 0x0, 0x1);
        gbc.writeMem(0x6be4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6673);
        EXPECT(gbc.pc(), 0x6be6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0236
        gbc.setState(0x4d4d, 0x50ce, 0x4610, 0xf558, 0xc00c, 0xff11, 0x1, 0x0);
        gbc.writeMem(0x4d4d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x50ce);
        EXPECT(gbc.pc(), 0x4d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0237
        gbc.setState(0xd8b2, 0x60c8, 0x4d0, 0x6d55, 0x69cc, 0x2706, 0x1, 0x0);
        gbc.writeMem(0xd8b2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x60c8);
        EXPECT(gbc.pc(), 0xd8b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8b2), 0xcb);
        EXPECT(gbc.readMem(0xd8b3), 0xad);
        // CB AD 0238
        gbc.setState(0xa3fc, 0x2598, 0xce10, 0x5663, 0xb91f, 0x4055, 0x0, 0x0);
        gbc.writeMem(0xa3fc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2598);
        EXPECT(gbc.pc(), 0xa3fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3fc), 0xcb);
        EXPECT(gbc.readMem(0xa3fd), 0xad);
        // CB AD 0239
        gbc.setState(0xaa5, 0x83de, 0x5130, 0x2347, 0xd665, 0xc75e, 0x1, 0x1);
        gbc.writeMem(0xaa5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x83de);
        EXPECT(gbc.pc(), 0xaa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 023A
        gbc.setState(0xe371, 0x3a82, 0xa230, 0xc68e, 0x841b, 0xe33b, 0x0, 0x0);
        gbc.writeMem(0xe371, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3a82);
        EXPECT(gbc.pc(), 0xe373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe371), 0xcb);
        EXPECT(gbc.readMem(0xe372), 0xad);
        // CB AD 023B
        gbc.setState(0x5c70, 0x4e0e, 0xfde0, 0x647, 0xb586, 0x185, 0x0, 0x0);
        gbc.writeMem(0x5c70, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4e0e);
        EXPECT(gbc.pc(), 0x5c72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 023C
        gbc.setState(0xc7, 0x958, 0x52d0, 0x1d07, 0xb91b, 0xedc6, 0x0, 0x0);
        gbc.writeMem(0xc7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x958);
        EXPECT(gbc.pc(), 0xc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 023D
        gbc.setState(0x8a9b, 0x49c5, 0x3360, 0x5ab1, 0x6539, 0xa41a, 0x1, 0x1);
        gbc.writeMem(0x8a9b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x49c5);
        EXPECT(gbc.pc(), 0x8a9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a9b), 0xcb);
        EXPECT(gbc.readMem(0x8a9c), 0xad);
        // CB AD 023E
        gbc.setState(0x565, 0x937a, 0x90, 0x780e, 0x5937, 0x4a66, 0x0, 0x1);
        gbc.writeMem(0x565, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x937a);
        EXPECT(gbc.pc(), 0x567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 023F
        gbc.setState(0x17ec, 0x6aa2, 0x51f0, 0x2675, 0xf257, 0xb662, 0x0, 0x1);
        gbc.writeMem(0x17ec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6aa2);
        EXPECT(gbc.pc(), 0x17ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0240
        gbc.setState(0x1f9f, 0x251a, 0x98e0, 0xfba7, 0x9b10, 0x23b8, 0x1, 0x0);
        gbc.writeMem(0x1f9f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x251a);
        EXPECT(gbc.pc(), 0x1fa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0241
        gbc.setState(0x844a, 0x281f, 0x49c0, 0xaf75, 0x7e74, 0xfb74, 0x1, 0x1);
        gbc.writeMem(0x844a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x281f);
        EXPECT(gbc.pc(), 0x844c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x844a), 0xcb);
        EXPECT(gbc.readMem(0x844b), 0xad);
        // CB AD 0242
        gbc.setState(0x6afc, 0x1c75, 0x1a90, 0x99e, 0xfc17, 0x6927, 0x0, 0x1);
        gbc.writeMem(0x6afc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1c75);
        EXPECT(gbc.pc(), 0x6afe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0243
        gbc.setState(0xe035, 0x88f0, 0xaf40, 0x12e5, 0xbe40, 0xb413, 0x1, 0x1);
        gbc.writeMem(0xe035, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x88f0);
        EXPECT(gbc.pc(), 0xe037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe035), 0xcb);
        EXPECT(gbc.readMem(0xe036), 0xad);
        // CB AD 0245
        gbc.setState(0x3262, 0x91a8, 0x9a20, 0xe1ff, 0xa0d6, 0x2ec, 0x0, 0x0);
        gbc.writeMem(0x3262, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x91a8);
        EXPECT(gbc.pc(), 0x3264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0246
        gbc.setState(0xcbb1, 0x4951, 0xa450, 0x6a9a, 0x9bf9, 0xb964, 0x0, 0x1);
        gbc.writeMem(0xcbb1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4951);
        EXPECT(gbc.pc(), 0xcbb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbb1), 0xcb);
        EXPECT(gbc.readMem(0xcbb2), 0xad);
        // CB AD 0247
        gbc.setState(0x63b9, 0xe72e, 0x54c0, 0xe1c0, 0xc6fe, 0x9045, 0x0, 0x1);
        gbc.writeMem(0x63b9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe72e);
        EXPECT(gbc.pc(), 0x63bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0248
        gbc.setState(0x55ce, 0xa372, 0x1750, 0x58bb, 0x7495, 0x184d, 0x1, 0x1);
        gbc.writeMem(0x55ce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa372);
        EXPECT(gbc.pc(), 0x55d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0249
        gbc.setState(0x32cd, 0x5954, 0xbff0, 0xed83, 0x352b, 0x3ce5, 0x1, 0x0);
        gbc.writeMem(0x32cd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5954);
        EXPECT(gbc.pc(), 0x32cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 024A
        gbc.setState(0x588e, 0xe887, 0x82f0, 0x3069, 0x265a, 0x4aa7, 0x0, 0x0);
        gbc.writeMem(0x588e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe887);
        EXPECT(gbc.pc(), 0x5890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 024B
        gbc.setState(0x17b6, 0x9586, 0xfda0, 0xc50e, 0x6b86, 0x6644, 0x0, 0x0);
        gbc.writeMem(0x17b6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9586);
        EXPECT(gbc.pc(), 0x17b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 024C
        gbc.setState(0x9135, 0x3c75, 0x6c80, 0xd839, 0x3708, 0x6ab5, 0x1, 0x0);
        gbc.writeMem(0x9135, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3c75);
        EXPECT(gbc.pc(), 0x9137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9135), 0xcb);
        EXPECT(gbc.readMem(0x9136), 0xad);
        // CB AD 024D
        gbc.setState(0x16d2, 0x2654, 0xdfe0, 0xed6, 0x84f0, 0x7a0c, 0x1, 0x1);
        gbc.writeMem(0x16d2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2654);
        EXPECT(gbc.pc(), 0x16d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 024E
        gbc.setState(0x1b4a, 0x45b8, 0x9f60, 0x5023, 0x692a, 0xe499, 0x0, 0x0);
        gbc.writeMem(0x1b4a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x45b8);
        EXPECT(gbc.pc(), 0x1b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 024F
        gbc.setState(0x8116, 0xe748, 0x2a50, 0x2349, 0x3e8b, 0xbb55, 0x1, 0x0);
        gbc.writeMem(0x8116, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe748);
        EXPECT(gbc.pc(), 0x8118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8116), 0xcb);
        EXPECT(gbc.readMem(0x8117), 0xad);
        // CB AD 0250
        gbc.setState(0x1d69, 0xa9a6, 0x8270, 0x5b, 0xa5b8, 0xa3ed, 0x1, 0x0);
        gbc.writeMem(0x1d69, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa9a6);
        EXPECT(gbc.pc(), 0x1d6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0251
        gbc.setState(0x7519, 0x3c92, 0x3450, 0xf39e, 0x667d, 0x1c5c, 0x0, 0x0);
        gbc.writeMem(0x7519, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3c92);
        EXPECT(gbc.pc(), 0x751b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0252
        gbc.setState(0x5d0e, 0x2b24, 0xd0d0, 0x4f66, 0xbfc3, 0x96a2, 0x1, 0x1);
        gbc.writeMem(0x5d0e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2b24);
        EXPECT(gbc.pc(), 0x5d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0253
        gbc.setState(0x2af0, 0x84b2, 0xb930, 0x8dbf, 0xf777, 0xd8e6, 0x0, 0x0);
        gbc.writeMem(0x2af0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x84b2);
        EXPECT(gbc.pc(), 0x2af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0254
        gbc.setState(0xa79d, 0xab24, 0xad0, 0x4f76, 0x2de0, 0xb8d1, 0x1, 0x0);
        gbc.writeMem(0xa79d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xab24);
        EXPECT(gbc.pc(), 0xa79f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa79d), 0xcb);
        EXPECT(gbc.readMem(0xa79e), 0xad);
        // CB AD 0255
        gbc.setState(0x5bf2, 0x28ee, 0x65d0, 0x23ea, 0xf9e8, 0x5c7c, 0x1, 0x1);
        gbc.writeMem(0x5bf2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x28ee);
        EXPECT(gbc.pc(), 0x5bf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0256
        gbc.setState(0x71da, 0x3fac, 0x7d30, 0xb43d, 0x1f73, 0xd40d, 0x1, 0x1);
        gbc.writeMem(0x71da, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3fac);
        EXPECT(gbc.pc(), 0x71dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0257
        gbc.setState(0x2cad, 0x4753, 0xb280, 0x2eff, 0x772d, 0xe626, 0x1, 0x0);
        gbc.writeMem(0x2cad, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4753);
        EXPECT(gbc.pc(), 0x2caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0258
        gbc.setState(0xd43a, 0x6ff2, 0xd990, 0x7cb7, 0xde95, 0xdbf3, 0x0, 0x1);
        gbc.writeMem(0xd43a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6ff2);
        EXPECT(gbc.pc(), 0xd43c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd43a), 0xcb);
        EXPECT(gbc.readMem(0xd43b), 0xad);
        // CB AD 0259
        gbc.setState(0x64b, 0x9657, 0x8330, 0x62ea, 0xa227, 0x3492, 0x1, 0x1);
        gbc.writeMem(0x64b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9657);
        EXPECT(gbc.pc(), 0x64d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 025A
        gbc.setState(0x9556, 0x36c2, 0x2da0, 0x2943, 0xf56a, 0xd473, 0x1, 0x1);
        gbc.writeMem(0x9556, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x36c2);
        EXPECT(gbc.pc(), 0x9558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9556), 0xcb);
        EXPECT(gbc.readMem(0x9557), 0xad);
        // CB AD 025B
        gbc.setState(0xec5a, 0xf46b, 0xe600, 0x4884, 0xc93e, 0x70ff, 0x1, 0x0);
        gbc.writeMem(0xec5a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf46b);
        EXPECT(gbc.pc(), 0xec5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec5a), 0xcb);
        EXPECT(gbc.readMem(0xec5b), 0xad);
        // CB AD 025C
        gbc.setState(0x1ad5, 0x205a, 0x4860, 0xfe6e, 0x196, 0x4d94, 0x0, 0x1);
        gbc.writeMem(0x1ad5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x205a);
        EXPECT(gbc.pc(), 0x1ad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 025D
        gbc.setState(0xe4e4, 0x22a, 0x120, 0xc759, 0x2617, 0x2757, 0x0, 0x1);
        gbc.writeMem(0xe4e4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x22a);
        EXPECT(gbc.pc(), 0xe4e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e4), 0xcb);
        EXPECT(gbc.readMem(0xe4e5), 0xad);
        // CB AD 025E
        gbc.setState(0x4864, 0x5bc0, 0xf8a0, 0x6997, 0x1608, 0x5a67, 0x0, 0x1);
        gbc.writeMem(0x4864, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5bc0);
        EXPECT(gbc.pc(), 0x4866);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 025F
        gbc.setState(0xbab8, 0xa1a1, 0x5e30, 0xad43, 0xb67, 0xff11, 0x1, 0x0);
        gbc.writeMem(0xbab8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa1a1);
        EXPECT(gbc.pc(), 0xbaba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbab8), 0xcb);
        EXPECT(gbc.readMem(0xbab9), 0xad);
        // CB AD 0260
        gbc.setState(0x6073, 0xb0, 0xd830, 0x1c6, 0xcf35, 0x4e2e, 0x1, 0x1);
        gbc.writeMem(0x6073, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb0);
        EXPECT(gbc.pc(), 0x6075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0261
        gbc.setState(0x2732, 0xf885, 0x89e0, 0x63a, 0x9211, 0x96fc, 0x0, 0x0);
        gbc.writeMem(0x2732, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf885);
        EXPECT(gbc.pc(), 0x2734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0262
        gbc.setState(0xd080, 0xfd83, 0xf270, 0x6280, 0xeb21, 0x70c6, 0x0, 0x0);
        gbc.writeMem(0xd080, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfd83);
        EXPECT(gbc.pc(), 0xd082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd080), 0xcb);
        EXPECT(gbc.readMem(0xd081), 0xad);
        // CB AD 0263
        gbc.setState(0xde8d, 0x3df7, 0x4790, 0xce4b, 0x5859, 0xecb1, 0x0, 0x1);
        gbc.writeMem(0xde8d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3df7);
        EXPECT(gbc.pc(), 0xde8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde8d), 0xcb);
        EXPECT(gbc.readMem(0xde8e), 0xad);
        // CB AD 0264
        gbc.setState(0x86c1, 0xd4f4, 0xffd0, 0xd31c, 0xc402, 0xa3f0, 0x0, 0x0);
        gbc.writeMem(0x86c1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd4f4);
        EXPECT(gbc.pc(), 0x86c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c1), 0xcb);
        EXPECT(gbc.readMem(0x86c2), 0xad);
        // CB AD 0265
        gbc.setState(0x818f, 0x195, 0xf820, 0xd25e, 0x8c41, 0xa2c4, 0x0, 0x1);
        gbc.writeMem(0x818f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x195);
        EXPECT(gbc.pc(), 0x8191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818f), 0xcb);
        EXPECT(gbc.readMem(0x8190), 0xad);
        // CB AD 0266
        gbc.setState(0x9e79, 0x80a3, 0x3b20, 0x8369, 0x580b, 0xc622, 0x1, 0x0);
        gbc.writeMem(0x9e79, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x80a3);
        EXPECT(gbc.pc(), 0x9e7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e79), 0xcb);
        EXPECT(gbc.readMem(0x9e7a), 0xad);
        // CB AD 0267
        gbc.setState(0x2230, 0x357d, 0x7890, 0x45e, 0xce86, 0x9599, 0x1, 0x0);
        gbc.writeMem(0x2230, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x357d);
        EXPECT(gbc.pc(), 0x2232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0268
        gbc.setState(0x2b0d, 0xada0, 0x3440, 0x84be, 0xb8c, 0x5bf5, 0x1, 0x1);
        gbc.writeMem(0x2b0d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xada0);
        EXPECT(gbc.pc(), 0x2b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0269
        gbc.setState(0xa6c0, 0x7ab8, 0x89e0, 0x3098, 0x2027, 0x2a9b, 0x1, 0x0);
        gbc.writeMem(0xa6c0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7ab8);
        EXPECT(gbc.pc(), 0xa6c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c0), 0xcb);
        EXPECT(gbc.readMem(0xa6c1), 0xad);
        // CB AD 026A
        gbc.setState(0x7871, 0xa65d, 0xe490, 0x555c, 0x646, 0x3993, 0x0, 0x0);
        gbc.writeMem(0x7871, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa65d);
        EXPECT(gbc.pc(), 0x7873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 026B
        gbc.setState(0x1785, 0x7b21, 0x80c0, 0x2f0b, 0xa8a1, 0x38a1, 0x1, 0x0);
        gbc.writeMem(0x1785, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7b21);
        EXPECT(gbc.pc(), 0x1787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 026C
        gbc.setState(0xc9c5, 0x3608, 0x3ac0, 0xa3c8, 0x2a52, 0x90a0, 0x0, 0x1);
        gbc.writeMem(0xc9c5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3608);
        EXPECT(gbc.pc(), 0xc9c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c5), 0xcb);
        EXPECT(gbc.readMem(0xc9c6), 0xad);
        // CB AD 026D
        gbc.setState(0x578d, 0xe0e5, 0xed10, 0xc1af, 0x19ba, 0xc4ab, 0x0, 0x0);
        gbc.writeMem(0x578d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe0e5);
        EXPECT(gbc.pc(), 0x578f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 026E
        gbc.setState(0x1344, 0x8a8f, 0x9650, 0xd458, 0x8d96, 0x61da, 0x0, 0x1);
        gbc.writeMem(0x1344, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8a8f);
        EXPECT(gbc.pc(), 0x1346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 026F
        gbc.setState(0x9df3, 0xb5e, 0x1b0, 0x6d3d, 0x3138, 0xdb1, 0x0, 0x1);
        gbc.writeMem(0x9df3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb5e);
        EXPECT(gbc.pc(), 0x9df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9df3), 0xcb);
        EXPECT(gbc.readMem(0x9df4), 0xad);
        // CB AD 0270
        gbc.setState(0xee6, 0x4fd6, 0x27f0, 0x6477, 0xbb7e, 0x84a8, 0x1, 0x1);
        gbc.writeMem(0xee6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4fd6);
        EXPECT(gbc.pc(), 0xee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0271
        gbc.setState(0x60df, 0xb1a9, 0xac0, 0x9501, 0x41f4, 0x6f39, 0x1, 0x1);
        gbc.writeMem(0x60df, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb1a9);
        EXPECT(gbc.pc(), 0x60e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0272
        gbc.setState(0xb1c4, 0x82e2, 0x2160, 0x5e60, 0xf599, 0xcab8, 0x1, 0x1);
        gbc.writeMem(0xb1c4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x82e2);
        EXPECT(gbc.pc(), 0xb1c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c4), 0xcb);
        EXPECT(gbc.readMem(0xb1c5), 0xad);
        // CB AD 0273
        gbc.setState(0x7aa7, 0xb8b7, 0x2f50, 0x7c76, 0x8d7a, 0xccf5, 0x1, 0x1);
        gbc.writeMem(0x7aa7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb8b7);
        EXPECT(gbc.pc(), 0x7aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0274
        gbc.setState(0x7540, 0xf6b3, 0xefb0, 0x3ec3, 0xa2a0, 0xcf39, 0x0, 0x1);
        gbc.writeMem(0x7540, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf6b3);
        EXPECT(gbc.pc(), 0x7542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0275
        gbc.setState(0xde55, 0xfcec, 0x7310, 0x1380, 0xbafc, 0x9fdf, 0x0, 0x0);
        gbc.writeMem(0xde55, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfcec);
        EXPECT(gbc.pc(), 0xde57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde55), 0xcb);
        EXPECT(gbc.readMem(0xde56), 0xad);
        // CB AD 0276
        gbc.setState(0x1174, 0x4c05, 0x2900, 0xdf43, 0x658a, 0xfebb, 0x1, 0x0);
        gbc.writeMem(0x1174, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4c05);
        EXPECT(gbc.pc(), 0x1176);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0277
        gbc.setState(0x3f3a, 0xa2bb, 0x5300, 0x408d, 0xba5a, 0x70fb, 0x0, 0x1);
        gbc.writeMem(0x3f3a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa2bb);
        EXPECT(gbc.pc(), 0x3f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0278
        gbc.setState(0x136b, 0x73d5, 0x1a70, 0xae6, 0xed2b, 0x1fc0, 0x1, 0x1);
        gbc.writeMem(0x136b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x73d5);
        EXPECT(gbc.pc(), 0x136d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0279
        gbc.setState(0x83c1, 0x8250, 0xeb60, 0xf599, 0x2a39, 0x5670, 0x1, 0x1);
        gbc.writeMem(0x83c1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8250);
        EXPECT(gbc.pc(), 0x83c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c1), 0xcb);
        EXPECT(gbc.readMem(0x83c2), 0xad);
        // CB AD 027B
        gbc.setState(0xb70b, 0xb66c, 0x20a0, 0xdfc2, 0x7bbe, 0x6bc0, 0x1, 0x1);
        gbc.writeMem(0xb70b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb66c);
        EXPECT(gbc.pc(), 0xb70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70b), 0xcb);
        EXPECT(gbc.readMem(0xb70c), 0xad);
        // CB AD 027C
        gbc.setState(0x6203, 0xdcef, 0x1080, 0x720a, 0xddcf, 0x574f, 0x1, 0x1);
        gbc.writeMem(0x6203, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xdcef);
        EXPECT(gbc.pc(), 0x6205);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 027D
        gbc.setState(0x8421, 0xd5a0, 0xb0a0, 0x1425, 0xf2a, 0xa6a8, 0x0, 0x0);
        gbc.writeMem(0x8421, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd5a0);
        EXPECT(gbc.pc(), 0x8423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8421), 0xcb);
        EXPECT(gbc.readMem(0x8422), 0xad);
        // CB AD 027E
        gbc.setState(0xb268, 0xe, 0x3c60, 0xbadb, 0x1f83, 0x947e, 0x1, 0x0);
        gbc.writeMem(0xb268, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe);
        EXPECT(gbc.pc(), 0xb26a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb268), 0xcb);
        EXPECT(gbc.readMem(0xb269), 0xad);
        // CB AD 027F
        gbc.setState(0x19fe, 0xc8a, 0xe650, 0xcec4, 0x829c, 0x6489, 0x1, 0x0);
        gbc.writeMem(0x19fe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc8a);
        EXPECT(gbc.pc(), 0x1a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0280
        gbc.setState(0x116d, 0x839c, 0x5260, 0xcd4b, 0x6ab9, 0x9c4d, 0x0, 0x0);
        gbc.writeMem(0x116d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x839c);
        EXPECT(gbc.pc(), 0x116f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0281
        gbc.setState(0x445b, 0x9989, 0x8db0, 0x3580, 0x65bc, 0xb60, 0x0, 0x0);
        gbc.writeMem(0x445b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9989);
        EXPECT(gbc.pc(), 0x445d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0282
        gbc.setState(0x7d4, 0xfd10, 0xa320, 0xa8ca, 0xa3ef, 0xe419, 0x0, 0x1);
        gbc.writeMem(0x7d4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfd10);
        EXPECT(gbc.pc(), 0x7d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0283
        gbc.setState(0x2d45, 0x9fe0, 0xed40, 0x8c36, 0x29e5, 0xbc2f, 0x1, 0x0);
        gbc.writeMem(0x2d45, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9fe0);
        EXPECT(gbc.pc(), 0x2d47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0284
        gbc.setState(0xd110, 0xf9ff, 0x3490, 0xb89b, 0x6b27, 0xe6b0, 0x1, 0x1);
        gbc.writeMem(0xd110, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf9ff);
        EXPECT(gbc.pc(), 0xd112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd110), 0xcb);
        EXPECT(gbc.readMem(0xd111), 0xad);
        // CB AD 0285
        gbc.setState(0xc45f, 0x59bd, 0x3220, 0xd9de, 0x2a65, 0x8751, 0x1, 0x1);
        gbc.writeMem(0xc45f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x59bd);
        EXPECT(gbc.pc(), 0xc461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45f), 0xcb);
        EXPECT(gbc.readMem(0xc460), 0xad);
        // CB AD 0286
        gbc.setState(0xd2fe, 0x4d63, 0x61b0, 0xe7f0, 0x70e6, 0x997b, 0x0, 0x0);
        gbc.writeMem(0xd2fe, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4d63);
        EXPECT(gbc.pc(), 0xd300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2fe), 0xcb);
        EXPECT(gbc.readMem(0xd2ff), 0xad);
        // CB AD 0287
        gbc.setState(0xd8f3, 0xe654, 0x9000, 0xfa1a, 0x2d40, 0xd1e8, 0x1, 0x1);
        gbc.writeMem(0xd8f3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe654);
        EXPECT(gbc.pc(), 0xd8f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f3), 0xcb);
        EXPECT(gbc.readMem(0xd8f4), 0xad);
        // CB AD 0288
        gbc.setState(0x2167, 0xf720, 0x2b10, 0xf55f, 0x209c, 0x7243, 0x1, 0x0);
        gbc.writeMem(0x2167, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf720);
        EXPECT(gbc.pc(), 0x2169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0289
        gbc.setState(0xb11f, 0xe7b2, 0xc7c0, 0x711d, 0x6a30, 0xd298, 0x1, 0x0);
        gbc.writeMem(0xb11f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe7b2);
        EXPECT(gbc.pc(), 0xb121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11f), 0xcb);
        EXPECT(gbc.readMem(0xb120), 0xad);
        // CB AD 028A
        gbc.setState(0x5295, 0xf51d, 0xe3e0, 0x9104, 0xb2d5, 0x3f12, 0x0, 0x0);
        gbc.writeMem(0x5295, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf51d);
        EXPECT(gbc.pc(), 0x5297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 028B
        gbc.setState(0x70c3, 0xea69, 0xc610, 0x2142, 0x5e3a, 0x7c8c, 0x1, 0x1);
        gbc.writeMem(0x70c3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xea69);
        EXPECT(gbc.pc(), 0x70c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 028D
        gbc.setState(0x551b, 0x8b6d, 0xf5a0, 0x3c7f, 0xf1cb, 0x2025, 0x1, 0x0);
        gbc.writeMem(0x551b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8b6d);
        EXPECT(gbc.pc(), 0x551d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 028E
        gbc.setState(0x163a, 0xd915, 0xb1f0, 0xea49, 0x5ca, 0x8ca6, 0x1, 0x0);
        gbc.writeMem(0x163a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd915);
        EXPECT(gbc.pc(), 0x163c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 028F
        gbc.setState(0xe849, 0x3db2, 0xe7b0, 0x9f0a, 0xbedb, 0x751, 0x1, 0x1);
        gbc.writeMem(0xe849, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3db2);
        EXPECT(gbc.pc(), 0xe84b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe849), 0xcb);
        EXPECT(gbc.readMem(0xe84a), 0xad);
        // CB AD 0290
        gbc.setState(0x6dd1, 0xfbb0, 0xc080, 0x355b, 0x8c2b, 0xfaf2, 0x1, 0x0);
        gbc.writeMem(0x6dd1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xfbb0);
        EXPECT(gbc.pc(), 0x6dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0291
        gbc.setState(0x95d5, 0x5667, 0x5170, 0x5f12, 0x3748, 0xbff0, 0x0, 0x1);
        gbc.writeMem(0x95d5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5667);
        EXPECT(gbc.pc(), 0x95d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95d5), 0xcb);
        EXPECT(gbc.readMem(0x95d6), 0xad);
        // CB AD 0292
        gbc.setState(0x4a3, 0xa39d, 0x1ae0, 0x21a9, 0xca9f, 0xce8a, 0x0, 0x1);
        gbc.writeMem(0x4a3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa39d);
        EXPECT(gbc.pc(), 0x4a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0293
        gbc.setState(0x37a9, 0x6ece, 0x7a10, 0xad2, 0xabcb, 0x3e5f, 0x1, 0x0);
        gbc.writeMem(0x37a9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6ece);
        EXPECT(gbc.pc(), 0x37ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0294
        gbc.setState(0x2b61, 0x503, 0x6b00, 0xc391, 0x2462, 0xe79a, 0x0, 0x1);
        gbc.writeMem(0x2b61, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x503);
        EXPECT(gbc.pc(), 0x2b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0295
        gbc.setState(0x7b01, 0xbb62, 0xa530, 0x64de, 0xcf77, 0xd0e0, 0x1, 0x1);
        gbc.writeMem(0x7b01, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xbb62);
        EXPECT(gbc.pc(), 0x7b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0296
        gbc.setState(0x5532, 0x1ed9, 0x6aa0, 0xdc3e, 0x186b, 0xdc77, 0x0, 0x1);
        gbc.writeMem(0x5532, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1ed9);
        EXPECT(gbc.pc(), 0x5534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0297
        gbc.setState(0x239b, 0xbe62, 0x6060, 0xf4f9, 0x2cbe, 0xa4d0, 0x1, 0x0);
        gbc.writeMem(0x239b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbe62);
        EXPECT(gbc.pc(), 0x239d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0298
        gbc.setState(0xaf61, 0x729e, 0x9ca0, 0xd2a5, 0xac86, 0x7da3, 0x1, 0x0);
        gbc.writeMem(0xaf61, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x729e);
        EXPECT(gbc.pc(), 0xaf63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf61), 0xcb);
        EXPECT(gbc.readMem(0xaf62), 0xad);
        // CB AD 0299
        gbc.setState(0x9612, 0xc63, 0xe1a0, 0x2598, 0x20b5, 0xa790, 0x0, 0x1);
        gbc.writeMem(0x9612, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc63);
        EXPECT(gbc.pc(), 0x9614);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9612), 0xcb);
        EXPECT(gbc.readMem(0x9613), 0xad);
        // CB AD 029A
        gbc.setState(0x6d41, 0x64bf, 0x3940, 0x19a6, 0x4d23, 0x293d, 0x1, 0x1);
        gbc.writeMem(0x6d41, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x64bf);
        EXPECT(gbc.pc(), 0x6d43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 029B
        gbc.setState(0xd92, 0xecd3, 0x6530, 0x135a, 0x2e09, 0xb7d, 0x1, 0x1);
        gbc.writeMem(0xd92, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xecd3);
        EXPECT(gbc.pc(), 0xd94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 029C
        gbc.setState(0x5164, 0x8f82, 0xcb50, 0x4943, 0x8136, 0x33ee, 0x0, 0x0);
        gbc.writeMem(0x5164, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8f82);
        EXPECT(gbc.pc(), 0x5166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 029D
        gbc.setState(0x7822, 0x7d5e, 0xcd50, 0xfa6, 0x91ca, 0xabde, 0x0, 0x0);
        gbc.writeMem(0x7822, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7d5e);
        EXPECT(gbc.pc(), 0x7824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 029E
        gbc.setState(0xbef7, 0x7621, 0x8f70, 0x2986, 0x9594, 0xd653, 0x1, 0x0);
        gbc.writeMem(0xbef7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7621);
        EXPECT(gbc.pc(), 0xbef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef7), 0xcb);
        EXPECT(gbc.readMem(0xbef8), 0xad);
        // CB AD 029F
        gbc.setState(0xa291, 0x661d, 0xd0b0, 0xc134, 0x784f, 0xe730, 0x0, 0x0);
        gbc.writeMem(0xa291, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x661d);
        EXPECT(gbc.pc(), 0xa293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa291), 0xcb);
        EXPECT(gbc.readMem(0xa292), 0xad);
        // CB AD 02A0
        gbc.setState(0xd784, 0x8b0, 0x8190, 0x26fa, 0x3372, 0x25d4, 0x0, 0x1);
        gbc.writeMem(0xd784, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8b0);
        EXPECT(gbc.pc(), 0xd786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd784), 0xcb);
        EXPECT(gbc.readMem(0xd785), 0xad);
        // CB AD 02A1
        gbc.setState(0x4424, 0xc52f, 0x7180, 0xf9f9, 0x5eab, 0xebfa, 0x0, 0x0);
        gbc.writeMem(0x4424, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc52f);
        EXPECT(gbc.pc(), 0x4426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02A2
        gbc.setState(0x9554, 0x1686, 0x7a80, 0xc056, 0xd24c, 0x8392, 0x1, 0x1);
        gbc.writeMem(0x9554, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1686);
        EXPECT(gbc.pc(), 0x9556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9554), 0xcb);
        EXPECT(gbc.readMem(0x9555), 0xad);
        // CB AD 02A3
        gbc.setState(0x6fff, 0x6160, 0x3360, 0xf270, 0x122, 0x28c8, 0x1, 0x0);
        gbc.writeMem(0x6fff, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6160);
        EXPECT(gbc.pc(), 0x7001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02A4
        gbc.setState(0xd753, 0x15d3, 0xe200, 0x1b6c, 0xc7ff, 0xda4e, 0x1, 0x1);
        gbc.writeMem(0xd753, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x15d3);
        EXPECT(gbc.pc(), 0xd755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd753), 0xcb);
        EXPECT(gbc.readMem(0xd754), 0xad);
        // CB AD 02A5
        gbc.setState(0x5fdf, 0x6ee7, 0x1290, 0x7ff4, 0x6893, 0xe546, 0x0, 0x1);
        gbc.writeMem(0x5fdf, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6ee7);
        EXPECT(gbc.pc(), 0x5fe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02A6
        gbc.setState(0xd232, 0x1fa3, 0x1de0, 0xbf3b, 0x3f4, 0x56c6, 0x1, 0x0);
        gbc.writeMem(0xd232, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1fa3);
        EXPECT(gbc.pc(), 0xd234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd232), 0xcb);
        EXPECT(gbc.readMem(0xd233), 0xad);
        // CB AD 02A7
        gbc.setState(0x1aac, 0x1456, 0x1200, 0x66e4, 0xa306, 0x9f31, 0x0, 0x0);
        gbc.writeMem(0x1aac, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1456);
        EXPECT(gbc.pc(), 0x1aae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02A8
        gbc.setState(0x1543, 0xc96d, 0x94d0, 0xcc5c, 0x32b, 0xaa88, 0x0, 0x0);
        gbc.writeMem(0x1543, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc96d);
        EXPECT(gbc.pc(), 0x1545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02A9
        gbc.setState(0x96d3, 0x2fd3, 0xfea0, 0x595e, 0xb014, 0xc93d, 0x1, 0x1);
        gbc.writeMem(0x96d3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2fd3);
        EXPECT(gbc.pc(), 0x96d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d3), 0xcb);
        EXPECT(gbc.readMem(0x96d4), 0xad);
        // CB AD 02AA
        gbc.setState(0x171, 0xc22b, 0xd0e0, 0x6e67, 0xb2ea, 0xaf69, 0x0, 0x0);
        gbc.writeMem(0x171, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc22b);
        EXPECT(gbc.pc(), 0x173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02AB
        gbc.setState(0x741f, 0x5809, 0x6e40, 0x4d75, 0xd7c5, 0x5bca, 0x1, 0x1);
        gbc.writeMem(0x741f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5809);
        EXPECT(gbc.pc(), 0x7421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02AC
        gbc.setState(0x1179, 0x44e5, 0xb260, 0x4901, 0x24da, 0xe967, 0x0, 0x0);
        gbc.writeMem(0x1179, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x44e5);
        EXPECT(gbc.pc(), 0x117b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02AD
        gbc.setState(0x2d1b, 0x29e0, 0xfc20, 0xc441, 0x908f, 0x1f89, 0x0, 0x1);
        gbc.writeMem(0x2d1b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x29e0);
        EXPECT(gbc.pc(), 0x2d1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02AE
        gbc.setState(0xe9b9, 0xfd4b, 0x3790, 0xa08e, 0xd769, 0x6461, 0x0, 0x1);
        gbc.writeMem(0xe9b9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xfd4b);
        EXPECT(gbc.pc(), 0xe9bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b9), 0xcb);
        EXPECT(gbc.readMem(0xe9ba), 0xad);
        // CB AD 02AF
        gbc.setState(0x8fa5, 0xcad8, 0x9570, 0x567e, 0xd8b7, 0x4235, 0x1, 0x1);
        gbc.writeMem(0x8fa5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xcad8);
        EXPECT(gbc.pc(), 0x8fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa5), 0xcb);
        EXPECT(gbc.readMem(0x8fa6), 0xad);
        // CB AD 02B0
        gbc.setState(0x7592, 0x465c, 0x6a80, 0x38ba, 0xf397, 0x2587, 0x1, 0x1);
        gbc.writeMem(0x7592, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x465c);
        EXPECT(gbc.pc(), 0x7594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02B1
        gbc.setState(0x9a2f, 0xeec1, 0xb1d0, 0x377e, 0x7497, 0xf663, 0x1, 0x1);
        gbc.writeMem(0x9a2f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xeec1);
        EXPECT(gbc.pc(), 0x9a31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a2f), 0xcb);
        EXPECT(gbc.readMem(0x9a30), 0xad);
        // CB AD 02B2
        gbc.setState(0x9f4f, 0xabc6, 0xf960, 0xf4ec, 0xb15a, 0x15d4, 0x1, 0x1);
        gbc.writeMem(0x9f4f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xabc6);
        EXPECT(gbc.pc(), 0x9f51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f4f), 0xcb);
        EXPECT(gbc.readMem(0x9f50), 0xad);
        // CB AD 02B3
        gbc.setState(0x3db5, 0x47e5, 0x9570, 0x6610, 0xbb06, 0x78d5, 0x0, 0x1);
        gbc.writeMem(0x3db5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x47e5);
        EXPECT(gbc.pc(), 0x3db7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02B4
        gbc.setState(0xa0e, 0x55be, 0xa1f0, 0xe37e, 0x565e, 0x7a4, 0x1, 0x0);
        gbc.writeMem(0xa0e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x55be);
        EXPECT(gbc.pc(), 0xa10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02B7
        gbc.setState(0x7677, 0x6112, 0x56c0, 0x7594, 0x4538, 0xfb82, 0x0, 0x0);
        gbc.writeMem(0x7677, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6112);
        EXPECT(gbc.pc(), 0x7679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02B8
        gbc.setState(0x2e0f, 0x7deb, 0x7ae0, 0x93c7, 0x84c, 0x15d5, 0x1, 0x0);
        gbc.writeMem(0x2e0f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7deb);
        EXPECT(gbc.pc(), 0x2e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02B9
        gbc.setState(0xe616, 0x3980, 0x5ef0, 0x56dd, 0xf58f, 0xeb9, 0x1, 0x1);
        gbc.writeMem(0xe616, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3980);
        EXPECT(gbc.pc(), 0xe618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe616), 0xcb);
        EXPECT(gbc.readMem(0xe617), 0xad);
        // CB AD 02BA
        gbc.setState(0x8a6d, 0xd961, 0x40a0, 0xab97, 0xe97e, 0x8721, 0x1, 0x1);
        gbc.writeMem(0x8a6d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd961);
        EXPECT(gbc.pc(), 0x8a6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a6d), 0xcb);
        EXPECT(gbc.readMem(0x8a6e), 0xad);
        // CB AD 02BB
        gbc.setState(0xef99, 0x5450, 0xed70, 0x35f3, 0x7c8b, 0xcbe7, 0x0, 0x0);
        gbc.writeMem(0xef99, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5450);
        EXPECT(gbc.pc(), 0xef9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef99), 0xcb);
        EXPECT(gbc.readMem(0xef9a), 0xad);
        // CB AD 02BD
        gbc.setState(0x9f0a, 0x96ec, 0xfc10, 0xea08, 0xad77, 0x3eb2, 0x0, 0x0);
        gbc.writeMem(0x9f0a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x96ec);
        EXPECT(gbc.pc(), 0x9f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f0a), 0xcb);
        EXPECT(gbc.readMem(0x9f0b), 0xad);
        // CB AD 02BE
        gbc.setState(0xa6c1, 0xc7d3, 0x230, 0x9f6e, 0x4675, 0x7720, 0x1, 0x1);
        gbc.writeMem(0xa6c1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc7d3);
        EXPECT(gbc.pc(), 0xa6c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6c1), 0xcb);
        EXPECT(gbc.readMem(0xa6c2), 0xad);
        // CB AD 02BF
        gbc.setState(0x43f2, 0xbc17, 0x2f40, 0x45d6, 0x5544, 0x8c1d, 0x0, 0x0);
        gbc.writeMem(0x43f2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xbc17);
        EXPECT(gbc.pc(), 0x43f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02C0
        gbc.setState(0x82c, 0x15ad, 0xe560, 0x1e28, 0x106b, 0x50b1, 0x0, 0x1);
        gbc.writeMem(0x82c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x15ad);
        EXPECT(gbc.pc(), 0x82e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02C1
        gbc.setState(0x2035, 0x95d5, 0x4280, 0x417, 0xe77c, 0xde69, 0x0, 0x0);
        gbc.writeMem(0x2035, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x95d5);
        EXPECT(gbc.pc(), 0x2037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02C2
        gbc.setState(0x7bcd, 0x11ca, 0xfb70, 0xf7ce, 0x72c, 0x3425, 0x1, 0x0);
        gbc.writeMem(0x7bcd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x11ca);
        EXPECT(gbc.pc(), 0x7bcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02C3
        gbc.setState(0x58a2, 0x7a07, 0x5aa0, 0x367a, 0x7b1d, 0xc24b, 0x0, 0x0);
        gbc.writeMem(0x58a2, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7a07);
        EXPECT(gbc.pc(), 0x58a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02C4
        gbc.setState(0xee17, 0x32a8, 0x10c0, 0xac02, 0x2d83, 0xa1f6, 0x0, 0x1);
        gbc.writeMem(0xee17, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x32a8);
        EXPECT(gbc.pc(), 0xee19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee17), 0xcb);
        EXPECT(gbc.readMem(0xee18), 0xad);
        // CB AD 02C5
        gbc.setState(0x4dd8, 0x98a1, 0x9f90, 0x30cd, 0xed6f, 0xca57, 0x1, 0x1);
        gbc.writeMem(0x4dd8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x98a1);
        EXPECT(gbc.pc(), 0x4dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02C6
        gbc.setState(0x6cf6, 0xacce, 0x2dd0, 0x69c, 0x7f99, 0x2898, 0x0, 0x0);
        gbc.writeMem(0x6cf6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xacce);
        EXPECT(gbc.pc(), 0x6cf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02C8
        gbc.setState(0x7023, 0xf10d, 0xcbd0, 0xbd28, 0xed47, 0x78f4, 0x1, 0x1);
        gbc.writeMem(0x7023, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf10d);
        EXPECT(gbc.pc(), 0x7025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02C9
        gbc.setState(0x8339, 0xe4e2, 0x7a00, 0x424b, 0x9a86, 0x7ff5, 0x1, 0x0);
        gbc.writeMem(0x8339, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe4e2);
        EXPECT(gbc.pc(), 0x833b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8339), 0xcb);
        EXPECT(gbc.readMem(0x833a), 0xad);
        // CB AD 02CA
        gbc.setState(0x9085, 0xf347, 0x840, 0x225d, 0x8273, 0x236, 0x0, 0x0);
        gbc.writeMem(0x9085, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf347);
        EXPECT(gbc.pc(), 0x9087);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9085), 0xcb);
        EXPECT(gbc.readMem(0x9086), 0xad);
        // CB AD 02CB
        gbc.setState(0x76dc, 0x2850, 0x7f60, 0x3493, 0x5657, 0xd15d, 0x1, 0x1);
        gbc.writeMem(0x76dc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2850);
        EXPECT(gbc.pc(), 0x76de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02CC
        gbc.setState(0x96b1, 0xbe78, 0x6980, 0xf28b, 0x116f, 0xf00, 0x1, 0x1);
        gbc.writeMem(0x96b1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbe78);
        EXPECT(gbc.pc(), 0x96b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b1), 0xcb);
        EXPECT(gbc.readMem(0x96b2), 0xad);
        // CB AD 02CD
        gbc.setState(0xb15, 0x411e, 0x9240, 0x4d05, 0xb8ec, 0x59fd, 0x0, 0x1);
        gbc.writeMem(0xb15, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x411e);
        EXPECT(gbc.pc(), 0xb17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02CE
        gbc.setState(0x2b3a, 0x1766, 0x6fa0, 0x1880, 0xf96a, 0xe0c4, 0x0, 0x0);
        gbc.writeMem(0x2b3a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1766);
        EXPECT(gbc.pc(), 0x2b3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02CF
        gbc.setState(0x1bd8, 0x544a, 0x8d80, 0xf416, 0x393c, 0x316e, 0x1, 0x1);
        gbc.writeMem(0x1bd8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x544a);
        EXPECT(gbc.pc(), 0x1bda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02D0
        gbc.setState(0x2ef1, 0x2564, 0x2490, 0x88b3, 0x21e9, 0x1a6a, 0x0, 0x0);
        gbc.writeMem(0x2ef1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2564);
        EXPECT(gbc.pc(), 0x2ef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02D1
        gbc.setState(0x3909, 0xb405, 0xb860, 0x6acc, 0x94e6, 0x6eef, 0x1, 0x1);
        gbc.writeMem(0x3909, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb405);
        EXPECT(gbc.pc(), 0x390b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02D3
        gbc.setState(0x2b67, 0xe6d6, 0xfa90, 0x3d36, 0xb016, 0xc562, 0x1, 0x0);
        gbc.writeMem(0x2b67, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe6d6);
        EXPECT(gbc.pc(), 0x2b69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02D4
        gbc.setState(0xb010, 0x3bff, 0x4a00, 0xe957, 0xb032, 0xdabf, 0x1, 0x1);
        gbc.writeMem(0xb010, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3bff);
        EXPECT(gbc.pc(), 0xb012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb010), 0xcb);
        EXPECT(gbc.readMem(0xb011), 0xad);
        // CB AD 02D5
        gbc.setState(0x6cf4, 0xc31c, 0x28c0, 0xd517, 0xe43f, 0x89f5, 0x1, 0x0);
        gbc.writeMem(0x6cf4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc31c);
        EXPECT(gbc.pc(), 0x6cf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02D6
        gbc.setState(0x4ec0, 0x8ad, 0xde40, 0xf8a1, 0x1710, 0x6f4f, 0x1, 0x1);
        gbc.writeMem(0x4ec0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8ad);
        EXPECT(gbc.pc(), 0x4ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02D7
        gbc.setState(0xd86d, 0xa7a3, 0xb0a0, 0xfa21, 0xf1d7, 0xa434, 0x0, 0x0);
        gbc.writeMem(0xd86d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa7a3);
        EXPECT(gbc.pc(), 0xd86f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd86d), 0xcb);
        EXPECT(gbc.readMem(0xd86e), 0xad);
        // CB AD 02D8
        gbc.setState(0xd416, 0xc69d, 0xccf0, 0xdb4d, 0x9173, 0xea63, 0x0, 0x0);
        gbc.writeMem(0xd416, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc69d);
        EXPECT(gbc.pc(), 0xd418);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd416), 0xcb);
        EXPECT(gbc.readMem(0xd417), 0xad);
        // CB AD 02D9
        gbc.setState(0xc0a0, 0xef03, 0xf680, 0x5955, 0xf7b1, 0x4a54, 0x0, 0x1);
        gbc.writeMem(0xc0a0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xef03);
        EXPECT(gbc.pc(), 0xc0a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a0), 0xcb);
        EXPECT(gbc.readMem(0xc0a1), 0xad);
        // CB AD 02DA
        gbc.setState(0xe895, 0xe1bf, 0x3280, 0x255d, 0x4420, 0x826c, 0x0, 0x0);
        gbc.writeMem(0xe895, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe1bf);
        EXPECT(gbc.pc(), 0xe897);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe895), 0xcb);
        EXPECT(gbc.readMem(0xe896), 0xad);
        // CB AD 02DB
        gbc.setState(0xa072, 0x8591, 0x4ff0, 0xfbca, 0x598e, 0xe57, 0x1, 0x0);
        gbc.writeMem(0xa072, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8591);
        EXPECT(gbc.pc(), 0xa074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa072), 0xcb);
        EXPECT(gbc.readMem(0xa073), 0xad);
        // CB AD 02DC
        gbc.setState(0xc991, 0x5ade, 0xddc0, 0x5d0b, 0x1cf2, 0xadc1, 0x0, 0x1);
        gbc.writeMem(0xc991, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5ade);
        EXPECT(gbc.pc(), 0xc993);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc991), 0xcb);
        EXPECT(gbc.readMem(0xc992), 0xad);
        // CB AD 02DD
        gbc.setState(0x91fd, 0xa5a9, 0x8610, 0x4625, 0x909a, 0xe62f, 0x1, 0x0);
        gbc.writeMem(0x91fd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa5a9);
        EXPECT(gbc.pc(), 0x91ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91fd), 0xcb);
        EXPECT(gbc.readMem(0x91fe), 0xad);
        // CB AD 02DE
        gbc.setState(0xbb8e, 0x207a, 0x2aa0, 0x1e9b, 0x53d1, 0xea5a, 0x1, 0x0);
        gbc.writeMem(0xbb8e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x207a);
        EXPECT(gbc.pc(), 0xbb90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb8e), 0xcb);
        EXPECT(gbc.readMem(0xbb8f), 0xad);
        // CB AD 02DF
        gbc.setState(0x8e75, 0x366e, 0xdba0, 0xfa18, 0xbcb4, 0x6fd8, 0x0, 0x1);
        gbc.writeMem(0x8e75, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x366e);
        EXPECT(gbc.pc(), 0x8e77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e75), 0xcb);
        EXPECT(gbc.readMem(0x8e76), 0xad);
        // CB AD 02E0
        gbc.setState(0x907e, 0x6e2e, 0x7100, 0x63e3, 0xa056, 0x7e35, 0x1, 0x1);
        gbc.writeMem(0x907e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6e2e);
        EXPECT(gbc.pc(), 0x9080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x907e), 0xcb);
        EXPECT(gbc.readMem(0x907f), 0xad);
        // CB AD 02E1
        gbc.setState(0x7b7d, 0xce44, 0x2810, 0x6be1, 0xc3f1, 0x5527, 0x1, 0x1);
        gbc.writeMem(0x7b7d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xce44);
        EXPECT(gbc.pc(), 0x7b7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02E3
        gbc.setState(0xca1a, 0x8bd2, 0x6dc0, 0xc64b, 0xb6d7, 0x98f, 0x0, 0x0);
        gbc.writeMem(0xca1a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8bd2);
        EXPECT(gbc.pc(), 0xca1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca1a), 0xcb);
        EXPECT(gbc.readMem(0xca1b), 0xad);
        // CB AD 02E5
        gbc.setState(0x6dc, 0x362d, 0x6320, 0x3c95, 0x82e9, 0x2f3e, 0x0, 0x1);
        gbc.writeMem(0x6dc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x362d);
        EXPECT(gbc.pc(), 0x6de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02E6
        gbc.setState(0xa5a3, 0x8e63, 0xafa0, 0x37c5, 0x99c, 0x9ff5, 0x1, 0x0);
        gbc.writeMem(0xa5a3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8e63);
        EXPECT(gbc.pc(), 0xa5a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a3), 0xcb);
        EXPECT(gbc.readMem(0xa5a4), 0xad);
        // CB AD 02E7
        gbc.setState(0xc10b, 0x7ae8, 0x3b50, 0xfeb4, 0x3af3, 0xb02, 0x1, 0x0);
        gbc.writeMem(0xc10b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7ae8);
        EXPECT(gbc.pc(), 0xc10d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc10b), 0xcb);
        EXPECT(gbc.readMem(0xc10c), 0xad);
        // CB AD 02E9
        gbc.setState(0x3d2c, 0xc2d9, 0x7e60, 0x2265, 0x67e7, 0xa4b2, 0x1, 0x0);
        gbc.writeMem(0x3d2c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc2d9);
        EXPECT(gbc.pc(), 0x3d2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02EA
        gbc.setState(0xe4d6, 0xa5c1, 0x7930, 0x5ec5, 0x47b0, 0x1d93, 0x0, 0x1);
        gbc.writeMem(0xe4d6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa5c1);
        EXPECT(gbc.pc(), 0xe4d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4d6), 0xcb);
        EXPECT(gbc.readMem(0xe4d7), 0xad);
        // CB AD 02EB
        gbc.setState(0x1fbd, 0x39bd, 0x52a0, 0xe326, 0xba15, 0xc2a0, 0x1, 0x1);
        gbc.writeMem(0x1fbd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x39bd);
        EXPECT(gbc.pc(), 0x1fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02EC
        gbc.setState(0x1326, 0x7ed0, 0xfee0, 0x2ff3, 0x6ea5, 0x2b8d, 0x1, 0x0);
        gbc.writeMem(0x1326, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7ed0);
        EXPECT(gbc.pc(), 0x1328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02ED
        gbc.setState(0xb2ac, 0xe3a, 0x8d70, 0x809f, 0xe507, 0xa7ed, 0x1, 0x0);
        gbc.writeMem(0xb2ac, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe3a);
        EXPECT(gbc.pc(), 0xb2ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ac), 0xcb);
        EXPECT(gbc.readMem(0xb2ad), 0xad);
        // CB AD 02EE
        gbc.setState(0xa83d, 0x5501, 0x5140, 0x5cd1, 0x6790, 0xd3e7, 0x1, 0x1);
        gbc.writeMem(0xa83d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5501);
        EXPECT(gbc.pc(), 0xa83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa83d), 0xcb);
        EXPECT(gbc.readMem(0xa83e), 0xad);
        // CB AD 02EF
        gbc.setState(0xe826, 0x8578, 0x77f0, 0x53cb, 0xabb1, 0xc7af, 0x1, 0x0);
        gbc.writeMem(0xe826, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8578);
        EXPECT(gbc.pc(), 0xe828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe826), 0xcb);
        EXPECT(gbc.readMem(0xe827), 0xad);
        // CB AD 02F0
        gbc.setState(0x8981, 0x2950, 0xea10, 0xdd08, 0xba6c, 0x700a, 0x0, 0x1);
        gbc.writeMem(0x8981, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x2950);
        EXPECT(gbc.pc(), 0x8983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8981), 0xcb);
        EXPECT(gbc.readMem(0x8982), 0xad);
        // CB AD 02F1
        gbc.setState(0x3ac9, 0xe209, 0x5780, 0xad0, 0x7ab5, 0x2adf, 0x1, 0x0);
        gbc.writeMem(0x3ac9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe209);
        EXPECT(gbc.pc(), 0x3acb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 02F3
        gbc.setState(0xaf31, 0x4ff2, 0xe050, 0xb3f4, 0xdd72, 0xcfed, 0x0, 0x1);
        gbc.writeMem(0xaf31, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4ff2);
        EXPECT(gbc.pc(), 0xaf33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf31), 0xcb);
        EXPECT(gbc.readMem(0xaf32), 0xad);
        // CB AD 02F4
        gbc.setState(0xa41c, 0x360a, 0x6230, 0x22c5, 0xa3e3, 0xf0aa, 0x1, 0x1);
        gbc.writeMem(0xa41c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x360a);
        EXPECT(gbc.pc(), 0xa41e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa41c), 0xcb);
        EXPECT(gbc.readMem(0xa41d), 0xad);
        // CB AD 02F6
        gbc.setState(0x9167, 0xaf3, 0x57b0, 0x8280, 0x2882, 0xc23c, 0x1, 0x1);
        gbc.writeMem(0x9167, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xaf3);
        EXPECT(gbc.pc(), 0x9169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9167), 0xcb);
        EXPECT(gbc.readMem(0x9168), 0xad);
        // CB AD 02F7
        gbc.setState(0xb3d4, 0xb9e1, 0x3f50, 0x848a, 0xc044, 0xb022, 0x1, 0x1);
        gbc.writeMem(0xb3d4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb9e1);
        EXPECT(gbc.pc(), 0xb3d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d4), 0xcb);
        EXPECT(gbc.readMem(0xb3d5), 0xad);
        // CB AD 02F8
        gbc.setState(0xc7a6, 0xcf33, 0xbf90, 0xdff, 0xe85e, 0xe279, 0x0, 0x0);
        gbc.writeMem(0xc7a6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xcf33);
        EXPECT(gbc.pc(), 0xc7a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7a6), 0xcb);
        EXPECT(gbc.readMem(0xc7a7), 0xad);
        // CB AD 02F9
        gbc.setState(0x8d0b, 0xf440, 0xbf20, 0x6d0b, 0xd587, 0xd3ab, 0x0, 0x0);
        gbc.writeMem(0x8d0b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf440);
        EXPECT(gbc.pc(), 0x8d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d0b), 0xcb);
        EXPECT(gbc.readMem(0x8d0c), 0xad);
        // CB AD 02FA
        gbc.setState(0x9828, 0xb666, 0x9150, 0x4e0d, 0x84a2, 0x7995, 0x0, 0x0);
        gbc.writeMem(0x9828, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb666);
        EXPECT(gbc.pc(), 0x982a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9828), 0xcb);
        EXPECT(gbc.readMem(0x9829), 0xad);
        // CB AD 02FB
        gbc.setState(0xcd39, 0x3817, 0xf70, 0xf279, 0xb60, 0xb935, 0x0, 0x0);
        gbc.writeMem(0xcd39, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3817);
        EXPECT(gbc.pc(), 0xcd3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd39), 0xcb);
        EXPECT(gbc.readMem(0xcd3a), 0xad);
        // CB AD 02FC
        gbc.setState(0x457e, 0x703d, 0x16f0, 0x42ae, 0xfc8a, 0x3a9d, 0x0, 0x1);
        gbc.writeMem(0x457e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x703d);
        EXPECT(gbc.pc(), 0x4580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02FD
        gbc.setState(0x6418, 0x8aab, 0xc150, 0x7656, 0x23aa, 0x2b76, 0x1, 0x0);
        gbc.writeMem(0x6418, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8aab);
        EXPECT(gbc.pc(), 0x641a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02FE
        gbc.setState(0x55ee, 0x4af3, 0x8b10, 0x2465, 0x5f16, 0x8075, 0x1, 0x0);
        gbc.writeMem(0x55ee, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4af3);
        EXPECT(gbc.pc(), 0x55f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 02FF
        gbc.setState(0x13cc, 0xe4c2, 0xbae0, 0x96a6, 0x8adf, 0x3825, 0x1, 0x1);
        gbc.writeMem(0x13cc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe4c2);
        EXPECT(gbc.pc(), 0x13ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0300
        gbc.setState(0xe2ee, 0xa952, 0xa380, 0x5055, 0xf088, 0xed90, 0x0, 0x1);
        gbc.writeMem(0xe2ee, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa952);
        EXPECT(gbc.pc(), 0xe2f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2ee), 0xcb);
        EXPECT(gbc.readMem(0xe2ef), 0xad);
        // CB AD 0301
        gbc.setState(0x8b17, 0xfdfd, 0x94d0, 0x32dc, 0xbe8e, 0x2650, 0x1, 0x0);
        gbc.writeMem(0x8b17, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xfdfd);
        EXPECT(gbc.pc(), 0x8b19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b17), 0xcb);
        EXPECT(gbc.readMem(0x8b18), 0xad);
        // CB AD 0302
        gbc.setState(0x8140, 0xc03c, 0xad80, 0x37d7, 0x3be3, 0x7b48, 0x1, 0x1);
        gbc.writeMem(0x8140, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc03c);
        EXPECT(gbc.pc(), 0x8142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8140), 0xcb);
        EXPECT(gbc.readMem(0x8141), 0xad);
        // CB AD 0303
        gbc.setState(0x237d, 0x32c1, 0x2730, 0x6a79, 0xbfef, 0x6932, 0x1, 0x0);
        gbc.writeMem(0x237d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x32c1);
        EXPECT(gbc.pc(), 0x237f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0304
        gbc.setState(0x59f4, 0x2c24, 0x1af0, 0xeb2a, 0xcb2, 0x4403, 0x1, 0x1);
        gbc.writeMem(0x59f4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2c24);
        EXPECT(gbc.pc(), 0x59f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0306
        gbc.setState(0x74, 0x554f, 0xe700, 0x1aea, 0xacc2, 0xe6c0, 0x0, 0x1);
        gbc.writeMem(0x74, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x554f);
        EXPECT(gbc.pc(), 0x76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0307
        gbc.setState(0xc51a, 0xed72, 0xca80, 0x3d07, 0xa610, 0x8f7, 0x0, 0x0);
        gbc.writeMem(0xc51a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xed72);
        EXPECT(gbc.pc(), 0xc51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc51a), 0xcb);
        EXPECT(gbc.readMem(0xc51b), 0xad);
        // CB AD 0308
        gbc.setState(0x556c, 0x6f10, 0x9690, 0x4370, 0xfd9, 0xa6d4, 0x0, 0x1);
        gbc.writeMem(0x556c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6f10);
        EXPECT(gbc.pc(), 0x556e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0309
        gbc.setState(0x69f7, 0xd27c, 0x41e0, 0xbb88, 0x6672, 0x64e9, 0x1, 0x0);
        gbc.writeMem(0x69f7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd27c);
        EXPECT(gbc.pc(), 0x69f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 030A
        gbc.setState(0x718b, 0xb3d8, 0x7620, 0xc542, 0x32b2, 0xca8c, 0x0, 0x0);
        gbc.writeMem(0x718b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb3d8);
        EXPECT(gbc.pc(), 0x718d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 030B
        gbc.setState(0xcd42, 0xd9d7, 0x2a50, 0x853f, 0xaad, 0x6eee, 0x0, 0x0);
        gbc.writeMem(0xcd42, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd9d7);
        EXPECT(gbc.pc(), 0xcd44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd42), 0xcb);
        EXPECT(gbc.readMem(0xcd43), 0xad);
        // CB AD 030C
        gbc.setState(0xb54f, 0xa0dc, 0x1d10, 0xd48c, 0xb4eb, 0xf577, 0x0, 0x0);
        gbc.writeMem(0xb54f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa0dc);
        EXPECT(gbc.pc(), 0xb551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb54f), 0xcb);
        EXPECT(gbc.readMem(0xb550), 0xad);
        // CB AD 030D
        gbc.setState(0xade4, 0x39ce, 0xbc20, 0xaa31, 0x3da1, 0xb2ea, 0x0, 0x0);
        gbc.writeMem(0xade4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x39ce);
        EXPECT(gbc.pc(), 0xade6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xade4), 0xcb);
        EXPECT(gbc.readMem(0xade5), 0xad);
        // CB AD 030E
        gbc.setState(0x931a, 0xab2c, 0xd840, 0xdc2a, 0xe394, 0xad38, 0x1, 0x1);
        gbc.writeMem(0x931a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xab2c);
        EXPECT(gbc.pc(), 0x931c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x931a), 0xcb);
        EXPECT(gbc.readMem(0x931b), 0xad);
        // CB AD 030F
        gbc.setState(0x150f, 0x764e, 0xa070, 0xc552, 0xbe73, 0xa17b, 0x0, 0x0);
        gbc.writeMem(0x150f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x764e);
        EXPECT(gbc.pc(), 0x1511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0310
        gbc.setState(0x777b, 0x1421, 0xe460, 0x186, 0x60a9, 0x82a7, 0x1, 0x0);
        gbc.writeMem(0x777b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1421);
        EXPECT(gbc.pc(), 0x777d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0311
        gbc.setState(0xbec9, 0xd28c, 0x23c0, 0x4961, 0x54fd, 0x8647, 0x0, 0x1);
        gbc.writeMem(0xbec9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd28c);
        EXPECT(gbc.pc(), 0xbecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec9), 0xcb);
        EXPECT(gbc.readMem(0xbeca), 0xad);
        // CB AD 0312
        gbc.setState(0x8c96, 0x4eb8, 0xfa10, 0x7bf4, 0x2474, 0x7769, 0x1, 0x1);
        gbc.writeMem(0x8c96, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4eb8);
        EXPECT(gbc.pc(), 0x8c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c96), 0xcb);
        EXPECT(gbc.readMem(0x8c97), 0xad);
        // CB AD 0313
        gbc.setState(0xa34a, 0xe3b9, 0x3ac0, 0x28e0, 0x3cdc, 0x8772, 0x0, 0x1);
        gbc.writeMem(0xa34a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe3b9);
        EXPECT(gbc.pc(), 0xa34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34a), 0xcb);
        EXPECT(gbc.readMem(0xa34b), 0xad);
        // CB AD 0314
        gbc.setState(0xd1d1, 0x5818, 0xc810, 0x9432, 0xc7b3, 0xf1d, 0x0, 0x1);
        gbc.writeMem(0xd1d1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5818);
        EXPECT(gbc.pc(), 0xd1d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d1), 0xcb);
        EXPECT(gbc.readMem(0xd1d2), 0xad);
        // CB AD 0315
        gbc.setState(0x9a51, 0xe49b, 0xd370, 0xc2eb, 0x68ad, 0x6bfe, 0x0, 0x0);
        gbc.writeMem(0x9a51, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe49b);
        EXPECT(gbc.pc(), 0x9a53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a51), 0xcb);
        EXPECT(gbc.readMem(0x9a52), 0xad);
        // CB AD 0316
        gbc.setState(0xd952, 0xc9de, 0x62e0, 0xfe64, 0xe660, 0x3fb5, 0x0, 0x0);
        gbc.writeMem(0xd952, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc9de);
        EXPECT(gbc.pc(), 0xd954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd952), 0xcb);
        EXPECT(gbc.readMem(0xd953), 0xad);
        // CB AD 0317
        gbc.setState(0x7cc4, 0x1bc9, 0xe510, 0xdfc7, 0xbc0c, 0xe510, 0x0, 0x1);
        gbc.writeMem(0x7cc4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1bc9);
        EXPECT(gbc.pc(), 0x7cc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0318
        gbc.setState(0x8405, 0x92d5, 0x1440, 0xff80, 0x8233, 0x65d6, 0x0, 0x1);
        gbc.writeMem(0x8405, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x92d5);
        EXPECT(gbc.pc(), 0x8407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8405), 0xcb);
        EXPECT(gbc.readMem(0x8406), 0xad);
        // CB AD 0319
        gbc.setState(0x57ea, 0x3094, 0xccc0, 0xd054, 0x14f, 0x245d, 0x0, 0x1);
        gbc.writeMem(0x57ea, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3094);
        EXPECT(gbc.pc(), 0x57ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 031B
        gbc.setState(0xe704, 0x968e, 0x9610, 0xdc9b, 0x6119, 0x3f45, 0x1, 0x1);
        gbc.writeMem(0xe704, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x968e);
        EXPECT(gbc.pc(), 0xe706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe704), 0xcb);
        EXPECT(gbc.readMem(0xe705), 0xad);
        // CB AD 031C
        gbc.setState(0x1c45, 0xf642, 0x2680, 0x93b2, 0x460, 0x1b9b, 0x1, 0x1);
        gbc.writeMem(0x1c45, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf642);
        EXPECT(gbc.pc(), 0x1c47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 031D
        gbc.setState(0xc50c, 0xa3ae, 0x97c0, 0xcf6, 0x1911, 0xb2e7, 0x0, 0x0);
        gbc.writeMem(0xc50c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa3ae);
        EXPECT(gbc.pc(), 0xc50e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50c), 0xcb);
        EXPECT(gbc.readMem(0xc50d), 0xad);
        // CB AD 031E
        gbc.setState(0xe8ea, 0xc91f, 0x7ff0, 0x2c92, 0x538d, 0xe817, 0x1, 0x0);
        gbc.writeMem(0xe8ea, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc91f);
        EXPECT(gbc.pc(), 0xe8ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8ea), 0xcb);
        EXPECT(gbc.readMem(0xe8eb), 0xad);
        // CB AD 031F
        gbc.setState(0x8fe3, 0x4934, 0x39c0, 0x9914, 0x2916, 0x6f9, 0x1, 0x0);
        gbc.writeMem(0x8fe3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4934);
        EXPECT(gbc.pc(), 0x8fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe3), 0xcb);
        EXPECT(gbc.readMem(0x8fe4), 0xad);
        // CB AD 0320
        gbc.setState(0x2199, 0x17fb, 0x1c00, 0xf874, 0x95bd, 0x7a78, 0x1, 0x1);
        gbc.writeMem(0x2199, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x17fb);
        EXPECT(gbc.pc(), 0x219b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0321
        gbc.setState(0xa87, 0x8df9, 0x5e20, 0x6549, 0x29df, 0x5346, 0x0, 0x1);
        gbc.writeMem(0xa87, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8df9);
        EXPECT(gbc.pc(), 0xa89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0322
        gbc.setState(0xb17b, 0xc358, 0xde10, 0xbec1, 0x2b6a, 0x7bde, 0x1, 0x1);
        gbc.writeMem(0xb17b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc358);
        EXPECT(gbc.pc(), 0xb17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb17b), 0xcb);
        EXPECT(gbc.readMem(0xb17c), 0xad);
        // CB AD 0323
        gbc.setState(0x2616, 0xea74, 0xc010, 0xc026, 0xeac0, 0x69f1, 0x1, 0x1);
        gbc.writeMem(0x2616, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xea74);
        EXPECT(gbc.pc(), 0x2618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0324
        gbc.setState(0xbb5d, 0xf87a, 0x6e90, 0xb5d8, 0x2ad4, 0x36fe, 0x0, 0x1);
        gbc.writeMem(0xbb5d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf87a);
        EXPECT(gbc.pc(), 0xbb5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb5d), 0xcb);
        EXPECT(gbc.readMem(0xbb5e), 0xad);
        // CB AD 0325
        gbc.setState(0x3492, 0xe05e, 0x5700, 0x333f, 0x896, 0x3c83, 0x0, 0x0);
        gbc.writeMem(0x3492, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe05e);
        EXPECT(gbc.pc(), 0x3494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0326
        gbc.setState(0x15d8, 0x21b9, 0x6640, 0x6419, 0x693a, 0xc434, 0x0, 0x0);
        gbc.writeMem(0x15d8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x21b9);
        EXPECT(gbc.pc(), 0x15da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0327
        gbc.setState(0xe878, 0x79d7, 0xc740, 0xd086, 0x3469, 0x817f, 0x0, 0x1);
        gbc.writeMem(0xe878, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x79d7);
        EXPECT(gbc.pc(), 0xe87a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe878), 0xcb);
        EXPECT(gbc.readMem(0xe879), 0xad);
        // CB AD 0329
        gbc.setState(0x54a3, 0xb219, 0x82c0, 0x4152, 0xc3d7, 0xcbfe, 0x0, 0x1);
        gbc.writeMem(0x54a3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb219);
        EXPECT(gbc.pc(), 0x54a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 032A
        gbc.setState(0x7fc4, 0xbf55, 0x8770, 0x88a, 0x9d81, 0x97e6, 0x1, 0x0);
        gbc.writeMem(0x7fc4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbf55);
        EXPECT(gbc.pc(), 0x7fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 032B
        gbc.setState(0x67b, 0x236d, 0xea30, 0x4690, 0x9867, 0x6a45, 0x0, 0x1);
        gbc.writeMem(0x67b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x236d);
        EXPECT(gbc.pc(), 0x67d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 032C
        gbc.setState(0xa133, 0x894f, 0xfcb0, 0xdd34, 0x49b4, 0x525d, 0x0, 0x1);
        gbc.writeMem(0xa133, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x894f);
        EXPECT(gbc.pc(), 0xa135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa133), 0xcb);
        EXPECT(gbc.readMem(0xa134), 0xad);
        // CB AD 032D
        gbc.setState(0x46eb, 0x6584, 0x72a0, 0xc4a2, 0x1018, 0x68df, 0x1, 0x0);
        gbc.writeMem(0x46eb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6584);
        EXPECT(gbc.pc(), 0x46ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 032E
        gbc.setState(0x879a, 0x8581, 0x31a0, 0x802a, 0xe8dd, 0x6b2a, 0x0, 0x1);
        gbc.writeMem(0x879a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8581);
        EXPECT(gbc.pc(), 0x879c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x879a), 0xcb);
        EXPECT(gbc.readMem(0x879b), 0xad);
        // CB AD 0330
        gbc.setState(0xe566, 0x2677, 0xb310, 0x6138, 0x5815, 0x4e25, 0x0, 0x1);
        gbc.writeMem(0xe566, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2677);
        EXPECT(gbc.pc(), 0xe568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe566), 0xcb);
        EXPECT(gbc.readMem(0xe567), 0xad);
        // CB AD 0331
        gbc.setState(0xdcb1, 0xe59a, 0x6d20, 0xc43d, 0x44e2, 0x39eb, 0x1, 0x1);
        gbc.writeMem(0xdcb1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe59a);
        EXPECT(gbc.pc(), 0xdcb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb1), 0xcb);
        EXPECT(gbc.readMem(0xdcb2), 0xad);
        // CB AD 0332
        gbc.setState(0x3649, 0x1a1c, 0xce40, 0x445e, 0xf260, 0x64aa, 0x0, 0x0);
        gbc.writeMem(0x3649, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1a1c);
        EXPECT(gbc.pc(), 0x364b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0333
        gbc.setState(0x3bfd, 0x5de8, 0x6ed0, 0xb949, 0x590a, 0x7e22, 0x1, 0x0);
        gbc.writeMem(0x3bfd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5de8);
        EXPECT(gbc.pc(), 0x3bff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0335
        gbc.setState(0xd694, 0x2c82, 0x66e0, 0x4975, 0xf4d2, 0x750b, 0x0, 0x1);
        gbc.writeMem(0xd694, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2c82);
        EXPECT(gbc.pc(), 0xd696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd694), 0xcb);
        EXPECT(gbc.readMem(0xd695), 0xad);
        // CB AD 0336
        gbc.setState(0x4a65, 0xc1ac, 0x27d0, 0xdedf, 0xc9c3, 0x7616, 0x1, 0x0);
        gbc.writeMem(0x4a65, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc1ac);
        EXPECT(gbc.pc(), 0x4a67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0337
        gbc.setState(0x861e, 0xb679, 0x430, 0x94c0, 0xd32d, 0x5818, 0x1, 0x0);
        gbc.writeMem(0x861e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb679);
        EXPECT(gbc.pc(), 0x8620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x861e), 0xcb);
        EXPECT(gbc.readMem(0x861f), 0xad);
        // CB AD 0338
        gbc.setState(0x5a93, 0x9fd7, 0xa090, 0x76c, 0xc2b0, 0x81f4, 0x1, 0x0);
        gbc.writeMem(0x5a93, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9fd7);
        EXPECT(gbc.pc(), 0x5a95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0339
        gbc.setState(0x277b, 0x4620, 0x54a0, 0x7fe5, 0xc946, 0x62a4, 0x0, 0x1);
        gbc.writeMem(0x277b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4620);
        EXPECT(gbc.pc(), 0x277d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 033B
        gbc.setState(0xa914, 0x8351, 0xf860, 0x1653, 0xc0a1, 0x8f2e, 0x0, 0x0);
        gbc.writeMem(0xa914, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8351);
        EXPECT(gbc.pc(), 0xa916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa914), 0xcb);
        EXPECT(gbc.readMem(0xa915), 0xad);
        // CB AD 033C
        gbc.setState(0x5234, 0xd290, 0x180, 0x6339, 0xb208, 0x9511, 0x0, 0x0);
        gbc.writeMem(0x5234, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd290);
        EXPECT(gbc.pc(), 0x5236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 033D
        gbc.setState(0xe093, 0x5dec, 0xe960, 0x1d24, 0xdeaa, 0x983f, 0x0, 0x0);
        gbc.writeMem(0xe093, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5dec);
        EXPECT(gbc.pc(), 0xe095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe093), 0xcb);
        EXPECT(gbc.readMem(0xe094), 0xad);
        // CB AD 033E
        gbc.setState(0xc2c, 0xdf00, 0x80e0, 0x29d5, 0x6825, 0x7c59, 0x0, 0x0);
        gbc.writeMem(0xc2c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xdf00);
        EXPECT(gbc.pc(), 0xc2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 033F
        gbc.setState(0xba94, 0xef9d, 0x9170, 0x6375, 0x615d, 0x7243, 0x0, 0x0);
        gbc.writeMem(0xba94, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xef9d);
        EXPECT(gbc.pc(), 0xba96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba94), 0xcb);
        EXPECT(gbc.readMem(0xba95), 0xad);
        // CB AD 0340
        gbc.setState(0x7a02, 0x4e1, 0x5c20, 0x8736, 0x64fb, 0xb501, 0x0, 0x0);
        gbc.writeMem(0x7a02, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4e1);
        EXPECT(gbc.pc(), 0x7a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0342
        gbc.setState(0x105f, 0xd4d7, 0x19f0, 0x4f89, 0xc871, 0x207f, 0x1, 0x0);
        gbc.writeMem(0x105f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd4d7);
        EXPECT(gbc.pc(), 0x1061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0343
        gbc.setState(0xa53c, 0x9af4, 0x80f0, 0xebfb, 0x6784, 0x410d, 0x1, 0x0);
        gbc.writeMem(0xa53c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9af4);
        EXPECT(gbc.pc(), 0xa53e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa53c), 0xcb);
        EXPECT(gbc.readMem(0xa53d), 0xad);
        // CB AD 0344
        gbc.setState(0x6645, 0x2b52, 0xaa80, 0xd5ea, 0x5574, 0x8896, 0x1, 0x0);
        gbc.writeMem(0x6645, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2b52);
        EXPECT(gbc.pc(), 0x6647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0345
        gbc.setState(0x69f8, 0x9e51, 0x8aa0, 0x2527, 0xfd81, 0xeee2, 0x1, 0x0);
        gbc.writeMem(0x69f8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9e51);
        EXPECT(gbc.pc(), 0x69fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0346
        gbc.setState(0x6cb3, 0xb286, 0xc120, 0x4230, 0xfbf7, 0x1713, 0x0, 0x0);
        gbc.writeMem(0x6cb3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb286);
        EXPECT(gbc.pc(), 0x6cb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0347
        gbc.setState(0x2cc9, 0x86a3, 0x1b20, 0x57eb, 0xcc2a, 0x3791, 0x1, 0x0);
        gbc.writeMem(0x2cc9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x86a3);
        EXPECT(gbc.pc(), 0x2ccb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0348
        gbc.setState(0x104f, 0x7c08, 0x6f70, 0x326f, 0x6826, 0x8e7, 0x0, 0x0);
        gbc.writeMem(0x104f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7c08);
        EXPECT(gbc.pc(), 0x1051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0349
        gbc.setState(0x1745, 0xf004, 0x2480, 0x6caa, 0xc804, 0x4567, 0x0, 0x0);
        gbc.writeMem(0x1745, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf004);
        EXPECT(gbc.pc(), 0x1747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 034A
        gbc.setState(0x98ee, 0xa9b0, 0xf850, 0x7aac, 0x2e5f, 0x3f18, 0x0, 0x0);
        gbc.writeMem(0x98ee, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa9b0);
        EXPECT(gbc.pc(), 0x98f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98ee), 0xcb);
        EXPECT(gbc.readMem(0x98ef), 0xad);
        // CB AD 034B
        gbc.setState(0x59e6, 0x2f6, 0x9310, 0xf738, 0x7286, 0x9aaa, 0x1, 0x0);
        gbc.writeMem(0x59e6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2f6);
        EXPECT(gbc.pc(), 0x59e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 034C
        gbc.setState(0x2337, 0x5838, 0x62d0, 0x1f97, 0xbb87, 0x4de6, 0x1, 0x0);
        gbc.writeMem(0x2337, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x5838);
        EXPECT(gbc.pc(), 0x2339);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 034D
        gbc.setState(0x2061, 0x1652, 0x4490, 0xeb45, 0xf307, 0xe52d, 0x1, 0x1);
        gbc.writeMem(0x2061, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1652);
        EXPECT(gbc.pc(), 0x2063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 034E
        gbc.setState(0xa8e7, 0x3567, 0x1bc0, 0xaa5, 0x7c1, 0xe555, 0x1, 0x1);
        gbc.writeMem(0xa8e7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3567);
        EXPECT(gbc.pc(), 0xa8e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e7), 0xcb);
        EXPECT(gbc.readMem(0xa8e8), 0xad);
        // CB AD 034F
        gbc.setState(0xbd2a, 0x6b3, 0x8300, 0x9107, 0xb9f7, 0x2204, 0x0, 0x0);
        gbc.writeMem(0xbd2a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6b3);
        EXPECT(gbc.pc(), 0xbd2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd2a), 0xcb);
        EXPECT(gbc.readMem(0xbd2b), 0xad);
        // CB AD 0350
        gbc.setState(0x8347, 0x1553, 0x88b0, 0x4e3f, 0x1052, 0xa26e, 0x0, 0x1);
        gbc.writeMem(0x8347, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1553);
        EXPECT(gbc.pc(), 0x8349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8347), 0xcb);
        EXPECT(gbc.readMem(0x8348), 0xad);
        // CB AD 0351
        gbc.setState(0xd6ac, 0xaee2, 0x9d10, 0x1a00, 0xe460, 0x47b5, 0x0, 0x1);
        gbc.writeMem(0xd6ac, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xaee2);
        EXPECT(gbc.pc(), 0xd6ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ac), 0xcb);
        EXPECT(gbc.readMem(0xd6ad), 0xad);
        // CB AD 0352
        gbc.setState(0x866a, 0xc98d, 0xb4b0, 0xd005, 0x628e, 0x6bbe, 0x0, 0x1);
        gbc.writeMem(0x866a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc98d);
        EXPECT(gbc.pc(), 0x866c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x866a), 0xcb);
        EXPECT(gbc.readMem(0x866b), 0xad);
        // CB AD 0353
        gbc.setState(0x2d22, 0x4867, 0xae10, 0x8eba, 0x2a95, 0xb59b, 0x1, 0x0);
        gbc.writeMem(0x2d22, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4867);
        EXPECT(gbc.pc(), 0x2d24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0354
        gbc.setState(0x6dcb, 0x9829, 0x8120, 0x3f94, 0xdc09, 0x69b1, 0x1, 0x1);
        gbc.writeMem(0x6dcb, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9829);
        EXPECT(gbc.pc(), 0x6dcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0355
        gbc.setState(0xc78d, 0xe139, 0xcec0, 0xa7f4, 0xfbbe, 0x74f5, 0x1, 0x0);
        gbc.writeMem(0xc78d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe139);
        EXPECT(gbc.pc(), 0xc78f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc78d), 0xcb);
        EXPECT(gbc.readMem(0xc78e), 0xad);
        // CB AD 0356
        gbc.setState(0xc508, 0x3db9, 0x7cf0, 0x7511, 0x5045, 0x22f9, 0x1, 0x1);
        gbc.writeMem(0xc508, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3db9);
        EXPECT(gbc.pc(), 0xc50a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc508), 0xcb);
        EXPECT(gbc.readMem(0xc509), 0xad);
        // CB AD 0357
        gbc.setState(0xa573, 0xd9c0, 0x3e10, 0x6fd3, 0xfa43, 0x930a, 0x1, 0x1);
        gbc.writeMem(0xa573, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd9c0);
        EXPECT(gbc.pc(), 0xa575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa573), 0xcb);
        EXPECT(gbc.readMem(0xa574), 0xad);
        // CB AD 0359
        gbc.setState(0x23ec, 0x2787, 0x5520, 0xa2a1, 0x65fa, 0x5ad9, 0x0, 0x1);
        gbc.writeMem(0x23ec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2787);
        EXPECT(gbc.pc(), 0x23ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 035A
        gbc.setState(0xb2d4, 0xc34b, 0xd3e0, 0xff9a, 0x1348, 0x6654, 0x1, 0x0);
        gbc.writeMem(0xb2d4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc34b);
        EXPECT(gbc.pc(), 0xb2d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d4), 0xcb);
        EXPECT(gbc.readMem(0xb2d5), 0xad);
        // CB AD 035B
        gbc.setState(0x5b54, 0xd2fb, 0x8710, 0x2127, 0xb299, 0xd305, 0x1, 0x0);
        gbc.writeMem(0x5b54, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd2fb);
        EXPECT(gbc.pc(), 0x5b56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 035C
        gbc.setState(0x68b4, 0xa11f, 0x1a30, 0xd526, 0x2db8, 0x89f9, 0x0, 0x0);
        gbc.writeMem(0x68b4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa11f);
        EXPECT(gbc.pc(), 0x68b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 035D
        gbc.setState(0x5567, 0x749f, 0x2010, 0xd2b9, 0x6f1b, 0x1068, 0x1, 0x0);
        gbc.writeMem(0x5567, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x749f);
        EXPECT(gbc.pc(), 0x5569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 035E
        gbc.setState(0x2cbc, 0xb457, 0x5a00, 0xf4de, 0x767c, 0xbc47, 0x1, 0x0);
        gbc.writeMem(0x2cbc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb457);
        EXPECT(gbc.pc(), 0x2cbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 035F
        gbc.setState(0xdb34, 0x8cbb, 0xaf10, 0xd3be, 0x8319, 0x632b, 0x1, 0x0);
        gbc.writeMem(0xdb34, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8cbb);
        EXPECT(gbc.pc(), 0xdb36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb34), 0xcb);
        EXPECT(gbc.readMem(0xdb35), 0xad);
        // CB AD 0360
        gbc.setState(0xdd04, 0x98bb, 0x8760, 0x2351, 0x2af, 0xd12e, 0x1, 0x1);
        gbc.writeMem(0xdd04, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x98bb);
        EXPECT(gbc.pc(), 0xdd06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd04), 0xcb);
        EXPECT(gbc.readMem(0xdd05), 0xad);
        // CB AD 0361
        gbc.setState(0x4266, 0x1e26, 0xf9e0, 0xd13b, 0x24f4, 0xd457, 0x0, 0x1);
        gbc.writeMem(0x4266, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1e26);
        EXPECT(gbc.pc(), 0x4268);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0362
        gbc.setState(0x87e5, 0x4002, 0xd60, 0x3ed5, 0x8bb8, 0x288a, 0x1, 0x0);
        gbc.writeMem(0x87e5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4002);
        EXPECT(gbc.pc(), 0x87e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e5), 0xcb);
        EXPECT(gbc.readMem(0x87e6), 0xad);
        // CB AD 0363
        gbc.setState(0x14d4, 0x9d95, 0xd220, 0x4720, 0xdffa, 0x78e5, 0x0, 0x1);
        gbc.writeMem(0x14d4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9d95);
        EXPECT(gbc.pc(), 0x14d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0364
        gbc.setState(0x2328, 0xcd46, 0xc1f0, 0x1abb, 0x92da, 0x4bf3, 0x0, 0x1);
        gbc.writeMem(0x2328, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xcd46);
        EXPECT(gbc.pc(), 0x232a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0365
        gbc.setState(0xdf79, 0x5a75, 0x8f70, 0xe3e3, 0x44d4, 0x94ea, 0x0, 0x0);
        gbc.writeMem(0xdf79, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5a75);
        EXPECT(gbc.pc(), 0xdf7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf79), 0xcb);
        EXPECT(gbc.readMem(0xdf7a), 0xad);
        // CB AD 0366
        gbc.setState(0xcdaa, 0xf76a, 0x2750, 0x4c31, 0x25bb, 0xfe23, 0x1, 0x1);
        gbc.writeMem(0xcdaa, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf76a);
        EXPECT(gbc.pc(), 0xcdac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdaa), 0xcb);
        EXPECT(gbc.readMem(0xcdab), 0xad);
        // CB AD 0367
        gbc.setState(0x8b35, 0xa3c9, 0x80d0, 0x6efd, 0x632b, 0xc6f, 0x0, 0x1);
        gbc.writeMem(0x8b35, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa3c9);
        EXPECT(gbc.pc(), 0x8b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b35), 0xcb);
        EXPECT(gbc.readMem(0x8b36), 0xad);
        // CB AD 0369
        gbc.setState(0x90e5, 0x42a5, 0x620, 0xec68, 0xd24f, 0xd43e, 0x0, 0x1);
        gbc.writeMem(0x90e5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x42a5);
        EXPECT(gbc.pc(), 0x90e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e5), 0xcb);
        EXPECT(gbc.readMem(0x90e6), 0xad);
        // CB AD 036A
        gbc.setState(0x876, 0x4125, 0x1340, 0x5db7, 0x217c, 0x1f11, 0x0, 0x1);
        gbc.writeMem(0x876, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4125);
        EXPECT(gbc.pc(), 0x878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 036B
        gbc.setState(0xa09, 0x200d, 0x6250, 0x433e, 0xe684, 0x1c49, 0x1, 0x1);
        gbc.writeMem(0xa09, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x200d);
        EXPECT(gbc.pc(), 0xa0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 036C
        gbc.setState(0x5f8f, 0xf24f, 0xdde0, 0xe2e0, 0xa8f2, 0x61be, 0x1, 0x1);
        gbc.writeMem(0x5f8f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf24f);
        EXPECT(gbc.pc(), 0x5f91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 036E
        gbc.setState(0xa2f7, 0x211, 0xcbc0, 0xaa20, 0xf664, 0xa1f8, 0x0, 0x1);
        gbc.writeMem(0xa2f7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x211);
        EXPECT(gbc.pc(), 0xa2f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f7), 0xcb);
        EXPECT(gbc.readMem(0xa2f8), 0xad);
        // CB AD 036F
        gbc.setState(0x76f0, 0x7bf8, 0x8080, 0xe4a1, 0xb9ed, 0x1652, 0x1, 0x1);
        gbc.writeMem(0x76f0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7bf8);
        EXPECT(gbc.pc(), 0x76f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0370
        gbc.setState(0x8ee5, 0x5307, 0xde90, 0x4874, 0x2c62, 0xed65, 0x1, 0x1);
        gbc.writeMem(0x8ee5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5307);
        EXPECT(gbc.pc(), 0x8ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee5), 0xcb);
        EXPECT(gbc.readMem(0x8ee6), 0xad);
        // CB AD 0371
        gbc.setState(0x531a, 0x9473, 0x8b80, 0x6685, 0x82dc, 0xa82c, 0x0, 0x1);
        gbc.writeMem(0x531a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9473);
        EXPECT(gbc.pc(), 0x531c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0372
        gbc.setState(0xd0e3, 0xa40d, 0x1930, 0xe995, 0x93ab, 0x6b8f, 0x1, 0x1);
        gbc.writeMem(0xd0e3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa40d);
        EXPECT(gbc.pc(), 0xd0e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e3), 0xcb);
        EXPECT(gbc.readMem(0xd0e4), 0xad);
        // CB AD 0373
        gbc.setState(0x4fce, 0x5a44, 0xbe20, 0xab5e, 0xd44c, 0xebc3, 0x0, 0x1);
        gbc.writeMem(0x4fce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5a44);
        EXPECT(gbc.pc(), 0x4fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0374
        gbc.setState(0xe30f, 0xe190, 0x7260, 0x8969, 0xa8f0, 0x66e3, 0x1, 0x0);
        gbc.writeMem(0xe30f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe190);
        EXPECT(gbc.pc(), 0xe311);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe30f), 0xcb);
        EXPECT(gbc.readMem(0xe310), 0xad);
        // CB AD 0375
        gbc.setState(0x64fc, 0xfb66, 0x8c00, 0xcfbd, 0x4c5a, 0xcee6, 0x1, 0x0);
        gbc.writeMem(0x64fc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfb66);
        EXPECT(gbc.pc(), 0x64fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0376
        gbc.setState(0x5af1, 0x53e1, 0x5460, 0xd183, 0x26ea, 0x6977, 0x0, 0x1);
        gbc.writeMem(0x5af1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x53e1);
        EXPECT(gbc.pc(), 0x5af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0377
        gbc.setState(0xd663, 0x1955, 0xb9b0, 0xba3a, 0xa168, 0xd9aa, 0x1, 0x0);
        gbc.writeMem(0xd663, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1955);
        EXPECT(gbc.pc(), 0xd665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd663), 0xcb);
        EXPECT(gbc.readMem(0xd664), 0xad);
        // CB AD 0378
        gbc.setState(0xad13, 0x78ad, 0x4710, 0xc003, 0xae7a, 0xfb56, 0x1, 0x1);
        gbc.writeMem(0xad13, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x78ad);
        EXPECT(gbc.pc(), 0xad15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad13), 0xcb);
        EXPECT(gbc.readMem(0xad14), 0xad);
        // CB AD 0379
        gbc.setState(0xb8c4, 0x516d, 0x7b70, 0x8767, 0x3e64, 0xc54e, 0x0, 0x1);
        gbc.writeMem(0xb8c4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x516d);
        EXPECT(gbc.pc(), 0xb8c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c4), 0xcb);
        EXPECT(gbc.readMem(0xb8c5), 0xad);
        // CB AD 037A
        gbc.setState(0x597e, 0x11c4, 0xc550, 0x256a, 0xfa87, 0x192f, 0x0, 0x0);
        gbc.writeMem(0x597e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x11c4);
        EXPECT(gbc.pc(), 0x5980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 037B
        gbc.setState(0xe400, 0x379e, 0x6740, 0x878a, 0xbeed, 0xd0ea, 0x1, 0x0);
        gbc.writeMem(0xe400, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x379e);
        EXPECT(gbc.pc(), 0xe402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe400), 0xcb);
        EXPECT(gbc.readMem(0xe401), 0xad);
        // CB AD 037C
        gbc.setState(0x5a1d, 0x9d39, 0xeb80, 0x43dd, 0xb5f9, 0xfc86, 0x0, 0x1);
        gbc.writeMem(0x5a1d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9d39);
        EXPECT(gbc.pc(), 0x5a1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 037E
        gbc.setState(0x6734, 0xca97, 0x6be0, 0x92b5, 0x7678, 0x6c19, 0x1, 0x1);
        gbc.writeMem(0x6734, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xca97);
        EXPECT(gbc.pc(), 0x6736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 037F
        gbc.setState(0x9a82, 0x9ff6, 0x6400, 0x437, 0xfbcf, 0x87d, 0x1, 0x1);
        gbc.writeMem(0x9a82, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9ff6);
        EXPECT(gbc.pc(), 0x9a84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a82), 0xcb);
        EXPECT(gbc.readMem(0x9a83), 0xad);
        // CB AD 0380
        gbc.setState(0x410f, 0x9ded, 0x1e90, 0x99d8, 0xd395, 0x37ef, 0x1, 0x0);
        gbc.writeMem(0x410f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9ded);
        EXPECT(gbc.pc(), 0x4111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0381
        gbc.setState(0x2e, 0xd1a3, 0x6ea0, 0x5888, 0x841c, 0x85d3, 0x1, 0x0);
        gbc.writeMem(0x2e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd1a3);
        EXPECT(gbc.pc(), 0x30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0382
        gbc.setState(0x6746, 0x533a, 0x3400, 0xe832, 0x1d31, 0xc91, 0x1, 0x0);
        gbc.writeMem(0x6746, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x533a);
        EXPECT(gbc.pc(), 0x6748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0383
        gbc.setState(0xe6e5, 0x344b, 0x93b0, 0xdf5e, 0xc1f3, 0xe14, 0x1, 0x0);
        gbc.writeMem(0xe6e5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x344b);
        EXPECT(gbc.pc(), 0xe6e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e5), 0xcb);
        EXPECT(gbc.readMem(0xe6e6), 0xad);
        // CB AD 0384
        gbc.setState(0x4204, 0x8ba3, 0x8aa0, 0xa022, 0xbe04, 0x2c2a, 0x1, 0x0);
        gbc.writeMem(0x4204, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8ba3);
        EXPECT(gbc.pc(), 0x4206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0385
        gbc.setState(0x4f45, 0x50bc, 0xa0b0, 0x83aa, 0x2734, 0x131f, 0x1, 0x0);
        gbc.writeMem(0x4f45, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x50bc);
        EXPECT(gbc.pc(), 0x4f47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0386
        gbc.setState(0x8210, 0xca6d, 0x6fc0, 0x6989, 0x1dc8, 0x763d, 0x1, 0x0);
        gbc.writeMem(0x8210, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xca6d);
        EXPECT(gbc.pc(), 0x8212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8210), 0xcb);
        EXPECT(gbc.readMem(0x8211), 0xad);
        // CB AD 0387
        gbc.setState(0x5d0c, 0xe0d9, 0x19e0, 0xfde1, 0x9ec0, 0x9e50, 0x0, 0x1);
        gbc.writeMem(0x5d0c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe0d9);
        EXPECT(gbc.pc(), 0x5d0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0388
        gbc.setState(0x1c3f, 0xea1f, 0x570, 0xdadc, 0xae3b, 0xcd55, 0x0, 0x1);
        gbc.writeMem(0x1c3f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xea1f);
        EXPECT(gbc.pc(), 0x1c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0389
        gbc.setState(0x6657, 0x8992, 0xb5e0, 0xa95b, 0x939d, 0x8109, 0x1, 0x1);
        gbc.writeMem(0x6657, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8992);
        EXPECT(gbc.pc(), 0x6659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 038A
        gbc.setState(0x443e, 0xb2dc, 0xcfd0, 0x98d4, 0x4ed7, 0x4b5f, 0x0, 0x0);
        gbc.writeMem(0x443e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb2dc);
        EXPECT(gbc.pc(), 0x4440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 038B
        gbc.setState(0xe982, 0xc82c, 0xc880, 0x8b14, 0xd254, 0xd3d4, 0x0, 0x0);
        gbc.writeMem(0xe982, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc82c);
        EXPECT(gbc.pc(), 0xe984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe982), 0xcb);
        EXPECT(gbc.readMem(0xe983), 0xad);
        // CB AD 038C
        gbc.setState(0x6042, 0x17f1, 0x2f00, 0x7789, 0x7acf, 0x5b60, 0x1, 0x0);
        gbc.writeMem(0x6042, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x17f1);
        EXPECT(gbc.pc(), 0x6044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 038D
        gbc.setState(0x1186, 0x80ae, 0xd390, 0x98d3, 0x973e, 0xbaa3, 0x0, 0x1);
        gbc.writeMem(0x1186, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x80ae);
        EXPECT(gbc.pc(), 0x1188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 038E
        gbc.setState(0x52b7, 0x8c05, 0x67d0, 0x469e, 0x3334, 0xee24, 0x0, 0x1);
        gbc.writeMem(0x52b7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8c05);
        EXPECT(gbc.pc(), 0x52b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 038F
        gbc.setState(0x6ad6, 0x24a5, 0x9410, 0x9494, 0x46a1, 0xe7c7, 0x1, 0x0);
        gbc.writeMem(0x6ad6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x24a5);
        EXPECT(gbc.pc(), 0x6ad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0390
        gbc.setState(0xe6b, 0x1bc7, 0x7080, 0x6814, 0x21c0, 0x363b, 0x0, 0x1);
        gbc.writeMem(0xe6b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1bc7);
        EXPECT(gbc.pc(), 0xe6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0391
        gbc.setState(0x84c5, 0xa88, 0x3040, 0x9ff7, 0xc05, 0x13a1, 0x1, 0x1);
        gbc.writeMem(0x84c5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa88);
        EXPECT(gbc.pc(), 0x84c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c5), 0xcb);
        EXPECT(gbc.readMem(0x84c6), 0xad);
        // CB AD 0392
        gbc.setState(0x2212, 0x4a41, 0x8e40, 0x7fca, 0xb5b2, 0xcdcb, 0x1, 0x0);
        gbc.writeMem(0x2212, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4a41);
        EXPECT(gbc.pc(), 0x2214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0393
        gbc.setState(0x4369, 0x9eaf, 0x6f90, 0x312d, 0x2e5a, 0x8073, 0x1, 0x0);
        gbc.writeMem(0x4369, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9eaf);
        EXPECT(gbc.pc(), 0x436b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 0394
        gbc.setState(0xc311, 0x9a4a, 0xeb10, 0x58c6, 0xbd7a, 0x44ff, 0x0, 0x1);
        gbc.writeMem(0xc311, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9a4a);
        EXPECT(gbc.pc(), 0xc313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc311), 0xcb);
        EXPECT(gbc.readMem(0xc312), 0xad);
        // CB AD 0395
        gbc.setState(0x2b0c, 0x2103, 0x1ae0, 0x7cdf, 0x1f25, 0x7463, 0x0, 0x0);
        gbc.writeMem(0x2b0c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2103);
        EXPECT(gbc.pc(), 0x2b0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0396
        gbc.setState(0x6822, 0xb1b2, 0x4ba0, 0x127c, 0xc843, 0x901f, 0x0, 0x0);
        gbc.writeMem(0x6822, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb1b2);
        EXPECT(gbc.pc(), 0x6824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0397
        gbc.setState(0xda5, 0xf0aa, 0x7da0, 0x451e, 0x6500, 0xb49d, 0x0, 0x1);
        gbc.writeMem(0xda5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf0aa);
        EXPECT(gbc.pc(), 0xda7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0398
        gbc.setState(0x5b40, 0x15d2, 0xa0e0, 0x430, 0xe6f2, 0x9cfd, 0x1, 0x0);
        gbc.writeMem(0x5b40, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x15d2);
        EXPECT(gbc.pc(), 0x5b42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 0399
        gbc.setState(0x3dc6, 0xf3c2, 0xf630, 0x5971, 0x56e7, 0x95f0, 0x0, 0x0);
        gbc.writeMem(0x3dc6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf3c2);
        EXPECT(gbc.pc(), 0x3dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 039A
        gbc.setState(0x2838, 0xe914, 0x3130, 0x8644, 0x3753, 0xa13c, 0x0, 0x0);
        gbc.writeMem(0x2838, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe914);
        EXPECT(gbc.pc(), 0x283a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 039B
        gbc.setState(0x76f5, 0x127, 0xb290, 0x65b2, 0xc39a, 0x2eaa, 0x1, 0x1);
        gbc.writeMem(0x76f5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x127);
        EXPECT(gbc.pc(), 0x76f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 039C
        gbc.setState(0x639c, 0x66a2, 0xfb80, 0xf0aa, 0x56bf, 0xd909, 0x1, 0x1);
        gbc.writeMem(0x639c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x66a2);
        EXPECT(gbc.pc(), 0x639e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 039D
        gbc.setState(0x5c39, 0xe91f, 0xa250, 0x7175, 0x178, 0xd3a4, 0x0, 0x0);
        gbc.writeMem(0x5c39, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe91f);
        EXPECT(gbc.pc(), 0x5c3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 039E
        gbc.setState(0x52bc, 0xe939, 0x8c70, 0x4762, 0xf294, 0xd152, 0x0, 0x0);
        gbc.writeMem(0x52bc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe939);
        EXPECT(gbc.pc(), 0x52be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 039F
        gbc.setState(0x78d, 0x1da3, 0xdd30, 0xaa8a, 0xdd30, 0xe5e9, 0x1, 0x1);
        gbc.writeMem(0x78d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1da3);
        EXPECT(gbc.pc(), 0x78f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03A0
        gbc.setState(0x3542, 0xc309, 0x1620, 0xcc45, 0x5888, 0x16ce, 0x0, 0x0);
        gbc.writeMem(0x3542, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc309);
        EXPECT(gbc.pc(), 0x3544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03A1
        gbc.setState(0x517e, 0x51b7, 0x95a0, 0x2dd9, 0x626c, 0x7f2f, 0x0, 0x0);
        gbc.writeMem(0x517e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x51b7);
        EXPECT(gbc.pc(), 0x5180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03A2
        gbc.setState(0x4ce, 0x5de3, 0x6cb0, 0x36b6, 0xb872, 0x454a, 0x0, 0x0);
        gbc.writeMem(0x4ce, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5de3);
        EXPECT(gbc.pc(), 0x4d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03A3
        gbc.setState(0xc262, 0x1232, 0x99f0, 0x652f, 0x6742, 0x7d15, 0x1, 0x1);
        gbc.writeMem(0xc262, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1232);
        EXPECT(gbc.pc(), 0xc264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc262), 0xcb);
        EXPECT(gbc.readMem(0xc263), 0xad);
        // CB AD 03A4
        gbc.setState(0x50ec, 0xc9e1, 0x2e00, 0x36f, 0x8645, 0xde89, 0x1, 0x0);
        gbc.writeMem(0x50ec, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc9e1);
        EXPECT(gbc.pc(), 0x50ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03A5
        gbc.setState(0xcbc4, 0xea94, 0x4280, 0x6a4d, 0xed12, 0xa1a8, 0x0, 0x1);
        gbc.writeMem(0xcbc4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xea94);
        EXPECT(gbc.pc(), 0xcbc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbc4), 0xcb);
        EXPECT(gbc.readMem(0xcbc5), 0xad);
        // CB AD 03A7
        gbc.setState(0x22e, 0xb5e5, 0xeca0, 0x8add, 0xc97, 0x798e, 0x1, 0x1);
        gbc.writeMem(0x22e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb5e5);
        EXPECT(gbc.pc(), 0x230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03A8
        gbc.setState(0xb68, 0x41ed, 0xbec0, 0x5e74, 0x13e0, 0x8d03, 0x0, 0x1);
        gbc.writeMem(0xb68, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x41ed);
        EXPECT(gbc.pc(), 0xb6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03A9
        gbc.setState(0xd61d, 0x5cac, 0xecb0, 0x9507, 0x3515, 0x3767, 0x0, 0x0);
        gbc.writeMem(0xd61d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5cac);
        EXPECT(gbc.pc(), 0xd61f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd61d), 0xcb);
        EXPECT(gbc.readMem(0xd61e), 0xad);
        // CB AD 03AA
        gbc.setState(0xe2af, 0x262f, 0x1470, 0x1e61, 0x35d4, 0xcc0a, 0x0, 0x0);
        gbc.writeMem(0xe2af, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x262f);
        EXPECT(gbc.pc(), 0xe2b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2af), 0xcb);
        EXPECT(gbc.readMem(0xe2b0), 0xad);
        // CB AD 03AB
        gbc.setState(0xea25, 0xed9d, 0x2c0, 0xed47, 0xf8f6, 0x89d9, 0x1, 0x1);
        gbc.writeMem(0xea25, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xed9d);
        EXPECT(gbc.pc(), 0xea27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea25), 0xcb);
        EXPECT(gbc.readMem(0xea26), 0xad);
        // CB AD 03AC
        gbc.setState(0x3b8e, 0x8f7e, 0x7f40, 0xcf7d, 0x80bd, 0x9b8f, 0x1, 0x0);
        gbc.writeMem(0x3b8e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8f7e);
        EXPECT(gbc.pc(), 0x3b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03AD
        gbc.setState(0xdaf1, 0xcff3, 0x7e60, 0x53bc, 0xcf1f, 0xec12, 0x1, 0x1);
        gbc.writeMem(0xdaf1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xcff3);
        EXPECT(gbc.pc(), 0xdaf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaf1), 0xcb);
        EXPECT(gbc.readMem(0xdaf2), 0xad);
        // CB AD 03AE
        gbc.setState(0x3e6f, 0x6756, 0x6160, 0xef28, 0xfa9b, 0x6f45, 0x1, 0x0);
        gbc.writeMem(0x3e6f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6756);
        EXPECT(gbc.pc(), 0x3e71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03AF
        gbc.setState(0x6621, 0x7872, 0xf4c0, 0x5c10, 0xe136, 0x99ad, 0x0, 0x0);
        gbc.writeMem(0x6621, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7872);
        EXPECT(gbc.pc(), 0x6623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03B0
        gbc.setState(0x6300, 0x2116, 0x87d0, 0xdfe6, 0x9983, 0x2655, 0x0, 0x0);
        gbc.writeMem(0x6300, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2116);
        EXPECT(gbc.pc(), 0x6302);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03B1
        gbc.setState(0x4f73, 0x1466, 0xb6d0, 0x59de, 0x296, 0x4a2c, 0x0, 0x1);
        gbc.writeMem(0x4f73, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1466);
        EXPECT(gbc.pc(), 0x4f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03B2
        gbc.setState(0xa674, 0x22d, 0xa920, 0x65a, 0xe6d3, 0x3103, 0x0, 0x0);
        gbc.writeMem(0xa674, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x22d);
        EXPECT(gbc.pc(), 0xa676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa674), 0xcb);
        EXPECT(gbc.readMem(0xa675), 0xad);
        // CB AD 03B3
        gbc.setState(0x640d, 0xe28d, 0xe890, 0x9eb4, 0x3773, 0xe7fc, 0x1, 0x1);
        gbc.writeMem(0x640d, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe28d);
        EXPECT(gbc.pc(), 0x640f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03B5
        gbc.setState(0x49fc, 0xb57b, 0x5c20, 0xe2d6, 0x5c54, 0xc67e, 0x1, 0x0);
        gbc.writeMem(0x49fc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb57b);
        EXPECT(gbc.pc(), 0x49fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03B7
        gbc.setState(0xdacc, 0x2475, 0xcbd0, 0x2e2e, 0x4972, 0x49ac, 0x0, 0x0);
        gbc.writeMem(0xdacc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2475);
        EXPECT(gbc.pc(), 0xdace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdacc), 0xcb);
        EXPECT(gbc.readMem(0xdacd), 0xad);
        // CB AD 03B8
        gbc.setState(0x96d6, 0x1366, 0x1be0, 0xced0, 0xca1, 0xf9d7, 0x0, 0x0);
        gbc.writeMem(0x96d6, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1366);
        EXPECT(gbc.pc(), 0x96d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d6), 0xcb);
        EXPECT(gbc.readMem(0x96d7), 0xad);
        // CB AD 03B9
        gbc.setState(0x7258, 0xb6a4, 0xac60, 0xc72e, 0x4739, 0xde5a, 0x1, 0x0);
        gbc.writeMem(0x7258, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb6a4);
        EXPECT(gbc.pc(), 0x725a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03BA
        gbc.setState(0x3bf, 0x3d9b, 0x9da0, 0xde7e, 0x6a65, 0x5e26, 0x1, 0x1);
        gbc.writeMem(0x3bf, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3d9b);
        EXPECT(gbc.pc(), 0x3c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03BB
        gbc.setState(0x3217, 0xb664, 0x2730, 0xe684, 0xc610, 0xb79b, 0x1, 0x0);
        gbc.writeMem(0x3217, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb664);
        EXPECT(gbc.pc(), 0x3219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03BC
        gbc.setState(0xba0f, 0x279d, 0x7f40, 0x3152, 0x807b, 0x8b25, 0x1, 0x0);
        gbc.writeMem(0xba0f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x279d);
        EXPECT(gbc.pc(), 0xba11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba0f), 0xcb);
        EXPECT(gbc.readMem(0xba10), 0xad);
        // CB AD 03BD
        gbc.setState(0x5052, 0xb8d5, 0xeec0, 0x6261, 0x4319, 0x4f73, 0x1, 0x0);
        gbc.writeMem(0x5052, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb8d5);
        EXPECT(gbc.pc(), 0x5054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03BE
        gbc.setState(0x2d7a, 0x9e23, 0xba60, 0x4229, 0x7d51, 0xcf80, 0x0, 0x1);
        gbc.writeMem(0x2d7a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9e23);
        EXPECT(gbc.pc(), 0x2d7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03BF
        gbc.setState(0x9c6c, 0xcca6, 0x1370, 0x79ca, 0xab6c, 0xc87e, 0x1, 0x0);
        gbc.writeMem(0x9c6c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcca6);
        EXPECT(gbc.pc(), 0x9c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c6c), 0xcb);
        EXPECT(gbc.readMem(0x9c6d), 0xad);
        // CB AD 03C0
        gbc.setState(0xc91b, 0x8c40, 0x1d50, 0xf019, 0x1551, 0x25b2, 0x0, 0x1);
        gbc.writeMem(0xc91b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8c40);
        EXPECT(gbc.pc(), 0xc91d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc91b), 0xcb);
        EXPECT(gbc.readMem(0xc91c), 0xad);
        // CB AD 03C1
        gbc.setState(0xc4b7, 0x7011, 0xa220, 0x2d60, 0x32d, 0x22d8, 0x0, 0x0);
        gbc.writeMem(0xc4b7, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7011);
        EXPECT(gbc.pc(), 0xc4b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b7), 0xcb);
        EXPECT(gbc.readMem(0xc4b8), 0xad);
        // CB AD 03C2
        gbc.setState(0x6d36, 0x568d, 0xa5b0, 0xfba2, 0x659c, 0x7037, 0x0, 0x1);
        gbc.writeMem(0x6d36, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x568d);
        EXPECT(gbc.pc(), 0x6d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03C3
        gbc.setState(0x661c, 0x9193, 0xcd10, 0xfcc4, 0x9870, 0xbb91, 0x0, 0x1);
        gbc.writeMem(0x661c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9193);
        EXPECT(gbc.pc(), 0x661e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03C4
        gbc.setState(0x199b, 0xe3c6, 0x990, 0x3a96, 0x90cb, 0xee92, 0x0, 0x1);
        gbc.writeMem(0x199b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe3c6);
        EXPECT(gbc.pc(), 0x199d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03C5
        gbc.setState(0xdd98, 0xd3c9, 0xab0, 0xb165, 0xf642, 0xfb29, 0x1, 0x0);
        gbc.writeMem(0xdd98, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd3c9);
        EXPECT(gbc.pc(), 0xdd9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd98), 0xcb);
        EXPECT(gbc.readMem(0xdd99), 0xad);
        // CB AD 03C6
        gbc.setState(0x9a0b, 0xe27b, 0x4360, 0x5588, 0x967f, 0xa7f1, 0x0, 0x1);
        gbc.writeMem(0x9a0b, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe27b);
        EXPECT(gbc.pc(), 0x9a0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a0b), 0xcb);
        EXPECT(gbc.readMem(0x9a0c), 0xad);
        // CB AD 03C7
        gbc.setState(0x5e1, 0x7c83, 0x870, 0xca35, 0xccee, 0xb07b, 0x1, 0x0);
        gbc.writeMem(0x5e1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7c83);
        EXPECT(gbc.pc(), 0x5e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03C8
        gbc.setState(0xa51, 0x55a6, 0x88b0, 0x8952, 0x4cf3, 0x21a8, 0x0, 0x1);
        gbc.writeMem(0xa51, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x55a6);
        EXPECT(gbc.pc(), 0xa53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03C9
        gbc.setState(0x3226, 0x304d, 0xe9c0, 0xc05e, 0x1628, 0x2c87, 0x0, 0x1);
        gbc.writeMem(0x3226, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x304d);
        EXPECT(gbc.pc(), 0x3228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03CA
        gbc.setState(0x2ab0, 0xb700, 0x74f0, 0xfa09, 0x10cd, 0x849d, 0x0, 0x0);
        gbc.writeMem(0x2ab0, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb700);
        EXPECT(gbc.pc(), 0x2ab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03CB
        gbc.setState(0xcbd8, 0x106, 0xfa70, 0xd8b3, 0xc472, 0x5842, 0x0, 0x1);
        gbc.writeMem(0xcbd8, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x106);
        EXPECT(gbc.pc(), 0xcbda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbd8), 0xcb);
        EXPECT(gbc.readMem(0xcbd9), 0xad);
        // CB AD 03CC
        gbc.setState(0x7b43, 0xb8a9, 0x5450, 0x47da, 0x86ab, 0xdf6b, 0x1, 0x1);
        gbc.writeMem(0x7b43, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb8a9);
        EXPECT(gbc.pc(), 0x7b45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03CD
        gbc.setState(0x9f97, 0x9794, 0x9510, 0xbfc6, 0x6a75, 0x25f, 0x0, 0x1);
        gbc.writeMem(0x9f97, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9794);
        EXPECT(gbc.pc(), 0x9f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f97), 0xcb);
        EXPECT(gbc.readMem(0x9f98), 0xad);
        // CB AD 03CE
        gbc.setState(0xd9e, 0x8799, 0xff10, 0x1fbf, 0xeec0, 0x2bcd, 0x0, 0x0);
        gbc.writeMem(0xd9e, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8799);
        EXPECT(gbc.pc(), 0xda0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03D0
        gbc.setState(0x31bc, 0x344f, 0x1920, 0xfdd3, 0xb352, 0x4346, 0x0, 0x0);
        gbc.writeMem(0x31bc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x344f);
        EXPECT(gbc.pc(), 0x31be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03D1
        gbc.setState(0xa533, 0x71e5, 0xea80, 0x66b5, 0x798b, 0x6746, 0x0, 0x1);
        gbc.writeMem(0xa533, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x71e5);
        EXPECT(gbc.pc(), 0xa535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa533), 0xcb);
        EXPECT(gbc.readMem(0xa534), 0xad);
        // CB AD 03D2
        gbc.setState(0x3420, 0x45ef, 0xa4a0, 0xc5e6, 0xc3d7, 0xd6bf, 0x0, 0x0);
        gbc.writeMem(0x3420, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x45ef);
        EXPECT(gbc.pc(), 0x3422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03D3
        gbc.setState(0x76a3, 0x8f54, 0x5ff0, 0x1b90, 0x47f6, 0xb144, 0x1, 0x0);
        gbc.writeMem(0x76a3, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8f54);
        EXPECT(gbc.pc(), 0x76a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03D4
        gbc.setState(0xecf4, 0xac6a, 0x6950, 0x1d16, 0xb1b0, 0x912d, 0x1, 0x1);
        gbc.writeMem(0xecf4, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xac6a);
        EXPECT(gbc.pc(), 0xecf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecf4), 0xcb);
        EXPECT(gbc.readMem(0xecf5), 0xad);
        // CB AD 03D5
        gbc.setState(0x5319, 0xedef, 0xf550, 0xd1e7, 0xaafc, 0x554a, 0x0, 0x1);
        gbc.writeMem(0x5319, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xedef);
        EXPECT(gbc.pc(), 0x531b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03D6
        gbc.setState(0x4fef, 0xd51e, 0x4b70, 0x7c30, 0x12d2, 0xe6bd, 0x0, 0x1);
        gbc.writeMem(0x4fef, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd51e);
        EXPECT(gbc.pc(), 0x4ff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03D7
        gbc.setState(0xe696, 0x7f59, 0x3900, 0xe9b1, 0xbe6c, 0x70f3, 0x1, 0x0);
        gbc.writeMem(0xe696, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7f59);
        EXPECT(gbc.pc(), 0xe698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe696), 0xcb);
        EXPECT(gbc.readMem(0xe697), 0xad);
        // CB AD 03D9
        gbc.setState(0xb88a, 0xd655, 0x4e40, 0x1c9a, 0x116c, 0x5e21, 0x0, 0x0);
        gbc.writeMem(0xb88a, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd655);
        EXPECT(gbc.pc(), 0xb88c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb88a), 0xcb);
        EXPECT(gbc.readMem(0xb88b), 0xad);
        // CB AD 03DA
        gbc.setState(0xcaae, 0xe047, 0x78d0, 0x847a, 0x2749, 0x2f59, 0x0, 0x0);
        gbc.writeMem(0xcaae, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe047);
        EXPECT(gbc.pc(), 0xcab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaae), 0xcb);
        EXPECT(gbc.readMem(0xcaaf), 0xad);
        // CB AD 03DB
        gbc.setState(0x2a9f, 0x7a08, 0x7380, 0xd09c, 0x5d4b, 0xc42c, 0x0, 0x0);
        gbc.writeMem(0x2a9f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7a08);
        EXPECT(gbc.pc(), 0x2aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03DC
        gbc.setState(0x5a28, 0x52fe, 0x6b00, 0x295d, 0xe05e, 0x4c16, 0x0, 0x1);
        gbc.writeMem(0x5a28, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x52fe);
        EXPECT(gbc.pc(), 0x5a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03DD
        gbc.setState(0xd3cc, 0x1193, 0x20f0, 0xdc6, 0xdc2b, 0x46a, 0x1, 0x0);
        gbc.writeMem(0xd3cc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x1193);
        EXPECT(gbc.pc(), 0xd3ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3cc), 0xcb);
        EXPECT(gbc.readMem(0xd3cd), 0xad);
        // CB AD 03DE
        gbc.setState(0xe8a1, 0x9aa8, 0xae50, 0xbc3e, 0x6eff, 0xc49b, 0x0, 0x0);
        gbc.writeMem(0xe8a1, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9aa8);
        EXPECT(gbc.pc(), 0xe8a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8a1), 0xcb);
        EXPECT(gbc.readMem(0xe8a2), 0xad);
        // CB AD 03DF
        gbc.setState(0xa742, 0xddf0, 0x990, 0x5afc, 0x9ebb, 0x68e4, 0x0, 0x1);
        gbc.writeMem(0xa742, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xddf0);
        EXPECT(gbc.pc(), 0xa744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa742), 0xcb);
        EXPECT(gbc.readMem(0xa743), 0xad);
        // CB AD 03E0
        gbc.setState(0x4823, 0xb2a6, 0xf210, 0x104a, 0xf40a, 0x6451, 0x0, 0x1);
        gbc.writeMem(0x4823, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb2a6);
        EXPECT(gbc.pc(), 0x4825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03E1
        gbc.setState(0x79d5, 0x6b78, 0xf000, 0xea11, 0xa41e, 0x780f, 0x0, 0x0);
        gbc.writeMem(0x79d5, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6b78);
        EXPECT(gbc.pc(), 0x79d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03E2
        gbc.setState(0x77dc, 0x6052, 0x13f0, 0x9666, 0xce7b, 0x741, 0x1, 0x0);
        gbc.writeMem(0x77dc, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6052);
        EXPECT(gbc.pc(), 0x77de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03E3
        gbc.setState(0x295c, 0x9679, 0x2950, 0xe966, 0x28d, 0x6860, 0x0, 0x1);
        gbc.writeMem(0x295c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9679);
        EXPECT(gbc.pc(), 0x295e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03E4
        gbc.setState(0x3d1f, 0x781, 0x1a40, 0x734f, 0xc6df, 0xfaa1, 0x1, 0x1);
        gbc.writeMem(0x3d1f, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x781);
        EXPECT(gbc.pc(), 0x3d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AD 03E5
        gbc.setState(0x307c, 0xa916, 0x4cb0, 0xa01c, 0xc3c8, 0x5d94, 0x0, 0x0);
        gbc.writeMem(0x307c, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa916);
        EXPECT(gbc.pc(), 0x307e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AD 03E6
        gbc.setState(0xd8fd, 0x6425, 0x6500, 0x2195, 0x864e, 0xa31, 0x1, 0x1);
        gbc.writeMem(0xd8fd, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6425);
        EXPECT(gbc.pc(), 0xd8ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8fd), 0xcb);
        EXPECT(gbc.readMem(0xd8fe), 0xad);
        // CB AD 03E7
        gbc.setState(0x6d9, 0xef9d, 0xf910, 0x196a, 0x3a0f, 0xc95f, 0x0, 0x1);
        gbc.writeMem(0x6d9, { 0xcb, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xef9d);
        EXPECT(gbc.pc(), 0x6db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
