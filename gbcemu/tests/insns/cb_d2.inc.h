    TEST(gbcemu, opcode_cb_d2) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB D2 0000
        gbc.setState(0xb2e4, 0x88d7, 0x95b0, 0xe913, 0x3158, 0xc0c7, 0x0, 0x0);
        gbc.writeMem(0xb2e4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x88d7);
        EXPECT(gbc.pc(), 0xb2e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2e4), 0xcb);
        EXPECT(gbc.readMem(0xb2e5), 0xd2);
        // CB D2 0001
        gbc.setState(0x8b07, 0xfb2d, 0xcff0, 0x73d8, 0xf512, 0x8962, 0x0, 0x1);
        gbc.writeMem(0x8b07, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfb2d);
        EXPECT(gbc.pc(), 0x8b09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b07), 0xcb);
        EXPECT(gbc.readMem(0x8b08), 0xd2);
        // CB D2 0002
        gbc.setState(0xd78c, 0xf681, 0x84f0, 0x64f6, 0xb2f3, 0x1a57, 0x1, 0x1);
        gbc.writeMem(0xd78c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf681);
        EXPECT(gbc.pc(), 0xd78e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd78c), 0xcb);
        EXPECT(gbc.readMem(0xd78d), 0xd2);
        // CB D2 0003
        gbc.setState(0xd743, 0xe637, 0xdb80, 0x4242, 0x601e, 0xc108, 0x1, 0x1);
        gbc.writeMem(0xd743, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe637);
        EXPECT(gbc.pc(), 0xd745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd743), 0xcb);
        EXPECT(gbc.readMem(0xd744), 0xd2);
        // CB D2 0004
        gbc.setState(0x98dc, 0xe34b, 0x1e30, 0x39bc, 0xd372, 0x98ce, 0x1, 0x0);
        gbc.writeMem(0x98dc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe34b);
        EXPECT(gbc.pc(), 0x98de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98dc), 0xcb);
        EXPECT(gbc.readMem(0x98dd), 0xd2);
        // CB D2 0005
        gbc.setState(0xcb7c, 0x63b1, 0x7d00, 0x148b, 0xb73c, 0xf7f6, 0x0, 0x1);
        gbc.writeMem(0xcb7c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x63b1);
        EXPECT(gbc.pc(), 0xcb7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7c), 0xcb);
        EXPECT(gbc.readMem(0xcb7d), 0xd2);
        // CB D2 0006
        gbc.setState(0xcfa6, 0xb9b2, 0x2430, 0x9468, 0x73d9, 0xd6c7, 0x0, 0x1);
        gbc.writeMem(0xcfa6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb9b2);
        EXPECT(gbc.pc(), 0xcfa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa6), 0xcb);
        EXPECT(gbc.readMem(0xcfa7), 0xd2);
        // CB D2 0007
        gbc.setState(0x1c96, 0x7836, 0x3120, 0x9b75, 0x4457, 0xaa27, 0x1, 0x0);
        gbc.writeMem(0x1c96, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7836);
        EXPECT(gbc.pc(), 0x1c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0008
        gbc.setState(0xea19, 0xecc1, 0x9e80, 0x386d, 0x4b03, 0xde15, 0x1, 0x1);
        gbc.writeMem(0xea19, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xecc1);
        EXPECT(gbc.pc(), 0xea1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea19), 0xcb);
        EXPECT(gbc.readMem(0xea1a), 0xd2);
        // CB D2 0009
        gbc.setState(0x7e8d, 0x6da2, 0xb690, 0x934a, 0x36c5, 0xe775, 0x1, 0x0);
        gbc.writeMem(0x7e8d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6da2);
        EXPECT(gbc.pc(), 0x7e8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 000A
        gbc.setState(0xa42f, 0x35c1, 0xf850, 0xd01e, 0x2566, 0x7f85, 0x0, 0x0);
        gbc.writeMem(0xa42f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x35c1);
        EXPECT(gbc.pc(), 0xa431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa42f), 0xcb);
        EXPECT(gbc.readMem(0xa430), 0xd2);
        // CB D2 000B
        gbc.setState(0x3c12, 0xa7d7, 0x9580, 0x805b, 0xc473, 0xa043, 0x1, 0x0);
        gbc.writeMem(0x3c12, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa7d7);
        EXPECT(gbc.pc(), 0x3c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 000C
        gbc.setState(0x68c9, 0x2bfb, 0x8a0, 0x2f3f, 0x5ab3, 0xbb56, 0x0, 0x1);
        gbc.writeMem(0x68c9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2bfb);
        EXPECT(gbc.pc(), 0x68cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 000D
        gbc.setState(0xd511, 0x86c2, 0xb4a0, 0xfaa5, 0x7343, 0xd47, 0x1, 0x0);
        gbc.writeMem(0xd511, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x86c2);
        EXPECT(gbc.pc(), 0xd513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd511), 0xcb);
        EXPECT(gbc.readMem(0xd512), 0xd2);
        // CB D2 000E
        gbc.setState(0x6fc9, 0xbe6f, 0x6a40, 0xb40d, 0x621b, 0x96f5, 0x1, 0x1);
        gbc.writeMem(0x6fc9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbe6f);
        EXPECT(gbc.pc(), 0x6fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 000F
        gbc.setState(0x9b80, 0x8b1d, 0x200, 0x7f60, 0x19f0, 0x6cf4, 0x1, 0x1);
        gbc.writeMem(0x9b80, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8b1d);
        EXPECT(gbc.pc(), 0x9b82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b80), 0xcb);
        EXPECT(gbc.readMem(0x9b81), 0xd2);
        // CB D2 0010
        gbc.setState(0xbf3b, 0x28e, 0xa00, 0x490b, 0x56aa, 0xa6af, 0x0, 0x1);
        gbc.writeMem(0xbf3b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x28e);
        EXPECT(gbc.pc(), 0xbf3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf3b), 0xcb);
        EXPECT(gbc.readMem(0xbf3c), 0xd2);
        // CB D2 0011
        gbc.setState(0x7a6b, 0xc9c4, 0x33f0, 0xb949, 0x807d, 0xf48f, 0x1, 0x0);
        gbc.writeMem(0x7a6b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc9c4);
        EXPECT(gbc.pc(), 0x7a6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0012
        gbc.setState(0xdddb, 0xcf41, 0x6c50, 0xc84, 0xe0b5, 0x7b8d, 0x1, 0x1);
        gbc.writeMem(0xdddb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xcf41);
        EXPECT(gbc.pc(), 0xdddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdddb), 0xcb);
        EXPECT(gbc.readMem(0xdddc), 0xd2);
        // CB D2 0013
        gbc.setState(0x4b12, 0xa3a9, 0x8c70, 0xf508, 0x6a05, 0x4b2e, 0x0, 0x0);
        gbc.writeMem(0x4b12, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa3a9);
        EXPECT(gbc.pc(), 0x4b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0014
        gbc.setState(0x61fb, 0x57e6, 0x740, 0x8566, 0x1c0c, 0x8eef, 0x0, 0x1);
        gbc.writeMem(0x61fb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x57e6);
        EXPECT(gbc.pc(), 0x61fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0015
        gbc.setState(0x45fa, 0xb33b, 0xe0e0, 0xb17f, 0x7621, 0xa146, 0x0, 0x1);
        gbc.writeMem(0x45fa, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb33b);
        EXPECT(gbc.pc(), 0x45fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0016
        gbc.setState(0xde69, 0x594c, 0x9690, 0x6e17, 0xb6f6, 0xb48c, 0x0, 0x1);
        gbc.writeMem(0xde69, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x594c);
        EXPECT(gbc.pc(), 0xde6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde69), 0xcb);
        EXPECT(gbc.readMem(0xde6a), 0xd2);
        // CB D2 0017
        gbc.setState(0xa9b1, 0x5e10, 0x8b90, 0xa8b3, 0x664d, 0x17ee, 0x1, 0x0);
        gbc.writeMem(0xa9b1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5e10);
        EXPECT(gbc.pc(), 0xa9b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b1), 0xcb);
        EXPECT(gbc.readMem(0xa9b2), 0xd2);
        // CB D2 0018
        gbc.setState(0x5ee8, 0x9b7b, 0x3ed0, 0x5c, 0x60f7, 0xe5ae, 0x1, 0x0);
        gbc.writeMem(0x5ee8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9b7b);
        EXPECT(gbc.pc(), 0x5eea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0019
        gbc.setState(0x7a83, 0x6913, 0xbef0, 0xf53f, 0x6673, 0x8fa9, 0x0, 0x0);
        gbc.writeMem(0x7a83, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6913);
        EXPECT(gbc.pc(), 0x7a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 001A
        gbc.setState(0xe6e4, 0x566, 0xab40, 0x6649, 0x5c63, 0x684e, 0x0, 0x1);
        gbc.writeMem(0xe6e4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x566);
        EXPECT(gbc.pc(), 0xe6e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e4), 0xcb);
        EXPECT(gbc.readMem(0xe6e5), 0xd2);
        // CB D2 001B
        gbc.setState(0x3b16, 0x6868, 0x8180, 0xb6ac, 0xe576, 0x412a, 0x0, 0x0);
        gbc.writeMem(0x3b16, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6868);
        EXPECT(gbc.pc(), 0x3b18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 001C
        gbc.setState(0xe89d, 0x865a, 0x9f00, 0xed75, 0xa1e5, 0x7c01, 0x1, 0x0);
        gbc.writeMem(0xe89d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x865a);
        EXPECT(gbc.pc(), 0xe89f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe89d), 0xcb);
        EXPECT(gbc.readMem(0xe89e), 0xd2);
        // CB D2 001D
        gbc.setState(0x13b8, 0x2cc6, 0xeec0, 0xe3cd, 0x9270, 0x29d0, 0x0, 0x1);
        gbc.writeMem(0x13b8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2cc6);
        EXPECT(gbc.pc(), 0x13ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 001E
        gbc.setState(0x177d, 0xd9a2, 0xb9e0, 0xbdb7, 0xed9e, 0x36bd, 0x0, 0x1);
        gbc.writeMem(0x177d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd9a2);
        EXPECT(gbc.pc(), 0x177f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 001F
        gbc.setState(0x61ac, 0x6077, 0xb760, 0x2705, 0x57c0, 0xb5b3, 0x1, 0x1);
        gbc.writeMem(0x61ac, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6077);
        EXPECT(gbc.pc(), 0x61ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0020
        gbc.setState(0xadd4, 0x5925, 0x28a0, 0xbdc8, 0x776c, 0x53c5, 0x1, 0x0);
        gbc.writeMem(0xadd4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5925);
        EXPECT(gbc.pc(), 0xadd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd4), 0xcb);
        EXPECT(gbc.readMem(0xadd5), 0xd2);
        // CB D2 0021
        gbc.setState(0xc28c, 0xa7ee, 0x66c0, 0x68ef, 0x86cf, 0xe536, 0x1, 0x0);
        gbc.writeMem(0xc28c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa7ee);
        EXPECT(gbc.pc(), 0xc28e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc28c), 0xcb);
        EXPECT(gbc.readMem(0xc28d), 0xd2);
        // CB D2 0022
        gbc.setState(0x1f2a, 0x553, 0x8470, 0x387d, 0x35a, 0x3cef, 0x0, 0x1);
        gbc.writeMem(0x1f2a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x553);
        EXPECT(gbc.pc(), 0x1f2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0023
        gbc.setState(0x698, 0x1bbd, 0x2210, 0xc58f, 0x8e4f, 0x6600, 0x1, 0x0);
        gbc.writeMem(0x698, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1bbd);
        EXPECT(gbc.pc(), 0x69a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0024
        gbc.setState(0xd854, 0x3925, 0x2470, 0xba18, 0xf0f8, 0xa093, 0x1, 0x0);
        gbc.writeMem(0xd854, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3925);
        EXPECT(gbc.pc(), 0xd856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd854), 0xcb);
        EXPECT(gbc.readMem(0xd855), 0xd2);
        // CB D2 0025
        gbc.setState(0x1dc7, 0x8bde, 0xf3a0, 0x97ee, 0x9a03, 0xa810, 0x0, 0x0);
        gbc.writeMem(0x1dc7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8bde);
        EXPECT(gbc.pc(), 0x1dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0026
        gbc.setState(0x66d0, 0xd53f, 0x1d40, 0x894e, 0x9f4b, 0xbb9d, 0x0, 0x0);
        gbc.writeMem(0x66d0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd53f);
        EXPECT(gbc.pc(), 0x66d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0027
        gbc.setState(0xce08, 0x6766, 0x4e50, 0x8b56, 0xa84b, 0xc830, 0x1, 0x0);
        gbc.writeMem(0xce08, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6766);
        EXPECT(gbc.pc(), 0xce0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce08), 0xcb);
        EXPECT(gbc.readMem(0xce09), 0xd2);
        // CB D2 0028
        gbc.setState(0xaa6a, 0xfd12, 0x4f70, 0xd981, 0xd618, 0x33d, 0x0, 0x1);
        gbc.writeMem(0xaa6a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfd12);
        EXPECT(gbc.pc(), 0xaa6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa6a), 0xcb);
        EXPECT(gbc.readMem(0xaa6b), 0xd2);
        // CB D2 0029
        gbc.setState(0x5302, 0x8008, 0x3d0, 0xdf93, 0x2690, 0x507f, 0x0, 0x1);
        gbc.writeMem(0x5302, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8008);
        EXPECT(gbc.pc(), 0x5304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 002A
        gbc.setState(0x8491, 0x967f, 0x3550, 0x98f4, 0xe4c2, 0x142c, 0x0, 0x0);
        gbc.writeMem(0x8491, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x967f);
        EXPECT(gbc.pc(), 0x8493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8491), 0xcb);
        EXPECT(gbc.readMem(0x8492), 0xd2);
        // CB D2 002B
        gbc.setState(0x83, 0x1dd, 0x1dd0, 0xc898, 0x63bd, 0xf800, 0x0, 0x0);
        gbc.writeMem(0x83, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1dd);
        EXPECT(gbc.pc(), 0x85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 002C
        gbc.setState(0xb16d, 0xc8b9, 0x3de0, 0x9ed8, 0x4441, 0xcdb, 0x0, 0x0);
        gbc.writeMem(0xb16d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0xb16f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb16d), 0xcb);
        EXPECT(gbc.readMem(0xb16e), 0xd2);
        // CB D2 002D
        gbc.setState(0xacc, 0xb127, 0xaa0, 0xc957, 0xc103, 0x99e8, 0x1, 0x1);
        gbc.writeMem(0xacc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb127);
        EXPECT(gbc.pc(), 0xace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 002E
        gbc.setState(0x3b89, 0x7187, 0xeba0, 0xab9, 0x703d, 0x1247, 0x1, 0x0);
        gbc.writeMem(0x3b89, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7187);
        EXPECT(gbc.pc(), 0x3b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 002F
        gbc.setState(0x316a, 0x98b2, 0x9be0, 0x8428, 0x5865, 0xf54e, 0x1, 0x1);
        gbc.writeMem(0x316a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x98b2);
        EXPECT(gbc.pc(), 0x316c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0030
        gbc.setState(0xb480, 0xdaf5, 0x610, 0x9c3c, 0xec4d, 0xd927, 0x1, 0x0);
        gbc.writeMem(0xb480, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xdaf5);
        EXPECT(gbc.pc(), 0xb482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb480), 0xcb);
        EXPECT(gbc.readMem(0xb481), 0xd2);
        // CB D2 0031
        gbc.setState(0xb1b5, 0xcf0d, 0xbaf0, 0xd06f, 0x5974, 0xe102, 0x0, 0x1);
        gbc.writeMem(0xb1b5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcf0d);
        EXPECT(gbc.pc(), 0xb1b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b5), 0xcb);
        EXPECT(gbc.readMem(0xb1b6), 0xd2);
        // CB D2 0032
        gbc.setState(0x8a21, 0x4c51, 0x4e0, 0x4c58, 0x4b9, 0x90a7, 0x0, 0x0);
        gbc.writeMem(0x8a21, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4c51);
        EXPECT(gbc.pc(), 0x8a23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a21), 0xcb);
        EXPECT(gbc.readMem(0x8a22), 0xd2);
        // CB D2 0033
        gbc.setState(0xbc28, 0x13a6, 0x4730, 0x72d3, 0xaef, 0xcf5c, 0x0, 0x1);
        gbc.writeMem(0xbc28, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x13a6);
        EXPECT(gbc.pc(), 0xbc2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc28), 0xcb);
        EXPECT(gbc.readMem(0xbc29), 0xd2);
        // CB D2 0034
        gbc.setState(0x433, 0xb31f, 0x9250, 0x4200, 0x7065, 0xf7fd, 0x0, 0x1);
        gbc.writeMem(0x433, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb31f);
        EXPECT(gbc.pc(), 0x435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0035
        gbc.setState(0x47db, 0xcc60, 0xf340, 0xfa9c, 0xdcc, 0x1f6c, 0x1, 0x0);
        gbc.writeMem(0x47db, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcc60);
        EXPECT(gbc.pc(), 0x47dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0036
        gbc.setState(0x9582, 0x731e, 0xca90, 0x8537, 0x283e, 0x5d97, 0x1, 0x1);
        gbc.writeMem(0x9582, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x731e);
        EXPECT(gbc.pc(), 0x9584);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9582), 0xcb);
        EXPECT(gbc.readMem(0x9583), 0xd2);
        // CB D2 0038
        gbc.setState(0x9af3, 0x9249, 0x5f20, 0x2337, 0x9da6, 0xd2af, 0x0, 0x1);
        gbc.writeMem(0x9af3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9249);
        EXPECT(gbc.pc(), 0x9af5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af3), 0xcb);
        EXPECT(gbc.readMem(0x9af4), 0xd2);
        // CB D2 0039
        gbc.setState(0x156e, 0xf9d3, 0x8610, 0xd7f1, 0x49f8, 0x35bf, 0x1, 0x0);
        gbc.writeMem(0x156e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf9d3);
        EXPECT(gbc.pc(), 0x1570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 003A
        gbc.setState(0x67cf, 0xda9c, 0x74e0, 0x15a6, 0xe817, 0x791d, 0x0, 0x1);
        gbc.writeMem(0x67cf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xda9c);
        EXPECT(gbc.pc(), 0x67d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 003B
        gbc.setState(0x3dab, 0x350f, 0x92a0, 0xcf8d, 0xf555, 0x76a1, 0x0, 0x1);
        gbc.writeMem(0x3dab, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x350f);
        EXPECT(gbc.pc(), 0x3dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 003C
        gbc.setState(0x66cf, 0xc7a9, 0x56e0, 0x33ce, 0x9d4, 0x4e87, 0x1, 0x1);
        gbc.writeMem(0x66cf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc7a9);
        EXPECT(gbc.pc(), 0x66d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 003D
        gbc.setState(0xc28e, 0x9fb5, 0xa220, 0xb8a4, 0x4738, 0x19c6, 0x0, 0x0);
        gbc.writeMem(0xc28e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9fb5);
        EXPECT(gbc.pc(), 0xc290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc28e), 0xcb);
        EXPECT(gbc.readMem(0xc28f), 0xd2);
        // CB D2 003E
        gbc.setState(0x253f, 0xc5f8, 0x1f80, 0xe9ca, 0x46ab, 0x519e, 0x1, 0x0);
        gbc.writeMem(0x253f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc5f8);
        EXPECT(gbc.pc(), 0x2541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 003F
        gbc.setState(0xce1d, 0xe0b5, 0x48e0, 0xf462, 0x1e97, 0xbf2, 0x1, 0x1);
        gbc.writeMem(0xce1d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe0b5);
        EXPECT(gbc.pc(), 0xce1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce1d), 0xcb);
        EXPECT(gbc.readMem(0xce1e), 0xd2);
        // CB D2 0040
        gbc.setState(0xd1a3, 0xbbc2, 0x6b00, 0xf450, 0x9bb8, 0xebe4, 0x0, 0x0);
        gbc.writeMem(0xd1a3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xbbc2);
        EXPECT(gbc.pc(), 0xd1a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a3), 0xcb);
        EXPECT(gbc.readMem(0xd1a4), 0xd2);
        // CB D2 0041
        gbc.setState(0x7663, 0x684a, 0xf630, 0x3524, 0xad3c, 0x28cf, 0x1, 0x0);
        gbc.writeMem(0x7663, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x684a);
        EXPECT(gbc.pc(), 0x7665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0042
        gbc.setState(0xc82a, 0xdb69, 0x16e0, 0xc691, 0xfb99, 0xe071, 0x0, 0x1);
        gbc.writeMem(0xc82a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xdb69);
        EXPECT(gbc.pc(), 0xc82c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc82a), 0xcb);
        EXPECT(gbc.readMem(0xc82b), 0xd2);
        // CB D2 0043
        gbc.setState(0xcf90, 0x3a0e, 0x3590, 0x27b3, 0x48b5, 0xc79, 0x1, 0x0);
        gbc.writeMem(0xcf90, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3a0e);
        EXPECT(gbc.pc(), 0xcf92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf90), 0xcb);
        EXPECT(gbc.readMem(0xcf91), 0xd2);
        // CB D2 0044
        gbc.setState(0xc88f, 0x8b2c, 0xfbe0, 0x1c64, 0xcb47, 0x1003, 0x1, 0x1);
        gbc.writeMem(0xc88f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8b2c);
        EXPECT(gbc.pc(), 0xc891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88f), 0xcb);
        EXPECT(gbc.readMem(0xc890), 0xd2);
        // CB D2 0045
        gbc.setState(0x11f0, 0x61e4, 0xd910, 0x6b76, 0x8e7, 0x9911, 0x1, 0x1);
        gbc.writeMem(0x11f0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x61e4);
        EXPECT(gbc.pc(), 0x11f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0046
        gbc.setState(0x2796, 0x831f, 0xe120, 0xdcdd, 0x4e9e, 0xd58d, 0x1, 0x0);
        gbc.writeMem(0x2796, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x831f);
        EXPECT(gbc.pc(), 0x2798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0047
        gbc.setState(0x5fe9, 0x99dd, 0x9580, 0xdadd, 0x8c5f, 0x9105, 0x1, 0x0);
        gbc.writeMem(0x5fe9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x99dd);
        EXPECT(gbc.pc(), 0x5feb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0049
        gbc.setState(0x6808, 0xa5fb, 0x9830, 0xc6f1, 0x909c, 0x872b, 0x1, 0x1);
        gbc.writeMem(0x6808, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa5fb);
        EXPECT(gbc.pc(), 0x680a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 004B
        gbc.setState(0x9140, 0x2538, 0xe1d0, 0x12f5, 0xfc23, 0x4e60, 0x1, 0x1);
        gbc.writeMem(0x9140, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2538);
        EXPECT(gbc.pc(), 0x9142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9140), 0xcb);
        EXPECT(gbc.readMem(0x9141), 0xd2);
        // CB D2 004C
        gbc.setState(0x922, 0x9d3a, 0x3da0, 0xce1d, 0xc04b, 0x9dd7, 0x0, 0x1);
        gbc.writeMem(0x922, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9d3a);
        EXPECT(gbc.pc(), 0x924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 004D
        gbc.setState(0x2519, 0xed30, 0x7980, 0xdfa1, 0x1405, 0x9b11, 0x1, 0x1);
        gbc.writeMem(0x2519, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xed30);
        EXPECT(gbc.pc(), 0x251b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 004F
        gbc.setState(0x504c, 0x2ea0, 0xaa60, 0x1986, 0x3474, 0x133, 0x1, 0x0);
        gbc.writeMem(0x504c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2ea0);
        EXPECT(gbc.pc(), 0x504e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0050
        gbc.setState(0xe8af, 0x6fcf, 0xe720, 0xfc31, 0x8929, 0x4fd, 0x0, 0x1);
        gbc.writeMem(0xe8af, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6fcf);
        EXPECT(gbc.pc(), 0xe8b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8af), 0xcb);
        EXPECT(gbc.readMem(0xe8b0), 0xd2);
        // CB D2 0051
        gbc.setState(0x2e80, 0xd5dd, 0x1190, 0x6ae1, 0x823c, 0xe934, 0x0, 0x1);
        gbc.writeMem(0x2e80, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd5dd);
        EXPECT(gbc.pc(), 0x2e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0052
        gbc.setState(0xa544, 0x15b7, 0xbd50, 0xc5e6, 0x362a, 0x2f72, 0x1, 0x0);
        gbc.writeMem(0xa544, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x15b7);
        EXPECT(gbc.pc(), 0xa546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa544), 0xcb);
        EXPECT(gbc.readMem(0xa545), 0xd2);
        // CB D2 0053
        gbc.setState(0x1bab, 0x70d8, 0xfb70, 0x6a1b, 0xbc65, 0x8d77, 0x0, 0x1);
        gbc.writeMem(0x1bab, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x70d8);
        EXPECT(gbc.pc(), 0x1bad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0054
        gbc.setState(0x97b0, 0xae5, 0xc6d0, 0x38cb, 0x387, 0x23b3, 0x1, 0x0);
        gbc.writeMem(0x97b0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xae5);
        EXPECT(gbc.pc(), 0x97b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b0), 0xcb);
        EXPECT(gbc.readMem(0x97b1), 0xd2);
        // CB D2 0055
        gbc.setState(0xb31d, 0xf2de, 0x5090, 0xbd0a, 0xc29e, 0xc2dc, 0x0, 0x0);
        gbc.writeMem(0xb31d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf2de);
        EXPECT(gbc.pc(), 0xb31f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb31d), 0xcb);
        EXPECT(gbc.readMem(0xb31e), 0xd2);
        // CB D2 0056
        gbc.setState(0x64c2, 0x4590, 0xffd0, 0xa6dd, 0x709d, 0x1fd7, 0x1, 0x1);
        gbc.writeMem(0x64c2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4590);
        EXPECT(gbc.pc(), 0x64c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0057
        gbc.setState(0x3913, 0x1aee, 0x930, 0x3cf2, 0xb29, 0xe5a6, 0x1, 0x1);
        gbc.writeMem(0x3913, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1aee);
        EXPECT(gbc.pc(), 0x3915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0058
        gbc.setState(0x6c6a, 0x4f9c, 0x1320, 0xc485, 0xf550, 0x8aa0, 0x0, 0x0);
        gbc.writeMem(0x6c6a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4f9c);
        EXPECT(gbc.pc(), 0x6c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0059
        gbc.setState(0xce3f, 0xabb1, 0x6a0, 0x931c, 0xd0b6, 0x471b, 0x0, 0x0);
        gbc.writeMem(0xce3f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xabb1);
        EXPECT(gbc.pc(), 0xce41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce3f), 0xcb);
        EXPECT(gbc.readMem(0xce40), 0xd2);
        // CB D2 005A
        gbc.setState(0xb54a, 0xc869, 0x8d90, 0x7252, 0x7461, 0xfde0, 0x0, 0x0);
        gbc.writeMem(0xb54a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc869);
        EXPECT(gbc.pc(), 0xb54c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb54a), 0xcb);
        EXPECT(gbc.readMem(0xb54b), 0xd2);
        // CB D2 005B
        gbc.setState(0x510c, 0x38bf, 0x5260, 0xc7f1, 0x8cb5, 0x8da6, 0x1, 0x1);
        gbc.writeMem(0x510c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x38bf);
        EXPECT(gbc.pc(), 0x510e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 005C
        gbc.setState(0xb52e, 0x92c3, 0x1f40, 0x764d, 0xc01c, 0x5060, 0x0, 0x1);
        gbc.writeMem(0xb52e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x92c3);
        EXPECT(gbc.pc(), 0xb530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb52e), 0xcb);
        EXPECT(gbc.readMem(0xb52f), 0xd2);
        // CB D2 005D
        gbc.setState(0x6e19, 0xb850, 0xd100, 0x9a4d, 0x843c, 0xac1, 0x0, 0x1);
        gbc.writeMem(0x6e19, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb850);
        EXPECT(gbc.pc(), 0x6e1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 005E
        gbc.setState(0x1fb1, 0x3073, 0x8520, 0x630c, 0xbd4e, 0xe98b, 0x0, 0x1);
        gbc.writeMem(0x1fb1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3073);
        EXPECT(gbc.pc(), 0x1fb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 005F
        gbc.setState(0xc5db, 0xf9a9, 0x1f70, 0x4dc2, 0x8aff, 0x469a, 0x0, 0x1);
        gbc.writeMem(0xc5db, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf9a9);
        EXPECT(gbc.pc(), 0xc5dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5db), 0xcb);
        EXPECT(gbc.readMem(0xc5dc), 0xd2);
        // CB D2 0060
        gbc.setState(0x1b09, 0x342e, 0xaa60, 0x2250, 0x4ec8, 0x9be7, 0x1, 0x0);
        gbc.writeMem(0x1b09, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x342e);
        EXPECT(gbc.pc(), 0x1b0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0062
        gbc.setState(0x973, 0x299e, 0x90b0, 0x1775, 0x5e62, 0xf78c, 0x0, 0x0);
        gbc.writeMem(0x973, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x299e);
        EXPECT(gbc.pc(), 0x975);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0063
        gbc.setState(0xaed4, 0x4e70, 0x6870, 0xe928, 0xd929, 0x5bee, 0x0, 0x0);
        gbc.writeMem(0xaed4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4e70);
        EXPECT(gbc.pc(), 0xaed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed4), 0xcb);
        EXPECT(gbc.readMem(0xaed5), 0xd2);
        // CB D2 0064
        gbc.setState(0x55dd, 0x8ce1, 0xaf0, 0x75ff, 0x8569, 0x3616, 0x1, 0x0);
        gbc.writeMem(0x55dd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8ce1);
        EXPECT(gbc.pc(), 0x55df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0065
        gbc.setState(0xd98f, 0x711d, 0x7580, 0x3b1a, 0x1d6d, 0x232f, 0x0, 0x0);
        gbc.writeMem(0xd98f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x711d);
        EXPECT(gbc.pc(), 0xd991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd98f), 0xcb);
        EXPECT(gbc.readMem(0xd990), 0xd2);
        // CB D2 0066
        gbc.setState(0xa99f, 0xf6e5, 0xbf70, 0xdbaf, 0x72f3, 0x83d6, 0x1, 0x0);
        gbc.writeMem(0xa99f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf6e5);
        EXPECT(gbc.pc(), 0xa9a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99f), 0xcb);
        EXPECT(gbc.readMem(0xa9a0), 0xd2);
        // CB D2 0067
        gbc.setState(0xc9, 0x5703, 0x3c20, 0x93f8, 0x1ad5, 0x2443, 0x0, 0x1);
        gbc.writeMem(0xc9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5703);
        EXPECT(gbc.pc(), 0xcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0068
        gbc.setState(0xc646, 0xf1f0, 0x31f0, 0xfebc, 0x4da1, 0xd23e, 0x1, 0x1);
        gbc.writeMem(0xc646, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf1f0);
        EXPECT(gbc.pc(), 0xc648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc646), 0xcb);
        EXPECT(gbc.readMem(0xc647), 0xd2);
        // CB D2 0069
        gbc.setState(0xee73, 0x875d, 0x23f0, 0x90aa, 0x351c, 0x5cea, 0x1, 0x1);
        gbc.writeMem(0xee73, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x875d);
        EXPECT(gbc.pc(), 0xee75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee73), 0xcb);
        EXPECT(gbc.readMem(0xee74), 0xd2);
        // CB D2 006A
        gbc.setState(0xc724, 0x536d, 0xf060, 0x44d9, 0xd134, 0xae7a, 0x0, 0x0);
        gbc.writeMem(0xc724, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x536d);
        EXPECT(gbc.pc(), 0xc726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc724), 0xcb);
        EXPECT(gbc.readMem(0xc725), 0xd2);
        // CB D2 006C
        gbc.setState(0x33dd, 0xbce9, 0x4aa0, 0x8260, 0x92cd, 0x4799, 0x1, 0x1);
        gbc.writeMem(0x33dd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbce9);
        EXPECT(gbc.pc(), 0x33df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 006D
        gbc.setState(0x73fb, 0x4628, 0xf210, 0x4fdd, 0x2338, 0x79af, 0x1, 0x1);
        gbc.writeMem(0x73fb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4628);
        EXPECT(gbc.pc(), 0x73fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 006F
        gbc.setState(0x6722, 0xa524, 0x61f0, 0xd1b1, 0xa491, 0xba8c, 0x1, 0x0);
        gbc.writeMem(0x6722, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa524);
        EXPECT(gbc.pc(), 0x6724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0070
        gbc.setState(0x4d9d, 0x42eb, 0x10a0, 0x3955, 0xd468, 0x853b, 0x0, 0x1);
        gbc.writeMem(0x4d9d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x42eb);
        EXPECT(gbc.pc(), 0x4d9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0071
        gbc.setState(0x9b3b, 0xdc22, 0x9e40, 0xf105, 0xabdd, 0x7efa, 0x0, 0x1);
        gbc.writeMem(0x9b3b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdc22);
        EXPECT(gbc.pc(), 0x9b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b3b), 0xcb);
        EXPECT(gbc.readMem(0x9b3c), 0xd2);
        // CB D2 0072
        gbc.setState(0x205c, 0x45e6, 0x9ae0, 0x7c9c, 0x4301, 0x72ec, 0x1, 0x1);
        gbc.writeMem(0x205c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x45e6);
        EXPECT(gbc.pc(), 0x205e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0073
        gbc.setState(0x1d76, 0xb2de, 0xe630, 0x8f6, 0xc9d9, 0x19b7, 0x0, 0x0);
        gbc.writeMem(0x1d76, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb2de);
        EXPECT(gbc.pc(), 0x1d78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0075
        gbc.setState(0x9744, 0xffd8, 0x6780, 0x3a09, 0x5bef, 0xff5c, 0x1, 0x1);
        gbc.writeMem(0x9744, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xffd8);
        EXPECT(gbc.pc(), 0x9746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9744), 0xcb);
        EXPECT(gbc.readMem(0x9745), 0xd2);
        // CB D2 0076
        gbc.setState(0x40e3, 0x10d6, 0x2d90, 0x414d, 0x84e8, 0x3694, 0x1, 0x0);
        gbc.writeMem(0x40e3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x10d6);
        EXPECT(gbc.pc(), 0x40e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0077
        gbc.setState(0x720a, 0x68e9, 0x5520, 0xabc9, 0xf261, 0xc2ab, 0x0, 0x0);
        gbc.writeMem(0x720a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x68e9);
        EXPECT(gbc.pc(), 0x720c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 007A
        gbc.setState(0xc5b7, 0x3312, 0xc2f0, 0x458b, 0x8bc7, 0xa119, 0x0, 0x0);
        gbc.writeMem(0xc5b7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3312);
        EXPECT(gbc.pc(), 0xc5b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5b7), 0xcb);
        EXPECT(gbc.readMem(0xc5b8), 0xd2);
        // CB D2 007C
        gbc.setState(0x8c24, 0x2acb, 0x8130, 0xbd7d, 0xedd6, 0x22d1, 0x0, 0x1);
        gbc.writeMem(0x8c24, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2acb);
        EXPECT(gbc.pc(), 0x8c26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c24), 0xcb);
        EXPECT(gbc.readMem(0x8c25), 0xd2);
        // CB D2 007D
        gbc.setState(0x18f6, 0x297b, 0xb6d0, 0x2139, 0x3cf4, 0xdb4e, 0x0, 0x0);
        gbc.writeMem(0x18f6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x297b);
        EXPECT(gbc.pc(), 0x18f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 007E
        gbc.setState(0x9d74, 0xa347, 0x12a0, 0x7eca, 0xc65, 0xaa6c, 0x0, 0x1);
        gbc.writeMem(0x9d74, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa347);
        EXPECT(gbc.pc(), 0x9d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d74), 0xcb);
        EXPECT(gbc.readMem(0x9d75), 0xd2);
        // CB D2 007F
        gbc.setState(0x3df4, 0x3e96, 0xb310, 0x7c1f, 0xae1e, 0x43f8, 0x1, 0x0);
        gbc.writeMem(0x3df4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3e96);
        EXPECT(gbc.pc(), 0x3df6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0080
        gbc.setState(0x50dd, 0x1b3a, 0xeb70, 0xd1be, 0x698a, 0x4e38, 0x0, 0x0);
        gbc.writeMem(0x50dd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1b3a);
        EXPECT(gbc.pc(), 0x50df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0081
        gbc.setState(0x53c8, 0x3ac7, 0xd0b0, 0x7812, 0x25b5, 0x2c6a, 0x1, 0x1);
        gbc.writeMem(0x53c8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3ac7);
        EXPECT(gbc.pc(), 0x53ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0083
        gbc.setState(0xd4fb, 0xd11, 0xf110, 0x3182, 0x3b8d, 0xe531, 0x1, 0x0);
        gbc.writeMem(0xd4fb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xd11);
        EXPECT(gbc.pc(), 0xd4fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4fb), 0xcb);
        EXPECT(gbc.readMem(0xd4fc), 0xd2);
        // CB D2 0084
        gbc.setState(0x3d18, 0x50f0, 0xdb0, 0x34da, 0xaff2, 0xefde, 0x1, 0x1);
        gbc.writeMem(0x3d18, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x50f0);
        EXPECT(gbc.pc(), 0x3d1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0085
        gbc.setState(0x730, 0xb274, 0x46d0, 0x22af, 0x5c94, 0x457a, 0x1, 0x0);
        gbc.writeMem(0x730, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb274);
        EXPECT(gbc.pc(), 0x732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0086
        gbc.setState(0x8a05, 0xd2f6, 0x3720, 0xebf5, 0x89df, 0xfd97, 0x1, 0x0);
        gbc.writeMem(0x8a05, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd2f6);
        EXPECT(gbc.pc(), 0x8a07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a05), 0xcb);
        EXPECT(gbc.readMem(0x8a06), 0xd2);
        // CB D2 0087
        gbc.setState(0x3153, 0xeaba, 0x6510, 0x645, 0x98ed, 0x93a, 0x1, 0x0);
        gbc.writeMem(0x3153, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xeaba);
        EXPECT(gbc.pc(), 0x3155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0088
        gbc.setState(0x3b1b, 0x7528, 0x7460, 0x36a6, 0x75ae, 0x8a02, 0x0, 0x1);
        gbc.writeMem(0x3b1b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7528);
        EXPECT(gbc.pc(), 0x3b1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0089
        gbc.setState(0xe1e4, 0x56b3, 0xd190, 0xab25, 0x7e26, 0x1e04, 0x0, 0x1);
        gbc.writeMem(0xe1e4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x56b3);
        EXPECT(gbc.pc(), 0xe1e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e4), 0xcb);
        EXPECT(gbc.readMem(0xe1e5), 0xd2);
        // CB D2 008A
        gbc.setState(0xcc5d, 0x5d6b, 0x8340, 0xa4f8, 0x4f7a, 0x7218, 0x1, 0x1);
        gbc.writeMem(0xcc5d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5d6b);
        EXPECT(gbc.pc(), 0xcc5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc5d), 0xcb);
        EXPECT(gbc.readMem(0xcc5e), 0xd2);
        // CB D2 008B
        gbc.setState(0xde57, 0x4da, 0xc810, 0x3b12, 0xd998, 0xcb4a, 0x0, 0x0);
        gbc.writeMem(0xde57, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4da);
        EXPECT(gbc.pc(), 0xde59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde57), 0xcb);
        EXPECT(gbc.readMem(0xde58), 0xd2);
        // CB D2 008C
        gbc.setState(0xa018, 0x80ec, 0x4350, 0x7c99, 0xc5d8, 0x7dd6, 0x1, 0x0);
        gbc.writeMem(0xa018, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x80ec);
        EXPECT(gbc.pc(), 0xa01a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa018), 0xcb);
        EXPECT(gbc.readMem(0xa019), 0xd2);
        // CB D2 008D
        gbc.setState(0x36a5, 0x27b, 0xdba0, 0x7fd0, 0x989c, 0x9c21, 0x0, 0x0);
        gbc.writeMem(0x36a5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x27b);
        EXPECT(gbc.pc(), 0x36a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 008E
        gbc.setState(0xb670, 0x7ea8, 0x2c90, 0xc491, 0xebf4, 0x3564, 0x1, 0x0);
        gbc.writeMem(0xb670, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7ea8);
        EXPECT(gbc.pc(), 0xb672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb670), 0xcb);
        EXPECT(gbc.readMem(0xb671), 0xd2);
        // CB D2 0090
        gbc.setState(0x2d85, 0xf417, 0xae30, 0xac4e, 0xdae4, 0x12b0, 0x1, 0x1);
        gbc.writeMem(0x2d85, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf417);
        EXPECT(gbc.pc(), 0x2d87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0091
        gbc.setState(0x5c2e, 0x4e31, 0x3f50, 0xdb13, 0xc5ac, 0x6ba3, 0x0, 0x0);
        gbc.writeMem(0x5c2e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4e31);
        EXPECT(gbc.pc(), 0x5c30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0093
        gbc.setState(0xaad3, 0xe115, 0x5a10, 0x6af5, 0xbf84, 0xed4a, 0x0, 0x0);
        gbc.writeMem(0xaad3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe115);
        EXPECT(gbc.pc(), 0xaad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad3), 0xcb);
        EXPECT(gbc.readMem(0xaad4), 0xd2);
        // CB D2 0094
        gbc.setState(0x94d9, 0xc0ae, 0x8ea0, 0xf598, 0x1749, 0x2b08, 0x1, 0x1);
        gbc.writeMem(0x94d9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc0ae);
        EXPECT(gbc.pc(), 0x94db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d9), 0xcb);
        EXPECT(gbc.readMem(0x94da), 0xd2);
        // CB D2 0095
        gbc.setState(0x34bd, 0xf658, 0x5c00, 0x6b29, 0x6b59, 0xb409, 0x0, 0x0);
        gbc.writeMem(0x34bd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf658);
        EXPECT(gbc.pc(), 0x34bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0096
        gbc.setState(0x9dff, 0xadc8, 0x610, 0x2fd1, 0x9349, 0x9350, 0x0, 0x1);
        gbc.writeMem(0x9dff, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xadc8);
        EXPECT(gbc.pc(), 0x9e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dff), 0xcb);
        EXPECT(gbc.readMem(0x9e00), 0xd2);
        // CB D2 0097
        gbc.setState(0x6f8e, 0xf40f, 0x4d90, 0x9de8, 0xb5a3, 0x1b44, 0x1, 0x0);
        gbc.writeMem(0x6f8e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf40f);
        EXPECT(gbc.pc(), 0x6f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0098
        gbc.setState(0x6fed, 0x10da, 0x8250, 0x2d25, 0xc19, 0xcb4a, 0x1, 0x1);
        gbc.writeMem(0x6fed, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x10da);
        EXPECT(gbc.pc(), 0x6fef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0099
        gbc.setState(0x20fe, 0x36d, 0xc0e0, 0xf9b7, 0x76a4, 0x691c, 0x1, 0x0);
        gbc.writeMem(0x20fe, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x36d);
        EXPECT(gbc.pc(), 0x2100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 009A
        gbc.setState(0x72b2, 0xfc5, 0x94a0, 0x6f5a, 0x6d21, 0xaf48, 0x1, 0x1);
        gbc.writeMem(0x72b2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfc5);
        EXPECT(gbc.pc(), 0x72b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 009B
        gbc.setState(0x6be2, 0x8e60, 0xf70, 0xc5a9, 0x35c5, 0xb91e, 0x1, 0x1);
        gbc.writeMem(0x6be2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x8e60);
        EXPECT(gbc.pc(), 0x6be4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 009C
        gbc.setState(0x8ec4, 0xcf73, 0x3b60, 0x8e1d, 0x8b51, 0xeb13, 0x1, 0x1);
        gbc.writeMem(0x8ec4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xcf73);
        EXPECT(gbc.pc(), 0x8ec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec4), 0xcb);
        EXPECT(gbc.readMem(0x8ec5), 0xd2);
        // CB D2 009D
        gbc.setState(0x5ea6, 0x70b4, 0xd310, 0xfe79, 0xe2b9, 0x7d3a, 0x1, 0x1);
        gbc.writeMem(0x5ea6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x70b4);
        EXPECT(gbc.pc(), 0x5ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 009E
        gbc.setState(0x6001, 0xe321, 0xfc70, 0x6b2f, 0x6c76, 0x73fd, 0x1, 0x1);
        gbc.writeMem(0x6001, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe321);
        EXPECT(gbc.pc(), 0x6003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 009F
        gbc.setState(0x71df, 0x2e4, 0x4e30, 0x6868, 0x44c2, 0x2f45, 0x1, 0x0);
        gbc.writeMem(0x71df, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2e4);
        EXPECT(gbc.pc(), 0x71e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00A0
        gbc.setState(0x4919, 0x3da0, 0x1a10, 0x1045, 0x3dce, 0xd3e6, 0x1, 0x0);
        gbc.writeMem(0x4919, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3da0);
        EXPECT(gbc.pc(), 0x491b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00A1
        gbc.setState(0x8a41, 0x17c, 0xed0, 0x869f, 0xb07f, 0x3cad, 0x0, 0x1);
        gbc.writeMem(0x8a41, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x17c);
        EXPECT(gbc.pc(), 0x8a43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a41), 0xcb);
        EXPECT(gbc.readMem(0x8a42), 0xd2);
        // CB D2 00A2
        gbc.setState(0xef36, 0x72e7, 0x41a0, 0x9e11, 0x3e54, 0xa429, 0x1, 0x1);
        gbc.writeMem(0xef36, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x72e7);
        EXPECT(gbc.pc(), 0xef38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef36), 0xcb);
        EXPECT(gbc.readMem(0xef37), 0xd2);
        // CB D2 00A3
        gbc.setState(0xd5f3, 0x2685, 0x6e0, 0x7fbc, 0x626a, 0x74f9, 0x0, 0x0);
        gbc.writeMem(0xd5f3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2685);
        EXPECT(gbc.pc(), 0xd5f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f3), 0xcb);
        EXPECT(gbc.readMem(0xd5f4), 0xd2);
        // CB D2 00A4
        gbc.setState(0x128d, 0xb684, 0xb4c0, 0x5604, 0x59f5, 0x5a0, 0x0, 0x1);
        gbc.writeMem(0x128d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb684);
        EXPECT(gbc.pc(), 0x128f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00A6
        gbc.setState(0xe560, 0xacfc, 0x66c0, 0x13de, 0x1114, 0x9605, 0x0, 0x0);
        gbc.writeMem(0xe560, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xacfc);
        EXPECT(gbc.pc(), 0xe562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe560), 0xcb);
        EXPECT(gbc.readMem(0xe561), 0xd2);
        // CB D2 00A7
        gbc.setState(0x7ddf, 0xb9e7, 0xf780, 0x4512, 0x8b82, 0x9225, 0x0, 0x1);
        gbc.writeMem(0x7ddf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb9e7);
        EXPECT(gbc.pc(), 0x7de1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00A8
        gbc.setState(0x8d1b, 0xef90, 0x49f0, 0xc8ea, 0x2121, 0x80f6, 0x1, 0x1);
        gbc.writeMem(0x8d1b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xef90);
        EXPECT(gbc.pc(), 0x8d1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d1b), 0xcb);
        EXPECT(gbc.readMem(0x8d1c), 0xd2);
        // CB D2 00A9
        gbc.setState(0x9ad7, 0xcb70, 0xbde0, 0xce44, 0x586b, 0xa1b8, 0x0, 0x1);
        gbc.writeMem(0x9ad7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xcb70);
        EXPECT(gbc.pc(), 0x9ad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ad7), 0xcb);
        EXPECT(gbc.readMem(0x9ad8), 0xd2);
        // CB D2 00AA
        gbc.setState(0xdb62, 0x77cc, 0xecc0, 0x32c1, 0x425, 0x2797, 0x0, 0x1);
        gbc.writeMem(0xdb62, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x77cc);
        EXPECT(gbc.pc(), 0xdb64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb62), 0xcb);
        EXPECT(gbc.readMem(0xdb63), 0xd2);
        // CB D2 00AB
        gbc.setState(0x4984, 0xd853, 0x2a30, 0x771a, 0x63ff, 0x3b0f, 0x0, 0x1);
        gbc.writeMem(0x4984, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd853);
        EXPECT(gbc.pc(), 0x4986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00AC
        gbc.setState(0xd13a, 0xcac1, 0x47a0, 0xa619, 0xfe42, 0x87f7, 0x0, 0x1);
        gbc.writeMem(0xd13a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xcac1);
        EXPECT(gbc.pc(), 0xd13c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13a), 0xcb);
        EXPECT(gbc.readMem(0xd13b), 0xd2);
        // CB D2 00AD
        gbc.setState(0x61c7, 0xdf03, 0x7070, 0x6641, 0x5c14, 0x3405, 0x1, 0x1);
        gbc.writeMem(0x61c7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdf03);
        EXPECT(gbc.pc(), 0x61c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00AE
        gbc.setState(0xcc30, 0x2996, 0x62a0, 0x1dc3, 0xb620, 0x920b, 0x1, 0x0);
        gbc.writeMem(0xcc30, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2996);
        EXPECT(gbc.pc(), 0xcc32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc30), 0xcb);
        EXPECT(gbc.readMem(0xcc31), 0xd2);
        // CB D2 00AF
        gbc.setState(0x322e, 0xb0f4, 0x3c20, 0x7819, 0x76d7, 0x7e, 0x1, 0x1);
        gbc.writeMem(0x322e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb0f4);
        EXPECT(gbc.pc(), 0x3230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00B0
        gbc.setState(0x4ad4, 0xaaa6, 0x98a0, 0xb366, 0xd3a5, 0x818, 0x0, 0x0);
        gbc.writeMem(0x4ad4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xaaa6);
        EXPECT(gbc.pc(), 0x4ad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00B1
        gbc.setState(0x5efd, 0x7269, 0x3650, 0xb206, 0xc737, 0xab40, 0x0, 0x0);
        gbc.writeMem(0x5efd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7269);
        EXPECT(gbc.pc(), 0x5eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00B2
        gbc.setState(0xcb2, 0x6e2b, 0x8dc0, 0xfc2f, 0xb868, 0x7bfb, 0x0, 0x0);
        gbc.writeMem(0xcb2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6e2b);
        EXPECT(gbc.pc(), 0xcb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00B3
        gbc.setState(0xe66c, 0x372c, 0x280, 0x43da, 0x758, 0x3dd5, 0x1, 0x1);
        gbc.writeMem(0xe66c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x372c);
        EXPECT(gbc.pc(), 0xe66e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe66c), 0xcb);
        EXPECT(gbc.readMem(0xe66d), 0xd2);
        // CB D2 00B4
        gbc.setState(0x5f23, 0xe7e8, 0x3220, 0x3fee, 0xe04b, 0xef94, 0x1, 0x0);
        gbc.writeMem(0x5f23, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe7e8);
        EXPECT(gbc.pc(), 0x5f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00B5
        gbc.setState(0xa63, 0x7d05, 0xac20, 0xc096, 0xc636, 0x5f2d, 0x0, 0x1);
        gbc.writeMem(0xa63, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7d05);
        EXPECT(gbc.pc(), 0xa65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00B6
        gbc.setState(0x4b18, 0xe7ae, 0xe700, 0xcd7c, 0xf824, 0xa65e, 0x1, 0x0);
        gbc.writeMem(0x4b18, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe7ae);
        EXPECT(gbc.pc(), 0x4b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00B7
        gbc.setState(0x11a3, 0xcdfa, 0xa370, 0x54b0, 0x1737, 0x6637, 0x1, 0x0);
        gbc.writeMem(0x11a3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcdfa);
        EXPECT(gbc.pc(), 0x11a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00B8
        gbc.setState(0x6ccc, 0x90c8, 0x8e40, 0x11f6, 0xc4e4, 0x21ca, 0x1, 0x1);
        gbc.writeMem(0x6ccc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x90c8);
        EXPECT(gbc.pc(), 0x6cce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00B9
        gbc.setState(0x48dc, 0x9f75, 0x2950, 0x4770, 0x7ab0, 0x6ffb, 0x0, 0x0);
        gbc.writeMem(0x48dc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9f75);
        EXPECT(gbc.pc(), 0x48de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00BA
        gbc.setState(0xc905, 0x32ad, 0xec80, 0x3de3, 0x4711, 0x7b24, 0x1, 0x1);
        gbc.writeMem(0xc905, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x32ad);
        EXPECT(gbc.pc(), 0xc907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc905), 0xcb);
        EXPECT(gbc.readMem(0xc906), 0xd2);
        // CB D2 00BB
        gbc.setState(0x132b, 0x702c, 0x1670, 0x8c45, 0x7b92, 0x29bd, 0x1, 0x0);
        gbc.writeMem(0x132b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x702c);
        EXPECT(gbc.pc(), 0x132d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00BC
        gbc.setState(0x9766, 0xe084, 0x4940, 0xb5b7, 0x7937, 0x8413, 0x1, 0x1);
        gbc.writeMem(0x9766, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe084);
        EXPECT(gbc.pc(), 0x9768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9766), 0xcb);
        EXPECT(gbc.readMem(0x9767), 0xd2);
        // CB D2 00BD
        gbc.setState(0xb433, 0xd9ef, 0x3f0, 0x1caa, 0x6ba0, 0x57da, 0x1, 0x1);
        gbc.writeMem(0xb433, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd9ef);
        EXPECT(gbc.pc(), 0xb435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb433), 0xcb);
        EXPECT(gbc.readMem(0xb434), 0xd2);
        // CB D2 00BE
        gbc.setState(0x6f07, 0x5be0, 0xa8a0, 0xeb7f, 0xece7, 0x2c23, 0x0, 0x0);
        gbc.writeMem(0x6f07, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5be0);
        EXPECT(gbc.pc(), 0x6f09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00BF
        gbc.setState(0x80fa, 0xd126, 0xd0b0, 0x1843, 0x8d94, 0x920f, 0x0, 0x1);
        gbc.writeMem(0x80fa, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd126);
        EXPECT(gbc.pc(), 0x80fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80fa), 0xcb);
        EXPECT(gbc.readMem(0x80fb), 0xd2);
        // CB D2 00C0
        gbc.setState(0x53a5, 0x1608, 0x6a70, 0xf9ce, 0xdd19, 0x1d6, 0x0, 0x1);
        gbc.writeMem(0x53a5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1608);
        EXPECT(gbc.pc(), 0x53a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00C1
        gbc.setState(0x6342, 0x733d, 0x9760, 0x2196, 0x87d5, 0xffa5, 0x0, 0x1);
        gbc.writeMem(0x6342, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x733d);
        EXPECT(gbc.pc(), 0x6344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00C2
        gbc.setState(0x1170, 0xdbc0, 0x6fb0, 0x9a60, 0xe767, 0x3b15, 0x0, 0x1);
        gbc.writeMem(0x1170, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xdbc0);
        EXPECT(gbc.pc(), 0x1172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00C3
        gbc.setState(0x604f, 0x7df5, 0xe520, 0x106e, 0x98d0, 0xfffa, 0x1, 0x1);
        gbc.writeMem(0x604f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7df5);
        EXPECT(gbc.pc(), 0x6051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00C4
        gbc.setState(0xd60e, 0xd4b5, 0xe5d0, 0x78f5, 0xdfea, 0xdc01, 0x0, 0x0);
        gbc.writeMem(0xd60e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd4b5);
        EXPECT(gbc.pc(), 0xd610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd60e), 0xcb);
        EXPECT(gbc.readMem(0xd60f), 0xd2);
        // CB D2 00C5
        gbc.setState(0xb49e, 0x41b3, 0x8b40, 0x224d, 0x6ec3, 0xf488, 0x0, 0x1);
        gbc.writeMem(0xb49e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x41b3);
        EXPECT(gbc.pc(), 0xb4a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb49e), 0xcb);
        EXPECT(gbc.readMem(0xb49f), 0xd2);
        // CB D2 00C6
        gbc.setState(0x1973, 0x131a, 0x1660, 0x6383, 0x1ae0, 0x284d, 0x1, 0x1);
        gbc.writeMem(0x1973, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x131a);
        EXPECT(gbc.pc(), 0x1975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00C7
        gbc.setState(0x6bad, 0x9cb1, 0xa360, 0x627d, 0x511a, 0x62e9, 0x0, 0x1);
        gbc.writeMem(0x6bad, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9cb1);
        EXPECT(gbc.pc(), 0x6baf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00C8
        gbc.setState(0x2aeb, 0x9430, 0x930, 0x4168, 0x882d, 0x830e, 0x1, 0x1);
        gbc.writeMem(0x2aeb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9430);
        EXPECT(gbc.pc(), 0x2aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00C9
        gbc.setState(0x5559, 0xc31e, 0x5e0, 0xe46a, 0x7bd0, 0xd38d, 0x0, 0x0);
        gbc.writeMem(0x5559, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc31e);
        EXPECT(gbc.pc(), 0x555b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00CA
        gbc.setState(0x8c3e, 0xedf7, 0xed0, 0xe6ae, 0x60ba, 0xf7a8, 0x0, 0x0);
        gbc.writeMem(0x8c3e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xedf7);
        EXPECT(gbc.pc(), 0x8c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3e), 0xcb);
        EXPECT(gbc.readMem(0x8c3f), 0xd2);
        // CB D2 00CB
        gbc.setState(0xee60, 0x297b, 0x33f0, 0x198d, 0xec25, 0x4f94, 0x0, 0x0);
        gbc.writeMem(0xee60, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x297b);
        EXPECT(gbc.pc(), 0xee62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee60), 0xcb);
        EXPECT(gbc.readMem(0xee61), 0xd2);
        // CB D2 00CC
        gbc.setState(0xb20e, 0x3b63, 0x4360, 0x5388, 0xfc69, 0x417, 0x1, 0x1);
        gbc.writeMem(0xb20e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3b63);
        EXPECT(gbc.pc(), 0xb210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20e), 0xcb);
        EXPECT(gbc.readMem(0xb20f), 0xd2);
        // CB D2 00CD
        gbc.setState(0x11c0, 0xfed0, 0x2a0, 0x2066, 0x9f34, 0x5e7c, 0x1, 0x1);
        gbc.writeMem(0x11c0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xfed0);
        EXPECT(gbc.pc(), 0x11c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00CE
        gbc.setState(0x2dbb, 0xcd54, 0x83e0, 0x5f3e, 0x2f2c, 0x6f8c, 0x0, 0x1);
        gbc.writeMem(0x2dbb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcd54);
        EXPECT(gbc.pc(), 0x2dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00CF
        gbc.setState(0xe03, 0xb303, 0x5bb0, 0xed1a, 0x10d6, 0x4b62, 0x1, 0x0);
        gbc.writeMem(0xe03, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb303);
        EXPECT(gbc.pc(), 0xe05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00D0
        gbc.setState(0x3ad7, 0x64db, 0x2f30, 0x7f15, 0x6c87, 0x60b2, 0x0, 0x0);
        gbc.writeMem(0x3ad7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x64db);
        EXPECT(gbc.pc(), 0x3ad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00D1
        gbc.setState(0x2ec, 0x6c89, 0xd790, 0xf86, 0x8b53, 0xc73d, 0x0, 0x0);
        gbc.writeMem(0x2ec, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6c89);
        EXPECT(gbc.pc(), 0x2ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00D2
        gbc.setState(0xc38f, 0x500c, 0x740, 0x5437, 0x8129, 0x3051, 0x0, 0x1);
        gbc.writeMem(0xc38f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x500c);
        EXPECT(gbc.pc(), 0xc391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc38f), 0xcb);
        EXPECT(gbc.readMem(0xc390), 0xd2);
        // CB D2 00D3
        gbc.setState(0xb4df, 0x1acd, 0x6070, 0xe0f6, 0x1e4e, 0xb6d4, 0x0, 0x0);
        gbc.writeMem(0xb4df, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1acd);
        EXPECT(gbc.pc(), 0xb4e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4df), 0xcb);
        EXPECT(gbc.readMem(0xb4e0), 0xd2);
        // CB D2 00D4
        gbc.setState(0xe17c, 0xa437, 0x2660, 0x50c3, 0x7325, 0xd520, 0x1, 0x0);
        gbc.writeMem(0xe17c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa437);
        EXPECT(gbc.pc(), 0xe17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe17c), 0xcb);
        EXPECT(gbc.readMem(0xe17d), 0xd2);
        // CB D2 00D5
        gbc.setState(0xc786, 0xca8e, 0x4660, 0x8405, 0x3653, 0x589, 0x0, 0x0);
        gbc.writeMem(0xc786, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xca8e);
        EXPECT(gbc.pc(), 0xc788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc786), 0xcb);
        EXPECT(gbc.readMem(0xc787), 0xd2);
        // CB D2 00D6
        gbc.setState(0x7310, 0xf209, 0x73e0, 0x295d, 0x6635, 0xcd7f, 0x1, 0x0);
        gbc.writeMem(0x7310, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf209);
        EXPECT(gbc.pc(), 0x7312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00D7
        gbc.setState(0x5906, 0xc7fc, 0x8260, 0xb240, 0x7720, 0xaf24, 0x0, 0x0);
        gbc.writeMem(0x5906, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc7fc);
        EXPECT(gbc.pc(), 0x5908);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00D8
        gbc.setState(0x67c9, 0xd1d6, 0x5310, 0x95a5, 0x8517, 0xbe66, 0x0, 0x1);
        gbc.writeMem(0x67c9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd1d6);
        EXPECT(gbc.pc(), 0x67cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00D9
        gbc.setState(0x30e5, 0xe575, 0xe9d0, 0xf7d2, 0xadb1, 0xc6e, 0x0, 0x1);
        gbc.writeMem(0x30e5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe575);
        EXPECT(gbc.pc(), 0x30e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00DA
        gbc.setState(0x29c3, 0xf42, 0x66b0, 0x91fd, 0x6f96, 0x4e23, 0x0, 0x0);
        gbc.writeMem(0x29c3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf42);
        EXPECT(gbc.pc(), 0x29c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00DB
        gbc.setState(0xb19d, 0xd625, 0xebd0, 0xad2f, 0x2f90, 0x8ea5, 0x0, 0x0);
        gbc.writeMem(0xb19d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd625);
        EXPECT(gbc.pc(), 0xb19f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19d), 0xcb);
        EXPECT(gbc.readMem(0xb19e), 0xd2);
        // CB D2 00DC
        gbc.setState(0x30c3, 0x1c07, 0x590, 0x279d, 0xb3a9, 0x582, 0x0, 0x1);
        gbc.writeMem(0x30c3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1c07);
        EXPECT(gbc.pc(), 0x30c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00DD
        gbc.setState(0x55c1, 0xbf97, 0x6590, 0x7e1b, 0xb626, 0xcebc, 0x0, 0x0);
        gbc.writeMem(0x55c1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xbf97);
        EXPECT(gbc.pc(), 0x55c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00DE
        gbc.setState(0x21a3, 0x926b, 0x52f0, 0xa809, 0x501, 0x3362, 0x0, 0x1);
        gbc.writeMem(0x21a3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x926b);
        EXPECT(gbc.pc(), 0x21a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00DF
        gbc.setState(0x80e9, 0xbaf1, 0xda80, 0xa270, 0x597d, 0x1094, 0x0, 0x0);
        gbc.writeMem(0x80e9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbaf1);
        EXPECT(gbc.pc(), 0x80eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e9), 0xcb);
        EXPECT(gbc.readMem(0x80ea), 0xd2);
        // CB D2 00E0
        gbc.setState(0xc15b, 0x59ca, 0x43a0, 0x2f41, 0xef95, 0x78f4, 0x0, 0x0);
        gbc.writeMem(0xc15b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x59ca);
        EXPECT(gbc.pc(), 0xc15d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc15b), 0xcb);
        EXPECT(gbc.readMem(0xc15c), 0xd2);
        // CB D2 00E1
        gbc.setState(0x8ace, 0xf1ea, 0xee30, 0x2735, 0xce16, 0xd97a, 0x1, 0x0);
        gbc.writeMem(0x8ace, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf1ea);
        EXPECT(gbc.pc(), 0x8ad0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ace), 0xcb);
        EXPECT(gbc.readMem(0x8acf), 0xd2);
        // CB D2 00E2
        gbc.setState(0xccdc, 0x68ca, 0x1300, 0x3844, 0x6d8d, 0x3f18, 0x0, 0x0);
        gbc.writeMem(0xccdc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x68ca);
        EXPECT(gbc.pc(), 0xccde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccdc), 0xcb);
        EXPECT(gbc.readMem(0xccdd), 0xd2);
        // CB D2 00E3
        gbc.setState(0x2550, 0xfcc8, 0xeaa0, 0x32bd, 0xbb56, 0xfb0e, 0x1, 0x1);
        gbc.writeMem(0x2550, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfcc8);
        EXPECT(gbc.pc(), 0x2552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00E4
        gbc.setState(0x56, 0x8f53, 0x7ae0, 0x2db8, 0x893b, 0x9251, 0x1, 0x0);
        gbc.writeMem(0x56, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8f53);
        EXPECT(gbc.pc(), 0x58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00E5
        gbc.setState(0x5163, 0x23e6, 0x8770, 0xfbe6, 0xb20f, 0xebdc, 0x1, 0x1);
        gbc.writeMem(0x5163, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x23e6);
        EXPECT(gbc.pc(), 0x5165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00E6
        gbc.setState(0x7438, 0x2646, 0xee80, 0xb1fd, 0x2df6, 0xfb92, 0x1, 0x0);
        gbc.writeMem(0x7438, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2646);
        EXPECT(gbc.pc(), 0x743a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00E7
        gbc.setState(0x9102, 0xfafb, 0xeac0, 0xd26a, 0x446b, 0xd77, 0x1, 0x0);
        gbc.writeMem(0x9102, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xfafb);
        EXPECT(gbc.pc(), 0x9104);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9102), 0xcb);
        EXPECT(gbc.readMem(0x9103), 0xd2);
        // CB D2 00E8
        gbc.setState(0x8ca7, 0x5dfb, 0x9c40, 0xce0e, 0x1f97, 0x6030, 0x1, 0x0);
        gbc.writeMem(0x8ca7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5dfb);
        EXPECT(gbc.pc(), 0x8ca9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca7), 0xcb);
        EXPECT(gbc.readMem(0x8ca8), 0xd2);
        // CB D2 00E9
        gbc.setState(0x8757, 0xcc3b, 0x82f0, 0x6caa, 0xaa09, 0xe280, 0x1, 0x0);
        gbc.writeMem(0x8757, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xcc3b);
        EXPECT(gbc.pc(), 0x8759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8757), 0xcb);
        EXPECT(gbc.readMem(0x8758), 0xd2);
        // CB D2 00EA
        gbc.setState(0xca35, 0x1f1c, 0xe7e0, 0x6395, 0x21b8, 0x10bf, 0x1, 0x0);
        gbc.writeMem(0xca35, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1f1c);
        EXPECT(gbc.pc(), 0xca37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca35), 0xcb);
        EXPECT(gbc.readMem(0xca36), 0xd2);
        // CB D2 00EB
        gbc.setState(0x533c, 0xabfa, 0x36a0, 0xcdf7, 0x1cec, 0x4382, 0x0, 0x0);
        gbc.writeMem(0x533c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xabfa);
        EXPECT(gbc.pc(), 0x533e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00EC
        gbc.setState(0xe1e3, 0x9888, 0x7590, 0xc066, 0x2ffd, 0x3edf, 0x1, 0x0);
        gbc.writeMem(0xe1e3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9888);
        EXPECT(gbc.pc(), 0xe1e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e3), 0xcb);
        EXPECT(gbc.readMem(0xe1e4), 0xd2);
        // CB D2 00ED
        gbc.setState(0xb054, 0xef81, 0x5c70, 0xe6f4, 0x672, 0xebcf, 0x0, 0x1);
        gbc.writeMem(0xb054, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xef81);
        EXPECT(gbc.pc(), 0xb056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb054), 0xcb);
        EXPECT(gbc.readMem(0xb055), 0xd2);
        // CB D2 00EE
        gbc.setState(0x1370, 0xfc4e, 0x15f0, 0x5c83, 0x90b, 0x1fe4, 0x1, 0x0);
        gbc.writeMem(0x1370, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfc4e);
        EXPECT(gbc.pc(), 0x1372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00F0
        gbc.setState(0xcb87, 0x6bee, 0x51f0, 0x2c68, 0x3e8c, 0x4696, 0x1, 0x1);
        gbc.writeMem(0xcb87, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6bee);
        EXPECT(gbc.pc(), 0xcb89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb87), 0xcb);
        EXPECT(gbc.readMem(0xcb88), 0xd2);
        // CB D2 00F1
        gbc.setState(0x45b1, 0xb5b2, 0xe970, 0x6b80, 0x4a70, 0xe7ea, 0x0, 0x0);
        gbc.writeMem(0x45b1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb5b2);
        EXPECT(gbc.pc(), 0x45b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00F2
        gbc.setState(0xec65, 0x9c13, 0x90d0, 0x31bb, 0x7c57, 0x6b91, 0x0, 0x1);
        gbc.writeMem(0xec65, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9c13);
        EXPECT(gbc.pc(), 0xec67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec65), 0xcb);
        EXPECT(gbc.readMem(0xec66), 0xd2);
        // CB D2 00F3
        gbc.setState(0xc074, 0xa03f, 0xd000, 0xc84e, 0xf905, 0x81bc, 0x0, 0x0);
        gbc.writeMem(0xc074, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa03f);
        EXPECT(gbc.pc(), 0xc076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc074), 0xcb);
        EXPECT(gbc.readMem(0xc075), 0xd2);
        // CB D2 00F4
        gbc.setState(0x79e2, 0xb1b4, 0xd900, 0xa305, 0xc94f, 0x2ce8, 0x1, 0x1);
        gbc.writeMem(0x79e2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb1b4);
        EXPECT(gbc.pc(), 0x79e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00F5
        gbc.setState(0x3f05, 0x4af4, 0x2ad0, 0x4884, 0xe1a8, 0x19c8, 0x1, 0x0);
        gbc.writeMem(0x3f05, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4af4);
        EXPECT(gbc.pc(), 0x3f07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00F6
        gbc.setState(0x659e, 0x4877, 0xa940, 0x4612, 0x522d, 0xa1d8, 0x1, 0x0);
        gbc.writeMem(0x659e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4877);
        EXPECT(gbc.pc(), 0x65a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 00F7
        gbc.setState(0x95a0, 0x6074, 0xb4d0, 0x7bd3, 0xc943, 0x2709, 0x0, 0x1);
        gbc.writeMem(0x95a0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6074);
        EXPECT(gbc.pc(), 0x95a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95a0), 0xcb);
        EXPECT(gbc.readMem(0x95a1), 0xd2);
        // CB D2 00F8
        gbc.setState(0x9f3, 0x1c5d, 0xc30, 0xbe26, 0x796e, 0xd23, 0x1, 0x1);
        gbc.writeMem(0x9f3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1c5d);
        EXPECT(gbc.pc(), 0x9f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00F9
        gbc.setState(0x716f, 0x79b4, 0xf750, 0x1ff9, 0x41f7, 0x2811, 0x0, 0x0);
        gbc.writeMem(0x716f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x79b4);
        EXPECT(gbc.pc(), 0x7171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00FA
        gbc.setState(0xee2b, 0x4a89, 0xd460, 0x1d16, 0x8f63, 0x4462, 0x0, 0x0);
        gbc.writeMem(0xee2b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4a89);
        EXPECT(gbc.pc(), 0xee2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee2b), 0xcb);
        EXPECT(gbc.readMem(0xee2c), 0xd2);
        // CB D2 00FC
        gbc.setState(0x5f21, 0xa7eb, 0xc190, 0xb5ab, 0x4b74, 0xb6cc, 0x1, 0x1);
        gbc.writeMem(0x5f21, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa7eb);
        EXPECT(gbc.pc(), 0x5f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 00FE
        gbc.setState(0xe9ac, 0x6c35, 0x3260, 0x9727, 0xb499, 0xa5f1, 0x1, 0x1);
        gbc.writeMem(0xe9ac, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6c35);
        EXPECT(gbc.pc(), 0xe9ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9ac), 0xcb);
        EXPECT(gbc.readMem(0xe9ad), 0xd2);
        // CB D2 00FF
        gbc.setState(0x62ab, 0x9efe, 0x1e50, 0xaad0, 0xd570, 0xf427, 0x1, 0x1);
        gbc.writeMem(0x62ab, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9efe);
        EXPECT(gbc.pc(), 0x62ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0100
        gbc.setState(0x8a37, 0xe8c1, 0xf280, 0x1009, 0x190b, 0x79fc, 0x1, 0x1);
        gbc.writeMem(0x8a37, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe8c1);
        EXPECT(gbc.pc(), 0x8a39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a37), 0xcb);
        EXPECT(gbc.readMem(0x8a38), 0xd2);
        // CB D2 0101
        gbc.setState(0x9509, 0x74f2, 0x900, 0xfab1, 0xcc98, 0xc641, 0x1, 0x1);
        gbc.writeMem(0x9509, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x74f2);
        EXPECT(gbc.pc(), 0x950b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9509), 0xcb);
        EXPECT(gbc.readMem(0x950a), 0xd2);
        // CB D2 0102
        gbc.setState(0xaa78, 0x21e4, 0x43b0, 0x7603, 0xa686, 0xf0f9, 0x0, 0x1);
        gbc.writeMem(0xaa78, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x21e4);
        EXPECT(gbc.pc(), 0xaa7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa78), 0xcb);
        EXPECT(gbc.readMem(0xaa79), 0xd2);
        // CB D2 0103
        gbc.setState(0x8f4c, 0xb8fe, 0xc500, 0x3505, 0x3bb5, 0xca8d, 0x1, 0x1);
        gbc.writeMem(0x8f4c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb8fe);
        EXPECT(gbc.pc(), 0x8f4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f4c), 0xcb);
        EXPECT(gbc.readMem(0x8f4d), 0xd2);
        // CB D2 0104
        gbc.setState(0x6faa, 0xdf17, 0xb880, 0xe188, 0x9826, 0x60c5, 0x0, 0x1);
        gbc.writeMem(0x6faa, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdf17);
        EXPECT(gbc.pc(), 0x6fac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0105
        gbc.setState(0x4293, 0x6a10, 0x64e0, 0xe768, 0xa582, 0xf3a4, 0x0, 0x1);
        gbc.writeMem(0x4293, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6a10);
        EXPECT(gbc.pc(), 0x4295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0106
        gbc.setState(0x8691, 0xcd9f, 0x4d90, 0x4987, 0xabfc, 0x53a3, 0x1, 0x1);
        gbc.writeMem(0x8691, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcd9f);
        EXPECT(gbc.pc(), 0x8693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8691), 0xcb);
        EXPECT(gbc.readMem(0x8692), 0xd2);
        // CB D2 0107
        gbc.setState(0x8991, 0x542c, 0x8340, 0x59c8, 0x37aa, 0x2b20, 0x1, 0x0);
        gbc.writeMem(0x8991, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x542c);
        EXPECT(gbc.pc(), 0x8993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8991), 0xcb);
        EXPECT(gbc.readMem(0x8992), 0xd2);
        // CB D2 0108
        gbc.setState(0xd673, 0x4ce8, 0xf450, 0xc274, 0x6fe, 0xc363, 0x1, 0x0);
        gbc.writeMem(0xd673, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4ce8);
        EXPECT(gbc.pc(), 0xd675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd673), 0xcb);
        EXPECT(gbc.readMem(0xd674), 0xd2);
        // CB D2 0109
        gbc.setState(0x7a6d, 0xd177, 0x56e0, 0x91db, 0x23ee, 0xd2d8, 0x0, 0x1);
        gbc.writeMem(0x7a6d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd177);
        EXPECT(gbc.pc(), 0x7a6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 010B
        gbc.setState(0xcfa, 0x576e, 0x2a30, 0x3287, 0xeda0, 0x49fe, 0x0, 0x1);
        gbc.writeMem(0xcfa, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x576e);
        EXPECT(gbc.pc(), 0xcfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 010C
        gbc.setState(0x8a97, 0xd94a, 0x66c0, 0x2ba1, 0xad8d, 0x9151, 0x0, 0x0);
        gbc.writeMem(0x8a97, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd94a);
        EXPECT(gbc.pc(), 0x8a99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a97), 0xcb);
        EXPECT(gbc.readMem(0x8a98), 0xd2);
        // CB D2 010D
        gbc.setState(0x8ca2, 0xdad1, 0x1900, 0xb1ae, 0x9985, 0x32be, 0x0, 0x0);
        gbc.writeMem(0x8ca2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xdad1);
        EXPECT(gbc.pc(), 0x8ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca2), 0xcb);
        EXPECT(gbc.readMem(0x8ca3), 0xd2);
        // CB D2 010E
        gbc.setState(0xea3e, 0x9395, 0x2b90, 0x2667, 0x71c2, 0x78e6, 0x0, 0x0);
        gbc.writeMem(0xea3e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9395);
        EXPECT(gbc.pc(), 0xea40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea3e), 0xcb);
        EXPECT(gbc.readMem(0xea3f), 0xd2);
        // CB D2 010F
        gbc.setState(0xcc45, 0xc7fd, 0x9430, 0xe802, 0x10a1, 0xca29, 0x1, 0x1);
        gbc.writeMem(0xcc45, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc7fd);
        EXPECT(gbc.pc(), 0xcc47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc45), 0xcb);
        EXPECT(gbc.readMem(0xcc46), 0xd2);
        // CB D2 0110
        gbc.setState(0x2db, 0xd257, 0xc110, 0xedf7, 0x7819, 0x9b2a, 0x1, 0x0);
        gbc.writeMem(0x2db, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0x2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0111
        gbc.setState(0x42f1, 0x21d8, 0x4e0, 0xe9e3, 0xcdff, 0x5188, 0x0, 0x0);
        gbc.writeMem(0x42f1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x21d8);
        EXPECT(gbc.pc(), 0x42f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0112
        gbc.setState(0x6244, 0xab9f, 0x6610, 0xcdb2, 0x4f6f, 0x7cc2, 0x0, 0x0);
        gbc.writeMem(0x6244, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xab9f);
        EXPECT(gbc.pc(), 0x6246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0113
        gbc.setState(0x307c, 0x149f, 0x8140, 0x681f, 0x3280, 0xb8c7, 0x0, 0x1);
        gbc.writeMem(0x307c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x149f);
        EXPECT(gbc.pc(), 0x307e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0114
        gbc.setState(0xc3ea, 0x4a9f, 0xc750, 0x3252, 0x981d, 0x6e73, 0x1, 0x1);
        gbc.writeMem(0xc3ea, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4a9f);
        EXPECT(gbc.pc(), 0xc3ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3ea), 0xcb);
        EXPECT(gbc.readMem(0xc3eb), 0xd2);
        // CB D2 0115
        gbc.setState(0x8374, 0x9030, 0x1320, 0xe93a, 0x9ce6, 0xc30e, 0x0, 0x0);
        gbc.writeMem(0x8374, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9030);
        EXPECT(gbc.pc(), 0x8376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8374), 0xcb);
        EXPECT(gbc.readMem(0x8375), 0xd2);
        // CB D2 0116
        gbc.setState(0xc20f, 0x46fd, 0x8af0, 0x9def, 0xef3a, 0xc334, 0x1, 0x0);
        gbc.writeMem(0xc20f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x46fd);
        EXPECT(gbc.pc(), 0xc211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc20f), 0xcb);
        EXPECT(gbc.readMem(0xc210), 0xd2);
        // CB D2 0117
        gbc.setState(0xece6, 0xb91d, 0x93f0, 0x156e, 0x3f53, 0xd41e, 0x0, 0x0);
        gbc.writeMem(0xece6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb91d);
        EXPECT(gbc.pc(), 0xece8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xece6), 0xcb);
        EXPECT(gbc.readMem(0xece7), 0xd2);
        // CB D2 0118
        gbc.setState(0xa6df, 0x4a5e, 0xe490, 0x9dda, 0x64d6, 0x4977, 0x0, 0x1);
        gbc.writeMem(0xa6df, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4a5e);
        EXPECT(gbc.pc(), 0xa6e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6df), 0xcb);
        EXPECT(gbc.readMem(0xa6e0), 0xd2);
        // CB D2 011A
        gbc.setState(0x8e09, 0xb1f, 0x960, 0x9fe0, 0xe9f0, 0x671a, 0x1, 0x1);
        gbc.writeMem(0x8e09, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb1f);
        EXPECT(gbc.pc(), 0x8e0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e09), 0xcb);
        EXPECT(gbc.readMem(0x8e0a), 0xd2);
        // CB D2 011B
        gbc.setState(0xd71d, 0x3cc7, 0x9760, 0x2871, 0x2595, 0xa97b, 0x0, 0x0);
        gbc.writeMem(0xd71d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3cc7);
        EXPECT(gbc.pc(), 0xd71f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71d), 0xcb);
        EXPECT(gbc.readMem(0xd71e), 0xd2);
        // CB D2 011C
        gbc.setState(0xc447, 0x4ad7, 0xa050, 0x293a, 0x7ae1, 0xbc38, 0x1, 0x1);
        gbc.writeMem(0xc447, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4ad7);
        EXPECT(gbc.pc(), 0xc449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc447), 0xcb);
        EXPECT(gbc.readMem(0xc448), 0xd2);
        // CB D2 011D
        gbc.setState(0x1f0f, 0x91c6, 0x64b0, 0x10a0, 0x5908, 0xb1e5, 0x0, 0x0);
        gbc.writeMem(0x1f0f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x91c6);
        EXPECT(gbc.pc(), 0x1f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 011F
        gbc.setState(0xd67c, 0x8c8e, 0x8df0, 0x2b96, 0xeae0, 0x8400, 0x0, 0x1);
        gbc.writeMem(0xd67c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8c8e);
        EXPECT(gbc.pc(), 0xd67e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd67c), 0xcb);
        EXPECT(gbc.readMem(0xd67d), 0xd2);
        // CB D2 0121
        gbc.setState(0x5a70, 0xc09b, 0x81d0, 0x5117, 0xf669, 0x196e, 0x1, 0x0);
        gbc.writeMem(0x5a70, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc09b);
        EXPECT(gbc.pc(), 0x5a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0123
        gbc.setState(0x5a73, 0xab15, 0x3200, 0x9596, 0x5d48, 0xc47, 0x0, 0x0);
        gbc.writeMem(0x5a73, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xab15);
        EXPECT(gbc.pc(), 0x5a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0124
        gbc.setState(0x446, 0xae5b, 0x60c0, 0x418d, 0x2850, 0x3fc7, 0x0, 0x0);
        gbc.writeMem(0x446, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xae5b);
        EXPECT(gbc.pc(), 0x448);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0125
        gbc.setState(0xa4cf, 0x6038, 0x3620, 0x71a6, 0x92ab, 0x127e, 0x1, 0x1);
        gbc.writeMem(0xa4cf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6038);
        EXPECT(gbc.pc(), 0xa4d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4cf), 0xcb);
        EXPECT(gbc.readMem(0xa4d0), 0xd2);
        // CB D2 0126
        gbc.setState(0x83b5, 0xfc6f, 0x9bc0, 0x28be, 0xd00f, 0x407d, 0x0, 0x0);
        gbc.writeMem(0x83b5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfc6f);
        EXPECT(gbc.pc(), 0x83b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b5), 0xcb);
        EXPECT(gbc.readMem(0x83b6), 0xd2);
        // CB D2 0127
        gbc.setState(0x47d, 0x2c27, 0xdea0, 0x8e9f, 0x1d29, 0xaf8d, 0x0, 0x0);
        gbc.writeMem(0x47d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2c27);
        EXPECT(gbc.pc(), 0x47f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0128
        gbc.setState(0xcfc9, 0x638c, 0xf9f0, 0x33e, 0x3f29, 0x5067, 0x0, 0x1);
        gbc.writeMem(0xcfc9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x638c);
        EXPECT(gbc.pc(), 0xcfcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc9), 0xcb);
        EXPECT(gbc.readMem(0xcfca), 0xd2);
        // CB D2 0129
        gbc.setState(0x5992, 0xe790, 0xd5e0, 0xbdb0, 0x70d7, 0x6d06, 0x0, 0x1);
        gbc.writeMem(0x5992, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe790);
        EXPECT(gbc.pc(), 0x5994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 012A
        gbc.setState(0x60d0, 0xe413, 0x5710, 0x36a3, 0x627d, 0x487b, 0x1, 0x0);
        gbc.writeMem(0x60d0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe413);
        EXPECT(gbc.pc(), 0x60d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 012B
        gbc.setState(0x2fae, 0xa915, 0x64b0, 0x401a, 0x2da5, 0x6d82, 0x0, 0x1);
        gbc.writeMem(0x2fae, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa915);
        EXPECT(gbc.pc(), 0x2fb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 012C
        gbc.setState(0x5732, 0x5800, 0x2f20, 0xe3fc, 0xbc76, 0x8729, 0x0, 0x0);
        gbc.writeMem(0x5732, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5800);
        EXPECT(gbc.pc(), 0x5734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 012D
        gbc.setState(0x4d9c, 0xb867, 0x7250, 0x3d0a, 0x88a2, 0x2d76, 0x1, 0x1);
        gbc.writeMem(0x4d9c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb867);
        EXPECT(gbc.pc(), 0x4d9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 012E
        gbc.setState(0xb194, 0xe8d5, 0x6a40, 0x2aa3, 0x1541, 0x48b3, 0x1, 0x0);
        gbc.writeMem(0xb194, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe8d5);
        EXPECT(gbc.pc(), 0xb196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb194), 0xcb);
        EXPECT(gbc.readMem(0xb195), 0xd2);
        // CB D2 012F
        gbc.setState(0x91e1, 0x317c, 0x4d20, 0xb249, 0x52cd, 0xaf6c, 0x1, 0x1);
        gbc.writeMem(0x91e1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x317c);
        EXPECT(gbc.pc(), 0x91e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91e1), 0xcb);
        EXPECT(gbc.readMem(0x91e2), 0xd2);
        // CB D2 0130
        gbc.setState(0x4937, 0xd567, 0xd5d0, 0x9a9, 0x5ee9, 0x5483, 0x1, 0x1);
        gbc.writeMem(0x4937, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd567);
        EXPECT(gbc.pc(), 0x4939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0131
        gbc.setState(0x9cb9, 0xb3e4, 0xaef0, 0xf78c, 0xc836, 0xf98d, 0x0, 0x0);
        gbc.writeMem(0x9cb9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb3e4);
        EXPECT(gbc.pc(), 0x9cbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb9), 0xcb);
        EXPECT(gbc.readMem(0x9cba), 0xd2);
        // CB D2 0132
        gbc.setState(0xa8e2, 0x6aac, 0x8390, 0x1eed, 0x3cb4, 0xbf5c, 0x0, 0x1);
        gbc.writeMem(0xa8e2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6aac);
        EXPECT(gbc.pc(), 0xa8e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8e2), 0xcb);
        EXPECT(gbc.readMem(0xa8e3), 0xd2);
        // CB D2 0133
        gbc.setState(0x5230, 0x7781, 0x1440, 0x85d1, 0x4040, 0x8e90, 0x0, 0x0);
        gbc.writeMem(0x5230, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7781);
        EXPECT(gbc.pc(), 0x5232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0134
        gbc.setState(0xef75, 0x9c32, 0x6e30, 0x5a57, 0x99b6, 0xaabb, 0x1, 0x0);
        gbc.writeMem(0xef75, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9c32);
        EXPECT(gbc.pc(), 0xef77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef75), 0xcb);
        EXPECT(gbc.readMem(0xef76), 0xd2);
        // CB D2 0135
        gbc.setState(0x6aa0, 0x6548, 0xacc0, 0x8524, 0x4042, 0xf747, 0x0, 0x0);
        gbc.writeMem(0x6aa0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6548);
        EXPECT(gbc.pc(), 0x6aa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0136
        gbc.setState(0x2d2d, 0x9cb5, 0xb070, 0x3c87, 0xfa66, 0xa0e3, 0x1, 0x0);
        gbc.writeMem(0x2d2d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9cb5);
        EXPECT(gbc.pc(), 0x2d2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0137
        gbc.setState(0xb2b8, 0xd20a, 0x6140, 0x3c00, 0x2d61, 0x943, 0x1, 0x0);
        gbc.writeMem(0xb2b8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd20a);
        EXPECT(gbc.pc(), 0xb2ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b8), 0xcb);
        EXPECT(gbc.readMem(0xb2b9), 0xd2);
        // CB D2 0138
        gbc.setState(0x1ff2, 0x4fd, 0x71e0, 0x1551, 0xb785, 0x20c9, 0x0, 0x0);
        gbc.writeMem(0x1ff2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4fd);
        EXPECT(gbc.pc(), 0x1ff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 013A
        gbc.setState(0x2ff3, 0x61f0, 0x2f90, 0x3b12, 0x89e, 0x2021, 0x1, 0x1);
        gbc.writeMem(0x2ff3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x61f0);
        EXPECT(gbc.pc(), 0x2ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 013B
        gbc.setState(0x8576, 0x28b1, 0x4930, 0xd896, 0x4e90, 0x5bd5, 0x1, 0x0);
        gbc.writeMem(0x8576, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x28b1);
        EXPECT(gbc.pc(), 0x8578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8576), 0xcb);
        EXPECT(gbc.readMem(0x8577), 0xd2);
        // CB D2 013C
        gbc.setState(0x125c, 0x3bbf, 0x7ba0, 0x5cf5, 0x2fc7, 0x2bbd, 0x1, 0x0);
        gbc.writeMem(0x125c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3bbf);
        EXPECT(gbc.pc(), 0x125e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 013D
        gbc.setState(0xd8ce, 0x1aaf, 0x8e10, 0x689f, 0xbc93, 0x6823, 0x1, 0x1);
        gbc.writeMem(0xd8ce, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1aaf);
        EXPECT(gbc.pc(), 0xd8d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ce), 0xcb);
        EXPECT(gbc.readMem(0xd8cf), 0xd2);
        // CB D2 013E
        gbc.setState(0x6543, 0xc0c8, 0x5960, 0x530a, 0x9143, 0xd5fa, 0x0, 0x1);
        gbc.writeMem(0x6543, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc0c8);
        EXPECT(gbc.pc(), 0x6545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 013F
        gbc.setState(0x78d8, 0xe9e6, 0x9d00, 0xe0e, 0x6eec, 0xd639, 0x0, 0x0);
        gbc.writeMem(0x78d8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe9e6);
        EXPECT(gbc.pc(), 0x78da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0140
        gbc.setState(0x37fb, 0x459, 0xd330, 0x601b, 0xae17, 0x91c6, 0x1, 0x0);
        gbc.writeMem(0x37fb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x459);
        EXPECT(gbc.pc(), 0x37fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0141
        gbc.setState(0xbebb, 0xbe01, 0x1860, 0x18c9, 0x21ae, 0xa831, 0x1, 0x1);
        gbc.writeMem(0xbebb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xbe01);
        EXPECT(gbc.pc(), 0xbebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbebb), 0xcb);
        EXPECT(gbc.readMem(0xbebc), 0xd2);
        // CB D2 0142
        gbc.setState(0x464d, 0x8563, 0x5100, 0xcb57, 0x4bb0, 0xfd33, 0x1, 0x0);
        gbc.writeMem(0x464d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8563);
        EXPECT(gbc.pc(), 0x464f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0143
        gbc.setState(0xed55, 0xc832, 0xcd20, 0x4e55, 0x9c47, 0xf076, 0x1, 0x0);
        gbc.writeMem(0xed55, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc832);
        EXPECT(gbc.pc(), 0xed57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed55), 0xcb);
        EXPECT(gbc.readMem(0xed56), 0xd2);
        // CB D2 0144
        gbc.setState(0x187e, 0x3561, 0x6b10, 0x84f6, 0x7259, 0xf857, 0x0, 0x1);
        gbc.writeMem(0x187e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3561);
        EXPECT(gbc.pc(), 0x1880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0145
        gbc.setState(0x171e, 0x829f, 0xd680, 0x8e8a, 0x59d6, 0xd61b, 0x0, 0x1);
        gbc.writeMem(0x171e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x829f);
        EXPECT(gbc.pc(), 0x1720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0146
        gbc.setState(0x97f8, 0xb074, 0x49c0, 0xe24f, 0xf33e, 0xa232, 0x1, 0x1);
        gbc.writeMem(0x97f8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb074);
        EXPECT(gbc.pc(), 0x97fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f8), 0xcb);
        EXPECT(gbc.readMem(0x97f9), 0xd2);
        // CB D2 0147
        gbc.setState(0x7c71, 0xab45, 0xa5c0, 0x857, 0xbdee, 0x9e40, 0x0, 0x1);
        gbc.writeMem(0x7c71, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xab45);
        EXPECT(gbc.pc(), 0x7c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0148
        gbc.setState(0x63d2, 0x506c, 0xf30, 0xf0d, 0x3db, 0x3acb, 0x1, 0x0);
        gbc.writeMem(0x63d2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x506c);
        EXPECT(gbc.pc(), 0x63d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0149
        gbc.setState(0x8b5a, 0x6c47, 0xd150, 0x5307, 0xa2ca, 0x1c37, 0x1, 0x0);
        gbc.writeMem(0x8b5a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6c47);
        EXPECT(gbc.pc(), 0x8b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b5a), 0xcb);
        EXPECT(gbc.readMem(0x8b5b), 0xd2);
        // CB D2 014A
        gbc.setState(0x8027, 0x7008, 0xd420, 0x382e, 0xa521, 0xdc19, 0x1, 0x0);
        gbc.writeMem(0x8027, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7008);
        EXPECT(gbc.pc(), 0x8029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8027), 0xcb);
        EXPECT(gbc.readMem(0x8028), 0xd2);
        // CB D2 014B
        gbc.setState(0x69d, 0x5720, 0x9a70, 0x53c8, 0x183e, 0x1af9, 0x0, 0x1);
        gbc.writeMem(0x69d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5720);
        EXPECT(gbc.pc(), 0x69f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 014C
        gbc.setState(0x4ace, 0x9112, 0xd550, 0xc9e7, 0xfd90, 0x2a48, 0x1, 0x1);
        gbc.writeMem(0x4ace, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9112);
        EXPECT(gbc.pc(), 0x4ad0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 014D
        gbc.setState(0x4f80, 0x6505, 0xcaf0, 0x98d5, 0x6179, 0xf53a, 0x1, 0x0);
        gbc.writeMem(0x4f80, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6505);
        EXPECT(gbc.pc(), 0x4f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 014F
        gbc.setState(0xbf0d, 0x2a3a, 0xf7b0, 0x832f, 0xb7f9, 0x3f01, 0x1, 0x0);
        gbc.writeMem(0xbf0d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2a3a);
        EXPECT(gbc.pc(), 0xbf0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf0d), 0xcb);
        EXPECT(gbc.readMem(0xbf0e), 0xd2);
        // CB D2 0150
        gbc.setState(0x790d, 0xb62d, 0x5ff0, 0x1b03, 0x15e3, 0xb1a6, 0x0, 0x1);
        gbc.writeMem(0x790d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb62d);
        EXPECT(gbc.pc(), 0x790f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0151
        gbc.setState(0x1957, 0xf412, 0x13b0, 0x5403, 0x77f8, 0x5426, 0x1, 0x0);
        gbc.writeMem(0x1957, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf412);
        EXPECT(gbc.pc(), 0x1959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0152
        gbc.setState(0x5d8c, 0xdc8d, 0x6320, 0xb5cf, 0x7ac8, 0xc030, 0x1, 0x1);
        gbc.writeMem(0x5d8c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdc8d);
        EXPECT(gbc.pc(), 0x5d8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0153
        gbc.setState(0xd28c, 0xaf46, 0x4bd0, 0xa38d, 0x193d, 0x9892, 0x1, 0x0);
        gbc.writeMem(0xd28c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xaf46);
        EXPECT(gbc.pc(), 0xd28e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd28c), 0xcb);
        EXPECT(gbc.readMem(0xd28d), 0xd2);
        // CB D2 0154
        gbc.setState(0x4f21, 0xac81, 0x84b0, 0xf984, 0x1a01, 0x893c, 0x0, 0x1);
        gbc.writeMem(0x4f21, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xac81);
        EXPECT(gbc.pc(), 0x4f23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0155
        gbc.setState(0xdcf7, 0x7cec, 0x42a0, 0x58db, 0xdca0, 0xf013, 0x0, 0x0);
        gbc.writeMem(0xdcf7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7cec);
        EXPECT(gbc.pc(), 0xdcf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf7), 0xcb);
        EXPECT(gbc.readMem(0xdcf8), 0xd2);
        // CB D2 0156
        gbc.setState(0xd5a3, 0x4766, 0xea0, 0x1cf6, 0x8fed, 0x3a36, 0x0, 0x0);
        gbc.writeMem(0xd5a3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4766);
        EXPECT(gbc.pc(), 0xd5a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a3), 0xcb);
        EXPECT(gbc.readMem(0xd5a4), 0xd2);
        // CB D2 0157
        gbc.setState(0x4b6b, 0xb23b, 0x5b30, 0xb34, 0x9d5, 0x6b51, 0x0, 0x1);
        gbc.writeMem(0x4b6b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb23b);
        EXPECT(gbc.pc(), 0x4b6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0158
        gbc.setState(0x1f46, 0x2154, 0x2ec0, 0xc0f1, 0xcd6, 0xe8c8, 0x0, 0x0);
        gbc.writeMem(0x1f46, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2154);
        EXPECT(gbc.pc(), 0x1f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0159
        gbc.setState(0xb8e8, 0x69f3, 0x2fc0, 0x28da, 0x679b, 0x3276, 0x1, 0x1);
        gbc.writeMem(0xb8e8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x69f3);
        EXPECT(gbc.pc(), 0xb8ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e8), 0xcb);
        EXPECT(gbc.readMem(0xb8e9), 0xd2);
        // CB D2 015A
        gbc.setState(0x5f7, 0xce5d, 0x1ea0, 0xa232, 0xee2e, 0x31fe, 0x0, 0x0);
        gbc.writeMem(0x5f7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xce5d);
        EXPECT(gbc.pc(), 0x5f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 015B
        gbc.setState(0x4b45, 0xd4f7, 0xd510, 0xf4e2, 0xc164, 0x6406, 0x1, 0x1);
        gbc.writeMem(0x4b45, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd4f7);
        EXPECT(gbc.pc(), 0x4b47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 015C
        gbc.setState(0x7ca, 0x209, 0xcb20, 0xd0f1, 0x8c2e, 0x826a, 0x0, 0x1);
        gbc.writeMem(0x7ca, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x209);
        EXPECT(gbc.pc(), 0x7cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 015D
        gbc.setState(0x92f5, 0xb69f, 0x2180, 0x7dc2, 0xdd74, 0x3c85, 0x1, 0x0);
        gbc.writeMem(0x92f5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb69f);
        EXPECT(gbc.pc(), 0x92f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92f5), 0xcb);
        EXPECT(gbc.readMem(0x92f6), 0xd2);
        // CB D2 015F
        gbc.setState(0xbaa9, 0xc114, 0x8640, 0xa81b, 0x368d, 0xfc1e, 0x0, 0x0);
        gbc.writeMem(0xbaa9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc114);
        EXPECT(gbc.pc(), 0xbaab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa9), 0xcb);
        EXPECT(gbc.readMem(0xbaaa), 0xd2);
        // CB D2 0160
        gbc.setState(0x4f3b, 0x9bda, 0x8e0, 0x47ff, 0x5bf2, 0x8bf5, 0x0, 0x1);
        gbc.writeMem(0x4f3b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9bda);
        EXPECT(gbc.pc(), 0x4f3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0162
        gbc.setState(0x8381, 0xb6e8, 0x6060, 0x77e5, 0x926c, 0x9691, 0x1, 0x0);
        gbc.writeMem(0x8381, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb6e8);
        EXPECT(gbc.pc(), 0x8383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8381), 0xcb);
        EXPECT(gbc.readMem(0x8382), 0xd2);
        // CB D2 0163
        gbc.setState(0x128f, 0x8fd8, 0x9760, 0xd9e1, 0xeda9, 0xd38c, 0x0, 0x1);
        gbc.writeMem(0x128f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8fd8);
        EXPECT(gbc.pc(), 0x1291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0164
        gbc.setState(0xc032, 0xae8b, 0x31f0, 0xc28d, 0xc481, 0xc801, 0x1, 0x0);
        gbc.writeMem(0xc032, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xae8b);
        EXPECT(gbc.pc(), 0xc034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc032), 0xcb);
        EXPECT(gbc.readMem(0xc033), 0xd2);
        // CB D2 0166
        gbc.setState(0x8c74, 0xe2b3, 0xf640, 0xc1e9, 0xc7f3, 0xeb98, 0x1, 0x1);
        gbc.writeMem(0x8c74, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe2b3);
        EXPECT(gbc.pc(), 0x8c76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c74), 0xcb);
        EXPECT(gbc.readMem(0x8c75), 0xd2);
        // CB D2 0167
        gbc.setState(0xde56, 0x82e5, 0x66c0, 0x9b07, 0x56ca, 0xa4ad, 0x0, 0x1);
        gbc.writeMem(0xde56, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x82e5);
        EXPECT(gbc.pc(), 0xde58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde56), 0xcb);
        EXPECT(gbc.readMem(0xde57), 0xd2);
        // CB D2 0168
        gbc.setState(0xa8f4, 0xacfe, 0x53b0, 0x588c, 0xb73e, 0xde5c, 0x1, 0x1);
        gbc.writeMem(0xa8f4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xacfe);
        EXPECT(gbc.pc(), 0xa8f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8f4), 0xcb);
        EXPECT(gbc.readMem(0xa8f5), 0xd2);
        // CB D2 0169
        gbc.setState(0x450c, 0x8e5, 0x4500, 0x2672, 0x2ccc, 0x6deb, 0x1, 0x1);
        gbc.writeMem(0x450c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8e5);
        EXPECT(gbc.pc(), 0x450e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 016A
        gbc.setState(0xa78, 0xe7b, 0x1ab0, 0x9b15, 0xd61a, 0x18ea, 0x1, 0x1);
        gbc.writeMem(0xa78, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe7b);
        EXPECT(gbc.pc(), 0xa7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 016B
        gbc.setState(0x97f0, 0xd97e, 0x53d0, 0xfafb, 0x44b6, 0xe65d, 0x0, 0x1);
        gbc.writeMem(0x97f0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd97e);
        EXPECT(gbc.pc(), 0x97f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f0), 0xcb);
        EXPECT(gbc.readMem(0x97f1), 0xd2);
        // CB D2 016C
        gbc.setState(0x2e01, 0x4698, 0x8900, 0xdc5a, 0x7366, 0x56c2, 0x1, 0x0);
        gbc.writeMem(0x2e01, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4698);
        EXPECT(gbc.pc(), 0x2e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 016D
        gbc.setState(0xdeea, 0x819c, 0xe9b0, 0x6b6c, 0x92de, 0x3fa8, 0x0, 0x0);
        gbc.writeMem(0xdeea, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x819c);
        EXPECT(gbc.pc(), 0xdeec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeea), 0xcb);
        EXPECT(gbc.readMem(0xdeeb), 0xd2);
        // CB D2 016E
        gbc.setState(0x5583, 0x8493, 0xf390, 0x56e2, 0xd217, 0xbc3a, 0x0, 0x0);
        gbc.writeMem(0x5583, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8493);
        EXPECT(gbc.pc(), 0x5585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0170
        gbc.setState(0xc43c, 0xd9d5, 0xb8e0, 0x560, 0x97a6, 0xa205, 0x0, 0x0);
        gbc.writeMem(0xc43c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd9d5);
        EXPECT(gbc.pc(), 0xc43e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc43c), 0xcb);
        EXPECT(gbc.readMem(0xc43d), 0xd2);
        // CB D2 0171
        gbc.setState(0xd66f, 0x1347, 0x1670, 0x67ea, 0x8265, 0x6fb6, 0x0, 0x0);
        gbc.writeMem(0xd66f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1347);
        EXPECT(gbc.pc(), 0xd671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd66f), 0xcb);
        EXPECT(gbc.readMem(0xd670), 0xd2);
        // CB D2 0172
        gbc.setState(0x9606, 0x110e, 0x98a0, 0xb739, 0xc0b5, 0x59c7, 0x0, 0x0);
        gbc.writeMem(0x9606, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x110e);
        EXPECT(gbc.pc(), 0x9608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9606), 0xcb);
        EXPECT(gbc.readMem(0x9607), 0xd2);
        // CB D2 0173
        gbc.setState(0x651b, 0x5c85, 0x250, 0xaa, 0x3ed1, 0x90c4, 0x0, 0x0);
        gbc.writeMem(0x651b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5c85);
        EXPECT(gbc.pc(), 0x651d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0174
        gbc.setState(0xd1a3, 0x58c2, 0x25c0, 0x5c00, 0x159c, 0x5a19, 0x1, 0x0);
        gbc.writeMem(0xd1a3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x58c2);
        EXPECT(gbc.pc(), 0xd1a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a3), 0xcb);
        EXPECT(gbc.readMem(0xd1a4), 0xd2);
        // CB D2 0175
        gbc.setState(0xe3a0, 0xb5f8, 0xc890, 0x7ba6, 0x6234, 0x27f4, 0x1, 0x0);
        gbc.writeMem(0xe3a0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb5f8);
        EXPECT(gbc.pc(), 0xe3a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3a0), 0xcb);
        EXPECT(gbc.readMem(0xe3a1), 0xd2);
        // CB D2 0176
        gbc.setState(0x4a26, 0x64bd, 0x9110, 0x3cc3, 0xb9c4, 0x7a8, 0x0, 0x0);
        gbc.writeMem(0x4a26, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x64bd);
        EXPECT(gbc.pc(), 0x4a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0177
        gbc.setState(0x8aca, 0x2d7f, 0x9820, 0x3431, 0x53bc, 0x8900, 0x1, 0x1);
        gbc.writeMem(0x8aca, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2d7f);
        EXPECT(gbc.pc(), 0x8acc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aca), 0xcb);
        EXPECT(gbc.readMem(0x8acb), 0xd2);
        // CB D2 0178
        gbc.setState(0xa84d, 0xda58, 0x4160, 0xd320, 0x8e88, 0xb129, 0x0, 0x1);
        gbc.writeMem(0xa84d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xda58);
        EXPECT(gbc.pc(), 0xa84f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84d), 0xcb);
        EXPECT(gbc.readMem(0xa84e), 0xd2);
        // CB D2 0179
        gbc.setState(0xb3d6, 0xd145, 0x6120, 0xac3e, 0xf8aa, 0x802c, 0x1, 0x0);
        gbc.writeMem(0xb3d6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd145);
        EXPECT(gbc.pc(), 0xb3d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d6), 0xcb);
        EXPECT(gbc.readMem(0xb3d7), 0xd2);
        // CB D2 017A
        gbc.setState(0xed80, 0x99a8, 0x3b20, 0x81d1, 0xc1, 0x84ed, 0x0, 0x0);
        gbc.writeMem(0xed80, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x99a8);
        EXPECT(gbc.pc(), 0xed82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed80), 0xcb);
        EXPECT(gbc.readMem(0xed81), 0xd2);
        // CB D2 017B
        gbc.setState(0xc187, 0xb2fb, 0xf930, 0x5510, 0xeab2, 0xaaca, 0x1, 0x0);
        gbc.writeMem(0xc187, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb2fb);
        EXPECT(gbc.pc(), 0xc189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc187), 0xcb);
        EXPECT(gbc.readMem(0xc188), 0xd2);
        // CB D2 017C
        gbc.setState(0x5e3c, 0x5042, 0x2000, 0x304d, 0xedd5, 0x79e3, 0x0, 0x1);
        gbc.writeMem(0x5e3c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5042);
        EXPECT(gbc.pc(), 0x5e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 017D
        gbc.setState(0x7860, 0x324d, 0x7440, 0x5a9a, 0xad4f, 0xe1ea, 0x0, 0x0);
        gbc.writeMem(0x7860, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x324d);
        EXPECT(gbc.pc(), 0x7862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 017E
        gbc.setState(0x8417, 0x4497, 0x49e0, 0xc90b, 0x132a, 0x681a, 0x1, 0x1);
        gbc.writeMem(0x8417, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4497);
        EXPECT(gbc.pc(), 0x8419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8417), 0xcb);
        EXPECT(gbc.readMem(0x8418), 0xd2);
        // CB D2 017F
        gbc.setState(0x6cb4, 0xe7d2, 0x8ee0, 0x1688, 0x41cd, 0xeac5, 0x1, 0x0);
        gbc.writeMem(0x6cb4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe7d2);
        EXPECT(gbc.pc(), 0x6cb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0180
        gbc.setState(0x8144, 0xf4c8, 0xc970, 0xf1c8, 0xa77f, 0x42db, 0x1, 0x1);
        gbc.writeMem(0x8144, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf4c8);
        EXPECT(gbc.pc(), 0x8146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8144), 0xcb);
        EXPECT(gbc.readMem(0x8145), 0xd2);
        // CB D2 0181
        gbc.setState(0xcd5d, 0xc1f, 0x4a70, 0x1f6c, 0xcf97, 0xb075, 0x0, 0x0);
        gbc.writeMem(0xcd5d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc1f);
        EXPECT(gbc.pc(), 0xcd5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd5d), 0xcb);
        EXPECT(gbc.readMem(0xcd5e), 0xd2);
        // CB D2 0182
        gbc.setState(0xcba0, 0x7dc4, 0xea50, 0x2dcc, 0x595a, 0xa8ee, 0x1, 0x1);
        gbc.writeMem(0xcba0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7dc4);
        EXPECT(gbc.pc(), 0xcba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba0), 0xcb);
        EXPECT(gbc.readMem(0xcba1), 0xd2);
        // CB D2 0183
        gbc.setState(0xb19c, 0x9e37, 0x80a0, 0xd9b5, 0x9df0, 0x2334, 0x1, 0x0);
        gbc.writeMem(0xb19c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9e37);
        EXPECT(gbc.pc(), 0xb19e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19c), 0xcb);
        EXPECT(gbc.readMem(0xb19d), 0xd2);
        // CB D2 0184
        gbc.setState(0x8237, 0xf858, 0x6dc0, 0xf468, 0x8134, 0xb8fc, 0x0, 0x1);
        gbc.writeMem(0x8237, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf858);
        EXPECT(gbc.pc(), 0x8239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8237), 0xcb);
        EXPECT(gbc.readMem(0x8238), 0xd2);
        // CB D2 0185
        gbc.setState(0xc30a, 0x5a5e, 0xaa0, 0xbdd, 0x1cf4, 0xea75, 0x1, 0x1);
        gbc.writeMem(0xc30a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5a5e);
        EXPECT(gbc.pc(), 0xc30c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc30a), 0xcb);
        EXPECT(gbc.readMem(0xc30b), 0xd2);
        // CB D2 0186
        gbc.setState(0x30d0, 0xc104, 0x8c00, 0xbada, 0x9bb0, 0x63b1, 0x0, 0x0);
        gbc.writeMem(0x30d0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc104);
        EXPECT(gbc.pc(), 0x30d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0187
        gbc.setState(0x5f30, 0xafb2, 0x7830, 0x68fc, 0x189a, 0x770b, 0x0, 0x1);
        gbc.writeMem(0x5f30, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xafb2);
        EXPECT(gbc.pc(), 0x5f32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0188
        gbc.setState(0xee34, 0xb03d, 0xc5a0, 0x1977, 0x679d, 0x4488, 0x0, 0x1);
        gbc.writeMem(0xee34, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb03d);
        EXPECT(gbc.pc(), 0xee36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee34), 0xcb);
        EXPECT(gbc.readMem(0xee35), 0xd2);
        // CB D2 0189
        gbc.setState(0x46e9, 0xc902, 0xe4e0, 0xb93d, 0x898e, 0x6c1e, 0x0, 0x1);
        gbc.writeMem(0x46e9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc902);
        EXPECT(gbc.pc(), 0x46eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 018A
        gbc.setState(0x15a, 0xd195, 0x98c0, 0xac6e, 0x96c8, 0x6128, 0x0, 0x0);
        gbc.writeMem(0x15a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd195);
        EXPECT(gbc.pc(), 0x15c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 018B
        gbc.setState(0x2205, 0x587c, 0x5b70, 0x489f, 0x299, 0x2ce4, 0x1, 0x1);
        gbc.writeMem(0x2205, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x587c);
        EXPECT(gbc.pc(), 0x2207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 018C
        gbc.setState(0x3f02, 0x960c, 0x6c90, 0x2415, 0xeabb, 0x6dc8, 0x1, 0x0);
        gbc.writeMem(0x3f02, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x960c);
        EXPECT(gbc.pc(), 0x3f04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 018D
        gbc.setState(0x9bea, 0x62ab, 0xbb00, 0x71ef, 0x4d0f, 0x2f14, 0x0, 0x0);
        gbc.writeMem(0x9bea, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x62ab);
        EXPECT(gbc.pc(), 0x9bec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bea), 0xcb);
        EXPECT(gbc.readMem(0x9beb), 0xd2);
        // CB D2 018E
        gbc.setState(0x5a29, 0xdc9a, 0x24f0, 0xaa0b, 0x7cfe, 0xadc3, 0x0, 0x1);
        gbc.writeMem(0x5a29, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdc9a);
        EXPECT(gbc.pc(), 0x5a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 018F
        gbc.setState(0xdfed, 0x76d4, 0x79b0, 0xbfbe, 0x1f74, 0x6c41, 0x1, 0x1);
        gbc.writeMem(0xdfed, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x76d4);
        EXPECT(gbc.pc(), 0xdfef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfed), 0xcb);
        EXPECT(gbc.readMem(0xdfee), 0xd2);
        // CB D2 0190
        gbc.setState(0xb9c2, 0xeab5, 0xaec0, 0xbbc3, 0xeb88, 0xd55c, 0x1, 0x0);
        gbc.writeMem(0xb9c2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xeab5);
        EXPECT(gbc.pc(), 0xb9c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c2), 0xcb);
        EXPECT(gbc.readMem(0xb9c3), 0xd2);
        // CB D2 0191
        gbc.setState(0x364, 0x760d, 0x8250, 0xbe3c, 0xb121, 0x9b37, 0x0, 0x1);
        gbc.writeMem(0x364, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x760d);
        EXPECT(gbc.pc(), 0x366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0192
        gbc.setState(0x8084, 0xd86, 0x26c0, 0xbd89, 0x30a1, 0x896a, 0x1, 0x1);
        gbc.writeMem(0x8084, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd86);
        EXPECT(gbc.pc(), 0x8086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8084), 0xcb);
        EXPECT(gbc.readMem(0x8085), 0xd2);
        // CB D2 0193
        gbc.setState(0x1bd0, 0x62b1, 0x3080, 0xe3c5, 0x320, 0xde3d, 0x0, 0x0);
        gbc.writeMem(0x1bd0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x62b1);
        EXPECT(gbc.pc(), 0x1bd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0194
        gbc.setState(0x67d8, 0x6d98, 0xb9c0, 0x364d, 0xfd7, 0x7eea, 0x1, 0x0);
        gbc.writeMem(0x67d8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6d98);
        EXPECT(gbc.pc(), 0x67da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0195
        gbc.setState(0x95eb, 0xf077, 0x3720, 0xcaf1, 0xc8ad, 0xcac3, 0x0, 0x1);
        gbc.writeMem(0x95eb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf077);
        EXPECT(gbc.pc(), 0x95ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95eb), 0xcb);
        EXPECT(gbc.readMem(0x95ec), 0xd2);
        // CB D2 0196
        gbc.setState(0xdecd, 0x8418, 0xd8e0, 0x8d8e, 0xbf9e, 0xaa6a, 0x1, 0x0);
        gbc.writeMem(0xdecd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8418);
        EXPECT(gbc.pc(), 0xdecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdecd), 0xcb);
        EXPECT(gbc.readMem(0xdece), 0xd2);
        // CB D2 0197
        gbc.setState(0xb17b, 0x79e, 0x17e0, 0x1e5f, 0x1f2f, 0xe81a, 0x0, 0x0);
        gbc.writeMem(0xb17b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x79e);
        EXPECT(gbc.pc(), 0xb17d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb17b), 0xcb);
        EXPECT(gbc.readMem(0xb17c), 0xd2);
        // CB D2 0198
        gbc.setState(0x5219, 0x982e, 0xd7a0, 0x601b, 0xfbd7, 0xc049, 0x0, 0x0);
        gbc.writeMem(0x5219, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x982e);
        EXPECT(gbc.pc(), 0x521b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0199
        gbc.setState(0xc277, 0xf0, 0xf300, 0x250d, 0xf424, 0x21e9, 0x1, 0x0);
        gbc.writeMem(0xc277, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf0);
        EXPECT(gbc.pc(), 0xc279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc277), 0xcb);
        EXPECT(gbc.readMem(0xc278), 0xd2);
        // CB D2 019A
        gbc.setState(0x785, 0x2ed3, 0x8540, 0x293b, 0x7c36, 0x900c, 0x0, 0x0);
        gbc.writeMem(0x785, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2ed3);
        EXPECT(gbc.pc(), 0x787);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 019B
        gbc.setState(0x12eb, 0x6be8, 0xc920, 0xcaa5, 0x16af, 0x7866, 0x1, 0x1);
        gbc.writeMem(0x12eb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6be8);
        EXPECT(gbc.pc(), 0x12ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 019C
        gbc.setState(0xc59f, 0x7df5, 0xf080, 0xe82a, 0x117a, 0x240a, 0x0, 0x1);
        gbc.writeMem(0xc59f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7df5);
        EXPECT(gbc.pc(), 0xc5a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59f), 0xcb);
        EXPECT(gbc.readMem(0xc5a0), 0xd2);
        // CB D2 019D
        gbc.setState(0x741f, 0x9fb1, 0xa7a0, 0x772f, 0xe63c, 0xc171, 0x0, 0x0);
        gbc.writeMem(0x741f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9fb1);
        EXPECT(gbc.pc(), 0x7421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 019E
        gbc.setState(0xeef9, 0x9992, 0x3860, 0x7ab1, 0xe6e9, 0x269c, 0x0, 0x0);
        gbc.writeMem(0xeef9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9992);
        EXPECT(gbc.pc(), 0xeefb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef9), 0xcb);
        EXPECT(gbc.readMem(0xeefa), 0xd2);
        // CB D2 019F
        gbc.setState(0x4c25, 0x7232, 0x1d50, 0x1e8d, 0x5636, 0x2211, 0x1, 0x1);
        gbc.writeMem(0x4c25, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7232);
        EXPECT(gbc.pc(), 0x4c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01A0
        gbc.setState(0x9b0, 0x3515, 0xdac0, 0x485a, 0x57ad, 0xf72b, 0x1, 0x1);
        gbc.writeMem(0x9b0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3515);
        EXPECT(gbc.pc(), 0x9b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01A1
        gbc.setState(0xf02, 0xb562, 0xbb60, 0x56d3, 0x1ede, 0xce3c, 0x1, 0x1);
        gbc.writeMem(0xf02, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb562);
        EXPECT(gbc.pc(), 0xf04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01A2
        gbc.setState(0xec90, 0x557d, 0xea60, 0x9138, 0x567f, 0x6f88, 0x1, 0x0);
        gbc.writeMem(0xec90, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x557d);
        EXPECT(gbc.pc(), 0xec92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec90), 0xcb);
        EXPECT(gbc.readMem(0xec91), 0xd2);
        // CB D2 01A3
        gbc.setState(0xa996, 0x5129, 0x4eb0, 0x8f, 0xd33f, 0x6f76, 0x0, 0x0);
        gbc.writeMem(0xa996, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5129);
        EXPECT(gbc.pc(), 0xa998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa996), 0xcb);
        EXPECT(gbc.readMem(0xa997), 0xd2);
        // CB D2 01A4
        gbc.setState(0xc6e, 0x1aa8, 0x97e0, 0xcb02, 0x2649, 0x465b, 0x0, 0x1);
        gbc.writeMem(0xc6e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1aa8);
        EXPECT(gbc.pc(), 0xc70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01A5
        gbc.setState(0xbd78, 0x6a0e, 0x85c0, 0xa42c, 0x8a73, 0x89d0, 0x1, 0x1);
        gbc.writeMem(0xbd78, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6a0e);
        EXPECT(gbc.pc(), 0xbd7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd78), 0xcb);
        EXPECT(gbc.readMem(0xbd79), 0xd2);
        // CB D2 01A6
        gbc.setState(0x9c6d, 0xa5d, 0x6a70, 0x8fc3, 0x2ce9, 0x2526, 0x0, 0x0);
        gbc.writeMem(0x9c6d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa5d);
        EXPECT(gbc.pc(), 0x9c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c6d), 0xcb);
        EXPECT(gbc.readMem(0x9c6e), 0xd2);
        // CB D2 01A7
        gbc.setState(0x7507, 0x2684, 0xc10, 0xacd6, 0x8d45, 0x93, 0x0, 0x0);
        gbc.writeMem(0x7507, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2684);
        EXPECT(gbc.pc(), 0x7509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01A8
        gbc.setState(0x9ef, 0x282b, 0x8fe0, 0x9dcc, 0x1ba9, 0xc5ef, 0x1, 0x0);
        gbc.writeMem(0x9ef, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x282b);
        EXPECT(gbc.pc(), 0x9f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01A9
        gbc.setState(0xab21, 0x989c, 0x6cc0, 0xd6ed, 0xb15b, 0x8726, 0x0, 0x0);
        gbc.writeMem(0xab21, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x989c);
        EXPECT(gbc.pc(), 0xab23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab21), 0xcb);
        EXPECT(gbc.readMem(0xab22), 0xd2);
        // CB D2 01AA
        gbc.setState(0xdbe1, 0x9820, 0x95a0, 0xea61, 0x67d9, 0x2759, 0x0, 0x1);
        gbc.writeMem(0xdbe1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9820);
        EXPECT(gbc.pc(), 0xdbe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe1), 0xcb);
        EXPECT(gbc.readMem(0xdbe2), 0xd2);
        // CB D2 01AB
        gbc.setState(0x528d, 0x2542, 0xe9b0, 0x9bc8, 0xa407, 0x15f3, 0x1, 0x0);
        gbc.writeMem(0x528d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2542);
        EXPECT(gbc.pc(), 0x528f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01AC
        gbc.setState(0x7802, 0xb9d0, 0x77f0, 0x9fcf, 0xb67a, 0x84c7, 0x0, 0x1);
        gbc.writeMem(0x7802, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb9d0);
        EXPECT(gbc.pc(), 0x7804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01AD
        gbc.setState(0xc2b4, 0x633a, 0x4990, 0xcb3d, 0x7400, 0x34be, 0x1, 0x1);
        gbc.writeMem(0xc2b4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x633a);
        EXPECT(gbc.pc(), 0xc2b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2b4), 0xcb);
        EXPECT(gbc.readMem(0xc2b5), 0xd2);
        // CB D2 01AE
        gbc.setState(0x9813, 0x33f2, 0x4cf0, 0x27f5, 0x8363, 0x145a, 0x1, 0x0);
        gbc.writeMem(0x9813, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x33f2);
        EXPECT(gbc.pc(), 0x9815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9813), 0xcb);
        EXPECT(gbc.readMem(0x9814), 0xd2);
        // CB D2 01AF
        gbc.setState(0x73e5, 0x14ae, 0x5010, 0x3f44, 0xc621, 0x48d1, 0x0, 0x1);
        gbc.writeMem(0x73e5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x14ae);
        EXPECT(gbc.pc(), 0x73e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01B0
        gbc.setState(0x53ec, 0x2cc1, 0x1530, 0x99d8, 0x9dac, 0xbb23, 0x0, 0x0);
        gbc.writeMem(0x53ec, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2cc1);
        EXPECT(gbc.pc(), 0x53ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01B1
        gbc.setState(0xb856, 0xf1ca, 0x4ca0, 0xf9ca, 0x5ca8, 0x3106, 0x1, 0x1);
        gbc.writeMem(0xb856, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf1ca);
        EXPECT(gbc.pc(), 0xb858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb856), 0xcb);
        EXPECT(gbc.readMem(0xb857), 0xd2);
        // CB D2 01B2
        gbc.setState(0xb46d, 0xb579, 0xf690, 0xfea2, 0x8565, 0xf67b, 0x0, 0x1);
        gbc.writeMem(0xb46d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb579);
        EXPECT(gbc.pc(), 0xb46f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb46d), 0xcb);
        EXPECT(gbc.readMem(0xb46e), 0xd2);
        // CB D2 01B3
        gbc.setState(0x3581, 0x96fa, 0xd8b0, 0x679c, 0x41ca, 0x4674, 0x1, 0x1);
        gbc.writeMem(0x3581, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x96fa);
        EXPECT(gbc.pc(), 0x3583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01B4
        gbc.setState(0x8682, 0x6360, 0xd240, 0x6dd7, 0x58ba, 0x3878, 0x1, 0x0);
        gbc.writeMem(0x8682, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6360);
        EXPECT(gbc.pc(), 0x8684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8682), 0xcb);
        EXPECT(gbc.readMem(0x8683), 0xd2);
        // CB D2 01B5
        gbc.setState(0x9cd6, 0xd0b4, 0x5140, 0x3c8, 0x5432, 0xfa36, 0x1, 0x0);
        gbc.writeMem(0x9cd6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd0b4);
        EXPECT(gbc.pc(), 0x9cd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd6), 0xcb);
        EXPECT(gbc.readMem(0x9cd7), 0xd2);
        // CB D2 01B6
        gbc.setState(0xb608, 0x93b2, 0x7050, 0x77b8, 0xff0e, 0xa51a, 0x0, 0x0);
        gbc.writeMem(0xb608, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x93b2);
        EXPECT(gbc.pc(), 0xb60a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb608), 0xcb);
        EXPECT(gbc.readMem(0xb609), 0xd2);
        // CB D2 01B7
        gbc.setState(0x5373, 0x2aea, 0xf730, 0x95be, 0x1dd0, 0x64f0, 0x0, 0x0);
        gbc.writeMem(0x5373, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2aea);
        EXPECT(gbc.pc(), 0x5375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01B8
        gbc.setState(0xe069, 0xf8dd, 0xe9e0, 0x6a6e, 0xe7a, 0xe23, 0x0, 0x1);
        gbc.writeMem(0xe069, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf8dd);
        EXPECT(gbc.pc(), 0xe06b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe069), 0xcb);
        EXPECT(gbc.readMem(0xe06a), 0xd2);
        // CB D2 01B9
        gbc.setState(0x434a, 0x9c2d, 0xb010, 0x77e5, 0x847f, 0x7049, 0x0, 0x1);
        gbc.writeMem(0x434a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9c2d);
        EXPECT(gbc.pc(), 0x434c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01BA
        gbc.setState(0x999f, 0x6b63, 0xa200, 0xa008, 0xa1dc, 0x630, 0x0, 0x1);
        gbc.writeMem(0x999f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6b63);
        EXPECT(gbc.pc(), 0x99a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999f), 0xcb);
        EXPECT(gbc.readMem(0x99a0), 0xd2);
        // CB D2 01BB
        gbc.setState(0x80c7, 0xbabd, 0xb9a0, 0x845e, 0x1788, 0xed46, 0x1, 0x1);
        gbc.writeMem(0x80c7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbabd);
        EXPECT(gbc.pc(), 0x80c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c7), 0xcb);
        EXPECT(gbc.readMem(0x80c8), 0xd2);
        // CB D2 01BC
        gbc.setState(0x6a, 0xe9d7, 0xe990, 0xf7be, 0xb3e5, 0x9705, 0x1, 0x1);
        gbc.writeMem(0x6a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe9d7);
        EXPECT(gbc.pc(), 0x6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01BD
        gbc.setState(0xe75, 0xb3a3, 0x7bd0, 0xcea5, 0x80e0, 0x3522, 0x0, 0x0);
        gbc.writeMem(0xe75, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb3a3);
        EXPECT(gbc.pc(), 0xe77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01BE
        gbc.setState(0xdf53, 0xc311, 0x6150, 0x2a67, 0xd728, 0x6872, 0x0, 0x1);
        gbc.writeMem(0xdf53, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc311);
        EXPECT(gbc.pc(), 0xdf55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf53), 0xcb);
        EXPECT(gbc.readMem(0xdf54), 0xd2);
        // CB D2 01BF
        gbc.setState(0xd0d6, 0xe58, 0xb8f0, 0x4d0c, 0x2a29, 0x1ef2, 0x1, 0x0);
        gbc.writeMem(0xd0d6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe58);
        EXPECT(gbc.pc(), 0xd0d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0d6), 0xcb);
        EXPECT(gbc.readMem(0xd0d7), 0xd2);
        // CB D2 01C0
        gbc.setState(0x37e3, 0xeb6a, 0x9a30, 0xd6b3, 0x119b, 0x8301, 0x0, 0x0);
        gbc.writeMem(0x37e3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xeb6a);
        EXPECT(gbc.pc(), 0x37e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01C1
        gbc.setState(0x62fc, 0x8087, 0x95e0, 0xab36, 0xc436, 0x1bdd, 0x1, 0x0);
        gbc.writeMem(0x62fc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8087);
        EXPECT(gbc.pc(), 0x62fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01C2
        gbc.setState(0x4e00, 0x32d5, 0x6de0, 0xa8d7, 0xd01, 0x3c61, 0x1, 0x1);
        gbc.writeMem(0x4e00, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x32d5);
        EXPECT(gbc.pc(), 0x4e02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01C3
        gbc.setState(0x7c25, 0x9def, 0x59e0, 0xa45d, 0x23f8, 0x29e9, 0x1, 0x0);
        gbc.writeMem(0x7c25, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9def);
        EXPECT(gbc.pc(), 0x7c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01C4
        gbc.setState(0x201c, 0x26f0, 0xa360, 0x80f6, 0x1f8d, 0x9c04, 0x1, 0x0);
        gbc.writeMem(0x201c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x26f0);
        EXPECT(gbc.pc(), 0x201e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01C5
        gbc.setState(0xa1d, 0x7616, 0x6100, 0x5004, 0x537b, 0xcf7b, 0x1, 0x1);
        gbc.writeMem(0xa1d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7616);
        EXPECT(gbc.pc(), 0xa1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01C6
        gbc.setState(0xb689, 0x2463, 0x3bb0, 0x467e, 0x5152, 0x75ea, 0x1, 0x1);
        gbc.writeMem(0xb689, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2463);
        EXPECT(gbc.pc(), 0xb68b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb689), 0xcb);
        EXPECT(gbc.readMem(0xb68a), 0xd2);
        // CB D2 01C7
        gbc.setState(0x24c6, 0x8a5, 0x4220, 0x7289, 0xd2a9, 0x670f, 0x1, 0x1);
        gbc.writeMem(0x24c6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8a5);
        EXPECT(gbc.pc(), 0x24c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01C8
        gbc.setState(0x56ca, 0xd76c, 0x6c50, 0x88b, 0xc0de, 0xabfc, 0x1, 0x1);
        gbc.writeMem(0x56ca, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd76c);
        EXPECT(gbc.pc(), 0x56cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01C9
        gbc.setState(0x5441, 0xbcb7, 0x6810, 0xba5, 0x5892, 0x7150, 0x1, 0x0);
        gbc.writeMem(0x5441, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbcb7);
        EXPECT(gbc.pc(), 0x5443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01CA
        gbc.setState(0x8a7c, 0xe13f, 0xec50, 0xef20, 0x8bf3, 0x16c3, 0x1, 0x1);
        gbc.writeMem(0x8a7c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe13f);
        EXPECT(gbc.pc(), 0x8a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a7c), 0xcb);
        EXPECT(gbc.readMem(0x8a7d), 0xd2);
        // CB D2 01CB
        gbc.setState(0x2736, 0x13cd, 0x540, 0x85f8, 0xd551, 0x8d13, 0x0, 0x1);
        gbc.writeMem(0x2736, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x13cd);
        EXPECT(gbc.pc(), 0x2738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01CC
        gbc.setState(0x378e, 0x9340, 0x11d0, 0xa5b0, 0x98c6, 0xdd34, 0x1, 0x0);
        gbc.writeMem(0x378e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9340);
        EXPECT(gbc.pc(), 0x3790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01CD
        gbc.setState(0x8a8, 0x3600, 0xaa0, 0xa3c, 0xbebe, 0x575b, 0x1, 0x0);
        gbc.writeMem(0x8a8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3600);
        EXPECT(gbc.pc(), 0x8aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01CF
        gbc.setState(0x4a3d, 0xc48, 0x8340, 0xca9d, 0x3191, 0xf197, 0x0, 0x1);
        gbc.writeMem(0x4a3d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc48);
        EXPECT(gbc.pc(), 0x4a3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01D0
        gbc.setState(0xd57c, 0xd8ea, 0x22d0, 0x2b89, 0x7c02, 0x8832, 0x0, 0x1);
        gbc.writeMem(0xd57c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd8ea);
        EXPECT(gbc.pc(), 0xd57e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd57c), 0xcb);
        EXPECT(gbc.readMem(0xd57d), 0xd2);
        // CB D2 01D1
        gbc.setState(0x8665, 0x84e, 0xa060, 0xee7e, 0xa8d6, 0x7cc6, 0x1, 0x1);
        gbc.writeMem(0x8665, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x84e);
        EXPECT(gbc.pc(), 0x8667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8665), 0xcb);
        EXPECT(gbc.readMem(0x8666), 0xd2);
        // CB D2 01D2
        gbc.setState(0x29af, 0x4447, 0xf300, 0x4faf, 0xa807, 0xe359, 0x1, 0x1);
        gbc.writeMem(0x29af, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4447);
        EXPECT(gbc.pc(), 0x29b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01D3
        gbc.setState(0x1f72, 0x48c1, 0x9560, 0x7975, 0x3cdb, 0xff41, 0x0, 0x1);
        gbc.writeMem(0x1f72, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x48c1);
        EXPECT(gbc.pc(), 0x1f74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01D4
        gbc.setState(0x825d, 0xd239, 0xfb0, 0x8dae, 0x48f2, 0x7e60, 0x0, 0x0);
        gbc.writeMem(0x825d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd239);
        EXPECT(gbc.pc(), 0x825f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x825d), 0xcb);
        EXPECT(gbc.readMem(0x825e), 0xd2);
        // CB D2 01D5
        gbc.setState(0x352c, 0xe20a, 0x9540, 0xdc61, 0x51bf, 0x5261, 0x0, 0x1);
        gbc.writeMem(0x352c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe20a);
        EXPECT(gbc.pc(), 0x352e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01D6
        gbc.setState(0x9700, 0x921e, 0xc480, 0x8a38, 0x3d02, 0xfc6f, 0x0, 0x0);
        gbc.writeMem(0x9700, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x921e);
        EXPECT(gbc.pc(), 0x9702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9700), 0xcb);
        EXPECT(gbc.readMem(0x9701), 0xd2);
        // CB D2 01D7
        gbc.setState(0x1ec, 0xf047, 0xc9b0, 0x19ab, 0x5db7, 0xc781, 0x0, 0x0);
        gbc.writeMem(0x1ec, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf047);
        EXPECT(gbc.pc(), 0x1ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01D8
        gbc.setState(0xd760, 0x1894, 0x6e80, 0x27c9, 0x5eb9, 0xe655, 0x1, 0x0);
        gbc.writeMem(0xd760, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1894);
        EXPECT(gbc.pc(), 0xd762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd760), 0xcb);
        EXPECT(gbc.readMem(0xd761), 0xd2);
        // CB D2 01D9
        gbc.setState(0xb0cc, 0xc67a, 0xd350, 0xce37, 0xb03c, 0xd960, 0x0, 0x1);
        gbc.writeMem(0xb0cc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc67a);
        EXPECT(gbc.pc(), 0xb0ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0cc), 0xcb);
        EXPECT(gbc.readMem(0xb0cd), 0xd2);
        // CB D2 01DA
        gbc.setState(0x1015, 0x5091, 0xed10, 0x3d1c, 0x41a4, 0x9d40, 0x0, 0x0);
        gbc.writeMem(0x1015, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5091);
        EXPECT(gbc.pc(), 0x1017);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01DB
        gbc.setState(0x5da6, 0x45c4, 0x4220, 0xd895, 0x3e44, 0x366e, 0x0, 0x0);
        gbc.writeMem(0x5da6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x45c4);
        EXPECT(gbc.pc(), 0x5da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01DC
        gbc.setState(0x7529, 0x5651, 0x6510, 0x78b8, 0x6be0, 0x22b1, 0x1, 0x0);
        gbc.writeMem(0x7529, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5651);
        EXPECT(gbc.pc(), 0x752b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01DD
        gbc.setState(0xebc0, 0x1723, 0x1a80, 0x8f30, 0xaf3, 0x4f35, 0x1, 0x1);
        gbc.writeMem(0xebc0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x1723);
        EXPECT(gbc.pc(), 0xebc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebc0), 0xcb);
        EXPECT(gbc.readMem(0xebc1), 0xd2);
        // CB D2 01DE
        gbc.setState(0x3b78, 0xd73e, 0x2f10, 0x103d, 0xa089, 0xe8e1, 0x0, 0x0);
        gbc.writeMem(0x3b78, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd73e);
        EXPECT(gbc.pc(), 0x3b7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01DF
        gbc.setState(0x748b, 0x76fb, 0xd790, 0x57e5, 0x84ee, 0x2496, 0x0, 0x1);
        gbc.writeMem(0x748b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x76fb);
        EXPECT(gbc.pc(), 0x748d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01E0
        gbc.setState(0x7767, 0x3156, 0x1e80, 0xc4be, 0xd55d, 0x76ce, 0x0, 0x0);
        gbc.writeMem(0x7767, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3156);
        EXPECT(gbc.pc(), 0x7769);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01E1
        gbc.setState(0x256d, 0xb17f, 0xf5d0, 0xbcfc, 0x961c, 0xb208, 0x0, 0x0);
        gbc.writeMem(0x256d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb17f);
        EXPECT(gbc.pc(), 0x256f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01E2
        gbc.setState(0xd067, 0x5164, 0xce80, 0xc321, 0x41fa, 0xf3f7, 0x1, 0x0);
        gbc.writeMem(0xd067, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5164);
        EXPECT(gbc.pc(), 0xd069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd067), 0xcb);
        EXPECT(gbc.readMem(0xd068), 0xd2);
        // CB D2 01E3
        gbc.setState(0x7a02, 0x7f36, 0x34b0, 0x1ecd, 0xe198, 0x1fb3, 0x1, 0x1);
        gbc.writeMem(0x7a02, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7f36);
        EXPECT(gbc.pc(), 0x7a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01E4
        gbc.setState(0x9d3e, 0xfe03, 0x40d0, 0xf223, 0xd8e4, 0xc20f, 0x0, 0x1);
        gbc.writeMem(0x9d3e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfe03);
        EXPECT(gbc.pc(), 0x9d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d3e), 0xcb);
        EXPECT(gbc.readMem(0x9d3f), 0xd2);
        // CB D2 01E6
        gbc.setState(0xa49d, 0x44c1, 0xfdd0, 0x6dcc, 0xc00e, 0x61ae, 0x0, 0x1);
        gbc.writeMem(0xa49d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x44c1);
        EXPECT(gbc.pc(), 0xa49f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa49d), 0xcb);
        EXPECT(gbc.readMem(0xa49e), 0xd2);
        // CB D2 01E7
        gbc.setState(0x5e2c, 0x95fc, 0x3e40, 0x6f9, 0x56e, 0x5d1c, 0x0, 0x0);
        gbc.writeMem(0x5e2c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x95fc);
        EXPECT(gbc.pc(), 0x5e2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01E8
        gbc.setState(0xb5ea, 0x4898, 0x3580, 0x9107, 0x7224, 0x45e6, 0x1, 0x1);
        gbc.writeMem(0xb5ea, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4898);
        EXPECT(gbc.pc(), 0xb5ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ea), 0xcb);
        EXPECT(gbc.readMem(0xb5eb), 0xd2);
        // CB D2 01E9
        gbc.setState(0x24af, 0x4d3f, 0xe4a0, 0xd203, 0xd527, 0xd1f1, 0x0, 0x1);
        gbc.writeMem(0x24af, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4d3f);
        EXPECT(gbc.pc(), 0x24b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01EA
        gbc.setState(0x5d8b, 0x4b52, 0x7080, 0xd8b5, 0xcd78, 0xde30, 0x0, 0x0);
        gbc.writeMem(0x5d8b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4b52);
        EXPECT(gbc.pc(), 0x5d8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01EB
        gbc.setState(0x4ee1, 0x717c, 0xd590, 0x77b6, 0x4f49, 0xc516, 0x0, 0x0);
        gbc.writeMem(0x4ee1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x717c);
        EXPECT(gbc.pc(), 0x4ee3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01EC
        gbc.setState(0x7316, 0xd071, 0x55b0, 0x9ad7, 0x3cbe, 0x1213, 0x1, 0x0);
        gbc.writeMem(0x7316, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd071);
        EXPECT(gbc.pc(), 0x7318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01ED
        gbc.setState(0x942e, 0x8a78, 0xda90, 0xed02, 0x4f73, 0x642e, 0x1, 0x0);
        gbc.writeMem(0x942e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8a78);
        EXPECT(gbc.pc(), 0x9430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x942e), 0xcb);
        EXPECT(gbc.readMem(0x942f), 0xd2);
        // CB D2 01EE
        gbc.setState(0x3e11, 0x50fa, 0x5b60, 0xb0dd, 0x63c0, 0x982, 0x1, 0x1);
        gbc.writeMem(0x3e11, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x50fa);
        EXPECT(gbc.pc(), 0x3e13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01EF
        gbc.setState(0xca9, 0xd74, 0xfef0, 0x8e2a, 0x44ee, 0x56b2, 0x0, 0x1);
        gbc.writeMem(0xca9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd74);
        EXPECT(gbc.pc(), 0xcab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01F0
        gbc.setState(0x9e0d, 0xa3a1, 0xb1d0, 0x6180, 0x46fb, 0x5eb1, 0x1, 0x1);
        gbc.writeMem(0x9e0d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa3a1);
        EXPECT(gbc.pc(), 0x9e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e0d), 0xcb);
        EXPECT(gbc.readMem(0x9e0e), 0xd2);
        // CB D2 01F1
        gbc.setState(0x44d5, 0xa3b8, 0x7970, 0xb036, 0x5f52, 0x44e4, 0x1, 0x1);
        gbc.writeMem(0x44d5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa3b8);
        EXPECT(gbc.pc(), 0x44d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01F2
        gbc.setState(0xbf91, 0x2570, 0xff40, 0xda8d, 0x87e9, 0x4e3e, 0x0, 0x1);
        gbc.writeMem(0xbf91, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2570);
        EXPECT(gbc.pc(), 0xbf93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf91), 0xcb);
        EXPECT(gbc.readMem(0xbf92), 0xd2);
        // CB D2 01F3
        gbc.setState(0xd862, 0x844a, 0xfa70, 0x51ce, 0x81f, 0xfcf9, 0x1, 0x0);
        gbc.writeMem(0xd862, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x844a);
        EXPECT(gbc.pc(), 0xd864);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd862), 0xcb);
        EXPECT(gbc.readMem(0xd863), 0xd2);
        // CB D2 01F4
        gbc.setState(0xe492, 0xa184, 0x2060, 0x1f02, 0x3308, 0xc182, 0x0, 0x1);
        gbc.writeMem(0xe492, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa184);
        EXPECT(gbc.pc(), 0xe494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe492), 0xcb);
        EXPECT(gbc.readMem(0xe493), 0xd2);
        // CB D2 01F5
        gbc.setState(0x55f6, 0x8cb3, 0x47a0, 0x4cc1, 0x8f33, 0x4693, 0x1, 0x0);
        gbc.writeMem(0x55f6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8cb3);
        EXPECT(gbc.pc(), 0x55f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01F6
        gbc.setState(0x7a7e, 0x7512, 0x7fc0, 0x8e3d, 0xe2cb, 0xa5ea, 0x1, 0x0);
        gbc.writeMem(0x7a7e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7512);
        EXPECT(gbc.pc(), 0x7a80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01F7
        gbc.setState(0x4474, 0xa766, 0xdf80, 0x9515, 0x3b4d, 0x7268, 0x1, 0x0);
        gbc.writeMem(0x4474, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa766);
        EXPECT(gbc.pc(), 0x4476);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 01F8
        gbc.setState(0x911e, 0x8292, 0x23d0, 0x698a, 0x83d0, 0x16c0, 0x1, 0x0);
        gbc.writeMem(0x911e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8292);
        EXPECT(gbc.pc(), 0x9120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x911e), 0xcb);
        EXPECT(gbc.readMem(0x911f), 0xd2);
        // CB D2 01F9
        gbc.setState(0xb66, 0x4cb2, 0xae10, 0x9508, 0xa9cf, 0xfc0e, 0x1, 0x0);
        gbc.writeMem(0xb66, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4cb2);
        EXPECT(gbc.pc(), 0xb68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01FA
        gbc.setState(0x2619, 0x49b9, 0x9070, 0x4ea1, 0x97e8, 0x4ca4, 0x1, 0x0);
        gbc.writeMem(0x2619, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x49b9);
        EXPECT(gbc.pc(), 0x261b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01FB
        gbc.setState(0x9f2a, 0xc70e, 0x1b20, 0xda84, 0x9590, 0xaee4, 0x1, 0x0);
        gbc.writeMem(0x9f2a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc70e);
        EXPECT(gbc.pc(), 0x9f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f2a), 0xcb);
        EXPECT(gbc.readMem(0x9f2b), 0xd2);
        // CB D2 01FC
        gbc.setState(0x1566, 0xbf14, 0x3d30, 0x16c9, 0xbed2, 0xf39c, 0x1, 0x1);
        gbc.writeMem(0x1566, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xbf14);
        EXPECT(gbc.pc(), 0x1568);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 01FD
        gbc.setState(0xc211, 0x1a4e, 0x4950, 0x896b, 0x8817, 0x29c8, 0x1, 0x0);
        gbc.writeMem(0xc211, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1a4e);
        EXPECT(gbc.pc(), 0xc213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc211), 0xcb);
        EXPECT(gbc.readMem(0xc212), 0xd2);
        // CB D2 01FE
        gbc.setState(0x91aa, 0x4736, 0x2200, 0x7d07, 0x7f3d, 0xc6d1, 0x1, 0x0);
        gbc.writeMem(0x91aa, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4736);
        EXPECT(gbc.pc(), 0x91ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91aa), 0xcb);
        EXPECT(gbc.readMem(0x91ab), 0xd2);
        // CB D2 01FF
        gbc.setState(0xb, 0x778, 0x280, 0x50e1, 0x3412, 0xef14, 0x0, 0x0);
        gbc.writeMem(0xb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x778);
        EXPECT(gbc.pc(), 0xd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0200
        gbc.setState(0x3eac, 0x40fa, 0x60c0, 0x2819, 0x848f, 0xe458, 0x0, 0x1);
        gbc.writeMem(0x3eac, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x40fa);
        EXPECT(gbc.pc(), 0x3eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0201
        gbc.setState(0x8cb6, 0x7afe, 0xbc50, 0x5d8, 0x7179, 0x4135, 0x0, 0x0);
        gbc.writeMem(0x8cb6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7afe);
        EXPECT(gbc.pc(), 0x8cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cb6), 0xcb);
        EXPECT(gbc.readMem(0x8cb7), 0xd2);
        // CB D2 0202
        gbc.setState(0x9480, 0xb167, 0xe3c0, 0xa1ed, 0xcd86, 0x3ef3, 0x1, 0x1);
        gbc.writeMem(0x9480, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb167);
        EXPECT(gbc.pc(), 0x9482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9480), 0xcb);
        EXPECT(gbc.readMem(0x9481), 0xd2);
        // CB D2 0203
        gbc.setState(0xd959, 0x302b, 0xd980, 0x6ce3, 0x3602, 0x4c11, 0x0, 0x1);
        gbc.writeMem(0xd959, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x302b);
        EXPECT(gbc.pc(), 0xd95b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd959), 0xcb);
        EXPECT(gbc.readMem(0xd95a), 0xd2);
        // CB D2 0204
        gbc.setState(0xd5e4, 0x7c6f, 0x2d0, 0xb438, 0x2b26, 0x4d8e, 0x1, 0x1);
        gbc.writeMem(0xd5e4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7c6f);
        EXPECT(gbc.pc(), 0xd5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e4), 0xcb);
        EXPECT(gbc.readMem(0xd5e5), 0xd2);
        // CB D2 0205
        gbc.setState(0xc16b, 0xcc72, 0x7340, 0x4b89, 0x2177, 0x7ac1, 0x0, 0x1);
        gbc.writeMem(0xc16b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcc72);
        EXPECT(gbc.pc(), 0xc16d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16b), 0xcb);
        EXPECT(gbc.readMem(0xc16c), 0xd2);
        // CB D2 0206
        gbc.setState(0x27a7, 0xbc9c, 0x22f0, 0xf5d, 0xa80d, 0x628, 0x0, 0x1);
        gbc.writeMem(0x27a7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xbc9c);
        EXPECT(gbc.pc(), 0x27a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0207
        gbc.setState(0x800d, 0x9ed0, 0x2d30, 0x7366, 0xc42a, 0x62a4, 0x0, 0x0);
        gbc.writeMem(0x800d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9ed0);
        EXPECT(gbc.pc(), 0x800f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x800d), 0xcb);
        EXPECT(gbc.readMem(0x800e), 0xd2);
        // CB D2 0208
        gbc.setState(0xca93, 0xebaf, 0x770, 0x78c6, 0x5360, 0xe770, 0x0, 0x0);
        gbc.writeMem(0xca93, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xebaf);
        EXPECT(gbc.pc(), 0xca95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca93), 0xcb);
        EXPECT(gbc.readMem(0xca94), 0xd2);
        // CB D2 0209
        gbc.setState(0x8224, 0x96ea, 0x4370, 0x51d7, 0xce37, 0xd882, 0x1, 0x0);
        gbc.writeMem(0x8224, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x96ea);
        EXPECT(gbc.pc(), 0x8226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8224), 0xcb);
        EXPECT(gbc.readMem(0x8225), 0xd2);
        // CB D2 020A
        gbc.setState(0xc384, 0x3ebc, 0x73c0, 0xed90, 0xd184, 0x3495, 0x1, 0x1);
        gbc.writeMem(0xc384, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3ebc);
        EXPECT(gbc.pc(), 0xc386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc384), 0xcb);
        EXPECT(gbc.readMem(0xc385), 0xd2);
        // CB D2 020B
        gbc.setState(0x9de5, 0x340, 0xbce0, 0xb11d, 0x673e, 0x14f4, 0x1, 0x0);
        gbc.writeMem(0x9de5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x340);
        EXPECT(gbc.pc(), 0x9de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9de5), 0xcb);
        EXPECT(gbc.readMem(0x9de6), 0xd2);
        // CB D2 020D
        gbc.setState(0x6328, 0x6212, 0x8390, 0x7be2, 0xf0d6, 0xe529, 0x1, 0x1);
        gbc.writeMem(0x6328, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6212);
        EXPECT(gbc.pc(), 0x632a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 020E
        gbc.setState(0xba6e, 0x830c, 0xd930, 0x6435, 0x4fa6, 0xa21e, 0x1, 0x0);
        gbc.writeMem(0xba6e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x830c);
        EXPECT(gbc.pc(), 0xba70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba6e), 0xcb);
        EXPECT(gbc.readMem(0xba6f), 0xd2);
        // CB D2 020F
        gbc.setState(0x45b1, 0xa992, 0xc090, 0x7b4c, 0xb05b, 0x8c0c, 0x1, 0x0);
        gbc.writeMem(0x45b1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa992);
        EXPECT(gbc.pc(), 0x45b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0210
        gbc.setState(0x49f2, 0x54a3, 0x5a40, 0x818d, 0x41b9, 0x3b18, 0x1, 0x0);
        gbc.writeMem(0x49f2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x54a3);
        EXPECT(gbc.pc(), 0x49f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0211
        gbc.setState(0x86fd, 0x44c3, 0xc940, 0x45bb, 0xf08e, 0x660b, 0x0, 0x0);
        gbc.writeMem(0x86fd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x44c3);
        EXPECT(gbc.pc(), 0x86ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fd), 0xcb);
        EXPECT(gbc.readMem(0x86fe), 0xd2);
        // CB D2 0212
        gbc.setState(0xa3f4, 0x2cc8, 0x57f0, 0xfed1, 0x12c8, 0x6ab2, 0x0, 0x0);
        gbc.writeMem(0xa3f4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2cc8);
        EXPECT(gbc.pc(), 0xa3f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f4), 0xcb);
        EXPECT(gbc.readMem(0xa3f5), 0xd2);
        // CB D2 0213
        gbc.setState(0x6558, 0x901a, 0xa5c0, 0x7f80, 0x3f03, 0x3195, 0x1, 0x0);
        gbc.writeMem(0x6558, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x901a);
        EXPECT(gbc.pc(), 0x655a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0214
        gbc.setState(0xc3e1, 0x6364, 0xb940, 0x900e, 0x4439, 0x3d82, 0x0, 0x0);
        gbc.writeMem(0xc3e1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6364);
        EXPECT(gbc.pc(), 0xc3e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e1), 0xcb);
        EXPECT(gbc.readMem(0xc3e2), 0xd2);
        // CB D2 0215
        gbc.setState(0x475c, 0x3e6, 0x53c0, 0xcdd2, 0x225b, 0x666b, 0x0, 0x1);
        gbc.writeMem(0x475c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3e6);
        EXPECT(gbc.pc(), 0x475e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0216
        gbc.setState(0x89d1, 0xbd57, 0xb830, 0xd1f7, 0x2c08, 0x19d7, 0x0, 0x0);
        gbc.writeMem(0x89d1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xbd57);
        EXPECT(gbc.pc(), 0x89d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89d1), 0xcb);
        EXPECT(gbc.readMem(0x89d2), 0xd2);
        // CB D2 0217
        gbc.setState(0x9caf, 0x84d6, 0x5f70, 0x4127, 0x707c, 0xcab3, 0x0, 0x0);
        gbc.writeMem(0x9caf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x84d6);
        EXPECT(gbc.pc(), 0x9cb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9caf), 0xcb);
        EXPECT(gbc.readMem(0x9cb0), 0xd2);
        // CB D2 0218
        gbc.setState(0xd19f, 0x845e, 0x9320, 0x527c, 0x6188, 0xda3b, 0x1, 0x0);
        gbc.writeMem(0xd19f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x845e);
        EXPECT(gbc.pc(), 0xd1a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19f), 0xcb);
        EXPECT(gbc.readMem(0xd1a0), 0xd2);
        // CB D2 021A
        gbc.setState(0x63c3, 0x7dc8, 0xbe40, 0x67ae, 0xdf3f, 0x4b0e, 0x1, 0x1);
        gbc.writeMem(0x63c3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7dc8);
        EXPECT(gbc.pc(), 0x63c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 021B
        gbc.setState(0xea58, 0x67b, 0xed10, 0x702f, 0x2b5e, 0xa34c, 0x0, 0x0);
        gbc.writeMem(0xea58, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x67b);
        EXPECT(gbc.pc(), 0xea5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea58), 0xcb);
        EXPECT(gbc.readMem(0xea59), 0xd2);
        // CB D2 021C
        gbc.setState(0x1e63, 0x1adc, 0xeb20, 0xe976, 0x4e6, 0x452e, 0x1, 0x0);
        gbc.writeMem(0x1e63, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1adc);
        EXPECT(gbc.pc(), 0x1e65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 021D
        gbc.setState(0x199c, 0xfe2b, 0xc610, 0x16bf, 0x175a, 0xc99b, 0x0, 0x0);
        gbc.writeMem(0x199c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfe2b);
        EXPECT(gbc.pc(), 0x199e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 021E
        gbc.setState(0x204b, 0x1e18, 0xe4b0, 0x2fb3, 0x43a7, 0xe28f, 0x1, 0x1);
        gbc.writeMem(0x204b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1e18);
        EXPECT(gbc.pc(), 0x204d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 021F
        gbc.setState(0x5a50, 0xa6a4, 0x7690, 0xbaa1, 0x8fd, 0x927e, 0x1, 0x1);
        gbc.writeMem(0x5a50, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa6a4);
        EXPECT(gbc.pc(), 0x5a52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0220
        gbc.setState(0x59cc, 0xc007, 0xc840, 0x8e3b, 0xa111, 0x679b, 0x1, 0x1);
        gbc.writeMem(0x59cc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc007);
        EXPECT(gbc.pc(), 0x59ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0223
        gbc.setState(0xcd8, 0x49bb, 0x3680, 0x5ee1, 0x76b0, 0x6348, 0x0, 0x0);
        gbc.writeMem(0xcd8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x49bb);
        EXPECT(gbc.pc(), 0xcda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0224
        gbc.setState(0x5e12, 0xc81b, 0xc520, 0x1d46, 0x7cb3, 0x1c1d, 0x1, 0x1);
        gbc.writeMem(0x5e12, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc81b);
        EXPECT(gbc.pc(), 0x5e14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0225
        gbc.setState(0x2e88, 0x51b7, 0x68f0, 0x8d79, 0x4bd, 0xc259, 0x1, 0x1);
        gbc.writeMem(0x2e88, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x51b7);
        EXPECT(gbc.pc(), 0x2e8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0226
        gbc.setState(0x6509, 0xd401, 0x2710, 0x3435, 0xe728, 0xa82, 0x1, 0x1);
        gbc.writeMem(0x6509, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd401);
        EXPECT(gbc.pc(), 0x650b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0227
        gbc.setState(0x4cbe, 0x2de9, 0xe990, 0x90f, 0x5f90, 0x3296, 0x1, 0x1);
        gbc.writeMem(0x4cbe, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2de9);
        EXPECT(gbc.pc(), 0x4cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0228
        gbc.setState(0x39cc, 0xc473, 0xab60, 0x8be7, 0xb680, 0xb55d, 0x1, 0x0);
        gbc.writeMem(0x39cc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc473);
        EXPECT(gbc.pc(), 0x39ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0229
        gbc.setState(0x232c, 0xd7f6, 0x22e0, 0x67b3, 0x5ca2, 0x7c7d, 0x0, 0x0);
        gbc.writeMem(0x232c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd7f6);
        EXPECT(gbc.pc(), 0x232e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 022A
        gbc.setState(0x75d3, 0xc323, 0xb950, 0x44e9, 0xc32c, 0xf9e6, 0x1, 0x0);
        gbc.writeMem(0x75d3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc323);
        EXPECT(gbc.pc(), 0x75d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 022B
        gbc.setState(0x14f7, 0xfc53, 0xe3c0, 0xc1be, 0xfe32, 0xdb16, 0x1, 0x1);
        gbc.writeMem(0x14f7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xfc53);
        EXPECT(gbc.pc(), 0x14f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 022C
        gbc.setState(0x7efe, 0x773c, 0x6bf0, 0xaa80, 0xdb5b, 0xee1b, 0x1, 0x1);
        gbc.writeMem(0x7efe, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x773c);
        EXPECT(gbc.pc(), 0x7f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 022D
        gbc.setState(0x8ace, 0x67e2, 0xf390, 0x3af5, 0x7af3, 0x6e58, 0x0, 0x1);
        gbc.writeMem(0x8ace, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x67e2);
        EXPECT(gbc.pc(), 0x8ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ace), 0xcb);
        EXPECT(gbc.readMem(0x8acf), 0xd2);
        // CB D2 022E
        gbc.setState(0x4e44, 0x85aa, 0x6880, 0xd0f1, 0x6588, 0x350c, 0x1, 0x1);
        gbc.writeMem(0x4e44, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x85aa);
        EXPECT(gbc.pc(), 0x4e46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 022F
        gbc.setState(0x26d0, 0x5065, 0xac10, 0x6e15, 0x27a7, 0x13a2, 0x1, 0x0);
        gbc.writeMem(0x26d0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5065);
        EXPECT(gbc.pc(), 0x26d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0230
        gbc.setState(0x34b5, 0xfc1d, 0x3bc0, 0xabf, 0x76d0, 0x83ea, 0x1, 0x0);
        gbc.writeMem(0x34b5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfc1d);
        EXPECT(gbc.pc(), 0x34b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0231
        gbc.setState(0x4b88, 0x9cf1, 0x3fe0, 0x19b5, 0x8633, 0xfcbf, 0x0, 0x0);
        gbc.writeMem(0x4b88, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9cf1);
        EXPECT(gbc.pc(), 0x4b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0232
        gbc.setState(0x3f70, 0xc74a, 0xdd40, 0xc3eb, 0x33b2, 0x683d, 0x0, 0x1);
        gbc.writeMem(0x3f70, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc74a);
        EXPECT(gbc.pc(), 0x3f72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0233
        gbc.setState(0x54e1, 0x7dd3, 0x5ea0, 0x26fa, 0x35fd, 0xc95f, 0x1, 0x1);
        gbc.writeMem(0x54e1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7dd3);
        EXPECT(gbc.pc(), 0x54e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0234
        gbc.setState(0x7f3b, 0x1567, 0x5a70, 0x12ee, 0x9c08, 0xc16b, 0x1, 0x1);
        gbc.writeMem(0x7f3b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1567);
        EXPECT(gbc.pc(), 0x7f3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0235
        gbc.setState(0x6e26, 0x659, 0x3310, 0x1883, 0x78a3, 0x816, 0x0, 0x0);
        gbc.writeMem(0x6e26, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x659);
        EXPECT(gbc.pc(), 0x6e28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0236
        gbc.setState(0xbcfb, 0xa65f, 0x5f30, 0x4102, 0x4a52, 0x49f8, 0x1, 0x0);
        gbc.writeMem(0xbcfb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa65f);
        EXPECT(gbc.pc(), 0xbcfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcfb), 0xcb);
        EXPECT(gbc.readMem(0xbcfc), 0xd2);
        // CB D2 0237
        gbc.setState(0x353, 0xecbc, 0x4690, 0xbc63, 0x783, 0x3ebb, 0x1, 0x0);
        gbc.writeMem(0x353, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xecbc);
        EXPECT(gbc.pc(), 0x355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0238
        gbc.setState(0x68d0, 0xdc45, 0xbd90, 0x45c4, 0xcf18, 0xf0a6, 0x0, 0x0);
        gbc.writeMem(0x68d0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xdc45);
        EXPECT(gbc.pc(), 0x68d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0239
        gbc.setState(0x7255, 0xcf65, 0x51a0, 0xd66d, 0xd467, 0x6f74, 0x1, 0x1);
        gbc.writeMem(0x7255, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xcf65);
        EXPECT(gbc.pc(), 0x7257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 023A
        gbc.setState(0x4348, 0x13ca, 0x1dd0, 0xcc70, 0x1049, 0x8bd0, 0x0, 0x0);
        gbc.writeMem(0x4348, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x13ca);
        EXPECT(gbc.pc(), 0x434a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 023B
        gbc.setState(0x38fd, 0x89e7, 0xa710, 0x48de, 0xcf6a, 0x8328, 0x0, 0x0);
        gbc.writeMem(0x38fd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x89e7);
        EXPECT(gbc.pc(), 0x38ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 023C
        gbc.setState(0x6992, 0xccc9, 0x9340, 0x1b11, 0x7b5a, 0x416d, 0x0, 0x1);
        gbc.writeMem(0x6992, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xccc9);
        EXPECT(gbc.pc(), 0x6994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 023D
        gbc.setState(0x9f2c, 0x6c4d, 0xc530, 0xa623, 0xb28b, 0x2c83, 0x1, 0x0);
        gbc.writeMem(0x9f2c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6c4d);
        EXPECT(gbc.pc(), 0x9f2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f2c), 0xcb);
        EXPECT(gbc.readMem(0x9f2d), 0xd2);
        // CB D2 023F
        gbc.setState(0xc926, 0xabae, 0xc530, 0x35c0, 0x12e, 0xa633, 0x0, 0x0);
        gbc.writeMem(0xc926, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xabae);
        EXPECT(gbc.pc(), 0xc928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc926), 0xcb);
        EXPECT(gbc.readMem(0xc927), 0xd2);
        // CB D2 0240
        gbc.setState(0x7f8f, 0x8111, 0x4410, 0x9d0a, 0x9144, 0x458e, 0x0, 0x0);
        gbc.writeMem(0x7f8f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8111);
        EXPECT(gbc.pc(), 0x7f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0241
        gbc.setState(0xb79d, 0x4819, 0x6e20, 0x8e18, 0xc4df, 0x7898, 0x0, 0x1);
        gbc.writeMem(0xb79d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4819);
        EXPECT(gbc.pc(), 0xb79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79d), 0xcb);
        EXPECT(gbc.readMem(0xb79e), 0xd2);
        // CB D2 0242
        gbc.setState(0x415, 0xa8, 0xa8c0, 0xbcfb, 0xef46, 0x63bb, 0x1, 0x1);
        gbc.writeMem(0x415, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa8);
        EXPECT(gbc.pc(), 0x417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0243
        gbc.setState(0xd8df, 0xd27b, 0xfb30, 0xff46, 0x3946, 0x383f, 0x0, 0x0);
        gbc.writeMem(0xd8df, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd27b);
        EXPECT(gbc.pc(), 0xd8e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8df), 0xcb);
        EXPECT(gbc.readMem(0xd8e0), 0xd2);
        // CB D2 0244
        gbc.setState(0x3729, 0x7c1, 0x17a0, 0x316e, 0x130f, 0xc400, 0x1, 0x1);
        gbc.writeMem(0x3729, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7c1);
        EXPECT(gbc.pc(), 0x372b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0245
        gbc.setState(0xe58a, 0x9eb3, 0xf2f0, 0xe9e6, 0x6f34, 0x29cd, 0x0, 0x0);
        gbc.writeMem(0xe58a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9eb3);
        EXPECT(gbc.pc(), 0xe58c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe58a), 0xcb);
        EXPECT(gbc.readMem(0xe58b), 0xd2);
        // CB D2 0246
        gbc.setState(0xe261, 0x253c, 0xb590, 0x86e3, 0xa5d5, 0xea3d, 0x1, 0x0);
        gbc.writeMem(0xe261, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x253c);
        EXPECT(gbc.pc(), 0xe263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe261), 0xcb);
        EXPECT(gbc.readMem(0xe262), 0xd2);
        // CB D2 0247
        gbc.setState(0x2f00, 0x30e9, 0x5f50, 0xf1fa, 0xb9fd, 0xe32c, 0x0, 0x0);
        gbc.writeMem(0x2f00, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x30e9);
        EXPECT(gbc.pc(), 0x2f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0248
        gbc.setState(0xc3ba, 0xb12b, 0x8960, 0xc47b, 0xa728, 0x7ea9, 0x1, 0x0);
        gbc.writeMem(0xc3ba, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb12b);
        EXPECT(gbc.pc(), 0xc3bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ba), 0xcb);
        EXPECT(gbc.readMem(0xc3bb), 0xd2);
        // CB D2 0249
        gbc.setState(0x6ed1, 0x6d5e, 0x8a0, 0xaefe, 0x1034, 0x5be6, 0x1, 0x1);
        gbc.writeMem(0x6ed1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6d5e);
        EXPECT(gbc.pc(), 0x6ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 024B
        gbc.setState(0xad38, 0x9c6e, 0x1990, 0x70, 0x3cbc, 0xa2df, 0x0, 0x1);
        gbc.writeMem(0xad38, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9c6e);
        EXPECT(gbc.pc(), 0xad3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad38), 0xcb);
        EXPECT(gbc.readMem(0xad39), 0xd2);
        // CB D2 024C
        gbc.setState(0xd50, 0xd8cd, 0x6e60, 0x5676, 0x1668, 0xe42e, 0x1, 0x0);
        gbc.writeMem(0xd50, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd8cd);
        EXPECT(gbc.pc(), 0xd52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 024D
        gbc.setState(0x13b4, 0x7b60, 0xa6a0, 0x2bb5, 0xb5c9, 0xbbb, 0x1, 0x1);
        gbc.writeMem(0x13b4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7b60);
        EXPECT(gbc.pc(), 0x13b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 024E
        gbc.setState(0x1ad3, 0x5012, 0xd530, 0x96fe, 0x2a1f, 0xf8da, 0x1, 0x0);
        gbc.writeMem(0x1ad3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5012);
        EXPECT(gbc.pc(), 0x1ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 024F
        gbc.setState(0x7848, 0x38d2, 0x43f0, 0x8f94, 0xde, 0x2e02, 0x0, 0x0);
        gbc.writeMem(0x7848, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x38d2);
        EXPECT(gbc.pc(), 0x784a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0250
        gbc.setState(0x34b2, 0x431c, 0x9e60, 0x5263, 0x29b9, 0x26c5, 0x0, 0x1);
        gbc.writeMem(0x34b2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x431c);
        EXPECT(gbc.pc(), 0x34b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0251
        gbc.setState(0x3310, 0xbff5, 0xf420, 0x4ee, 0xf983, 0xb531, 0x0, 0x0);
        gbc.writeMem(0x3310, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xbff5);
        EXPECT(gbc.pc(), 0x3312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0252
        gbc.setState(0x1aa8, 0x5f83, 0x7bb0, 0xcce3, 0x827c, 0xd59a, 0x1, 0x1);
        gbc.writeMem(0x1aa8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5f83);
        EXPECT(gbc.pc(), 0x1aaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0253
        gbc.setState(0xa772, 0xde63, 0x82f0, 0x7011, 0xd4e1, 0x9e36, 0x0, 0x1);
        gbc.writeMem(0xa772, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xde63);
        EXPECT(gbc.pc(), 0xa774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa772), 0xcb);
        EXPECT(gbc.readMem(0xa773), 0xd2);
        // CB D2 0254
        gbc.setState(0xa765, 0x3a88, 0x6b50, 0xc6f6, 0x22dd, 0xef1b, 0x0, 0x1);
        gbc.writeMem(0xa765, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3a88);
        EXPECT(gbc.pc(), 0xa767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa765), 0xcb);
        EXPECT(gbc.readMem(0xa766), 0xd2);
        // CB D2 0255
        gbc.setState(0x4d50, 0x46e1, 0x8e00, 0x965f, 0x115b, 0x6bea, 0x0, 0x1);
        gbc.writeMem(0x4d50, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x46e1);
        EXPECT(gbc.pc(), 0x4d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0256
        gbc.setState(0xb573, 0x3ce9, 0x6c30, 0x741b, 0xab53, 0xb0f8, 0x0, 0x1);
        gbc.writeMem(0xb573, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3ce9);
        EXPECT(gbc.pc(), 0xb575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb573), 0xcb);
        EXPECT(gbc.readMem(0xb574), 0xd2);
        // CB D2 0257
        gbc.setState(0x6cf9, 0x1c57, 0x7a80, 0x83c4, 0xfc1a, 0x18aa, 0x1, 0x0);
        gbc.writeMem(0x6cf9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1c57);
        EXPECT(gbc.pc(), 0x6cfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0258
        gbc.setState(0x180a, 0x696, 0xb970, 0xb233, 0x24f8, 0x9c99, 0x0, 0x1);
        gbc.writeMem(0x180a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x696);
        EXPECT(gbc.pc(), 0x180c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0259
        gbc.setState(0xebec, 0xb90c, 0xe50, 0x1318, 0xcd1, 0x2c70, 0x0, 0x0);
        gbc.writeMem(0xebec, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb90c);
        EXPECT(gbc.pc(), 0xebee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebec), 0xcb);
        EXPECT(gbc.readMem(0xebed), 0xd2);
        // CB D2 025A
        gbc.setState(0x4bf5, 0xa032, 0xb750, 0x2810, 0xec27, 0x2332, 0x0, 0x1);
        gbc.writeMem(0x4bf5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa032);
        EXPECT(gbc.pc(), 0x4bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 025B
        gbc.setState(0x9658, 0xa154, 0x5020, 0xf05b, 0x5235, 0x9884, 0x0, 0x1);
        gbc.writeMem(0x9658, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa154);
        EXPECT(gbc.pc(), 0x965a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9658), 0xcb);
        EXPECT(gbc.readMem(0x9659), 0xd2);
        // CB D2 025C
        gbc.setState(0x80bb, 0xed02, 0xa190, 0xe4e6, 0x6b67, 0x18ab, 0x1, 0x0);
        gbc.writeMem(0x80bb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xed02);
        EXPECT(gbc.pc(), 0x80bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80bb), 0xcb);
        EXPECT(gbc.readMem(0x80bc), 0xd2);
        // CB D2 025D
        gbc.setState(0x249d, 0x3876, 0x6b80, 0x2b7a, 0x258e, 0x2d59, 0x1, 0x1);
        gbc.writeMem(0x249d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3876);
        EXPECT(gbc.pc(), 0x249f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 025E
        gbc.setState(0xbd3b, 0x7432, 0x28f0, 0xb5e6, 0x944f, 0xd1d6, 0x0, 0x0);
        gbc.writeMem(0xbd3b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7432);
        EXPECT(gbc.pc(), 0xbd3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd3b), 0xcb);
        EXPECT(gbc.readMem(0xbd3c), 0xd2);
        // CB D2 025F
        gbc.setState(0x849e, 0x3346, 0xd540, 0x6c29, 0xaf3, 0xc5ac, 0x1, 0x1);
        gbc.writeMem(0x849e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3346);
        EXPECT(gbc.pc(), 0x84a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x849e), 0xcb);
        EXPECT(gbc.readMem(0x849f), 0xd2);
        // CB D2 0260
        gbc.setState(0xddd8, 0xee1f, 0xaca0, 0xdb0e, 0x7680, 0xa35d, 0x0, 0x1);
        gbc.writeMem(0xddd8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xee1f);
        EXPECT(gbc.pc(), 0xddda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddd8), 0xcb);
        EXPECT(gbc.readMem(0xddd9), 0xd2);
        // CB D2 0261
        gbc.setState(0x47a3, 0xe8ac, 0xefa0, 0x6917, 0x6a3f, 0x7523, 0x1, 0x0);
        gbc.writeMem(0x47a3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe8ac);
        EXPECT(gbc.pc(), 0x47a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0262
        gbc.setState(0x5886, 0x167c, 0x62a0, 0x963e, 0x1159, 0xc959, 0x1, 0x1);
        gbc.writeMem(0x5886, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x167c);
        EXPECT(gbc.pc(), 0x5888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0263
        gbc.setState(0x2b5e, 0x8699, 0xe740, 0xc1c4, 0x1519, 0xa14e, 0x1, 0x0);
        gbc.writeMem(0x2b5e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8699);
        EXPECT(gbc.pc(), 0x2b60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0264
        gbc.setState(0x49a1, 0x53ee, 0xfbd0, 0x65b1, 0x2caa, 0x50cb, 0x0, 0x0);
        gbc.writeMem(0x49a1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x53ee);
        EXPECT(gbc.pc(), 0x49a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0265
        gbc.setState(0x9c79, 0x664b, 0x4a10, 0x8a87, 0xac4a, 0xb8d9, 0x1, 0x0);
        gbc.writeMem(0x9c79, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x664b);
        EXPECT(gbc.pc(), 0x9c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c79), 0xcb);
        EXPECT(gbc.readMem(0x9c7a), 0xd2);
        // CB D2 0267
        gbc.setState(0x53ae, 0x251c, 0xf510, 0xb82e, 0xb719, 0x1290, 0x1, 0x1);
        gbc.writeMem(0x53ae, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x251c);
        EXPECT(gbc.pc(), 0x53b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0268
        gbc.setState(0x3cd3, 0x6625, 0x9440, 0xa0a4, 0xe608, 0x9ef9, 0x0, 0x0);
        gbc.writeMem(0x3cd3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6625);
        EXPECT(gbc.pc(), 0x3cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0269
        gbc.setState(0x8034, 0x323d, 0xdfa0, 0xa52, 0xb969, 0x7ac6, 0x0, 0x0);
        gbc.writeMem(0x8034, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x323d);
        EXPECT(gbc.pc(), 0x8036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8034), 0xcb);
        EXPECT(gbc.readMem(0x8035), 0xd2);
        // CB D2 026A
        gbc.setState(0xb91, 0xaff9, 0x19b0, 0xb85d, 0xc255, 0x824e, 0x0, 0x0);
        gbc.writeMem(0xb91, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xaff9);
        EXPECT(gbc.pc(), 0xb93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 026B
        gbc.setState(0x325e, 0xe7f5, 0xc900, 0x106d, 0xc2, 0x3e31, 0x1, 0x1);
        gbc.writeMem(0x325e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe7f5);
        EXPECT(gbc.pc(), 0x3260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 026C
        gbc.setState(0xd00, 0xe52a, 0x5c20, 0x73d7, 0x1c0e, 0x3513, 0x1, 0x0);
        gbc.writeMem(0xd00, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe52a);
        EXPECT(gbc.pc(), 0xd02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 026D
        gbc.setState(0xa582, 0x3226, 0xe660, 0x217a, 0x6861, 0xd4dd, 0x0, 0x1);
        gbc.writeMem(0xa582, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3226);
        EXPECT(gbc.pc(), 0xa584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa582), 0xcb);
        EXPECT(gbc.readMem(0xa583), 0xd2);
        // CB D2 026E
        gbc.setState(0xe838, 0xe1e9, 0x3730, 0xf69b, 0x5c4f, 0x1358, 0x0, 0x1);
        gbc.writeMem(0xe838, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe1e9);
        EXPECT(gbc.pc(), 0xe83a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe838), 0xcb);
        EXPECT(gbc.readMem(0xe839), 0xd2);
        // CB D2 026F
        gbc.setState(0xedc8, 0xf714, 0x26a0, 0x603e, 0x27ea, 0x33b7, 0x1, 0x1);
        gbc.writeMem(0xedc8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf714);
        EXPECT(gbc.pc(), 0xedca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc8), 0xcb);
        EXPECT(gbc.readMem(0xedc9), 0xd2);
        // CB D2 0270
        gbc.setState(0x6da6, 0x2c17, 0xf0f0, 0x4bb8, 0x8b40, 0x5be2, 0x0, 0x0);
        gbc.writeMem(0x6da6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2c17);
        EXPECT(gbc.pc(), 0x6da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0271
        gbc.setState(0x3239, 0x5f7a, 0x2470, 0x2a89, 0x8119, 0xbaf6, 0x0, 0x1);
        gbc.writeMem(0x3239, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5f7a);
        EXPECT(gbc.pc(), 0x323b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0272
        gbc.setState(0x39be, 0x4d13, 0x7220, 0xc63, 0xbfe, 0x605e, 0x1, 0x0);
        gbc.writeMem(0x39be, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4d13);
        EXPECT(gbc.pc(), 0x39c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0273
        gbc.setState(0xe75f, 0xdfe3, 0x9870, 0x966f, 0xd597, 0x79e5, 0x1, 0x1);
        gbc.writeMem(0xe75f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdfe3);
        EXPECT(gbc.pc(), 0xe761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe75f), 0xcb);
        EXPECT(gbc.readMem(0xe760), 0xd2);
        // CB D2 0274
        gbc.setState(0x2b57, 0x8d7e, 0x970, 0xe29a, 0xd4ba, 0x29ca, 0x0, 0x1);
        gbc.writeMem(0x2b57, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8d7e);
        EXPECT(gbc.pc(), 0x2b59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0275
        gbc.setState(0x651b, 0x603, 0x4980, 0x34a8, 0xdce0, 0x8f72, 0x1, 0x1);
        gbc.writeMem(0x651b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x603);
        EXPECT(gbc.pc(), 0x651d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0276
        gbc.setState(0x51a0, 0xf001, 0x5160, 0x281f, 0x92ba, 0x5f5, 0x0, 0x1);
        gbc.writeMem(0x51a0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf001);
        EXPECT(gbc.pc(), 0x51a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0277
        gbc.setState(0xec1f, 0xa566, 0x90b0, 0x376a, 0x9c1f, 0x576, 0x0, 0x0);
        gbc.writeMem(0xec1f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa566);
        EXPECT(gbc.pc(), 0xec21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec1f), 0xcb);
        EXPECT(gbc.readMem(0xec20), 0xd2);
        // CB D2 0278
        gbc.setState(0x24be, 0x56e1, 0x1cd0, 0x2572, 0xd96, 0x34ae, 0x1, 0x1);
        gbc.writeMem(0x24be, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x56e1);
        EXPECT(gbc.pc(), 0x24c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0279
        gbc.setState(0x4714, 0xa320, 0x19d0, 0x7b18, 0x23e2, 0x62d0, 0x0, 0x1);
        gbc.writeMem(0x4714, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa320);
        EXPECT(gbc.pc(), 0x4716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 027A
        gbc.setState(0xa4f6, 0xb153, 0xfc80, 0x2c0f, 0x5de5, 0x470a, 0x0, 0x0);
        gbc.writeMem(0xa4f6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb153);
        EXPECT(gbc.pc(), 0xa4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f6), 0xcb);
        EXPECT(gbc.readMem(0xa4f7), 0xd2);
        // CB D2 027B
        gbc.setState(0xbd40, 0x7777, 0x8a40, 0x2409, 0xe08c, 0x4251, 0x1, 0x1);
        gbc.writeMem(0xbd40, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7777);
        EXPECT(gbc.pc(), 0xbd42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd40), 0xcb);
        EXPECT(gbc.readMem(0xbd41), 0xd2);
        // CB D2 027C
        gbc.setState(0xdcbf, 0x1089, 0x22b0, 0x83e3, 0x5b77, 0x2b78, 0x0, 0x0);
        gbc.writeMem(0xdcbf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1089);
        EXPECT(gbc.pc(), 0xdcc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcbf), 0xcb);
        EXPECT(gbc.readMem(0xdcc0), 0xd2);
        // CB D2 027D
        gbc.setState(0x75f6, 0xc41, 0x7b70, 0x8630, 0xcdd1, 0x413d, 0x0, 0x1);
        gbc.writeMem(0x75f6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc41);
        EXPECT(gbc.pc(), 0x75f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 027E
        gbc.setState(0x446c, 0xd65f, 0xb120, 0xc33d, 0x3898, 0x19f5, 0x0, 0x0);
        gbc.writeMem(0x446c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd65f);
        EXPECT(gbc.pc(), 0x446e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 027F
        gbc.setState(0x585e, 0x60e7, 0x6380, 0x9631, 0xd2bb, 0x8b35, 0x0, 0x1);
        gbc.writeMem(0x585e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x60e7);
        EXPECT(gbc.pc(), 0x5860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0280
        gbc.setState(0x4b38, 0xa755, 0xcfb0, 0x17f3, 0xe73d, 0x55e1, 0x0, 0x1);
        gbc.writeMem(0x4b38, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa755);
        EXPECT(gbc.pc(), 0x4b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0281
        gbc.setState(0xe067, 0xa799, 0x60e0, 0x6aea, 0x2dff, 0x1d, 0x0, 0x0);
        gbc.writeMem(0xe067, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa799);
        EXPECT(gbc.pc(), 0xe069);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe067), 0xcb);
        EXPECT(gbc.readMem(0xe068), 0xd2);
        // CB D2 0282
        gbc.setState(0x32c3, 0x6bb9, 0x22d0, 0x7bc, 0x3c08, 0xe91f, 0x0, 0x1);
        gbc.writeMem(0x32c3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x6bb9);
        EXPECT(gbc.pc(), 0x32c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0283
        gbc.setState(0x808b, 0x8ac5, 0x6690, 0x9d2, 0x254a, 0xd727, 0x1, 0x0);
        gbc.writeMem(0x808b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8ac5);
        EXPECT(gbc.pc(), 0x808d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808b), 0xcb);
        EXPECT(gbc.readMem(0x808c), 0xd2);
        // CB D2 0284
        gbc.setState(0xc2ca, 0x55f9, 0xd9c0, 0xcd0, 0xaf6f, 0xa4cb, 0x1, 0x1);
        gbc.writeMem(0xc2ca, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x55f9);
        EXPECT(gbc.pc(), 0xc2cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ca), 0xcb);
        EXPECT(gbc.readMem(0xc2cb), 0xd2);
        // CB D2 0285
        gbc.setState(0xed6, 0xd2e2, 0xf4b0, 0xbc7b, 0x56ad, 0x372f, 0x1, 0x0);
        gbc.writeMem(0xed6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd2e2);
        EXPECT(gbc.pc(), 0xed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0286
        gbc.setState(0x3a81, 0xab81, 0x3a0, 0x2f6c, 0xd6bb, 0x76c7, 0x0, 0x1);
        gbc.writeMem(0x3a81, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xab81);
        EXPECT(gbc.pc(), 0x3a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0287
        gbc.setState(0xcf3d, 0x404e, 0xc8b0, 0x45da, 0xbd17, 0x5daf, 0x1, 0x1);
        gbc.writeMem(0xcf3d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x404e);
        EXPECT(gbc.pc(), 0xcf3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf3d), 0xcb);
        EXPECT(gbc.readMem(0xcf3e), 0xd2);
        // CB D2 0288
        gbc.setState(0x495a, 0xbd49, 0x2120, 0xea6c, 0x679f, 0x4968, 0x0, 0x1);
        gbc.writeMem(0x495a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbd49);
        EXPECT(gbc.pc(), 0x495c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0289
        gbc.setState(0x7c2b, 0x7d20, 0xf2a0, 0xf12a, 0x5b01, 0x66d5, 0x0, 0x0);
        gbc.writeMem(0x7c2b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7d20);
        EXPECT(gbc.pc(), 0x7c2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 028A
        gbc.setState(0x3a71, 0xa28, 0xedb0, 0x64af, 0xad56, 0xbc12, 0x1, 0x0);
        gbc.writeMem(0x3a71, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa28);
        EXPECT(gbc.pc(), 0x3a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 028B
        gbc.setState(0x3ad4, 0x222, 0x5880, 0xb169, 0x8baa, 0x4b3c, 0x1, 0x0);
        gbc.writeMem(0x3ad4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x222);
        EXPECT(gbc.pc(), 0x3ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 028C
        gbc.setState(0x4e8c, 0xb8c2, 0x12b0, 0x896, 0x2804, 0x8e0f, 0x1, 0x1);
        gbc.writeMem(0x4e8c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb8c2);
        EXPECT(gbc.pc(), 0x4e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 028D
        gbc.setState(0x504d, 0xb36b, 0x7b0, 0x9deb, 0x247a, 0x8ba0, 0x1, 0x1);
        gbc.writeMem(0x504d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb36b);
        EXPECT(gbc.pc(), 0x504f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 028E
        gbc.setState(0xabdf, 0xfb38, 0x7270, 0x6fe1, 0x864c, 0xc25c, 0x1, 0x1);
        gbc.writeMem(0xabdf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfb38);
        EXPECT(gbc.pc(), 0xabe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabdf), 0xcb);
        EXPECT(gbc.readMem(0xabe0), 0xd2);
        // CB D2 028F
        gbc.setState(0x387e, 0x3dac, 0x7ce0, 0xd9fe, 0x4a6, 0x2397, 0x1, 0x0);
        gbc.writeMem(0x387e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3dac);
        EXPECT(gbc.pc(), 0x3880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0290
        gbc.setState(0x2abd, 0xdc0c, 0xdb60, 0x8642, 0xbf7f, 0x1e5, 0x0, 0x1);
        gbc.writeMem(0x2abd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdc0c);
        EXPECT(gbc.pc(), 0x2abf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0291
        gbc.setState(0x8a19, 0x4605, 0x5da0, 0xe57a, 0xade9, 0x2784, 0x1, 0x0);
        gbc.writeMem(0x8a19, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4605);
        EXPECT(gbc.pc(), 0x8a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a19), 0xcb);
        EXPECT(gbc.readMem(0x8a1a), 0xd2);
        // CB D2 0292
        gbc.setState(0x82c9, 0xc84c, 0xc4c0, 0xed87, 0xc26f, 0x89ee, 0x1, 0x0);
        gbc.writeMem(0x82c9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc84c);
        EXPECT(gbc.pc(), 0x82cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c9), 0xcb);
        EXPECT(gbc.readMem(0x82ca), 0xd2);
        // CB D2 0293
        gbc.setState(0xa046, 0x4d4d, 0x5790, 0x244f, 0xd593, 0x8cd3, 0x0, 0x0);
        gbc.writeMem(0xa046, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4d4d);
        EXPECT(gbc.pc(), 0xa048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa046), 0xcb);
        EXPECT(gbc.readMem(0xa047), 0xd2);
        // CB D2 0294
        gbc.setState(0x5622, 0xd7f, 0x5530, 0xce3a, 0x4f2e, 0x5cfa, 0x0, 0x0);
        gbc.writeMem(0x5622, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd7f);
        EXPECT(gbc.pc(), 0x5624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0295
        gbc.setState(0xb1f8, 0xb503, 0x4110, 0xebc1, 0x2600, 0xd782, 0x1, 0x0);
        gbc.writeMem(0xb1f8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb503);
        EXPECT(gbc.pc(), 0xb1fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1f8), 0xcb);
        EXPECT(gbc.readMem(0xb1f9), 0xd2);
        // CB D2 0296
        gbc.setState(0xb691, 0x254a, 0xc5d0, 0xa18d, 0x3f39, 0xd31, 0x0, 0x1);
        gbc.writeMem(0xb691, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x254a);
        EXPECT(gbc.pc(), 0xb693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb691), 0xcb);
        EXPECT(gbc.readMem(0xb692), 0xd2);
        // CB D2 0298
        gbc.setState(0x6046, 0x9c40, 0x6fe0, 0xf953, 0x7bd4, 0xd592, 0x0, 0x1);
        gbc.writeMem(0x6046, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9c40);
        EXPECT(gbc.pc(), 0x6048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0299
        gbc.setState(0x9280, 0x75ea, 0x9940, 0xbe7a, 0x2e68, 0x984, 0x0, 0x0);
        gbc.writeMem(0x9280, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x75ea);
        EXPECT(gbc.pc(), 0x9282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9280), 0xcb);
        EXPECT(gbc.readMem(0x9281), 0xd2);
        // CB D2 029A
        gbc.setState(0x6595, 0x27c1, 0xc610, 0x4d94, 0xe6d4, 0xa11f, 0x1, 0x1);
        gbc.writeMem(0x6595, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x27c1);
        EXPECT(gbc.pc(), 0x6597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 029B
        gbc.setState(0xcb74, 0xd2ff, 0x85a0, 0x9190, 0xb126, 0x2729, 0x1, 0x0);
        gbc.writeMem(0xcb74, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd2ff);
        EXPECT(gbc.pc(), 0xcb76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb74), 0xcb);
        EXPECT(gbc.readMem(0xcb75), 0xd2);
        // CB D2 029C
        gbc.setState(0x3bfa, 0x25dc, 0xc640, 0x9438, 0x468f, 0xa335, 0x0, 0x0);
        gbc.writeMem(0x3bfa, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x25dc);
        EXPECT(gbc.pc(), 0x3bfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 029D
        gbc.setState(0x6aba, 0xd7b7, 0xb3b0, 0xd2ae, 0x6d07, 0xb042, 0x1, 0x1);
        gbc.writeMem(0x6aba, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd7b7);
        EXPECT(gbc.pc(), 0x6abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 029E
        gbc.setState(0x487b, 0x201b, 0x1600, 0xc6e4, 0xd2b9, 0x825c, 0x1, 0x1);
        gbc.writeMem(0x487b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x201b);
        EXPECT(gbc.pc(), 0x487d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 029F
        gbc.setState(0x7366, 0xaeea, 0x6540, 0xd637, 0xdfd8, 0xb89a, 0x0, 0x1);
        gbc.writeMem(0x7366, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xaeea);
        EXPECT(gbc.pc(), 0x7368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02A0
        gbc.setState(0x6460, 0x11a1, 0xadb0, 0xabf3, 0xab72, 0xe39c, 0x1, 0x1);
        gbc.writeMem(0x6460, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x11a1);
        EXPECT(gbc.pc(), 0x6462);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02A1
        gbc.setState(0x43af, 0x95d1, 0x2dd0, 0xc5b4, 0x40ed, 0xab26, 0x1, 0x1);
        gbc.writeMem(0x43af, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x95d1);
        EXPECT(gbc.pc(), 0x43b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02A2
        gbc.setState(0xc9c3, 0x9d47, 0xf120, 0x7481, 0x255f, 0xca72, 0x1, 0x0);
        gbc.writeMem(0xc9c3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9d47);
        EXPECT(gbc.pc(), 0xc9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c3), 0xcb);
        EXPECT(gbc.readMem(0xc9c4), 0xd2);
        // CB D2 02A3
        gbc.setState(0xb078, 0xaf65, 0x56f0, 0xcb09, 0xdb05, 0x7795, 0x1, 0x0);
        gbc.writeMem(0xb078, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xaf65);
        EXPECT(gbc.pc(), 0xb07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb078), 0xcb);
        EXPECT(gbc.readMem(0xb079), 0xd2);
        // CB D2 02A4
        gbc.setState(0x2daa, 0x2b8, 0x8440, 0x3a2e, 0xbed3, 0x945c, 0x0, 0x0);
        gbc.writeMem(0x2daa, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2b8);
        EXPECT(gbc.pc(), 0x2dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02A5
        gbc.setState(0x14e5, 0xa43a, 0x94a0, 0x463f, 0xca6a, 0xa09c, 0x1, 0x0);
        gbc.writeMem(0x14e5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa43a);
        EXPECT(gbc.pc(), 0x14e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02A6
        gbc.setState(0xa5a, 0xa7cd, 0x6c50, 0x25a7, 0x5db2, 0xd08a, 0x1, 0x1);
        gbc.writeMem(0xa5a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa7cd);
        EXPECT(gbc.pc(), 0xa5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02A7
        gbc.setState(0x5c3d, 0xb5dc, 0xa0c0, 0x1621, 0x89ad, 0x7117, 0x1, 0x0);
        gbc.writeMem(0x5c3d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb5dc);
        EXPECT(gbc.pc(), 0x5c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02A8
        gbc.setState(0x3654, 0xa063, 0x9d10, 0x3257, 0xdb92, 0xc95, 0x1, 0x0);
        gbc.writeMem(0x3654, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa063);
        EXPECT(gbc.pc(), 0x3656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02A9
        gbc.setState(0x3207, 0xea64, 0xb870, 0x8602, 0xd7f2, 0x52b4, 0x1, 0x1);
        gbc.writeMem(0x3207, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xea64);
        EXPECT(gbc.pc(), 0x3209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02AA
        gbc.setState(0x4410, 0x2e1b, 0x3350, 0xfdf3, 0x1f09, 0xfb07, 0x1, 0x0);
        gbc.writeMem(0x4410, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2e1b);
        EXPECT(gbc.pc(), 0x4412);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02AB
        gbc.setState(0x469f, 0x8922, 0xc3d0, 0x661b, 0x9bcc, 0x8ec, 0x0, 0x0);
        gbc.writeMem(0x469f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8922);
        EXPECT(gbc.pc(), 0x46a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02AC
        gbc.setState(0x995b, 0xb199, 0x9e70, 0x6ba8, 0xdee3, 0x1181, 0x0, 0x0);
        gbc.writeMem(0x995b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb199);
        EXPECT(gbc.pc(), 0x995d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x995b), 0xcb);
        EXPECT(gbc.readMem(0x995c), 0xd2);
        // CB D2 02AE
        gbc.setState(0x9aff, 0xf3a9, 0x95b0, 0xd4ca, 0x25cc, 0x152b, 0x1, 0x0);
        gbc.writeMem(0x9aff, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf3a9);
        EXPECT(gbc.pc(), 0x9b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aff), 0xcb);
        EXPECT(gbc.readMem(0x9b00), 0xd2);
        // CB D2 02AF
        gbc.setState(0xb504, 0xcf65, 0x4980, 0xd5aa, 0xf4a9, 0x49e9, 0x1, 0x1);
        gbc.writeMem(0xb504, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcf65);
        EXPECT(gbc.pc(), 0xb506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb504), 0xcb);
        EXPECT(gbc.readMem(0xb505), 0xd2);
        // CB D2 02B0
        gbc.setState(0x98de, 0xd547, 0xd590, 0x461d, 0x70f0, 0xc44, 0x0, 0x0);
        gbc.writeMem(0x98de, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd547);
        EXPECT(gbc.pc(), 0x98e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98de), 0xcb);
        EXPECT(gbc.readMem(0x98df), 0xd2);
        // CB D2 02B1
        gbc.setState(0x3cce, 0x5f64, 0x97b0, 0x2beb, 0x9f45, 0x50a3, 0x1, 0x0);
        gbc.writeMem(0x3cce, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5f64);
        EXPECT(gbc.pc(), 0x3cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02B2
        gbc.setState(0xe133, 0xff5d, 0x1cc0, 0x864f, 0x6598, 0xa425, 0x0, 0x0);
        gbc.writeMem(0xe133, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xff5d);
        EXPECT(gbc.pc(), 0xe135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe133), 0xcb);
        EXPECT(gbc.readMem(0xe134), 0xd2);
        // CB D2 02B3
        gbc.setState(0x2d92, 0x87a9, 0xee50, 0xac5d, 0xb334, 0xc8d1, 0x1, 0x0);
        gbc.writeMem(0x2d92, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x87a9);
        EXPECT(gbc.pc(), 0x2d94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02B4
        gbc.setState(0x97c, 0x2c2b, 0xf6e0, 0x2b9d, 0x5a7e, 0x4338, 0x0, 0x0);
        gbc.writeMem(0x97c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2c2b);
        EXPECT(gbc.pc(), 0x97e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02B5
        gbc.setState(0x7506, 0x1330, 0x40b0, 0x8d6b, 0x440b, 0x2421, 0x0, 0x1);
        gbc.writeMem(0x7506, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1330);
        EXPECT(gbc.pc(), 0x7508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02B6
        gbc.setState(0x6a52, 0xa56, 0x3a50, 0x96bc, 0xa74b, 0x3fe5, 0x0, 0x0);
        gbc.writeMem(0x6a52, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa56);
        EXPECT(gbc.pc(), 0x6a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02B7
        gbc.setState(0xb8be, 0x7bab, 0x9630, 0x2c7a, 0xec23, 0x6b81, 0x1, 0x1);
        gbc.writeMem(0xb8be, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7bab);
        EXPECT(gbc.pc(), 0xb8c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8be), 0xcb);
        EXPECT(gbc.readMem(0xb8bf), 0xd2);
        // CB D2 02B8
        gbc.setState(0xc48f, 0xb023, 0x6430, 0xede, 0x392a, 0x245a, 0x1, 0x0);
        gbc.writeMem(0xc48f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb023);
        EXPECT(gbc.pc(), 0xc491);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48f), 0xcb);
        EXPECT(gbc.readMem(0xc490), 0xd2);
        // CB D2 02B9
        gbc.setState(0xe6f3, 0x1271, 0xf010, 0xd0e7, 0x5975, 0xb837, 0x0, 0x0);
        gbc.writeMem(0xe6f3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1271);
        EXPECT(gbc.pc(), 0xe6f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6f3), 0xcb);
        EXPECT(gbc.readMem(0xe6f4), 0xd2);
        // CB D2 02BA
        gbc.setState(0x1d88, 0x677, 0x6120, 0x7f84, 0xad9f, 0xe003, 0x0, 0x1);
        gbc.writeMem(0x1d88, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x677);
        EXPECT(gbc.pc(), 0x1d8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02BB
        gbc.setState(0xc39d, 0x5b62, 0xfe60, 0xc4f8, 0xf1b0, 0xac1f, 0x0, 0x0);
        gbc.writeMem(0xc39d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5b62);
        EXPECT(gbc.pc(), 0xc39f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39d), 0xcb);
        EXPECT(gbc.readMem(0xc39e), 0xd2);
        // CB D2 02BD
        gbc.setState(0x1f5a, 0x38ed, 0xd1b0, 0x275, 0xb2d8, 0x5a31, 0x0, 0x0);
        gbc.writeMem(0x1f5a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x38ed);
        EXPECT(gbc.pc(), 0x1f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02BE
        gbc.setState(0xb277, 0xb07e, 0xa20, 0x2a0e, 0x888b, 0x52f, 0x0, 0x1);
        gbc.writeMem(0xb277, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xb07e);
        EXPECT(gbc.pc(), 0xb279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb277), 0xcb);
        EXPECT(gbc.readMem(0xb278), 0xd2);
        // CB D2 02BF
        gbc.setState(0x6074, 0xbaf7, 0x8d90, 0xb25c, 0xd23e, 0x4558, 0x1, 0x1);
        gbc.writeMem(0x6074, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbaf7);
        EXPECT(gbc.pc(), 0x6076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02C0
        gbc.setState(0xd972, 0xd618, 0xf5f0, 0x4c67, 0xc8f6, 0x5692, 0x0, 0x0);
        gbc.writeMem(0xd972, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd618);
        EXPECT(gbc.pc(), 0xd974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd972), 0xcb);
        EXPECT(gbc.readMem(0xd973), 0xd2);
        // CB D2 02C1
        gbc.setState(0xdc99, 0x7761, 0xe440, 0x66fe, 0xac96, 0xf645, 0x0, 0x0);
        gbc.writeMem(0xdc99, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7761);
        EXPECT(gbc.pc(), 0xdc9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc99), 0xcb);
        EXPECT(gbc.readMem(0xdc9a), 0xd2);
        // CB D2 02C2
        gbc.setState(0x4051, 0x7b39, 0x6820, 0x82a2, 0xcb93, 0x159b, 0x0, 0x1);
        gbc.writeMem(0x4051, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7b39);
        EXPECT(gbc.pc(), 0x4053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02C3
        gbc.setState(0xad37, 0x6943, 0x4530, 0x65f8, 0x1d67, 0xa8d0, 0x0, 0x1);
        gbc.writeMem(0xad37, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6943);
        EXPECT(gbc.pc(), 0xad39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad37), 0xcb);
        EXPECT(gbc.readMem(0xad38), 0xd2);
        // CB D2 02C4
        gbc.setState(0x758f, 0x3548, 0xd3c0, 0x6628, 0xb3bf, 0x2737, 0x1, 0x1);
        gbc.writeMem(0x758f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3548);
        EXPECT(gbc.pc(), 0x7591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02C5
        gbc.setState(0x28fb, 0x9505, 0x57e0, 0xf88c, 0x1326, 0x3d3e, 0x0, 0x0);
        gbc.writeMem(0x28fb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9505);
        EXPECT(gbc.pc(), 0x28fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02C6
        gbc.setState(0x4223, 0xd31b, 0x1820, 0x78e6, 0x5efb, 0x477, 0x0, 0x1);
        gbc.writeMem(0x4223, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd31b);
        EXPECT(gbc.pc(), 0x4225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02C7
        gbc.setState(0x75be, 0xb89a, 0x730, 0xa2c8, 0xa850, 0x7b1e, 0x0, 0x1);
        gbc.writeMem(0x75be, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb89a);
        EXPECT(gbc.pc(), 0x75c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02C8
        gbc.setState(0x1d2e, 0x34bc, 0xf3e0, 0xf4c8, 0xe7df, 0xf068, 0x1, 0x1);
        gbc.writeMem(0x1d2e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x34bc);
        EXPECT(gbc.pc(), 0x1d30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02C9
        gbc.setState(0x4f98, 0x3926, 0xa140, 0x3699, 0xb9c3, 0xa08e, 0x0, 0x0);
        gbc.writeMem(0x4f98, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3926);
        EXPECT(gbc.pc(), 0x4f9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02CA
        gbc.setState(0x30d, 0x11a4, 0x6e90, 0x64e5, 0xa44d, 0x3945, 0x1, 0x0);
        gbc.writeMem(0x30d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x11a4);
        EXPECT(gbc.pc(), 0x30f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02CB
        gbc.setState(0xa143, 0xb2d2, 0x5fe0, 0x7f0, 0x8f0c, 0xe2c4, 0x1, 0x1);
        gbc.writeMem(0xa143, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb2d2);
        EXPECT(gbc.pc(), 0xa145);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa143), 0xcb);
        EXPECT(gbc.readMem(0xa144), 0xd2);
        // CB D2 02CC
        gbc.setState(0x8133, 0x8eab, 0x50, 0xe07a, 0xe3ba, 0x48ac, 0x0, 0x0);
        gbc.writeMem(0x8133, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8eab);
        EXPECT(gbc.pc(), 0x8135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8133), 0xcb);
        EXPECT(gbc.readMem(0x8134), 0xd2);
        // CB D2 02CD
        gbc.setState(0x45e2, 0x7f4, 0x800, 0x524d, 0x8259, 0xaa7, 0x1, 0x1);
        gbc.writeMem(0x45e2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7f4);
        EXPECT(gbc.pc(), 0x45e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02CE
        gbc.setState(0x2ebd, 0x45c8, 0x6b70, 0x24ed, 0x899b, 0xa142, 0x1, 0x0);
        gbc.writeMem(0x2ebd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x45c8);
        EXPECT(gbc.pc(), 0x2ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02CF
        gbc.setState(0xc643, 0x7b45, 0x2f60, 0x47fd, 0x3e45, 0x497c, 0x1, 0x0);
        gbc.writeMem(0xc643, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7b45);
        EXPECT(gbc.pc(), 0xc645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc643), 0xcb);
        EXPECT(gbc.readMem(0xc644), 0xd2);
        // CB D2 02D0
        gbc.setState(0xe30f, 0x3b07, 0x7f10, 0x9dff, 0x6e9f, 0xdbc0, 0x0, 0x0);
        gbc.writeMem(0xe30f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3b07);
        EXPECT(gbc.pc(), 0xe311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe30f), 0xcb);
        EXPECT(gbc.readMem(0xe310), 0xd2);
        // CB D2 02D1
        gbc.setState(0x9d59, 0xd097, 0x1ed0, 0x4c2c, 0xdc9c, 0x9d60, 0x1, 0x0);
        gbc.writeMem(0x9d59, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd097);
        EXPECT(gbc.pc(), 0x9d5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d59), 0xcb);
        EXPECT(gbc.readMem(0x9d5a), 0xd2);
        // CB D2 02D2
        gbc.setState(0x523b, 0xf6c4, 0x6e40, 0x946d, 0xa44c, 0xd311, 0x0, 0x1);
        gbc.writeMem(0x523b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf6c4);
        EXPECT(gbc.pc(), 0x523d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02D3
        gbc.setState(0x651c, 0x49a3, 0xb370, 0xcec5, 0x32, 0x74fb, 0x1, 0x0);
        gbc.writeMem(0x651c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x49a3);
        EXPECT(gbc.pc(), 0x651e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02D4
        gbc.setState(0xddce, 0xb25c, 0x4ee0, 0x79c9, 0xfd79, 0x1d5c, 0x1, 0x1);
        gbc.writeMem(0xddce, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb25c);
        EXPECT(gbc.pc(), 0xddd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddce), 0xcb);
        EXPECT(gbc.readMem(0xddcf), 0xd2);
        // CB D2 02D5
        gbc.setState(0x5734, 0xcf37, 0x5910, 0xc431, 0xf6d6, 0xa96b, 0x0, 0x0);
        gbc.writeMem(0x5734, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcf37);
        EXPECT(gbc.pc(), 0x5736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02D6
        gbc.setState(0xdeb1, 0xd52, 0x7800, 0x32b8, 0xdf17, 0x704d, 0x0, 0x0);
        gbc.writeMem(0xdeb1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd52);
        EXPECT(gbc.pc(), 0xdeb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb1), 0xcb);
        EXPECT(gbc.readMem(0xdeb2), 0xd2);
        // CB D2 02D7
        gbc.setState(0xd734, 0xfee3, 0x66b0, 0xa83e, 0x54, 0xa214, 0x0, 0x0);
        gbc.writeMem(0xd734, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xfee3);
        EXPECT(gbc.pc(), 0xd736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd734), 0xcb);
        EXPECT(gbc.readMem(0xd735), 0xd2);
        // CB D2 02D8
        gbc.setState(0xa27e, 0x30e5, 0xd230, 0x986a, 0xb2f7, 0xafcf, 0x0, 0x1);
        gbc.writeMem(0xa27e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x30e5);
        EXPECT(gbc.pc(), 0xa280);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa27e), 0xcb);
        EXPECT(gbc.readMem(0xa27f), 0xd2);
        // CB D2 02D9
        gbc.setState(0x768, 0x3307, 0xcaf0, 0x9a58, 0x1abc, 0x4aa8, 0x1, 0x1);
        gbc.writeMem(0x768, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3307);
        EXPECT(gbc.pc(), 0x76a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02DA
        gbc.setState(0xe4ac, 0xbfe0, 0xf900, 0xe293, 0x8f9d, 0x991f, 0x1, 0x1);
        gbc.writeMem(0xe4ac, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xbfe0);
        EXPECT(gbc.pc(), 0xe4ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ac), 0xcb);
        EXPECT(gbc.readMem(0xe4ad), 0xd2);
        // CB D2 02DB
        gbc.setState(0x49e6, 0x28a8, 0xbc30, 0xfa8a, 0x6f4e, 0x2f2, 0x1, 0x1);
        gbc.writeMem(0x49e6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x28a8);
        EXPECT(gbc.pc(), 0x49e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02DC
        gbc.setState(0x75e7, 0xe34a, 0x8e50, 0xd625, 0xbcc9, 0x96cc, 0x1, 0x0);
        gbc.writeMem(0x75e7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe34a);
        EXPECT(gbc.pc(), 0x75e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02DD
        gbc.setState(0x8b89, 0x6670, 0x9be0, 0x587e, 0x1915, 0x7350, 0x1, 0x0);
        gbc.writeMem(0x8b89, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6670);
        EXPECT(gbc.pc(), 0x8b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b89), 0xcb);
        EXPECT(gbc.readMem(0x8b8a), 0xd2);
        // CB D2 02DE
        gbc.setState(0xbb7f, 0xa312, 0x4b60, 0xc731, 0x3526, 0x4f3, 0x1, 0x0);
        gbc.writeMem(0xbb7f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa312);
        EXPECT(gbc.pc(), 0xbb81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb7f), 0xcb);
        EXPECT(gbc.readMem(0xbb80), 0xd2);
        // CB D2 02DF
        gbc.setState(0xd0e3, 0x39db, 0xe070, 0x5def, 0xb785, 0xca21, 0x0, 0x0);
        gbc.writeMem(0xd0e3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x39db);
        EXPECT(gbc.pc(), 0xd0e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e3), 0xcb);
        EXPECT(gbc.readMem(0xd0e4), 0xd2);
        // CB D2 02E0
        gbc.setState(0x7875, 0xf07b, 0x12a0, 0x59c6, 0xd09b, 0xd1a4, 0x1, 0x1);
        gbc.writeMem(0x7875, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf07b);
        EXPECT(gbc.pc(), 0x7877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02E1
        gbc.setState(0xd1a7, 0xccda, 0xa1e0, 0xde83, 0xceef, 0xe47e, 0x1, 0x0);
        gbc.writeMem(0xd1a7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xccda);
        EXPECT(gbc.pc(), 0xd1a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a7), 0xcb);
        EXPECT(gbc.readMem(0xd1a8), 0xd2);
        // CB D2 02E2
        gbc.setState(0x2f2f, 0x42f9, 0x85f0, 0xc018, 0x988e, 0xdf75, 0x1, 0x1);
        gbc.writeMem(0x2f2f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x42f9);
        EXPECT(gbc.pc(), 0x2f31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02E3
        gbc.setState(0xc7e4, 0x1e87, 0x3940, 0x468a, 0x983, 0xf6d9, 0x0, 0x0);
        gbc.writeMem(0xc7e4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1e87);
        EXPECT(gbc.pc(), 0xc7e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e4), 0xcb);
        EXPECT(gbc.readMem(0xc7e5), 0xd2);
        // CB D2 02E4
        gbc.setState(0x4f79, 0xbf24, 0x5d70, 0x6718, 0x5ca5, 0xb045, 0x1, 0x0);
        gbc.writeMem(0x4f79, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbf24);
        EXPECT(gbc.pc(), 0x4f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02E5
        gbc.setState(0x78d8, 0xd386, 0x1590, 0xfb9a, 0x95e6, 0xa39d, 0x1, 0x1);
        gbc.writeMem(0x78d8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd386);
        EXPECT(gbc.pc(), 0x78da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02E6
        gbc.setState(0x7f82, 0xd0f8, 0xd550, 0x59e7, 0xf300, 0x4f3f, 0x0, 0x1);
        gbc.writeMem(0x7f82, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd0f8);
        EXPECT(gbc.pc(), 0x7f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02E7
        gbc.setState(0x2180, 0xa997, 0x4df0, 0xf933, 0x6ace, 0x223d, 0x0, 0x1);
        gbc.writeMem(0x2180, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa997);
        EXPECT(gbc.pc(), 0x2182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02E8
        gbc.setState(0x5cd, 0xc5cd, 0x7480, 0x9222, 0x545e, 0x2364, 0x1, 0x1);
        gbc.writeMem(0x5cd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc5cd);
        EXPECT(gbc.pc(), 0x5cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02E9
        gbc.setState(0x82bc, 0x3a91, 0x7830, 0x80c5, 0x1313, 0x2b81, 0x0, 0x1);
        gbc.writeMem(0x82bc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3a91);
        EXPECT(gbc.pc(), 0x82be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82bc), 0xcb);
        EXPECT(gbc.readMem(0x82bd), 0xd2);
        // CB D2 02EA
        gbc.setState(0xae95, 0x736a, 0x93a0, 0x8f8a, 0xdbeb, 0x42c, 0x1, 0x1);
        gbc.writeMem(0xae95, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x736a);
        EXPECT(gbc.pc(), 0xae97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae95), 0xcb);
        EXPECT(gbc.readMem(0xae96), 0xd2);
        // CB D2 02EB
        gbc.setState(0xed27, 0xd40, 0xa80, 0x4c58, 0xe119, 0x9786, 0x1, 0x1);
        gbc.writeMem(0xed27, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd40);
        EXPECT(gbc.pc(), 0xed29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed27), 0xcb);
        EXPECT(gbc.readMem(0xed28), 0xd2);
        // CB D2 02EC
        gbc.setState(0xbb68, 0xec0f, 0x32e0, 0xf22f, 0x5244, 0x61c, 0x0, 0x0);
        gbc.writeMem(0xbb68, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xec0f);
        EXPECT(gbc.pc(), 0xbb6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb68), 0xcb);
        EXPECT(gbc.readMem(0xbb69), 0xd2);
        // CB D2 02ED
        gbc.setState(0xcd75, 0xdd02, 0x5480, 0x3ca2, 0x3c54, 0x7e28, 0x0, 0x1);
        gbc.writeMem(0xcd75, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xdd02);
        EXPECT(gbc.pc(), 0xcd77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd75), 0xcb);
        EXPECT(gbc.readMem(0xcd76), 0xd2);
        // CB D2 02EE
        gbc.setState(0x26d4, 0x116d, 0x6f70, 0xa88f, 0xfb81, 0x4ef5, 0x1, 0x0);
        gbc.writeMem(0x26d4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x116d);
        EXPECT(gbc.pc(), 0x26d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02EF
        gbc.setState(0x8451, 0xf55d, 0xfa0, 0x9558, 0xaddc, 0x135b, 0x0, 0x1);
        gbc.writeMem(0x8451, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf55d);
        EXPECT(gbc.pc(), 0x8453);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8451), 0xcb);
        EXPECT(gbc.readMem(0x8452), 0xd2);
        // CB D2 02F0
        gbc.setState(0x4c14, 0xd760, 0x2410, 0xc6af, 0x7917, 0x134d, 0x1, 0x1);
        gbc.writeMem(0x4c14, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd760);
        EXPECT(gbc.pc(), 0x4c16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02F1
        gbc.setState(0x8b87, 0x1ee1, 0xc300, 0x9466, 0xce3a, 0x60a3, 0x0, 0x0);
        gbc.writeMem(0x8b87, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1ee1);
        EXPECT(gbc.pc(), 0x8b89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b87), 0xcb);
        EXPECT(gbc.readMem(0x8b88), 0xd2);
        // CB D2 02F2
        gbc.setState(0x3905, 0x19ae, 0x15a0, 0x1e68, 0x5343, 0xf25e, 0x0, 0x1);
        gbc.writeMem(0x3905, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x19ae);
        EXPECT(gbc.pc(), 0x3907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02F3
        gbc.setState(0xb25d, 0xef29, 0xc7e0, 0x6768, 0xf2f0, 0x211b, 0x0, 0x1);
        gbc.writeMem(0xb25d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xef29);
        EXPECT(gbc.pc(), 0xb25f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb25d), 0xcb);
        EXPECT(gbc.readMem(0xb25e), 0xd2);
        // CB D2 02F4
        gbc.setState(0x1234, 0x33a3, 0x5b60, 0xeb9c, 0x88a5, 0x8c80, 0x0, 0x0);
        gbc.writeMem(0x1234, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x33a3);
        EXPECT(gbc.pc(), 0x1236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02F5
        gbc.setState(0x7b0a, 0x82b8, 0xe850, 0x40ab, 0xc413, 0x3f0f, 0x0, 0x1);
        gbc.writeMem(0x7b0a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x82b8);
        EXPECT(gbc.pc(), 0x7b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02F6
        gbc.setState(0xe5a0, 0x26df, 0xeab0, 0xa2e, 0xe5a2, 0x4419, 0x1, 0x0);
        gbc.writeMem(0xe5a0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x26df);
        EXPECT(gbc.pc(), 0xe5a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5a0), 0xcb);
        EXPECT(gbc.readMem(0xe5a1), 0xd2);
        // CB D2 02F8
        gbc.setState(0x2728, 0x7f44, 0xa1d0, 0x7887, 0x8354, 0x2f8f, 0x0, 0x1);
        gbc.writeMem(0x2728, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7f44);
        EXPECT(gbc.pc(), 0x272a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02F9
        gbc.setState(0xc579, 0x446f, 0x8880, 0x652d, 0x2453, 0x1b0e, 0x1, 0x1);
        gbc.writeMem(0xc579, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x446f);
        EXPECT(gbc.pc(), 0xc57b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc579), 0xcb);
        EXPECT(gbc.readMem(0xc57a), 0xd2);
        // CB D2 02FA
        gbc.setState(0x278d, 0xb06c, 0x8860, 0xd549, 0x6a59, 0x76e0, 0x1, 0x1);
        gbc.writeMem(0x278d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb06c);
        EXPECT(gbc.pc(), 0x278f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02FC
        gbc.setState(0x93a, 0xa372, 0xd4e0, 0x7f84, 0x38c0, 0x727b, 0x1, 0x1);
        gbc.writeMem(0x93a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa372);
        EXPECT(gbc.pc(), 0x93c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 02FD
        gbc.setState(0x8831, 0x71f6, 0x780, 0xf3bb, 0xab1d, 0x22f, 0x0, 0x0);
        gbc.writeMem(0x8831, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x71f6);
        EXPECT(gbc.pc(), 0x8833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8831), 0xcb);
        EXPECT(gbc.readMem(0x8832), 0xd2);
        // CB D2 02FE
        gbc.setState(0x6bbe, 0xd63a, 0x3190, 0xa997, 0x86fc, 0x26f3, 0x1, 0x1);
        gbc.writeMem(0x6bbe, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xd63a);
        EXPECT(gbc.pc(), 0x6bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 02FF
        gbc.setState(0x3150, 0x4214, 0x4870, 0x7f22, 0x693b, 0xb810, 0x1, 0x1);
        gbc.writeMem(0x3150, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4214);
        EXPECT(gbc.pc(), 0x3152);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0300
        gbc.setState(0x11fc, 0xd5f2, 0x5120, 0x2355, 0xdd30, 0xa273, 0x1, 0x1);
        gbc.writeMem(0x11fc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd5f2);
        EXPECT(gbc.pc(), 0x11fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0301
        gbc.setState(0x2a5f, 0x4259, 0xf210, 0x206b, 0x8481, 0xa131, 0x0, 0x0);
        gbc.writeMem(0x2a5f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x4259);
        EXPECT(gbc.pc(), 0x2a61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0302
        gbc.setState(0x5165, 0xd7da, 0x6fb0, 0xc08a, 0xe1d6, 0xb3eb, 0x0, 0x1);
        gbc.writeMem(0x5165, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd7da);
        EXPECT(gbc.pc(), 0x5167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0303
        gbc.setState(0xefdc, 0x602a, 0xe5c0, 0x643f, 0x93c6, 0xdec1, 0x0, 0x0);
        gbc.writeMem(0xefdc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x602a);
        EXPECT(gbc.pc(), 0xefde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefdc), 0xcb);
        EXPECT(gbc.readMem(0xefdd), 0xd2);
        // CB D2 0304
        gbc.setState(0x8b67, 0x3db7, 0x6770, 0x6c24, 0xf01f, 0xfc5f, 0x1, 0x1);
        gbc.writeMem(0x8b67, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3db7);
        EXPECT(gbc.pc(), 0x8b69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b67), 0xcb);
        EXPECT(gbc.readMem(0x8b68), 0xd2);
        // CB D2 0305
        gbc.setState(0x1f27, 0xa3b2, 0xcc10, 0x8f9c, 0x3c1e, 0x9953, 0x1, 0x0);
        gbc.writeMem(0x1f27, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa3b2);
        EXPECT(gbc.pc(), 0x1f29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0306
        gbc.setState(0x38b0, 0xc23b, 0x60, 0x1fad, 0x887e, 0x6d61, 0x1, 0x1);
        gbc.writeMem(0x38b0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc23b);
        EXPECT(gbc.pc(), 0x38b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0307
        gbc.setState(0x6023, 0xc8e3, 0xd330, 0x55bc, 0x93ef, 0xae52, 0x1, 0x0);
        gbc.writeMem(0x6023, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc8e3);
        EXPECT(gbc.pc(), 0x6025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0308
        gbc.setState(0xbd03, 0x6807, 0x2400, 0x5a10, 0x2300, 0xd65e, 0x0, 0x0);
        gbc.writeMem(0xbd03, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6807);
        EXPECT(gbc.pc(), 0xbd05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd03), 0xcb);
        EXPECT(gbc.readMem(0xbd04), 0xd2);
        // CB D2 030A
        gbc.setState(0xc8ca, 0x48a0, 0x3ab0, 0x9ee, 0x1350, 0x50df, 0x0, 0x1);
        gbc.writeMem(0xc8ca, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x48a0);
        EXPECT(gbc.pc(), 0xc8cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8ca), 0xcb);
        EXPECT(gbc.readMem(0xc8cb), 0xd2);
        // CB D2 030B
        gbc.setState(0x8584, 0x2e2c, 0xab10, 0xb30b, 0x682, 0xa92c, 0x0, 0x0);
        gbc.writeMem(0x8584, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2e2c);
        EXPECT(gbc.pc(), 0x8586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8584), 0xcb);
        EXPECT(gbc.readMem(0x8585), 0xd2);
        // CB D2 030C
        gbc.setState(0x6c80, 0xedd2, 0x4280, 0xe423, 0x91e6, 0xb5c2, 0x1, 0x1);
        gbc.writeMem(0x6c80, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xedd2);
        EXPECT(gbc.pc(), 0x6c82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 030D
        gbc.setState(0x791f, 0xfa6c, 0x7c00, 0xc217, 0x4c39, 0x66be, 0x1, 0x0);
        gbc.writeMem(0x791f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfa6c);
        EXPECT(gbc.pc(), 0x7921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 030E
        gbc.setState(0xe5c1, 0x7bdc, 0x67b0, 0x6b69, 0xd3ca, 0x8ce3, 0x1, 0x1);
        gbc.writeMem(0xe5c1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7bdc);
        EXPECT(gbc.pc(), 0xe5c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c1), 0xcb);
        EXPECT(gbc.readMem(0xe5c2), 0xd2);
        // CB D2 030F
        gbc.setState(0x3a38, 0xeae, 0x23d0, 0x2e62, 0x1a0a, 0x6213, 0x1, 0x0);
        gbc.writeMem(0x3a38, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xeae);
        EXPECT(gbc.pc(), 0x3a3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0310
        gbc.setState(0x423f, 0xece1, 0xbe20, 0x678c, 0x4bd9, 0x6725, 0x0, 0x1);
        gbc.writeMem(0x423f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xece1);
        EXPECT(gbc.pc(), 0x4241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0311
        gbc.setState(0x87b, 0x3ebb, 0x2670, 0x3c26, 0x784e, 0x8733, 0x1, 0x1);
        gbc.writeMem(0x87b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3ebb);
        EXPECT(gbc.pc(), 0x87d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0312
        gbc.setState(0x7c4d, 0xa704, 0x9820, 0x77a6, 0x5aba, 0x9d77, 0x0, 0x0);
        gbc.writeMem(0x7c4d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa704);
        EXPECT(gbc.pc(), 0x7c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0313
        gbc.setState(0xd660, 0x26a8, 0x1dc0, 0x5839, 0x751, 0x4cd7, 0x1, 0x1);
        gbc.writeMem(0xd660, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x26a8);
        EXPECT(gbc.pc(), 0xd662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd660), 0xcb);
        EXPECT(gbc.readMem(0xd661), 0xd2);
        // CB D2 0314
        gbc.setState(0x2e54, 0x6a48, 0xfb50, 0x1864, 0xe568, 0xce4b, 0x1, 0x1);
        gbc.writeMem(0x2e54, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6a48);
        EXPECT(gbc.pc(), 0x2e56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0315
        gbc.setState(0x29eb, 0x5df3, 0xc650, 0xca12, 0x6b18, 0x5a29, 0x1, 0x0);
        gbc.writeMem(0x29eb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5df3);
        EXPECT(gbc.pc(), 0x29ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0316
        gbc.setState(0xaea9, 0x2791, 0x8da0, 0x90ef, 0xb0b6, 0xb4bd, 0x0, 0x0);
        gbc.writeMem(0xaea9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2791);
        EXPECT(gbc.pc(), 0xaeab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea9), 0xcb);
        EXPECT(gbc.readMem(0xaeaa), 0xd2);
        // CB D2 0317
        gbc.setState(0xdc42, 0xc763, 0x1670, 0x4645, 0x463b, 0x7f19, 0x1, 0x1);
        gbc.writeMem(0xdc42, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc763);
        EXPECT(gbc.pc(), 0xdc44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc42), 0xcb);
        EXPECT(gbc.readMem(0xdc43), 0xd2);
        // CB D2 0319
        gbc.setState(0xcabe, 0x34d6, 0x2f60, 0x1415, 0x9e04, 0x9c1e, 0x0, 0x0);
        gbc.writeMem(0xcabe, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x34d6);
        EXPECT(gbc.pc(), 0xcac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcabe), 0xcb);
        EXPECT(gbc.readMem(0xcabf), 0xd2);
        // CB D2 031A
        gbc.setState(0xb434, 0x3093, 0x22a0, 0x85a3, 0xed2c, 0xbb47, 0x0, 0x1);
        gbc.writeMem(0xb434, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3093);
        EXPECT(gbc.pc(), 0xb436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb434), 0xcb);
        EXPECT(gbc.readMem(0xb435), 0xd2);
        // CB D2 031B
        gbc.setState(0x5160, 0xc391, 0x4130, 0x6963, 0x5b14, 0x556d, 0x0, 0x1);
        gbc.writeMem(0x5160, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc391);
        EXPECT(gbc.pc(), 0x5162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 031C
        gbc.setState(0xbfe0, 0xbdb4, 0xcc10, 0x531, 0xefa8, 0x30db, 0x1, 0x1);
        gbc.writeMem(0xbfe0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbdb4);
        EXPECT(gbc.pc(), 0xbfe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfe0), 0xcb);
        EXPECT(gbc.readMem(0xbfe1), 0xd2);
        // CB D2 031D
        gbc.setState(0x4ae2, 0x1185, 0xd630, 0x224, 0x9802, 0xb7c4, 0x0, 0x1);
        gbc.writeMem(0x4ae2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1185);
        EXPECT(gbc.pc(), 0x4ae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 031E
        gbc.setState(0x67cc, 0x6b36, 0xdb90, 0xc7d7, 0x1ba7, 0x4a78, 0x1, 0x1);
        gbc.writeMem(0x67cc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6b36);
        EXPECT(gbc.pc(), 0x67ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 031F
        gbc.setState(0x5623, 0x57f, 0xb2a0, 0x9024, 0xc3c9, 0xc655, 0x0, 0x0);
        gbc.writeMem(0x5623, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x57f);
        EXPECT(gbc.pc(), 0x5625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0320
        gbc.setState(0xbbfe, 0x2a24, 0x40d0, 0x1565, 0xdda1, 0xfb28, 0x1, 0x1);
        gbc.writeMem(0xbbfe, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2a24);
        EXPECT(gbc.pc(), 0xbc00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbfe), 0xcb);
        EXPECT(gbc.readMem(0xbbff), 0xd2);
        // CB D2 0321
        gbc.setState(0xa93d, 0xea98, 0xac30, 0xae0b, 0x5abf, 0xc50f, 0x0, 0x1);
        gbc.writeMem(0xa93d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xea98);
        EXPECT(gbc.pc(), 0xa93f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa93d), 0xcb);
        EXPECT(gbc.readMem(0xa93e), 0xd2);
        // CB D2 0322
        gbc.setState(0x8d91, 0x7a98, 0x3920, 0xd77b, 0xd6b6, 0x44cc, 0x0, 0x0);
        gbc.writeMem(0x8d91, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7a98);
        EXPECT(gbc.pc(), 0x8d93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d91), 0xcb);
        EXPECT(gbc.readMem(0x8d92), 0xd2);
        // CB D2 0323
        gbc.setState(0x9d36, 0xc56f, 0xf50, 0x82af, 0xa4ff, 0x5fc1, 0x0, 0x0);
        gbc.writeMem(0x9d36, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc56f);
        EXPECT(gbc.pc(), 0x9d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d36), 0xcb);
        EXPECT(gbc.readMem(0x9d37), 0xd2);
        // CB D2 0324
        gbc.setState(0xdd87, 0x8b95, 0xdd70, 0xa94c, 0x4aff, 0xeb7e, 0x1, 0x1);
        gbc.writeMem(0xdd87, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8b95);
        EXPECT(gbc.pc(), 0xdd89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd87), 0xcb);
        EXPECT(gbc.readMem(0xdd88), 0xd2);
        // CB D2 0325
        gbc.setState(0xe07d, 0x725c, 0xd80, 0xe9d3, 0x240b, 0xed88, 0x0, 0x1);
        gbc.writeMem(0xe07d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x725c);
        EXPECT(gbc.pc(), 0xe07f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07d), 0xcb);
        EXPECT(gbc.readMem(0xe07e), 0xd2);
        // CB D2 0326
        gbc.setState(0xd03c, 0x3f60, 0xafd0, 0x18c0, 0x7904, 0xa51d, 0x1, 0x0);
        gbc.writeMem(0xd03c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3f60);
        EXPECT(gbc.pc(), 0xd03e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd03c), 0xcb);
        EXPECT(gbc.readMem(0xd03d), 0xd2);
        // CB D2 0327
        gbc.setState(0x8e45, 0xd677, 0xfa20, 0x23fc, 0x7f76, 0x2b23, 0x0, 0x1);
        gbc.writeMem(0x8e45, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd677);
        EXPECT(gbc.pc(), 0x8e47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e45), 0xcb);
        EXPECT(gbc.readMem(0x8e46), 0xd2);
        // CB D2 0328
        gbc.setState(0x26a7, 0x436, 0x33a0, 0x51be, 0x4353, 0x517d, 0x1, 0x0);
        gbc.writeMem(0x26a7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x436);
        EXPECT(gbc.pc(), 0x26a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0329
        gbc.setState(0xeb4e, 0x9b17, 0x3d40, 0xa4aa, 0x1d21, 0xd604, 0x0, 0x0);
        gbc.writeMem(0xeb4e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9b17);
        EXPECT(gbc.pc(), 0xeb50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb4e), 0xcb);
        EXPECT(gbc.readMem(0xeb4f), 0xd2);
        // CB D2 032A
        gbc.setState(0x73bf, 0x94fe, 0x19f0, 0xf9f7, 0xa350, 0x4a10, 0x0, 0x1);
        gbc.writeMem(0x73bf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x94fe);
        EXPECT(gbc.pc(), 0x73c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 032B
        gbc.setState(0x4d0, 0xda2f, 0x9970, 0xa31b, 0xaff9, 0x7698, 0x1, 0x1);
        gbc.writeMem(0x4d0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xda2f);
        EXPECT(gbc.pc(), 0x4d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 032C
        gbc.setState(0xb26c, 0x156a, 0xe930, 0x9121, 0xaad5, 0x18fe, 0x1, 0x0);
        gbc.writeMem(0xb26c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x156a);
        EXPECT(gbc.pc(), 0xb26e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb26c), 0xcb);
        EXPECT(gbc.readMem(0xb26d), 0xd2);
        // CB D2 032D
        gbc.setState(0xb59a, 0xb9ae, 0x98a0, 0xb943, 0x4527, 0x3072, 0x0, 0x1);
        gbc.writeMem(0xb59a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb9ae);
        EXPECT(gbc.pc(), 0xb59c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59a), 0xcb);
        EXPECT(gbc.readMem(0xb59b), 0xd2);
        // CB D2 032E
        gbc.setState(0x6dfe, 0x8efe, 0x5ee0, 0xfafc, 0x8d65, 0xcbb5, 0x1, 0x1);
        gbc.writeMem(0x6dfe, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8efe);
        EXPECT(gbc.pc(), 0x6e00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 032F
        gbc.setState(0xff, 0x4731, 0x3270, 0xe92a, 0x336b, 0xda74, 0x1, 0x0);
        gbc.writeMem(0xff, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4731);
        EXPECT(gbc.pc(), 0x101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0330
        gbc.setState(0xe284, 0x1a56, 0x6790, 0xae60, 0xb5e8, 0x81bf, 0x1, 0x1);
        gbc.writeMem(0xe284, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1a56);
        EXPECT(gbc.pc(), 0xe286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe284), 0xcb);
        EXPECT(gbc.readMem(0xe285), 0xd2);
        // CB D2 0331
        gbc.setState(0x1553, 0x82b5, 0xe4c0, 0x55c2, 0xe3f5, 0xf4db, 0x0, 0x0);
        gbc.writeMem(0x1553, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x82b5);
        EXPECT(gbc.pc(), 0x1555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0332
        gbc.setState(0x6158, 0x1212, 0x8850, 0x5535, 0xa86d, 0xc193, 0x0, 0x0);
        gbc.writeMem(0x6158, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1212);
        EXPECT(gbc.pc(), 0x615a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0333
        gbc.setState(0x97b8, 0x8629, 0x1e70, 0x7b3a, 0x162e, 0xc131, 0x1, 0x0);
        gbc.writeMem(0x97b8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8629);
        EXPECT(gbc.pc(), 0x97ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b8), 0xcb);
        EXPECT(gbc.readMem(0x97b9), 0xd2);
        // CB D2 0334
        gbc.setState(0x3cb1, 0x4a88, 0xe090, 0x5455, 0x682a, 0x7541, 0x1, 0x1);
        gbc.writeMem(0x3cb1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4a88);
        EXPECT(gbc.pc(), 0x3cb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0335
        gbc.setState(0x8ad9, 0xdb0d, 0xc7a0, 0x270, 0x1cc2, 0x7609, 0x1, 0x0);
        gbc.writeMem(0x8ad9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xdb0d);
        EXPECT(gbc.pc(), 0x8adb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ad9), 0xcb);
        EXPECT(gbc.readMem(0x8ada), 0xd2);
        // CB D2 0336
        gbc.setState(0x4376, 0x744, 0xe7a0, 0x507, 0xc475, 0xcdfb, 0x1, 0x0);
        gbc.writeMem(0x4376, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x744);
        EXPECT(gbc.pc(), 0x4378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0337
        gbc.setState(0x432f, 0x3c45, 0xa4c0, 0x9695, 0xd0a0, 0xe503, 0x1, 0x0);
        gbc.writeMem(0x432f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3c45);
        EXPECT(gbc.pc(), 0x4331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0338
        gbc.setState(0xbe94, 0x63c4, 0xc800, 0x95bd, 0x49a0, 0xc10d, 0x1, 0x1);
        gbc.writeMem(0xbe94, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x63c4);
        EXPECT(gbc.pc(), 0xbe96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe94), 0xcb);
        EXPECT(gbc.readMem(0xbe95), 0xd2);
        // CB D2 0339
        gbc.setState(0xcfa9, 0xbf5d, 0x3d50, 0x882, 0x6192, 0x9ba2, 0x0, 0x0);
        gbc.writeMem(0xcfa9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbf5d);
        EXPECT(gbc.pc(), 0xcfab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa9), 0xcb);
        EXPECT(gbc.readMem(0xcfaa), 0xd2);
        // CB D2 033A
        gbc.setState(0x62ea, 0xe8a5, 0xdf10, 0xa935, 0x489d, 0xf688, 0x0, 0x1);
        gbc.writeMem(0x62ea, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe8a5);
        EXPECT(gbc.pc(), 0x62ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 033B
        gbc.setState(0xe6cc, 0x84c1, 0x4530, 0x62dc, 0x1232, 0x5a2f, 0x1, 0x1);
        gbc.writeMem(0xe6cc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x84c1);
        EXPECT(gbc.pc(), 0xe6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6cc), 0xcb);
        EXPECT(gbc.readMem(0xe6cd), 0xd2);
        // CB D2 033E
        gbc.setState(0x6c57, 0x1af, 0x43e0, 0x4b9, 0x8475, 0xf200, 0x0, 0x0);
        gbc.writeMem(0x6c57, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1af);
        EXPECT(gbc.pc(), 0x6c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 033F
        gbc.setState(0xe82b, 0x53fb, 0x6a60, 0xd62d, 0xa066, 0x22b, 0x1, 0x1);
        gbc.writeMem(0xe82b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x53fb);
        EXPECT(gbc.pc(), 0xe82d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82b), 0xcb);
        EXPECT(gbc.readMem(0xe82c), 0xd2);
        // CB D2 0340
        gbc.setState(0xe650, 0x7d99, 0x1610, 0x7f5, 0xb36a, 0x319d, 0x0, 0x1);
        gbc.writeMem(0xe650, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7d99);
        EXPECT(gbc.pc(), 0xe652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe650), 0xcb);
        EXPECT(gbc.readMem(0xe651), 0xd2);
        // CB D2 0341
        gbc.setState(0xc2a7, 0x11d6, 0x1720, 0x8fd6, 0xddf, 0xffbb, 0x0, 0x0);
        gbc.writeMem(0xc2a7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x11d6);
        EXPECT(gbc.pc(), 0xc2a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2a7), 0xcb);
        EXPECT(gbc.readMem(0xc2a8), 0xd2);
        // CB D2 0342
        gbc.setState(0xaf5f, 0xc49a, 0x4f0, 0x98f6, 0x58d2, 0xabb, 0x0, 0x1);
        gbc.writeMem(0xaf5f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc49a);
        EXPECT(gbc.pc(), 0xaf61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf5f), 0xcb);
        EXPECT(gbc.readMem(0xaf60), 0xd2);
        // CB D2 0343
        gbc.setState(0x5f65, 0xca52, 0xcc40, 0x2240, 0xb8b6, 0xacf5, 0x0, 0x1);
        gbc.writeMem(0x5f65, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xca52);
        EXPECT(gbc.pc(), 0x5f67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0344
        gbc.setState(0xd820, 0x37a3, 0xca30, 0xb9fd, 0x4f47, 0xf41d, 0x1, 0x0);
        gbc.writeMem(0xd820, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x37a3);
        EXPECT(gbc.pc(), 0xd822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd820), 0xcb);
        EXPECT(gbc.readMem(0xd821), 0xd2);
        // CB D2 0345
        gbc.setState(0xdda3, 0xa8cc, 0x58d0, 0x2ee7, 0x8e70, 0xea57, 0x0, 0x1);
        gbc.writeMem(0xdda3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa8cc);
        EXPECT(gbc.pc(), 0xdda5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdda3), 0xcb);
        EXPECT(gbc.readMem(0xdda4), 0xd2);
        // CB D2 0346
        gbc.setState(0x41dc, 0xfb9e, 0x5c00, 0xd356, 0xdc79, 0x3548, 0x0, 0x1);
        gbc.writeMem(0x41dc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfb9e);
        EXPECT(gbc.pc(), 0x41de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0347
        gbc.setState(0xd056, 0xe736, 0x3640, 0x376d, 0x8c7c, 0xc1c6, 0x0, 0x1);
        gbc.writeMem(0xd056, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe736);
        EXPECT(gbc.pc(), 0xd058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd056), 0xcb);
        EXPECT(gbc.readMem(0xd057), 0xd2);
        // CB D2 0348
        gbc.setState(0x95af, 0xa112, 0x4f70, 0x3cd9, 0x6a34, 0x5632, 0x0, 0x1);
        gbc.writeMem(0x95af, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa112);
        EXPECT(gbc.pc(), 0x95b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95af), 0xcb);
        EXPECT(gbc.readMem(0x95b0), 0xd2);
        // CB D2 0349
        gbc.setState(0x913e, 0x3e93, 0x6400, 0x4293, 0xbad2, 0x17ed, 0x0, 0x0);
        gbc.writeMem(0x913e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3e93);
        EXPECT(gbc.pc(), 0x9140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x913e), 0xcb);
        EXPECT(gbc.readMem(0x913f), 0xd2);
        // CB D2 034A
        gbc.setState(0x1fd1, 0xf0c, 0x9d30, 0x57d5, 0x13e4, 0x5651, 0x0, 0x0);
        gbc.writeMem(0x1fd1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf0c);
        EXPECT(gbc.pc(), 0x1fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 034B
        gbc.setState(0xe5a3, 0xae5a, 0x6d30, 0x5499, 0x3483, 0xa311, 0x0, 0x0);
        gbc.writeMem(0xe5a3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xae5a);
        EXPECT(gbc.pc(), 0xe5a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5a3), 0xcb);
        EXPECT(gbc.readMem(0xe5a4), 0xd2);
        // CB D2 034C
        gbc.setState(0x17cf, 0x2a4b, 0x1ff0, 0x5927, 0xf01c, 0x4c9, 0x1, 0x1);
        gbc.writeMem(0x17cf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2a4b);
        EXPECT(gbc.pc(), 0x17d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 034D
        gbc.setState(0x2205, 0x8368, 0x8d20, 0xe271, 0x5c03, 0x4a13, 0x1, 0x1);
        gbc.writeMem(0x2205, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8368);
        EXPECT(gbc.pc(), 0x2207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 034E
        gbc.setState(0xb81d, 0xa8e9, 0x6330, 0x964a, 0x35ea, 0xa1f8, 0x0, 0x0);
        gbc.writeMem(0xb81d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa8e9);
        EXPECT(gbc.pc(), 0xb81f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb81d), 0xcb);
        EXPECT(gbc.readMem(0xb81e), 0xd2);
        // CB D2 034F
        gbc.setState(0x54fb, 0x17c4, 0xed40, 0x1b0, 0x4d9c, 0x400b, 0x1, 0x1);
        gbc.writeMem(0x54fb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x17c4);
        EXPECT(gbc.pc(), 0x54fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0350
        gbc.setState(0xb034, 0xb84e, 0x14b0, 0x1dec, 0x46f3, 0xaa54, 0x1, 0x0);
        gbc.writeMem(0xb034, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb84e);
        EXPECT(gbc.pc(), 0xb036);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb034), 0xcb);
        EXPECT(gbc.readMem(0xb035), 0xd2);
        // CB D2 0351
        gbc.setState(0x6124, 0x9c7c, 0xcba0, 0x3fcd, 0x7fbd, 0x681, 0x1, 0x0);
        gbc.writeMem(0x6124, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9c7c);
        EXPECT(gbc.pc(), 0x6126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0352
        gbc.setState(0x60e9, 0x8f6f, 0xe450, 0x4a7a, 0x94ae, 0xae5e, 0x1, 0x1);
        gbc.writeMem(0x60e9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8f6f);
        EXPECT(gbc.pc(), 0x60eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0353
        gbc.setState(0xaa08, 0x6234, 0x3660, 0x3a0f, 0x9428, 0x57ee, 0x0, 0x0);
        gbc.writeMem(0xaa08, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6234);
        EXPECT(gbc.pc(), 0xaa0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa08), 0xcb);
        EXPECT(gbc.readMem(0xaa09), 0xd2);
        // CB D2 0354
        gbc.setState(0x9ca4, 0x7ce4, 0x5670, 0xc06d, 0xd199, 0x508d, 0x0, 0x1);
        gbc.writeMem(0x9ca4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7ce4);
        EXPECT(gbc.pc(), 0x9ca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca4), 0xcb);
        EXPECT(gbc.readMem(0x9ca5), 0xd2);
        // CB D2 0355
        gbc.setState(0x176c, 0x80cb, 0x8a30, 0x164f, 0x645f, 0x4ecd, 0x1, 0x1);
        gbc.writeMem(0x176c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x80cb);
        EXPECT(gbc.pc(), 0x176e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0356
        gbc.setState(0x8efb, 0xe277, 0x86c0, 0xa378, 0xb0db, 0x996c, 0x0, 0x0);
        gbc.writeMem(0x8efb, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe277);
        EXPECT(gbc.pc(), 0x8efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8efb), 0xcb);
        EXPECT(gbc.readMem(0x8efc), 0xd2);
        // CB D2 0357
        gbc.setState(0x8568, 0xa318, 0xbd30, 0x8db9, 0x8ebb, 0x2d98, 0x1, 0x0);
        gbc.writeMem(0x8568, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa318);
        EXPECT(gbc.pc(), 0x856a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8568), 0xcb);
        EXPECT(gbc.readMem(0x8569), 0xd2);
        // CB D2 0358
        gbc.setState(0x6962, 0x8df3, 0x8030, 0x886, 0x30b0, 0x4454, 0x0, 0x1);
        gbc.writeMem(0x6962, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8df3);
        EXPECT(gbc.pc(), 0x6964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 035A
        gbc.setState(0x2121, 0x8851, 0xdae0, 0x277a, 0xa43b, 0xf5e8, 0x1, 0x0);
        gbc.writeMem(0x2121, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8851);
        EXPECT(gbc.pc(), 0x2123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 035B
        gbc.setState(0x96d8, 0x5a2c, 0x5610, 0x5189, 0xa4dc, 0x7e2f, 0x1, 0x0);
        gbc.writeMem(0x96d8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5a2c);
        EXPECT(gbc.pc(), 0x96da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96d8), 0xcb);
        EXPECT(gbc.readMem(0x96d9), 0xd2);
        // CB D2 035C
        gbc.setState(0xea1c, 0xebc7, 0x8bf0, 0xa3d0, 0xb42b, 0x832f, 0x0, 0x1);
        gbc.writeMem(0xea1c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xebc7);
        EXPECT(gbc.pc(), 0xea1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea1c), 0xcb);
        EXPECT(gbc.readMem(0xea1d), 0xd2);
        // CB D2 035D
        gbc.setState(0x7ea3, 0x3fc, 0xe570, 0xc9d5, 0x7042, 0x8493, 0x0, 0x1);
        gbc.writeMem(0x7ea3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3fc);
        EXPECT(gbc.pc(), 0x7ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 035E
        gbc.setState(0x558a, 0x6289, 0xbee0, 0x874e, 0x8c12, 0x817a, 0x1, 0x1);
        gbc.writeMem(0x558a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6289);
        EXPECT(gbc.pc(), 0x558c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 035F
        gbc.setState(0xe0a9, 0x6f43, 0xb30, 0xe637, 0xaee5, 0x7f7e, 0x1, 0x1);
        gbc.writeMem(0xe0a9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6f43);
        EXPECT(gbc.pc(), 0xe0ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a9), 0xcb);
        EXPECT(gbc.readMem(0xe0aa), 0xd2);
        // CB D2 0360
        gbc.setState(0xd474, 0x9bf9, 0x6c00, 0x7e1a, 0x51e5, 0xef12, 0x0, 0x0);
        gbc.writeMem(0xd474, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9bf9);
        EXPECT(gbc.pc(), 0xd476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd474), 0xcb);
        EXPECT(gbc.readMem(0xd475), 0xd2);
        // CB D2 0361
        gbc.setState(0xb1c3, 0x12a6, 0x46a0, 0x2797, 0x9f71, 0xecea, 0x0, 0x0);
        gbc.writeMem(0xb1c3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x12a6);
        EXPECT(gbc.pc(), 0xb1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c3), 0xcb);
        EXPECT(gbc.readMem(0xb1c4), 0xd2);
        // CB D2 0362
        gbc.setState(0x36db, 0x7ff0, 0x6400, 0xd44f, 0x74e8, 0x2625, 0x0, 0x0);
        gbc.writeMem(0x36db, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7ff0);
        EXPECT(gbc.pc(), 0x36dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0363
        gbc.setState(0x62a2, 0x394d, 0xad60, 0x426c, 0xb504, 0xb922, 0x1, 0x0);
        gbc.writeMem(0x62a2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x394d);
        EXPECT(gbc.pc(), 0x62a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0364
        gbc.setState(0x55a7, 0x76c6, 0xc760, 0x5b73, 0xe31c, 0x6d31, 0x1, 0x1);
        gbc.writeMem(0x55a7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x76c6);
        EXPECT(gbc.pc(), 0x55a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0365
        gbc.setState(0xa0cc, 0x5476, 0xfa80, 0x5a4a, 0x901, 0xf0de, 0x1, 0x1);
        gbc.writeMem(0xa0cc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5476);
        EXPECT(gbc.pc(), 0xa0ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0cc), 0xcb);
        EXPECT(gbc.readMem(0xa0cd), 0xd2);
        // CB D2 0366
        gbc.setState(0x709c, 0x28a8, 0xf050, 0x6a34, 0xa9aa, 0xa081, 0x1, 0x0);
        gbc.writeMem(0x709c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x28a8);
        EXPECT(gbc.pc(), 0x709e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0367
        gbc.setState(0x830f, 0x43b, 0x56b0, 0x20c1, 0xcaac, 0xd305, 0x0, 0x0);
        gbc.writeMem(0x830f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x43b);
        EXPECT(gbc.pc(), 0x8311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x830f), 0xcb);
        EXPECT(gbc.readMem(0x8310), 0xd2);
        // CB D2 0369
        gbc.setState(0x70b, 0xf09f, 0x4d60, 0x15c9, 0x7a49, 0xb0a4, 0x1, 0x0);
        gbc.writeMem(0x70b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf09f);
        EXPECT(gbc.pc(), 0x70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 036A
        gbc.setState(0xb74c, 0x761a, 0x8160, 0x989a, 0x120c, 0xa967, 0x0, 0x0);
        gbc.writeMem(0xb74c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x761a);
        EXPECT(gbc.pc(), 0xb74e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb74c), 0xcb);
        EXPECT(gbc.readMem(0xb74d), 0xd2);
        // CB D2 036B
        gbc.setState(0x1853, 0x736c, 0x4230, 0xb328, 0x90d9, 0xe8af, 0x1, 0x0);
        gbc.writeMem(0x1853, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x736c);
        EXPECT(gbc.pc(), 0x1855);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 036C
        gbc.setState(0xd6dc, 0xed23, 0xadd0, 0xf306, 0x4718, 0x67ba, 0x1, 0x0);
        gbc.writeMem(0xd6dc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xed23);
        EXPECT(gbc.pc(), 0xd6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6dc), 0xcb);
        EXPECT(gbc.readMem(0xd6dd), 0xd2);
        // CB D2 036D
        gbc.setState(0x569f, 0x1750, 0x4be0, 0x7c93, 0xe573, 0xc39e, 0x0, 0x0);
        gbc.writeMem(0x569f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1750);
        EXPECT(gbc.pc(), 0x56a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 036E
        gbc.setState(0xcbc3, 0xf8c1, 0xdf0, 0x943e, 0x425a, 0xb094, 0x0, 0x0);
        gbc.writeMem(0xcbc3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf8c1);
        EXPECT(gbc.pc(), 0xcbc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc3), 0xcb);
        EXPECT(gbc.readMem(0xcbc4), 0xd2);
        // CB D2 036F
        gbc.setState(0x2516, 0xc3d6, 0x5de0, 0x1efb, 0xf389, 0xce4b, 0x0, 0x0);
        gbc.writeMem(0x2516, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc3d6);
        EXPECT(gbc.pc(), 0x2518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0370
        gbc.setState(0xb634, 0xb0e7, 0x1e0, 0x6542, 0xdd8e, 0xef79, 0x1, 0x0);
        gbc.writeMem(0xb634, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb0e7);
        EXPECT(gbc.pc(), 0xb636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb634), 0xcb);
        EXPECT(gbc.readMem(0xb635), 0xd2);
        // CB D2 0371
        gbc.setState(0x3023, 0x468d, 0x1770, 0x9140, 0x4afc, 0x7a8d, 0x0, 0x1);
        gbc.writeMem(0x3023, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x468d);
        EXPECT(gbc.pc(), 0x3025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0372
        gbc.setState(0x2fac, 0x2050, 0x5340, 0xc4a0, 0x95b4, 0xd7a8, 0x0, 0x1);
        gbc.writeMem(0x2fac, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2050);
        EXPECT(gbc.pc(), 0x2fae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0373
        gbc.setState(0x8b24, 0x3582, 0x9ff0, 0x6781, 0xdb4e, 0xcbaa, 0x0, 0x1);
        gbc.writeMem(0x8b24, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3582);
        EXPECT(gbc.pc(), 0x8b26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b24), 0xcb);
        EXPECT(gbc.readMem(0x8b25), 0xd2);
        // CB D2 0374
        gbc.setState(0xd5f4, 0x6061, 0xfd10, 0xe6bd, 0xfbe6, 0x1c5b, 0x1, 0x0);
        gbc.writeMem(0xd5f4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6061);
        EXPECT(gbc.pc(), 0xd5f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5f4), 0xcb);
        EXPECT(gbc.readMem(0xd5f5), 0xd2);
        // CB D2 0375
        gbc.setState(0x301, 0x99d4, 0xc320, 0x1f24, 0xfe75, 0x9e23, 0x0, 0x1);
        gbc.writeMem(0x301, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x99d4);
        EXPECT(gbc.pc(), 0x303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0376
        gbc.setState(0x783b, 0xca6, 0x76b0, 0x163c, 0x1992, 0x3c03, 0x0, 0x1);
        gbc.writeMem(0x783b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xca6);
        EXPECT(gbc.pc(), 0x783d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0377
        gbc.setState(0x843e, 0x89f0, 0xee00, 0xf7b1, 0x9dc3, 0xaf31, 0x0, 0x1);
        gbc.writeMem(0x843e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x89f0);
        EXPECT(gbc.pc(), 0x8440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x843e), 0xcb);
        EXPECT(gbc.readMem(0x843f), 0xd2);
        // CB D2 0378
        gbc.setState(0x9d85, 0x9dfb, 0xe470, 0x4dc2, 0x2d96, 0x2108, 0x0, 0x0);
        gbc.writeMem(0x9d85, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9dfb);
        EXPECT(gbc.pc(), 0x9d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d85), 0xcb);
        EXPECT(gbc.readMem(0x9d86), 0xd2);
        // CB D2 0379
        gbc.setState(0x8cd1, 0x6144, 0x9690, 0xa167, 0x74ad, 0xc791, 0x1, 0x1);
        gbc.writeMem(0x8cd1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6144);
        EXPECT(gbc.pc(), 0x8cd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd1), 0xcb);
        EXPECT(gbc.readMem(0x8cd2), 0xd2);
        // CB D2 037A
        gbc.setState(0x542d, 0x8c5d, 0xfe90, 0x78ea, 0x37, 0xc110, 0x1, 0x1);
        gbc.writeMem(0x542d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8c5d);
        EXPECT(gbc.pc(), 0x542f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 037B
        gbc.setState(0x69b2, 0x90b5, 0xaf20, 0xb991, 0x26e7, 0x1eef, 0x1, 0x0);
        gbc.writeMem(0x69b2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x90b5);
        EXPECT(gbc.pc(), 0x69b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 037C
        gbc.setState(0x18e4, 0xb5b7, 0xc860, 0x9aab, 0x4174, 0x9d86, 0x0, 0x1);
        gbc.writeMem(0x18e4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb5b7);
        EXPECT(gbc.pc(), 0x18e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 037D
        gbc.setState(0x8860, 0x173c, 0x6a50, 0xe6d1, 0x9010, 0xf5bd, 0x1, 0x1);
        gbc.writeMem(0x8860, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x173c);
        EXPECT(gbc.pc(), 0x8862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8860), 0xcb);
        EXPECT(gbc.readMem(0x8861), 0xd2);
        // CB D2 037E
        gbc.setState(0x9619, 0x2e17, 0x5350, 0xbddd, 0xe648, 0xac79, 0x1, 0x0);
        gbc.writeMem(0x9619, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2e17);
        EXPECT(gbc.pc(), 0x961b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9619), 0xcb);
        EXPECT(gbc.readMem(0x961a), 0xd2);
        // CB D2 037F
        gbc.setState(0x6733, 0x91dc, 0x51d0, 0xa1c2, 0x1e9, 0x1090, 0x0, 0x1);
        gbc.writeMem(0x6733, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x91dc);
        EXPECT(gbc.pc(), 0x6735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0380
        gbc.setState(0x367e, 0x8b28, 0xab10, 0xa859, 0x1c7a, 0xad11, 0x1, 0x0);
        gbc.writeMem(0x367e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8b28);
        EXPECT(gbc.pc(), 0x3680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0381
        gbc.setState(0x7210, 0x9c57, 0xb940, 0x28fb, 0xb05, 0x12bc, 0x0, 0x0);
        gbc.writeMem(0x7210, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9c57);
        EXPECT(gbc.pc(), 0x7212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0382
        gbc.setState(0x41f2, 0xd4eb, 0xc690, 0x37ae, 0x5230, 0xc660, 0x1, 0x0);
        gbc.writeMem(0x41f2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd4eb);
        EXPECT(gbc.pc(), 0x41f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0383
        gbc.setState(0x22f4, 0x8bc3, 0x2e70, 0xad09, 0x7a1, 0xcb4, 0x1, 0x0);
        gbc.writeMem(0x22f4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8bc3);
        EXPECT(gbc.pc(), 0x22f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0384
        gbc.setState(0x5b3, 0xeb66, 0xca00, 0xef72, 0x34ab, 0x11f7, 0x0, 0x1);
        gbc.writeMem(0x5b3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xeb66);
        EXPECT(gbc.pc(), 0x5b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0385
        gbc.setState(0xaefd, 0x6923, 0xc400, 0xa809, 0x10b1, 0x358a, 0x1, 0x1);
        gbc.writeMem(0xaefd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6923);
        EXPECT(gbc.pc(), 0xaeff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaefd), 0xcb);
        EXPECT(gbc.readMem(0xaefe), 0xd2);
        // CB D2 0386
        gbc.setState(0xe27d, 0xa85d, 0xfbd0, 0xbad6, 0xa318, 0x8ae, 0x0, 0x1);
        gbc.writeMem(0xe27d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa85d);
        EXPECT(gbc.pc(), 0xe27f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe27d), 0xcb);
        EXPECT(gbc.readMem(0xe27e), 0xd2);
        // CB D2 0387
        gbc.setState(0x5407, 0xce3a, 0xd0, 0xd903, 0xff7, 0x10e, 0x1, 0x1);
        gbc.writeMem(0x5407, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xce3a);
        EXPECT(gbc.pc(), 0x5409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0388
        gbc.setState(0x9a5b, 0xed22, 0xa370, 0xd8e2, 0xef4a, 0xdf69, 0x0, 0x0);
        gbc.writeMem(0x9a5b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xed22);
        EXPECT(gbc.pc(), 0x9a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a5b), 0xcb);
        EXPECT(gbc.readMem(0x9a5c), 0xd2);
        // CB D2 0389
        gbc.setState(0x105f, 0x7100, 0xbbd0, 0xf28d, 0x7abd, 0x3eb7, 0x1, 0x1);
        gbc.writeMem(0x105f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7100);
        EXPECT(gbc.pc(), 0x1061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 038A
        gbc.setState(0x966e, 0xa164, 0x1850, 0x3908, 0x31aa, 0x74c1, 0x0, 0x1);
        gbc.writeMem(0x966e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa164);
        EXPECT(gbc.pc(), 0x9670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x966e), 0xcb);
        EXPECT(gbc.readMem(0x966f), 0xd2);
        // CB D2 038B
        gbc.setState(0xcc07, 0xf243, 0x87b0, 0x6b3, 0x3a7b, 0x2320, 0x1, 0x1);
        gbc.writeMem(0xcc07, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf243);
        EXPECT(gbc.pc(), 0xcc09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc07), 0xcb);
        EXPECT(gbc.readMem(0xcc08), 0xd2);
        // CB D2 038C
        gbc.setState(0x11df, 0x9b37, 0x4720, 0x5b4e, 0x83ad, 0x15d7, 0x0, 0x1);
        gbc.writeMem(0x11df, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9b37);
        EXPECT(gbc.pc(), 0x11e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 038D
        gbc.setState(0x8865, 0xcfc6, 0xed0, 0x3bd2, 0xfe3e, 0xd0dd, 0x1, 0x0);
        gbc.writeMem(0x8865, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xcfc6);
        EXPECT(gbc.pc(), 0x8867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8865), 0xcb);
        EXPECT(gbc.readMem(0x8866), 0xd2);
        // CB D2 038E
        gbc.setState(0xbb35, 0x38df, 0x5f00, 0xcc60, 0x431d, 0x680c, 0x1, 0x0);
        gbc.writeMem(0xbb35, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x38df);
        EXPECT(gbc.pc(), 0xbb37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb35), 0xcb);
        EXPECT(gbc.readMem(0xbb36), 0xd2);
        // CB D2 038F
        gbc.setState(0xd386, 0xfa3, 0xfc00, 0xedb3, 0xaf0f, 0x7db5, 0x0, 0x0);
        gbc.writeMem(0xd386, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xfa3);
        EXPECT(gbc.pc(), 0xd388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd386), 0xcb);
        EXPECT(gbc.readMem(0xd387), 0xd2);
        // CB D2 0390
        gbc.setState(0x3e78, 0xfcad, 0xb2c0, 0xb89b, 0x1c82, 0x4c4a, 0x1, 0x1);
        gbc.writeMem(0x3e78, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfcad);
        EXPECT(gbc.pc(), 0x3e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0391
        gbc.setState(0x9a8f, 0x314a, 0xa1b0, 0xb06, 0xcee9, 0x5941, 0x0, 0x1);
        gbc.writeMem(0x9a8f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x314a);
        EXPECT(gbc.pc(), 0x9a91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a8f), 0xcb);
        EXPECT(gbc.readMem(0x9a90), 0xd2);
        // CB D2 0393
        gbc.setState(0x87e3, 0xf8, 0xeb80, 0x1703, 0xc5dc, 0xa8b3, 0x1, 0x0);
        gbc.writeMem(0x87e3, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf8);
        EXPECT(gbc.pc(), 0x87e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e3), 0xcb);
        EXPECT(gbc.readMem(0x87e4), 0xd2);
        // CB D2 0394
        gbc.setState(0x323c, 0xda98, 0xc7c0, 0xaf85, 0x60dc, 0xa996, 0x0, 0x0);
        gbc.writeMem(0x323c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xda98);
        EXPECT(gbc.pc(), 0x323e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0395
        gbc.setState(0x486, 0x1cde, 0xeef0, 0x7b8b, 0x5029, 0x65a1, 0x1, 0x1);
        gbc.writeMem(0x486, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1cde);
        EXPECT(gbc.pc(), 0x488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 0396
        gbc.setState(0xc59e, 0xc648, 0x3a20, 0xdc5d, 0x5d0d, 0x8faa, 0x1, 0x0);
        gbc.writeMem(0xc59e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc648);
        EXPECT(gbc.pc(), 0xc5a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59e), 0xcb);
        EXPECT(gbc.readMem(0xc59f), 0xd2);
        // CB D2 0397
        gbc.setState(0xdb06, 0xae2e, 0xe040, 0x14be, 0x95e7, 0x4be4, 0x0, 0x1);
        gbc.writeMem(0xdb06, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xae2e);
        EXPECT(gbc.pc(), 0xdb08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb06), 0xcb);
        EXPECT(gbc.readMem(0xdb07), 0xd2);
        // CB D2 0398
        gbc.setState(0x2c77, 0x9d30, 0xc5e0, 0x3b41, 0xee86, 0xaa65, 0x0, 0x1);
        gbc.writeMem(0x2c77, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9d30);
        EXPECT(gbc.pc(), 0x2c79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 0399
        gbc.setState(0xbc7b, 0x6023, 0xce90, 0x1b4b, 0xc0d9, 0x15f7, 0x1, 0x1);
        gbc.writeMem(0xbc7b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6023);
        EXPECT(gbc.pc(), 0xbc7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc7b), 0xcb);
        EXPECT(gbc.readMem(0xbc7c), 0xd2);
        // CB D2 039A
        gbc.setState(0xa9c8, 0x570d, 0x9d20, 0xa473, 0xdfbd, 0xab1f, 0x0, 0x0);
        gbc.writeMem(0xa9c8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x570d);
        EXPECT(gbc.pc(), 0xa9ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c8), 0xcb);
        EXPECT(gbc.readMem(0xa9c9), 0xd2);
        // CB D2 039B
        gbc.setState(0x682a, 0x5410, 0x9300, 0x7411, 0xe101, 0xa0d5, 0x0, 0x0);
        gbc.writeMem(0x682a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5410);
        EXPECT(gbc.pc(), 0x682c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 039C
        gbc.setState(0xbd03, 0x644f, 0xad30, 0x943e, 0x44f2, 0xf5b7, 0x1, 0x0);
        gbc.writeMem(0xbd03, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x644f);
        EXPECT(gbc.pc(), 0xbd05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd03), 0xcb);
        EXPECT(gbc.readMem(0xbd04), 0xd2);
        // CB D2 039D
        gbc.setState(0x1cd5, 0xbc06, 0x4020, 0xef8d, 0xeb6, 0xdd1a, 0x1, 0x1);
        gbc.writeMem(0x1cd5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbc06);
        EXPECT(gbc.pc(), 0x1cd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 039E
        gbc.setState(0x7f7a, 0xfb48, 0x1870, 0xad21, 0x3918, 0x36bf, 0x1, 0x1);
        gbc.writeMem(0x7f7a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xfb48);
        EXPECT(gbc.pc(), 0x7f7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 039F
        gbc.setState(0x3379, 0xe353, 0x680, 0x720c, 0x3205, 0xf1b6, 0x0, 0x0);
        gbc.writeMem(0x3379, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe353);
        EXPECT(gbc.pc(), 0x337b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03A0
        gbc.setState(0xa8d8, 0xb0c6, 0x7bb0, 0xdd89, 0xfb6b, 0x8ce1, 0x0, 0x0);
        gbc.writeMem(0xa8d8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb0c6);
        EXPECT(gbc.pc(), 0xa8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d8), 0xcb);
        EXPECT(gbc.readMem(0xa8d9), 0xd2);
        // CB D2 03A1
        gbc.setState(0x84e5, 0x9783, 0x7440, 0x6fb, 0x8141, 0x99ef, 0x0, 0x0);
        gbc.writeMem(0x84e5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9783);
        EXPECT(gbc.pc(), 0x84e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84e5), 0xcb);
        EXPECT(gbc.readMem(0x84e6), 0xd2);
        // CB D2 03A2
        gbc.setState(0xddf7, 0xfe02, 0xcd50, 0x1fc0, 0x9ed1, 0x129d, 0x1, 0x1);
        gbc.writeMem(0xddf7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfe02);
        EXPECT(gbc.pc(), 0xddf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf7), 0xcb);
        EXPECT(gbc.readMem(0xddf8), 0xd2);
        // CB D2 03A3
        gbc.setState(0x85da, 0xff0d, 0xd670, 0x6c8d, 0xa34a, 0xc7a1, 0x0, 0x1);
        gbc.writeMem(0x85da, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xff0d);
        EXPECT(gbc.pc(), 0x85dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85da), 0xcb);
        EXPECT(gbc.readMem(0x85db), 0xd2);
        // CB D2 03A4
        gbc.setState(0x6e93, 0x4220, 0x2410, 0xb082, 0x65a4, 0xd3b5, 0x1, 0x1);
        gbc.writeMem(0x6e93, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4220);
        EXPECT(gbc.pc(), 0x6e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03A5
        gbc.setState(0x84a4, 0x560f, 0x390, 0xcadc, 0x9459, 0xf306, 0x0, 0x1);
        gbc.writeMem(0x84a4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x560f);
        EXPECT(gbc.pc(), 0x84a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a4), 0xcb);
        EXPECT(gbc.readMem(0x84a5), 0xd2);
        // CB D2 03A6
        gbc.setState(0x727f, 0x99f0, 0x92c0, 0x20ee, 0x106a, 0x8035, 0x0, 0x1);
        gbc.writeMem(0x727f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x99f0);
        EXPECT(gbc.pc(), 0x7281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03A7
        gbc.setState(0x8e56, 0xc381, 0x6a60, 0x16e0, 0xf480, 0x7742, 0x1, 0x1);
        gbc.writeMem(0x8e56, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc381);
        EXPECT(gbc.pc(), 0x8e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e56), 0xcb);
        EXPECT(gbc.readMem(0x8e57), 0xd2);
        // CB D2 03A8
        gbc.setState(0xb090, 0xba10, 0xb1e0, 0xd0bb, 0x33de, 0x2046, 0x0, 0x1);
        gbc.writeMem(0xb090, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xba10);
        EXPECT(gbc.pc(), 0xb092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb090), 0xcb);
        EXPECT(gbc.readMem(0xb091), 0xd2);
        // CB D2 03A9
        gbc.setState(0x1a8f, 0xd7d1, 0x4630, 0x36e4, 0x339d, 0x4a3, 0x1, 0x0);
        gbc.writeMem(0x1a8f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd7d1);
        EXPECT(gbc.pc(), 0x1a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03AA
        gbc.setState(0x926, 0x27af, 0x92c0, 0x8cfd, 0x96a1, 0xeb50, 0x1, 0x1);
        gbc.writeMem(0x926, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x27af);
        EXPECT(gbc.pc(), 0x928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03AB
        gbc.setState(0x10a9, 0xe28b, 0x5690, 0x6638, 0xe53f, 0xbf2, 0x0, 0x1);
        gbc.writeMem(0x10a9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe28b);
        EXPECT(gbc.pc(), 0x10ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03AC
        gbc.setState(0x6967, 0xa6f9, 0xded0, 0x751c, 0xa212, 0x5ec8, 0x0, 0x1);
        gbc.writeMem(0x6967, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa6f9);
        EXPECT(gbc.pc(), 0x6969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03AD
        gbc.setState(0x2fa0, 0x8670, 0xa520, 0xd889, 0x5977, 0xce66, 0x1, 0x0);
        gbc.writeMem(0x2fa0, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8670);
        EXPECT(gbc.pc(), 0x2fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03AE
        gbc.setState(0x80e5, 0x1b70, 0x8a20, 0x923, 0xc61d, 0x8a07, 0x1, 0x1);
        gbc.writeMem(0x80e5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1b70);
        EXPECT(gbc.pc(), 0x80e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e5), 0xcb);
        EXPECT(gbc.readMem(0x80e6), 0xd2);
        // CB D2 03AF
        gbc.setState(0x83dc, 0x39a3, 0xd4b0, 0xf009, 0x9b35, 0x6812, 0x1, 0x0);
        gbc.writeMem(0x83dc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x39a3);
        EXPECT(gbc.pc(), 0x83de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83dc), 0xcb);
        EXPECT(gbc.readMem(0x83dd), 0xd2);
        // CB D2 03B0
        gbc.setState(0xc560, 0x3ee7, 0x2960, 0x88b, 0x4a97, 0x9a13, 0x1, 0x0);
        gbc.writeMem(0xc560, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3ee7);
        EXPECT(gbc.pc(), 0xc562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc560), 0xcb);
        EXPECT(gbc.readMem(0xc561), 0xd2);
        // CB D2 03B1
        gbc.setState(0x9f9f, 0x6965, 0x7ea0, 0xc16c, 0xc9bd, 0xfbf5, 0x1, 0x0);
        gbc.writeMem(0x9f9f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6965);
        EXPECT(gbc.pc(), 0x9fa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9f), 0xcb);
        EXPECT(gbc.readMem(0x9fa0), 0xd2);
        // CB D2 03B2
        gbc.setState(0x7734, 0x3b98, 0xac60, 0x312c, 0x5207, 0x2052, 0x1, 0x0);
        gbc.writeMem(0x7734, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3b98);
        EXPECT(gbc.pc(), 0x7736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03B3
        gbc.setState(0x1a8d, 0x7ab, 0x7660, 0xb7bf, 0x3acc, 0x47d1, 0x1, 0x1);
        gbc.writeMem(0x1a8d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7ab);
        EXPECT(gbc.pc(), 0x1a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03B4
        gbc.setState(0x489e, 0x1a01, 0x5db0, 0xc15a, 0xd087, 0x1e38, 0x1, 0x0);
        gbc.writeMem(0x489e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1a01);
        EXPECT(gbc.pc(), 0x48a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03B5
        gbc.setState(0x9bfc, 0x1c02, 0x8ea0, 0x822d, 0x8231, 0xbb12, 0x0, 0x1);
        gbc.writeMem(0x9bfc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1c02);
        EXPECT(gbc.pc(), 0x9bfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bfc), 0xcb);
        EXPECT(gbc.readMem(0x9bfd), 0xd2);
        // CB D2 03B6
        gbc.setState(0x2578, 0xf197, 0x4b70, 0x6ac5, 0xaaa4, 0x2dfb, 0x0, 0x1);
        gbc.writeMem(0x2578, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf197);
        EXPECT(gbc.pc(), 0x257a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03B7
        gbc.setState(0xc72f, 0xc079, 0x4130, 0x3bd9, 0xa6c0, 0x9f65, 0x0, 0x1);
        gbc.writeMem(0xc72f, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc079);
        EXPECT(gbc.pc(), 0xc731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc72f), 0xcb);
        EXPECT(gbc.readMem(0xc730), 0xd2);
        // CB D2 03B8
        gbc.setState(0x423c, 0x69d6, 0xb180, 0xb715, 0xac01, 0xacf3, 0x0, 0x1);
        gbc.writeMem(0x423c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x69d6);
        EXPECT(gbc.pc(), 0x423e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03B9
        gbc.setState(0x6c35, 0xc25d, 0xf2a0, 0x1dd1, 0x2bce, 0x8386, 0x1, 0x0);
        gbc.writeMem(0x6c35, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc25d);
        EXPECT(gbc.pc(), 0x6c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03BA
        gbc.setState(0xd9fc, 0xea58, 0xff10, 0x1cc2, 0x3fb5, 0x3e3d, 0x1, 0x0);
        gbc.writeMem(0xd9fc, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xea58);
        EXPECT(gbc.pc(), 0xd9fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9fc), 0xcb);
        EXPECT(gbc.readMem(0xd9fd), 0xd2);
        // CB D2 03BB
        gbc.setState(0xc62, 0x7534, 0xac00, 0xe90d, 0xc61, 0xa4f5, 0x1, 0x1);
        gbc.writeMem(0xc62, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7534);
        EXPECT(gbc.pc(), 0xc64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03BC
        gbc.setState(0x6618, 0xd05a, 0x5b80, 0x7c66, 0xff47, 0xfe48, 0x0, 0x0);
        gbc.writeMem(0x6618, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd05a);
        EXPECT(gbc.pc(), 0x661a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03BD
        gbc.setState(0xb549, 0xf520, 0xbc40, 0xe03d, 0xfe88, 0x920b, 0x0, 0x0);
        gbc.writeMem(0xb549, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf520);
        EXPECT(gbc.pc(), 0xb54b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb549), 0xcb);
        EXPECT(gbc.readMem(0xb54a), 0xd2);
        // CB D2 03BE
        gbc.setState(0xb17e, 0xfac2, 0x36a0, 0xd76a, 0xa198, 0xc8e6, 0x0, 0x0);
        gbc.writeMem(0xb17e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfac2);
        EXPECT(gbc.pc(), 0xb180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb17e), 0xcb);
        EXPECT(gbc.readMem(0xb17f), 0xd2);
        // CB D2 03BF
        gbc.setState(0xbe9e, 0xdace, 0x92d0, 0x3cae, 0xfb63, 0xd0f2, 0x0, 0x1);
        gbc.writeMem(0xbe9e, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdace);
        EXPECT(gbc.pc(), 0xbea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe9e), 0xcb);
        EXPECT(gbc.readMem(0xbe9f), 0xd2);
        // CB D2 03C0
        gbc.setState(0x1001, 0x18d8, 0xa440, 0xf9de, 0x932c, 0x1023, 0x1, 0x0);
        gbc.writeMem(0x1001, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x18d8);
        EXPECT(gbc.pc(), 0x1003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03C1
        gbc.setState(0x2ac4, 0xf237, 0xa650, 0xa505, 0xe800, 0xfce7, 0x0, 0x0);
        gbc.writeMem(0x2ac4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf237);
        EXPECT(gbc.pc(), 0x2ac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03C2
        gbc.setState(0xb528, 0x9b72, 0x53b0, 0x8c40, 0x3bc7, 0x5468, 0x0, 0x1);
        gbc.writeMem(0xb528, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9b72);
        EXPECT(gbc.pc(), 0xb52a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb528), 0xcb);
        EXPECT(gbc.readMem(0xb529), 0xd2);
        // CB D2 03C3
        gbc.setState(0x4e7d, 0xcc27, 0x6000, 0x2334, 0x3297, 0xaa9e, 0x1, 0x1);
        gbc.writeMem(0x4e7d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcc27);
        EXPECT(gbc.pc(), 0x4e7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03C4
        gbc.setState(0x859a, 0x3dbc, 0xe7a0, 0x827b, 0xdf49, 0x8252, 0x1, 0x1);
        gbc.writeMem(0x859a, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3dbc);
        EXPECT(gbc.pc(), 0x859c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x859a), 0xcb);
        EXPECT(gbc.readMem(0x859b), 0xd2);
        // CB D2 03C5
        gbc.setState(0xabc9, 0x7b06, 0x1100, 0x558f, 0x3ee8, 0x499c, 0x1, 0x0);
        gbc.writeMem(0xabc9, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7b06);
        EXPECT(gbc.pc(), 0xabcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc9), 0xcb);
        EXPECT(gbc.readMem(0xabca), 0xd2);
        // CB D2 03C6
        gbc.setState(0x76d6, 0x1c9b, 0x3f80, 0x6ebf, 0xdc1e, 0xd728, 0x0, 0x0);
        gbc.writeMem(0x76d6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1c9b);
        EXPECT(gbc.pc(), 0x76d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03C7
        gbc.setState(0xb9c, 0xa9e5, 0x1a50, 0xac78, 0x6ed3, 0xff11, 0x0, 0x0);
        gbc.writeMem(0xb9c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa9e5);
        EXPECT(gbc.pc(), 0xb9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03C8
        gbc.setState(0xb831, 0x1069, 0xfe50, 0xf8, 0x9d00, 0x5820, 0x1, 0x1);
        gbc.writeMem(0xb831, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1069);
        EXPECT(gbc.pc(), 0xb833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb831), 0xcb);
        EXPECT(gbc.readMem(0xb832), 0xd2);
        // CB D2 03C9
        gbc.setState(0xeff4, 0xcead, 0x4d10, 0x8af, 0x9e3f, 0xfc02, 0x0, 0x1);
        gbc.writeMem(0xeff4, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcead);
        EXPECT(gbc.pc(), 0xeff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff4), 0xcb);
        EXPECT(gbc.readMem(0xeff5), 0xd2);
        // CB D2 03CA
        gbc.setState(0xc3ec, 0x849d, 0x49e0, 0x30fe, 0x9af, 0x6bdb, 0x0, 0x0);
        gbc.writeMem(0xc3ec, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x849d);
        EXPECT(gbc.pc(), 0xc3ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ec), 0xcb);
        EXPECT(gbc.readMem(0xc3ed), 0xd2);
        // CB D2 03CB
        gbc.setState(0x25f6, 0x15da, 0x1190, 0xd166, 0xfb1e, 0x40b6, 0x0, 0x0);
        gbc.writeMem(0x25f6, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x15da);
        EXPECT(gbc.pc(), 0x25f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03CC
        gbc.setState(0x9a8b, 0x1987, 0xef90, 0xf9b4, 0x61c1, 0xd3c4, 0x0, 0x1);
        gbc.writeMem(0x9a8b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1987);
        EXPECT(gbc.pc(), 0x9a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a8b), 0xcb);
        EXPECT(gbc.readMem(0x9a8c), 0xd2);
        // CB D2 03CE
        gbc.setState(0xaa2c, 0x783d, 0xd050, 0x6521, 0xd677, 0xa5a, 0x1, 0x0);
        gbc.writeMem(0xaa2c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x783d);
        EXPECT(gbc.pc(), 0xaa2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa2c), 0xcb);
        EXPECT(gbc.readMem(0xaa2d), 0xd2);
        // CB D2 03CF
        gbc.setState(0x4bcd, 0x8a15, 0xbe20, 0xdf9, 0x373b, 0x2118, 0x1, 0x0);
        gbc.writeMem(0x4bcd, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8a15);
        EXPECT(gbc.pc(), 0x4bcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03D0
        gbc.setState(0x3aaf, 0x3f4b, 0xa720, 0xb1bd, 0x2f50, 0xd7ff, 0x1, 0x0);
        gbc.writeMem(0x3aaf, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3f4b);
        EXPECT(gbc.pc(), 0x3ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03D1
        gbc.setState(0xebc1, 0xca95, 0x2510, 0x4f46, 0x5448, 0x5fad, 0x0, 0x0);
        gbc.writeMem(0xebc1, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xca95);
        EXPECT(gbc.pc(), 0xebc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebc1), 0xcb);
        EXPECT(gbc.readMem(0xebc2), 0xd2);
        // CB D2 03D2
        gbc.setState(0xb0ce, 0x7f0a, 0xe200, 0x51d9, 0xaa1d, 0x233, 0x1, 0x1);
        gbc.writeMem(0xb0ce, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7f0a);
        EXPECT(gbc.pc(), 0xb0d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ce), 0xcb);
        EXPECT(gbc.readMem(0xb0cf), 0xd2);
        // CB D2 03D3
        gbc.setState(0x6092, 0x488, 0xd410, 0x8c73, 0xbede, 0xcd9f, 0x1, 0x0);
        gbc.writeMem(0x6092, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x488);
        EXPECT(gbc.pc(), 0x6094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03D4
        gbc.setState(0x8ca5, 0x9e2, 0xf9a0, 0xc0a9, 0xc6e3, 0xf1da, 0x0, 0x0);
        gbc.writeMem(0x8ca5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9e2);
        EXPECT(gbc.pc(), 0x8ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca5), 0xcb);
        EXPECT(gbc.readMem(0x8ca6), 0xd2);
        // CB D2 03D6
        gbc.setState(0x8332, 0xa68, 0xef40, 0x1f7c, 0x6026, 0x7624, 0x0, 0x1);
        gbc.writeMem(0x8332, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa68);
        EXPECT(gbc.pc(), 0x8334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8332), 0xcb);
        EXPECT(gbc.readMem(0x8333), 0xd2);
        // CB D2 03D7
        gbc.setState(0xe356, 0x8115, 0x2e00, 0x346a, 0x42c0, 0x368a, 0x1, 0x0);
        gbc.writeMem(0xe356, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8115);
        EXPECT(gbc.pc(), 0xe358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe356), 0xcb);
        EXPECT(gbc.readMem(0xe357), 0xd2);
        // CB D2 03D8
        gbc.setState(0x5866, 0xabb7, 0xdce0, 0x8cfc, 0x1a20, 0xefcb, 0x0, 0x0);
        gbc.writeMem(0x5866, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xabb7);
        EXPECT(gbc.pc(), 0x5868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03D9
        gbc.setState(0xcde8, 0xe777, 0xe2e0, 0xc1f9, 0xe74c, 0x1680, 0x1, 0x0);
        gbc.writeMem(0xcde8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe777);
        EXPECT(gbc.pc(), 0xcdea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde8), 0xcb);
        EXPECT(gbc.readMem(0xcde9), 0xd2);
        // CB D2 03DA
        gbc.setState(0x2d23, 0x9c1c, 0x8f20, 0xa516, 0x5d78, 0xf0dc, 0x0, 0x0);
        gbc.writeMem(0x2d23, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9c1c);
        EXPECT(gbc.pc(), 0x2d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03DB
        gbc.setState(0x2ac7, 0xa25d, 0x9170, 0xd115, 0xe2dd, 0x74e8, 0x1, 0x1);
        gbc.writeMem(0x2ac7, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa25d);
        EXPECT(gbc.pc(), 0x2ac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03DC
        gbc.setState(0xda8d, 0x6608, 0xfb80, 0x415b, 0xd686, 0x6555, 0x1, 0x0);
        gbc.writeMem(0xda8d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6608);
        EXPECT(gbc.pc(), 0xda8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda8d), 0xcb);
        EXPECT(gbc.readMem(0xda8e), 0xd2);
        // CB D2 03DD
        gbc.setState(0xaee8, 0xefbc, 0x6a00, 0xcefe, 0xa3f5, 0x356d, 0x0, 0x1);
        gbc.writeMem(0xaee8, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xefbc);
        EXPECT(gbc.pc(), 0xaeea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee8), 0xcb);
        EXPECT(gbc.readMem(0xaee9), 0xd2);
        // CB D2 03DE
        gbc.setState(0xc0d5, 0x9db, 0x2ad0, 0x6d71, 0xb97f, 0x7c7a, 0x1, 0x0);
        gbc.writeMem(0xc0d5, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9db);
        EXPECT(gbc.pc(), 0xc0d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d5), 0xcb);
        EXPECT(gbc.readMem(0xc0d6), 0xd2);
        // CB D2 03DF
        gbc.setState(0x4b6b, 0xd8fe, 0x29e0, 0x75d4, 0xbc05, 0x3069, 0x0, 0x0);
        gbc.writeMem(0x4b6b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd8fe);
        EXPECT(gbc.pc(), 0x4b6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03E0
        gbc.setState(0x45c, 0xe3ef, 0xca60, 0x6665, 0x5ef5, 0xf471, 0x0, 0x1);
        gbc.writeMem(0x45c, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe3ef);
        EXPECT(gbc.pc(), 0x45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03E1
        gbc.setState(0x7931, 0x41c7, 0x25a0, 0x3b4a, 0x6971, 0xbad4, 0x1, 0x0);
        gbc.writeMem(0x7931, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x41c7);
        EXPECT(gbc.pc(), 0x7933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D2 03E2
        gbc.setState(0xd32b, 0x1e0c, 0x24e0, 0xacb8, 0x5f10, 0x3e15, 0x0, 0x0);
        gbc.writeMem(0xd32b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1e0c);
        EXPECT(gbc.pc(), 0xd32d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32b), 0xcb);
        EXPECT(gbc.readMem(0xd32c), 0xd2);
        // CB D2 03E4
        gbc.setState(0x34c2, 0xa47a, 0x4bd0, 0x7673, 0xaf30, 0xc4a2, 0x0, 0x1);
        gbc.writeMem(0x34c2, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa47a);
        EXPECT(gbc.pc(), 0x34c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03E6
        gbc.setState(0x725d, 0xbe26, 0x1d0, 0xf615, 0x9e2b, 0x18b0, 0x1, 0x1);
        gbc.writeMem(0x725d, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xbe26);
        EXPECT(gbc.pc(), 0x725f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D2 03E7
        gbc.setState(0x2a0b, 0x6936, 0xfd00, 0xa7bc, 0xeded, 0xbaff, 0x1, 0x0);
        gbc.writeMem(0x2a0b, { 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6936);
        EXPECT(gbc.pc(), 0x2a0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
