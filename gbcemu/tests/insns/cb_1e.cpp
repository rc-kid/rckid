#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_1e)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_1e) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 1E 0002
        gbc.setState(0x75bd, 0x86a2, 0xcb90, 0xee9c, 0x9809, 0xb16f, 0x0, 0x1);
        gbc.writeMem(0x75bd, { 0xcb, 0x1e });
        gbc.writeMem(0xb16f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x86a2);
        EXPECT(gbc.pc(), 0x75bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16f), 0xa6);
        // CB 1E 0005
        gbc.setState(0x65b, 0x413a, 0x9880, 0x7eae, 0xadb7, 0xbd4c, 0x1, 0x1);
        gbc.writeMem(0x65b, { 0xcb, 0x1e });
        gbc.writeMem(0xbd4c, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x413a);
        EXPECT(gbc.pc(), 0x65d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4c), 0x33);
        // CB 1E 000A
        gbc.setState(0x6729, 0x512f, 0x3130, 0x8eb2, 0x62f4, 0xf2cc, 0x0, 0x0);
        gbc.writeMem(0x6729, { 0xcb, 0x1e });
        gbc.writeMem(0xf2cc, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x512f);
        EXPECT(gbc.pc(), 0x672b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2cc), 0x97);
        // CB 1E 000C
        gbc.setState(0xc76, 0x65d4, 0xf050, 0xe3fa, 0x8727, 0x8515, 0x0, 0x0);
        gbc.writeMem(0xc76, { 0xcb, 0x1e });
        gbc.writeMem(0x8515, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x65d4);
        EXPECT(gbc.pc(), 0xc78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8515), 0xba);
        // CB 1E 000E
        gbc.setState(0xc81a, 0x63a0, 0x5390, 0x211, 0x68cc, 0xad58, 0x1, 0x0);
        gbc.writeMem(0xad58, { 0xa4 });
        gbc.writeMem(0xc81a, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x63a0);
        EXPECT(gbc.pc(), 0xc81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad58), 0xd2);
        EXPECT(gbc.readMem(0xc81a), 0xcb);
        EXPECT(gbc.readMem(0xc81b), 0x1e);
        // CB 1E 000F
        gbc.setState(0x75f7, 0x2532, 0x8950, 0x3bd7, 0x47fd, 0x8e2b, 0x1, 0x1);
        gbc.writeMem(0x75f7, { 0xcb, 0x1e });
        gbc.writeMem(0x8e2b, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2532);
        EXPECT(gbc.pc(), 0x75f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e2b), 0x8a);
        // CB 1E 0010
        gbc.setState(0x9511, 0x568b, 0xeef0, 0x915a, 0x9a8d, 0xcdc7, 0x0, 0x0);
        gbc.writeMem(0x9511, { 0xcb, 0x1e });
        gbc.writeMem(0xcdc7, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x568b);
        EXPECT(gbc.pc(), 0x9513);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9511), 0xcb);
        EXPECT(gbc.readMem(0x9512), 0x1e);
        EXPECT(gbc.readMem(0xcdc7), 0x8b);
        // CB 1E 0016
        gbc.setState(0x186b, 0x8864, 0xe720, 0xc25d, 0x9267, 0x9faf, 0x1, 0x0);
        gbc.writeMem(0x186b, { 0xcb, 0x1e });
        gbc.writeMem(0x9faf, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8864);
        EXPECT(gbc.pc(), 0x186d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9faf), 0x41);
        // CB 1E 0017
        gbc.setState(0x8f0e, 0x4745, 0xd8f0, 0x378a, 0x77bf, 0xaddf, 0x1, 0x0);
        gbc.writeMem(0x8f0e, { 0xcb, 0x1e });
        gbc.writeMem(0xaddf, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4745);
        EXPECT(gbc.pc(), 0x8f10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0e), 0xcb);
        EXPECT(gbc.readMem(0x8f0f), 0x1e);
        EXPECT(gbc.readMem(0xaddf), 0xf3);
        // CB 1E 001C
        gbc.setState(0x8e26, 0xe345, 0x70a0, 0x79fd, 0x4aff, 0xe5c7, 0x1, 0x1);
        gbc.writeMem(0x8e26, { 0xcb, 0x1e });
        gbc.writeMem(0xe5c7, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe345);
        EXPECT(gbc.pc(), 0x8e28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e26), 0xcb);
        EXPECT(gbc.readMem(0x8e27), 0x1e);
        EXPECT(gbc.readMem(0xe5c7), 0x5);
        // CB 1E 001D
        gbc.setState(0xdc0d, 0xfb86, 0xad00, 0x893a, 0xacec, 0xd9ac, 0x1, 0x0);
        gbc.writeMem(0xd9ac, { 0x4a });
        gbc.writeMem(0xdc0d, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfb86);
        EXPECT(gbc.pc(), 0xdc0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9ac), 0x25);
        EXPECT(gbc.readMem(0xdc0d), 0xcb);
        EXPECT(gbc.readMem(0xdc0e), 0x1e);
        // CB 1E 001E
        gbc.setState(0xb069, 0x2c60, 0x29b0, 0x7234, 0x7743, 0xfb7d, 0x0, 0x1);
        gbc.writeMem(0xb069, { 0xcb, 0x1e });
        gbc.writeMem(0xfb7d, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2c60);
        EXPECT(gbc.pc(), 0xb06b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb069), 0xcb);
        EXPECT(gbc.readMem(0xb06a), 0x1e);
        EXPECT(gbc.readMem(0xfb7d), 0xd2);
        // CB 1E 0020
        gbc.setState(0x524c, 0x583f, 0x6830, 0xa5ff, 0xde6, 0xfb94, 0x0, 0x0);
        gbc.writeMem(0x524c, { 0xcb, 0x1e });
        gbc.writeMem(0xfb94, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x583f);
        EXPECT(gbc.pc(), 0x524e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb94), 0xca);
        // CB 1E 0021
        gbc.setState(0x4ced, 0x8c83, 0x81d0, 0x8d42, 0x21f1, 0xe217, 0x1, 0x0);
        gbc.writeMem(0x4ced, { 0xcb, 0x1e });
        gbc.writeMem(0xe217, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8c83);
        EXPECT(gbc.pc(), 0x4cef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe217), 0xd7);
        // CB 1E 0024
        gbc.setState(0x3e4b, 0xe363, 0x1e50, 0x6f7a, 0x8e4b, 0x893f, 0x0, 0x1);
        gbc.writeMem(0x3e4b, { 0xcb, 0x1e });
        gbc.writeMem(0x893f, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe363);
        EXPECT(gbc.pc(), 0x3e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x893f), 0x80);
        // CB 1E 0025
        gbc.setState(0x9231, 0x1b2d, 0x68d0, 0xec28, 0x7b4e, 0xd4d7, 0x0, 0x0);
        gbc.writeMem(0x9231, { 0xcb, 0x1e });
        gbc.writeMem(0xd4d7, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1b2d);
        EXPECT(gbc.pc(), 0x9233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9231), 0xcb);
        EXPECT(gbc.readMem(0x9232), 0x1e);
        EXPECT(gbc.readMem(0xd4d7), 0xff);
        // CB 1E 0027
        gbc.setState(0xa907, 0x34c7, 0x22f0, 0xc541, 0xef17, 0x87a6, 0x1, 0x1);
        gbc.writeMem(0x87a6, { 0xb3 });
        gbc.writeMem(0xa907, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x34c7);
        EXPECT(gbc.pc(), 0xa909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a6), 0xd9);
        EXPECT(gbc.readMem(0xa907), 0xcb);
        EXPECT(gbc.readMem(0xa908), 0x1e);
        // CB 1E 0028
        gbc.setState(0xef1f, 0xd69f, 0x320, 0xf3b9, 0x8650, 0x8b99, 0x1, 0x0);
        gbc.writeMem(0x8b99, { 0xe6 });
        gbc.writeMem(0xef1f, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd69f);
        EXPECT(gbc.pc(), 0xef21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b99), 0x73);
        EXPECT(gbc.readMem(0xef1f), 0xcb);
        EXPECT(gbc.readMem(0xef20), 0x1e);
        // CB 1E 0029
        gbc.setState(0xa35c, 0x1f97, 0x7460, 0x9c6f, 0xc02c, 0xcf10, 0x1, 0x1);
        gbc.writeMem(0xa35c, { 0xcb, 0x1e });
        gbc.writeMem(0xcf10, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1f97);
        EXPECT(gbc.pc(), 0xa35e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa35c), 0xcb);
        EXPECT(gbc.readMem(0xa35d), 0x1e);
        EXPECT(gbc.readMem(0xcf10), 0x75);
        // CB 1E 002A
        gbc.setState(0xe489, 0x2788, 0x60e0, 0x4b3e, 0xbabd, 0xb479, 0x0, 0x0);
        gbc.writeMem(0xb479, { 0x35 });
        gbc.writeMem(0xe489, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2788);
        EXPECT(gbc.pc(), 0xe48b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb479), 0x1a);
        EXPECT(gbc.readMem(0xe489), 0xcb);
        EXPECT(gbc.readMem(0xe48a), 0x1e);
        // CB 1E 0030
        gbc.setState(0x5d87, 0xe1cf, 0xa6e0, 0x5359, 0x86ef, 0xf695, 0x0, 0x0);
        gbc.writeMem(0x5d87, { 0xcb, 0x1e });
        gbc.writeMem(0xf695, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe1cf);
        EXPECT(gbc.pc(), 0x5d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf695), 0x7);
        // CB 1E 0032
        gbc.setState(0x3131, 0x784d, 0x43d0, 0x2c53, 0xf700, 0xeeec, 0x0, 0x0);
        gbc.writeMem(0x3131, { 0xcb, 0x1e });
        gbc.writeMem(0xeeec, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x784d);
        EXPECT(gbc.pc(), 0x3133);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeec), 0xe7);
        // CB 1E 0033
        gbc.setState(0x160e, 0x7c78, 0x1190, 0x625c, 0x7392, 0x83ae, 0x0, 0x1);
        gbc.writeMem(0x160e, { 0xcb, 0x1e });
        gbc.writeMem(0x83ae, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7c78);
        EXPECT(gbc.pc(), 0x1610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ae), 0xc6);
        // CB 1E 0034
        gbc.setState(0x1faf, 0x3073, 0x4710, 0x99f3, 0xb579, 0xa32d, 0x0, 0x1);
        gbc.writeMem(0x1faf, { 0xcb, 0x1e });
        gbc.writeMem(0xa32d, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3073);
        EXPECT(gbc.pc(), 0x1fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa32d), 0xb8);
        // CB 1E 0036
        gbc.setState(0x56d3, 0x9887, 0x6070, 0x71fb, 0x1524, 0xc702, 0x1, 0x1);
        gbc.writeMem(0x56d3, { 0xcb, 0x1e });
        gbc.writeMem(0xc702, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9887);
        EXPECT(gbc.pc(), 0x56d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc702), 0xc7);
        // CB 1E 0038
        gbc.setState(0x8759, 0x415b, 0x9d90, 0xacd6, 0xfbcb, 0xebdb, 0x1, 0x0);
        gbc.writeMem(0x8759, { 0xcb, 0x1e });
        gbc.writeMem(0xebdb, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x415b);
        EXPECT(gbc.pc(), 0x875b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8759), 0xcb);
        EXPECT(gbc.readMem(0x875a), 0x1e);
        EXPECT(gbc.readMem(0xebdb), 0xc3);
        // CB 1E 0039
        gbc.setState(0x5b27, 0x2c6, 0x3e80, 0xca3f, 0xef76, 0x9703, 0x0, 0x0);
        gbc.writeMem(0x5b27, { 0xcb, 0x1e });
        gbc.writeMem(0x9703, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2c6);
        EXPECT(gbc.pc(), 0x5b29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9703), 0x32);
        // CB 1E 003A
        gbc.setState(0x4f63, 0x73ba, 0xfa10, 0xf261, 0x4750, 0xfc7c, 0x0, 0x1);
        gbc.writeMem(0x4f63, { 0xcb, 0x1e });
        gbc.writeMem(0xfc7c, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x73ba);
        EXPECT(gbc.pc(), 0x4f65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc7c), 0xb4);
        // CB 1E 003B
        gbc.setState(0x5106, 0x168e, 0x8ff0, 0x1faf, 0xf6b6, 0x86e1, 0x1, 0x1);
        gbc.writeMem(0x5106, { 0xcb, 0x1e });
        gbc.writeMem(0x86e1, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x168e);
        EXPECT(gbc.pc(), 0x5108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86e1), 0x8b);
        // CB 1E 003C
        gbc.setState(0x6b1, 0xc27c, 0xd850, 0xa76d, 0x797c, 0xffa9, 0x1, 0x1);
        gbc.writeMem(0x6b1, { 0xcb, 0x1e });
        gbc.writeMem(0xffa9, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc27c);
        EXPECT(gbc.pc(), 0x6b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa9), 0xb0);
        // CB 1E 003D
        gbc.setState(0x7f5c, 0xb814, 0xb760, 0x783, 0x6817, 0xf5b0, 0x0, 0x1);
        gbc.writeMem(0x7f5c, { 0xcb, 0x1e });
        gbc.writeMem(0xf5b0, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb814);
        EXPECT(gbc.pc(), 0x7f5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5b0), 0x13);
        // CB 1E 003E
        gbc.setState(0xcb68, 0x74ba, 0x73d0, 0xdc69, 0x6862, 0xf9fa, 0x1, 0x1);
        gbc.writeMem(0xcb68, { 0xcb, 0x1e });
        gbc.writeMem(0xf9fa, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x74ba);
        EXPECT(gbc.pc(), 0xcb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb68), 0xcb);
        EXPECT(gbc.readMem(0xcb69), 0x1e);
        EXPECT(gbc.readMem(0xf9fa), 0xa5);
        // CB 1E 0040
        gbc.setState(0x45f2, 0x4be9, 0x4870, 0x6488, 0x90c5, 0x8da0, 0x1, 0x1);
        gbc.writeMem(0x45f2, { 0xcb, 0x1e });
        gbc.writeMem(0x8da0, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4be9);
        EXPECT(gbc.pc(), 0x45f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da0), 0xc4);
        // CB 1E 0041
        gbc.setState(0xd729, 0xa744, 0x8850, 0xfb09, 0xecd9, 0xdb83, 0x0, 0x0);
        gbc.writeMem(0xd729, { 0xcb, 0x1e });
        gbc.writeMem(0xdb83, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa744);
        EXPECT(gbc.pc(), 0xd72b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd729), 0xcb);
        EXPECT(gbc.readMem(0xd72a), 0x1e);
        EXPECT(gbc.readMem(0xdb83), 0xc5);
        // CB 1E 0042
        gbc.setState(0xe9c8, 0xc328, 0xdbf0, 0xdfb7, 0x25d3, 0x85bd, 0x0, 0x1);
        gbc.writeMem(0x85bd, { 0xbe });
        gbc.writeMem(0xe9c8, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc328);
        EXPECT(gbc.pc(), 0xe9ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85bd), 0xdf);
        EXPECT(gbc.readMem(0xe9c8), 0xcb);
        EXPECT(gbc.readMem(0xe9c9), 0x1e);
        // CB 1E 0046
        gbc.setState(0xbbc3, 0x64cf, 0x9160, 0xfb6b, 0x2f84, 0xf3b1, 0x0, 0x0);
        gbc.writeMem(0xbbc3, { 0xcb, 0x1e });
        gbc.writeMem(0xf3b1, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x64cf);
        EXPECT(gbc.pc(), 0xbbc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc3), 0xcb);
        EXPECT(gbc.readMem(0xbbc4), 0x1e);
        EXPECT(gbc.readMem(0xf3b1), 0x5b);
        // CB 1E 0047
        gbc.setState(0xa5af, 0xcd, 0x8f90, 0xbef4, 0x3b43, 0x94db, 0x1, 0x0);
        gbc.writeMem(0x94db, { 0x83 });
        gbc.writeMem(0xa5af, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xcd);
        EXPECT(gbc.pc(), 0xa5b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94db), 0xc1);
        EXPECT(gbc.readMem(0xa5af), 0xcb);
        EXPECT(gbc.readMem(0xa5b0), 0x1e);
        // CB 1E 0049
        gbc.setState(0x81d3, 0x3b7c, 0x9dc0, 0x967c, 0x873a, 0x8c54, 0x1, 0x0);
        gbc.writeMem(0x81d3, { 0xcb, 0x1e });
        gbc.writeMem(0x8c54, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3b7c);
        EXPECT(gbc.pc(), 0x81d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d3), 0xcb);
        EXPECT(gbc.readMem(0x81d4), 0x1e);
        EXPECT(gbc.readMem(0x8c54), 0x50);
        // CB 1E 004B
        gbc.setState(0xb5, 0x50bc, 0x2f80, 0x2b85, 0x5491, 0xa56e, 0x1, 0x0);
        gbc.writeMem(0xb5, { 0xcb, 0x1e });
        gbc.writeMem(0xa56e, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x50bc);
        EXPECT(gbc.pc(), 0xb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa56e), 0x19);
        // CB 1E 004C
        gbc.setState(0x9917, 0xa60f, 0x6870, 0x373, 0x80f7, 0xac41, 0x1, 0x1);
        gbc.writeMem(0x9917, { 0xcb, 0x1e });
        gbc.writeMem(0xac41, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa60f);
        EXPECT(gbc.pc(), 0x9919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9917), 0xcb);
        EXPECT(gbc.readMem(0x9918), 0x1e);
        EXPECT(gbc.readMem(0xac41), 0xff);
        // CB 1E 004E
        gbc.setState(0xb7a9, 0x7245, 0xa8c0, 0xa6c2, 0x78a, 0xe861, 0x1, 0x1);
        gbc.writeMem(0xb7a9, { 0xcb, 0x1e });
        gbc.writeMem(0xe861, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7245);
        EXPECT(gbc.pc(), 0xb7ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a9), 0xcb);
        EXPECT(gbc.readMem(0xb7aa), 0x1e);
        EXPECT(gbc.readMem(0xe861), 0x22);
        // CB 1E 004F
        gbc.setState(0x36e9, 0x892a, 0x3010, 0x13bf, 0xbbbe, 0xaefd, 0x1, 0x1);
        gbc.writeMem(0x36e9, { 0xcb, 0x1e });
        gbc.writeMem(0xaefd, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x892a);
        EXPECT(gbc.pc(), 0x36eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaefd), 0x8e);
        // CB 1E 0052
        gbc.setState(0xb5ed, 0x5c51, 0x88f0, 0x84c5, 0x1a84, 0xff8e, 0x0, 0x1);
        gbc.writeMem(0xb5ed, { 0xcb, 0x1e });
        gbc.writeMem(0xff8e, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5c51);
        EXPECT(gbc.pc(), 0xb5ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ed), 0xcb);
        EXPECT(gbc.readMem(0xb5ee), 0x1e);
        EXPECT(gbc.readMem(0xff8e), 0xf1);
        // CB 1E 0055
        gbc.setState(0x8cb5, 0x7209, 0x220, 0x39ea, 0xede4, 0xdbc2, 0x1, 0x1);
        gbc.writeMem(0x8cb5, { 0xcb, 0x1e });
        gbc.writeMem(0xdbc2, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7209);
        EXPECT(gbc.pc(), 0x8cb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cb5), 0xcb);
        EXPECT(gbc.readMem(0x8cb6), 0x1e);
        EXPECT(gbc.readMem(0xdbc2), 0x31);
        // CB 1E 0056
        gbc.setState(0x5668, 0x983a, 0x6690, 0xc05a, 0x9dfe, 0xfcb2, 0x0, 0x0);
        gbc.writeMem(0x5668, { 0xcb, 0x1e });
        gbc.writeMem(0xfcb2, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x983a);
        EXPECT(gbc.pc(), 0x566a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfcb2), 0x86);
        // CB 1E 0058
        gbc.setState(0xb249, 0x4d7e, 0x3cc0, 0x51a1, 0x6577, 0x84c2, 0x1, 0x1);
        gbc.writeMem(0x84c2, { 0x63 });
        gbc.writeMem(0xb249, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4d7e);
        EXPECT(gbc.pc(), 0xb24b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c2), 0x31);
        EXPECT(gbc.readMem(0xb249), 0xcb);
        EXPECT(gbc.readMem(0xb24a), 0x1e);
        // CB 1E 0059
        gbc.setState(0x189a, 0x751e, 0x6330, 0xafbf, 0x6b8c, 0xe381, 0x0, 0x0);
        gbc.writeMem(0x189a, { 0xcb, 0x1e });
        gbc.writeMem(0xe381, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x751e);
        EXPECT(gbc.pc(), 0x189c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe381), 0xe6);
        // CB 1E 005A
        gbc.setState(0x7ad2, 0x55ec, 0xb0c0, 0xe5d0, 0x1ef2, 0xd21b, 0x1, 0x0);
        gbc.writeMem(0x7ad2, { 0xcb, 0x1e });
        gbc.writeMem(0xd21b, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x55ec);
        EXPECT(gbc.pc(), 0x7ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd21b), 0x20);
        // CB 1E 005C
        gbc.setState(0x1e78, 0xc86e, 0x2c90, 0xfbdc, 0xb770, 0xed96, 0x0, 0x1);
        gbc.writeMem(0x1e78, { 0xcb, 0x1e });
        gbc.writeMem(0xed96, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc86e);
        EXPECT(gbc.pc(), 0x1e7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed96), 0xab);
        // CB 1E 005E
        gbc.setState(0xd63f, 0xe469, 0x6680, 0x4491, 0x66d3, 0x9bcf, 0x0, 0x1);
        gbc.writeMem(0x9bcf, { 0x71 });
        gbc.writeMem(0xd63f, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe469);
        EXPECT(gbc.pc(), 0xd641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bcf), 0x38);
        EXPECT(gbc.readMem(0xd63f), 0xcb);
        EXPECT(gbc.readMem(0xd640), 0x1e);
        // CB 1E 0060
        gbc.setState(0x36f2, 0x91e, 0x2310, 0xda1, 0x72a9, 0xf00b, 0x0, 0x1);
        gbc.writeMem(0x36f2, { 0xcb, 0x1e });
        gbc.writeMem(0xf00b, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x91e);
        EXPECT(gbc.pc(), 0x36f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf00b), 0xed);
        // CB 1E 0061
        gbc.setState(0x4ed, 0xac9d, 0x1b70, 0x7e90, 0xaf9b, 0xd502, 0x0, 0x1);
        gbc.writeMem(0x4ed, { 0xcb, 0x1e });
        gbc.writeMem(0xd502, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xac9d);
        EXPECT(gbc.pc(), 0x4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd502), 0x8c);
        // CB 1E 0065
        gbc.setState(0x5ed1, 0x27a6, 0xbd0, 0x8dd9, 0xe42e, 0x9bd7, 0x1, 0x1);
        gbc.writeMem(0x5ed1, { 0xcb, 0x1e });
        gbc.writeMem(0x9bd7, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x27a6);
        EXPECT(gbc.pc(), 0x5ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bd7), 0xdd);
        // CB 1E 0068
        gbc.setState(0x5e17, 0xea94, 0x1060, 0xe503, 0xcf80, 0x8e24, 0x0, 0x1);
        gbc.writeMem(0x5e17, { 0xcb, 0x1e });
        gbc.writeMem(0x8e24, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xea94);
        EXPECT(gbc.pc(), 0x5e19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e24), 0x6b);
        // CB 1E 006A
        gbc.setState(0xe5d, 0xdcc3, 0xae00, 0x18f9, 0xd389, 0xaef2, 0x0, 0x0);
        gbc.writeMem(0xe5d, { 0xcb, 0x1e });
        gbc.writeMem(0xaef2, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdcc3);
        EXPECT(gbc.pc(), 0xe5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaef2), 0x5b);
        // CB 1E 006B
        gbc.setState(0x56cc, 0xcc45, 0x5610, 0x7629, 0xb3a3, 0xbcc2, 0x0, 0x1);
        gbc.writeMem(0x56cc, { 0xcb, 0x1e });
        gbc.writeMem(0xbcc2, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xcc45);
        EXPECT(gbc.pc(), 0x56ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc2), 0xd6);
        // CB 1E 006E
        gbc.setState(0xc1c7, 0x3c0, 0xaca0, 0x3a21, 0x793e, 0xdc62, 0x0, 0x1);
        gbc.writeMem(0xc1c7, { 0xcb, 0x1e });
        gbc.writeMem(0xdc62, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3c0);
        EXPECT(gbc.pc(), 0xc1c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c7), 0xcb);
        EXPECT(gbc.readMem(0xc1c8), 0x1e);
        EXPECT(gbc.readMem(0xdc62), 0x37);
        // CB 1E 006F
        gbc.setState(0x690d, 0x52d4, 0xa370, 0xa507, 0xf262, 0xae99, 0x0, 0x0);
        gbc.writeMem(0x690d, { 0xcb, 0x1e });
        gbc.writeMem(0xae99, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x52d4);
        EXPECT(gbc.pc(), 0x690f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae99), 0x81);
        // CB 1E 0077
        gbc.setState(0x114c, 0x5bca, 0xb1f0, 0xc9f9, 0x682c, 0xa9b8, 0x1, 0x0);
        gbc.writeMem(0x114c, { 0xcb, 0x1e });
        gbc.writeMem(0xa9b8, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5bca);
        EXPECT(gbc.pc(), 0x114e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b8), 0xdd);
        // CB 1E 0078
        gbc.setState(0x9cd3, 0x34ee, 0xb20, 0x7af1, 0x8885, 0xd19c, 0x1, 0x1);
        gbc.writeMem(0x9cd3, { 0xcb, 0x1e });
        gbc.writeMem(0xd19c, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x34ee);
        EXPECT(gbc.pc(), 0x9cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd3), 0xcb);
        EXPECT(gbc.readMem(0x9cd4), 0x1e);
        EXPECT(gbc.readMem(0xd19c), 0x5f);
        // CB 1E 0079
        gbc.setState(0xeff8, 0x36e4, 0x520, 0xbccb, 0x3053, 0xeca5, 0x0, 0x0);
        gbc.writeMem(0xeca5, { 0x8d });
        gbc.writeMem(0xeff8, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x36e4);
        EXPECT(gbc.pc(), 0xeffa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeca5), 0x46);
        EXPECT(gbc.readMem(0xeff8), 0xcb);
        EXPECT(gbc.readMem(0xeff9), 0x1e);
        // CB 1E 007A
        gbc.setState(0x5bcf, 0xd2e1, 0xf820, 0xe64f, 0x23ad, 0xfdc7, 0x1, 0x1);
        gbc.writeMem(0x5bcf, { 0xcb, 0x1e });
        gbc.writeMem(0xfdc7, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd2e1);
        EXPECT(gbc.pc(), 0x5bd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfdc7), 0x7a);
        // CB 1E 007D
        gbc.setState(0xa904, 0x66b2, 0xbd60, 0x198e, 0x9095, 0x8668, 0x1, 0x1);
        gbc.writeMem(0x8668, { 0x4 });
        gbc.writeMem(0xa904, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x66b2);
        EXPECT(gbc.pc(), 0xa906);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8668), 0x2);
        EXPECT(gbc.readMem(0xa904), 0xcb);
        EXPECT(gbc.readMem(0xa905), 0x1e);
        // CB 1E 007E
        gbc.setState(0xd1b8, 0x4cc9, 0x2920, 0x89e8, 0x77b9, 0xa56a, 0x1, 0x1);
        gbc.writeMem(0xa56a, { 0x98 });
        gbc.writeMem(0xd1b8, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4cc9);
        EXPECT(gbc.pc(), 0xd1ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa56a), 0x4c);
        EXPECT(gbc.readMem(0xd1b8), 0xcb);
        EXPECT(gbc.readMem(0xd1b9), 0x1e);
        // CB 1E 0083
        gbc.setState(0x16c8, 0xf018, 0xbbe0, 0xdfb, 0xd028, 0x8f22, 0x0, 0x1);
        gbc.writeMem(0x16c8, { 0xcb, 0x1e });
        gbc.writeMem(0x8f22, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf018);
        EXPECT(gbc.pc(), 0x16ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f22), 0x4a);
        // CB 1E 0084
        gbc.setState(0x5f3e, 0xe503, 0x8ef0, 0xc50f, 0x30e, 0xf2f0, 0x0, 0x0);
        gbc.writeMem(0x5f3e, { 0xcb, 0x1e });
        gbc.writeMem(0xf2f0, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe503);
        EXPECT(gbc.pc(), 0x5f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2f0), 0xa9);
        // CB 1E 0085
        gbc.setState(0x906f, 0x36d3, 0xf6b0, 0xaf8d, 0x60f1, 0xbef2, 0x1, 0x1);
        gbc.writeMem(0x906f, { 0xcb, 0x1e });
        gbc.writeMem(0xbef2, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x36d3);
        EXPECT(gbc.pc(), 0x9071);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906f), 0xcb);
        EXPECT(gbc.readMem(0x9070), 0x1e);
        EXPECT(gbc.readMem(0xbef2), 0xbc);
        // CB 1E 0086
        gbc.setState(0x6e4a, 0x8503, 0x680, 0x87ae, 0xf2e9, 0x8f16, 0x1, 0x0);
        gbc.writeMem(0x6e4a, { 0xcb, 0x1e });
        gbc.writeMem(0x8f16, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8503);
        EXPECT(gbc.pc(), 0x6e4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f16), 0x35);
        // CB 1E 0088
        gbc.setState(0xd03, 0x9a90, 0x7d40, 0x1a28, 0x78cc, 0x9b45, 0x1, 0x0);
        gbc.writeMem(0xd03, { 0xcb, 0x1e });
        gbc.writeMem(0x9b45, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9a90);
        EXPECT(gbc.pc(), 0xd05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b45), 0x63);
        // CB 1E 0089
        gbc.setState(0x237f, 0x6fe1, 0xf990, 0x3121, 0x2241, 0xe026, 0x0, 0x1);
        gbc.writeMem(0x237f, { 0xcb, 0x1e });
        gbc.writeMem(0xe026, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6fe1);
        EXPECT(gbc.pc(), 0x2381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe026), 0xf6);
        // CB 1E 008A
        gbc.setState(0xefbe, 0x5915, 0xadb0, 0xaa30, 0xe3b9, 0xbe29, 0x1, 0x1);
        gbc.writeMem(0xbe29, { 0x77 });
        gbc.writeMem(0xefbe, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5915);
        EXPECT(gbc.pc(), 0xefc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe29), 0xbb);
        EXPECT(gbc.readMem(0xefbe), 0xcb);
        EXPECT(gbc.readMem(0xefbf), 0x1e);
        // CB 1E 0091
        gbc.setState(0x4c9d, 0x93c3, 0x3f30, 0x5ad6, 0xb16f, 0xb439, 0x1, 0x1);
        gbc.writeMem(0x4c9d, { 0xcb, 0x1e });
        gbc.writeMem(0xb439, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x93c3);
        EXPECT(gbc.pc(), 0x4c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb439), 0xe2);
        // CB 1E 0094
        gbc.setState(0xa866, 0x8f43, 0x9b10, 0xdac6, 0x6a93, 0x9582, 0x0, 0x1);
        gbc.writeMem(0x9582, { 0x98 });
        gbc.writeMem(0xa866, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8f43);
        EXPECT(gbc.pc(), 0xa868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9582), 0xcc);
        EXPECT(gbc.readMem(0xa866), 0xcb);
        EXPECT(gbc.readMem(0xa867), 0x1e);
        // CB 1E 0095
        gbc.setState(0x3588, 0xb0d3, 0x2fc0, 0xe47e, 0xd533, 0x7cb4, 0x0, 0x1);
        gbc.writeMem(0x3588, { 0xcb, 0x1e });
        gbc.writeMem(0x7cb4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb0d3);
        EXPECT(gbc.pc(), 0x358a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1E 0097
        gbc.setState(0x984a, 0x2889, 0xc600, 0xb440, 0x725c, 0xb36f, 0x1, 0x1);
        gbc.writeMem(0x984a, { 0xcb, 0x1e });
        gbc.writeMem(0xb36f, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2889);
        EXPECT(gbc.pc(), 0x984c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x984a), 0xcb);
        EXPECT(gbc.readMem(0x984b), 0x1e);
        EXPECT(gbc.readMem(0xb36f), 0x5);
        // CB 1E 009B
        gbc.setState(0xdfc9, 0x7cbe, 0xbf70, 0x1064, 0x56fd, 0xf518, 0x1, 0x0);
        gbc.writeMem(0xdfc9, { 0xcb, 0x1e });
        gbc.writeMem(0xf518, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7cbe);
        EXPECT(gbc.pc(), 0xdfcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc9), 0xcb);
        EXPECT(gbc.readMem(0xdfca), 0x1e);
        EXPECT(gbc.readMem(0xf518), 0x86);
        // CB 1E 009D
        gbc.setState(0x226, 0x1b42, 0xa90, 0x53e7, 0xeada, 0xae1c, 0x0, 0x0);
        gbc.writeMem(0x226, { 0xcb, 0x1e });
        gbc.writeMem(0xae1c, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1b42);
        EXPECT(gbc.pc(), 0x228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae1c), 0xaf);
        // CB 1E 00A2
        gbc.setState(0x6069, 0x874, 0xb340, 0x2ea7, 0x1aa5, 0x910f, 0x1, 0x0);
        gbc.writeMem(0x6069, { 0xcb, 0x1e });
        gbc.writeMem(0x910f, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x874);
        EXPECT(gbc.pc(), 0x606b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x910f), 0x4c);
        // CB 1E 00A3
        gbc.setState(0x9966, 0x6e71, 0x1960, 0xdeb4, 0x78ab, 0xe493, 0x0, 0x0);
        gbc.writeMem(0x9966, { 0xcb, 0x1e });
        gbc.writeMem(0xe493, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6e71);
        EXPECT(gbc.pc(), 0x9968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9966), 0xcb);
        EXPECT(gbc.readMem(0x9967), 0x1e);
        EXPECT(gbc.readMem(0xe493), 0x1);
        // CB 1E 00A4
        gbc.setState(0xa4e7, 0x73e, 0x5510, 0x69e2, 0x8504, 0x9790, 0x0, 0x0);
        gbc.writeMem(0x9790, { 0x29 });
        gbc.writeMem(0xa4e7, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x73e);
        EXPECT(gbc.pc(), 0xa4e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9790), 0x94);
        EXPECT(gbc.readMem(0xa4e7), 0xcb);
        EXPECT(gbc.readMem(0xa4e8), 0x1e);
        // CB 1E 00A6
        gbc.setState(0x8789, 0x1aae, 0x3100, 0xebfb, 0x6b85, 0xcd48, 0x1, 0x0);
        gbc.writeMem(0x8789, { 0xcb, 0x1e });
        gbc.writeMem(0xcd48, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1aae);
        EXPECT(gbc.pc(), 0x878b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8789), 0xcb);
        EXPECT(gbc.readMem(0x878a), 0x1e);
        EXPECT(gbc.readMem(0xcd48), 0x58);
        // CB 1E 00A7
        gbc.setState(0x9a26, 0x8e11, 0x2260, 0xe777, 0xb2ae, 0xcfd2, 0x0, 0x0);
        gbc.writeMem(0x9a26, { 0xcb, 0x1e });
        gbc.writeMem(0xcfd2, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8e11);
        EXPECT(gbc.pc(), 0x9a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a26), 0xcb);
        EXPECT(gbc.readMem(0x9a27), 0x1e);
        EXPECT(gbc.readMem(0xcfd2), 0x4d);
        // CB 1E 00A8
        gbc.setState(0x8414, 0x9ce1, 0x5ac0, 0x336c, 0x7d42, 0x8f9d, 0x0, 0x0);
        gbc.writeMem(0x8414, { 0xcb, 0x1e });
        gbc.writeMem(0x8f9d, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9ce1);
        EXPECT(gbc.pc(), 0x8416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8414), 0xcb);
        EXPECT(gbc.readMem(0x8415), 0x1e);
        EXPECT(gbc.readMem(0x8f9d), 0x43);
        // CB 1E 00AA
        gbc.setState(0xe6db, 0xe014, 0xdac0, 0xb608, 0x9cb6, 0xbc76, 0x1, 0x0);
        gbc.writeMem(0xbc76, { 0x10 });
        gbc.writeMem(0xe6db, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe014);
        EXPECT(gbc.pc(), 0xe6dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc76), 0x8);
        EXPECT(gbc.readMem(0xe6db), 0xcb);
        EXPECT(gbc.readMem(0xe6dc), 0x1e);
        // CB 1E 00AB
        gbc.setState(0x3219, 0x7877, 0xf3d0, 0x802c, 0x8200, 0xefd0, 0x1, 0x0);
        gbc.writeMem(0x3219, { 0xcb, 0x1e });
        gbc.writeMem(0xefd0, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7877);
        EXPECT(gbc.pc(), 0x321b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd0), 0xce);
        // CB 1E 00AC
        gbc.setState(0x34fe, 0xc8c8, 0x4ed0, 0x46a3, 0x4525, 0xc233, 0x1, 0x0);
        gbc.writeMem(0x34fe, { 0xcb, 0x1e });
        gbc.writeMem(0xc233, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc8c8);
        EXPECT(gbc.pc(), 0x3500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc233), 0xbf);
        // CB 1E 00AD
        gbc.setState(0x5a07, 0xdbb3, 0x3dc0, 0x9925, 0x6556, 0xbeb7, 0x1, 0x1);
        gbc.writeMem(0x5a07, { 0xcb, 0x1e });
        gbc.writeMem(0xbeb7, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xdbb3);
        EXPECT(gbc.pc(), 0x5a09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeb7), 0x6a);
        // CB 1E 00AE
        gbc.setState(0x4fa, 0xd247, 0x27d0, 0xa013, 0xe2d1, 0xeedb, 0x1, 0x1);
        gbc.writeMem(0x4fa, { 0xcb, 0x1e });
        gbc.writeMem(0xeedb, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xd247);
        EXPECT(gbc.pc(), 0x4fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeedb), 0x9d);
        // CB 1E 00B0
        gbc.setState(0xca2d, 0x16ba, 0xe640, 0xbcce, 0x41a6, 0x109f, 0x0, 0x1);
        gbc.writeMem(0x109f, { 0x0 });
        gbc.writeMem(0xca2d, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x16ba);
        EXPECT(gbc.pc(), 0xca2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca2d), 0xcb);
        EXPECT(gbc.readMem(0xca2e), 0x1e);
        // CB 1E 00B1
        gbc.setState(0x94e1, 0x674f, 0xf5d0, 0x1fa6, 0x4dc6, 0xa844, 0x1, 0x1);
        gbc.writeMem(0x94e1, { 0xcb, 0x1e });
        gbc.writeMem(0xa844, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x674f);
        EXPECT(gbc.pc(), 0x94e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e1), 0xcb);
        EXPECT(gbc.readMem(0x94e2), 0x1e);
        EXPECT(gbc.readMem(0xa844), 0xbe);
        // CB 1E 00B3
        gbc.setState(0x56, 0x2efa, 0x9a50, 0x6ffe, 0xd1a4, 0xc0a8, 0x1, 0x0);
        gbc.writeMem(0x56, { 0xcb, 0x1e });
        gbc.writeMem(0xc0a8, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2efa);
        EXPECT(gbc.pc(), 0x58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a8), 0xbc);
        // CB 1E 00B7
        gbc.setState(0x566e, 0x6180, 0x4c50, 0xae49, 0xcec2, 0xbace, 0x0, 0x0);
        gbc.writeMem(0x566e, { 0xcb, 0x1e });
        gbc.writeMem(0xbace, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6180);
        EXPECT(gbc.pc(), 0x5670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbace), 0xd2);
        // CB 1E 00BA
        gbc.setState(0xebfa, 0xc1f9, 0x2ca0, 0x8df3, 0xa754, 0x843b, 0x0, 0x1);
        gbc.writeMem(0x843b, { 0xe8 });
        gbc.writeMem(0xebfa, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc1f9);
        EXPECT(gbc.pc(), 0xebfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x843b), 0x74);
        EXPECT(gbc.readMem(0xebfa), 0xcb);
        EXPECT(gbc.readMem(0xebfb), 0x1e);
        // CB 1E 00BC
        gbc.setState(0x1414, 0xf2d2, 0x6350, 0x3917, 0x1909, 0xaafb, 0x0, 0x0);
        gbc.writeMem(0x1414, { 0xcb, 0x1e });
        gbc.writeMem(0xaafb, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf2d2);
        EXPECT(gbc.pc(), 0x1416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaafb), 0xb1);
        // CB 1E 00BF
        gbc.setState(0x1b38, 0x4d32, 0xd580, 0xe096, 0xa99d, 0x847d, 0x0, 0x0);
        gbc.writeMem(0x1b38, { 0xcb, 0x1e });
        gbc.writeMem(0x847d, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x4d32);
        EXPECT(gbc.pc(), 0x1b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x847d), 0x19);
        // CB 1E 00C0
        gbc.setState(0x551b, 0xd0a8, 0x2cd0, 0xdac1, 0x5e0b, 0xf740, 0x1, 0x1);
        gbc.writeMem(0x551b, { 0xcb, 0x1e });
        gbc.writeMem(0xf740, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd0a8);
        EXPECT(gbc.pc(), 0x551d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf740), 0xa9);
        // CB 1E 00C1
        gbc.setState(0x56ba, 0xca69, 0x5990, 0xb59f, 0x57f4, 0xc1b1, 0x0, 0x1);
        gbc.writeMem(0x56ba, { 0xcb, 0x1e });
        gbc.writeMem(0xc1b1, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xca69);
        EXPECT(gbc.pc(), 0x56bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b1), 0xee);
        // CB 1E 00C3
        gbc.setState(0x1b9b, 0x7c4, 0x3b50, 0x718c, 0x1174, 0x8621, 0x0, 0x1);
        gbc.writeMem(0x1b9b, { 0xcb, 0x1e });
        gbc.writeMem(0x8621, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7c4);
        EXPECT(gbc.pc(), 0x1b9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8621), 0x85);
        // CB 1E 00C4
        gbc.setState(0x68ab, 0x8fce, 0xee90, 0x3377, 0x5124, 0xbb17, 0x1, 0x1);
        gbc.writeMem(0x68ab, { 0xcb, 0x1e });
        gbc.writeMem(0xbb17, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8fce);
        EXPECT(gbc.pc(), 0x68ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb17), 0xf2);
        // CB 1E 00C5
        gbc.setState(0x4708, 0x1a2d, 0xbd30, 0x8a4, 0xd680, 0xb794, 0x0, 0x0);
        gbc.writeMem(0x4708, { 0xcb, 0x1e });
        gbc.writeMem(0xb794, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1a2d);
        EXPECT(gbc.pc(), 0x470a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb794), 0x82);
        // CB 1E 00C6
        gbc.setState(0x9d94, 0x5661, 0x3c0, 0x1b90, 0x9c4c, 0x8ce1, 0x1, 0x1);
        gbc.writeMem(0x8ce1, { 0xa9 });
        gbc.writeMem(0x9d94, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5661);
        EXPECT(gbc.pc(), 0x9d96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce1), 0x54);
        EXPECT(gbc.readMem(0x9d94), 0xcb);
        EXPECT(gbc.readMem(0x9d95), 0x1e);
        // CB 1E 00C7
        gbc.setState(0x152, 0x5464, 0x34d0, 0x524f, 0x1e04, 0x8ce8, 0x0, 0x0);
        gbc.writeMem(0x152, { 0xcb, 0x1e });
        gbc.writeMem(0x8ce8, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5464);
        EXPECT(gbc.pc(), 0x154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce8), 0xff);
        // CB 1E 00C8
        gbc.setState(0x62c7, 0x2f0d, 0x400, 0x3282, 0x72a5, 0xb742, 0x0, 0x0);
        gbc.writeMem(0x62c7, { 0xcb, 0x1e });
        gbc.writeMem(0xb742, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2f0d);
        EXPECT(gbc.pc(), 0x62c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb742), 0x66);
        // CB 1E 00CA
        gbc.setState(0xc, 0x1a5f, 0x7830, 0x346d, 0x5f88, 0xcc95, 0x1, 0x1);
        gbc.writeMem(0xc, { 0xcb, 0x1e });
        gbc.writeMem(0xcc95, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1a5f);
        EXPECT(gbc.pc(), 0xe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc95), 0xe3);
        // CB 1E 00CC
        gbc.setState(0x954a, 0xa7e4, 0xb690, 0x80, 0x35f6, 0xd67f, 0x0, 0x1);
        gbc.writeMem(0x954a, { 0xcb, 0x1e });
        gbc.writeMem(0xd67f, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa7e4);
        EXPECT(gbc.pc(), 0x954c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x954a), 0xcb);
        EXPECT(gbc.readMem(0x954b), 0x1e);
        EXPECT(gbc.readMem(0xd67f), 0xee);
        // CB 1E 00D2
        gbc.setState(0x92aa, 0x67fa, 0xd0c0, 0x941b, 0x6154, 0xcd4a, 0x1, 0x1);
        gbc.writeMem(0x92aa, { 0xcb, 0x1e });
        gbc.writeMem(0xcd4a, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x67fa);
        EXPECT(gbc.pc(), 0x92ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92aa), 0xcb);
        EXPECT(gbc.readMem(0x92ab), 0x1e);
        EXPECT(gbc.readMem(0xcd4a), 0x41);
        // CB 1E 00D3
        gbc.setState(0x2c87, 0x5b47, 0x3410, 0xc3bb, 0x22ae, 0xadb5, 0x1, 0x0);
        gbc.writeMem(0x2c87, { 0xcb, 0x1e });
        gbc.writeMem(0xadb5, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5b47);
        EXPECT(gbc.pc(), 0x2c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb5), 0xed);
        // CB 1E 00D5
        gbc.setState(0xaf8b, 0xa47b, 0x7230, 0xc242, 0xf213, 0x8b8e, 0x1, 0x1);
        gbc.writeMem(0x8b8e, { 0xe });
        gbc.writeMem(0xaf8b, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa47b);
        EXPECT(gbc.pc(), 0xaf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b8e), 0x87);
        EXPECT(gbc.readMem(0xaf8b), 0xcb);
        EXPECT(gbc.readMem(0xaf8c), 0x1e);
        // CB 1E 00D8
        gbc.setState(0x753e, 0xb2b6, 0xcd00, 0x3841, 0x41ee, 0xbc74, 0x0, 0x1);
        gbc.writeMem(0x753e, { 0xcb, 0x1e });
        gbc.writeMem(0xbc74, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb2b6);
        EXPECT(gbc.pc(), 0x7540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc74), 0x4e);
        // CB 1E 00D9
        gbc.setState(0xb398, 0xf7a4, 0x4ba0, 0x89f, 0x5122, 0xdfa6, 0x1, 0x0);
        gbc.writeMem(0xb398, { 0xcb, 0x1e });
        gbc.writeMem(0xdfa6, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf7a4);
        EXPECT(gbc.pc(), 0xb39a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb398), 0xcb);
        EXPECT(gbc.readMem(0xb399), 0x1e);
        EXPECT(gbc.readMem(0xdfa6), 0x5b);
        // CB 1E 00DB
        gbc.setState(0x99b8, 0x7c30, 0xc840, 0x8c1e, 0x5b8c, 0x9b49, 0x1, 0x0);
        gbc.writeMem(0x99b8, { 0xcb, 0x1e });
        gbc.writeMem(0x9b49, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7c30);
        EXPECT(gbc.pc(), 0x99ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b8), 0xcb);
        EXPECT(gbc.readMem(0x99b9), 0x1e);
        EXPECT(gbc.readMem(0x9b49), 0x57);
        // CB 1E 00DC
        gbc.setState(0x8d73, 0x5130, 0x590, 0xd527, 0xa9f3, 0x988e, 0x0, 0x0);
        gbc.writeMem(0x8d73, { 0xcb, 0x1e });
        gbc.writeMem(0x988e, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5130);
        EXPECT(gbc.pc(), 0x8d75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d73), 0xcb);
        EXPECT(gbc.readMem(0x8d74), 0x1e);
        EXPECT(gbc.readMem(0x988e), 0x9e);
        // CB 1E 00DD
        gbc.setState(0xb558, 0xa638, 0xc400, 0x45ff, 0x3941, 0xb0ea, 0x0, 0x0);
        gbc.writeMem(0xb0ea, { 0xee });
        gbc.writeMem(0xb558, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa638);
        EXPECT(gbc.pc(), 0xb55a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ea), 0x77);
        EXPECT(gbc.readMem(0xb558), 0xcb);
        EXPECT(gbc.readMem(0xb559), 0x1e);
        // CB 1E 00DE
        gbc.setState(0x76e8, 0x84dc, 0x4200, 0xea11, 0x1550, 0xb846, 0x1, 0x0);
        gbc.writeMem(0x76e8, { 0xcb, 0x1e });
        gbc.writeMem(0xb846, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x84dc);
        EXPECT(gbc.pc(), 0x76ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb846), 0x54);
        // CB 1E 00E0
        gbc.setState(0x5f6c, 0x56ff, 0x1c30, 0x786e, 0x1d0f, 0xa980, 0x1, 0x1);
        gbc.writeMem(0x5f6c, { 0xcb, 0x1e });
        gbc.writeMem(0xa980, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x56ff);
        EXPECT(gbc.pc(), 0x5f6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa980), 0xef);
        // CB 1E 00E2
        gbc.setState(0x1615, 0xa6a5, 0x51f0, 0x8d33, 0x5a10, 0xa88e, 0x0, 0x1);
        gbc.writeMem(0x1615, { 0xcb, 0x1e });
        gbc.writeMem(0xa88e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa6a5);
        EXPECT(gbc.pc(), 0x1617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88e), 0xa3);
        // CB 1E 00E3
        gbc.setState(0x3d1c, 0x2fc3, 0xd490, 0xc824, 0x7c12, 0x858c, 0x0, 0x1);
        gbc.writeMem(0x3d1c, { 0xcb, 0x1e });
        gbc.writeMem(0x858c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2fc3);
        EXPECT(gbc.pc(), 0x3d1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858c), 0x8d);
        // CB 1E 00E8
        gbc.setState(0x3ecf, 0x81e0, 0x2b70, 0x2d9e, 0x196f, 0xad75, 0x0, 0x1);
        gbc.writeMem(0x3ecf, { 0xcb, 0x1e });
        gbc.writeMem(0xad75, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x81e0);
        EXPECT(gbc.pc(), 0x3ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad75), 0xdc);
        // CB 1E 00E9
        gbc.setState(0x8dba, 0xaf41, 0x9b30, 0xbf90, 0xf031, 0x96fc, 0x1, 0x0);
        gbc.writeMem(0x8dba, { 0xcb, 0x1e });
        gbc.writeMem(0x96fc, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xaf41);
        EXPECT(gbc.pc(), 0x8dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dba), 0xcb);
        EXPECT(gbc.readMem(0x8dbb), 0x1e);
        EXPECT(gbc.readMem(0x96fc), 0xe8);
        // CB 1E 00EA
        gbc.setState(0x5199, 0x98c2, 0x8460, 0xf172, 0xbe3a, 0xee1e, 0x0, 0x0);
        gbc.writeMem(0x5199, { 0xcb, 0x1e });
        gbc.writeMem(0xee1e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x98c2);
        EXPECT(gbc.pc(), 0x519b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee1e), 0x54);
        // CB 1E 00ED
        gbc.setState(0x325a, 0x1693, 0x67e0, 0x1d8, 0x3292, 0x9194, 0x0, 0x0);
        gbc.writeMem(0x325a, { 0xcb, 0x1e });
        gbc.writeMem(0x9194, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1693);
        EXPECT(gbc.pc(), 0x325c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9194), 0x5f);
        // CB 1E 00EE
        gbc.setState(0x84b8, 0x9daf, 0xf110, 0x3201, 0xc8af, 0xaf1a, 0x1, 0x0);
        gbc.writeMem(0x84b8, { 0xcb, 0x1e });
        gbc.writeMem(0xaf1a, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9daf);
        EXPECT(gbc.pc(), 0x84ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b8), 0xcb);
        EXPECT(gbc.readMem(0x84b9), 0x1e);
        EXPECT(gbc.readMem(0xaf1a), 0xb2);
        // CB 1E 00F2
        gbc.setState(0x1aba, 0xdfa6, 0x9690, 0xf6c7, 0x6684, 0xdb0d, 0x0, 0x0);
        gbc.writeMem(0x1aba, { 0xcb, 0x1e });
        gbc.writeMem(0xdb0d, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdfa6);
        EXPECT(gbc.pc(), 0x1abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb0d), 0xc5);
        // CB 1E 00F4
        gbc.setState(0xde2b, 0xef1b, 0x4f30, 0x8656, 0xc608, 0xe2be, 0x1, 0x1);
        gbc.writeMem(0xde2b, { 0xcb, 0x1e });
        gbc.writeMem(0xe2be, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xef1b);
        EXPECT(gbc.pc(), 0xde2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde2b), 0xcb);
        EXPECT(gbc.readMem(0xde2c), 0x1e);
        EXPECT(gbc.readMem(0xe2be), 0x82);
        // CB 1E 00F5
        gbc.setState(0xaa2a, 0x6b2c, 0x2c50, 0x2fbf, 0xa518, 0xda40, 0x1, 0x1);
        gbc.writeMem(0xaa2a, { 0xcb, 0x1e });
        gbc.writeMem(0xda40, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6b2c);
        EXPECT(gbc.pc(), 0xaa2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa2a), 0xcb);
        EXPECT(gbc.readMem(0xaa2b), 0x1e);
        EXPECT(gbc.readMem(0xda40), 0xc2);
        // CB 1E 00F6
        gbc.setState(0x3b38, 0x6588, 0x3cc0, 0xa7d5, 0x97d0, 0xab47, 0x0, 0x1);
        gbc.writeMem(0x3b38, { 0xcb, 0x1e });
        gbc.writeMem(0xab47, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6588);
        EXPECT(gbc.pc(), 0x3b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab47), 0x2d);
        // CB 1E 00F8
        gbc.setState(0x1bde, 0xd959, 0xa3f0, 0x6f75, 0x3ba4, 0xf698, 0x0, 0x0);
        gbc.writeMem(0x1bde, { 0xcb, 0x1e });
        gbc.writeMem(0xf698, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd959);
        EXPECT(gbc.pc(), 0x1be0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf698), 0xd0);
        // CB 1E 00FB
        gbc.setState(0x5b4d, 0x8204, 0x7e0, 0xb5dc, 0x25d2, 0x86d4, 0x0, 0x0);
        gbc.writeMem(0x5b4d, { 0xcb, 0x1e });
        gbc.writeMem(0x86d4, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8204);
        EXPECT(gbc.pc(), 0x5b4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d4), 0x3c);
        // CB 1E 00FD
        gbc.setState(0x79f6, 0xd0e7, 0xe6d0, 0x5bd2, 0x7a34, 0xea22, 0x0, 0x1);
        gbc.writeMem(0x79f6, { 0xcb, 0x1e });
        gbc.writeMem(0xea22, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd0e7);
        EXPECT(gbc.pc(), 0x79f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea22), 0xd8);
        // CB 1E 00FE
        gbc.setState(0x29c6, 0x13f1, 0x3a30, 0x22b9, 0x1e96, 0x91fd, 0x0, 0x1);
        gbc.writeMem(0x29c6, { 0xcb, 0x1e });
        gbc.writeMem(0x91fd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x13f1);
        EXPECT(gbc.pc(), 0x29c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91fd), 0xcf);
        // CB 1E 00FF
        gbc.setState(0x93, 0x93fe, 0x1950, 0x32a5, 0x1733, 0xb87e, 0x0, 0x0);
        gbc.writeMem(0x93, { 0xcb, 0x1e });
        gbc.writeMem(0xb87e, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x93fe);
        EXPECT(gbc.pc(), 0x95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb87e), 0xea);
        // CB 1E 0101
        gbc.setState(0x44bc, 0xdb3b, 0xdc10, 0xc33d, 0x32db, 0x8e71, 0x1, 0x0);
        gbc.writeMem(0x44bc, { 0xcb, 0x1e });
        gbc.writeMem(0x8e71, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xdb3b);
        EXPECT(gbc.pc(), 0x44be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e71), 0xe6);
        // CB 1E 0102
        gbc.setState(0x73a8, 0x8a22, 0xc620, 0x2db5, 0xaf4a, 0xa640, 0x1, 0x1);
        gbc.writeMem(0x73a8, { 0xcb, 0x1e });
        gbc.writeMem(0xa640, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8a22);
        EXPECT(gbc.pc(), 0x73aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa640), 0x2e);
        // CB 1E 0104
        gbc.setState(0x751, 0xfb2d, 0x53e0, 0x1ece, 0x3a9d, 0xb215, 0x0, 0x0);
        gbc.writeMem(0x751, { 0xcb, 0x1e });
        gbc.writeMem(0xb215, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfb2d);
        EXPECT(gbc.pc(), 0x753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb215), 0x4d);
        // CB 1E 0106
        gbc.setState(0xcf98, 0x3405, 0x94c0, 0x6156, 0xcc0e, 0xb5b2, 0x1, 0x0);
        gbc.writeMem(0xb5b2, { 0x7d });
        gbc.writeMem(0xcf98, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x3405);
        EXPECT(gbc.pc(), 0xcf9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b2), 0x3e);
        EXPECT(gbc.readMem(0xcf98), 0xcb);
        EXPECT(gbc.readMem(0xcf99), 0x1e);
        // CB 1E 0108
        gbc.setState(0x81d7, 0xa05a, 0x6130, 0xf5ad, 0x4109, 0xed0c, 0x0, 0x0);
        gbc.writeMem(0x81d7, { 0xcb, 0x1e });
        gbc.writeMem(0xed0c, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa05a);
        EXPECT(gbc.pc(), 0x81d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d7), 0xcb);
        EXPECT(gbc.readMem(0x81d8), 0x1e);
        EXPECT(gbc.readMem(0xed0c), 0xc1);
        // CB 1E 010E
        gbc.setState(0xc894, 0xf4b9, 0x4ab0, 0xe8a3, 0xce, 0xb2a7, 0x0, 0x0);
        gbc.writeMem(0xb2a7, { 0x3 });
        gbc.writeMem(0xc894, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf4b9);
        EXPECT(gbc.pc(), 0xc896);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a7), 0x81);
        EXPECT(gbc.readMem(0xc894), 0xcb);
        EXPECT(gbc.readMem(0xc895), 0x1e);
        // CB 1E 0112
        gbc.setState(0x2c49, 0xdcc7, 0xc80, 0x57cf, 0x4ea6, 0xa1d0, 0x0, 0x1);
        gbc.writeMem(0x2c49, { 0xcb, 0x1e });
        gbc.writeMem(0xa1d0, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xdcc7);
        EXPECT(gbc.pc(), 0x2c4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1d0), 0x75);
        // CB 1E 0113
        gbc.setState(0xe151, 0xcb68, 0x82f0, 0x8ea3, 0x6634, 0x81e6, 0x1, 0x0);
        gbc.writeMem(0x81e6, { 0x1 });
        gbc.writeMem(0xe151, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xcb68);
        EXPECT(gbc.pc(), 0xe153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e6), 0x80);
        EXPECT(gbc.readMem(0xe151), 0xcb);
        EXPECT(gbc.readMem(0xe152), 0x1e);
        // CB 1E 0114
        gbc.setState(0x20a9, 0x6dce, 0x9ff0, 0x71f2, 0x9a50, 0x9618, 0x0, 0x0);
        gbc.writeMem(0x20a9, { 0xcb, 0x1e });
        gbc.writeMem(0x9618, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6dce);
        EXPECT(gbc.pc(), 0x20ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9618), 0xb9);
        // CB 1E 011E
        gbc.setState(0xc8a6, 0x827e, 0x1980, 0x5300, 0x2e06, 0xe2c0, 0x1, 0x1);
        gbc.writeMem(0xc8a6, { 0xcb, 0x1e });
        gbc.writeMem(0xe2c0, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x827e);
        EXPECT(gbc.pc(), 0xc8a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a6), 0xcb);
        EXPECT(gbc.readMem(0xc8a7), 0x1e);
        EXPECT(gbc.readMem(0xe2c0), 0x18);
        // CB 1E 0120
        gbc.setState(0x2176, 0xdac0, 0x3a00, 0x591b, 0xa73b, 0xaf1f, 0x0, 0x0);
        gbc.writeMem(0x2176, { 0xcb, 0x1e });
        gbc.writeMem(0xaf1f, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xdac0);
        EXPECT(gbc.pc(), 0x2178);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf1f), 0x35);
        // CB 1E 0122
        gbc.setState(0xbc7, 0x6a4b, 0x3680, 0x2770, 0x1a87, 0xb555, 0x0, 0x1);
        gbc.writeMem(0xbc7, { 0xcb, 0x1e });
        gbc.writeMem(0xb555, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6a4b);
        EXPECT(gbc.pc(), 0xbc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb555), 0x1a);
        // CB 1E 0123
        gbc.setState(0x918c, 0x120, 0x56c0, 0xacc0, 0xf23f, 0xb4c8, 0x0, 0x1);
        gbc.writeMem(0x918c, { 0xcb, 0x1e });
        gbc.writeMem(0xb4c8, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x120);
        EXPECT(gbc.pc(), 0x918e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x918c), 0xcb);
        EXPECT(gbc.readMem(0x918d), 0x1e);
        EXPECT(gbc.readMem(0xb4c8), 0x56);
        // CB 1E 0124
        gbc.setState(0xd31a, 0xe5c6, 0x4ab0, 0x4bfd, 0x43e9, 0xa8fb, 0x0, 0x0);
        gbc.writeMem(0xa8fb, { 0x76 });
        gbc.writeMem(0xd31a, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe5c6);
        EXPECT(gbc.pc(), 0xd31c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8fb), 0xbb);
        EXPECT(gbc.readMem(0xd31a), 0xcb);
        EXPECT(gbc.readMem(0xd31b), 0x1e);
        // CB 1E 012B
        gbc.setState(0x1fbf, 0x542, 0x8ec0, 0xcc0b, 0x8c45, 0x916f, 0x0, 0x0);
        gbc.writeMem(0x1fbf, { 0xcb, 0x1e });
        gbc.writeMem(0x916f, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x542);
        EXPECT(gbc.pc(), 0x1fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x916f), 0x2e);
        // CB 1E 012C
        gbc.setState(0x2638, 0x6aa3, 0x7c80, 0xe33a, 0xc22c, 0xe07d, 0x1, 0x0);
        gbc.writeMem(0x2638, { 0xcb, 0x1e });
        gbc.writeMem(0xe07d, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6aa3);
        EXPECT(gbc.pc(), 0x263a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07d), 0x5);
        // CB 1E 012E
        gbc.setState(0x5296, 0x2355, 0x4740, 0xd2d6, 0x7ec7, 0xb278, 0x0, 0x0);
        gbc.writeMem(0x5296, { 0xcb, 0x1e });
        gbc.writeMem(0xb278, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2355);
        EXPECT(gbc.pc(), 0x5298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb278), 0x66);
        // CB 1E 0131
        gbc.setState(0x38f1, 0xcfb0, 0xf430, 0xb324, 0xd56f, 0xd4cf, 0x1, 0x0);
        gbc.writeMem(0x38f1, { 0xcb, 0x1e });
        gbc.writeMem(0xd4cf, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcfb0);
        EXPECT(gbc.pc(), 0x38f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4cf), 0xe0);
        // CB 1E 013B
        gbc.setState(0x4dc8, 0x1df6, 0x6ba0, 0x371b, 0x4bf, 0xd830, 0x1, 0x1);
        gbc.writeMem(0x4dc8, { 0xcb, 0x1e });
        gbc.writeMem(0xd830, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1df6);
        EXPECT(gbc.pc(), 0x4dca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd830), 0x7d);
        // CB 1E 013C
        gbc.setState(0x8947, 0x88a, 0x4fc0, 0x3f03, 0xfb8d, 0xce4f, 0x0, 0x1);
        gbc.writeMem(0x8947, { 0xcb, 0x1e });
        gbc.writeMem(0xce4f, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x88a);
        EXPECT(gbc.pc(), 0x8949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8947), 0xcb);
        EXPECT(gbc.readMem(0x8948), 0x1e);
        EXPECT(gbc.readMem(0xce4f), 0x5e);
        // CB 1E 013E
        gbc.setState(0x3ca1, 0x99be, 0x8c00, 0xd4d, 0x2a16, 0xa533, 0x0, 0x1);
        gbc.writeMem(0x3ca1, { 0xcb, 0x1e });
        gbc.writeMem(0xa533, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x99be);
        EXPECT(gbc.pc(), 0x3ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa533), 0x5f);
        // CB 1E 013F
        gbc.setState(0xe5a1, 0xd8e6, 0xa10, 0xa29c, 0xb99a, 0xd1b7, 0x0, 0x0);
        gbc.writeMem(0xd1b7, { 0x3 });
        gbc.writeMem(0xe5a1, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd8e6);
        EXPECT(gbc.pc(), 0xe5a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b7), 0x81);
        EXPECT(gbc.readMem(0xe5a1), 0xcb);
        EXPECT(gbc.readMem(0xe5a2), 0x1e);
        // CB 1E 0141
        gbc.setState(0xb452, 0xba91, 0xd090, 0x799d, 0x50b8, 0x94fa, 0x0, 0x1);
        gbc.writeMem(0x94fa, { 0xeb });
        gbc.writeMem(0xb452, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xba91);
        EXPECT(gbc.pc(), 0xb454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94fa), 0xf5);
        EXPECT(gbc.readMem(0xb452), 0xcb);
        EXPECT(gbc.readMem(0xb453), 0x1e);
        // CB 1E 0142
        gbc.setState(0x8033, 0x78c8, 0x4a50, 0x101a, 0x7035, 0x82f6, 0x1, 0x1);
        gbc.writeMem(0x8033, { 0xcb, 0x1e });
        gbc.writeMem(0x82f6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x78c8);
        EXPECT(gbc.pc(), 0x8035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8033), 0xcb);
        EXPECT(gbc.readMem(0x8034), 0x1e);
        EXPECT(gbc.readMem(0x82f6), 0xcf);
        // CB 1E 0143
        gbc.setState(0x260d, 0x3347, 0x8810, 0x8a82, 0xad0e, 0xc055, 0x0, 0x0);
        gbc.writeMem(0x260d, { 0xcb, 0x1e });
        gbc.writeMem(0xc055, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3347);
        EXPECT(gbc.pc(), 0x260f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc055), 0xcf);
        // CB 1E 0145
        gbc.setState(0x4f73, 0xd1a8, 0xf660, 0x837c, 0xc843, 0x478b, 0x1, 0x0);
        gbc.writeMem(0x478b, { 0x0 });
        gbc.writeMem(0x4f73, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd1a8);
        EXPECT(gbc.pc(), 0x4f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1E 0146
        gbc.setState(0xe61f, 0x1580, 0xb0f0, 0xea64, 0x5d15, 0xc999, 0x1, 0x1);
        gbc.writeMem(0xc999, { 0x6d });
        gbc.writeMem(0xe61f, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1580);
        EXPECT(gbc.pc(), 0xe621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc999), 0xb6);
        EXPECT(gbc.readMem(0xe61f), 0xcb);
        EXPECT(gbc.readMem(0xe620), 0x1e);
        // CB 1E 0147
        gbc.setState(0x556a, 0x4f1b, 0x3990, 0x4f6c, 0x3b2c, 0xc458, 0x0, 0x1);
        gbc.writeMem(0x556a, { 0xcb, 0x1e });
        gbc.writeMem(0xc458, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4f1b);
        EXPECT(gbc.pc(), 0x556c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc458), 0x9f);
        // CB 1E 0148
        gbc.setState(0x8791, 0x3f7a, 0x4850, 0xd0dd, 0xe056, 0xbf31, 0x1, 0x1);
        gbc.writeMem(0x8791, { 0xcb, 0x1e });
        gbc.writeMem(0xbf31, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3f7a);
        EXPECT(gbc.pc(), 0x8793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8791), 0xcb);
        EXPECT(gbc.readMem(0x8792), 0x1e);
        EXPECT(gbc.readMem(0xbf31), 0xa7);
        // CB 1E 0149
        gbc.setState(0x108c, 0xc45e, 0xb090, 0x5111, 0x98c2, 0xabb7, 0x1, 0x1);
        gbc.writeMem(0x108c, { 0xcb, 0x1e });
        gbc.writeMem(0xabb7, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc45e);
        EXPECT(gbc.pc(), 0x108e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb7), 0xbc);
        // CB 1E 014B
        gbc.setState(0x8546, 0x6503, 0xfab0, 0xfd52, 0x4949, 0x9b2f, 0x0, 0x1);
        gbc.writeMem(0x8546, { 0xcb, 0x1e });
        gbc.writeMem(0x9b2f, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6503);
        EXPECT(gbc.pc(), 0x8548);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8546), 0xcb);
        EXPECT(gbc.readMem(0x8547), 0x1e);
        EXPECT(gbc.readMem(0x9b2f), 0xbd);
        // CB 1E 014E
        gbc.setState(0xdb7f, 0xf7a, 0x9df0, 0x9253, 0x5d34, 0x96ef, 0x1, 0x1);
        gbc.writeMem(0x96ef, { 0x3f });
        gbc.writeMem(0xdb7f, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf7a);
        EXPECT(gbc.pc(), 0xdb81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96ef), 0x9f);
        EXPECT(gbc.readMem(0xdb7f), 0xcb);
        EXPECT(gbc.readMem(0xdb80), 0x1e);
        // CB 1E 014F
        gbc.setState(0x3269, 0x1c04, 0x1dc0, 0xba98, 0x6e6f, 0xff0e, 0x1, 0x1);
        gbc.writeMem(0x3269, { 0xcb, 0x1e });
        gbc.writeMem(0xff0e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1c04);
        EXPECT(gbc.pc(), 0x326b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0e), 0x53);
        // CB 1E 0151
        gbc.setState(0x532f, 0x610c, 0x55c0, 0x78de, 0x1f31, 0xb2c8, 0x1, 0x1);
        gbc.writeMem(0x532f, { 0xcb, 0x1e });
        gbc.writeMem(0xb2c8, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x610c);
        EXPECT(gbc.pc(), 0x5331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c8), 0x3d);
        // CB 1E 015B
        gbc.setState(0x9750, 0x81c5, 0xfce0, 0x48ed, 0xd6e7, 0xed62, 0x1, 0x1);
        gbc.writeMem(0x9750, { 0xcb, 0x1e });
        gbc.writeMem(0xed62, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x81c5);
        EXPECT(gbc.pc(), 0x9752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9750), 0xcb);
        EXPECT(gbc.readMem(0x9751), 0x1e);
        EXPECT(gbc.readMem(0xed62), 0x2c);
        // CB 1E 015D
        gbc.setState(0x4618, 0x62fb, 0x2a30, 0x59ea, 0xb3cb, 0xd1f5, 0x1, 0x0);
        gbc.writeMem(0x4618, { 0xcb, 0x1e });
        gbc.writeMem(0xd1f5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x62fb);
        EXPECT(gbc.pc(), 0x461a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f5), 0xa3);
        // CB 1E 015E
        gbc.setState(0x3144, 0xa1f4, 0x6c40, 0x857, 0x7ded, 0xb3d9, 0x1, 0x0);
        gbc.writeMem(0x3144, { 0xcb, 0x1e });
        gbc.writeMem(0xb3d9, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa1f4);
        EXPECT(gbc.pc(), 0x3146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d9), 0x4d);
        // CB 1E 015F
        gbc.setState(0x8e0d, 0x80df, 0xccf0, 0xc4c3, 0x9803, 0xeca2, 0x0, 0x1);
        gbc.writeMem(0x8e0d, { 0xcb, 0x1e });
        gbc.writeMem(0xeca2, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x80df);
        EXPECT(gbc.pc(), 0x8e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e0d), 0xcb);
        EXPECT(gbc.readMem(0x8e0e), 0x1e);
        EXPECT(gbc.readMem(0xeca2), 0xee);
        // CB 1E 0163
        gbc.setState(0x9db9, 0xe708, 0x66c0, 0x5f41, 0xea26, 0x8b8d, 0x1, 0x0);
        gbc.writeMem(0x8b8d, { 0x7 });
        gbc.writeMem(0x9db9, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe708);
        EXPECT(gbc.pc(), 0x9dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b8d), 0x3);
        EXPECT(gbc.readMem(0x9db9), 0xcb);
        EXPECT(gbc.readMem(0x9dba), 0x1e);
        // CB 1E 0167
        gbc.setState(0xcfcc, 0x39c8, 0xbbf0, 0xd487, 0xa926, 0x8690, 0x0, 0x1);
        gbc.writeMem(0x8690, { 0x2b });
        gbc.writeMem(0xcfcc, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x39c8);
        EXPECT(gbc.pc(), 0xcfce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8690), 0x95);
        EXPECT(gbc.readMem(0xcfcc), 0xcb);
        EXPECT(gbc.readMem(0xcfcd), 0x1e);
        // CB 1E 0168
        gbc.setState(0x7fcf, 0xe048, 0xc5d0, 0xf846, 0xf37c, 0xe4ed, 0x1, 0x1);
        gbc.writeMem(0x7fcf, { 0xcb, 0x1e });
        gbc.writeMem(0xe4ed, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe048);
        EXPECT(gbc.pc(), 0x7fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ed), 0x9c);
        // CB 1E 0169
        gbc.setState(0xd9b1, 0xdac0, 0xd4d0, 0x7e59, 0x3c12, 0x818d, 0x0, 0x0);
        gbc.writeMem(0x818d, { 0xf4 });
        gbc.writeMem(0xd9b1, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xdac0);
        EXPECT(gbc.pc(), 0xd9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818d), 0xfa);
        EXPECT(gbc.readMem(0xd9b1), 0xcb);
        EXPECT(gbc.readMem(0xd9b2), 0x1e);
        // CB 1E 016B
        gbc.setState(0xcaa, 0xb01e, 0x9e00, 0xc264, 0xe0fb, 0xda07, 0x1, 0x0);
        gbc.writeMem(0xcaa, { 0xcb, 0x1e });
        gbc.writeMem(0xda07, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb01e);
        EXPECT(gbc.pc(), 0xcac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda07), 0x24);
        // CB 1E 016C
        gbc.setState(0x9793, 0xac59, 0x4ca0, 0xc361, 0x15ad, 0x812a, 0x1, 0x1);
        gbc.writeMem(0x812a, { 0x55 });
        gbc.writeMem(0x9793, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xac59);
        EXPECT(gbc.pc(), 0x9795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x812a), 0x2a);
        EXPECT(gbc.readMem(0x9793), 0xcb);
        EXPECT(gbc.readMem(0x9794), 0x1e);
        // CB 1E 016E
        gbc.setState(0xa951, 0xaa35, 0x2380, 0x2a8d, 0xf0e7, 0xea59, 0x1, 0x1);
        gbc.writeMem(0xa951, { 0xcb, 0x1e });
        gbc.writeMem(0xea59, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xaa35);
        EXPECT(gbc.pc(), 0xa953);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa951), 0xcb);
        EXPECT(gbc.readMem(0xa952), 0x1e);
        EXPECT(gbc.readMem(0xea59), 0x73);
        // CB 1E 0170
        gbc.setState(0xe8f1, 0x6e79, 0x4b60, 0xeb5c, 0x6926, 0xfdba, 0x1, 0x0);
        gbc.writeMem(0xe8f1, { 0xcb, 0x1e });
        gbc.writeMem(0xfdba, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6e79);
        EXPECT(gbc.pc(), 0xe8f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f1), 0xcb);
        EXPECT(gbc.readMem(0xe8f2), 0x1e);
        EXPECT(gbc.readMem(0xfdba), 0x4);
        // CB 1E 0173
        gbc.setState(0x44c, 0xbd86, 0xb8a0, 0x5ae7, 0xb8c4, 0xbf86, 0x0, 0x0);
        gbc.writeMem(0x44c, { 0xcb, 0x1e });
        gbc.writeMem(0xbf86, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbd86);
        EXPECT(gbc.pc(), 0x44e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf86), 0x75);
        // CB 1E 0174
        gbc.setState(0x16fe, 0xaa8a, 0x9ff0, 0xb5a8, 0x21cb, 0x9a5c, 0x0, 0x1);
        gbc.writeMem(0x16fe, { 0xcb, 0x1e });
        gbc.writeMem(0x9a5c, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xaa8a);
        EXPECT(gbc.pc(), 0x1700);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a5c), 0xea);
        // CB 1E 0175
        gbc.setState(0x92f, 0xae25, 0xf90, 0xbcde, 0xecb6, 0x84ff, 0x1, 0x0);
        gbc.writeMem(0x92f, { 0xcb, 0x1e });
        gbc.writeMem(0x84ff, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xae25);
        EXPECT(gbc.pc(), 0x931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ff), 0xe9);
        // CB 1E 0176
        gbc.setState(0xdb9b, 0xe701, 0x4a10, 0x176b, 0xadc2, 0xafe0, 0x1, 0x1);
        gbc.writeMem(0xafe0, { 0xb3 });
        gbc.writeMem(0xdb9b, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe701);
        EXPECT(gbc.pc(), 0xdb9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafe0), 0xd9);
        EXPECT(gbc.readMem(0xdb9b), 0xcb);
        EXPECT(gbc.readMem(0xdb9c), 0x1e);
        // CB 1E 0177
        gbc.setState(0xe678, 0x3cae, 0x7060, 0x4422, 0xe2c4, 0x85ec, 0x0, 0x0);
        gbc.writeMem(0x85ec, { 0xf1 });
        gbc.writeMem(0xe678, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3cae);
        EXPECT(gbc.pc(), 0xe67a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ec), 0x78);
        EXPECT(gbc.readMem(0xe678), 0xcb);
        EXPECT(gbc.readMem(0xe679), 0x1e);
        // CB 1E 017A
        gbc.setState(0xd3ef, 0x4fe, 0x6750, 0xc74d, 0x14dd, 0x9759, 0x0, 0x0);
        gbc.writeMem(0x9759, { 0x0 });
        gbc.writeMem(0xd3ef, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4fe);
        EXPECT(gbc.pc(), 0xd3f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9759), 0x80);
        EXPECT(gbc.readMem(0xd3ef), 0xcb);
        EXPECT(gbc.readMem(0xd3f0), 0x1e);
        // CB 1E 017B
        gbc.setState(0x5d1f, 0x94, 0x4b10, 0x3173, 0xc5ec, 0x81bd, 0x0, 0x0);
        gbc.writeMem(0x5d1f, { 0xcb, 0x1e });
        gbc.writeMem(0x81bd, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x94);
        EXPECT(gbc.pc(), 0x5d21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81bd), 0xaf);
        // CB 1E 017D
        gbc.setState(0xa4e5, 0xb6a2, 0xf3e0, 0x28c9, 0x82d, 0xaccc, 0x0, 0x1);
        gbc.writeMem(0xa4e5, { 0xcb, 0x1e });
        gbc.writeMem(0xaccc, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xb6a2);
        EXPECT(gbc.pc(), 0xa4e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4e5), 0xcb);
        EXPECT(gbc.readMem(0xa4e6), 0x1e);
        EXPECT(gbc.readMem(0xaccc), 0x2b);
        // CB 1E 017F
        gbc.setState(0x852b, 0x90c0, 0xef40, 0xed50, 0xea6b, 0xf23b, 0x1, 0x1);
        gbc.writeMem(0x852b, { 0xcb, 0x1e });
        gbc.writeMem(0xf23b, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x90c0);
        EXPECT(gbc.pc(), 0x852d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852b), 0xcb);
        EXPECT(gbc.readMem(0x852c), 0x1e);
        EXPECT(gbc.readMem(0xf23b), 0x76);
        // CB 1E 0182
        gbc.setState(0xa859, 0xecdd, 0x3d0, 0xaf5f, 0xbede, 0xc551, 0x0, 0x1);
        gbc.writeMem(0xa859, { 0xcb, 0x1e });
        gbc.writeMem(0xc551, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xecdd);
        EXPECT(gbc.pc(), 0xa85b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa859), 0xcb);
        EXPECT(gbc.readMem(0xa85a), 0x1e);
        EXPECT(gbc.readMem(0xc551), 0xbd);
        // CB 1E 0183
        gbc.setState(0xd25c, 0xd631, 0x7330, 0xa630, 0x474, 0x9288, 0x0, 0x0);
        gbc.writeMem(0x9288, { 0x5a });
        gbc.writeMem(0xd25c, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd631);
        EXPECT(gbc.pc(), 0xd25e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9288), 0xad);
        EXPECT(gbc.readMem(0xd25c), 0xcb);
        EXPECT(gbc.readMem(0xd25d), 0x1e);
        // CB 1E 0186
        gbc.setState(0x44ed, 0x26f2, 0x8930, 0x362c, 0x2050, 0xe118, 0x0, 0x1);
        gbc.writeMem(0x44ed, { 0xcb, 0x1e });
        gbc.writeMem(0xe118, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x26f2);
        EXPECT(gbc.pc(), 0x44ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe118), 0xda);
        // CB 1E 0189
        gbc.setState(0x4e0, 0xb38c, 0x1810, 0x55f7, 0x6d1b, 0xf583, 0x1, 0x0);
        gbc.writeMem(0x4e0, { 0xcb, 0x1e });
        gbc.writeMem(0xf583, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb38c);
        EXPECT(gbc.pc(), 0x4e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf583), 0xfa);
        // CB 1E 018A
        gbc.setState(0x540a, 0xdd5a, 0xde60, 0x497d, 0xe9f1, 0xb8f5, 0x0, 0x0);
        gbc.writeMem(0x540a, { 0xcb, 0x1e });
        gbc.writeMem(0xb8f5, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdd5a);
        EXPECT(gbc.pc(), 0x540c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f5), 0x5b);
        // CB 1E 018C
        gbc.setState(0xc205, 0x2ca0, 0x5150, 0xf0a9, 0xf209, 0xa1a9, 0x1, 0x1);
        gbc.writeMem(0xa1a9, { 0x61 });
        gbc.writeMem(0xc205, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2ca0);
        EXPECT(gbc.pc(), 0xc207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a9), 0xb0);
        EXPECT(gbc.readMem(0xc205), 0xcb);
        EXPECT(gbc.readMem(0xc206), 0x1e);
        // CB 1E 0193
        gbc.setState(0x7322, 0x381d, 0x6e0, 0x41b6, 0xf4f, 0x8728, 0x0, 0x0);
        gbc.writeMem(0x7322, { 0xcb, 0x1e });
        gbc.writeMem(0x8728, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x381d);
        EXPECT(gbc.pc(), 0x7324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8728), 0x2c);
        // CB 1E 019A
        gbc.setState(0xb4ea, 0xdae0, 0x8810, 0x3402, 0x12e8, 0xdb52, 0x1, 0x0);
        gbc.writeMem(0xb4ea, { 0xcb, 0x1e });
        gbc.writeMem(0xdb52, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdae0);
        EXPECT(gbc.pc(), 0xb4ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ea), 0xcb);
        EXPECT(gbc.readMem(0xb4eb), 0x1e);
        EXPECT(gbc.readMem(0xdb52), 0x89);
        // CB 1E 019B
        gbc.setState(0xc671, 0x7f17, 0x4fb0, 0x4cea, 0x615d, 0xc17e, 0x0, 0x0);
        gbc.writeMem(0xc17e, { 0xf6 });
        gbc.writeMem(0xc671, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7f17);
        EXPECT(gbc.pc(), 0xc673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc17e), 0xfb);
        EXPECT(gbc.readMem(0xc671), 0xcb);
        EXPECT(gbc.readMem(0xc672), 0x1e);
        // CB 1E 019E
        gbc.setState(0xb586, 0x82e, 0x8100, 0xa1d3, 0xb968, 0xb019, 0x0, 0x1);
        gbc.writeMem(0xb019, { 0xee });
        gbc.writeMem(0xb586, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x82e);
        EXPECT(gbc.pc(), 0xb588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb019), 0x77);
        EXPECT(gbc.readMem(0xb586), 0xcb);
        EXPECT(gbc.readMem(0xb587), 0x1e);
        // CB 1E 019F
        gbc.setState(0xf0, 0x8cd1, 0x1f50, 0x8bef, 0xeead, 0xadc9, 0x0, 0x0);
        gbc.writeMem(0xf0, { 0xcb, 0x1e });
        gbc.writeMem(0xadc9, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8cd1);
        EXPECT(gbc.pc(), 0xf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc9), 0xe5);
        // CB 1E 01A0
        gbc.setState(0xca1b, 0x2804, 0x5960, 0xd23a, 0xbedb, 0xba52, 0x0, 0x0);
        gbc.writeMem(0xba52, { 0x75 });
        gbc.writeMem(0xca1b, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2804);
        EXPECT(gbc.pc(), 0xca1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba52), 0x3a);
        EXPECT(gbc.readMem(0xca1b), 0xcb);
        EXPECT(gbc.readMem(0xca1c), 0x1e);
        // CB 1E 01A3
        gbc.setState(0xabb6, 0x651c, 0xcd80, 0xa61d, 0x4e75, 0xe206, 0x1, 0x1);
        gbc.writeMem(0xabb6, { 0xcb, 0x1e });
        gbc.writeMem(0xe206, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x651c);
        EXPECT(gbc.pc(), 0xabb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb6), 0xcb);
        EXPECT(gbc.readMem(0xabb7), 0x1e);
        EXPECT(gbc.readMem(0xe206), 0x7e);
        // CB 1E 01A5
        gbc.setState(0x716a, 0x1040, 0x3c40, 0x43e9, 0x5ff9, 0x929d, 0x0, 0x0);
        gbc.writeMem(0x716a, { 0xcb, 0x1e });
        gbc.writeMem(0x929d, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1040);
        EXPECT(gbc.pc(), 0x716c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x929d), 0x32);
        // CB 1E 01A8
        gbc.setState(0x8d62, 0x6f51, 0xc1a0, 0xb64a, 0x2630, 0xa324, 0x0, 0x1);
        gbc.writeMem(0x8d62, { 0xcb, 0x1e });
        gbc.writeMem(0xa324, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6f51);
        EXPECT(gbc.pc(), 0x8d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d62), 0xcb);
        EXPECT(gbc.readMem(0x8d63), 0x1e);
        EXPECT(gbc.readMem(0xa324), 0x17);
        // CB 1E 01AB
        gbc.setState(0x89ac, 0xa93a, 0x9f10, 0x8873, 0xed5f, 0xe119, 0x0, 0x1);
        gbc.writeMem(0x89ac, { 0xcb, 0x1e });
        gbc.writeMem(0xe119, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa93a);
        EXPECT(gbc.pc(), 0x89ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89ac), 0xcb);
        EXPECT(gbc.readMem(0x89ad), 0x1e);
        EXPECT(gbc.readMem(0xe119), 0xcf);
        // CB 1E 01AC
        gbc.setState(0xe4c, 0x6fe5, 0xa060, 0xedd4, 0x2bee, 0xb210, 0x0, 0x0);
        gbc.writeMem(0xe4c, { 0xcb, 0x1e });
        gbc.writeMem(0xb210, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6fe5);
        EXPECT(gbc.pc(), 0xe4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb210), 0x57);
        // CB 1E 01AE
        gbc.setState(0x708b, 0xb93, 0x8a0, 0xdb9c, 0x631a, 0xe10a, 0x1, 0x0);
        gbc.writeMem(0x708b, { 0xcb, 0x1e });
        gbc.writeMem(0xe10a, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb93);
        EXPECT(gbc.pc(), 0x708d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe10a), 0x7b);
        // CB 1E 01B0
        gbc.setState(0x54a2, 0xb504, 0x5d60, 0x29d4, 0x9a9c, 0xea83, 0x0, 0x0);
        gbc.writeMem(0x54a2, { 0xcb, 0x1e });
        gbc.writeMem(0xea83, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb504);
        EXPECT(gbc.pc(), 0x54a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea83), 0x67);
        // CB 1E 01B2
        gbc.setState(0x5877, 0x93d9, 0x6d0, 0x7b3d, 0xb450, 0x9b59, 0x1, 0x0);
        gbc.writeMem(0x5877, { 0xcb, 0x1e });
        gbc.writeMem(0x9b59, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x93d9);
        EXPECT(gbc.pc(), 0x5879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b59), 0xad);
        // CB 1E 01B4
        gbc.setState(0x69, 0xfd40, 0x23d0, 0xe0ad, 0x83fd, 0xae4b, 0x0, 0x1);
        gbc.writeMem(0x69, { 0xcb, 0x1e });
        gbc.writeMem(0xae4b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xfd40);
        EXPECT(gbc.pc(), 0x6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae4b), 0xa3);
        // CB 1E 01B6
        gbc.setState(0x9420, 0xf7c9, 0xd150, 0xa7f5, 0x644b, 0xe086, 0x1, 0x0);
        gbc.writeMem(0x9420, { 0xcb, 0x1e });
        gbc.writeMem(0xe086, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf7c9);
        EXPECT(gbc.pc(), 0x9422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9420), 0xcb);
        EXPECT(gbc.readMem(0x9421), 0x1e);
        EXPECT(gbc.readMem(0xe086), 0xc0);
        // CB 1E 01B7
        gbc.setState(0x1554, 0x70b3, 0xb50, 0xe6de, 0xeabd, 0xee09, 0x1, 0x1);
        gbc.writeMem(0x1554, { 0xcb, 0x1e });
        gbc.writeMem(0xee09, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x70b3);
        EXPECT(gbc.pc(), 0x1556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee09), 0xf3);
        // CB 1E 01BE
        gbc.setState(0xa392, 0xfb13, 0xcd60, 0xbf66, 0x4023, 0xe3ea, 0x1, 0x1);
        gbc.writeMem(0xa392, { 0xcb, 0x1e });
        gbc.writeMem(0xe3ea, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfb13);
        EXPECT(gbc.pc(), 0xa394);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa392), 0xcb);
        EXPECT(gbc.readMem(0xa393), 0x1e);
        EXPECT(gbc.readMem(0xe3ea), 0x44);
        // CB 1E 01C3
        gbc.setState(0xd54b, 0xe96f, 0x9be0, 0x4557, 0x95cc, 0x83c5, 0x1, 0x0);
        gbc.writeMem(0x83c5, { 0x4 });
        gbc.writeMem(0xd54b, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe96f);
        EXPECT(gbc.pc(), 0xd54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c5), 0x2);
        EXPECT(gbc.readMem(0xd54b), 0xcb);
        EXPECT(gbc.readMem(0xd54c), 0x1e);
        // CB 1E 01C4
        gbc.setState(0xb21c, 0x8ca1, 0xbe60, 0xe779, 0xc5ac, 0xee3f, 0x1, 0x1);
        gbc.writeMem(0xb21c, { 0xcb, 0x1e });
        gbc.writeMem(0xee3f, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8ca1);
        EXPECT(gbc.pc(), 0xb21e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb21c), 0xcb);
        EXPECT(gbc.readMem(0xb21d), 0x1e);
        EXPECT(gbc.readMem(0xee3f), 0x25);
        // CB 1E 01C5
        gbc.setState(0x5ce, 0xb9c, 0xb10, 0x5ead, 0xc670, 0xc2ae, 0x0, 0x1);
        gbc.writeMem(0x5ce, { 0xcb, 0x1e });
        gbc.writeMem(0xc2ae, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb9c);
        EXPECT(gbc.pc(), 0x5d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ae), 0xc0);
        // CB 1E 01C6
        gbc.setState(0x2385, 0xe3cb, 0xb630, 0xe205, 0x4736, 0x9172, 0x1, 0x1);
        gbc.writeMem(0x2385, { 0xcb, 0x1e });
        gbc.writeMem(0x9172, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe3cb);
        EXPECT(gbc.pc(), 0x2387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9172), 0xec);
        // CB 1E 01C7
        gbc.setState(0xedea, 0x982b, 0xb020, 0x195b, 0xa709, 0x83f9, 0x0, 0x1);
        gbc.writeMem(0x83f9, { 0x88 });
        gbc.writeMem(0xedea, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x982b);
        EXPECT(gbc.pc(), 0xedec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f9), 0x44);
        EXPECT(gbc.readMem(0xedea), 0xcb);
        EXPECT(gbc.readMem(0xedeb), 0x1e);
        // CB 1E 01C8
        gbc.setState(0x6bb8, 0xd0dc, 0xdda0, 0xe5d9, 0xf50c, 0xfa73, 0x0, 0x1);
        gbc.writeMem(0x6bb8, { 0xcb, 0x1e });
        gbc.writeMem(0xfa73, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd0dc);
        EXPECT(gbc.pc(), 0x6bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa73), 0xc);
        // CB 1E 01C9
        gbc.setState(0x2191, 0x4758, 0x4890, 0x2dd7, 0xee6e, 0x89c2, 0x0, 0x1);
        gbc.writeMem(0x2191, { 0xcb, 0x1e });
        gbc.writeMem(0x89c2, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4758);
        EXPECT(gbc.pc(), 0x2193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c2), 0x85);
        // CB 1E 01CB
        gbc.setState(0x4369, 0x46c8, 0x9260, 0xb438, 0xa83d, 0xfa44, 0x1, 0x1);
        gbc.writeMem(0x4369, { 0xcb, 0x1e });
        gbc.writeMem(0xfa44, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x46c8);
        EXPECT(gbc.pc(), 0x436b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa44), 0x39);
        // CB 1E 01CC
        gbc.setState(0x7959, 0xc4d, 0xaf10, 0x8fe1, 0x1111, 0x9c19, 0x0, 0x1);
        gbc.writeMem(0x7959, { 0xcb, 0x1e });
        gbc.writeMem(0x9c19, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc4d);
        EXPECT(gbc.pc(), 0x795b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c19), 0xa8);
        // CB 1E 01CD
        gbc.setState(0xe386, 0x8103, 0x5cf0, 0x46c9, 0x9ee2, 0x848c, 0x0, 0x1);
        gbc.writeMem(0x848c, { 0xff });
        gbc.writeMem(0xe386, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8103);
        EXPECT(gbc.pc(), 0xe388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x848c), 0xff);
        EXPECT(gbc.readMem(0xe386), 0xcb);
        EXPECT(gbc.readMem(0xe387), 0x1e);
        // CB 1E 01CF
        gbc.setState(0x26a3, 0x8afb, 0x4980, 0xe33b, 0x6a2a, 0xf27a, 0x0, 0x0);
        gbc.writeMem(0x26a3, { 0xcb, 0x1e });
        gbc.writeMem(0xf27a, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8afb);
        EXPECT(gbc.pc(), 0x26a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf27a), 0x3c);
        // CB 1E 01D0
        gbc.setState(0x72b7, 0xeb04, 0x6bd0, 0x9cb6, 0x3426, 0xa6e9, 0x0, 0x0);
        gbc.writeMem(0x72b7, { 0xcb, 0x1e });
        gbc.writeMem(0xa6e9, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xeb04);
        EXPECT(gbc.pc(), 0x72b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e9), 0xc0);
        // CB 1E 01D1
        gbc.setState(0x8f90, 0x3d6f, 0x6dc0, 0xaae1, 0x864c, 0xc6e1, 0x1, 0x0);
        gbc.writeMem(0x8f90, { 0xcb, 0x1e });
        gbc.writeMem(0xc6e1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3d6f);
        EXPECT(gbc.pc(), 0x8f92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f90), 0xcb);
        EXPECT(gbc.readMem(0x8f91), 0x1e);
        EXPECT(gbc.readMem(0xc6e1), 0x58);
        // CB 1E 01D2
        gbc.setState(0xcbd7, 0x5075, 0x3fe0, 0x7b2b, 0xc67c, 0x8213, 0x0, 0x0);
        gbc.writeMem(0x8213, { 0xc6 });
        gbc.writeMem(0xcbd7, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5075);
        EXPECT(gbc.pc(), 0xcbd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8213), 0x63);
        EXPECT(gbc.readMem(0xcbd7), 0xcb);
        EXPECT(gbc.readMem(0xcbd8), 0x1e);
        // CB 1E 01D6
        gbc.setState(0xa1f9, 0x671, 0xe5e0, 0x5c6c, 0xdeb5, 0x8d9c, 0x0, 0x1);
        gbc.writeMem(0x8d9c, { 0xab });
        gbc.writeMem(0xa1f9, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x671);
        EXPECT(gbc.pc(), 0xa1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d9c), 0x55);
        EXPECT(gbc.readMem(0xa1f9), 0xcb);
        EXPECT(gbc.readMem(0xa1fa), 0x1e);
        // CB 1E 01D7
        gbc.setState(0x8153, 0x83b0, 0xa9f0, 0x5f5f, 0x4ab7, 0xcd62, 0x0, 0x0);
        gbc.writeMem(0x8153, { 0xcb, 0x1e });
        gbc.writeMem(0xcd62, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x83b0);
        EXPECT(gbc.pc(), 0x8155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8153), 0xcb);
        EXPECT(gbc.readMem(0x8154), 0x1e);
        EXPECT(gbc.readMem(0xcd62), 0xd0);
        // CB 1E 01DA
        gbc.setState(0x2106, 0xc68b, 0x76a0, 0x476b, 0x9e4c, 0xe5bf, 0x0, 0x1);
        gbc.writeMem(0x2106, { 0xcb, 0x1e });
        gbc.writeMem(0xe5bf, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc68b);
        EXPECT(gbc.pc(), 0x2108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5bf), 0x21);
        // CB 1E 01DB
        gbc.setState(0x7772, 0x9d78, 0x18e0, 0x8bf2, 0xb821, 0xe9f1, 0x0, 0x1);
        gbc.writeMem(0x7772, { 0xcb, 0x1e });
        gbc.writeMem(0xe9f1, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9d78);
        EXPECT(gbc.pc(), 0x7774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f1), 0x63);
        // CB 1E 01E3
        gbc.setState(0xb09f, 0xc06, 0xe710, 0xcc3e, 0xaa95, 0xbf9d, 0x0, 0x0);
        gbc.writeMem(0xb09f, { 0xcb, 0x1e });
        gbc.writeMem(0xbf9d, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc06);
        EXPECT(gbc.pc(), 0xb0a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb09f), 0xcb);
        EXPECT(gbc.readMem(0xb0a0), 0x1e);
        EXPECT(gbc.readMem(0xbf9d), 0xdb);
        // CB 1E 01E7
        gbc.setState(0xedfc, 0x3743, 0xdcf0, 0xab54, 0xd4ae, 0xab55, 0x1, 0x1);
        gbc.writeMem(0xab55, { 0x8 });
        gbc.writeMem(0xedfc, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3743);
        EXPECT(gbc.pc(), 0xedfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab55), 0x84);
        EXPECT(gbc.readMem(0xedfc), 0xcb);
        EXPECT(gbc.readMem(0xedfd), 0x1e);
        // CB 1E 01EA
        gbc.setState(0x9c7a, 0x415e, 0xc9c0, 0x4c10, 0xaaaf, 0xf6a7, 0x1, 0x0);
        gbc.writeMem(0x9c7a, { 0xcb, 0x1e });
        gbc.writeMem(0xf6a7, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x415e);
        EXPECT(gbc.pc(), 0x9c7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c7a), 0xcb);
        EXPECT(gbc.readMem(0x9c7b), 0x1e);
        EXPECT(gbc.readMem(0xf6a7), 0x50);
        // CB 1E 01EB
        gbc.setState(0xb72b, 0x150a, 0x97b0, 0xeb3f, 0x5d90, 0xd14c, 0x0, 0x1);
        gbc.writeMem(0xb72b, { 0xcb, 0x1e });
        gbc.writeMem(0xd14c, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x150a);
        EXPECT(gbc.pc(), 0xb72d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb72b), 0xcb);
        EXPECT(gbc.readMem(0xb72c), 0x1e);
        EXPECT(gbc.readMem(0xd14c), 0x9b);
        // CB 1E 01ED
        gbc.setState(0xd02f, 0x97ae, 0x1480, 0x7ebe, 0x7855, 0xe793, 0x1, 0x0);
        gbc.writeMem(0xd02f, { 0xcb, 0x1e });
        gbc.writeMem(0xe793, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x97ae);
        EXPECT(gbc.pc(), 0xd031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd02f), 0xcb);
        EXPECT(gbc.readMem(0xd030), 0x1e);
        EXPECT(gbc.readMem(0xe793), 0xa);
        // CB 1E 01EE
        gbc.setState(0x3f84, 0x7934, 0x8890, 0x4300, 0xcd47, 0xe49a, 0x0, 0x0);
        gbc.writeMem(0x3f84, { 0xcb, 0x1e });
        gbc.writeMem(0xe49a, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7934);
        EXPECT(gbc.pc(), 0x3f86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe49a), 0xca);
        // CB 1E 01F0
        gbc.setState(0xeae6, 0xa6fc, 0x9450, 0x894c, 0x9a6e, 0x9ef3, 0x0, 0x0);
        gbc.writeMem(0x9ef3, { 0xfe });
        gbc.writeMem(0xeae6, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa6fc);
        EXPECT(gbc.pc(), 0xeae8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef3), 0xff);
        EXPECT(gbc.readMem(0xeae6), 0xcb);
        EXPECT(gbc.readMem(0xeae7), 0x1e);
        // CB 1E 01F1
        gbc.setState(0x6831, 0x825f, 0xb5d0, 0xf85a, 0x6954, 0xfc42, 0x0, 0x1);
        gbc.writeMem(0x6831, { 0xcb, 0x1e });
        gbc.writeMem(0xfc42, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x825f);
        EXPECT(gbc.pc(), 0x6833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc42), 0xdf);
        // CB 1E 01F2
        gbc.setState(0xc43b, 0xf829, 0x2440, 0x5f6d, 0x7450, 0xe1ba, 0x1, 0x0);
        gbc.writeMem(0xc43b, { 0xcb, 0x1e });
        gbc.writeMem(0xe1ba, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf829);
        EXPECT(gbc.pc(), 0xc43d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc43b), 0xcb);
        EXPECT(gbc.readMem(0xc43c), 0x1e);
        EXPECT(gbc.readMem(0xe1ba), 0x4e);
        // CB 1E 01F3
        gbc.setState(0x73e, 0x2d9d, 0x7030, 0xef0, 0xe55f, 0x9f46, 0x1, 0x0);
        gbc.writeMem(0x73e, { 0xcb, 0x1e });
        gbc.writeMem(0x9f46, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2d9d);
        EXPECT(gbc.pc(), 0x740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f46), 0xd1);
        // CB 1E 01F4
        gbc.setState(0x1e04, 0x6fd0, 0x8c80, 0x193b, 0x219b, 0xa458, 0x1, 0x0);
        gbc.writeMem(0x1e04, { 0xcb, 0x1e });
        gbc.writeMem(0xa458, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6fd0);
        EXPECT(gbc.pc(), 0x1e06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa458), 0x70);
        // CB 1E 01F5
        gbc.setState(0x4a77, 0x1acb, 0x55a0, 0x42ea, 0x32d9, 0x9395, 0x0, 0x1);
        gbc.writeMem(0x4a77, { 0xcb, 0x1e });
        gbc.writeMem(0x9395, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1acb);
        EXPECT(gbc.pc(), 0x4a79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9395), 0x33);
        // CB 1E 01F7
        gbc.setState(0x30e7, 0x7a3, 0xe5d0, 0xce94, 0xd605, 0x926a, 0x1, 0x1);
        gbc.writeMem(0x30e7, { 0xcb, 0x1e });
        gbc.writeMem(0x926a, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7a3);
        EXPECT(gbc.pc(), 0x30e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x926a), 0xca);
        // CB 1E 01F8
        gbc.setState(0xb3f5, 0xcf3c, 0xc8a0, 0x47a7, 0x421c, 0xf3fb, 0x1, 0x1);
        gbc.writeMem(0xb3f5, { 0xcb, 0x1e });
        gbc.writeMem(0xf3fb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xcf3c);
        EXPECT(gbc.pc(), 0xb3f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f5), 0xcb);
        EXPECT(gbc.readMem(0xb3f6), 0x1e);
        EXPECT(gbc.readMem(0xf3fb), 0x20);
        // CB 1E 01FB
        gbc.setState(0xf7c, 0x6504, 0x16e0, 0xf989, 0xadfa, 0xba30, 0x0, 0x1);
        gbc.writeMem(0xf7c, { 0xcb, 0x1e });
        gbc.writeMem(0xba30, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6504);
        EXPECT(gbc.pc(), 0xf7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba30), 0x11);
        // CB 1E 01FC
        gbc.setState(0x1331, 0xf76e, 0x66a0, 0xb16d, 0x414a, 0xcbd5, 0x1, 0x0);
        gbc.writeMem(0x1331, { 0xcb, 0x1e });
        gbc.writeMem(0xcbd5, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf76e);
        EXPECT(gbc.pc(), 0x1333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd5), 0x6d);
        // CB 1E 01FF
        gbc.setState(0x3bd4, 0x281d, 0x5b40, 0xeb, 0x910, 0x8c27, 0x1, 0x1);
        gbc.writeMem(0x3bd4, { 0xcb, 0x1e });
        gbc.writeMem(0x8c27, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x281d);
        EXPECT(gbc.pc(), 0x3bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c27), 0x78);
        // CB 1E 0200
        gbc.setState(0x3cbf, 0xcc90, 0x1b50, 0x74d8, 0x1b0f, 0xa127, 0x0, 0x1);
        gbc.writeMem(0x3cbf, { 0xcb, 0x1e });
        gbc.writeMem(0xa127, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcc90);
        EXPECT(gbc.pc(), 0x3cc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa127), 0xc8);
        // CB 1E 0201
        gbc.setState(0x6ca5, 0xfe10, 0xfca0, 0xb8d6, 0xeaa5, 0xb4cf, 0x0, 0x0);
        gbc.writeMem(0x6ca5, { 0xcb, 0x1e });
        gbc.writeMem(0xb4cf, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfe10);
        EXPECT(gbc.pc(), 0x6ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4cf), 0x55);
        // CB 1E 0205
        gbc.setState(0x1bf4, 0x303f, 0x6c60, 0xb7e2, 0x2869, 0x8e23, 0x0, 0x0);
        gbc.writeMem(0x1bf4, { 0xcb, 0x1e });
        gbc.writeMem(0x8e23, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x303f);
        EXPECT(gbc.pc(), 0x1bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e23), 0x73);
        // CB 1E 0206
        gbc.setState(0x3330, 0x3530, 0xf0e0, 0x9634, 0xff7e, 0xf4e1, 0x1, 0x1);
        gbc.writeMem(0x3330, { 0xcb, 0x1e });
        gbc.writeMem(0xf4e1, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3530);
        EXPECT(gbc.pc(), 0x3332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4e1), 0x60);
        // CB 1E 0207
        gbc.setState(0x7335, 0xd6d2, 0x9ce0, 0x645d, 0xeec3, 0xa5d2, 0x0, 0x1);
        gbc.writeMem(0x7335, { 0xcb, 0x1e });
        gbc.writeMem(0xa5d2, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd6d2);
        EXPECT(gbc.pc(), 0x7337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5d2), 0x3c);
        // CB 1E 0209
        gbc.setState(0xa45c, 0x1337, 0xce60, 0xfa04, 0xff42, 0xd5cd, 0x0, 0x0);
        gbc.writeMem(0xa45c, { 0xcb, 0x1e });
        gbc.writeMem(0xd5cd, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1337);
        EXPECT(gbc.pc(), 0xa45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45c), 0xcb);
        EXPECT(gbc.readMem(0xa45d), 0x1e);
        EXPECT(gbc.readMem(0xd5cd), 0x4e);
        // CB 1E 020B
        gbc.setState(0x6c7b, 0x856f, 0x9c80, 0x5732, 0xd0b2, 0xf9cd, 0x0, 0x1);
        gbc.writeMem(0x6c7b, { 0xcb, 0x1e });
        gbc.writeMem(0xf9cd, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x856f);
        EXPECT(gbc.pc(), 0x6c7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9cd), 0x6f);
        // CB 1E 020D
        gbc.setState(0xb31e, 0x8d67, 0xb3d0, 0xcb53, 0xe042, 0xe6e8, 0x0, 0x0);
        gbc.writeMem(0xb31e, { 0xcb, 0x1e });
        gbc.writeMem(0xe6e8, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8d67);
        EXPECT(gbc.pc(), 0xb320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb31e), 0xcb);
        EXPECT(gbc.readMem(0xb31f), 0x1e);
        EXPECT(gbc.readMem(0xe6e8), 0xf5);
        // CB 1E 020F
        gbc.setState(0xab7d, 0xdb42, 0x2ae0, 0xebe1, 0x78f1, 0x9bdf, 0x0, 0x0);
        gbc.writeMem(0x9bdf, { 0xb4 });
        gbc.writeMem(0xab7d, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdb42);
        EXPECT(gbc.pc(), 0xab7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bdf), 0x5a);
        EXPECT(gbc.readMem(0xab7d), 0xcb);
        EXPECT(gbc.readMem(0xab7e), 0x1e);
        // CB 1E 0212
        gbc.setState(0x5534, 0xdabf, 0x5980, 0x6b5c, 0xf1a, 0xd9a9, 0x1, 0x1);
        gbc.writeMem(0x5534, { 0xcb, 0x1e });
        gbc.writeMem(0xd9a9, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdabf);
        EXPECT(gbc.pc(), 0x5536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a9), 0x2);
        // CB 1E 0217
        gbc.setState(0x6374, 0x7b52, 0xe090, 0x91bb, 0x551f, 0x8571, 0x1, 0x0);
        gbc.writeMem(0x6374, { 0xcb, 0x1e });
        gbc.writeMem(0x8571, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7b52);
        EXPECT(gbc.pc(), 0x6376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8571), 0x89);
        // CB 1E 0218
        gbc.setState(0xbcc1, 0x41b8, 0x2cb0, 0x9b26, 0x8d18, 0xc03a, 0x0, 0x0);
        gbc.writeMem(0xbcc1, { 0xcb, 0x1e });
        gbc.writeMem(0xc03a, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x41b8);
        EXPECT(gbc.pc(), 0xbcc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcc1), 0xcb);
        EXPECT(gbc.readMem(0xbcc2), 0x1e);
        EXPECT(gbc.readMem(0xc03a), 0xc8);
        // CB 1E 021A
        gbc.setState(0x7b7b, 0xa31e, 0x9860, 0x951a, 0x979f, 0xc4e9, 0x1, 0x1);
        gbc.writeMem(0x7b7b, { 0xcb, 0x1e });
        gbc.writeMem(0xc4e9, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa31e);
        EXPECT(gbc.pc(), 0x7b7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4e9), 0xb);
        // CB 1E 021B
        gbc.setState(0xb5ea, 0xad9a, 0xdf90, 0x483, 0xb6ed, 0x9536, 0x1, 0x1);
        gbc.writeMem(0x9536, { 0x8c });
        gbc.writeMem(0xb5ea, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xad9a);
        EXPECT(gbc.pc(), 0xb5ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9536), 0xc6);
        EXPECT(gbc.readMem(0xb5ea), 0xcb);
        EXPECT(gbc.readMem(0xb5eb), 0x1e);
        // CB 1E 021D
        gbc.setState(0x273, 0x9468, 0xadb0, 0x7c0a, 0xbf06, 0xf911, 0x1, 0x1);
        gbc.writeMem(0x273, { 0xcb, 0x1e });
        gbc.writeMem(0xf911, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9468);
        EXPECT(gbc.pc(), 0x275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf911), 0x98);
        // CB 1E 021F
        gbc.setState(0xd920, 0x6bc6, 0xd800, 0xf63b, 0x2e11, 0xc299, 0x0, 0x1);
        gbc.writeMem(0xc299, { 0x23 });
        gbc.writeMem(0xd920, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6bc6);
        EXPECT(gbc.pc(), 0xd922);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc299), 0x11);
        EXPECT(gbc.readMem(0xd920), 0xcb);
        EXPECT(gbc.readMem(0xd921), 0x1e);
        // CB 1E 0221
        gbc.setState(0x1fe9, 0x4a4, 0xe770, 0x896b, 0x46c3, 0xd557, 0x0, 0x0);
        gbc.writeMem(0x1fe9, { 0xcb, 0x1e });
        gbc.writeMem(0xd557, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4a4);
        EXPECT(gbc.pc(), 0x1feb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd557), 0xe8);
        // CB 1E 0222
        gbc.setState(0xb2a7, 0x2da6, 0xaf20, 0x8e16, 0x27be, 0xafcd, 0x1, 0x1);
        gbc.writeMem(0xafcd, { 0xb5 });
        gbc.writeMem(0xb2a7, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2da6);
        EXPECT(gbc.pc(), 0xb2a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafcd), 0x5a);
        EXPECT(gbc.readMem(0xb2a7), 0xcb);
        EXPECT(gbc.readMem(0xb2a8), 0x1e);
        // CB 1E 0223
        gbc.setState(0x35c8, 0xb682, 0x40a0, 0xc62, 0xd7fa, 0x82d5, 0x0, 0x0);
        gbc.writeMem(0x35c8, { 0xcb, 0x1e });
        gbc.writeMem(0x82d5, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb682);
        EXPECT(gbc.pc(), 0x35ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82d5), 0x46);
        // CB 1E 0224
        gbc.setState(0xa5e0, 0xa066, 0x32a0, 0xb987, 0x932e, 0xcb8d, 0x1, 0x0);
        gbc.writeMem(0xa5e0, { 0xcb, 0x1e });
        gbc.writeMem(0xcb8d, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa066);
        EXPECT(gbc.pc(), 0xa5e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5e0), 0xcb);
        EXPECT(gbc.readMem(0xa5e1), 0x1e);
        EXPECT(gbc.readMem(0xcb8d), 0x2b);
        // CB 1E 0225
        gbc.setState(0x4c80, 0xe3a5, 0x5800, 0x948f, 0x97d9, 0xe4e4, 0x0, 0x0);
        gbc.writeMem(0x4c80, { 0xcb, 0x1e });
        gbc.writeMem(0xe4e4, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe3a5);
        EXPECT(gbc.pc(), 0x4c82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e4), 0x4);
        // CB 1E 0227
        gbc.setState(0x4a7f, 0x5132, 0x9e10, 0xab78, 0xf600, 0xb695, 0x0, 0x0);
        gbc.writeMem(0x4a7f, { 0xcb, 0x1e });
        gbc.writeMem(0xb695, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5132);
        EXPECT(gbc.pc(), 0x4a81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb695), 0xdb);
        // CB 1E 0228
        gbc.setState(0xea1b, 0x7519, 0x8810, 0x7d35, 0xca9, 0xac2b, 0x1, 0x1);
        gbc.writeMem(0xac2b, { 0x91 });
        gbc.writeMem(0xea1b, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7519);
        EXPECT(gbc.pc(), 0xea1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac2b), 0xc8);
        EXPECT(gbc.readMem(0xea1b), 0xcb);
        EXPECT(gbc.readMem(0xea1c), 0x1e);
        // CB 1E 022C
        gbc.setState(0xe01c, 0xef24, 0x3ec0, 0x47a2, 0xc191, 0xb05e, 0x0, 0x1);
        gbc.writeMem(0xb05e, { 0xd5 });
        gbc.writeMem(0xe01c, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xef24);
        EXPECT(gbc.pc(), 0xe01e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb05e), 0x6a);
        EXPECT(gbc.readMem(0xe01c), 0xcb);
        EXPECT(gbc.readMem(0xe01d), 0x1e);
        // CB 1E 0232
        gbc.setState(0xb93f, 0xf2bf, 0x26d0, 0x89c2, 0xb08e, 0xeecf, 0x1, 0x0);
        gbc.writeMem(0xb93f, { 0xcb, 0x1e });
        gbc.writeMem(0xeecf, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf2bf);
        EXPECT(gbc.pc(), 0xb941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93f), 0xcb);
        EXPECT(gbc.readMem(0xb940), 0x1e);
        EXPECT(gbc.readMem(0xeecf), 0xf2);
        // CB 1E 0233
        gbc.setState(0x7f77, 0x556a, 0xdb20, 0xc185, 0xe1ae, 0x8994, 0x1, 0x1);
        gbc.writeMem(0x7f77, { 0xcb, 0x1e });
        gbc.writeMem(0x8994, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x556a);
        EXPECT(gbc.pc(), 0x7f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8994), 0x1);
        // CB 1E 0236
        gbc.setState(0x186e, 0x4c76, 0xbc50, 0x7c22, 0x7f45, 0xee21, 0x1, 0x0);
        gbc.writeMem(0x186e, { 0xcb, 0x1e });
        gbc.writeMem(0xee21, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4c76);
        EXPECT(gbc.pc(), 0x1870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee21), 0x86);
        // CB 1E 0237
        gbc.setState(0x8b58, 0xc8f6, 0xb740, 0x5afb, 0xb1f6, 0x8ad6, 0x0, 0x0);
        gbc.writeMem(0x8ad6, { 0xd1 });
        gbc.writeMem(0x8b58, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc8f6);
        EXPECT(gbc.pc(), 0x8b5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad6), 0x68);
        EXPECT(gbc.readMem(0x8b58), 0xcb);
        EXPECT(gbc.readMem(0x8b59), 0x1e);
        // CB 1E 023F
        gbc.setState(0x5823, 0x94e5, 0xdbe0, 0x2870, 0xfd72, 0xf3ec, 0x0, 0x1);
        gbc.writeMem(0x5823, { 0xcb, 0x1e });
        gbc.writeMem(0xf3ec, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x94e5);
        EXPECT(gbc.pc(), 0x5825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf3ec), 0x62);
        // CB 1E 0241
        gbc.setState(0x7c8e, 0x3154, 0x2210, 0x41f5, 0x78fd, 0xd1b2, 0x1, 0x0);
        gbc.writeMem(0x7c8e, { 0xcb, 0x1e });
        gbc.writeMem(0xd1b2, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x3154);
        EXPECT(gbc.pc(), 0x7c90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b2), 0x9d);
        // CB 1E 0242
        gbc.setState(0x77ad, 0xc7ca, 0xb950, 0x727a, 0xc34f, 0xf920, 0x1, 0x0);
        gbc.writeMem(0x77ad, { 0xcb, 0x1e });
        gbc.writeMem(0xf920, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc7ca);
        EXPECT(gbc.pc(), 0x77af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf920), 0x82);
        // CB 1E 0243
        gbc.setState(0x3b35, 0x26ad, 0x180, 0xfc1c, 0xf63b, 0xa13d, 0x0, 0x1);
        gbc.writeMem(0x3b35, { 0xcb, 0x1e });
        gbc.writeMem(0xa13d, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x26ad);
        EXPECT(gbc.pc(), 0x3b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13d), 0x13);
        // CB 1E 0244
        gbc.setState(0x888b, 0x68ae, 0x730, 0xceca, 0xa99b, 0x9821, 0x0, 0x1);
        gbc.writeMem(0x888b, { 0xcb, 0x1e });
        gbc.writeMem(0x9821, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x68ae);
        EXPECT(gbc.pc(), 0x888d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x888b), 0xcb);
        EXPECT(gbc.readMem(0x888c), 0x1e);
        EXPECT(gbc.readMem(0x9821), 0xb4);
        // CB 1E 0245
        gbc.setState(0x9bb1, 0x2983, 0x3f50, 0x74b8, 0xe007, 0xdbc0, 0x1, 0x1);
        gbc.writeMem(0x9bb1, { 0xcb, 0x1e });
        gbc.writeMem(0xdbc0, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2983);
        EXPECT(gbc.pc(), 0x9bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb1), 0xcb);
        EXPECT(gbc.readMem(0x9bb2), 0x1e);
        EXPECT(gbc.readMem(0xdbc0), 0xea);
        // CB 1E 0246
        gbc.setState(0x46a4, 0xdf4, 0xc370, 0x6aac, 0xade0, 0x90cc, 0x1, 0x0);
        gbc.writeMem(0x46a4, { 0xcb, 0x1e });
        gbc.writeMem(0x90cc, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xdf4);
        EXPECT(gbc.pc(), 0x46a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90cc), 0xc7);
        // CB 1E 0247
        gbc.setState(0x5841, 0x29b7, 0xc070, 0x4910, 0xfd6d, 0x8b2d, 0x1, 0x0);
        gbc.writeMem(0x5841, { 0xcb, 0x1e });
        gbc.writeMem(0x8b2d, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x29b7);
        EXPECT(gbc.pc(), 0x5843);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2d), 0xcd);
        // CB 1E 024C
        gbc.setState(0x4ca6, 0xf9fc, 0xaf60, 0xbb19, 0x8684, 0xafab, 0x1, 0x1);
        gbc.writeMem(0x4ca6, { 0xcb, 0x1e });
        gbc.writeMem(0xafab, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf9fc);
        EXPECT(gbc.pc(), 0x4ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafab), 0x26);
        // CB 1E 024F
        gbc.setState(0x49c, 0xadfa, 0xace0, 0xcb3, 0x94eb, 0xf29e, 0x1, 0x1);
        gbc.writeMem(0x49c, { 0xcb, 0x1e });
        gbc.writeMem(0xf29e, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xadfa);
        EXPECT(gbc.pc(), 0x49e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf29e), 0x3b);
        // CB 1E 0250
        gbc.setState(0xbb0c, 0xa07d, 0x9940, 0x554b, 0xccec, 0xc87b, 0x0, 0x1);
        gbc.writeMem(0xbb0c, { 0xcb, 0x1e });
        gbc.writeMem(0xc87b, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa07d);
        EXPECT(gbc.pc(), 0xbb0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb0c), 0xcb);
        EXPECT(gbc.readMem(0xbb0d), 0x1e);
        EXPECT(gbc.readMem(0xc87b), 0x70);
        // CB 1E 0251
        gbc.setState(0xcf4a, 0xe01d, 0xe870, 0x8e7, 0xfa67, 0xe1b0, 0x0, 0x1);
        gbc.writeMem(0xcf4a, { 0xcb, 0x1e });
        gbc.writeMem(0xe1b0, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe01d);
        EXPECT(gbc.pc(), 0xcf4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf4a), 0xcb);
        EXPECT(gbc.readMem(0xcf4b), 0x1e);
        EXPECT(gbc.readMem(0xe1b0), 0xc8);
        // CB 1E 0253
        gbc.setState(0x2d72, 0x5a5b, 0x950, 0x175, 0x443f, 0x9331, 0x0, 0x0);
        gbc.writeMem(0x2d72, { 0xcb, 0x1e });
        gbc.writeMem(0x9331, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5a5b);
        EXPECT(gbc.pc(), 0x2d74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9331), 0xb1);
        // CB 1E 0254
        gbc.setState(0x8f8c, 0x9c3, 0xb7c0, 0xcb82, 0xfb1d, 0xc2d5, 0x1, 0x0);
        gbc.writeMem(0x8f8c, { 0xcb, 0x1e });
        gbc.writeMem(0xc2d5, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9c3);
        EXPECT(gbc.pc(), 0x8f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f8c), 0xcb);
        EXPECT(gbc.readMem(0x8f8d), 0x1e);
        EXPECT(gbc.readMem(0xc2d5), 0x4e);
        // CB 1E 0256
        gbc.setState(0x9679, 0xc015, 0xb9b0, 0x92c0, 0x91da, 0x97ff, 0x1, 0x1);
        gbc.writeMem(0x9679, { 0xcb, 0x1e });
        gbc.writeMem(0x97ff, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc015);
        EXPECT(gbc.pc(), 0x967b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9679), 0xcb);
        EXPECT(gbc.readMem(0x967a), 0x1e);
        EXPECT(gbc.readMem(0x97ff), 0x86);
        // CB 1E 0257
        gbc.setState(0x1789, 0x600b, 0xe730, 0x755d, 0xa0a7, 0xd95e, 0x1, 0x0);
        gbc.writeMem(0x1789, { 0xcb, 0x1e });
        gbc.writeMem(0xd95e, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x600b);
        EXPECT(gbc.pc(), 0x178b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd95e), 0x99);
        // CB 1E 025A
        gbc.setState(0xa076, 0x8ed5, 0x98a0, 0x3d13, 0x35c9, 0xe1fb, 0x0, 0x1);
        gbc.writeMem(0xa076, { 0xcb, 0x1e });
        gbc.writeMem(0xe1fb, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8ed5);
        EXPECT(gbc.pc(), 0xa078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa076), 0xcb);
        EXPECT(gbc.readMem(0xa077), 0x1e);
        EXPECT(gbc.readMem(0xe1fb), 0x8);
        // CB 1E 025C
        gbc.setState(0xa7a3, 0xafe8, 0x5c60, 0xbb5f, 0xdcec, 0xd4e8, 0x0, 0x0);
        gbc.writeMem(0xa7a3, { 0xcb, 0x1e });
        gbc.writeMem(0xd4e8, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xafe8);
        EXPECT(gbc.pc(), 0xa7a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7a3), 0xcb);
        EXPECT(gbc.readMem(0xa7a4), 0x1e);
        EXPECT(gbc.readMem(0xd4e8), 0x13);
        // CB 1E 0261
        gbc.setState(0x39db, 0x46da, 0xfad0, 0xedd5, 0xe765, 0xc724, 0x0, 0x0);
        gbc.writeMem(0x39db, { 0xcb, 0x1e });
        gbc.writeMem(0xc724, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x46da);
        EXPECT(gbc.pc(), 0x39dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc724), 0xad);
        // CB 1E 0262
        gbc.setState(0xa36c, 0x8494, 0xd490, 0x3df7, 0xbca6, 0xc88b, 0x1, 0x0);
        gbc.writeMem(0xa36c, { 0xcb, 0x1e });
        gbc.writeMem(0xc88b, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8494);
        EXPECT(gbc.pc(), 0xa36e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36c), 0xcb);
        EXPECT(gbc.readMem(0xa36d), 0x1e);
        EXPECT(gbc.readMem(0xc88b), 0x91);
        // CB 1E 0263
        gbc.setState(0x3674, 0x29fa, 0xf40, 0xe73d, 0x7abe, 0xbe07, 0x1, 0x1);
        gbc.writeMem(0x3674, { 0xcb, 0x1e });
        gbc.writeMem(0xbe07, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x29fa);
        EXPECT(gbc.pc(), 0x3676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe07), 0x30);
        // CB 1E 0265
        gbc.setState(0xa892, 0xc6b0, 0xf9f0, 0xf851, 0xe274, 0xb9bf, 0x0, 0x0);
        gbc.writeMem(0xa892, { 0xcb, 0x1e });
        gbc.writeMem(0xb9bf, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc6b0);
        EXPECT(gbc.pc(), 0xa894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa892), 0xcb);
        EXPECT(gbc.readMem(0xa893), 0x1e);
        EXPECT(gbc.readMem(0xb9bf), 0xdf);
        // CB 1E 0266
        gbc.setState(0xd042, 0xff26, 0x1560, 0xaa13, 0xefdf, 0x9fac, 0x0, 0x1);
        gbc.writeMem(0x9fac, { 0x48 });
        gbc.writeMem(0xd042, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xff26);
        EXPECT(gbc.pc(), 0xd044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fac), 0x24);
        EXPECT(gbc.readMem(0xd042), 0xcb);
        EXPECT(gbc.readMem(0xd043), 0x1e);
        // CB 1E 0268
        gbc.setState(0x1f60, 0x3431, 0x31f0, 0x9452, 0x39e0, 0xcafe, 0x1, 0x1);
        gbc.writeMem(0x1f60, { 0xcb, 0x1e });
        gbc.writeMem(0xcafe, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3431);
        EXPECT(gbc.pc(), 0x1f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcafe), 0xef);
        // CB 1E 026D
        gbc.setState(0x4668, 0x5906, 0x60, 0x29ce, 0x9d8f, 0xab2c, 0x0, 0x1);
        gbc.writeMem(0x4668, { 0xcb, 0x1e });
        gbc.writeMem(0xab2c, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5906);
        EXPECT(gbc.pc(), 0x466a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2c), 0x75);
        // CB 1E 026E
        gbc.setState(0x8725, 0x7812, 0x5120, 0x1aa9, 0xcfba, 0x8a5b, 0x0, 0x0);
        gbc.writeMem(0x8725, { 0xcb, 0x1e });
        gbc.writeMem(0x8a5b, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7812);
        EXPECT(gbc.pc(), 0x8727);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8725), 0xcb);
        EXPECT(gbc.readMem(0x8726), 0x1e);
        EXPECT(gbc.readMem(0x8a5b), 0x7d);
        // CB 1E 0270
        gbc.setState(0x9c71, 0x7401, 0x4940, 0xc6ef, 0x9a36, 0xca5b, 0x1, 0x1);
        gbc.writeMem(0x9c71, { 0xcb, 0x1e });
        gbc.writeMem(0xca5b, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7401);
        EXPECT(gbc.pc(), 0x9c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c71), 0xcb);
        EXPECT(gbc.readMem(0x9c72), 0x1e);
        EXPECT(gbc.readMem(0xca5b), 0x6a);
        // CB 1E 0272
        gbc.setState(0x4f8d, 0x421a, 0x1920, 0x2938, 0xf9bc, 0xd3a9, 0x0, 0x0);
        gbc.writeMem(0x4f8d, { 0xcb, 0x1e });
        gbc.writeMem(0xd3a9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x421a);
        EXPECT(gbc.pc(), 0x4f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a9), 0x54);
        // CB 1E 0274
        gbc.setState(0xdc6b, 0x2795, 0xf6e0, 0xb194, 0x9134, 0x9d3b, 0x0, 0x1);
        gbc.writeMem(0x9d3b, { 0x0 });
        gbc.writeMem(0xdc6b, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2795);
        EXPECT(gbc.pc(), 0xdc6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d3b), 0x0);
        EXPECT(gbc.readMem(0xdc6b), 0xcb);
        EXPECT(gbc.readMem(0xdc6c), 0x1e);
        // CB 1E 0275
        gbc.setState(0xafa4, 0x1f5c, 0x2400, 0xbf31, 0xc02d, 0xf5f4, 0x1, 0x0);
        gbc.writeMem(0xafa4, { 0xcb, 0x1e });
        gbc.writeMem(0xf5f4, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1f5c);
        EXPECT(gbc.pc(), 0xafa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa4), 0xcb);
        EXPECT(gbc.readMem(0xafa5), 0x1e);
        EXPECT(gbc.readMem(0xf5f4), 0x66);
        // CB 1E 027A
        gbc.setState(0x4714, 0x51cb, 0xd090, 0xaf01, 0xb8a5, 0x8316, 0x1, 0x0);
        gbc.writeMem(0x4714, { 0xcb, 0x1e });
        gbc.writeMem(0x8316, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x51cb);
        EXPECT(gbc.pc(), 0x4716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8316), 0xed);
        // CB 1E 027B
        gbc.setState(0xaad, 0xa32f, 0xc1a0, 0xbd82, 0x8bc4, 0xea25, 0x1, 0x1);
        gbc.writeMem(0xaad, { 0xcb, 0x1e });
        gbc.writeMem(0xea25, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa32f);
        EXPECT(gbc.pc(), 0xaaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea25), 0x14);
        // CB 1E 027F
        gbc.setState(0xaa50, 0xb93d, 0x9690, 0x557d, 0xbde8, 0x9843, 0x1, 0x1);
        gbc.writeMem(0x9843, { 0xaa });
        gbc.writeMem(0xaa50, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb93d);
        EXPECT(gbc.pc(), 0xaa52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9843), 0xd5);
        EXPECT(gbc.readMem(0xaa50), 0xcb);
        EXPECT(gbc.readMem(0xaa51), 0x1e);
        // CB 1E 0283
        gbc.setState(0x46fb, 0xd165, 0x1c60, 0xbccb, 0xd7d2, 0xf5ba, 0x0, 0x0);
        gbc.writeMem(0x46fb, { 0xcb, 0x1e });
        gbc.writeMem(0xf5ba, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd165);
        EXPECT(gbc.pc(), 0x46fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5ba), 0x28);
        // CB 1E 0284
        gbc.setState(0xb717, 0x5c23, 0xcc10, 0x6a77, 0x6091, 0x9356, 0x0, 0x1);
        gbc.writeMem(0x9356, { 0xab });
        gbc.writeMem(0xb717, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5c23);
        EXPECT(gbc.pc(), 0xb719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9356), 0xd5);
        EXPECT(gbc.readMem(0xb717), 0xcb);
        EXPECT(gbc.readMem(0xb718), 0x1e);
        // CB 1E 028C
        gbc.setState(0x3a5f, 0x70bf, 0x7e10, 0xcb5, 0xc70a, 0xcf9a, 0x1, 0x0);
        gbc.writeMem(0x3a5f, { 0xcb, 0x1e });
        gbc.writeMem(0xcf9a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x70bf);
        EXPECT(gbc.pc(), 0x3a61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf9a), 0xd9);
        // CB 1E 028D
        gbc.setState(0x1a7c, 0x9e01, 0xfb0, 0xf48c, 0x321b, 0xbd2b, 0x1, 0x1);
        gbc.writeMem(0x1a7c, { 0xcb, 0x1e });
        gbc.writeMem(0xbd2b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9e01);
        EXPECT(gbc.pc(), 0x1a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd2b), 0x91);
        // CB 1E 028E
        gbc.setState(0x2fa1, 0x6f0f, 0xaca0, 0xf9dd, 0xa4ef, 0x9480, 0x1, 0x1);
        gbc.writeMem(0x2fa1, { 0xcb, 0x1e });
        gbc.writeMem(0x9480, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6f0f);
        EXPECT(gbc.pc(), 0x2fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9480), 0x5c);
        // CB 1E 028F
        gbc.setState(0x1cb, 0xbb25, 0x4640, 0x247c, 0x9c57, 0x9d1e, 0x0, 0x0);
        gbc.writeMem(0x1cb, { 0xcb, 0x1e });
        gbc.writeMem(0x9d1e, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xbb25);
        EXPECT(gbc.pc(), 0x1cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1e), 0x15);
        // CB 1E 0291
        gbc.setState(0x9cbe, 0xd6e, 0x47b0, 0xcb7, 0xf030, 0x8b46, 0x1, 0x1);
        gbc.writeMem(0x8b46, { 0x45 });
        gbc.writeMem(0x9cbe, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd6e);
        EXPECT(gbc.pc(), 0x9cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b46), 0xa2);
        EXPECT(gbc.readMem(0x9cbe), 0xcb);
        EXPECT(gbc.readMem(0x9cbf), 0x1e);
        // CB 1E 0294
        gbc.setState(0xa77c, 0x80bc, 0xb7b0, 0x58a1, 0xb9d4, 0xc05e, 0x1, 0x1);
        gbc.writeMem(0xa77c, { 0xcb, 0x1e });
        gbc.writeMem(0xc05e, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x80bc);
        EXPECT(gbc.pc(), 0xa77e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77c), 0xcb);
        EXPECT(gbc.readMem(0xa77d), 0x1e);
        EXPECT(gbc.readMem(0xc05e), 0xf5);
        // CB 1E 0297
        gbc.setState(0x6ec7, 0x5a5c, 0x12c0, 0x12d2, 0x6949, 0xa93a, 0x0, 0x1);
        gbc.writeMem(0x6ec7, { 0xcb, 0x1e });
        gbc.writeMem(0xa93a, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5a5c);
        EXPECT(gbc.pc(), 0x6ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa93a), 0x51);
        // CB 1E 029C
        gbc.setState(0x4cea, 0x539, 0x68f0, 0xd441, 0xd337, 0xd2a2, 0x1, 0x0);
        gbc.writeMem(0x4cea, { 0xcb, 0x1e });
        gbc.writeMem(0xd2a2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x539);
        EXPECT(gbc.pc(), 0x4cec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2a2), 0xd2);
        // CB 1E 029E
        gbc.setState(0x816d, 0x5382, 0x47b0, 0xbfd1, 0xa18, 0x2dff, 0x0, 0x0);
        gbc.writeMem(0x2dff, { 0xff });
        gbc.writeMem(0x816d, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5382);
        EXPECT(gbc.pc(), 0x816f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x816d), 0xcb);
        EXPECT(gbc.readMem(0x816e), 0x1e);
        // CB 1E 02A0
        gbc.setState(0xb6fa, 0xd7a1, 0x75e0, 0x28aa, 0xe456, 0x9945, 0x0, 0x1);
        gbc.writeMem(0x9945, { 0x9d });
        gbc.writeMem(0xb6fa, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd7a1);
        EXPECT(gbc.pc(), 0xb6fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9945), 0x4e);
        EXPECT(gbc.readMem(0xb6fa), 0xcb);
        EXPECT(gbc.readMem(0xb6fb), 0x1e);
        // CB 1E 02A1
        gbc.setState(0x7766, 0xa14c, 0xe450, 0xd2c9, 0x7f04, 0xabbf, 0x1, 0x0);
        gbc.writeMem(0x7766, { 0xcb, 0x1e });
        gbc.writeMem(0xabbf, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa14c);
        EXPECT(gbc.pc(), 0x7768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabbf), 0xb2);
        // CB 1E 02A2
        gbc.setState(0xb107, 0xb3e2, 0x39a0, 0x91ae, 0x50ca, 0xd483, 0x0, 0x0);
        gbc.writeMem(0xb107, { 0xcb, 0x1e });
        gbc.writeMem(0xd483, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb3e2);
        EXPECT(gbc.pc(), 0xb109);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb107), 0xcb);
        EXPECT(gbc.readMem(0xb108), 0x1e);
        EXPECT(gbc.readMem(0xd483), 0x71);
        // CB 1E 02A3
        gbc.setState(0xdd96, 0xf117, 0x7420, 0x541f, 0xfa9a, 0xee29, 0x0, 0x1);
        gbc.writeMem(0xdd96, { 0xcb, 0x1e });
        gbc.writeMem(0xee29, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf117);
        EXPECT(gbc.pc(), 0xdd98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd96), 0xcb);
        EXPECT(gbc.readMem(0xdd97), 0x1e);
        EXPECT(gbc.readMem(0xee29), 0x5b);
        // CB 1E 02A4
        gbc.setState(0x38d5, 0x7bfd, 0xb820, 0x7627, 0xecce, 0x8243, 0x0, 0x1);
        gbc.writeMem(0x38d5, { 0xcb, 0x1e });
        gbc.writeMem(0x8243, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7bfd);
        EXPECT(gbc.pc(), 0x38d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8243), 0x1);
        // CB 1E 02A7
        gbc.setState(0x3ee3, 0x9d99, 0x9280, 0xf1ad, 0x48ed, 0xca17, 0x1, 0x1);
        gbc.writeMem(0x3ee3, { 0xcb, 0x1e });
        gbc.writeMem(0xca17, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9d99);
        EXPECT(gbc.pc(), 0x3ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca17), 0x1f);
        // CB 1E 02A8
        gbc.setState(0x14c8, 0x5cd4, 0x2980, 0x4622, 0x7857, 0xc5a1, 0x0, 0x1);
        gbc.writeMem(0x14c8, { 0xcb, 0x1e });
        gbc.writeMem(0xc5a1, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5cd4);
        EXPECT(gbc.pc(), 0x14ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5a1), 0x18);
        // CB 1E 02AA
        gbc.setState(0xe1ad, 0x4339, 0x3ab0, 0xc1c5, 0xf4f6, 0xcf74, 0x1, 0x0);
        gbc.writeMem(0xcf74, { 0x87 });
        gbc.writeMem(0xe1ad, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4339);
        EXPECT(gbc.pc(), 0xe1af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf74), 0xc3);
        EXPECT(gbc.readMem(0xe1ad), 0xcb);
        EXPECT(gbc.readMem(0xe1ae), 0x1e);
        // CB 1E 02AC
        gbc.setState(0x98ef, 0xcc9e, 0x350, 0xa133, 0x5e9d, 0xc476, 0x1, 0x1);
        gbc.writeMem(0x98ef, { 0xcb, 0x1e });
        gbc.writeMem(0xc476, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcc9e);
        EXPECT(gbc.pc(), 0x98f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ef), 0xcb);
        EXPECT(gbc.readMem(0x98f0), 0x1e);
        EXPECT(gbc.readMem(0xc476), 0xe0);
        // CB 1E 02AF
        gbc.setState(0xc3d3, 0x510e, 0xdf50, 0xb3dd, 0x324e, 0xf97b, 0x1, 0x0);
        gbc.writeMem(0xc3d3, { 0xcb, 0x1e });
        gbc.writeMem(0xf97b, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x510e);
        EXPECT(gbc.pc(), 0xc3d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d3), 0xcb);
        EXPECT(gbc.readMem(0xc3d4), 0x1e);
        EXPECT(gbc.readMem(0xf97b), 0xcb);
        // CB 1E 02B3
        gbc.setState(0x8008, 0xd39c, 0xdff0, 0xe580, 0xf604, 0xd50b, 0x0, 0x1);
        gbc.writeMem(0x8008, { 0xcb, 0x1e });
        gbc.writeMem(0xd50b, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd39c);
        EXPECT(gbc.pc(), 0x800a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8008), 0xcb);
        EXPECT(gbc.readMem(0x8009), 0x1e);
        EXPECT(gbc.readMem(0xd50b), 0x9e);
        // CB 1E 02B7
        gbc.setState(0x4b98, 0xf0e9, 0xdc70, 0x9d2f, 0x128d, 0xf208, 0x1, 0x0);
        gbc.writeMem(0x4b98, { 0xcb, 0x1e });
        gbc.writeMem(0xf208, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf0e9);
        EXPECT(gbc.pc(), 0x4b9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf208), 0x8b);
        // CB 1E 02B9
        gbc.setState(0x9b50, 0x98d2, 0x6520, 0xaaab, 0xa0e7, 0x857d, 0x0, 0x0);
        gbc.writeMem(0x857d, { 0x3d });
        gbc.writeMem(0x9b50, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x98d2);
        EXPECT(gbc.pc(), 0x9b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x857d), 0x1e);
        EXPECT(gbc.readMem(0x9b50), 0xcb);
        EXPECT(gbc.readMem(0x9b51), 0x1e);
        // CB 1E 02BB
        gbc.setState(0x31c8, 0x33a4, 0xe9a0, 0xa296, 0xabeb, 0xa25c, 0x0, 0x0);
        gbc.writeMem(0x31c8, { 0xcb, 0x1e });
        gbc.writeMem(0xa25c, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x33a4);
        EXPECT(gbc.pc(), 0x31ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa25c), 0x67);
        // CB 1E 02BC
        gbc.setState(0x67ac, 0xbab8, 0xcc30, 0x531f, 0xee7a, 0xf309, 0x1, 0x0);
        gbc.writeMem(0x67ac, { 0xcb, 0x1e });
        gbc.writeMem(0xf309, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbab8);
        EXPECT(gbc.pc(), 0x67ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf309), 0xce);
        // CB 1E 02BE
        gbc.setState(0xb740, 0x8d51, 0x64d0, 0x31cc, 0xc0d4, 0xef3a, 0x0, 0x1);
        gbc.writeMem(0xb740, { 0xcb, 0x1e });
        gbc.writeMem(0xef3a, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8d51);
        EXPECT(gbc.pc(), 0xb742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb740), 0xcb);
        EXPECT(gbc.readMem(0xb741), 0x1e);
        EXPECT(gbc.readMem(0xef3a), 0x92);
        // CB 1E 02BF
        gbc.setState(0x7811, 0xe986, 0xc410, 0xeba6, 0xe5a0, 0xceb2, 0x1, 0x0);
        gbc.writeMem(0x7811, { 0xcb, 0x1e });
        gbc.writeMem(0xceb2, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe986);
        EXPECT(gbc.pc(), 0x7813);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceb2), 0x88);
        // CB 1E 02C5
        gbc.setState(0x54e2, 0x928c, 0xfd0, 0xc460, 0xcd61, 0xdb89, 0x1, 0x1);
        gbc.writeMem(0x54e2, { 0xcb, 0x1e });
        gbc.writeMem(0xdb89, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x928c);
        EXPECT(gbc.pc(), 0x54e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb89), 0xc4);
        // CB 1E 02CA
        gbc.setState(0x2a18, 0x816a, 0x8320, 0xefa0, 0x277f, 0xdd24, 0x1, 0x0);
        gbc.writeMem(0x2a18, { 0xcb, 0x1e });
        gbc.writeMem(0xdd24, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x816a);
        EXPECT(gbc.pc(), 0x2a1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd24), 0x53);
        // CB 1E 02CB
        gbc.setState(0x455a, 0x830a, 0xd430, 0xab05, 0x8e36, 0xf165, 0x0, 0x0);
        gbc.writeMem(0x455a, { 0xcb, 0x1e });
        gbc.writeMem(0xf165, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x830a);
        EXPECT(gbc.pc(), 0x455c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf165), 0x87);
        // CB 1E 02CC
        gbc.setState(0x56e4, 0xc1d4, 0x8700, 0x1bf6, 0x5220, 0xcd65, 0x1, 0x1);
        gbc.writeMem(0x56e4, { 0xcb, 0x1e });
        gbc.writeMem(0xcd65, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc1d4);
        EXPECT(gbc.pc(), 0x56e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd65), 0x2a);
        // CB 1E 02CD
        gbc.setState(0xe59c, 0x93e1, 0x9670, 0xdd9e, 0x8cfc, 0xa1e0, 0x0, 0x0);
        gbc.writeMem(0xa1e0, { 0xad });
        gbc.writeMem(0xe59c, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x93e1);
        EXPECT(gbc.pc(), 0xe59e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1e0), 0xd6);
        EXPECT(gbc.readMem(0xe59c), 0xcb);
        EXPECT(gbc.readMem(0xe59d), 0x1e);
        // CB 1E 02CF
        gbc.setState(0x46c1, 0xd6f2, 0xa3e0, 0x3307, 0xf0a8, 0xadb5, 0x0, 0x1);
        gbc.writeMem(0x46c1, { 0xcb, 0x1e });
        gbc.writeMem(0xadb5, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd6f2);
        EXPECT(gbc.pc(), 0x46c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb5), 0x6d);
        // CB 1E 02D0
        gbc.setState(0xaca0, 0x7413, 0xe560, 0x920d, 0x2f27, 0xd258, 0x0, 0x1);
        gbc.writeMem(0xaca0, { 0xcb, 0x1e });
        gbc.writeMem(0xd258, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7413);
        EXPECT(gbc.pc(), 0xaca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaca0), 0xcb);
        EXPECT(gbc.readMem(0xaca1), 0x1e);
        EXPECT(gbc.readMem(0xd258), 0x2c);
        // CB 1E 02D1
        gbc.setState(0x1c05, 0xdaa1, 0xb6c0, 0x15eb, 0xfe06, 0xaa46, 0x0, 0x0);
        gbc.writeMem(0x1c05, { 0xcb, 0x1e });
        gbc.writeMem(0xaa46, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdaa1);
        EXPECT(gbc.pc(), 0x1c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa46), 0x41);
        // CB 1E 02D2
        gbc.setState(0x3f95, 0xfb53, 0x7ac0, 0xeb50, 0x83a1, 0xff06, 0x1, 0x0);
        gbc.writeMem(0x3f95, { 0xcb, 0x1e });
        gbc.writeMem(0xff06, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfb53);
        EXPECT(gbc.pc(), 0x3f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff06), 0x7a);
        // CB 1E 02D8
        gbc.setState(0xc69d, 0x981d, 0xe80, 0x8f3d, 0x571f, 0xb379, 0x1, 0x1);
        gbc.writeMem(0xb379, { 0x3f });
        gbc.writeMem(0xc69d, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x981d);
        EXPECT(gbc.pc(), 0xc69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb379), 0x1f);
        EXPECT(gbc.readMem(0xc69d), 0xcb);
        EXPECT(gbc.readMem(0xc69e), 0x1e);
        // CB 1E 02DC
        gbc.setState(0x526d, 0xb0e, 0x340, 0xd541, 0xfebd, 0xa22c, 0x0, 0x1);
        gbc.writeMem(0x526d, { 0xcb, 0x1e });
        gbc.writeMem(0xa22c, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb0e);
        EXPECT(gbc.pc(), 0x526f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa22c), 0x46);
        // CB 1E 02DE
        gbc.setState(0xe1e7, 0x3b82, 0x89d0, 0x5d87, 0xb2ee, 0xa7b8, 0x0, 0x1);
        gbc.writeMem(0xa7b8, { 0xb2 });
        gbc.writeMem(0xe1e7, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3b82);
        EXPECT(gbc.pc(), 0xe1e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b8), 0xd9);
        EXPECT(gbc.readMem(0xe1e7), 0xcb);
        EXPECT(gbc.readMem(0xe1e8), 0x1e);
        // CB 1E 02E0
        gbc.setState(0x3812, 0x9806, 0xa640, 0x4ed9, 0x2cea, 0xee86, 0x1, 0x1);
        gbc.writeMem(0x3812, { 0xcb, 0x1e });
        gbc.writeMem(0xee86, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9806);
        EXPECT(gbc.pc(), 0x3814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee86), 0x22);
        // CB 1E 02E3
        gbc.setState(0x6866, 0x739c, 0xd210, 0x8b80, 0x6dae, 0x9eb3, 0x0, 0x1);
        gbc.writeMem(0x6866, { 0xcb, 0x1e });
        gbc.writeMem(0x9eb3, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x739c);
        EXPECT(gbc.pc(), 0x6868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eb3), 0xe6);
        // CB 1E 02E6
        gbc.setState(0xbad, 0x6dff, 0x1510, 0x5ed, 0xeb88, 0xa53e, 0x0, 0x1);
        gbc.writeMem(0xbad, { 0xcb, 0x1e });
        gbc.writeMem(0xa53e, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6dff);
        EXPECT(gbc.pc(), 0xbaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53e), 0xcc);
        // CB 1E 02E7
        gbc.setState(0x74b, 0x1022, 0x3ef0, 0xf018, 0xb06c, 0xd0eb, 0x1, 0x0);
        gbc.writeMem(0x74b, { 0xcb, 0x1e });
        gbc.writeMem(0xd0eb, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1022);
        EXPECT(gbc.pc(), 0x74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0eb), 0xf5);
        // CB 1E 02E8
        gbc.setState(0xb9e9, 0x752d, 0x26b0, 0xbff4, 0x7b80, 0xcf92, 0x0, 0x0);
        gbc.writeMem(0xb9e9, { 0xcb, 0x1e });
        gbc.writeMem(0xcf92, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x752d);
        EXPECT(gbc.pc(), 0xb9eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9e9), 0xcb);
        EXPECT(gbc.readMem(0xb9ea), 0x1e);
        EXPECT(gbc.readMem(0xcf92), 0x9a);
        // CB 1E 02E9
        gbc.setState(0xd9b2, 0xf14a, 0x17c0, 0xa1b3, 0x5908, 0xd57f, 0x1, 0x0);
        gbc.writeMem(0xd57f, { 0x36 });
        gbc.writeMem(0xd9b2, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf14a);
        EXPECT(gbc.pc(), 0xd9b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd57f), 0x1b);
        EXPECT(gbc.readMem(0xd9b2), 0xcb);
        EXPECT(gbc.readMem(0xd9b3), 0x1e);
        // CB 1E 02EA
        gbc.setState(0x6cdc, 0x5dbb, 0x76c0, 0x80ac, 0x1939, 0x8b31, 0x1, 0x1);
        gbc.writeMem(0x6cdc, { 0xcb, 0x1e });
        gbc.writeMem(0x8b31, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5dbb);
        EXPECT(gbc.pc(), 0x6cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b31), 0x29);
        // CB 1E 02EF
        gbc.setState(0xc989, 0xf7ad, 0xada0, 0xa0c4, 0xf678, 0xcf24, 0x0, 0x1);
        gbc.writeMem(0xc989, { 0xcb, 0x1e });
        gbc.writeMem(0xcf24, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf7ad);
        EXPECT(gbc.pc(), 0xc98b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc989), 0xcb);
        EXPECT(gbc.readMem(0xc98a), 0x1e);
        EXPECT(gbc.readMem(0xcf24), 0x6f);
        // CB 1E 02F5
        gbc.setState(0xefdc, 0xc0d4, 0x8b40, 0x11aa, 0xc91b, 0xbf94, 0x0, 0x0);
        gbc.writeMem(0xbf94, { 0xb9 });
        gbc.writeMem(0xefdc, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc0d4);
        EXPECT(gbc.pc(), 0xefde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf94), 0x5c);
        EXPECT(gbc.readMem(0xefdc), 0xcb);
        EXPECT(gbc.readMem(0xefdd), 0x1e);
        // CB 1E 02F9
        gbc.setState(0xcc58, 0x8bee, 0xebb0, 0x2497, 0x225e, 0xa06c, 0x0, 0x1);
        gbc.writeMem(0xa06c, { 0x8a });
        gbc.writeMem(0xcc58, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x8bee);
        EXPECT(gbc.pc(), 0xcc5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa06c), 0xc5);
        EXPECT(gbc.readMem(0xcc58), 0xcb);
        EXPECT(gbc.readMem(0xcc59), 0x1e);
        // CB 1E 02FC
        gbc.setState(0x9b3b, 0x7908, 0x6ee0, 0x98aa, 0x6918, 0xb7f9, 0x1, 0x1);
        gbc.writeMem(0x9b3b, { 0xcb, 0x1e });
        gbc.writeMem(0xb7f9, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x7908);
        EXPECT(gbc.pc(), 0x9b3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b3b), 0xcb);
        EXPECT(gbc.readMem(0x9b3c), 0x1e);
        EXPECT(gbc.readMem(0xb7f9), 0x5c);
        // CB 1E 02FD
        gbc.setState(0xb539, 0x1364, 0x7100, 0x2bc8, 0xeb5e, 0xf486, 0x0, 0x0);
        gbc.writeMem(0xb539, { 0xcb, 0x1e });
        gbc.writeMem(0xf486, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1364);
        EXPECT(gbc.pc(), 0xb53b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb539), 0xcb);
        EXPECT(gbc.readMem(0xb53a), 0x1e);
        EXPECT(gbc.readMem(0xf486), 0x4a);
        // CB 1E 02FE
        gbc.setState(0x8a7f, 0xc1ee, 0x5650, 0xfca5, 0xbbe6, 0xd081, 0x1, 0x1);
        gbc.writeMem(0x8a7f, { 0xcb, 0x1e });
        gbc.writeMem(0xd081, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc1ee);
        EXPECT(gbc.pc(), 0x8a81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a7f), 0xcb);
        EXPECT(gbc.readMem(0x8a80), 0x1e);
        EXPECT(gbc.readMem(0xd081), 0xaa);
        // CB 1E 02FF
        gbc.setState(0x6ee7, 0x7c87, 0x8480, 0xb459, 0xb0bd, 0x956c, 0x0, 0x0);
        gbc.writeMem(0x6ee7, { 0xcb, 0x1e });
        gbc.writeMem(0x956c, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7c87);
        EXPECT(gbc.pc(), 0x6ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x956c), 0x60);
        // CB 1E 0300
        gbc.setState(0xb103, 0xf29f, 0x83f0, 0xe050, 0xcc0e, 0xe716, 0x0, 0x0);
        gbc.writeMem(0xb103, { 0xcb, 0x1e });
        gbc.writeMem(0xe716, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf29f);
        EXPECT(gbc.pc(), 0xb105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb103), 0xcb);
        EXPECT(gbc.readMem(0xb104), 0x1e);
        EXPECT(gbc.readMem(0xe716), 0x98);
        // CB 1E 0301
        gbc.setState(0x8c7e, 0x221d, 0xc0a0, 0x6f0a, 0x1683, 0xf71f, 0x1, 0x1);
        gbc.writeMem(0x8c7e, { 0xcb, 0x1e });
        gbc.writeMem(0xf71f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x221d);
        EXPECT(gbc.pc(), 0x8c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c7e), 0xcb);
        EXPECT(gbc.readMem(0x8c7f), 0x1e);
        EXPECT(gbc.readMem(0xf71f), 0x59);
        // CB 1E 0302
        gbc.setState(0x6cce, 0x2f60, 0xebe0, 0x9bd3, 0x7ac, 0xbebb, 0x0, 0x0);
        gbc.writeMem(0x6cce, { 0xcb, 0x1e });
        gbc.writeMem(0xbebb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2f60);
        EXPECT(gbc.pc(), 0x6cd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbebb), 0x45);
        // CB 1E 0304
        gbc.setState(0x117e, 0x18fd, 0xe020, 0xbdb9, 0x4d1f, 0xf9e3, 0x1, 0x0);
        gbc.writeMem(0x117e, { 0xcb, 0x1e });
        gbc.writeMem(0xf9e3, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x18fd);
        EXPECT(gbc.pc(), 0x1180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9e3), 0x34);
        // CB 1E 0307
        gbc.setState(0x76a3, 0xb9df, 0x3b70, 0xe9e0, 0x5003, 0xa676, 0x0, 0x0);
        gbc.writeMem(0x76a3, { 0xcb, 0x1e });
        gbc.writeMem(0xa676, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb9df);
        EXPECT(gbc.pc(), 0x76a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa676), 0xa0);
        // CB 1E 0309
        gbc.setState(0x782c, 0xac39, 0x5e30, 0x43f8, 0x9124, 0xb0ea, 0x1, 0x0);
        gbc.writeMem(0x782c, { 0xcb, 0x1e });
        gbc.writeMem(0xb0ea, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xac39);
        EXPECT(gbc.pc(), 0x782e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ea), 0xf7);
        // CB 1E 030B
        gbc.setState(0xd647, 0xedad, 0x8900, 0xdf9e, 0xac7, 0x8c48, 0x1, 0x1);
        gbc.writeMem(0x8c48, { 0xab });
        gbc.writeMem(0xd647, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xedad);
        EXPECT(gbc.pc(), 0xd649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c48), 0x55);
        EXPECT(gbc.readMem(0xd647), 0xcb);
        EXPECT(gbc.readMem(0xd648), 0x1e);
        // CB 1E 030C
        gbc.setState(0x5061, 0xb6b7, 0xd10, 0x605f, 0xe448, 0xd3cb, 0x1, 0x1);
        gbc.writeMem(0x5061, { 0xcb, 0x1e });
        gbc.writeMem(0xd3cb, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb6b7);
        EXPECT(gbc.pc(), 0x5063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3cb), 0xf1);
        // CB 1E 030E
        gbc.setState(0x2db2, 0x2915, 0x9250, 0x375e, 0x818b, 0xc7d3, 0x1, 0x1);
        gbc.writeMem(0x2db2, { 0xcb, 0x1e });
        gbc.writeMem(0xc7d3, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2915);
        EXPECT(gbc.pc(), 0x2db4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d3), 0x86);
        // CB 1E 030F
        gbc.setState(0x4c74, 0x7802, 0x5030, 0x81bf, 0x5785, 0xb336, 0x0, 0x1);
        gbc.writeMem(0x4c74, { 0xcb, 0x1e });
        gbc.writeMem(0xb336, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7802);
        EXPECT(gbc.pc(), 0x4c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb336), 0xbf);
        // CB 1E 0311
        gbc.setState(0x13fe, 0xff63, 0xe0b0, 0x93c8, 0x423a, 0xb9d0, 0x1, 0x1);
        gbc.writeMem(0x13fe, { 0xcb, 0x1e });
        gbc.writeMem(0xb9d0, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xff63);
        EXPECT(gbc.pc(), 0x1400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d0), 0x8c);
        // CB 1E 0317
        gbc.setState(0x421a, 0x3881, 0xca40, 0xa353, 0x221b, 0x8295, 0x0, 0x1);
        gbc.writeMem(0x421a, { 0xcb, 0x1e });
        gbc.writeMem(0x8295, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3881);
        EXPECT(gbc.pc(), 0x421c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8295), 0x6c);
        // CB 1E 0318
        gbc.setState(0x5751, 0xeb71, 0xeb20, 0x36e9, 0xc9a1, 0x9c67, 0x1, 0x1);
        gbc.writeMem(0x5751, { 0xcb, 0x1e });
        gbc.writeMem(0x9c67, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xeb71);
        EXPECT(gbc.pc(), 0x5753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c67), 0x4a);
        // CB 1E 0319
        gbc.setState(0x3e33, 0x39c6, 0xd340, 0x219, 0x7eda, 0x8de0, 0x0, 0x1);
        gbc.writeMem(0x3e33, { 0xcb, 0x1e });
        gbc.writeMem(0x8de0, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x39c6);
        EXPECT(gbc.pc(), 0x3e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de0), 0x8);
        // CB 1E 031B
        gbc.setState(0xa1f7, 0xa52a, 0x7de0, 0xf263, 0x6a20, 0xbc91, 0x0, 0x0);
        gbc.writeMem(0xa1f7, { 0xcb, 0x1e });
        gbc.writeMem(0xbc91, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa52a);
        EXPECT(gbc.pc(), 0xa1f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f7), 0xcb);
        EXPECT(gbc.readMem(0xa1f8), 0x1e);
        EXPECT(gbc.readMem(0xbc91), 0x38);
        // CB 1E 031E
        gbc.setState(0xe096, 0x378d, 0xba80, 0xff00, 0x8561, 0xb3ac, 0x0, 0x0);
        gbc.writeMem(0xb3ac, { 0x14 });
        gbc.writeMem(0xe096, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x378d);
        EXPECT(gbc.pc(), 0xe098);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ac), 0xa);
        EXPECT(gbc.readMem(0xe096), 0xcb);
        EXPECT(gbc.readMem(0xe097), 0x1e);
        // CB 1E 031F
        gbc.setState(0x6215, 0xe6ed, 0x9db0, 0x347f, 0x7f80, 0xcd3a, 0x0, 0x0);
        gbc.writeMem(0x6215, { 0xcb, 0x1e });
        gbc.writeMem(0xcd3a, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe6ed);
        EXPECT(gbc.pc(), 0x6217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd3a), 0xdb);
        // CB 1E 0320
        gbc.setState(0x5fbd, 0x7eae, 0x7300, 0x9335, 0xe122, 0xcb7f, 0x1, 0x0);
        gbc.writeMem(0x5fbd, { 0xcb, 0x1e });
        gbc.writeMem(0xcb7f, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7eae);
        EXPECT(gbc.pc(), 0x5fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb7f), 0x3);
        // CB 1E 0328
        gbc.setState(0x1bdb, 0xa4e4, 0xca50, 0xd6fb, 0x65d6, 0xf9a3, 0x1, 0x0);
        gbc.writeMem(0x1bdb, { 0xcb, 0x1e });
        gbc.writeMem(0xf9a3, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa4e4);
        EXPECT(gbc.pc(), 0x1bdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9a3), 0x98);
        // CB 1E 032B
        gbc.setState(0x2249, 0x3c57, 0x250, 0x5701, 0xc1b8, 0x9ad7, 0x0, 0x1);
        gbc.writeMem(0x2249, { 0xcb, 0x1e });
        gbc.writeMem(0x9ad7, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3c57);
        EXPECT(gbc.pc(), 0x224b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ad7), 0x89);
        // CB 1E 032C
        gbc.setState(0x62da, 0x4443, 0x14e0, 0x64d6, 0xf375, 0xe071, 0x0, 0x0);
        gbc.writeMem(0x62da, { 0xcb, 0x1e });
        gbc.writeMem(0xe071, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4443);
        EXPECT(gbc.pc(), 0x62dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe071), 0x66);
        // CB 1E 032E
        gbc.setState(0x3bee, 0xd5ae, 0xcd60, 0xd10a, 0x5dd3, 0xa1a7, 0x1, 0x1);
        gbc.writeMem(0x3bee, { 0xcb, 0x1e });
        gbc.writeMem(0xa1a7, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd5ae);
        EXPECT(gbc.pc(), 0x3bf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a7), 0x62);
        // CB 1E 0330
        gbc.setState(0x59f1, 0x57e9, 0xe50, 0xdeb1, 0x7173, 0xbe51, 0x1, 0x1);
        gbc.writeMem(0x59f1, { 0xcb, 0x1e });
        gbc.writeMem(0xbe51, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x57e9);
        EXPECT(gbc.pc(), 0x59f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe51), 0xbf);
        // CB 1E 0333
        gbc.setState(0x1523, 0x7d99, 0xbf80, 0x5c78, 0x718b, 0x9c1d, 0x0, 0x1);
        gbc.writeMem(0x1523, { 0xcb, 0x1e });
        gbc.writeMem(0x9c1d, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7d99);
        EXPECT(gbc.pc(), 0x1525);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1d), 0x39);
        // CB 1E 0335
        gbc.setState(0x4946, 0xdb87, 0x9390, 0xf136, 0x9d30, 0xa142, 0x1, 0x0);
        gbc.writeMem(0x4946, { 0xcb, 0x1e });
        gbc.writeMem(0xa142, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xdb87);
        EXPECT(gbc.pc(), 0x4948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa142), 0x8e);
        // CB 1E 0336
        gbc.setState(0xc6e1, 0xf91a, 0x59b0, 0xe08b, 0x1957, 0xd224, 0x0, 0x0);
        gbc.writeMem(0xc6e1, { 0xcb, 0x1e });
        gbc.writeMem(0xd224, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf91a);
        EXPECT(gbc.pc(), 0xc6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e1), 0xcb);
        EXPECT(gbc.readMem(0xc6e2), 0x1e);
        EXPECT(gbc.readMem(0xd224), 0xad);
        // CB 1E 0338
        gbc.setState(0x66b2, 0xb9ca, 0x7830, 0xa981, 0x6935, 0xcb90, 0x0, 0x0);
        gbc.writeMem(0x66b2, { 0xcb, 0x1e });
        gbc.writeMem(0xcb90, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb9ca);
        EXPECT(gbc.pc(), 0x66b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb90), 0x94);
        // CB 1E 033D
        gbc.setState(0x325c, 0x39bb, 0xe0f0, 0xdaec, 0x631f, 0xc67b, 0x0, 0x0);
        gbc.writeMem(0x325c, { 0xcb, 0x1e });
        gbc.writeMem(0xc67b, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x39bb);
        EXPECT(gbc.pc(), 0x325e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc67b), 0xd8);
        // CB 1E 033F
        gbc.setState(0x4e39, 0xd2d0, 0x48d0, 0x7b40, 0x2f4d, 0x96ee, 0x0, 0x1);
        gbc.writeMem(0x4e39, { 0xcb, 0x1e });
        gbc.writeMem(0x96ee, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd2d0);
        EXPECT(gbc.pc(), 0x4e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ee), 0xb1);
        // CB 1E 0340
        gbc.setState(0x43de, 0xe19f, 0x8f30, 0x943c, 0x87fb, 0x8d7d, 0x1, 0x1);
        gbc.writeMem(0x43de, { 0xcb, 0x1e });
        gbc.writeMem(0x8d7d, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe19f);
        EXPECT(gbc.pc(), 0x43e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7d), 0xd2);
        // CB 1E 0341
        gbc.setState(0xd242, 0x76e5, 0x7d40, 0x95d8, 0xa70f, 0x8aa5, 0x1, 0x0);
        gbc.writeMem(0x8aa5, { 0x53 });
        gbc.writeMem(0xd242, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x76e5);
        EXPECT(gbc.pc(), 0xd244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aa5), 0x29);
        EXPECT(gbc.readMem(0xd242), 0xcb);
        EXPECT(gbc.readMem(0xd243), 0x1e);
        // CB 1E 0343
        gbc.setState(0x9331, 0xa280, 0xf630, 0xe129, 0xd905, 0x89bc, 0x0, 0x0);
        gbc.writeMem(0x89bc, { 0x38 });
        gbc.writeMem(0x9331, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa280);
        EXPECT(gbc.pc(), 0x9333);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89bc), 0x9c);
        EXPECT(gbc.readMem(0x9331), 0xcb);
        EXPECT(gbc.readMem(0x9332), 0x1e);
        // CB 1E 0346
        gbc.setState(0x9b0, 0x402a, 0xa7a0, 0x2d84, 0xe3e1, 0xd632, 0x0, 0x1);
        gbc.writeMem(0x9b0, { 0xcb, 0x1e });
        gbc.writeMem(0xd632, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x402a);
        EXPECT(gbc.pc(), 0x9b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd632), 0x35);
        // CB 1E 034B
        gbc.setState(0x138f, 0x217e, 0xed30, 0x986b, 0x9604, 0xf823, 0x1, 0x0);
        gbc.writeMem(0x138f, { 0xcb, 0x1e });
        gbc.writeMem(0xf823, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x217e);
        EXPECT(gbc.pc(), 0x1391);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf823), 0xa4);
        // CB 1E 034C
        gbc.setState(0x3dee, 0x58a0, 0xf7f0, 0x7d60, 0x198b, 0xb92b, 0x1, 0x0);
        gbc.writeMem(0x3dee, { 0xcb, 0x1e });
        gbc.writeMem(0xb92b, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x58a0);
        EXPECT(gbc.pc(), 0x3df0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92b), 0xcf);
        // CB 1E 034D
        gbc.setState(0x2ef1, 0x99c1, 0xde0, 0xd1e9, 0xd889, 0xd648, 0x1, 0x0);
        gbc.writeMem(0x2ef1, { 0xcb, 0x1e });
        gbc.writeMem(0xd648, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x99c1);
        EXPECT(gbc.pc(), 0x2ef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd648), 0x6f);
        // CB 1E 034F
        gbc.setState(0x713, 0x4b50, 0x63d0, 0x4681, 0xc148, 0xa2b0, 0x0, 0x0);
        gbc.writeMem(0x713, { 0xcb, 0x1e });
        gbc.writeMem(0xa2b0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4b50);
        EXPECT(gbc.pc(), 0x715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b0), 0xd8);
        // CB 1E 0352
        gbc.setState(0x8917, 0x7c8b, 0xbd00, 0x962f, 0xdd0b, 0xe5d1, 0x0, 0x1);
        gbc.writeMem(0x8917, { 0xcb, 0x1e });
        gbc.writeMem(0xe5d1, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7c8b);
        EXPECT(gbc.pc(), 0x8919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8917), 0xcb);
        EXPECT(gbc.readMem(0x8918), 0x1e);
        EXPECT(gbc.readMem(0xe5d1), 0x3b);
        // CB 1E 0353
        gbc.setState(0x99a7, 0x951a, 0x3bb0, 0x65e4, 0xf173, 0xa2b1, 0x0, 0x0);
        gbc.writeMem(0x99a7, { 0xcb, 0x1e });
        gbc.writeMem(0xa2b1, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x951a);
        EXPECT(gbc.pc(), 0x99a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a7), 0xcb);
        EXPECT(gbc.readMem(0x99a8), 0x1e);
        EXPECT(gbc.readMem(0xa2b1), 0xf0);
        // CB 1E 0354
        gbc.setState(0x25dd, 0x6cba, 0x7ee0, 0x970, 0x855c, 0xab71, 0x0, 0x0);
        gbc.writeMem(0x25dd, { 0xcb, 0x1e });
        gbc.writeMem(0xab71, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6cba);
        EXPECT(gbc.pc(), 0x25df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab71), 0x59);
        // CB 1E 0355
        gbc.setState(0x4f2f, 0x9f8a, 0x98d0, 0xf162, 0x54d, 0xf4e4, 0x1, 0x1);
        gbc.writeMem(0x4f2f, { 0xcb, 0x1e });
        gbc.writeMem(0xf4e4, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9f8a);
        EXPECT(gbc.pc(), 0x4f31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4e4), 0x9b);
        // CB 1E 0359
        gbc.setState(0xde3, 0x8b2b, 0xf820, 0x1c5d, 0xffdf, 0xda57, 0x1, 0x1);
        gbc.writeMem(0xde3, { 0xcb, 0x1e });
        gbc.writeMem(0xda57, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8b2b);
        EXPECT(gbc.pc(), 0xde5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda57), 0x61);
        // CB 1E 035A
        gbc.setState(0x2464, 0xd258, 0x9a10, 0xde98, 0xa3b4, 0x8193, 0x1, 0x1);
        gbc.writeMem(0x2464, { 0xcb, 0x1e });
        gbc.writeMem(0x8193, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd258);
        EXPECT(gbc.pc(), 0x2466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8193), 0xb7);
        // CB 1E 035B
        gbc.setState(0xd294, 0x3422, 0x57d0, 0x1c2d, 0xe846, 0xca67, 0x0, 0x1);
        gbc.writeMem(0xca67, { 0x25 });
        gbc.writeMem(0xd294, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3422);
        EXPECT(gbc.pc(), 0xd296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca67), 0x92);
        EXPECT(gbc.readMem(0xd294), 0xcb);
        EXPECT(gbc.readMem(0xd295), 0x1e);
        // CB 1E 035E
        gbc.setState(0x3f40, 0x76c9, 0x96d0, 0xc9be, 0xfe76, 0xf3ed, 0x1, 0x0);
        gbc.writeMem(0x3f40, { 0xcb, 0x1e });
        gbc.writeMem(0xf3ed, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x76c9);
        EXPECT(gbc.pc(), 0x3f42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf3ed), 0x9d);
        // CB 1E 0363
        gbc.setState(0x929b, 0x977, 0x34c0, 0x246e, 0x1b15, 0xd61c, 0x1, 0x1);
        gbc.writeMem(0x929b, { 0xcb, 0x1e });
        gbc.writeMem(0xd61c, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x977);
        EXPECT(gbc.pc(), 0x929d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x929b), 0xcb);
        EXPECT(gbc.readMem(0x929c), 0x1e);
        EXPECT(gbc.readMem(0xd61c), 0x77);
        // CB 1E 0367
        gbc.setState(0x1b18, 0x60b8, 0x4ed0, 0x9f98, 0x5cff, 0xd839, 0x1, 0x0);
        gbc.writeMem(0x1b18, { 0xcb, 0x1e });
        gbc.writeMem(0xd839, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x60b8);
        EXPECT(gbc.pc(), 0x1b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd839), 0xc0);
        // CB 1E 0368
        gbc.setState(0xc098, 0xde13, 0xbb30, 0x3222, 0xe7ee, 0xf985, 0x0, 0x1);
        gbc.writeMem(0xc098, { 0xcb, 0x1e });
        gbc.writeMem(0xf985, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xde13);
        EXPECT(gbc.pc(), 0xc09a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc098), 0xcb);
        EXPECT(gbc.readMem(0xc099), 0x1e);
        EXPECT(gbc.readMem(0xf985), 0xcb);
        // CB 1E 0369
        gbc.setState(0x74dd, 0xb04e, 0x7740, 0x8bb9, 0x91dd, 0x9b2d, 0x0, 0x0);
        gbc.writeMem(0x74dd, { 0xcb, 0x1e });
        gbc.writeMem(0x9b2d, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb04e);
        EXPECT(gbc.pc(), 0x74df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b2d), 0x1d);
        // CB 1E 036E
        gbc.setState(0x1685, 0x5040, 0xd820, 0xbc20, 0x3082, 0x8231, 0x0, 0x0);
        gbc.writeMem(0x1685, { 0xcb, 0x1e });
        gbc.writeMem(0x8231, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5040);
        EXPECT(gbc.pc(), 0x1687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8231), 0x2d);
        // CB 1E 0372
        gbc.setState(0x61a8, 0x220d, 0x91d0, 0xb5a6, 0x33a1, 0xaa95, 0x0, 0x0);
        gbc.writeMem(0x61a8, { 0xcb, 0x1e });
        gbc.writeMem(0xaa95, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x220d);
        EXPECT(gbc.pc(), 0x61aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa95), 0xf1);
        // CB 1E 0373
        gbc.setState(0x8c17, 0xbb10, 0x8160, 0x1f33, 0xbb32, 0xcd9e, 0x0, 0x1);
        gbc.writeMem(0x8c17, { 0xcb, 0x1e });
        gbc.writeMem(0xcd9e, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbb10);
        EXPECT(gbc.pc(), 0x8c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c17), 0xcb);
        EXPECT(gbc.readMem(0x8c18), 0x1e);
        EXPECT(gbc.readMem(0xcd9e), 0x7e);
        // CB 1E 0375
        gbc.setState(0x7afa, 0xfd3d, 0xe430, 0xb000, 0x3561, 0xf80d, 0x1, 0x0);
        gbc.writeMem(0x7afa, { 0xcb, 0x1e });
        gbc.writeMem(0xf80d, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfd3d);
        EXPECT(gbc.pc(), 0x7afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf80d), 0xc8);
        // CB 1E 0379
        gbc.setState(0x77a0, 0x49ed, 0x8790, 0x72fb, 0x3327, 0xedb9, 0x1, 0x1);
        gbc.writeMem(0x77a0, { 0xcb, 0x1e });
        gbc.writeMem(0xedb9, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x49ed);
        EXPECT(gbc.pc(), 0x77a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb9), 0xac);
        // CB 1E 037A
        gbc.setState(0x9e23, 0x5ebe, 0xba30, 0x6133, 0x4e8d, 0xc385, 0x0, 0x0);
        gbc.writeMem(0x9e23, { 0xcb, 0x1e });
        gbc.writeMem(0xc385, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5ebe);
        EXPECT(gbc.pc(), 0x9e25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e23), 0xcb);
        EXPECT(gbc.readMem(0x9e24), 0x1e);
        EXPECT(gbc.readMem(0xc385), 0xd0);
        // CB 1E 037E
        gbc.setState(0xebd4, 0x6d54, 0x6d80, 0x7aff, 0xf1b7, 0xb50c, 0x0, 0x0);
        gbc.writeMem(0xb50c, { 0xf8 });
        gbc.writeMem(0xebd4, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6d54);
        EXPECT(gbc.pc(), 0xebd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb50c), 0x7c);
        EXPECT(gbc.readMem(0xebd4), 0xcb);
        EXPECT(gbc.readMem(0xebd5), 0x1e);
        // CB 1E 037F
        gbc.setState(0x8198, 0x709b, 0xdea0, 0xf8d5, 0xab08, 0xfce4, 0x1, 0x1);
        gbc.writeMem(0x8198, { 0xcb, 0x1e });
        gbc.writeMem(0xfce4, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x709b);
        EXPECT(gbc.pc(), 0x819a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8198), 0xcb);
        EXPECT(gbc.readMem(0x8199), 0x1e);
        EXPECT(gbc.readMem(0xfce4), 0x50);
        // CB 1E 0380
        gbc.setState(0x226f, 0xb13e, 0x1310, 0xf363, 0xce8b, 0xcdde, 0x1, 0x1);
        gbc.writeMem(0x226f, { 0xcb, 0x1e });
        gbc.writeMem(0xcdde, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb13e);
        EXPECT(gbc.pc(), 0x2271);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdde), 0xaf);
        // CB 1E 0385
        gbc.setState(0xd954, 0x7745, 0x65a0, 0xa6d3, 0xd43d, 0xff81, 0x0, 0x0);
        gbc.writeMem(0xd954, { 0xcb, 0x1e });
        gbc.writeMem(0xff81, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7745);
        EXPECT(gbc.pc(), 0xd956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd954), 0xcb);
        EXPECT(gbc.readMem(0xd955), 0x1e);
        EXPECT(gbc.readMem(0xff81), 0xc);
        // CB 1E 0387
        gbc.setState(0x58b4, 0x2614, 0xd620, 0xdcc9, 0xe1ac, 0xa500, 0x0, 0x1);
        gbc.writeMem(0x58b4, { 0xcb, 0x1e });
        gbc.writeMem(0xa500, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2614);
        EXPECT(gbc.pc(), 0x58b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa500), 0x64);
        // CB 1E 038B
        gbc.setState(0x47e, 0x55af, 0xfe80, 0xe8d3, 0xee82, 0xb020, 0x0, 0x0);
        gbc.writeMem(0x47e, { 0xcb, 0x1e });
        gbc.writeMem(0xb020, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x55af);
        EXPECT(gbc.pc(), 0x480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb020), 0x4c);
        // CB 1E 038D
        gbc.setState(0xc35f, 0x9699, 0x3ca0, 0x7668, 0x90c3, 0xd5ec, 0x0, 0x0);
        gbc.writeMem(0xc35f, { 0xcb, 0x1e });
        gbc.writeMem(0xd5ec, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9699);
        EXPECT(gbc.pc(), 0xc361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc35f), 0xcb);
        EXPECT(gbc.readMem(0xc360), 0x1e);
        EXPECT(gbc.readMem(0xd5ec), 0x6c);
        // CB 1E 0391
        gbc.setState(0xa955, 0xe0e7, 0x4e10, 0x6d19, 0x4db8, 0xd2bf, 0x0, 0x1);
        gbc.writeMem(0xa955, { 0xcb, 0x1e });
        gbc.writeMem(0xd2bf, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe0e7);
        EXPECT(gbc.pc(), 0xa957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa955), 0xcb);
        EXPECT(gbc.readMem(0xa956), 0x1e);
        EXPECT(gbc.readMem(0xd2bf), 0xb1);
        // CB 1E 0395
        gbc.setState(0xcc60, 0x33fa, 0xc70, 0xbcbf, 0xce7a, 0x9b62, 0x1, 0x1);
        gbc.writeMem(0x9b62, { 0x95 });
        gbc.writeMem(0xcc60, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x33fa);
        EXPECT(gbc.pc(), 0xcc62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b62), 0xca);
        EXPECT(gbc.readMem(0xcc60), 0xcb);
        EXPECT(gbc.readMem(0xcc61), 0x1e);
        // CB 1E 0399
        gbc.setState(0x94e4, 0x8b0d, 0xbc00, 0x55d9, 0xe67a, 0x9f26, 0x1, 0x0);
        gbc.writeMem(0x94e4, { 0xcb, 0x1e });
        gbc.writeMem(0x9f26, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8b0d);
        EXPECT(gbc.pc(), 0x94e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94e4), 0xcb);
        EXPECT(gbc.readMem(0x94e5), 0x1e);
        EXPECT(gbc.readMem(0x9f26), 0x12);
        // CB 1E 039E
        gbc.setState(0x6f01, 0x47a1, 0xe980, 0x7369, 0xf132, 0xee74, 0x1, 0x0);
        gbc.writeMem(0x6f01, { 0xcb, 0x1e });
        gbc.writeMem(0xee74, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x47a1);
        EXPECT(gbc.pc(), 0x6f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee74), 0x15);
        // CB 1E 03A0
        gbc.setState(0x4bb6, 0x8877, 0x10f0, 0xc2ca, 0x6f41, 0x2ca9, 0x1, 0x0);
        gbc.writeMem(0x2ca9, { 0xff });
        gbc.writeMem(0x4bb6, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8877);
        EXPECT(gbc.pc(), 0x4bb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1E 03A1
        gbc.setState(0x8843, 0x99bb, 0xa960, 0x1902, 0x298e, 0xeb82, 0x0, 0x1);
        gbc.writeMem(0x8843, { 0xcb, 0x1e });
        gbc.writeMem(0xeb82, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x99bb);
        EXPECT(gbc.pc(), 0x8845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8843), 0xcb);
        EXPECT(gbc.readMem(0x8844), 0x1e);
        EXPECT(gbc.readMem(0xeb82), 0x4b);
        // CB 1E 03A2
        gbc.setState(0x9d9f, 0x35ec, 0xd490, 0xc6ae, 0xf360, 0xf07e, 0x0, 0x0);
        gbc.writeMem(0x9d9f, { 0xcb, 0x1e });
        gbc.writeMem(0xf07e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x35ec);
        EXPECT(gbc.pc(), 0x9da1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d9f), 0xcb);
        EXPECT(gbc.readMem(0x9da0), 0x1e);
        EXPECT(gbc.readMem(0xf07e), 0x86);
        // CB 1E 03A3
        gbc.setState(0x74be, 0xba5a, 0x8db0, 0xeb0e, 0x8739, 0xd899, 0x0, 0x1);
        gbc.writeMem(0x74be, { 0xcb, 0x1e });
        gbc.writeMem(0xd899, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xba5a);
        EXPECT(gbc.pc(), 0x74c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd899), 0xbf);
        // CB 1E 03A4
        gbc.setState(0x8bda, 0x5d10, 0xd2b0, 0x96b5, 0x802f, 0xed66, 0x0, 0x1);
        gbc.writeMem(0x8bda, { 0xcb, 0x1e });
        gbc.writeMem(0xed66, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5d10);
        EXPECT(gbc.pc(), 0x8bdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bda), 0xcb);
        EXPECT(gbc.readMem(0x8bdb), 0x1e);
        EXPECT(gbc.readMem(0xed66), 0x89);
        // CB 1E 03A9
        gbc.setState(0x9dca, 0x8a64, 0x3c40, 0x9e2, 0x15fe, 0xd48c, 0x0, 0x0);
        gbc.writeMem(0x9dca, { 0xcb, 0x1e });
        gbc.writeMem(0xd48c, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8a64);
        EXPECT(gbc.pc(), 0x9dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dca), 0xcb);
        EXPECT(gbc.readMem(0x9dcb), 0x1e);
        EXPECT(gbc.readMem(0xd48c), 0x74);
        // CB 1E 03AC
        gbc.setState(0x4fb8, 0xfc6b, 0x25c0, 0x4337, 0x4228, 0xf91c, 0x1, 0x1);
        gbc.writeMem(0x4fb8, { 0xcb, 0x1e });
        gbc.writeMem(0xf91c, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xfc6b);
        EXPECT(gbc.pc(), 0x4fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf91c), 0x55);
        // CB 1E 03AD
        gbc.setState(0x43b3, 0x3b9e, 0x1980, 0xb6ef, 0x257b, 0xb2c4, 0x1, 0x1);
        gbc.writeMem(0x43b3, { 0xcb, 0x1e });
        gbc.writeMem(0xb2c4, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3b9e);
        EXPECT(gbc.pc(), 0x43b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c4), 0x6b);
        // CB 1E 03B1
        gbc.setState(0x349b, 0x6287, 0xfd80, 0xa7dd, 0x1077, 0x8e77, 0x1, 0x0);
        gbc.writeMem(0x349b, { 0xcb, 0x1e });
        gbc.writeMem(0x8e77, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6287);
        EXPECT(gbc.pc(), 0x349d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e77), 0x1e);
        // CB 1E 03B2
        gbc.setState(0x3ed8, 0x2a9f, 0xeae0, 0xfad8, 0x877d, 0xec35, 0x0, 0x0);
        gbc.writeMem(0x3ed8, { 0xcb, 0x1e });
        gbc.writeMem(0xec35, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2a9f);
        EXPECT(gbc.pc(), 0x3eda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec35), 0x6a);
        // CB 1E 03B3
        gbc.setState(0x16ed, 0x3596, 0x9500, 0x66ee, 0x6990, 0x96bf, 0x0, 0x1);
        gbc.writeMem(0x16ed, { 0xcb, 0x1e });
        gbc.writeMem(0x96bf, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3596);
        EXPECT(gbc.pc(), 0x16ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96bf), 0x40);
        // CB 1E 03B4
        gbc.setState(0x476c, 0xfcae, 0x47d0, 0x82f2, 0x7e8d, 0xcbd7, 0x0, 0x0);
        gbc.writeMem(0x476c, { 0xcb, 0x1e });
        gbc.writeMem(0xcbd7, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xfcae);
        EXPECT(gbc.pc(), 0x476e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd7), 0xd9);
        // CB 1E 03B6
        gbc.setState(0x94a1, 0xe7d7, 0x50b0, 0x4d27, 0xcfae, 0xc99c, 0x0, 0x0);
        gbc.writeMem(0x94a1, { 0xcb, 0x1e });
        gbc.writeMem(0xc99c, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe7d7);
        EXPECT(gbc.pc(), 0x94a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94a1), 0xcb);
        EXPECT(gbc.readMem(0x94a2), 0x1e);
        EXPECT(gbc.readMem(0xc99c), 0xb5);
        // CB 1E 03B8
        gbc.setState(0xcf9e, 0xd968, 0xd1e0, 0x3403, 0x2cd8, 0xe392, 0x0, 0x1);
        gbc.writeMem(0xcf9e, { 0xcb, 0x1e });
        gbc.writeMem(0xe392, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd968);
        EXPECT(gbc.pc(), 0xcfa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf9e), 0xcb);
        EXPECT(gbc.readMem(0xcf9f), 0x1e);
        EXPECT(gbc.readMem(0xe392), 0xa);
        // CB 1E 03B9
        gbc.setState(0x607c, 0x2f77, 0xf620, 0x29a2, 0x6342, 0x97b6, 0x1, 0x0);
        gbc.writeMem(0x607c, { 0xcb, 0x1e });
        gbc.writeMem(0x97b6, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2f77);
        EXPECT(gbc.pc(), 0x607e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b6), 0x72);
        // CB 1E 03BB
        gbc.setState(0x205, 0xa52e, 0x3500, 0x6e24, 0x109, 0xec16, 0x0, 0x0);
        gbc.writeMem(0x205, { 0xcb, 0x1e });
        gbc.writeMem(0xec16, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa52e);
        EXPECT(gbc.pc(), 0x207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec16), 0x1a);
        // CB 1E 03BD
        gbc.setState(0x4862, 0x91b5, 0xfd10, 0xa49c, 0x987, 0xbc21, 0x0, 0x0);
        gbc.writeMem(0x4862, { 0xcb, 0x1e });
        gbc.writeMem(0xbc21, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x91b5);
        EXPECT(gbc.pc(), 0x4864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc21), 0x83);
        // CB 1E 03BE
        gbc.setState(0xc6f9, 0xec60, 0xd5e0, 0x29d2, 0x4f5b, 0x9282, 0x0, 0x1);
        gbc.writeMem(0x9282, { 0xe4 });
        gbc.writeMem(0xc6f9, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xec60);
        EXPECT(gbc.pc(), 0xc6fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9282), 0x72);
        EXPECT(gbc.readMem(0xc6f9), 0xcb);
        EXPECT(gbc.readMem(0xc6fa), 0x1e);
        // CB 1E 03BF
        gbc.setState(0xe2d1, 0xea8, 0x9880, 0xa815, 0xb3f5, 0xc853, 0x1, 0x0);
        gbc.writeMem(0xc853, { 0x83 });
        gbc.writeMem(0xe2d1, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xea8);
        EXPECT(gbc.pc(), 0xe2d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc853), 0x41);
        EXPECT(gbc.readMem(0xe2d1), 0xcb);
        EXPECT(gbc.readMem(0xe2d2), 0x1e);
        // CB 1E 03C0
        gbc.setState(0x65bc, 0x8b7d, 0xe870, 0xe85, 0xcab9, 0x856f, 0x1, 0x1);
        gbc.writeMem(0x65bc, { 0xcb, 0x1e });
        gbc.writeMem(0x856f, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8b7d);
        EXPECT(gbc.pc(), 0x65be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856f), 0xb4);
        // CB 1E 03C1
        gbc.setState(0xb6e0, 0xb5df, 0x7840, 0x6821, 0xe59, 0xb102, 0x1, 0x1);
        gbc.writeMem(0xb102, { 0xd5 });
        gbc.writeMem(0xb6e0, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb5df);
        EXPECT(gbc.pc(), 0xb6e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb102), 0x6a);
        EXPECT(gbc.readMem(0xb6e0), 0xcb);
        EXPECT(gbc.readMem(0xb6e1), 0x1e);
        // CB 1E 03C2
        gbc.setState(0x49a2, 0x48ea, 0x7f00, 0x9550, 0x5696, 0xe73b, 0x1, 0x0);
        gbc.writeMem(0x49a2, { 0xcb, 0x1e });
        gbc.writeMem(0xe73b, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x48ea);
        EXPECT(gbc.pc(), 0x49a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe73b), 0x39);
        // CB 1E 03C6
        gbc.setState(0xe455, 0x59be, 0xc70, 0x98c8, 0x1894, 0xbb60, 0x0, 0x0);
        gbc.writeMem(0xbb60, { 0x5 });
        gbc.writeMem(0xe455, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x59be);
        EXPECT(gbc.pc(), 0xe457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb60), 0x82);
        EXPECT(gbc.readMem(0xe455), 0xcb);
        EXPECT(gbc.readMem(0xe456), 0x1e);
        // CB 1E 03C8
        gbc.setState(0x1d20, 0x57b2, 0x1f50, 0x1fcd, 0x6afd, 0xfd5f, 0x1, 0x1);
        gbc.writeMem(0x1d20, { 0xcb, 0x1e });
        gbc.writeMem(0xfd5f, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x57b2);
        EXPECT(gbc.pc(), 0x1d22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd5f), 0x8a);
        // CB 1E 03C9
        gbc.setState(0x78f1, 0xf238, 0x46b0, 0x5843, 0xbfeb, 0xbeec, 0x0, 0x0);
        gbc.writeMem(0x78f1, { 0xcb, 0x1e });
        gbc.writeMem(0xbeec, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf238);
        EXPECT(gbc.pc(), 0x78f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeec), 0xa7);
        // CB 1E 03CB
        gbc.setState(0xaad5, 0x623d, 0x3c70, 0xa1e9, 0xca37, 0xdeab, 0x0, 0x0);
        gbc.writeMem(0xaad5, { 0xcb, 0x1e });
        gbc.writeMem(0xdeab, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x623d);
        EXPECT(gbc.pc(), 0xaad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad5), 0xcb);
        EXPECT(gbc.readMem(0xaad6), 0x1e);
        EXPECT(gbc.readMem(0xdeab), 0x8e);
        // CB 1E 03CC
        gbc.setState(0x4593, 0x6175, 0x5ea0, 0x8c4c, 0xbae9, 0x8df2, 0x0, 0x1);
        gbc.writeMem(0x4593, { 0xcb, 0x1e });
        gbc.writeMem(0x8df2, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6175);
        EXPECT(gbc.pc(), 0x4595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8df2), 0x4b);
        // CB 1E 03CE
        gbc.setState(0xaa71, 0x3a10, 0xa930, 0x1bef, 0x4eeb, 0xed6d, 0x0, 0x0);
        gbc.writeMem(0xaa71, { 0xcb, 0x1e });
        gbc.writeMem(0xed6d, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3a10);
        EXPECT(gbc.pc(), 0xaa73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa71), 0xcb);
        EXPECT(gbc.readMem(0xaa72), 0x1e);
        EXPECT(gbc.readMem(0xed6d), 0x9d);
        // CB 1E 03D2
        gbc.setState(0x55ca, 0xa5dd, 0x3bb0, 0x3e64, 0x79d3, 0xd280, 0x0, 0x1);
        gbc.writeMem(0x55ca, { 0xcb, 0x1e });
        gbc.writeMem(0xd280, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa5dd);
        EXPECT(gbc.pc(), 0x55cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd280), 0xe4);
        // CB 1E 03D3
        gbc.setState(0xac49, 0x6ed1, 0x4cf0, 0xdeb9, 0x8ae, 0xd8b2, 0x1, 0x0);
        gbc.writeMem(0xac49, { 0xcb, 0x1e });
        gbc.writeMem(0xd8b2, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6ed1);
        EXPECT(gbc.pc(), 0xac4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac49), 0xcb);
        EXPECT(gbc.readMem(0xac4a), 0x1e);
        EXPECT(gbc.readMem(0xd8b2), 0xfd);
        // CB 1E 03D5
        gbc.setState(0x35b9, 0xa1a0, 0xf3e0, 0xd260, 0x3a1a, 0xe9a0, 0x0, 0x1);
        gbc.writeMem(0x35b9, { 0xcb, 0x1e });
        gbc.writeMem(0xe9a0, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa1a0);
        EXPECT(gbc.pc(), 0x35bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a0), 0x4b);
        // CB 1E 03D7
        gbc.setState(0x60a8, 0xc140, 0xa390, 0xbd4c, 0xa406, 0xccd3, 0x0, 0x0);
        gbc.writeMem(0x60a8, { 0xcb, 0x1e });
        gbc.writeMem(0xccd3, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc140);
        EXPECT(gbc.pc(), 0x60aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd3), 0x8e);
        // CB 1E 03DB
        gbc.setState(0xc733, 0xb7e0, 0x5a0, 0xf53a, 0x3b9f, 0xfcbf, 0x1, 0x1);
        gbc.writeMem(0xc733, { 0xcb, 0x1e });
        gbc.writeMem(0xfcbf, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb7e0);
        EXPECT(gbc.pc(), 0xc735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc733), 0xcb);
        EXPECT(gbc.readMem(0xc734), 0x1e);
        EXPECT(gbc.readMem(0xfcbf), 0x34);
        // CB 1E 03DD
        gbc.setState(0x2736, 0x2b78, 0x5820, 0x26ec, 0x30d4, 0xe406, 0x0, 0x1);
        gbc.writeMem(0x2736, { 0xcb, 0x1e });
        gbc.writeMem(0xe406, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2b78);
        EXPECT(gbc.pc(), 0x2738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe406), 0x7c);
        // CB 1E 03DE
        gbc.setState(0x6d31, 0x2d76, 0x5d30, 0x112f, 0x1c74, 0xb2a7, 0x1, 0x1);
        gbc.writeMem(0x6d31, { 0xcb, 0x1e });
        gbc.writeMem(0xb2a7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2d76);
        EXPECT(gbc.pc(), 0x6d33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a7), 0x81);
        // CB 1E 03DF
        gbc.setState(0x72df, 0x6092, 0x20d0, 0x3c8d, 0xd64d, 0xce85, 0x0, 0x0);
        gbc.writeMem(0x72df, { 0xcb, 0x1e });
        gbc.writeMem(0xce85, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6092);
        EXPECT(gbc.pc(), 0x72e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce85), 0x96);
        // CB 1E 03E0
        gbc.setState(0x64fb, 0x87ef, 0x6f20, 0x9fcb, 0xe91c, 0x8235, 0x1, 0x0);
        gbc.writeMem(0x64fb, { 0xcb, 0x1e });
        gbc.writeMem(0x8235, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x87ef);
        EXPECT(gbc.pc(), 0x64fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8235), 0x24);
        // CB 1E 03E5
        gbc.setState(0xaabb, 0xf83, 0x510, 0x5ecf, 0x72d5, 0xc857, 0x0, 0x0);
        gbc.writeMem(0xaabb, { 0xcb, 0x1e });
        gbc.writeMem(0xc857, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf83);
        EXPECT(gbc.pc(), 0xaabd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaabb), 0xcb);
        EXPECT(gbc.readMem(0xaabc), 0x1e);
        EXPECT(gbc.readMem(0xc857), 0xc3);
        // CB 1E 03E6
        gbc.setState(0xe891, 0xe97a, 0x7970, 0x9ba1, 0x469b, 0xd373, 0x1, 0x1);
        gbc.writeMem(0xd373, { 0xf4 });
        gbc.writeMem(0xe891, { 0xcb, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe97a);
        EXPECT(gbc.pc(), 0xe893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd373), 0xfa);
        EXPECT(gbc.readMem(0xe891), 0xcb);
        EXPECT(gbc.readMem(0xe892), 0x1e);
    }
}
#endif
