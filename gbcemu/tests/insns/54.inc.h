    TEST(gbcemu, opcode_54) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 54 0000
        gbc.setState(0x3548, 0xf267, 0xc430, 0x3996, 0xc83c, 0x2feb, 0x0, 0x0);
        gbc.writeMem(0x3548, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf267);
        EXPECT(gbc.pc(), 0x3549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0001
        gbc.setState(0x738b, 0x3aef, 0x41f0, 0x220f, 0xcbd0, 0x8659, 0x0, 0x0);
        gbc.writeMem(0x738b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3aef);
        EXPECT(gbc.pc(), 0x738c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0003
        gbc.setState(0x556f, 0x8153, 0x5020, 0xce49, 0xbeef, 0xc832, 0x1, 0x0);
        gbc.writeMem(0x556f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8153);
        EXPECT(gbc.pc(), 0x5570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0005
        gbc.setState(0x7cf8, 0x81ea, 0x2510, 0xd472, 0x127, 0x114, 0x0, 0x1);
        gbc.writeMem(0x7cf8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x81ea);
        EXPECT(gbc.pc(), 0x7cf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0006
        gbc.setState(0xb701, 0xebbf, 0x8a50, 0xd0e7, 0x30ef, 0x4ac7, 0x0, 0x0);
        gbc.writeMem(0xb701, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xebbf);
        EXPECT(gbc.pc(), 0xb702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb701), 0x54);
        // 54 0007
        gbc.setState(0x3e87, 0x7dd3, 0xd1b0, 0x70c3, 0xcdd1, 0x3dba, 0x1, 0x0);
        gbc.writeMem(0x3e87, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7dd3);
        EXPECT(gbc.pc(), 0x3e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0008
        gbc.setState(0xd6bd, 0xc319, 0xdaa0, 0x1ae, 0x8d66, 0x1e08, 0x1, 0x1);
        gbc.writeMem(0xd6bd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc319);
        EXPECT(gbc.pc(), 0xd6be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6bd), 0x54);
        // 54 0009
        gbc.setState(0x6f4, 0x673d, 0x19b0, 0xc777, 0x6ea0, 0x5acf, 0x0, 0x0);
        gbc.writeMem(0x6f4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x673d);
        EXPECT(gbc.pc(), 0x6f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 000A
        gbc.setState(0x2b2f, 0x55d8, 0x6550, 0x646e, 0x4cd1, 0xe140, 0x1, 0x1);
        gbc.writeMem(0x2b2f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x55d8);
        EXPECT(gbc.pc(), 0x2b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 000B
        gbc.setState(0x9113, 0x5ee2, 0xdc10, 0xb672, 0x7d24, 0xb901, 0x0, 0x1);
        gbc.writeMem(0x9113, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5ee2);
        EXPECT(gbc.pc(), 0x9114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9113), 0x54);
        // 54 000C
        gbc.setState(0x65e8, 0x9fe2, 0xa0e0, 0x2cc3, 0x6105, 0x4b48, 0x1, 0x0);
        gbc.writeMem(0x65e8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9fe2);
        EXPECT(gbc.pc(), 0x65e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 000D
        gbc.setState(0x9ffa, 0xbe99, 0x6400, 0xc505, 0x74be, 0x8898, 0x0, 0x1);
        gbc.writeMem(0x9ffa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xbe99);
        EXPECT(gbc.pc(), 0x9ffb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffa), 0x54);
        // 54 000E
        gbc.setState(0x2909, 0x5506, 0xf310, 0x94fc, 0x9f65, 0x80be, 0x0, 0x1);
        gbc.writeMem(0x2909, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5506);
        EXPECT(gbc.pc(), 0x290a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 000F
        gbc.setState(0x465a, 0xecdd, 0xd960, 0x8ad2, 0x98a3, 0x270a, 0x0, 0x1);
        gbc.writeMem(0x465a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xecdd);
        EXPECT(gbc.pc(), 0x465b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0010
        gbc.setState(0x56b6, 0x7cfe, 0xd3e0, 0xcc4b, 0xd5d1, 0x5e0b, 0x1, 0x1);
        gbc.writeMem(0x56b6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7cfe);
        EXPECT(gbc.pc(), 0x56b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0011
        gbc.setState(0x85c1, 0xdd25, 0xf00, 0xfa48, 0xd3e0, 0x42b, 0x1, 0x0);
        gbc.writeMem(0x85c1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xdd25);
        EXPECT(gbc.pc(), 0x85c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85c1), 0x54);
        // 54 0012
        gbc.setState(0x3b0a, 0x60aa, 0x9430, 0x8529, 0x89cf, 0x4778, 0x1, 0x0);
        gbc.writeMem(0x3b0a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x60aa);
        EXPECT(gbc.pc(), 0x3b0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0013
        gbc.setState(0xeef3, 0xfbb2, 0xd020, 0x10e0, 0xdd65, 0x3528, 0x1, 0x0);
        gbc.writeMem(0xeef3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xfbb2);
        EXPECT(gbc.pc(), 0xeef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef3), 0x54);
        // 54 0014
        gbc.setState(0x90ec, 0xd931, 0x37c0, 0xa96c, 0xe01, 0x3b35, 0x0, 0x1);
        gbc.writeMem(0x90ec, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd931);
        EXPECT(gbc.pc(), 0x90ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ec), 0x54);
        // 54 0016
        gbc.setState(0x81aa, 0xd13f, 0x4e60, 0x67a6, 0x9d04, 0x3f28, 0x0, 0x1);
        gbc.writeMem(0x81aa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd13f);
        EXPECT(gbc.pc(), 0x81ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81aa), 0x54);
        // 54 0017
        gbc.setState(0xc684, 0x4aee, 0x9900, 0x70a2, 0xd3eb, 0x1486, 0x1, 0x0);
        gbc.writeMem(0xc684, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4aee);
        EXPECT(gbc.pc(), 0xc685);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc684), 0x54);
        // 54 0018
        gbc.setState(0x7874, 0x202a, 0x9cf0, 0x1f0c, 0xb101, 0x86df, 0x0, 0x1);
        gbc.writeMem(0x7874, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x202a);
        EXPECT(gbc.pc(), 0x7875);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0019
        gbc.setState(0x7e4f, 0x6d2c, 0x5a00, 0xe373, 0xeb41, 0xe430, 0x0, 0x0);
        gbc.writeMem(0x7e4f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6d2c);
        EXPECT(gbc.pc(), 0x7e50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 001A
        gbc.setState(0x52fe, 0x3c97, 0x8d10, 0x6743, 0x5d60, 0x4b14, 0x0, 0x1);
        gbc.writeMem(0x52fe, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x3c97);
        EXPECT(gbc.pc(), 0x52ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 001B
        gbc.setState(0x1852, 0x8fd2, 0x88f0, 0x144a, 0xb9d2, 0x7d64, 0x0, 0x0);
        gbc.writeMem(0x1852, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8fd2);
        EXPECT(gbc.pc(), 0x1853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 001C
        gbc.setState(0xd76d, 0x5a75, 0x41f0, 0x7f13, 0x5ae0, 0x46cb, 0x0, 0x1);
        gbc.writeMem(0xd76d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5a75);
        EXPECT(gbc.pc(), 0xd76e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd76d), 0x54);
        // 54 001D
        gbc.setState(0x4041, 0x9ffd, 0xc20, 0xcb22, 0x340e, 0x80c9, 0x1, 0x0);
        gbc.writeMem(0x4041, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9ffd);
        EXPECT(gbc.pc(), 0x4042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 001E
        gbc.setState(0xdf0c, 0x33ee, 0x21b0, 0x155d, 0x9904, 0x88be, 0x1, 0x0);
        gbc.writeMem(0xdf0c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x33ee);
        EXPECT(gbc.pc(), 0xdf0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf0c), 0x54);
        // 54 001F
        gbc.setState(0xad36, 0x8c60, 0x8090, 0xa822, 0x3203, 0xa7fd, 0x0, 0x1);
        gbc.writeMem(0xad36, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8c60);
        EXPECT(gbc.pc(), 0xad37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad36), 0x54);
        // 54 0020
        gbc.setState(0x7b19, 0x43d8, 0x5c50, 0x226e, 0x4946, 0x6872, 0x1, 0x1);
        gbc.writeMem(0x7b19, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x43d8);
        EXPECT(gbc.pc(), 0x7b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0021
        gbc.setState(0xc74f, 0xd329, 0xee00, 0x62ed, 0x45f0, 0xfe7c, 0x0, 0x0);
        gbc.writeMem(0xc74f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd329);
        EXPECT(gbc.pc(), 0xc750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc74f), 0x54);
        // 54 0022
        gbc.setState(0x1ccd, 0xf746, 0x4910, 0x4c49, 0xd4c0, 0x337e, 0x0, 0x0);
        gbc.writeMem(0x1ccd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf746);
        EXPECT(gbc.pc(), 0x1cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0023
        gbc.setState(0x2d93, 0xfc95, 0x80, 0xb593, 0x1782, 0xd8aa, 0x1, 0x1);
        gbc.writeMem(0x2d93, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xfc95);
        EXPECT(gbc.pc(), 0x2d94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0024
        gbc.setState(0xbcae, 0x6bce, 0x7b40, 0x1575, 0x4d4d, 0xd9e0, 0x0, 0x1);
        gbc.writeMem(0xbcae, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x6bce);
        EXPECT(gbc.pc(), 0xbcaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcae), 0x54);
        // 54 0025
        gbc.setState(0x1f24, 0xfb5b, 0xd4d0, 0x32a4, 0x2116, 0xea40, 0x0, 0x0);
        gbc.writeMem(0x1f24, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfb5b);
        EXPECT(gbc.pc(), 0x1f25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0026
        gbc.setState(0xb4b1, 0x7d94, 0x9640, 0xe222, 0xbc54, 0xe97, 0x1, 0x1);
        gbc.writeMem(0xb4b1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7d94);
        EXPECT(gbc.pc(), 0xb4b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b1), 0x54);
        // 54 0027
        gbc.setState(0x3fd, 0xd88b, 0xbe00, 0xcad1, 0xf441, 0xc84c, 0x1, 0x0);
        gbc.writeMem(0x3fd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd88b);
        EXPECT(gbc.pc(), 0x3fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0028
        gbc.setState(0x7ee3, 0xde3d, 0x7fb0, 0xe343, 0xfe0a, 0x6468, 0x0, 0x0);
        gbc.writeMem(0x7ee3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xde3d);
        EXPECT(gbc.pc(), 0x7ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0029
        gbc.setState(0xe68, 0xdfc4, 0x40, 0x33d8, 0x7061, 0x5956, 0x1, 0x1);
        gbc.writeMem(0xe68, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdfc4);
        EXPECT(gbc.pc(), 0xe69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 002B
        gbc.setState(0xb4fa, 0xb51d, 0xa250, 0xb912, 0xfd2, 0xca00, 0x1, 0x1);
        gbc.writeMem(0xb4fa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb51d);
        EXPECT(gbc.pc(), 0xb4fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4fa), 0x54);
        // 54 002C
        gbc.setState(0xd34e, 0xa7fe, 0xf880, 0x6fad, 0x98a7, 0x44e4, 0x1, 0x0);
        gbc.writeMem(0xd34e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa7fe);
        EXPECT(gbc.pc(), 0xd34f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd34e), 0x54);
        // 54 002D
        gbc.setState(0x3a27, 0x7b16, 0x1c0, 0xfcf5, 0x4f7b, 0xbe0, 0x1, 0x1);
        gbc.writeMem(0x3a27, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7b16);
        EXPECT(gbc.pc(), 0x3a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 002E
        gbc.setState(0x1188, 0x2d31, 0x3880, 0xaaf, 0x7a3f, 0x453a, 0x0, 0x1);
        gbc.writeMem(0x1188, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2d31);
        EXPECT(gbc.pc(), 0x1189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 002F
        gbc.setState(0x3051, 0x2b10, 0x9b90, 0x627e, 0x7cd1, 0xce50, 0x0, 0x0);
        gbc.writeMem(0x3051, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2b10);
        EXPECT(gbc.pc(), 0x3052);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0030
        gbc.setState(0xc1ff, 0x5516, 0x1550, 0x29b3, 0xb7c1, 0xc80, 0x1, 0x1);
        gbc.writeMem(0xc1ff, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5516);
        EXPECT(gbc.pc(), 0xc200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ff), 0x54);
        // 54 0031
        gbc.setState(0x134e, 0x33bd, 0xe4e0, 0x760a, 0x380d, 0xa244, 0x1, 0x0);
        gbc.writeMem(0x134e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x33bd);
        EXPECT(gbc.pc(), 0x134f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0032
        gbc.setState(0x8edf, 0x8709, 0xdd40, 0x621d, 0x1a13, 0x6e87, 0x1, 0x0);
        gbc.writeMem(0x8edf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8709);
        EXPECT(gbc.pc(), 0x8ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8edf), 0x54);
        // 54 0033
        gbc.setState(0x1e23, 0xf23, 0x2320, 0x6b49, 0x1fc5, 0xaf31, 0x1, 0x1);
        gbc.writeMem(0x1e23, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf23);
        EXPECT(gbc.pc(), 0x1e24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0034
        gbc.setState(0xb1ec, 0x683, 0xa8a0, 0x5d11, 0x80de, 0xcc5a, 0x1, 0x1);
        gbc.writeMem(0xb1ec, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x683);
        EXPECT(gbc.pc(), 0xb1ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ec), 0x54);
        // 54 0035
        gbc.setState(0xc669, 0x68ee, 0xe2f0, 0xcc82, 0x5051, 0x64b, 0x0, 0x1);
        gbc.writeMem(0xc669, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x68ee);
        EXPECT(gbc.pc(), 0xc66a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc669), 0x54);
        // 54 0036
        gbc.setState(0x8626, 0xc480, 0x4230, 0xd554, 0x3c16, 0x7fb7, 0x0, 0x1);
        gbc.writeMem(0x8626, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc480);
        EXPECT(gbc.pc(), 0x8627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8626), 0x54);
        // 54 0037
        gbc.setState(0x7a0e, 0x8dd8, 0xd9c0, 0x74dc, 0x41d7, 0x4e9f, 0x0, 0x0);
        gbc.writeMem(0x7a0e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8dd8);
        EXPECT(gbc.pc(), 0x7a0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0038
        gbc.setState(0x99f3, 0x123f, 0x6b20, 0x3ba0, 0x34bf, 0x6c73, 0x0, 0x1);
        gbc.writeMem(0x99f3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x123f);
        EXPECT(gbc.pc(), 0x99f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f3), 0x54);
        // 54 0039
        gbc.setState(0xb901, 0xd779, 0x69c0, 0xe50c, 0x1b13, 0x8e9e, 0x0, 0x1);
        gbc.writeMem(0xb901, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd779);
        EXPECT(gbc.pc(), 0xb902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb901), 0x54);
        // 54 003A
        gbc.setState(0xe813, 0x52e7, 0x6940, 0x8ea, 0x57bc, 0xfb31, 0x1, 0x0);
        gbc.writeMem(0xe813, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x52e7);
        EXPECT(gbc.pc(), 0xe814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe813), 0x54);
        // 54 003B
        gbc.setState(0x8f45, 0x4e0c, 0x2550, 0xfa72, 0x6a45, 0xdacd, 0x1, 0x0);
        gbc.writeMem(0x8f45, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4e0c);
        EXPECT(gbc.pc(), 0x8f46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f45), 0x54);
        // 54 003C
        gbc.setState(0xcedd, 0xbf89, 0xa1b0, 0xfb1c, 0xe630, 0xf199, 0x0, 0x0);
        gbc.writeMem(0xcedd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbf89);
        EXPECT(gbc.pc(), 0xcede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcedd), 0x54);
        // 54 003D
        gbc.setState(0x835, 0xd62a, 0x3560, 0x9342, 0x45c4, 0x2965, 0x0, 0x1);
        gbc.writeMem(0x835, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd62a);
        EXPECT(gbc.pc(), 0x836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 003E
        gbc.setState(0xc5ca, 0xb32e, 0x5020, 0x56af, 0x5fa8, 0xfa3, 0x1, 0x0);
        gbc.writeMem(0xc5ca, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb32e);
        EXPECT(gbc.pc(), 0xc5cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ca), 0x54);
        // 54 003F
        gbc.setState(0xb7b5, 0x97d7, 0x8030, 0xd0e1, 0xbf09, 0xa241, 0x1, 0x0);
        gbc.writeMem(0xb7b5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x97d7);
        EXPECT(gbc.pc(), 0xb7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7b5), 0x54);
        // 54 0040
        gbc.setState(0x8878, 0x6d01, 0x91b0, 0xed95, 0x34b4, 0xb14a, 0x0, 0x1);
        gbc.writeMem(0x8878, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6d01);
        EXPECT(gbc.pc(), 0x8879);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8878), 0x54);
        // 54 0041
        gbc.setState(0x1674, 0xd09d, 0x6c90, 0x34, 0x1627, 0xcb96, 0x1, 0x1);
        gbc.writeMem(0x1674, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd09d);
        EXPECT(gbc.pc(), 0x1675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0042
        gbc.setState(0x345d, 0xf4bb, 0x810, 0xdb60, 0x63ff, 0x4041, 0x1, 0x0);
        gbc.writeMem(0x345d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf4bb);
        EXPECT(gbc.pc(), 0x345e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0043
        gbc.setState(0x330, 0xea53, 0x9790, 0x1fe, 0x6a2e, 0x1f6c, 0x0, 0x0);
        gbc.writeMem(0x330, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xea53);
        EXPECT(gbc.pc(), 0x331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0044
        gbc.setState(0x7761, 0xf8bb, 0x79d0, 0x11c8, 0xba2a, 0x8a57, 0x0, 0x0);
        gbc.writeMem(0x7761, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf8bb);
        EXPECT(gbc.pc(), 0x7762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0045
        gbc.setState(0xb8c4, 0xa157, 0xce70, 0x8ba1, 0x6d8a, 0xd79, 0x0, 0x0);
        gbc.writeMem(0xb8c4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa157);
        EXPECT(gbc.pc(), 0xb8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c4), 0x54);
        // 54 0046
        gbc.setState(0xcb59, 0x74f0, 0x5860, 0xdbbe, 0x1db3, 0x8ceb, 0x0, 0x1);
        gbc.writeMem(0xcb59, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x74f0);
        EXPECT(gbc.pc(), 0xcb5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb59), 0x54);
        // 54 0047
        gbc.setState(0xe05c, 0x9439, 0xee60, 0x7f78, 0x24a6, 0x4f9c, 0x0, 0x0);
        gbc.writeMem(0xe05c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9439);
        EXPECT(gbc.pc(), 0xe05d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe05c), 0x54);
        // 54 0048
        gbc.setState(0xa1a7, 0xefe4, 0x2c20, 0xcd79, 0xc539, 0xec7c, 0x1, 0x1);
        gbc.writeMem(0xa1a7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xefe4);
        EXPECT(gbc.pc(), 0xa1a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a7), 0x54);
        // 54 004A
        gbc.setState(0x4bf4, 0x80aa, 0x5f50, 0x1eca, 0xb90c, 0x9672, 0x0, 0x0);
        gbc.writeMem(0x4bf4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x80aa);
        EXPECT(gbc.pc(), 0x4bf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 004B
        gbc.setState(0xeb47, 0x903f, 0xefc0, 0x82d3, 0x3a89, 0x1756, 0x0, 0x0);
        gbc.writeMem(0xeb47, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x903f);
        EXPECT(gbc.pc(), 0xeb48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb47), 0x54);
        // 54 004C
        gbc.setState(0x2595, 0xc442, 0x1a80, 0x841c, 0x86a3, 0x713e, 0x1, 0x0);
        gbc.writeMem(0x2595, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc442);
        EXPECT(gbc.pc(), 0x2596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 004D
        gbc.setState(0xcfe0, 0xaebe, 0xca60, 0xd6b, 0x63c5, 0x89a4, 0x0, 0x1);
        gbc.writeMem(0xcfe0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xaebe);
        EXPECT(gbc.pc(), 0xcfe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe0), 0x54);
        // 54 004E
        gbc.setState(0xc074, 0xf93a, 0x2ff0, 0x83d8, 0x5f3b, 0xd24d, 0x0, 0x0);
        gbc.writeMem(0xc074, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf93a);
        EXPECT(gbc.pc(), 0xc075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc074), 0x54);
        // 54 004F
        gbc.setState(0xc9b1, 0x2230, 0xda0, 0x7d7d, 0x55c7, 0xe827, 0x1, 0x1);
        gbc.writeMem(0xc9b1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2230);
        EXPECT(gbc.pc(), 0xc9b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b1), 0x54);
        // 54 0050
        gbc.setState(0xd333, 0x1ab4, 0xa130, 0x4f63, 0x67d5, 0x2627, 0x0, 0x1);
        gbc.writeMem(0xd333, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1ab4);
        EXPECT(gbc.pc(), 0xd334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd333), 0x54);
        // 54 0051
        gbc.setState(0x599b, 0xca76, 0xe350, 0x483, 0x484d, 0xfee1, 0x1, 0x0);
        gbc.writeMem(0x599b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xca76);
        EXPECT(gbc.pc(), 0x599c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0052
        gbc.setState(0x26d4, 0x2612, 0xa30, 0xa659, 0xbbd8, 0x6201, 0x0, 0x0);
        gbc.writeMem(0x26d4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2612);
        EXPECT(gbc.pc(), 0x26d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0053
        gbc.setState(0xd47d, 0xed40, 0x8530, 0xbc6a, 0xc7ec, 0x6ce8, 0x0, 0x1);
        gbc.writeMem(0xd47d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xed40);
        EXPECT(gbc.pc(), 0xd47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd47d), 0x54);
        // 54 0054
        gbc.setState(0xe4c2, 0x9f25, 0x41b0, 0xa0fa, 0xa166, 0x7f8e, 0x1, 0x1);
        gbc.writeMem(0xe4c2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9f25);
        EXPECT(gbc.pc(), 0xe4c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c2), 0x54);
        // 54 0055
        gbc.setState(0xe06a, 0x8945, 0x8850, 0x5a5b, 0xfbcf, 0xb48e, 0x0, 0x0);
        gbc.writeMem(0xe06a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8945);
        EXPECT(gbc.pc(), 0xe06b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe06a), 0x54);
        // 54 0056
        gbc.setState(0xedb6, 0xc7f0, 0x37c0, 0x9f5e, 0x8252, 0x4df6, 0x0, 0x1);
        gbc.writeMem(0xedb6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc7f0);
        EXPECT(gbc.pc(), 0xedb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedb6), 0x54);
        // 54 0057
        gbc.setState(0x9d59, 0x76cf, 0x87a0, 0xc212, 0x15c3, 0x7b1b, 0x1, 0x1);
        gbc.writeMem(0x9d59, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x76cf);
        EXPECT(gbc.pc(), 0x9d5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d59), 0x54);
        // 54 0058
        gbc.setState(0x7a08, 0x8272, 0xc940, 0x4bcc, 0xd12a, 0x5f03, 0x0, 0x1);
        gbc.writeMem(0x7a08, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8272);
        EXPECT(gbc.pc(), 0x7a09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0059
        gbc.setState(0xb914, 0xa63e, 0x1a30, 0xa7e5, 0x999e, 0xc55f, 0x1, 0x0);
        gbc.writeMem(0xb914, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa63e);
        EXPECT(gbc.pc(), 0xb915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb914), 0x54);
        // 54 005A
        gbc.setState(0x2357, 0xd67b, 0xbf60, 0x3de4, 0xd071, 0x3dc1, 0x0, 0x1);
        gbc.writeMem(0x2357, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd67b);
        EXPECT(gbc.pc(), 0x2358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 005B
        gbc.setState(0x1569, 0x17a5, 0xe060, 0xcf5, 0x91, 0x9dea, 0x1, 0x1);
        gbc.writeMem(0x1569, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x17a5);
        EXPECT(gbc.pc(), 0x156a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 005C
        gbc.setState(0x7a0f, 0x9e2d, 0xb630, 0x1e77, 0x513f, 0x82ce, 0x0, 0x0);
        gbc.writeMem(0x7a0f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9e2d);
        EXPECT(gbc.pc(), 0x7a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 005D
        gbc.setState(0x4626, 0x7355, 0xa9b0, 0xa2bd, 0x7cb9, 0xb5b5, 0x0, 0x0);
        gbc.writeMem(0x4626, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7355);
        EXPECT(gbc.pc(), 0x4627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 005F
        gbc.setState(0xeaaa, 0x46b1, 0x43e0, 0xd6c9, 0x6edd, 0x3c56, 0x0, 0x0);
        gbc.writeMem(0xeaaa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x46b1);
        EXPECT(gbc.pc(), 0xeaab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaaa), 0x54);
        // 54 0060
        gbc.setState(0x21e2, 0x308c, 0xe80, 0xedce, 0xd6db, 0x19de, 0x0, 0x0);
        gbc.writeMem(0x21e2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x308c);
        EXPECT(gbc.pc(), 0x21e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0061
        gbc.setState(0xd802, 0xf364, 0x2880, 0x6f36, 0xf2d1, 0x55c3, 0x0, 0x0);
        gbc.writeMem(0xd802, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf364);
        EXPECT(gbc.pc(), 0xd803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd802), 0x54);
        // 54 0062
        gbc.setState(0xddcf, 0x2fdb, 0x1320, 0xb68, 0xfa52, 0x474c, 0x1, 0x1);
        gbc.writeMem(0xddcf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2fdb);
        EXPECT(gbc.pc(), 0xddd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddcf), 0x54);
        // 54 0063
        gbc.setState(0xafe2, 0x530b, 0x4da0, 0x1f91, 0x9074, 0x69bd, 0x1, 0x1);
        gbc.writeMem(0xafe2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x530b);
        EXPECT(gbc.pc(), 0xafe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe2), 0x54);
        // 54 0064
        gbc.setState(0x6c97, 0xbe65, 0xc370, 0xbbc5, 0x7f36, 0x130f, 0x0, 0x0);
        gbc.writeMem(0x6c97, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbe65);
        EXPECT(gbc.pc(), 0x6c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0065
        gbc.setState(0xc862, 0x1ba5, 0x5a90, 0x197e, 0x8af, 0xc721, 0x1, 0x0);
        gbc.writeMem(0xc862, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1ba5);
        EXPECT(gbc.pc(), 0xc863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc862), 0x54);
        // 54 0066
        gbc.setState(0x1467, 0xd9d3, 0x940, 0xf9b7, 0xe789, 0x43a7, 0x0, 0x0);
        gbc.writeMem(0x1467, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd9d3);
        EXPECT(gbc.pc(), 0x1468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0067
        gbc.setState(0xb6f, 0xa757, 0x4ef0, 0x8abd, 0x2678, 0xad2b, 0x1, 0x0);
        gbc.writeMem(0xb6f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa757);
        EXPECT(gbc.pc(), 0xb70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0068
        gbc.setState(0x7c5e, 0x7446, 0xf780, 0x399b, 0xe185, 0x401e, 0x0, 0x0);
        gbc.writeMem(0x7c5e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7446);
        EXPECT(gbc.pc(), 0x7c5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0069
        gbc.setState(0xb349, 0x8889, 0x5830, 0x1d53, 0xe91c, 0xca4f, 0x0, 0x0);
        gbc.writeMem(0xb349, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8889);
        EXPECT(gbc.pc(), 0xb34a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb349), 0x54);
        // 54 006B
        gbc.setState(0x4f9c, 0x9d55, 0xefd0, 0xadb1, 0x23e7, 0x46ea, 0x0, 0x0);
        gbc.writeMem(0x4f9c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9d55);
        EXPECT(gbc.pc(), 0x4f9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 006C
        gbc.setState(0x7519, 0xa60c, 0xcc00, 0xbacc, 0x6cbf, 0x844d, 0x0, 0x0);
        gbc.writeMem(0x7519, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa60c);
        EXPECT(gbc.pc(), 0x751a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 006D
        gbc.setState(0x46f6, 0x4b22, 0x1cc0, 0x4acb, 0x1651, 0x44a0, 0x1, 0x1);
        gbc.writeMem(0x46f6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4b22);
        EXPECT(gbc.pc(), 0x46f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 006E
        gbc.setState(0x3455, 0x76de, 0x25e0, 0x7f5d, 0xeef3, 0x383b, 0x1, 0x0);
        gbc.writeMem(0x3455, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x76de);
        EXPECT(gbc.pc(), 0x3456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 006F
        gbc.setState(0x576, 0xa700, 0x6b30, 0x31b3, 0x436, 0x23f0, 0x1, 0x1);
        gbc.writeMem(0x576, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa700);
        EXPECT(gbc.pc(), 0x577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0070
        gbc.setState(0x947e, 0x5626, 0xdc10, 0x8ef9, 0xd6ac, 0xe71b, 0x1, 0x0);
        gbc.writeMem(0x947e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5626);
        EXPECT(gbc.pc(), 0x947f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x947e), 0x54);
        // 54 0071
        gbc.setState(0x5652, 0x6b, 0x5270, 0xfa5a, 0xc872, 0x92db, 0x0, 0x1);
        gbc.writeMem(0x5652, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6b);
        EXPECT(gbc.pc(), 0x5653);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0072
        gbc.setState(0xac26, 0x9d64, 0x6f50, 0xd844, 0xa68e, 0x2d26, 0x1, 0x1);
        gbc.writeMem(0xac26, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9d64);
        EXPECT(gbc.pc(), 0xac27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac26), 0x54);
        // 54 0073
        gbc.setState(0x4b40, 0xdd7a, 0x4de0, 0xb31d, 0xb749, 0xcab, 0x1, 0x0);
        gbc.writeMem(0x4b40, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xdd7a);
        EXPECT(gbc.pc(), 0x4b41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0075
        gbc.setState(0x3186, 0xf72e, 0xf350, 0xa8a0, 0x665, 0x85d1, 0x0, 0x0);
        gbc.writeMem(0x3186, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf72e);
        EXPECT(gbc.pc(), 0x3187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0076
        gbc.setState(0x51a6, 0x27fd, 0x7630, 0x2c77, 0xb82b, 0x8364, 0x0, 0x0);
        gbc.writeMem(0x51a6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x27fd);
        EXPECT(gbc.pc(), 0x51a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0077
        gbc.setState(0x8dbc, 0xc51a, 0x59e0, 0xff65, 0x4bf0, 0x60, 0x1, 0x1);
        gbc.writeMem(0x8dbc, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc51a);
        EXPECT(gbc.pc(), 0x8dbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dbc), 0x54);
        // 54 0079
        gbc.setState(0x4d0e, 0x87f4, 0xf8b0, 0x2cb, 0xff43, 0x932c, 0x0, 0x0);
        gbc.writeMem(0x4d0e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x87f4);
        EXPECT(gbc.pc(), 0x4d0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 007A
        gbc.setState(0x7ce5, 0xe256, 0xbb20, 0xd27b, 0x74a8, 0xe9e5, 0x1, 0x1);
        gbc.writeMem(0x7ce5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe256);
        EXPECT(gbc.pc(), 0x7ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 007B
        gbc.setState(0xad8, 0xf3da, 0x93d0, 0x34de, 0x40c0, 0xd489, 0x1, 0x0);
        gbc.writeMem(0xad8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf3da);
        EXPECT(gbc.pc(), 0xad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 007D
        gbc.setState(0x4944, 0x527c, 0xc560, 0x3eb5, 0xd225, 0xb9d1, 0x1, 0x1);
        gbc.writeMem(0x4944, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x527c);
        EXPECT(gbc.pc(), 0x4945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 007E
        gbc.setState(0xa0f, 0xf9dc, 0x2940, 0x9a50, 0xde57, 0x84f, 0x1, 0x0);
        gbc.writeMem(0xa0f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf9dc);
        EXPECT(gbc.pc(), 0xa10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 007F
        gbc.setState(0x520a, 0xc227, 0xde70, 0x896c, 0xfd14, 0xbc9a, 0x1, 0x1);
        gbc.writeMem(0x520a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc227);
        EXPECT(gbc.pc(), 0x520b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0080
        gbc.setState(0x7099, 0x4b4f, 0x1390, 0xf9e0, 0x7ae6, 0xaa16, 0x0, 0x0);
        gbc.writeMem(0x7099, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4b4f);
        EXPECT(gbc.pc(), 0x709a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0081
        gbc.setState(0xc98f, 0x1f8b, 0xe220, 0x505a, 0xc483, 0x7045, 0x0, 0x1);
        gbc.writeMem(0xc98f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1f8b);
        EXPECT(gbc.pc(), 0xc990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc98f), 0x54);
        // 54 0082
        gbc.setState(0x7c08, 0xd2bc, 0xa350, 0x29e9, 0x5059, 0x4916, 0x1, 0x1);
        gbc.writeMem(0x7c08, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd2bc);
        EXPECT(gbc.pc(), 0x7c09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0083
        gbc.setState(0x102d, 0xc1cd, 0x74e0, 0x2bd1, 0xccfc, 0x5736, 0x0, 0x0);
        gbc.writeMem(0x102d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc1cd);
        EXPECT(gbc.pc(), 0x102e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0084
        gbc.setState(0x560a, 0xf2d8, 0x1510, 0x1f59, 0x9817, 0x35a, 0x0, 0x0);
        gbc.writeMem(0x560a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf2d8);
        EXPECT(gbc.pc(), 0x560b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0085
        gbc.setState(0x62ee, 0xdc29, 0x3510, 0xbf70, 0xeb7e, 0xca7f, 0x1, 0x0);
        gbc.writeMem(0x62ee, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xdc29);
        EXPECT(gbc.pc(), 0x62ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0086
        gbc.setState(0xcb62, 0xbcff, 0x9e20, 0xd91e, 0xbb8, 0x67d7, 0x1, 0x0);
        gbc.writeMem(0xcb62, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xbcff);
        EXPECT(gbc.pc(), 0xcb63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb62), 0x54);
        // 54 0087
        gbc.setState(0x8a51, 0x93fd, 0x8da0, 0x5f73, 0x3fd8, 0x67d, 0x0, 0x0);
        gbc.writeMem(0x8a51, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x93fd);
        EXPECT(gbc.pc(), 0x8a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a51), 0x54);
        // 54 0088
        gbc.setState(0x422d, 0xe10e, 0x86c0, 0xa76b, 0x95b2, 0xc6b4, 0x0, 0x1);
        gbc.writeMem(0x422d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe10e);
        EXPECT(gbc.pc(), 0x422e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0089
        gbc.setState(0xba3, 0xda93, 0xd250, 0xb8bf, 0x87af, 0x2b9b, 0x1, 0x0);
        gbc.writeMem(0xba3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xda93);
        EXPECT(gbc.pc(), 0xba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 008A
        gbc.setState(0x6e36, 0x55e3, 0xee30, 0x377b, 0x6155, 0x360a, 0x0, 0x1);
        gbc.writeMem(0x6e36, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x55e3);
        EXPECT(gbc.pc(), 0x6e37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 008C
        gbc.setState(0xdfbd, 0x1d7a, 0x8790, 0xa265, 0x62f3, 0xec12, 0x1, 0x0);
        gbc.writeMem(0xdfbd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1d7a);
        EXPECT(gbc.pc(), 0xdfbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfbd), 0x54);
        // 54 008D
        gbc.setState(0xe46f, 0x2799, 0xad20, 0x16f1, 0x460a, 0x987a, 0x1, 0x0);
        gbc.writeMem(0xe46f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2799);
        EXPECT(gbc.pc(), 0xe470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46f), 0x54);
        // 54 008E
        gbc.setState(0x5136, 0x82ab, 0x3d80, 0xa71f, 0xda5b, 0xbf02, 0x1, 0x0);
        gbc.writeMem(0x5136, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x82ab);
        EXPECT(gbc.pc(), 0x5137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 008F
        gbc.setState(0xe4aa, 0x38e5, 0x3090, 0xfcbc, 0xb654, 0x6559, 0x1, 0x1);
        gbc.writeMem(0xe4aa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x38e5);
        EXPECT(gbc.pc(), 0xe4ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4aa), 0x54);
        // 54 0090
        gbc.setState(0x33c5, 0x4f1c, 0xdde0, 0x36b8, 0xd7b3, 0xef35, 0x1, 0x1);
        gbc.writeMem(0x33c5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4f1c);
        EXPECT(gbc.pc(), 0x33c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0091
        gbc.setState(0x1cde, 0xcee4, 0xefe0, 0x3057, 0x3c46, 0xfe74, 0x0, 0x1);
        gbc.writeMem(0x1cde, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xcee4);
        EXPECT(gbc.pc(), 0x1cdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0092
        gbc.setState(0xdde5, 0x5cbb, 0x7dc0, 0x98f3, 0x21af, 0x85e3, 0x0, 0x0);
        gbc.writeMem(0xdde5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5cbb);
        EXPECT(gbc.pc(), 0xdde6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde5), 0x54);
        // 54 0093
        gbc.setState(0xb1c, 0x169, 0xce20, 0x63bc, 0x3d4, 0x775d, 0x0, 0x1);
        gbc.writeMem(0xb1c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x169);
        EXPECT(gbc.pc(), 0xb1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0094
        gbc.setState(0x5927, 0x37fb, 0x30a0, 0x9af6, 0xc23, 0xfc90, 0x1, 0x0);
        gbc.writeMem(0x5927, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x37fb);
        EXPECT(gbc.pc(), 0x5928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0095
        gbc.setState(0xba27, 0x798d, 0x3710, 0xe3bc, 0x34c6, 0x2358, 0x0, 0x1);
        gbc.writeMem(0xba27, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x798d);
        EXPECT(gbc.pc(), 0xba28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba27), 0x54);
        // 54 0096
        gbc.setState(0x708f, 0x1c45, 0x4220, 0xa5ed, 0x6562, 0x7d68, 0x1, 0x1);
        gbc.writeMem(0x708f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1c45);
        EXPECT(gbc.pc(), 0x7090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0097
        gbc.setState(0x41eb, 0xe1af, 0x8f10, 0x31d, 0xe888, 0xa4c5, 0x0, 0x1);
        gbc.writeMem(0x41eb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe1af);
        EXPECT(gbc.pc(), 0x41ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0098
        gbc.setState(0x5883, 0xff0f, 0xf920, 0x5fb, 0x5920, 0xad98, 0x1, 0x0);
        gbc.writeMem(0x5883, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xff0f);
        EXPECT(gbc.pc(), 0x5884);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0099
        gbc.setState(0x6f5, 0x12e0, 0x2150, 0xcf19, 0xb118, 0x7b50, 0x0, 0x1);
        gbc.writeMem(0x6f5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x12e0);
        EXPECT(gbc.pc(), 0x6f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 009A
        gbc.setState(0x5719, 0x8d7f, 0xf9c0, 0x1007, 0x63ca, 0x2e85, 0x1, 0x0);
        gbc.writeMem(0x5719, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8d7f);
        EXPECT(gbc.pc(), 0x571a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 009B
        gbc.setState(0x9f6c, 0x19e6, 0x3db0, 0xc892, 0x645c, 0xd453, 0x1, 0x1);
        gbc.writeMem(0x9f6c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x19e6);
        EXPECT(gbc.pc(), 0x9f6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f6c), 0x54);
        // 54 009C
        gbc.setState(0x8cb6, 0x1523, 0x5ee0, 0xae80, 0xff33, 0x86ef, 0x1, 0x1);
        gbc.writeMem(0x8cb6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1523);
        EXPECT(gbc.pc(), 0x8cb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cb6), 0x54);
        // 54 009D
        gbc.setState(0xaa24, 0xdf0b, 0xc170, 0xf5da, 0x4974, 0x4cf, 0x0, 0x0);
        gbc.writeMem(0xaa24, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xdf0b);
        EXPECT(gbc.pc(), 0xaa25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa24), 0x54);
        // 54 009E
        gbc.setState(0x6444, 0xc8f9, 0x4760, 0x8625, 0xf467, 0x6fdb, 0x1, 0x0);
        gbc.writeMem(0x6444, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc8f9);
        EXPECT(gbc.pc(), 0x6445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 009F
        gbc.setState(0xb718, 0x990, 0x6040, 0x6037, 0x547a, 0x6e48, 0x0, 0x1);
        gbc.writeMem(0xb718, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x990);
        EXPECT(gbc.pc(), 0xb719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb718), 0x54);
        // 54 00A0
        gbc.setState(0xc1d1, 0x37ff, 0x3800, 0x2e71, 0x6ad9, 0x730d, 0x1, 0x0);
        gbc.writeMem(0xc1d1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x37ff);
        EXPECT(gbc.pc(), 0xc1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1d1), 0x54);
        // 54 00A1
        gbc.setState(0xeb65, 0xfb74, 0x2a20, 0x8ccf, 0x4a6, 0xcf6a, 0x1, 0x1);
        gbc.writeMem(0xeb65, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfb74);
        EXPECT(gbc.pc(), 0xeb66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb65), 0x54);
        // 54 00A2
        gbc.setState(0xe9c7, 0x7c77, 0x86e0, 0xc2a5, 0x990e, 0x93d, 0x0, 0x0);
        gbc.writeMem(0xe9c7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x7c77);
        EXPECT(gbc.pc(), 0xe9c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c7), 0x54);
        // 54 00A3
        gbc.setState(0xba77, 0x8147, 0x2700, 0x2e98, 0x1192, 0x1266, 0x1, 0x0);
        gbc.writeMem(0xba77, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8147);
        EXPECT(gbc.pc(), 0xba78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba77), 0x54);
        // 54 00A4
        gbc.setState(0x3cab, 0x7f91, 0x6d60, 0x1797, 0x8253, 0xc75a, 0x1, 0x1);
        gbc.writeMem(0x3cab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7f91);
        EXPECT(gbc.pc(), 0x3cac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00A5
        gbc.setState(0x471a, 0xc50b, 0xad60, 0xf1b6, 0xa487, 0xcdf, 0x0, 0x0);
        gbc.writeMem(0x471a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc50b);
        EXPECT(gbc.pc(), 0x471b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00A6
        gbc.setState(0x77e3, 0xd10b, 0x1ce0, 0xc542, 0x26b0, 0x9126, 0x1, 0x1);
        gbc.writeMem(0x77e3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd10b);
        EXPECT(gbc.pc(), 0x77e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00A7
        gbc.setState(0xf96, 0x9854, 0x7e90, 0xe29c, 0xc722, 0x2938, 0x0, 0x0);
        gbc.writeMem(0xf96, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9854);
        EXPECT(gbc.pc(), 0xf97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00A8
        gbc.setState(0x83ec, 0x73e8, 0x70c0, 0xcf25, 0x2fdf, 0x968e, 0x0, 0x1);
        gbc.writeMem(0x83ec, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x73e8);
        EXPECT(gbc.pc(), 0x83ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ec), 0x54);
        // 54 00A9
        gbc.setState(0x2550, 0x17f6, 0x7810, 0x3b33, 0x8d15, 0xeef3, 0x1, 0x1);
        gbc.writeMem(0x2550, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x17f6);
        EXPECT(gbc.pc(), 0x2551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00AA
        gbc.setState(0x74ff, 0x8ebc, 0x5b20, 0xbbb8, 0x8cd5, 0x5605, 0x0, 0x0);
        gbc.writeMem(0x74ff, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8ebc);
        EXPECT(gbc.pc(), 0x7500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00AB
        gbc.setState(0x9666, 0xc3a7, 0xb980, 0x6780, 0xe1bc, 0x3e78, 0x1, 0x1);
        gbc.writeMem(0x9666, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc3a7);
        EXPECT(gbc.pc(), 0x9667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9666), 0x54);
        // 54 00AC
        gbc.setState(0xb6e6, 0x3c8c, 0x55e0, 0xdea4, 0x206d, 0xd89d, 0x1, 0x1);
        gbc.writeMem(0xb6e6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3c8c);
        EXPECT(gbc.pc(), 0xb6e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e6), 0x54);
        // 54 00AD
        gbc.setState(0x32e, 0xba, 0x88c0, 0x564, 0x9de9, 0xee30, 0x1, 0x0);
        gbc.writeMem(0x32e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xba);
        EXPECT(gbc.pc(), 0x32f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00AE
        gbc.setState(0x841c, 0xd917, 0x9450, 0xd5ee, 0xb365, 0xd4a6, 0x1, 0x0);
        gbc.writeMem(0x841c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd917);
        EXPECT(gbc.pc(), 0x841d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x841c), 0x54);
        // 54 00AF
        gbc.setState(0xd295, 0xefd6, 0x74b0, 0xdb1b, 0x92e1, 0xd7a6, 0x1, 0x0);
        gbc.writeMem(0xd295, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xefd6);
        EXPECT(gbc.pc(), 0xd296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd295), 0x54);
        // 54 00B0
        gbc.setState(0x9bc7, 0xe72a, 0x7400, 0x6a28, 0xdc0b, 0xe1a6, 0x0, 0x0);
        gbc.writeMem(0x9bc7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe72a);
        EXPECT(gbc.pc(), 0x9bc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc7), 0x54);
        // 54 00B1
        gbc.setState(0x8e85, 0x419f, 0x1300, 0x319e, 0x4478, 0xf152, 0x1, 0x1);
        gbc.writeMem(0x8e85, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x419f);
        EXPECT(gbc.pc(), 0x8e86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e85), 0x54);
        // 54 00B2
        gbc.setState(0xe72a, 0x6112, 0xb470, 0x91fe, 0xeb8d, 0x45c7, 0x1, 0x1);
        gbc.writeMem(0xe72a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6112);
        EXPECT(gbc.pc(), 0xe72b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe72a), 0x54);
        // 54 00B3
        gbc.setState(0x7b22, 0x4ccb, 0x1480, 0xa95c, 0x64ee, 0x8326, 0x1, 0x1);
        gbc.writeMem(0x7b22, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4ccb);
        EXPECT(gbc.pc(), 0x7b23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00B4
        gbc.setState(0xbea7, 0xd47e, 0x7c00, 0x9c58, 0x70a5, 0x85cc, 0x0, 0x0);
        gbc.writeMem(0xbea7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd47e);
        EXPECT(gbc.pc(), 0xbea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea7), 0x54);
        // 54 00B5
        gbc.setState(0x35ad, 0x63ed, 0xb2b0, 0xc4a6, 0x10dc, 0x3849, 0x0, 0x1);
        gbc.writeMem(0x35ad, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x63ed);
        EXPECT(gbc.pc(), 0x35ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00B6
        gbc.setState(0xfb1, 0x379f, 0xbbf0, 0xe28e, 0x98f1, 0xda27, 0x1, 0x1);
        gbc.writeMem(0xfb1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x379f);
        EXPECT(gbc.pc(), 0xfb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00B7
        gbc.setState(0x1e18, 0x88cb, 0x3a0, 0xc8bb, 0xf55a, 0xad9f, 0x1, 0x0);
        gbc.writeMem(0x1e18, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x88cb);
        EXPECT(gbc.pc(), 0x1e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00B8
        gbc.setState(0x93a0, 0xdb7f, 0x7ae0, 0x427c, 0x44e9, 0xdc67, 0x1, 0x0);
        gbc.writeMem(0x93a0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xdb7f);
        EXPECT(gbc.pc(), 0x93a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93a0), 0x54);
        // 54 00B9
        gbc.setState(0x5caa, 0xa786, 0xddd0, 0xca42, 0x3a4e, 0x2359, 0x0, 0x1);
        gbc.writeMem(0x5caa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa786);
        EXPECT(gbc.pc(), 0x5cab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00BA
        gbc.setState(0xdf11, 0xa968, 0x83c0, 0x788e, 0xa703, 0xb9c3, 0x0, 0x0);
        gbc.writeMem(0xdf11, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa968);
        EXPECT(gbc.pc(), 0xdf12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf11), 0x54);
        // 54 00BB
        gbc.setState(0x77ab, 0x2548, 0x66f0, 0xd52f, 0xa044, 0xf7aa, 0x1, 0x0);
        gbc.writeMem(0x77ab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2548);
        EXPECT(gbc.pc(), 0x77ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00BC
        gbc.setState(0xe7f4, 0x8a11, 0x9750, 0x4cdf, 0x3603, 0x5ade, 0x1, 0x1);
        gbc.writeMem(0xe7f4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8a11);
        EXPECT(gbc.pc(), 0xe7f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f4), 0x54);
        // 54 00BD
        gbc.setState(0x353d, 0x70a2, 0x2ef0, 0x73ee, 0x791a, 0x36e2, 0x0, 0x0);
        gbc.writeMem(0x353d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x70a2);
        EXPECT(gbc.pc(), 0x353e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00BE
        gbc.setState(0x6a94, 0xc9ae, 0xa970, 0xb289, 0xb581, 0x18e0, 0x0, 0x1);
        gbc.writeMem(0x6a94, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc9ae);
        EXPECT(gbc.pc(), 0x6a95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00BF
        gbc.setState(0xe8b6, 0xa9bf, 0x6d20, 0x744c, 0xb09, 0xe000, 0x0, 0x0);
        gbc.writeMem(0xe8b6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa9bf);
        EXPECT(gbc.pc(), 0xe8b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b6), 0x54);
        // 54 00C0
        gbc.setState(0x4626, 0x8f67, 0xc670, 0x4f82, 0x8ebb, 0x9f66, 0x1, 0x1);
        gbc.writeMem(0x4626, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8f67);
        EXPECT(gbc.pc(), 0x4627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00C1
        gbc.setState(0x5147, 0xa, 0x2930, 0x19c6, 0x29e, 0x146d, 0x1, 0x0);
        gbc.writeMem(0x5147, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa);
        EXPECT(gbc.pc(), 0x5148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00C2
        gbc.setState(0x5307, 0x4e22, 0x8b50, 0xed35, 0xea9f, 0xe0e6, 0x0, 0x1);
        gbc.writeMem(0x5307, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4e22);
        EXPECT(gbc.pc(), 0x5308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00C3
        gbc.setState(0x7c2a, 0xef19, 0xf010, 0xccd3, 0x3627, 0x9acd, 0x0, 0x0);
        gbc.writeMem(0x7c2a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xef19);
        EXPECT(gbc.pc(), 0x7c2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00C4
        gbc.setState(0x1bcd, 0xe12b, 0x5630, 0x7c3c, 0x6d23, 0x44c, 0x0, 0x1);
        gbc.writeMem(0x1bcd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe12b);
        EXPECT(gbc.pc(), 0x1bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00C5
        gbc.setState(0x61b6, 0x3eff, 0xa6f0, 0x6bdc, 0xdd5c, 0x2e73, 0x0, 0x1);
        gbc.writeMem(0x61b6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3eff);
        EXPECT(gbc.pc(), 0x61b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00C6
        gbc.setState(0xb9e0, 0x2c5e, 0x9de0, 0xba54, 0xcf3b, 0x14e7, 0x1, 0x1);
        gbc.writeMem(0xb9e0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2c5e);
        EXPECT(gbc.pc(), 0xb9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9e0), 0x54);
        // 54 00C7
        gbc.setState(0xdf8a, 0xe29c, 0xd7f0, 0x8b2b, 0x420f, 0x2681, 0x0, 0x0);
        gbc.writeMem(0xdf8a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe29c);
        EXPECT(gbc.pc(), 0xdf8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf8a), 0x54);
        // 54 00C8
        gbc.setState(0x9986, 0x37af, 0x42e0, 0xba4d, 0xded7, 0x25a4, 0x1, 0x1);
        gbc.writeMem(0x9986, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x37af);
        EXPECT(gbc.pc(), 0x9987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9986), 0x54);
        // 54 00C9
        gbc.setState(0x5750, 0x804c, 0xbdb0, 0x1b70, 0x31a, 0x43f3, 0x1, 0x1);
        gbc.writeMem(0x5750, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x804c);
        EXPECT(gbc.pc(), 0x5751);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00CA
        gbc.setState(0xbc0d, 0x78f7, 0xd0c0, 0xab81, 0xbd85, 0x8a39, 0x0, 0x0);
        gbc.writeMem(0xbc0d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x78f7);
        EXPECT(gbc.pc(), 0xbc0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0d), 0x54);
        // 54 00CB
        gbc.setState(0x31ab, 0xfa94, 0x41b0, 0x1256, 0x35cd, 0x28fd, 0x0, 0x1);
        gbc.writeMem(0x31ab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xfa94);
        EXPECT(gbc.pc(), 0x31ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00CC
        gbc.setState(0x261a, 0x1a24, 0xe6a0, 0x6d9d, 0x7f29, 0x5940, 0x1, 0x0);
        gbc.writeMem(0x261a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1a24);
        EXPECT(gbc.pc(), 0x261b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00CD
        gbc.setState(0xb47d, 0x6bba, 0xdcd0, 0xf584, 0x1adb, 0xf48d, 0x0, 0x1);
        gbc.writeMem(0xb47d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x6bba);
        EXPECT(gbc.pc(), 0xb47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb47d), 0x54);
        // 54 00CE
        gbc.setState(0x6354, 0xb957, 0x8500, 0x50e, 0x1627, 0xd613, 0x1, 0x1);
        gbc.writeMem(0x6354, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb957);
        EXPECT(gbc.pc(), 0x6355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00CF
        gbc.setState(0xb65, 0xab9e, 0xb9a0, 0xc7bb, 0xe027, 0x9b15, 0x1, 0x1);
        gbc.writeMem(0xb65, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xab9e);
        EXPECT(gbc.pc(), 0xb66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00D0
        gbc.setState(0x28a9, 0xc595, 0xcb00, 0x349a, 0xbdd9, 0xf937, 0x0, 0x0);
        gbc.writeMem(0x28a9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc595);
        EXPECT(gbc.pc(), 0x28aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00D1
        gbc.setState(0x9e74, 0x98e4, 0xdff0, 0x379a, 0x9ede, 0x4a1b, 0x0, 0x0);
        gbc.writeMem(0x9e74, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x98e4);
        EXPECT(gbc.pc(), 0x9e75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e74), 0x54);
        // 54 00D2
        gbc.setState(0x8e74, 0xa176, 0x2610, 0x716f, 0xb2d4, 0x9086, 0x1, 0x0);
        gbc.writeMem(0x8e74, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa176);
        EXPECT(gbc.pc(), 0x8e75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e74), 0x54);
        // 54 00D3
        gbc.setState(0x57a6, 0x7127, 0xe90, 0xcbfd, 0x3ddc, 0x9906, 0x1, 0x1);
        gbc.writeMem(0x57a6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7127);
        EXPECT(gbc.pc(), 0x57a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00D4
        gbc.setState(0x7304, 0x1c5b, 0xbce0, 0xbc46, 0x419e, 0x335b, 0x1, 0x1);
        gbc.writeMem(0x7304, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1c5b);
        EXPECT(gbc.pc(), 0x7305);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00D5
        gbc.setState(0x677e, 0xba18, 0xfc00, 0xac7e, 0x43d5, 0x2f92, 0x0, 0x0);
        gbc.writeMem(0x677e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xba18);
        EXPECT(gbc.pc(), 0x677f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00D6
        gbc.setState(0x3d25, 0x9122, 0xe200, 0xd6e9, 0x2088, 0x5807, 0x0, 0x0);
        gbc.writeMem(0x3d25, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9122);
        EXPECT(gbc.pc(), 0x3d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00D7
        gbc.setState(0x72f9, 0x28aa, 0x39a0, 0x55ae, 0x6476, 0x8f2b, 0x0, 0x0);
        gbc.writeMem(0x72f9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x28aa);
        EXPECT(gbc.pc(), 0x72fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00D8
        gbc.setState(0xb05d, 0xbf15, 0xc7a0, 0x163, 0xb86a, 0xac41, 0x0, 0x0);
        gbc.writeMem(0xb05d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbf15);
        EXPECT(gbc.pc(), 0xb05e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb05d), 0x54);
        // 54 00D9
        gbc.setState(0x4e8d, 0xafd0, 0x53c0, 0xf0fd, 0x594b, 0xa111, 0x1, 0x0);
        gbc.writeMem(0x4e8d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xafd0);
        EXPECT(gbc.pc(), 0x4e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00DA
        gbc.setState(0xbed5, 0x3ba9, 0x1220, 0x2a4a, 0x59f0, 0xdcec, 0x1, 0x0);
        gbc.writeMem(0xbed5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3ba9);
        EXPECT(gbc.pc(), 0xbed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbed5), 0x54);
        // 54 00DB
        gbc.setState(0x3451, 0x2c70, 0x6690, 0xca11, 0xa93a, 0xeead, 0x1, 0x0);
        gbc.writeMem(0x3451, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2c70);
        EXPECT(gbc.pc(), 0x3452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00DC
        gbc.setState(0xd0d9, 0x769d, 0xc000, 0x65c, 0x58d3, 0x5fac, 0x0, 0x1);
        gbc.writeMem(0xd0d9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x769d);
        EXPECT(gbc.pc(), 0xd0da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0d9), 0x54);
        // 54 00DD
        gbc.setState(0xd6a, 0x6972, 0xc90, 0xf960, 0xe379, 0x179d, 0x0, 0x1);
        gbc.writeMem(0xd6a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6972);
        EXPECT(gbc.pc(), 0xd6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00DE
        gbc.setState(0x4859, 0xe4db, 0x240, 0xb828, 0xdb27, 0x8e97, 0x1, 0x0);
        gbc.writeMem(0x4859, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe4db);
        EXPECT(gbc.pc(), 0x485a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00DF
        gbc.setState(0x2934, 0x409a, 0x51c0, 0x370a, 0x91fe, 0x69c5, 0x1, 0x1);
        gbc.writeMem(0x2934, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x409a);
        EXPECT(gbc.pc(), 0x2935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00E0
        gbc.setState(0x10b8, 0x4680, 0xe670, 0x52db, 0xc256, 0x34f3, 0x0, 0x1);
        gbc.writeMem(0x10b8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4680);
        EXPECT(gbc.pc(), 0x10b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00E1
        gbc.setState(0x6249, 0x904f, 0xb870, 0xfd3f, 0xf15b, 0xe2a3, 0x1, 0x1);
        gbc.writeMem(0x6249, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x904f);
        EXPECT(gbc.pc(), 0x624a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00E2
        gbc.setState(0x649a, 0x61a9, 0xd570, 0xb6fc, 0x2d4c, 0x35b0, 0x1, 0x0);
        gbc.writeMem(0x649a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x61a9);
        EXPECT(gbc.pc(), 0x649b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00E3
        gbc.setState(0xd272, 0x216b, 0x3330, 0x74d8, 0xb3a1, 0x9e18, 0x1, 0x0);
        gbc.writeMem(0xd272, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x216b);
        EXPECT(gbc.pc(), 0xd273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd272), 0x54);
        // 54 00E4
        gbc.setState(0x554a, 0x2088, 0x9f50, 0x7c54, 0xf675, 0xeebe, 0x1, 0x1);
        gbc.writeMem(0x554a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2088);
        EXPECT(gbc.pc(), 0x554b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00E5
        gbc.setState(0x6af0, 0x3727, 0x5630, 0x8a89, 0x69f9, 0x664a, 0x0, 0x0);
        gbc.writeMem(0x6af0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3727);
        EXPECT(gbc.pc(), 0x6af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00E6
        gbc.setState(0x8e3d, 0x522a, 0xd270, 0xb0d2, 0x26d1, 0xde3b, 0x1, 0x0);
        gbc.writeMem(0x8e3d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x522a);
        EXPECT(gbc.pc(), 0x8e3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e3d), 0x54);
        // 54 00E7
        gbc.setState(0xb749, 0xe315, 0x4c70, 0xb29a, 0xcb4d, 0x3324, 0x0, 0x0);
        gbc.writeMem(0xb749, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe315);
        EXPECT(gbc.pc(), 0xb74a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb749), 0x54);
        // 54 00E8
        gbc.setState(0x42ed, 0x63b4, 0xd4c0, 0xb59b, 0x5d4, 0x4fbd, 0x1, 0x1);
        gbc.writeMem(0x42ed, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x63b4);
        EXPECT(gbc.pc(), 0x42ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 00E9
        gbc.setState(0x8c81, 0xe8c, 0x88b0, 0x89cc, 0x5450, 0xc12, 0x0, 0x1);
        gbc.writeMem(0x8c81, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe8c);
        EXPECT(gbc.pc(), 0x8c82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c81), 0x54);
        // 54 00EA
        gbc.setState(0xba, 0x68, 0x69f0, 0xb834, 0x3d9, 0xf653, 0x1, 0x0);
        gbc.writeMem(0xba, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x68);
        EXPECT(gbc.pc(), 0xbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00EB
        gbc.setState(0xa741, 0x3b6c, 0xa2f0, 0xfd76, 0xcacf, 0x2bd6, 0x0, 0x0);
        gbc.writeMem(0xa741, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3b6c);
        EXPECT(gbc.pc(), 0xa742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa741), 0x54);
        // 54 00EC
        gbc.setState(0x412e, 0xc219, 0xb760, 0x1118, 0x93c8, 0x6792, 0x1, 0x1);
        gbc.writeMem(0x412e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc219);
        EXPECT(gbc.pc(), 0x412f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00ED
        gbc.setState(0xc65b, 0x303, 0xe0d0, 0xdae8, 0xb56d, 0x5a25, 0x0, 0x0);
        gbc.writeMem(0xc65b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x303);
        EXPECT(gbc.pc(), 0xc65c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65b), 0x54);
        // 54 00EF
        gbc.setState(0xd39b, 0xbf59, 0x5c10, 0x8e76, 0x3ebb, 0x8b11, 0x1, 0x1);
        gbc.writeMem(0xd39b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbf59);
        EXPECT(gbc.pc(), 0xd39c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd39b), 0x54);
        // 54 00F0
        gbc.setState(0x6233, 0xd1c7, 0x2050, 0x77b1, 0xe7a1, 0xbb05, 0x1, 0x0);
        gbc.writeMem(0x6233, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd1c7);
        EXPECT(gbc.pc(), 0x6234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00F1
        gbc.setState(0xcbb2, 0x2ece, 0x6140, 0xc5de, 0x696f, 0x26e, 0x1, 0x1);
        gbc.writeMem(0xcbb2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2ece);
        EXPECT(gbc.pc(), 0xcbb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb2), 0x54);
        // 54 00F2
        gbc.setState(0x9e6b, 0x99e0, 0x76b0, 0x21d0, 0x86fe, 0xc040, 0x1, 0x0);
        gbc.writeMem(0x9e6b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x99e0);
        EXPECT(gbc.pc(), 0x9e6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e6b), 0x54);
        // 54 00F4
        gbc.setState(0x401a, 0x7cb7, 0xe570, 0xa1, 0x2a45, 0x1c1d, 0x0, 0x0);
        gbc.writeMem(0x401a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7cb7);
        EXPECT(gbc.pc(), 0x401b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 00F5
        gbc.setState(0x2ca5, 0x5611, 0x8d10, 0xaf01, 0x9ec9, 0x2b83, 0x1, 0x0);
        gbc.writeMem(0x2ca5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5611);
        EXPECT(gbc.pc(), 0x2ca6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 00F8
        gbc.setState(0xd9a1, 0x41a6, 0xaf00, 0x90c4, 0x526f, 0x4b51, 0x0, 0x1);
        gbc.writeMem(0xd9a1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x41a6);
        EXPECT(gbc.pc(), 0xd9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a1), 0x54);
        // 54 00F9
        gbc.setState(0xca36, 0xa269, 0x34a0, 0x2786, 0x9abf, 0x940a, 0x1, 0x0);
        gbc.writeMem(0xca36, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa269);
        EXPECT(gbc.pc(), 0xca37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca36), 0x54);
        // 54 00FA
        gbc.setState(0x1ad4, 0xc2bb, 0x39e0, 0x4b48, 0x4fca, 0xd5c0, 0x1, 0x0);
        gbc.writeMem(0x1ad4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc2bb);
        EXPECT(gbc.pc(), 0x1ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00FB
        gbc.setState(0xd2cf, 0x40b6, 0x5950, 0xcf30, 0x7851, 0xde86, 0x1, 0x0);
        gbc.writeMem(0xd2cf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x40b6);
        EXPECT(gbc.pc(), 0xd2d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2cf), 0x54);
        // 54 00FD
        gbc.setState(0x59b8, 0xd5f6, 0x74e0, 0x907c, 0xefea, 0xc80e, 0x1, 0x1);
        gbc.writeMem(0x59b8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd5f6);
        EXPECT(gbc.pc(), 0x59b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 00FE
        gbc.setState(0xdbf8, 0xee41, 0x6020, 0x36dc, 0x6a34, 0xbb49, 0x0, 0x1);
        gbc.writeMem(0xdbf8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xee41);
        EXPECT(gbc.pc(), 0xdbf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf8), 0x54);
        // 54 00FF
        gbc.setState(0x497d, 0xe7c5, 0xb860, 0xa800, 0xb0c4, 0x338, 0x1, 0x0);
        gbc.writeMem(0x497d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe7c5);
        EXPECT(gbc.pc(), 0x497e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0100
        gbc.setState(0x8f32, 0x496c, 0xd220, 0xfdc9, 0x7e23, 0x4351, 0x0, 0x0);
        gbc.writeMem(0x8f32, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x496c);
        EXPECT(gbc.pc(), 0x8f33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f32), 0x54);
        // 54 0101
        gbc.setState(0xc9b, 0x449f, 0x9830, 0x5f7d, 0xae60, 0x2805, 0x0, 0x1);
        gbc.writeMem(0xc9b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x449f);
        EXPECT(gbc.pc(), 0xc9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0102
        gbc.setState(0x7780, 0xfee, 0x8790, 0xec57, 0xcb45, 0x5edf, 0x1, 0x1);
        gbc.writeMem(0x7780, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfee);
        EXPECT(gbc.pc(), 0x7781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0103
        gbc.setState(0xbd8d, 0x2f89, 0xa7f0, 0x18d3, 0xd598, 0x48cd, 0x1, 0x0);
        gbc.writeMem(0xbd8d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2f89);
        EXPECT(gbc.pc(), 0xbd8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd8d), 0x54);
        // 54 0104
        gbc.setState(0xb9a7, 0xe5ec, 0xbbb0, 0x42f4, 0x6720, 0x15aa, 0x1, 0x0);
        gbc.writeMem(0xb9a7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe5ec);
        EXPECT(gbc.pc(), 0xb9a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a7), 0x54);
        // 54 0105
        gbc.setState(0x8b80, 0xf26a, 0x56b0, 0x19f1, 0xa94e, 0xf58a, 0x1, 0x0);
        gbc.writeMem(0x8b80, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf26a);
        EXPECT(gbc.pc(), 0x8b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b80), 0x54);
        // 54 0106
        gbc.setState(0x5334, 0x5709, 0x5490, 0x6178, 0xe568, 0x2ba8, 0x1, 0x0);
        gbc.writeMem(0x5334, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5709);
        EXPECT(gbc.pc(), 0x5335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0107
        gbc.setState(0x827, 0xf47, 0x6f20, 0x98cb, 0x53b0, 0x7cfd, 0x1, 0x1);
        gbc.writeMem(0x827, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf47);
        EXPECT(gbc.pc(), 0x828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0108
        gbc.setState(0xe243, 0x33a7, 0x7990, 0x1fa6, 0x1fc4, 0x3cec, 0x0, 0x0);
        gbc.writeMem(0xe243, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x33a7);
        EXPECT(gbc.pc(), 0xe244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe243), 0x54);
        // 54 0109
        gbc.setState(0x3cc8, 0xb76a, 0x25c0, 0x574d, 0xc2cf, 0x31a0, 0x1, 0x0);
        gbc.writeMem(0x3cc8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb76a);
        EXPECT(gbc.pc(), 0x3cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 010A
        gbc.setState(0x634, 0x164e, 0x4cd0, 0xa816, 0x8b2b, 0x3dca, 0x1, 0x1);
        gbc.writeMem(0x634, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x164e);
        EXPECT(gbc.pc(), 0x635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 010B
        gbc.setState(0x559c, 0xb858, 0xf70, 0x9bcb, 0x83b0, 0x1527, 0x1, 0x0);
        gbc.writeMem(0x559c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb858);
        EXPECT(gbc.pc(), 0x559d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 010C
        gbc.setState(0xedfc, 0xb05e, 0x8a60, 0xfa60, 0x5c68, 0x904b, 0x0, 0x0);
        gbc.writeMem(0xedfc, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb05e);
        EXPECT(gbc.pc(), 0xedfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedfc), 0x54);
        // 54 010D
        gbc.setState(0x53da, 0xc5e2, 0xac50, 0x9a38, 0x2dbd, 0xbd55, 0x0, 0x1);
        gbc.writeMem(0x53da, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc5e2);
        EXPECT(gbc.pc(), 0x53db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 010E
        gbc.setState(0x5d2d, 0xf382, 0xd880, 0xe9c3, 0xfe, 0x5bd3, 0x1, 0x1);
        gbc.writeMem(0x5d2d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf382);
        EXPECT(gbc.pc(), 0x5d2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0110
        gbc.setState(0xb022, 0xd17e, 0xf690, 0x72b2, 0x22e2, 0xbe5e, 0x0, 0x0);
        gbc.writeMem(0xb022, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd17e);
        EXPECT(gbc.pc(), 0xb023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb022), 0x54);
        // 54 0111
        gbc.setState(0xa512, 0xc312, 0xd3e0, 0x6f4d, 0xb341, 0x9fab, 0x0, 0x1);
        gbc.writeMem(0xa512, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc312);
        EXPECT(gbc.pc(), 0xa513);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa512), 0x54);
        // 54 0112
        gbc.setState(0xc144, 0xe4eb, 0x9e40, 0x66d, 0xa80f, 0xe3b5, 0x0, 0x0);
        gbc.writeMem(0xc144, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe4eb);
        EXPECT(gbc.pc(), 0xc145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc144), 0x54);
        // 54 0113
        gbc.setState(0x25a1, 0x642b, 0xf0, 0x9d13, 0x47ba, 0x7c42, 0x1, 0x1);
        gbc.writeMem(0x25a1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x642b);
        EXPECT(gbc.pc(), 0x25a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0114
        gbc.setState(0xd352, 0x490e, 0x7130, 0x541a, 0x9090, 0x815b, 0x0, 0x1);
        gbc.writeMem(0xd352, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x490e);
        EXPECT(gbc.pc(), 0xd353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd352), 0x54);
        // 54 0115
        gbc.setState(0x796e, 0x9d5f, 0xb9c0, 0xc6ce, 0xe7d7, 0x3c63, 0x0, 0x1);
        gbc.writeMem(0x796e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9d5f);
        EXPECT(gbc.pc(), 0x796f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0116
        gbc.setState(0xd91a, 0xf25a, 0x85e0, 0xdffd, 0xea0c, 0xf08c, 0x1, 0x1);
        gbc.writeMem(0xd91a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf25a);
        EXPECT(gbc.pc(), 0xd91b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd91a), 0x54);
        // 54 0117
        gbc.setState(0xe82, 0xbcb5, 0x4200, 0xae8e, 0xf5dd, 0x9fe1, 0x0, 0x1);
        gbc.writeMem(0xe82, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xbcb5);
        EXPECT(gbc.pc(), 0xe83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0118
        gbc.setState(0xeddf, 0xf99f, 0xd970, 0x5d3b, 0x3ca3, 0xec29, 0x1, 0x1);
        gbc.writeMem(0xeddf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf99f);
        EXPECT(gbc.pc(), 0xede0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeddf), 0x54);
        // 54 011A
        gbc.setState(0x4c8d, 0x8c89, 0xb860, 0xfb2d, 0x46d5, 0x73f2, 0x1, 0x1);
        gbc.writeMem(0x4c8d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8c89);
        EXPECT(gbc.pc(), 0x4c8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 011B
        gbc.setState(0x70b2, 0x6486, 0xc360, 0x14c4, 0x7963, 0x8616, 0x0, 0x1);
        gbc.writeMem(0x70b2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6486);
        EXPECT(gbc.pc(), 0x70b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 011C
        gbc.setState(0x8b13, 0x322a, 0xa80, 0x9ae, 0x5500, 0xe063, 0x1, 0x0);
        gbc.writeMem(0x8b13, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x322a);
        EXPECT(gbc.pc(), 0x8b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b13), 0x54);
        // 54 011E
        gbc.setState(0x2081, 0xbb31, 0xcc50, 0x9c42, 0xc3ac, 0x69dc, 0x0, 0x0);
        gbc.writeMem(0x2081, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbb31);
        EXPECT(gbc.pc(), 0x2082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 011F
        gbc.setState(0x6eee, 0x765e, 0x9b60, 0x35f0, 0x87ba, 0xef77, 0x1, 0x0);
        gbc.writeMem(0x6eee, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x765e);
        EXPECT(gbc.pc(), 0x6eef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0120
        gbc.setState(0xbf34, 0xd1a5, 0x3d0, 0x19f, 0x313e, 0xe1ff, 0x0, 0x1);
        gbc.writeMem(0xbf34, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd1a5);
        EXPECT(gbc.pc(), 0xbf35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf34), 0x54);
        // 54 0121
        gbc.setState(0xc957, 0x4e1b, 0xe8f0, 0xd4e9, 0xa18a, 0x7fe4, 0x0, 0x1);
        gbc.writeMem(0xc957, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4e1b);
        EXPECT(gbc.pc(), 0xc958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc957), 0x54);
        // 54 0122
        gbc.setState(0xaee4, 0x64d6, 0x7670, 0x4508, 0xfcd3, 0x63ad, 0x1, 0x0);
        gbc.writeMem(0xaee4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x64d6);
        EXPECT(gbc.pc(), 0xaee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaee4), 0x54);
        // 54 0123
        gbc.setState(0xdf2c, 0xd0c8, 0xa4f0, 0xa7da, 0x91d5, 0x9ec0, 0x0, 0x0);
        gbc.writeMem(0xdf2c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd0c8);
        EXPECT(gbc.pc(), 0xdf2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2c), 0x54);
        // 54 0124
        gbc.setState(0x47f9, 0xa6f4, 0x1d80, 0xceb0, 0x1c6c, 0x5bdf, 0x1, 0x1);
        gbc.writeMem(0x47f9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa6f4);
        EXPECT(gbc.pc(), 0x47fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0125
        gbc.setState(0x256a, 0xc82f, 0x1820, 0x5467, 0x5dbd, 0x180c, 0x1, 0x1);
        gbc.writeMem(0x256a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc82f);
        EXPECT(gbc.pc(), 0x256b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0126
        gbc.setState(0x746a, 0xdb0a, 0xd70, 0xc3d9, 0x26ad, 0x99f6, 0x0, 0x1);
        gbc.writeMem(0x746a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdb0a);
        EXPECT(gbc.pc(), 0x746b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0127
        gbc.setState(0xae50, 0xe397, 0xca90, 0x7073, 0x63da, 0x70da, 0x1, 0x0);
        gbc.writeMem(0xae50, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe397);
        EXPECT(gbc.pc(), 0xae51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae50), 0x54);
        // 54 0128
        gbc.setState(0x61bb, 0x1c8a, 0x8ae0, 0x24b0, 0x5d6e, 0x465c, 0x0, 0x1);
        gbc.writeMem(0x61bb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1c8a);
        EXPECT(gbc.pc(), 0x61bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0129
        gbc.setState(0x6666, 0x43dc, 0x9be0, 0xd718, 0x3476, 0x450, 0x1, 0x1);
        gbc.writeMem(0x6666, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x43dc);
        EXPECT(gbc.pc(), 0x6667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 012A
        gbc.setState(0x84d0, 0xb602, 0x81f0, 0xa0da, 0x232e, 0x2e1a, 0x0, 0x0);
        gbc.writeMem(0x84d0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb602);
        EXPECT(gbc.pc(), 0x84d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d0), 0x54);
        // 54 012B
        gbc.setState(0x3557, 0x105f, 0x6ee0, 0x947c, 0x9f8, 0xa226, 0x0, 0x0);
        gbc.writeMem(0x3557, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x105f);
        EXPECT(gbc.pc(), 0x3558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 012C
        gbc.setState(0x4a9, 0xabbc, 0xd1c0, 0xe043, 0x1206, 0xa97c, 0x0, 0x0);
        gbc.writeMem(0x4a9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xabbc);
        EXPECT(gbc.pc(), 0x4aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 012D
        gbc.setState(0x8d80, 0xbe89, 0x380, 0x5c42, 0xb401, 0x7016, 0x1, 0x1);
        gbc.writeMem(0x8d80, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbe89);
        EXPECT(gbc.pc(), 0x8d81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d80), 0x54);
        // 54 012E
        gbc.setState(0x8707, 0xd9d6, 0xac80, 0x355b, 0xa79b, 0x427a, 0x1, 0x1);
        gbc.writeMem(0x8707, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd9d6);
        EXPECT(gbc.pc(), 0x8708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8707), 0x54);
        // 54 012F
        gbc.setState(0x9c89, 0xd60b, 0xde50, 0x6366, 0xcda6, 0x839, 0x0, 0x1);
        gbc.writeMem(0x9c89, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd60b);
        EXPECT(gbc.pc(), 0x9c8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c89), 0x54);
        // 54 0130
        gbc.setState(0xb60b, 0xf66f, 0xb070, 0x8d0e, 0x9ebc, 0xa643, 0x0, 0x1);
        gbc.writeMem(0xb60b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf66f);
        EXPECT(gbc.pc(), 0xb60c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb60b), 0x54);
        // 54 0131
        gbc.setState(0x7607, 0xde01, 0xa8f0, 0xd898, 0x730b, 0xda25, 0x1, 0x1);
        gbc.writeMem(0x7607, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xde01);
        EXPECT(gbc.pc(), 0x7608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0132
        gbc.setState(0x77b8, 0xd06e, 0x3120, 0x41d0, 0x8558, 0xaf63, 0x1, 0x0);
        gbc.writeMem(0x77b8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd06e);
        EXPECT(gbc.pc(), 0x77b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0133
        gbc.setState(0x22a1, 0xddbd, 0xd7f0, 0x74d2, 0xbd50, 0xccc5, 0x0, 0x0);
        gbc.writeMem(0x22a1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xddbd);
        EXPECT(gbc.pc(), 0x22a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0134
        gbc.setState(0x1a99, 0x5635, 0xf430, 0x20fd, 0xa11b, 0x9ec4, 0x0, 0x1);
        gbc.writeMem(0x1a99, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5635);
        EXPECT(gbc.pc(), 0x1a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0135
        gbc.setState(0x49e7, 0xae56, 0x4c20, 0xd563, 0xda20, 0xb35d, 0x0, 0x0);
        gbc.writeMem(0x49e7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xae56);
        EXPECT(gbc.pc(), 0x49e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0136
        gbc.setState(0xadd, 0xee90, 0xc440, 0x4eee, 0x739f, 0xd900, 0x0, 0x0);
        gbc.writeMem(0xadd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xee90);
        EXPECT(gbc.pc(), 0xade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0137
        gbc.setState(0x9835, 0xbbb0, 0x3dd0, 0xeefb, 0x32a5, 0xe0e, 0x1, 0x0);
        gbc.writeMem(0x9835, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xbbb0);
        EXPECT(gbc.pc(), 0x9836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9835), 0x54);
        // 54 0138
        gbc.setState(0x2ce5, 0x3bff, 0x6a50, 0x2aa1, 0x7057, 0x8e3d, 0x0, 0x1);
        gbc.writeMem(0x2ce5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3bff);
        EXPECT(gbc.pc(), 0x2ce6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0139
        gbc.setState(0x3e61, 0x225c, 0x3070, 0xa3c0, 0x7e25, 0x4af5, 0x0, 0x1);
        gbc.writeMem(0x3e61, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x225c);
        EXPECT(gbc.pc(), 0x3e62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 013A
        gbc.setState(0x54f2, 0xd166, 0x8a50, 0xe145, 0x9dc9, 0xc4d2, 0x1, 0x1);
        gbc.writeMem(0x54f2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd166);
        EXPECT(gbc.pc(), 0x54f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 013B
        gbc.setState(0x2ab1, 0x83fa, 0x2c80, 0xe012, 0x95cf, 0x53c9, 0x1, 0x1);
        gbc.writeMem(0x2ab1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x83fa);
        EXPECT(gbc.pc(), 0x2ab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 013C
        gbc.setState(0xbeab, 0xeb8b, 0x5010, 0x4d0e, 0x8a5b, 0xfd68, 0x0, 0x0);
        gbc.writeMem(0xbeab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xeb8b);
        EXPECT(gbc.pc(), 0xbeac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeab), 0x54);
        // 54 013D
        gbc.setState(0xb59e, 0xc98a, 0xa560, 0x2e88, 0x7c7a, 0x5bb6, 0x1, 0x0);
        gbc.writeMem(0xb59e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc98a);
        EXPECT(gbc.pc(), 0xb59f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59e), 0x54);
        // 54 013E
        gbc.setState(0xd9b4, 0x6a31, 0xe480, 0x7f2c, 0x80db, 0xcf84, 0x0, 0x1);
        gbc.writeMem(0xd9b4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6a31);
        EXPECT(gbc.pc(), 0xd9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b4), 0x54);
        // 54 013F
        gbc.setState(0x6aed, 0xe02d, 0x2d50, 0x93c5, 0x1ae7, 0x8da0, 0x1, 0x1);
        gbc.writeMem(0x6aed, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe02d);
        EXPECT(gbc.pc(), 0x6aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0141
        gbc.setState(0x6f4d, 0x331, 0x55c0, 0x81a9, 0x5930, 0x34db, 0x0, 0x1);
        gbc.writeMem(0x6f4d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x331);
        EXPECT(gbc.pc(), 0x6f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0142
        gbc.setState(0x31b, 0x7db0, 0x1660, 0x2b7d, 0x9f61, 0x536e, 0x0, 0x0);
        gbc.writeMem(0x31b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7db0);
        EXPECT(gbc.pc(), 0x31c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0143
        gbc.setState(0xcdf4, 0xcfb7, 0x1c30, 0xb27f, 0x572d, 0x4f3f, 0x0, 0x1);
        gbc.writeMem(0xcdf4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xcfb7);
        EXPECT(gbc.pc(), 0xcdf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdf4), 0x54);
        // 54 0144
        gbc.setState(0xb0ad, 0x6af9, 0x9770, 0x37, 0xcff1, 0x8321, 0x0, 0x0);
        gbc.writeMem(0xb0ad, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6af9);
        EXPECT(gbc.pc(), 0xb0ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ad), 0x54);
        // 54 0145
        gbc.setState(0x573b, 0x4f63, 0x70f0, 0x8ea8, 0xb65, 0x9789, 0x1, 0x0);
        gbc.writeMem(0x573b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4f63);
        EXPECT(gbc.pc(), 0x573c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0146
        gbc.setState(0xdd64, 0xf971, 0x23a0, 0x9c2a, 0xdb4c, 0xe0b, 0x0, 0x0);
        gbc.writeMem(0xdd64, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf971);
        EXPECT(gbc.pc(), 0xdd65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd64), 0x54);
        // 54 0147
        gbc.setState(0xbc70, 0x4271, 0x3d00, 0x7c36, 0x8d23, 0xc92f, 0x0, 0x0);
        gbc.writeMem(0xbc70, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4271);
        EXPECT(gbc.pc(), 0xbc71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc70), 0x54);
        // 54 0148
        gbc.setState(0x4ce1, 0xcd55, 0x5660, 0x9e64, 0x9893, 0xfbbd, 0x1, 0x0);
        gbc.writeMem(0x4ce1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xcd55);
        EXPECT(gbc.pc(), 0x4ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0149
        gbc.setState(0x4f06, 0xd7e7, 0x7580, 0xea70, 0x3a0, 0x79d6, 0x0, 0x1);
        gbc.writeMem(0x4f06, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd7e7);
        EXPECT(gbc.pc(), 0x4f07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 014A
        gbc.setState(0x350e, 0x3168, 0x9890, 0x9cc4, 0x3d4, 0x1dbe, 0x0, 0x1);
        gbc.writeMem(0x350e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3168);
        EXPECT(gbc.pc(), 0x350f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 014B
        gbc.setState(0xd543, 0x4316, 0x95f0, 0x96f8, 0x90b6, 0xadca, 0x1, 0x1);
        gbc.writeMem(0xd543, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4316);
        EXPECT(gbc.pc(), 0xd544);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd543), 0x54);
        // 54 014C
        gbc.setState(0x79c1, 0x6f48, 0x7dc0, 0x2409, 0x7aa5, 0x5cf3, 0x0, 0x1);
        gbc.writeMem(0x79c1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6f48);
        EXPECT(gbc.pc(), 0x79c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 014D
        gbc.setState(0x42b6, 0xea8c, 0x8de0, 0x1f3a, 0x2c9b, 0x10aa, 0x1, 0x1);
        gbc.writeMem(0x42b6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xea8c);
        EXPECT(gbc.pc(), 0x42b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 014E
        gbc.setState(0x533, 0xede4, 0x3d60, 0x7291, 0xe6fb, 0x5421, 0x0, 0x0);
        gbc.writeMem(0x533, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xede4);
        EXPECT(gbc.pc(), 0x534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 014F
        gbc.setState(0xd81b, 0x68be, 0x7640, 0xfd6e, 0x2440, 0xc559, 0x1, 0x0);
        gbc.writeMem(0xd81b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x68be);
        EXPECT(gbc.pc(), 0xd81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81b), 0x54);
        // 54 0150
        gbc.setState(0x351f, 0xa9bd, 0x5bc0, 0xbef8, 0xbcde, 0x8a1c, 0x0, 0x0);
        gbc.writeMem(0x351f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa9bd);
        EXPECT(gbc.pc(), 0x3520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0151
        gbc.setState(0x9fa5, 0xca79, 0x8eb0, 0x5e5e, 0x9a2c, 0xc325, 0x1, 0x0);
        gbc.writeMem(0x9fa5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xca79);
        EXPECT(gbc.pc(), 0x9fa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fa5), 0x54);
        // 54 0152
        gbc.setState(0x3ba1, 0x49ad, 0x4190, 0x4869, 0x403e, 0x2b52, 0x1, 0x1);
        gbc.writeMem(0x3ba1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x49ad);
        EXPECT(gbc.pc(), 0x3ba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0154
        gbc.setState(0x40b8, 0x80c3, 0xc460, 0x3cc0, 0x27e5, 0xa342, 0x1, 0x1);
        gbc.writeMem(0x40b8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x80c3);
        EXPECT(gbc.pc(), 0x40b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0155
        gbc.setState(0x3e17, 0x7f8, 0x4240, 0x500f, 0x591c, 0x184, 0x0, 0x1);
        gbc.writeMem(0x3e17, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7f8);
        EXPECT(gbc.pc(), 0x3e18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0156
        gbc.setState(0x638c, 0x36e5, 0xa250, 0xb614, 0x13ec, 0xd9f6, 0x0, 0x1);
        gbc.writeMem(0x638c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x36e5);
        EXPECT(gbc.pc(), 0x638d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0157
        gbc.setState(0x16a, 0x3f42, 0x27d0, 0x402b, 0xf66b, 0x354d, 0x1, 0x1);
        gbc.writeMem(0x16a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3f42);
        EXPECT(gbc.pc(), 0x16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0158
        gbc.setState(0xbe7, 0x72d0, 0xc100, 0x1af1, 0xb49b, 0x3f2a, 0x0, 0x1);
        gbc.writeMem(0xbe7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x72d0);
        EXPECT(gbc.pc(), 0xbe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0159
        gbc.setState(0x93cb, 0x50e3, 0x64e0, 0xab22, 0xdf, 0x5f8b, 0x1, 0x0);
        gbc.writeMem(0x93cb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x50e3);
        EXPECT(gbc.pc(), 0x93cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93cb), 0x54);
        // 54 015A
        gbc.setState(0xc52e, 0x196e, 0x4d20, 0x98f8, 0xaaaa, 0x5ed9, 0x0, 0x0);
        gbc.writeMem(0xc52e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x196e);
        EXPECT(gbc.pc(), 0xc52f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc52e), 0x54);
        // 54 015B
        gbc.setState(0x5f47, 0x24b, 0x3480, 0x8dc, 0xbb85, 0xec0c, 0x1, 0x0);
        gbc.writeMem(0x5f47, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x24b);
        EXPECT(gbc.pc(), 0x5f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 015C
        gbc.setState(0xe014, 0x55ab, 0x9c70, 0xf8e6, 0x1cc7, 0xa934, 0x0, 0x0);
        gbc.writeMem(0xe014, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x55ab);
        EXPECT(gbc.pc(), 0xe015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe014), 0x54);
        // 54 015D
        gbc.setState(0xe6bd, 0x55dd, 0x4c40, 0xaffd, 0xddbf, 0x4354, 0x0, 0x1);
        gbc.writeMem(0xe6bd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x55dd);
        EXPECT(gbc.pc(), 0xe6be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6bd), 0x54);
        // 54 015E
        gbc.setState(0xcfd8, 0xbc3a, 0xe490, 0x7c3f, 0x4ee5, 0x2e2f, 0x0, 0x1);
        gbc.writeMem(0xcfd8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbc3a);
        EXPECT(gbc.pc(), 0xcfd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd8), 0x54);
        // 54 015F
        gbc.setState(0x4fca, 0x45a8, 0x6590, 0xfb47, 0xc122, 0xb9bf, 0x1, 0x0);
        gbc.writeMem(0x4fca, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x45a8);
        EXPECT(gbc.pc(), 0x4fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0160
        gbc.setState(0x9807, 0x7166, 0x9cc0, 0xce1d, 0xe55a, 0x12a5, 0x0, 0x1);
        gbc.writeMem(0x9807, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7166);
        EXPECT(gbc.pc(), 0x9808);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9807), 0x54);
        // 54 0161
        gbc.setState(0x2c01, 0x1dea, 0x640, 0x21a4, 0x6bc9, 0xa3c8, 0x0, 0x1);
        gbc.writeMem(0x2c01, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1dea);
        EXPECT(gbc.pc(), 0x2c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0162
        gbc.setState(0x7b90, 0x55c9, 0x2510, 0xba45, 0x664, 0xca0e, 0x0, 0x0);
        gbc.writeMem(0x7b90, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x55c9);
        EXPECT(gbc.pc(), 0x7b91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0163
        gbc.setState(0x7f09, 0xf20, 0xa0a0, 0xe1ed, 0x9f34, 0x4645, 0x1, 0x1);
        gbc.writeMem(0x7f09, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf20);
        EXPECT(gbc.pc(), 0x7f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0164
        gbc.setState(0x1fd9, 0x85e8, 0xfc30, 0x3817, 0x710a, 0x48e5, 0x0, 0x1);
        gbc.writeMem(0x1fd9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x85e8);
        EXPECT(gbc.pc(), 0x1fda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0165
        gbc.setState(0x3b43, 0x5db2, 0x4f10, 0xb823, 0x813a, 0x1585, 0x1, 0x1);
        gbc.writeMem(0x3b43, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5db2);
        EXPECT(gbc.pc(), 0x3b44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0166
        gbc.setState(0x9bc, 0xc31b, 0x7840, 0x75a3, 0x8498, 0xb646, 0x0, 0x1);
        gbc.writeMem(0x9bc, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc31b);
        EXPECT(gbc.pc(), 0x9bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0167
        gbc.setState(0x9628, 0x4b5, 0x1820, 0x8ee9, 0x2b1e, 0x541, 0x0, 0x1);
        gbc.writeMem(0x9628, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4b5);
        EXPECT(gbc.pc(), 0x9629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9628), 0x54);
        // 54 0168
        gbc.setState(0xd678, 0xca1b, 0x4550, 0x2e10, 0x2634, 0x2b87, 0x0, 0x0);
        gbc.writeMem(0xd678, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xca1b);
        EXPECT(gbc.pc(), 0xd679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd678), 0x54);
        // 54 0169
        gbc.setState(0x2485, 0xa702, 0xc870, 0xd54b, 0x5e45, 0x4094, 0x0, 0x0);
        gbc.writeMem(0x2485, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa702);
        EXPECT(gbc.pc(), 0x2486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 016A
        gbc.setState(0x4453, 0x9655, 0x35f0, 0x5477, 0x9116, 0x68de, 0x0, 0x0);
        gbc.writeMem(0x4453, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9655);
        EXPECT(gbc.pc(), 0x4454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 016B
        gbc.setState(0x4374, 0x9546, 0x4e0, 0xd8ec, 0x28d8, 0xe3d0, 0x1, 0x1);
        gbc.writeMem(0x4374, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9546);
        EXPECT(gbc.pc(), 0x4375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 016C
        gbc.setState(0x6f86, 0x69c9, 0x7460, 0x53a0, 0x8d2d, 0xf219, 0x1, 0x1);
        gbc.writeMem(0x6f86, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x69c9);
        EXPECT(gbc.pc(), 0x6f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 016D
        gbc.setState(0xb535, 0x2905, 0x6c80, 0xfe58, 0xdc02, 0xb657, 0x1, 0x1);
        gbc.writeMem(0xb535, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2905);
        EXPECT(gbc.pc(), 0xb536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb535), 0x54);
        // 54 0170
        gbc.setState(0xed6c, 0xf7d5, 0x50, 0x7ea0, 0xda34, 0x704a, 0x1, 0x1);
        gbc.writeMem(0xed6c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf7d5);
        EXPECT(gbc.pc(), 0xed6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed6c), 0x54);
        // 54 0171
        gbc.setState(0xde4c, 0x2803, 0xd550, 0x642, 0x2982, 0x4b3, 0x1, 0x1);
        gbc.writeMem(0xde4c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x2803);
        EXPECT(gbc.pc(), 0xde4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde4c), 0x54);
        // 54 0172
        gbc.setState(0xae5c, 0xf679, 0x4330, 0xd93a, 0x9d24, 0xe748, 0x1, 0x0);
        gbc.writeMem(0xae5c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf679);
        EXPECT(gbc.pc(), 0xae5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae5c), 0x54);
        // 54 0173
        gbc.setState(0x20e1, 0x6569, 0x7a10, 0x3b24, 0xf9c0, 0x5a0a, 0x1, 0x0);
        gbc.writeMem(0x20e1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6569);
        EXPECT(gbc.pc(), 0x20e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0174
        gbc.setState(0x14ab, 0x1044, 0xa120, 0x3331, 0x5940, 0xe775, 0x1, 0x0);
        gbc.writeMem(0x14ab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1044);
        EXPECT(gbc.pc(), 0x14ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0175
        gbc.setState(0x6fe7, 0x5aa, 0x2b70, 0x9320, 0x94bf, 0x5dbf, 0x0, 0x1);
        gbc.writeMem(0x6fe7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5aa);
        EXPECT(gbc.pc(), 0x6fe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0176
        gbc.setState(0xb064, 0x13e3, 0x9880, 0x5d25, 0xe995, 0xcf4c, 0x0, 0x1);
        gbc.writeMem(0xb064, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x13e3);
        EXPECT(gbc.pc(), 0xb065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb064), 0x54);
        // 54 0177
        gbc.setState(0xd913, 0xc3c1, 0x990, 0x6718, 0xc124, 0xe45b, 0x1, 0x1);
        gbc.writeMem(0xd913, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc3c1);
        EXPECT(gbc.pc(), 0xd914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd913), 0x54);
        // 54 0178
        gbc.setState(0x926, 0x5d15, 0x3600, 0x62e, 0xd55b, 0x3aa8, 0x0, 0x1);
        gbc.writeMem(0x926, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5d15);
        EXPECT(gbc.pc(), 0x927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0179
        gbc.setState(0xbd18, 0xd96a, 0x20c0, 0xe0b2, 0x8fda, 0x7109, 0x1, 0x1);
        gbc.writeMem(0xbd18, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd96a);
        EXPECT(gbc.pc(), 0xbd19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd18), 0x54);
        // 54 017A
        gbc.setState(0x4a72, 0x8476, 0xd750, 0xb572, 0x98f6, 0xec2b, 0x1, 0x0);
        gbc.writeMem(0x4a72, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8476);
        EXPECT(gbc.pc(), 0x4a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 017B
        gbc.setState(0x8826, 0x5475, 0x9d90, 0x3600, 0x51aa, 0x26e8, 0x0, 0x0);
        gbc.writeMem(0x8826, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5475);
        EXPECT(gbc.pc(), 0x8827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8826), 0x54);
        // 54 017C
        gbc.setState(0xa3f6, 0x5ec6, 0x54d0, 0x5272, 0xc53, 0xc5ae, 0x0, 0x0);
        gbc.writeMem(0xa3f6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5ec6);
        EXPECT(gbc.pc(), 0xa3f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f6), 0x54);
        // 54 017D
        gbc.setState(0x1a2a, 0x458b, 0xbfa0, 0x74a6, 0xd93b, 0x461f, 0x0, 0x1);
        gbc.writeMem(0x1a2a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x458b);
        EXPECT(gbc.pc(), 0x1a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 017E
        gbc.setState(0xd410, 0x8472, 0x5b90, 0x960a, 0xc6a0, 0x5750, 0x1, 0x1);
        gbc.writeMem(0xd410, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8472);
        EXPECT(gbc.pc(), 0xd411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd410), 0x54);
        // 54 017F
        gbc.setState(0xe4, 0xe659, 0x2930, 0xd636, 0x81bd, 0x6b0b, 0x0, 0x1);
        gbc.writeMem(0xe4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe659);
        EXPECT(gbc.pc(), 0xe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0180
        gbc.setState(0xec34, 0xe8d, 0x7a00, 0x1617, 0xb900, 0x1825, 0x0, 0x0);
        gbc.writeMem(0xec34, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe8d);
        EXPECT(gbc.pc(), 0xec35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec34), 0x54);
        // 54 0181
        gbc.setState(0xea46, 0x4df6, 0x7750, 0x86c6, 0xe976, 0xd264, 0x1, 0x1);
        gbc.writeMem(0xea46, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4df6);
        EXPECT(gbc.pc(), 0xea47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea46), 0x54);
        // 54 0182
        gbc.setState(0x5306, 0x9986, 0xc7c0, 0xc282, 0xe7bf, 0x7d75, 0x0, 0x1);
        gbc.writeMem(0x5306, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9986);
        EXPECT(gbc.pc(), 0x5307);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0183
        gbc.setState(0xefb9, 0xf1d7, 0xb710, 0xbde1, 0x657f, 0xe378, 0x0, 0x0);
        gbc.writeMem(0xefb9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf1d7);
        EXPECT(gbc.pc(), 0xefba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefb9), 0x54);
        // 54 0184
        gbc.setState(0x82a1, 0xa46d, 0xab00, 0x726f, 0xeacb, 0xda10, 0x1, 0x1);
        gbc.writeMem(0x82a1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa46d);
        EXPECT(gbc.pc(), 0x82a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82a1), 0x54);
        // 54 0185
        gbc.setState(0xae4b, 0x8883, 0x6a90, 0x9492, 0xf20a, 0x5d80, 0x1, 0x1);
        gbc.writeMem(0xae4b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8883);
        EXPECT(gbc.pc(), 0xae4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae4b), 0x54);
        // 54 0186
        gbc.setState(0x1039, 0xc48c, 0x66a0, 0xed2d, 0x538f, 0xe645, 0x1, 0x0);
        gbc.writeMem(0x1039, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc48c);
        EXPECT(gbc.pc(), 0x103a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0187
        gbc.setState(0xe585, 0xcb0c, 0x80c0, 0x8482, 0xf3d, 0xe35e, 0x0, 0x1);
        gbc.writeMem(0xe585, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcb0c);
        EXPECT(gbc.pc(), 0xe586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe585), 0x54);
        // 54 0188
        gbc.setState(0x9e3a, 0xd478, 0xece0, 0x71b5, 0x562c, 0x6ca1, 0x0, 0x0);
        gbc.writeMem(0x9e3a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd478);
        EXPECT(gbc.pc(), 0x9e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3a), 0x54);
        // 54 0189
        gbc.setState(0x2955, 0x999b, 0xd5d0, 0xbfd, 0x84cf, 0x1ee9, 0x0, 0x0);
        gbc.writeMem(0x2955, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x999b);
        EXPECT(gbc.pc(), 0x2956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 018A
        gbc.setState(0x6047, 0x4b7, 0x76c0, 0xed05, 0x89f1, 0x9c8b, 0x1, 0x1);
        gbc.writeMem(0x6047, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4b7);
        EXPECT(gbc.pc(), 0x6048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 018B
        gbc.setState(0xdbfd, 0x1862, 0xa410, 0x9fa0, 0x38c2, 0xbf4f, 0x0, 0x0);
        gbc.writeMem(0xdbfd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1862);
        EXPECT(gbc.pc(), 0xdbfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbfd), 0x54);
        // 54 018D
        gbc.setState(0x830b, 0x658b, 0x2940, 0xebbf, 0xca5, 0x2b2e, 0x0, 0x0);
        gbc.writeMem(0x830b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x658b);
        EXPECT(gbc.pc(), 0x830c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x830b), 0x54);
        // 54 018E
        gbc.setState(0x8a4e, 0x3b64, 0xc0, 0x840c, 0x7a1a, 0x1a84, 0x1, 0x1);
        gbc.writeMem(0x8a4e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3b64);
        EXPECT(gbc.pc(), 0x8a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a4e), 0x54);
        // 54 018F
        gbc.setState(0xa84c, 0x1c59, 0x7b20, 0x6109, 0xdf05, 0x3a8d, 0x0, 0x0);
        gbc.writeMem(0xa84c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1c59);
        EXPECT(gbc.pc(), 0xa84d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84c), 0x54);
        // 54 0190
        gbc.setState(0xb9c9, 0x4c36, 0xed60, 0xfbbe, 0xd75e, 0x4eef, 0x0, 0x0);
        gbc.writeMem(0xb9c9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4c36);
        EXPECT(gbc.pc(), 0xb9ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c9), 0x54);
        // 54 0191
        gbc.setState(0x413b, 0x4cd2, 0x2d70, 0x8fec, 0x6270, 0x6309, 0x0, 0x1);
        gbc.writeMem(0x413b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4cd2);
        EXPECT(gbc.pc(), 0x413c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0192
        gbc.setState(0x8adb, 0xdd28, 0x45c0, 0xd779, 0x31e0, 0x2750, 0x1, 0x0);
        gbc.writeMem(0x8adb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xdd28);
        EXPECT(gbc.pc(), 0x8adc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8adb), 0x54);
        // 54 0193
        gbc.setState(0x689e, 0xf3f5, 0xbae0, 0x5bb7, 0x98c8, 0xa33c, 0x0, 0x0);
        gbc.writeMem(0x689e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf3f5);
        EXPECT(gbc.pc(), 0x689f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0194
        gbc.setState(0x41f9, 0xcc86, 0xe670, 0xb7c3, 0x19da, 0xef46, 0x0, 0x1);
        gbc.writeMem(0x41f9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xcc86);
        EXPECT(gbc.pc(), 0x41fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0195
        gbc.setState(0x945f, 0x150c, 0xf930, 0x78b3, 0xb5e4, 0x8690, 0x0, 0x1);
        gbc.writeMem(0x945f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x150c);
        EXPECT(gbc.pc(), 0x9460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945f), 0x54);
        // 54 0196
        gbc.setState(0xb959, 0x1235, 0x83c0, 0xe3bd, 0x5dc7, 0xb911, 0x1, 0x0);
        gbc.writeMem(0xb959, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1235);
        EXPECT(gbc.pc(), 0xb95a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb959), 0x54);
        // 54 0197
        gbc.setState(0xcc3f, 0xda55, 0xae60, 0x1cd7, 0x8819, 0xc832, 0x0, 0x1);
        gbc.writeMem(0xcc3f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xda55);
        EXPECT(gbc.pc(), 0xcc40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc3f), 0x54);
        // 54 0198
        gbc.setState(0xafaf, 0xc5c, 0xbc60, 0xa69, 0x1f0, 0xc91e, 0x0, 0x1);
        gbc.writeMem(0xafaf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc5c);
        EXPECT(gbc.pc(), 0xafb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafaf), 0x54);
        // 54 0199
        gbc.setState(0xb046, 0x787e, 0x91f0, 0xb93d, 0xd3d4, 0x6cf0, 0x1, 0x1);
        gbc.writeMem(0xb046, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x787e);
        EXPECT(gbc.pc(), 0xb047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb046), 0x54);
        // 54 019A
        gbc.setState(0x99d4, 0xa6d5, 0x6b50, 0x8587, 0x16f8, 0x9f72, 0x0, 0x0);
        gbc.writeMem(0x99d4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa6d5);
        EXPECT(gbc.pc(), 0x99d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d4), 0x54);
        // 54 019B
        gbc.setState(0x6fd6, 0xdf91, 0x9930, 0xa292, 0x1277, 0x6fcb, 0x0, 0x0);
        gbc.writeMem(0x6fd6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xdf91);
        EXPECT(gbc.pc(), 0x6fd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 019C
        gbc.setState(0x56dc, 0xb94b, 0xe510, 0xf45, 0xd0f5, 0x796e, 0x1, 0x1);
        gbc.writeMem(0x56dc, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb94b);
        EXPECT(gbc.pc(), 0x56dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 019D
        gbc.setState(0x4b97, 0xdc53, 0x8770, 0xc4d4, 0x9d70, 0xc624, 0x0, 0x1);
        gbc.writeMem(0x4b97, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdc53);
        EXPECT(gbc.pc(), 0x4b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 019E
        gbc.setState(0x9a20, 0xb35e, 0xdd70, 0xd1a7, 0x80cd, 0x53b4, 0x1, 0x0);
        gbc.writeMem(0x9a20, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb35e);
        EXPECT(gbc.pc(), 0x9a21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a20), 0x54);
        // 54 019F
        gbc.setState(0xeef6, 0x5e52, 0xec10, 0x7d54, 0x113b, 0x21b6, 0x1, 0x1);
        gbc.writeMem(0xeef6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5e52);
        EXPECT(gbc.pc(), 0xeef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeef6), 0x54);
        // 54 01A0
        gbc.setState(0x86e2, 0x3e19, 0x2520, 0xa5cf, 0x23d1, 0x9221, 0x1, 0x1);
        gbc.writeMem(0x86e2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3e19);
        EXPECT(gbc.pc(), 0x86e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e2), 0x54);
        // 54 01A1
        gbc.setState(0x7bc3, 0x3f6a, 0x7dc0, 0x9b54, 0xb34, 0xb51b, 0x0, 0x1);
        gbc.writeMem(0x7bc3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3f6a);
        EXPECT(gbc.pc(), 0x7bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01A2
        gbc.setState(0xb0d1, 0x486f, 0x3700, 0xc381, 0xebeb, 0x160c, 0x1, 0x1);
        gbc.writeMem(0xb0d1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x486f);
        EXPECT(gbc.pc(), 0xb0d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0d1), 0x54);
        // 54 01A3
        gbc.setState(0x6890, 0xbc06, 0x3ba0, 0xd2b4, 0xbab9, 0x1ade, 0x1, 0x0);
        gbc.writeMem(0x6890, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbc06);
        EXPECT(gbc.pc(), 0x6891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01A4
        gbc.setState(0x54d3, 0xc896, 0x7130, 0x61e2, 0x854e, 0xe1ad, 0x1, 0x0);
        gbc.writeMem(0x54d3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc896);
        EXPECT(gbc.pc(), 0x54d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01A5
        gbc.setState(0x861e, 0xcae5, 0x7450, 0xfca2, 0x27dc, 0xeb09, 0x1, 0x1);
        gbc.writeMem(0x861e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xcae5);
        EXPECT(gbc.pc(), 0x861f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x861e), 0x54);
        // 54 01A6
        gbc.setState(0x875a, 0x4aeb, 0xcdb0, 0x6bc5, 0xeb44, 0x170d, 0x1, 0x1);
        gbc.writeMem(0x875a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4aeb);
        EXPECT(gbc.pc(), 0x875b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x875a), 0x54);
        // 54 01A7
        gbc.setState(0x276a, 0xe363, 0x930, 0x82b9, 0x2c8c, 0xeede, 0x1, 0x1);
        gbc.writeMem(0x276a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe363);
        EXPECT(gbc.pc(), 0x276b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01A8
        gbc.setState(0x8c23, 0x66d2, 0x6390, 0x7d23, 0x8446, 0x3d04, 0x0, 0x1);
        gbc.writeMem(0x8c23, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x66d2);
        EXPECT(gbc.pc(), 0x8c24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c23), 0x54);
        // 54 01A9
        gbc.setState(0xd01f, 0xd3, 0x8170, 0x9644, 0x49e7, 0xbcad, 0x0, 0x1);
        gbc.writeMem(0xd01f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd3);
        EXPECT(gbc.pc(), 0xd020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd01f), 0x54);
        // 54 01AA
        gbc.setState(0x7b8d, 0xdb6d, 0x4a00, 0x6f0, 0x605a, 0x762, 0x1, 0x0);
        gbc.writeMem(0x7b8d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xdb6d);
        EXPECT(gbc.pc(), 0x7b8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01AB
        gbc.setState(0x8e50, 0x151a, 0x3170, 0x536a, 0x2c00, 0x7436, 0x0, 0x0);
        gbc.writeMem(0x8e50, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x151a);
        EXPECT(gbc.pc(), 0x8e51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e50), 0x54);
        // 54 01AC
        gbc.setState(0x3db5, 0xddfb, 0xd690, 0xcb0d, 0x1f0b, 0x11a9, 0x1, 0x0);
        gbc.writeMem(0x3db5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xddfb);
        EXPECT(gbc.pc(), 0x3db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01AD
        gbc.setState(0x666c, 0x6d19, 0xcd10, 0x837a, 0x492c, 0xc32e, 0x0, 0x0);
        gbc.writeMem(0x666c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6d19);
        EXPECT(gbc.pc(), 0x666d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01AE
        gbc.setState(0x527, 0xe61, 0xc490, 0x3dd7, 0x3882, 0x21b2, 0x0, 0x1);
        gbc.writeMem(0x527, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe61);
        EXPECT(gbc.pc(), 0x528);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01B0
        gbc.setState(0x5956, 0x261a, 0xfea0, 0x699b, 0xf655, 0xa6eb, 0x0, 0x1);
        gbc.writeMem(0x5956, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x261a);
        EXPECT(gbc.pc(), 0x5957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01B1
        gbc.setState(0x174b, 0xa880, 0x75a0, 0xf0ef, 0x3f6, 0x3079, 0x0, 0x0);
        gbc.writeMem(0x174b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa880);
        EXPECT(gbc.pc(), 0x174c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01B2
        gbc.setState(0xc4fb, 0xf250, 0x5950, 0xdd87, 0xfaac, 0xbeaa, 0x0, 0x0);
        gbc.writeMem(0xc4fb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf250);
        EXPECT(gbc.pc(), 0xc4fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4fb), 0x54);
        // 54 01B3
        gbc.setState(0x5d00, 0x9435, 0xf5e0, 0x50b4, 0xf649, 0x79d0, 0x1, 0x1);
        gbc.writeMem(0x5d00, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9435);
        EXPECT(gbc.pc(), 0x5d01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01B4
        gbc.setState(0x9871, 0x1cec, 0x2410, 0x3909, 0xe87c, 0x1f48, 0x1, 0x1);
        gbc.writeMem(0x9871, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1cec);
        EXPECT(gbc.pc(), 0x9872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9871), 0x54);
        // 54 01B5
        gbc.setState(0xe999, 0xf64c, 0x1b80, 0x4b39, 0x2d56, 0x6ea2, 0x0, 0x1);
        gbc.writeMem(0xe999, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf64c);
        EXPECT(gbc.pc(), 0xe99a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe999), 0x54);
        // 54 01B6
        gbc.setState(0xe90, 0x38f2, 0xb210, 0xaf83, 0x3117, 0x87fd, 0x0, 0x1);
        gbc.writeMem(0xe90, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x38f2);
        EXPECT(gbc.pc(), 0xe91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01B7
        gbc.setState(0x4713, 0xfa85, 0x8700, 0xfe53, 0x6465, 0xe6ce, 0x1, 0x1);
        gbc.writeMem(0x4713, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfa85);
        EXPECT(gbc.pc(), 0x4714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01B8
        gbc.setState(0x2fc3, 0xdd5, 0x58c0, 0x45fc, 0x4c1a, 0x1a22, 0x1, 0x1);
        gbc.writeMem(0x2fc3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdd5);
        EXPECT(gbc.pc(), 0x2fc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01B9
        gbc.setState(0x319d, 0x1684, 0x26d0, 0xa8c0, 0xc25e, 0xca10, 0x1, 0x1);
        gbc.writeMem(0x319d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1684);
        EXPECT(gbc.pc(), 0x319e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01BA
        gbc.setState(0xcb9d, 0x8a06, 0x80b0, 0xa399, 0x3016, 0xd8cd, 0x1, 0x1);
        gbc.writeMem(0xcb9d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8a06);
        EXPECT(gbc.pc(), 0xcb9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb9d), 0x54);
        // 54 01BB
        gbc.setState(0xb2fb, 0xbf14, 0x9240, 0xee02, 0x3d05, 0x30cc, 0x1, 0x0);
        gbc.writeMem(0xb2fb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbf14);
        EXPECT(gbc.pc(), 0xb2fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2fb), 0x54);
        // 54 01BC
        gbc.setState(0x570f, 0x185d, 0xa40, 0x1226, 0x4c17, 0x2b9b, 0x0, 0x1);
        gbc.writeMem(0x570f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x185d);
        EXPECT(gbc.pc(), 0x5710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01BD
        gbc.setState(0x2486, 0x10a5, 0x3e40, 0x7c67, 0xb4e0, 0xdf0d, 0x1, 0x0);
        gbc.writeMem(0x2486, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x10a5);
        EXPECT(gbc.pc(), 0x2487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01BF
        gbc.setState(0x1c32, 0x7faf, 0x8060, 0xa741, 0xd038, 0x8ed, 0x1, 0x1);
        gbc.writeMem(0x1c32, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7faf);
        EXPECT(gbc.pc(), 0x1c33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01C0
        gbc.setState(0x4c38, 0x85cf, 0xfb90, 0xe0a9, 0xada3, 0x62e4, 0x0, 0x0);
        gbc.writeMem(0x4c38, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x85cf);
        EXPECT(gbc.pc(), 0x4c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01C1
        gbc.setState(0xde04, 0x4b61, 0xba60, 0x6028, 0x3617, 0xa8d8, 0x0, 0x0);
        gbc.writeMem(0xde04, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4b61);
        EXPECT(gbc.pc(), 0xde05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde04), 0x54);
        // 54 01C2
        gbc.setState(0x4b5e, 0xf9a, 0x1650, 0x828, 0xae48, 0x62ed, 0x0, 0x0);
        gbc.writeMem(0x4b5e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf9a);
        EXPECT(gbc.pc(), 0x4b5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01C3
        gbc.setState(0x7423, 0x2758, 0x4fd0, 0x541f, 0x26c5, 0x12b, 0x0, 0x0);
        gbc.writeMem(0x7423, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2758);
        EXPECT(gbc.pc(), 0x7424);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01C4
        gbc.setState(0x517a, 0x6710, 0x44d0, 0xadea, 0x29b0, 0xf4ee, 0x1, 0x0);
        gbc.writeMem(0x517a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6710);
        EXPECT(gbc.pc(), 0x517b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01C5
        gbc.setState(0x6596, 0xfbc5, 0xc030, 0x24e0, 0x102f, 0x803d, 0x0, 0x1);
        gbc.writeMem(0x6596, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfbc5);
        EXPECT(gbc.pc(), 0x6597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01C7
        gbc.setState(0x51d2, 0xca75, 0x7760, 0x8e18, 0xf06e, 0x4af0, 0x1, 0x0);
        gbc.writeMem(0x51d2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xca75);
        EXPECT(gbc.pc(), 0x51d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01C9
        gbc.setState(0x39f9, 0x21b1, 0x66c0, 0xa7ae, 0xdf22, 0x966e, 0x1, 0x1);
        gbc.writeMem(0x39f9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x21b1);
        EXPECT(gbc.pc(), 0x39fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01CA
        gbc.setState(0x2dfa, 0xf7c2, 0xb10, 0x815c, 0x785b, 0xc071, 0x0, 0x1);
        gbc.writeMem(0x2dfa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf7c2);
        EXPECT(gbc.pc(), 0x2dfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01CB
        gbc.setState(0xa6e1, 0x2da0, 0x4bf0, 0x1af1, 0xdc88, 0x1de4, 0x1, 0x1);
        gbc.writeMem(0xa6e1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2da0);
        EXPECT(gbc.pc(), 0xa6e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6e1), 0x54);
        // 54 01CC
        gbc.setState(0xdc9a, 0xa7a4, 0xc550, 0xf525, 0xc84c, 0x1b0e, 0x1, 0x1);
        gbc.writeMem(0xdc9a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa7a4);
        EXPECT(gbc.pc(), 0xdc9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc9a), 0x54);
        // 54 01CD
        gbc.setState(0x312d, 0xf970, 0xc9c0, 0x3950, 0x7ca9, 0x7a02, 0x0, 0x0);
        gbc.writeMem(0x312d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf970);
        EXPECT(gbc.pc(), 0x312e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01CE
        gbc.setState(0xd7b1, 0xb6b5, 0xa120, 0xbd52, 0x14a4, 0x5959, 0x1, 0x1);
        gbc.writeMem(0xd7b1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb6b5);
        EXPECT(gbc.pc(), 0xd7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b1), 0x54);
        // 54 01CF
        gbc.setState(0xef54, 0x7778, 0x19f0, 0x7ce1, 0x96f3, 0xf39, 0x1, 0x0);
        gbc.writeMem(0xef54, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7778);
        EXPECT(gbc.pc(), 0xef55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef54), 0x54);
        // 54 01D0
        gbc.setState(0xedca, 0x14a, 0xaf0, 0x2f96, 0x368, 0xff17, 0x1, 0x1);
        gbc.writeMem(0xedca, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x14a);
        EXPECT(gbc.pc(), 0xedcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedca), 0x54);
        // 54 01D1
        gbc.setState(0xc3f3, 0x29ef, 0xf7a0, 0xb13c, 0x5c78, 0x1ef, 0x1, 0x0);
        gbc.writeMem(0xc3f3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x29ef);
        EXPECT(gbc.pc(), 0xc3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f3), 0x54);
        // 54 01D2
        gbc.setState(0x1202, 0xb5bb, 0x3650, 0x77c9, 0x4468, 0x3256, 0x1, 0x1);
        gbc.writeMem(0x1202, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb5bb);
        EXPECT(gbc.pc(), 0x1203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01D3
        gbc.setState(0x6d60, 0xbaed, 0x1c40, 0x8fbe, 0x1cdd, 0x7f5b, 0x0, 0x0);
        gbc.writeMem(0x6d60, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbaed);
        EXPECT(gbc.pc(), 0x6d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01D5
        gbc.setState(0x69a, 0x7837, 0x3b10, 0xf16c, 0xca5a, 0x2066, 0x1, 0x1);
        gbc.writeMem(0x69a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7837);
        EXPECT(gbc.pc(), 0x69b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01D6
        gbc.setState(0x8da5, 0x1cc0, 0x8760, 0x8b8c, 0x2269, 0x853f, 0x1, 0x1);
        gbc.writeMem(0x8da5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x1cc0);
        EXPECT(gbc.pc(), 0x8da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8da5), 0x54);
        // 54 01D7
        gbc.setState(0xf03, 0xb58f, 0xb3f0, 0x590f, 0x7efc, 0xa0c5, 0x1, 0x1);
        gbc.writeMem(0xf03, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb58f);
        EXPECT(gbc.pc(), 0xf04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01D8
        gbc.setState(0x31c6, 0xcd8c, 0x5a10, 0xbc16, 0xd806, 0xdc5, 0x1, 0x0);
        gbc.writeMem(0x31c6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xcd8c);
        EXPECT(gbc.pc(), 0x31c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01D9
        gbc.setState(0x379d, 0x707e, 0xe760, 0x847a, 0x6894, 0xd7af, 0x0, 0x0);
        gbc.writeMem(0x379d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x707e);
        EXPECT(gbc.pc(), 0x379e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01DA
        gbc.setState(0x8c74, 0xa042, 0x70e0, 0x8db1, 0xf748, 0x5ed8, 0x0, 0x0);
        gbc.writeMem(0x8c74, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa042);
        EXPECT(gbc.pc(), 0x8c75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c74), 0x54);
        // 54 01DB
        gbc.setState(0xac98, 0x2e7b, 0x9800, 0x830e, 0xe7b0, 0x7aed, 0x0, 0x1);
        gbc.writeMem(0xac98, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2e7b);
        EXPECT(gbc.pc(), 0xac99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac98), 0x54);
        // 54 01DC
        gbc.setState(0x7fd0, 0x8641, 0x4440, 0x8c08, 0x1147, 0xcdf9, 0x1, 0x1);
        gbc.writeMem(0x7fd0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8641);
        EXPECT(gbc.pc(), 0x7fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01DD
        gbc.setState(0x2e7d, 0xb86f, 0xfbf0, 0x7f32, 0x8975, 0x1709, 0x0, 0x1);
        gbc.writeMem(0x2e7d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb86f);
        EXPECT(gbc.pc(), 0x2e7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01DE
        gbc.setState(0xdfc7, 0x76ed, 0x2620, 0x89ea, 0xb78e, 0xa363, 0x0, 0x0);
        gbc.writeMem(0xdfc7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x76ed);
        EXPECT(gbc.pc(), 0xdfc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc7), 0x54);
        // 54 01DF
        gbc.setState(0x3761, 0x4e74, 0x7220, 0xf6b8, 0x14e2, 0xb29a, 0x0, 0x0);
        gbc.writeMem(0x3761, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4e74);
        EXPECT(gbc.pc(), 0x3762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01E0
        gbc.setState(0x5436, 0xcb22, 0x57f0, 0x7020, 0x5a47, 0x589d, 0x0, 0x1);
        gbc.writeMem(0x5436, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xcb22);
        EXPECT(gbc.pc(), 0x5437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01E1
        gbc.setState(0xd272, 0xc88e, 0xe130, 0x6aaf, 0xa5ac, 0x89a1, 0x0, 0x1);
        gbc.writeMem(0xd272, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc88e);
        EXPECT(gbc.pc(), 0xd273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd272), 0x54);
        // 54 01E2
        gbc.setState(0xc5a, 0x7728, 0x2f80, 0xbeb8, 0xc38b, 0xa4ab, 0x0, 0x1);
        gbc.writeMem(0xc5a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7728);
        EXPECT(gbc.pc(), 0xc5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01E3
        gbc.setState(0x7e45, 0x8493, 0x2c40, 0x5579, 0x27e2, 0xe9ba, 0x1, 0x1);
        gbc.writeMem(0x7e45, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8493);
        EXPECT(gbc.pc(), 0x7e46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01E4
        gbc.setState(0x95a9, 0xca22, 0x2130, 0xe180, 0x22a6, 0xd23d, 0x0, 0x1);
        gbc.writeMem(0x95a9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xca22);
        EXPECT(gbc.pc(), 0x95aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95a9), 0x54);
        // 54 01E5
        gbc.setState(0x42f9, 0x3ee6, 0x1a40, 0x7b91, 0x4c47, 0x2d11, 0x1, 0x0);
        gbc.writeMem(0x42f9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3ee6);
        EXPECT(gbc.pc(), 0x42fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01E6
        gbc.setState(0x7947, 0xdc6, 0x4490, 0xffe9, 0x3e5f, 0xe80b, 0x0, 0x0);
        gbc.writeMem(0x7947, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdc6);
        EXPECT(gbc.pc(), 0x7948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01E7
        gbc.setState(0x994f, 0x7b98, 0x130, 0x4c93, 0x9cdd, 0xcfb8, 0x0, 0x1);
        gbc.writeMem(0x994f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7b98);
        EXPECT(gbc.pc(), 0x9950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x994f), 0x54);
        // 54 01E8
        gbc.setState(0x6f6, 0x8b48, 0x2770, 0x42dd, 0xe0f1, 0xfc1d, 0x0, 0x1);
        gbc.writeMem(0x6f6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8b48);
        EXPECT(gbc.pc(), 0x6f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01E9
        gbc.setState(0x8f60, 0x8810, 0x4dc0, 0x5417, 0xa6b9, 0x8e01, 0x0, 0x1);
        gbc.writeMem(0x8f60, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8810);
        EXPECT(gbc.pc(), 0x8f61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f60), 0x54);
        // 54 01EA
        gbc.setState(0xb7a3, 0x886b, 0xb000, 0x9f38, 0x408a, 0xa93e, 0x0, 0x0);
        gbc.writeMem(0xb7a3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x886b);
        EXPECT(gbc.pc(), 0xb7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a3), 0x54);
        // 54 01EC
        gbc.setState(0x2a00, 0x7b1c, 0x7ef0, 0x71fc, 0xa9b5, 0xd35d, 0x1, 0x1);
        gbc.writeMem(0x2a00, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7b1c);
        EXPECT(gbc.pc(), 0x2a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01ED
        gbc.setState(0xbf28, 0xd710, 0x1d90, 0x8431, 0xa1dd, 0x8105, 0x0, 0x0);
        gbc.writeMem(0xbf28, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd710);
        EXPECT(gbc.pc(), 0xbf29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf28), 0x54);
        // 54 01EE
        gbc.setState(0xf81, 0xa406, 0x3b30, 0x1b7, 0xdb16, 0x5713, 0x0, 0x0);
        gbc.writeMem(0xf81, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa406);
        EXPECT(gbc.pc(), 0xf82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01EF
        gbc.setState(0x124c, 0x111a, 0x24d0, 0xe958, 0xb993, 0xed01, 0x1, 0x1);
        gbc.writeMem(0x124c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x111a);
        EXPECT(gbc.pc(), 0x124d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01F0
        gbc.setState(0xd1b7, 0x3af, 0x7a80, 0x3b6, 0x29be, 0xe46c, 0x0, 0x1);
        gbc.writeMem(0xd1b7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3af);
        EXPECT(gbc.pc(), 0xd1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b7), 0x54);
        // 54 01F1
        gbc.setState(0xdaaf, 0x3eea, 0xb860, 0xddba, 0xa80d, 0xa166, 0x1, 0x0);
        gbc.writeMem(0xdaaf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3eea);
        EXPECT(gbc.pc(), 0xdab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaaf), 0x54);
        // 54 01F2
        gbc.setState(0x8fb2, 0xcc60, 0x5280, 0x2e21, 0x7344, 0xbd84, 0x0, 0x0);
        gbc.writeMem(0x8fb2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xcc60);
        EXPECT(gbc.pc(), 0x8fb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb2), 0x54);
        // 54 01F3
        gbc.setState(0x685e, 0xfadb, 0xd640, 0x8d3f, 0xa93b, 0xf47e, 0x1, 0x1);
        gbc.writeMem(0x685e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xfadb);
        EXPECT(gbc.pc(), 0x685f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 01F5
        gbc.setState(0x37f2, 0xc2ec, 0x9f20, 0x4f5, 0xc7a9, 0xab08, 0x0, 0x1);
        gbc.writeMem(0x37f2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc2ec);
        EXPECT(gbc.pc(), 0x37f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01F6
        gbc.setState(0xae63, 0xd360, 0xb150, 0xf0e9, 0x3208, 0x8cdc, 0x0, 0x1);
        gbc.writeMem(0xae63, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd360);
        EXPECT(gbc.pc(), 0xae64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae63), 0x54);
        // 54 01F7
        gbc.setState(0x52bc, 0x9723, 0xd330, 0x49be, 0x4d1e, 0xbbdd, 0x1, 0x1);
        gbc.writeMem(0x52bc, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9723);
        EXPECT(gbc.pc(), 0x52bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01F8
        gbc.setState(0x73cf, 0x24bb, 0xac50, 0x5, 0xfbba, 0x8b9e, 0x1, 0x0);
        gbc.writeMem(0x73cf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x24bb);
        EXPECT(gbc.pc(), 0x73d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 01F9
        gbc.setState(0xcc0f, 0x268a, 0xf400, 0x519e, 0xa700, 0x3631, 0x0, 0x1);
        gbc.writeMem(0xcc0f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x268a);
        EXPECT(gbc.pc(), 0xcc10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc0f), 0x54);
        // 54 01FA
        gbc.setState(0x3017, 0x7a9f, 0x2230, 0x9e21, 0x2117, 0x7db7, 0x1, 0x1);
        gbc.writeMem(0x3017, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7a9f);
        EXPECT(gbc.pc(), 0x3018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 01FB
        gbc.setState(0xc387, 0x48ec, 0x1f10, 0x8bd9, 0xd58, 0xedc2, 0x0, 0x0);
        gbc.writeMem(0xc387, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x48ec);
        EXPECT(gbc.pc(), 0xc388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc387), 0x54);
        // 54 01FC
        gbc.setState(0xa33f, 0xb0e4, 0xb390, 0xfd0, 0x491c, 0x31dd, 0x0, 0x1);
        gbc.writeMem(0xa33f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb0e4);
        EXPECT(gbc.pc(), 0xa340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa33f), 0x54);
        // 54 01FD
        gbc.setState(0x6f00, 0x5083, 0x4ae0, 0x5bab, 0xc67b, 0x1f50, 0x1, 0x0);
        gbc.writeMem(0x6f00, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5083);
        EXPECT(gbc.pc(), 0x6f01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 01FE
        gbc.setState(0xca58, 0x186, 0xb740, 0xa5b, 0xeb2f, 0xaf70, 0x0, 0x0);
        gbc.writeMem(0xca58, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x186);
        EXPECT(gbc.pc(), 0xca59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca58), 0x54);
        // 54 01FF
        gbc.setState(0x62c, 0x30d1, 0x4550, 0xfaeb, 0xe901, 0x4681, 0x1, 0x1);
        gbc.writeMem(0x62c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x30d1);
        EXPECT(gbc.pc(), 0x62d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0200
        gbc.setState(0xac42, 0xc69b, 0x3b70, 0x3465, 0xeca4, 0x4611, 0x1, 0x0);
        gbc.writeMem(0xac42, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc69b);
        EXPECT(gbc.pc(), 0xac43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac42), 0x54);
        // 54 0201
        gbc.setState(0x649a, 0x879f, 0xa920, 0x6549, 0x159, 0x58ab, 0x0, 0x1);
        gbc.writeMem(0x649a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x879f);
        EXPECT(gbc.pc(), 0x649b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0202
        gbc.setState(0x63ad, 0xefb5, 0xf3f0, 0x466a, 0xb6bc, 0x6cf8, 0x1, 0x0);
        gbc.writeMem(0x63ad, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xefb5);
        EXPECT(gbc.pc(), 0x63ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0203
        gbc.setState(0xb0f1, 0xbe1a, 0x9710, 0xdd17, 0xb983, 0x6929, 0x0, 0x0);
        gbc.writeMem(0xb0f1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbe1a);
        EXPECT(gbc.pc(), 0xb0f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f1), 0x54);
        // 54 0204
        gbc.setState(0x3826, 0x2ffd, 0xab80, 0xb025, 0x7edd, 0xea8d, 0x1, 0x1);
        gbc.writeMem(0x3826, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2ffd);
        EXPECT(gbc.pc(), 0x3827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0205
        gbc.setState(0x7908, 0x84a9, 0xc20, 0x47be, 0x5b2e, 0x626f, 0x0, 0x0);
        gbc.writeMem(0x7908, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x84a9);
        EXPECT(gbc.pc(), 0x7909);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0206
        gbc.setState(0x40e9, 0xb4e3, 0x4340, 0x242d, 0xf871, 0x73b7, 0x0, 0x0);
        gbc.writeMem(0x40e9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb4e3);
        EXPECT(gbc.pc(), 0x40ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0207
        gbc.setState(0x93db, 0x9a6d, 0x23d0, 0xa981, 0x8765, 0x4482, 0x1, 0x1);
        gbc.writeMem(0x93db, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9a6d);
        EXPECT(gbc.pc(), 0x93dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93db), 0x54);
        // 54 0208
        gbc.setState(0x8778, 0xaab9, 0x5400, 0x69da, 0xa2ab, 0xd0b3, 0x1, 0x1);
        gbc.writeMem(0x8778, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xaab9);
        EXPECT(gbc.pc(), 0x8779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8778), 0x54);
        // 54 0209
        gbc.setState(0xc13e, 0x87e8, 0x140, 0x20a4, 0xaabb, 0xff1f, 0x1, 0x1);
        gbc.writeMem(0xc13e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x87e8);
        EXPECT(gbc.pc(), 0xc13f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc13e), 0x54);
        // 54 020A
        gbc.setState(0x64b7, 0x2194, 0xf5a0, 0xf9ad, 0x9e44, 0x2dba, 0x0, 0x1);
        gbc.writeMem(0x64b7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2194);
        EXPECT(gbc.pc(), 0x64b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 020B
        gbc.setState(0x4cf3, 0x3dc3, 0xa9e0, 0xe6f0, 0x7fca, 0xde8d, 0x0, 0x0);
        gbc.writeMem(0x4cf3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3dc3);
        EXPECT(gbc.pc(), 0x4cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 020C
        gbc.setState(0x9348, 0x2b47, 0xea20, 0x938, 0xb613, 0xd11b, 0x1, 0x0);
        gbc.writeMem(0x9348, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2b47);
        EXPECT(gbc.pc(), 0x9349);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9348), 0x54);
        // 54 020D
        gbc.setState(0xda83, 0x4683, 0xe5d0, 0x69ea, 0xe2b, 0xe5de, 0x1, 0x1);
        gbc.writeMem(0xda83, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4683);
        EXPECT(gbc.pc(), 0xda84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda83), 0x54);
        // 54 020E
        gbc.setState(0xab7d, 0x75e3, 0xef0, 0x1407, 0xe032, 0xe3bd, 0x1, 0x0);
        gbc.writeMem(0xab7d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x75e3);
        EXPECT(gbc.pc(), 0xab7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab7d), 0x54);
        // 54 020F
        gbc.setState(0xc4cf, 0x95c, 0x2120, 0xd779, 0xad4a, 0x279b, 0x1, 0x0);
        gbc.writeMem(0xc4cf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x95c);
        EXPECT(gbc.pc(), 0xc4d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4cf), 0x54);
        // 54 0210
        gbc.setState(0x6424, 0x28ed, 0x4190, 0xb38f, 0xf5a6, 0x7932, 0x1, 0x1);
        gbc.writeMem(0x6424, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x28ed);
        EXPECT(gbc.pc(), 0x6425);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0211
        gbc.setState(0xacd, 0x9653, 0x8380, 0x8e76, 0x46e5, 0x4127, 0x0, 0x0);
        gbc.writeMem(0xacd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9653);
        EXPECT(gbc.pc(), 0xace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0212
        gbc.setState(0x9025, 0x2381, 0x37a0, 0x6083, 0x1d7b, 0x1ba8, 0x0, 0x1);
        gbc.writeMem(0x9025, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2381);
        EXPECT(gbc.pc(), 0x9026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9025), 0x54);
        // 54 0213
        gbc.setState(0x53b5, 0xe719, 0xeb80, 0x93a9, 0x5a7c, 0x77f3, 0x0, 0x1);
        gbc.writeMem(0x53b5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe719);
        EXPECT(gbc.pc(), 0x53b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0214
        gbc.setState(0xa5de, 0x2a7f, 0xcd30, 0xdca8, 0xc6b7, 0x1b4c, 0x1, 0x0);
        gbc.writeMem(0xa5de, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2a7f);
        EXPECT(gbc.pc(), 0xa5df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5de), 0x54);
        // 54 0215
        gbc.setState(0x1799, 0xbfdc, 0xc70, 0xe561, 0x99, 0x41d, 0x1, 0x0);
        gbc.writeMem(0x1799, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xbfdc);
        EXPECT(gbc.pc(), 0x179a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0216
        gbc.setState(0xb84b, 0xeed3, 0x9860, 0x6764, 0x210a, 0xa494, 0x0, 0x1);
        gbc.writeMem(0xb84b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xeed3);
        EXPECT(gbc.pc(), 0xb84c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb84b), 0x54);
        // 54 0217
        gbc.setState(0xecea, 0xf93c, 0xe2a0, 0x9419, 0x8bf0, 0xfe21, 0x1, 0x1);
        gbc.writeMem(0xecea, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf93c);
        EXPECT(gbc.pc(), 0xeceb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecea), 0x54);
        // 54 0218
        gbc.setState(0x7c50, 0x6267, 0xe1a0, 0x8407, 0x6c68, 0x55b4, 0x0, 0x0);
        gbc.writeMem(0x7c50, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6267);
        EXPECT(gbc.pc(), 0x7c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0219
        gbc.setState(0x5247, 0x6083, 0xa150, 0x36ed, 0xe819, 0xf44f, 0x1, 0x0);
        gbc.writeMem(0x5247, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6083);
        EXPECT(gbc.pc(), 0x5248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 021A
        gbc.setState(0x5f6c, 0x54d7, 0x9a60, 0xf2d1, 0x66c9, 0xa661, 0x1, 0x0);
        gbc.writeMem(0x5f6c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x54d7);
        EXPECT(gbc.pc(), 0x5f6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 021B
        gbc.setState(0x8c92, 0x961e, 0x8b60, 0x8914, 0xf970, 0xa1d1, 0x1, 0x1);
        gbc.writeMem(0x8c92, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x961e);
        EXPECT(gbc.pc(), 0x8c93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c92), 0x54);
        // 54 021C
        gbc.setState(0xb113, 0xa79a, 0x8160, 0x8dc3, 0x73db, 0x9483, 0x0, 0x0);
        gbc.writeMem(0xb113, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa79a);
        EXPECT(gbc.pc(), 0xb114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb113), 0x54);
        // 54 021D
        gbc.setState(0x7f0, 0x5ccb, 0x3ca0, 0x9bc, 0xe2af, 0xd922, 0x1, 0x0);
        gbc.writeMem(0x7f0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5ccb);
        EXPECT(gbc.pc(), 0x7f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 021E
        gbc.setState(0xc5d1, 0x26a0, 0xe90, 0xf0d1, 0x7c0, 0xcbaa, 0x1, 0x1);
        gbc.writeMem(0xc5d1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x26a0);
        EXPECT(gbc.pc(), 0xc5d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d1), 0x54);
        // 54 021F
        gbc.setState(0x10c3, 0xf1df, 0x96b0, 0x85af, 0x8972, 0x31bd, 0x0, 0x1);
        gbc.writeMem(0x10c3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf1df);
        EXPECT(gbc.pc(), 0x10c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0220
        gbc.setState(0xa34b, 0xe582, 0xc260, 0x8125, 0x1012, 0xa2ec, 0x0, 0x0);
        gbc.writeMem(0xa34b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe582);
        EXPECT(gbc.pc(), 0xa34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34b), 0x54);
        // 54 0221
        gbc.setState(0x78a4, 0x75a1, 0x5f70, 0xffcd, 0x9fed, 0x3e10, 0x0, 0x1);
        gbc.writeMem(0x78a4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x75a1);
        EXPECT(gbc.pc(), 0x78a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0222
        gbc.setState(0xf98, 0x66e4, 0x5900, 0xeaee, 0x5e21, 0xd5f, 0x1, 0x0);
        gbc.writeMem(0xf98, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x66e4);
        EXPECT(gbc.pc(), 0xf99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0223
        gbc.setState(0x3e00, 0x7568, 0x73d0, 0x3730, 0x8026, 0xe387, 0x0, 0x0);
        gbc.writeMem(0x3e00, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7568);
        EXPECT(gbc.pc(), 0x3e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0224
        gbc.setState(0x98e, 0x630d, 0xc140, 0xb3cd, 0xe1cb, 0x36b2, 0x0, 0x1);
        gbc.writeMem(0x98e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x630d);
        EXPECT(gbc.pc(), 0x98f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0225
        gbc.setState(0x62e9, 0x5ad1, 0x74a0, 0x15fd, 0xf7d1, 0xd1b1, 0x1, 0x0);
        gbc.writeMem(0x62e9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5ad1);
        EXPECT(gbc.pc(), 0x62ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0226
        gbc.setState(0x78de, 0x956a, 0x1120, 0x2e06, 0x2344, 0x608, 0x1, 0x1);
        gbc.writeMem(0x78de, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x956a);
        EXPECT(gbc.pc(), 0x78df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0227
        gbc.setState(0x8dd2, 0xd6fb, 0xc2f0, 0xf6b1, 0x5f29, 0x278e, 0x1, 0x1);
        gbc.writeMem(0x8dd2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd6fb);
        EXPECT(gbc.pc(), 0x8dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd2), 0x54);
        // 54 0228
        gbc.setState(0xa205, 0x527b, 0x51a0, 0x4595, 0x3b85, 0xdabb, 0x1, 0x0);
        gbc.writeMem(0xa205, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x527b);
        EXPECT(gbc.pc(), 0xa206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa205), 0x54);
        // 54 0229
        gbc.setState(0x7dda, 0xbaad, 0xa490, 0xeec7, 0xc13c, 0x225e, 0x1, 0x0);
        gbc.writeMem(0x7dda, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbaad);
        EXPECT(gbc.pc(), 0x7ddb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 022A
        gbc.setState(0xc850, 0x9f48, 0xdc20, 0x8c54, 0x9986, 0x598a, 0x0, 0x0);
        gbc.writeMem(0xc850, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9f48);
        EXPECT(gbc.pc(), 0xc851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc850), 0x54);
        // 54 022B
        gbc.setState(0x124, 0xc20, 0x7090, 0xd97f, 0xf09b, 0xb903, 0x0, 0x1);
        gbc.writeMem(0x124, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc20);
        EXPECT(gbc.pc(), 0x125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 022C
        gbc.setState(0x1234, 0xff7f, 0xb910, 0xc934, 0x8804, 0xce1f, 0x1, 0x0);
        gbc.writeMem(0x1234, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xff7f);
        EXPECT(gbc.pc(), 0x1235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 022D
        gbc.setState(0x99b, 0x4a59, 0xd0f0, 0x7122, 0xba9c, 0x8a5d, 0x1, 0x0);
        gbc.writeMem(0x99b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4a59);
        EXPECT(gbc.pc(), 0x99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 022E
        gbc.setState(0x8e60, 0x1351, 0x3e10, 0x7c39, 0xeab1, 0x93, 0x0, 0x1);
        gbc.writeMem(0x8e60, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1351);
        EXPECT(gbc.pc(), 0x8e61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e60), 0x54);
        // 54 022F
        gbc.setState(0x4a4e, 0xb3cc, 0x7490, 0xffb9, 0xf44, 0x7196, 0x1, 0x0);
        gbc.writeMem(0x4a4e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb3cc);
        EXPECT(gbc.pc(), 0x4a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0230
        gbc.setState(0xef34, 0x4156, 0x9bc0, 0x553b, 0xf342, 0x31a7, 0x0, 0x0);
        gbc.writeMem(0xef34, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4156);
        EXPECT(gbc.pc(), 0xef35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef34), 0x54);
        // 54 0231
        gbc.setState(0xc87c, 0xe651, 0xab90, 0x6a01, 0xe3aa, 0x2e75, 0x0, 0x0);
        gbc.writeMem(0xc87c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe651);
        EXPECT(gbc.pc(), 0xc87d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc87c), 0x54);
        // 54 0232
        gbc.setState(0x9abf, 0x2c64, 0xd440, 0x11f7, 0x60c0, 0xdb07, 0x0, 0x0);
        gbc.writeMem(0x9abf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2c64);
        EXPECT(gbc.pc(), 0x9ac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9abf), 0x54);
        // 54 0233
        gbc.setState(0xc981, 0xc95f, 0x5bb0, 0xba8, 0x1275, 0xc792, 0x1, 0x1);
        gbc.writeMem(0xc981, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc95f);
        EXPECT(gbc.pc(), 0xc982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc981), 0x54);
        // 54 0234
        gbc.setState(0x509b, 0xf487, 0xb4c0, 0x333c, 0xd097, 0xa20f, 0x0, 0x1);
        gbc.writeMem(0x509b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf487);
        EXPECT(gbc.pc(), 0x509c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0235
        gbc.setState(0xd7db, 0xa7fe, 0xed50, 0xb9da, 0x243, 0xd303, 0x0, 0x0);
        gbc.writeMem(0xd7db, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa7fe);
        EXPECT(gbc.pc(), 0xd7dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7db), 0x54);
        // 54 0236
        gbc.setState(0x346b, 0x37b, 0x8ee0, 0xcbff, 0xb7ca, 0x30c1, 0x1, 0x1);
        gbc.writeMem(0x346b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x37b);
        EXPECT(gbc.pc(), 0x346c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0237
        gbc.setState(0x719b, 0xefdd, 0x3f00, 0x5aa2, 0x6bc7, 0xca10, 0x0, 0x0);
        gbc.writeMem(0x719b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xefdd);
        EXPECT(gbc.pc(), 0x719c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0238
        gbc.setState(0xa98a, 0xf36b, 0x7c70, 0xf06d, 0x120e, 0x9c48, 0x1, 0x0);
        gbc.writeMem(0xa98a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf36b);
        EXPECT(gbc.pc(), 0xa98b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98a), 0x54);
        // 54 0239
        gbc.setState(0x5c8b, 0x42b8, 0xb560, 0x120, 0xc7ef, 0x4e2b, 0x1, 0x1);
        gbc.writeMem(0x5c8b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x42b8);
        EXPECT(gbc.pc(), 0x5c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 023A
        gbc.setState(0x484a, 0x54f0, 0x6660, 0x8c08, 0x2c1c, 0xe4d9, 0x1, 0x0);
        gbc.writeMem(0x484a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x54f0);
        EXPECT(gbc.pc(), 0x484b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 023B
        gbc.setState(0x94e, 0x8fc2, 0x7190, 0xc4ab, 0x2bf6, 0xc106, 0x0, 0x1);
        gbc.writeMem(0x94e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8fc2);
        EXPECT(gbc.pc(), 0x94f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 023C
        gbc.setState(0x5a30, 0xf697, 0xe870, 0xcb94, 0x574, 0x4574, 0x0, 0x0);
        gbc.writeMem(0x5a30, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf697);
        EXPECT(gbc.pc(), 0x5a31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 023D
        gbc.setState(0xe1ee, 0x1810, 0x2040, 0xd2c4, 0x3d20, 0x337f, 0x1, 0x1);
        gbc.writeMem(0xe1ee, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1810);
        EXPECT(gbc.pc(), 0xe1ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1ee), 0x54);
        // 54 023E
        gbc.setState(0x8594, 0x8f12, 0x1ac0, 0xced, 0xe58b, 0x130a, 0x1, 0x0);
        gbc.writeMem(0x8594, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8f12);
        EXPECT(gbc.pc(), 0x8595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8594), 0x54);
        // 54 023F
        gbc.setState(0x90c9, 0x5be2, 0x9890, 0x53fe, 0x1e4, 0xc23a, 0x0, 0x0);
        gbc.writeMem(0x90c9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5be2);
        EXPECT(gbc.pc(), 0x90ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90c9), 0x54);
        // 54 0240
        gbc.setState(0x440c, 0x2c71, 0x9a70, 0xef5b, 0xfc1f, 0xb0cc, 0x0, 0x1);
        gbc.writeMem(0x440c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2c71);
        EXPECT(gbc.pc(), 0x440d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0241
        gbc.setState(0x700e, 0x54d4, 0x47b0, 0x92a8, 0xd9de, 0xd60b, 0x1, 0x1);
        gbc.writeMem(0x700e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x54d4);
        EXPECT(gbc.pc(), 0x700f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0242
        gbc.setState(0xa3e, 0xc222, 0x49c0, 0x3f83, 0xcdc8, 0x47eb, 0x1, 0x1);
        gbc.writeMem(0xa3e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc222);
        EXPECT(gbc.pc(), 0xa3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0243
        gbc.setState(0x61c, 0xf08e, 0x6270, 0xaee4, 0x2aa0, 0xfd6c, 0x0, 0x0);
        gbc.writeMem(0x61c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf08e);
        EXPECT(gbc.pc(), 0x61d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0244
        gbc.setState(0x1784, 0x7592, 0xae60, 0x4220, 0x6c46, 0x3f47, 0x1, 0x0);
        gbc.writeMem(0x1784, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7592);
        EXPECT(gbc.pc(), 0x1785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0245
        gbc.setState(0x3e82, 0x9aea, 0x61e0, 0xd1eb, 0xb919, 0xbd9c, 0x1, 0x0);
        gbc.writeMem(0x3e82, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9aea);
        EXPECT(gbc.pc(), 0x3e83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0247
        gbc.setState(0x8bee, 0x3baf, 0xdfa0, 0xf292, 0xc2f0, 0x2d4b, 0x0, 0x1);
        gbc.writeMem(0x8bee, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x3baf);
        EXPECT(gbc.pc(), 0x8bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bee), 0x54);
        // 54 0248
        gbc.setState(0x5014, 0xdde8, 0x9680, 0x3623, 0x74a1, 0x7e1b, 0x1, 0x0);
        gbc.writeMem(0x5014, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdde8);
        EXPECT(gbc.pc(), 0x5015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 024A
        gbc.setState(0x5640, 0x268f, 0x6710, 0x546d, 0x58bc, 0x5a03, 0x1, 0x1);
        gbc.writeMem(0x5640, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x268f);
        EXPECT(gbc.pc(), 0x5641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 024B
        gbc.setState(0x87d6, 0x4c29, 0xe810, 0x55f4, 0xb6b, 0x76c6, 0x1, 0x1);
        gbc.writeMem(0x87d6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4c29);
        EXPECT(gbc.pc(), 0x87d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87d6), 0x54);
        // 54 024C
        gbc.setState(0xdfaf, 0x690e, 0xc290, 0x9eaa, 0xd808, 0xbbb8, 0x0, 0x0);
        gbc.writeMem(0xdfaf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x690e);
        EXPECT(gbc.pc(), 0xdfb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfaf), 0x54);
        // 54 024D
        gbc.setState(0x358, 0x4d87, 0x65f0, 0x7aa5, 0xf331, 0xb52, 0x1, 0x0);
        gbc.writeMem(0x358, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4d87);
        EXPECT(gbc.pc(), 0x359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 024E
        gbc.setState(0x3c8f, 0x2a47, 0xc030, 0x1769, 0xd65f, 0x8c2b, 0x0, 0x1);
        gbc.writeMem(0x3c8f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2a47);
        EXPECT(gbc.pc(), 0x3c90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 024F
        gbc.setState(0xdbb8, 0x2cca, 0x69f0, 0x44fa, 0xe980, 0xbdcb, 0x1, 0x0);
        gbc.writeMem(0xdbb8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2cca);
        EXPECT(gbc.pc(), 0xdbb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbb8), 0x54);
        // 54 0250
        gbc.setState(0x6e68, 0xb8c6, 0x1ac0, 0xd91e, 0x3b85, 0xb81a, 0x1, 0x1);
        gbc.writeMem(0x6e68, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb8c6);
        EXPECT(gbc.pc(), 0x6e69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0251
        gbc.setState(0x2fd, 0xda09, 0x85e0, 0xfc2e, 0xf9c3, 0x713f, 0x1, 0x1);
        gbc.writeMem(0x2fd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xda09);
        EXPECT(gbc.pc(), 0x2fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0252
        gbc.setState(0x13f5, 0x1975, 0x8630, 0xbb4, 0xa110, 0xd32b, 0x0, 0x0);
        gbc.writeMem(0x13f5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1975);
        EXPECT(gbc.pc(), 0x13f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0255
        gbc.setState(0xd656, 0xe2d7, 0x9270, 0xede6, 0x1a36, 0x33eb, 0x1, 0x1);
        gbc.writeMem(0xd656, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe2d7);
        EXPECT(gbc.pc(), 0xd657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd656), 0x54);
        // 54 0256
        gbc.setState(0x5428, 0x876b, 0x8460, 0x9187, 0x12e4, 0x6306, 0x0, 0x0);
        gbc.writeMem(0x5428, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x876b);
        EXPECT(gbc.pc(), 0x5429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0257
        gbc.setState(0x5171, 0xc2b9, 0x6960, 0x7006, 0x3690, 0x3217, 0x0, 0x0);
        gbc.writeMem(0x5171, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc2b9);
        EXPECT(gbc.pc(), 0x5172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0258
        gbc.setState(0xbab3, 0x79ce, 0x9090, 0x553f, 0x5803, 0xafef, 0x0, 0x0);
        gbc.writeMem(0xbab3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x79ce);
        EXPECT(gbc.pc(), 0xbab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbab3), 0x54);
        // 54 0259
        gbc.setState(0x4996, 0x8287, 0x9f30, 0x873a, 0xd576, 0x883, 0x1, 0x0);
        gbc.writeMem(0x4996, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8287);
        EXPECT(gbc.pc(), 0x4997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 025B
        gbc.setState(0x4d0a, 0xe52e, 0x7000, 0xe8be, 0x6b64, 0xc502, 0x1, 0x0);
        gbc.writeMem(0x4d0a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe52e);
        EXPECT(gbc.pc(), 0x4d0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 025C
        gbc.setState(0x64aa, 0xbb03, 0xe9f0, 0x9e20, 0x2df0, 0xa7c6, 0x0, 0x1);
        gbc.writeMem(0x64aa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbb03);
        EXPECT(gbc.pc(), 0x64ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 025D
        gbc.setState(0x1940, 0x4d39, 0x49c0, 0xa046, 0x265e, 0xa5a5, 0x1, 0x1);
        gbc.writeMem(0x1940, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4d39);
        EXPECT(gbc.pc(), 0x1941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 025E
        gbc.setState(0xcc17, 0xe0e4, 0x5480, 0xbc42, 0xd636, 0x9b01, 0x1, 0x0);
        gbc.writeMem(0xcc17, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe0e4);
        EXPECT(gbc.pc(), 0xcc18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc17), 0x54);
        // 54 0260
        gbc.setState(0x30a1, 0x9d0b, 0xece0, 0xfece, 0x939b, 0x4f33, 0x0, 0x1);
        gbc.writeMem(0x30a1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9d0b);
        EXPECT(gbc.pc(), 0x30a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0261
        gbc.setState(0xa9aa, 0x1393, 0x1170, 0x52ea, 0x9e22, 0x5968, 0x1, 0x0);
        gbc.writeMem(0xa9aa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1393);
        EXPECT(gbc.pc(), 0xa9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9aa), 0x54);
        // 54 0262
        gbc.setState(0xe1a6, 0x95ea, 0xa080, 0xdf1e, 0x3400, 0x8844, 0x1, 0x1);
        gbc.writeMem(0xe1a6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x95ea);
        EXPECT(gbc.pc(), 0xe1a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1a6), 0x54);
        // 54 0263
        gbc.setState(0x417f, 0x8f20, 0x5b70, 0xd49d, 0xd3a7, 0x18be, 0x1, 0x0);
        gbc.writeMem(0x417f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8f20);
        EXPECT(gbc.pc(), 0x4180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0264
        gbc.setState(0xc24d, 0x5267, 0xe920, 0x700e, 0x46ea, 0xb0ec, 0x1, 0x0);
        gbc.writeMem(0xc24d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5267);
        EXPECT(gbc.pc(), 0xc24e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24d), 0x54);
        // 54 0265
        gbc.setState(0x581a, 0xbbe9, 0x5420, 0x62a6, 0x7749, 0x5691, 0x0, 0x1);
        gbc.writeMem(0x581a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbbe9);
        EXPECT(gbc.pc(), 0x581b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0266
        gbc.setState(0x10ec, 0x6f6b, 0x5b10, 0x85a3, 0x9a30, 0x2444, 0x1, 0x0);
        gbc.writeMem(0x10ec, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6f6b);
        EXPECT(gbc.pc(), 0x10ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0267
        gbc.setState(0x7044, 0x7500, 0xe70, 0x961c, 0x96ce, 0x958, 0x1, 0x0);
        gbc.writeMem(0x7044, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7500);
        EXPECT(gbc.pc(), 0x7045);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0268
        gbc.setState(0x1c77, 0x9442, 0x33e0, 0x9812, 0x2c55, 0x9432, 0x0, 0x0);
        gbc.writeMem(0x1c77, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9442);
        EXPECT(gbc.pc(), 0x1c78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0269
        gbc.setState(0xdf0d, 0x514c, 0x7cc0, 0x3df3, 0xf128, 0x9734, 0x0, 0x0);
        gbc.writeMem(0xdf0d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x514c);
        EXPECT(gbc.pc(), 0xdf0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf0d), 0x54);
        // 54 026A
        gbc.setState(0x9ca0, 0x7c9f, 0xcf60, 0x669a, 0x7ae9, 0x4f51, 0x0, 0x0);
        gbc.writeMem(0x9ca0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7c9f);
        EXPECT(gbc.pc(), 0x9ca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca0), 0x54);
        // 54 026B
        gbc.setState(0x179e, 0xcc6d, 0x6a50, 0xb344, 0xd63, 0x2a61, 0x0, 0x1);
        gbc.writeMem(0x179e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xcc6d);
        EXPECT(gbc.pc(), 0x179f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 026C
        gbc.setState(0x7a1, 0xafeb, 0x9be0, 0x3962, 0x5686, 0xae92, 0x1, 0x1);
        gbc.writeMem(0x7a1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xafeb);
        EXPECT(gbc.pc(), 0x7a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 026D
        gbc.setState(0x107b, 0xe438, 0x7060, 0xbe89, 0x7933, 0x72a6, 0x1, 0x1);
        gbc.writeMem(0x107b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe438);
        EXPECT(gbc.pc(), 0x107c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 026E
        gbc.setState(0x7598, 0x2e82, 0x1620, 0x2317, 0x5733, 0xc17a, 0x0, 0x0);
        gbc.writeMem(0x7598, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2e82);
        EXPECT(gbc.pc(), 0x7599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 026F
        gbc.setState(0xaf90, 0x43a1, 0x3130, 0x31b0, 0x30e1, 0xe6a6, 0x0, 0x0);
        gbc.writeMem(0xaf90, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x43a1);
        EXPECT(gbc.pc(), 0xaf91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf90), 0x54);
        // 54 0270
        gbc.setState(0xd5d5, 0x5d0e, 0x2670, 0x2a01, 0xb55e, 0x67b0, 0x1, 0x1);
        gbc.writeMem(0xd5d5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5d0e);
        EXPECT(gbc.pc(), 0xd5d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5d5), 0x54);
        // 54 0271
        gbc.setState(0x5d02, 0xbd12, 0x1b50, 0x7907, 0x9f9a, 0x739e, 0x1, 0x0);
        gbc.writeMem(0x5d02, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbd12);
        EXPECT(gbc.pc(), 0x5d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0272
        gbc.setState(0x71bd, 0x5a6c, 0x32c0, 0x3d6, 0xd36a, 0x9d4d, 0x1, 0x1);
        gbc.writeMem(0x71bd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5a6c);
        EXPECT(gbc.pc(), 0x71be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0273
        gbc.setState(0xb100, 0xc38, 0x6b50, 0x34ce, 0x5539, 0x5f5, 0x1, 0x0);
        gbc.writeMem(0xb100, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc38);
        EXPECT(gbc.pc(), 0xb101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb100), 0x54);
        // 54 0274
        gbc.setState(0xb0b2, 0x7cb7, 0xc870, 0xaa33, 0xfa01, 0xec66, 0x1, 0x1);
        gbc.writeMem(0xb0b2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7cb7);
        EXPECT(gbc.pc(), 0xb0b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0b2), 0x54);
        // 54 0275
        gbc.setState(0x891, 0xb261, 0x260, 0x1552, 0x70c4, 0x3445, 0x1, 0x0);
        gbc.writeMem(0x891, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xb261);
        EXPECT(gbc.pc(), 0x892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0276
        gbc.setState(0xc0e3, 0xdf88, 0x4df0, 0x8676, 0x6d68, 0x5cd8, 0x1, 0x1);
        gbc.writeMem(0xc0e3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xdf88);
        EXPECT(gbc.pc(), 0xc0e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0e3), 0x54);
        // 54 0277
        gbc.setState(0xa9d4, 0xc60f, 0x790, 0x11fa, 0x5fd7, 0x66c2, 0x1, 0x0);
        gbc.writeMem(0xa9d4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xc60f);
        EXPECT(gbc.pc(), 0xa9d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d4), 0x54);
        // 54 0278
        gbc.setState(0x75c8, 0x22f3, 0x5460, 0xe247, 0xe65a, 0x5550, 0x1, 0x1);
        gbc.writeMem(0x75c8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x22f3);
        EXPECT(gbc.pc(), 0x75c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0279
        gbc.setState(0x3d7d, 0x6b21, 0x7600, 0xc51b, 0x6a8c, 0xdeca, 0x0, 0x0);
        gbc.writeMem(0x3d7d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6b21);
        EXPECT(gbc.pc(), 0x3d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 027A
        gbc.setState(0x3a3, 0x970e, 0x6410, 0x5762, 0xab0b, 0x2b76, 0x0, 0x0);
        gbc.writeMem(0x3a3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x970e);
        EXPECT(gbc.pc(), 0x3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 027B
        gbc.setState(0x6360, 0x8c8f, 0xa4d0, 0xcf43, 0x565e, 0xacb1, 0x0, 0x0);
        gbc.writeMem(0x6360, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8c8f);
        EXPECT(gbc.pc(), 0x6361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 027C
        gbc.setState(0x6acb, 0x533c, 0x7140, 0xc72a, 0x1347, 0x6da6, 0x1, 0x1);
        gbc.writeMem(0x6acb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x533c);
        EXPECT(gbc.pc(), 0x6acc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 027D
        gbc.setState(0x20d6, 0x86d5, 0xf340, 0x3fd, 0xbcaf, 0x4c43, 0x0, 0x1);
        gbc.writeMem(0x20d6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x86d5);
        EXPECT(gbc.pc(), 0x20d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 027E
        gbc.setState(0xabc5, 0xcf8c, 0xf690, 0xec0c, 0x7907, 0x3158, 0x0, 0x0);
        gbc.writeMem(0xabc5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xcf8c);
        EXPECT(gbc.pc(), 0xabc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabc5), 0x54);
        // 54 027F
        gbc.setState(0xadb9, 0x60e6, 0x3ab0, 0x67c1, 0xfb2d, 0x6771, 0x1, 0x1);
        gbc.writeMem(0xadb9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x60e6);
        EXPECT(gbc.pc(), 0xadba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb9), 0x54);
        // 54 0280
        gbc.setState(0x7fea, 0x6e7, 0x25b0, 0xd76a, 0xa5e4, 0x8990, 0x1, 0x1);
        gbc.writeMem(0x7fea, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6e7);
        EXPECT(gbc.pc(), 0x7feb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0281
        gbc.setState(0x28ff, 0x8bbc, 0xe0c0, 0x83f1, 0xb8f8, 0xfe27, 0x0, 0x1);
        gbc.writeMem(0x28ff, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8bbc);
        EXPECT(gbc.pc(), 0x2900);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0282
        gbc.setState(0xc1ab, 0xb9e9, 0xc310, 0x86a8, 0xcb4a, 0xc1b0, 0x0, 0x0);
        gbc.writeMem(0xc1ab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb9e9);
        EXPECT(gbc.pc(), 0xc1ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ab), 0x54);
        // 54 0283
        gbc.setState(0x3d8f, 0x841b, 0x1240, 0xb350, 0x9970, 0xe567, 0x1, 0x0);
        gbc.writeMem(0x3d8f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x841b);
        EXPECT(gbc.pc(), 0x3d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0285
        gbc.setState(0xae01, 0xee1, 0xcfa0, 0x4fb2, 0x9537, 0xf2f7, 0x1, 0x1);
        gbc.writeMem(0xae01, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xee1);
        EXPECT(gbc.pc(), 0xae02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae01), 0x54);
        // 54 0286
        gbc.setState(0x3b72, 0xff46, 0x7ea0, 0xca01, 0xd6f2, 0xa285, 0x1, 0x0);
        gbc.writeMem(0x3b72, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xff46);
        EXPECT(gbc.pc(), 0x3b73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0287
        gbc.setState(0x40d6, 0xd3c6, 0x6970, 0xeb5, 0x96ae, 0xfb0d, 0x1, 0x1);
        gbc.writeMem(0x40d6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd3c6);
        EXPECT(gbc.pc(), 0x40d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0289
        gbc.setState(0x7c54, 0xfc69, 0xb6f0, 0x9654, 0x29f6, 0x6b3e, 0x1, 0x0);
        gbc.writeMem(0x7c54, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfc69);
        EXPECT(gbc.pc(), 0x7c55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 028A
        gbc.setState(0x222b, 0x847c, 0xdec0, 0x5f19, 0xf1c, 0x87d, 0x0, 0x1);
        gbc.writeMem(0x222b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x847c);
        EXPECT(gbc.pc(), 0x222c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 028B
        gbc.setState(0x6038, 0x9274, 0xb6a0, 0x2dcf, 0x5b87, 0x9876, 0x1, 0x0);
        gbc.writeMem(0x6038, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9274);
        EXPECT(gbc.pc(), 0x6039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 028C
        gbc.setState(0xb49a, 0xb7f4, 0x1610, 0x59eb, 0xacd3, 0x9d30, 0x1, 0x1);
        gbc.writeMem(0xb49a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb7f4);
        EXPECT(gbc.pc(), 0xb49b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb49a), 0x54);
        // 54 028D
        gbc.setState(0xba90, 0x3c44, 0xb700, 0xd51d, 0xfa3f, 0x2f63, 0x1, 0x1);
        gbc.writeMem(0xba90, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x3c44);
        EXPECT(gbc.pc(), 0xba91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba90), 0x54);
        // 54 028E
        gbc.setState(0x7a6c, 0xd032, 0xd370, 0x1ef, 0xd929, 0x4e3e, 0x1, 0x1);
        gbc.writeMem(0x7a6c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd032);
        EXPECT(gbc.pc(), 0x7a6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 028F
        gbc.setState(0xab3, 0xcbc3, 0xe820, 0x1da5, 0x66ea, 0xfdc9, 0x1, 0x1);
        gbc.writeMem(0xab3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcbc3);
        EXPECT(gbc.pc(), 0xab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0290
        gbc.setState(0x1926, 0x22c7, 0xd990, 0xe315, 0x7305, 0x7fad, 0x0, 0x0);
        gbc.writeMem(0x1926, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x22c7);
        EXPECT(gbc.pc(), 0x1927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0291
        gbc.setState(0x4999, 0x48fa, 0x45f0, 0xfcac, 0x231c, 0xe6c6, 0x1, 0x1);
        gbc.writeMem(0x4999, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x48fa);
        EXPECT(gbc.pc(), 0x499a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0292
        gbc.setState(0x3f21, 0x99aa, 0x3de0, 0x8d6e, 0x3670, 0x3c35, 0x0, 0x1);
        gbc.writeMem(0x3f21, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x99aa);
        EXPECT(gbc.pc(), 0x3f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0293
        gbc.setState(0x51d, 0x3110, 0xedd0, 0xcf0d, 0x3514, 0xeccd, 0x1, 0x0);
        gbc.writeMem(0x51d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3110);
        EXPECT(gbc.pc(), 0x51e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0295
        gbc.setState(0xede, 0x77ce, 0x9180, 0x7dfd, 0x250c, 0xc9c8, 0x1, 0x1);
        gbc.writeMem(0xede, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x77ce);
        EXPECT(gbc.pc(), 0xedf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0296
        gbc.setState(0xd75, 0x580c, 0xfc20, 0xd7b9, 0xb58d, 0x871d, 0x0, 0x1);
        gbc.writeMem(0xd75, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x580c);
        EXPECT(gbc.pc(), 0xd76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0297
        gbc.setState(0xe8e4, 0x1751, 0xdfb0, 0xd68d, 0xfbed, 0xc0c6, 0x0, 0x0);
        gbc.writeMem(0xe8e4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1751);
        EXPECT(gbc.pc(), 0xe8e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8e4), 0x54);
        // 54 0298
        gbc.setState(0x282e, 0xbc79, 0xce70, 0x8ab0, 0xf814, 0xc7d, 0x1, 0x0);
        gbc.writeMem(0x282e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xbc79);
        EXPECT(gbc.pc(), 0x282f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0299
        gbc.setState(0x64bb, 0x8d3f, 0xe660, 0xb310, 0x48c7, 0xb715, 0x0, 0x0);
        gbc.writeMem(0x64bb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8d3f);
        EXPECT(gbc.pc(), 0x64bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 029A
        gbc.setState(0xaa6a, 0xbf58, 0x2ce0, 0x5a70, 0x48a8, 0xf59c, 0x0, 0x1);
        gbc.writeMem(0xaa6a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xbf58);
        EXPECT(gbc.pc(), 0xaa6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa6a), 0x54);
        // 54 029B
        gbc.setState(0x3b61, 0xa7f3, 0x8f10, 0x5c13, 0x28df, 0x497e, 0x1, 0x1);
        gbc.writeMem(0x3b61, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa7f3);
        EXPECT(gbc.pc(), 0x3b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 029C
        gbc.setState(0xd6b3, 0xdb0c, 0x53a0, 0x4c3d, 0x83fb, 0x5118, 0x1, 0x0);
        gbc.writeMem(0xd6b3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdb0c);
        EXPECT(gbc.pc(), 0xd6b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b3), 0x54);
        // 54 029D
        gbc.setState(0x29b6, 0xb32b, 0x20e0, 0xeac4, 0x407f, 0xdb7b, 0x0, 0x0);
        gbc.writeMem(0x29b6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb32b);
        EXPECT(gbc.pc(), 0x29b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 029E
        gbc.setState(0x14d6, 0x95d9, 0xc4b0, 0x2d9c, 0xb49a, 0xeec6, 0x1, 0x0);
        gbc.writeMem(0x14d6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x95d9);
        EXPECT(gbc.pc(), 0x14d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 029F
        gbc.setState(0x94e9, 0x87e6, 0x2300, 0x185d, 0x850, 0x1a81, 0x0, 0x1);
        gbc.writeMem(0x94e9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x87e6);
        EXPECT(gbc.pc(), 0x94ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e9), 0x54);
        // 54 02A0
        gbc.setState(0xdcbb, 0xd493, 0x1e40, 0x5457, 0xe95d, 0x177b, 0x0, 0x0);
        gbc.writeMem(0xdcbb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd493);
        EXPECT(gbc.pc(), 0xdcbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcbb), 0x54);
        // 54 02A1
        gbc.setState(0xbae8, 0x67db, 0xf7d0, 0x8c1b, 0xa2e6, 0xaea3, 0x1, 0x1);
        gbc.writeMem(0xbae8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x67db);
        EXPECT(gbc.pc(), 0xbae9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbae8), 0x54);
        // 54 02A2
        gbc.setState(0xb01f, 0xf12, 0xe180, 0x6769, 0x9883, 0x222f, 0x1, 0x1);
        gbc.writeMem(0xb01f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf12);
        EXPECT(gbc.pc(), 0xb020);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01f), 0x54);
        // 54 02A3
        gbc.setState(0x29bb, 0x9e08, 0xbc50, 0x62dc, 0x3b88, 0x27f7, 0x1, 0x0);
        gbc.writeMem(0x29bb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9e08);
        EXPECT(gbc.pc(), 0x29bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02A4
        gbc.setState(0x862f, 0xea5d, 0xb630, 0x45bd, 0xf4b2, 0xc716, 0x1, 0x0);
        gbc.writeMem(0x862f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xea5d);
        EXPECT(gbc.pc(), 0x8630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x862f), 0x54);
        // 54 02A5
        gbc.setState(0xdc16, 0x30f4, 0x7df0, 0xffc4, 0xa76b, 0x3e3f, 0x0, 0x1);
        gbc.writeMem(0xdc16, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x30f4);
        EXPECT(gbc.pc(), 0xdc17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc16), 0x54);
        // 54 02A6
        gbc.setState(0x4ab, 0xb781, 0xe40, 0x248e, 0x77b6, 0xb95a, 0x1, 0x1);
        gbc.writeMem(0x4ab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb781);
        EXPECT(gbc.pc(), 0x4ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02A7
        gbc.setState(0x8228, 0xd0aa, 0x5ce0, 0x8d2f, 0x299e, 0x47a0, 0x0, 0x1);
        gbc.writeMem(0x8228, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd0aa);
        EXPECT(gbc.pc(), 0x8229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8228), 0x54);
        // 54 02A8
        gbc.setState(0x7e39, 0xa1d2, 0x3a30, 0xe84e, 0x9a76, 0xe747, 0x1, 0x1);
        gbc.writeMem(0x7e39, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa1d2);
        EXPECT(gbc.pc(), 0x7e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02A9
        gbc.setState(0xea62, 0xd2fa, 0x7e20, 0x1095, 0x9d9, 0xd289, 0x0, 0x1);
        gbc.writeMem(0xea62, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd2fa);
        EXPECT(gbc.pc(), 0xea63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea62), 0x54);
        // 54 02AA
        gbc.setState(0xe650, 0x5b61, 0x5fc0, 0x1176, 0x340b, 0x32b8, 0x0, 0x0);
        gbc.writeMem(0xe650, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5b61);
        EXPECT(gbc.pc(), 0xe651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe650), 0x54);
        // 54 02AB
        gbc.setState(0xb96f, 0x5631, 0x67b0, 0xceb0, 0x6b59, 0x7bd0, 0x0, 0x0);
        gbc.writeMem(0xb96f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5631);
        EXPECT(gbc.pc(), 0xb970);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb96f), 0x54);
        // 54 02AC
        gbc.setState(0xbf25, 0x30cf, 0x5eb0, 0x4b12, 0xea3d, 0xf1f8, 0x0, 0x0);
        gbc.writeMem(0xbf25, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x30cf);
        EXPECT(gbc.pc(), 0xbf26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf25), 0x54);
        // 54 02AD
        gbc.setState(0xc49b, 0x8457, 0xc280, 0x20d8, 0xc1cc, 0x7ce9, 0x1, 0x1);
        gbc.writeMem(0xc49b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8457);
        EXPECT(gbc.pc(), 0xc49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc49b), 0x54);
        // 54 02AE
        gbc.setState(0xdb6a, 0x990, 0x70, 0x1603, 0xcc68, 0xc693, 0x1, 0x0);
        gbc.writeMem(0xdb6a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x990);
        EXPECT(gbc.pc(), 0xdb6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb6a), 0x54);
        // 54 02AF
        gbc.setState(0x3ab4, 0xfe3d, 0xc920, 0x67a0, 0x428c, 0xba53, 0x1, 0x0);
        gbc.writeMem(0x3ab4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfe3d);
        EXPECT(gbc.pc(), 0x3ab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02B0
        gbc.setState(0x4879, 0x8bd0, 0x5bc0, 0xc539, 0x586b, 0xae15, 0x0, 0x0);
        gbc.writeMem(0x4879, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8bd0);
        EXPECT(gbc.pc(), 0x487a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02B1
        gbc.setState(0xae35, 0x8cb, 0x26c0, 0xd83c, 0xe099, 0x33b7, 0x0, 0x1);
        gbc.writeMem(0xae35, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8cb);
        EXPECT(gbc.pc(), 0xae36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae35), 0x54);
        // 54 02B2
        gbc.setState(0x532a, 0x4f6a, 0x8ec0, 0x68cd, 0x3701, 0x4b13, 0x0, 0x0);
        gbc.writeMem(0x532a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4f6a);
        EXPECT(gbc.pc(), 0x532b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02B3
        gbc.setState(0x3548, 0x7b7, 0xbe90, 0xe61b, 0x273c, 0x1059, 0x0, 0x1);
        gbc.writeMem(0x3548, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7b7);
        EXPECT(gbc.pc(), 0x3549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02B4
        gbc.setState(0x523b, 0x3d82, 0x6c40, 0xe7, 0xfdfd, 0xcd2c, 0x0, 0x1);
        gbc.writeMem(0x523b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3d82);
        EXPECT(gbc.pc(), 0x523c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02B5
        gbc.setState(0x40b0, 0xbf08, 0x9cd0, 0xcb9e, 0xef72, 0x4f90, 0x0, 0x1);
        gbc.writeMem(0x40b0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xbf08);
        EXPECT(gbc.pc(), 0x40b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02B6
        gbc.setState(0xe47f, 0x7652, 0x7bc0, 0x84ad, 0xebe8, 0x9efe, 0x0, 0x1);
        gbc.writeMem(0xe47f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7652);
        EXPECT(gbc.pc(), 0xe480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47f), 0x54);
        // 54 02B7
        gbc.setState(0x1b1b, 0x487e, 0x3f90, 0xcd21, 0xa253, 0x975a, 0x1, 0x1);
        gbc.writeMem(0x1b1b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x487e);
        EXPECT(gbc.pc(), 0x1b1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02B8
        gbc.setState(0x7b7a, 0x9d3c, 0xa640, 0xb491, 0xcf56, 0x5485, 0x0, 0x0);
        gbc.writeMem(0x7b7a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9d3c);
        EXPECT(gbc.pc(), 0x7b7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02B9
        gbc.setState(0x78fe, 0x4f5, 0x7fa0, 0x5bf, 0x28cc, 0xe64, 0x1, 0x1);
        gbc.writeMem(0x78fe, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4f5);
        EXPECT(gbc.pc(), 0x78ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02BA
        gbc.setState(0xde82, 0x8959, 0xf420, 0xbc1d, 0xa088, 0x1de7, 0x0, 0x1);
        gbc.writeMem(0xde82, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8959);
        EXPECT(gbc.pc(), 0xde83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde82), 0x54);
        // 54 02BB
        gbc.setState(0xad26, 0xfeda, 0x3db0, 0x503b, 0xd246, 0x233d, 0x1, 0x0);
        gbc.writeMem(0xad26, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfeda);
        EXPECT(gbc.pc(), 0xad27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad26), 0x54);
        // 54 02BC
        gbc.setState(0xd08e, 0x5e8f, 0xda40, 0x3373, 0x5ab3, 0x3a63, 0x1, 0x0);
        gbc.writeMem(0xd08e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5e8f);
        EXPECT(gbc.pc(), 0xd08f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd08e), 0x54);
        // 54 02BD
        gbc.setState(0xaa7d, 0x8ba8, 0x35c0, 0x1c46, 0xc8f4, 0xc6f8, 0x1, 0x0);
        gbc.writeMem(0xaa7d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8ba8);
        EXPECT(gbc.pc(), 0xaa7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa7d), 0x54);
        // 54 02BE
        gbc.setState(0xd585, 0x3ad9, 0x6ae0, 0x88cd, 0xe9de, 0x2848, 0x1, 0x0);
        gbc.writeMem(0xd585, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3ad9);
        EXPECT(gbc.pc(), 0xd586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd585), 0x54);
        // 54 02BF
        gbc.setState(0x9257, 0x7347, 0xc210, 0xb031, 0xf93, 0x2705, 0x0, 0x1);
        gbc.writeMem(0x9257, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7347);
        EXPECT(gbc.pc(), 0x9258);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9257), 0x54);
        // 54 02C0
        gbc.setState(0xa51e, 0x7937, 0x4d80, 0xc1f2, 0x35cd, 0x3c3a, 0x0, 0x0);
        gbc.writeMem(0xa51e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x7937);
        EXPECT(gbc.pc(), 0xa51f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa51e), 0x54);
        // 54 02C1
        gbc.setState(0xc663, 0x3549, 0x1410, 0xc071, 0x5da0, 0xa9c8, 0x0, 0x0);
        gbc.writeMem(0xc663, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3549);
        EXPECT(gbc.pc(), 0xc664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc663), 0x54);
        // 54 02C2
        gbc.setState(0xe0ca, 0xcc88, 0xc820, 0xc270, 0xdae1, 0x38f1, 0x0, 0x1);
        gbc.writeMem(0xe0ca, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcc88);
        EXPECT(gbc.pc(), 0xe0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ca), 0x54);
        // 54 02C3
        gbc.setState(0x1992, 0x28c2, 0x1930, 0x7232, 0x3378, 0xe968, 0x1, 0x0);
        gbc.writeMem(0x1992, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x28c2);
        EXPECT(gbc.pc(), 0x1993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02C4
        gbc.setState(0x51a4, 0x41e2, 0xafd0, 0xa846, 0xb881, 0xdeeb, 0x0, 0x1);
        gbc.writeMem(0x51a4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x41e2);
        EXPECT(gbc.pc(), 0x51a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02C5
        gbc.setState(0x5557, 0x9bb0, 0x4a80, 0xd6e4, 0x9918, 0x736d, 0x0, 0x0);
        gbc.writeMem(0x5557, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9bb0);
        EXPECT(gbc.pc(), 0x5558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02C6
        gbc.setState(0x6b0b, 0xdf7d, 0x4050, 0xe803, 0x42b, 0xe393, 0x0, 0x0);
        gbc.writeMem(0x6b0b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdf7d);
        EXPECT(gbc.pc(), 0x6b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02C7
        gbc.setState(0x3e6, 0x472e, 0x6f90, 0x2a21, 0xba95, 0x1c15, 0x1, 0x1);
        gbc.writeMem(0x3e6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x472e);
        EXPECT(gbc.pc(), 0x3e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02C8
        gbc.setState(0x36a, 0x12d7, 0x51a0, 0xe3e9, 0x8b23, 0x4cde, 0x0, 0x1);
        gbc.writeMem(0x36a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x12d7);
        EXPECT(gbc.pc(), 0x36b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02C9
        gbc.setState(0x7ca3, 0xe3c8, 0x7a0, 0x1f5, 0xf1df, 0x6d94, 0x0, 0x1);
        gbc.writeMem(0x7ca3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe3c8);
        EXPECT(gbc.pc(), 0x7ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02CA
        gbc.setState(0x1254, 0x84da, 0x76d0, 0x63ab, 0x823c, 0xfb51, 0x0, 0x1);
        gbc.writeMem(0x1254, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x84da);
        EXPECT(gbc.pc(), 0x1255);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02CB
        gbc.setState(0x9c4c, 0xd00d, 0xff00, 0x5570, 0x23e1, 0x321b, 0x1, 0x0);
        gbc.writeMem(0x9c4c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd00d);
        EXPECT(gbc.pc(), 0x9c4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c4c), 0x54);
        // 54 02CC
        gbc.setState(0x5b85, 0xaab7, 0x68d0, 0xc60b, 0x723d, 0xe0a7, 0x0, 0x0);
        gbc.writeMem(0x5b85, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xaab7);
        EXPECT(gbc.pc(), 0x5b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02CE
        gbc.setState(0x85a6, 0x7b6e, 0xc270, 0xdb45, 0x2df9, 0x6ea6, 0x1, 0x0);
        gbc.writeMem(0x85a6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7b6e);
        EXPECT(gbc.pc(), 0x85a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a6), 0x54);
        // 54 02CF
        gbc.setState(0x821f, 0x3e58, 0x1f90, 0xd711, 0xf0b, 0xf530, 0x0, 0x1);
        gbc.writeMem(0x821f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3e58);
        EXPECT(gbc.pc(), 0x8220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x821f), 0x54);
        // 54 02D0
        gbc.setState(0xc64, 0xb0f, 0xace0, 0xeb3d, 0x1f2c, 0x4787, 0x1, 0x0);
        gbc.writeMem(0xc64, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb0f);
        EXPECT(gbc.pc(), 0xc65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02D1
        gbc.setState(0x81c8, 0x2a8f, 0xcdc0, 0xc5af, 0xda1d, 0xedcf, 0x1, 0x1);
        gbc.writeMem(0x81c8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2a8f);
        EXPECT(gbc.pc(), 0x81c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c8), 0x54);
        // 54 02D2
        gbc.setState(0xa877, 0x6d97, 0xe720, 0x1e47, 0x4385, 0x1b4, 0x0, 0x1);
        gbc.writeMem(0xa877, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6d97);
        EXPECT(gbc.pc(), 0xa878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa877), 0x54);
        // 54 02D3
        gbc.setState(0xdb9, 0x7a86, 0xe8c0, 0x937e, 0xa4c9, 0x8b67, 0x1, 0x0);
        gbc.writeMem(0xdb9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7a86);
        EXPECT(gbc.pc(), 0xdba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02D4
        gbc.setState(0xd889, 0xd64a, 0x57f0, 0x7af8, 0xeba7, 0x47de, 0x1, 0x0);
        gbc.writeMem(0xd889, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd64a);
        EXPECT(gbc.pc(), 0xd88a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd889), 0x54);
        // 54 02D5
        gbc.setState(0x8b0e, 0xe857, 0x6140, 0x25f5, 0xef33, 0xc8bd, 0x0, 0x0);
        gbc.writeMem(0x8b0e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe857);
        EXPECT(gbc.pc(), 0x8b0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b0e), 0x54);
        // 54 02D6
        gbc.setState(0x9c08, 0x39db, 0xbce0, 0xef67, 0x32e, 0xf2c1, 0x1, 0x0);
        gbc.writeMem(0x9c08, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x39db);
        EXPECT(gbc.pc(), 0x9c09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c08), 0x54);
        // 54 02D7
        gbc.setState(0x2900, 0x5909, 0xc880, 0xc57a, 0x778, 0x229, 0x0, 0x1);
        gbc.writeMem(0x2900, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5909);
        EXPECT(gbc.pc(), 0x2901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02D8
        gbc.setState(0x3796, 0x277f, 0x3080, 0x4b2c, 0xb262, 0x829b, 0x1, 0x1);
        gbc.writeMem(0x3796, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x277f);
        EXPECT(gbc.pc(), 0x3797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02D9
        gbc.setState(0xa33d, 0xf3e4, 0x1ea0, 0xcc4e, 0x8ac4, 0xcc4, 0x0, 0x0);
        gbc.writeMem(0xa33d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf3e4);
        EXPECT(gbc.pc(), 0xa33e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa33d), 0x54);
        // 54 02DA
        gbc.setState(0x4f34, 0x6ae, 0x6170, 0x4e7e, 0xbf01, 0x87a6, 0x0, 0x1);
        gbc.writeMem(0x4f34, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6ae);
        EXPECT(gbc.pc(), 0x4f35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02DB
        gbc.setState(0x6298, 0x7f7b, 0xa350, 0x8d07, 0x25ca, 0xb343, 0x0, 0x1);
        gbc.writeMem(0x6298, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7f7b);
        EXPECT(gbc.pc(), 0x6299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02DC
        gbc.setState(0x3aba, 0x6463, 0xeb50, 0x5a55, 0x89fa, 0x38db, 0x1, 0x1);
        gbc.writeMem(0x3aba, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6463);
        EXPECT(gbc.pc(), 0x3abb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02DD
        gbc.setState(0x6c8a, 0x8016, 0x4950, 0xde6e, 0x289, 0x6d42, 0x0, 0x0);
        gbc.writeMem(0x6c8a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8016);
        EXPECT(gbc.pc(), 0x6c8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02DE
        gbc.setState(0x895f, 0x1471, 0xdf0, 0xc1c5, 0xdf73, 0xd8cc, 0x0, 0x1);
        gbc.writeMem(0x895f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1471);
        EXPECT(gbc.pc(), 0x8960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895f), 0x54);
        // 54 02DF
        gbc.setState(0xf1c, 0x756d, 0x3490, 0x4cba, 0x2141, 0x68a2, 0x0, 0x0);
        gbc.writeMem(0xf1c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x756d);
        EXPECT(gbc.pc(), 0xf1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02E0
        gbc.setState(0x5b39, 0x81cf, 0x6ca0, 0xe87c, 0xe915, 0x6372, 0x1, 0x0);
        gbc.writeMem(0x5b39, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x81cf);
        EXPECT(gbc.pc(), 0x5b3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02E2
        gbc.setState(0xdb97, 0x89f9, 0x4170, 0xa500, 0xef28, 0x5cf3, 0x0, 0x0);
        gbc.writeMem(0xdb97, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x89f9);
        EXPECT(gbc.pc(), 0xdb98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb97), 0x54);
        // 54 02E3
        gbc.setState(0x16e, 0x43bd, 0x7c90, 0x850a, 0x47ae, 0xf02f, 0x0, 0x1);
        gbc.writeMem(0x16e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x43bd);
        EXPECT(gbc.pc(), 0x16f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02E4
        gbc.setState(0x94bb, 0xfc79, 0x27d0, 0x2c2c, 0xe19e, 0xea9e, 0x1, 0x0);
        gbc.writeMem(0x94bb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xfc79);
        EXPECT(gbc.pc(), 0x94bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94bb), 0x54);
        // 54 02E5
        gbc.setState(0xa604, 0xca5b, 0x9700, 0x226d, 0xc556, 0xf315, 0x1, 0x0);
        gbc.writeMem(0xa604, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xca5b);
        EXPECT(gbc.pc(), 0xa605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa604), 0x54);
        // 54 02E6
        gbc.setState(0x1412, 0x9782, 0x3eb0, 0x5b94, 0x91c2, 0xbd74, 0x0, 0x1);
        gbc.writeMem(0x1412, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9782);
        EXPECT(gbc.pc(), 0x1413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02E7
        gbc.setState(0x8971, 0x34f2, 0xe5c0, 0x3ef, 0xefbf, 0x6213, 0x1, 0x1);
        gbc.writeMem(0x8971, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x34f2);
        EXPECT(gbc.pc(), 0x8972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8971), 0x54);
        // 54 02E8
        gbc.setState(0x2452, 0x3f28, 0x3660, 0x97c8, 0xba29, 0x5cf4, 0x1, 0x1);
        gbc.writeMem(0x2452, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3f28);
        EXPECT(gbc.pc(), 0x2453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02E9
        gbc.setState(0x902c, 0xf8ab, 0xcc00, 0xb93b, 0xaefa, 0xd80b, 0x0, 0x0);
        gbc.writeMem(0x902c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf8ab);
        EXPECT(gbc.pc(), 0x902d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902c), 0x54);
        // 54 02EC
        gbc.setState(0x5a60, 0x9113, 0x1710, 0x30c6, 0xaea0, 0xceee, 0x0, 0x0);
        gbc.writeMem(0x5a60, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9113);
        EXPECT(gbc.pc(), 0x5a61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02ED
        gbc.setState(0x4e1f, 0x1222, 0x5580, 0x124e, 0xa42e, 0x1b98, 0x1, 0x1);
        gbc.writeMem(0x4e1f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1222);
        EXPECT(gbc.pc(), 0x4e20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02EE
        gbc.setState(0xca8a, 0xbdbf, 0x10b0, 0xe6d0, 0x43dc, 0x3feb, 0x0, 0x0);
        gbc.writeMem(0xca8a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbdbf);
        EXPECT(gbc.pc(), 0xca8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca8a), 0x54);
        // 54 02EF
        gbc.setState(0x3932, 0x1771, 0xfae0, 0x9922, 0x4c51, 0x231, 0x1, 0x0);
        gbc.writeMem(0x3932, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1771);
        EXPECT(gbc.pc(), 0x3933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 02F0
        gbc.setState(0xe768, 0xc09d, 0x6f40, 0x3ab4, 0xe8ed, 0x8a53, 0x0, 0x1);
        gbc.writeMem(0xe768, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc09d);
        EXPECT(gbc.pc(), 0xe769);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe768), 0x54);
        // 54 02F1
        gbc.setState(0x2b73, 0x6c25, 0xd080, 0xbadd, 0x2570, 0x8130, 0x1, 0x0);
        gbc.writeMem(0x2b73, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6c25);
        EXPECT(gbc.pc(), 0x2b74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02F2
        gbc.setState(0x1998, 0x3bfa, 0xbf70, 0x1a69, 0xa776, 0x764e, 0x0, 0x1);
        gbc.writeMem(0x1998, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3bfa);
        EXPECT(gbc.pc(), 0x1999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02F3
        gbc.setState(0x937a, 0xb021, 0xefd0, 0x6272, 0x7943, 0xb6fd, 0x1, 0x1);
        gbc.writeMem(0x937a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb021);
        EXPECT(gbc.pc(), 0x937b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x937a), 0x54);
        // 54 02F4
        gbc.setState(0x36f0, 0xd781, 0xb900, 0x64, 0xf83, 0x3523, 0x1, 0x1);
        gbc.writeMem(0x36f0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd781);
        EXPECT(gbc.pc(), 0x36f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02F5
        gbc.setState(0x760d, 0xe1d2, 0xce30, 0xb4ef, 0xe277, 0xdc9c, 0x1, 0x0);
        gbc.writeMem(0x760d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe1d2);
        EXPECT(gbc.pc(), 0x760e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02F6
        gbc.setState(0x7f6f, 0x5358, 0x1100, 0xe82, 0xbe04, 0x8843, 0x1, 0x0);
        gbc.writeMem(0x7f6f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5358);
        EXPECT(gbc.pc(), 0x7f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02F7
        gbc.setState(0xa9a4, 0x5106, 0x5230, 0x76f0, 0x2c1d, 0x1322, 0x1, 0x1);
        gbc.writeMem(0xa9a4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5106);
        EXPECT(gbc.pc(), 0xa9a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a4), 0x54);
        // 54 02F8
        gbc.setState(0x32b7, 0xe053, 0x7cc0, 0x4081, 0x2f7f, 0x4916, 0x0, 0x1);
        gbc.writeMem(0x32b7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe053);
        EXPECT(gbc.pc(), 0x32b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 02F9
        gbc.setState(0x2ff8, 0xe926, 0xef0, 0x5637, 0x2392, 0xe86e, 0x1, 0x0);
        gbc.writeMem(0x2ff8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe926);
        EXPECT(gbc.pc(), 0x2ff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02FA
        gbc.setState(0x71b0, 0x6df3, 0xb3b0, 0x770c, 0x70b7, 0x35bf, 0x1, 0x1);
        gbc.writeMem(0x71b0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6df3);
        EXPECT(gbc.pc(), 0x71b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 02FB
        gbc.setState(0x960b, 0xaef1, 0xa80, 0xfff9, 0x4d89, 0x57fb, 0x0, 0x0);
        gbc.writeMem(0x960b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xaef1);
        EXPECT(gbc.pc(), 0x960c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x960b), 0x54);
        // 54 02FC
        gbc.setState(0xb55c, 0x5cd, 0x73c0, 0x230a, 0x5423, 0x50f0, 0x0, 0x0);
        gbc.writeMem(0xb55c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5cd);
        EXPECT(gbc.pc(), 0xb55d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb55c), 0x54);
        // 54 02FD
        gbc.setState(0x5715, 0x2964, 0x8bd0, 0x7dc1, 0x9c1f, 0xfb6d, 0x1, 0x0);
        gbc.writeMem(0x5715, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2964);
        EXPECT(gbc.pc(), 0x5716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 02FE
        gbc.setState(0x99eb, 0xac8, 0x99a0, 0xb992, 0x9c22, 0xa8d2, 0x0, 0x0);
        gbc.writeMem(0x99eb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xac8);
        EXPECT(gbc.pc(), 0x99ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99eb), 0x54);
        // 54 02FF
        gbc.setState(0xcaa4, 0x6366, 0xe3f0, 0xb9bc, 0x9fef, 0x2b3d, 0x0, 0x1);
        gbc.writeMem(0xcaa4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6366);
        EXPECT(gbc.pc(), 0xcaa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaa4), 0x54);
        // 54 0301
        gbc.setState(0xa4bd, 0xe14, 0xd00, 0x5aab, 0xfa7c, 0xc7b5, 0x1, 0x1);
        gbc.writeMem(0xa4bd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe14);
        EXPECT(gbc.pc(), 0xa4be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4bd), 0x54);
        // 54 0302
        gbc.setState(0x9c09, 0xbecd, 0xe70, 0xc202, 0x770b, 0x3c20, 0x1, 0x1);
        gbc.writeMem(0x9c09, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbecd);
        EXPECT(gbc.pc(), 0x9c0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c09), 0x54);
        // 54 0303
        gbc.setState(0x4e4e, 0xa7b3, 0xdac0, 0x8183, 0x37e5, 0x4695, 0x1, 0x0);
        gbc.writeMem(0x4e4e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa7b3);
        EXPECT(gbc.pc(), 0x4e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0304
        gbc.setState(0x5e64, 0x979e, 0x7ff0, 0xf38a, 0xbb7c, 0x21db, 0x0, 0x1);
        gbc.writeMem(0x5e64, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x979e);
        EXPECT(gbc.pc(), 0x5e65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0305
        gbc.setState(0xda83, 0x82a0, 0xa380, 0xbfdc, 0x5709, 0xa699, 0x1, 0x1);
        gbc.writeMem(0xda83, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x82a0);
        EXPECT(gbc.pc(), 0xda84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda83), 0x54);
        // 54 0306
        gbc.setState(0xb23e, 0x712f, 0x1e90, 0x999e, 0xfa07, 0xd39b, 0x1, 0x0);
        gbc.writeMem(0xb23e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x712f);
        EXPECT(gbc.pc(), 0xb23f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb23e), 0x54);
        // 54 0308
        gbc.setState(0x9e19, 0x5216, 0x1640, 0x3780, 0x36ff, 0xf1ce, 0x0, 0x0);
        gbc.writeMem(0x9e19, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5216);
        EXPECT(gbc.pc(), 0x9e1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e19), 0x54);
        // 54 0309
        gbc.setState(0xb407, 0xc2d, 0x62f0, 0xdad5, 0x25ee, 0xf1c6, 0x0, 0x1);
        gbc.writeMem(0xb407, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc2d);
        EXPECT(gbc.pc(), 0xb408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb407), 0x54);
        // 54 030A
        gbc.setState(0xb944, 0x454, 0x7cb0, 0x292b, 0xa86d, 0xd86e, 0x0, 0x0);
        gbc.writeMem(0xb944, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x454);
        EXPECT(gbc.pc(), 0xb945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb944), 0x54);
        // 54 030B
        gbc.setState(0xe43e, 0xc422, 0x56b0, 0x89f0, 0xea2c, 0xeba7, 0x1, 0x0);
        gbc.writeMem(0xe43e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc422);
        EXPECT(gbc.pc(), 0xe43f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe43e), 0x54);
        // 54 030C
        gbc.setState(0x7f6f, 0xf1f9, 0x3b20, 0x3a44, 0xdfd5, 0xec31, 0x1, 0x1);
        gbc.writeMem(0x7f6f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf1f9);
        EXPECT(gbc.pc(), 0x7f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 030D
        gbc.setState(0x9072, 0x46c, 0x9f70, 0xcdf1, 0x4a93, 0x81ac, 0x0, 0x0);
        gbc.writeMem(0x9072, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x46c);
        EXPECT(gbc.pc(), 0x9073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9072), 0x54);
        // 54 030E
        gbc.setState(0x8f5c, 0x3348, 0x4300, 0x8ac1, 0xf2e3, 0x7068, 0x1, 0x0);
        gbc.writeMem(0x8f5c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3348);
        EXPECT(gbc.pc(), 0x8f5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f5c), 0x54);
        // 54 030F
        gbc.setState(0xbf2e, 0x41ed, 0xfbb0, 0x730f, 0x9129, 0xe233, 0x0, 0x1);
        gbc.writeMem(0xbf2e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x41ed);
        EXPECT(gbc.pc(), 0xbf2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf2e), 0x54);
        // 54 0310
        gbc.setState(0x7eab, 0x8188, 0xf5d0, 0x6991, 0x9326, 0xfb17, 0x1, 0x1);
        gbc.writeMem(0x7eab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8188);
        EXPECT(gbc.pc(), 0x7eac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0311
        gbc.setState(0xb61b, 0x56b1, 0x1b60, 0x1fc5, 0xa6f0, 0x909a, 0x1, 0x1);
        gbc.writeMem(0xb61b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x56b1);
        EXPECT(gbc.pc(), 0xb61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb61b), 0x54);
        // 54 0313
        gbc.setState(0x795e, 0xe799, 0xb890, 0xa579, 0x155, 0x4190, 0x0, 0x0);
        gbc.writeMem(0x795e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe799);
        EXPECT(gbc.pc(), 0x795f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0314
        gbc.setState(0x9bbb, 0xe88e, 0x8d0, 0x3cd5, 0xf685, 0xf5c0, 0x0, 0x0);
        gbc.writeMem(0x9bbb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe88e);
        EXPECT(gbc.pc(), 0x9bbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bbb), 0x54);
        // 54 0315
        gbc.setState(0x40a2, 0x7462, 0x690, 0x2d0b, 0xe132, 0xfc34, 0x1, 0x0);
        gbc.writeMem(0x40a2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7462);
        EXPECT(gbc.pc(), 0x40a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0316
        gbc.setState(0x1a60, 0x9889, 0x8d50, 0x66c4, 0x4ccf, 0xa9d3, 0x1, 0x1);
        gbc.writeMem(0x1a60, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9889);
        EXPECT(gbc.pc(), 0x1a61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0317
        gbc.setState(0xcfef, 0x14ee, 0x2a0, 0xe273, 0x5d9f, 0x2699, 0x1, 0x1);
        gbc.writeMem(0xcfef, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x14ee);
        EXPECT(gbc.pc(), 0xcff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfef), 0x54);
        // 54 0318
        gbc.setState(0x9754, 0x5577, 0xf210, 0xfa2, 0xd6f3, 0x1f79, 0x1, 0x0);
        gbc.writeMem(0x9754, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5577);
        EXPECT(gbc.pc(), 0x9755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9754), 0x54);
        // 54 0319
        gbc.setState(0xd47a, 0xd357, 0xff40, 0x2d3e, 0xf995, 0x84f6, 0x1, 0x1);
        gbc.writeMem(0xd47a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd357);
        EXPECT(gbc.pc(), 0xd47b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd47a), 0x54);
        // 54 031A
        gbc.setState(0x1c88, 0x6c52, 0xb030, 0xcae2, 0xf1fc, 0xf3fa, 0x1, 0x0);
        gbc.writeMem(0x1c88, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6c52);
        EXPECT(gbc.pc(), 0x1c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 031B
        gbc.setState(0x2b55, 0x7d48, 0x3e30, 0x5a32, 0x7a7a, 0xa9f, 0x0, 0x1);
        gbc.writeMem(0x2b55, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7d48);
        EXPECT(gbc.pc(), 0x2b56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 031C
        gbc.setState(0x293b, 0xa7c4, 0x6490, 0xc4ec, 0xc30, 0xb194, 0x0, 0x1);
        gbc.writeMem(0x293b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa7c4);
        EXPECT(gbc.pc(), 0x293c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 031D
        gbc.setState(0xacda, 0x2f52, 0x9e90, 0xe60e, 0xccf5, 0xbc6c, 0x0, 0x1);
        gbc.writeMem(0xacda, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2f52);
        EXPECT(gbc.pc(), 0xacdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacda), 0x54);
        // 54 031E
        gbc.setState(0x87ea, 0xca70, 0x1ee0, 0x5c80, 0x7a88, 0xc597, 0x1, 0x1);
        gbc.writeMem(0x87ea, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xca70);
        EXPECT(gbc.pc(), 0x87eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ea), 0x54);
        // 54 031F
        gbc.setState(0x4d34, 0xbe9, 0xfab0, 0x81c2, 0x8243, 0xfe10, 0x0, 0x0);
        gbc.writeMem(0x4d34, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbe9);
        EXPECT(gbc.pc(), 0x4d35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0320
        gbc.setState(0xc7f6, 0x7326, 0xfbc0, 0xd1c8, 0xa963, 0xe87e, 0x0, 0x0);
        gbc.writeMem(0xc7f6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7326);
        EXPECT(gbc.pc(), 0xc7f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f6), 0x54);
        // 54 0321
        gbc.setState(0xa9aa, 0x94bd, 0xc00, 0x75b6, 0xa9b2, 0x3c0a, 0x1, 0x0);
        gbc.writeMem(0xa9aa, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x94bd);
        EXPECT(gbc.pc(), 0xa9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9aa), 0x54);
        // 54 0322
        gbc.setState(0xb8ab, 0x45e4, 0x4b80, 0x33e5, 0x79da, 0x37a5, 0x1, 0x1);
        gbc.writeMem(0xb8ab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x45e4);
        EXPECT(gbc.pc(), 0xb8ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ab), 0x54);
        // 54 0323
        gbc.setState(0x55d4, 0x278c, 0xb520, 0xf41, 0x5734, 0xee31, 0x1, 0x1);
        gbc.writeMem(0x55d4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x278c);
        EXPECT(gbc.pc(), 0x55d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0324
        gbc.setState(0x12f5, 0x236b, 0xe20, 0x3c79, 0xada7, 0x2385, 0x0, 0x1);
        gbc.writeMem(0x12f5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x236b);
        EXPECT(gbc.pc(), 0x12f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0325
        gbc.setState(0x981a, 0x6376, 0x2800, 0x1ab5, 0x767, 0x8dee, 0x1, 0x0);
        gbc.writeMem(0x981a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6376);
        EXPECT(gbc.pc(), 0x981b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x981a), 0x54);
        // 54 0326
        gbc.setState(0x3301, 0x12c4, 0x3810, 0xf9a2, 0x98e2, 0xcc08, 0x0, 0x1);
        gbc.writeMem(0x3301, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x12c4);
        EXPECT(gbc.pc(), 0x3302);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0327
        gbc.setState(0x1c0e, 0x1ec4, 0xc5c0, 0xcfe, 0xac14, 0x7cc2, 0x1, 0x1);
        gbc.writeMem(0x1c0e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1ec4);
        EXPECT(gbc.pc(), 0x1c0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0328
        gbc.setState(0x5b28, 0x3cd9, 0x7670, 0xecd, 0xd6c2, 0xbfa, 0x1, 0x0);
        gbc.writeMem(0x5b28, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3cd9);
        EXPECT(gbc.pc(), 0x5b29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0329
        gbc.setState(0xa119, 0x2c, 0x4780, 0xc2e9, 0x3166, 0x88d4, 0x1, 0x0);
        gbc.writeMem(0xa119, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2c);
        EXPECT(gbc.pc(), 0xa11a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa119), 0x54);
        // 54 032A
        gbc.setState(0x1d69, 0xf3f9, 0x9030, 0x642d, 0x3bc7, 0xca17, 0x0, 0x1);
        gbc.writeMem(0x1d69, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf3f9);
        EXPECT(gbc.pc(), 0x1d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 032B
        gbc.setState(0x31c5, 0x4dd3, 0xfb50, 0x9e57, 0xfdca, 0x8ad1, 0x0, 0x1);
        gbc.writeMem(0x31c5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4dd3);
        EXPECT(gbc.pc(), 0x31c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 032C
        gbc.setState(0x3e0, 0x8a16, 0x17c0, 0x52f5, 0xfecc, 0xb5b6, 0x1, 0x0);
        gbc.writeMem(0x3e0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8a16);
        EXPECT(gbc.pc(), 0x3e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 032D
        gbc.setState(0x2041, 0xab2c, 0xe0a0, 0x6563, 0xff6e, 0x7a99, 0x1, 0x1);
        gbc.writeMem(0x2041, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xab2c);
        EXPECT(gbc.pc(), 0x2042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 032E
        gbc.setState(0xa761, 0x91fb, 0xba90, 0xd1a, 0xd70f, 0x70c5, 0x1, 0x0);
        gbc.writeMem(0xa761, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x91fb);
        EXPECT(gbc.pc(), 0xa762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa761), 0x54);
        // 54 032F
        gbc.setState(0xc65e, 0x4410, 0xdfd0, 0x486f, 0xe86f, 0xa20b, 0x1, 0x1);
        gbc.writeMem(0xc65e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4410);
        EXPECT(gbc.pc(), 0xc65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65e), 0x54);
        // 54 0330
        gbc.setState(0x9789, 0xb764, 0x8100, 0x9484, 0xb714, 0xfd45, 0x0, 0x1);
        gbc.writeMem(0x9789, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xb764);
        EXPECT(gbc.pc(), 0x978a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9789), 0x54);
        // 54 0332
        gbc.setState(0xbe54, 0x18ea, 0x330, 0x534d, 0x73df, 0xfc50, 0x0, 0x1);
        gbc.writeMem(0xbe54, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x18ea);
        EXPECT(gbc.pc(), 0xbe55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe54), 0x54);
        // 54 0333
        gbc.setState(0x3cfe, 0xf1e0, 0x8af0, 0x4505, 0x8716, 0x5d6, 0x1, 0x1);
        gbc.writeMem(0x3cfe, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf1e0);
        EXPECT(gbc.pc(), 0x3cff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0334
        gbc.setState(0x23d3, 0x9883, 0x7e00, 0x23f1, 0x719f, 0x2daa, 0x0, 0x0);
        gbc.writeMem(0x23d3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9883);
        EXPECT(gbc.pc(), 0x23d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0335
        gbc.setState(0xefc4, 0x763b, 0x1c30, 0xa4a2, 0x761d, 0x150e, 0x1, 0x1);
        gbc.writeMem(0xefc4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x763b);
        EXPECT(gbc.pc(), 0xefc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc4), 0x54);
        // 54 0336
        gbc.setState(0x9263, 0x9d25, 0xa5f0, 0xf8a9, 0x791, 0x5535, 0x1, 0x0);
        gbc.writeMem(0x9263, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9d25);
        EXPECT(gbc.pc(), 0x9264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9263), 0x54);
        // 54 0337
        gbc.setState(0x4303, 0xea98, 0xdce0, 0xb611, 0x854, 0xe13e, 0x1, 0x1);
        gbc.writeMem(0x4303, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xea98);
        EXPECT(gbc.pc(), 0x4304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0338
        gbc.setState(0x775d, 0xe7dd, 0x3d40, 0xfbe2, 0x2e70, 0xc6aa, 0x1, 0x1);
        gbc.writeMem(0x775d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe7dd);
        EXPECT(gbc.pc(), 0x775e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0339
        gbc.setState(0x1363, 0xefa1, 0xea60, 0x60eb, 0x7eab, 0xb459, 0x0, 0x0);
        gbc.writeMem(0x1363, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xefa1);
        EXPECT(gbc.pc(), 0x1364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 033A
        gbc.setState(0xc7b7, 0x1145, 0x7820, 0x1c90, 0x1437, 0xd22a, 0x1, 0x1);
        gbc.writeMem(0xc7b7, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1145);
        EXPECT(gbc.pc(), 0xc7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b7), 0x54);
        // 54 033B
        gbc.setState(0xb41b, 0x9c60, 0x1790, 0xa952, 0x1189, 0x14f2, 0x1, 0x1);
        gbc.writeMem(0xb41b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9c60);
        EXPECT(gbc.pc(), 0xb41c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb41b), 0x54);
        // 54 033C
        gbc.setState(0xc096, 0xac80, 0x5930, 0x10f1, 0xdd76, 0x13fa, 0x1, 0x0);
        gbc.writeMem(0xc096, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xac80);
        EXPECT(gbc.pc(), 0xc097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc096), 0x54);
        // 54 033D
        gbc.setState(0x3d1f, 0xf8e8, 0x39c0, 0xf7f, 0xb06c, 0xf250, 0x0, 0x0);
        gbc.writeMem(0x3d1f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf8e8);
        EXPECT(gbc.pc(), 0x3d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 033E
        gbc.setState(0xcee5, 0x6827, 0x9630, 0x59b8, 0xf2f9, 0xbf8, 0x0, 0x0);
        gbc.writeMem(0xcee5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6827);
        EXPECT(gbc.pc(), 0xcee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcee5), 0x54);
        // 54 033F
        gbc.setState(0xc90e, 0x158b, 0xd330, 0xa887, 0x643a, 0x5129, 0x0, 0x0);
        gbc.writeMem(0xc90e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x158b);
        EXPECT(gbc.pc(), 0xc90f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc90e), 0x54);
        // 54 0340
        gbc.setState(0x69b5, 0xc86e, 0xf260, 0x79ae, 0xb47e, 0x80fd, 0x1, 0x1);
        gbc.writeMem(0x69b5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc86e);
        EXPECT(gbc.pc(), 0x69b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0341
        gbc.setState(0x2e4d, 0xd920, 0xe300, 0x64d4, 0x7e31, 0x9890, 0x1, 0x0);
        gbc.writeMem(0x2e4d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd920);
        EXPECT(gbc.pc(), 0x2e4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0342
        gbc.setState(0x1cf5, 0xf074, 0x4e60, 0x1129, 0x5fca, 0x2779, 0x0, 0x1);
        gbc.writeMem(0x1cf5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf074);
        EXPECT(gbc.pc(), 0x1cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0343
        gbc.setState(0xb44a, 0x96d, 0x1820, 0xc03b, 0xedb8, 0x4ea4, 0x0, 0x0);
        gbc.writeMem(0xb44a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x96d);
        EXPECT(gbc.pc(), 0xb44b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb44a), 0x54);
        // 54 0344
        gbc.setState(0x4ad3, 0x1a82, 0xb870, 0x8294, 0x93cb, 0xb143, 0x0, 0x0);
        gbc.writeMem(0x4ad3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1a82);
        EXPECT(gbc.pc(), 0x4ad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0345
        gbc.setState(0x8a42, 0x974, 0xa660, 0x7b35, 0xdc8f, 0x6b37, 0x0, 0x0);
        gbc.writeMem(0x8a42, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x974);
        EXPECT(gbc.pc(), 0x8a43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a42), 0x54);
        // 54 0346
        gbc.setState(0xb90a, 0xa9f9, 0xb4a0, 0xb45f, 0xd195, 0x565, 0x1, 0x1);
        gbc.writeMem(0xb90a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa9f9);
        EXPECT(gbc.pc(), 0xb90b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb90a), 0x54);
        // 54 0348
        gbc.setState(0x8b43, 0x35b, 0xbab0, 0x49eb, 0x343d, 0xf224, 0x1, 0x0);
        gbc.writeMem(0x8b43, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x35b);
        EXPECT(gbc.pc(), 0x8b44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b43), 0x54);
        // 54 0349
        gbc.setState(0x87d4, 0x6b79, 0xf3b0, 0xf462, 0x964, 0xd998, 0x0, 0x0);
        gbc.writeMem(0x87d4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6b79);
        EXPECT(gbc.pc(), 0x87d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87d4), 0x54);
        // 54 034A
        gbc.setState(0x8321, 0x9b5e, 0xeec0, 0x9028, 0x2923, 0xf142, 0x0, 0x1);
        gbc.writeMem(0x8321, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9b5e);
        EXPECT(gbc.pc(), 0x8322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8321), 0x54);
        // 54 034B
        gbc.setState(0x2cb0, 0x79ac, 0x98f0, 0xec93, 0x88bc, 0xbbfa, 0x1, 0x1);
        gbc.writeMem(0x2cb0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x79ac);
        EXPECT(gbc.pc(), 0x2cb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 034C
        gbc.setState(0xd645, 0xe9b9, 0x9560, 0x9cea, 0xafb9, 0xcfe4, 0x0, 0x1);
        gbc.writeMem(0xd645, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe9b9);
        EXPECT(gbc.pc(), 0xd646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd645), 0x54);
        // 54 034D
        gbc.setState(0xa786, 0x5c7f, 0x2ec0, 0xfda5, 0xc70e, 0xe80b, 0x1, 0x0);
        gbc.writeMem(0xa786, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5c7f);
        EXPECT(gbc.pc(), 0xa787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa786), 0x54);
        // 54 034E
        gbc.setState(0xd567, 0x2aee, 0x6560, 0x1e84, 0x7a71, 0x76cf, 0x0, 0x1);
        gbc.writeMem(0xd567, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2aee);
        EXPECT(gbc.pc(), 0xd568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd567), 0x54);
        // 54 034F
        gbc.setState(0x8e6b, 0xde35, 0x3070, 0xba0f, 0x5a1f, 0xcd29, 0x0, 0x1);
        gbc.writeMem(0x8e6b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xde35);
        EXPECT(gbc.pc(), 0x8e6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e6b), 0x54);
        // 54 0351
        gbc.setState(0x8c3e, 0xd757, 0x5960, 0x4, 0xabf6, 0xc3ed, 0x1, 0x0);
        gbc.writeMem(0x8c3e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd757);
        EXPECT(gbc.pc(), 0x8c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3e), 0x54);
        // 54 0352
        gbc.setState(0x8978, 0xcc23, 0x110, 0xba51, 0x821c, 0xd40d, 0x1, 0x1);
        gbc.writeMem(0x8978, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcc23);
        EXPECT(gbc.pc(), 0x8979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8978), 0x54);
        // 54 0353
        gbc.setState(0x9d4f, 0x8756, 0x7f50, 0x9492, 0xd8f2, 0xc7f1, 0x0, 0x0);
        gbc.writeMem(0x9d4f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8756);
        EXPECT(gbc.pc(), 0x9d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d4f), 0x54);
        // 54 0354
        gbc.setState(0xe557, 0x6e99, 0x6360, 0x573b, 0xa664, 0x603, 0x1, 0x0);
        gbc.writeMem(0xe557, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6e99);
        EXPECT(gbc.pc(), 0xe558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe557), 0x54);
        // 54 0355
        gbc.setState(0xdb1a, 0x66be, 0xae40, 0xc9e5, 0x5db5, 0x46e7, 0x0, 0x0);
        gbc.writeMem(0xdb1a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x66be);
        EXPECT(gbc.pc(), 0xdb1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb1a), 0x54);
        // 54 0356
        gbc.setState(0xc384, 0xf14e, 0x1130, 0x3cd5, 0x4168, 0xd0f8, 0x1, 0x0);
        gbc.writeMem(0xc384, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf14e);
        EXPECT(gbc.pc(), 0xc385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc384), 0x54);
        // 54 0357
        gbc.setState(0x28fe, 0x6179, 0x1080, 0xd669, 0x55b, 0x3337, 0x0, 0x0);
        gbc.writeMem(0x28fe, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6179);
        EXPECT(gbc.pc(), 0x28ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0358
        gbc.setState(0x88ae, 0x77a, 0x35f0, 0xdc24, 0x58bb, 0x6a85, 0x1, 0x1);
        gbc.writeMem(0x88ae, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x77a);
        EXPECT(gbc.pc(), 0x88af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ae), 0x54);
        // 54 0359
        gbc.setState(0xe4b9, 0xf69f, 0x5cb0, 0x389, 0x7044, 0xfd88, 0x0, 0x1);
        gbc.writeMem(0xe4b9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf69f);
        EXPECT(gbc.pc(), 0xe4ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4b9), 0x54);
        // 54 035A
        gbc.setState(0xbc94, 0x6494, 0xaec0, 0x28ac, 0x886a, 0x2bb7, 0x0, 0x1);
        gbc.writeMem(0xbc94, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6494);
        EXPECT(gbc.pc(), 0xbc95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc94), 0x54);
        // 54 035B
        gbc.setState(0x35cb, 0xec90, 0x1560, 0x82f2, 0x9d5d, 0x1702, 0x1, 0x0);
        gbc.writeMem(0x35cb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xec90);
        EXPECT(gbc.pc(), 0x35cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 035C
        gbc.setState(0x62e8, 0xd85e, 0x8130, 0x1f8, 0x302c, 0xf11b, 0x0, 0x0);
        gbc.writeMem(0x62e8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd85e);
        EXPECT(gbc.pc(), 0x62e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 035D
        gbc.setState(0x648f, 0xf5ab, 0x9a0, 0xb700, 0xb701, 0xb891, 0x0, 0x0);
        gbc.writeMem(0x648f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf5ab);
        EXPECT(gbc.pc(), 0x6490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 035E
        gbc.setState(0xb005, 0x62b5, 0x3750, 0x57a9, 0x926c, 0x1548, 0x0, 0x1);
        gbc.writeMem(0xb005, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x62b5);
        EXPECT(gbc.pc(), 0xb006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb005), 0x54);
        // 54 035F
        gbc.setState(0x17e3, 0x792c, 0xa410, 0xc0af, 0xe5c7, 0xcdcb, 0x1, 0x0);
        gbc.writeMem(0x17e3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x792c);
        EXPECT(gbc.pc(), 0x17e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0360
        gbc.setState(0x1e62, 0xb42a, 0xd40, 0x613d, 0x9e8e, 0xf7bd, 0x0, 0x1);
        gbc.writeMem(0x1e62, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb42a);
        EXPECT(gbc.pc(), 0x1e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0361
        gbc.setState(0x3171, 0x8772, 0x8830, 0xf069, 0x110f, 0x9dbf, 0x1, 0x0);
        gbc.writeMem(0x3171, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8772);
        EXPECT(gbc.pc(), 0x3172);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0362
        gbc.setState(0xcc04, 0x598d, 0x6b30, 0x7d63, 0xd9fb, 0x5963, 0x1, 0x0);
        gbc.writeMem(0xcc04, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x598d);
        EXPECT(gbc.pc(), 0xcc05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc04), 0x54);
        // 54 0363
        gbc.setState(0x6741, 0x19b5, 0x46e0, 0x8134, 0x3367, 0xf2c3, 0x0, 0x1);
        gbc.writeMem(0x6741, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x19b5);
        EXPECT(gbc.pc(), 0x6742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0364
        gbc.setState(0x78c4, 0xfc32, 0x3650, 0x21ad, 0x7d3a, 0x8421, 0x1, 0x1);
        gbc.writeMem(0x78c4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfc32);
        EXPECT(gbc.pc(), 0x78c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0365
        gbc.setState(0x802f, 0xc12c, 0x9e50, 0x13ea, 0xcca5, 0x17ac, 0x1, 0x0);
        gbc.writeMem(0x802f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc12c);
        EXPECT(gbc.pc(), 0x8030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x802f), 0x54);
        // 54 0366
        gbc.setState(0x2eac, 0x36cc, 0x1c20, 0xf48c, 0x5615, 0x4b0c, 0x0, 0x1);
        gbc.writeMem(0x2eac, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x36cc);
        EXPECT(gbc.pc(), 0x2ead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0367
        gbc.setState(0x55b0, 0x6ee7, 0x2770, 0xceaf, 0x95ec, 0xf3fc, 0x1, 0x1);
        gbc.writeMem(0x55b0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6ee7);
        EXPECT(gbc.pc(), 0x55b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0368
        gbc.setState(0x5d81, 0x1030, 0xfd70, 0x3738, 0x9dcd, 0xbf66, 0x1, 0x1);
        gbc.writeMem(0x5d81, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1030);
        EXPECT(gbc.pc(), 0x5d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0369
        gbc.setState(0x49, 0x2d05, 0x8fa0, 0x9ab5, 0x7ae1, 0xb646, 0x1, 0x0);
        gbc.writeMem(0x49, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2d05);
        EXPECT(gbc.pc(), 0x4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 036A
        gbc.setState(0x98b5, 0x6ba4, 0x6240, 0x8737, 0x6563, 0x5eec, 0x0, 0x0);
        gbc.writeMem(0x98b5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6ba4);
        EXPECT(gbc.pc(), 0x98b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b5), 0x54);
        // 54 036B
        gbc.setState(0x1a90, 0x8b13, 0x7230, 0xe29d, 0xc974, 0x73f4, 0x0, 0x1);
        gbc.writeMem(0x1a90, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8b13);
        EXPECT(gbc.pc(), 0x1a91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 036C
        gbc.setState(0xe75a, 0x6a4e, 0x9290, 0x17a6, 0xbcb, 0x7f80, 0x0, 0x0);
        gbc.writeMem(0xe75a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6a4e);
        EXPECT(gbc.pc(), 0xe75b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe75a), 0x54);
        // 54 036D
        gbc.setState(0x7cbd, 0x1766, 0xaca0, 0x1b87, 0x799e, 0x65e5, 0x0, 0x1);
        gbc.writeMem(0x7cbd, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1766);
        EXPECT(gbc.pc(), 0x7cbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 036E
        gbc.setState(0xe5e, 0x568e, 0x3640, 0x32a6, 0x1d65, 0xee4c, 0x1, 0x1);
        gbc.writeMem(0xe5e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x568e);
        EXPECT(gbc.pc(), 0xe5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 036F
        gbc.setState(0x4860, 0xa778, 0xcda0, 0xec66, 0x2247, 0x5765, 0x1, 0x0);
        gbc.writeMem(0x4860, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa778);
        EXPECT(gbc.pc(), 0x4861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0370
        gbc.setState(0xafa0, 0x871d, 0x7430, 0x6a97, 0xa0ec, 0x2163, 0x1, 0x0);
        gbc.writeMem(0xafa0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x871d);
        EXPECT(gbc.pc(), 0xafa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa0), 0x54);
        // 54 0371
        gbc.setState(0xcd55, 0x877b, 0x9030, 0x5492, 0x37d9, 0x690a, 0x1, 0x0);
        gbc.writeMem(0xcd55, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x877b);
        EXPECT(gbc.pc(), 0xcd56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd55), 0x54);
        // 54 0372
        gbc.setState(0xafa5, 0xb5eb, 0x6f60, 0x60c7, 0xfa2a, 0x33a1, 0x0, 0x1);
        gbc.writeMem(0xafa5, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb5eb);
        EXPECT(gbc.pc(), 0xafa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa5), 0x54);
        // 54 0373
        gbc.setState(0x3b6b, 0xf708, 0x1020, 0x4e12, 0xf65e, 0x1daf, 0x0, 0x1);
        gbc.writeMem(0x3b6b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf708);
        EXPECT(gbc.pc(), 0x3b6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0374
        gbc.setState(0x1049, 0x116e, 0x2070, 0x8341, 0x1a3e, 0x8445, 0x1, 0x1);
        gbc.writeMem(0x1049, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x116e);
        EXPECT(gbc.pc(), 0x104a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0375
        gbc.setState(0xb066, 0x1e8a, 0xcf20, 0x6b23, 0xa659, 0xb7fd, 0x0, 0x0);
        gbc.writeMem(0xb066, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1e8a);
        EXPECT(gbc.pc(), 0xb067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb066), 0x54);
        // 54 0376
        gbc.setState(0xc657, 0x6c04, 0x9cd0, 0x19ad, 0xdf3f, 0xe05, 0x0, 0x1);
        gbc.writeMem(0xc657, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6c04);
        EXPECT(gbc.pc(), 0xc658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc657), 0x54);
        // 54 0377
        gbc.setState(0xa4eb, 0x132, 0x3920, 0xf1ba, 0x5455, 0x60be, 0x1, 0x1);
        gbc.writeMem(0xa4eb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x132);
        EXPECT(gbc.pc(), 0xa4ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4eb), 0x54);
        // 54 0378
        gbc.setState(0x7a61, 0xf0e0, 0xebb0, 0x29ba, 0x27b4, 0x6b4d, 0x1, 0x0);
        gbc.writeMem(0x7a61, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf0e0);
        EXPECT(gbc.pc(), 0x7a62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0379
        gbc.setState(0x99c0, 0xf7ce, 0xe210, 0x6444, 0xd514, 0x7b0e, 0x1, 0x1);
        gbc.writeMem(0x99c0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf7ce);
        EXPECT(gbc.pc(), 0x99c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c0), 0x54);
        // 54 037A
        gbc.setState(0xe9d2, 0x7259, 0xb340, 0x35fd, 0x4df9, 0x1792, 0x1, 0x1);
        gbc.writeMem(0xe9d2, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7259);
        EXPECT(gbc.pc(), 0xe9d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d2), 0x54);
        // 54 037B
        gbc.setState(0x822a, 0xafcc, 0x9df0, 0x669c, 0xa260, 0x7431, 0x1, 0x1);
        gbc.writeMem(0x822a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xafcc);
        EXPECT(gbc.pc(), 0x822b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x822a), 0x54);
        // 54 037C
        gbc.setState(0x7a9f, 0xa4d2, 0xc570, 0x426d, 0x142, 0xf404, 0x0, 0x1);
        gbc.writeMem(0x7a9f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa4d2);
        EXPECT(gbc.pc(), 0x7aa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 037D
        gbc.setState(0xdb51, 0xa49f, 0x6b60, 0xb1be, 0x4824, 0x57db, 0x1, 0x0);
        gbc.writeMem(0xdb51, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa49f);
        EXPECT(gbc.pc(), 0xdb52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb51), 0x54);
        // 54 037E
        gbc.setState(0xdf6c, 0x37cb, 0xc950, 0x1650, 0xe27, 0xbc05, 0x0, 0x1);
        gbc.writeMem(0xdf6c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x37cb);
        EXPECT(gbc.pc(), 0xdf6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf6c), 0x54);
        // 54 0380
        gbc.setState(0x8553, 0xb994, 0xe3b0, 0x9d64, 0x446d, 0x4a38, 0x1, 0x1);
        gbc.writeMem(0x8553, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb994);
        EXPECT(gbc.pc(), 0x8554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8553), 0x54);
        // 54 0381
        gbc.setState(0x1be4, 0xeb3a, 0x7d90, 0xed7f, 0x5c0d, 0x907a, 0x0, 0x1);
        gbc.writeMem(0x1be4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xeb3a);
        EXPECT(gbc.pc(), 0x1be5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0382
        gbc.setState(0xb654, 0x1380, 0xe270, 0x57dd, 0x5b99, 0xe445, 0x0, 0x0);
        gbc.writeMem(0xb654, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1380);
        EXPECT(gbc.pc(), 0xb655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb654), 0x54);
        // 54 0383
        gbc.setState(0x5230, 0x9988, 0xf860, 0xae9a, 0x97f, 0x3162, 0x0, 0x1);
        gbc.writeMem(0x5230, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9988);
        EXPECT(gbc.pc(), 0x5231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0384
        gbc.setState(0x74ef, 0xf47b, 0xdcd0, 0x6704, 0xb5ef, 0xa9, 0x0, 0x1);
        gbc.writeMem(0x74ef, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf47b);
        EXPECT(gbc.pc(), 0x74f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 0385
        gbc.setState(0x3685, 0x114c, 0xac80, 0x994e, 0xc723, 0x7479, 0x1, 0x1);
        gbc.writeMem(0x3685, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x114c);
        EXPECT(gbc.pc(), 0x3686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 0386
        gbc.setState(0x9d13, 0xbf20, 0x4e80, 0x14c0, 0x68b8, 0xc8d4, 0x1, 0x1);
        gbc.writeMem(0x9d13, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbf20);
        EXPECT(gbc.pc(), 0x9d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d13), 0x54);
        // 54 0387
        gbc.setState(0xc887, 0xda1b, 0xc2a0, 0x6152, 0xdf65, 0xc692, 0x1, 0x0);
        gbc.writeMem(0xc887, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xda1b);
        EXPECT(gbc.pc(), 0xc888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc887), 0x54);
        // 54 0388
        gbc.setState(0x33ee, 0x4019, 0x9af0, 0x9863, 0xa8bf, 0x893a, 0x0, 0x1);
        gbc.writeMem(0x33ee, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4019);
        EXPECT(gbc.pc(), 0x33ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 0389
        gbc.setState(0x4a1f, 0x9c1b, 0x61e0, 0x363d, 0xd804, 0xe56f, 0x0, 0x0);
        gbc.writeMem(0x4a1f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9c1b);
        EXPECT(gbc.pc(), 0x4a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 038A
        gbc.setState(0x130, 0x6aaf, 0x26d0, 0xe388, 0x8f9e, 0x640a, 0x0, 0x0);
        gbc.writeMem(0x130, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6aaf);
        EXPECT(gbc.pc(), 0x131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 038B
        gbc.setState(0xcf0e, 0x5fc5, 0x9980, 0xf3c7, 0x357f, 0xb162, 0x0, 0x0);
        gbc.writeMem(0xcf0e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5fc5);
        EXPECT(gbc.pc(), 0xcf0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0e), 0x54);
        // 54 038C
        gbc.setState(0xab0a, 0xee05, 0xf670, 0x139f, 0x95bd, 0x3a9e, 0x0, 0x0);
        gbc.writeMem(0xab0a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xee05);
        EXPECT(gbc.pc(), 0xab0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab0a), 0x54);
        // 54 038D
        gbc.setState(0xe82a, 0x9284, 0x4370, 0x6fa, 0x1208, 0x6719, 0x0, 0x0);
        gbc.writeMem(0xe82a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9284);
        EXPECT(gbc.pc(), 0xe82b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe82a), 0x54);
        // 54 038E
        gbc.setState(0x69a4, 0x1a86, 0x1020, 0x9d4b, 0x35d2, 0xe5b5, 0x0, 0x1);
        gbc.writeMem(0x69a4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1a86);
        EXPECT(gbc.pc(), 0x69a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 038F
        gbc.setState(0xe28b, 0xbfb1, 0x6e30, 0xcf6f, 0x204a, 0xa35b, 0x1, 0x0);
        gbc.writeMem(0xe28b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbfb1);
        EXPECT(gbc.pc(), 0xe28c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe28b), 0x54);
        // 54 0390
        gbc.setState(0x408f, 0xd7da, 0xed20, 0x5a22, 0x4ce, 0x9fb, 0x1, 0x1);
        gbc.writeMem(0x408f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xd7da);
        EXPECT(gbc.pc(), 0x4090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0391
        gbc.setState(0x13fe, 0xf611, 0x82e0, 0x46ee, 0x148c, 0x78b4, 0x1, 0x0);
        gbc.writeMem(0x13fe, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf611);
        EXPECT(gbc.pc(), 0x13ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0392
        gbc.setState(0xe44a, 0x8bd1, 0x6a50, 0xfbf6, 0x1b10, 0xaa69, 0x0, 0x0);
        gbc.writeMem(0xe44a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8bd1);
        EXPECT(gbc.pc(), 0xe44b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe44a), 0x54);
        // 54 0393
        gbc.setState(0xbc22, 0x1a99, 0x50c0, 0xf0c4, 0x682a, 0xb98f, 0x0, 0x0);
        gbc.writeMem(0xbc22, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1a99);
        EXPECT(gbc.pc(), 0xbc23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc22), 0x54);
        // 54 0394
        gbc.setState(0xf78, 0xff5a, 0x7a0, 0x30f9, 0x7e0d, 0xf743, 0x1, 0x0);
        gbc.writeMem(0xf78, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xff5a);
        EXPECT(gbc.pc(), 0xf79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 0395
        gbc.setState(0xb5b3, 0x75e3, 0xe2f0, 0x1595, 0xddc5, 0x3230, 0x0, 0x1);
        gbc.writeMem(0xb5b3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x75e3);
        EXPECT(gbc.pc(), 0xb5b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b3), 0x54);
        // 54 0396
        gbc.setState(0x8494, 0xcae, 0x9760, 0x7974, 0x82b1, 0x78b1, 0x1, 0x1);
        gbc.writeMem(0x8494, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xcae);
        EXPECT(gbc.pc(), 0x8495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8494), 0x54);
        // 54 0398
        gbc.setState(0x93f1, 0xb50f, 0x6fe0, 0xece4, 0x9a12, 0xfad4, 0x1, 0x0);
        gbc.writeMem(0x93f1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb50f);
        EXPECT(gbc.pc(), 0x93f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f1), 0x54);
        // 54 0399
        gbc.setState(0x68e1, 0xf171, 0x1dc0, 0x9a91, 0xfbc4, 0x758b, 0x0, 0x0);
        gbc.writeMem(0x68e1, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf171);
        EXPECT(gbc.pc(), 0x68e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 039A
        gbc.setState(0x9d43, 0x10d5, 0x5f10, 0xaed2, 0xa42b, 0xb51c, 0x0, 0x1);
        gbc.writeMem(0x9d43, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x10d5);
        EXPECT(gbc.pc(), 0x9d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d43), 0x54);
        // 54 039B
        gbc.setState(0xb1e8, 0xc3f5, 0x670, 0x850a, 0x8ea9, 0x4777, 0x0, 0x1);
        gbc.writeMem(0xb1e8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc3f5);
        EXPECT(gbc.pc(), 0xb1e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1e8), 0x54);
        // 54 039C
        gbc.setState(0x9d0a, 0xaaef, 0xc8f0, 0xcca4, 0xd6e, 0x32e4, 0x1, 0x0);
        gbc.writeMem(0x9d0a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xaaef);
        EXPECT(gbc.pc(), 0x9d0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d0a), 0x54);
        // 54 039D
        gbc.setState(0xdf2d, 0x3712, 0xdc10, 0x22f, 0xd892, 0x1fbe, 0x1, 0x0);
        gbc.writeMem(0xdf2d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3712);
        EXPECT(gbc.pc(), 0xdf2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2d), 0x54);
        // 54 039E
        gbc.setState(0x43a3, 0xd0b2, 0x86e0, 0x5740, 0xead1, 0xa6d2, 0x1, 0x1);
        gbc.writeMem(0x43a3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd0b2);
        EXPECT(gbc.pc(), 0x43a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 039F
        gbc.setState(0x8f6f, 0xc8b0, 0x6500, 0xa1f1, 0xf414, 0xc788, 0x1, 0x0);
        gbc.writeMem(0x8f6f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc8b0);
        EXPECT(gbc.pc(), 0x8f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f6f), 0x54);
        // 54 03A0
        gbc.setState(0xce53, 0x1be5, 0x1640, 0x43b, 0x5b79, 0x8014, 0x0, 0x1);
        gbc.writeMem(0xce53, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1be5);
        EXPECT(gbc.pc(), 0xce54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce53), 0x54);
        // 54 03A1
        gbc.setState(0x4920, 0x1a1e, 0x2360, 0xb5fd, 0x63e, 0xa7f4, 0x0, 0x1);
        gbc.writeMem(0x4920, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1a1e);
        EXPECT(gbc.pc(), 0x4921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03A2
        gbc.setState(0xca21, 0xaefc, 0xfba0, 0x311b, 0xb942, 0x3eb6, 0x0, 0x0);
        gbc.writeMem(0xca21, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xaefc);
        EXPECT(gbc.pc(), 0xca22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca21), 0x54);
        // 54 03A3
        gbc.setState(0x506d, 0x6e02, 0x2b90, 0x137f, 0xc949, 0xe3aa, 0x0, 0x0);
        gbc.writeMem(0x506d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6e02);
        EXPECT(gbc.pc(), 0x506e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03A4
        gbc.setState(0xe28f, 0x3df0, 0xa720, 0x11b9, 0x3502, 0x24bf, 0x0, 0x1);
        gbc.writeMem(0xe28f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3df0);
        EXPECT(gbc.pc(), 0xe290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe28f), 0x54);
        // 54 03A6
        gbc.setState(0x87cb, 0x40fe, 0x46b0, 0xbe79, 0x7a18, 0xbf8, 0x1, 0x0);
        gbc.writeMem(0x87cb, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x40fe);
        EXPECT(gbc.pc(), 0x87cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87cb), 0x54);
        // 54 03AA
        gbc.setState(0x4f3b, 0x3362, 0xfd20, 0xad5e, 0xd4cb, 0xf90b, 0x0, 0x0);
        gbc.writeMem(0x4f3b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3362);
        EXPECT(gbc.pc(), 0x4f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03AB
        gbc.setState(0xa940, 0x9f42, 0x2bd0, 0x5221, 0x37af, 0xf435, 0x0, 0x1);
        gbc.writeMem(0xa940, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9f42);
        EXPECT(gbc.pc(), 0xa941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa940), 0x54);
        // 54 03AC
        gbc.setState(0x8ac0, 0xd603, 0x6910, 0xbb2e, 0x4471, 0xf6c5, 0x1, 0x0);
        gbc.writeMem(0x8ac0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd603);
        EXPECT(gbc.pc(), 0x8ac1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac0), 0x54);
        // 54 03AD
        gbc.setState(0x116, 0xf978, 0x9780, 0x47df, 0x225, 0xff1f, 0x0, 0x0);
        gbc.writeMem(0x116, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf978);
        EXPECT(gbc.pc(), 0x117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03AE
        gbc.setState(0x509d, 0xc4d0, 0x22b0, 0x199e, 0x5c43, 0x2579, 0x0, 0x0);
        gbc.writeMem(0x509d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc4d0);
        EXPECT(gbc.pc(), 0x509e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03AF
        gbc.setState(0x4558, 0x860f, 0x6b60, 0x8f41, 0x4fee, 0xf377, 0x0, 0x1);
        gbc.writeMem(0x4558, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x860f);
        EXPECT(gbc.pc(), 0x4559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03B0
        gbc.setState(0xb926, 0x3235, 0x3aa0, 0x729b, 0xd59d, 0x3c25, 0x1, 0x1);
        gbc.writeMem(0xb926, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3235);
        EXPECT(gbc.pc(), 0xb927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb926), 0x54);
        // 54 03B1
        gbc.setState(0xd231, 0x33ea, 0xd810, 0x2313, 0x90cd, 0xc898, 0x0, 0x1);
        gbc.writeMem(0xd231, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x33ea);
        EXPECT(gbc.pc(), 0xd232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd231), 0x54);
        // 54 03B2
        gbc.setState(0x1d53, 0x94e9, 0x4ff0, 0xd7e2, 0xe84b, 0x8c60, 0x1, 0x1);
        gbc.writeMem(0x1d53, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x94e9);
        EXPECT(gbc.pc(), 0x1d54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03B3
        gbc.setState(0x2927, 0x8d60, 0xe400, 0xb93e, 0x6acb, 0xeed, 0x0, 0x1);
        gbc.writeMem(0x2927, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8d60);
        EXPECT(gbc.pc(), 0x2928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03B4
        gbc.setState(0x81e, 0x4dc4, 0x27a0, 0x560c, 0xeac2, 0xe14, 0x0, 0x0);
        gbc.writeMem(0x81e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4dc4);
        EXPECT(gbc.pc(), 0x81f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03B5
        gbc.setState(0x2311, 0x3ab7, 0xa870, 0x7bb7, 0x4560, 0x850f, 0x0, 0x0);
        gbc.writeMem(0x2311, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3ab7);
        EXPECT(gbc.pc(), 0x2312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03B6
        gbc.setState(0xef21, 0x7548, 0xcf30, 0x21cc, 0x4b8e, 0x6bf4, 0x1, 0x1);
        gbc.writeMem(0xef21, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7548);
        EXPECT(gbc.pc(), 0xef22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef21), 0x54);
        // 54 03B7
        gbc.setState(0x1696, 0xee83, 0x6b0, 0x6929, 0x1b1c, 0x9c4b, 0x0, 0x1);
        gbc.writeMem(0x1696, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xee83);
        EXPECT(gbc.pc(), 0x1697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03B8
        gbc.setState(0x8fa9, 0xb05b, 0xd810, 0x4783, 0xc660, 0x8660, 0x0, 0x1);
        gbc.writeMem(0x8fa9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb05b);
        EXPECT(gbc.pc(), 0x8faa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa9), 0x54);
        // 54 03B9
        gbc.setState(0x4430, 0xa1a0, 0x3540, 0x89f, 0x175e, 0xa8bd, 0x0, 0x1);
        gbc.writeMem(0x4430, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa1a0);
        EXPECT(gbc.pc(), 0x4431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03BA
        gbc.setState(0x55ab, 0xe454, 0x13c0, 0x468, 0x55f0, 0xe4ac, 0x0, 0x1);
        gbc.writeMem(0x55ab, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe454);
        EXPECT(gbc.pc(), 0x55ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03BB
        gbc.setState(0x1cbf, 0x2b3a, 0x8750, 0xe8e1, 0xf0f3, 0xd291, 0x1, 0x1);
        gbc.writeMem(0x1cbf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2b3a);
        EXPECT(gbc.pc(), 0x1cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03BC
        gbc.setState(0x58a6, 0xbf5b, 0x2640, 0xe3ff, 0xd04d, 0x8b5a, 0x0, 0x0);
        gbc.writeMem(0x58a6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbf5b);
        EXPECT(gbc.pc(), 0x58a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03BD
        gbc.setState(0xd3cf, 0x5233, 0xb1a0, 0x4c4b, 0xbd6e, 0xfe51, 0x1, 0x1);
        gbc.writeMem(0xd3cf, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5233);
        EXPECT(gbc.pc(), 0xd3d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3cf), 0x54);
        // 54 03BE
        gbc.setState(0x8ee8, 0xc49d, 0x8d40, 0xb2f8, 0x56bd, 0xfe2c, 0x0, 0x0);
        gbc.writeMem(0x8ee8, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc49d);
        EXPECT(gbc.pc(), 0x8ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ee8), 0x54);
        // 54 03BF
        gbc.setState(0xd491, 0x3722, 0x9d20, 0x6bb4, 0x79ea, 0x5164, 0x0, 0x1);
        gbc.writeMem(0xd491, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3722);
        EXPECT(gbc.pc(), 0xd492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd491), 0x54);
        // 54 03C0
        gbc.setState(0x9e35, 0x6190, 0x9ea0, 0x89f0, 0xd1e4, 0xed22, 0x0, 0x0);
        gbc.writeMem(0x9e35, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6190);
        EXPECT(gbc.pc(), 0x9e36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e35), 0x54);
        // 54 03C1
        gbc.setState(0x3f01, 0x7092, 0xe7e0, 0x896d, 0x4af5, 0x690c, 0x0, 0x1);
        gbc.writeMem(0x3f01, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7092);
        EXPECT(gbc.pc(), 0x3f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03C2
        gbc.setState(0xeced, 0x2d40, 0xbec0, 0x8adc, 0xef, 0xcff4, 0x1, 0x0);
        gbc.writeMem(0xeced, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2d40);
        EXPECT(gbc.pc(), 0xecee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeced), 0x54);
        // 54 03C3
        gbc.setState(0x444a, 0xb57e, 0x2b10, 0x36d2, 0x3772, 0x55f7, 0x1, 0x0);
        gbc.writeMem(0x444a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb57e);
        EXPECT(gbc.pc(), 0x444b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03C4
        gbc.setState(0x7153, 0xcb4a, 0x1bd0, 0x4599, 0x5a75, 0x251a, 0x1, 0x0);
        gbc.writeMem(0x7153, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xcb4a);
        EXPECT(gbc.pc(), 0x7154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03C5
        gbc.setState(0xc4c, 0x80e5, 0xac90, 0xf5ec, 0x4c65, 0x6d1c, 0x0, 0x1);
        gbc.writeMem(0xc4c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x80e5);
        EXPECT(gbc.pc(), 0xc4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03C6
        gbc.setState(0x352f, 0xf86d, 0x24c0, 0x3387, 0xceec, 0x169d, 0x1, 0x0);
        gbc.writeMem(0x352f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf86d);
        EXPECT(gbc.pc(), 0x3530);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03C7
        gbc.setState(0x6081, 0x4af6, 0xb880, 0xf30a, 0x6bda, 0x1228, 0x1, 0x0);
        gbc.writeMem(0x6081, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4af6);
        EXPECT(gbc.pc(), 0x6082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03C8
        gbc.setState(0x199e, 0xf9fc, 0x7b60, 0x8e97, 0xb0ad, 0x2e4f, 0x1, 0x0);
        gbc.writeMem(0x199e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf9fc);
        EXPECT(gbc.pc(), 0x199f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03C9
        gbc.setState(0x91a6, 0x49bb, 0xab10, 0xf09, 0x7318, 0x701d, 0x1, 0x0);
        gbc.writeMem(0x91a6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x49bb);
        EXPECT(gbc.pc(), 0x91a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a6), 0x54);
        // 54 03CA
        gbc.setState(0x642d, 0x1ba2, 0xa950, 0x6f5e, 0x5f72, 0xfa6a, 0x0, 0x1);
        gbc.writeMem(0x642d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1ba2);
        EXPECT(gbc.pc(), 0x642e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03CB
        gbc.setState(0x8624, 0xfa75, 0xb90, 0xac54, 0x329e, 0x913c, 0x0, 0x1);
        gbc.writeMem(0x8624, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfa75);
        EXPECT(gbc.pc(), 0x8625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8624), 0x54);
        // 54 03CC
        gbc.setState(0x855c, 0x5467, 0x7610, 0x2c38, 0xae2b, 0xeb6f, 0x0, 0x0);
        gbc.writeMem(0x855c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5467);
        EXPECT(gbc.pc(), 0x855d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x855c), 0x54);
        // 54 03CD
        gbc.setState(0x6743, 0xbb35, 0x7e50, 0x7667, 0xd30f, 0x29ab, 0x1, 0x1);
        gbc.writeMem(0x6743, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xbb35);
        EXPECT(gbc.pc(), 0x6744);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03CE
        gbc.setState(0x2fae, 0x3c64, 0x490, 0xc011, 0x78dd, 0xbb99, 0x0, 0x0);
        gbc.writeMem(0x2fae, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3c64);
        EXPECT(gbc.pc(), 0x2faf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03CF
        gbc.setState(0x2b52, 0x5669, 0x8d60, 0xa0dc, 0x30a, 0x3029, 0x1, 0x0);
        gbc.writeMem(0x2b52, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5669);
        EXPECT(gbc.pc(), 0x2b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03D0
        gbc.setState(0xe7f4, 0xda29, 0x9e0, 0x1424, 0x4a38, 0x433c, 0x1, 0x1);
        gbc.writeMem(0xe7f4, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xda29);
        EXPECT(gbc.pc(), 0xe7f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f4), 0x54);
        // 54 03D1
        gbc.setState(0x402b, 0xb8d0, 0x4920, 0x9e37, 0x78e2, 0xbf8, 0x1, 0x1);
        gbc.writeMem(0x402b, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb8d0);
        EXPECT(gbc.pc(), 0x402c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03D2
        gbc.setState(0xcca0, 0x5055, 0xa570, 0x5b08, 0xb9fb, 0x179e, 0x1, 0x0);
        gbc.writeMem(0xcca0, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5055);
        EXPECT(gbc.pc(), 0xcca1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca0), 0x54);
        // 54 03D3
        gbc.setState(0x6241, 0xcd9d, 0xc870, 0x8fe, 0x36fc, 0x3477, 0x1, 0x1);
        gbc.writeMem(0x6241, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xcd9d);
        EXPECT(gbc.pc(), 0x6242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03D4
        gbc.setState(0x8a71, 0xd11a, 0xf7e0, 0x6d16, 0x1061, 0x9c6d, 0x0, 0x1);
        gbc.writeMem(0x8a71, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd11a);
        EXPECT(gbc.pc(), 0x8a72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a71), 0x54);
        // 54 03D5
        gbc.setState(0x381a, 0x4302, 0xdbf0, 0x7898, 0x1fc0, 0x368e, 0x0, 0x0);
        gbc.writeMem(0x381a, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4302);
        EXPECT(gbc.pc(), 0x381b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03D6
        gbc.setState(0xee19, 0x61c4, 0x6500, 0x7c64, 0xe957, 0xa0ae, 0x0, 0x1);
        gbc.writeMem(0xee19, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x61c4);
        EXPECT(gbc.pc(), 0xee1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee19), 0x54);
        // 54 03D8
        gbc.setState(0x7d22, 0xf135, 0x9990, 0xd2f4, 0x27ea, 0x7f5a, 0x0, 0x0);
        gbc.writeMem(0x7d22, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf135);
        EXPECT(gbc.pc(), 0x7d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03D9
        gbc.setState(0xee26, 0xe0c, 0x410, 0x5839, 0x9afa, 0xbe5, 0x1, 0x1);
        gbc.writeMem(0xee26, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe0c);
        EXPECT(gbc.pc(), 0xee27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee26), 0x54);
        // 54 03DA
        gbc.setState(0x64db, 0xd977, 0x48d0, 0xc80, 0x33ba, 0xe1b8, 0x1, 0x0);
        gbc.writeMem(0x64db, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd977);
        EXPECT(gbc.pc(), 0x64dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03DB
        gbc.setState(0x5c1e, 0xe9c2, 0x4480, 0xa053, 0xef81, 0x84fe, 0x0, 0x0);
        gbc.writeMem(0x5c1e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe9c2);
        EXPECT(gbc.pc(), 0x5c1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 54 03DC
        gbc.setState(0xb846, 0x7590, 0xb9a0, 0xe612, 0x86d7, 0xbf58, 0x1, 0x0);
        gbc.writeMem(0xb846, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7590);
        EXPECT(gbc.pc(), 0xb847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb846), 0x54);
        // 54 03DD
        gbc.setState(0x9158, 0xd4b, 0xd9a0, 0x46fd, 0xe73e, 0x9998, 0x0, 0x0);
        gbc.writeMem(0x9158, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd4b);
        EXPECT(gbc.pc(), 0x9159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9158), 0x54);
        // 54 03DE
        gbc.setState(0x4471, 0x7786, 0x52f0, 0x8f9a, 0x99a9, 0x334c, 0x1, 0x0);
        gbc.writeMem(0x4471, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7786);
        EXPECT(gbc.pc(), 0x4472);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03DF
        gbc.setState(0x9231, 0x5a25, 0xedb0, 0x483, 0x5fa6, 0xfab, 0x1, 0x1);
        gbc.writeMem(0x9231, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5a25);
        EXPECT(gbc.pc(), 0x9232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9231), 0x54);
        // 54 03E0
        gbc.setState(0x80de, 0xd93c, 0x2110, 0xc907, 0xf974, 0xd14c, 0x0, 0x1);
        gbc.writeMem(0x80de, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd93c);
        EXPECT(gbc.pc(), 0x80df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80de), 0x54);
        // 54 03E1
        gbc.setState(0x7a79, 0x8124, 0xb8e0, 0xb4a9, 0x8179, 0x5acf, 0x0, 0x0);
        gbc.writeMem(0x7a79, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8124);
        EXPECT(gbc.pc(), 0x7a7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 54 03E2
        gbc.setState(0x3a9f, 0xd7ed, 0xf2d0, 0x83e5, 0x4a0c, 0x523c, 0x0, 0x1);
        gbc.writeMem(0x3a9f, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd7ed);
        EXPECT(gbc.pc(), 0x3aa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03E3
        gbc.setState(0x646d, 0x3042, 0x3670, 0x21ea, 0x624c, 0x9d88, 0x0, 0x0);
        gbc.writeMem(0x646d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3042);
        EXPECT(gbc.pc(), 0x646e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 54 03E4
        gbc.setState(0x1d1c, 0x36b9, 0xb990, 0x1c8e, 0x5967, 0xd7f5, 0x0, 0x0);
        gbc.writeMem(0x1d1c, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x36b9);
        EXPECT(gbc.pc(), 0x1d1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 54 03E5
        gbc.setState(0x8382, 0x8d4e, 0x4730, 0x95d, 0x216, 0xf28a, 0x1, 0x0);
        gbc.writeMem(0x8382, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8d4e);
        EXPECT(gbc.pc(), 0x8383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8382), 0x54);
        // 54 03E7
        gbc.setState(0xd390, 0x4d4d, 0xc760, 0x99f2, 0x8bfc, 0x96f4, 0x1, 0x1);
        gbc.writeMem(0xd390, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4d4d);
        EXPECT(gbc.pc(), 0xd391);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd390), 0x54);
    }
