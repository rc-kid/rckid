#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_af)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_af) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB AF 0000
        gbc.setState(0x454f, 0xd564, 0x2400, 0x4053, 0xdf97, 0x250d, 0x0, 0x0);
        gbc.writeMem(0x454f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd564);
        EXPECT(gbc.pc(), 0x4551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0001
        gbc.setState(0xc25e, 0x2da4, 0xf460, 0xb4b4, 0x3715, 0xbd45, 0x1, 0x0);
        gbc.writeMem(0xc25e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2da4);
        EXPECT(gbc.pc(), 0xc260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25e), 0xcb);
        EXPECT(gbc.readMem(0xc25f), 0xaf);
        // CB AF 0002
        gbc.setState(0x3a27, 0xde47, 0x3660, 0xbdb8, 0x5cbf, 0xa88c, 0x0, 0x0);
        gbc.writeMem(0x3a27, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xde47);
        EXPECT(gbc.pc(), 0x3a29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0003
        gbc.setState(0x2dba, 0x7049, 0xd1a0, 0xe6ba, 0x970, 0x6114, 0x1, 0x0);
        gbc.writeMem(0x2dba, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7049);
        EXPECT(gbc.pc(), 0x2dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0004
        gbc.setState(0x37eb, 0xa478, 0xe2b0, 0x9ce8, 0xf2d6, 0x3c16, 0x0, 0x1);
        gbc.writeMem(0x37eb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa478);
        EXPECT(gbc.pc(), 0x37ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0005
        gbc.setState(0x180, 0x155d, 0x3080, 0xfa3e, 0x774a, 0x7cd4, 0x1, 0x1);
        gbc.writeMem(0x180, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x155d);
        EXPECT(gbc.pc(), 0x182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0006
        gbc.setState(0xa056, 0xf438, 0x31d0, 0x471b, 0xe56d, 0x7a2, 0x1, 0x1);
        gbc.writeMem(0xa056, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf438);
        EXPECT(gbc.pc(), 0xa058);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa056), 0xcb);
        EXPECT(gbc.readMem(0xa057), 0xaf);
        // CB AF 0007
        gbc.setState(0x46ae, 0xa88, 0x1960, 0x84ee, 0x8ef2, 0x1b2, 0x1, 0x0);
        gbc.writeMem(0x46ae, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa88);
        EXPECT(gbc.pc(), 0x46b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0008
        gbc.setState(0xaa76, 0x4f90, 0x4d40, 0xdab, 0x71cd, 0xdbc7, 0x0, 0x0);
        gbc.writeMem(0xaa76, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4f90);
        EXPECT(gbc.pc(), 0xaa78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa76), 0xcb);
        EXPECT(gbc.readMem(0xaa77), 0xaf);
        // CB AF 0009
        gbc.setState(0x21df, 0xab47, 0x3b30, 0x639d, 0x7e1a, 0x3372, 0x1, 0x1);
        gbc.writeMem(0x21df, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xab47);
        EXPECT(gbc.pc(), 0x21e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 000A
        gbc.setState(0x6f8c, 0xf5a6, 0x6df0, 0xcf66, 0x2815, 0x5cf8, 0x0, 0x0);
        gbc.writeMem(0x6f8c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf5a6);
        EXPECT(gbc.pc(), 0x6f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 000B
        gbc.setState(0xb825, 0xb2cb, 0xf8f0, 0xed35, 0xa2cb, 0x116d, 0x1, 0x0);
        gbc.writeMem(0xb825, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xb2cb);
        EXPECT(gbc.pc(), 0xb827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb825), 0xcb);
        EXPECT(gbc.readMem(0xb826), 0xaf);
        // CB AF 000C
        gbc.setState(0xe6d5, 0x932, 0x6050, 0x9f9f, 0x3ba, 0x3c55, 0x1, 0x1);
        gbc.writeMem(0xe6d5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x932);
        EXPECT(gbc.pc(), 0xe6d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d5), 0xcb);
        EXPECT(gbc.readMem(0xe6d6), 0xaf);
        // CB AF 000D
        gbc.setState(0xe75a, 0xbcfc, 0x4bf0, 0x9205, 0x8c91, 0xecc9, 0x1, 0x1);
        gbc.writeMem(0xe75a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbcfc);
        EXPECT(gbc.pc(), 0xe75c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe75a), 0xcb);
        EXPECT(gbc.readMem(0xe75b), 0xaf);
        // CB AF 000E
        gbc.setState(0xbed, 0x6748, 0xc0e0, 0xb3ad, 0x9a40, 0xc1db, 0x1, 0x0);
        gbc.writeMem(0xbed, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6748);
        EXPECT(gbc.pc(), 0xbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 000F
        gbc.setState(0x3f35, 0xd3f6, 0x7fd0, 0xf3d5, 0xdcd6, 0xeb35, 0x1, 0x1);
        gbc.writeMem(0x3f35, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd3f6);
        EXPECT(gbc.pc(), 0x3f37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0010
        gbc.setState(0xacc1, 0x4017, 0x6990, 0x715a, 0xbc66, 0x4c61, 0x0, 0x1);
        gbc.writeMem(0xacc1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4017);
        EXPECT(gbc.pc(), 0xacc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc1), 0xcb);
        EXPECT(gbc.readMem(0xacc2), 0xaf);
        // CB AF 0011
        gbc.setState(0xbaeb, 0x2b06, 0x44f0, 0xb564, 0x274b, 0x451c, 0x1, 0x1);
        gbc.writeMem(0xbaeb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2b06);
        EXPECT(gbc.pc(), 0xbaed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaeb), 0xcb);
        EXPECT(gbc.readMem(0xbaec), 0xaf);
        // CB AF 0012
        gbc.setState(0xad12, 0x4920, 0xece0, 0x112d, 0x16c9, 0x8c20, 0x1, 0x0);
        gbc.writeMem(0xad12, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4920);
        EXPECT(gbc.pc(), 0xad14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad12), 0xcb);
        EXPECT(gbc.readMem(0xad13), 0xaf);
        // CB AF 0013
        gbc.setState(0x8cb9, 0x7254, 0x68e0, 0xda2e, 0x292d, 0x8400, 0x1, 0x1);
        gbc.writeMem(0x8cb9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7254);
        EXPECT(gbc.pc(), 0x8cbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cb9), 0xcb);
        EXPECT(gbc.readMem(0x8cba), 0xaf);
        // CB AF 0014
        gbc.setState(0x6a7f, 0xdc08, 0x8a20, 0xf3f2, 0xa19c, 0xaaeb, 0x0, 0x1);
        gbc.writeMem(0x6a7f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdc08);
        EXPECT(gbc.pc(), 0x6a81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0015
        gbc.setState(0x2b1d, 0x8ea1, 0x7470, 0x7345, 0xa364, 0xf257, 0x1, 0x0);
        gbc.writeMem(0x2b1d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8ea1);
        EXPECT(gbc.pc(), 0x2b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0016
        gbc.setState(0x4a54, 0x8314, 0xbb40, 0x3f35, 0x306d, 0x4085, 0x0, 0x0);
        gbc.writeMem(0x4a54, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8314);
        EXPECT(gbc.pc(), 0x4a56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0017
        gbc.setState(0x955, 0xa302, 0xc120, 0xfc12, 0x9a4e, 0x3df4, 0x1, 0x1);
        gbc.writeMem(0x955, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa302);
        EXPECT(gbc.pc(), 0x957);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0018
        gbc.setState(0xe0cc, 0x5acc, 0xd310, 0xb858, 0x618b, 0x80c2, 0x0, 0x1);
        gbc.writeMem(0xe0cc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5acc);
        EXPECT(gbc.pc(), 0xe0ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0cc), 0xcb);
        EXPECT(gbc.readMem(0xe0cd), 0xaf);
        // CB AF 0019
        gbc.setState(0x2280, 0xd1d8, 0x4e40, 0xdc1d, 0x4a8b, 0x92f2, 0x1, 0x1);
        gbc.writeMem(0x2280, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd1d8);
        EXPECT(gbc.pc(), 0x2282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 001A
        gbc.setState(0xafb8, 0x5968, 0xec80, 0x4bc4, 0x3267, 0xe299, 0x0, 0x1);
        gbc.writeMem(0xafb8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5968);
        EXPECT(gbc.pc(), 0xafba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb8), 0xcb);
        EXPECT(gbc.readMem(0xafb9), 0xaf);
        // CB AF 001B
        gbc.setState(0x7262, 0xa33e, 0x61a0, 0x9f61, 0x52a4, 0x1dca, 0x1, 0x0);
        gbc.writeMem(0x7262, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa33e);
        EXPECT(gbc.pc(), 0x7264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 001C
        gbc.setState(0x9384, 0xfe15, 0xaae0, 0x18cc, 0x659a, 0x4c9, 0x1, 0x0);
        gbc.writeMem(0x9384, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfe15);
        EXPECT(gbc.pc(), 0x9386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9384), 0xcb);
        EXPECT(gbc.readMem(0x9385), 0xaf);
        // CB AF 001D
        gbc.setState(0x98b6, 0x6cc3, 0x1080, 0xe983, 0x3d8d, 0xc470, 0x0, 0x0);
        gbc.writeMem(0x98b6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6cc3);
        EXPECT(gbc.pc(), 0x98b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b6), 0xcb);
        EXPECT(gbc.readMem(0x98b7), 0xaf);
        // CB AF 001E
        gbc.setState(0xea45, 0x5375, 0x1790, 0x7cda, 0x1bb8, 0x3e37, 0x0, 0x1);
        gbc.writeMem(0xea45, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5375);
        EXPECT(gbc.pc(), 0xea47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea45), 0xcb);
        EXPECT(gbc.readMem(0xea46), 0xaf);
        // CB AF 001F
        gbc.setState(0xb960, 0x606b, 0xbf30, 0x62cc, 0x6eb, 0xb13b, 0x1, 0x1);
        gbc.writeMem(0xb960, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x606b);
        EXPECT(gbc.pc(), 0xb962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb960), 0xcb);
        EXPECT(gbc.readMem(0xb961), 0xaf);
        // CB AF 0020
        gbc.setState(0x1543, 0x738f, 0x3730, 0xe331, 0xecf7, 0x289, 0x0, 0x0);
        gbc.writeMem(0x1543, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x738f);
        EXPECT(gbc.pc(), 0x1545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0021
        gbc.setState(0x5eeb, 0x992e, 0x7000, 0x6697, 0x1ff6, 0xde6e, 0x1, 0x1);
        gbc.writeMem(0x5eeb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x992e);
        EXPECT(gbc.pc(), 0x5eed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0023
        gbc.setState(0xa1fa, 0xa243, 0x2e90, 0xe7f9, 0xbe1d, 0xae44, 0x0, 0x0);
        gbc.writeMem(0xa1fa, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa243);
        EXPECT(gbc.pc(), 0xa1fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1fa), 0xcb);
        EXPECT(gbc.readMem(0xa1fb), 0xaf);
        // CB AF 0024
        gbc.setState(0x2a1, 0x2882, 0xdb30, 0xf4b0, 0x76ad, 0x8e52, 0x1, 0x0);
        gbc.writeMem(0x2a1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2882);
        EXPECT(gbc.pc(), 0x2a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0025
        gbc.setState(0x3649, 0x8bae, 0x4530, 0x1508, 0x8330, 0xef94, 0x1, 0x1);
        gbc.writeMem(0x3649, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8bae);
        EXPECT(gbc.pc(), 0x364b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0026
        gbc.setState(0x2e93, 0x828c, 0xd520, 0xd83b, 0x9ada, 0x2a44, 0x0, 0x1);
        gbc.writeMem(0x2e93, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x828c);
        EXPECT(gbc.pc(), 0x2e95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0028
        gbc.setState(0x947d, 0x92aa, 0x560, 0x973f, 0x753a, 0xeb73, 0x0, 0x1);
        gbc.writeMem(0x947d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x92aa);
        EXPECT(gbc.pc(), 0x947f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x947d), 0xcb);
        EXPECT(gbc.readMem(0x947e), 0xaf);
        // CB AF 0029
        gbc.setState(0xac13, 0xd114, 0x9b70, 0x1a93, 0x1d48, 0x7d83, 0x1, 0x1);
        gbc.writeMem(0xac13, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd114);
        EXPECT(gbc.pc(), 0xac15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac13), 0xcb);
        EXPECT(gbc.readMem(0xac14), 0xaf);
        // CB AF 002A
        gbc.setState(0x1f5, 0x2923, 0x52f0, 0xb1d1, 0x539e, 0x6b3c, 0x0, 0x0);
        gbc.writeMem(0x1f5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2923);
        EXPECT(gbc.pc(), 0x1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 002B
        gbc.setState(0xc65a, 0xccd1, 0x8d90, 0x76c1, 0xfb66, 0xd9bf, 0x1, 0x1);
        gbc.writeMem(0xc65a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xccd1);
        EXPECT(gbc.pc(), 0xc65c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65a), 0xcb);
        EXPECT(gbc.readMem(0xc65b), 0xaf);
        // CB AF 002C
        gbc.setState(0xaec6, 0x9e03, 0xf170, 0x5ac1, 0x3b95, 0x2e51, 0x0, 0x1);
        gbc.writeMem(0xaec6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9e03);
        EXPECT(gbc.pc(), 0xaec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec6), 0xcb);
        EXPECT(gbc.readMem(0xaec7), 0xaf);
        // CB AF 002D
        gbc.setState(0x215b, 0x41a6, 0xd490, 0xe59, 0xda37, 0x1e09, 0x0, 0x0);
        gbc.writeMem(0x215b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x41a6);
        EXPECT(gbc.pc(), 0x215d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 002E
        gbc.setState(0x194e, 0xc4c3, 0x3f70, 0xdfbf, 0xf327, 0x9142, 0x0, 0x1);
        gbc.writeMem(0x194e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc4c3);
        EXPECT(gbc.pc(), 0x1950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 002F
        gbc.setState(0xa978, 0x663c, 0x7c50, 0xc693, 0xafc6, 0xf03c, 0x1, 0x1);
        gbc.writeMem(0xa978, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x663c);
        EXPECT(gbc.pc(), 0xa97a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa978), 0xcb);
        EXPECT(gbc.readMem(0xa979), 0xaf);
        // CB AF 0030
        gbc.setState(0x1f97, 0x8a4, 0x7eb0, 0x1982, 0x1fd3, 0x9470, 0x1, 0x0);
        gbc.writeMem(0x1f97, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8a4);
        EXPECT(gbc.pc(), 0x1f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0032
        gbc.setState(0x13ff, 0x8238, 0x8210, 0xdf12, 0xa048, 0xf4d5, 0x1, 0x1);
        gbc.writeMem(0x13ff, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8238);
        EXPECT(gbc.pc(), 0x1401);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0033
        gbc.setState(0x75be, 0xe648, 0x9740, 0x308f, 0xb91c, 0x98ba, 0x0, 0x0);
        gbc.writeMem(0x75be, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe648);
        EXPECT(gbc.pc(), 0x75c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0034
        gbc.setState(0x3a9e, 0xe7d1, 0x6160, 0x95aa, 0x6b8a, 0xcc85, 0x1, 0x0);
        gbc.writeMem(0x3a9e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe7d1);
        EXPECT(gbc.pc(), 0x3aa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0035
        gbc.setState(0x83e5, 0x36ab, 0xddc0, 0x68f7, 0xe6ba, 0x5f44, 0x1, 0x0);
        gbc.writeMem(0x83e5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x36ab);
        EXPECT(gbc.pc(), 0x83e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e5), 0xcb);
        EXPECT(gbc.readMem(0x83e6), 0xaf);
        // CB AF 0036
        gbc.setState(0x75d, 0x87b9, 0x3db0, 0xd9b2, 0xdc8c, 0x4963, 0x1, 0x0);
        gbc.writeMem(0x75d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x87b9);
        EXPECT(gbc.pc(), 0x75f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0037
        gbc.setState(0xebcb, 0xe5dd, 0x4ad0, 0x219f, 0x8aa6, 0x1779, 0x1, 0x0);
        gbc.writeMem(0xebcb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe5dd);
        EXPECT(gbc.pc(), 0xebcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebcb), 0xcb);
        EXPECT(gbc.readMem(0xebcc), 0xaf);
        // CB AF 0039
        gbc.setState(0x149a, 0xd36f, 0x2410, 0x3293, 0x6970, 0xb9c7, 0x1, 0x0);
        gbc.writeMem(0x149a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd36f);
        EXPECT(gbc.pc(), 0x149c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 003A
        gbc.setState(0xbe64, 0x6d1c, 0x1d10, 0x6ed3, 0x2db1, 0xeda8, 0x0, 0x0);
        gbc.writeMem(0xbe64, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6d1c);
        EXPECT(gbc.pc(), 0xbe66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe64), 0xcb);
        EXPECT(gbc.readMem(0xbe65), 0xaf);
        // CB AF 003B
        gbc.setState(0xc5cd, 0x2d2c, 0xb630, 0x474a, 0xf4f7, 0xd411, 0x0, 0x1);
        gbc.writeMem(0xc5cd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2d2c);
        EXPECT(gbc.pc(), 0xc5cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5cd), 0xcb);
        EXPECT(gbc.readMem(0xc5ce), 0xaf);
        // CB AF 003C
        gbc.setState(0x7ec, 0xe944, 0x53f0, 0xd2d7, 0x7f4e, 0x2f72, 0x0, 0x1);
        gbc.writeMem(0x7ec, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe944);
        EXPECT(gbc.pc(), 0x7ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 003D
        gbc.setState(0x408d, 0x63c1, 0x5460, 0x9711, 0x334, 0x376e, 0x0, 0x0);
        gbc.writeMem(0x408d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x63c1);
        EXPECT(gbc.pc(), 0x408f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 003E
        gbc.setState(0xef34, 0x69e6, 0xf790, 0x846d, 0xa1e9, 0x1c04, 0x1, 0x1);
        gbc.writeMem(0xef34, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x69e6);
        EXPECT(gbc.pc(), 0xef36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef34), 0xcb);
        EXPECT(gbc.readMem(0xef35), 0xaf);
        // CB AF 003F
        gbc.setState(0x1284, 0x5012, 0x3c30, 0x69a, 0xa0c7, 0x3b5e, 0x1, 0x0);
        gbc.writeMem(0x1284, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5012);
        EXPECT(gbc.pc(), 0x1286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0040
        gbc.setState(0xf0a, 0x6294, 0x1220, 0xec1a, 0x9606, 0x5906, 0x0, 0x1);
        gbc.writeMem(0xf0a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x6294);
        EXPECT(gbc.pc(), 0xf0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0041
        gbc.setState(0x213c, 0xf416, 0xda20, 0x1569, 0x8dab, 0x6eb2, 0x0, 0x0);
        gbc.writeMem(0x213c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf416);
        EXPECT(gbc.pc(), 0x213e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0042
        gbc.setState(0x624b, 0xf2b2, 0x1a00, 0xa781, 0x7e2b, 0x4683, 0x0, 0x1);
        gbc.writeMem(0x624b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf2b2);
        EXPECT(gbc.pc(), 0x624d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0043
        gbc.setState(0x33c9, 0xae1d, 0xe30, 0xec2f, 0x158d, 0x964a, 0x1, 0x1);
        gbc.writeMem(0x33c9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xae1d);
        EXPECT(gbc.pc(), 0x33cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0044
        gbc.setState(0x46c4, 0xb872, 0x1500, 0x6ce1, 0x5c86, 0x1d53, 0x0, 0x1);
        gbc.writeMem(0x46c4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb872);
        EXPECT(gbc.pc(), 0x46c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0045
        gbc.setState(0xca1, 0x39d5, 0xa540, 0x2f34, 0x27b4, 0x289c, 0x1, 0x0);
        gbc.writeMem(0xca1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x39d5);
        EXPECT(gbc.pc(), 0xca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0046
        gbc.setState(0x8af2, 0x49fe, 0xe930, 0xd978, 0x5eaa, 0xab16, 0x0, 0x0);
        gbc.writeMem(0x8af2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x49fe);
        EXPECT(gbc.pc(), 0x8af4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8af2), 0xcb);
        EXPECT(gbc.readMem(0x8af3), 0xaf);
        // CB AF 0047
        gbc.setState(0xb151, 0xe21b, 0x2460, 0xc6a0, 0x15a, 0x6452, 0x1, 0x0);
        gbc.writeMem(0xb151, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe21b);
        EXPECT(gbc.pc(), 0xb153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb151), 0xcb);
        EXPECT(gbc.readMem(0xb152), 0xaf);
        // CB AF 0048
        gbc.setState(0xdbfc, 0x7571, 0xeca0, 0x94f, 0x1987, 0x9ef9, 0x1, 0x0);
        gbc.writeMem(0xdbfc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x7571);
        EXPECT(gbc.pc(), 0xdbfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbfc), 0xcb);
        EXPECT(gbc.readMem(0xdbfd), 0xaf);
        // CB AF 0049
        gbc.setState(0x5cc3, 0xefb9, 0xc050, 0x245a, 0x8d60, 0x733, 0x1, 0x0);
        gbc.writeMem(0x5cc3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xefb9);
        EXPECT(gbc.pc(), 0x5cc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 004A
        gbc.setState(0x6c13, 0x5706, 0xfb0, 0xc5a0, 0x2f4b, 0x4ba4, 0x1, 0x0);
        gbc.writeMem(0x6c13, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5706);
        EXPECT(gbc.pc(), 0x6c15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 004B
        gbc.setState(0xc6ea, 0xbbba, 0x6120, 0x403d, 0x98b8, 0x5240, 0x0, 0x1);
        gbc.writeMem(0xc6ea, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbbba);
        EXPECT(gbc.pc(), 0xc6ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ea), 0xcb);
        EXPECT(gbc.readMem(0xc6eb), 0xaf);
        // CB AF 004C
        gbc.setState(0xe7f0, 0xd16d, 0xde90, 0x39b6, 0xfc22, 0xbd68, 0x0, 0x1);
        gbc.writeMem(0xe7f0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd16d);
        EXPECT(gbc.pc(), 0xe7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f0), 0xcb);
        EXPECT(gbc.readMem(0xe7f1), 0xaf);
        // CB AF 004D
        gbc.setState(0xad4a, 0xea8b, 0x6a80, 0xe0d2, 0xfeb8, 0x7874, 0x1, 0x1);
        gbc.writeMem(0xad4a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xea8b);
        EXPECT(gbc.pc(), 0xad4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4a), 0xcb);
        EXPECT(gbc.readMem(0xad4b), 0xaf);
        // CB AF 004E
        gbc.setState(0x7da2, 0xc66d, 0x5fc0, 0x1886, 0xaa96, 0x706d, 0x0, 0x1);
        gbc.writeMem(0x7da2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc66d);
        EXPECT(gbc.pc(), 0x7da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 004F
        gbc.setState(0xccc1, 0x1226, 0xcf40, 0xcc42, 0xec0d, 0x6a71, 0x0, 0x1);
        gbc.writeMem(0xccc1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x1226);
        EXPECT(gbc.pc(), 0xccc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc1), 0xcb);
        EXPECT(gbc.readMem(0xccc2), 0xaf);
        // CB AF 0050
        gbc.setState(0x6c24, 0xf543, 0x1cf0, 0xdc74, 0x8b47, 0x213d, 0x1, 0x1);
        gbc.writeMem(0x6c24, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf543);
        EXPECT(gbc.pc(), 0x6c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0051
        gbc.setState(0x6485, 0xe7c5, 0x88e0, 0xfcc3, 0x9dea, 0xe6c, 0x1, 0x1);
        gbc.writeMem(0x6485, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe7c5);
        EXPECT(gbc.pc(), 0x6487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0052
        gbc.setState(0x5620, 0x9a1, 0xaf50, 0x1ae7, 0x6356, 0x18e5, 0x1, 0x0);
        gbc.writeMem(0x5620, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9a1);
        EXPECT(gbc.pc(), 0x5622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0053
        gbc.setState(0x1eb5, 0x8036, 0x4bd0, 0xd2c, 0x413f, 0xc9b4, 0x0, 0x1);
        gbc.writeMem(0x1eb5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8036);
        EXPECT(gbc.pc(), 0x1eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0054
        gbc.setState(0x1123, 0xe191, 0x6ab0, 0x731a, 0xfaa3, 0x4981, 0x0, 0x0);
        gbc.writeMem(0x1123, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe191);
        EXPECT(gbc.pc(), 0x1125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0055
        gbc.setState(0xd21f, 0xc85b, 0xa130, 0x6c4b, 0x9021, 0xd14e, 0x0, 0x0);
        gbc.writeMem(0xd21f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc85b);
        EXPECT(gbc.pc(), 0xd221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd21f), 0xcb);
        EXPECT(gbc.readMem(0xd220), 0xaf);
        // CB AF 0056
        gbc.setState(0xa595, 0x97d0, 0xb020, 0x4399, 0x4abe, 0x379e, 0x0, 0x0);
        gbc.writeMem(0xa595, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x97d0);
        EXPECT(gbc.pc(), 0xa597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa595), 0xcb);
        EXPECT(gbc.readMem(0xa596), 0xaf);
        // CB AF 0057
        gbc.setState(0x668f, 0x1177, 0x7c0, 0x725e, 0x360a, 0xc557, 0x0, 0x0);
        gbc.writeMem(0x668f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1177);
        EXPECT(gbc.pc(), 0x6691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0058
        gbc.setState(0xb84, 0x4897, 0xdff0, 0x8983, 0xacf4, 0xb905, 0x1, 0x1);
        gbc.writeMem(0xb84, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4897);
        EXPECT(gbc.pc(), 0xb86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0059
        gbc.setState(0xa95e, 0xe224, 0x3bf0, 0xcfd1, 0x2e2d, 0xdcbb, 0x0, 0x0);
        gbc.writeMem(0xa95e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe224);
        EXPECT(gbc.pc(), 0xa960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa95e), 0xcb);
        EXPECT(gbc.readMem(0xa95f), 0xaf);
        // CB AF 005A
        gbc.setState(0x3c06, 0x6dc6, 0xd720, 0x29d0, 0x40e9, 0x7157, 0x0, 0x0);
        gbc.writeMem(0x3c06, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6dc6);
        EXPECT(gbc.pc(), 0x3c08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 005B
        gbc.setState(0x301f, 0xa4f1, 0xa890, 0xc60d, 0x41a4, 0x8cad, 0x1, 0x1);
        gbc.writeMem(0x301f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa4f1);
        EXPECT(gbc.pc(), 0x3021);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 005C
        gbc.setState(0x5ae8, 0x7f07, 0x6190, 0x5a13, 0x9565, 0xc158, 0x0, 0x1);
        gbc.writeMem(0x5ae8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7f07);
        EXPECT(gbc.pc(), 0x5aea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 005D
        gbc.setState(0x3b1b, 0x277d, 0x6400, 0x7f1f, 0xcd63, 0x1d58, 0x1, 0x1);
        gbc.writeMem(0x3b1b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x277d);
        EXPECT(gbc.pc(), 0x3b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 005E
        gbc.setState(0xaeb7, 0xacdd, 0x640, 0xfa0, 0xdf62, 0x62f9, 0x0, 0x1);
        gbc.writeMem(0xaeb7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xacdd);
        EXPECT(gbc.pc(), 0xaeb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeb7), 0xcb);
        EXPECT(gbc.readMem(0xaeb8), 0xaf);
        // CB AF 005F
        gbc.setState(0x8665, 0x4057, 0x9800, 0x8932, 0x5c33, 0xb580, 0x1, 0x1);
        gbc.writeMem(0x8665, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4057);
        EXPECT(gbc.pc(), 0x8667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8665), 0xcb);
        EXPECT(gbc.readMem(0x8666), 0xaf);
        // CB AF 0060
        gbc.setState(0x2da7, 0x4969, 0xbc20, 0xc328, 0xfb94, 0xd112, 0x1, 0x1);
        gbc.writeMem(0x2da7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4969);
        EXPECT(gbc.pc(), 0x2da9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0061
        gbc.setState(0x2e4d, 0xea09, 0x4240, 0x3c16, 0x2d19, 0xc4db, 0x1, 0x1);
        gbc.writeMem(0x2e4d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xea09);
        EXPECT(gbc.pc(), 0x2e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0062
        gbc.setState(0x125c, 0xa53b, 0x8e00, 0x262b, 0xfcd1, 0xc0b1, 0x1, 0x0);
        gbc.writeMem(0x125c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa53b);
        EXPECT(gbc.pc(), 0x125e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0063
        gbc.setState(0xe48a, 0x90b1, 0xde20, 0x8d68, 0x54c1, 0x5bc6, 0x1, 0x1);
        gbc.writeMem(0xe48a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x90b1);
        EXPECT(gbc.pc(), 0xe48c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe48a), 0xcb);
        EXPECT(gbc.readMem(0xe48b), 0xaf);
        // CB AF 0064
        gbc.setState(0xfff, 0xeb29, 0xf930, 0x614e, 0xf7c5, 0x2291, 0x0, 0x0);
        gbc.writeMem(0xfff, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xeb29);
        EXPECT(gbc.pc(), 0x1001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0065
        gbc.setState(0x899c, 0xfdb2, 0x6c80, 0x2d86, 0xff38, 0xf6a4, 0x0, 0x0);
        gbc.writeMem(0x899c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xfdb2);
        EXPECT(gbc.pc(), 0x899e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899c), 0xcb);
        EXPECT(gbc.readMem(0x899d), 0xaf);
        // CB AF 0066
        gbc.setState(0x4291, 0x719c, 0x9f20, 0x3f88, 0x9b9c, 0x3508, 0x1, 0x1);
        gbc.writeMem(0x4291, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x719c);
        EXPECT(gbc.pc(), 0x4293);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0067
        gbc.setState(0x3b68, 0xe101, 0x3a50, 0x3901, 0x82d, 0xaa42, 0x0, 0x0);
        gbc.writeMem(0x3b68, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe101);
        EXPECT(gbc.pc(), 0x3b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0068
        gbc.setState(0x89e2, 0xa088, 0x6320, 0x3880, 0xa293, 0x30aa, 0x0, 0x1);
        gbc.writeMem(0x89e2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa088);
        EXPECT(gbc.pc(), 0x89e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e2), 0xcb);
        EXPECT(gbc.readMem(0x89e3), 0xaf);
        // CB AF 0069
        gbc.setState(0xbdd4, 0xfce7, 0x6af0, 0xabb8, 0xb51a, 0x60a2, 0x0, 0x0);
        gbc.writeMem(0xbdd4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfce7);
        EXPECT(gbc.pc(), 0xbdd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdd4), 0xcb);
        EXPECT(gbc.readMem(0xbdd5), 0xaf);
        // CB AF 006A
        gbc.setState(0xe94, 0xf2f5, 0xdad0, 0xc554, 0xd3a1, 0x33af, 0x1, 0x0);
        gbc.writeMem(0xe94, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf2f5);
        EXPECT(gbc.pc(), 0xe96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 006B
        gbc.setState(0x6f10, 0x930, 0x2350, 0x2e4e, 0xfdc3, 0x4e69, 0x1, 0x1);
        gbc.writeMem(0x6f10, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x930);
        EXPECT(gbc.pc(), 0x6f12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 006C
        gbc.setState(0xa323, 0x856f, 0xaa20, 0xd0e, 0x36c1, 0x54c1, 0x0, 0x0);
        gbc.writeMem(0xa323, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x856f);
        EXPECT(gbc.pc(), 0xa325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa323), 0xcb);
        EXPECT(gbc.readMem(0xa324), 0xaf);
        // CB AF 006D
        gbc.setState(0x5a14, 0x3bbd, 0xec20, 0x3d13, 0x32bb, 0xaf8e, 0x1, 0x1);
        gbc.writeMem(0x5a14, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3bbd);
        EXPECT(gbc.pc(), 0x5a16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 006E
        gbc.setState(0xb53c, 0x6fe, 0x51e0, 0xf98c, 0x4118, 0x93, 0x1, 0x0);
        gbc.writeMem(0xb53c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6fe);
        EXPECT(gbc.pc(), 0xb53e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb53c), 0xcb);
        EXPECT(gbc.readMem(0xb53d), 0xaf);
        // CB AF 006F
        gbc.setState(0x7dec, 0xb865, 0xd6c0, 0x17b3, 0x1f71, 0x6c, 0x1, 0x1);
        gbc.writeMem(0x7dec, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb865);
        EXPECT(gbc.pc(), 0x7dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0070
        gbc.setState(0x5e92, 0xe764, 0xa670, 0xf286, 0xaed5, 0x18e, 0x1, 0x1);
        gbc.writeMem(0x5e92, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe764);
        EXPECT(gbc.pc(), 0x5e94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0071
        gbc.setState(0x3a34, 0x9c86, 0x3b10, 0xfcc0, 0x2d4e, 0xaac3, 0x0, 0x1);
        gbc.writeMem(0x3a34, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9c86);
        EXPECT(gbc.pc(), 0x3a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0072
        gbc.setState(0x4e42, 0x1e15, 0x4c30, 0x9b85, 0x4e47, 0x767c, 0x1, 0x1);
        gbc.writeMem(0x4e42, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1e15);
        EXPECT(gbc.pc(), 0x4e44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0073
        gbc.setState(0xae42, 0x4eb4, 0xd930, 0xcd8d, 0xe36c, 0x550d, 0x1, 0x1);
        gbc.writeMem(0xae42, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4eb4);
        EXPECT(gbc.pc(), 0xae44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae42), 0xcb);
        EXPECT(gbc.readMem(0xae43), 0xaf);
        // CB AF 0074
        gbc.setState(0x69e8, 0x91f0, 0xc430, 0xb78e, 0x3d30, 0x6c16, 0x0, 0x0);
        gbc.writeMem(0x69e8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x91f0);
        EXPECT(gbc.pc(), 0x69ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0075
        gbc.setState(0xa61a, 0xcc00, 0xa760, 0x4902, 0x5f54, 0xc58e, 0x0, 0x0);
        gbc.writeMem(0xa61a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xcc00);
        EXPECT(gbc.pc(), 0xa61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa61a), 0xcb);
        EXPECT(gbc.readMem(0xa61b), 0xaf);
        // CB AF 0076
        gbc.setState(0x7756, 0x6a49, 0x87d0, 0xc41c, 0x76ed, 0x8fff, 0x0, 0x1);
        gbc.writeMem(0x7756, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6a49);
        EXPECT(gbc.pc(), 0x7758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0077
        gbc.setState(0xae16, 0xeed1, 0x29f0, 0xc7a1, 0x3e38, 0xe831, 0x1, 0x0);
        gbc.writeMem(0xae16, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xeed1);
        EXPECT(gbc.pc(), 0xae18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae16), 0xcb);
        EXPECT(gbc.readMem(0xae17), 0xaf);
        // CB AF 0078
        gbc.setState(0x772c, 0x2e24, 0x6640, 0xf00c, 0x29b, 0xdbb3, 0x1, 0x1);
        gbc.writeMem(0x772c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x2e24);
        EXPECT(gbc.pc(), 0x772e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0079
        gbc.setState(0xb901, 0x3ec, 0x4250, 0xad95, 0xc435, 0x68db, 0x1, 0x1);
        gbc.writeMem(0xb901, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3ec);
        EXPECT(gbc.pc(), 0xb903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb901), 0xcb);
        EXPECT(gbc.readMem(0xb902), 0xaf);
        // CB AF 007A
        gbc.setState(0xa361, 0x3c0a, 0x1d70, 0xb26d, 0x6c33, 0x6518, 0x0, 0x1);
        gbc.writeMem(0xa361, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3c0a);
        EXPECT(gbc.pc(), 0xa363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa361), 0xcb);
        EXPECT(gbc.readMem(0xa362), 0xaf);
        // CB AF 007B
        gbc.setState(0x5d09, 0x4a83, 0x5cf0, 0x2c73, 0x6aa4, 0xacc0, 0x0, 0x1);
        gbc.writeMem(0x5d09, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4a83);
        EXPECT(gbc.pc(), 0x5d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 007D
        gbc.setState(0xe5c1, 0xa0cd, 0xe290, 0x4d83, 0x42e6, 0x2904, 0x0, 0x1);
        gbc.writeMem(0xe5c1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa0cd);
        EXPECT(gbc.pc(), 0xe5c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c1), 0xcb);
        EXPECT(gbc.readMem(0xe5c2), 0xaf);
        // CB AF 007E
        gbc.setState(0xa905, 0x2117, 0xa6c0, 0x6587, 0x7eb0, 0x2354, 0x1, 0x0);
        gbc.writeMem(0xa905, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2117);
        EXPECT(gbc.pc(), 0xa907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa905), 0xcb);
        EXPECT(gbc.readMem(0xa906), 0xaf);
        // CB AF 007F
        gbc.setState(0x5ae1, 0x39c6, 0xf280, 0xfce8, 0x933c, 0x40e9, 0x0, 0x0);
        gbc.writeMem(0x5ae1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x39c6);
        EXPECT(gbc.pc(), 0x5ae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0080
        gbc.setState(0xdcef, 0x9585, 0xf920, 0x31e1, 0x7d61, 0x81d4, 0x1, 0x1);
        gbc.writeMem(0xdcef, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9585);
        EXPECT(gbc.pc(), 0xdcf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcef), 0xcb);
        EXPECT(gbc.readMem(0xdcf0), 0xaf);
        // CB AF 0081
        gbc.setState(0x1cd3, 0xbd60, 0xb160, 0xac70, 0x3808, 0xdb30, 0x0, 0x1);
        gbc.writeMem(0x1cd3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbd60);
        EXPECT(gbc.pc(), 0x1cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0082
        gbc.setState(0x2397, 0x9c26, 0xa3f0, 0x9bf4, 0xdbfe, 0xaf45, 0x0, 0x0);
        gbc.writeMem(0x2397, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9c26);
        EXPECT(gbc.pc(), 0x2399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0083
        gbc.setState(0x15ad, 0x77c3, 0x1ee0, 0x1186, 0xe156, 0x7091, 0x0, 0x1);
        gbc.writeMem(0x15ad, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x77c3);
        EXPECT(gbc.pc(), 0x15af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0084
        gbc.setState(0xd7c0, 0x3cb3, 0x5bb0, 0xa464, 0xbcf4, 0x2d42, 0x1, 0x1);
        gbc.writeMem(0xd7c0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3cb3);
        EXPECT(gbc.pc(), 0xd7c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7c0), 0xcb);
        EXPECT(gbc.readMem(0xd7c1), 0xaf);
        // CB AF 0085
        gbc.setState(0xee6e, 0x6190, 0x7980, 0x26fd, 0x4942, 0x250b, 0x1, 0x1);
        gbc.writeMem(0xee6e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6190);
        EXPECT(gbc.pc(), 0xee70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee6e), 0xcb);
        EXPECT(gbc.readMem(0xee6f), 0xaf);
        // CB AF 0086
        gbc.setState(0xa23c, 0xc05a, 0x6360, 0xbab8, 0xcdd6, 0x787c, 0x0, 0x1);
        gbc.writeMem(0xa23c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc05a);
        EXPECT(gbc.pc(), 0xa23e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa23c), 0xcb);
        EXPECT(gbc.readMem(0xa23d), 0xaf);
        // CB AF 0087
        gbc.setState(0x2c36, 0x25b, 0x1be0, 0xae7c, 0x9959, 0xf8dc, 0x1, 0x1);
        gbc.writeMem(0x2c36, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x25b);
        EXPECT(gbc.pc(), 0x2c38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0088
        gbc.setState(0xe1e4, 0xf16a, 0x8840, 0xa133, 0x691d, 0x9d3f, 0x0, 0x0);
        gbc.writeMem(0xe1e4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf16a);
        EXPECT(gbc.pc(), 0xe1e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e4), 0xcb);
        EXPECT(gbc.readMem(0xe1e5), 0xaf);
        // CB AF 0089
        gbc.setState(0xdb74, 0x8129, 0xd6b0, 0x5170, 0x330b, 0xfff1, 0x1, 0x0);
        gbc.writeMem(0xdb74, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8129);
        EXPECT(gbc.pc(), 0xdb76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb74), 0xcb);
        EXPECT(gbc.readMem(0xdb75), 0xaf);
        // CB AF 008A
        gbc.setState(0x9222, 0x1b38, 0x80c0, 0x59fb, 0xfaad, 0xa30a, 0x0, 0x1);
        gbc.writeMem(0x9222, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1b38);
        EXPECT(gbc.pc(), 0x9224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9222), 0xcb);
        EXPECT(gbc.readMem(0x9223), 0xaf);
        // CB AF 008B
        gbc.setState(0x8a59, 0x7599, 0x4940, 0x7df7, 0xd9c7, 0x71dd, 0x1, 0x0);
        gbc.writeMem(0x8a59, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7599);
        EXPECT(gbc.pc(), 0x8a5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a59), 0xcb);
        EXPECT(gbc.readMem(0x8a5a), 0xaf);
        // CB AF 008C
        gbc.setState(0xd6d6, 0x379e, 0xaeb0, 0x28e8, 0xd4ed, 0x2b8c, 0x0, 0x1);
        gbc.writeMem(0xd6d6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x379e);
        EXPECT(gbc.pc(), 0xd6d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6d6), 0xcb);
        EXPECT(gbc.readMem(0xd6d7), 0xaf);
        // CB AF 008D
        gbc.setState(0xd8c7, 0x9435, 0x3870, 0xa9c4, 0xd1d6, 0xc165, 0x1, 0x0);
        gbc.writeMem(0xd8c7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9435);
        EXPECT(gbc.pc(), 0xd8c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c7), 0xcb);
        EXPECT(gbc.readMem(0xd8c8), 0xaf);
        // CB AF 008E
        gbc.setState(0xee04, 0x9840, 0x7ec0, 0x589c, 0xa9e0, 0x178c, 0x1, 0x1);
        gbc.writeMem(0xee04, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9840);
        EXPECT(gbc.pc(), 0xee06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee04), 0xcb);
        EXPECT(gbc.readMem(0xee05), 0xaf);
        // CB AF 008F
        gbc.setState(0x702, 0x35d8, 0x56e0, 0x14b9, 0x6cec, 0x1ccd, 0x0, 0x0);
        gbc.writeMem(0x702, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x35d8);
        EXPECT(gbc.pc(), 0x704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0090
        gbc.setState(0xb282, 0x8ba3, 0x1150, 0x5d2d, 0x8d73, 0xb7e7, 0x0, 0x1);
        gbc.writeMem(0xb282, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8ba3);
        EXPECT(gbc.pc(), 0xb284);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb282), 0xcb);
        EXPECT(gbc.readMem(0xb283), 0xaf);
        // CB AF 0091
        gbc.setState(0x41f4, 0x4da9, 0x6790, 0x1038, 0xf4c6, 0x9eee, 0x1, 0x0);
        gbc.writeMem(0x41f4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4da9);
        EXPECT(gbc.pc(), 0x41f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0092
        gbc.setState(0x40d2, 0x839f, 0xfa0, 0xde9b, 0x6dbb, 0x3430, 0x1, 0x1);
        gbc.writeMem(0x40d2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x839f);
        EXPECT(gbc.pc(), 0x40d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0093
        gbc.setState(0x3f8d, 0xcf70, 0x9ea0, 0xdcae, 0x813c, 0xc9d5, 0x0, 0x0);
        gbc.writeMem(0x3f8d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcf70);
        EXPECT(gbc.pc(), 0x3f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0094
        gbc.setState(0x229f, 0xfd8d, 0x1c30, 0x7d39, 0xf671, 0x7d13, 0x0, 0x1);
        gbc.writeMem(0x229f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xfd8d);
        EXPECT(gbc.pc(), 0x22a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0095
        gbc.setState(0xdf33, 0xb07, 0x2390, 0x7bba, 0x5dce, 0x7230, 0x0, 0x1);
        gbc.writeMem(0xdf33, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb07);
        EXPECT(gbc.pc(), 0xdf35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf33), 0xcb);
        EXPECT(gbc.readMem(0xdf34), 0xaf);
        // CB AF 0096
        gbc.setState(0x3e91, 0xa6c8, 0xb7e0, 0x3ff, 0x1ac0, 0x9998, 0x0, 0x0);
        gbc.writeMem(0x3e91, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa6c8);
        EXPECT(gbc.pc(), 0x3e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0097
        gbc.setState(0x5ad5, 0x4da, 0x37c0, 0x8bd6, 0xc1f3, 0x1fb9, 0x1, 0x0);
        gbc.writeMem(0x5ad5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4da);
        EXPECT(gbc.pc(), 0x5ad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0098
        gbc.setState(0x261c, 0x9990, 0x1920, 0xb405, 0xf850, 0xe3c0, 0x0, 0x1);
        gbc.writeMem(0x261c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9990);
        EXPECT(gbc.pc(), 0x261e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0099
        gbc.setState(0xe80, 0x67, 0x2f70, 0xf68a, 0x6dbb, 0xabf1, 0x1, 0x0);
        gbc.writeMem(0xe80, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x67);
        EXPECT(gbc.pc(), 0xe82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 009A
        gbc.setState(0x8e64, 0xef62, 0x5210, 0x927e, 0x3550, 0x8246, 0x0, 0x1);
        gbc.writeMem(0x8e64, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xef62);
        EXPECT(gbc.pc(), 0x8e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e64), 0xcb);
        EXPECT(gbc.readMem(0x8e65), 0xaf);
        // CB AF 009B
        gbc.setState(0xcfb5, 0x5379, 0x6dd0, 0xe6bd, 0x5989, 0xe957, 0x1, 0x1);
        gbc.writeMem(0xcfb5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5379);
        EXPECT(gbc.pc(), 0xcfb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb5), 0xcb);
        EXPECT(gbc.readMem(0xcfb6), 0xaf);
        // CB AF 009C
        gbc.setState(0x4127, 0x6689, 0x86d0, 0x44fc, 0x1e5a, 0xa9ec, 0x0, 0x1);
        gbc.writeMem(0x4127, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6689);
        EXPECT(gbc.pc(), 0x4129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 009D
        gbc.setState(0xce6f, 0x49b0, 0x6a80, 0xef26, 0x85e8, 0xfa76, 0x0, 0x0);
        gbc.writeMem(0xce6f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x49b0);
        EXPECT(gbc.pc(), 0xce71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce6f), 0xcb);
        EXPECT(gbc.readMem(0xce70), 0xaf);
        // CB AF 009E
        gbc.setState(0x1e8c, 0x7959, 0xa6f0, 0xc314, 0x6465, 0xf7b7, 0x0, 0x0);
        gbc.writeMem(0x1e8c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7959);
        EXPECT(gbc.pc(), 0x1e8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 009F
        gbc.setState(0x691, 0x86c2, 0x4380, 0x2a0c, 0x97f0, 0xa560, 0x0, 0x1);
        gbc.writeMem(0x691, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x86c2);
        EXPECT(gbc.pc(), 0x693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00A0
        gbc.setState(0xc664, 0x4e11, 0x8850, 0xec60, 0x14dc, 0x7890, 0x1, 0x1);
        gbc.writeMem(0xc664, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4e11);
        EXPECT(gbc.pc(), 0xc666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc664), 0xcb);
        EXPECT(gbc.readMem(0xc665), 0xaf);
        // CB AF 00A1
        gbc.setState(0x8fa4, 0xb303, 0xbb80, 0x1b84, 0xede2, 0xacd6, 0x1, 0x0);
        gbc.writeMem(0x8fa4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb303);
        EXPECT(gbc.pc(), 0x8fa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa4), 0xcb);
        EXPECT(gbc.readMem(0x8fa5), 0xaf);
        // CB AF 00A2
        gbc.setState(0x25ce, 0xcdb5, 0xfb70, 0xf53e, 0x2f75, 0xf4a3, 0x1, 0x1);
        gbc.writeMem(0x25ce, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcdb5);
        EXPECT(gbc.pc(), 0x25d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00A3
        gbc.setState(0x135a, 0x4c11, 0x3700, 0x23ca, 0xd0fa, 0x4c27, 0x0, 0x0);
        gbc.writeMem(0x135a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4c11);
        EXPECT(gbc.pc(), 0x135c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00A5
        gbc.setState(0xecbc, 0xa0fb, 0xac00, 0x25d8, 0x7a6c, 0xc916, 0x0, 0x0);
        gbc.writeMem(0xecbc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa0fb);
        EXPECT(gbc.pc(), 0xecbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbc), 0xcb);
        EXPECT(gbc.readMem(0xecbd), 0xaf);
        // CB AF 00A6
        gbc.setState(0xccf9, 0x953d, 0x4c60, 0xf5f6, 0x66ee, 0xeb9c, 0x1, 0x0);
        gbc.writeMem(0xccf9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x953d);
        EXPECT(gbc.pc(), 0xccfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccf9), 0xcb);
        EXPECT(gbc.readMem(0xccfa), 0xaf);
        // CB AF 00A7
        gbc.setState(0xe181, 0x6b84, 0x6a30, 0x90aa, 0xd253, 0x1023, 0x0, 0x1);
        gbc.writeMem(0xe181, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6b84);
        EXPECT(gbc.pc(), 0xe183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe181), 0xcb);
        EXPECT(gbc.readMem(0xe182), 0xaf);
        // CB AF 00A8
        gbc.setState(0x6d79, 0xf07c, 0xc800, 0xecf6, 0x8c7a, 0xab7a, 0x0, 0x0);
        gbc.writeMem(0x6d79, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf07c);
        EXPECT(gbc.pc(), 0x6d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00A9
        gbc.setState(0xd5c3, 0xb84a, 0xb720, 0x3c9c, 0x6442, 0x746a, 0x1, 0x0);
        gbc.writeMem(0xd5c3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb84a);
        EXPECT(gbc.pc(), 0xd5c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5c3), 0xcb);
        EXPECT(gbc.readMem(0xd5c4), 0xaf);
        // CB AF 00AA
        gbc.setState(0x5d86, 0xf2b4, 0x51d0, 0x4568, 0xf993, 0xece4, 0x0, 0x1);
        gbc.writeMem(0x5d86, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf2b4);
        EXPECT(gbc.pc(), 0x5d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00AB
        gbc.setState(0x7e00, 0x607d, 0x9570, 0xf112, 0x638a, 0xeb95, 0x0, 0x0);
        gbc.writeMem(0x7e00, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x607d);
        EXPECT(gbc.pc(), 0x7e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00AC
        gbc.setState(0x398c, 0x96fc, 0x9e80, 0x893d, 0xfe0a, 0x64fd, 0x0, 0x0);
        gbc.writeMem(0x398c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x96fc);
        EXPECT(gbc.pc(), 0x398e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00AD
        gbc.setState(0xb858, 0xf5ae, 0xb340, 0xbe66, 0x355b, 0x98af, 0x0, 0x1);
        gbc.writeMem(0xb858, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf5ae);
        EXPECT(gbc.pc(), 0xb85a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb858), 0xcb);
        EXPECT(gbc.readMem(0xb859), 0xaf);
        // CB AF 00AE
        gbc.setState(0x5814, 0x6753, 0x5060, 0x9a7, 0xad3a, 0x4f, 0x1, 0x0);
        gbc.writeMem(0x5814, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6753);
        EXPECT(gbc.pc(), 0x5816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00AF
        gbc.setState(0x8b12, 0x4a6c, 0x7680, 0xaf50, 0x58df, 0x497, 0x1, 0x1);
        gbc.writeMem(0x8b12, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4a6c);
        EXPECT(gbc.pc(), 0x8b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b12), 0xcb);
        EXPECT(gbc.readMem(0x8b13), 0xaf);
        // CB AF 00B0
        gbc.setState(0x753c, 0x46f6, 0x8ca0, 0xd517, 0xfdf9, 0x9b74, 0x0, 0x1);
        gbc.writeMem(0x753c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x46f6);
        EXPECT(gbc.pc(), 0x753e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00B1
        gbc.setState(0x6578, 0xd987, 0x9e20, 0xce8, 0x7619, 0xf7fe, 0x0, 0x0);
        gbc.writeMem(0x6578, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd987);
        EXPECT(gbc.pc(), 0x657a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00B2
        gbc.setState(0x1575, 0x19d3, 0xf8e0, 0xe37d, 0xd261, 0xe851, 0x1, 0x1);
        gbc.writeMem(0x1575, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x19d3);
        EXPECT(gbc.pc(), 0x1577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00B3
        gbc.setState(0x471a, 0x8acb, 0x7c00, 0x2fa4, 0xbd28, 0xdb9c, 0x1, 0x1);
        gbc.writeMem(0x471a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8acb);
        EXPECT(gbc.pc(), 0x471c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00B4
        gbc.setState(0x431c, 0x7c08, 0xa0e0, 0x863e, 0x75b1, 0x25e, 0x1, 0x0);
        gbc.writeMem(0x431c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7c08);
        EXPECT(gbc.pc(), 0x431e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00B5
        gbc.setState(0x9021, 0x94fe, 0x7990, 0x2bcf, 0xcb9c, 0x7817, 0x1, 0x1);
        gbc.writeMem(0x9021, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x94fe);
        EXPECT(gbc.pc(), 0x9023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9021), 0xcb);
        EXPECT(gbc.readMem(0x9022), 0xaf);
        // CB AF 00B6
        gbc.setState(0x7813, 0xb2dd, 0x650, 0x125, 0x99e4, 0x691d, 0x1, 0x0);
        gbc.writeMem(0x7813, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb2dd);
        EXPECT(gbc.pc(), 0x7815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00B7
        gbc.setState(0x60c3, 0xa212, 0x250, 0xd22e, 0x13d4, 0xcdd4, 0x1, 0x1);
        gbc.writeMem(0x60c3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa212);
        EXPECT(gbc.pc(), 0x60c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00B8
        gbc.setState(0xa811, 0x1cc5, 0xcec0, 0x7a17, 0xdda1, 0x7fa6, 0x0, 0x1);
        gbc.writeMem(0xa811, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1cc5);
        EXPECT(gbc.pc(), 0xa813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa811), 0xcb);
        EXPECT(gbc.readMem(0xa812), 0xaf);
        // CB AF 00B9
        gbc.setState(0x7995, 0x4958, 0x8100, 0x54ea, 0x5183, 0xd81f, 0x0, 0x1);
        gbc.writeMem(0x7995, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4958);
        EXPECT(gbc.pc(), 0x7997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00BA
        gbc.setState(0xebc0, 0xab9e, 0x3110, 0xea7b, 0x8445, 0x17fc, 0x1, 0x1);
        gbc.writeMem(0xebc0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xab9e);
        EXPECT(gbc.pc(), 0xebc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebc0), 0xcb);
        EXPECT(gbc.readMem(0xebc1), 0xaf);
        // CB AF 00BB
        gbc.setState(0xe764, 0xe051, 0x8c20, 0x71b2, 0xa5d, 0x7925, 0x1, 0x0);
        gbc.writeMem(0xe764, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe051);
        EXPECT(gbc.pc(), 0xe766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe764), 0xcb);
        EXPECT(gbc.readMem(0xe765), 0xaf);
        // CB AF 00BC
        gbc.setState(0x2647, 0x27f5, 0xa90, 0xe4d, 0xce25, 0x474, 0x0, 0x0);
        gbc.writeMem(0x2647, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x27f5);
        EXPECT(gbc.pc(), 0x2649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00BD
        gbc.setState(0x22cd, 0x8662, 0x9ac0, 0xf943, 0x7c56, 0x179e, 0x1, 0x0);
        gbc.writeMem(0x22cd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8662);
        EXPECT(gbc.pc(), 0x22cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00BE
        gbc.setState(0xcb9a, 0x9801, 0xf770, 0xfaa9, 0x8b42, 0x9f9f, 0x1, 0x1);
        gbc.writeMem(0xcb9a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9801);
        EXPECT(gbc.pc(), 0xcb9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb9a), 0xcb);
        EXPECT(gbc.readMem(0xcb9b), 0xaf);
        // CB AF 00BF
        gbc.setState(0xd3e0, 0x8404, 0x6900, 0x1023, 0xc7cd, 0xe22a, 0x1, 0x1);
        gbc.writeMem(0xd3e0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8404);
        EXPECT(gbc.pc(), 0xd3e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e0), 0xcb);
        EXPECT(gbc.readMem(0xd3e1), 0xaf);
        // CB AF 00C0
        gbc.setState(0x6973, 0x457d, 0x5590, 0xdd90, 0x4ec0, 0x70fd, 0x1, 0x0);
        gbc.writeMem(0x6973, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x457d);
        EXPECT(gbc.pc(), 0x6975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00C1
        gbc.setState(0x1cc7, 0x8916, 0xe320, 0x1d25, 0x4de6, 0x8617, 0x0, 0x0);
        gbc.writeMem(0x1cc7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8916);
        EXPECT(gbc.pc(), 0x1cc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00C2
        gbc.setState(0x8d0d, 0x8d4, 0x9410, 0x2608, 0x2cb3, 0xe195, 0x0, 0x0);
        gbc.writeMem(0x8d0d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8d4);
        EXPECT(gbc.pc(), 0x8d0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d0d), 0xcb);
        EXPECT(gbc.readMem(0x8d0e), 0xaf);
        // CB AF 00C3
        gbc.setState(0x2b44, 0x7e37, 0x8f80, 0x9a56, 0x24fc, 0x636b, 0x0, 0x0);
        gbc.writeMem(0x2b44, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7e37);
        EXPECT(gbc.pc(), 0x2b46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00C4
        gbc.setState(0x16da, 0xb7a9, 0x4a50, 0x99c8, 0x1742, 0x6f1, 0x0, 0x0);
        gbc.writeMem(0x16da, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb7a9);
        EXPECT(gbc.pc(), 0x16dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00C5
        gbc.setState(0x823c, 0x5662, 0x8320, 0x4cfb, 0xd42f, 0x4ea6, 0x0, 0x0);
        gbc.writeMem(0x823c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5662);
        EXPECT(gbc.pc(), 0x823e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x823c), 0xcb);
        EXPECT(gbc.readMem(0x823d), 0xaf);
        // CB AF 00C6
        gbc.setState(0x62e7, 0x2, 0x5f30, 0xa82e, 0x2e3c, 0xfaec, 0x0, 0x0);
        gbc.writeMem(0x62e7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2);
        EXPECT(gbc.pc(), 0x62e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00C7
        gbc.setState(0xe379, 0xbdd4, 0x3e80, 0xebc6, 0x4645, 0xfbc7, 0x1, 0x1);
        gbc.writeMem(0xe379, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xbdd4);
        EXPECT(gbc.pc(), 0xe37b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe379), 0xcb);
        EXPECT(gbc.readMem(0xe37a), 0xaf);
        // CB AF 00C8
        gbc.setState(0xe89, 0xa156, 0x1380, 0x5fe7, 0x6088, 0xc52c, 0x1, 0x0);
        gbc.writeMem(0xe89, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa156);
        EXPECT(gbc.pc(), 0xe8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00C9
        gbc.setState(0x27aa, 0xab2b, 0x3140, 0xbdfb, 0x5a61, 0xf307, 0x0, 0x0);
        gbc.writeMem(0x27aa, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xab2b);
        EXPECT(gbc.pc(), 0x27ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00CA
        gbc.setState(0x96f7, 0xb3d7, 0xd910, 0x9842, 0x4529, 0x43d3, 0x1, 0x0);
        gbc.writeMem(0x96f7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb3d7);
        EXPECT(gbc.pc(), 0x96f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96f7), 0xcb);
        EXPECT(gbc.readMem(0x96f8), 0xaf);
        // CB AF 00CB
        gbc.setState(0x77f8, 0x36e, 0xec30, 0xf6c9, 0x2e41, 0x5cb6, 0x1, 0x1);
        gbc.writeMem(0x77f8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x36e);
        EXPECT(gbc.pc(), 0x77fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00CC
        gbc.setState(0x1c87, 0xd832, 0xa750, 0x72d7, 0x411f, 0xffae, 0x1, 0x1);
        gbc.writeMem(0x1c87, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd832);
        EXPECT(gbc.pc(), 0x1c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00CD
        gbc.setState(0xefa9, 0x48be, 0x4130, 0xe69d, 0x1bad, 0x48ba, 0x1, 0x1);
        gbc.writeMem(0xefa9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x48be);
        EXPECT(gbc.pc(), 0xefab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefa9), 0xcb);
        EXPECT(gbc.readMem(0xefaa), 0xaf);
        // CB AF 00CE
        gbc.setState(0x6b03, 0xb050, 0xefb0, 0xe423, 0x841, 0xc88d, 0x1, 0x1);
        gbc.writeMem(0x6b03, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb050);
        EXPECT(gbc.pc(), 0x6b05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00CF
        gbc.setState(0xbcc8, 0x3ea9, 0x1c20, 0x6e56, 0xa055, 0x7bf5, 0x1, 0x1);
        gbc.writeMem(0xbcc8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3ea9);
        EXPECT(gbc.pc(), 0xbcca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcc8), 0xcb);
        EXPECT(gbc.readMem(0xbcc9), 0xaf);
        // CB AF 00D0
        gbc.setState(0xbf45, 0xac7c, 0xcf90, 0x3ced, 0xab81, 0x20a5, 0x0, 0x0);
        gbc.writeMem(0xbf45, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xac7c);
        EXPECT(gbc.pc(), 0xbf47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf45), 0xcb);
        EXPECT(gbc.readMem(0xbf46), 0xaf);
        // CB AF 00D1
        gbc.setState(0x7b3e, 0xeeb0, 0x52a0, 0x3034, 0xf121, 0x83b9, 0x1, 0x1);
        gbc.writeMem(0x7b3e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xeeb0);
        EXPECT(gbc.pc(), 0x7b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00D2
        gbc.setState(0x4f19, 0x891, 0x9980, 0x6b1b, 0xa0a2, 0x7610, 0x1, 0x0);
        gbc.writeMem(0x4f19, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x891);
        EXPECT(gbc.pc(), 0x4f1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00D3
        gbc.setState(0x97a7, 0x596, 0xdf40, 0xfdc8, 0x178f, 0x423b, 0x0, 0x0);
        gbc.writeMem(0x97a7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x596);
        EXPECT(gbc.pc(), 0x97a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97a7), 0xcb);
        EXPECT(gbc.readMem(0x97a8), 0xaf);
        // CB AF 00D4
        gbc.setState(0x6aad, 0x5925, 0x4e50, 0xca3f, 0x97ca, 0xd944, 0x1, 0x1);
        gbc.writeMem(0x6aad, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5925);
        EXPECT(gbc.pc(), 0x6aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00D5
        gbc.setState(0x4f42, 0x744e, 0x27a0, 0x30ca, 0xe90f, 0xedeb, 0x1, 0x1);
        gbc.writeMem(0x4f42, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x744e);
        EXPECT(gbc.pc(), 0x4f44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00D6
        gbc.setState(0x6fc3, 0xcc6c, 0xa7a0, 0xe96f, 0x5796, 0xb2be, 0x1, 0x1);
        gbc.writeMem(0x6fc3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xcc6c);
        EXPECT(gbc.pc(), 0x6fc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00D7
        gbc.setState(0xcdc1, 0x71e3, 0xc1a0, 0x2892, 0x11b8, 0xc1f3, 0x0, 0x0);
        gbc.writeMem(0xcdc1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x71e3);
        EXPECT(gbc.pc(), 0xcdc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc1), 0xcb);
        EXPECT(gbc.readMem(0xcdc2), 0xaf);
        // CB AF 00D8
        gbc.setState(0x2ef3, 0x5ff9, 0x7450, 0x102d, 0xc01d, 0x7bfc, 0x0, 0x0);
        gbc.writeMem(0x2ef3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5ff9);
        EXPECT(gbc.pc(), 0x2ef5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00D9
        gbc.setState(0xb6b9, 0x2b31, 0xe050, 0x845f, 0x57c2, 0x63b4, 0x0, 0x1);
        gbc.writeMem(0xb6b9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2b31);
        EXPECT(gbc.pc(), 0xb6bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6b9), 0xcb);
        EXPECT(gbc.readMem(0xb6ba), 0xaf);
        // CB AF 00DA
        gbc.setState(0x4c22, 0x2362, 0xc510, 0x72c0, 0x3a48, 0x6d84, 0x1, 0x1);
        gbc.writeMem(0x4c22, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2362);
        EXPECT(gbc.pc(), 0x4c24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00DB
        gbc.setState(0xbb24, 0xaea2, 0xc9f0, 0x161f, 0x3648, 0xea0b, 0x0, 0x1);
        gbc.writeMem(0xbb24, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xaea2);
        EXPECT(gbc.pc(), 0xbb26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb24), 0xcb);
        EXPECT(gbc.readMem(0xbb25), 0xaf);
        // CB AF 00DC
        gbc.setState(0xc3e7, 0xa54a, 0x5930, 0x1fdf, 0x24af, 0xa6bd, 0x0, 0x0);
        gbc.writeMem(0xc3e7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa54a);
        EXPECT(gbc.pc(), 0xc3e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3e7), 0xcb);
        EXPECT(gbc.readMem(0xc3e8), 0xaf);
        // CB AF 00DD
        gbc.setState(0x940c, 0xfdf5, 0xdc70, 0xd072, 0x74b1, 0xdace, 0x1, 0x1);
        gbc.writeMem(0x940c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfdf5);
        EXPECT(gbc.pc(), 0x940e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940c), 0xcb);
        EXPECT(gbc.readMem(0x940d), 0xaf);
        // CB AF 00DE
        gbc.setState(0xa0bb, 0xe825, 0xf2b0, 0x347c, 0x3d9c, 0xf181, 0x1, 0x0);
        gbc.writeMem(0xa0bb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe825);
        EXPECT(gbc.pc(), 0xa0bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0bb), 0xcb);
        EXPECT(gbc.readMem(0xa0bc), 0xaf);
        // CB AF 00DF
        gbc.setState(0xcf21, 0x17ea, 0x860, 0x3eeb, 0xfaf0, 0xc69a, 0x1, 0x0);
        gbc.writeMem(0xcf21, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x17ea);
        EXPECT(gbc.pc(), 0xcf23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf21), 0xcb);
        EXPECT(gbc.readMem(0xcf22), 0xaf);
        // CB AF 00E0
        gbc.setState(0x3a05, 0xba18, 0x1400, 0xfce1, 0xd381, 0x37c7, 0x0, 0x0);
        gbc.writeMem(0x3a05, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xba18);
        EXPECT(gbc.pc(), 0x3a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00E1
        gbc.setState(0x1dba, 0x7f71, 0xb980, 0x552f, 0x5164, 0xa3c1, 0x1, 0x0);
        gbc.writeMem(0x1dba, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7f71);
        EXPECT(gbc.pc(), 0x1dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00E2
        gbc.setState(0xd90, 0x3ce5, 0xf2f0, 0x635c, 0x5bd9, 0x21c, 0x1, 0x0);
        gbc.writeMem(0xd90, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3ce5);
        EXPECT(gbc.pc(), 0xd92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00E3
        gbc.setState(0xc6a8, 0xd8e8, 0x6880, 0x363c, 0xec24, 0x5dd7, 0x0, 0x0);
        gbc.writeMem(0xc6a8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd8e8);
        EXPECT(gbc.pc(), 0xc6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a8), 0xcb);
        EXPECT(gbc.readMem(0xc6a9), 0xaf);
        // CB AF 00E5
        gbc.setState(0x1e8a, 0x4a40, 0xc770, 0x6cb0, 0xa58c, 0x3e40, 0x0, 0x1);
        gbc.writeMem(0x1e8a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4a40);
        EXPECT(gbc.pc(), 0x1e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00E6
        gbc.setState(0x8a18, 0x17cb, 0x1740, 0x6ed4, 0x33aa, 0x6925, 0x0, 0x0);
        gbc.writeMem(0x8a18, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x17cb);
        EXPECT(gbc.pc(), 0x8a1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a18), 0xcb);
        EXPECT(gbc.readMem(0x8a19), 0xaf);
        // CB AF 00E7
        gbc.setState(0x782e, 0x7da2, 0xeab0, 0xd44d, 0xaa7f, 0x6cc0, 0x0, 0x0);
        gbc.writeMem(0x782e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7da2);
        EXPECT(gbc.pc(), 0x7830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00E8
        gbc.setState(0x4fab, 0x1d93, 0x7a50, 0x8007, 0x63b3, 0xc4c5, 0x0, 0x0);
        gbc.writeMem(0x4fab, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1d93);
        EXPECT(gbc.pc(), 0x4fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00E9
        gbc.setState(0xa7fc, 0x4fb5, 0xe590, 0x5e29, 0xcae1, 0x15c2, 0x0, 0x1);
        gbc.writeMem(0xa7fc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4fb5);
        EXPECT(gbc.pc(), 0xa7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7fc), 0xcb);
        EXPECT(gbc.readMem(0xa7fd), 0xaf);
        // CB AF 00EA
        gbc.setState(0x154b, 0x984f, 0xd740, 0xc380, 0x4ba4, 0xb69c, 0x0, 0x0);
        gbc.writeMem(0x154b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x984f);
        EXPECT(gbc.pc(), 0x154d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00EB
        gbc.setState(0xe258, 0xdc93, 0xe260, 0x22e0, 0x6ac5, 0x6d59, 0x1, 0x1);
        gbc.writeMem(0xe258, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xdc93);
        EXPECT(gbc.pc(), 0xe25a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe258), 0xcb);
        EXPECT(gbc.readMem(0xe259), 0xaf);
        // CB AF 00EC
        gbc.setState(0x6ec9, 0x1287, 0xa840, 0x958b, 0xaab8, 0x659a, 0x1, 0x0);
        gbc.writeMem(0x6ec9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x1287);
        EXPECT(gbc.pc(), 0x6ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00ED
        gbc.setState(0x9990, 0x2002, 0xa0, 0xaaf0, 0x59da, 0x51aa, 0x0, 0x0);
        gbc.writeMem(0x9990, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2002);
        EXPECT(gbc.pc(), 0x9992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9990), 0xcb);
        EXPECT(gbc.readMem(0x9991), 0xaf);
        // CB AF 00EE
        gbc.setState(0x22ed, 0x66bd, 0xe410, 0xad33, 0x62a3, 0xdac9, 0x0, 0x0);
        gbc.writeMem(0x22ed, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x66bd);
        EXPECT(gbc.pc(), 0x22ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00EF
        gbc.setState(0x7bd, 0x877c, 0xa720, 0xf75b, 0x9916, 0x7048, 0x0, 0x1);
        gbc.writeMem(0x7bd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x877c);
        EXPECT(gbc.pc(), 0x7bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00F0
        gbc.setState(0x8b0d, 0xf175, 0x6850, 0x7115, 0x8bf1, 0xce83, 0x1, 0x1);
        gbc.writeMem(0x8b0d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf175);
        EXPECT(gbc.pc(), 0x8b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b0d), 0xcb);
        EXPECT(gbc.readMem(0x8b0e), 0xaf);
        // CB AF 00F1
        gbc.setState(0xdef0, 0x3ce3, 0xce20, 0x5b4f, 0xfc2f, 0x7331, 0x0, 0x0);
        gbc.writeMem(0xdef0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3ce3);
        EXPECT(gbc.pc(), 0xdef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdef0), 0xcb);
        EXPECT(gbc.readMem(0xdef1), 0xaf);
        // CB AF 00F2
        gbc.setState(0x9d87, 0xe1af, 0x2780, 0x939c, 0xa981, 0xe1b7, 0x1, 0x1);
        gbc.writeMem(0x9d87, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe1af);
        EXPECT(gbc.pc(), 0x9d89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d87), 0xcb);
        EXPECT(gbc.readMem(0x9d88), 0xaf);
        // CB AF 00F3
        gbc.setState(0xe28a, 0x4e0d, 0xb4d0, 0xb9c, 0x7ca1, 0xf430, 0x1, 0x0);
        gbc.writeMem(0xe28a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4e0d);
        EXPECT(gbc.pc(), 0xe28c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe28a), 0xcb);
        EXPECT(gbc.readMem(0xe28b), 0xaf);
        // CB AF 00F4
        gbc.setState(0x508a, 0xd88e, 0x2b30, 0x1968, 0xe1a4, 0x319e, 0x0, 0x0);
        gbc.writeMem(0x508a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd88e);
        EXPECT(gbc.pc(), 0x508c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00F5
        gbc.setState(0x7372, 0xf96a, 0x7fa0, 0xedc5, 0xf19a, 0x3f7f, 0x0, 0x1);
        gbc.writeMem(0x7372, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf96a);
        EXPECT(gbc.pc(), 0x7374);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00F6
        gbc.setState(0xb2df, 0x58fc, 0x9460, 0x902b, 0x6, 0x19d2, 0x1, 0x1);
        gbc.writeMem(0xb2df, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x58fc);
        EXPECT(gbc.pc(), 0xb2e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2df), 0xcb);
        EXPECT(gbc.readMem(0xb2e0), 0xaf);
        // CB AF 00F7
        gbc.setState(0x3786, 0xf9c4, 0x98f0, 0x89b3, 0x69ea, 0x8d8, 0x0, 0x0);
        gbc.writeMem(0x3786, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf9c4);
        EXPECT(gbc.pc(), 0x3788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00F8
        gbc.setState(0xab3a, 0x415e, 0x60f0, 0x3e30, 0xbbaf, 0x2a6c, 0x1, 0x1);
        gbc.writeMem(0xab3a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x415e);
        EXPECT(gbc.pc(), 0xab3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab3a), 0xcb);
        EXPECT(gbc.readMem(0xab3b), 0xaf);
        // CB AF 00F9
        gbc.setState(0x1f2a, 0x8218, 0x15d0, 0x8f84, 0x10c8, 0x1984, 0x1, 0x0);
        gbc.writeMem(0x1f2a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8218);
        EXPECT(gbc.pc(), 0x1f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 00FA
        gbc.setState(0xed32, 0xb0f3, 0x7d70, 0xe33c, 0xb9df, 0xbeb6, 0x0, 0x1);
        gbc.writeMem(0xed32, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb0f3);
        EXPECT(gbc.pc(), 0xed34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed32), 0xcb);
        EXPECT(gbc.readMem(0xed33), 0xaf);
        // CB AF 00FB
        gbc.setState(0x1044, 0x3dd8, 0x5480, 0xf25d, 0x6b8a, 0x59a6, 0x0, 0x1);
        gbc.writeMem(0x1044, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3dd8);
        EXPECT(gbc.pc(), 0x1046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 00FC
        gbc.setState(0xe943, 0xf9a1, 0x61f0, 0xbb69, 0xb0c6, 0x26fa, 0x1, 0x1);
        gbc.writeMem(0xe943, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf9a1);
        EXPECT(gbc.pc(), 0xe945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe943), 0xcb);
        EXPECT(gbc.readMem(0xe944), 0xaf);
        // CB AF 00FD
        gbc.setState(0xb691, 0xd3fc, 0x71e0, 0x1410, 0xddea, 0x6b41, 0x0, 0x0);
        gbc.writeMem(0xb691, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd3fc);
        EXPECT(gbc.pc(), 0xb693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb691), 0xcb);
        EXPECT(gbc.readMem(0xb692), 0xaf);
        // CB AF 00FE
        gbc.setState(0xb124, 0xd1fa, 0x62d0, 0xbc5d, 0x5b6c, 0x69a4, 0x0, 0x1);
        gbc.writeMem(0xb124, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd1fa);
        EXPECT(gbc.pc(), 0xb126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb124), 0xcb);
        EXPECT(gbc.readMem(0xb125), 0xaf);
        // CB AF 00FF
        gbc.setState(0xd9c5, 0xbf66, 0xbb70, 0x7794, 0x8a05, 0xdfc7, 0x1, 0x0);
        gbc.writeMem(0xd9c5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xbf66);
        EXPECT(gbc.pc(), 0xd9c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9c5), 0xcb);
        EXPECT(gbc.readMem(0xd9c6), 0xaf);
        // CB AF 0100
        gbc.setState(0x9f7f, 0x2685, 0x6170, 0x3a42, 0xab68, 0x4774, 0x0, 0x1);
        gbc.writeMem(0x9f7f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2685);
        EXPECT(gbc.pc(), 0x9f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f7f), 0xcb);
        EXPECT(gbc.readMem(0x9f80), 0xaf);
        // CB AF 0102
        gbc.setState(0xefa3, 0x4d4, 0xc840, 0x7d33, 0x95ed, 0x975f, 0x0, 0x1);
        gbc.writeMem(0xefa3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4d4);
        EXPECT(gbc.pc(), 0xefa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefa3), 0xcb);
        EXPECT(gbc.readMem(0xefa4), 0xaf);
        // CB AF 0103
        gbc.setState(0xca0e, 0x98c6, 0xf8f0, 0xd28c, 0x15a4, 0x8cd8, 0x1, 0x0);
        gbc.writeMem(0xca0e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x98c6);
        EXPECT(gbc.pc(), 0xca10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca0e), 0xcb);
        EXPECT(gbc.readMem(0xca0f), 0xaf);
        // CB AF 0105
        gbc.setState(0x1b06, 0x8e96, 0xe360, 0xe991, 0x4b95, 0xfd41, 0x1, 0x0);
        gbc.writeMem(0x1b06, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8e96);
        EXPECT(gbc.pc(), 0x1b08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0106
        gbc.setState(0x6e33, 0x92e6, 0x6f90, 0x660b, 0xacae, 0xdeef, 0x0, 0x1);
        gbc.writeMem(0x6e33, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x92e6);
        EXPECT(gbc.pc(), 0x6e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0107
        gbc.setState(0xdc6e, 0xc138, 0x9780, 0xe532, 0xf762, 0x3749, 0x1, 0x0);
        gbc.writeMem(0xdc6e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc138);
        EXPECT(gbc.pc(), 0xdc70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6e), 0xcb);
        EXPECT(gbc.readMem(0xdc6f), 0xaf);
        // CB AF 0108
        gbc.setState(0x2007, 0xe821, 0xacd0, 0x155b, 0xe071, 0xaf20, 0x1, 0x0);
        gbc.writeMem(0x2007, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe821);
        EXPECT(gbc.pc(), 0x2009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0109
        gbc.setState(0x8e53, 0x8ad7, 0xe9f0, 0xab58, 0x19b3, 0x7d16, 0x0, 0x1);
        gbc.writeMem(0x8e53, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8ad7);
        EXPECT(gbc.pc(), 0x8e55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e53), 0xcb);
        EXPECT(gbc.readMem(0x8e54), 0xaf);
        // CB AF 010A
        gbc.setState(0x5d1e, 0xe6b6, 0xf8a0, 0xfd49, 0x11bd, 0xbba8, 0x0, 0x1);
        gbc.writeMem(0x5d1e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe6b6);
        EXPECT(gbc.pc(), 0x5d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 010B
        gbc.setState(0x3b0c, 0xe322, 0x6d70, 0xa20b, 0x4fda, 0x9a28, 0x1, 0x1);
        gbc.writeMem(0x3b0c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe322);
        EXPECT(gbc.pc(), 0x3b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 010C
        gbc.setState(0x47d, 0xf982, 0x9bf0, 0xd77f, 0x9ab8, 0x31f7, 0x1, 0x1);
        gbc.writeMem(0x47d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xf982);
        EXPECT(gbc.pc(), 0x47f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 010D
        gbc.setState(0xd628, 0x5b9f, 0xad20, 0xa00b, 0xd23a, 0x589c, 0x0, 0x1);
        gbc.writeMem(0xd628, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5b9f);
        EXPECT(gbc.pc(), 0xd62a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd628), 0xcb);
        EXPECT(gbc.readMem(0xd629), 0xaf);
        // CB AF 010E
        gbc.setState(0xb993, 0x5d31, 0x4360, 0x3d5b, 0xe3dc, 0xff98, 0x0, 0x0);
        gbc.writeMem(0xb993, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5d31);
        EXPECT(gbc.pc(), 0xb995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb993), 0xcb);
        EXPECT(gbc.readMem(0xb994), 0xaf);
        // CB AF 010F
        gbc.setState(0x4f43, 0x6dec, 0xe540, 0x5996, 0x3c2a, 0x2d8b, 0x0, 0x0);
        gbc.writeMem(0x4f43, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6dec);
        EXPECT(gbc.pc(), 0x4f45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0110
        gbc.setState(0x9768, 0xb725, 0x59e0, 0xdbd2, 0x29dc, 0x60a0, 0x1, 0x1);
        gbc.writeMem(0x9768, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb725);
        EXPECT(gbc.pc(), 0x976a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9768), 0xcb);
        EXPECT(gbc.readMem(0x9769), 0xaf);
        // CB AF 0111
        gbc.setState(0xd3a0, 0x4788, 0xbc80, 0x74dc, 0x2026, 0x86a9, 0x1, 0x1);
        gbc.writeMem(0xd3a0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4788);
        EXPECT(gbc.pc(), 0xd3a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a0), 0xcb);
        EXPECT(gbc.readMem(0xd3a1), 0xaf);
        // CB AF 0112
        gbc.setState(0x4af2, 0xd50a, 0x47a0, 0xcee0, 0x72d4, 0x7873, 0x1, 0x0);
        gbc.writeMem(0x4af2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd50a);
        EXPECT(gbc.pc(), 0x4af4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0114
        gbc.setState(0x397c, 0xca8f, 0xc2d0, 0x927b, 0xcc18, 0x8f0e, 0x1, 0x0);
        gbc.writeMem(0x397c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xca8f);
        EXPECT(gbc.pc(), 0x397e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0115
        gbc.setState(0xb968, 0x88fb, 0xc7c0, 0xd270, 0x99ed, 0x558d, 0x1, 0x0);
        gbc.writeMem(0xb968, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x88fb);
        EXPECT(gbc.pc(), 0xb96a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb968), 0xcb);
        EXPECT(gbc.readMem(0xb969), 0xaf);
        // CB AF 0116
        gbc.setState(0xe9db, 0xaa6d, 0x6840, 0xda84, 0xc907, 0x8fa5, 0x1, 0x1);
        gbc.writeMem(0xe9db, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xaa6d);
        EXPECT(gbc.pc(), 0xe9dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9db), 0xcb);
        EXPECT(gbc.readMem(0xe9dc), 0xaf);
        // CB AF 0117
        gbc.setState(0x558b, 0x4fcd, 0xd150, 0x11c, 0xe3ae, 0x6553, 0x0, 0x1);
        gbc.writeMem(0x558b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4fcd);
        EXPECT(gbc.pc(), 0x558d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0118
        gbc.setState(0xab76, 0xa347, 0xd7d0, 0xb1e9, 0x9aba, 0x1d40, 0x1, 0x0);
        gbc.writeMem(0xab76, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa347);
        EXPECT(gbc.pc(), 0xab78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab76), 0xcb);
        EXPECT(gbc.readMem(0xab77), 0xaf);
        // CB AF 0119
        gbc.setState(0xcc57, 0xb07f, 0x3870, 0x4c65, 0xdba1, 0xaccf, 0x1, 0x1);
        gbc.writeMem(0xcc57, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb07f);
        EXPECT(gbc.pc(), 0xcc59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc57), 0xcb);
        EXPECT(gbc.readMem(0xcc58), 0xaf);
        // CB AF 011A
        gbc.setState(0xb016, 0xf4ac, 0xec50, 0x8bee, 0xe703, 0x5edd, 0x0, 0x0);
        gbc.writeMem(0xb016, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf4ac);
        EXPECT(gbc.pc(), 0xb018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb016), 0xcb);
        EXPECT(gbc.readMem(0xb017), 0xaf);
        // CB AF 011B
        gbc.setState(0x8cb5, 0x53a, 0xc80, 0xd392, 0x6409, 0x76b6, 0x0, 0x1);
        gbc.writeMem(0x8cb5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x53a);
        EXPECT(gbc.pc(), 0x8cb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cb5), 0xcb);
        EXPECT(gbc.readMem(0x8cb6), 0xaf);
        // CB AF 011C
        gbc.setState(0x820f, 0x18ca, 0x12c0, 0x9444, 0xb1d2, 0x3ab7, 0x1, 0x0);
        gbc.writeMem(0x820f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x18ca);
        EXPECT(gbc.pc(), 0x8211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x820f), 0xcb);
        EXPECT(gbc.readMem(0x8210), 0xaf);
        // CB AF 011D
        gbc.setState(0xb119, 0x1974, 0x3a20, 0x78b4, 0xd88d, 0x5325, 0x1, 0x1);
        gbc.writeMem(0xb119, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1974);
        EXPECT(gbc.pc(), 0xb11b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb119), 0xcb);
        EXPECT(gbc.readMem(0xb11a), 0xaf);
        // CB AF 011E
        gbc.setState(0xc33e, 0x76, 0xb910, 0x7d54, 0xe8f9, 0xc79d, 0x1, 0x1);
        gbc.writeMem(0xc33e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x76);
        EXPECT(gbc.pc(), 0xc340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33e), 0xcb);
        EXPECT(gbc.readMem(0xc33f), 0xaf);
        // CB AF 011F
        gbc.setState(0xc01, 0xa990, 0xdf00, 0x65d6, 0xbe86, 0x6287, 0x1, 0x0);
        gbc.writeMem(0xc01, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa990);
        EXPECT(gbc.pc(), 0xc03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0120
        gbc.setState(0xcb81, 0xcf39, 0x9d80, 0x2602, 0xb27f, 0x8ffa, 0x1, 0x0);
        gbc.writeMem(0xcb81, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xcf39);
        EXPECT(gbc.pc(), 0xcb83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb81), 0xcb);
        EXPECT(gbc.readMem(0xcb82), 0xaf);
        // CB AF 0122
        gbc.setState(0xd9a0, 0x3463, 0x45a0, 0x220e, 0x15ff, 0x49ca, 0x1, 0x0);
        gbc.writeMem(0xd9a0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3463);
        EXPECT(gbc.pc(), 0xd9a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a0), 0xcb);
        EXPECT(gbc.readMem(0xd9a1), 0xaf);
        // CB AF 0123
        gbc.setState(0xe6, 0xa34a, 0xb150, 0x27fa, 0x1288, 0xf3, 0x1, 0x0);
        gbc.writeMem(0xe6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa34a);
        EXPECT(gbc.pc(), 0xe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0124
        gbc.setState(0x3a3, 0x58cc, 0x270, 0xa29a, 0xc795, 0x2979, 0x0, 0x1);
        gbc.writeMem(0x3a3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x58cc);
        EXPECT(gbc.pc(), 0x3a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0125
        gbc.setState(0x1cc3, 0xa839, 0x6ce0, 0x9b67, 0x9ea5, 0x11ea, 0x0, 0x1);
        gbc.writeMem(0x1cc3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa839);
        EXPECT(gbc.pc(), 0x1cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0126
        gbc.setState(0xa1e5, 0x5af2, 0x8320, 0xf262, 0x4e47, 0x9ccd, 0x0, 0x1);
        gbc.writeMem(0xa1e5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5af2);
        EXPECT(gbc.pc(), 0xa1e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1e5), 0xcb);
        EXPECT(gbc.readMem(0xa1e6), 0xaf);
        // CB AF 0127
        gbc.setState(0x6df5, 0xfdf3, 0x5510, 0x4de8, 0x44ef, 0x6ce8, 0x1, 0x1);
        gbc.writeMem(0x6df5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xfdf3);
        EXPECT(gbc.pc(), 0x6df7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0128
        gbc.setState(0x9ff4, 0xa58f, 0x860, 0x3485, 0xf8fb, 0x2fe0, 0x0, 0x1);
        gbc.writeMem(0x9ff4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa58f);
        EXPECT(gbc.pc(), 0x9ff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff4), 0xcb);
        EXPECT(gbc.readMem(0x9ff5), 0xaf);
        // CB AF 0129
        gbc.setState(0x863e, 0x3220, 0xcbd0, 0x14aa, 0x216, 0xbddc, 0x1, 0x0);
        gbc.writeMem(0x863e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3220);
        EXPECT(gbc.pc(), 0x8640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863e), 0xcb);
        EXPECT(gbc.readMem(0x863f), 0xaf);
        // CB AF 012A
        gbc.setState(0x94c9, 0xf54d, 0x56a0, 0xa5f4, 0x9725, 0xa78, 0x0, 0x1);
        gbc.writeMem(0x94c9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf54d);
        EXPECT(gbc.pc(), 0x94cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c9), 0xcb);
        EXPECT(gbc.readMem(0x94ca), 0xaf);
        // CB AF 012B
        gbc.setState(0x7880, 0xfc60, 0x1030, 0x242f, 0xc0ee, 0x94aa, 0x0, 0x0);
        gbc.writeMem(0x7880, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xfc60);
        EXPECT(gbc.pc(), 0x7882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 012C
        gbc.setState(0xa72, 0x9f8a, 0x770, 0x6da6, 0xcff5, 0xcf63, 0x1, 0x0);
        gbc.writeMem(0xa72, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9f8a);
        EXPECT(gbc.pc(), 0xa74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 012D
        gbc.setState(0x3a13, 0xc518, 0xaf0, 0x407f, 0x3487, 0x4ce5, 0x0, 0x1);
        gbc.writeMem(0x3a13, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc518);
        EXPECT(gbc.pc(), 0x3a15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 012E
        gbc.setState(0x49ee, 0xf532, 0x45e0, 0x9ab5, 0x538, 0x7964, 0x1, 0x0);
        gbc.writeMem(0x49ee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf532);
        EXPECT(gbc.pc(), 0x49f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 012F
        gbc.setState(0x64b7, 0x241f, 0xac60, 0xe599, 0x7b3e, 0xb77f, 0x1, 0x1);
        gbc.writeMem(0x64b7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x241f);
        EXPECT(gbc.pc(), 0x64b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0130
        gbc.setState(0x556e, 0x908c, 0xf490, 0xcf98, 0x7144, 0xd53c, 0x1, 0x0);
        gbc.writeMem(0x556e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x908c);
        EXPECT(gbc.pc(), 0x5570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0131
        gbc.setState(0xee7d, 0xf536, 0x1060, 0x54f0, 0xdd42, 0xf2e2, 0x1, 0x1);
        gbc.writeMem(0xee7d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf536);
        EXPECT(gbc.pc(), 0xee7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee7d), 0xcb);
        EXPECT(gbc.readMem(0xee7e), 0xaf);
        // CB AF 0133
        gbc.setState(0xc154, 0xdc87, 0xc3e0, 0x2e86, 0xd33c, 0xe23, 0x1, 0x0);
        gbc.writeMem(0xc154, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xdc87);
        EXPECT(gbc.pc(), 0xc156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc154), 0xcb);
        EXPECT(gbc.readMem(0xc155), 0xaf);
        // CB AF 0134
        gbc.setState(0x9e88, 0xea89, 0xe630, 0xb37d, 0x72ae, 0xc631, 0x0, 0x1);
        gbc.writeMem(0x9e88, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xea89);
        EXPECT(gbc.pc(), 0x9e8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e88), 0xcb);
        EXPECT(gbc.readMem(0x9e89), 0xaf);
        // CB AF 0135
        gbc.setState(0xa65e, 0x160b, 0x6470, 0xe7c9, 0xe5f1, 0x8e6b, 0x0, 0x1);
        gbc.writeMem(0xa65e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x160b);
        EXPECT(gbc.pc(), 0xa660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa65e), 0xcb);
        EXPECT(gbc.readMem(0xa65f), 0xaf);
        // CB AF 0136
        gbc.setState(0xa0f6, 0x1dec, 0x7990, 0xdb99, 0xea1e, 0x25ca, 0x1, 0x0);
        gbc.writeMem(0xa0f6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1dec);
        EXPECT(gbc.pc(), 0xa0f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0f6), 0xcb);
        EXPECT(gbc.readMem(0xa0f7), 0xaf);
        // CB AF 0137
        gbc.setState(0x5cdb, 0x79aa, 0x9650, 0xc1a8, 0xfd09, 0xacc9, 0x1, 0x1);
        gbc.writeMem(0x5cdb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x79aa);
        EXPECT(gbc.pc(), 0x5cdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0138
        gbc.setState(0x3773, 0x9445, 0x81c0, 0x527a, 0xb581, 0x51a9, 0x1, 0x1);
        gbc.writeMem(0x3773, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9445);
        EXPECT(gbc.pc(), 0x3775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0139
        gbc.setState(0x96c6, 0xa5df, 0x9ca0, 0xe96, 0xe34b, 0x5715, 0x0, 0x1);
        gbc.writeMem(0x96c6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa5df);
        EXPECT(gbc.pc(), 0x96c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c6), 0xcb);
        EXPECT(gbc.readMem(0x96c7), 0xaf);
        // CB AF 013A
        gbc.setState(0x68b3, 0xe830, 0xb360, 0xd7ff, 0x8b1e, 0xa241, 0x0, 0x0);
        gbc.writeMem(0x68b3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe830);
        EXPECT(gbc.pc(), 0x68b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 013B
        gbc.setState(0x6f30, 0x919, 0x1830, 0x6796, 0x98e7, 0xfca7, 0x1, 0x0);
        gbc.writeMem(0x6f30, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x919);
        EXPECT(gbc.pc(), 0x6f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 013C
        gbc.setState(0x3679, 0xd4b6, 0x2b00, 0xa1ee, 0x855a, 0x599f, 0x0, 0x0);
        gbc.writeMem(0x3679, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd4b6);
        EXPECT(gbc.pc(), 0x367b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 013D
        gbc.setState(0x3412, 0xb37b, 0x4460, 0xcf5, 0x82c2, 0x51fa, 0x0, 0x0);
        gbc.writeMem(0x3412, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb37b);
        EXPECT(gbc.pc(), 0x3414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 013E
        gbc.setState(0x7ca4, 0x3604, 0x6370, 0x7d06, 0x96a9, 0x2df8, 0x0, 0x1);
        gbc.writeMem(0x7ca4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3604);
        EXPECT(gbc.pc(), 0x7ca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 013F
        gbc.setState(0xb85d, 0x2a99, 0x9000, 0xfaf3, 0xeac7, 0x4035, 0x0, 0x1);
        gbc.writeMem(0xb85d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2a99);
        EXPECT(gbc.pc(), 0xb85f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85d), 0xcb);
        EXPECT(gbc.readMem(0xb85e), 0xaf);
        // CB AF 0140
        gbc.setState(0xd3c5, 0x21a4, 0x6d70, 0xb013, 0x33d6, 0x25b5, 0x1, 0x0);
        gbc.writeMem(0xd3c5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x21a4);
        EXPECT(gbc.pc(), 0xd3c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3c5), 0xcb);
        EXPECT(gbc.readMem(0xd3c6), 0xaf);
        // CB AF 0141
        gbc.setState(0xcd07, 0x5730, 0x5320, 0xeb9c, 0x3de8, 0xdd71, 0x0, 0x1);
        gbc.writeMem(0xcd07, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5730);
        EXPECT(gbc.pc(), 0xcd09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd07), 0xcb);
        EXPECT(gbc.readMem(0xcd08), 0xaf);
        // CB AF 0142
        gbc.setState(0xcf88, 0x9c8, 0x5dc0, 0x58cb, 0x2f4, 0x874a, 0x0, 0x1);
        gbc.writeMem(0xcf88, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9c8);
        EXPECT(gbc.pc(), 0xcf8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf88), 0xcb);
        EXPECT(gbc.readMem(0xcf89), 0xaf);
        // CB AF 0143
        gbc.setState(0xbe2e, 0x1858, 0xc940, 0x456a, 0xc42, 0x8cad, 0x1, 0x0);
        gbc.writeMem(0xbe2e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1858);
        EXPECT(gbc.pc(), 0xbe30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe2e), 0xcb);
        EXPECT(gbc.readMem(0xbe2f), 0xaf);
        // CB AF 0144
        gbc.setState(0x3f55, 0x10af, 0x7e80, 0xbe04, 0x7c35, 0x12f7, 0x0, 0x1);
        gbc.writeMem(0x3f55, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x10af);
        EXPECT(gbc.pc(), 0x3f57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0145
        gbc.setState(0xd233, 0x1064, 0xae50, 0x6781, 0x693f, 0x4728, 0x0, 0x0);
        gbc.writeMem(0xd233, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1064);
        EXPECT(gbc.pc(), 0xd235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd233), 0xcb);
        EXPECT(gbc.readMem(0xd234), 0xaf);
        // CB AF 0146
        gbc.setState(0xa019, 0xf493, 0xd90, 0xe568, 0x7b44, 0x4c3, 0x0, 0x0);
        gbc.writeMem(0xa019, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf493);
        EXPECT(gbc.pc(), 0xa01b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa019), 0xcb);
        EXPECT(gbc.readMem(0xa01a), 0xaf);
        // CB AF 0147
        gbc.setState(0x31e4, 0xad26, 0x6440, 0x5b9b, 0xe28e, 0x546f, 0x0, 0x0);
        gbc.writeMem(0x31e4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xad26);
        EXPECT(gbc.pc(), 0x31e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0148
        gbc.setState(0x6c76, 0xd4d2, 0x8c0, 0x3df2, 0x80a9, 0xa8c3, 0x0, 0x1);
        gbc.writeMem(0x6c76, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd4d2);
        EXPECT(gbc.pc(), 0x6c78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0149
        gbc.setState(0x2906, 0xd4d7, 0x4ce0, 0x3dac, 0xde80, 0x60c9, 0x1, 0x1);
        gbc.writeMem(0x2906, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd4d7);
        EXPECT(gbc.pc(), 0x2908);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 014A
        gbc.setState(0xab51, 0x4d80, 0x6c00, 0x3635, 0xa140, 0xeb8e, 0x1, 0x1);
        gbc.writeMem(0xab51, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4d80);
        EXPECT(gbc.pc(), 0xab53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab51), 0xcb);
        EXPECT(gbc.readMem(0xab52), 0xaf);
        // CB AF 014B
        gbc.setState(0x1a9f, 0x6998, 0x2d10, 0x57d2, 0xc709, 0xb7db, 0x0, 0x1);
        gbc.writeMem(0x1a9f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6998);
        EXPECT(gbc.pc(), 0x1aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 014C
        gbc.setState(0x858, 0xf9be, 0xd930, 0xa84e, 0x63c2, 0xb336, 0x0, 0x0);
        gbc.writeMem(0x858, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf9be);
        EXPECT(gbc.pc(), 0x85a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 014D
        gbc.setState(0x623c, 0x7582, 0xf180, 0x708c, 0xfcc2, 0x9400, 0x0, 0x0);
        gbc.writeMem(0x623c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7582);
        EXPECT(gbc.pc(), 0x623e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 014E
        gbc.setState(0x6db3, 0x703c, 0xc640, 0x9097, 0xfdb7, 0xcc55, 0x0, 0x0);
        gbc.writeMem(0x6db3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x703c);
        EXPECT(gbc.pc(), 0x6db5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 014F
        gbc.setState(0x8afd, 0x3dc9, 0x3a0, 0xa7c2, 0x2bfe, 0xdbfd, 0x1, 0x0);
        gbc.writeMem(0x8afd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3dc9);
        EXPECT(gbc.pc(), 0x8aff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8afd), 0xcb);
        EXPECT(gbc.readMem(0x8afe), 0xaf);
        // CB AF 0150
        gbc.setState(0x1649, 0x40aa, 0xe090, 0x7981, 0x66a7, 0x92e5, 0x1, 0x0);
        gbc.writeMem(0x1649, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x40aa);
        EXPECT(gbc.pc(), 0x164b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0151
        gbc.setState(0x407f, 0xa92f, 0xa9a0, 0xf6b7, 0x61ce, 0xe438, 0x0, 0x0);
        gbc.writeMem(0x407f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa92f);
        EXPECT(gbc.pc(), 0x4081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0152
        gbc.setState(0xa45, 0x99b0, 0x9f50, 0x8808, 0xdf94, 0x5264, 0x0, 0x1);
        gbc.writeMem(0xa45, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x99b0);
        EXPECT(gbc.pc(), 0xa47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0153
        gbc.setState(0x596, 0x4207, 0xe2a0, 0xcd41, 0x99b6, 0x9d70, 0x1, 0x1);
        gbc.writeMem(0x596, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4207);
        EXPECT(gbc.pc(), 0x598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0154
        gbc.setState(0xeed8, 0xd83a, 0x110, 0x80ff, 0xbb14, 0x8b5a, 0x0, 0x1);
        gbc.writeMem(0xeed8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd83a);
        EXPECT(gbc.pc(), 0xeeda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeed8), 0xcb);
        EXPECT(gbc.readMem(0xeed9), 0xaf);
        // CB AF 0155
        gbc.setState(0xaffa, 0x5ed, 0xb9f0, 0xec8d, 0x2948, 0xb349, 0x0, 0x1);
        gbc.writeMem(0xaffa, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5ed);
        EXPECT(gbc.pc(), 0xaffc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaffa), 0xcb);
        EXPECT(gbc.readMem(0xaffb), 0xaf);
        // CB AF 0156
        gbc.setState(0xb9b5, 0x394f, 0xca80, 0xa14c, 0xe730, 0xfcfb, 0x1, 0x0);
        gbc.writeMem(0xb9b5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x394f);
        EXPECT(gbc.pc(), 0xb9b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b5), 0xcb);
        EXPECT(gbc.readMem(0xb9b6), 0xaf);
        // CB AF 0157
        gbc.setState(0x8318, 0x2ca, 0xcc10, 0x705, 0x49b5, 0x8a1b, 0x0, 0x1);
        gbc.writeMem(0x8318, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2ca);
        EXPECT(gbc.pc(), 0x831a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8318), 0xcb);
        EXPECT(gbc.readMem(0x8319), 0xaf);
        // CB AF 0158
        gbc.setState(0x8718, 0x4e5d, 0x48d0, 0x7f8c, 0x7f8e, 0x8b39, 0x1, 0x1);
        gbc.writeMem(0x8718, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4e5d);
        EXPECT(gbc.pc(), 0x871a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8718), 0xcb);
        EXPECT(gbc.readMem(0x8719), 0xaf);
        // CB AF 0159
        gbc.setState(0x6945, 0xc4c9, 0xd6c0, 0x35a5, 0x11d0, 0x9b79, 0x0, 0x0);
        gbc.writeMem(0x6945, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc4c9);
        EXPECT(gbc.pc(), 0x6947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 015A
        gbc.setState(0x8800, 0xdaa5, 0xfaf0, 0xf833, 0xce9b, 0x717a, 0x0, 0x1);
        gbc.writeMem(0x8800, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xdaa5);
        EXPECT(gbc.pc(), 0x8802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8800), 0xcb);
        EXPECT(gbc.readMem(0x8801), 0xaf);
        // CB AF 015B
        gbc.setState(0x6eec, 0x9faf, 0xa2a0, 0x9f22, 0xb28b, 0x9b92, 0x1, 0x0);
        gbc.writeMem(0x6eec, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9faf);
        EXPECT(gbc.pc(), 0x6eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 015C
        gbc.setState(0xe135, 0x559f, 0xf670, 0x9deb, 0xa578, 0x7621, 0x0, 0x1);
        gbc.writeMem(0xe135, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x559f);
        EXPECT(gbc.pc(), 0xe137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe135), 0xcb);
        EXPECT(gbc.readMem(0xe136), 0xaf);
        // CB AF 015D
        gbc.setState(0x8907, 0x71e9, 0x3c40, 0x5bfa, 0x8e94, 0x7b29, 0x1, 0x1);
        gbc.writeMem(0x8907, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x71e9);
        EXPECT(gbc.pc(), 0x8909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8907), 0xcb);
        EXPECT(gbc.readMem(0x8908), 0xaf);
        // CB AF 015E
        gbc.setState(0xc641, 0x1c2, 0xf2c0, 0x7c5d, 0x4ae6, 0x8893, 0x1, 0x0);
        gbc.writeMem(0xc641, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1c2);
        EXPECT(gbc.pc(), 0xc643);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc641), 0xcb);
        EXPECT(gbc.readMem(0xc642), 0xaf);
        // CB AF 015F
        gbc.setState(0x817c, 0xdedb, 0x2b0, 0x6d4e, 0xf3ec, 0x572a, 0x1, 0x0);
        gbc.writeMem(0x817c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdedb);
        EXPECT(gbc.pc(), 0x817e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817c), 0xcb);
        EXPECT(gbc.readMem(0x817d), 0xaf);
        // CB AF 0161
        gbc.setState(0x5286, 0x3e9f, 0xfeb0, 0xb120, 0x27e1, 0xe75, 0x1, 0x0);
        gbc.writeMem(0x5286, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3e9f);
        EXPECT(gbc.pc(), 0x5288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0162
        gbc.setState(0xece6, 0xaad0, 0x99d0, 0x1623, 0xe10a, 0x647, 0x1, 0x1);
        gbc.writeMem(0xece6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xaad0);
        EXPECT(gbc.pc(), 0xece8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xece6), 0xcb);
        EXPECT(gbc.readMem(0xece7), 0xaf);
        // CB AF 0163
        gbc.setState(0x944e, 0xc9dc, 0xa4f0, 0xe4f1, 0xdad1, 0x9051, 0x1, 0x0);
        gbc.writeMem(0x944e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc9dc);
        EXPECT(gbc.pc(), 0x9450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x944e), 0xcb);
        EXPECT(gbc.readMem(0x944f), 0xaf);
        // CB AF 0164
        gbc.setState(0x54a6, 0x9b1e, 0xd2d0, 0x977a, 0xb597, 0x1472, 0x1, 0x0);
        gbc.writeMem(0x54a6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9b1e);
        EXPECT(gbc.pc(), 0x54a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0165
        gbc.setState(0xd971, 0xc94e, 0xd820, 0xb330, 0x5fde, 0xfecb, 0x1, 0x0);
        gbc.writeMem(0xd971, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc94e);
        EXPECT(gbc.pc(), 0xd973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd971), 0xcb);
        EXPECT(gbc.readMem(0xd972), 0xaf);
        // CB AF 0167
        gbc.setState(0x665f, 0xc802, 0x80d0, 0x2690, 0x59d2, 0x5edc, 0x1, 0x1);
        gbc.writeMem(0x665f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc802);
        EXPECT(gbc.pc(), 0x6661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0168
        gbc.setState(0x9d0, 0x55df, 0x84a0, 0xaa6e, 0x6fcb, 0xfc8, 0x1, 0x0);
        gbc.writeMem(0x9d0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x55df);
        EXPECT(gbc.pc(), 0x9d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0169
        gbc.setState(0x6b73, 0x5a54, 0xdad0, 0x4451, 0x9e17, 0x432c, 0x1, 0x0);
        gbc.writeMem(0x6b73, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5a54);
        EXPECT(gbc.pc(), 0x6b75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 016A
        gbc.setState(0x653d, 0x8df0, 0xff80, 0x5001, 0x9980, 0xe981, 0x0, 0x1);
        gbc.writeMem(0x653d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8df0);
        EXPECT(gbc.pc(), 0x653f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 016B
        gbc.setState(0x81b5, 0xb6e8, 0x9b10, 0x787d, 0xb4db, 0xc2f8, 0x0, 0x1);
        gbc.writeMem(0x81b5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb6e8);
        EXPECT(gbc.pc(), 0x81b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81b5), 0xcb);
        EXPECT(gbc.readMem(0x81b6), 0xaf);
        // CB AF 016C
        gbc.setState(0x1d78, 0xf717, 0x1520, 0xac1c, 0x17ac, 0x16e0, 0x0, 0x0);
        gbc.writeMem(0x1d78, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf717);
        EXPECT(gbc.pc(), 0x1d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 016D
        gbc.setState(0xb83b, 0x2711, 0xb8a0, 0x4408, 0x8c14, 0x29c6, 0x1, 0x0);
        gbc.writeMem(0xb83b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2711);
        EXPECT(gbc.pc(), 0xb83d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83b), 0xcb);
        EXPECT(gbc.readMem(0xb83c), 0xaf);
        // CB AF 016E
        gbc.setState(0x1f9b, 0xb241, 0xed10, 0x98e4, 0x5b9a, 0x709c, 0x0, 0x0);
        gbc.writeMem(0x1f9b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb241);
        EXPECT(gbc.pc(), 0x1f9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 016F
        gbc.setState(0x24a1, 0xc215, 0x38e0, 0x9166, 0x8d96, 0x8078, 0x0, 0x1);
        gbc.writeMem(0x24a1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc215);
        EXPECT(gbc.pc(), 0x24a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0170
        gbc.setState(0x5df6, 0xad0e, 0xc40, 0x9e16, 0x47dc, 0xc676, 0x1, 0x0);
        gbc.writeMem(0x5df6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xad0e);
        EXPECT(gbc.pc(), 0x5df8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0171
        gbc.setState(0xdc12, 0xf9fc, 0x9580, 0xfd89, 0x2f72, 0xe0e, 0x0, 0x0);
        gbc.writeMem(0xdc12, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf9fc);
        EXPECT(gbc.pc(), 0xdc14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc12), 0xcb);
        EXPECT(gbc.readMem(0xdc13), 0xaf);
        // CB AF 0172
        gbc.setState(0x8289, 0x28bf, 0x6c80, 0x6a8f, 0xddfc, 0xa7ab, 0x0, 0x0);
        gbc.writeMem(0x8289, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x28bf);
        EXPECT(gbc.pc(), 0x828b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8289), 0xcb);
        EXPECT(gbc.readMem(0x828a), 0xaf);
        // CB AF 0173
        gbc.setState(0x3456, 0xef6b, 0x5d90, 0x816d, 0xb863, 0x5593, 0x1, 0x0);
        gbc.writeMem(0x3456, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xef6b);
        EXPECT(gbc.pc(), 0x3458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0174
        gbc.setState(0x3ebd, 0x32d1, 0x6450, 0xfda5, 0x597d, 0x69ad, 0x0, 0x0);
        gbc.writeMem(0x3ebd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x32d1);
        EXPECT(gbc.pc(), 0x3ebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0175
        gbc.setState(0x39ff, 0x429c, 0x1650, 0x2818, 0x51e0, 0xf30d, 0x0, 0x1);
        gbc.writeMem(0x39ff, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x429c);
        EXPECT(gbc.pc(), 0x3a01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0176
        gbc.setState(0xf69, 0x7e05, 0xd7a0, 0xa2b4, 0xf678, 0x8099, 0x1, 0x0);
        gbc.writeMem(0xf69, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7e05);
        EXPECT(gbc.pc(), 0xf6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0177
        gbc.setState(0x55ee, 0xc44a, 0xd4a0, 0x6958, 0x6e9e, 0xe3f2, 0x1, 0x1);
        gbc.writeMem(0x55ee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc44a);
        EXPECT(gbc.pc(), 0x55f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0178
        gbc.setState(0x37ee, 0xb2d4, 0x8df0, 0xa354, 0x655, 0xe004, 0x1, 0x1);
        gbc.writeMem(0x37ee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb2d4);
        EXPECT(gbc.pc(), 0x37f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0179
        gbc.setState(0x60ee, 0x3277, 0x2c10, 0x708c, 0xb61, 0x45ef, 0x1, 0x0);
        gbc.writeMem(0x60ee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3277);
        EXPECT(gbc.pc(), 0x60f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 017A
        gbc.setState(0xe380, 0x8a61, 0x1f50, 0xc58c, 0xc7cf, 0x5d51, 0x0, 0x1);
        gbc.writeMem(0xe380, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8a61);
        EXPECT(gbc.pc(), 0xe382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe380), 0xcb);
        EXPECT(gbc.readMem(0xe381), 0xaf);
        // CB AF 017B
        gbc.setState(0xa45, 0x5fdf, 0x65e0, 0xf67c, 0xe9b0, 0xc271, 0x0, 0x0);
        gbc.writeMem(0xa45, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5fdf);
        EXPECT(gbc.pc(), 0xa47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 017C
        gbc.setState(0x11ac, 0xfda5, 0x53f0, 0x39cc, 0x7cf0, 0xe230, 0x1, 0x1);
        gbc.writeMem(0x11ac, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xfda5);
        EXPECT(gbc.pc(), 0x11ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 017D
        gbc.setState(0x5373, 0x334f, 0xfc00, 0x3707, 0x463a, 0xf6b9, 0x1, 0x0);
        gbc.writeMem(0x5373, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x334f);
        EXPECT(gbc.pc(), 0x5375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 017E
        gbc.setState(0x6fc4, 0xd834, 0x4c70, 0xdeed, 0x1fc, 0x5dd6, 0x1, 0x1);
        gbc.writeMem(0x6fc4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd834);
        EXPECT(gbc.pc(), 0x6fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 017F
        gbc.setState(0xb80e, 0xe7ef, 0xd8d0, 0x4032, 0xb50b, 0x7ec3, 0x0, 0x1);
        gbc.writeMem(0xb80e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe7ef);
        EXPECT(gbc.pc(), 0xb810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80e), 0xcb);
        EXPECT(gbc.readMem(0xb80f), 0xaf);
        // CB AF 0180
        gbc.setState(0x55f1, 0xcfa9, 0xbab0, 0x5e28, 0x6271, 0x9828, 0x0, 0x0);
        gbc.writeMem(0x55f1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xcfa9);
        EXPECT(gbc.pc(), 0x55f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0181
        gbc.setState(0x97dd, 0x8c27, 0x220, 0x1ba7, 0xcf94, 0x521b, 0x0, 0x0);
        gbc.writeMem(0x97dd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8c27);
        EXPECT(gbc.pc(), 0x97df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97dd), 0xcb);
        EXPECT(gbc.readMem(0x97de), 0xaf);
        // CB AF 0182
        gbc.setState(0x200f, 0xbfdd, 0x9360, 0xc3a0, 0x76bf, 0x5b10, 0x1, 0x1);
        gbc.writeMem(0x200f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbfdd);
        EXPECT(gbc.pc(), 0x2011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0183
        gbc.setState(0x4924, 0x55b5, 0xe720, 0x3fa1, 0x20c8, 0xdbfa, 0x0, 0x1);
        gbc.writeMem(0x4924, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x55b5);
        EXPECT(gbc.pc(), 0x4926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0184
        gbc.setState(0x633f, 0xed18, 0x9c90, 0xc713, 0xbc2b, 0xb3fb, 0x1, 0x0);
        gbc.writeMem(0x633f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xed18);
        EXPECT(gbc.pc(), 0x6341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0185
        gbc.setState(0x9f7c, 0x364b, 0x1950, 0x3107, 0xcab7, 0xca62, 0x0, 0x1);
        gbc.writeMem(0x9f7c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x364b);
        EXPECT(gbc.pc(), 0x9f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f7c), 0xcb);
        EXPECT(gbc.readMem(0x9f7d), 0xaf);
        // CB AF 0186
        gbc.setState(0xa252, 0x3b91, 0x7e70, 0x4768, 0x3d60, 0x5afb, 0x1, 0x0);
        gbc.writeMem(0xa252, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3b91);
        EXPECT(gbc.pc(), 0xa254);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa252), 0xcb);
        EXPECT(gbc.readMem(0xa253), 0xaf);
        // CB AF 0187
        gbc.setState(0xd5e, 0x8599, 0xb200, 0x160c, 0x42e7, 0xb255, 0x0, 0x0);
        gbc.writeMem(0xd5e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8599);
        EXPECT(gbc.pc(), 0xd60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0188
        gbc.setState(0x7e48, 0x9f49, 0x7250, 0x1f50, 0x29dc, 0xc642, 0x1, 0x0);
        gbc.writeMem(0x7e48, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9f49);
        EXPECT(gbc.pc(), 0x7e4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0189
        gbc.setState(0x6b2f, 0xc4fd, 0x7580, 0x4ecb, 0xcd17, 0xdac, 0x0, 0x1);
        gbc.writeMem(0x6b2f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc4fd);
        EXPECT(gbc.pc(), 0x6b31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 018A
        gbc.setState(0x55fb, 0xc1a8, 0xff60, 0xf5b8, 0xc094, 0xb1ec, 0x1, 0x0);
        gbc.writeMem(0x55fb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc1a8);
        EXPECT(gbc.pc(), 0x55fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 018B
        gbc.setState(0xc69e, 0xa7f0, 0x53a0, 0xafa1, 0x1a20, 0xfc64, 0x0, 0x1);
        gbc.writeMem(0xc69e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa7f0);
        EXPECT(gbc.pc(), 0xc6a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc69e), 0xcb);
        EXPECT(gbc.readMem(0xc69f), 0xaf);
        // CB AF 018C
        gbc.setState(0x149a, 0x85b4, 0x3310, 0xd02c, 0x88d6, 0xfe53, 0x1, 0x1);
        gbc.writeMem(0x149a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x85b4);
        EXPECT(gbc.pc(), 0x149c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 018D
        gbc.setState(0xe74b, 0xc939, 0x2620, 0x51aa, 0xfc5f, 0xea7e, 0x1, 0x1);
        gbc.writeMem(0xe74b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc939);
        EXPECT(gbc.pc(), 0xe74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe74b), 0xcb);
        EXPECT(gbc.readMem(0xe74c), 0xaf);
        // CB AF 018E
        gbc.setState(0xd8ba, 0x2fe9, 0x3d80, 0xd0b2, 0x1fdb, 0xbd5, 0x1, 0x1);
        gbc.writeMem(0xd8ba, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2fe9);
        EXPECT(gbc.pc(), 0xd8bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ba), 0xcb);
        EXPECT(gbc.readMem(0xd8bb), 0xaf);
        // CB AF 018F
        gbc.setState(0x279c, 0xdde, 0xd540, 0x9489, 0x358d, 0x4619, 0x1, 0x1);
        gbc.writeMem(0x279c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdde);
        EXPECT(gbc.pc(), 0x279e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0190
        gbc.setState(0x1244, 0xb5f4, 0xb190, 0x4d95, 0xfd0b, 0xd72, 0x0, 0x1);
        gbc.writeMem(0x1244, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb5f4);
        EXPECT(gbc.pc(), 0x1246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0191
        gbc.setState(0x4346, 0xa333, 0x2df0, 0x2d9f, 0x28df, 0x1421, 0x0, 0x0);
        gbc.writeMem(0x4346, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa333);
        EXPECT(gbc.pc(), 0x4348);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0192
        gbc.setState(0x2750, 0x71b3, 0x8170, 0xa466, 0x9673, 0x4f16, 0x1, 0x1);
        gbc.writeMem(0x2750, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x71b3);
        EXPECT(gbc.pc(), 0x2752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0193
        gbc.setState(0x3725, 0xd049, 0x8000, 0x4916, 0xfbeb, 0xc882, 0x0, 0x1);
        gbc.writeMem(0x3725, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd049);
        EXPECT(gbc.pc(), 0x3727);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0194
        gbc.setState(0xc9d3, 0xc63e, 0xfa30, 0x748a, 0xe3be, 0x6bd4, 0x0, 0x1);
        gbc.writeMem(0xc9d3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc63e);
        EXPECT(gbc.pc(), 0xc9d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9d3), 0xcb);
        EXPECT(gbc.readMem(0xc9d4), 0xaf);
        // CB AF 0195
        gbc.setState(0x3f2c, 0xc749, 0xcb10, 0x9048, 0x5772, 0xf509, 0x1, 0x1);
        gbc.writeMem(0x3f2c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc749);
        EXPECT(gbc.pc(), 0x3f2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0196
        gbc.setState(0x7ce1, 0x100a, 0xaef0, 0x5441, 0x7e17, 0x84c2, 0x1, 0x1);
        gbc.writeMem(0x7ce1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x100a);
        EXPECT(gbc.pc(), 0x7ce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0197
        gbc.setState(0xc65e, 0xf890, 0x170, 0x6865, 0x1a15, 0x386, 0x1, 0x1);
        gbc.writeMem(0xc65e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf890);
        EXPECT(gbc.pc(), 0xc660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65e), 0xcb);
        EXPECT(gbc.readMem(0xc65f), 0xaf);
        // CB AF 0198
        gbc.setState(0x15fb, 0x4aee, 0x5520, 0xc389, 0x6984, 0x580e, 0x0, 0x1);
        gbc.writeMem(0x15fb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4aee);
        EXPECT(gbc.pc(), 0x15fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0199
        gbc.setState(0x6839, 0xf37d, 0xce40, 0x6930, 0x610f, 0xee29, 0x1, 0x1);
        gbc.writeMem(0x6839, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf37d);
        EXPECT(gbc.pc(), 0x683b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 019A
        gbc.setState(0xd36c, 0x8fc4, 0x7d60, 0x95c7, 0x78d4, 0x6d56, 0x0, 0x1);
        gbc.writeMem(0xd36c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8fc4);
        EXPECT(gbc.pc(), 0xd36e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd36c), 0xcb);
        EXPECT(gbc.readMem(0xd36d), 0xaf);
        // CB AF 019B
        gbc.setState(0x7195, 0xbf2e, 0x28d0, 0x312a, 0x79ce, 0x6c62, 0x1, 0x1);
        gbc.writeMem(0x7195, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbf2e);
        EXPECT(gbc.pc(), 0x7197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 019C
        gbc.setState(0xb690, 0xaf83, 0x9eb0, 0xa52c, 0x734a, 0x95e, 0x1, 0x1);
        gbc.writeMem(0xb690, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xaf83);
        EXPECT(gbc.pc(), 0xb692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb690), 0xcb);
        EXPECT(gbc.readMem(0xb691), 0xaf);
        // CB AF 019E
        gbc.setState(0x557a, 0x7312, 0x8960, 0xd6a9, 0x8612, 0x3ee8, 0x1, 0x0);
        gbc.writeMem(0x557a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7312);
        EXPECT(gbc.pc(), 0x557c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 019F
        gbc.setState(0xd63f, 0xc4b9, 0xb30, 0x5d71, 0xad09, 0xf7d4, 0x1, 0x0);
        gbc.writeMem(0xd63f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc4b9);
        EXPECT(gbc.pc(), 0xd641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd63f), 0xcb);
        EXPECT(gbc.readMem(0xd640), 0xaf);
        // CB AF 01A0
        gbc.setState(0x4052, 0x923e, 0x4660, 0x35af, 0x68b6, 0x8bf9, 0x0, 0x1);
        gbc.writeMem(0x4052, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x923e);
        EXPECT(gbc.pc(), 0x4054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01A1
        gbc.setState(0x8f35, 0x889e, 0x29c0, 0x3d34, 0xe23b, 0x567a, 0x0, 0x0);
        gbc.writeMem(0x8f35, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x889e);
        EXPECT(gbc.pc(), 0x8f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f35), 0xcb);
        EXPECT(gbc.readMem(0x8f36), 0xaf);
        // CB AF 01A2
        gbc.setState(0xa848, 0x4ef, 0xca40, 0x143d, 0x3fc6, 0xb932, 0x1, 0x1);
        gbc.writeMem(0xa848, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4ef);
        EXPECT(gbc.pc(), 0xa84a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa848), 0xcb);
        EXPECT(gbc.readMem(0xa849), 0xaf);
        // CB AF 01A3
        gbc.setState(0x2bf7, 0x3096, 0x2210, 0xa880, 0xba19, 0x90db, 0x1, 0x1);
        gbc.writeMem(0x2bf7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3096);
        EXPECT(gbc.pc(), 0x2bf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01A4
        gbc.setState(0xeeb7, 0xef07, 0xc120, 0x5947, 0x8dd5, 0x1f2, 0x1, 0x0);
        gbc.writeMem(0xeeb7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xef07);
        EXPECT(gbc.pc(), 0xeeb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb7), 0xcb);
        EXPECT(gbc.readMem(0xeeb8), 0xaf);
        // CB AF 01A5
        gbc.setState(0x1a9, 0x6974, 0x1d70, 0xf9a0, 0xc3d0, 0x679c, 0x1, 0x0);
        gbc.writeMem(0x1a9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6974);
        EXPECT(gbc.pc(), 0x1ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01A6
        gbc.setState(0x5baa, 0x638e, 0x9680, 0x7657, 0xd77f, 0x2179, 0x1, 0x1);
        gbc.writeMem(0x5baa, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x638e);
        EXPECT(gbc.pc(), 0x5bac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01A8
        gbc.setState(0xb81e, 0x3f2, 0x3060, 0x6750, 0x7660, 0x9208, 0x1, 0x1);
        gbc.writeMem(0xb81e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x3f2);
        EXPECT(gbc.pc(), 0xb820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81e), 0xcb);
        EXPECT(gbc.readMem(0xb81f), 0xaf);
        // CB AF 01A9
        gbc.setState(0xc27c, 0x6794, 0x2040, 0x9bfd, 0xbae5, 0x475, 0x1, 0x1);
        gbc.writeMem(0xc27c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6794);
        EXPECT(gbc.pc(), 0xc27e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc27c), 0xcb);
        EXPECT(gbc.readMem(0xc27d), 0xaf);
        // CB AF 01AA
        gbc.setState(0x32ea, 0xe833, 0xa50, 0x138d, 0x87e0, 0xc009, 0x0, 0x0);
        gbc.writeMem(0x32ea, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe833);
        EXPECT(gbc.pc(), 0x32ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01AB
        gbc.setState(0x8095, 0x3af4, 0x6780, 0xa476, 0xa06b, 0x6ab8, 0x0, 0x1);
        gbc.writeMem(0x8095, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3af4);
        EXPECT(gbc.pc(), 0x8097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8095), 0xcb);
        EXPECT(gbc.readMem(0x8096), 0xaf);
        // CB AF 01AC
        gbc.setState(0x6e52, 0x4d3a, 0xe4e0, 0x4122, 0x28e3, 0xe7cb, 0x1, 0x1);
        gbc.writeMem(0x6e52, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4d3a);
        EXPECT(gbc.pc(), 0x6e54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01AD
        gbc.setState(0x588a, 0x846c, 0x6890, 0xf647, 0xb65a, 0x7e3, 0x0, 0x0);
        gbc.writeMem(0x588a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x846c);
        EXPECT(gbc.pc(), 0x588c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01AE
        gbc.setState(0x318f, 0x9f31, 0xc480, 0x3600, 0xa49, 0xf9cb, 0x0, 0x1);
        gbc.writeMem(0x318f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9f31);
        EXPECT(gbc.pc(), 0x3191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01AF
        gbc.setState(0xdefd, 0xf5e7, 0x3170, 0xe584, 0xb6de, 0x81a9, 0x0, 0x1);
        gbc.writeMem(0xdefd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf5e7);
        EXPECT(gbc.pc(), 0xdeff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdefd), 0xcb);
        EXPECT(gbc.readMem(0xdefe), 0xaf);
        // CB AF 01B0
        gbc.setState(0x4d68, 0xcba7, 0x1e40, 0x1372, 0x3cf2, 0x648f, 0x1, 0x1);
        gbc.writeMem(0x4d68, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcba7);
        EXPECT(gbc.pc(), 0x4d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01B1
        gbc.setState(0x7388, 0x2658, 0x2c20, 0x5704, 0xf51f, 0x19db, 0x0, 0x0);
        gbc.writeMem(0x7388, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2658);
        EXPECT(gbc.pc(), 0x738a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01B2
        gbc.setState(0xb569, 0xe278, 0xa4b0, 0x5e8e, 0xbac2, 0xdc74, 0x0, 0x1);
        gbc.writeMem(0xb569, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe278);
        EXPECT(gbc.pc(), 0xb56b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb569), 0xcb);
        EXPECT(gbc.readMem(0xb56a), 0xaf);
        // CB AF 01B3
        gbc.setState(0x143f, 0x9124, 0xdf50, 0x3ebe, 0x483b, 0x5f3d, 0x0, 0x0);
        gbc.writeMem(0x143f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9124);
        EXPECT(gbc.pc(), 0x1441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01B4
        gbc.setState(0xebe4, 0xfa50, 0x4720, 0x270d, 0x295b, 0xdb6e, 0x0, 0x1);
        gbc.writeMem(0xebe4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfa50);
        EXPECT(gbc.pc(), 0xebe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe4), 0xcb);
        EXPECT(gbc.readMem(0xebe5), 0xaf);
        // CB AF 01B5
        gbc.setState(0x1ec8, 0xad82, 0xd6a0, 0xbe79, 0xb6c0, 0x84f2, 0x1, 0x1);
        gbc.writeMem(0x1ec8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0x1eca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01B8
        gbc.setState(0xe3ea, 0x3bab, 0x3c40, 0x6b1c, 0x9462, 0x1e5d, 0x1, 0x0);
        gbc.writeMem(0xe3ea, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3bab);
        EXPECT(gbc.pc(), 0xe3ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ea), 0xcb);
        EXPECT(gbc.readMem(0xe3eb), 0xaf);
        // CB AF 01B9
        gbc.setState(0xd2ec, 0xe983, 0x4670, 0x344c, 0x9e27, 0xf01e, 0x1, 0x1);
        gbc.writeMem(0xd2ec, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe983);
        EXPECT(gbc.pc(), 0xd2ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ec), 0xcb);
        EXPECT(gbc.readMem(0xd2ed), 0xaf);
        // CB AF 01BA
        gbc.setState(0x9d30, 0xc2be, 0x5fd0, 0x9ace, 0x8775, 0xdae8, 0x0, 0x1);
        gbc.writeMem(0x9d30, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc2be);
        EXPECT(gbc.pc(), 0x9d32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d30), 0xcb);
        EXPECT(gbc.readMem(0x9d31), 0xaf);
        // CB AF 01BC
        gbc.setState(0xdd43, 0xbc96, 0x44b0, 0x2008, 0xb4c7, 0x8bb7, 0x1, 0x1);
        gbc.writeMem(0xdd43, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbc96);
        EXPECT(gbc.pc(), 0xdd45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd43), 0xcb);
        EXPECT(gbc.readMem(0xdd44), 0xaf);
        // CB AF 01BD
        gbc.setState(0xae9d, 0x2fdc, 0x6cb0, 0x17c, 0xaed8, 0xd00e, 0x1, 0x1);
        gbc.writeMem(0xae9d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2fdc);
        EXPECT(gbc.pc(), 0xae9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae9d), 0xcb);
        EXPECT(gbc.readMem(0xae9e), 0xaf);
        // CB AF 01BE
        gbc.setState(0x8c27, 0xb714, 0x8990, 0xc9ef, 0xf460, 0xc268, 0x1, 0x1);
        gbc.writeMem(0x8c27, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb714);
        EXPECT(gbc.pc(), 0x8c29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c27), 0xcb);
        EXPECT(gbc.readMem(0x8c28), 0xaf);
        // CB AF 01BF
        gbc.setState(0x7bb7, 0xc557, 0xfb30, 0x4e5f, 0x3ac1, 0xd675, 0x1, 0x1);
        gbc.writeMem(0x7bb7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc557);
        EXPECT(gbc.pc(), 0x7bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01C0
        gbc.setState(0x9541, 0xfd2c, 0x5620, 0xe62d, 0x55ee, 0xe20f, 0x0, 0x1);
        gbc.writeMem(0x9541, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfd2c);
        EXPECT(gbc.pc(), 0x9543);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9541), 0xcb);
        EXPECT(gbc.readMem(0x9542), 0xaf);
        // CB AF 01C1
        gbc.setState(0xc6cf, 0x8954, 0xaf60, 0xb63e, 0x9427, 0xa3a4, 0x0, 0x1);
        gbc.writeMem(0xc6cf, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8954);
        EXPECT(gbc.pc(), 0xc6d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6cf), 0xcb);
        EXPECT(gbc.readMem(0xc6d0), 0xaf);
        // CB AF 01C2
        gbc.setState(0xd51d, 0x3427, 0x10f0, 0x9010, 0x4105, 0x3f7, 0x0, 0x0);
        gbc.writeMem(0xd51d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3427);
        EXPECT(gbc.pc(), 0xd51f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd51d), 0xcb);
        EXPECT(gbc.readMem(0xd51e), 0xaf);
        // CB AF 01C3
        gbc.setState(0x306c, 0x8b14, 0x55c0, 0x65ce, 0xf1f1, 0xce5a, 0x0, 0x0);
        gbc.writeMem(0x306c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8b14);
        EXPECT(gbc.pc(), 0x306e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01C4
        gbc.setState(0xade3, 0x6b11, 0x8410, 0xd449, 0x579b, 0x641f, 0x0, 0x1);
        gbc.writeMem(0xade3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x6b11);
        EXPECT(gbc.pc(), 0xade5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade3), 0xcb);
        EXPECT(gbc.readMem(0xade4), 0xaf);
        // CB AF 01C5
        gbc.setState(0x47df, 0xab9d, 0x3f30, 0x9c0, 0x505a, 0x2630, 0x1, 0x0);
        gbc.writeMem(0x47df, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xab9d);
        EXPECT(gbc.pc(), 0x47e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01C6
        gbc.setState(0xbbb6, 0xd943, 0x5a50, 0x5d36, 0xdc80, 0xd7a5, 0x0, 0x0);
        gbc.writeMem(0xbbb6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd943);
        EXPECT(gbc.pc(), 0xbbb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbb6), 0xcb);
        EXPECT(gbc.readMem(0xbbb7), 0xaf);
        // CB AF 01C7
        gbc.setState(0x3948, 0xd40b, 0x1f30, 0x880a, 0x758f, 0xdeed, 0x0, 0x1);
        gbc.writeMem(0x3948, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd40b);
        EXPECT(gbc.pc(), 0x394a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01C8
        gbc.setState(0x2b8d, 0xcf4e, 0x30, 0x2eaa, 0x92c, 0xd9af, 0x1, 0x1);
        gbc.writeMem(0x2b8d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcf4e);
        EXPECT(gbc.pc(), 0x2b8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01C9
        gbc.setState(0xa5c1, 0xf19d, 0xccf0, 0x6214, 0x2779, 0x7ac8, 0x1, 0x0);
        gbc.writeMem(0xa5c1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf19d);
        EXPECT(gbc.pc(), 0xa5c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5c1), 0xcb);
        EXPECT(gbc.readMem(0xa5c2), 0xaf);
        // CB AF 01CA
        gbc.setState(0x9e2c, 0xdd7, 0x43f0, 0xef03, 0x5b8f, 0x49df, 0x1, 0x1);
        gbc.writeMem(0x9e2c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdd7);
        EXPECT(gbc.pc(), 0x9e2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e2c), 0xcb);
        EXPECT(gbc.readMem(0x9e2d), 0xaf);
        // CB AF 01CB
        gbc.setState(0xc716, 0x5d64, 0x8000, 0xebec, 0xe29b, 0x5088, 0x0, 0x0);
        gbc.writeMem(0xc716, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5d64);
        EXPECT(gbc.pc(), 0xc718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc716), 0xcb);
        EXPECT(gbc.readMem(0xc717), 0xaf);
        // CB AF 01CC
        gbc.setState(0xce36, 0x1fa2, 0xf400, 0x7a10, 0x8695, 0xc0ab, 0x0, 0x0);
        gbc.writeMem(0xce36, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1fa2);
        EXPECT(gbc.pc(), 0xce38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce36), 0xcb);
        EXPECT(gbc.readMem(0xce37), 0xaf);
        // CB AF 01CD
        gbc.setState(0x901f, 0x46ea, 0x5660, 0xbae8, 0xbd4f, 0x62d7, 0x0, 0x1);
        gbc.writeMem(0x901f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x46ea);
        EXPECT(gbc.pc(), 0x9021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x901f), 0xcb);
        EXPECT(gbc.readMem(0x9020), 0xaf);
        // CB AF 01CF
        gbc.setState(0x58f6, 0xdb35, 0xbe20, 0x43a6, 0x1306, 0xa37f, 0x0, 0x1);
        gbc.writeMem(0x58f6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xdb35);
        EXPECT(gbc.pc(), 0x58f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01D0
        gbc.setState(0x530e, 0xac02, 0x97f0, 0xfdc2, 0xda7e, 0x40d6, 0x0, 0x0);
        gbc.writeMem(0x530e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xac02);
        EXPECT(gbc.pc(), 0x5310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01D1
        gbc.setState(0x6f3e, 0x2686, 0xbb40, 0x3c5b, 0xf0bf, 0x8f70, 0x1, 0x0);
        gbc.writeMem(0x6f3e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x2686);
        EXPECT(gbc.pc(), 0x6f40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01D2
        gbc.setState(0xd3ac, 0x794c, 0xec40, 0x533e, 0x3150, 0x6ad8, 0x1, 0x0);
        gbc.writeMem(0xd3ac, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x794c);
        EXPECT(gbc.pc(), 0xd3ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ac), 0xcb);
        EXPECT(gbc.readMem(0xd3ad), 0xaf);
        // CB AF 01D3
        gbc.setState(0x2a6d, 0xbce7, 0x6a20, 0xfbc6, 0x8a65, 0x82c, 0x1, 0x0);
        gbc.writeMem(0x2a6d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xbce7);
        EXPECT(gbc.pc(), 0x2a6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01D4
        gbc.setState(0x6bc0, 0x6459, 0x2890, 0x194a, 0xa7b7, 0xe60a, 0x0, 0x1);
        gbc.writeMem(0x6bc0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6459);
        EXPECT(gbc.pc(), 0x6bc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01D5
        gbc.setState(0x4e32, 0x7b24, 0xe460, 0xe41f, 0xa1b8, 0x28a9, 0x1, 0x0);
        gbc.writeMem(0x4e32, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7b24);
        EXPECT(gbc.pc(), 0x4e34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01D6
        gbc.setState(0x9370, 0x5b38, 0x1150, 0x47f0, 0x6cf8, 0xc320, 0x1, 0x0);
        gbc.writeMem(0x9370, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5b38);
        EXPECT(gbc.pc(), 0x9372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9370), 0xcb);
        EXPECT(gbc.readMem(0x9371), 0xaf);
        // CB AF 01D7
        gbc.setState(0xccc6, 0xe658, 0x4c50, 0xb4fe, 0xd63e, 0xbe5d, 0x0, 0x1);
        gbc.writeMem(0xccc6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe658);
        EXPECT(gbc.pc(), 0xccc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc6), 0xcb);
        EXPECT(gbc.readMem(0xccc7), 0xaf);
        // CB AF 01D8
        gbc.setState(0xce85, 0x8201, 0x9d80, 0xff38, 0x522d, 0xef7e, 0x1, 0x1);
        gbc.writeMem(0xce85, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8201);
        EXPECT(gbc.pc(), 0xce87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce85), 0xcb);
        EXPECT(gbc.readMem(0xce86), 0xaf);
        // CB AF 01D9
        gbc.setState(0x13cb, 0x6f78, 0xb390, 0x9094, 0x9602, 0x18d1, 0x0, 0x1);
        gbc.writeMem(0x13cb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x6f78);
        EXPECT(gbc.pc(), 0x13cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01DA
        gbc.setState(0x4567, 0x41db, 0xeaf0, 0xea76, 0xdf94, 0x4e16, 0x1, 0x0);
        gbc.writeMem(0x4567, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x41db);
        EXPECT(gbc.pc(), 0x4569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01DB
        gbc.setState(0x6caf, 0xdb43, 0x30b0, 0xaa4c, 0xeeb6, 0x8dac, 0x0, 0x1);
        gbc.writeMem(0x6caf, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdb43);
        EXPECT(gbc.pc(), 0x6cb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01DC
        gbc.setState(0x2534, 0xa628, 0x2250, 0x806b, 0x9d6c, 0xfad8, 0x0, 0x1);
        gbc.writeMem(0x2534, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa628);
        EXPECT(gbc.pc(), 0x2536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01DD
        gbc.setState(0x4343, 0xcafb, 0xbb30, 0xb45c, 0x5e35, 0xc3a4, 0x1, 0x0);
        gbc.writeMem(0x4343, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xcafb);
        EXPECT(gbc.pc(), 0x4345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01DE
        gbc.setState(0x5fce, 0x63a2, 0x8930, 0x820f, 0x3bd0, 0xf900, 0x1, 0x0);
        gbc.writeMem(0x5fce, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x63a2);
        EXPECT(gbc.pc(), 0x5fd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01DF
        gbc.setState(0xb98f, 0x850f, 0xe920, 0x383, 0xd990, 0x7acb, 0x0, 0x1);
        gbc.writeMem(0xb98f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x850f);
        EXPECT(gbc.pc(), 0xb991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb98f), 0xcb);
        EXPECT(gbc.readMem(0xb990), 0xaf);
        // CB AF 01E0
        gbc.setState(0x3af7, 0x7aa3, 0x4da0, 0x9d02, 0xad6c, 0x3a9f, 0x0, 0x1);
        gbc.writeMem(0x3af7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7aa3);
        EXPECT(gbc.pc(), 0x3af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01E1
        gbc.setState(0xcb62, 0x4118, 0x58e0, 0xdc57, 0xa31e, 0xa364, 0x0, 0x1);
        gbc.writeMem(0xcb62, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4118);
        EXPECT(gbc.pc(), 0xcb64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb62), 0xcb);
        EXPECT(gbc.readMem(0xcb63), 0xaf);
        // CB AF 01E2
        gbc.setState(0x1e37, 0x9ab7, 0x6230, 0x2e0e, 0x3ac6, 0x14ea, 0x0, 0x1);
        gbc.writeMem(0x1e37, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9ab7);
        EXPECT(gbc.pc(), 0x1e39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01E3
        gbc.setState(0xc816, 0xf2c2, 0x8d70, 0x11ea, 0xde69, 0x5522, 0x1, 0x1);
        gbc.writeMem(0xc816, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf2c2);
        EXPECT(gbc.pc(), 0xc818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc816), 0xcb);
        EXPECT(gbc.readMem(0xc817), 0xaf);
        // CB AF 01E4
        gbc.setState(0x34f, 0x5ffb, 0xd700, 0x76c5, 0xd0ca, 0x710, 0x0, 0x0);
        gbc.writeMem(0x34f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5ffb);
        EXPECT(gbc.pc(), 0x351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01E5
        gbc.setState(0x42ac, 0xb778, 0x6590, 0x3c00, 0xe881, 0x998f, 0x1, 0x1);
        gbc.writeMem(0x42ac, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb778);
        EXPECT(gbc.pc(), 0x42ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01E6
        gbc.setState(0xcca0, 0x3e96, 0xa940, 0x7c72, 0x3cc5, 0xdd74, 0x0, 0x0);
        gbc.writeMem(0xcca0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3e96);
        EXPECT(gbc.pc(), 0xcca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcca0), 0xcb);
        EXPECT(gbc.readMem(0xcca1), 0xaf);
        // CB AF 01E7
        gbc.setState(0x5d61, 0x952b, 0x1900, 0x23bd, 0x11b0, 0x1e6c, 0x1, 0x0);
        gbc.writeMem(0x5d61, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x952b);
        EXPECT(gbc.pc(), 0x5d63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01E8
        gbc.setState(0xdd86, 0x903, 0xf70, 0xa80e, 0x580c, 0xd8b9, 0x0, 0x0);
        gbc.writeMem(0xdd86, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x903);
        EXPECT(gbc.pc(), 0xdd88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd86), 0xcb);
        EXPECT(gbc.readMem(0xdd87), 0xaf);
        // CB AF 01E9
        gbc.setState(0x86ab, 0x9905, 0xffb0, 0xc626, 0x7b5, 0xac8, 0x1, 0x0);
        gbc.writeMem(0x86ab, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9905);
        EXPECT(gbc.pc(), 0x86ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ab), 0xcb);
        EXPECT(gbc.readMem(0x86ac), 0xaf);
        // CB AF 01EA
        gbc.setState(0xbfc4, 0x6155, 0xe1a0, 0x13a5, 0x8009, 0xd00b, 0x0, 0x0);
        gbc.writeMem(0xbfc4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6155);
        EXPECT(gbc.pc(), 0xbfc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc4), 0xcb);
        EXPECT(gbc.readMem(0xbfc5), 0xaf);
        // CB AF 01EB
        gbc.setState(0x55f, 0xc6a7, 0xccb0, 0x71ac, 0x1191, 0xfbad, 0x1, 0x0);
        gbc.writeMem(0x55f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc6a7);
        EXPECT(gbc.pc(), 0x561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01EC
        gbc.setState(0x7a97, 0xcc53, 0x940, 0x98be, 0xd618, 0xf992, 0x0, 0x0);
        gbc.writeMem(0x7a97, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xcc53);
        EXPECT(gbc.pc(), 0x7a99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01ED
        gbc.setState(0xbf71, 0x2094, 0x4bb0, 0x6318, 0x70ca, 0xa7d4, 0x1, 0x0);
        gbc.writeMem(0xbf71, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2094);
        EXPECT(gbc.pc(), 0xbf73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf71), 0xcb);
        EXPECT(gbc.readMem(0xbf72), 0xaf);
        // CB AF 01EE
        gbc.setState(0x5144, 0x2254, 0x16a0, 0xa323, 0xaa87, 0x9e71, 0x1, 0x1);
        gbc.writeMem(0x5144, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2254);
        EXPECT(gbc.pc(), 0x5146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01EF
        gbc.setState(0x4666, 0x4931, 0xcc60, 0x4dcb, 0xc3dc, 0x1a1, 0x0, 0x0);
        gbc.writeMem(0x4666, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4931);
        EXPECT(gbc.pc(), 0x4668);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01F0
        gbc.setState(0xa8f7, 0x5266, 0x8b40, 0x78a8, 0xad5e, 0x9eb7, 0x1, 0x0);
        gbc.writeMem(0xa8f7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5266);
        EXPECT(gbc.pc(), 0xa8f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f7), 0xcb);
        EXPECT(gbc.readMem(0xa8f8), 0xaf);
        // CB AF 01F1
        gbc.setState(0xa2bc, 0xbf4f, 0x8ff0, 0x2040, 0xf20d, 0x9433, 0x1, 0x1);
        gbc.writeMem(0xa2bc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xbf4f);
        EXPECT(gbc.pc(), 0xa2be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2bc), 0xcb);
        EXPECT(gbc.readMem(0xa2bd), 0xaf);
        // CB AF 01F2
        gbc.setState(0xc4c4, 0x2846, 0xb730, 0xa06c, 0x887e, 0xba3a, 0x1, 0x0);
        gbc.writeMem(0xc4c4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2846);
        EXPECT(gbc.pc(), 0xc4c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4c4), 0xcb);
        EXPECT(gbc.readMem(0xc4c5), 0xaf);
        // CB AF 01F3
        gbc.setState(0x8658, 0xacd1, 0x9160, 0xc19e, 0x7937, 0xf68d, 0x1, 0x1);
        gbc.writeMem(0x8658, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xacd1);
        EXPECT(gbc.pc(), 0x865a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8658), 0xcb);
        EXPECT(gbc.readMem(0x8659), 0xaf);
        // CB AF 01F4
        gbc.setState(0x4b26, 0x1170, 0x95b0, 0xee47, 0xe5e2, 0xa917, 0x0, 0x1);
        gbc.writeMem(0x4b26, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1170);
        EXPECT(gbc.pc(), 0x4b28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01F5
        gbc.setState(0x2d81, 0x22d2, 0x7b10, 0x5779, 0x70f7, 0xdbe0, 0x0, 0x1);
        gbc.writeMem(0x2d81, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x22d2);
        EXPECT(gbc.pc(), 0x2d83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01F6
        gbc.setState(0x8b81, 0x660a, 0xd540, 0x9ce7, 0x5a51, 0x5928, 0x0, 0x0);
        gbc.writeMem(0x8b81, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x660a);
        EXPECT(gbc.pc(), 0x8b83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b81), 0xcb);
        EXPECT(gbc.readMem(0x8b82), 0xaf);
        // CB AF 01F7
        gbc.setState(0x18f7, 0xab30, 0x6cf0, 0x3c98, 0x1a0c, 0xf38e, 0x0, 0x1);
        gbc.writeMem(0x18f7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xab30);
        EXPECT(gbc.pc(), 0x18f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01F8
        gbc.setState(0x8568, 0x9d0c, 0x9a90, 0xe807, 0xcfc, 0x50fe, 0x1, 0x0);
        gbc.writeMem(0x8568, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9d0c);
        EXPECT(gbc.pc(), 0x856a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8568), 0xcb);
        EXPECT(gbc.readMem(0x8569), 0xaf);
        // CB AF 01F9
        gbc.setState(0x75f1, 0x2d55, 0xd050, 0x98a7, 0x3928, 0x499b, 0x0, 0x1);
        gbc.writeMem(0x75f1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2d55);
        EXPECT(gbc.pc(), 0x75f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 01FB
        gbc.setState(0xd6a1, 0x9c19, 0xc290, 0x607a, 0x5d49, 0x5eea, 0x1, 0x0);
        gbc.writeMem(0xd6a1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9c19);
        EXPECT(gbc.pc(), 0xd6a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a1), 0xcb);
        EXPECT(gbc.readMem(0xd6a2), 0xaf);
        // CB AF 01FC
        gbc.setState(0x3694, 0x7064, 0x120, 0x7e39, 0x21fe, 0x6d0d, 0x0, 0x1);
        gbc.writeMem(0x3694, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7064);
        EXPECT(gbc.pc(), 0x3696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01FD
        gbc.setState(0x348f, 0x9306, 0xfe20, 0x59fa, 0xde9, 0xdf01, 0x0, 0x0);
        gbc.writeMem(0x348f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9306);
        EXPECT(gbc.pc(), 0x3491);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 01FE
        gbc.setState(0x6d55, 0x10a8, 0x34c0, 0x1c2c, 0x68e3, 0xcdae, 0x0, 0x0);
        gbc.writeMem(0x6d55, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x10a8);
        EXPECT(gbc.pc(), 0x6d57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0200
        gbc.setState(0xbd16, 0x3822, 0x44f0, 0x9cf6, 0x4959, 0xa9e3, 0x1, 0x0);
        gbc.writeMem(0xbd16, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3822);
        EXPECT(gbc.pc(), 0xbd18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd16), 0xcb);
        EXPECT(gbc.readMem(0xbd17), 0xaf);
        // CB AF 0201
        gbc.setState(0x6ca0, 0x33cb, 0xdf60, 0xad70, 0x7b11, 0xc2b4, 0x1, 0x1);
        gbc.writeMem(0x6ca0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x33cb);
        EXPECT(gbc.pc(), 0x6ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0202
        gbc.setState(0x87dd, 0x9eaa, 0x6db0, 0x4e1e, 0x54bb, 0x5670, 0x1, 0x1);
        gbc.writeMem(0x87dd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9eaa);
        EXPECT(gbc.pc(), 0x87df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87dd), 0xcb);
        EXPECT(gbc.readMem(0x87de), 0xaf);
        // CB AF 0203
        gbc.setState(0x9da3, 0x95c3, 0xfb80, 0xd29d, 0x194b, 0x13a8, 0x1, 0x0);
        gbc.writeMem(0x9da3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x95c3);
        EXPECT(gbc.pc(), 0x9da5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da3), 0xcb);
        EXPECT(gbc.readMem(0x9da4), 0xaf);
        // CB AF 0204
        gbc.setState(0xeb88, 0x3009, 0x6d0, 0xbf2f, 0x6f2f, 0xf4fb, 0x1, 0x0);
        gbc.writeMem(0xeb88, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3009);
        EXPECT(gbc.pc(), 0xeb8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb88), 0xcb);
        EXPECT(gbc.readMem(0xeb89), 0xaf);
        // CB AF 0205
        gbc.setState(0xe371, 0xf419, 0x8a40, 0xb933, 0x21c1, 0x34e3, 0x1, 0x0);
        gbc.writeMem(0xe371, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf419);
        EXPECT(gbc.pc(), 0xe373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe371), 0xcb);
        EXPECT(gbc.readMem(0xe372), 0xaf);
        // CB AF 0206
        gbc.setState(0xdbd9, 0x114c, 0xab70, 0x4729, 0xd106, 0x3c34, 0x1, 0x1);
        gbc.writeMem(0xdbd9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x114c);
        EXPECT(gbc.pc(), 0xdbdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbd9), 0xcb);
        EXPECT(gbc.readMem(0xdbda), 0xaf);
        // CB AF 0207
        gbc.setState(0x27aa, 0x3fb4, 0xb110, 0xca4, 0x7aec, 0xbc4c, 0x1, 0x0);
        gbc.writeMem(0x27aa, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3fb4);
        EXPECT(gbc.pc(), 0x27ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0208
        gbc.setState(0x74bc, 0xef7d, 0x1200, 0xde83, 0xbb8e, 0x8aa6, 0x1, 0x1);
        gbc.writeMem(0x74bc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xef7d);
        EXPECT(gbc.pc(), 0x74be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0209
        gbc.setState(0x48b4, 0x9806, 0xba00, 0xf86, 0xa654, 0xf343, 0x0, 0x1);
        gbc.writeMem(0x48b4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9806);
        EXPECT(gbc.pc(), 0x48b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 020A
        gbc.setState(0x8a46, 0x5ae6, 0xc640, 0xb12, 0x235d, 0xbfbf, 0x1, 0x1);
        gbc.writeMem(0x8a46, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5ae6);
        EXPECT(gbc.pc(), 0x8a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a46), 0xcb);
        EXPECT(gbc.readMem(0x8a47), 0xaf);
        // CB AF 020B
        gbc.setState(0xa913, 0xde5a, 0xe790, 0xae2a, 0x7c6, 0xae02, 0x1, 0x0);
        gbc.writeMem(0xa913, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xde5a);
        EXPECT(gbc.pc(), 0xa915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa913), 0xcb);
        EXPECT(gbc.readMem(0xa914), 0xaf);
        // CB AF 020C
        gbc.setState(0x8f52, 0xc636, 0xa0b0, 0x8ce, 0x1304, 0x5e25, 0x1, 0x0);
        gbc.writeMem(0x8f52, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc636);
        EXPECT(gbc.pc(), 0x8f54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f52), 0xcb);
        EXPECT(gbc.readMem(0x8f53), 0xaf);
        // CB AF 020D
        gbc.setState(0xc389, 0x1a6c, 0xa170, 0x9d55, 0x4266, 0x8b61, 0x0, 0x1);
        gbc.writeMem(0xc389, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1a6c);
        EXPECT(gbc.pc(), 0xc38b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc389), 0xcb);
        EXPECT(gbc.readMem(0xc38a), 0xaf);
        // CB AF 020E
        gbc.setState(0xdafd, 0xf13d, 0xcf60, 0x2ab7, 0x6746, 0xf025, 0x1, 0x1);
        gbc.writeMem(0xdafd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf13d);
        EXPECT(gbc.pc(), 0xdaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdafd), 0xcb);
        EXPECT(gbc.readMem(0xdafe), 0xaf);
        // CB AF 020F
        gbc.setState(0xeb91, 0xb792, 0xe050, 0x435b, 0xf5d6, 0x8b9b, 0x0, 0x1);
        gbc.writeMem(0xeb91, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb792);
        EXPECT(gbc.pc(), 0xeb93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb91), 0xcb);
        EXPECT(gbc.readMem(0xeb92), 0xaf);
        // CB AF 0210
        gbc.setState(0x4021, 0xc215, 0xa760, 0x6d94, 0x27b8, 0x739f, 0x1, 0x1);
        gbc.writeMem(0x4021, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc215);
        EXPECT(gbc.pc(), 0x4023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0211
        gbc.setState(0xa1e8, 0x90f0, 0x1330, 0x58a8, 0xec00, 0xb49b, 0x0, 0x0);
        gbc.writeMem(0xa1e8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x90f0);
        EXPECT(gbc.pc(), 0xa1ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1e8), 0xcb);
        EXPECT(gbc.readMem(0xa1e9), 0xaf);
        // CB AF 0212
        gbc.setState(0x5a6c, 0x87ba, 0xefc0, 0xee87, 0x25d0, 0xe03c, 0x0, 0x0);
        gbc.writeMem(0x5a6c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x87ba);
        EXPECT(gbc.pc(), 0x5a6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0213
        gbc.setState(0x7af7, 0x5946, 0x560, 0xf400, 0x6c79, 0xe482, 0x0, 0x1);
        gbc.writeMem(0x7af7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5946);
        EXPECT(gbc.pc(), 0x7af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0214
        gbc.setState(0x5f2f, 0xb6, 0xbda0, 0xec0f, 0x7674, 0x2cb3, 0x0, 0x0);
        gbc.writeMem(0x5f2f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb6);
        EXPECT(gbc.pc(), 0x5f31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0215
        gbc.setState(0x73aa, 0xbb8a, 0x2230, 0xdca8, 0x5bae, 0x959a, 0x0, 0x0);
        gbc.writeMem(0x73aa, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbb8a);
        EXPECT(gbc.pc(), 0x73ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0216
        gbc.setState(0x3f24, 0x8bf7, 0xc310, 0xcb55, 0x5efe, 0x1126, 0x1, 0x1);
        gbc.writeMem(0x3f24, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8bf7);
        EXPECT(gbc.pc(), 0x3f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0217
        gbc.setState(0x55b2, 0x9d34, 0x2660, 0xea0b, 0xf5f, 0xd791, 0x1, 0x0);
        gbc.writeMem(0x55b2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9d34);
        EXPECT(gbc.pc(), 0x55b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0219
        gbc.setState(0x4cdb, 0x55af, 0xda90, 0xf791, 0xec79, 0xd340, 0x1, 0x1);
        gbc.writeMem(0x4cdb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x55af);
        EXPECT(gbc.pc(), 0x4cdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 021A
        gbc.setState(0xed4d, 0x46f7, 0xa560, 0xc86e, 0xe9d9, 0xbc17, 0x0, 0x0);
        gbc.writeMem(0xed4d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x46f7);
        EXPECT(gbc.pc(), 0xed4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed4d), 0xcb);
        EXPECT(gbc.readMem(0xed4e), 0xaf);
        // CB AF 021B
        gbc.setState(0x28ac, 0x4298, 0xe760, 0x6a5b, 0x28a9, 0xff41, 0x1, 0x1);
        gbc.writeMem(0x28ac, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4298);
        EXPECT(gbc.pc(), 0x28ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 021C
        gbc.setState(0x9478, 0x2db5, 0x7620, 0xede7, 0x45d7, 0xf70d, 0x0, 0x0);
        gbc.writeMem(0x9478, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2db5);
        EXPECT(gbc.pc(), 0x947a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9478), 0xcb);
        EXPECT(gbc.readMem(0x9479), 0xaf);
        // CB AF 021E
        gbc.setState(0xefd1, 0x595d, 0x40e0, 0xbcb3, 0x176b, 0xd1fd, 0x1, 0x1);
        gbc.writeMem(0xefd1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x595d);
        EXPECT(gbc.pc(), 0xefd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefd1), 0xcb);
        EXPECT(gbc.readMem(0xefd2), 0xaf);
        // CB AF 021F
        gbc.setState(0x37c6, 0x7b8c, 0xc3e0, 0x71d6, 0x5873, 0x1cc0, 0x1, 0x1);
        gbc.writeMem(0x37c6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7b8c);
        EXPECT(gbc.pc(), 0x37c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0220
        gbc.setState(0x7dbe, 0x5635, 0x33b0, 0x75e9, 0xac4a, 0x2bb2, 0x0, 0x1);
        gbc.writeMem(0x7dbe, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5635);
        EXPECT(gbc.pc(), 0x7dc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0221
        gbc.setState(0x9bb0, 0xe2a2, 0xedf0, 0x868c, 0x755e, 0x4cf2, 0x1, 0x1);
        gbc.writeMem(0x9bb0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe2a2);
        EXPECT(gbc.pc(), 0x9bb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb0), 0xcb);
        EXPECT(gbc.readMem(0x9bb1), 0xaf);
        // CB AF 0222
        gbc.setState(0x95f1, 0x65d8, 0x32e0, 0x6184, 0xaf18, 0xe49a, 0x1, 0x0);
        gbc.writeMem(0x95f1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x65d8);
        EXPECT(gbc.pc(), 0x95f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f1), 0xcb);
        EXPECT(gbc.readMem(0x95f2), 0xaf);
        // CB AF 0223
        gbc.setState(0x3d50, 0x9dc3, 0xd490, 0xcdfb, 0x7174, 0x1ad6, 0x0, 0x1);
        gbc.writeMem(0x3d50, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9dc3);
        EXPECT(gbc.pc(), 0x3d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0224
        gbc.setState(0x3227, 0x7b87, 0xb210, 0x9a8b, 0x77be, 0xaa67, 0x0, 0x1);
        gbc.writeMem(0x3227, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7b87);
        EXPECT(gbc.pc(), 0x3229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0225
        gbc.setState(0xeef1, 0xef6a, 0x5dc0, 0xd8b1, 0xb06c, 0xe2f2, 0x0, 0x1);
        gbc.writeMem(0xeef1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xef6a);
        EXPECT(gbc.pc(), 0xeef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef1), 0xcb);
        EXPECT(gbc.readMem(0xeef2), 0xaf);
        // CB AF 0226
        gbc.setState(0x137c, 0xd257, 0x4630, 0xfcbe, 0xeb5a, 0x310e, 0x1, 0x1);
        gbc.writeMem(0x137c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0x137e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0227
        gbc.setState(0x1e65, 0xf3aa, 0x7e0, 0x2ed3, 0x3a85, 0xc708, 0x0, 0x1);
        gbc.writeMem(0x1e65, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf3aa);
        EXPECT(gbc.pc(), 0x1e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0228
        gbc.setState(0x483c, 0xe3ba, 0x82a0, 0x793e, 0x583d, 0x12a9, 0x0, 0x1);
        gbc.writeMem(0x483c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe3ba);
        EXPECT(gbc.pc(), 0x483e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0229
        gbc.setState(0x96a0, 0xf717, 0x9a50, 0x9000, 0x1de, 0x9d27, 0x1, 0x0);
        gbc.writeMem(0x96a0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf717);
        EXPECT(gbc.pc(), 0x96a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96a0), 0xcb);
        EXPECT(gbc.readMem(0x96a1), 0xaf);
        // CB AF 022A
        gbc.setState(0x60bb, 0xbb40, 0xbc20, 0xcdd9, 0xd5f8, 0x2c8c, 0x0, 0x1);
        gbc.writeMem(0x60bb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xbb40);
        EXPECT(gbc.pc(), 0x60bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 022B
        gbc.setState(0x4fea, 0x70bf, 0x7cf0, 0x4845, 0x1c53, 0x7c37, 0x0, 0x1);
        gbc.writeMem(0x4fea, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x70bf);
        EXPECT(gbc.pc(), 0x4fec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 022C
        gbc.setState(0xba33, 0xa78d, 0xb140, 0x54a8, 0xec7d, 0x6d59, 0x0, 0x1);
        gbc.writeMem(0xba33, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa78d);
        EXPECT(gbc.pc(), 0xba35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba33), 0xcb);
        EXPECT(gbc.readMem(0xba34), 0xaf);
        // CB AF 022D
        gbc.setState(0x25c5, 0x1098, 0x6470, 0xb23d, 0x3cc7, 0xce36, 0x0, 0x0);
        gbc.writeMem(0x25c5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1098);
        EXPECT(gbc.pc(), 0x25c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 022E
        gbc.setState(0x1125, 0x6dee, 0x49f0, 0xa1dd, 0x24f6, 0xa2a1, 0x1, 0x0);
        gbc.writeMem(0x1125, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6dee);
        EXPECT(gbc.pc(), 0x1127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 022F
        gbc.setState(0x3f8e, 0x3f73, 0xf3c0, 0x97aa, 0x2055, 0xd0a, 0x0, 0x1);
        gbc.writeMem(0x3f8e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3f73);
        EXPECT(gbc.pc(), 0x3f90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0230
        gbc.setState(0xad10, 0x4045, 0x6420, 0xe3bb, 0xb961, 0xb79d, 0x0, 0x1);
        gbc.writeMem(0xad10, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4045);
        EXPECT(gbc.pc(), 0xad12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad10), 0xcb);
        EXPECT(gbc.readMem(0xad11), 0xaf);
        // CB AF 0232
        gbc.setState(0x2e28, 0x207e, 0xcb00, 0xde58, 0x3661, 0xa4fb, 0x1, 0x0);
        gbc.writeMem(0x2e28, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x207e);
        EXPECT(gbc.pc(), 0x2e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0233
        gbc.setState(0xa9e, 0x8224, 0xb0e0, 0x6fd2, 0x719, 0x44da, 0x0, 0x1);
        gbc.writeMem(0xa9e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8224);
        EXPECT(gbc.pc(), 0xaa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0234
        gbc.setState(0x90d0, 0xa5dc, 0x9620, 0xf171, 0x58c4, 0x7508, 0x0, 0x0);
        gbc.writeMem(0x90d0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa5dc);
        EXPECT(gbc.pc(), 0x90d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d0), 0xcb);
        EXPECT(gbc.readMem(0x90d1), 0xaf);
        // CB AF 0236
        gbc.setState(0x95c7, 0x62bc, 0x650, 0x59c6, 0x5640, 0x9edf, 0x0, 0x1);
        gbc.writeMem(0x95c7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x62bc);
        EXPECT(gbc.pc(), 0x95c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95c7), 0xcb);
        EXPECT(gbc.readMem(0x95c8), 0xaf);
        // CB AF 0237
        gbc.setState(0xd80b, 0x4302, 0x2960, 0x94ad, 0x569b, 0xac6f, 0x1, 0x1);
        gbc.writeMem(0xd80b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4302);
        EXPECT(gbc.pc(), 0xd80d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd80b), 0xcb);
        EXPECT(gbc.readMem(0xd80c), 0xaf);
        // CB AF 0238
        gbc.setState(0xac7a, 0xa6be, 0xa0d0, 0xcbd0, 0x7b85, 0x9e11, 0x0, 0x0);
        gbc.writeMem(0xac7a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa6be);
        EXPECT(gbc.pc(), 0xac7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac7a), 0xcb);
        EXPECT(gbc.readMem(0xac7b), 0xaf);
        // CB AF 0239
        gbc.setState(0x8a5b, 0xb873, 0x510, 0x75aa, 0xf10a, 0xaec6, 0x0, 0x0);
        gbc.writeMem(0x8a5b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb873);
        EXPECT(gbc.pc(), 0x8a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a5b), 0xcb);
        EXPECT(gbc.readMem(0x8a5c), 0xaf);
        // CB AF 023A
        gbc.setState(0xb9d4, 0x35f, 0xeac0, 0x3437, 0x1bd8, 0x7648, 0x1, 0x0);
        gbc.writeMem(0xb9d4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x35f);
        EXPECT(gbc.pc(), 0xb9d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9d4), 0xcb);
        EXPECT(gbc.readMem(0xb9d5), 0xaf);
        // CB AF 023B
        gbc.setState(0xbfc, 0x933, 0x3540, 0x4ae5, 0xebc2, 0xbb64, 0x0, 0x0);
        gbc.writeMem(0xbfc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x933);
        EXPECT(gbc.pc(), 0xbfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 023C
        gbc.setState(0xe08, 0x323a, 0x7720, 0x19cb, 0x2034, 0x79b1, 0x0, 0x0);
        gbc.writeMem(0xe08, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x323a);
        EXPECT(gbc.pc(), 0xe0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 023E
        gbc.setState(0xa1f8, 0xeefe, 0x4db0, 0x1e64, 0xb5de, 0xa7a7, 0x0, 0x0);
        gbc.writeMem(0xa1f8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xeefe);
        EXPECT(gbc.pc(), 0xa1fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f8), 0xcb);
        EXPECT(gbc.readMem(0xa1f9), 0xaf);
        // CB AF 023F
        gbc.setState(0x6d98, 0x2ca9, 0x5220, 0x3ae0, 0x2a05, 0x6571, 0x0, 0x0);
        gbc.writeMem(0x6d98, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2ca9);
        EXPECT(gbc.pc(), 0x6d9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0240
        gbc.setState(0xaee6, 0x1764, 0xb0f0, 0x5022, 0x5e3, 0x6fe1, 0x1, 0x1);
        gbc.writeMem(0xaee6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1764);
        EXPECT(gbc.pc(), 0xaee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaee6), 0xcb);
        EXPECT(gbc.readMem(0xaee7), 0xaf);
        // CB AF 0241
        gbc.setState(0x10c9, 0xe63c, 0xa5f0, 0xf968, 0xc9c0, 0x504b, 0x0, 0x0);
        gbc.writeMem(0x10c9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe63c);
        EXPECT(gbc.pc(), 0x10cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0243
        gbc.setState(0x2d04, 0xea5b, 0x2740, 0x1092, 0xc839, 0x184a, 0x0, 0x0);
        gbc.writeMem(0x2d04, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xea5b);
        EXPECT(gbc.pc(), 0x2d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0245
        gbc.setState(0x7c83, 0xa922, 0x2c40, 0x4b27, 0xe3e2, 0xff04, 0x0, 0x0);
        gbc.writeMem(0x7c83, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa922);
        EXPECT(gbc.pc(), 0x7c85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0246
        gbc.setState(0x66b1, 0x1510, 0x9ef0, 0x6d8d, 0xb121, 0xd516, 0x1, 0x0);
        gbc.writeMem(0x66b1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1510);
        EXPECT(gbc.pc(), 0x66b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0247
        gbc.setState(0x5259, 0x51ff, 0xb8e0, 0x8df3, 0xd3e9, 0xdb7b, 0x0, 0x0);
        gbc.writeMem(0x5259, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x51ff);
        EXPECT(gbc.pc(), 0x525b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0248
        gbc.setState(0x98fb, 0x988a, 0x5c70, 0x6eb3, 0x8e1b, 0xa84a, 0x1, 0x0);
        gbc.writeMem(0x98fb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x988a);
        EXPECT(gbc.pc(), 0x98fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98fb), 0xcb);
        EXPECT(gbc.readMem(0x98fc), 0xaf);
        // CB AF 0249
        gbc.setState(0x3982, 0x3f4b, 0xd0c0, 0x48af, 0xa05a, 0x434, 0x0, 0x0);
        gbc.writeMem(0x3982, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x3f4b);
        EXPECT(gbc.pc(), 0x3984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 024A
        gbc.setState(0x20d3, 0xb72e, 0xdbb0, 0xc475, 0xfc54, 0xef34, 0x0, 0x0);
        gbc.writeMem(0x20d3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb72e);
        EXPECT(gbc.pc(), 0x20d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 024B
        gbc.setState(0xa398, 0xad7b, 0x310, 0x9ad9, 0x6eeb, 0xf05, 0x0, 0x0);
        gbc.writeMem(0xa398, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xad7b);
        EXPECT(gbc.pc(), 0xa39a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa398), 0xcb);
        EXPECT(gbc.readMem(0xa399), 0xaf);
        // CB AF 024C
        gbc.setState(0x5592, 0x2a93, 0xc390, 0x78ac, 0x3604, 0x1a77, 0x0, 0x1);
        gbc.writeMem(0x5592, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2a93);
        EXPECT(gbc.pc(), 0x5594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 024D
        gbc.setState(0x2a93, 0x9c9, 0xd10, 0x10a3, 0xb786, 0x518b, 0x0, 0x1);
        gbc.writeMem(0x2a93, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9c9);
        EXPECT(gbc.pc(), 0x2a95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 024E
        gbc.setState(0x9025, 0x2944, 0xb340, 0x268a, 0xf10b, 0x2031, 0x1, 0x0);
        gbc.writeMem(0x9025, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2944);
        EXPECT(gbc.pc(), 0x9027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9025), 0xcb);
        EXPECT(gbc.readMem(0x9026), 0xaf);
        // CB AF 024F
        gbc.setState(0x1262, 0x36ee, 0xb900, 0xb081, 0x750, 0x3dbf, 0x0, 0x1);
        gbc.writeMem(0x1262, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x36ee);
        EXPECT(gbc.pc(), 0x1264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0251
        gbc.setState(0xa9b8, 0x3969, 0x16a0, 0x873e, 0x349, 0x130, 0x1, 0x0);
        gbc.writeMem(0xa9b8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3969);
        EXPECT(gbc.pc(), 0xa9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b8), 0xcb);
        EXPECT(gbc.readMem(0xa9b9), 0xaf);
        // CB AF 0252
        gbc.setState(0x21ec, 0x9a8e, 0xa980, 0x2608, 0x9618, 0xdcdf, 0x1, 0x1);
        gbc.writeMem(0x21ec, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9a8e);
        EXPECT(gbc.pc(), 0x21ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0253
        gbc.setState(0x407, 0x7cd8, 0x5a50, 0xb95e, 0xa5ff, 0x84ac, 0x0, 0x0);
        gbc.writeMem(0x407, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7cd8);
        EXPECT(gbc.pc(), 0x409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0254
        gbc.setState(0xd3ed, 0x9a59, 0xa310, 0x4eaa, 0xedf9, 0xc064, 0x0, 0x0);
        gbc.writeMem(0xd3ed, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9a59);
        EXPECT(gbc.pc(), 0xd3ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ed), 0xcb);
        EXPECT(gbc.readMem(0xd3ee), 0xaf);
        // CB AF 0255
        gbc.setState(0x760c, 0x39cc, 0x1b00, 0x4ef8, 0x7b33, 0x8343, 0x1, 0x0);
        gbc.writeMem(0x760c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x39cc);
        EXPECT(gbc.pc(), 0x760e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0256
        gbc.setState(0x5f0a, 0x305b, 0xf530, 0xab54, 0xceec, 0x5f3c, 0x0, 0x1);
        gbc.writeMem(0x5f0a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x305b);
        EXPECT(gbc.pc(), 0x5f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0257
        gbc.setState(0x195a, 0x9cd5, 0x3e80, 0x225, 0xd08f, 0x502a, 0x0, 0x1);
        gbc.writeMem(0x195a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9cd5);
        EXPECT(gbc.pc(), 0x195c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0258
        gbc.setState(0xa7f4, 0xa129, 0xee0, 0x5b79, 0x7f46, 0x1aa8, 0x1, 0x1);
        gbc.writeMem(0xa7f4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa129);
        EXPECT(gbc.pc(), 0xa7f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7f4), 0xcb);
        EXPECT(gbc.readMem(0xa7f5), 0xaf);
        // CB AF 0259
        gbc.setState(0xcbbb, 0x4b46, 0xe420, 0x2058, 0x749a, 0x500, 0x0, 0x1);
        gbc.writeMem(0xcbbb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4b46);
        EXPECT(gbc.pc(), 0xcbbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbb), 0xcb);
        EXPECT(gbc.readMem(0xcbbc), 0xaf);
        // CB AF 025A
        gbc.setState(0xfd3, 0x6f72, 0xdbe0, 0xa8d5, 0x4e96, 0xe881, 0x0, 0x1);
        gbc.writeMem(0xfd3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6f72);
        EXPECT(gbc.pc(), 0xfd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 025B
        gbc.setState(0xca19, 0x5e6e, 0xcca0, 0xe045, 0x189, 0xd16b, 0x1, 0x0);
        gbc.writeMem(0xca19, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5e6e);
        EXPECT(gbc.pc(), 0xca1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca19), 0xcb);
        EXPECT(gbc.readMem(0xca1a), 0xaf);
        // CB AF 025C
        gbc.setState(0x121b, 0x892e, 0x32a0, 0x8695, 0x922c, 0xcebd, 0x1, 0x1);
        gbc.writeMem(0x121b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x892e);
        EXPECT(gbc.pc(), 0x121d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 025D
        gbc.setState(0x308c, 0xbe2e, 0x9fc0, 0x9bae, 0x56ad, 0xad5d, 0x1, 0x0);
        gbc.writeMem(0x308c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xbe2e);
        EXPECT(gbc.pc(), 0x308e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 025E
        gbc.setState(0xdb86, 0xc223, 0x8410, 0x5b2b, 0x10bd, 0x13bd, 0x0, 0x1);
        gbc.writeMem(0xdb86, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc223);
        EXPECT(gbc.pc(), 0xdb88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb86), 0xcb);
        EXPECT(gbc.readMem(0xdb87), 0xaf);
        // CB AF 025F
        gbc.setState(0x8cc1, 0x83a9, 0x7e60, 0xc148, 0xd7b8, 0x7f1, 0x0, 0x0);
        gbc.writeMem(0x8cc1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x83a9);
        EXPECT(gbc.pc(), 0x8cc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cc1), 0xcb);
        EXPECT(gbc.readMem(0x8cc2), 0xaf);
        // CB AF 0260
        gbc.setState(0x641a, 0xc756, 0xa0d0, 0x38c3, 0x6c91, 0x793b, 0x0, 0x1);
        gbc.writeMem(0x641a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc756);
        EXPECT(gbc.pc(), 0x641c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0261
        gbc.setState(0xe88d, 0x2f7a, 0x6900, 0x2aac, 0xb5e4, 0x9895, 0x1, 0x0);
        gbc.writeMem(0xe88d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2f7a);
        EXPECT(gbc.pc(), 0xe88f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe88d), 0xcb);
        EXPECT(gbc.readMem(0xe88e), 0xaf);
        // CB AF 0262
        gbc.setState(0xb605, 0x7b7b, 0x7c10, 0xaac4, 0x140e, 0x2c22, 0x0, 0x0);
        gbc.writeMem(0xb605, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7b7b);
        EXPECT(gbc.pc(), 0xb607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb605), 0xcb);
        EXPECT(gbc.readMem(0xb606), 0xaf);
        // CB AF 0263
        gbc.setState(0x45d0, 0x18c2, 0x4ae0, 0xaa7f, 0x3077, 0x59ba, 0x0, 0x1);
        gbc.writeMem(0x45d0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x18c2);
        EXPECT(gbc.pc(), 0x45d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0264
        gbc.setState(0x9095, 0xc85c, 0x61d0, 0xa664, 0xf41e, 0x9794, 0x1, 0x0);
        gbc.writeMem(0x9095, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc85c);
        EXPECT(gbc.pc(), 0x9097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9095), 0xcb);
        EXPECT(gbc.readMem(0x9096), 0xaf);
        // CB AF 0265
        gbc.setState(0xab02, 0x42ea, 0x3a90, 0xa472, 0xb63e, 0xca8e, 0x1, 0x1);
        gbc.writeMem(0xab02, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x42ea);
        EXPECT(gbc.pc(), 0xab04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab02), 0xcb);
        EXPECT(gbc.readMem(0xab03), 0xaf);
        // CB AF 0266
        gbc.setState(0x53ce, 0x7ac, 0xa050, 0x5c5f, 0x8ca6, 0x4a65, 0x1, 0x1);
        gbc.writeMem(0x53ce, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7ac);
        EXPECT(gbc.pc(), 0x53d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0267
        gbc.setState(0x4c24, 0x6654, 0x2400, 0xa542, 0xafcc, 0xf0df, 0x0, 0x0);
        gbc.writeMem(0x4c24, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6654);
        EXPECT(gbc.pc(), 0x4c26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0268
        gbc.setState(0x9f1e, 0x77f, 0x7eb0, 0xe290, 0x9d33, 0x5a79, 0x0, 0x1);
        gbc.writeMem(0x9f1e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x77f);
        EXPECT(gbc.pc(), 0x9f20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f1e), 0xcb);
        EXPECT(gbc.readMem(0x9f1f), 0xaf);
        // CB AF 0269
        gbc.setState(0x45f4, 0x5d0a, 0x50, 0xa567, 0x38b, 0x5c4, 0x1, 0x1);
        gbc.writeMem(0x45f4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5d0a);
        EXPECT(gbc.pc(), 0x45f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 026A
        gbc.setState(0x985f, 0xbe88, 0x7360, 0x59fc, 0xc1b6, 0x6256, 0x1, 0x0);
        gbc.writeMem(0x985f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbe88);
        EXPECT(gbc.pc(), 0x9861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x985f), 0xcb);
        EXPECT(gbc.readMem(0x9860), 0xaf);
        // CB AF 026B
        gbc.setState(0xcb5a, 0xd982, 0x7b40, 0x3c03, 0xffe6, 0x6fed, 0x0, 0x0);
        gbc.writeMem(0xcb5a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd982);
        EXPECT(gbc.pc(), 0xcb5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb5a), 0xcb);
        EXPECT(gbc.readMem(0xcb5b), 0xaf);
        // CB AF 026D
        gbc.setState(0x918b, 0xf1cb, 0x2b0, 0x78ba, 0xab3f, 0xc8e1, 0x0, 0x0);
        gbc.writeMem(0x918b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf1cb);
        EXPECT(gbc.pc(), 0x918d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x918b), 0xcb);
        EXPECT(gbc.readMem(0x918c), 0xaf);
        // CB AF 026E
        gbc.setState(0x4335, 0xa390, 0x15f0, 0x66db, 0x9737, 0x66bc, 0x0, 0x1);
        gbc.writeMem(0x4335, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa390);
        EXPECT(gbc.pc(), 0x4337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 026F
        gbc.setState(0xdceb, 0xc74d, 0x8490, 0x2a9e, 0x5932, 0x2ff8, 0x1, 0x1);
        gbc.writeMem(0xdceb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xc74d);
        EXPECT(gbc.pc(), 0xdced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdceb), 0xcb);
        EXPECT(gbc.readMem(0xdcec), 0xaf);
        // CB AF 0270
        gbc.setState(0xd494, 0x2b13, 0x1860, 0x8a22, 0x1408, 0x929a, 0x1, 0x0);
        gbc.writeMem(0xd494, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2b13);
        EXPECT(gbc.pc(), 0xd496);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd494), 0xcb);
        EXPECT(gbc.readMem(0xd495), 0xaf);
        // CB AF 0271
        gbc.setState(0xe10e, 0xceee, 0xd6d0, 0x37e7, 0x1ec4, 0x42cd, 0x1, 0x0);
        gbc.writeMem(0xe10e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xceee);
        EXPECT(gbc.pc(), 0xe110);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe10e), 0xcb);
        EXPECT(gbc.readMem(0xe10f), 0xaf);
        // CB AF 0272
        gbc.setState(0xbfc1, 0x8df7, 0x4160, 0xd092, 0xb2ef, 0xe586, 0x1, 0x1);
        gbc.writeMem(0xbfc1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8df7);
        EXPECT(gbc.pc(), 0xbfc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc1), 0xcb);
        EXPECT(gbc.readMem(0xbfc2), 0xaf);
        // CB AF 0273
        gbc.setState(0x82a1, 0x2cfc, 0x4c10, 0x1b0d, 0x50ff, 0xbbd1, 0x0, 0x0);
        gbc.writeMem(0x82a1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2cfc);
        EXPECT(gbc.pc(), 0x82a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82a1), 0xcb);
        EXPECT(gbc.readMem(0x82a2), 0xaf);
        // CB AF 0274
        gbc.setState(0xd292, 0x686b, 0x3bd0, 0xd0a4, 0xbb90, 0x2e3d, 0x1, 0x0);
        gbc.writeMem(0xd292, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x686b);
        EXPECT(gbc.pc(), 0xd294);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd292), 0xcb);
        EXPECT(gbc.readMem(0xd293), 0xaf);
        // CB AF 0275
        gbc.setState(0x14e1, 0xb039, 0x1d00, 0x4d6, 0x4c52, 0x22d4, 0x0, 0x0);
        gbc.writeMem(0x14e1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb039);
        EXPECT(gbc.pc(), 0x14e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0276
        gbc.setState(0x4982, 0x9c5, 0xb2f0, 0x5d3e, 0xcabe, 0xf6ca, 0x1, 0x1);
        gbc.writeMem(0x4982, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x9c5);
        EXPECT(gbc.pc(), 0x4984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0277
        gbc.setState(0x4487, 0xe664, 0x2b80, 0xdf1, 0x38b5, 0x3b60, 0x0, 0x1);
        gbc.writeMem(0x4487, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe664);
        EXPECT(gbc.pc(), 0x4489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0278
        gbc.setState(0x50a3, 0xc24, 0x22a0, 0xca86, 0x360f, 0xd657, 0x0, 0x0);
        gbc.writeMem(0x50a3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xc24);
        EXPECT(gbc.pc(), 0x50a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0279
        gbc.setState(0x4e6e, 0x18a7, 0xa6f0, 0x66fe, 0xf4a0, 0x9ada, 0x0, 0x0);
        gbc.writeMem(0x4e6e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x18a7);
        EXPECT(gbc.pc(), 0x4e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 027A
        gbc.setState(0x4151, 0x361f, 0xf090, 0xfbcc, 0x16b7, 0x20bf, 0x1, 0x1);
        gbc.writeMem(0x4151, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x361f);
        EXPECT(gbc.pc(), 0x4153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 027B
        gbc.setState(0xc680, 0x5dfc, 0xe4a0, 0x6252, 0xe367, 0x5497, 0x0, 0x0);
        gbc.writeMem(0xc680, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5dfc);
        EXPECT(gbc.pc(), 0xc682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc680), 0xcb);
        EXPECT(gbc.readMem(0xc681), 0xaf);
        // CB AF 027C
        gbc.setState(0xadd7, 0x9dc8, 0x1320, 0xc1dd, 0x47ab, 0x9dd2, 0x0, 0x0);
        gbc.writeMem(0xadd7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9dc8);
        EXPECT(gbc.pc(), 0xadd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd7), 0xcb);
        EXPECT(gbc.readMem(0xadd8), 0xaf);
        // CB AF 027D
        gbc.setState(0x63c9, 0x5a20, 0x52f0, 0x40ac, 0xd0e0, 0xa368, 0x0, 0x0);
        gbc.writeMem(0x63c9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5a20);
        EXPECT(gbc.pc(), 0x63cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 027E
        gbc.setState(0x5760, 0x3c2a, 0x7f80, 0x5105, 0x9720, 0x1151, 0x1, 0x1);
        gbc.writeMem(0x5760, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3c2a);
        EXPECT(gbc.pc(), 0x5762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 027F
        gbc.setState(0x6116, 0x59fb, 0xcf10, 0xec1, 0xa3a1, 0xce1, 0x1, 0x1);
        gbc.writeMem(0x6116, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x59fb);
        EXPECT(gbc.pc(), 0x6118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0280
        gbc.setState(0x884e, 0x611f, 0x6a80, 0x27fd, 0x934, 0x9b3d, 0x1, 0x1);
        gbc.writeMem(0x884e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x611f);
        EXPECT(gbc.pc(), 0x8850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884e), 0xcb);
        EXPECT(gbc.readMem(0x884f), 0xaf);
        // CB AF 0281
        gbc.setState(0xcfc7, 0xe5bb, 0x8f80, 0x5bc8, 0x8fd5, 0x93d3, 0x1, 0x0);
        gbc.writeMem(0xcfc7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe5bb);
        EXPECT(gbc.pc(), 0xcfc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc7), 0xcb);
        EXPECT(gbc.readMem(0xcfc8), 0xaf);
        // CB AF 0282
        gbc.setState(0xa1b6, 0x48ae, 0xa150, 0x7fd7, 0x10f6, 0x5aa9, 0x0, 0x1);
        gbc.writeMem(0xa1b6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x48ae);
        EXPECT(gbc.pc(), 0xa1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1b6), 0xcb);
        EXPECT(gbc.readMem(0xa1b7), 0xaf);
        // CB AF 0283
        gbc.setState(0xc633, 0x4b96, 0xd6d0, 0xf8d6, 0xe66f, 0x435f, 0x1, 0x0);
        gbc.writeMem(0xc633, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4b96);
        EXPECT(gbc.pc(), 0xc635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc633), 0xcb);
        EXPECT(gbc.readMem(0xc634), 0xaf);
        // CB AF 0284
        gbc.setState(0xb2b4, 0x8b85, 0xed70, 0x6428, 0x7d91, 0x136d, 0x1, 0x1);
        gbc.writeMem(0xb2b4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8b85);
        EXPECT(gbc.pc(), 0xb2b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2b4), 0xcb);
        EXPECT(gbc.readMem(0xb2b5), 0xaf);
        // CB AF 0285
        gbc.setState(0x466c, 0x1055, 0x600, 0xec72, 0xa29e, 0xadeb, 0x0, 0x1);
        gbc.writeMem(0x466c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1055);
        EXPECT(gbc.pc(), 0x466e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0286
        gbc.setState(0xc629, 0x9cd4, 0x100, 0xd496, 0x43c2, 0x21a5, 0x1, 0x0);
        gbc.writeMem(0xc629, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9cd4);
        EXPECT(gbc.pc(), 0xc62b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc629), 0xcb);
        EXPECT(gbc.readMem(0xc62a), 0xaf);
        // CB AF 0287
        gbc.setState(0x13a0, 0xdae4, 0x6e0, 0xa6c9, 0x8667, 0xbcf5, 0x0, 0x0);
        gbc.writeMem(0x13a0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdae4);
        EXPECT(gbc.pc(), 0x13a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0288
        gbc.setState(0xd402, 0x98e9, 0x4000, 0xfd6, 0x404a, 0xc991, 0x0, 0x0);
        gbc.writeMem(0xd402, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x98e9);
        EXPECT(gbc.pc(), 0xd404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd402), 0xcb);
        EXPECT(gbc.readMem(0xd403), 0xaf);
        // CB AF 0289
        gbc.setState(0x8e74, 0x7d48, 0xb0b0, 0xe8d, 0xd6dd, 0xfbc8, 0x0, 0x0);
        gbc.writeMem(0x8e74, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7d48);
        EXPECT(gbc.pc(), 0x8e76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e74), 0xcb);
        EXPECT(gbc.readMem(0x8e75), 0xaf);
        // CB AF 028A
        gbc.setState(0x43ea, 0x344e, 0xfaf0, 0x7cda, 0x1fc6, 0x49ad, 0x0, 0x0);
        gbc.writeMem(0x43ea, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x344e);
        EXPECT(gbc.pc(), 0x43ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 028B
        gbc.setState(0xdfdf, 0xc36, 0xcf60, 0xde34, 0x6079, 0x10c4, 0x1, 0x0);
        gbc.writeMem(0xdfdf, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc36);
        EXPECT(gbc.pc(), 0xdfe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfdf), 0xcb);
        EXPECT(gbc.readMem(0xdfe0), 0xaf);
        // CB AF 028C
        gbc.setState(0x64b1, 0x98c2, 0xf330, 0xf22a, 0xc702, 0x7332, 0x0, 0x1);
        gbc.writeMem(0x64b1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x98c2);
        EXPECT(gbc.pc(), 0x64b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 028D
        gbc.setState(0x25, 0x3e2, 0x3130, 0xb37d, 0x1b3, 0x3b05, 0x1, 0x0);
        gbc.writeMem(0x25, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3e2);
        EXPECT(gbc.pc(), 0x27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 028E
        gbc.setState(0x8ad3, 0xe171, 0x6370, 0xe64a, 0xef24, 0x90b0, 0x1, 0x1);
        gbc.writeMem(0x8ad3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe171);
        EXPECT(gbc.pc(), 0x8ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad3), 0xcb);
        EXPECT(gbc.readMem(0x8ad4), 0xaf);
        // CB AF 028F
        gbc.setState(0x9413, 0xa416, 0xc200, 0xf992, 0x829b, 0x8543, 0x1, 0x1);
        gbc.writeMem(0x9413, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa416);
        EXPECT(gbc.pc(), 0x9415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9413), 0xcb);
        EXPECT(gbc.readMem(0x9414), 0xaf);
        // CB AF 0290
        gbc.setState(0x462f, 0xc9dc, 0xb0c0, 0x4beb, 0xdea2, 0xfce7, 0x0, 0x1);
        gbc.writeMem(0x462f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc9dc);
        EXPECT(gbc.pc(), 0x4631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0291
        gbc.setState(0xa40f, 0xe5c9, 0xdcd0, 0xb690, 0xd53a, 0xe9e7, 0x0, 0x1);
        gbc.writeMem(0xa40f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe5c9);
        EXPECT(gbc.pc(), 0xa411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa40f), 0xcb);
        EXPECT(gbc.readMem(0xa410), 0xaf);
        // CB AF 0292
        gbc.setState(0xbf48, 0x8636, 0x2560, 0xbd69, 0x728b, 0x64c0, 0x1, 0x1);
        gbc.writeMem(0xbf48, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8636);
        EXPECT(gbc.pc(), 0xbf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf48), 0xcb);
        EXPECT(gbc.readMem(0xbf49), 0xaf);
        // CB AF 0293
        gbc.setState(0xb384, 0x3fa9, 0xe390, 0x7f74, 0x159c, 0xaecf, 0x1, 0x0);
        gbc.writeMem(0xb384, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3fa9);
        EXPECT(gbc.pc(), 0xb386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb384), 0xcb);
        EXPECT(gbc.readMem(0xb385), 0xaf);
        // CB AF 0294
        gbc.setState(0x772e, 0x9b43, 0xe520, 0x4f79, 0x803a, 0x44d1, 0x1, 0x1);
        gbc.writeMem(0x772e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9b43);
        EXPECT(gbc.pc(), 0x7730);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0295
        gbc.setState(0x5857, 0x2736, 0xc550, 0x46b6, 0x8783, 0x74d6, 0x1, 0x0);
        gbc.writeMem(0x5857, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2736);
        EXPECT(gbc.pc(), 0x5859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0296
        gbc.setState(0xef4a, 0x76bc, 0x80c0, 0xcea5, 0xae8e, 0x195a, 0x1, 0x0);
        gbc.writeMem(0xef4a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x76bc);
        EXPECT(gbc.pc(), 0xef4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4a), 0xcb);
        EXPECT(gbc.readMem(0xef4b), 0xaf);
        // CB AF 0298
        gbc.setState(0x11fd, 0x9cfa, 0xaf50, 0x904d, 0x62e7, 0x1fde, 0x0, 0x0);
        gbc.writeMem(0x11fd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9cfa);
        EXPECT(gbc.pc(), 0x11ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0299
        gbc.setState(0xb102, 0x7952, 0x3b0, 0xd3e6, 0xc4a8, 0x7409, 0x0, 0x0);
        gbc.writeMem(0xb102, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7952);
        EXPECT(gbc.pc(), 0xb104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb102), 0xcb);
        EXPECT(gbc.readMem(0xb103), 0xaf);
        // CB AF 029A
        gbc.setState(0xd726, 0x9eaf, 0xb7d0, 0xf248, 0x963d, 0x181e, 0x0, 0x1);
        gbc.writeMem(0xd726, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9eaf);
        EXPECT(gbc.pc(), 0xd728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd726), 0xcb);
        EXPECT(gbc.readMem(0xd727), 0xaf);
        // CB AF 029B
        gbc.setState(0xe4dd, 0xade2, 0xc4d0, 0xe701, 0x3c92, 0xe8ce, 0x1, 0x1);
        gbc.writeMem(0xe4dd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xade2);
        EXPECT(gbc.pc(), 0xe4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4dd), 0xcb);
        EXPECT(gbc.readMem(0xe4de), 0xaf);
        // CB AF 029C
        gbc.setState(0x8521, 0x73d7, 0x78e0, 0xf6ca, 0x696f, 0xdebb, 0x1, 0x0);
        gbc.writeMem(0x8521, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x73d7);
        EXPECT(gbc.pc(), 0x8523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8521), 0xcb);
        EXPECT(gbc.readMem(0x8522), 0xaf);
        // CB AF 029D
        gbc.setState(0x10a8, 0xf5f5, 0xd5a0, 0x22f6, 0xd0e4, 0x6dce, 0x0, 0x1);
        gbc.writeMem(0x10a8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf5f5);
        EXPECT(gbc.pc(), 0x10aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 029E
        gbc.setState(0x9bfc, 0x40ec, 0x85f0, 0x5a0c, 0x4df3, 0x7e2c, 0x1, 0x0);
        gbc.writeMem(0x9bfc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x40ec);
        EXPECT(gbc.pc(), 0x9bfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bfc), 0xcb);
        EXPECT(gbc.readMem(0x9bfd), 0xaf);
        // CB AF 029F
        gbc.setState(0x6954, 0xd284, 0xee60, 0x3a17, 0xfd35, 0x6ea2, 0x1, 0x0);
        gbc.writeMem(0x6954, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd284);
        EXPECT(gbc.pc(), 0x6956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02A0
        gbc.setState(0x7552, 0xb61f, 0x6220, 0x4148, 0xc4e9, 0x61c1, 0x1, 0x0);
        gbc.writeMem(0x7552, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb61f);
        EXPECT(gbc.pc(), 0x7554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02A1
        gbc.setState(0x8188, 0x10c3, 0x15c0, 0x148f, 0xd480, 0xcde9, 0x0, 0x0);
        gbc.writeMem(0x8188, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x10c3);
        EXPECT(gbc.pc(), 0x818a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8188), 0xcb);
        EXPECT(gbc.readMem(0x8189), 0xaf);
        // CB AF 02A2
        gbc.setState(0x5, 0x2159, 0x2ee0, 0x18bb, 0x3db, 0xdfd4, 0x0, 0x0);
        gbc.writeMem(0x5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2159);
        EXPECT(gbc.pc(), 0x7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02A3
        gbc.setState(0x80db, 0x903a, 0x5670, 0x6353, 0x18ef, 0xaf68, 0x1, 0x1);
        gbc.writeMem(0x80db, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x903a);
        EXPECT(gbc.pc(), 0x80dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80db), 0xcb);
        EXPECT(gbc.readMem(0x80dc), 0xaf);
        // CB AF 02A4
        gbc.setState(0xbcb8, 0xf63b, 0x1e60, 0xe472, 0xf21e, 0x163a, 0x1, 0x1);
        gbc.writeMem(0xbcb8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf63b);
        EXPECT(gbc.pc(), 0xbcba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb8), 0xcb);
        EXPECT(gbc.readMem(0xbcb9), 0xaf);
        // CB AF 02A5
        gbc.setState(0xa437, 0x2c38, 0x7670, 0xf77c, 0x102d, 0x275e, 0x1, 0x1);
        gbc.writeMem(0xa437, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2c38);
        EXPECT(gbc.pc(), 0xa439);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa437), 0xcb);
        EXPECT(gbc.readMem(0xa438), 0xaf);
        // CB AF 02A6
        gbc.setState(0x1acb, 0x9308, 0xe6c0, 0x3ae, 0x78d1, 0x7453, 0x0, 0x1);
        gbc.writeMem(0x1acb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9308);
        EXPECT(gbc.pc(), 0x1acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02A7
        gbc.setState(0x5bb, 0x7747, 0x20e0, 0xdace, 0x42d7, 0x8287, 0x1, 0x1);
        gbc.writeMem(0x5bb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7747);
        EXPECT(gbc.pc(), 0x5bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02A8
        gbc.setState(0x3ced, 0xff77, 0xdf00, 0x752d, 0x4a96, 0x2e48, 0x1, 0x0);
        gbc.writeMem(0x3ced, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xff77);
        EXPECT(gbc.pc(), 0x3cef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02A9
        gbc.setState(0x3d3d, 0xe061, 0x2d0, 0x45b0, 0xcde1, 0x6166, 0x0, 0x0);
        gbc.writeMem(0x3d3d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe061);
        EXPECT(gbc.pc(), 0x3d3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02AA
        gbc.setState(0x713d, 0x6804, 0xaf50, 0x6e65, 0x1e87, 0x684d, 0x0, 0x0);
        gbc.writeMem(0x713d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6804);
        EXPECT(gbc.pc(), 0x713f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02AB
        gbc.setState(0xe795, 0xed76, 0x4040, 0xd22f, 0x5b9f, 0xd231, 0x1, 0x0);
        gbc.writeMem(0xe795, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xed76);
        EXPECT(gbc.pc(), 0xe797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe795), 0xcb);
        EXPECT(gbc.readMem(0xe796), 0xaf);
        // CB AF 02AC
        gbc.setState(0x55ee, 0x6998, 0x5350, 0x8ab4, 0x45a8, 0xeb46, 0x1, 0x0);
        gbc.writeMem(0x55ee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6998);
        EXPECT(gbc.pc(), 0x55f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02AD
        gbc.setState(0xba5d, 0x8656, 0x5d80, 0xdedc, 0xdca3, 0x7974, 0x0, 0x0);
        gbc.writeMem(0xba5d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8656);
        EXPECT(gbc.pc(), 0xba5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba5d), 0xcb);
        EXPECT(gbc.readMem(0xba5e), 0xaf);
        // CB AF 02AF
        gbc.setState(0xe652, 0xc958, 0x3ad0, 0x90e3, 0x4696, 0x55d2, 0x1, 0x0);
        gbc.writeMem(0xe652, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xc958);
        EXPECT(gbc.pc(), 0xe654);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe652), 0xcb);
        EXPECT(gbc.readMem(0xe653), 0xaf);
        // CB AF 02B0
        gbc.setState(0x9af, 0x1e2, 0x15e0, 0xc699, 0x45b, 0x4cb4, 0x0, 0x1);
        gbc.writeMem(0x9af, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1e2);
        EXPECT(gbc.pc(), 0x9b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02B1
        gbc.setState(0x3ff2, 0x47e0, 0xe470, 0x6888, 0xbd7, 0x4004, 0x1, 0x0);
        gbc.writeMem(0x3ff2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x47e0);
        EXPECT(gbc.pc(), 0x3ff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02B2
        gbc.setState(0x18c, 0xbaab, 0xb940, 0xfe7a, 0x3f5, 0x497b, 0x0, 0x1);
        gbc.writeMem(0x18c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xbaab);
        EXPECT(gbc.pc(), 0x18e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02B3
        gbc.setState(0x93b7, 0x7a10, 0x66c0, 0xf40a, 0x4e1d, 0x262d, 0x0, 0x0);
        gbc.writeMem(0x93b7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7a10);
        EXPECT(gbc.pc(), 0x93b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93b7), 0xcb);
        EXPECT(gbc.readMem(0x93b8), 0xaf);
        // CB AF 02B4
        gbc.setState(0x995c, 0xa1c5, 0x7e60, 0xa3c1, 0x5058, 0x6ad5, 0x0, 0x0);
        gbc.writeMem(0x995c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa1c5);
        EXPECT(gbc.pc(), 0x995e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x995c), 0xcb);
        EXPECT(gbc.readMem(0x995d), 0xaf);
        // CB AF 02B5
        gbc.setState(0x94ca, 0x780a, 0xaba0, 0xacb0, 0x8612, 0x52fb, 0x0, 0x1);
        gbc.writeMem(0x94ca, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x780a);
        EXPECT(gbc.pc(), 0x94cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ca), 0xcb);
        EXPECT(gbc.readMem(0x94cb), 0xaf);
        // CB AF 02B6
        gbc.setState(0xa0ef, 0x2108, 0xdf0, 0x210a, 0x9f21, 0x9e28, 0x0, 0x0);
        gbc.writeMem(0xa0ef, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2108);
        EXPECT(gbc.pc(), 0xa0f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ef), 0xcb);
        EXPECT(gbc.readMem(0xa0f0), 0xaf);
        // CB AF 02B7
        gbc.setState(0xb0e9, 0x7fa5, 0xa2b0, 0x6a4a, 0x42c9, 0xe34b, 0x1, 0x1);
        gbc.writeMem(0xb0e9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7fa5);
        EXPECT(gbc.pc(), 0xb0eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e9), 0xcb);
        EXPECT(gbc.readMem(0xb0ea), 0xaf);
        // CB AF 02B8
        gbc.setState(0x5a0e, 0x4cf, 0x1e00, 0xfd2c, 0xcd7c, 0x5a77, 0x0, 0x0);
        gbc.writeMem(0x5a0e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4cf);
        EXPECT(gbc.pc(), 0x5a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02B9
        gbc.setState(0x993b, 0x5f0a, 0xe460, 0x5b9c, 0xabc4, 0xe5ab, 0x1, 0x1);
        gbc.writeMem(0x993b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5f0a);
        EXPECT(gbc.pc(), 0x993d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993b), 0xcb);
        EXPECT(gbc.readMem(0x993c), 0xaf);
        // CB AF 02BA
        gbc.setState(0xdd66, 0xe48, 0x90d0, 0x4e55, 0x9d1a, 0xca3b, 0x1, 0x1);
        gbc.writeMem(0xdd66, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe48);
        EXPECT(gbc.pc(), 0xdd68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd66), 0xcb);
        EXPECT(gbc.readMem(0xdd67), 0xaf);
        // CB AF 02BB
        gbc.setState(0xb7b4, 0x6400, 0xfd40, 0xc27a, 0x9786, 0x4ac0, 0x1, 0x1);
        gbc.writeMem(0xb7b4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6400);
        EXPECT(gbc.pc(), 0xb7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b4), 0xcb);
        EXPECT(gbc.readMem(0xb7b5), 0xaf);
        // CB AF 02BC
        gbc.setState(0x45ce, 0x40c9, 0xd2c0, 0xf769, 0x352, 0xb070, 0x0, 0x0);
        gbc.writeMem(0x45ce, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x40c9);
        EXPECT(gbc.pc(), 0x45d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02BD
        gbc.setState(0x6be0, 0x7789, 0x8650, 0xfa52, 0xb134, 0xa9bb, 0x0, 0x0);
        gbc.writeMem(0x6be0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7789);
        EXPECT(gbc.pc(), 0x6be2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02BF
        gbc.setState(0x72bb, 0xb17a, 0xb880, 0xf592, 0xd048, 0xb255, 0x1, 0x0);
        gbc.writeMem(0x72bb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb17a);
        EXPECT(gbc.pc(), 0x72bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02C0
        gbc.setState(0xe339, 0xb074, 0x8670, 0x37c9, 0xc579, 0xf9be, 0x1, 0x0);
        gbc.writeMem(0xe339, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb074);
        EXPECT(gbc.pc(), 0xe33b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe339), 0xcb);
        EXPECT(gbc.readMem(0xe33a), 0xaf);
        // CB AF 02C1
        gbc.setState(0x4a39, 0x11c6, 0x2170, 0x47d6, 0x987, 0x26ca, 0x0, 0x1);
        gbc.writeMem(0x4a39, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x11c6);
        EXPECT(gbc.pc(), 0x4a3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02C2
        gbc.setState(0x605, 0x9246, 0xfda0, 0xd4a2, 0x7048, 0x4095, 0x1, 0x0);
        gbc.writeMem(0x605, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9246);
        EXPECT(gbc.pc(), 0x607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02C3
        gbc.setState(0xd3b4, 0x48e, 0x3e00, 0xa2eb, 0xf358, 0xabc6, 0x0, 0x1);
        gbc.writeMem(0xd3b4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x48e);
        EXPECT(gbc.pc(), 0xd3b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b4), 0xcb);
        EXPECT(gbc.readMem(0xd3b5), 0xaf);
        // CB AF 02C4
        gbc.setState(0xa13c, 0x6e29, 0xc1c0, 0x70ba, 0x884e, 0x9d07, 0x1, 0x1);
        gbc.writeMem(0xa13c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6e29);
        EXPECT(gbc.pc(), 0xa13e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13c), 0xcb);
        EXPECT(gbc.readMem(0xa13d), 0xaf);
        // CB AF 02C5
        gbc.setState(0x3bee, 0x84d6, 0xf8c0, 0x1d07, 0x78bb, 0x69cd, 0x0, 0x0);
        gbc.writeMem(0x3bee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x84d6);
        EXPECT(gbc.pc(), 0x3bf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02C6
        gbc.setState(0x23ea, 0x7114, 0x6ce0, 0x2094, 0x6ab5, 0x9313, 0x1, 0x0);
        gbc.writeMem(0x23ea, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7114);
        EXPECT(gbc.pc(), 0x23ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02C7
        gbc.setState(0xa331, 0x4467, 0xe6b0, 0x2618, 0x488f, 0x45e3, 0x1, 0x1);
        gbc.writeMem(0xa331, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4467);
        EXPECT(gbc.pc(), 0xa333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa331), 0xcb);
        EXPECT(gbc.readMem(0xa332), 0xaf);
        // CB AF 02C8
        gbc.setState(0x9caf, 0xba4d, 0xaba0, 0x9436, 0x3b2, 0x58a5, 0x0, 0x0);
        gbc.writeMem(0x9caf, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xba4d);
        EXPECT(gbc.pc(), 0x9cb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9caf), 0xcb);
        EXPECT(gbc.readMem(0x9cb0), 0xaf);
        // CB AF 02C9
        gbc.setState(0xbbc, 0xb4bc, 0xcf60, 0xe52e, 0x8550, 0xfb49, 0x1, 0x0);
        gbc.writeMem(0xbbc, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb4bc);
        EXPECT(gbc.pc(), 0xbbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02CA
        gbc.setState(0xc717, 0xb1ae, 0xb0, 0x7504, 0xbd6, 0xba52, 0x0, 0x0);
        gbc.writeMem(0xc717, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb1ae);
        EXPECT(gbc.pc(), 0xc719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc717), 0xcb);
        EXPECT(gbc.readMem(0xc718), 0xaf);
        // CB AF 02CB
        gbc.setState(0x59e5, 0x7720, 0x3a50, 0x62d5, 0x9946, 0xc1b0, 0x0, 0x1);
        gbc.writeMem(0x59e5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7720);
        EXPECT(gbc.pc(), 0x59e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02CC
        gbc.setState(0xada6, 0xc40b, 0xfe70, 0x6c6d, 0x61c6, 0x3cde, 0x0, 0x0);
        gbc.writeMem(0xada6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc40b);
        EXPECT(gbc.pc(), 0xada8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada6), 0xcb);
        EXPECT(gbc.readMem(0xada7), 0xaf);
        // CB AF 02CD
        gbc.setState(0xa754, 0x8ecd, 0x28b0, 0xe6a8, 0x1042, 0x212d, 0x0, 0x1);
        gbc.writeMem(0xa754, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8ecd);
        EXPECT(gbc.pc(), 0xa756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa754), 0xcb);
        EXPECT(gbc.readMem(0xa755), 0xaf);
        // CB AF 02CE
        gbc.setState(0x1aff, 0xabfc, 0x5a0, 0xbd97, 0xc70a, 0xe672, 0x1, 0x0);
        gbc.writeMem(0x1aff, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xabfc);
        EXPECT(gbc.pc(), 0x1b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02CF
        gbc.setState(0xa002, 0x783c, 0xb930, 0x9437, 0x376c, 0x6cdc, 0x1, 0x0);
        gbc.writeMem(0xa002, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x783c);
        EXPECT(gbc.pc(), 0xa004);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa002), 0xcb);
        EXPECT(gbc.readMem(0xa003), 0xaf);
        // CB AF 02D0
        gbc.setState(0x749c, 0x79a, 0xf310, 0x72cb, 0x437a, 0xb48f, 0x1, 0x0);
        gbc.writeMem(0x749c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x79a);
        EXPECT(gbc.pc(), 0x749e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02D1
        gbc.setState(0x4648, 0xb41d, 0x8420, 0xa7c3, 0xb7af, 0xa2c8, 0x1, 0x1);
        gbc.writeMem(0x4648, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb41d);
        EXPECT(gbc.pc(), 0x464a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02D2
        gbc.setState(0x16a4, 0x8d2c, 0x88b0, 0xc682, 0xbfff, 0xb76a, 0x0, 0x1);
        gbc.writeMem(0x16a4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8d2c);
        EXPECT(gbc.pc(), 0x16a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02D3
        gbc.setState(0xb96e, 0xb70e, 0xa6a0, 0xba03, 0x8327, 0xe965, 0x0, 0x0);
        gbc.writeMem(0xb96e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb70e);
        EXPECT(gbc.pc(), 0xb970);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb96e), 0xcb);
        EXPECT(gbc.readMem(0xb96f), 0xaf);
        // CB AF 02D4
        gbc.setState(0x4670, 0x3331, 0x24d0, 0x90d, 0x72a7, 0xeddf, 0x1, 0x0);
        gbc.writeMem(0x4670, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3331);
        EXPECT(gbc.pc(), 0x4672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02D5
        gbc.setState(0xcdb, 0x4129, 0x9a90, 0x9094, 0x8f14, 0x70ce, 0x1, 0x1);
        gbc.writeMem(0xcdb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4129);
        EXPECT(gbc.pc(), 0xcdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02D6
        gbc.setState(0x4b30, 0x9a93, 0xe8f0, 0xcc1, 0x5b5b, 0x2342, 0x0, 0x1);
        gbc.writeMem(0x4b30, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9a93);
        EXPECT(gbc.pc(), 0x4b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02D7
        gbc.setState(0x4ca, 0x4d29, 0x8900, 0xd62b, 0x8c83, 0x638, 0x0, 0x0);
        gbc.writeMem(0x4ca, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4d29);
        EXPECT(gbc.pc(), 0x4cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02D9
        gbc.setState(0x2d68, 0x6653, 0x1eb0, 0xac5b, 0x27ad, 0x8db4, 0x0, 0x1);
        gbc.writeMem(0x2d68, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6653);
        EXPECT(gbc.pc(), 0x2d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02DA
        gbc.setState(0x932f, 0xc58b, 0xdcf0, 0x84d5, 0x7926, 0x78a7, 0x0, 0x0);
        gbc.writeMem(0x932f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc58b);
        EXPECT(gbc.pc(), 0x9331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932f), 0xcb);
        EXPECT(gbc.readMem(0x9330), 0xaf);
        // CB AF 02DB
        gbc.setState(0xe169, 0xb094, 0x6120, 0x501a, 0x62fa, 0x36f3, 0x1, 0x1);
        gbc.writeMem(0xe169, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb094);
        EXPECT(gbc.pc(), 0xe16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe169), 0xcb);
        EXPECT(gbc.readMem(0xe16a), 0xaf);
        // CB AF 02DC
        gbc.setState(0x2491, 0xe1ee, 0x7040, 0x6d2a, 0x5c8a, 0x2ed7, 0x0, 0x0);
        gbc.writeMem(0x2491, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe1ee);
        EXPECT(gbc.pc(), 0x2493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02DE
        gbc.setState(0x8091, 0x42f9, 0x9420, 0xbe22, 0x263f, 0x2e47, 0x0, 0x0);
        gbc.writeMem(0x8091, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x42f9);
        EXPECT(gbc.pc(), 0x8093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8091), 0xcb);
        EXPECT(gbc.readMem(0x8092), 0xaf);
        // CB AF 02E0
        gbc.setState(0x1a3c, 0x7471, 0x90c0, 0x527c, 0x4898, 0x6bba, 0x0, 0x1);
        gbc.writeMem(0x1a3c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7471);
        EXPECT(gbc.pc(), 0x1a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02E1
        gbc.setState(0x2d78, 0xef08, 0x1b90, 0x9f2, 0x2c35, 0x9a55, 0x1, 0x0);
        gbc.writeMem(0x2d78, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xef08);
        EXPECT(gbc.pc(), 0x2d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02E2
        gbc.setState(0x8781, 0x41bd, 0xe1d0, 0xdb05, 0x60ba, 0x353c, 0x0, 0x1);
        gbc.writeMem(0x8781, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x41bd);
        EXPECT(gbc.pc(), 0x8783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8781), 0xcb);
        EXPECT(gbc.readMem(0x8782), 0xaf);
        // CB AF 02E3
        gbc.setState(0x299, 0x6660, 0xe50, 0x9643, 0x400, 0x7b8f, 0x0, 0x1);
        gbc.writeMem(0x299, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6660);
        EXPECT(gbc.pc(), 0x29b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02E4
        gbc.setState(0x33d8, 0x7a71, 0xcbd0, 0xa92b, 0xd325, 0xe1f2, 0x1, 0x0);
        gbc.writeMem(0x33d8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7a71);
        EXPECT(gbc.pc(), 0x33da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02E5
        gbc.setState(0x81cb, 0xb84d, 0xac10, 0x289d, 0xf752, 0xebab, 0x0, 0x1);
        gbc.writeMem(0x81cb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb84d);
        EXPECT(gbc.pc(), 0x81cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81cb), 0xcb);
        EXPECT(gbc.readMem(0x81cc), 0xaf);
        // CB AF 02E6
        gbc.setState(0x8610, 0x3a3b, 0xdc30, 0x6d4, 0x18b, 0xc027, 0x0, 0x1);
        gbc.writeMem(0x8610, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3a3b);
        EXPECT(gbc.pc(), 0x8612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8610), 0xcb);
        EXPECT(gbc.readMem(0x8611), 0xaf);
        // CB AF 02E8
        gbc.setState(0xba88, 0x674d, 0x6590, 0x6a6f, 0xe4e, 0x5703, 0x0, 0x0);
        gbc.writeMem(0xba88, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x674d);
        EXPECT(gbc.pc(), 0xba8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba88), 0xcb);
        EXPECT(gbc.readMem(0xba89), 0xaf);
        // CB AF 02E9
        gbc.setState(0xd61, 0x7b9f, 0x3d30, 0x317a, 0x86cd, 0xc461, 0x0, 0x0);
        gbc.writeMem(0xd61, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7b9f);
        EXPECT(gbc.pc(), 0xd63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02EB
        gbc.setState(0xc3c6, 0x5ad, 0x5880, 0xaf31, 0x336e, 0x290e, 0x0, 0x0);
        gbc.writeMem(0xc3c6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5ad);
        EXPECT(gbc.pc(), 0xc3c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c6), 0xcb);
        EXPECT(gbc.readMem(0xc3c7), 0xaf);
        // CB AF 02EC
        gbc.setState(0x4f7f, 0x4d31, 0x6840, 0xb1bf, 0xa002, 0x8f1d, 0x1, 0x1);
        gbc.writeMem(0x4f7f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4d31);
        EXPECT(gbc.pc(), 0x4f81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02ED
        gbc.setState(0x988c, 0xb229, 0xd650, 0x209e, 0x5d96, 0xaa6f, 0x1, 0x0);
        gbc.writeMem(0x988c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb229);
        EXPECT(gbc.pc(), 0x988e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x988c), 0xcb);
        EXPECT(gbc.readMem(0x988d), 0xaf);
        // CB AF 02EE
        gbc.setState(0x6a63, 0xd5cb, 0x36b0, 0x96e3, 0x53ec, 0x3738, 0x0, 0x1);
        gbc.writeMem(0x6a63, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd5cb);
        EXPECT(gbc.pc(), 0x6a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02EF
        gbc.setState(0x86ce, 0x276e, 0xbad0, 0x15a2, 0xd98a, 0xdeb5, 0x0, 0x0);
        gbc.writeMem(0x86ce, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x276e);
        EXPECT(gbc.pc(), 0x86d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ce), 0xcb);
        EXPECT(gbc.readMem(0x86cf), 0xaf);
        // CB AF 02F0
        gbc.setState(0x7396, 0x2faf, 0x7bb0, 0xb537, 0x2bd8, 0xc520, 0x1, 0x1);
        gbc.writeMem(0x7396, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2faf);
        EXPECT(gbc.pc(), 0x7398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02F1
        gbc.setState(0xb09f, 0x52a2, 0x3e0, 0x6f2d, 0xaff, 0xf58e, 0x1, 0x1);
        gbc.writeMem(0xb09f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x52a2);
        EXPECT(gbc.pc(), 0xb0a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb09f), 0xcb);
        EXPECT(gbc.readMem(0xb0a0), 0xaf);
        // CB AF 02F2
        gbc.setState(0x116d, 0xc989, 0x8f80, 0xafcf, 0x16f5, 0x9c84, 0x0, 0x0);
        gbc.writeMem(0x116d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc989);
        EXPECT(gbc.pc(), 0x116f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02F3
        gbc.setState(0xf14, 0x322b, 0x9110, 0x8a04, 0xaca7, 0xd49, 0x0, 0x0);
        gbc.writeMem(0xf14, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x322b);
        EXPECT(gbc.pc(), 0xf16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02F4
        gbc.setState(0x97f7, 0x48ed, 0x5ec0, 0x48aa, 0xa3c4, 0x29de, 0x1, 0x1);
        gbc.writeMem(0x97f7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x48ed);
        EXPECT(gbc.pc(), 0x97f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f7), 0xcb);
        EXPECT(gbc.readMem(0x97f8), 0xaf);
        // CB AF 02F5
        gbc.setState(0x2edb, 0xb11a, 0x7380, 0xbf5a, 0x2265, 0xefc6, 0x0, 0x0);
        gbc.writeMem(0x2edb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb11a);
        EXPECT(gbc.pc(), 0x2edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02F7
        gbc.setState(0x75e5, 0x3e1e, 0xd910, 0x7e4f, 0x263c, 0xd1f3, 0x0, 0x0);
        gbc.writeMem(0x75e5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3e1e);
        EXPECT(gbc.pc(), 0x75e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02F8
        gbc.setState(0xea90, 0x7ef9, 0x6e0, 0x9e1b, 0xfdb4, 0x494, 0x1, 0x1);
        gbc.writeMem(0xea90, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7ef9);
        EXPECT(gbc.pc(), 0xea92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea90), 0xcb);
        EXPECT(gbc.readMem(0xea91), 0xaf);
        // CB AF 02F9
        gbc.setState(0x24ec, 0x28db, 0x2ac0, 0x4f74, 0x8630, 0x7d6e, 0x0, 0x1);
        gbc.writeMem(0x24ec, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x28db);
        EXPECT(gbc.pc(), 0x24ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02FA
        gbc.setState(0xb7b6, 0x352b, 0x1e20, 0x9767, 0xe54a, 0x85e4, 0x1, 0x1);
        gbc.writeMem(0xb7b6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x352b);
        EXPECT(gbc.pc(), 0xb7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b6), 0xcb);
        EXPECT(gbc.readMem(0xb7b7), 0xaf);
        // CB AF 02FB
        gbc.setState(0x6c6, 0xdaaa, 0xf280, 0x6599, 0x59be, 0xb56b, 0x0, 0x1);
        gbc.writeMem(0x6c6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdaaa);
        EXPECT(gbc.pc(), 0x6c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 02FC
        gbc.setState(0xe479, 0xf9ec, 0x6060, 0x21ec, 0x3de2, 0x5f01, 0x0, 0x1);
        gbc.writeMem(0xe479, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf9ec);
        EXPECT(gbc.pc(), 0xe47b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe479), 0xcb);
        EXPECT(gbc.readMem(0xe47a), 0xaf);
        // CB AF 02FD
        gbc.setState(0x6fa7, 0x42e8, 0xf810, 0x7023, 0xcffd, 0xe657, 0x1, 0x1);
        gbc.writeMem(0x6fa7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x42e8);
        EXPECT(gbc.pc(), 0x6fa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02FE
        gbc.setState(0x5ed3, 0x859c, 0xffb0, 0x6ca8, 0xb640, 0x14d0, 0x1, 0x0);
        gbc.writeMem(0x5ed3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x859c);
        EXPECT(gbc.pc(), 0x5ed5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 02FF
        gbc.setState(0xcfa9, 0xa96f, 0x5e40, 0xfba2, 0x495, 0x831e, 0x0, 0x0);
        gbc.writeMem(0xcfa9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa96f);
        EXPECT(gbc.pc(), 0xcfab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa9), 0xcb);
        EXPECT(gbc.readMem(0xcfaa), 0xaf);
        // CB AF 0300
        gbc.setState(0xee99, 0x3417, 0x35b0, 0xf0ca, 0x85b9, 0x4837, 0x1, 0x0);
        gbc.writeMem(0xee99, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3417);
        EXPECT(gbc.pc(), 0xee9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee99), 0xcb);
        EXPECT(gbc.readMem(0xee9a), 0xaf);
        // CB AF 0301
        gbc.setState(0x2269, 0x71fd, 0x4de0, 0xd0a2, 0xf38, 0x5076, 0x1, 0x0);
        gbc.writeMem(0x2269, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x71fd);
        EXPECT(gbc.pc(), 0x226b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0302
        gbc.setState(0x6e08, 0xda31, 0x9b0, 0xfad, 0x985a, 0xb21f, 0x1, 0x1);
        gbc.writeMem(0x6e08, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xda31);
        EXPECT(gbc.pc(), 0x6e0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0303
        gbc.setState(0x86b7, 0x9f18, 0xafc0, 0x96be, 0xb2c2, 0x9de1, 0x1, 0x0);
        gbc.writeMem(0x86b7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9f18);
        EXPECT(gbc.pc(), 0x86b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b7), 0xcb);
        EXPECT(gbc.readMem(0x86b8), 0xaf);
        // CB AF 0304
        gbc.setState(0x3b83, 0x9ed7, 0xff0, 0x5c4e, 0x349e, 0x30ca, 0x0, 0x0);
        gbc.writeMem(0x3b83, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x9ed7);
        EXPECT(gbc.pc(), 0x3b85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0305
        gbc.setState(0xc1a1, 0x82f2, 0x6f80, 0x5a21, 0xc9e7, 0x5a03, 0x0, 0x0);
        gbc.writeMem(0xc1a1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x82f2);
        EXPECT(gbc.pc(), 0xc1a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a1), 0xcb);
        EXPECT(gbc.readMem(0xc1a2), 0xaf);
        // CB AF 0306
        gbc.setState(0xc788, 0x676b, 0xfe00, 0x718c, 0xf5ba, 0xa25b, 0x1, 0x1);
        gbc.writeMem(0xc788, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x676b);
        EXPECT(gbc.pc(), 0xc78a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc788), 0xcb);
        EXPECT(gbc.readMem(0xc789), 0xaf);
        // CB AF 0307
        gbc.setState(0xdafb, 0x9bcf, 0x190, 0x8603, 0x518d, 0xf83f, 0x1, 0x0);
        gbc.writeMem(0xdafb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9bcf);
        EXPECT(gbc.pc(), 0xdafd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdafb), 0xcb);
        EXPECT(gbc.readMem(0xdafc), 0xaf);
        // CB AF 0308
        gbc.setState(0x65bf, 0x35ca, 0xf340, 0x103e, 0x16ec, 0x767e, 0x1, 0x1);
        gbc.writeMem(0x65bf, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x35ca);
        EXPECT(gbc.pc(), 0x65c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0309
        gbc.setState(0x4f0a, 0xc086, 0xc5f0, 0xc5a2, 0xe7c5, 0x5344, 0x0, 0x1);
        gbc.writeMem(0x4f0a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc086);
        EXPECT(gbc.pc(), 0x4f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 030A
        gbc.setState(0x7483, 0x9e55, 0x9bd0, 0xa8f4, 0x9c62, 0x6f7b, 0x0, 0x1);
        gbc.writeMem(0x7483, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9e55);
        EXPECT(gbc.pc(), 0x7485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 030B
        gbc.setState(0x84d9, 0x5b3d, 0x1800, 0x13c7, 0x3d7b, 0x9ed5, 0x0, 0x1);
        gbc.writeMem(0x84d9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5b3d);
        EXPECT(gbc.pc(), 0x84db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d9), 0xcb);
        EXPECT(gbc.readMem(0x84da), 0xaf);
        // CB AF 030C
        gbc.setState(0x7ac0, 0x77cf, 0xf6d0, 0x8bf5, 0x2a9f, 0xe3fd, 0x1, 0x1);
        gbc.writeMem(0x7ac0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x77cf);
        EXPECT(gbc.pc(), 0x7ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 030D
        gbc.setState(0x6d22, 0x6c4a, 0x8b10, 0xb398, 0xf7b3, 0xa1c6, 0x1, 0x0);
        gbc.writeMem(0x6d22, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6c4a);
        EXPECT(gbc.pc(), 0x6d24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 030E
        gbc.setState(0x4576, 0xa5a7, 0xf8f0, 0xec1a, 0xa14b, 0x3c0a, 0x0, 0x1);
        gbc.writeMem(0x4576, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa5a7);
        EXPECT(gbc.pc(), 0x4578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 030F
        gbc.setState(0x8895, 0xb83, 0x9090, 0xa539, 0xdbc4, 0x94d0, 0x0, 0x1);
        gbc.writeMem(0x8895, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb83);
        EXPECT(gbc.pc(), 0x8897);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8895), 0xcb);
        EXPECT(gbc.readMem(0x8896), 0xaf);
        // CB AF 0310
        gbc.setState(0x9e06, 0xefa3, 0x57d0, 0x44ad, 0xe501, 0x368c, 0x1, 0x0);
        gbc.writeMem(0x9e06, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xefa3);
        EXPECT(gbc.pc(), 0x9e08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e06), 0xcb);
        EXPECT(gbc.readMem(0x9e07), 0xaf);
        // CB AF 0312
        gbc.setState(0xb306, 0xf6df, 0x5870, 0x51d9, 0xd26a, 0x4bbc, 0x1, 0x0);
        gbc.writeMem(0xb306, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf6df);
        EXPECT(gbc.pc(), 0xb308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb306), 0xcb);
        EXPECT(gbc.readMem(0xb307), 0xaf);
        // CB AF 0313
        gbc.setState(0xa1ed, 0x46fc, 0x7a10, 0xcbec, 0x4c00, 0x3c3e, 0x0, 0x1);
        gbc.writeMem(0xa1ed, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x46fc);
        EXPECT(gbc.pc(), 0xa1ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ed), 0xcb);
        EXPECT(gbc.readMem(0xa1ee), 0xaf);
        // CB AF 0314
        gbc.setState(0xe61d, 0xb90, 0x9470, 0xabec, 0xc459, 0x25a5, 0x1, 0x1);
        gbc.writeMem(0xe61d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb90);
        EXPECT(gbc.pc(), 0xe61f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe61d), 0xcb);
        EXPECT(gbc.readMem(0xe61e), 0xaf);
        // CB AF 0315
        gbc.setState(0xdef3, 0xda8e, 0xdf50, 0xb385, 0xb63a, 0xc857, 0x0, 0x1);
        gbc.writeMem(0xdef3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xda8e);
        EXPECT(gbc.pc(), 0xdef5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef3), 0xcb);
        EXPECT(gbc.readMem(0xdef4), 0xaf);
        // CB AF 0316
        gbc.setState(0x4c15, 0xb917, 0x360, 0xe112, 0x1c84, 0x8462, 0x1, 0x1);
        gbc.writeMem(0x4c15, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb917);
        EXPECT(gbc.pc(), 0x4c17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0317
        gbc.setState(0xc04, 0x98d, 0x93b0, 0xe16, 0xd7cc, 0xd455, 0x1, 0x0);
        gbc.writeMem(0xc04, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x98d);
        EXPECT(gbc.pc(), 0xc06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0318
        gbc.setState(0x21be, 0xe6eb, 0xc000, 0xfd2c, 0xc801, 0x29ad, 0x1, 0x1);
        gbc.writeMem(0x21be, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe6eb);
        EXPECT(gbc.pc(), 0x21c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0319
        gbc.setState(0x94ae, 0xb1e5, 0x2ff0, 0x8cf8, 0x4710, 0x45c, 0x1, 0x1);
        gbc.writeMem(0x94ae, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb1e5);
        EXPECT(gbc.pc(), 0x94b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ae), 0xcb);
        EXPECT(gbc.readMem(0x94af), 0xaf);
        // CB AF 031A
        gbc.setState(0xdd78, 0xdc76, 0xabe0, 0xf9ba, 0x4db0, 0x80aa, 0x0, 0x1);
        gbc.writeMem(0xdd78, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xdc76);
        EXPECT(gbc.pc(), 0xdd7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd78), 0xcb);
        EXPECT(gbc.readMem(0xdd79), 0xaf);
        // CB AF 031B
        gbc.setState(0x4f44, 0x160b, 0xcbb0, 0x9285, 0x5612, 0xd5c, 0x0, 0x1);
        gbc.writeMem(0x4f44, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x160b);
        EXPECT(gbc.pc(), 0x4f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 031C
        gbc.setState(0x199e, 0x2636, 0xaeb0, 0xf998, 0xdca, 0xb57d, 0x1, 0x1);
        gbc.writeMem(0x199e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2636);
        EXPECT(gbc.pc(), 0x19a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 031D
        gbc.setState(0xb561, 0x34b7, 0x6cf0, 0x3ae6, 0xafff, 0x5949, 0x0, 0x0);
        gbc.writeMem(0xb561, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x34b7);
        EXPECT(gbc.pc(), 0xb563);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb561), 0xcb);
        EXPECT(gbc.readMem(0xb562), 0xaf);
        // CB AF 031F
        gbc.setState(0xd831, 0xa584, 0xe070, 0x3914, 0xf722, 0x4634, 0x1, 0x0);
        gbc.writeMem(0xd831, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa584);
        EXPECT(gbc.pc(), 0xd833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd831), 0xcb);
        EXPECT(gbc.readMem(0xd832), 0xaf);
        // CB AF 0320
        gbc.setState(0x4314, 0xc06f, 0xcd10, 0x5cd5, 0xff9c, 0x1ac0, 0x1, 0x0);
        gbc.writeMem(0x4314, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc06f);
        EXPECT(gbc.pc(), 0x4316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0321
        gbc.setState(0x912e, 0x1850, 0xe470, 0x5a31, 0xcae8, 0x368f, 0x0, 0x0);
        gbc.writeMem(0x912e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1850);
        EXPECT(gbc.pc(), 0x9130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x912e), 0xcb);
        EXPECT(gbc.readMem(0x912f), 0xaf);
        // CB AF 0322
        gbc.setState(0xe4fb, 0xc56, 0x2dc0, 0x2e92, 0xed50, 0xe69a, 0x1, 0x1);
        gbc.writeMem(0xe4fb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc56);
        EXPECT(gbc.pc(), 0xe4fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4fb), 0xcb);
        EXPECT(gbc.readMem(0xe4fc), 0xaf);
        // CB AF 0323
        gbc.setState(0x378a, 0x515a, 0xfea0, 0x6f8d, 0x2569, 0xa124, 0x1, 0x0);
        gbc.writeMem(0x378a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x515a);
        EXPECT(gbc.pc(), 0x378c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0324
        gbc.setState(0xa014, 0x1a87, 0xf2e0, 0xc8b8, 0x2b92, 0x7161, 0x1, 0x1);
        gbc.writeMem(0xa014, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1a87);
        EXPECT(gbc.pc(), 0xa016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa014), 0xcb);
        EXPECT(gbc.readMem(0xa015), 0xaf);
        // CB AF 0325
        gbc.setState(0x5180, 0x49ae, 0xf830, 0x4e9b, 0x5980, 0x7bb4, 0x1, 0x0);
        gbc.writeMem(0x5180, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x49ae);
        EXPECT(gbc.pc(), 0x5182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0326
        gbc.setState(0xb64e, 0x4be2, 0x4890, 0x5e2c, 0xcdc8, 0xf339, 0x1, 0x0);
        gbc.writeMem(0xb64e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4be2);
        EXPECT(gbc.pc(), 0xb650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb64e), 0xcb);
        EXPECT(gbc.readMem(0xb64f), 0xaf);
        // CB AF 0327
        gbc.setState(0x9865, 0xe5d3, 0xe180, 0x2ae5, 0x6d18, 0xcf76, 0x0, 0x0);
        gbc.writeMem(0x9865, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe5d3);
        EXPECT(gbc.pc(), 0x9867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9865), 0xcb);
        EXPECT(gbc.readMem(0x9866), 0xaf);
        // CB AF 0328
        gbc.setState(0xa929, 0xfdc7, 0x3c30, 0xeb6b, 0x9687, 0x6cda, 0x1, 0x0);
        gbc.writeMem(0xa929, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfdc7);
        EXPECT(gbc.pc(), 0xa92b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa929), 0xcb);
        EXPECT(gbc.readMem(0xa92a), 0xaf);
        // CB AF 0329
        gbc.setState(0x79e, 0xca81, 0xba00, 0x60d3, 0x99d, 0x2eb4, 0x0, 0x1);
        gbc.writeMem(0x79e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xca81);
        EXPECT(gbc.pc(), 0x7a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 032A
        gbc.setState(0xe43b, 0xebf0, 0x2170, 0x5424, 0xf8af, 0x6c35, 0x1, 0x1);
        gbc.writeMem(0xe43b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xebf0);
        EXPECT(gbc.pc(), 0xe43d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe43b), 0xcb);
        EXPECT(gbc.readMem(0xe43c), 0xaf);
        // CB AF 032B
        gbc.setState(0x4ff5, 0xdf12, 0x9f70, 0xc3e4, 0xb72, 0xbe1f, 0x0, 0x0);
        gbc.writeMem(0x4ff5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xdf12);
        EXPECT(gbc.pc(), 0x4ff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 032C
        gbc.setState(0x758b, 0x8db2, 0xdbe0, 0xa9c1, 0x6e26, 0x6c4a, 0x0, 0x1);
        gbc.writeMem(0x758b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8db2);
        EXPECT(gbc.pc(), 0x758d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 032D
        gbc.setState(0x3d84, 0xe0ad, 0xc10, 0xa283, 0x89ca, 0xe7f4, 0x0, 0x1);
        gbc.writeMem(0x3d84, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe0ad);
        EXPECT(gbc.pc(), 0x3d86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 032E
        gbc.setState(0x6d85, 0xa218, 0x4820, 0xa1d5, 0xafc2, 0x773, 0x0, 0x1);
        gbc.writeMem(0x6d85, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa218);
        EXPECT(gbc.pc(), 0x6d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 032F
        gbc.setState(0x5b46, 0xd536, 0x1590, 0x9c75, 0xdc31, 0x4411, 0x1, 0x0);
        gbc.writeMem(0x5b46, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd536);
        EXPECT(gbc.pc(), 0x5b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0330
        gbc.setState(0x3a94, 0x7cb4, 0xdf50, 0x5fbc, 0x1dc3, 0x5eab, 0x1, 0x1);
        gbc.writeMem(0x3a94, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7cb4);
        EXPECT(gbc.pc(), 0x3a96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0331
        gbc.setState(0x7222, 0xa495, 0x90a0, 0x6c2f, 0x5608, 0x5c2, 0x0, 0x1);
        gbc.writeMem(0x7222, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa495);
        EXPECT(gbc.pc(), 0x7224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0332
        gbc.setState(0xc7d4, 0xc887, 0xd480, 0x89e9, 0x6006, 0xa19b, 0x1, 0x1);
        gbc.writeMem(0xc7d4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc887);
        EXPECT(gbc.pc(), 0xc7d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d4), 0xcb);
        EXPECT(gbc.readMem(0xc7d5), 0xaf);
        // CB AF 0333
        gbc.setState(0x144f, 0x95d9, 0x6ee0, 0x1b8a, 0x60bf, 0xf4ab, 0x1, 0x1);
        gbc.writeMem(0x144f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x95d9);
        EXPECT(gbc.pc(), 0x1451);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0334
        gbc.setState(0xa184, 0x7367, 0xd2a0, 0x7ffb, 0x9d78, 0xe843, 0x1, 0x0);
        gbc.writeMem(0xa184, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7367);
        EXPECT(gbc.pc(), 0xa186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa184), 0xcb);
        EXPECT(gbc.readMem(0xa185), 0xaf);
        // CB AF 0335
        gbc.setState(0xa7df, 0x758b, 0x8cb0, 0x34e8, 0x9e45, 0x5ca0, 0x1, 0x1);
        gbc.writeMem(0xa7df, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x758b);
        EXPECT(gbc.pc(), 0xa7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7df), 0xcb);
        EXPECT(gbc.readMem(0xa7e0), 0xaf);
        // CB AF 0336
        gbc.setState(0x2a3b, 0x9869, 0x1540, 0xe6ec, 0x9a92, 0xfc5, 0x1, 0x1);
        gbc.writeMem(0x2a3b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9869);
        EXPECT(gbc.pc(), 0x2a3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0337
        gbc.setState(0xb169, 0x4a9e, 0xf9e0, 0x24d6, 0xc072, 0xc969, 0x1, 0x1);
        gbc.writeMem(0xb169, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4a9e);
        EXPECT(gbc.pc(), 0xb16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb169), 0xcb);
        EXPECT(gbc.readMem(0xb16a), 0xaf);
        // CB AF 0338
        gbc.setState(0x657e, 0xf54d, 0x3430, 0x2e57, 0xcfdb, 0x8213, 0x0, 0x0);
        gbc.writeMem(0x657e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf54d);
        EXPECT(gbc.pc(), 0x6580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0339
        gbc.setState(0xc788, 0x4aea, 0x4850, 0x63eb, 0xdb0a, 0xb8b0, 0x0, 0x0);
        gbc.writeMem(0xc788, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4aea);
        EXPECT(gbc.pc(), 0xc78a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc788), 0xcb);
        EXPECT(gbc.readMem(0xc789), 0xaf);
        // CB AF 033A
        gbc.setState(0x3a5b, 0x853b, 0x57d0, 0xcb96, 0xd52d, 0x6c6d, 0x1, 0x0);
        gbc.writeMem(0x3a5b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x853b);
        EXPECT(gbc.pc(), 0x3a5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 033B
        gbc.setState(0x6d24, 0x9718, 0xd460, 0xda4f, 0x5742, 0xec9f, 0x1, 0x0);
        gbc.writeMem(0x6d24, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9718);
        EXPECT(gbc.pc(), 0x6d26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 033C
        gbc.setState(0x91d9, 0x3b62, 0xf510, 0x6d85, 0xff18, 0x7842, 0x0, 0x0);
        gbc.writeMem(0x91d9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3b62);
        EXPECT(gbc.pc(), 0x91db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d9), 0xcb);
        EXPECT(gbc.readMem(0x91da), 0xaf);
        // CB AF 033D
        gbc.setState(0xad8b, 0xb016, 0x4c20, 0x6aa7, 0x7754, 0x6963, 0x0, 0x1);
        gbc.writeMem(0xad8b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb016);
        EXPECT(gbc.pc(), 0xad8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8b), 0xcb);
        EXPECT(gbc.readMem(0xad8c), 0xaf);
        // CB AF 033F
        gbc.setState(0xce5f, 0xaced, 0xf3a0, 0x6033, 0x9013, 0x8fdc, 0x0, 0x0);
        gbc.writeMem(0xce5f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xaced);
        EXPECT(gbc.pc(), 0xce61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce5f), 0xcb);
        EXPECT(gbc.readMem(0xce60), 0xaf);
        // CB AF 0340
        gbc.setState(0x7cf, 0x8850, 0xb480, 0xc85c, 0xe376, 0xf9cf, 0x0, 0x0);
        gbc.writeMem(0x7cf, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8850);
        EXPECT(gbc.pc(), 0x7d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0341
        gbc.setState(0xa595, 0xc06a, 0xf3f0, 0x8ceb, 0x9690, 0xefab, 0x1, 0x1);
        gbc.writeMem(0xa595, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc06a);
        EXPECT(gbc.pc(), 0xa597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa595), 0xcb);
        EXPECT(gbc.readMem(0xa596), 0xaf);
        // CB AF 0342
        gbc.setState(0x4d77, 0xcb72, 0x9de0, 0x7439, 0x7543, 0xa52f, 0x1, 0x1);
        gbc.writeMem(0x4d77, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcb72);
        EXPECT(gbc.pc(), 0x4d79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0343
        gbc.setState(0x6888, 0x1030, 0x64e0, 0xd4ac, 0xf1d5, 0xc4b1, 0x0, 0x1);
        gbc.writeMem(0x6888, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1030);
        EXPECT(gbc.pc(), 0x688a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0344
        gbc.setState(0xa901, 0xc224, 0xf5c0, 0x884c, 0x1f54, 0x7467, 0x1, 0x1);
        gbc.writeMem(0xa901, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc224);
        EXPECT(gbc.pc(), 0xa903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa901), 0xcb);
        EXPECT(gbc.readMem(0xa902), 0xaf);
        // CB AF 0345
        gbc.setState(0x93de, 0x76, 0x7870, 0x5462, 0x3d28, 0x9f16, 0x0, 0x1);
        gbc.writeMem(0x93de, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x76);
        EXPECT(gbc.pc(), 0x93e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93de), 0xcb);
        EXPECT(gbc.readMem(0x93df), 0xaf);
        // CB AF 0346
        gbc.setState(0x1b5b, 0xf799, 0xe0c0, 0xe298, 0xfe2b, 0x1f82, 0x0, 0x0);
        gbc.writeMem(0x1b5b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf799);
        EXPECT(gbc.pc(), 0x1b5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0347
        gbc.setState(0x4698, 0xee08, 0xbb10, 0xee18, 0xc524, 0x162a, 0x0, 0x0);
        gbc.writeMem(0x4698, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xee08);
        EXPECT(gbc.pc(), 0x469a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0348
        gbc.setState(0x1d9, 0x7298, 0x6e30, 0x63ea, 0x8baf, 0xe011, 0x1, 0x0);
        gbc.writeMem(0x1d9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7298);
        EXPECT(gbc.pc(), 0x1db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0349
        gbc.setState(0xb621, 0x3651, 0x12d0, 0x926e, 0x9493, 0xf696, 0x0, 0x1);
        gbc.writeMem(0xb621, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3651);
        EXPECT(gbc.pc(), 0xb623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb621), 0xcb);
        EXPECT(gbc.readMem(0xb622), 0xaf);
        // CB AF 034A
        gbc.setState(0x823d, 0x66ae, 0x7d0, 0xf5ae, 0x9671, 0x99ba, 0x1, 0x1);
        gbc.writeMem(0x823d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x66ae);
        EXPECT(gbc.pc(), 0x823f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x823d), 0xcb);
        EXPECT(gbc.readMem(0x823e), 0xaf);
        // CB AF 034C
        gbc.setState(0xdec0, 0xe3b9, 0xb880, 0x3264, 0xb2fc, 0x32a, 0x0, 0x0);
        gbc.writeMem(0xdec0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe3b9);
        EXPECT(gbc.pc(), 0xdec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdec0), 0xcb);
        EXPECT(gbc.readMem(0xdec1), 0xaf);
        // CB AF 034D
        gbc.setState(0x50e0, 0xb328, 0x200, 0xeead, 0x4c21, 0x2fb0, 0x1, 0x1);
        gbc.writeMem(0x50e0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb328);
        EXPECT(gbc.pc(), 0x50e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 034E
        gbc.setState(0x2f26, 0x7272, 0x8f50, 0x450b, 0x2b39, 0x820c, 0x1, 0x1);
        gbc.writeMem(0x2f26, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7272);
        EXPECT(gbc.pc(), 0x2f28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 034F
        gbc.setState(0x47e0, 0x4426, 0xd820, 0xc72e, 0x77be, 0x13fc, 0x1, 0x1);
        gbc.writeMem(0x47e0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4426);
        EXPECT(gbc.pc(), 0x47e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0350
        gbc.setState(0xda0f, 0x6b96, 0x2c60, 0x7867, 0x2f9a, 0xfa10, 0x0, 0x0);
        gbc.writeMem(0xda0f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6b96);
        EXPECT(gbc.pc(), 0xda11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda0f), 0xcb);
        EXPECT(gbc.readMem(0xda10), 0xaf);
        // CB AF 0352
        gbc.setState(0x391b, 0x58b1, 0x1e90, 0xbcf9, 0x5742, 0xc0ad, 0x1, 0x1);
        gbc.writeMem(0x391b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x58b1);
        EXPECT(gbc.pc(), 0x391d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0353
        gbc.setState(0x67e2, 0x81c2, 0xe5c0, 0xc76e, 0x7edd, 0xd63, 0x0, 0x0);
        gbc.writeMem(0x67e2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x81c2);
        EXPECT(gbc.pc(), 0x67e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0354
        gbc.setState(0x35f3, 0x3825, 0xc5f0, 0xd4ef, 0xe17c, 0x6b90, 0x1, 0x1);
        gbc.writeMem(0x35f3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3825);
        EXPECT(gbc.pc(), 0x35f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0355
        gbc.setState(0xc859, 0xf55f, 0xab40, 0x5171, 0x4c9e, 0xb83b, 0x0, 0x1);
        gbc.writeMem(0xc859, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf55f);
        EXPECT(gbc.pc(), 0xc85b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc859), 0xcb);
        EXPECT(gbc.readMem(0xc85a), 0xaf);
        // CB AF 0356
        gbc.setState(0x24e7, 0xf32b, 0x5600, 0xa1cb, 0xc722, 0x4989, 0x0, 0x0);
        gbc.writeMem(0x24e7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf32b);
        EXPECT(gbc.pc(), 0x24e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0357
        gbc.setState(0x6c0a, 0xa2bf, 0xea70, 0x936b, 0xf1dc, 0x1b8d, 0x1, 0x0);
        gbc.writeMem(0x6c0a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa2bf);
        EXPECT(gbc.pc(), 0x6c0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0358
        gbc.setState(0x945d, 0x2cdd, 0xb410, 0x2ab5, 0x221, 0x3e98, 0x1, 0x0);
        gbc.writeMem(0x945d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2cdd);
        EXPECT(gbc.pc(), 0x945f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945d), 0xcb);
        EXPECT(gbc.readMem(0x945e), 0xaf);
        // CB AF 0359
        gbc.setState(0x7c09, 0x120b, 0x7660, 0x7f52, 0xbd0c, 0xcc88, 0x1, 0x0);
        gbc.writeMem(0x7c09, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x120b);
        EXPECT(gbc.pc(), 0x7c0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 035B
        gbc.setState(0x39b3, 0xdca5, 0x7440, 0x921b, 0x9a09, 0xe5b2, 0x1, 0x1);
        gbc.writeMem(0x39b3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdca5);
        EXPECT(gbc.pc(), 0x39b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 035C
        gbc.setState(0x3126, 0x96b, 0x71a0, 0x904a, 0x2087, 0xa689, 0x1, 0x1);
        gbc.writeMem(0x3126, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x96b);
        EXPECT(gbc.pc(), 0x3128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 035D
        gbc.setState(0x3d9a, 0x4365, 0xbe90, 0xf738, 0x7d8b, 0xb23b, 0x0, 0x0);
        gbc.writeMem(0x3d9a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4365);
        EXPECT(gbc.pc(), 0x3d9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 035E
        gbc.setState(0xea60, 0x9ecd, 0x3a80, 0x1c64, 0x53bc, 0xd984, 0x1, 0x1);
        gbc.writeMem(0xea60, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9ecd);
        EXPECT(gbc.pc(), 0xea62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea60), 0xcb);
        EXPECT(gbc.readMem(0xea61), 0xaf);
        // CB AF 035F
        gbc.setState(0x7d23, 0xaa8f, 0x9520, 0xc145, 0x939f, 0x6355, 0x1, 0x1);
        gbc.writeMem(0x7d23, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xaa8f);
        EXPECT(gbc.pc(), 0x7d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0360
        gbc.setState(0x8cd3, 0x73a4, 0x7bf0, 0x68d5, 0xcc13, 0xa8a0, 0x1, 0x1);
        gbc.writeMem(0x8cd3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x73a4);
        EXPECT(gbc.pc(), 0x8cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd3), 0xcb);
        EXPECT(gbc.readMem(0x8cd4), 0xaf);
        // CB AF 0361
        gbc.setState(0x2598, 0x39f, 0x64f0, 0xb37c, 0xe1c5, 0x6b5f, 0x1, 0x1);
        gbc.writeMem(0x2598, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x39f);
        EXPECT(gbc.pc(), 0x259a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0362
        gbc.setState(0x348c, 0x9053, 0xc730, 0xf602, 0x6175, 0xc801, 0x0, 0x1);
        gbc.writeMem(0x348c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9053);
        EXPECT(gbc.pc(), 0x348e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0363
        gbc.setState(0x72ff, 0xe4e3, 0x6b70, 0xf051, 0xa000, 0x3ef8, 0x1, 0x1);
        gbc.writeMem(0x72ff, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe4e3);
        EXPECT(gbc.pc(), 0x7301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0364
        gbc.setState(0x4afb, 0x89ab, 0x2140, 0x57d3, 0xe890, 0xa03f, 0x0, 0x1);
        gbc.writeMem(0x4afb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x89ab);
        EXPECT(gbc.pc(), 0x4afd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0365
        gbc.setState(0x2cbb, 0x1921, 0x6b40, 0x7675, 0xd984, 0xce90, 0x0, 0x0);
        gbc.writeMem(0x2cbb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1921);
        EXPECT(gbc.pc(), 0x2cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0366
        gbc.setState(0x16c8, 0xdda7, 0x4700, 0xc67c, 0x28d3, 0xe844, 0x1, 0x1);
        gbc.writeMem(0x16c8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xdda7);
        EXPECT(gbc.pc(), 0x16ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0367
        gbc.setState(0xacca, 0xfd0d, 0xc050, 0xd78e, 0xdace, 0xf1d5, 0x0, 0x0);
        gbc.writeMem(0xacca, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xfd0d);
        EXPECT(gbc.pc(), 0xaccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacca), 0xcb);
        EXPECT(gbc.readMem(0xaccb), 0xaf);
        // CB AF 0368
        gbc.setState(0xc70, 0x2ac9, 0x7910, 0x7131, 0x11f4, 0xaf2d, 0x1, 0x1);
        gbc.writeMem(0xc70, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2ac9);
        EXPECT(gbc.pc(), 0xc72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0369
        gbc.setState(0xa98e, 0x8af7, 0x670, 0x5d35, 0xd2, 0x1d79, 0x0, 0x1);
        gbc.writeMem(0xa98e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8af7);
        EXPECT(gbc.pc(), 0xa990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98e), 0xcb);
        EXPECT(gbc.readMem(0xa98f), 0xaf);
        // CB AF 036A
        gbc.setState(0xbf1b, 0x13ab, 0x2b90, 0x2ddc, 0xf7dc, 0x85, 0x1, 0x1);
        gbc.writeMem(0xbf1b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x13ab);
        EXPECT(gbc.pc(), 0xbf1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf1b), 0xcb);
        EXPECT(gbc.readMem(0xbf1c), 0xaf);
        // CB AF 036B
        gbc.setState(0xdea3, 0xa7a6, 0x9510, 0xe25b, 0xfa98, 0xdc7f, 0x0, 0x1);
        gbc.writeMem(0xdea3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa7a6);
        EXPECT(gbc.pc(), 0xdea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea3), 0xcb);
        EXPECT(gbc.readMem(0xdea4), 0xaf);
        // CB AF 036C
        gbc.setState(0x2763, 0x390a, 0xe00, 0xe95e, 0x8999, 0x1489, 0x1, 0x0);
        gbc.writeMem(0x2763, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x390a);
        EXPECT(gbc.pc(), 0x2765);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 036D
        gbc.setState(0x312c, 0xfa2b, 0x30c0, 0x4d4a, 0x9ad6, 0x1488, 0x0, 0x0);
        gbc.writeMem(0x312c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfa2b);
        EXPECT(gbc.pc(), 0x312e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 036F
        gbc.setState(0xca37, 0x5935, 0x30, 0xa8dd, 0xf9e6, 0xb270, 0x1, 0x0);
        gbc.writeMem(0xca37, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5935);
        EXPECT(gbc.pc(), 0xca39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca37), 0xcb);
        EXPECT(gbc.readMem(0xca38), 0xaf);
        // CB AF 0370
        gbc.setState(0x5316, 0x5eca, 0x4010, 0x1a0, 0xc4a3, 0x3b44, 0x0, 0x0);
        gbc.writeMem(0x5316, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5eca);
        EXPECT(gbc.pc(), 0x5318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0371
        gbc.setState(0x6fbd, 0x745e, 0xd590, 0xc419, 0xedf7, 0xd30, 0x1, 0x0);
        gbc.writeMem(0x6fbd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x745e);
        EXPECT(gbc.pc(), 0x6fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0372
        gbc.setState(0xc49, 0x669d, 0x34c0, 0xaeb6, 0xddad, 0x3d19, 0x0, 0x1);
        gbc.writeMem(0xc49, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x669d);
        EXPECT(gbc.pc(), 0xc4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0373
        gbc.setState(0x84d7, 0x4d93, 0x7750, 0xd65, 0xe12, 0x45dd, 0x1, 0x0);
        gbc.writeMem(0x84d7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4d93);
        EXPECT(gbc.pc(), 0x84d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d7), 0xcb);
        EXPECT(gbc.readMem(0x84d8), 0xaf);
        // CB AF 0374
        gbc.setState(0xc9e0, 0xb687, 0xc1f0, 0x27a4, 0x878d, 0x766a, 0x1, 0x0);
        gbc.writeMem(0xc9e0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb687);
        EXPECT(gbc.pc(), 0xc9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e0), 0xcb);
        EXPECT(gbc.readMem(0xc9e1), 0xaf);
        // CB AF 0375
        gbc.setState(0x836d, 0xd6b, 0x62d0, 0x2633, 0x1bee, 0x4c5, 0x0, 0x1);
        gbc.writeMem(0x836d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd6b);
        EXPECT(gbc.pc(), 0x836f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x836d), 0xcb);
        EXPECT(gbc.readMem(0x836e), 0xaf);
        // CB AF 0376
        gbc.setState(0x38ea, 0x74f7, 0x9aa0, 0xa104, 0xe56a, 0x1b82, 0x1, 0x1);
        gbc.writeMem(0x38ea, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x74f7);
        EXPECT(gbc.pc(), 0x38ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0377
        gbc.setState(0xd46, 0x1e2, 0x3b20, 0x29a5, 0xf76d, 0x781, 0x0, 0x1);
        gbc.writeMem(0xd46, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1e2);
        EXPECT(gbc.pc(), 0xd48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0378
        gbc.setState(0x139c, 0x9b24, 0xf2d0, 0x2987, 0xc84b, 0xfe02, 0x0, 0x1);
        gbc.writeMem(0x139c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9b24);
        EXPECT(gbc.pc(), 0x139e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0379
        gbc.setState(0xd5d3, 0x4173, 0x8b40, 0x1ac0, 0xe31a, 0x8619, 0x0, 0x1);
        gbc.writeMem(0xd5d3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4173);
        EXPECT(gbc.pc(), 0xd5d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5d3), 0xcb);
        EXPECT(gbc.readMem(0xd5d4), 0xaf);
        // CB AF 037A
        gbc.setState(0x61d9, 0x7732, 0xe8e0, 0x6222, 0x4b48, 0xfc7e, 0x1, 0x1);
        gbc.writeMem(0x61d9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7732);
        EXPECT(gbc.pc(), 0x61db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 037B
        gbc.setState(0x7896, 0x6bcd, 0xcc20, 0x4353, 0xe6f6, 0x1357, 0x1, 0x1);
        gbc.writeMem(0x7896, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6bcd);
        EXPECT(gbc.pc(), 0x7898);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 037C
        gbc.setState(0x2e09, 0xc7d5, 0x7450, 0xe7fd, 0x64db, 0xd444, 0x0, 0x0);
        gbc.writeMem(0x2e09, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc7d5);
        EXPECT(gbc.pc(), 0x2e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 037D
        gbc.setState(0x7ee7, 0x1054, 0x7cd0, 0xe0de, 0x1de3, 0xb9b, 0x0, 0x1);
        gbc.writeMem(0x7ee7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1054);
        EXPECT(gbc.pc(), 0x7ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 037E
        gbc.setState(0x5362, 0x641a, 0x61f0, 0xc5dc, 0x2199, 0x55c3, 0x0, 0x0);
        gbc.writeMem(0x5362, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x641a);
        EXPECT(gbc.pc(), 0x5364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 037F
        gbc.setState(0x54b1, 0xbc38, 0x23a0, 0xece4, 0xf724, 0x61c0, 0x0, 0x1);
        gbc.writeMem(0x54b1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xbc38);
        EXPECT(gbc.pc(), 0x54b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0380
        gbc.setState(0xe0d, 0xdc00, 0x1760, 0xf773, 0x3bb4, 0xcaa1, 0x0, 0x0);
        gbc.writeMem(0xe0d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdc00);
        EXPECT(gbc.pc(), 0xe0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0381
        gbc.setState(0xe867, 0xb9f2, 0xae90, 0xe71a, 0xba75, 0x1f7, 0x0, 0x1);
        gbc.writeMem(0xe867, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb9f2);
        EXPECT(gbc.pc(), 0xe869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe867), 0xcb);
        EXPECT(gbc.readMem(0xe868), 0xaf);
        // CB AF 0382
        gbc.setState(0x16a6, 0x9edf, 0xc310, 0xb92a, 0x2787, 0xd849, 0x1, 0x0);
        gbc.writeMem(0x16a6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9edf);
        EXPECT(gbc.pc(), 0x16a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0383
        gbc.setState(0x9979, 0x2f6f, 0x44f0, 0x71d6, 0x6fa8, 0x8bf9, 0x1, 0x0);
        gbc.writeMem(0x9979, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2f6f);
        EXPECT(gbc.pc(), 0x997b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9979), 0xcb);
        EXPECT(gbc.readMem(0x997a), 0xaf);
        // CB AF 0384
        gbc.setState(0x4158, 0xa895, 0xc40, 0xcd06, 0x5bfc, 0x76d3, 0x1, 0x0);
        gbc.writeMem(0x4158, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa895);
        EXPECT(gbc.pc(), 0x415a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0385
        gbc.setState(0x3853, 0xf136, 0x32a0, 0xc00b, 0x5e3e, 0xfb71, 0x0, 0x1);
        gbc.writeMem(0x3853, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf136);
        EXPECT(gbc.pc(), 0x3855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0386
        gbc.setState(0x2ee, 0xe82b, 0xcc10, 0x21ec, 0xada3, 0x9899, 0x0, 0x0);
        gbc.writeMem(0x2ee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe82b);
        EXPECT(gbc.pc(), 0x2f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0387
        gbc.setState(0x5db1, 0x64b3, 0xaef0, 0x48cb, 0xb445, 0x2ffc, 0x0, 0x1);
        gbc.writeMem(0x5db1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x64b3);
        EXPECT(gbc.pc(), 0x5db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0388
        gbc.setState(0x9a9b, 0xdff1, 0xa0a0, 0x313, 0xbadb, 0xd673, 0x0, 0x0);
        gbc.writeMem(0x9a9b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdff1);
        EXPECT(gbc.pc(), 0x9a9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a9b), 0xcb);
        EXPECT(gbc.readMem(0x9a9c), 0xaf);
        // CB AF 0389
        gbc.setState(0x4675, 0xb9a6, 0x6600, 0xa26f, 0x8cf0, 0xa3b4, 0x0, 0x1);
        gbc.writeMem(0x4675, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb9a6);
        EXPECT(gbc.pc(), 0x4677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 038A
        gbc.setState(0x17b9, 0xd3f5, 0x1af0, 0x6b70, 0x2966, 0x5986, 0x1, 0x0);
        gbc.writeMem(0x17b9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd3f5);
        EXPECT(gbc.pc(), 0x17bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 038B
        gbc.setState(0x5def, 0x9c6, 0xf440, 0x44cb, 0x5f79, 0x527f, 0x1, 0x1);
        gbc.writeMem(0x5def, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9c6);
        EXPECT(gbc.pc(), 0x5df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 038C
        gbc.setState(0x71e1, 0x7c0a, 0x46a0, 0x3bc5, 0xb92d, 0x1b70, 0x1, 0x1);
        gbc.writeMem(0x71e1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7c0a);
        EXPECT(gbc.pc(), 0x71e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 038D
        gbc.setState(0x1b9f, 0xf98e, 0x28f0, 0x7229, 0x9ca3, 0x341d, 0x1, 0x0);
        gbc.writeMem(0x1b9f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf98e);
        EXPECT(gbc.pc(), 0x1ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 038E
        gbc.setState(0x4b22, 0xa6fb, 0x42a0, 0x396c, 0xafbc, 0x8f4a, 0x0, 0x1);
        gbc.writeMem(0x4b22, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa6fb);
        EXPECT(gbc.pc(), 0x4b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 038F
        gbc.setState(0xde9e, 0xc3ae, 0x3d50, 0xfb61, 0x1287, 0x6ecc, 0x1, 0x1);
        gbc.writeMem(0xde9e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc3ae);
        EXPECT(gbc.pc(), 0xdea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde9e), 0xcb);
        EXPECT(gbc.readMem(0xde9f), 0xaf);
        // CB AF 0390
        gbc.setState(0xad64, 0x901e, 0x69d0, 0x3fd4, 0x8112, 0x9f45, 0x1, 0x0);
        gbc.writeMem(0xad64, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x901e);
        EXPECT(gbc.pc(), 0xad66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad64), 0xcb);
        EXPECT(gbc.readMem(0xad65), 0xaf);
        // CB AF 0391
        gbc.setState(0x87e7, 0x87d7, 0x1400, 0x3ac9, 0x17d3, 0xd6d4, 0x1, 0x1);
        gbc.writeMem(0x87e7, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x87d7);
        EXPECT(gbc.pc(), 0x87e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e7), 0xcb);
        EXPECT(gbc.readMem(0x87e8), 0xaf);
        // CB AF 0392
        gbc.setState(0xd6a2, 0x2f32, 0xc7f0, 0xf7cc, 0x4e2, 0x79eb, 0x1, 0x1);
        gbc.writeMem(0xd6a2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2f32);
        EXPECT(gbc.pc(), 0xd6a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a2), 0xcb);
        EXPECT(gbc.readMem(0xd6a3), 0xaf);
        // CB AF 0393
        gbc.setState(0x26c1, 0x6568, 0x93e0, 0xb1c2, 0xa10a, 0x29b6, 0x0, 0x1);
        gbc.writeMem(0x26c1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6568);
        EXPECT(gbc.pc(), 0x26c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 0394
        gbc.setState(0xacfa, 0xca97, 0xd180, 0xb411, 0xc729, 0x374, 0x0, 0x1);
        gbc.writeMem(0xacfa, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xca97);
        EXPECT(gbc.pc(), 0xacfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacfa), 0xcb);
        EXPECT(gbc.readMem(0xacfb), 0xaf);
        // CB AF 0396
        gbc.setState(0x71d4, 0xe392, 0x53d0, 0xdb3d, 0x3ad4, 0x29e3, 0x0, 0x0);
        gbc.writeMem(0x71d4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe392);
        EXPECT(gbc.pc(), 0x71d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 0397
        gbc.setState(0xef89, 0x1d35, 0x37d0, 0xeece, 0xd3f2, 0xefe7, 0x0, 0x0);
        gbc.writeMem(0xef89, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1d35);
        EXPECT(gbc.pc(), 0xef8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef89), 0xcb);
        EXPECT(gbc.readMem(0xef8a), 0xaf);
        // CB AF 0398
        gbc.setState(0xa7ca, 0xeb2b, 0x2090, 0x4dae, 0x67e1, 0xd920, 0x1, 0x0);
        gbc.writeMem(0xa7ca, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xeb2b);
        EXPECT(gbc.pc(), 0xa7cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ca), 0xcb);
        EXPECT(gbc.readMem(0xa7cb), 0xaf);
        // CB AF 0399
        gbc.setState(0x66a5, 0x652c, 0xb470, 0x718f, 0x3ab0, 0x476d, 0x1, 0x0);
        gbc.writeMem(0x66a5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x652c);
        EXPECT(gbc.pc(), 0x66a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 039A
        gbc.setState(0x26ff, 0x3e91, 0x6e60, 0x376d, 0x537a, 0x6d1c, 0x1, 0x1);
        gbc.writeMem(0x26ff, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3e91);
        EXPECT(gbc.pc(), 0x2701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 039B
        gbc.setState(0xb92e, 0x7d0e, 0x2600, 0x5a2b, 0x224c, 0xa483, 0x1, 0x0);
        gbc.writeMem(0xb92e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7d0e);
        EXPECT(gbc.pc(), 0xb930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92e), 0xcb);
        EXPECT(gbc.readMem(0xb92f), 0xaf);
        // CB AF 039C
        gbc.setState(0x9267, 0x4dcb, 0x5b90, 0xd413, 0x780, 0x3a14, 0x1, 0x0);
        gbc.writeMem(0x9267, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4dcb);
        EXPECT(gbc.pc(), 0x9269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9267), 0xcb);
        EXPECT(gbc.readMem(0x9268), 0xaf);
        // CB AF 039E
        gbc.setState(0xca47, 0xbcf5, 0x4e50, 0x3927, 0x987a, 0x7e0e, 0x0, 0x0);
        gbc.writeMem(0xca47, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xbcf5);
        EXPECT(gbc.pc(), 0xca49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca47), 0xcb);
        EXPECT(gbc.readMem(0xca48), 0xaf);
        // CB AF 039F
        gbc.setState(0xc378, 0x6e12, 0xed60, 0x80a1, 0x90fe, 0x349b, 0x1, 0x0);
        gbc.writeMem(0xc378, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6e12);
        EXPECT(gbc.pc(), 0xc37a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc378), 0xcb);
        EXPECT(gbc.readMem(0xc379), 0xaf);
        // CB AF 03A0
        gbc.setState(0x55ee, 0x9e46, 0x3850, 0xad7b, 0x2a28, 0x20d0, 0x0, 0x1);
        gbc.writeMem(0x55ee, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9e46);
        EXPECT(gbc.pc(), 0x55f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03A1
        gbc.setState(0x9aab, 0x5c32, 0xb8a0, 0xa62, 0x75f1, 0x1b8c, 0x0, 0x1);
        gbc.writeMem(0x9aab, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5c32);
        EXPECT(gbc.pc(), 0x9aad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aab), 0xcb);
        EXPECT(gbc.readMem(0x9aac), 0xaf);
        // CB AF 03A2
        gbc.setState(0x7802, 0x2bae, 0x4990, 0xb8b3, 0x83f5, 0x3dbc, 0x0, 0x0);
        gbc.writeMem(0x7802, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2bae);
        EXPECT(gbc.pc(), 0x7804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03A3
        gbc.setState(0x8f57, 0x7aa1, 0x1010, 0x91f0, 0xae79, 0xbe2f, 0x1, 0x0);
        gbc.writeMem(0x8f57, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7aa1);
        EXPECT(gbc.pc(), 0x8f59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f57), 0xcb);
        EXPECT(gbc.readMem(0x8f58), 0xaf);
        // CB AF 03A4
        gbc.setState(0x6c3d, 0x6143, 0x7690, 0x8640, 0x2a17, 0xb931, 0x1, 0x0);
        gbc.writeMem(0x6c3d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6143);
        EXPECT(gbc.pc(), 0x6c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03A5
        gbc.setState(0x6350, 0x1eb9, 0x6070, 0xe302, 0x3158, 0x8d79, 0x0, 0x0);
        gbc.writeMem(0x6350, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1eb9);
        EXPECT(gbc.pc(), 0x6352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03A6
        gbc.setState(0x9f4b, 0x5910, 0x1e20, 0x8b40, 0x758a, 0x8985, 0x0, 0x1);
        gbc.writeMem(0x9f4b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5910);
        EXPECT(gbc.pc(), 0x9f4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f4b), 0xcb);
        EXPECT(gbc.readMem(0x9f4c), 0xaf);
        // CB AF 03A7
        gbc.setState(0x4777, 0x8afe, 0x3090, 0xd659, 0x926, 0xec21, 0x1, 0x0);
        gbc.writeMem(0x4777, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8afe);
        EXPECT(gbc.pc(), 0x4779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03A8
        gbc.setState(0xe211, 0x70c8, 0x8ab0, 0x5d35, 0xca1a, 0x7f6a, 0x0, 0x0);
        gbc.writeMem(0xe211, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x70c8);
        EXPECT(gbc.pc(), 0xe213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe211), 0xcb);
        EXPECT(gbc.readMem(0xe212), 0xaf);
        // CB AF 03A9
        gbc.setState(0xc9e9, 0x8c3d, 0x1040, 0x5f48, 0xc254, 0xb2e9, 0x0, 0x1);
        gbc.writeMem(0xc9e9, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8c3d);
        EXPECT(gbc.pc(), 0xc9eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e9), 0xcb);
        EXPECT(gbc.readMem(0xc9ea), 0xaf);
        // CB AF 03AA
        gbc.setState(0x80bd, 0x8f0d, 0x7240, 0x432f, 0x54c2, 0xe738, 0x0, 0x0);
        gbc.writeMem(0x80bd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8f0d);
        EXPECT(gbc.pc(), 0x80bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80bd), 0xcb);
        EXPECT(gbc.readMem(0x80be), 0xaf);
        // CB AF 03AB
        gbc.setState(0xbbb6, 0x9f98, 0x8b60, 0x83bb, 0xb361, 0xc37b, 0x0, 0x0);
        gbc.writeMem(0xbbb6, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9f98);
        EXPECT(gbc.pc(), 0xbbb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb6), 0xcb);
        EXPECT(gbc.readMem(0xbbb7), 0xaf);
        // CB AF 03AC
        gbc.setState(0x8e3e, 0x3d8, 0x640, 0xb598, 0xa54e, 0x7da1, 0x0, 0x0);
        gbc.writeMem(0x8e3e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3d8);
        EXPECT(gbc.pc(), 0x8e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e3e), 0xcb);
        EXPECT(gbc.readMem(0x8e3f), 0xaf);
        // CB AF 03AD
        gbc.setState(0x25d5, 0x63cf, 0x5210, 0x7691, 0x9a3, 0x9de2, 0x0, 0x1);
        gbc.writeMem(0x25d5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x63cf);
        EXPECT(gbc.pc(), 0x25d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03AE
        gbc.setState(0xbfcd, 0x24c9, 0xab10, 0x516a, 0xe138, 0x99fe, 0x1, 0x0);
        gbc.writeMem(0xbfcd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x24c9);
        EXPECT(gbc.pc(), 0xbfcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfcd), 0xcb);
        EXPECT(gbc.readMem(0xbfce), 0xaf);
        // CB AF 03AF
        gbc.setState(0xede8, 0x2742, 0x54e0, 0x8418, 0xa328, 0xe61f, 0x0, 0x1);
        gbc.writeMem(0xede8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2742);
        EXPECT(gbc.pc(), 0xedea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede8), 0xcb);
        EXPECT(gbc.readMem(0xede9), 0xaf);
        // CB AF 03B0
        gbc.setState(0xdd5f, 0x4fa3, 0xfaa0, 0x4b0, 0x2981, 0x647c, 0x0, 0x1);
        gbc.writeMem(0xdd5f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4fa3);
        EXPECT(gbc.pc(), 0xdd61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd5f), 0xcb);
        EXPECT(gbc.readMem(0xdd60), 0xaf);
        // CB AF 03B1
        gbc.setState(0x7df3, 0xd559, 0x5440, 0x8d48, 0xe436, 0x97b1, 0x1, 0x1);
        gbc.writeMem(0x7df3, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd559);
        EXPECT(gbc.pc(), 0x7df5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03B2
        gbc.setState(0x6c34, 0x234e, 0x4510, 0x9131, 0x5e59, 0x3129, 0x1, 0x1);
        gbc.writeMem(0x6c34, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x234e);
        EXPECT(gbc.pc(), 0x6c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03B3
        gbc.setState(0x156d, 0x2092, 0x6570, 0x212b, 0x8eb5, 0x7148, 0x1, 0x1);
        gbc.writeMem(0x156d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2092);
        EXPECT(gbc.pc(), 0x156f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03B4
        gbc.setState(0xdd07, 0x780f, 0x23f0, 0xf2da, 0x1a8b, 0xa36e, 0x0, 0x1);
        gbc.writeMem(0xdd07, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x780f);
        EXPECT(gbc.pc(), 0xdd09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd07), 0xcb);
        EXPECT(gbc.readMem(0xdd08), 0xaf);
        // CB AF 03B5
        gbc.setState(0x4453, 0x1e64, 0xadb0, 0xd0c, 0xdaca, 0xd530, 0x0, 0x1);
        gbc.writeMem(0x4453, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1e64);
        EXPECT(gbc.pc(), 0x4455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03B7
        gbc.setState(0x9ab5, 0x929c, 0x6c80, 0xa06d, 0xca01, 0xc6fb, 0x0, 0x1);
        gbc.writeMem(0x9ab5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x929c);
        EXPECT(gbc.pc(), 0x9ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab5), 0xcb);
        EXPECT(gbc.readMem(0x9ab6), 0xaf);
        // CB AF 03B8
        gbc.setState(0xabd4, 0xca61, 0x1530, 0xf3d1, 0x183c, 0x5c00, 0x1, 0x0);
        gbc.writeMem(0xabd4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xca61);
        EXPECT(gbc.pc(), 0xabd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabd4), 0xcb);
        EXPECT(gbc.readMem(0xabd5), 0xaf);
        // CB AF 03B9
        gbc.setState(0x4a9b, 0x3912, 0x3970, 0xa79d, 0x4eff, 0xb05e, 0x1, 0x1);
        gbc.writeMem(0x4a9b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3912);
        EXPECT(gbc.pc(), 0x4a9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03BA
        gbc.setState(0x2611, 0x9fca, 0xe7f0, 0x5534, 0x3c0f, 0xe4bc, 0x1, 0x0);
        gbc.writeMem(0x2611, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9fca);
        EXPECT(gbc.pc(), 0x2613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03BB
        gbc.setState(0x1cff, 0xc51b, 0xad10, 0xa54e, 0x1943, 0x2763, 0x1, 0x0);
        gbc.writeMem(0x1cff, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc51b);
        EXPECT(gbc.pc(), 0x1d01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03BC
        gbc.setState(0xa00f, 0xa7b6, 0x4520, 0x6673, 0xfdc6, 0xc740, 0x0, 0x1);
        gbc.writeMem(0xa00f, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa7b6);
        EXPECT(gbc.pc(), 0xa011);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa00f), 0xcb);
        EXPECT(gbc.readMem(0xa010), 0xaf);
        // CB AF 03BD
        gbc.setState(0x6ae5, 0x76a5, 0xb580, 0x5b80, 0x6bb2, 0xb470, 0x1, 0x1);
        gbc.writeMem(0x6ae5, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x76a5);
        EXPECT(gbc.pc(), 0x6ae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03BE
        gbc.setState(0x672e, 0x8650, 0x6f90, 0xa53e, 0x3951, 0xbe2, 0x0, 0x0);
        gbc.writeMem(0x672e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8650);
        EXPECT(gbc.pc(), 0x6730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03BF
        gbc.setState(0x3597, 0xb4fb, 0x7430, 0x3758, 0xf263, 0x8eab, 0x1, 0x1);
        gbc.writeMem(0x3597, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb4fb);
        EXPECT(gbc.pc(), 0x3599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03C0
        gbc.setState(0x3131, 0x7f1d, 0x8f30, 0x789e, 0x4fe8, 0x71ee, 0x1, 0x0);
        gbc.writeMem(0x3131, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7f1d);
        EXPECT(gbc.pc(), 0x3133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03C1
        gbc.setState(0x6cfd, 0x3b64, 0x86c0, 0xc061, 0x865f, 0x2372, 0x1, 0x1);
        gbc.writeMem(0x6cfd, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3b64);
        EXPECT(gbc.pc(), 0x6cff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03C2
        gbc.setState(0x6168, 0x9fb6, 0xbc10, 0x50a6, 0x8511, 0xf34, 0x0, 0x1);
        gbc.writeMem(0x6168, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9fb6);
        EXPECT(gbc.pc(), 0x616a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03C3
        gbc.setState(0xdf81, 0xab62, 0x6040, 0x1067, 0xb3e8, 0x2895, 0x0, 0x1);
        gbc.writeMem(0xdf81, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xab62);
        EXPECT(gbc.pc(), 0xdf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf81), 0xcb);
        EXPECT(gbc.readMem(0xdf82), 0xaf);
        // CB AF 03C4
        gbc.setState(0x54df, 0xb391, 0x7b80, 0x1aa4, 0xee5e, 0xf610, 0x0, 0x0);
        gbc.writeMem(0x54df, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb391);
        EXPECT(gbc.pc(), 0x54e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03C5
        gbc.setState(0x9a02, 0xb1c6, 0xe830, 0xf4a8, 0xe1c4, 0x3013, 0x1, 0x1);
        gbc.writeMem(0x9a02, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb1c6);
        EXPECT(gbc.pc(), 0x9a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a02), 0xcb);
        EXPECT(gbc.readMem(0x9a03), 0xaf);
        // CB AF 03C6
        gbc.setState(0x6f30, 0x6b89, 0x9c10, 0x4d60, 0x85d9, 0xe9b8, 0x0, 0x1);
        gbc.writeMem(0x6f30, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6b89);
        EXPECT(gbc.pc(), 0x6f32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03C7
        gbc.setState(0x1486, 0xb467, 0x9790, 0xedec, 0x1d1d, 0x7f15, 0x1, 0x0);
        gbc.writeMem(0x1486, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb467);
        EXPECT(gbc.pc(), 0x1488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03C8
        gbc.setState(0x6427, 0xa332, 0x1a90, 0x5274, 0x4ae6, 0x85cb, 0x1, 0x0);
        gbc.writeMem(0x6427, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa332);
        EXPECT(gbc.pc(), 0x6429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03C9
        gbc.setState(0xd632, 0x962b, 0x1090, 0xe7ba, 0x1d86, 0xdd01, 0x1, 0x0);
        gbc.writeMem(0xd632, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x962b);
        EXPECT(gbc.pc(), 0xd634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd632), 0xcb);
        EXPECT(gbc.readMem(0xd633), 0xaf);
        // CB AF 03CA
        gbc.setState(0xae2d, 0x5f5e, 0x8e70, 0x60b, 0xa59c, 0x1a5d, 0x0, 0x0);
        gbc.writeMem(0xae2d, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5f5e);
        EXPECT(gbc.pc(), 0xae2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae2d), 0xcb);
        EXPECT(gbc.readMem(0xae2e), 0xaf);
        // CB AF 03CC
        gbc.setState(0x8ef4, 0x899, 0x6a40, 0x778b, 0x4ee8, 0x8713, 0x0, 0x1);
        gbc.writeMem(0x8ef4, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x899);
        EXPECT(gbc.pc(), 0x8ef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ef4), 0xcb);
        EXPECT(gbc.readMem(0x8ef5), 0xaf);
        // CB AF 03CD
        gbc.setState(0x2478, 0xc747, 0xe090, 0xe3e7, 0xec77, 0x4982, 0x0, 0x0);
        gbc.writeMem(0x2478, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc747);
        EXPECT(gbc.pc(), 0x247a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03CE
        gbc.setState(0x1f25, 0xd542, 0xb3a0, 0x37bd, 0xd3a9, 0x8204, 0x0, 0x1);
        gbc.writeMem(0x1f25, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd542);
        EXPECT(gbc.pc(), 0x1f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03CF
        gbc.setState(0x8b28, 0x5fc0, 0xc620, 0xeaf4, 0x8f33, 0xd1c0, 0x1, 0x1);
        gbc.writeMem(0x8b28, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5fc0);
        EXPECT(gbc.pc(), 0x8b2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b28), 0xcb);
        EXPECT(gbc.readMem(0x8b29), 0xaf);
        // CB AF 03D0
        gbc.setState(0xc7ba, 0xe45c, 0x5cf0, 0x5d4f, 0x3ef0, 0xfa05, 0x0, 0x1);
        gbc.writeMem(0xc7ba, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe45c);
        EXPECT(gbc.pc(), 0xc7bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ba), 0xcb);
        EXPECT(gbc.readMem(0xc7bb), 0xaf);
        // CB AF 03D1
        gbc.setState(0xb7ac, 0x21f3, 0x7fb0, 0x8b3e, 0x9213, 0xbd82, 0x1, 0x0);
        gbc.writeMem(0xb7ac, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x21f3);
        EXPECT(gbc.pc(), 0xb7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ac), 0xcb);
        EXPECT(gbc.readMem(0xb7ad), 0xaf);
        // CB AF 03D2
        gbc.setState(0x1ac0, 0x911, 0xa770, 0x7c1b, 0x53ea, 0x4a46, 0x0, 0x1);
        gbc.writeMem(0x1ac0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x911);
        EXPECT(gbc.pc(), 0x1ac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03D3
        gbc.setState(0x63da, 0x6baf, 0xfad0, 0xd7c5, 0x6080, 0xc656, 0x0, 0x1);
        gbc.writeMem(0x63da, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6baf);
        EXPECT(gbc.pc(), 0x63dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03D4
        gbc.setState(0xb1b0, 0x41be, 0x150, 0x5a3, 0x69e7, 0x3e76, 0x0, 0x0);
        gbc.writeMem(0xb1b0, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x41be);
        EXPECT(gbc.pc(), 0xb1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b0), 0xcb);
        EXPECT(gbc.readMem(0xb1b1), 0xaf);
        // CB AF 03D5
        gbc.setState(0x6eda, 0x889f, 0xe20, 0x62b5, 0xf110, 0xfe8, 0x1, 0x1);
        gbc.writeMem(0x6eda, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x889f);
        EXPECT(gbc.pc(), 0x6edc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03D6
        gbc.setState(0xe274, 0x1fd, 0x2540, 0x5f69, 0xc8df, 0x52b3, 0x0, 0x1);
        gbc.writeMem(0xe274, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1fd);
        EXPECT(gbc.pc(), 0xe276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe274), 0xcb);
        EXPECT(gbc.readMem(0xe275), 0xaf);
        // CB AF 03D7
        gbc.setState(0x7b94, 0x93e4, 0xa7c0, 0x629f, 0xd444, 0x2668, 0x1, 0x0);
        gbc.writeMem(0x7b94, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x93e4);
        EXPECT(gbc.pc(), 0x7b96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03D8
        gbc.setState(0x15, 0x89fb, 0x8620, 0x8c6, 0xf0a0, 0xbc38, 0x1, 0x0);
        gbc.writeMem(0x15, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x89fb);
        EXPECT(gbc.pc(), 0x17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03D9
        gbc.setState(0x9f31, 0xa88d, 0xe900, 0x7a7c, 0xa0fc, 0x7e36, 0x0, 0x1);
        gbc.writeMem(0x9f31, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa88d);
        EXPECT(gbc.pc(), 0x9f33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f31), 0xcb);
        EXPECT(gbc.readMem(0x9f32), 0xaf);
        // CB AF 03DA
        gbc.setState(0xb44e, 0x2452, 0x6110, 0x42cc, 0xd4c3, 0xa23d, 0x1, 0x1);
        gbc.writeMem(0xb44e, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2452);
        EXPECT(gbc.pc(), 0xb450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb44e), 0xcb);
        EXPECT(gbc.readMem(0xb44f), 0xaf);
        // CB AF 03DB
        gbc.setState(0xc5fb, 0xa923, 0xb070, 0xed18, 0xb9b4, 0x1174, 0x0, 0x1);
        gbc.writeMem(0xc5fb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa923);
        EXPECT(gbc.pc(), 0xc5fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5fb), 0xcb);
        EXPECT(gbc.readMem(0xc5fc), 0xaf);
        // CB AF 03DC
        gbc.setState(0x3600, 0x8061, 0xa0e0, 0x10f, 0x3452, 0xbe18, 0x0, 0x1);
        gbc.writeMem(0x3600, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8061);
        EXPECT(gbc.pc(), 0x3602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03DD
        gbc.setState(0xbb0a, 0x433e, 0xcda0, 0x3a16, 0x4d60, 0x4bf9, 0x0, 0x1);
        gbc.writeMem(0xbb0a, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x433e);
        EXPECT(gbc.pc(), 0xbb0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb0a), 0xcb);
        EXPECT(gbc.readMem(0xbb0b), 0xaf);
        // CB AF 03DE
        gbc.setState(0x3a6b, 0x32b0, 0x6170, 0x9835, 0x44c, 0x7309, 0x0, 0x0);
        gbc.writeMem(0x3a6b, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x32b0);
        EXPECT(gbc.pc(), 0x3a6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03DF
        gbc.setState(0xb1a8, 0x2ad1, 0xf730, 0xe225, 0xd9a3, 0x7e2, 0x1, 0x1);
        gbc.writeMem(0xb1a8, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2ad1);
        EXPECT(gbc.pc(), 0xb1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1a8), 0xcb);
        EXPECT(gbc.readMem(0xb1a9), 0xaf);
        // CB AF 03E0
        gbc.setState(0x32e1, 0xcb89, 0xc920, 0x3334, 0xe91, 0x9c29, 0x0, 0x1);
        gbc.writeMem(0x32e1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcb89);
        EXPECT(gbc.pc(), 0x32e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03E1
        gbc.setState(0x80b2, 0x16e5, 0x75f0, 0x3a07, 0xec10, 0xdd39, 0x1, 0x0);
        gbc.writeMem(0x80b2, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x16e5);
        EXPECT(gbc.pc(), 0x80b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b2), 0xcb);
        EXPECT(gbc.readMem(0x80b3), 0xaf);
        // CB AF 03E2
        gbc.setState(0x8268, 0x6601, 0x93f0, 0xd477, 0x645b, 0xd13f, 0x0, 0x0);
        gbc.writeMem(0x8268, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6601);
        EXPECT(gbc.pc(), 0x826a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8268), 0xcb);
        EXPECT(gbc.readMem(0x8269), 0xaf);
        // CB AF 03E3
        gbc.setState(0x30eb, 0xd52d, 0x1da0, 0xc3a3, 0xdd7d, 0xefde, 0x0, 0x1);
        gbc.writeMem(0x30eb, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd52d);
        EXPECT(gbc.pc(), 0x30ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03E4
        gbc.setState(0x573c, 0x3168, 0xeb60, 0x27af, 0xa481, 0xdf83, 0x1, 0x1);
        gbc.writeMem(0x573c, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3168);
        EXPECT(gbc.pc(), 0x573e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB AF 03E5
        gbc.setState(0xcd21, 0xd5af, 0x45b0, 0xa5e7, 0xe26e, 0x1a3f, 0x0, 0x1);
        gbc.writeMem(0xcd21, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd5af);
        EXPECT(gbc.pc(), 0xcd23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd21), 0xcb);
        EXPECT(gbc.readMem(0xcd22), 0xaf);
        // CB AF 03E6
        gbc.setState(0x1526, 0x133c, 0xb750, 0x20ab, 0xfeac, 0x3505, 0x1, 0x0);
        gbc.writeMem(0x1526, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x133c);
        EXPECT(gbc.pc(), 0x1528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB AF 03E7
        gbc.setState(0x59c1, 0x36f8, 0x4710, 0xc2b4, 0xcdcf, 0x1c93, 0x1, 0x0);
        gbc.writeMem(0x59c1, { 0xcb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x36f8);
        EXPECT(gbc.pc(), 0x59c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
