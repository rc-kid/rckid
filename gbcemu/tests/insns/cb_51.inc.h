    TEST(gbcemu, opcode_cb_51) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 51 0000
        gbc.setState(0xa051, 0x409d, 0x71d0, 0x24a5, 0x4e10, 0xb994, 0x0, 0x1);
        gbc.writeMem(0xa051, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x409d, gbc.sp());
        EXPECT(0xa053, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa051));
        EXPECT(0x51, gbc.readMem(0xa052));
        // CB 51 0002
        gbc.setState(0x16d0, 0x8625, 0xf7e0, 0xa1d0, 0xa064, 0x7e1e, 0x1, 0x1);
        gbc.writeMem(0x16d0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x8625, gbc.sp());
        EXPECT(0x16d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0003
        gbc.setState(0x9a11, 0xef20, 0xd660, 0xdc78, 0x9b16, 0xedda, 0x1, 0x0);
        gbc.writeMem(0x9a11, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xef20, gbc.sp());
        EXPECT(0x9a13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a11));
        EXPECT(0x51, gbc.readMem(0x9a12));
        // CB 51 0004
        gbc.setState(0x515e, 0x8415, 0xe7d0, 0x48bb, 0xf640, 0xd06d, 0x0, 0x0);
        gbc.writeMem(0x515e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x8415, gbc.sp());
        EXPECT(0x5160, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0005
        gbc.setState(0x27b1, 0xb51c, 0xa5b0, 0x97bf, 0xcdd1, 0x1e2d, 0x1, 0x1);
        gbc.writeMem(0x27b1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xb51c, gbc.sp());
        EXPECT(0x27b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0006
        gbc.setState(0xb3ae, 0xa7d4, 0x8240, 0x9458, 0x25f4, 0x3803, 0x0, 0x1);
        gbc.writeMem(0xb3ae, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xa7d4, gbc.sp());
        EXPECT(0xb3b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3ae));
        EXPECT(0x51, gbc.readMem(0xb3af));
        // CB 51 0007
        gbc.setState(0x9104, 0x425b, 0x2940, 0x1842, 0xcd25, 0x4e6b, 0x0, 0x1);
        gbc.writeMem(0x9104, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x425b, gbc.sp());
        EXPECT(0x9106, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9104));
        EXPECT(0x51, gbc.readMem(0x9105));
        // CB 51 0008
        gbc.setState(0xde3d, 0xe771, 0x95a0, 0x2991, 0x8a64, 0xd1a7, 0x0, 0x1);
        gbc.writeMem(0xde3d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xe771, gbc.sp());
        EXPECT(0xde3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde3d));
        EXPECT(0x51, gbc.readMem(0xde3e));
        // CB 51 0009
        gbc.setState(0x7546, 0xae51, 0x3b60, 0x6218, 0x7911, 0x7d56, 0x1, 0x0);
        gbc.writeMem(0x7546, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xae51, gbc.sp());
        EXPECT(0x7548, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 000A
        gbc.setState(0xd556, 0x10b0, 0xcc80, 0xbaf1, 0xd064, 0xcda, 0x1, 0x1);
        gbc.writeMem(0xd556, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x10b0, gbc.sp());
        EXPECT(0xd558, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd556));
        EXPECT(0x51, gbc.readMem(0xd557));
        // CB 51 000B
        gbc.setState(0x50b6, 0x2e41, 0x4570, 0x4151, 0x89d9, 0xbf50, 0x0, 0x0);
        gbc.writeMem(0x50b6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x2e41, gbc.sp());
        EXPECT(0x50b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 000C
        gbc.setState(0x9b00, 0x686b, 0x3530, 0x7344, 0xefc1, 0x2da1, 0x0, 0x1);
        gbc.writeMem(0x9b00, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x686b, gbc.sp());
        EXPECT(0x9b02, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b00));
        EXPECT(0x51, gbc.readMem(0x9b01));
        // CB 51 000D
        gbc.setState(0x49db, 0x1610, 0x72f0, 0xa887, 0x4d8d, 0xe175, 0x0, 0x0);
        gbc.writeMem(0x49db, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x1610, gbc.sp());
        EXPECT(0x49dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 000E
        gbc.setState(0x57f5, 0xad3b, 0xa640, 0x2fe, 0x80f, 0x834e, 0x0, 0x0);
        gbc.writeMem(0x57f5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xad3b, gbc.sp());
        EXPECT(0x57f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 000F
        gbc.setState(0xc870, 0x2744, 0x130, 0x1176, 0xb58c, 0xc91c, 0x0, 0x1);
        gbc.writeMem(0xc870, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x2744, gbc.sp());
        EXPECT(0xc872, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc870));
        EXPECT(0x51, gbc.readMem(0xc871));
        // CB 51 0010
        gbc.setState(0x322c, 0x4314, 0x3230, 0xfb84, 0x52f2, 0x9b17, 0x1, 0x1);
        gbc.writeMem(0x322c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x4314, gbc.sp());
        EXPECT(0x322e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0011
        gbc.setState(0x26e3, 0xd1d1, 0x6220, 0xce06, 0x56d5, 0xa6c2, 0x1, 0x0);
        gbc.writeMem(0x26e3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xd1d1, gbc.sp());
        EXPECT(0x26e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0012
        gbc.setState(0x7510, 0x2bca, 0x4b20, 0x1413, 0x437b, 0xcb3a, 0x1, 0x1);
        gbc.writeMem(0x7510, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x2bca, gbc.sp());
        EXPECT(0x7512, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0013
        gbc.setState(0x993a, 0x2ab3, 0x6010, 0x93b8, 0xecb9, 0x1093, 0x0, 0x1);
        gbc.writeMem(0x993a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x2ab3, gbc.sp());
        EXPECT(0x993c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x993a));
        EXPECT(0x51, gbc.readMem(0x993b));
        // CB 51 0014
        gbc.setState(0x34b0, 0xb417, 0x2de0, 0x5e26, 0xa61c, 0x671a, 0x0, 0x1);
        gbc.writeMem(0x34b0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xb417, gbc.sp());
        EXPECT(0x34b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0015
        gbc.setState(0x1228, 0x4d24, 0x21d0, 0x2c94, 0xbdec, 0x35ed, 0x1, 0x0);
        gbc.writeMem(0x1228, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x4d24, gbc.sp());
        EXPECT(0x122a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0016
        gbc.setState(0x7ff8, 0xc3, 0xeef0, 0xee48, 0xe1cd, 0xb1fb, 0x0, 0x0);
        gbc.writeMem(0x7ff8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xc3, gbc.sp());
        EXPECT(0x7ffa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0017
        gbc.setState(0x67e3, 0x8fd9, 0x92e0, 0x521f, 0xf343, 0x3ae1, 0x1, 0x0);
        gbc.writeMem(0x67e3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x8fd9, gbc.sp());
        EXPECT(0x67e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0018
        gbc.setState(0x3227, 0x17e4, 0x9c50, 0x8c9, 0x34d4, 0x62ef, 0x1, 0x0);
        gbc.writeMem(0x3227, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x17e4, gbc.sp());
        EXPECT(0x3229, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0019
        gbc.setState(0xf19, 0x4a0b, 0x42b0, 0xdd1a, 0xc5e4, 0xe8d, 0x0, 0x1);
        gbc.writeMem(0xf19, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x4a0b, gbc.sp());
        EXPECT(0xf1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 001A
        gbc.setState(0x30ae, 0x14dc, 0x2670, 0x640f, 0x525d, 0x55a0, 0x1, 0x0);
        gbc.writeMem(0x30ae, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x14dc, gbc.sp());
        EXPECT(0x30b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 001B
        gbc.setState(0x7f7d, 0x360c, 0x7680, 0x6037, 0x1966, 0x96c9, 0x0, 0x0);
        gbc.writeMem(0x7f7d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x360c, gbc.sp());
        EXPECT(0x7f7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 001C
        gbc.setState(0x892a, 0x1e5b, 0xa800, 0xfaed, 0xa4c4, 0xeab5, 0x1, 0x1);
        gbc.writeMem(0x892a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x1e5b, gbc.sp());
        EXPECT(0x892c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x892a));
        EXPECT(0x51, gbc.readMem(0x892b));
        // CB 51 001D
        gbc.setState(0x47d5, 0xf152, 0xdc90, 0x66bc, 0x1b74, 0xf066, 0x0, 0x1);
        gbc.writeMem(0x47d5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xf152, gbc.sp());
        EXPECT(0x47d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 001E
        gbc.setState(0xe89f, 0x442b, 0xa2e0, 0xf4d1, 0x9c66, 0xb426, 0x1, 0x1);
        gbc.writeMem(0xe89f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x442b, gbc.sp());
        EXPECT(0xe8a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe89f));
        EXPECT(0x51, gbc.readMem(0xe8a0));
        // CB 51 001F
        gbc.setState(0xbfc7, 0x915c, 0xfae0, 0x928d, 0xddb8, 0xcd59, 0x0, 0x0);
        gbc.writeMem(0xbfc7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x915c, gbc.sp());
        EXPECT(0xbfc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfc7));
        EXPECT(0x51, gbc.readMem(0xbfc8));
        // CB 51 0020
        gbc.setState(0xabb3, 0xce80, 0x6af0, 0xc177, 0x77cf, 0x35d8, 0x0, 0x0);
        gbc.writeMem(0xabb3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xce80, gbc.sp());
        EXPECT(0xabb5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabb3));
        EXPECT(0x51, gbc.readMem(0xabb4));
        // CB 51 0022
        gbc.setState(0x7ef5, 0xe2ae, 0xd9b0, 0xe6e2, 0x9814, 0x2952, 0x0, 0x0);
        gbc.writeMem(0x7ef5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xe2ae, gbc.sp());
        EXPECT(0x7ef7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0023
        gbc.setState(0x7864, 0xf69a, 0xa5e0, 0xf3b0, 0xa29d, 0x8a30, 0x1, 0x1);
        gbc.writeMem(0x7864, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xf69a, gbc.sp());
        EXPECT(0x7866, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0024
        gbc.setState(0x465c, 0x680c, 0x6f90, 0xc34b, 0x88ed, 0xdb27, 0x1, 0x1);
        gbc.writeMem(0x465c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x680c, gbc.sp());
        EXPECT(0x465e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0026
        gbc.setState(0x9ab7, 0xeec8, 0x5c90, 0xb3d7, 0x1e30, 0x678c, 0x0, 0x1);
        gbc.writeMem(0x9ab7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xeec8, gbc.sp());
        EXPECT(0x9ab9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ab7));
        EXPECT(0x51, gbc.readMem(0x9ab8));
        // CB 51 0027
        gbc.setState(0xe143, 0x47f3, 0xd010, 0x29bc, 0xea81, 0x79e1, 0x1, 0x1);
        gbc.writeMem(0xe143, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x47f3, gbc.sp());
        EXPECT(0xe145, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe143));
        EXPECT(0x51, gbc.readMem(0xe144));
        // CB 51 0028
        gbc.setState(0xe030, 0xf06a, 0xf140, 0x4348, 0xe009, 0x9c13, 0x1, 0x0);
        gbc.writeMem(0xe030, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xf06a, gbc.sp());
        EXPECT(0xe032, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe030));
        EXPECT(0x51, gbc.readMem(0xe031));
        // CB 51 0029
        gbc.setState(0xd512, 0x1b3f, 0xa170, 0x92c3, 0x92bd, 0x2670, 0x0, 0x1);
        gbc.writeMem(0xd512, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x1b3f, gbc.sp());
        EXPECT(0xd514, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd512));
        EXPECT(0x51, gbc.readMem(0xd513));
        // CB 51 002A
        gbc.setState(0xa1f7, 0xadee, 0xd730, 0x1380, 0x1248, 0x75c7, 0x1, 0x0);
        gbc.writeMem(0xa1f7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xadee, gbc.sp());
        EXPECT(0xa1f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1f7));
        EXPECT(0x51, gbc.readMem(0xa1f8));
        // CB 51 002B
        gbc.setState(0xc8bb, 0x65c5, 0xe970, 0x72eb, 0x73bb, 0x989a, 0x0, 0x0);
        gbc.writeMem(0xc8bb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x65c5, gbc.sp());
        EXPECT(0xc8bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8bb));
        EXPECT(0x51, gbc.readMem(0xc8bc));
        // CB 51 002C
        gbc.setState(0x5e2f, 0xc133, 0x8a0, 0x7e29, 0x3aa4, 0xa3cc, 0x0, 0x1);
        gbc.writeMem(0x5e2f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xc133, gbc.sp());
        EXPECT(0x5e31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 002D
        gbc.setState(0x1eb3, 0x52b0, 0x3d30, 0x6353, 0x7248, 0xe81, 0x1, 0x0);
        gbc.writeMem(0x1eb3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x52b0, gbc.sp());
        EXPECT(0x1eb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 002E
        gbc.setState(0xdab5, 0x1e52, 0x55c0, 0xab78, 0x7d1e, 0xf3d4, 0x1, 0x0);
        gbc.writeMem(0xdab5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x1e52, gbc.sp());
        EXPECT(0xdab7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdab5));
        EXPECT(0x51, gbc.readMem(0xdab6));
        // CB 51 002F
        gbc.setState(0x4e88, 0xae5, 0x70, 0x4ef7, 0x5c0, 0x1df2, 0x0, 0x0);
        gbc.writeMem(0x4e88, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xae5, gbc.sp());
        EXPECT(0x4e8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0030
        gbc.setState(0xc9ca, 0x1475, 0x8300, 0x2d3f, 0xc744, 0xd689, 0x1, 0x1);
        gbc.writeMem(0xc9ca, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x1475, gbc.sp());
        EXPECT(0xc9cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9ca));
        EXPECT(0x51, gbc.readMem(0xc9cb));
        // CB 51 0031
        gbc.setState(0x6ce4, 0x65dc, 0x5120, 0x200e, 0x5380, 0xd642, 0x0, 0x1);
        gbc.writeMem(0x6ce4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x65dc, gbc.sp());
        EXPECT(0x6ce6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0032
        gbc.setState(0xcbce, 0xf054, 0x7810, 0x8fea, 0xb571, 0xe464, 0x0, 0x0);
        gbc.writeMem(0xcbce, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xf054, gbc.sp());
        EXPECT(0xcbd0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbce));
        EXPECT(0x51, gbc.readMem(0xcbcf));
        // CB 51 0033
        gbc.setState(0xe3b8, 0xcedc, 0xae90, 0x1d85, 0x66c3, 0xd29, 0x0, 0x0);
        gbc.writeMem(0xe3b8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xcedc, gbc.sp());
        EXPECT(0xe3ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3b8));
        EXPECT(0x51, gbc.readMem(0xe3b9));
        // CB 51 0034
        gbc.setState(0xcadc, 0x9c86, 0x9250, 0xb214, 0xdc20, 0x143e, 0x1, 0x0);
        gbc.writeMem(0xcadc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x9c86, gbc.sp());
        EXPECT(0xcade, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcadc));
        EXPECT(0x51, gbc.readMem(0xcadd));
        // CB 51 0035
        gbc.setState(0xad74, 0x2a1, 0x64c0, 0xdeb5, 0x3474, 0xae7, 0x0, 0x1);
        gbc.writeMem(0xad74, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x2a1, gbc.sp());
        EXPECT(0xad76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad74));
        EXPECT(0x51, gbc.readMem(0xad75));
        // CB 51 0036
        gbc.setState(0xc326, 0x78bf, 0x9170, 0xb65f, 0xa035, 0x25d9, 0x1, 0x0);
        gbc.writeMem(0xc326, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x78bf, gbc.sp());
        EXPECT(0xc328, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc326));
        EXPECT(0x51, gbc.readMem(0xc327));
        // CB 51 0037
        gbc.setState(0x7ba, 0xa189, 0x5c50, 0x1564, 0xf6d9, 0x6beb, 0x1, 0x0);
        gbc.writeMem(0x7ba, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xa189, gbc.sp());
        EXPECT(0x7bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0038
        gbc.setState(0x8dc4, 0x9b4c, 0xc00, 0xbcca, 0xb665, 0xb84f, 0x1, 0x1);
        gbc.writeMem(0x8dc4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x9b4c, gbc.sp());
        EXPECT(0x8dc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dc4));
        EXPECT(0x51, gbc.readMem(0x8dc5));
        // CB 51 003A
        gbc.setState(0x38d0, 0x232e, 0x77d0, 0x5535, 0xe101, 0xcd1a, 0x1, 0x1);
        gbc.writeMem(0x38d0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x232e, gbc.sp());
        EXPECT(0x38d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 003C
        gbc.setState(0x114, 0x2277, 0xc2b0, 0xfae6, 0x87fa, 0x5c4b, 0x1, 0x0);
        gbc.writeMem(0x114, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x2277, gbc.sp());
        EXPECT(0x116, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 003D
        gbc.setState(0x976b, 0xe245, 0xea80, 0x70e4, 0x45ff, 0x452b, 0x1, 0x1);
        gbc.writeMem(0x976b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xe245, gbc.sp());
        EXPECT(0x976d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x976b));
        EXPECT(0x51, gbc.readMem(0x976c));
        // CB 51 003E
        gbc.setState(0x58b8, 0xc6ee, 0x41f0, 0xe6b8, 0x7c79, 0x194, 0x0, 0x0);
        gbc.writeMem(0x58b8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xc6ee, gbc.sp());
        EXPECT(0x58ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 003F
        gbc.setState(0x830d, 0x4d40, 0x740, 0x2ff2, 0xaa2, 0x55ee, 0x0, 0x0);
        gbc.writeMem(0x830d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x4d40, gbc.sp());
        EXPECT(0x830f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x830d));
        EXPECT(0x51, gbc.readMem(0x830e));
        // CB 51 0040
        gbc.setState(0xd7c0, 0x80c8, 0x9680, 0x9a1a, 0x2b8f, 0xe652, 0x1, 0x0);
        gbc.writeMem(0xd7c0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x80c8, gbc.sp());
        EXPECT(0xd7c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7c0));
        EXPECT(0x51, gbc.readMem(0xd7c1));
        // CB 51 0041
        gbc.setState(0xaf58, 0xf5ec, 0x9640, 0xe020, 0xf2f3, 0x54ec, 0x0, 0x0);
        gbc.writeMem(0xaf58, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xf5ec, gbc.sp());
        EXPECT(0xaf5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf58));
        EXPECT(0x51, gbc.readMem(0xaf59));
        // CB 51 0042
        gbc.setState(0xb0ef, 0x2a36, 0x1dc0, 0x58e4, 0x1987, 0x1e07, 0x1, 0x1);
        gbc.writeMem(0xb0ef, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x2a36, gbc.sp());
        EXPECT(0xb0f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0ef));
        EXPECT(0x51, gbc.readMem(0xb0f0));
        // CB 51 0043
        gbc.setState(0xe01e, 0x51db, 0xeda0, 0x321c, 0x4b8, 0xbbc1, 0x1, 0x1);
        gbc.writeMem(0xe01e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x51db, gbc.sp());
        EXPECT(0xe020, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe01e));
        EXPECT(0x51, gbc.readMem(0xe01f));
        // CB 51 0044
        gbc.setState(0x8a69, 0xff2a, 0x3370, 0x88b5, 0x44a4, 0x641c, 0x0, 0x0);
        gbc.writeMem(0x8a69, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xff2a, gbc.sp());
        EXPECT(0x8a6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a69));
        EXPECT(0x51, gbc.readMem(0x8a6a));
        // CB 51 0045
        gbc.setState(0x2350, 0xd3e3, 0x3e50, 0x4573, 0xf241, 0x205b, 0x1, 0x0);
        gbc.writeMem(0x2350, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xd3e3, gbc.sp());
        EXPECT(0x2352, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0046
        gbc.setState(0x4965, 0xd9e4, 0x5fc0, 0x5bcd, 0xa71e, 0x5279, 0x1, 0x0);
        gbc.writeMem(0x4965, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xd9e4, gbc.sp());
        EXPECT(0x4967, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0047
        gbc.setState(0x8ef, 0x9b64, 0x1b10, 0x4ef5, 0x4479, 0xacfe, 0x0, 0x0);
        gbc.writeMem(0x8ef, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x9b64, gbc.sp());
        EXPECT(0x8f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0048
        gbc.setState(0xd68a, 0x380b, 0xb280, 0xb150, 0x8f6a, 0x2e66, 0x1, 0x0);
        gbc.writeMem(0xd68a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x380b, gbc.sp());
        EXPECT(0xd68c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd68a));
        EXPECT(0x51, gbc.readMem(0xd68b));
        // CB 51 0049
        gbc.setState(0xdc85, 0x9d96, 0x4930, 0xedae, 0x341f, 0xb283, 0x1, 0x1);
        gbc.writeMem(0xdc85, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x9d96, gbc.sp());
        EXPECT(0xdc87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc85));
        EXPECT(0x51, gbc.readMem(0xdc86));
        // CB 51 004A
        gbc.setState(0xbd52, 0x42da, 0x71b0, 0x8959, 0x66a2, 0xdab4, 0x0, 0x0);
        gbc.writeMem(0xbd52, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x42da, gbc.sp());
        EXPECT(0xbd54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd52));
        EXPECT(0x51, gbc.readMem(0xbd53));
        // CB 51 004B
        gbc.setState(0x201a, 0x4275, 0x4c40, 0x9425, 0xf006, 0xef7f, 0x0, 0x1);
        gbc.writeMem(0x201a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x4275, gbc.sp());
        EXPECT(0x201c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 004C
        gbc.setState(0x3f57, 0xa720, 0xd1d0, 0xf9eb, 0xc935, 0xb74d, 0x1, 0x1);
        gbc.writeMem(0x3f57, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xa720, gbc.sp());
        EXPECT(0x3f59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 004D
        gbc.setState(0xa943, 0xe45f, 0xa820, 0xb137, 0x114b, 0x4d98, 0x1, 0x0);
        gbc.writeMem(0xa943, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe45f, gbc.sp());
        EXPECT(0xa945, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa943));
        EXPECT(0x51, gbc.readMem(0xa944));
        // CB 51 004E
        gbc.setState(0x47fb, 0x2ce5, 0x6100, 0xf87c, 0xc4d5, 0xd81e, 0x0, 0x1);
        gbc.writeMem(0x47fb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x2ce5, gbc.sp());
        EXPECT(0x47fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 004F
        gbc.setState(0x9906, 0xdfb5, 0x14f0, 0x740c, 0x1fd6, 0xcbe5, 0x0, 0x0);
        gbc.writeMem(0x9906, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xdfb5, gbc.sp());
        EXPECT(0x9908, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9906));
        EXPECT(0x51, gbc.readMem(0x9907));
        // CB 51 0050
        gbc.setState(0xa26e, 0x2b3, 0x2c00, 0x6ac8, 0xbfe3, 0x2e8a, 0x1, 0x0);
        gbc.writeMem(0xa26e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x2b3, gbc.sp());
        EXPECT(0xa270, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa26e));
        EXPECT(0x51, gbc.readMem(0xa26f));
        // CB 51 0051
        gbc.setState(0xb07f, 0xcde7, 0xa340, 0xc6d2, 0xcace, 0x8e7c, 0x0, 0x0);
        gbc.writeMem(0xb07f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xcde7, gbc.sp());
        EXPECT(0xb081, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb07f));
        EXPECT(0x51, gbc.readMem(0xb080));
        // CB 51 0052
        gbc.setState(0x7c40, 0x1a10, 0x3700, 0xbe5d, 0x79d1, 0xa503, 0x0, 0x0);
        gbc.writeMem(0x7c40, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x1a10, gbc.sp());
        EXPECT(0x7c42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0053
        gbc.setState(0x67f3, 0xa88c, 0xf260, 0x630, 0x9fd7, 0x2e46, 0x0, 0x1);
        gbc.writeMem(0x67f3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xa88c, gbc.sp());
        EXPECT(0x67f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0054
        gbc.setState(0x756f, 0x1f8e, 0xd750, 0xf684, 0x3495, 0xb773, 0x0, 0x0);
        gbc.writeMem(0x756f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x1f8e, gbc.sp());
        EXPECT(0x7571, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0055
        gbc.setState(0xb60f, 0xbeb7, 0xaa70, 0x15ef, 0x952d, 0x5497, 0x0, 0x1);
        gbc.writeMem(0xb60f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xbeb7, gbc.sp());
        EXPECT(0xb611, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb60f));
        EXPECT(0x51, gbc.readMem(0xb610));
        // CB 51 0056
        gbc.setState(0x84c1, 0xd4b8, 0x7630, 0x269b, 0xe3d2, 0x92ee, 0x1, 0x0);
        gbc.writeMem(0x84c1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xd4b8, gbc.sp());
        EXPECT(0x84c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84c1));
        EXPECT(0x51, gbc.readMem(0x84c2));
        // CB 51 0057
        gbc.setState(0x3a6f, 0x5f23, 0xe1e0, 0x75c5, 0xd70d, 0xe028, 0x0, 0x0);
        gbc.writeMem(0x3a6f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x5f23, gbc.sp());
        EXPECT(0x3a71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0058
        gbc.setState(0x7957, 0x725c, 0xc090, 0x92d1, 0x1f42, 0x7d13, 0x1, 0x1);
        gbc.writeMem(0x7957, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x725c, gbc.sp());
        EXPECT(0x7959, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0059
        gbc.setState(0x1433, 0xabf9, 0x3e90, 0x7ecc, 0x78db, 0x5395, 0x0, 0x0);
        gbc.writeMem(0x1433, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xabf9, gbc.sp());
        EXPECT(0x1435, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 005A
        gbc.setState(0xecfd, 0x5d52, 0xdfc0, 0xe0cf, 0xd0b1, 0xe12, 0x0, 0x0);
        gbc.writeMem(0xecfd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x5d52, gbc.sp());
        EXPECT(0xecff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecfd));
        EXPECT(0x51, gbc.readMem(0xecfe));
        // CB 51 005B
        gbc.setState(0x8436, 0xbf5b, 0xb970, 0xed4e, 0xd055, 0x5993, 0x0, 0x0);
        gbc.writeMem(0x8436, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xbf5b, gbc.sp());
        EXPECT(0x8438, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8436));
        EXPECT(0x51, gbc.readMem(0x8437));
        // CB 51 005C
        gbc.setState(0x310a, 0x8319, 0xcad0, 0x9ad5, 0x3971, 0xc5c, 0x0, 0x0);
        gbc.writeMem(0x310a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x8319, gbc.sp());
        EXPECT(0x310c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 005D
        gbc.setState(0xb35, 0xb862, 0x8550, 0x8bfd, 0x554e, 0x273d, 0x0, 0x0);
        gbc.writeMem(0xb35, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xb862, gbc.sp());
        EXPECT(0xb37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 005F
        gbc.setState(0x4c81, 0x9a23, 0x7960, 0x2d4a, 0xc1b7, 0xe083, 0x0, 0x1);
        gbc.writeMem(0x4c81, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x9a23, gbc.sp());
        EXPECT(0x4c83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0060
        gbc.setState(0x7b09, 0x822, 0x5460, 0xedd, 0x501d, 0x85a6, 0x1, 0x1);
        gbc.writeMem(0x7b09, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x822, gbc.sp());
        EXPECT(0x7b0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0061
        gbc.setState(0x5535, 0xac5d, 0x60c0, 0x815d, 0x2d3f, 0xf36c, 0x0, 0x0);
        gbc.writeMem(0x5535, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xac5d, gbc.sp());
        EXPECT(0x5537, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0062
        gbc.setState(0x7c5a, 0x7f5c, 0x9c50, 0x59f4, 0xb85d, 0xcdfb, 0x0, 0x1);
        gbc.writeMem(0x7c5a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x7f5c, gbc.sp());
        EXPECT(0x7c5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0064
        gbc.setState(0xa7ed, 0xd20c, 0xbab0, 0x6022, 0x3332, 0x3178, 0x0, 0x0);
        gbc.writeMem(0xa7ed, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xd20c, gbc.sp());
        EXPECT(0xa7ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7ed));
        EXPECT(0x51, gbc.readMem(0xa7ee));
        // CB 51 0065
        gbc.setState(0xbf13, 0xb22c, 0x2da0, 0x282e, 0xeb2, 0x3bc9, 0x0, 0x0);
        gbc.writeMem(0xbf13, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xb22c, gbc.sp());
        EXPECT(0xbf15, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf13));
        EXPECT(0x51, gbc.readMem(0xbf14));
        // CB 51 0066
        gbc.setState(0xe9e5, 0xe7fd, 0x5a60, 0xbcf4, 0xaf27, 0x254a, 0x0, 0x1);
        gbc.writeMem(0xe9e5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xe7fd, gbc.sp());
        EXPECT(0xe9e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9e5));
        EXPECT(0x51, gbc.readMem(0xe9e6));
        // CB 51 0067
        gbc.setState(0x56c1, 0x21ad, 0xf950, 0x7bde, 0xd316, 0x9036, 0x1, 0x1);
        gbc.writeMem(0x56c1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x21ad, gbc.sp());
        EXPECT(0x56c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0068
        gbc.setState(0xe954, 0x3df6, 0x6e10, 0xa1b9, 0x9f5b, 0xb7b5, 0x1, 0x0);
        gbc.writeMem(0xe954, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x3df6, gbc.sp());
        EXPECT(0xe956, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe954));
        EXPECT(0x51, gbc.readMem(0xe955));
        // CB 51 0069
        gbc.setState(0x338c, 0xdaf0, 0x3b0, 0x9b35, 0xe364, 0x1605, 0x1, 0x0);
        gbc.writeMem(0x338c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xdaf0, gbc.sp());
        EXPECT(0x338e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 006A
        gbc.setState(0x9491, 0xcb36, 0xb5d0, 0xb73f, 0x668c, 0x4c63, 0x1, 0x1);
        gbc.writeMem(0x9491, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xcb36, gbc.sp());
        EXPECT(0x9493, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9491));
        EXPECT(0x51, gbc.readMem(0x9492));
        // CB 51 006B
        gbc.setState(0xc913, 0x9039, 0x1e80, 0x82f0, 0x9829, 0xbce0, 0x1, 0x1);
        gbc.writeMem(0xc913, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x9039, gbc.sp());
        EXPECT(0xc915, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc913));
        EXPECT(0x51, gbc.readMem(0xc914));
        // CB 51 006C
        gbc.setState(0x2c5d, 0xebbe, 0x9520, 0xa65, 0x9071, 0xb58c, 0x1, 0x1);
        gbc.writeMem(0x2c5d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xebbe, gbc.sp());
        EXPECT(0x2c5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 006D
        gbc.setState(0x3140, 0x9e23, 0xf500, 0x7554, 0xd309, 0x3b50, 0x1, 0x0);
        gbc.writeMem(0x3140, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x9e23, gbc.sp());
        EXPECT(0x3142, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 006E
        gbc.setState(0xa46d, 0x5863, 0xfb90, 0x2d18, 0xed2e, 0xc4ae, 0x1, 0x1);
        gbc.writeMem(0xa46d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x5863, gbc.sp());
        EXPECT(0xa46f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa46d));
        EXPECT(0x51, gbc.readMem(0xa46e));
        // CB 51 006F
        gbc.setState(0x591, 0x9baa, 0x23b0, 0x70ac, 0x9cc0, 0x73c5, 0x1, 0x1);
        gbc.writeMem(0x591, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x9baa, gbc.sp());
        EXPECT(0x593, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0070
        gbc.setState(0xcab0, 0x4920, 0xca00, 0x557b, 0x8940, 0xec17, 0x1, 0x0);
        gbc.writeMem(0xcab0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x4920, gbc.sp());
        EXPECT(0xcab2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcab0));
        EXPECT(0x51, gbc.readMem(0xcab1));
        // CB 51 0071
        gbc.setState(0xcfb8, 0x78ac, 0xcfd0, 0xd994, 0x64f4, 0xc771, 0x1, 0x0);
        gbc.writeMem(0xcfb8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x78ac, gbc.sp());
        EXPECT(0xcfba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfb8));
        EXPECT(0x51, gbc.readMem(0xcfb9));
        // CB 51 0072
        gbc.setState(0xacc, 0x567c, 0xd20, 0x5824, 0xc4f5, 0xcdcd, 0x1, 0x1);
        gbc.writeMem(0xacc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x567c, gbc.sp());
        EXPECT(0xace, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0074
        gbc.setState(0x45d, 0xed56, 0xfb90, 0xe1f7, 0x6ab1, 0x1590, 0x0, 0x0);
        gbc.writeMem(0x45d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xed56, gbc.sp());
        EXPECT(0x45f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0075
        gbc.setState(0x1b35, 0xafed, 0x7110, 0x2ff0, 0x20b1, 0xd3e8, 0x1, 0x1);
        gbc.writeMem(0x1b35, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xafed, gbc.sp());
        EXPECT(0x1b37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0076
        gbc.setState(0x6f33, 0x7917, 0x9100, 0x47fb, 0xd050, 0x3546, 0x0, 0x0);
        gbc.writeMem(0x6f33, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x7917, gbc.sp());
        EXPECT(0x6f35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0077
        gbc.setState(0x1fdd, 0x6480, 0x6b0, 0x169d, 0x2d8f, 0xbb1b, 0x0, 0x1);
        gbc.writeMem(0x1fdd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x6480, gbc.sp());
        EXPECT(0x1fdf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0078
        gbc.setState(0x9168, 0x2695, 0x2a0, 0xf1c9, 0xbc58, 0x151a, 0x1, 0x0);
        gbc.writeMem(0x9168, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x2695, gbc.sp());
        EXPECT(0x916a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9168));
        EXPECT(0x51, gbc.readMem(0x9169));
        // CB 51 0079
        gbc.setState(0xc3ab, 0x4453, 0xc60, 0xd0de, 0x48c7, 0x3ef, 0x1, 0x1);
        gbc.writeMem(0xc3ab, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x4453, gbc.sp());
        EXPECT(0xc3ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3ab));
        EXPECT(0x51, gbc.readMem(0xc3ac));
        // CB 51 007A
        gbc.setState(0xd71a, 0x76dc, 0x36c0, 0xc52f, 0xbfc4, 0xd1f6, 0x0, 0x1);
        gbc.writeMem(0xd71a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x76dc, gbc.sp());
        EXPECT(0xd71c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd71a));
        EXPECT(0x51, gbc.readMem(0xd71b));
        // CB 51 007B
        gbc.setState(0xa35, 0x39f, 0x7610, 0x4701, 0xf8de, 0x1a45, 0x0, 0x0);
        gbc.writeMem(0xa35, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x39f, gbc.sp());
        EXPECT(0xa37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 007C
        gbc.setState(0x8e6b, 0x6a45, 0x31b0, 0x7d04, 0xb8c2, 0x94f6, 0x1, 0x0);
        gbc.writeMem(0x8e6b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x6a45, gbc.sp());
        EXPECT(0x8e6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e6b));
        EXPECT(0x51, gbc.readMem(0x8e6c));
        // CB 51 007D
        gbc.setState(0xed1f, 0x382a, 0xb7d0, 0x62ec, 0xa81e, 0x650d, 0x0, 0x0);
        gbc.writeMem(0xed1f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x382a, gbc.sp());
        EXPECT(0xed21, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed1f));
        EXPECT(0x51, gbc.readMem(0xed20));
        // CB 51 007E
        gbc.setState(0x4557, 0x46fa, 0x70a0, 0xc4d, 0xc3f3, 0xdf46, 0x0, 0x0);
        gbc.writeMem(0x4557, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x46fa, gbc.sp());
        EXPECT(0x4559, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 007F
        gbc.setState(0x7218, 0x8473, 0x3450, 0x77d3, 0x74f6, 0xd123, 0x1, 0x0);
        gbc.writeMem(0x7218, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x8473, gbc.sp());
        EXPECT(0x721a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0080
        gbc.setState(0xc568, 0xc737, 0x6e60, 0xceba, 0xea57, 0xf06d, 0x1, 0x1);
        gbc.writeMem(0xc568, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xc737, gbc.sp());
        EXPECT(0xc56a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc568));
        EXPECT(0x51, gbc.readMem(0xc569));
        // CB 51 0081
        gbc.setState(0x81b9, 0x4525, 0x3320, 0xce4a, 0x2490, 0x432a, 0x0, 0x1);
        gbc.writeMem(0x81b9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x4525, gbc.sp());
        EXPECT(0x81bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81b9));
        EXPECT(0x51, gbc.readMem(0x81ba));
        // CB 51 0082
        gbc.setState(0xc1a, 0xb3fa, 0x8b60, 0x9c95, 0xa54, 0xdc6b, 0x1, 0x0);
        gbc.writeMem(0xc1a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xb3fa, gbc.sp());
        EXPECT(0xc1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0083
        gbc.setState(0x8917, 0xa28a, 0xf7f0, 0x1010, 0x762c, 0xb2e7, 0x1, 0x1);
        gbc.writeMem(0x8917, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xa28a, gbc.sp());
        EXPECT(0x8919, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8917));
        EXPECT(0x51, gbc.readMem(0x8918));
        // CB 51 0084
        gbc.setState(0xa47, 0xc984, 0x6280, 0x2f3a, 0xd69b, 0x852f, 0x1, 0x0);
        gbc.writeMem(0xa47, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xc984, gbc.sp());
        EXPECT(0xa49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0086
        gbc.setState(0x6a18, 0x5ce7, 0xb3f0, 0x690b, 0x6570, 0x4814, 0x0, 0x1);
        gbc.writeMem(0x6a18, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x5ce7, gbc.sp());
        EXPECT(0x6a1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0087
        gbc.setState(0x97ba, 0xd48b, 0xbd70, 0xc903, 0x180a, 0x9d67, 0x0, 0x0);
        gbc.writeMem(0x97ba, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xd48b, gbc.sp());
        EXPECT(0x97bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97ba));
        EXPECT(0x51, gbc.readMem(0x97bb));
        // CB 51 0088
        gbc.setState(0xc99b, 0x97ad, 0xca10, 0x70e4, 0x94c3, 0x9ead, 0x1, 0x1);
        gbc.writeMem(0xc99b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x97ad, gbc.sp());
        EXPECT(0xc99d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc99b));
        EXPECT(0x51, gbc.readMem(0xc99c));
        // CB 51 0089
        gbc.setState(0x71a6, 0x6b29, 0x6510, 0xb9f7, 0xbca1, 0x69ea, 0x0, 0x1);
        gbc.writeMem(0x71a6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x6b29, gbc.sp());
        EXPECT(0x71a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 008A
        gbc.setState(0xbb5a, 0x1f6f, 0xa060, 0x7ead, 0x9f8, 0x4d28, 0x1, 0x0);
        gbc.writeMem(0xbb5a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x1f6f, gbc.sp());
        EXPECT(0xbb5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb5a));
        EXPECT(0x51, gbc.readMem(0xbb5b));
        // CB 51 008B
        gbc.setState(0xb41a, 0x6bb5, 0xf980, 0xbf97, 0xeb61, 0xc2d7, 0x0, 0x0);
        gbc.writeMem(0xb41a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x6bb5, gbc.sp());
        EXPECT(0xb41c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb41a));
        EXPECT(0x51, gbc.readMem(0xb41b));
        // CB 51 008C
        gbc.setState(0x83e, 0x7f84, 0x5950, 0xb6a5, 0x4113, 0x6ca2, 0x0, 0x0);
        gbc.writeMem(0x83e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x7f84, gbc.sp());
        EXPECT(0x840, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 008D
        gbc.setState(0xde0c, 0xc778, 0x9160, 0xaeab, 0x24aa, 0x6c22, 0x0, 0x0);
        gbc.writeMem(0xde0c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xc778, gbc.sp());
        EXPECT(0xde0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde0c));
        EXPECT(0x51, gbc.readMem(0xde0d));
        // CB 51 008E
        gbc.setState(0x1631, 0x6dea, 0xb770, 0x4c5b, 0xec81, 0x36e8, 0x1, 0x0);
        gbc.writeMem(0x1631, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x6dea, gbc.sp());
        EXPECT(0x1633, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 008F
        gbc.setState(0xac4c, 0xba7e, 0xae50, 0x5c84, 0xb95f, 0xffee, 0x0, 0x0);
        gbc.writeMem(0xac4c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xba7e, gbc.sp());
        EXPECT(0xac4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac4c));
        EXPECT(0x51, gbc.readMem(0xac4d));
        // CB 51 0090
        gbc.setState(0x3f19, 0x69a7, 0x45e0, 0xa4c9, 0x728c, 0xe671, 0x0, 0x1);
        gbc.writeMem(0x3f19, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x69a7, gbc.sp());
        EXPECT(0x3f1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0091
        gbc.setState(0x9405, 0x4abc, 0x5910, 0xa08b, 0xb71f, 0x7baa, 0x1, 0x1);
        gbc.writeMem(0x9405, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x4abc, gbc.sp());
        EXPECT(0x9407, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9405));
        EXPECT(0x51, gbc.readMem(0x9406));
        // CB 51 0092
        gbc.setState(0xc1a0, 0xfd2c, 0xcd70, 0x973c, 0x2e35, 0xc435, 0x1, 0x1);
        gbc.writeMem(0xc1a0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xfd2c, gbc.sp());
        EXPECT(0xc1a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1a0));
        EXPECT(0x51, gbc.readMem(0xc1a1));
        // CB 51 0094
        gbc.setState(0x44ad, 0xbefd, 0x8100, 0x33f5, 0xa05d, 0x501f, 0x1, 0x1);
        gbc.writeMem(0x44ad, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xbefd, gbc.sp());
        EXPECT(0x44af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0095
        gbc.setState(0xb2a6, 0x6b26, 0xf670, 0xd781, 0x9b69, 0x723e, 0x0, 0x0);
        gbc.writeMem(0xb2a6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x6b26, gbc.sp());
        EXPECT(0xb2a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2a6));
        EXPECT(0x51, gbc.readMem(0xb2a7));
        // CB 51 0097
        gbc.setState(0xb9f, 0x819f, 0x9a20, 0x921d, 0x4a7b, 0x7bd, 0x1, 0x0);
        gbc.writeMem(0xb9f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x819f, gbc.sp());
        EXPECT(0xba1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0098
        gbc.setState(0xc22f, 0x90df, 0x4970, 0x9fa8, 0x1477, 0xc6c0, 0x1, 0x0);
        gbc.writeMem(0xc22f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x90df, gbc.sp());
        EXPECT(0xc231, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc22f));
        EXPECT(0x51, gbc.readMem(0xc230));
        // CB 51 0099
        gbc.setState(0xcecb, 0x40f1, 0xa640, 0x6dd8, 0x33ed, 0x4910, 0x0, 0x0);
        gbc.writeMem(0xcecb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x40f1, gbc.sp());
        EXPECT(0xcecd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcecb));
        EXPECT(0x51, gbc.readMem(0xcecc));
        // CB 51 009A
        gbc.setState(0xee0c, 0x327c, 0xc380, 0xcc88, 0x1364, 0xd281, 0x1, 0x1);
        gbc.writeMem(0xee0c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x327c, gbc.sp());
        EXPECT(0xee0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee0c));
        EXPECT(0x51, gbc.readMem(0xee0d));
        // CB 51 009B
        gbc.setState(0xb01e, 0xb6f4, 0x7500, 0x3a93, 0x7bae, 0x899a, 0x0, 0x0);
        gbc.writeMem(0xb01e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xb6f4, gbc.sp());
        EXPECT(0xb020, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb01e));
        EXPECT(0x51, gbc.readMem(0xb01f));
        // CB 51 009C
        gbc.setState(0x79e7, 0x21dc, 0xa400, 0xc754, 0xd2e7, 0xdd81, 0x0, 0x0);
        gbc.writeMem(0x79e7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x21dc, gbc.sp());
        EXPECT(0x79e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 009D
        gbc.setState(0x66ac, 0xde5, 0xf4d0, 0xe56d, 0x2903, 0x6622, 0x0, 0x1);
        gbc.writeMem(0x66ac, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xde5, gbc.sp());
        EXPECT(0x66ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 009E
        gbc.setState(0x1b31, 0x9385, 0x5510, 0x1a7, 0x9a5d, 0x9982, 0x1, 0x0);
        gbc.writeMem(0x1b31, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x9385, gbc.sp());
        EXPECT(0x1b33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 009F
        gbc.setState(0x710d, 0x5771, 0x27f0, 0x48e8, 0x11c9, 0x1576, 0x0, 0x0);
        gbc.writeMem(0x710d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x5771, gbc.sp());
        EXPECT(0x710f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00A0
        gbc.setState(0xd518, 0x2c4c, 0x7280, 0x5582, 0xb44a, 0x6857, 0x0, 0x1);
        gbc.writeMem(0xd518, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x2c4c, gbc.sp());
        EXPECT(0xd51a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd518));
        EXPECT(0x51, gbc.readMem(0xd519));
        // CB 51 00A1
        gbc.setState(0xa0ad, 0x888a, 0xb900, 0x5bd0, 0x3363, 0x927f, 0x1, 0x0);
        gbc.writeMem(0xa0ad, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x888a, gbc.sp());
        EXPECT(0xa0af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0ad));
        EXPECT(0x51, gbc.readMem(0xa0ae));
        // CB 51 00A2
        gbc.setState(0xc7c4, 0x4582, 0x3370, 0xbb41, 0x8483, 0xdbeb, 0x1, 0x1);
        gbc.writeMem(0xc7c4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x4582, gbc.sp());
        EXPECT(0xc7c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7c4));
        EXPECT(0x51, gbc.readMem(0xc7c5));
        // CB 51 00A3
        gbc.setState(0xdf49, 0x134c, 0xf490, 0x9afb, 0xeedd, 0x338b, 0x1, 0x0);
        gbc.writeMem(0xdf49, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x134c, gbc.sp());
        EXPECT(0xdf4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf49));
        EXPECT(0x51, gbc.readMem(0xdf4a));
        // CB 51 00A4
        gbc.setState(0xcd3f, 0xdfe4, 0x8320, 0xa07, 0xadb9, 0xae0d, 0x1, 0x1);
        gbc.writeMem(0xcd3f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xdfe4, gbc.sp());
        EXPECT(0xcd41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd3f));
        EXPECT(0x51, gbc.readMem(0xcd40));
        // CB 51 00A5
        gbc.setState(0x34c8, 0x2b87, 0xd100, 0x604a, 0xe871, 0x6d5f, 0x0, 0x0);
        gbc.writeMem(0x34c8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x2b87, gbc.sp());
        EXPECT(0x34ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00A6
        gbc.setState(0x740c, 0x7848, 0xafb0, 0xc9ba, 0xf008, 0x16e8, 0x1, 0x1);
        gbc.writeMem(0x740c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x7848, gbc.sp());
        EXPECT(0x740e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00A7
        gbc.setState(0xb604, 0xbcd4, 0xde20, 0x2342, 0x12b2, 0xb484, 0x1, 0x0);
        gbc.writeMem(0xb604, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xbcd4, gbc.sp());
        EXPECT(0xb606, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb604));
        EXPECT(0x51, gbc.readMem(0xb605));
        // CB 51 00A8
        gbc.setState(0xc696, 0xd8ea, 0x1220, 0x60b3, 0xba54, 0x4856, 0x0, 0x1);
        gbc.writeMem(0xc696, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xd8ea, gbc.sp());
        EXPECT(0xc698, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc696));
        EXPECT(0x51, gbc.readMem(0xc697));
        // CB 51 00A9
        gbc.setState(0xc9f0, 0xff6e, 0x79d0, 0x4f1b, 0xb3c5, 0x2b82, 0x0, 0x0);
        gbc.writeMem(0xc9f0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xff6e, gbc.sp());
        EXPECT(0xc9f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9f0));
        EXPECT(0x51, gbc.readMem(0xc9f1));
        // CB 51 00AA
        gbc.setState(0x3a88, 0x548b, 0xcaf0, 0xfc2f, 0xf781, 0xef53, 0x0, 0x0);
        gbc.writeMem(0x3a88, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x548b, gbc.sp());
        EXPECT(0x3a8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00AB
        gbc.setState(0x908a, 0xf63e, 0xd950, 0x68d6, 0xa3de, 0x4c82, 0x0, 0x0);
        gbc.writeMem(0x908a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xf63e, gbc.sp());
        EXPECT(0x908c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x908a));
        EXPECT(0x51, gbc.readMem(0x908b));
        // CB 51 00AC
        gbc.setState(0xa371, 0x8cb0, 0x6790, 0xc976, 0x417b, 0xcb5b, 0x1, 0x0);
        gbc.writeMem(0xa371, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x8cb0, gbc.sp());
        EXPECT(0xa373, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa371));
        EXPECT(0x51, gbc.readMem(0xa372));
        // CB 51 00AD
        gbc.setState(0xc6af, 0xd301, 0xfa90, 0xb2a7, 0xbe9b, 0x220d, 0x0, 0x0);
        gbc.writeMem(0xc6af, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xd301, gbc.sp());
        EXPECT(0xc6b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6af));
        EXPECT(0x51, gbc.readMem(0xc6b0));
        // CB 51 00AE
        gbc.setState(0x814d, 0x1070, 0x9720, 0x30c8, 0xc15d, 0x2124, 0x1, 0x0);
        gbc.writeMem(0x814d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x1070, gbc.sp());
        EXPECT(0x814f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x814d));
        EXPECT(0x51, gbc.readMem(0x814e));
        // CB 51 00AF
        gbc.setState(0x15f2, 0x8a81, 0xfdb0, 0x5a4, 0x218d, 0xdf8e, 0x0, 0x0);
        gbc.writeMem(0x15f2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x8a81, gbc.sp());
        EXPECT(0x15f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00B0
        gbc.setState(0xe972, 0x444d, 0xd210, 0x4d9e, 0xeb7c, 0xd226, 0x1, 0x0);
        gbc.writeMem(0xe972, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x444d, gbc.sp());
        EXPECT(0xe974, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe972));
        EXPECT(0x51, gbc.readMem(0xe973));
        // CB 51 00B1
        gbc.setState(0x1313, 0x4b44, 0x5e10, 0xc2e, 0x5a60, 0x730d, 0x0, 0x0);
        gbc.writeMem(0x1313, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x4b44, gbc.sp());
        EXPECT(0x1315, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00B2
        gbc.setState(0xdeba, 0xae07, 0xcbe0, 0x1107, 0xe87, 0x5759, 0x0, 0x1);
        gbc.writeMem(0xdeba, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xae07, gbc.sp());
        EXPECT(0xdebc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdeba));
        EXPECT(0x51, gbc.readMem(0xdebb));
        // CB 51 00B3
        gbc.setState(0x4a56, 0xff9, 0x13e0, 0x4af9, 0x1b9e, 0x2a68, 0x0, 0x0);
        gbc.writeMem(0x4a56, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xff9, gbc.sp());
        EXPECT(0x4a58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00B4
        gbc.setState(0xb259, 0x1c41, 0xd880, 0xb82e, 0x9415, 0x2347, 0x1, 0x0);
        gbc.writeMem(0xb259, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x1c41, gbc.sp());
        EXPECT(0xb25b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb259));
        EXPECT(0x51, gbc.readMem(0xb25a));
        // CB 51 00B5
        gbc.setState(0xe59f, 0xb9f5, 0x5960, 0xcf97, 0x4a28, 0x4826, 0x0, 0x1);
        gbc.writeMem(0xe59f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xb9f5, gbc.sp());
        EXPECT(0xe5a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe59f));
        EXPECT(0x51, gbc.readMem(0xe5a0));
        // CB 51 00B6
        gbc.setState(0xb09, 0x3b6, 0xe730, 0x5b7b, 0x6045, 0xc6dd, 0x0, 0x0);
        gbc.writeMem(0xb09, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x3b6, gbc.sp());
        EXPECT(0xb0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00B7
        gbc.setState(0xdaad, 0x2082, 0x7440, 0x1b50, 0x5c14, 0x3560, 0x0, 0x1);
        gbc.writeMem(0xdaad, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x2082, gbc.sp());
        EXPECT(0xdaaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaad));
        EXPECT(0x51, gbc.readMem(0xdaae));
        // CB 51 00B8
        gbc.setState(0x4015, 0x987, 0x9520, 0xbd53, 0xc3c4, 0x10ff, 0x1, 0x1);
        gbc.writeMem(0x4015, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x987, gbc.sp());
        EXPECT(0x4017, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00B9
        gbc.setState(0xb29d, 0xf521, 0x6a10, 0x9857, 0x8878, 0x746d, 0x1, 0x0);
        gbc.writeMem(0xb29d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xf521, gbc.sp());
        EXPECT(0xb29f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb29d));
        EXPECT(0x51, gbc.readMem(0xb29e));
        // CB 51 00BA
        gbc.setState(0xb076, 0xcde0, 0xb870, 0xbde3, 0x6ef7, 0xce99, 0x0, 0x0);
        gbc.writeMem(0xb076, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xcde0, gbc.sp());
        EXPECT(0xb078, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb076));
        EXPECT(0x51, gbc.readMem(0xb077));
        // CB 51 00BB
        gbc.setState(0x52a7, 0xa122, 0xce00, 0x335, 0xa247, 0x7522, 0x1, 0x0);
        gbc.writeMem(0x52a7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xa122, gbc.sp());
        EXPECT(0x52a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00BC
        gbc.setState(0x9a78, 0x3523, 0xc460, 0x3b7e, 0x654e, 0xdc0f, 0x1, 0x1);
        gbc.writeMem(0x9a78, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x3523, gbc.sp());
        EXPECT(0x9a7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a78));
        EXPECT(0x51, gbc.readMem(0x9a79));
        // CB 51 00BD
        gbc.setState(0xca90, 0x8d6a, 0x5210, 0x584c, 0x7c5d, 0xe2d2, 0x0, 0x1);
        gbc.writeMem(0xca90, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x8d6a, gbc.sp());
        EXPECT(0xca92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca90));
        EXPECT(0x51, gbc.readMem(0xca91));
        // CB 51 00BE
        gbc.setState(0x4b73, 0xae51, 0xa980, 0xef37, 0xb350, 0xd28c, 0x0, 0x1);
        gbc.writeMem(0x4b73, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xae51, gbc.sp());
        EXPECT(0x4b75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00BF
        gbc.setState(0x9f7b, 0x3368, 0x8f0, 0xb978, 0x1ac3, 0x4284, 0x0, 0x1);
        gbc.writeMem(0x9f7b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x3368, gbc.sp());
        EXPECT(0x9f7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f7b));
        EXPECT(0x51, gbc.readMem(0x9f7c));
        // CB 51 00C0
        gbc.setState(0x5ec3, 0x5094, 0x5510, 0x256c, 0x5c1c, 0x779b, 0x0, 0x1);
        gbc.writeMem(0x5ec3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x5094, gbc.sp());
        EXPECT(0x5ec5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00C1
        gbc.setState(0x6bc6, 0x8678, 0x7250, 0x70fc, 0x72fd, 0x3156, 0x1, 0x0);
        gbc.writeMem(0x6bc6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x8678, gbc.sp());
        EXPECT(0x6bc8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00C2
        gbc.setState(0x9735, 0x6938, 0x8b30, 0x25e7, 0x811c, 0x34f7, 0x0, 0x0);
        gbc.writeMem(0x9735, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x6938, gbc.sp());
        EXPECT(0x9737, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9735));
        EXPECT(0x51, gbc.readMem(0x9736));
        // CB 51 00C3
        gbc.setState(0xc2dc, 0x317a, 0x5060, 0xc5cf, 0x9838, 0x43d4, 0x0, 0x1);
        gbc.writeMem(0xc2dc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x317a, gbc.sp());
        EXPECT(0xc2de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2dc));
        EXPECT(0x51, gbc.readMem(0xc2dd));
        // CB 51 00C4
        gbc.setState(0x263c, 0xd323, 0xbcc0, 0xe276, 0x357f, 0xbe86, 0x0, 0x0);
        gbc.writeMem(0x263c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xd323, gbc.sp());
        EXPECT(0x263e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00C5
        gbc.setState(0x9a14, 0x9773, 0x6760, 0xb285, 0x8c8f, 0xb367, 0x1, 0x0);
        gbc.writeMem(0x9a14, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x9773, gbc.sp());
        EXPECT(0x9a16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a14));
        EXPECT(0x51, gbc.readMem(0x9a15));
        // CB 51 00C6
        gbc.setState(0x2b67, 0xa588, 0x4e30, 0xdff7, 0x6ea, 0xb0c, 0x0, 0x0);
        gbc.writeMem(0x2b67, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xa588, gbc.sp());
        EXPECT(0x2b69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00C7
        gbc.setState(0x6930, 0x1d61, 0x3220, 0xcd7b, 0x669c, 0xb027, 0x0, 0x1);
        gbc.writeMem(0x6930, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x1d61, gbc.sp());
        EXPECT(0x6932, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00C8
        gbc.setState(0x9b30, 0xbcfe, 0x7f40, 0xa629, 0x92d0, 0xaf48, 0x1, 0x1);
        gbc.writeMem(0x9b30, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xbcfe, gbc.sp());
        EXPECT(0x9b32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b30));
        EXPECT(0x51, gbc.readMem(0x9b31));
        // CB 51 00C9
        gbc.setState(0x1296, 0x76a2, 0xf2f0, 0xe5cf, 0x53f6, 0xbe4e, 0x0, 0x1);
        gbc.writeMem(0x1296, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x76a2, gbc.sp());
        EXPECT(0x1298, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00CA
        gbc.setState(0xa41c, 0x5f03, 0xeaa0, 0x176b, 0xdd73, 0xd463, 0x1, 0x0);
        gbc.writeMem(0xa41c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x5f03, gbc.sp());
        EXPECT(0xa41e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa41c));
        EXPECT(0x51, gbc.readMem(0xa41d));
        // CB 51 00CB
        gbc.setState(0xd8b3, 0x2485, 0xd740, 0x6c7f, 0xc0e7, 0x1d8d, 0x1, 0x1);
        gbc.writeMem(0xd8b3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x2485, gbc.sp());
        EXPECT(0xd8b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8b3));
        EXPECT(0x51, gbc.readMem(0xd8b4));
        // CB 51 00CC
        gbc.setState(0x4689, 0x7289, 0x2460, 0xbbc9, 0x72d5, 0x8fe3, 0x0, 0x0);
        gbc.writeMem(0x4689, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x7289, gbc.sp());
        EXPECT(0x468b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00CD
        gbc.setState(0x983a, 0xdfcf, 0xe340, 0xa3e7, 0x95eb, 0x8250, 0x1, 0x0);
        gbc.writeMem(0x983a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xdfcf, gbc.sp());
        EXPECT(0x983c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x983a));
        EXPECT(0x51, gbc.readMem(0x983b));
        // CB 51 00CE
        gbc.setState(0xe974, 0xd7f5, 0xa1d0, 0xf48a, 0xcd1d, 0x4892, 0x0, 0x1);
        gbc.writeMem(0xe974, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xd7f5, gbc.sp());
        EXPECT(0xe976, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe974));
        EXPECT(0x51, gbc.readMem(0xe975));
        // CB 51 00CF
        gbc.setState(0x8f62, 0x6fcf, 0x5c0, 0xdc5e, 0x3da3, 0x9b09, 0x1, 0x1);
        gbc.writeMem(0x8f62, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x6fcf, gbc.sp());
        EXPECT(0x8f64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f62));
        EXPECT(0x51, gbc.readMem(0x8f63));
        // CB 51 00D0
        gbc.setState(0xaf67, 0x6cfc, 0x1020, 0x42a5, 0x27ad, 0x6970, 0x0, 0x1);
        gbc.writeMem(0xaf67, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x6cfc, gbc.sp());
        EXPECT(0xaf69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf67));
        EXPECT(0x51, gbc.readMem(0xaf68));
        // CB 51 00D1
        gbc.setState(0x6137, 0x2469, 0x9760, 0xfed3, 0xe0e7, 0x6edf, 0x0, 0x0);
        gbc.writeMem(0x6137, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x2469, gbc.sp());
        EXPECT(0x6139, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00D2
        gbc.setState(0x2cb1, 0x9c4e, 0x2650, 0x72d7, 0xd7da, 0xe911, 0x0, 0x0);
        gbc.writeMem(0x2cb1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x9c4e, gbc.sp());
        EXPECT(0x2cb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00D3
        gbc.setState(0x4b8c, 0x6e42, 0x3b90, 0xacf0, 0x9728, 0x3b56, 0x0, 0x0);
        gbc.writeMem(0x4b8c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x6e42, gbc.sp());
        EXPECT(0x4b8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00D4
        gbc.setState(0xa847, 0xa846, 0x3970, 0xa7c9, 0x2176, 0x584c, 0x1, 0x1);
        gbc.writeMem(0xa847, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xa846, gbc.sp());
        EXPECT(0xa849, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa847));
        EXPECT(0x51, gbc.readMem(0xa848));
        // CB 51 00D5
        gbc.setState(0xbd5, 0x90bb, 0xc480, 0x67c5, 0x11e7, 0x20a0, 0x0, 0x1);
        gbc.writeMem(0xbd5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x90bb, gbc.sp());
        EXPECT(0xbd7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00D6
        gbc.setState(0x3899, 0x9842, 0x510, 0x7d9, 0x72d9, 0x1834, 0x0, 0x0);
        gbc.writeMem(0x3899, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x9842, gbc.sp());
        EXPECT(0x389b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00D7
        gbc.setState(0x8ec1, 0x61c2, 0x6340, 0x3ba3, 0xee20, 0xb724, 0x1, 0x0);
        gbc.writeMem(0x8ec1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x61c2, gbc.sp());
        EXPECT(0x8ec3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ec1));
        EXPECT(0x51, gbc.readMem(0x8ec2));
        // CB 51 00D8
        gbc.setState(0x5f1f, 0x4c77, 0x42f0, 0x26e4, 0xcd7f, 0xddd0, 0x1, 0x1);
        gbc.writeMem(0x5f1f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x4c77, gbc.sp());
        EXPECT(0x5f21, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00D9
        gbc.setState(0x7edc, 0xecaa, 0x3830, 0xb343, 0x1535, 0x80e3, 0x0, 0x1);
        gbc.writeMem(0x7edc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xecaa, gbc.sp());
        EXPECT(0x7ede, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00DA
        gbc.setState(0xdcd3, 0xd95c, 0xa5a0, 0xb48, 0xb618, 0x5585, 0x1, 0x1);
        gbc.writeMem(0xdcd3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xd95c, gbc.sp());
        EXPECT(0xdcd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcd3));
        EXPECT(0x51, gbc.readMem(0xdcd4));
        // CB 51 00DB
        gbc.setState(0x903e, 0xf027, 0xb720, 0xd748, 0xfdf1, 0x91f9, 0x1, 0x0);
        gbc.writeMem(0x903e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xf027, gbc.sp());
        EXPECT(0x9040, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x903e));
        EXPECT(0x51, gbc.readMem(0x903f));
        // CB 51 00DC
        gbc.setState(0x6d68, 0xf9ec, 0xaa30, 0x11a2, 0xde18, 0xeebb, 0x1, 0x1);
        gbc.writeMem(0x6d68, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xf9ec, gbc.sp());
        EXPECT(0x6d6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00DD
        gbc.setState(0x602d, 0x22c9, 0x9b60, 0x5ed0, 0x1a8f, 0x2983, 0x1, 0x1);
        gbc.writeMem(0x602d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x22c9, gbc.sp());
        EXPECT(0x602f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00DE
        gbc.setState(0x9e6f, 0x9db9, 0x47e0, 0x77be, 0x1d0f, 0xfb3a, 0x0, 0x0);
        gbc.writeMem(0x9e6f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x9db9, gbc.sp());
        EXPECT(0x9e71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e6f));
        EXPECT(0x51, gbc.readMem(0x9e70));
        // CB 51 00DF
        gbc.setState(0x542c, 0x229f, 0x8ea0, 0x53d0, 0xb999, 0xf952, 0x0, 0x1);
        gbc.writeMem(0x542c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x229f, gbc.sp());
        EXPECT(0x542e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00E0
        gbc.setState(0x498f, 0xd1be, 0x2140, 0xa53d, 0xf331, 0x2a53, 0x1, 0x0);
        gbc.writeMem(0x498f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xd1be, gbc.sp());
        EXPECT(0x4991, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00E1
        gbc.setState(0x1431, 0xfeda, 0xf670, 0x4725, 0x1619, 0x71d3, 0x0, 0x1);
        gbc.writeMem(0x1431, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xfeda, gbc.sp());
        EXPECT(0x1433, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00E2
        gbc.setState(0xeaaa, 0xaf05, 0xddc0, 0x8b17, 0xcebe, 0x294e, 0x1, 0x1);
        gbc.writeMem(0xeaaa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xaf05, gbc.sp());
        EXPECT(0xeaac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaaa));
        EXPECT(0x51, gbc.readMem(0xeaab));
        // CB 51 00E3
        gbc.setState(0x350c, 0x13b1, 0xd890, 0x5fbc, 0xbb48, 0xf6fb, 0x1, 0x1);
        gbc.writeMem(0x350c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x13b1, gbc.sp());
        EXPECT(0x350e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00E4
        gbc.setState(0x2724, 0x62c3, 0xc520, 0x1c60, 0x673f, 0x7c6e, 0x0, 0x1);
        gbc.writeMem(0x2724, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x62c3, gbc.sp());
        EXPECT(0x2726, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00E5
        gbc.setState(0xa403, 0xd27d, 0x3a00, 0xd7f, 0x2a16, 0x9a8c, 0x0, 0x1);
        gbc.writeMem(0xa403, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xd27d, gbc.sp());
        EXPECT(0xa405, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa403));
        EXPECT(0x51, gbc.readMem(0xa404));
        // CB 51 00E6
        gbc.setState(0x7b85, 0x1eb5, 0xd9e0, 0xf2f5, 0x32d2, 0x161, 0x0, 0x0);
        gbc.writeMem(0x7b85, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x1eb5, gbc.sp());
        EXPECT(0x7b87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00E7
        gbc.setState(0x63c5, 0x436d, 0x97b0, 0xd2c6, 0x979f, 0xd1a3, 0x0, 0x1);
        gbc.writeMem(0x63c5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x436d, gbc.sp());
        EXPECT(0x63c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00E8
        gbc.setState(0x90a8, 0x6771, 0x1bf0, 0x236, 0xe479, 0xa54c, 0x1, 0x1);
        gbc.writeMem(0x90a8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x6771, gbc.sp());
        EXPECT(0x90aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90a8));
        EXPECT(0x51, gbc.readMem(0x90a9));
        // CB 51 00E9
        gbc.setState(0x33fb, 0x90bc, 0xa4e0, 0xf178, 0x5416, 0xbfed, 0x1, 0x0);
        gbc.writeMem(0x33fb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x90bc, gbc.sp());
        EXPECT(0x33fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00EA
        gbc.setState(0x6f16, 0xd204, 0x2e90, 0xa9b6, 0x859e, 0x5b9c, 0x1, 0x0);
        gbc.writeMem(0x6f16, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xd204, gbc.sp());
        EXPECT(0x6f18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00EB
        gbc.setState(0xc6e2, 0xa931, 0xa890, 0x9c5b, 0x4e14, 0xf094, 0x0, 0x0);
        gbc.writeMem(0xc6e2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xa931, gbc.sp());
        EXPECT(0xc6e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6e2));
        EXPECT(0x51, gbc.readMem(0xc6e3));
        // CB 51 00EC
        gbc.setState(0x8854, 0x79b5, 0xce10, 0xed1c, 0x20ff, 0x4b9, 0x1, 0x0);
        gbc.writeMem(0x8854, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x79b5, gbc.sp());
        EXPECT(0x8856, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8854));
        EXPECT(0x51, gbc.readMem(0x8855));
        // CB 51 00ED
        gbc.setState(0x116c, 0x8627, 0x54c0, 0x964a, 0xd87c, 0x84a, 0x0, 0x0);
        gbc.writeMem(0x116c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x8627, gbc.sp());
        EXPECT(0x116e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00EE
        gbc.setState(0x87e1, 0x58b2, 0x8320, 0xc243, 0x53f7, 0x9e9e, 0x1, 0x0);
        gbc.writeMem(0x87e1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x58b2, gbc.sp());
        EXPECT(0x87e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87e1));
        EXPECT(0x51, gbc.readMem(0x87e2));
        // CB 51 00EF
        gbc.setState(0xb951, 0xa713, 0x8900, 0x9877, 0x1d06, 0x12d2, 0x1, 0x0);
        gbc.writeMem(0xb951, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xa713, gbc.sp());
        EXPECT(0xb953, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb951));
        EXPECT(0x51, gbc.readMem(0xb952));
        // CB 51 00F0
        gbc.setState(0xa231, 0x761f, 0xf680, 0xb69f, 0xd418, 0xecd3, 0x0, 0x0);
        gbc.writeMem(0xa231, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x761f, gbc.sp());
        EXPECT(0xa233, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa231));
        EXPECT(0x51, gbc.readMem(0xa232));
        // CB 51 00F1
        gbc.setState(0x8fa7, 0x1c58, 0x5a30, 0xc912, 0xe33f, 0xca15, 0x1, 0x0);
        gbc.writeMem(0x8fa7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x1c58, gbc.sp());
        EXPECT(0x8fa9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fa7));
        EXPECT(0x51, gbc.readMem(0x8fa8));
        // CB 51 00F2
        gbc.setState(0xd79e, 0xfca6, 0x8aa0, 0x478c, 0x88a, 0x9ab6, 0x1, 0x0);
        gbc.writeMem(0xd79e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xfca6, gbc.sp());
        EXPECT(0xd7a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd79e));
        EXPECT(0x51, gbc.readMem(0xd79f));
        // CB 51 00F3
        gbc.setState(0x56ed, 0xabb7, 0xba00, 0xa84e, 0xaf39, 0xd6e4, 0x1, 0x0);
        gbc.writeMem(0x56ed, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xabb7, gbc.sp());
        EXPECT(0x56ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00F4
        gbc.setState(0x1336, 0xa5fb, 0xabc0, 0x7e4c, 0x62b6, 0x3dc3, 0x1, 0x1);
        gbc.writeMem(0x1336, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xa5fb, gbc.sp());
        EXPECT(0x1338, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00F5
        gbc.setState(0x55b3, 0x8a1, 0x3f80, 0xac57, 0x744b, 0x8e03, 0x1, 0x0);
        gbc.writeMem(0x55b3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x8a1, gbc.sp());
        EXPECT(0x55b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00F6
        gbc.setState(0x5c67, 0x8760, 0xbb0, 0x222f, 0x483, 0x2a7e, 0x1, 0x0);
        gbc.writeMem(0x5c67, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x8760, gbc.sp());
        EXPECT(0x5c69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00F7
        gbc.setState(0x20b9, 0xfea0, 0xf1d0, 0x62ba, 0x119, 0x8892, 0x1, 0x1);
        gbc.writeMem(0x20b9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xfea0, gbc.sp());
        EXPECT(0x20bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00F8
        gbc.setState(0x88c9, 0xcef9, 0x8ad0, 0xbd50, 0x873c, 0xc3a5, 0x1, 0x0);
        gbc.writeMem(0x88c9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xcef9, gbc.sp());
        EXPECT(0x88cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88c9));
        EXPECT(0x51, gbc.readMem(0x88ca));
        // CB 51 00F9
        gbc.setState(0xed3e, 0x7bff, 0xa350, 0xb0cd, 0xc387, 0xb1f4, 0x0, 0x1);
        gbc.writeMem(0xed3e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x7bff, gbc.sp());
        EXPECT(0xed40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed3e));
        EXPECT(0x51, gbc.readMem(0xed3f));
        // CB 51 00FA
        gbc.setState(0x7598, 0xf58a, 0xf9d0, 0xf393, 0xb81e, 0xe6a6, 0x1, 0x0);
        gbc.writeMem(0x7598, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xf58a, gbc.sp());
        EXPECT(0x759a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 00FB
        gbc.setState(0x924, 0x6b1f, 0x1b80, 0x14dd, 0x6fda, 0xac0, 0x0, 0x1);
        gbc.writeMem(0x924, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x6b1f, gbc.sp());
        EXPECT(0x926, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00FC
        gbc.setState(0x471d, 0x391d, 0x73a0, 0x990c, 0xfc6f, 0x4979, 0x0, 0x1);
        gbc.writeMem(0x471d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x391d, gbc.sp());
        EXPECT(0x471f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00FD
        gbc.setState(0xba9e, 0xae2, 0xd290, 0xd9b4, 0xdff4, 0x3648, 0x1, 0x0);
        gbc.writeMem(0xba9e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xae2, gbc.sp());
        EXPECT(0xbaa0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba9e));
        EXPECT(0x51, gbc.readMem(0xba9f));
        // CB 51 00FE
        gbc.setState(0x5fdc, 0x8445, 0x8420, 0x9d51, 0x1cf1, 0xe0eb, 0x1, 0x1);
        gbc.writeMem(0x5fdc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x8445, gbc.sp());
        EXPECT(0x5fde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 00FF
        gbc.setState(0xd36e, 0x87e6, 0xb700, 0xfb7e, 0xd5fc, 0x5031, 0x1, 0x0);
        gbc.writeMem(0xd36e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x87e6, gbc.sp());
        EXPECT(0xd370, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd36e));
        EXPECT(0x51, gbc.readMem(0xd36f));
        // CB 51 0100
        gbc.setState(0x8186, 0x4777, 0xc290, 0xd679, 0x6299, 0xa654, 0x0, 0x0);
        gbc.writeMem(0x8186, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x4777, gbc.sp());
        EXPECT(0x8188, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8186));
        EXPECT(0x51, gbc.readMem(0x8187));
        // CB 51 0101
        gbc.setState(0x60fd, 0x6fc9, 0xe2c0, 0xe9ae, 0xaa77, 0x21d2, 0x1, 0x1);
        gbc.writeMem(0x60fd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x6fc9, gbc.sp());
        EXPECT(0x60ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0102
        gbc.setState(0x744e, 0xaa30, 0x1610, 0xba77, 0x3651, 0x8f2b, 0x0, 0x0);
        gbc.writeMem(0x744e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xaa30, gbc.sp());
        EXPECT(0x7450, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0103
        gbc.setState(0x96d5, 0x2203, 0x6d0, 0x1be7, 0xd775, 0xe352, 0x0, 0x0);
        gbc.writeMem(0x96d5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x2203, gbc.sp());
        EXPECT(0x96d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96d5));
        EXPECT(0x51, gbc.readMem(0x96d6));
        // CB 51 0104
        gbc.setState(0x286c, 0x3af4, 0xd100, 0x1ba6, 0x2e36, 0x93aa, 0x1, 0x1);
        gbc.writeMem(0x286c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x3af4, gbc.sp());
        EXPECT(0x286e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0105
        gbc.setState(0xef22, 0x88a, 0xc770, 0x78cd, 0x8f3a, 0x8e91, 0x1, 0x0);
        gbc.writeMem(0xef22, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x88a, gbc.sp());
        EXPECT(0xef24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef22));
        EXPECT(0x51, gbc.readMem(0xef23));
        // CB 51 0106
        gbc.setState(0x6549, 0xe992, 0x1d0, 0x831b, 0x1dfb, 0xbbd3, 0x0, 0x1);
        gbc.writeMem(0x6549, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xe992, gbc.sp());
        EXPECT(0x654b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0107
        gbc.setState(0x842f, 0x457d, 0xf300, 0x8614, 0x459b, 0xaa6c, 0x1, 0x1);
        gbc.writeMem(0x842f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x457d, gbc.sp());
        EXPECT(0x8431, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x842f));
        EXPECT(0x51, gbc.readMem(0x8430));
        // CB 51 0108
        gbc.setState(0x95e1, 0xee7d, 0x8f60, 0x54b3, 0xca3d, 0xe25d, 0x0, 0x0);
        gbc.writeMem(0x95e1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xee7d, gbc.sp());
        EXPECT(0x95e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95e1));
        EXPECT(0x51, gbc.readMem(0x95e2));
        // CB 51 0109
        gbc.setState(0x4afd, 0x4428, 0x1d80, 0x1022, 0x7925, 0x342a, 0x1, 0x1);
        gbc.writeMem(0x4afd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x4428, gbc.sp());
        EXPECT(0x4aff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 010A
        gbc.setState(0x6214, 0xdb9b, 0xe290, 0xa559, 0x3f93, 0xf23a, 0x0, 0x0);
        gbc.writeMem(0x6214, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xdb9b, gbc.sp());
        EXPECT(0x6216, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 010B
        gbc.setState(0x7659, 0x4868, 0xfd90, 0x5a8d, 0xeaa2, 0x1ef4, 0x0, 0x0);
        gbc.writeMem(0x7659, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x4868, gbc.sp());
        EXPECT(0x765b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 010C
        gbc.setState(0xb677, 0x6926, 0xbbb0, 0x4a4b, 0xa63d, 0xb8ed, 0x1, 0x0);
        gbc.writeMem(0xb677, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x6926, gbc.sp());
        EXPECT(0xb679, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb677));
        EXPECT(0x51, gbc.readMem(0xb678));
        // CB 51 010D
        gbc.setState(0xd345, 0x552e, 0xc9f0, 0x3126, 0x6593, 0xdd9, 0x0, 0x1);
        gbc.writeMem(0xd345, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x552e, gbc.sp());
        EXPECT(0xd347, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd345));
        EXPECT(0x51, gbc.readMem(0xd346));
        // CB 51 010E
        gbc.setState(0xc6, 0xfa44, 0x3960, 0xecc6, 0xbe78, 0x1d36, 0x0, 0x1);
        gbc.writeMem(0xc6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xfa44, gbc.sp());
        EXPECT(0xc8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 010F
        gbc.setState(0x1f5b, 0xd8aa, 0xff60, 0x30f8, 0x651d, 0x52ea, 0x0, 0x0);
        gbc.writeMem(0x1f5b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xd8aa, gbc.sp());
        EXPECT(0x1f5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0110
        gbc.setState(0x128, 0xa9dd, 0xe670, 0x130, 0x83ae, 0x9d3b, 0x1, 0x1);
        gbc.writeMem(0x128, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xa9dd, gbc.sp());
        EXPECT(0x12a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0111
        gbc.setState(0xb986, 0x24af, 0x4090, 0x7c1c, 0x1f5c, 0xeb33, 0x0, 0x1);
        gbc.writeMem(0xb986, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x24af, gbc.sp());
        EXPECT(0xb988, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb986));
        EXPECT(0x51, gbc.readMem(0xb987));
        // CB 51 0112
        gbc.setState(0xc31, 0xc21a, 0x37b0, 0x9f97, 0x8387, 0x5ca7, 0x0, 0x0);
        gbc.writeMem(0xc31, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xc21a, gbc.sp());
        EXPECT(0xc33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0113
        gbc.setState(0x66a4, 0x6961, 0x54e0, 0x3f41, 0x2728, 0xcdef, 0x1, 0x0);
        gbc.writeMem(0x66a4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x6961, gbc.sp());
        EXPECT(0x66a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0114
        gbc.setState(0x2fe6, 0x87a2, 0xa730, 0xd17, 0x8d44, 0x60b4, 0x0, 0x1);
        gbc.writeMem(0x2fe6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x87a2, gbc.sp());
        EXPECT(0x2fe8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0115
        gbc.setState(0x7c4b, 0xb106, 0xf590, 0x7e8f, 0xfe3a, 0x8a23, 0x1, 0x1);
        gbc.writeMem(0x7c4b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xb106, gbc.sp());
        EXPECT(0x7c4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0116
        gbc.setState(0x2e25, 0x50ae, 0x8890, 0x5ff1, 0x1fb, 0x3820, 0x1, 0x0);
        gbc.writeMem(0x2e25, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x50ae, gbc.sp());
        EXPECT(0x2e27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0117
        gbc.setState(0x6ee2, 0x7dbd, 0x5640, 0x42bf, 0x13fa, 0x2fb9, 0x0, 0x1);
        gbc.writeMem(0x6ee2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x7dbd, gbc.sp());
        EXPECT(0x6ee4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0118
        gbc.setState(0x9318, 0x9f12, 0x2a70, 0x36ce, 0x1d9d, 0xa62e, 0x0, 0x1);
        gbc.writeMem(0x9318, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x9f12, gbc.sp());
        EXPECT(0x931a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9318));
        EXPECT(0x51, gbc.readMem(0x9319));
        // CB 51 0119
        gbc.setState(0xad0c, 0x2c7f, 0xb2d0, 0xd3fd, 0x9f5, 0x5942, 0x0, 0x0);
        gbc.writeMem(0xad0c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x2c7f, gbc.sp());
        EXPECT(0xad0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad0c));
        EXPECT(0x51, gbc.readMem(0xad0d));
        // CB 51 011A
        gbc.setState(0x8413, 0xdf37, 0xc800, 0xec6c, 0x64ab, 0x3a9, 0x1, 0x1);
        gbc.writeMem(0x8413, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xdf37, gbc.sp());
        EXPECT(0x8415, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8413));
        EXPECT(0x51, gbc.readMem(0x8414));
        // CB 51 011B
        gbc.setState(0x6976, 0x75b3, 0x40, 0x5814, 0x5a66, 0x1393, 0x0, 0x0);
        gbc.writeMem(0x6976, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x75b3, gbc.sp());
        EXPECT(0x6978, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 011C
        gbc.setState(0x69a8, 0xda5, 0xba90, 0x852, 0x825b, 0x91e, 0x1, 0x1);
        gbc.writeMem(0x69a8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xda5, gbc.sp());
        EXPECT(0x69aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 011D
        gbc.setState(0x1542, 0x30ab, 0xca20, 0xcb12, 0xced9, 0x598d, 0x1, 0x1);
        gbc.writeMem(0x1542, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x30ab, gbc.sp());
        EXPECT(0x1544, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 011E
        gbc.setState(0x906a, 0xfbc1, 0x1e00, 0x1453, 0x1f1b, 0xb6ab, 0x1, 0x1);
        gbc.writeMem(0x906a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xfbc1, gbc.sp());
        EXPECT(0x906c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x906a));
        EXPECT(0x51, gbc.readMem(0x906b));
        // CB 51 011F
        gbc.setState(0xc364, 0x968e, 0x8e0, 0x4ba9, 0xc529, 0xc11a, 0x1, 0x0);
        gbc.writeMem(0xc364, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x968e, gbc.sp());
        EXPECT(0xc366, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc364));
        EXPECT(0x51, gbc.readMem(0xc365));
        // CB 51 0120
        gbc.setState(0x29e2, 0x9ec, 0x71a0, 0x73b3, 0xdc9b, 0x7e8a, 0x1, 0x0);
        gbc.writeMem(0x29e2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x9ec, gbc.sp());
        EXPECT(0x29e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0121
        gbc.setState(0x9aae, 0x8b6, 0xb9e0, 0x934c, 0x9683, 0xfea7, 0x0, 0x0);
        gbc.writeMem(0x9aae, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x8b6, gbc.sp());
        EXPECT(0x9ab0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9aae));
        EXPECT(0x51, gbc.readMem(0x9aaf));
        // CB 51 0122
        gbc.setState(0xb273, 0x39a8, 0x14f0, 0x761c, 0x9af5, 0xd01b, 0x0, 0x0);
        gbc.writeMem(0xb273, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x39a8, gbc.sp());
        EXPECT(0xb275, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb273));
        EXPECT(0x51, gbc.readMem(0xb274));
        // CB 51 0123
        gbc.setState(0xc2d4, 0xbe3b, 0x20b0, 0x7e7d, 0xa782, 0x876a, 0x1, 0x1);
        gbc.writeMem(0xc2d4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xbe3b, gbc.sp());
        EXPECT(0xc2d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2d4));
        EXPECT(0x51, gbc.readMem(0xc2d5));
        // CB 51 0124
        gbc.setState(0xb463, 0x90ac, 0xe4b0, 0xa105, 0x918b, 0x766c, 0x1, 0x0);
        gbc.writeMem(0xb463, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x90ac, gbc.sp());
        EXPECT(0xb465, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb463));
        EXPECT(0x51, gbc.readMem(0xb464));
        // CB 51 0126
        gbc.setState(0xb485, 0x3360, 0xef70, 0x36c6, 0x29fa, 0xc23e, 0x1, 0x0);
        gbc.writeMem(0xb485, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x3360, gbc.sp());
        EXPECT(0xb487, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb485));
        EXPECT(0x51, gbc.readMem(0xb486));
        // CB 51 0127
        gbc.setState(0x5995, 0x9403, 0xa430, 0x452d, 0xb5d9, 0xda96, 0x1, 0x0);
        gbc.writeMem(0x5995, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x9403, gbc.sp());
        EXPECT(0x5997, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0128
        gbc.setState(0xc779, 0x81a0, 0xff50, 0xe84e, 0xb3ce, 0x6536, 0x0, 0x0);
        gbc.writeMem(0xc779, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x81a0, gbc.sp());
        EXPECT(0xc77b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc779));
        EXPECT(0x51, gbc.readMem(0xc77a));
        // CB 51 0129
        gbc.setState(0xe4cc, 0x7a04, 0x82d0, 0x2c69, 0x435d, 0x46c, 0x0, 0x0);
        gbc.writeMem(0xe4cc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x7a04, gbc.sp());
        EXPECT(0xe4ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4cc));
        EXPECT(0x51, gbc.readMem(0xe4cd));
        // CB 51 012A
        gbc.setState(0xc037, 0xe318, 0x7330, 0x9e1c, 0x6ce8, 0x9de1, 0x1, 0x1);
        gbc.writeMem(0xc037, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xe318, gbc.sp());
        EXPECT(0xc039, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc037));
        EXPECT(0x51, gbc.readMem(0xc038));
        // CB 51 012B
        gbc.setState(0xa0c1, 0x55ba, 0xee30, 0xcd5, 0x551b, 0x15e6, 0x1, 0x0);
        gbc.writeMem(0xa0c1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x55ba, gbc.sp());
        EXPECT(0xa0c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0c1));
        EXPECT(0x51, gbc.readMem(0xa0c2));
        // CB 51 012C
        gbc.setState(0x8c09, 0xafcd, 0xdd30, 0x337c, 0xec42, 0xf6ad, 0x0, 0x0);
        gbc.writeMem(0x8c09, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xafcd, gbc.sp());
        EXPECT(0x8c0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c09));
        EXPECT(0x51, gbc.readMem(0x8c0a));
        // CB 51 012D
        gbc.setState(0x882, 0x9451, 0xf7d0, 0xa213, 0xb108, 0x420c, 0x1, 0x1);
        gbc.writeMem(0x882, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x9451, gbc.sp());
        EXPECT(0x884, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 012E
        gbc.setState(0x41a1, 0x4e8, 0xb840, 0x3203, 0x481f, 0xeab8, 0x1, 0x1);
        gbc.writeMem(0x41a1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x4e8, gbc.sp());
        EXPECT(0x41a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 012F
        gbc.setState(0x3a46, 0xb2b8, 0xeba0, 0xe750, 0x15bf, 0x16f4, 0x0, 0x1);
        gbc.writeMem(0x3a46, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xb2b8, gbc.sp());
        EXPECT(0x3a48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0130
        gbc.setState(0x3c94, 0xbd73, 0x6ad0, 0x82bc, 0xad00, 0xb32d, 0x0, 0x0);
        gbc.writeMem(0x3c94, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xbd73, gbc.sp());
        EXPECT(0x3c96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0131
        gbc.setState(0x306c, 0x6e3, 0x7390, 0x497f, 0xd782, 0xb3ce, 0x1, 0x1);
        gbc.writeMem(0x306c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x6e3, gbc.sp());
        EXPECT(0x306e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0132
        gbc.setState(0xb227, 0xb16c, 0x2b10, 0x4a84, 0xd3bb, 0xb151, 0x1, 0x1);
        gbc.writeMem(0xb227, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xb16c, gbc.sp());
        EXPECT(0xb229, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb227));
        EXPECT(0x51, gbc.readMem(0xb228));
        // CB 51 0133
        gbc.setState(0x243a, 0x9e82, 0x3d50, 0xbc6, 0x4dd2, 0xd581, 0x0, 0x0);
        gbc.writeMem(0x243a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x9e82, gbc.sp());
        EXPECT(0x243c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0134
        gbc.setState(0x7d4b, 0x118a, 0xd40, 0x5713, 0xfa85, 0x1eb3, 0x1, 0x1);
        gbc.writeMem(0x7d4b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x118a, gbc.sp());
        EXPECT(0x7d4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0135
        gbc.setState(0x6ad4, 0xe4a9, 0xa320, 0x3346, 0xdbf3, 0x652f, 0x0, 0x1);
        gbc.writeMem(0x6ad4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xe4a9, gbc.sp());
        EXPECT(0x6ad6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0136
        gbc.setState(0xb0c0, 0xc162, 0xbbd0, 0x717e, 0x96d4, 0x4133, 0x1, 0x1);
        gbc.writeMem(0xb0c0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xc162, gbc.sp());
        EXPECT(0xb0c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0c0));
        EXPECT(0x51, gbc.readMem(0xb0c1));
        // CB 51 0137
        gbc.setState(0x3cd5, 0xe6ef, 0x5c20, 0x863, 0x5852, 0x7877, 0x0, 0x1);
        gbc.writeMem(0x3cd5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xe6ef, gbc.sp());
        EXPECT(0x3cd7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0138
        gbc.setState(0x3425, 0xc9ea, 0xf1b0, 0xb3c6, 0xadc6, 0x1274, 0x1, 0x0);
        gbc.writeMem(0x3425, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xc9ea, gbc.sp());
        EXPECT(0x3427, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0139
        gbc.setState(0x7128, 0x2b00, 0x47e0, 0xb555, 0x120a, 0xc0c3, 0x0, 0x1);
        gbc.writeMem(0x7128, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x2b00, gbc.sp());
        EXPECT(0x712a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 013A
        gbc.setState(0x2a53, 0x913, 0x7720, 0xb87b, 0x5cea, 0xdb22, 0x0, 0x0);
        gbc.writeMem(0x2a53, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x913, gbc.sp());
        EXPECT(0x2a55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 013B
        gbc.setState(0x6c82, 0x95a8, 0xb0d0, 0x364b, 0x71b1, 0x31b6, 0x1, 0x1);
        gbc.writeMem(0x6c82, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x95a8, gbc.sp());
        EXPECT(0x6c84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 013C
        gbc.setState(0xdda0, 0x38b5, 0x1b70, 0xa464, 0xc384, 0xa490, 0x1, 0x1);
        gbc.writeMem(0xdda0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x38b5, gbc.sp());
        EXPECT(0xdda2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdda0));
        EXPECT(0x51, gbc.readMem(0xdda1));
        // CB 51 013D
        gbc.setState(0x311f, 0x8e3d, 0x4f00, 0x2a16, 0x2ff4, 0x34f5, 0x1, 0x0);
        gbc.writeMem(0x311f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x8e3d, gbc.sp());
        EXPECT(0x3121, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 013E
        gbc.setState(0xeb18, 0xcf26, 0xb6e0, 0x2f9c, 0x7773, 0x4a6d, 0x1, 0x1);
        gbc.writeMem(0xeb18, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xcf26, gbc.sp());
        EXPECT(0xeb1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb18));
        EXPECT(0x51, gbc.readMem(0xeb19));
        // CB 51 013F
        gbc.setState(0xdfcf, 0xa8df, 0xdcf0, 0x1d8, 0x2713, 0x2069, 0x0, 0x0);
        gbc.writeMem(0xdfcf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xa8df, gbc.sp());
        EXPECT(0xdfd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfcf));
        EXPECT(0x51, gbc.readMem(0xdfd0));
        // CB 51 0140
        gbc.setState(0x4baa, 0xd4d8, 0xb3f0, 0x2b25, 0x5a67, 0xa47a, 0x1, 0x0);
        gbc.writeMem(0x4baa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xd4d8, gbc.sp());
        EXPECT(0x4bac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0141
        gbc.setState(0x20c8, 0xf7f4, 0x14d0, 0x1e80, 0xbed0, 0x2c05, 0x1, 0x0);
        gbc.writeMem(0x20c8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xf7f4, gbc.sp());
        EXPECT(0x20ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0142
        gbc.setState(0xee71, 0x7e13, 0x2150, 0x7956, 0x9119, 0x88cb, 0x1, 0x0);
        gbc.writeMem(0xee71, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x7e13, gbc.sp());
        EXPECT(0xee73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee71));
        EXPECT(0x51, gbc.readMem(0xee72));
        // CB 51 0143
        gbc.setState(0x5091, 0xfaf0, 0xe120, 0xfae7, 0x9567, 0xdc60, 0x1, 0x0);
        gbc.writeMem(0x5091, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xfaf0, gbc.sp());
        EXPECT(0x5093, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0145
        gbc.setState(0x7e96, 0xd20f, 0x4080, 0xd1e5, 0xf8b6, 0x77f6, 0x1, 0x1);
        gbc.writeMem(0x7e96, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xd20f, gbc.sp());
        EXPECT(0x7e98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0146
        gbc.setState(0x733f, 0xded5, 0xcf10, 0xc371, 0x5f5c, 0x5609, 0x1, 0x1);
        gbc.writeMem(0x733f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xded5, gbc.sp());
        EXPECT(0x7341, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0147
        gbc.setState(0x813, 0x42f, 0xc50, 0x3f35, 0x24df, 0x18d5, 0x1, 0x1);
        gbc.writeMem(0x813, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x42f, gbc.sp());
        EXPECT(0x815, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0148
        gbc.setState(0x311d, 0x8f4d, 0x4f60, 0x29cb, 0x9568, 0x67e, 0x1, 0x1);
        gbc.writeMem(0x311d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x8f4d, gbc.sp());
        EXPECT(0x311f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0149
        gbc.setState(0x4214, 0x8ca9, 0x3e40, 0xee5e, 0xc6d5, 0x49bb, 0x0, 0x0);
        gbc.writeMem(0x4214, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x8ca9, gbc.sp());
        EXPECT(0x4216, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 014A
        gbc.setState(0xcaef, 0xf817, 0xed50, 0x6ea0, 0x1a25, 0xd29, 0x1, 0x0);
        gbc.writeMem(0xcaef, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xf817, gbc.sp());
        EXPECT(0xcaf1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaef));
        EXPECT(0x51, gbc.readMem(0xcaf0));
        // CB 51 014B
        gbc.setState(0xaebe, 0x4ec8, 0x3a90, 0x5d34, 0x5768, 0x3919, 0x0, 0x1);
        gbc.writeMem(0xaebe, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x4ec8, gbc.sp());
        EXPECT(0xaec0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaebe));
        EXPECT(0x51, gbc.readMem(0xaebf));
        // CB 51 014C
        gbc.setState(0x1fae, 0xdff4, 0x2f70, 0xfd71, 0xc07f, 0xc275, 0x1, 0x1);
        gbc.writeMem(0x1fae, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xdff4, gbc.sp());
        EXPECT(0x1fb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 014D
        gbc.setState(0xee75, 0x3dab, 0x6520, 0x1337, 0xd37e, 0x1499, 0x1, 0x1);
        gbc.writeMem(0xee75, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x3dab, gbc.sp());
        EXPECT(0xee77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee75));
        EXPECT(0x51, gbc.readMem(0xee76));
        // CB 51 014E
        gbc.setState(0x3e88, 0x84e0, 0x32c0, 0x88b6, 0x104, 0xc190, 0x1, 0x1);
        gbc.writeMem(0x3e88, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x84e0, gbc.sp());
        EXPECT(0x3e8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 014F
        gbc.setState(0x3f6d, 0xb811, 0xb0e0, 0x9284, 0xd2f6, 0xe20, 0x0, 0x1);
        gbc.writeMem(0x3f6d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xb811, gbc.sp());
        EXPECT(0x3f6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0150
        gbc.setState(0xc8f3, 0x2800, 0xab50, 0xc1c2, 0x1f74, 0x8bd5, 0x1, 0x0);
        gbc.writeMem(0xc8f3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x2800, gbc.sp());
        EXPECT(0xc8f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8f3));
        EXPECT(0x51, gbc.readMem(0xc8f4));
        // CB 51 0151
        gbc.setState(0xbf95, 0x9b7a, 0x82d0, 0xa69a, 0x9a78, 0x9416, 0x1, 0x0);
        gbc.writeMem(0xbf95, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x9b7a, gbc.sp());
        EXPECT(0xbf97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf95));
        EXPECT(0x51, gbc.readMem(0xbf96));
        // CB 51 0152
        gbc.setState(0xd7f7, 0xfb0d, 0x1150, 0x4e52, 0x5282, 0x72e1, 0x1, 0x1);
        gbc.writeMem(0xd7f7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xfb0d, gbc.sp());
        EXPECT(0xd7f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7f7));
        EXPECT(0x51, gbc.readMem(0xd7f8));
        // CB 51 0153
        gbc.setState(0xd0f5, 0x94b4, 0x5430, 0x40a, 0xace7, 0x12a7, 0x1, 0x0);
        gbc.writeMem(0xd0f5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x94b4, gbc.sp());
        EXPECT(0xd0f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0f5));
        EXPECT(0x51, gbc.readMem(0xd0f6));
        // CB 51 0154
        gbc.setState(0x813b, 0x5c13, 0x7300, 0x2a80, 0x5f36, 0xd0e5, 0x1, 0x1);
        gbc.writeMem(0x813b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x5c13, gbc.sp());
        EXPECT(0x813d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x813b));
        EXPECT(0x51, gbc.readMem(0x813c));
        // CB 51 0155
        gbc.setState(0x5883, 0x219d, 0x5730, 0x8fd0, 0x415a, 0x62eb, 0x0, 0x0);
        gbc.writeMem(0x5883, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x219d, gbc.sp());
        EXPECT(0x5885, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0156
        gbc.setState(0x618, 0x6736, 0x4030, 0x853b, 0x36fc, 0x43fa, 0x1, 0x1);
        gbc.writeMem(0x618, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x6736, gbc.sp());
        EXPECT(0x61a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0158
        gbc.setState(0x8fde, 0x1e26, 0xdfe0, 0xb95c, 0x62e5, 0x12dd, 0x0, 0x1);
        gbc.writeMem(0x8fde, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x1e26, gbc.sp());
        EXPECT(0x8fe0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fde));
        EXPECT(0x51, gbc.readMem(0x8fdf));
        // CB 51 0159
        gbc.setState(0x8c29, 0xd83c, 0xa3c0, 0x8e0e, 0x83da, 0x1905, 0x0, 0x0);
        gbc.writeMem(0x8c29, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xd83c, gbc.sp());
        EXPECT(0x8c2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c29));
        EXPECT(0x51, gbc.readMem(0x8c2a));
        // CB 51 015A
        gbc.setState(0xc5f6, 0xc6cf, 0xd1f0, 0x211, 0xa304, 0x90e3, 0x0, 0x1);
        gbc.writeMem(0xc5f6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xc6cf, gbc.sp());
        EXPECT(0xc5f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5f6));
        EXPECT(0x51, gbc.readMem(0xc5f7));
        // CB 51 015B
        gbc.setState(0x4fe, 0xd2a6, 0xa0e0, 0xa957, 0xbe8f, 0xf291, 0x1, 0x1);
        gbc.writeMem(0x4fe, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xd2a6, gbc.sp());
        EXPECT(0x500, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 015C
        gbc.setState(0x1a0e, 0x567c, 0x2970, 0xb93e, 0x9b3, 0x9d7a, 0x0, 0x0);
        gbc.writeMem(0x1a0e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x567c, gbc.sp());
        EXPECT(0x1a10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 015D
        gbc.setState(0x6503, 0x8ed7, 0x4d80, 0x4590, 0x8dbb, 0x1fb1, 0x1, 0x0);
        gbc.writeMem(0x6503, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x8ed7, gbc.sp());
        EXPECT(0x6505, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 015E
        gbc.setState(0x95d2, 0xd2f7, 0x89b0, 0xde04, 0xdcac, 0x3c74, 0x0, 0x1);
        gbc.writeMem(0x95d2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xd2f7, gbc.sp());
        EXPECT(0x95d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95d2));
        EXPECT(0x51, gbc.readMem(0x95d3));
        // CB 51 015F
        gbc.setState(0x172f, 0xadd6, 0x5c60, 0x6543, 0x8243, 0x970c, 0x0, 0x1);
        gbc.writeMem(0x172f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xadd6, gbc.sp());
        EXPECT(0x1731, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0160
        gbc.setState(0xe767, 0x66ee, 0x76b0, 0x3a95, 0xda87, 0x285c, 0x1, 0x0);
        gbc.writeMem(0xe767, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x66ee, gbc.sp());
        EXPECT(0xe769, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe767));
        EXPECT(0x51, gbc.readMem(0xe768));
        // CB 51 0161
        gbc.setState(0xb3e, 0x8249, 0xb6d0, 0x8e17, 0xc123, 0x2bf0, 0x1, 0x1);
        gbc.writeMem(0xb3e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x8249, gbc.sp());
        EXPECT(0xb40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0162
        gbc.setState(0xd04a, 0x89b9, 0x4760, 0x4935, 0xf5e3, 0x1f0f, 0x0, 0x0);
        gbc.writeMem(0xd04a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x89b9, gbc.sp());
        EXPECT(0xd04c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd04a));
        EXPECT(0x51, gbc.readMem(0xd04b));
        // CB 51 0163
        gbc.setState(0x589a, 0x62d1, 0x86c0, 0xb17f, 0x4929, 0x60df, 0x0, 0x1);
        gbc.writeMem(0x589a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x62d1, gbc.sp());
        EXPECT(0x589c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0164
        gbc.setState(0x7ea6, 0xc231, 0xbcd0, 0x2fac, 0x73a7, 0xfbe0, 0x0, 0x0);
        gbc.writeMem(0x7ea6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xc231, gbc.sp());
        EXPECT(0x7ea8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0165
        gbc.setState(0xb6bb, 0xce05, 0x350, 0x1920, 0x3448, 0x3dab, 0x0, 0x0);
        gbc.writeMem(0xb6bb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xce05, gbc.sp());
        EXPECT(0xb6bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6bb));
        EXPECT(0x51, gbc.readMem(0xb6bc));
        // CB 51 0166
        gbc.setState(0x2c9a, 0x72a, 0xcb60, 0xcb05, 0x307c, 0x86eb, 0x1, 0x0);
        gbc.writeMem(0x2c9a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x72a, gbc.sp());
        EXPECT(0x2c9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0167
        gbc.setState(0x6e32, 0xecf9, 0x3a40, 0x9b76, 0xeb, 0xce1e, 0x1, 0x1);
        gbc.writeMem(0x6e32, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xecf9, gbc.sp());
        EXPECT(0x6e34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0168
        gbc.setState(0xe093, 0xb067, 0x34e0, 0xbe6, 0xeaf9, 0x9cfd, 0x0, 0x0);
        gbc.writeMem(0xe093, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xb067, gbc.sp());
        EXPECT(0xe095, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe093));
        EXPECT(0x51, gbc.readMem(0xe094));
        // CB 51 0169
        gbc.setState(0x1442, 0x4388, 0xd130, 0x1365, 0xb970, 0xc426, 0x1, 0x1);
        gbc.writeMem(0x1442, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x4388, gbc.sp());
        EXPECT(0x1444, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 016A
        gbc.setState(0x6310, 0xcf43, 0xa2e0, 0x9cd3, 0xf397, 0xbe30, 0x1, 0x1);
        gbc.writeMem(0x6310, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xcf43, gbc.sp());
        EXPECT(0x6312, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 016B
        gbc.setState(0xb07f, 0x7b49, 0x30f0, 0xf87a, 0x47cd, 0xd515, 0x1, 0x0);
        gbc.writeMem(0xb07f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x7b49, gbc.sp());
        EXPECT(0xb081, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb07f));
        EXPECT(0x51, gbc.readMem(0xb080));
        // CB 51 016C
        gbc.setState(0x608d, 0xe974, 0xa40, 0xe411, 0x61de, 0xc48d, 0x0, 0x1);
        gbc.writeMem(0x608d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xe974, gbc.sp());
        EXPECT(0x608f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 016D
        gbc.setState(0x9c3c, 0xf1e6, 0x8600, 0xc680, 0x3d43, 0x656, 0x1, 0x0);
        gbc.writeMem(0x9c3c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xf1e6, gbc.sp());
        EXPECT(0x9c3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c3c));
        EXPECT(0x51, gbc.readMem(0x9c3d));
        // CB 51 016E
        gbc.setState(0x23c6, 0x92e7, 0xd090, 0xccc4, 0x697, 0x3dd6, 0x1, 0x1);
        gbc.writeMem(0x23c6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x92e7, gbc.sp());
        EXPECT(0x23c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 016F
        gbc.setState(0xd5f, 0x1898, 0x2ef0, 0x4b72, 0x8f55, 0x3111, 0x0, 0x0);
        gbc.writeMem(0xd5f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x1898, gbc.sp());
        EXPECT(0xd61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0170
        gbc.setState(0xde4a, 0x7e80, 0x4b0, 0x4686, 0x2206, 0xab8e, 0x1, 0x1);
        gbc.writeMem(0xde4a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x7e80, gbc.sp());
        EXPECT(0xde4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde4a));
        EXPECT(0x51, gbc.readMem(0xde4b));
        // CB 51 0171
        gbc.setState(0xc146, 0xd6cd, 0x1270, 0xd049, 0x66bb, 0xe85, 0x0, 0x0);
        gbc.writeMem(0xc146, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xd6cd, gbc.sp());
        EXPECT(0xc148, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc146));
        EXPECT(0x51, gbc.readMem(0xc147));
        // CB 51 0172
        gbc.setState(0x67e2, 0x9aff, 0x8b90, 0x2965, 0x22f8, 0x63dd, 0x1, 0x1);
        gbc.writeMem(0x67e2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x9aff, gbc.sp());
        EXPECT(0x67e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0173
        gbc.setState(0xa940, 0x4ed9, 0x97d0, 0xfe57, 0x287d, 0x11fd, 0x0, 0x1);
        gbc.writeMem(0xa940, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x4ed9, gbc.sp());
        EXPECT(0xa942, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa940));
        EXPECT(0x51, gbc.readMem(0xa941));
        // CB 51 0174
        gbc.setState(0xae4e, 0x3e2c, 0xd080, 0x69ec, 0xe941, 0xd8a9, 0x1, 0x0);
        gbc.writeMem(0xae4e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x3e2c, gbc.sp());
        EXPECT(0xae50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae4e));
        EXPECT(0x51, gbc.readMem(0xae4f));
        // CB 51 0175
        gbc.setState(0x9234, 0x7f7f, 0xed60, 0x1419, 0x7f2b, 0xeae8, 0x0, 0x1);
        gbc.writeMem(0x9234, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x7f7f, gbc.sp());
        EXPECT(0x9236, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9234));
        EXPECT(0x51, gbc.readMem(0x9235));
        // CB 51 0176
        gbc.setState(0xbbc, 0xe8ef, 0xa270, 0x7e3d, 0xcad, 0x121, 0x0, 0x1);
        gbc.writeMem(0xbbc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xe8ef, gbc.sp());
        EXPECT(0xbbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0177
        gbc.setState(0xe489, 0x5dd, 0x4a30, 0xe1f8, 0xf05b, 0x6c36, 0x0, 0x1);
        gbc.writeMem(0xe489, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x5dd, gbc.sp());
        EXPECT(0xe48b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe489));
        EXPECT(0x51, gbc.readMem(0xe48a));
        // CB 51 0178
        gbc.setState(0x93da, 0x9a7, 0xc2f0, 0x410, 0xe08, 0xf88a, 0x1, 0x1);
        gbc.writeMem(0x93da, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x9a7, gbc.sp());
        EXPECT(0x93dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93da));
        EXPECT(0x51, gbc.readMem(0x93db));
        // CB 51 0179
        gbc.setState(0xc22, 0x906a, 0xbc50, 0xb79b, 0x8ae9, 0xdc14, 0x1, 0x0);
        gbc.writeMem(0xc22, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x906a, gbc.sp());
        EXPECT(0xc24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 017A
        gbc.setState(0x2a45, 0x41ed, 0xc160, 0x75ef, 0xd704, 0xa695, 0x1, 0x0);
        gbc.writeMem(0x2a45, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x41ed, gbc.sp());
        EXPECT(0x2a47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 017B
        gbc.setState(0x45fc, 0x407d, 0x4a70, 0xf29c, 0x9456, 0x3d57, 0x1, 0x1);
        gbc.writeMem(0x45fc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x407d, gbc.sp());
        EXPECT(0x45fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 017C
        gbc.setState(0x3226, 0x3923, 0xdbf0, 0xad30, 0x61d7, 0x5312, 0x0, 0x1);
        gbc.writeMem(0x3226, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x3923, gbc.sp());
        EXPECT(0x3228, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 017D
        gbc.setState(0xa449, 0x6a6c, 0x9b90, 0x8748, 0xd2b7, 0x747a, 0x0, 0x0);
        gbc.writeMem(0xa449, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x6a6c, gbc.sp());
        EXPECT(0xa44b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa449));
        EXPECT(0x51, gbc.readMem(0xa44a));
        // CB 51 0180
        gbc.setState(0xe225, 0x41f6, 0x9550, 0xe3d9, 0xc100, 0x84dc, 0x1, 0x0);
        gbc.writeMem(0xe225, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x41f6, gbc.sp());
        EXPECT(0xe227, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe225));
        EXPECT(0x51, gbc.readMem(0xe226));
        // CB 51 0182
        gbc.setState(0x7e9b, 0x7e2d, 0x5e20, 0x362d, 0xe199, 0x41b3, 0x1, 0x0);
        gbc.writeMem(0x7e9b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x7e2d, gbc.sp());
        EXPECT(0x7e9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0183
        gbc.setState(0x2c1, 0xcade, 0x98f0, 0x8740, 0xe6fc, 0x245e, 0x1, 0x0);
        gbc.writeMem(0x2c1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xcade, gbc.sp());
        EXPECT(0x2c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0185
        gbc.setState(0xd90, 0xc368, 0xb530, 0x8a82, 0xf852, 0x89fc, 0x0, 0x1);
        gbc.writeMem(0xd90, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xc368, gbc.sp());
        EXPECT(0xd92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0186
        gbc.setState(0x940e, 0x15bd, 0x60e0, 0xac41, 0x40b2, 0xbc7d, 0x0, 0x0);
        gbc.writeMem(0x940e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x15bd, gbc.sp());
        EXPECT(0x9410, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x940e));
        EXPECT(0x51, gbc.readMem(0x940f));
        // CB 51 0187
        gbc.setState(0xb631, 0x7be0, 0x5290, 0x5da3, 0x33df, 0x5b1d, 0x0, 0x0);
        gbc.writeMem(0xb631, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x7be0, gbc.sp());
        EXPECT(0xb633, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb631));
        EXPECT(0x51, gbc.readMem(0xb632));
        // CB 51 0188
        gbc.setState(0x31c5, 0x23a7, 0xc270, 0xd69, 0x6068, 0x9951, 0x1, 0x1);
        gbc.writeMem(0x31c5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x23a7, gbc.sp());
        EXPECT(0x31c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0189
        gbc.setState(0xe4a9, 0xa8c9, 0x7830, 0x4497, 0x5ad4, 0xd8c4, 0x1, 0x0);
        gbc.writeMem(0xe4a9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xa8c9, gbc.sp());
        EXPECT(0xe4ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4a9));
        EXPECT(0x51, gbc.readMem(0xe4aa));
        // CB 51 018B
        gbc.setState(0xc391, 0xfb78, 0xf7f0, 0xf7d8, 0xf51b, 0x4339, 0x1, 0x1);
        gbc.writeMem(0xc391, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xfb78, gbc.sp());
        EXPECT(0xc393, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc391));
        EXPECT(0x51, gbc.readMem(0xc392));
        // CB 51 018C
        gbc.setState(0xa663, 0xd0f, 0xc350, 0x3f34, 0xab47, 0x1194, 0x1, 0x0);
        gbc.writeMem(0xa663, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xd0f, gbc.sp());
        EXPECT(0xa665, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa663));
        EXPECT(0x51, gbc.readMem(0xa664));
        // CB 51 018D
        gbc.setState(0xa14b, 0xd58d, 0xb5b0, 0x47db, 0xb536, 0x8e15, 0x0, 0x1);
        gbc.writeMem(0xa14b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xd58d, gbc.sp());
        EXPECT(0xa14d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa14b));
        EXPECT(0x51, gbc.readMem(0xa14c));
        // CB 51 018E
        gbc.setState(0x8ece, 0x68fe, 0x2c20, 0x27c2, 0x9588, 0x1062, 0x0, 0x1);
        gbc.writeMem(0x8ece, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x68fe, gbc.sp());
        EXPECT(0x8ed0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ece));
        EXPECT(0x51, gbc.readMem(0x8ecf));
        // CB 51 018F
        gbc.setState(0xdd42, 0x2009, 0xcf70, 0xf83, 0x8c64, 0x983e, 0x0, 0x1);
        gbc.writeMem(0xdd42, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x2009, gbc.sp());
        EXPECT(0xdd44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd42));
        EXPECT(0x51, gbc.readMem(0xdd43));
        // CB 51 0190
        gbc.setState(0x8101, 0x9568, 0xdd60, 0x9aab, 0x7404, 0xfdc7, 0x0, 0x1);
        gbc.writeMem(0x8101, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x9568, gbc.sp());
        EXPECT(0x8103, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8101));
        EXPECT(0x51, gbc.readMem(0x8102));
        // CB 51 0191
        gbc.setState(0x3a61, 0x27c1, 0xf510, 0x5c57, 0xd66a, 0x6633, 0x1, 0x0);
        gbc.writeMem(0x3a61, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x27c1, gbc.sp());
        EXPECT(0x3a63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0192
        gbc.setState(0x8251, 0xa6fb, 0x5320, 0xb55f, 0x9319, 0x60b8, 0x0, 0x1);
        gbc.writeMem(0x8251, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xa6fb, gbc.sp());
        EXPECT(0x8253, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8251));
        EXPECT(0x51, gbc.readMem(0x8252));
        // CB 51 0193
        gbc.setState(0xdbb6, 0x6e8a, 0xbbd0, 0x39a1, 0xac0c, 0x6084, 0x1, 0x0);
        gbc.writeMem(0xdbb6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x6e8a, gbc.sp());
        EXPECT(0xdbb8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbb6));
        EXPECT(0x51, gbc.readMem(0xdbb7));
        // CB 51 0194
        gbc.setState(0xd51b, 0x8cb7, 0xd740, 0xb414, 0x7537, 0x4f9e, 0x0, 0x0);
        gbc.writeMem(0xd51b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x8cb7, gbc.sp());
        EXPECT(0xd51d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd51b));
        EXPECT(0x51, gbc.readMem(0xd51c));
        // CB 51 0195
        gbc.setState(0x32b5, 0xfae9, 0xbb50, 0xc507, 0x2763, 0x2e90, 0x0, 0x0);
        gbc.writeMem(0x32b5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xfae9, gbc.sp());
        EXPECT(0x32b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0196
        gbc.setState(0x49fd, 0xa372, 0x36c0, 0xc018, 0xff56, 0x6493, 0x0, 0x0);
        gbc.writeMem(0x49fd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xa372, gbc.sp());
        EXPECT(0x49ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0197
        gbc.setState(0x85d7, 0x1aad, 0x9a00, 0xf6b3, 0x6d5c, 0x9c71, 0x1, 0x0);
        gbc.writeMem(0x85d7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x1aad, gbc.sp());
        EXPECT(0x85d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85d7));
        EXPECT(0x51, gbc.readMem(0x85d8));
        // CB 51 0198
        gbc.setState(0xb16b, 0x7c8a, 0x8150, 0xc9ae, 0x47d, 0xa4d4, 0x0, 0x0);
        gbc.writeMem(0xb16b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x7c8a, gbc.sp());
        EXPECT(0xb16d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb16b));
        EXPECT(0x51, gbc.readMem(0xb16c));
        // CB 51 0199
        gbc.setState(0xd603, 0x4750, 0xc200, 0x9ae2, 0xcedc, 0xbe6a, 0x1, 0x0);
        gbc.writeMem(0xd603, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x4750, gbc.sp());
        EXPECT(0xd605, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd603));
        EXPECT(0x51, gbc.readMem(0xd604));
        // CB 51 019B
        gbc.setState(0xd223, 0x20cd, 0xf9f0, 0xa1af, 0xb6c, 0x74c6, 0x0, 0x0);
        gbc.writeMem(0xd223, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x20cd, gbc.sp());
        EXPECT(0xd225, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd223));
        EXPECT(0x51, gbc.readMem(0xd224));
        // CB 51 019C
        gbc.setState(0xb63b, 0x811e, 0x3c70, 0x8c1c, 0x4d2c, 0x1593, 0x0, 0x1);
        gbc.writeMem(0xb63b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x811e, gbc.sp());
        EXPECT(0xb63d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb63b));
        EXPECT(0x51, gbc.readMem(0xb63c));
        // CB 51 019D
        gbc.setState(0x348b, 0xa379, 0x2050, 0xecb7, 0x7d3c, 0x5fa2, 0x1, 0x0);
        gbc.writeMem(0x348b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xa379, gbc.sp());
        EXPECT(0x348d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 019E
        gbc.setState(0x5cb3, 0xa8b0, 0x86c0, 0x77e5, 0xb23f, 0x22a0, 0x0, 0x1);
        gbc.writeMem(0x5cb3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xa8b0, gbc.sp());
        EXPECT(0x5cb5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 019F
        gbc.setState(0x3f6e, 0x4f02, 0xfc80, 0x6036, 0x4408, 0x8e9c, 0x1, 0x1);
        gbc.writeMem(0x3f6e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x4f02, gbc.sp());
        EXPECT(0x3f70, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01A0
        gbc.setState(0x1878, 0xf731, 0x1500, 0xa4bc, 0xb67d, 0xa20a, 0x0, 0x0);
        gbc.writeMem(0x1878, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xf731, gbc.sp());
        EXPECT(0x187a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01A1
        gbc.setState(0xcf63, 0x8a99, 0xf3a0, 0x487c, 0x245b, 0xf252, 0x1, 0x1);
        gbc.writeMem(0xcf63, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x8a99, gbc.sp());
        EXPECT(0xcf65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf63));
        EXPECT(0x51, gbc.readMem(0xcf64));
        // CB 51 01A2
        gbc.setState(0x56aa, 0x20ce, 0x62a0, 0x68ae, 0x1170, 0x4bbd, 0x0, 0x0);
        gbc.writeMem(0x56aa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x20ce, gbc.sp());
        EXPECT(0x56ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01A3
        gbc.setState(0xddc7, 0xc340, 0xf340, 0x3cc8, 0x8487, 0x6ac7, 0x0, 0x1);
        gbc.writeMem(0xddc7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xc340, gbc.sp());
        EXPECT(0xddc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddc7));
        EXPECT(0x51, gbc.readMem(0xddc8));
        // CB 51 01A4
        gbc.setState(0x51d0, 0x73e7, 0x9800, 0x2114, 0xd953, 0x83d6, 0x0, 0x0);
        gbc.writeMem(0x51d0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x73e7, gbc.sp());
        EXPECT(0x51d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01A5
        gbc.setState(0x4921, 0x3009, 0x12a0, 0x65de, 0xd721, 0x1378, 0x0, 0x1);
        gbc.writeMem(0x4921, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x3009, gbc.sp());
        EXPECT(0x4923, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01A6
        gbc.setState(0xd523, 0xe9ed, 0x30a0, 0x84eb, 0x4d2, 0xade7, 0x1, 0x1);
        gbc.writeMem(0xd523, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xe9ed, gbc.sp());
        EXPECT(0xd525, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd523));
        EXPECT(0x51, gbc.readMem(0xd524));
        // CB 51 01A7
        gbc.setState(0x2cd8, 0xb2cb, 0xe340, 0x1a7e, 0x1ee8, 0x3338, 0x0, 0x1);
        gbc.writeMem(0x2cd8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xb2cb, gbc.sp());
        EXPECT(0x2cda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01A8
        gbc.setState(0x5fbc, 0xb483, 0x800, 0xf364, 0x60de, 0x947c, 0x0, 0x1);
        gbc.writeMem(0x5fbc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xb483, gbc.sp());
        EXPECT(0x5fbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01A9
        gbc.setState(0x8b70, 0xe3bf, 0x400, 0x2bcb, 0x1994, 0x8d71, 0x0, 0x1);
        gbc.writeMem(0x8b70, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xe3bf, gbc.sp());
        EXPECT(0x8b72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b70));
        EXPECT(0x51, gbc.readMem(0x8b71));
        // CB 51 01AA
        gbc.setState(0x5d0a, 0x3749, 0x4ad0, 0x4c5b, 0x8b98, 0xb935, 0x0, 0x1);
        gbc.writeMem(0x5d0a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x3749, gbc.sp());
        EXPECT(0x5d0c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01AB
        gbc.setState(0x148f, 0xb106, 0x7240, 0xffb0, 0x2d95, 0x7049, 0x1, 0x1);
        gbc.writeMem(0x148f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xb106, gbc.sp());
        EXPECT(0x1491, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01AC
        gbc.setState(0xc9d3, 0x9a01, 0x2a0, 0x4256, 0x9e48, 0xa4a9, 0x0, 0x0);
        gbc.writeMem(0xc9d3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x9a01, gbc.sp());
        EXPECT(0xc9d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9d3));
        EXPECT(0x51, gbc.readMem(0xc9d4));
        // CB 51 01AD
        gbc.setState(0x284b, 0xb80c, 0x5990, 0x7c51, 0x2fe2, 0x2da5, 0x0, 0x0);
        gbc.writeMem(0x284b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xb80c, gbc.sp());
        EXPECT(0x284d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01AE
        gbc.setState(0xd4cc, 0x6f58, 0xba40, 0xf5df, 0xfd49, 0x999c, 0x1, 0x0);
        gbc.writeMem(0xd4cc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x6f58, gbc.sp());
        EXPECT(0xd4ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4cc));
        EXPECT(0x51, gbc.readMem(0xd4cd));
        // CB 51 01AF
        gbc.setState(0x9e23, 0x939c, 0xb980, 0x88b8, 0xfcb1, 0xc387, 0x0, 0x1);
        gbc.writeMem(0x9e23, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x939c, gbc.sp());
        EXPECT(0x9e25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e23));
        EXPECT(0x51, gbc.readMem(0x9e24));
        // CB 51 01B0
        gbc.setState(0x8654, 0x94c1, 0x120, 0x19b6, 0xfc40, 0x837a, 0x1, 0x0);
        gbc.writeMem(0x8654, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x94c1, gbc.sp());
        EXPECT(0x8656, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8654));
        EXPECT(0x51, gbc.readMem(0x8655));
        // CB 51 01B1
        gbc.setState(0x95fa, 0x13f4, 0x26e0, 0x8098, 0x997e, 0x329, 0x0, 0x1);
        gbc.writeMem(0x95fa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x13f4, gbc.sp());
        EXPECT(0x95fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95fa));
        EXPECT(0x51, gbc.readMem(0x95fb));
        // CB 51 01B2
        gbc.setState(0xad80, 0x1ac4, 0xa830, 0xf92, 0xe3ae, 0xaef8, 0x1, 0x1);
        gbc.writeMem(0xad80, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x1ac4, gbc.sp());
        EXPECT(0xad82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad80));
        EXPECT(0x51, gbc.readMem(0xad81));
        // CB 51 01B3
        gbc.setState(0x8e47, 0xa19e, 0xfcd0, 0x4c5d, 0x71a7, 0xed11, 0x0, 0x0);
        gbc.writeMem(0x8e47, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xa19e, gbc.sp());
        EXPECT(0x8e49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e47));
        EXPECT(0x51, gbc.readMem(0x8e48));
        // CB 51 01B4
        gbc.setState(0xc0fe, 0x7cc0, 0xa450, 0xec29, 0xc08, 0x5608, 0x1, 0x0);
        gbc.writeMem(0xc0fe, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x7cc0, gbc.sp());
        EXPECT(0xc100, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0fe));
        EXPECT(0x51, gbc.readMem(0xc0ff));
        // CB 51 01B5
        gbc.setState(0x64b3, 0xe063, 0xd0f0, 0xdf5a, 0xeb80, 0x6f82, 0x0, 0x1);
        gbc.writeMem(0x64b3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xe063, gbc.sp());
        EXPECT(0x64b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01B6
        gbc.setState(0x409b, 0x7a6, 0x3710, 0xeb18, 0x9fa1, 0x6278, 0x0, 0x0);
        gbc.writeMem(0x409b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x7a6, gbc.sp());
        EXPECT(0x409d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01B7
        gbc.setState(0x2686, 0x91e0, 0xbae0, 0x8909, 0x1427, 0x7767, 0x0, 0x0);
        gbc.writeMem(0x2686, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x91e0, gbc.sp());
        EXPECT(0x2688, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01B8
        gbc.setState(0xa6fc, 0xf2b4, 0x5f90, 0x8bff, 0x1ce8, 0x2d11, 0x1, 0x1);
        gbc.writeMem(0xa6fc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xf2b4, gbc.sp());
        EXPECT(0xa6fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6fc));
        EXPECT(0x51, gbc.readMem(0xa6fd));
        // CB 51 01B9
        gbc.setState(0xab0b, 0x63fa, 0x5b80, 0xf9d5, 0x1a79, 0xc86e, 0x1, 0x1);
        gbc.writeMem(0xab0b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x63fa, gbc.sp());
        EXPECT(0xab0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab0b));
        EXPECT(0x51, gbc.readMem(0xab0c));
        // CB 51 01BA
        gbc.setState(0x4f9b, 0x22ff, 0x2dc0, 0x4cc3, 0x3870, 0x4cef, 0x1, 0x0);
        gbc.writeMem(0x4f9b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x22ff, gbc.sp());
        EXPECT(0x4f9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01BB
        gbc.setState(0x89f4, 0xb469, 0xd240, 0x783b, 0x22d3, 0x2a1, 0x1, 0x0);
        gbc.writeMem(0x89f4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xb469, gbc.sp());
        EXPECT(0x89f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89f4));
        EXPECT(0x51, gbc.readMem(0x89f5));
        // CB 51 01BC
        gbc.setState(0x8350, 0xb2db, 0xe010, 0x2164, 0x54f, 0xc6dd, 0x1, 0x1);
        gbc.writeMem(0x8350, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xb2db, gbc.sp());
        EXPECT(0x8352, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8350));
        EXPECT(0x51, gbc.readMem(0x8351));
        // CB 51 01BD
        gbc.setState(0xbf9b, 0x1eff, 0x37f0, 0xe697, 0x9183, 0x167a, 0x0, 0x1);
        gbc.writeMem(0xbf9b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x1eff, gbc.sp());
        EXPECT(0xbf9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf9b));
        EXPECT(0x51, gbc.readMem(0xbf9c));
        // CB 51 01BE
        gbc.setState(0x801e, 0x61d5, 0xd640, 0x389e, 0x84f9, 0x4974, 0x0, 0x0);
        gbc.writeMem(0x801e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x61d5, gbc.sp());
        EXPECT(0x8020, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x801e));
        EXPECT(0x51, gbc.readMem(0x801f));
        // CB 51 01BF
        gbc.setState(0x48c3, 0x9747, 0xf5e0, 0x9974, 0x8eda, 0xf4f9, 0x1, 0x0);
        gbc.writeMem(0x48c3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x9747, gbc.sp());
        EXPECT(0x48c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01C0
        gbc.setState(0x6d30, 0xec17, 0x4040, 0x37cb, 0x5f0d, 0x945, 0x0, 0x0);
        gbc.writeMem(0x6d30, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xec17, gbc.sp());
        EXPECT(0x6d32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01C1
        gbc.setState(0x12c1, 0x1f83, 0x2c0, 0x18f6, 0x881a, 0x4de4, 0x0, 0x1);
        gbc.writeMem(0x12c1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x1f83, gbc.sp());
        EXPECT(0x12c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01C2
        gbc.setState(0x88f6, 0x9ea9, 0xbbc0, 0xc1e2, 0x7a, 0xcae9, 0x0, 0x1);
        gbc.writeMem(0x88f6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x9ea9, gbc.sp());
        EXPECT(0x88f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88f6));
        EXPECT(0x51, gbc.readMem(0x88f7));
        // CB 51 01C3
        gbc.setState(0x91fb, 0x688d, 0xf5d0, 0x498d, 0x50ff, 0xb58b, 0x0, 0x0);
        gbc.writeMem(0x91fb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x688d, gbc.sp());
        EXPECT(0x91fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91fb));
        EXPECT(0x51, gbc.readMem(0x91fc));
        // CB 51 01C4
        gbc.setState(0x5e29, 0x2218, 0xb080, 0xe390, 0xc86a, 0x58cb, 0x1, 0x1);
        gbc.writeMem(0x5e29, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x2218, gbc.sp());
        EXPECT(0x5e2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01C5
        gbc.setState(0x1cc6, 0xa7eb, 0xfb50, 0xab08, 0x149d, 0xf234, 0x1, 0x1);
        gbc.writeMem(0x1cc6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xa7eb, gbc.sp());
        EXPECT(0x1cc8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01C6
        gbc.setState(0xef91, 0xf6f, 0xbc00, 0x357d, 0xdeb2, 0x4bf1, 0x0, 0x1);
        gbc.writeMem(0xef91, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xf6f, gbc.sp());
        EXPECT(0xef93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef91));
        EXPECT(0x51, gbc.readMem(0xef92));
        // CB 51 01C7
        gbc.setState(0x410d, 0x58ff, 0xda90, 0xe40c, 0x1819, 0xdac9, 0x1, 0x0);
        gbc.writeMem(0x410d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x58ff, gbc.sp());
        EXPECT(0x410f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01C8
        gbc.setState(0xe5b8, 0x320b, 0x8250, 0x5da3, 0x11c1, 0xa25c, 0x1, 0x0);
        gbc.writeMem(0xe5b8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x320b, gbc.sp());
        EXPECT(0xe5ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5b8));
        EXPECT(0x51, gbc.readMem(0xe5b9));
        // CB 51 01C9
        gbc.setState(0x6e0, 0xc9c0, 0xe230, 0xa936, 0x517f, 0x27ff, 0x1, 0x0);
        gbc.writeMem(0x6e0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xc9c0, gbc.sp());
        EXPECT(0x6e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01CA
        gbc.setState(0x272d, 0xbe48, 0x6b90, 0x8be2, 0x8016, 0x52ef, 0x0, 0x0);
        gbc.writeMem(0x272d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xbe48, gbc.sp());
        EXPECT(0x272f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01CC
        gbc.setState(0x5678, 0x85a8, 0x2d50, 0x5fd1, 0xdbcb, 0x1e8f, 0x1, 0x0);
        gbc.writeMem(0x5678, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x85a8, gbc.sp());
        EXPECT(0x567a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01CD
        gbc.setState(0xa934, 0x4f9, 0x2430, 0x6c8c, 0x8d3e, 0x4635, 0x0, 0x0);
        gbc.writeMem(0xa934, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x4f9, gbc.sp());
        EXPECT(0xa936, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa934));
        EXPECT(0x51, gbc.readMem(0xa935));
        // CB 51 01CE
        gbc.setState(0x5e83, 0x2502, 0x4cb0, 0x310b, 0x146f, 0x3d7e, 0x0, 0x1);
        gbc.writeMem(0x5e83, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x2502, gbc.sp());
        EXPECT(0x5e85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01CF
        gbc.setState(0x5e66, 0xafda, 0x1180, 0x1813, 0x92c6, 0xf685, 0x0, 0x0);
        gbc.writeMem(0x5e66, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xafda, gbc.sp());
        EXPECT(0x5e68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01D1
        gbc.setState(0x8ce3, 0x986b, 0x8df0, 0xf2c4, 0x3123, 0x5bac, 0x1, 0x0);
        gbc.writeMem(0x8ce3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x986b, gbc.sp());
        EXPECT(0x8ce5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ce3));
        EXPECT(0x51, gbc.readMem(0x8ce4));
        // CB 51 01D2
        gbc.setState(0x848d, 0xee3a, 0xcd90, 0x7e2b, 0xa8be, 0x6d7, 0x1, 0x0);
        gbc.writeMem(0x848d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xee3a, gbc.sp());
        EXPECT(0x848f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x848d));
        EXPECT(0x51, gbc.readMem(0x848e));
        // CB 51 01D3
        gbc.setState(0x3d5d, 0xd05c, 0xde30, 0x317f, 0x7512, 0x65be, 0x0, 0x0);
        gbc.writeMem(0x3d5d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xd05c, gbc.sp());
        EXPECT(0x3d5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01D4
        gbc.setState(0x9469, 0xad02, 0xd2f0, 0x8503, 0xeb47, 0x50c7, 0x0, 0x1);
        gbc.writeMem(0x9469, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xad02, gbc.sp());
        EXPECT(0x946b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9469));
        EXPECT(0x51, gbc.readMem(0x946a));
        // CB 51 01D5
        gbc.setState(0x85c6, 0x15, 0xe7e0, 0x7b58, 0x7532, 0xd908, 0x1, 0x0);
        gbc.writeMem(0x85c6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x15, gbc.sp());
        EXPECT(0x85c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85c6));
        EXPECT(0x51, gbc.readMem(0x85c7));
        // CB 51 01D6
        gbc.setState(0xe0f9, 0x1113, 0x76f0, 0xb5c0, 0x7f77, 0xdb51, 0x1, 0x1);
        gbc.writeMem(0xe0f9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x1113, gbc.sp());
        EXPECT(0xe0fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0f9));
        EXPECT(0x51, gbc.readMem(0xe0fa));
        // CB 51 01D7
        gbc.setState(0x1535, 0xaf64, 0x4e80, 0x5a3b, 0x5121, 0x3e13, 0x0, 0x0);
        gbc.writeMem(0x1535, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xaf64, gbc.sp());
        EXPECT(0x1537, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01D8
        gbc.setState(0x2d00, 0xce8e, 0x2130, 0x9bba, 0x6d2f, 0x28ee, 0x0, 0x1);
        gbc.writeMem(0x2d00, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xce8e, gbc.sp());
        EXPECT(0x2d02, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01D9
        gbc.setState(0x24e8, 0x6c19, 0xb070, 0x2b8b, 0x7267, 0x7b62, 0x0, 0x1);
        gbc.writeMem(0x24e8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x6c19, gbc.sp());
        EXPECT(0x24ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01DA
        gbc.setState(0xac82, 0x4249, 0xc5d0, 0x3d8b, 0xabe2, 0x48b5, 0x0, 0x0);
        gbc.writeMem(0xac82, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x4249, gbc.sp());
        EXPECT(0xac84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac82));
        EXPECT(0x51, gbc.readMem(0xac83));
        // CB 51 01DB
        gbc.setState(0x7884, 0x94be, 0xac40, 0xabdf, 0x5c9c, 0x1314, 0x1, 0x0);
        gbc.writeMem(0x7884, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x94be, gbc.sp());
        EXPECT(0x7886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01DC
        gbc.setState(0x98e2, 0x48fe, 0x7380, 0xdb4a, 0xafeb, 0x967c, 0x1, 0x0);
        gbc.writeMem(0x98e2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x48fe, gbc.sp());
        EXPECT(0x98e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98e2));
        EXPECT(0x51, gbc.readMem(0x98e3));
        // CB 51 01DD
        gbc.setState(0xb59d, 0xa866, 0xc1f0, 0xd1b0, 0x18e4, 0x34c7, 0x0, 0x0);
        gbc.writeMem(0xb59d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xa866, gbc.sp());
        EXPECT(0xb59f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb59d));
        EXPECT(0x51, gbc.readMem(0xb59e));
        // CB 51 01DF
        gbc.setState(0x1256, 0x39b2, 0x8170, 0xb612, 0x89f5, 0x608d, 0x1, 0x0);
        gbc.writeMem(0x1256, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x39b2, gbc.sp());
        EXPECT(0x1258, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01E0
        gbc.setState(0xe2e1, 0x873d, 0xe5a0, 0x20f1, 0x4884, 0x5bb9, 0x0, 0x0);
        gbc.writeMem(0xe2e1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x873d, gbc.sp());
        EXPECT(0xe2e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2e1));
        EXPECT(0x51, gbc.readMem(0xe2e2));
        // CB 51 01E1
        gbc.setState(0x1585, 0x1dcb, 0xd580, 0x3af6, 0x5675, 0xce13, 0x1, 0x1);
        gbc.writeMem(0x1585, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x1dcb, gbc.sp());
        EXPECT(0x1587, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01E2
        gbc.setState(0x4ce4, 0x57e6, 0xaba0, 0x3cf, 0x25f6, 0x59c4, 0x1, 0x0);
        gbc.writeMem(0x4ce4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x57e6, gbc.sp());
        EXPECT(0x4ce6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01E3
        gbc.setState(0x3959, 0xea26, 0x8cf0, 0xa3da, 0xc83e, 0xc704, 0x0, 0x1);
        gbc.writeMem(0x3959, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xea26, gbc.sp());
        EXPECT(0x395b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01E4
        gbc.setState(0x63c, 0x1e1f, 0x5940, 0x84d2, 0xa4ca, 0x799f, 0x0, 0x1);
        gbc.writeMem(0x63c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x1e1f, gbc.sp());
        EXPECT(0x63e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01E5
        gbc.setState(0xb1d5, 0xceba, 0xbbe0, 0xe431, 0xa283, 0x492a, 0x1, 0x0);
        gbc.writeMem(0xb1d5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xceba, gbc.sp());
        EXPECT(0xb1d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1d5));
        EXPECT(0x51, gbc.readMem(0xb1d6));
        // CB 51 01E6
        gbc.setState(0x97c6, 0x9abd, 0xcec0, 0xf209, 0x4be9, 0xa045, 0x1, 0x0);
        gbc.writeMem(0x97c6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x9abd, gbc.sp());
        EXPECT(0x97c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97c6));
        EXPECT(0x51, gbc.readMem(0x97c7));
        // CB 51 01E7
        gbc.setState(0xd5a0, 0x807d, 0x3730, 0xb32e, 0x2fdb, 0x741a, 0x0, 0x0);
        gbc.writeMem(0xd5a0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x807d, gbc.sp());
        EXPECT(0xd5a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5a0));
        EXPECT(0x51, gbc.readMem(0xd5a1));
        // CB 51 01E8
        gbc.setState(0x538, 0x97a4, 0x20c0, 0xd531, 0xde15, 0xc557, 0x1, 0x0);
        gbc.writeMem(0x538, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x97a4, gbc.sp());
        EXPECT(0x53a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01EB
        gbc.setState(0x9b53, 0x60d3, 0xf3a0, 0x5277, 0xb154, 0xd343, 0x1, 0x1);
        gbc.writeMem(0x9b53, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x60d3, gbc.sp());
        EXPECT(0x9b55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b53));
        EXPECT(0x51, gbc.readMem(0x9b54));
        // CB 51 01ED
        gbc.setState(0x87d4, 0xe2b6, 0xa730, 0x9b2b, 0x5b6f, 0xb519, 0x0, 0x1);
        gbc.writeMem(0x87d4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xe2b6, gbc.sp());
        EXPECT(0x87d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87d4));
        EXPECT(0x51, gbc.readMem(0x87d5));
        // CB 51 01EE
        gbc.setState(0x5b2b, 0x8ee9, 0x14c0, 0xa241, 0x7e82, 0xe776, 0x1, 0x0);
        gbc.writeMem(0x5b2b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x8ee9, gbc.sp());
        EXPECT(0x5b2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01EF
        gbc.setState(0xeab3, 0x7ccc, 0x4230, 0xb57, 0x96aa, 0x8d16, 0x1, 0x0);
        gbc.writeMem(0xeab3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x7ccc, gbc.sp());
        EXPECT(0xeab5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeab3));
        EXPECT(0x51, gbc.readMem(0xeab4));
        // CB 51 01F0
        gbc.setState(0xba01, 0x5684, 0x370, 0xada7, 0xed3b, 0x6d80, 0x1, 0x0);
        gbc.writeMem(0xba01, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x5684, gbc.sp());
        EXPECT(0xba03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba01));
        EXPECT(0x51, gbc.readMem(0xba02));
        // CB 51 01F1
        gbc.setState(0x52b0, 0xe7ab, 0xa120, 0x862d, 0xf432, 0x9609, 0x1, 0x0);
        gbc.writeMem(0x52b0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xe7ab, gbc.sp());
        EXPECT(0x52b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01F2
        gbc.setState(0x7371, 0xd355, 0xdf80, 0xa7c0, 0xb71b, 0xd09a, 0x0, 0x1);
        gbc.writeMem(0x7371, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xd355, gbc.sp());
        EXPECT(0x7373, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01F3
        gbc.setState(0x7c3a, 0xb284, 0x9070, 0xeb3a, 0x6960, 0x218c, 0x1, 0x1);
        gbc.writeMem(0x7c3a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xb284, gbc.sp());
        EXPECT(0x7c3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01F4
        gbc.setState(0x44a9, 0x5fae, 0x5a80, 0x9448, 0x1d1b, 0xab7f, 0x0, 0x1);
        gbc.writeMem(0x44a9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x5fae, gbc.sp());
        EXPECT(0x44ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01F5
        gbc.setState(0x4923, 0x77bc, 0x2e40, 0xe97a, 0x7790, 0xce13, 0x0, 0x1);
        gbc.writeMem(0x4923, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x77bc, gbc.sp());
        EXPECT(0x4925, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01F6
        gbc.setState(0x4b8a, 0x115c, 0x3830, 0xc2f9, 0x3364, 0xd376, 0x0, 0x1);
        gbc.writeMem(0x4b8a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x115c, gbc.sp());
        EXPECT(0x4b8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01F7
        gbc.setState(0xac53, 0x4b77, 0x4110, 0x990f, 0x43b6, 0xdfd3, 0x1, 0x0);
        gbc.writeMem(0xac53, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x4b77, gbc.sp());
        EXPECT(0xac55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac53));
        EXPECT(0x51, gbc.readMem(0xac54));
        // CB 51 01F8
        gbc.setState(0x7163, 0x1729, 0xfa30, 0xd8a0, 0xdcb2, 0x51aa, 0x0, 0x0);
        gbc.writeMem(0x7163, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x1729, gbc.sp());
        EXPECT(0x7165, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01F9
        gbc.setState(0x659, 0x8b53, 0xe690, 0xd659, 0xc312, 0x644c, 0x0, 0x0);
        gbc.writeMem(0x659, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x8b53, gbc.sp());
        EXPECT(0x65b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01FA
        gbc.setState(0xb5ba, 0xf316, 0xa2c0, 0x799a, 0xf435, 0x3648, 0x1, 0x1);
        gbc.writeMem(0xb5ba, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xf316, gbc.sp());
        EXPECT(0xb5bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5ba));
        EXPECT(0x51, gbc.readMem(0xb5bb));
        // CB 51 01FB
        gbc.setState(0x3e24, 0x4326, 0x710, 0xa666, 0x7a66, 0xe720, 0x0, 0x0);
        gbc.writeMem(0x3e24, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x4326, gbc.sp());
        EXPECT(0x3e26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 01FC
        gbc.setState(0x3787, 0x1008, 0xba80, 0x47ae, 0xece, 0xb15a, 0x0, 0x0);
        gbc.writeMem(0x3787, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x1008, gbc.sp());
        EXPECT(0x3789, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01FD
        gbc.setState(0x224c, 0x7974, 0xb400, 0x3a72, 0x8682, 0x572a, 0x1, 0x0);
        gbc.writeMem(0x224c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x7974, gbc.sp());
        EXPECT(0x224e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 01FE
        gbc.setState(0xa557, 0x4987, 0x43e0, 0x9b84, 0x646b, 0xe9de, 0x0, 0x0);
        gbc.writeMem(0xa557, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x4987, gbc.sp());
        EXPECT(0xa559, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa557));
        EXPECT(0x51, gbc.readMem(0xa558));
        // CB 51 01FF
        gbc.setState(0x960e, 0x4291, 0x2b40, 0x5273, 0x88b9, 0x3e9e, 0x0, 0x1);
        gbc.writeMem(0x960e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x4291, gbc.sp());
        EXPECT(0x9610, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x960e));
        EXPECT(0x51, gbc.readMem(0x960f));
        // CB 51 0200
        gbc.setState(0x27fb, 0x21f, 0x3840, 0x9d1b, 0x8a48, 0xcfc8, 0x0, 0x0);
        gbc.writeMem(0x27fb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x21f, gbc.sp());
        EXPECT(0x27fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0201
        gbc.setState(0xae8e, 0x9a6d, 0xe1c0, 0x3dd7, 0xfc9e, 0xe43f, 0x1, 0x0);
        gbc.writeMem(0xae8e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x9a6d, gbc.sp());
        EXPECT(0xae90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae8e));
        EXPECT(0x51, gbc.readMem(0xae8f));
        // CB 51 0202
        gbc.setState(0x7490, 0x6c8e, 0xb50, 0x2b7c, 0x9c04, 0x85f1, 0x0, 0x0);
        gbc.writeMem(0x7490, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x6c8e, gbc.sp());
        EXPECT(0x7492, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0203
        gbc.setState(0x438a, 0xe45, 0xb00, 0x5a65, 0x24a2, 0x445c, 0x1, 0x0);
        gbc.writeMem(0x438a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xe45, gbc.sp());
        EXPECT(0x438c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0204
        gbc.setState(0x162a, 0xbcac, 0x3560, 0x8408, 0x9eae, 0x42bf, 0x0, 0x1);
        gbc.writeMem(0x162a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xbcac, gbc.sp());
        EXPECT(0x162c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0205
        gbc.setState(0xe15, 0xfe74, 0x9d70, 0x3c23, 0x7ee4, 0xa993, 0x0, 0x0);
        gbc.writeMem(0xe15, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xfe74, gbc.sp());
        EXPECT(0xe17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0206
        gbc.setState(0xfcf, 0xb23f, 0x4d50, 0xb098, 0xe380, 0xbdf5, 0x0, 0x0);
        gbc.writeMem(0xfcf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xb23f, gbc.sp());
        EXPECT(0xfd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0207
        gbc.setState(0x5329, 0x5f84, 0x5d30, 0xbb7f, 0x1b3e, 0x40b1, 0x1, 0x0);
        gbc.writeMem(0x5329, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x5f84, gbc.sp());
        EXPECT(0x532b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0208
        gbc.setState(0xcc6e, 0x615c, 0xc540, 0xa892, 0x4505, 0x971e, 0x0, 0x0);
        gbc.writeMem(0xcc6e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x615c, gbc.sp());
        EXPECT(0xcc70, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc6e));
        EXPECT(0x51, gbc.readMem(0xcc6f));
        // CB 51 0209
        gbc.setState(0x84cb, 0x39ec, 0x5b60, 0xb910, 0x9c8, 0xe87c, 0x0, 0x1);
        gbc.writeMem(0x84cb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x39ec, gbc.sp());
        EXPECT(0x84cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84cb));
        EXPECT(0x51, gbc.readMem(0x84cc));
        // CB 51 020A
        gbc.setState(0x862, 0x64b5, 0xebd0, 0x7f7e, 0x1b62, 0x74ca, 0x1, 0x0);
        gbc.writeMem(0x862, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x64b5, gbc.sp());
        EXPECT(0x864, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 020B
        gbc.setState(0xb47c, 0x7bbd, 0x4ea0, 0x4049, 0x8231, 0x64fb, 0x0, 0x0);
        gbc.writeMem(0xb47c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x7bbd, gbc.sp());
        EXPECT(0xb47e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb47c));
        EXPECT(0x51, gbc.readMem(0xb47d));
        // CB 51 020C
        gbc.setState(0x6114, 0x533, 0x3490, 0xe353, 0x3577, 0x62ce, 0x0, 0x1);
        gbc.writeMem(0x6114, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x533, gbc.sp());
        EXPECT(0x6116, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 020D
        gbc.setState(0x102d, 0x5529, 0x8ad0, 0xedf1, 0x2e88, 0xd0f2, 0x1, 0x1);
        gbc.writeMem(0x102d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x5529, gbc.sp());
        EXPECT(0x102f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 020E
        gbc.setState(0xeb3, 0xca83, 0xf050, 0x1c37, 0xe1dc, 0x75e3, 0x0, 0x0);
        gbc.writeMem(0xeb3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xca83, gbc.sp());
        EXPECT(0xeb5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 020F
        gbc.setState(0x50b0, 0xa9db, 0x8710, 0xf160, 0x7183, 0xe47f, 0x1, 0x1);
        gbc.writeMem(0x50b0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xa9db, gbc.sp());
        EXPECT(0x50b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0210
        gbc.setState(0x6c23, 0x3d4b, 0xeb30, 0x1170, 0x5207, 0x7af6, 0x1, 0x0);
        gbc.writeMem(0x6c23, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x3d4b, gbc.sp());
        EXPECT(0x6c25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0211
        gbc.setState(0x5426, 0x477, 0x5c70, 0x5e87, 0xf808, 0x2135, 0x1, 0x0);
        gbc.writeMem(0x5426, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x477, gbc.sp());
        EXPECT(0x5428, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0213
        gbc.setState(0x4a71, 0xbb6, 0x9350, 0xa337, 0x239f, 0x2d23, 0x0, 0x0);
        gbc.writeMem(0x4a71, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xbb6, gbc.sp());
        EXPECT(0x4a73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0215
        gbc.setState(0x998b, 0xfe60, 0x7e60, 0xd62a, 0x99b1, 0x596e, 0x1, 0x0);
        gbc.writeMem(0x998b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xfe60, gbc.sp());
        EXPECT(0x998d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x998b));
        EXPECT(0x51, gbc.readMem(0x998c));
        // CB 51 0216
        gbc.setState(0xae5c, 0x6367, 0x6380, 0xe061, 0xa7, 0x1b00, 0x1, 0x1);
        gbc.writeMem(0xae5c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x6367, gbc.sp());
        EXPECT(0xae5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae5c));
        EXPECT(0x51, gbc.readMem(0xae5d));
        // CB 51 0217
        gbc.setState(0xac8e, 0x93c3, 0xb610, 0xe15d, 0x794b, 0xf1c8, 0x1, 0x1);
        gbc.writeMem(0xac8e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x93c3, gbc.sp());
        EXPECT(0xac90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac8e));
        EXPECT(0x51, gbc.readMem(0xac8f));
        // CB 51 0218
        gbc.setState(0xb897, 0xf0dd, 0xa4f0, 0xd79c, 0x5669, 0xba05, 0x0, 0x0);
        gbc.writeMem(0xb897, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xf0dd, gbc.sp());
        EXPECT(0xb899, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb897));
        EXPECT(0x51, gbc.readMem(0xb898));
        // CB 51 021A
        gbc.setState(0x278e, 0x57c5, 0x5d40, 0x1f2a, 0x9df2, 0x6ef4, 0x0, 0x0);
        gbc.writeMem(0x278e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x57c5, gbc.sp());
        EXPECT(0x2790, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 021B
        gbc.setState(0xef9f, 0xfcce, 0x5a90, 0xdd7b, 0xcb06, 0x443f, 0x1, 0x0);
        gbc.writeMem(0xef9f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xfcce, gbc.sp());
        EXPECT(0xefa1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef9f));
        EXPECT(0x51, gbc.readMem(0xefa0));
        // CB 51 021C
        gbc.setState(0x41d9, 0x3a7d, 0x81b0, 0x5dfa, 0x4d46, 0xf474, 0x1, 0x0);
        gbc.writeMem(0x41d9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x3a7d, gbc.sp());
        EXPECT(0x41db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 021D
        gbc.setState(0x4d1c, 0xd06e, 0xc2c0, 0x255f, 0x3e85, 0x9d30, 0x0, 0x1);
        gbc.writeMem(0x4d1c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xd06e, gbc.sp());
        EXPECT(0x4d1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 021E
        gbc.setState(0x4d94, 0xaad5, 0xe640, 0xdd4f, 0xb9ec, 0xb9da, 0x1, 0x0);
        gbc.writeMem(0x4d94, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xaad5, gbc.sp());
        EXPECT(0x4d96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 021F
        gbc.setState(0xb987, 0x3489, 0xaa0, 0xaafc, 0x86a6, 0x795e, 0x0, 0x1);
        gbc.writeMem(0xb987, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x3489, gbc.sp());
        EXPECT(0xb989, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb987));
        EXPECT(0x51, gbc.readMem(0xb988));
        // CB 51 0220
        gbc.setState(0xde9e, 0xc355, 0x85d0, 0xdedc, 0x6098, 0x1e5f, 0x0, 0x1);
        gbc.writeMem(0xde9e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xc355, gbc.sp());
        EXPECT(0xdea0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde9e));
        EXPECT(0x51, gbc.readMem(0xde9f));
        // CB 51 0221
        gbc.setState(0x1324, 0x1a50, 0x8410, 0x25, 0x2f3b, 0xe07d, 0x0, 0x0);
        gbc.writeMem(0x1324, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x1a50, gbc.sp());
        EXPECT(0x1326, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0222
        gbc.setState(0x99cb, 0x2522, 0xee20, 0xea37, 0x9183, 0x23ea, 0x0, 0x1);
        gbc.writeMem(0x99cb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x2522, gbc.sp());
        EXPECT(0x99cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99cb));
        EXPECT(0x51, gbc.readMem(0x99cc));
        // CB 51 0223
        gbc.setState(0xc290, 0x3cc6, 0x57a0, 0x4a37, 0x5f18, 0xe042, 0x1, 0x1);
        gbc.writeMem(0xc290, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x3cc6, gbc.sp());
        EXPECT(0xc292, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc290));
        EXPECT(0x51, gbc.readMem(0xc291));
        // CB 51 0224
        gbc.setState(0x10f, 0x42e0, 0x5970, 0x351, 0x2c4c, 0x24bc, 0x1, 0x0);
        gbc.writeMem(0x10f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x42e0, gbc.sp());
        EXPECT(0x111, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0225
        gbc.setState(0xadad, 0x71db, 0xb1c0, 0x978, 0x3154, 0xda5e, 0x1, 0x1);
        gbc.writeMem(0xadad, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x71db, gbc.sp());
        EXPECT(0xadaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadad));
        EXPECT(0x51, gbc.readMem(0xadae));
        // CB 51 0226
        gbc.setState(0x60df, 0xdb61, 0x3b50, 0xd17d, 0x6cf, 0xf58d, 0x1, 0x1);
        gbc.writeMem(0x60df, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xdb61, gbc.sp());
        EXPECT(0x60e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0227
        gbc.setState(0xe539, 0x409b, 0x1920, 0x1634, 0x5af1, 0x3ee, 0x1, 0x1);
        gbc.writeMem(0xe539, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x409b, gbc.sp());
        EXPECT(0xe53b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe539));
        EXPECT(0x51, gbc.readMem(0xe53a));
        // CB 51 0228
        gbc.setState(0xb56a, 0xb88b, 0x2cd0, 0x35f, 0x5a18, 0x1388, 0x0, 0x1);
        gbc.writeMem(0xb56a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xb88b, gbc.sp());
        EXPECT(0xb56c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb56a));
        EXPECT(0x51, gbc.readMem(0xb56b));
        // CB 51 0229
        gbc.setState(0x90be, 0xa18d, 0x80d0, 0xd084, 0xac18, 0xd50e, 0x0, 0x1);
        gbc.writeMem(0x90be, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xa18d, gbc.sp());
        EXPECT(0x90c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90be));
        EXPECT(0x51, gbc.readMem(0x90bf));
        // CB 51 022A
        gbc.setState(0xc34, 0x733d, 0x2520, 0x9de, 0xb9ba, 0x2edd, 0x1, 0x1);
        gbc.writeMem(0xc34, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x733d, gbc.sp());
        EXPECT(0xc36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 022B
        gbc.setState(0xb564, 0x34c5, 0xde40, 0xbeed, 0xdd65, 0xeffd, 0x1, 0x1);
        gbc.writeMem(0xb564, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x34c5, gbc.sp());
        EXPECT(0xb566, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb564));
        EXPECT(0x51, gbc.readMem(0xb565));
        // CB 51 022C
        gbc.setState(0x2362, 0x5e41, 0x3940, 0x5deb, 0xf51a, 0x3f3a, 0x1, 0x0);
        gbc.writeMem(0x2362, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x5e41, gbc.sp());
        EXPECT(0x2364, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 022D
        gbc.setState(0xc611, 0x960f, 0x3fb0, 0xd546, 0x81c6, 0x7892, 0x1, 0x1);
        gbc.writeMem(0xc611, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x960f, gbc.sp());
        EXPECT(0xc613, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc611));
        EXPECT(0x51, gbc.readMem(0xc612));
        // CB 51 022E
        gbc.setState(0x537a, 0x6af1, 0xc720, 0x750c, 0xbedc, 0xddf4, 0x1, 0x0);
        gbc.writeMem(0x537a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x6af1, gbc.sp());
        EXPECT(0x537c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 022F
        gbc.setState(0x9df0, 0xe0ad, 0x5dd0, 0x5f36, 0x6088, 0x24a2, 0x1, 0x1);
        gbc.writeMem(0x9df0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xe0ad, gbc.sp());
        EXPECT(0x9df2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9df0));
        EXPECT(0x51, gbc.readMem(0x9df1));
        // CB 51 0230
        gbc.setState(0x9797, 0xe4b1, 0xcf10, 0x85c8, 0x9759, 0xebec, 0x0, 0x0);
        gbc.writeMem(0x9797, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xe4b1, gbc.sp());
        EXPECT(0x9799, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9797));
        EXPECT(0x51, gbc.readMem(0x9798));
        // CB 51 0231
        gbc.setState(0x8d4, 0xa034, 0xea60, 0xb0d3, 0x5cec, 0xd3c3, 0x1, 0x1);
        gbc.writeMem(0x8d4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xa034, gbc.sp());
        EXPECT(0x8d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0232
        gbc.setState(0xc9ea, 0x6635, 0xaf80, 0xdd78, 0x2ff5, 0x4209, 0x0, 0x0);
        gbc.writeMem(0xc9ea, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x6635, gbc.sp());
        EXPECT(0xc9ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9ea));
        EXPECT(0x51, gbc.readMem(0xc9eb));
        // CB 51 0233
        gbc.setState(0x8a52, 0x57c4, 0xaf90, 0x450, 0xb5c1, 0xc61c, 0x1, 0x1);
        gbc.writeMem(0x8a52, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x57c4, gbc.sp());
        EXPECT(0x8a54, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a52));
        EXPECT(0x51, gbc.readMem(0x8a53));
        // CB 51 0234
        gbc.setState(0xe852, 0xf2ed, 0xec0, 0x97b4, 0x4eda, 0xcf0, 0x1, 0x0);
        gbc.writeMem(0xe852, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xf2ed, gbc.sp());
        EXPECT(0xe854, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe852));
        EXPECT(0x51, gbc.readMem(0xe853));
        // CB 51 0235
        gbc.setState(0x9adb, 0x47ae, 0x57c0, 0xe276, 0xa77b, 0xd458, 0x0, 0x0);
        gbc.writeMem(0x9adb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x47ae, gbc.sp());
        EXPECT(0x9add, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9adb));
        EXPECT(0x51, gbc.readMem(0x9adc));
        // CB 51 0236
        gbc.setState(0x2b6a, 0x281, 0xc950, 0xd6e2, 0xe615, 0x7955, 0x0, 0x1);
        gbc.writeMem(0x2b6a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x281, gbc.sp());
        EXPECT(0x2b6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0239
        gbc.setState(0xa61, 0x9004, 0xa50, 0xf38c, 0x4fb6, 0xa78b, 0x0, 0x1);
        gbc.writeMem(0xa61, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x9004, gbc.sp());
        EXPECT(0xa63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 023A
        gbc.setState(0x3359, 0xe089, 0x4670, 0xcb2d, 0x7ebc, 0xe226, 0x0, 0x0);
        gbc.writeMem(0x3359, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xe089, gbc.sp());
        EXPECT(0x335b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 023B
        gbc.setState(0x91bd, 0x4861, 0x4270, 0xb881, 0x2cea, 0x52b0, 0x1, 0x0);
        gbc.writeMem(0x91bd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x4861, gbc.sp());
        EXPECT(0x91bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91bd));
        EXPECT(0x51, gbc.readMem(0x91be));
        // CB 51 023C
        gbc.setState(0x7ee0, 0xc7b5, 0x29a0, 0x5ddb, 0x76a, 0x4a72, 0x1, 0x1);
        gbc.writeMem(0x7ee0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xc7b5, gbc.sp());
        EXPECT(0x7ee2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 023D
        gbc.setState(0x6a2a, 0xdc0f, 0xa0a0, 0xb9d6, 0x3fb3, 0x9510, 0x1, 0x0);
        gbc.writeMem(0x6a2a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xdc0f, gbc.sp());
        EXPECT(0x6a2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 023E
        gbc.setState(0xbd42, 0x536e, 0x35c0, 0xe680, 0x6657, 0x22d2, 0x1, 0x1);
        gbc.writeMem(0xbd42, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x536e, gbc.sp());
        EXPECT(0xbd44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd42));
        EXPECT(0x51, gbc.readMem(0xbd43));
        // CB 51 023F
        gbc.setState(0x36c9, 0x629b, 0x70f0, 0xf39f, 0x3d06, 0xcc10, 0x0, 0x1);
        gbc.writeMem(0x36c9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x629b, gbc.sp());
        EXPECT(0x36cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0240
        gbc.setState(0xea85, 0x1ede, 0x1f50, 0xb4c5, 0xb3aa, 0x3c3, 0x1, 0x0);
        gbc.writeMem(0xea85, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x1ede, gbc.sp());
        EXPECT(0xea87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea85));
        EXPECT(0x51, gbc.readMem(0xea86));
        // CB 51 0241
        gbc.setState(0x9b75, 0xf9d8, 0x4cc0, 0xa77b, 0x1d43, 0xa501, 0x0, 0x0);
        gbc.writeMem(0x9b75, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xf9d8, gbc.sp());
        EXPECT(0x9b77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b75));
        EXPECT(0x51, gbc.readMem(0x9b76));
        // CB 51 0242
        gbc.setState(0x9afd, 0xea93, 0xa490, 0x81b8, 0x432e, 0x8371, 0x0, 0x0);
        gbc.writeMem(0x9afd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xea93, gbc.sp());
        EXPECT(0x9aff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9afd));
        EXPECT(0x51, gbc.readMem(0x9afe));
        // CB 51 0243
        gbc.setState(0xe658, 0x7aa3, 0x4d10, 0x872d, 0xcb32, 0x9e65, 0x0, 0x1);
        gbc.writeMem(0xe658, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x7aa3, gbc.sp());
        EXPECT(0xe65a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe658));
        EXPECT(0x51, gbc.readMem(0xe659));
        // CB 51 0244
        gbc.setState(0xa9ed, 0x8675, 0x1db0, 0x7c24, 0x2895, 0xbb04, 0x0, 0x1);
        gbc.writeMem(0xa9ed, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x8675, gbc.sp());
        EXPECT(0xa9ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9ed));
        EXPECT(0x51, gbc.readMem(0xa9ee));
        // CB 51 0245
        gbc.setState(0x6cc3, 0x8dc0, 0xf690, 0xdfdb, 0x2c69, 0xfccf, 0x1, 0x0);
        gbc.writeMem(0x6cc3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x8dc0, gbc.sp());
        EXPECT(0x6cc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0246
        gbc.setState(0xa0e5, 0xb33f, 0x2e50, 0xc2e7, 0x8036, 0xc94a, 0x0, 0x0);
        gbc.writeMem(0xa0e5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xb33f, gbc.sp());
        EXPECT(0xa0e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0e5));
        EXPECT(0x51, gbc.readMem(0xa0e6));
        // CB 51 0247
        gbc.setState(0x9611, 0x3652, 0xb800, 0x3d10, 0x1b23, 0x769c, 0x0, 0x1);
        gbc.writeMem(0x9611, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x3652, gbc.sp());
        EXPECT(0x9613, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9611));
        EXPECT(0x51, gbc.readMem(0x9612));
        // CB 51 0248
        gbc.setState(0xdf19, 0xcb2, 0xa0c0, 0x5c05, 0x656e, 0xf5c5, 0x1, 0x0);
        gbc.writeMem(0xdf19, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xcb2, gbc.sp());
        EXPECT(0xdf1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf19));
        EXPECT(0x51, gbc.readMem(0xdf1a));
        // CB 51 0249
        gbc.setState(0xc30d, 0x69d6, 0x7c50, 0x23ec, 0xb27d, 0x6b9d, 0x0, 0x1);
        gbc.writeMem(0xc30d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x69d6, gbc.sp());
        EXPECT(0xc30f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc30d));
        EXPECT(0x51, gbc.readMem(0xc30e));
        // CB 51 024A
        gbc.setState(0x7eaa, 0xacdb, 0x5ff0, 0x3f96, 0x215e, 0x30d4, 0x1, 0x0);
        gbc.writeMem(0x7eaa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xacdb, gbc.sp());
        EXPECT(0x7eac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 024B
        gbc.setState(0xca89, 0x6899, 0xf620, 0x5078, 0x81a3, 0xc12b, 0x1, 0x0);
        gbc.writeMem(0xca89, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x6899, gbc.sp());
        EXPECT(0xca8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca89));
        EXPECT(0x51, gbc.readMem(0xca8a));
        // CB 51 024C
        gbc.setState(0x7e04, 0x85df, 0x4500, 0x239c, 0xa43e, 0xb548, 0x0, 0x0);
        gbc.writeMem(0x7e04, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x85df, gbc.sp());
        EXPECT(0x7e06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 024D
        gbc.setState(0x8e8, 0x56bc, 0xcef0, 0xf835, 0xd184, 0x62a2, 0x1, 0x1);
        gbc.writeMem(0x8e8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x56bc, gbc.sp());
        EXPECT(0x8ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 024F
        gbc.setState(0x9bb9, 0xa99c, 0x9500, 0x3642, 0xbf9a, 0x952c, 0x0, 0x0);
        gbc.writeMem(0x9bb9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xa99c, gbc.sp());
        EXPECT(0x9bbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bb9));
        EXPECT(0x51, gbc.readMem(0x9bba));
        // CB 51 0251
        gbc.setState(0xbe4f, 0x6262, 0xf0e0, 0xd3d6, 0x594e, 0x4fe8, 0x0, 0x1);
        gbc.writeMem(0xbe4f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x6262, gbc.sp());
        EXPECT(0xbe51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe4f));
        EXPECT(0x51, gbc.readMem(0xbe50));
        // CB 51 0252
        gbc.setState(0xdc8e, 0x7ee0, 0x6520, 0x9463, 0x8dde, 0x7726, 0x1, 0x1);
        gbc.writeMem(0xdc8e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x7ee0, gbc.sp());
        EXPECT(0xdc90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc8e));
        EXPECT(0x51, gbc.readMem(0xdc8f));
        // CB 51 0254
        gbc.setState(0xfdf, 0x93ac, 0x4b30, 0x67c7, 0x1f7f, 0xf127, 0x1, 0x0);
        gbc.writeMem(0xfdf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x93ac, gbc.sp());
        EXPECT(0xfe1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0255
        gbc.setState(0x849e, 0xb0e8, 0xcb20, 0x4736, 0x345e, 0x7bd1, 0x1, 0x1);
        gbc.writeMem(0x849e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xb0e8, gbc.sp());
        EXPECT(0x84a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x849e));
        EXPECT(0x51, gbc.readMem(0x849f));
        // CB 51 0256
        gbc.setState(0xe1b0, 0xedac, 0x5b50, 0xf40b, 0x5e76, 0xd377, 0x1, 0x1);
        gbc.writeMem(0xe1b0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xedac, gbc.sp());
        EXPECT(0xe1b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1b0));
        EXPECT(0x51, gbc.readMem(0xe1b1));
        // CB 51 0257
        gbc.setState(0xb23f, 0x3f66, 0xec60, 0xcd3b, 0x4514, 0x1f49, 0x1, 0x0);
        gbc.writeMem(0xb23f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x3f66, gbc.sp());
        EXPECT(0xb241, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb23f));
        EXPECT(0x51, gbc.readMem(0xb240));
        // CB 51 0258
        gbc.setState(0x1c8e, 0xed15, 0x45d0, 0x360b, 0x5e0e, 0x3423, 0x1, 0x1);
        gbc.writeMem(0x1c8e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xed15, gbc.sp());
        EXPECT(0x1c90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0259
        gbc.setState(0xeeb7, 0xdcc2, 0x9090, 0x97fc, 0x1a80, 0xa4ee, 0x0, 0x0);
        gbc.writeMem(0xeeb7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xdcc2, gbc.sp());
        EXPECT(0xeeb9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeeb7));
        EXPECT(0x51, gbc.readMem(0xeeb8));
        // CB 51 025A
        gbc.setState(0xa28b, 0x924d, 0x4e50, 0xd3ed, 0x1071, 0x1ec0, 0x0, 0x1);
        gbc.writeMem(0xa28b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x924d, gbc.sp());
        EXPECT(0xa28d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa28b));
        EXPECT(0x51, gbc.readMem(0xa28c));
        // CB 51 025B
        gbc.setState(0x10bc, 0x7e94, 0x21e0, 0xdaa6, 0x889a, 0xe977, 0x1, 0x1);
        gbc.writeMem(0x10bc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x7e94, gbc.sp());
        EXPECT(0x10be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 025C
        gbc.setState(0xb74d, 0xc046, 0xd0c0, 0x60a6, 0xc17f, 0x3f62, 0x0, 0x1);
        gbc.writeMem(0xb74d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xc046, gbc.sp());
        EXPECT(0xb74f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb74d));
        EXPECT(0x51, gbc.readMem(0xb74e));
        // CB 51 025D
        gbc.setState(0xa55c, 0xe2ca, 0xb3c0, 0x6e42, 0x2869, 0xc112, 0x0, 0x1);
        gbc.writeMem(0xa55c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xe2ca, gbc.sp());
        EXPECT(0xa55e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa55c));
        EXPECT(0x51, gbc.readMem(0xa55d));
        // CB 51 025E
        gbc.setState(0x4df9, 0x6a36, 0x190, 0xfe55, 0xb3be, 0xffb9, 0x1, 0x0);
        gbc.writeMem(0x4df9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x6a36, gbc.sp());
        EXPECT(0x4dfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 025F
        gbc.setState(0xaaa6, 0xbdcf, 0xdbb0, 0x7ff6, 0x8222, 0x731e, 0x1, 0x0);
        gbc.writeMem(0xaaa6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xbdcf, gbc.sp());
        EXPECT(0xaaa8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaaa6));
        EXPECT(0x51, gbc.readMem(0xaaa7));
        // CB 51 0260
        gbc.setState(0x751c, 0xea01, 0xb00, 0x7448, 0x1e18, 0x117, 0x1, 0x1);
        gbc.writeMem(0x751c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xea01, gbc.sp());
        EXPECT(0x751e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0261
        gbc.setState(0x33cb, 0x43eb, 0x36e0, 0xa441, 0xa441, 0x653b, 0x1, 0x0);
        gbc.writeMem(0x33cb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x43eb, gbc.sp());
        EXPECT(0x33cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0262
        gbc.setState(0x6681, 0x5401, 0x89c0, 0x1dc9, 0x2316, 0xbdc2, 0x0, 0x1);
        gbc.writeMem(0x6681, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x5401, gbc.sp());
        EXPECT(0x6683, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0263
        gbc.setState(0x1a72, 0x4acc, 0xadf0, 0x7fb, 0x2db0, 0x1fbd, 0x0, 0x1);
        gbc.writeMem(0x1a72, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x4acc, gbc.sp());
        EXPECT(0x1a74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0264
        gbc.setState(0xb3aa, 0x239e, 0x9df0, 0x3b30, 0xabed, 0x4c31, 0x0, 0x1);
        gbc.writeMem(0xb3aa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x239e, gbc.sp());
        EXPECT(0xb3ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3aa));
        EXPECT(0x51, gbc.readMem(0xb3ab));
        // CB 51 0265
        gbc.setState(0xe8be, 0x74d0, 0xa2a0, 0x94ac, 0xbb72, 0xdf4d, 0x1, 0x1);
        gbc.writeMem(0xe8be, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x74d0, gbc.sp());
        EXPECT(0xe8c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8be));
        EXPECT(0x51, gbc.readMem(0xe8bf));
        // CB 51 0266
        gbc.setState(0x6ac5, 0x5e1a, 0xa680, 0x8b80, 0x9c5f, 0x2c93, 0x0, 0x0);
        gbc.writeMem(0x6ac5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x5e1a, gbc.sp());
        EXPECT(0x6ac7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0267
        gbc.setState(0x65e8, 0x3e50, 0x9af0, 0x14ce, 0xf011, 0x2b52, 0x0, 0x1);
        gbc.writeMem(0x65e8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x3e50, gbc.sp());
        EXPECT(0x65ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0268
        gbc.setState(0xd58, 0x55ba, 0xd9f0, 0xa6d0, 0xfd69, 0x4e94, 0x1, 0x0);
        gbc.writeMem(0xd58, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x55ba, gbc.sp());
        EXPECT(0xd5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0269
        gbc.setState(0xab19, 0x5ee2, 0xfd70, 0xb8a0, 0x2f75, 0x88f5, 0x1, 0x1);
        gbc.writeMem(0xab19, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x5ee2, gbc.sp());
        EXPECT(0xab1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab19));
        EXPECT(0x51, gbc.readMem(0xab1a));
        // CB 51 026B
        gbc.setState(0xe3bb, 0x888f, 0x9b40, 0xd8b0, 0x65b4, 0x274e, 0x0, 0x0);
        gbc.writeMem(0xe3bb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x888f, gbc.sp());
        EXPECT(0xe3bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3bb));
        EXPECT(0x51, gbc.readMem(0xe3bc));
        // CB 51 026C
        gbc.setState(0x1eec, 0xa1af, 0x8d50, 0x831f, 0x614, 0x4b3c, 0x1, 0x0);
        gbc.writeMem(0x1eec, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xa1af, gbc.sp());
        EXPECT(0x1eee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 026D
        gbc.setState(0xea34, 0xe2ef, 0xf520, 0xb1e0, 0x8b8e, 0x7698, 0x1, 0x1);
        gbc.writeMem(0xea34, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe2ef, gbc.sp());
        EXPECT(0xea36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea34));
        EXPECT(0x51, gbc.readMem(0xea35));
        // CB 51 026F
        gbc.setState(0xd1b7, 0x68f5, 0x4e20, 0x8a03, 0xf341, 0x2858, 0x0, 0x1);
        gbc.writeMem(0xd1b7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x68f5, gbc.sp());
        EXPECT(0xd1b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1b7));
        EXPECT(0x51, gbc.readMem(0xd1b8));
        // CB 51 0271
        gbc.setState(0x662b, 0x44bf, 0x4d90, 0xf36b, 0xc9f9, 0xf994, 0x1, 0x1);
        gbc.writeMem(0x662b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x44bf, gbc.sp());
        EXPECT(0x662d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0272
        gbc.setState(0x5a1, 0xbd3e, 0x3820, 0x4581, 0x673b, 0x8149, 0x1, 0x1);
        gbc.writeMem(0x5a1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xbd3e, gbc.sp());
        EXPECT(0x5a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0273
        gbc.setState(0x3fb5, 0x3b68, 0x2060, 0x2cdb, 0x6440, 0xd3d3, 0x0, 0x1);
        gbc.writeMem(0x3fb5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x3b68, gbc.sp());
        EXPECT(0x3fb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0274
        gbc.setState(0x640f, 0x7970, 0xbb0, 0x5de1, 0xedaa, 0xb764, 0x1, 0x1);
        gbc.writeMem(0x640f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x7970, gbc.sp());
        EXPECT(0x6411, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0275
        gbc.setState(0x2e15, 0xc575, 0xe750, 0x22b2, 0x6dff, 0x2b0e, 0x1, 0x1);
        gbc.writeMem(0x2e15, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xc575, gbc.sp());
        EXPECT(0x2e17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0276
        gbc.setState(0x61d0, 0xbe39, 0xe680, 0x6ed2, 0x867e, 0xb081, 0x1, 0x0);
        gbc.writeMem(0x61d0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xbe39, gbc.sp());
        EXPECT(0x61d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0277
        gbc.setState(0x1d2b, 0x4170, 0x63e0, 0x4a8a, 0xef3, 0xd013, 0x0, 0x1);
        gbc.writeMem(0x1d2b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x4170, gbc.sp());
        EXPECT(0x1d2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0278
        gbc.setState(0x4b50, 0x29f5, 0xfc00, 0x4acb, 0xcef7, 0xe25b, 0x1, 0x0);
        gbc.writeMem(0x4b50, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x29f5, gbc.sp());
        EXPECT(0x4b52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0279
        gbc.setState(0xcf4d, 0x8824, 0xa150, 0xe40d, 0xaa36, 0x9626, 0x1, 0x1);
        gbc.writeMem(0xcf4d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x8824, gbc.sp());
        EXPECT(0xcf4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf4d));
        EXPECT(0x51, gbc.readMem(0xcf4e));
        // CB 51 027A
        gbc.setState(0xe8ed, 0x2cb9, 0x7d50, 0xe339, 0xe254, 0x4063, 0x0, 0x1);
        gbc.writeMem(0xe8ed, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x2cb9, gbc.sp());
        EXPECT(0xe8ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8ed));
        EXPECT(0x51, gbc.readMem(0xe8ee));
        // CB 51 027B
        gbc.setState(0xd7d4, 0xcaab, 0x4d50, 0x7c56, 0x7b64, 0x59b9, 0x1, 0x1);
        gbc.writeMem(0xd7d4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xcaab, gbc.sp());
        EXPECT(0xd7d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7d4));
        EXPECT(0x51, gbc.readMem(0xd7d5));
        // CB 51 027C
        gbc.setState(0x6ef6, 0x4ef4, 0x61e0, 0x7de4, 0x20f8, 0xfe84, 0x1, 0x1);
        gbc.writeMem(0x6ef6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x4ef4, gbc.sp());
        EXPECT(0x6ef8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 027D
        gbc.setState(0x87a7, 0xf48e, 0xe4c0, 0x3b9c, 0xfca8, 0xd5af, 0x0, 0x1);
        gbc.writeMem(0x87a7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xf48e, gbc.sp());
        EXPECT(0x87a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87a7));
        EXPECT(0x51, gbc.readMem(0x87a8));
        // CB 51 027E
        gbc.setState(0xd8b6, 0x5560, 0xef60, 0x1a21, 0xa868, 0x209f, 0x0, 0x1);
        gbc.writeMem(0xd8b6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x5560, gbc.sp());
        EXPECT(0xd8b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8b6));
        EXPECT(0x51, gbc.readMem(0xd8b7));
        // CB 51 027F
        gbc.setState(0x1b8b, 0xfd5b, 0xf60, 0x3b06, 0xfa66, 0x8e99, 0x0, 0x0);
        gbc.writeMem(0x1b8b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xfd5b, gbc.sp());
        EXPECT(0x1b8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0280
        gbc.setState(0x1d6, 0x367, 0x2030, 0xa490, 0x377a, 0x5e81, 0x1, 0x1);
        gbc.writeMem(0x1d6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x367, gbc.sp());
        EXPECT(0x1d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0281
        gbc.setState(0x8939, 0xeca3, 0x1e40, 0x4ec2, 0x95f8, 0x16f4, 0x1, 0x1);
        gbc.writeMem(0x8939, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xeca3, gbc.sp());
        EXPECT(0x893b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8939));
        EXPECT(0x51, gbc.readMem(0x893a));
        // CB 51 0282
        gbc.setState(0x2439, 0xc8a1, 0x9a40, 0x23aa, 0x6783, 0x4250, 0x1, 0x0);
        gbc.writeMem(0x2439, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xc8a1, gbc.sp());
        EXPECT(0x243b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0283
        gbc.setState(0xcbac, 0xff3b, 0x12e0, 0x4522, 0xd0e5, 0xfefd, 0x0, 0x0);
        gbc.writeMem(0xcbac, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xff3b, gbc.sp());
        EXPECT(0xcbae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbac));
        EXPECT(0x51, gbc.readMem(0xcbad));
        // CB 51 0284
        gbc.setState(0x40f5, 0x6d7c, 0x72b0, 0x2c57, 0x7d52, 0x9cf7, 0x1, 0x1);
        gbc.writeMem(0x40f5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x6d7c, gbc.sp());
        EXPECT(0x40f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0285
        gbc.setState(0x5fc6, 0x5846, 0x2540, 0x6f05, 0x302d, 0x9af7, 0x1, 0x0);
        gbc.writeMem(0x5fc6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x5846, gbc.sp());
        EXPECT(0x5fc8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0287
        gbc.setState(0x7bea, 0x244f, 0x2b70, 0x21ec, 0x9d31, 0x36f, 0x1, 0x1);
        gbc.writeMem(0x7bea, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x244f, gbc.sp());
        EXPECT(0x7bec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0288
        gbc.setState(0xd145, 0xeaee, 0x3270, 0xf5f6, 0x3933, 0xa832, 0x0, 0x1);
        gbc.writeMem(0xd145, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xeaee, gbc.sp());
        EXPECT(0xd147, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd145));
        EXPECT(0x51, gbc.readMem(0xd146));
        // CB 51 0289
        gbc.setState(0x7433, 0x264b, 0xdf10, 0xaad2, 0xef1d, 0x65dc, 0x0, 0x1);
        gbc.writeMem(0x7433, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x264b, gbc.sp());
        EXPECT(0x7435, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 028A
        gbc.setState(0xcafb, 0x7eb3, 0x93c0, 0xd27d, 0x3d1f, 0xc727, 0x1, 0x1);
        gbc.writeMem(0xcafb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x7eb3, gbc.sp());
        EXPECT(0xcafd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcafb));
        EXPECT(0x51, gbc.readMem(0xcafc));
        // CB 51 028B
        gbc.setState(0xea42, 0xf81a, 0x2830, 0x9e32, 0xf468, 0x9290, 0x1, 0x0);
        gbc.writeMem(0xea42, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xf81a, gbc.sp());
        EXPECT(0xea44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea42));
        EXPECT(0x51, gbc.readMem(0xea43));
        // CB 51 028C
        gbc.setState(0xa21a, 0x8ce0, 0x5b70, 0x25ec, 0x487b, 0xc6f7, 0x1, 0x1);
        gbc.writeMem(0xa21a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x8ce0, gbc.sp());
        EXPECT(0xa21c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa21a));
        EXPECT(0x51, gbc.readMem(0xa21b));
        // CB 51 028D
        gbc.setState(0x6392, 0x2f4, 0xecb0, 0xba09, 0xadc1, 0xc480, 0x1, 0x0);
        gbc.writeMem(0x6392, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x2f4, gbc.sp());
        EXPECT(0x6394, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 028E
        gbc.setState(0x3bca, 0xc431, 0xc940, 0x8806, 0xc0e8, 0xcd6c, 0x1, 0x1);
        gbc.writeMem(0x3bca, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xc431, gbc.sp());
        EXPECT(0x3bcc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 028F
        gbc.setState(0xb0f0, 0x69c2, 0x9520, 0x248c, 0x3d9b, 0x5134, 0x0, 0x0);
        gbc.writeMem(0xb0f0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x69c2, gbc.sp());
        EXPECT(0xb0f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0f0));
        EXPECT(0x51, gbc.readMem(0xb0f1));
        // CB 51 0290
        gbc.setState(0x36f1, 0xf069, 0x97c0, 0xcc6e, 0x8e11, 0xe831, 0x1, 0x1);
        gbc.writeMem(0x36f1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xf069, gbc.sp());
        EXPECT(0x36f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0291
        gbc.setState(0x9267, 0xb79e, 0x28c0, 0x7532, 0x4ece, 0xf7c9, 0x0, 0x0);
        gbc.writeMem(0x9267, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xb79e, gbc.sp());
        EXPECT(0x9269, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9267));
        EXPECT(0x51, gbc.readMem(0x9268));
        // CB 51 0292
        gbc.setState(0x9625, 0xb0a7, 0xae00, 0x5ba4, 0xf5a1, 0xee66, 0x1, 0x0);
        gbc.writeMem(0x9625, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xb0a7, gbc.sp());
        EXPECT(0x9627, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9625));
        EXPECT(0x51, gbc.readMem(0x9626));
        // CB 51 0293
        gbc.setState(0x51a4, 0x5f72, 0x8c60, 0x560d, 0x7c1a, 0xd5db, 0x1, 0x0);
        gbc.writeMem(0x51a4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x5f72, gbc.sp());
        EXPECT(0x51a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0294
        gbc.setState(0x8561, 0xed03, 0x2150, 0x9c83, 0x4c9d, 0xcfc3, 0x0, 0x0);
        gbc.writeMem(0x8561, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xed03, gbc.sp());
        EXPECT(0x8563, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8561));
        EXPECT(0x51, gbc.readMem(0x8562));
        // CB 51 0295
        gbc.setState(0x661d, 0xe4e0, 0x75c0, 0x2625, 0x1a98, 0xc7ef, 0x0, 0x1);
        gbc.writeMem(0x661d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xe4e0, gbc.sp());
        EXPECT(0x661f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0296
        gbc.setState(0x2da8, 0xadf7, 0xf1b0, 0xda2, 0xceba, 0xfef8, 0x1, 0x0);
        gbc.writeMem(0x2da8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xadf7, gbc.sp());
        EXPECT(0x2daa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0297
        gbc.setState(0xbde3, 0x3029, 0x7d60, 0xc3aa, 0x268e, 0x53b2, 0x0, 0x0);
        gbc.writeMem(0xbde3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x3029, gbc.sp());
        EXPECT(0xbde5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbde3));
        EXPECT(0x51, gbc.readMem(0xbde4));
        // CB 51 0298
        gbc.setState(0x3933, 0x6f00, 0x7930, 0x116d, 0x3e7d, 0x4d36, 0x0, 0x0);
        gbc.writeMem(0x3933, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x6f00, gbc.sp());
        EXPECT(0x3935, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0299
        gbc.setState(0x677b, 0xead6, 0x7830, 0x2fd3, 0x2957, 0x2dae, 0x0, 0x0);
        gbc.writeMem(0x677b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xead6, gbc.sp());
        EXPECT(0x677d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 029A
        gbc.setState(0xe09a, 0xd300, 0x2b90, 0x44c6, 0x6dd7, 0xc6ad, 0x0, 0x0);
        gbc.writeMem(0xe09a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xd300, gbc.sp());
        EXPECT(0xe09c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe09a));
        EXPECT(0x51, gbc.readMem(0xe09b));
        // CB 51 029B
        gbc.setState(0x80db, 0x95c, 0xf0f0, 0x8da9, 0xbe53, 0xb4f5, 0x0, 0x1);
        gbc.writeMem(0x80db, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x95c, gbc.sp());
        EXPECT(0x80dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80db));
        EXPECT(0x51, gbc.readMem(0x80dc));
        // CB 51 029C
        gbc.setState(0x3762, 0x9996, 0x840, 0x4492, 0x6b1a, 0x6376, 0x1, 0x1);
        gbc.writeMem(0x3762, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x9996, gbc.sp());
        EXPECT(0x3764, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 029D
        gbc.setState(0x5532, 0xab79, 0xadf0, 0x51e2, 0xd96, 0xcbc3, 0x0, 0x0);
        gbc.writeMem(0x5532, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xab79, gbc.sp());
        EXPECT(0x5534, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 029E
        gbc.setState(0xc648, 0xedbd, 0x5380, 0xb676, 0x6881, 0xda1b, 0x1, 0x1);
        gbc.writeMem(0xc648, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xedbd, gbc.sp());
        EXPECT(0xc64a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc648));
        EXPECT(0x51, gbc.readMem(0xc649));
        // CB 51 02A0
        gbc.setState(0x64cf, 0x7cc2, 0x7dd0, 0x9ee6, 0x1e55, 0xa25d, 0x1, 0x0);
        gbc.writeMem(0x64cf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x7cc2, gbc.sp());
        EXPECT(0x64d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02A1
        gbc.setState(0x812a, 0x85b9, 0x9ff0, 0x6212, 0x4584, 0xab29, 0x1, 0x1);
        gbc.writeMem(0x812a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x85b9, gbc.sp());
        EXPECT(0x812c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x812a));
        EXPECT(0x51, gbc.readMem(0x812b));
        // CB 51 02A2
        gbc.setState(0x8fe3, 0xffe9, 0xc6e0, 0x7282, 0x7cb1, 0x113a, 0x1, 0x1);
        gbc.writeMem(0x8fe3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xffe9, gbc.sp());
        EXPECT(0x8fe5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fe3));
        EXPECT(0x51, gbc.readMem(0x8fe4));
        // CB 51 02A3
        gbc.setState(0x8bf9, 0x5a74, 0xd950, 0x4ec8, 0xa774, 0xc402, 0x0, 0x1);
        gbc.writeMem(0x8bf9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x5a74, gbc.sp());
        EXPECT(0x8bfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bf9));
        EXPECT(0x51, gbc.readMem(0x8bfa));
        // CB 51 02A4
        gbc.setState(0xc3a0, 0x271b, 0x4020, 0xfb34, 0x4b94, 0xa271, 0x1, 0x1);
        gbc.writeMem(0xc3a0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x271b, gbc.sp());
        EXPECT(0xc3a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3a0));
        EXPECT(0x51, gbc.readMem(0xc3a1));
        // CB 51 02A6
        gbc.setState(0x5e2c, 0x68bc, 0xdf0, 0x37be, 0x94ae, 0xd9e6, 0x0, 0x0);
        gbc.writeMem(0x5e2c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x68bc, gbc.sp());
        EXPECT(0x5e2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02A7
        gbc.setState(0xa11, 0xa5ce, 0xd360, 0x15fc, 0x2c47, 0x9d1e, 0x1, 0x0);
        gbc.writeMem(0xa11, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xa5ce, gbc.sp());
        EXPECT(0xa13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02A8
        gbc.setState(0x247d, 0xcbf8, 0xe600, 0x81b, 0x7234, 0x34cf, 0x0, 0x1);
        gbc.writeMem(0x247d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xcbf8, gbc.sp());
        EXPECT(0x247f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02A9
        gbc.setState(0x1d6d, 0x483c, 0xb830, 0xb21c, 0x7a6d, 0x7eb9, 0x0, 0x1);
        gbc.writeMem(0x1d6d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x483c, gbc.sp());
        EXPECT(0x1d6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02AA
        gbc.setState(0x3210, 0xb377, 0x52c0, 0xee62, 0x6d81, 0x73da, 0x1, 0x0);
        gbc.writeMem(0x3210, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xb377, gbc.sp());
        EXPECT(0x3212, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02AB
        gbc.setState(0x1cb7, 0x7ac8, 0x630, 0x222, 0x6376, 0x698a, 0x1, 0x0);
        gbc.writeMem(0x1cb7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x7ac8, gbc.sp());
        EXPECT(0x1cb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02AC
        gbc.setState(0xc022, 0x7f11, 0x65d0, 0x9509, 0xab5b, 0x19eb, 0x1, 0x1);
        gbc.writeMem(0xc022, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x7f11, gbc.sp());
        EXPECT(0xc024, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc022));
        EXPECT(0x51, gbc.readMem(0xc023));
        // CB 51 02AD
        gbc.setState(0x251c, 0xed36, 0x1100, 0x1950, 0x6192, 0x7c59, 0x1, 0x0);
        gbc.writeMem(0x251c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xed36, gbc.sp());
        EXPECT(0x251e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02AE
        gbc.setState(0xeebf, 0x28d9, 0xf3c0, 0xf277, 0x2c06, 0x7a43, 0x1, 0x1);
        gbc.writeMem(0xeebf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x28d9, gbc.sp());
        EXPECT(0xeec1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeebf));
        EXPECT(0x51, gbc.readMem(0xeec0));
        // CB 51 02AF
        gbc.setState(0x6bd4, 0x2267, 0xf9f0, 0x7d38, 0x8a59, 0x3701, 0x0, 0x1);
        gbc.writeMem(0x6bd4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x2267, gbc.sp());
        EXPECT(0x6bd6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02B0
        gbc.setState(0xbdb1, 0x8ffd, 0x8800, 0x82e9, 0x73e1, 0x5a5a, 0x0, 0x0);
        gbc.writeMem(0xbdb1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x8ffd, gbc.sp());
        EXPECT(0xbdb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdb1));
        EXPECT(0x51, gbc.readMem(0xbdb2));
        // CB 51 02B1
        gbc.setState(0x3af5, 0x31a6, 0x6a90, 0xaa58, 0xade6, 0x4b06, 0x0, 0x1);
        gbc.writeMem(0x3af5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x31a6, gbc.sp());
        EXPECT(0x3af7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02B2
        gbc.setState(0x19a6, 0xb9a5, 0x8d30, 0x593f, 0x6a1d, 0xefea, 0x1, 0x1);
        gbc.writeMem(0x19a6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xb9a5, gbc.sp());
        EXPECT(0x19a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02B3
        gbc.setState(0x3963, 0x183b, 0x31a0, 0xc80, 0x78ad, 0xfb33, 0x1, 0x1);
        gbc.writeMem(0x3963, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x183b, gbc.sp());
        EXPECT(0x3965, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02B4
        gbc.setState(0x1010, 0x1367, 0x5e70, 0x46e7, 0x6d02, 0x6d81, 0x0, 0x0);
        gbc.writeMem(0x1010, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x1367, gbc.sp());
        EXPECT(0x1012, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02B5
        gbc.setState(0xabfe, 0xa28a, 0x2130, 0x57d1, 0x13ba, 0xfe88, 0x0, 0x1);
        gbc.writeMem(0xabfe, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xa28a, gbc.sp());
        EXPECT(0xac00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabfe));
        EXPECT(0x51, gbc.readMem(0xabff));
        // CB 51 02B6
        gbc.setState(0xa14d, 0xc051, 0x7d30, 0xd89d, 0x2af9, 0x8a08, 0x0, 0x0);
        gbc.writeMem(0xa14d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc051, gbc.sp());
        EXPECT(0xa14f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa14d));
        EXPECT(0x51, gbc.readMem(0xa14e));
        // CB 51 02B7
        gbc.setState(0xaea2, 0xff82, 0x6370, 0x1ea, 0xcbb3, 0x8762, 0x0, 0x1);
        gbc.writeMem(0xaea2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xff82, gbc.sp());
        EXPECT(0xaea4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaea2));
        EXPECT(0x51, gbc.readMem(0xaea3));
        // CB 51 02B8
        gbc.setState(0x6151, 0x175f, 0x8fa0, 0x3eb0, 0x6c56, 0xcc77, 0x1, 0x1);
        gbc.writeMem(0x6151, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x175f, gbc.sp());
        EXPECT(0x6153, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02B9
        gbc.setState(0xfa3, 0x2722, 0x7960, 0xd142, 0xa52e, 0xbddc, 0x1, 0x1);
        gbc.writeMem(0xfa3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x2722, gbc.sp());
        EXPECT(0xfa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02BA
        gbc.setState(0x1cbe, 0x5a4b, 0x6780, 0x58be, 0x41c3, 0x9de9, 0x1, 0x1);
        gbc.writeMem(0x1cbe, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x5a4b, gbc.sp());
        EXPECT(0x1cc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02BB
        gbc.setState(0x7788, 0xd022, 0xa3a0, 0x46ba, 0xfc23, 0xb165, 0x0, 0x1);
        gbc.writeMem(0x7788, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xd022, gbc.sp());
        EXPECT(0x778a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02BC
        gbc.setState(0xdb75, 0x4642, 0x5600, 0x903d, 0xcfaa, 0xdf75, 0x0, 0x0);
        gbc.writeMem(0xdb75, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x4642, gbc.sp());
        EXPECT(0xdb77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb75));
        EXPECT(0x51, gbc.readMem(0xdb76));
        // CB 51 02BD
        gbc.setState(0x8d25, 0x85e0, 0xc0, 0x8952, 0xf607, 0xc03f, 0x1, 0x0);
        gbc.writeMem(0x8d25, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x85e0, gbc.sp());
        EXPECT(0x8d27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d25));
        EXPECT(0x51, gbc.readMem(0x8d26));
        // CB 51 02BE
        gbc.setState(0xa203, 0x7412, 0x27e0, 0xe45f, 0xbcc1, 0xefda, 0x1, 0x0);
        gbc.writeMem(0xa203, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x7412, gbc.sp());
        EXPECT(0xa205, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa203));
        EXPECT(0x51, gbc.readMem(0xa204));
        // CB 51 02BF
        gbc.setState(0xabf5, 0x1d34, 0xcee0, 0x8bca, 0xf8a2, 0xc74c, 0x0, 0x0);
        gbc.writeMem(0xabf5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x1d34, gbc.sp());
        EXPECT(0xabf7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabf5));
        EXPECT(0x51, gbc.readMem(0xabf6));
        // CB 51 02C0
        gbc.setState(0xa41f, 0x9841, 0x9940, 0xaa6b, 0x25b8, 0xf8d, 0x1, 0x1);
        gbc.writeMem(0xa41f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x9841, gbc.sp());
        EXPECT(0xa421, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa41f));
        EXPECT(0x51, gbc.readMem(0xa420));
        // CB 51 02C1
        gbc.setState(0xbef0, 0x546c, 0xa110, 0x1d68, 0xa1fe, 0x6732, 0x1, 0x0);
        gbc.writeMem(0xbef0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x546c, gbc.sp());
        EXPECT(0xbef2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbef0));
        EXPECT(0x51, gbc.readMem(0xbef1));
        // CB 51 02C2
        gbc.setState(0x618e, 0x35e7, 0x2fd0, 0xa7fe, 0x168, 0xe738, 0x0, 0x0);
        gbc.writeMem(0x618e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x35e7, gbc.sp());
        EXPECT(0x6190, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02C3
        gbc.setState(0xe873, 0xd2ee, 0x7420, 0x39ca, 0x153, 0xd59c, 0x0, 0x1);
        gbc.writeMem(0xe873, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xd2ee, gbc.sp());
        EXPECT(0xe875, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe873));
        EXPECT(0x51, gbc.readMem(0xe874));
        // CB 51 02C4
        gbc.setState(0xd94a, 0x1fb4, 0x2720, 0x61f6, 0xe6f1, 0xf394, 0x0, 0x0);
        gbc.writeMem(0xd94a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x1fb4, gbc.sp());
        EXPECT(0xd94c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd94a));
        EXPECT(0x51, gbc.readMem(0xd94b));
        // CB 51 02C5
        gbc.setState(0x2975, 0xbfaa, 0xbfd0, 0x1a7b, 0x2ea8, 0x7352, 0x1, 0x0);
        gbc.writeMem(0x2975, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xbfaa, gbc.sp());
        EXPECT(0x2977, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02C6
        gbc.setState(0x3d94, 0x106f, 0x3680, 0x7dcf, 0xb246, 0x33ef, 0x1, 0x0);
        gbc.writeMem(0x3d94, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x106f, gbc.sp());
        EXPECT(0x3d96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02C7
        gbc.setState(0x26ab, 0xd473, 0x1900, 0xe3e6, 0x3e31, 0x4266, 0x0, 0x1);
        gbc.writeMem(0x26ab, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xd473, gbc.sp());
        EXPECT(0x26ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02C8
        gbc.setState(0xc730, 0x76b8, 0xf6d0, 0x2ac5, 0xe86b, 0x3506, 0x1, 0x1);
        gbc.writeMem(0xc730, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x76b8, gbc.sp());
        EXPECT(0xc732, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc730));
        EXPECT(0x51, gbc.readMem(0xc731));
        // CB 51 02C9
        gbc.setState(0x7fed, 0xefb, 0xd360, 0xdd8b, 0xb20e, 0x64a6, 0x0, 0x1);
        gbc.writeMem(0x7fed, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xefb, gbc.sp());
        EXPECT(0x7fef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02CA
        gbc.setState(0xb5d2, 0xc0d7, 0xf5f0, 0x7875, 0xf4b4, 0xba1a, 0x1, 0x0);
        gbc.writeMem(0xb5d2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xc0d7, gbc.sp());
        EXPECT(0xb5d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5d2));
        EXPECT(0x51, gbc.readMem(0xb5d3));
        // CB 51 02CB
        gbc.setState(0x84b1, 0x283, 0x3bb0, 0xbbe0, 0x87be, 0x6094, 0x0, 0x1);
        gbc.writeMem(0x84b1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x283, gbc.sp());
        EXPECT(0x84b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84b1));
        EXPECT(0x51, gbc.readMem(0x84b2));
        // CB 51 02CC
        gbc.setState(0xb7a7, 0x9ab5, 0xdde0, 0x95df, 0xcb9c, 0x6e9a, 0x1, 0x1);
        gbc.writeMem(0xb7a7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x9ab5, gbc.sp());
        EXPECT(0xb7a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7a7));
        EXPECT(0x51, gbc.readMem(0xb7a8));
        // CB 51 02CD
        gbc.setState(0xab13, 0xfe06, 0xdd70, 0xafca, 0x3d9a, 0xc6dc, 0x1, 0x1);
        gbc.writeMem(0xab13, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xfe06, gbc.sp());
        EXPECT(0xab15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab13));
        EXPECT(0x51, gbc.readMem(0xab14));
        // CB 51 02CE
        gbc.setState(0x7f15, 0x274d, 0xafe0, 0xc6e4, 0xea8e, 0xe3fd, 0x0, 0x1);
        gbc.writeMem(0x7f15, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x274d, gbc.sp());
        EXPECT(0x7f17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02CF
        gbc.setState(0xb2e5, 0xc639, 0x1400, 0x56e4, 0xc099, 0xb2c, 0x0, 0x0);
        gbc.writeMem(0xb2e5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xc639, gbc.sp());
        EXPECT(0xb2e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2e5));
        EXPECT(0x51, gbc.readMem(0xb2e6));
        // CB 51 02D0
        gbc.setState(0xb90c, 0xbcaf, 0xd8f0, 0xee5, 0xfcd6, 0xc0cc, 0x1, 0x1);
        gbc.writeMem(0xb90c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xbcaf, gbc.sp());
        EXPECT(0xb90e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb90c));
        EXPECT(0x51, gbc.readMem(0xb90d));
        // CB 51 02D1
        gbc.setState(0xab89, 0x3a60, 0xda0, 0x682b, 0x8f76, 0xe844, 0x1, 0x1);
        gbc.writeMem(0xab89, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x3a60, gbc.sp());
        EXPECT(0xab8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab89));
        EXPECT(0x51, gbc.readMem(0xab8a));
        // CB 51 02D2
        gbc.setState(0x3513, 0x1e80, 0x6c50, 0xed7, 0x9a6e, 0x3e93, 0x1, 0x1);
        gbc.writeMem(0x3513, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x1e80, gbc.sp());
        EXPECT(0x3515, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02D3
        gbc.setState(0x44c9, 0x8e16, 0xd4a0, 0x8acb, 0xa2ef, 0xa778, 0x1, 0x1);
        gbc.writeMem(0x44c9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x8e16, gbc.sp());
        EXPECT(0x44cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02D4
        gbc.setState(0xea96, 0x7776, 0x8250, 0xa731, 0x26ca, 0x189d, 0x1, 0x0);
        gbc.writeMem(0xea96, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x7776, gbc.sp());
        EXPECT(0xea98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea96));
        EXPECT(0x51, gbc.readMem(0xea97));
        // CB 51 02D5
        gbc.setState(0xe491, 0x1eb4, 0x5a60, 0x2a4, 0x11a3, 0xd0b2, 0x1, 0x1);
        gbc.writeMem(0xe491, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x1eb4, gbc.sp());
        EXPECT(0xe493, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe491));
        EXPECT(0x51, gbc.readMem(0xe492));
        // CB 51 02D6
        gbc.setState(0xb9dc, 0xe761, 0xc950, 0x780, 0x864, 0x95c6, 0x1, 0x1);
        gbc.writeMem(0xb9dc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xe761, gbc.sp());
        EXPECT(0xb9de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9dc));
        EXPECT(0x51, gbc.readMem(0xb9dd));
        // CB 51 02D7
        gbc.setState(0xaedd, 0x741d, 0xd520, 0xdbcb, 0x9594, 0xdc6, 0x0, 0x1);
        gbc.writeMem(0xaedd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x741d, gbc.sp());
        EXPECT(0xaedf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaedd));
        EXPECT(0x51, gbc.readMem(0xaede));
        // CB 51 02D8
        gbc.setState(0x9ad6, 0xd26c, 0xe30, 0x3e17, 0xfa65, 0x35cb, 0x1, 0x0);
        gbc.writeMem(0x9ad6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xd26c, gbc.sp());
        EXPECT(0x9ad8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ad6));
        EXPECT(0x51, gbc.readMem(0x9ad7));
        // CB 51 02D9
        gbc.setState(0xd4c4, 0x1aa3, 0x7aa0, 0x52f, 0xff6d, 0x1b2d, 0x1, 0x1);
        gbc.writeMem(0xd4c4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x1aa3, gbc.sp());
        EXPECT(0xd4c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4c4));
        EXPECT(0x51, gbc.readMem(0xd4c5));
        // CB 51 02DA
        gbc.setState(0x6534, 0xb68a, 0x6e60, 0xb328, 0xec9d, 0xa7c4, 0x0, 0x1);
        gbc.writeMem(0x6534, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xb68a, gbc.sp());
        EXPECT(0x6536, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02DB
        gbc.setState(0x2f0f, 0xa380, 0xe090, 0x8f13, 0xe800, 0xf324, 0x1, 0x0);
        gbc.writeMem(0x2f0f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xa380, gbc.sp());
        EXPECT(0x2f11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02DC
        gbc.setState(0x958f, 0xb4b, 0x1c00, 0xa9c7, 0x1f8d, 0x60d5, 0x0, 0x1);
        gbc.writeMem(0x958f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xb4b, gbc.sp());
        EXPECT(0x9591, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x958f));
        EXPECT(0x51, gbc.readMem(0x9590));
        // CB 51 02DD
        gbc.setState(0xd3ff, 0x8f73, 0xa590, 0xe79b, 0xc10d, 0x8b23, 0x0, 0x0);
        gbc.writeMem(0xd3ff, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x8f73, gbc.sp());
        EXPECT(0xd401, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3ff));
        EXPECT(0x51, gbc.readMem(0xd400));
        // CB 51 02DE
        gbc.setState(0xe8e, 0xebb8, 0xbea0, 0xbffd, 0x3492, 0xa95a, 0x1, 0x0);
        gbc.writeMem(0xe8e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xebb8, gbc.sp());
        EXPECT(0xe90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02DF
        gbc.setState(0xd98e, 0x1be1, 0xaf70, 0xec42, 0xf163, 0x11fe, 0x0, 0x1);
        gbc.writeMem(0xd98e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x1be1, gbc.sp());
        EXPECT(0xd990, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd98e));
        EXPECT(0x51, gbc.readMem(0xd98f));
        // CB 51 02E0
        gbc.setState(0xedc3, 0x3c01, 0x5bb0, 0x77ac, 0x88cb, 0x7e7e, 0x1, 0x1);
        gbc.writeMem(0xedc3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x3c01, gbc.sp());
        EXPECT(0xedc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedc3));
        EXPECT(0x51, gbc.readMem(0xedc4));
        // CB 51 02E1
        gbc.setState(0xeaa6, 0xb54d, 0x9e30, 0x50eb, 0xc85c, 0x49c3, 0x0, 0x1);
        gbc.writeMem(0xeaa6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xb54d, gbc.sp());
        EXPECT(0xeaa8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaa6));
        EXPECT(0x51, gbc.readMem(0xeaa7));
        // CB 51 02E2
        gbc.setState(0x118c, 0x1955, 0x3570, 0xe04d, 0xfa3, 0xd97e, 0x0, 0x0);
        gbc.writeMem(0x118c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x1955, gbc.sp());
        EXPECT(0x118e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02E3
        gbc.setState(0x9636, 0xef0, 0xd520, 0x1f6e, 0xd3b7, 0x99f1, 0x1, 0x1);
        gbc.writeMem(0x9636, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xef0, gbc.sp());
        EXPECT(0x9638, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9636));
        EXPECT(0x51, gbc.readMem(0x9637));
        // CB 51 02E4
        gbc.setState(0xa48f, 0x7467, 0x4b70, 0x8212, 0x9467, 0x1c91, 0x0, 0x0);
        gbc.writeMem(0xa48f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x7467, gbc.sp());
        EXPECT(0xa491, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa48f));
        EXPECT(0x51, gbc.readMem(0xa490));
        // CB 51 02E5
        gbc.setState(0x3685, 0xf94f, 0x1f00, 0xa4e1, 0x5074, 0x22fb, 0x0, 0x0);
        gbc.writeMem(0x3685, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xf94f, gbc.sp());
        EXPECT(0x3687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02E6
        gbc.setState(0x5910, 0x8a1c, 0x7ff0, 0x1a93, 0x7c55, 0x4791, 0x1, 0x1);
        gbc.writeMem(0x5910, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x8a1c, gbc.sp());
        EXPECT(0x5912, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02E7
        gbc.setState(0x7afe, 0xa776, 0x1de0, 0xa1c3, 0x7b1b, 0x8b32, 0x1, 0x1);
        gbc.writeMem(0x7afe, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xa776, gbc.sp());
        EXPECT(0x7b00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02E8
        gbc.setState(0xe960, 0x6579, 0xa4a0, 0xd7bf, 0xeda1, 0xbb73, 0x1, 0x1);
        gbc.writeMem(0xe960, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x6579, gbc.sp());
        EXPECT(0xe962, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe960));
        EXPECT(0x51, gbc.readMem(0xe961));
        // CB 51 02E9
        gbc.setState(0x4885, 0x6e82, 0xb680, 0x90d6, 0x2848, 0xa9b1, 0x0, 0x0);
        gbc.writeMem(0x4885, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x6e82, gbc.sp());
        EXPECT(0x4887, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02EA
        gbc.setState(0x24a5, 0x1ba2, 0x58c0, 0xeadf, 0xde52, 0x36ee, 0x1, 0x1);
        gbc.writeMem(0x24a5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x1ba2, gbc.sp());
        EXPECT(0x24a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02EB
        gbc.setState(0x12d6, 0x3ef, 0x9400, 0x18cd, 0x9a, 0xbe95, 0x1, 0x0);
        gbc.writeMem(0x12d6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x3ef, gbc.sp());
        EXPECT(0x12d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02EC
        gbc.setState(0x71b0, 0x8355, 0xc8c0, 0x694e, 0xeec3, 0x8474, 0x1, 0x0);
        gbc.writeMem(0x71b0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x8355, gbc.sp());
        EXPECT(0x71b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02ED
        gbc.setState(0xa29b, 0x4f06, 0x8ac0, 0x1a56, 0xafbd, 0x698c, 0x1, 0x1);
        gbc.writeMem(0xa29b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x4f06, gbc.sp());
        EXPECT(0xa29d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa29b));
        EXPECT(0x51, gbc.readMem(0xa29c));
        // CB 51 02EF
        gbc.setState(0xc8ee, 0x6b51, 0x7650, 0x541a, 0xf7bc, 0xfc46, 0x1, 0x1);
        gbc.writeMem(0xc8ee, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x6b51, gbc.sp());
        EXPECT(0xc8f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8ee));
        EXPECT(0x51, gbc.readMem(0xc8ef));
        // CB 51 02F0
        gbc.setState(0x166a, 0x19be, 0x7be0, 0x43f1, 0x80fa, 0x7019, 0x1, 0x0);
        gbc.writeMem(0x166a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x19be, gbc.sp());
        EXPECT(0x166c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02F1
        gbc.setState(0xd6b6, 0x9faa, 0x7b0, 0x51f7, 0xfb8e, 0x17a8, 0x0, 0x1);
        gbc.writeMem(0xd6b6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x9faa, gbc.sp());
        EXPECT(0xd6b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6b6));
        EXPECT(0x51, gbc.readMem(0xd6b7));
        // CB 51 02F2
        gbc.setState(0x215c, 0xc481, 0x9730, 0x86c7, 0x5bed, 0xca97, 0x1, 0x1);
        gbc.writeMem(0x215c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xc481, gbc.sp());
        EXPECT(0x215e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02F3
        gbc.setState(0xd1ca, 0x313a, 0x8d50, 0x52e1, 0x8f52, 0x9cb1, 0x1, 0x1);
        gbc.writeMem(0xd1ca, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x313a, gbc.sp());
        EXPECT(0xd1cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1ca));
        EXPECT(0x51, gbc.readMem(0xd1cb));
        // CB 51 02F4
        gbc.setState(0xd498, 0x5aa1, 0xb780, 0x42f, 0xa2ea, 0xfd7e, 0x0, 0x0);
        gbc.writeMem(0xd498, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x5aa1, gbc.sp());
        EXPECT(0xd49a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd498));
        EXPECT(0x51, gbc.readMem(0xd499));
        // CB 51 02F5
        gbc.setState(0xd1fa, 0x171e, 0x36b0, 0xef34, 0x3021, 0xa8e, 0x1, 0x1);
        gbc.writeMem(0xd1fa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x171e, gbc.sp());
        EXPECT(0xd1fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1fa));
        EXPECT(0x51, gbc.readMem(0xd1fb));
        // CB 51 02F6
        gbc.setState(0x95eb, 0x4202, 0x94a0, 0x45bb, 0x192f, 0x7613, 0x0, 0x1);
        gbc.writeMem(0x95eb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x4202, gbc.sp());
        EXPECT(0x95ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95eb));
        EXPECT(0x51, gbc.readMem(0x95ec));
        // CB 51 02F7
        gbc.setState(0xcba7, 0xc373, 0x54e0, 0x127f, 0xe4ad, 0xf838, 0x0, 0x0);
        gbc.writeMem(0xcba7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xc373, gbc.sp());
        EXPECT(0xcba9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcba7));
        EXPECT(0x51, gbc.readMem(0xcba8));
        // CB 51 02F8
        gbc.setState(0x6be6, 0x8801, 0xdd00, 0x7923, 0xa9f6, 0x13eb, 0x0, 0x1);
        gbc.writeMem(0x6be6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x8801, gbc.sp());
        EXPECT(0x6be8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02F9
        gbc.setState(0x5f03, 0x8e8c, 0x1120, 0x87b0, 0xce7d, 0x819e, 0x1, 0x0);
        gbc.writeMem(0x5f03, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x8e8c, gbc.sp());
        EXPECT(0x5f05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 02FA
        gbc.setState(0xb1d5, 0xb325, 0xd990, 0x6807, 0xe989, 0xb964, 0x1, 0x0);
        gbc.writeMem(0xb1d5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xb325, gbc.sp());
        EXPECT(0xb1d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1d5));
        EXPECT(0x51, gbc.readMem(0xb1d6));
        // CB 51 02FB
        gbc.setState(0xca1a, 0x2273, 0x5870, 0xc50b, 0x5414, 0x1c27, 0x0, 0x1);
        gbc.writeMem(0xca1a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x2273, gbc.sp());
        EXPECT(0xca1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca1a));
        EXPECT(0x51, gbc.readMem(0xca1b));
        // CB 51 02FC
        gbc.setState(0xd41b, 0xc6e9, 0x80, 0x598d, 0xf892, 0x321f, 0x1, 0x1);
        gbc.writeMem(0xd41b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xc6e9, gbc.sp());
        EXPECT(0xd41d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd41b));
        EXPECT(0x51, gbc.readMem(0xd41c));
        // CB 51 02FD
        gbc.setState(0xc9b8, 0x8198, 0x44e0, 0x5ea, 0xd685, 0x2c9a, 0x0, 0x1);
        gbc.writeMem(0xc9b8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x8198, gbc.sp());
        EXPECT(0xc9ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9b8));
        EXPECT(0x51, gbc.readMem(0xc9b9));
        // CB 51 02FE
        gbc.setState(0x52b6, 0x5c8c, 0x2190, 0x1ed0, 0x1fc4, 0x2a4b, 0x1, 0x0);
        gbc.writeMem(0x52b6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x5c8c, gbc.sp());
        EXPECT(0x52b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 02FF
        gbc.setState(0x4427, 0x7226, 0xf450, 0x1028, 0x490f, 0xc53, 0x1, 0x1);
        gbc.writeMem(0x4427, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x7226, gbc.sp());
        EXPECT(0x4429, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0300
        gbc.setState(0xeccd, 0x74c0, 0x6d30, 0x7e68, 0x55d2, 0xfe0b, 0x1, 0x0);
        gbc.writeMem(0xeccd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x74c0, gbc.sp());
        EXPECT(0xeccf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeccd));
        EXPECT(0x51, gbc.readMem(0xecce));
        // CB 51 0302
        gbc.setState(0x5f87, 0x8ee8, 0x9500, 0x4eb4, 0x3246, 0x5fc7, 0x1, 0x1);
        gbc.writeMem(0x5f87, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x8ee8, gbc.sp());
        EXPECT(0x5f89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0304
        gbc.setState(0xa339, 0x2fcb, 0x29a0, 0xcedf, 0x7e7e, 0x6090, 0x1, 0x0);
        gbc.writeMem(0xa339, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2fcb, gbc.sp());
        EXPECT(0xa33b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa339));
        EXPECT(0x51, gbc.readMem(0xa33a));
        // CB 51 0305
        gbc.setState(0x4939, 0xf943, 0xd720, 0xee1e, 0x709d, 0xf6c2, 0x0, 0x0);
        gbc.writeMem(0x4939, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xf943, gbc.sp());
        EXPECT(0x493b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0306
        gbc.setState(0xf4a, 0x51a7, 0xe920, 0xba68, 0x6183, 0x6399, 0x1, 0x0);
        gbc.writeMem(0xf4a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x51a7, gbc.sp());
        EXPECT(0xf4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0307
        gbc.setState(0x59a8, 0x4e4a, 0x810, 0x825b, 0x6af6, 0xd29b, 0x1, 0x0);
        gbc.writeMem(0x59a8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x4e4a, gbc.sp());
        EXPECT(0x59aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0308
        gbc.setState(0xcd4d, 0x1fc0, 0xa9d0, 0x535c, 0x51f6, 0x83a0, 0x1, 0x1);
        gbc.writeMem(0xcd4d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x1fc0, gbc.sp());
        EXPECT(0xcd4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd4d));
        EXPECT(0x51, gbc.readMem(0xcd4e));
        // CB 51 0309
        gbc.setState(0x6059, 0xc31b, 0x1300, 0xb3d2, 0x7ee7, 0x662a, 0x1, 0x0);
        gbc.writeMem(0x6059, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xc31b, gbc.sp());
        EXPECT(0x605b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 030A
        gbc.setState(0x9c85, 0xaf2f, 0x21e0, 0x5d24, 0xe743, 0x1173, 0x0, 0x0);
        gbc.writeMem(0x9c85, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xaf2f, gbc.sp());
        EXPECT(0x9c87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c85));
        EXPECT(0x51, gbc.readMem(0x9c86));
        // CB 51 030B
        gbc.setState(0x53c8, 0x13e8, 0x7210, 0x21e4, 0x9224, 0x6b68, 0x1, 0x0);
        gbc.writeMem(0x53c8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x13e8, gbc.sp());
        EXPECT(0x53ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 030C
        gbc.setState(0x59ab, 0x2eda, 0x56c0, 0x87a5, 0xc66d, 0x74eb, 0x1, 0x1);
        gbc.writeMem(0x59ab, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x2eda, gbc.sp());
        EXPECT(0x59ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 030D
        gbc.setState(0x3d33, 0x45fb, 0x8400, 0xecba, 0x53e9, 0x4105, 0x1, 0x0);
        gbc.writeMem(0x3d33, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x45fb, gbc.sp());
        EXPECT(0x3d35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 030E
        gbc.setState(0x19c0, 0x21ea, 0x5700, 0x1c4f, 0xccc3, 0x31be, 0x1, 0x1);
        gbc.writeMem(0x19c0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x21ea, gbc.sp());
        EXPECT(0x19c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 030F
        gbc.setState(0x8664, 0x8947, 0x5f80, 0x7a56, 0x3679, 0x94c1, 0x1, 0x1);
        gbc.writeMem(0x8664, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x8947, gbc.sp());
        EXPECT(0x8666, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8664));
        EXPECT(0x51, gbc.readMem(0x8665));
        // CB 51 0310
        gbc.setState(0x3272, 0x227d, 0x6b70, 0x1f38, 0x269, 0x9e93, 0x0, 0x1);
        gbc.writeMem(0x3272, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x227d, gbc.sp());
        EXPECT(0x3274, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0311
        gbc.setState(0x8fc0, 0x1b4a, 0x2d00, 0xafb2, 0x618d, 0x332d, 0x1, 0x0);
        gbc.writeMem(0x8fc0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x1b4a, gbc.sp());
        EXPECT(0x8fc2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fc0));
        EXPECT(0x51, gbc.readMem(0x8fc1));
        // CB 51 0312
        gbc.setState(0x4d12, 0xfc7, 0x7900, 0x8072, 0xc968, 0x71c3, 0x1, 0x1);
        gbc.writeMem(0x4d12, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xfc7, gbc.sp());
        EXPECT(0x4d14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0313
        gbc.setState(0x4972, 0xfa45, 0x58c0, 0x5a91, 0x59c0, 0x3894, 0x0, 0x0);
        gbc.writeMem(0x4972, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xfa45, gbc.sp());
        EXPECT(0x4974, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0314
        gbc.setState(0x8f0c, 0x6bc8, 0x5140, 0xaeac, 0x351e, 0x9075, 0x0, 0x1);
        gbc.writeMem(0x8f0c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x6bc8, gbc.sp());
        EXPECT(0x8f0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f0c));
        EXPECT(0x51, gbc.readMem(0x8f0d));
        // CB 51 0315
        gbc.setState(0x795a, 0xc6a0, 0x6d10, 0xf5cc, 0xface, 0x9fc1, 0x0, 0x1);
        gbc.writeMem(0x795a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xc6a0, gbc.sp());
        EXPECT(0x795c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0316
        gbc.setState(0x1923, 0xacaf, 0x3180, 0x11fe, 0x7646, 0x1df9, 0x0, 0x0);
        gbc.writeMem(0x1923, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xacaf, gbc.sp());
        EXPECT(0x1925, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0317
        gbc.setState(0xb288, 0x7c9c, 0xc810, 0x5a35, 0x6a66, 0xfbfc, 0x1, 0x0);
        gbc.writeMem(0xb288, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x7c9c, gbc.sp());
        EXPECT(0xb28a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb288));
        EXPECT(0x51, gbc.readMem(0xb289));
        // CB 51 0318
        gbc.setState(0x3204, 0xb987, 0x4df0, 0xad0d, 0x394d, 0xc5a8, 0x0, 0x1);
        gbc.writeMem(0x3204, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xb987, gbc.sp());
        EXPECT(0x3206, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0319
        gbc.setState(0xd83c, 0x576c, 0xa8d0, 0xba5e, 0xf421, 0xd6c3, 0x0, 0x1);
        gbc.writeMem(0xd83c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x576c, gbc.sp());
        EXPECT(0xd83e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd83c));
        EXPECT(0x51, gbc.readMem(0xd83d));
        // CB 51 031A
        gbc.setState(0x20c8, 0x22ff, 0x7f00, 0x3200, 0x2886, 0x8893, 0x0, 0x0);
        gbc.writeMem(0x20c8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x22ff, gbc.sp());
        EXPECT(0x20ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 031B
        gbc.setState(0xee21, 0x81df, 0x8410, 0xb616, 0x24ba, 0x8231, 0x1, 0x0);
        gbc.writeMem(0xee21, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x81df, gbc.sp());
        EXPECT(0xee23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee21));
        EXPECT(0x51, gbc.readMem(0xee22));
        // CB 51 031C
        gbc.setState(0x8468, 0x453c, 0x6870, 0x2c7d, 0xffaa, 0xb815, 0x0, 0x1);
        gbc.writeMem(0x8468, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x453c, gbc.sp());
        EXPECT(0x846a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8468));
        EXPECT(0x51, gbc.readMem(0x8469));
        // CB 51 031D
        gbc.setState(0x651f, 0xd7a4, 0x5330, 0xfc87, 0x335e, 0xc4c3, 0x1, 0x0);
        gbc.writeMem(0x651f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xd7a4, gbc.sp());
        EXPECT(0x6521, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 031E
        gbc.setState(0xc236, 0x79e2, 0xec50, 0x7030, 0x1a3b, 0xfc8a, 0x0, 0x0);
        gbc.writeMem(0xc236, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x79e2, gbc.sp());
        EXPECT(0xc238, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc236));
        EXPECT(0x51, gbc.readMem(0xc237));
        // CB 51 031F
        gbc.setState(0x9560, 0x9626, 0x3da0, 0xbf6c, 0x654c, 0x95e, 0x1, 0x0);
        gbc.writeMem(0x9560, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x9626, gbc.sp());
        EXPECT(0x9562, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9560));
        EXPECT(0x51, gbc.readMem(0x9561));
        // CB 51 0320
        gbc.setState(0x3ce2, 0x7ecd, 0x1640, 0xa986, 0x7e9e, 0xb83e, 0x0, 0x0);
        gbc.writeMem(0x3ce2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x7ecd, gbc.sp());
        EXPECT(0x3ce4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0321
        gbc.setState(0xd4db, 0xef4f, 0xf910, 0x6d85, 0xa91f, 0x974c, 0x1, 0x0);
        gbc.writeMem(0xd4db, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xef4f, gbc.sp());
        EXPECT(0xd4dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4db));
        EXPECT(0x51, gbc.readMem(0xd4dc));
        // CB 51 0322
        gbc.setState(0x4446, 0x6f6e, 0x9800, 0x79c1, 0x20f1, 0xc90f, 0x1, 0x0);
        gbc.writeMem(0x4446, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x6f6e, gbc.sp());
        EXPECT(0x4448, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0323
        gbc.setState(0xcc67, 0xf31e, 0x3b90, 0xe64b, 0x5cd5, 0x8ca2, 0x1, 0x0);
        gbc.writeMem(0xcc67, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xf31e, gbc.sp());
        EXPECT(0xcc69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc67));
        EXPECT(0x51, gbc.readMem(0xcc68));
        // CB 51 0324
        gbc.setState(0xc2bb, 0xfcff, 0x3390, 0x5e3b, 0x56b1, 0x39e5, 0x0, 0x1);
        gbc.writeMem(0xc2bb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xfcff, gbc.sp());
        EXPECT(0xc2bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2bb));
        EXPECT(0x51, gbc.readMem(0xc2bc));
        // CB 51 0325
        gbc.setState(0xb0e3, 0xff38, 0x98d0, 0x67ed, 0xa933, 0x2e68, 0x1, 0x1);
        gbc.writeMem(0xb0e3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xff38, gbc.sp());
        EXPECT(0xb0e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0e3));
        EXPECT(0x51, gbc.readMem(0xb0e4));
        // CB 51 0326
        gbc.setState(0xa190, 0x67f9, 0x6a20, 0x44d3, 0x8f9f, 0x46e0, 0x1, 0x0);
        gbc.writeMem(0xa190, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x67f9, gbc.sp());
        EXPECT(0xa192, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa190));
        EXPECT(0x51, gbc.readMem(0xa191));
        // CB 51 0327
        gbc.setState(0x6a50, 0xe6e0, 0x4060, 0xa937, 0x4052, 0xb3ca, 0x1, 0x1);
        gbc.writeMem(0x6a50, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xe6e0, gbc.sp());
        EXPECT(0x6a52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0329
        gbc.setState(0xd9a9, 0x1899, 0x10d0, 0x7ae6, 0x359e, 0x81c5, 0x0, 0x1);
        gbc.writeMem(0xd9a9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x1899, gbc.sp());
        EXPECT(0xd9ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9a9));
        EXPECT(0x51, gbc.readMem(0xd9aa));
        // CB 51 032A
        gbc.setState(0x140d, 0x6ebb, 0xb820, 0x2f, 0xbd12, 0x8754, 0x0, 0x0);
        gbc.writeMem(0x140d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x6ebb, gbc.sp());
        EXPECT(0x140f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 032B
        gbc.setState(0xaada, 0x3b6a, 0x32f0, 0x3fe5, 0x1438, 0x1968, 0x1, 0x1);
        gbc.writeMem(0xaada, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x3b6a, gbc.sp());
        EXPECT(0xaadc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaada));
        EXPECT(0x51, gbc.readMem(0xaadb));
        // CB 51 032C
        gbc.setState(0xab20, 0x37ae, 0xe920, 0x8b94, 0xa3a5, 0x118d, 0x1, 0x0);
        gbc.writeMem(0xab20, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x37ae, gbc.sp());
        EXPECT(0xab22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab20));
        EXPECT(0x51, gbc.readMem(0xab21));
        // CB 51 032D
        gbc.setState(0xefbd, 0x7c37, 0xecf0, 0x2af1, 0xf46a, 0xc595, 0x1, 0x0);
        gbc.writeMem(0xefbd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x7c37, gbc.sp());
        EXPECT(0xefbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefbd));
        EXPECT(0x51, gbc.readMem(0xefbe));
        // CB 51 032E
        gbc.setState(0x6928, 0xb39, 0x1460, 0xb8d8, 0x5f4, 0xc4bb, 0x1, 0x1);
        gbc.writeMem(0x6928, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xb39, gbc.sp());
        EXPECT(0x692a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 032F
        gbc.setState(0x4a2b, 0xf5e9, 0xb0a0, 0xf66f, 0x3d75, 0xa898, 0x1, 0x0);
        gbc.writeMem(0x4a2b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xf5e9, gbc.sp());
        EXPECT(0x4a2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0330
        gbc.setState(0x5a66, 0x8297, 0x14b0, 0x385, 0x296c, 0x6d43, 0x0, 0x0);
        gbc.writeMem(0x5a66, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x8297, gbc.sp());
        EXPECT(0x5a68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0331
        gbc.setState(0x5235, 0x1329, 0x1c40, 0x50a1, 0x283e, 0xd20b, 0x1, 0x0);
        gbc.writeMem(0x5235, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x1329, gbc.sp());
        EXPECT(0x5237, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0332
        gbc.setState(0x5fdd, 0xff5f, 0xcf80, 0xb07e, 0xfc11, 0xf89b, 0x1, 0x0);
        gbc.writeMem(0x5fdd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xff5f, gbc.sp());
        EXPECT(0x5fdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0333
        gbc.setState(0x77c1, 0xea29, 0x48e0, 0xfdb6, 0x4742, 0xde49, 0x1, 0x1);
        gbc.writeMem(0x77c1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xea29, gbc.sp());
        EXPECT(0x77c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0334
        gbc.setState(0xaea6, 0x9eec, 0x6ea0, 0x63e3, 0xe729, 0xe9ef, 0x1, 0x0);
        gbc.writeMem(0xaea6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x9eec, gbc.sp());
        EXPECT(0xaea8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaea6));
        EXPECT(0x51, gbc.readMem(0xaea7));
        // CB 51 0335
        gbc.setState(0x8d1d, 0xee78, 0x88c0, 0x354b, 0xe88, 0x39f6, 0x1, 0x0);
        gbc.writeMem(0x8d1d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xee78, gbc.sp());
        EXPECT(0x8d1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d1d));
        EXPECT(0x51, gbc.readMem(0x8d1e));
        // CB 51 0336
        gbc.setState(0x7942, 0xc751, 0x8ac0, 0x945f, 0xd7b7, 0xe848, 0x0, 0x1);
        gbc.writeMem(0x7942, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xc751, gbc.sp());
        EXPECT(0x7944, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0337
        gbc.setState(0x3108, 0xe855, 0xcd50, 0x3208, 0xf0a, 0xc08b, 0x0, 0x0);
        gbc.writeMem(0x3108, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xe855, gbc.sp());
        EXPECT(0x310a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0338
        gbc.setState(0xa508, 0x82fb, 0xed0, 0xef70, 0x676c, 0x55b, 0x0, 0x1);
        gbc.writeMem(0xa508, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x82fb, gbc.sp());
        EXPECT(0xa50a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa508));
        EXPECT(0x51, gbc.readMem(0xa509));
        // CB 51 0339
        gbc.setState(0x783f, 0xf98c, 0x3e50, 0x950f, 0x3f2c, 0x9dcc, 0x1, 0x1);
        gbc.writeMem(0x783f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xf98c, gbc.sp());
        EXPECT(0x7841, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 033A
        gbc.setState(0x71d6, 0xe1c8, 0xf330, 0xb27f, 0x3754, 0x35e1, 0x1, 0x1);
        gbc.writeMem(0x71d6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xe1c8, gbc.sp());
        EXPECT(0x71d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 033B
        gbc.setState(0x4dae, 0xe97f, 0x6b70, 0x6e41, 0xddce, 0x5ff8, 0x1, 0x0);
        gbc.writeMem(0x4dae, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xe97f, gbc.sp());
        EXPECT(0x4db0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 033C
        gbc.setState(0x78d2, 0x53b9, 0xa20, 0x695f, 0xae1e, 0xe1b0, 0x1, 0x1);
        gbc.writeMem(0x78d2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x53b9, gbc.sp());
        EXPECT(0x78d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 033D
        gbc.setState(0x8d5e, 0x3e17, 0x6c0, 0x3c3, 0x244f, 0x186a, 0x0, 0x1);
        gbc.writeMem(0x8d5e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x3e17, gbc.sp());
        EXPECT(0x8d60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d5e));
        EXPECT(0x51, gbc.readMem(0x8d5f));
        // CB 51 033E
        gbc.setState(0xd039, 0x2a30, 0x1800, 0x768f, 0x68f3, 0xbacf, 0x1, 0x0);
        gbc.writeMem(0xd039, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x2a30, gbc.sp());
        EXPECT(0xd03b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd039));
        EXPECT(0x51, gbc.readMem(0xd03a));
        // CB 51 033F
        gbc.setState(0x1893, 0xb861, 0xfea0, 0xefe4, 0xc072, 0xb765, 0x1, 0x0);
        gbc.writeMem(0x1893, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xb861, gbc.sp());
        EXPECT(0x1895, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0340
        gbc.setState(0xc29d, 0x1dce, 0x42d0, 0xe7e2, 0x1ce3, 0x48bf, 0x1, 0x0);
        gbc.writeMem(0xc29d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x1dce, gbc.sp());
        EXPECT(0xc29f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc29d));
        EXPECT(0x51, gbc.readMem(0xc29e));
        // CB 51 0341
        gbc.setState(0x335e, 0x2bde, 0x20, 0x5c09, 0x3fbf, 0x223f, 0x1, 0x0);
        gbc.writeMem(0x335e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x2bde, gbc.sp());
        EXPECT(0x3360, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0342
        gbc.setState(0x9d7f, 0xf614, 0xde60, 0xca8a, 0x63d7, 0x6c8c, 0x1, 0x1);
        gbc.writeMem(0x9d7f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xf614, gbc.sp());
        EXPECT(0x9d81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d7f));
        EXPECT(0x51, gbc.readMem(0x9d80));
        // CB 51 0343
        gbc.setState(0x20d8, 0x8b54, 0x1a80, 0x3a8, 0xec07, 0x968d, 0x0, 0x0);
        gbc.writeMem(0x20d8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x8b54, gbc.sp());
        EXPECT(0x20da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0344
        gbc.setState(0x505e, 0x912d, 0x3280, 0x19d5, 0x722b, 0xa9bc, 0x0, 0x1);
        gbc.writeMem(0x505e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x912d, gbc.sp());
        EXPECT(0x5060, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0345
        gbc.setState(0x4a06, 0xe229, 0x2a70, 0xbd5d, 0xf58b, 0x63dd, 0x0, 0x0);
        gbc.writeMem(0x4a06, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xe229, gbc.sp());
        EXPECT(0x4a08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0346
        gbc.setState(0x1393, 0xe834, 0xe990, 0xf7ef, 0x9c88, 0x961e, 0x1, 0x0);
        gbc.writeMem(0x1393, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xe834, gbc.sp());
        EXPECT(0x1395, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0347
        gbc.setState(0x3f8b, 0x7da3, 0xa3f0, 0x6581, 0xb0a6, 0x85d7, 0x0, 0x0);
        gbc.writeMem(0x3f8b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x7da3, gbc.sp());
        EXPECT(0x3f8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0348
        gbc.setState(0x998b, 0x5568, 0x8b30, 0xe32, 0xd965, 0xd41c, 0x1, 0x0);
        gbc.writeMem(0x998b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x5568, gbc.sp());
        EXPECT(0x998d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x998b));
        EXPECT(0x51, gbc.readMem(0x998c));
        // CB 51 0349
        gbc.setState(0x5cab, 0x821e, 0x2e50, 0xa8f9, 0x9efc, 0x24ba, 0x0, 0x1);
        gbc.writeMem(0x5cab, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x821e, gbc.sp());
        EXPECT(0x5cad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 034A
        gbc.setState(0x6eba, 0xd036, 0x7fb0, 0x8af5, 0xdb39, 0x9ac9, 0x1, 0x0);
        gbc.writeMem(0x6eba, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xd036, gbc.sp());
        EXPECT(0x6ebc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 034B
        gbc.setState(0x346d, 0x9b56, 0xdb20, 0x2ca7, 0xe7d7, 0xc39d, 0x0, 0x0);
        gbc.writeMem(0x346d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x9b56, gbc.sp());
        EXPECT(0x346f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 034C
        gbc.setState(0xa931, 0xfd31, 0x50d0, 0x15a8, 0x8fa7, 0x91b, 0x1, 0x1);
        gbc.writeMem(0xa931, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xfd31, gbc.sp());
        EXPECT(0xa933, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa931));
        EXPECT(0x51, gbc.readMem(0xa932));
        // CB 51 034D
        gbc.setState(0x5c38, 0x8ec0, 0x16f0, 0x2ba3, 0x194f, 0x43a6, 0x1, 0x1);
        gbc.writeMem(0x5c38, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x8ec0, gbc.sp());
        EXPECT(0x5c3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 034E
        gbc.setState(0xacb4, 0x8daf, 0x1d20, 0xb518, 0x3161, 0x943e, 0x0, 0x0);
        gbc.writeMem(0xacb4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x8daf, gbc.sp());
        EXPECT(0xacb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacb4));
        EXPECT(0x51, gbc.readMem(0xacb5));
        // CB 51 034F
        gbc.setState(0x5b3f, 0x8c52, 0x4190, 0xe638, 0x43a6, 0x8fb5, 0x1, 0x1);
        gbc.writeMem(0x5b3f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x8c52, gbc.sp());
        EXPECT(0x5b41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0350
        gbc.setState(0x9d35, 0x6636, 0xcb0, 0x4b9d, 0x2967, 0xf9b7, 0x0, 0x0);
        gbc.writeMem(0x9d35, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x6636, gbc.sp());
        EXPECT(0x9d37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d35));
        EXPECT(0x51, gbc.readMem(0x9d36));
        // CB 51 0352
        gbc.setState(0x178d, 0x541b, 0xa050, 0x76c2, 0x5e5b, 0xd9d0, 0x0, 0x1);
        gbc.writeMem(0x178d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x541b, gbc.sp());
        EXPECT(0x178f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0353
        gbc.setState(0x204f, 0x52b1, 0x5140, 0x8d84, 0xf7e6, 0x7b35, 0x0, 0x0);
        gbc.writeMem(0x204f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x52b1, gbc.sp());
        EXPECT(0x2051, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0354
        gbc.setState(0x451, 0xe1ff, 0xf200, 0x3e29, 0x21e9, 0xe4da, 0x1, 0x1);
        gbc.writeMem(0x451, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xe1ff, gbc.sp());
        EXPECT(0x453, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0355
        gbc.setState(0xa3ce, 0x79be, 0x7620, 0xe076, 0x582a, 0xfe3, 0x0, 0x0);
        gbc.writeMem(0xa3ce, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x79be, gbc.sp());
        EXPECT(0xa3d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3ce));
        EXPECT(0x51, gbc.readMem(0xa3cf));
        // CB 51 0356
        gbc.setState(0x9815, 0x8165, 0x81e0, 0x5f5e, 0x957e, 0x5f67, 0x0, 0x0);
        gbc.writeMem(0x9815, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x8165, gbc.sp());
        EXPECT(0x9817, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9815));
        EXPECT(0x51, gbc.readMem(0x9816));
        // CB 51 0358
        gbc.setState(0xb67f, 0x367, 0x4b0, 0x3e93, 0xd95c, 0x7fd4, 0x1, 0x0);
        gbc.writeMem(0xb67f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x367, gbc.sp());
        EXPECT(0xb681, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb67f));
        EXPECT(0x51, gbc.readMem(0xb680));
        // CB 51 0359
        gbc.setState(0xeccb, 0xa73, 0xfa10, 0x5eba, 0xd933, 0xf0f3, 0x1, 0x0);
        gbc.writeMem(0xeccb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xa73, gbc.sp());
        EXPECT(0xeccd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeccb));
        EXPECT(0x51, gbc.readMem(0xeccc));
        // CB 51 035A
        gbc.setState(0x4a3e, 0xa524, 0x51a0, 0x33d1, 0xfb1f, 0x2b88, 0x0, 0x0);
        gbc.writeMem(0x4a3e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xa524, gbc.sp());
        EXPECT(0x4a40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 035B
        gbc.setState(0x4390, 0x754b, 0x5860, 0x64e2, 0xc7cd, 0x79ab, 0x0, 0x0);
        gbc.writeMem(0x4390, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x754b, gbc.sp());
        EXPECT(0x4392, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 035C
        gbc.setState(0x2fed, 0xb055, 0x9330, 0x58f4, 0xcec4, 0x87b, 0x0, 0x1);
        gbc.writeMem(0x2fed, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xb055, gbc.sp());
        EXPECT(0x2fef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 035D
        gbc.setState(0x1a98, 0xa661, 0x1d00, 0xf8ec, 0xe6f2, 0xb9d8, 0x1, 0x0);
        gbc.writeMem(0x1a98, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xa661, gbc.sp());
        EXPECT(0x1a9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 035F
        gbc.setState(0xecc2, 0x9c1d, 0xabd0, 0x48c6, 0x50bb, 0x3b20, 0x1, 0x1);
        gbc.writeMem(0xecc2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x9c1d, gbc.sp());
        EXPECT(0xecc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecc2));
        EXPECT(0x51, gbc.readMem(0xecc3));
        // CB 51 0360
        gbc.setState(0x5673, 0x9cc0, 0x9dd0, 0x3923, 0x92f7, 0xe57f, 0x0, 0x1);
        gbc.writeMem(0x5673, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x9cc0, gbc.sp());
        EXPECT(0x5675, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0361
        gbc.setState(0xd582, 0xd9f2, 0xaf90, 0x3464, 0xc631, 0xbc10, 0x0, 0x0);
        gbc.writeMem(0xd582, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xd9f2, gbc.sp());
        EXPECT(0xd584, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd582));
        EXPECT(0x51, gbc.readMem(0xd583));
        // CB 51 0362
        gbc.setState(0x26fa, 0x20e, 0x5830, 0xf436, 0x8cd7, 0xa953, 0x0, 0x0);
        gbc.writeMem(0x26fa, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x20e, gbc.sp());
        EXPECT(0x26fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0363
        gbc.setState(0xc2c4, 0x708f, 0x9760, 0x6a88, 0x7a36, 0x4cc7, 0x0, 0x0);
        gbc.writeMem(0xc2c4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x708f, gbc.sp());
        EXPECT(0xc2c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2c4));
        EXPECT(0x51, gbc.readMem(0xc2c5));
        // CB 51 0364
        gbc.setState(0x89a, 0x39f5, 0xd080, 0x6d7b, 0xbd06, 0x5510, 0x0, 0x0);
        gbc.writeMem(0x89a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x39f5, gbc.sp());
        EXPECT(0x89c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0365
        gbc.setState(0x9a58, 0x7ace, 0x49e0, 0x60ce, 0x198c, 0x1fe, 0x1, 0x0);
        gbc.writeMem(0x9a58, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x7ace, gbc.sp());
        EXPECT(0x9a5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a58));
        EXPECT(0x51, gbc.readMem(0x9a59));
        // CB 51 0366
        gbc.setState(0xe939, 0xaf2c, 0xbc60, 0x3e75, 0x4261, 0x738e, 0x1, 0x0);
        gbc.writeMem(0xe939, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xaf2c, gbc.sp());
        EXPECT(0xe93b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe939));
        EXPECT(0x51, gbc.readMem(0xe93a));
        // CB 51 0367
        gbc.setState(0xebd3, 0x9131, 0x71e0, 0x498a, 0x2e54, 0xabe9, 0x1, 0x0);
        gbc.writeMem(0xebd3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x9131, gbc.sp());
        EXPECT(0xebd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebd3));
        EXPECT(0x51, gbc.readMem(0xebd4));
        // CB 51 0368
        gbc.setState(0x8039, 0x7ba9, 0x65b0, 0x898d, 0xcc76, 0xde12, 0x0, 0x1);
        gbc.writeMem(0x8039, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x7ba9, gbc.sp());
        EXPECT(0x803b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8039));
        EXPECT(0x51, gbc.readMem(0x803a));
        // CB 51 0369
        gbc.setState(0xe696, 0x3f11, 0x3c70, 0xce97, 0x52d2, 0x1921, 0x1, 0x0);
        gbc.writeMem(0xe696, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x3f11, gbc.sp());
        EXPECT(0xe698, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe696));
        EXPECT(0x51, gbc.readMem(0xe697));
        // CB 51 036B
        gbc.setState(0xe23c, 0xc67a, 0x9a30, 0x5185, 0xa550, 0xf7fd, 0x0, 0x0);
        gbc.writeMem(0xe23c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xc67a, gbc.sp());
        EXPECT(0xe23e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe23c));
        EXPECT(0x51, gbc.readMem(0xe23d));
        // CB 51 036C
        gbc.setState(0x6bb4, 0xe130, 0x5b80, 0x8160, 0xd110, 0xf3e3, 0x0, 0x1);
        gbc.writeMem(0x6bb4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xe130, gbc.sp());
        EXPECT(0x6bb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 036D
        gbc.setState(0xd2fc, 0xcf4e, 0x47b0, 0xbfdd, 0xdbb7, 0x1d37, 0x0, 0x0);
        gbc.writeMem(0xd2fc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xcf4e, gbc.sp());
        EXPECT(0xd2fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2fc));
        EXPECT(0x51, gbc.readMem(0xd2fd));
        // CB 51 036E
        gbc.setState(0x60d2, 0x35f0, 0xbb20, 0x8462, 0x5a26, 0x67c0, 0x1, 0x0);
        gbc.writeMem(0x60d2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x35f0, gbc.sp());
        EXPECT(0x60d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 036F
        gbc.setState(0xec1, 0x5ad8, 0x35a0, 0x7e59, 0xbc3e, 0x7c4f, 0x0, 0x1);
        gbc.writeMem(0xec1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x5ad8, gbc.sp());
        EXPECT(0xec3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0370
        gbc.setState(0x5a8, 0x9005, 0xf4e0, 0x1022, 0x2eea, 0x2f19, 0x1, 0x0);
        gbc.writeMem(0x5a8, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x9005, gbc.sp());
        EXPECT(0x5aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0371
        gbc.setState(0xa78e, 0x5486, 0xd870, 0xe5a2, 0x9092, 0xf648, 0x0, 0x1);
        gbc.writeMem(0xa78e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x5486, gbc.sp());
        EXPECT(0xa790, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa78e));
        EXPECT(0x51, gbc.readMem(0xa78f));
        // CB 51 0372
        gbc.setState(0xaaa2, 0xdbd6, 0xd920, 0xd27d, 0x5a07, 0xbd63, 0x1, 0x1);
        gbc.writeMem(0xaaa2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xdbd6, gbc.sp());
        EXPECT(0xaaa4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaaa2));
        EXPECT(0x51, gbc.readMem(0xaaa3));
        // CB 51 0373
        gbc.setState(0xcee, 0xbc33, 0xd7b0, 0xebfd, 0x2e1f, 0x7074, 0x0, 0x0);
        gbc.writeMem(0xcee, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xbc33, gbc.sp());
        EXPECT(0xcf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0374
        gbc.setState(0xee97, 0x84c, 0x6e50, 0xaf1e, 0x365e, 0x3363, 0x0, 0x1);
        gbc.writeMem(0xee97, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x84c, gbc.sp());
        EXPECT(0xee99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee97));
        EXPECT(0x51, gbc.readMem(0xee98));
        // CB 51 0375
        gbc.setState(0x6539, 0x2f8a, 0x80, 0xd9b6, 0x9cda, 0xac94, 0x0, 0x1);
        gbc.writeMem(0x6539, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x2f8a, gbc.sp());
        EXPECT(0x653b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0376
        gbc.setState(0x806e, 0xd7f, 0x2c70, 0x6190, 0xa4c2, 0xcb40, 0x1, 0x1);
        gbc.writeMem(0x806e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xd7f, gbc.sp());
        EXPECT(0x8070, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x806e));
        EXPECT(0x51, gbc.readMem(0x806f));
        // CB 51 0377
        gbc.setState(0xd971, 0xb91a, 0x1a0, 0xfd80, 0xf8b4, 0xb87b, 0x1, 0x1);
        gbc.writeMem(0xd971, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xb91a, gbc.sp());
        EXPECT(0xd973, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd971));
        EXPECT(0x51, gbc.readMem(0xd972));
        // CB 51 0378
        gbc.setState(0xb7bb, 0xc16a, 0x3030, 0x33a4, 0x8744, 0xad6e, 0x1, 0x0);
        gbc.writeMem(0xb7bb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xc16a, gbc.sp());
        EXPECT(0xb7bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7bb));
        EXPECT(0x51, gbc.readMem(0xb7bc));
        // CB 51 0379
        gbc.setState(0xb6b0, 0x3483, 0x77c0, 0xd3a, 0x1edc, 0xe49f, 0x0, 0x1);
        gbc.writeMem(0xb6b0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x3483, gbc.sp());
        EXPECT(0xb6b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6b0));
        EXPECT(0x51, gbc.readMem(0xb6b1));
        // CB 51 037A
        gbc.setState(0xe98, 0xd529, 0x1fa0, 0xc104, 0x6bdb, 0xe651, 0x0, 0x0);
        gbc.writeMem(0xe98, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xd529, gbc.sp());
        EXPECT(0xe9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 037B
        gbc.setState(0xedbf, 0x31c6, 0xf2f0, 0x69cd, 0xe0d0, 0xaa7d, 0x0, 0x1);
        gbc.writeMem(0xedbf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x31c6, gbc.sp());
        EXPECT(0xedc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedbf));
        EXPECT(0x51, gbc.readMem(0xedc0));
        // CB 51 037C
        gbc.setState(0xb6f1, 0x8bcd, 0xea0, 0x9a69, 0xd824, 0xee7c, 0x1, 0x1);
        gbc.writeMem(0xb6f1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x8bcd, gbc.sp());
        EXPECT(0xb6f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6f1));
        EXPECT(0x51, gbc.readMem(0xb6f2));
        // CB 51 037D
        gbc.setState(0x8a4, 0x5833, 0xf500, 0x8cbb, 0xd253, 0xe790, 0x1, 0x0);
        gbc.writeMem(0x8a4, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x5833, gbc.sp());
        EXPECT(0x8a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 037E
        gbc.setState(0x27e9, 0xcd30, 0x3250, 0x7342, 0xcd3f, 0x986b, 0x1, 0x0);
        gbc.writeMem(0x27e9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xcd30, gbc.sp());
        EXPECT(0x27eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 037F
        gbc.setState(0x2b6b, 0x1db8, 0x1cf0, 0x5663, 0xa591, 0x1d6f, 0x1, 0x1);
        gbc.writeMem(0x2b6b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x1db8, gbc.sp());
        EXPECT(0x2b6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0380
        gbc.setState(0x592a, 0x78a2, 0x7ea0, 0xfa8c, 0x23ff, 0xf8a9, 0x1, 0x1);
        gbc.writeMem(0x592a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x78a2, gbc.sp());
        EXPECT(0x592c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0381
        gbc.setState(0x5f86, 0x8637, 0x63a0, 0x704, 0x5a7f, 0xbc58, 0x0, 0x1);
        gbc.writeMem(0x5f86, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x8637, gbc.sp());
        EXPECT(0x5f88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0382
        gbc.setState(0x8221, 0x7f01, 0x4070, 0xa969, 0x1ec9, 0x1ac, 0x0, 0x0);
        gbc.writeMem(0x8221, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x7f01, gbc.sp());
        EXPECT(0x8223, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8221));
        EXPECT(0x51, gbc.readMem(0x8222));
        // CB 51 0383
        gbc.setState(0x35be, 0x39d2, 0x8100, 0x72ef, 0x6357, 0x79d5, 0x1, 0x0);
        gbc.writeMem(0x35be, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x39d2, gbc.sp());
        EXPECT(0x35c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0384
        gbc.setState(0x8902, 0x9551, 0xa480, 0x801d, 0xb1ad, 0xd33, 0x0, 0x1);
        gbc.writeMem(0x8902, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x9551, gbc.sp());
        EXPECT(0x8904, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8902));
        EXPECT(0x51, gbc.readMem(0x8903));
        // CB 51 0385
        gbc.setState(0x4841, 0xb777, 0xa160, 0x242d, 0xad45, 0x1741, 0x0, 0x0);
        gbc.writeMem(0x4841, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xb777, gbc.sp());
        EXPECT(0x4843, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0386
        gbc.setState(0xc4ae, 0xc57b, 0x4260, 0x8562, 0x8d96, 0x71dd, 0x1, 0x0);
        gbc.writeMem(0xc4ae, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xc57b, gbc.sp());
        EXPECT(0xc4b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4ae));
        EXPECT(0x51, gbc.readMem(0xc4af));
        // CB 51 0387
        gbc.setState(0xba25, 0xe163, 0xa000, 0xf58d, 0x4d64, 0x97f, 0x1, 0x0);
        gbc.writeMem(0xba25, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xe163, gbc.sp());
        EXPECT(0xba27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba25));
        EXPECT(0x51, gbc.readMem(0xba26));
        // CB 51 0388
        gbc.setState(0xd77e, 0x5d98, 0xd0, 0xad98, 0x48c3, 0x5685, 0x0, 0x1);
        gbc.writeMem(0xd77e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x5d98, gbc.sp());
        EXPECT(0xd780, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd77e));
        EXPECT(0x51, gbc.readMem(0xd77f));
        // CB 51 0389
        gbc.setState(0xb375, 0x24fe, 0xfea0, 0x2e22, 0xf5ba, 0xef40, 0x0, 0x1);
        gbc.writeMem(0xb375, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x24fe, gbc.sp());
        EXPECT(0xb377, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb375));
        EXPECT(0x51, gbc.readMem(0xb376));
        // CB 51 038A
        gbc.setState(0x82e7, 0xd166, 0x7890, 0xd63b, 0x9333, 0xcb64, 0x0, 0x1);
        gbc.writeMem(0x82e7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xd166, gbc.sp());
        EXPECT(0x82e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82e7));
        EXPECT(0x51, gbc.readMem(0x82e8));
        // CB 51 038B
        gbc.setState(0x53dc, 0x8820, 0x14c0, 0x1936, 0xbf22, 0x8cc9, 0x1, 0x1);
        gbc.writeMem(0x53dc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x8820, gbc.sp());
        EXPECT(0x53de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 038C
        gbc.setState(0x903c, 0xfce6, 0x1ab0, 0x7975, 0x622b, 0x5817, 0x1, 0x0);
        gbc.writeMem(0x903c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xfce6, gbc.sp());
        EXPECT(0x903e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x903c));
        EXPECT(0x51, gbc.readMem(0x903d));
        // CB 51 038D
        gbc.setState(0x31c6, 0x29fb, 0x42f0, 0x2240, 0x656a, 0xc660, 0x0, 0x1);
        gbc.writeMem(0x31c6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x29fb, gbc.sp());
        EXPECT(0x31c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 038E
        gbc.setState(0x9d90, 0xafb0, 0xb3b0, 0x17b2, 0x1bfb, 0x6d19, 0x0, 0x0);
        gbc.writeMem(0x9d90, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xafb0, gbc.sp());
        EXPECT(0x9d92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d90));
        EXPECT(0x51, gbc.readMem(0x9d91));
        // CB 51 038F
        gbc.setState(0x7888, 0x8991, 0x7340, 0xc2f0, 0x965c, 0xbcf5, 0x1, 0x0);
        gbc.writeMem(0x7888, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x8991, gbc.sp());
        EXPECT(0x788a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0390
        gbc.setState(0x32cb, 0x2f46, 0x4c70, 0x662f, 0xa328, 0x775d, 0x0, 0x0);
        gbc.writeMem(0x32cb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x2f46, gbc.sp());
        EXPECT(0x32cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0391
        gbc.setState(0x39bd, 0xbb20, 0xc00, 0x5fb9, 0x157c, 0x2979, 0x0, 0x0);
        gbc.writeMem(0x39bd, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xbb20, gbc.sp());
        EXPECT(0x39bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0392
        gbc.setState(0xd801, 0xd373, 0x4790, 0x719b, 0x689e, 0x9cd5, 0x0, 0x1);
        gbc.writeMem(0xd801, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xd373, gbc.sp());
        EXPECT(0xd803, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd801));
        EXPECT(0x51, gbc.readMem(0xd802));
        // CB 51 0393
        gbc.setState(0x2b2e, 0x7e1, 0xe190, 0x91be, 0x4534, 0x851d, 0x0, 0x0);
        gbc.writeMem(0x2b2e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x7e1, gbc.sp());
        EXPECT(0x2b30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0395
        gbc.setState(0x9c61, 0x2925, 0xcd70, 0xf29d, 0x4359, 0x6b39, 0x0, 0x0);
        gbc.writeMem(0x9c61, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x2925, gbc.sp());
        EXPECT(0x9c63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c61));
        EXPECT(0x51, gbc.readMem(0x9c62));
        // CB 51 0396
        gbc.setState(0x2534, 0x2261, 0xe260, 0xeb13, 0xcb48, 0x5e9f, 0x1, 0x1);
        gbc.writeMem(0x2534, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x2261, gbc.sp());
        EXPECT(0x2536, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 0397
        gbc.setState(0x31c, 0xbd8b, 0x4f90, 0xaef7, 0xf9d1, 0x3db4, 0x0, 0x1);
        gbc.writeMem(0x31c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xbd8b, gbc.sp());
        EXPECT(0x31e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0398
        gbc.setState(0x7b71, 0x513a, 0x1150, 0x53b2, 0xaf11, 0x8a70, 0x0, 0x0);
        gbc.writeMem(0x7b71, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x513a, gbc.sp());
        EXPECT(0x7b73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 0399
        gbc.setState(0x60c1, 0x5bb5, 0x9940, 0xcf40, 0x3401, 0x3dda, 0x1, 0x1);
        gbc.writeMem(0x60c1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x5bb5, gbc.sp());
        EXPECT(0x60c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 039A
        gbc.setState(0xc052, 0x4fea, 0x5040, 0x590c, 0xde45, 0xb75e, 0x0, 0x1);
        gbc.writeMem(0xc052, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x4fea, gbc.sp());
        EXPECT(0xc054, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc052));
        EXPECT(0x51, gbc.readMem(0xc053));
        // CB 51 039B
        gbc.setState(0x1ab0, 0x92e2, 0xf650, 0xe1a1, 0x9d53, 0xdb8d, 0x1, 0x1);
        gbc.writeMem(0x1ab0, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x92e2, gbc.sp());
        EXPECT(0x1ab2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 039C
        gbc.setState(0x2084, 0xe9df, 0x8080, 0x9244, 0x8ed, 0x1a6b, 0x0, 0x1);
        gbc.writeMem(0x2084, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xe9df, gbc.sp());
        EXPECT(0x2086, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 039D
        gbc.setState(0x48c, 0x14a1, 0xb70, 0xa5b1, 0xdf6, 0x4c0, 0x0, 0x1);
        gbc.writeMem(0x48c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x14a1, gbc.sp());
        EXPECT(0x48e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 039E
        gbc.setState(0x7f64, 0x39e5, 0x7910, 0x6e84, 0xaf8, 0x3d0, 0x0, 0x0);
        gbc.writeMem(0x7f64, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x39e5, gbc.sp());
        EXPECT(0x7f66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03A0
        gbc.setState(0x7601, 0xe225, 0xfff0, 0x37bd, 0x3c78, 0x9846, 0x1, 0x0);
        gbc.writeMem(0x7601, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xe225, gbc.sp());
        EXPECT(0x7603, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03A1
        gbc.setState(0x8dc7, 0x82c4, 0x8de0, 0x86b8, 0x7895, 0xf7d0, 0x0, 0x1);
        gbc.writeMem(0x8dc7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x82c4, gbc.sp());
        EXPECT(0x8dc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dc7));
        EXPECT(0x51, gbc.readMem(0x8dc8));
        // CB 51 03A2
        gbc.setState(0x7683, 0x2aa5, 0xf6c0, 0x732a, 0x74f4, 0xe155, 0x1, 0x0);
        gbc.writeMem(0x7683, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x2aa5, gbc.sp());
        EXPECT(0x7685, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03A3
        gbc.setState(0x9906, 0xe242, 0xf9d0, 0x59d9, 0x5bc9, 0x1ab5, 0x0, 0x0);
        gbc.writeMem(0x9906, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xe242, gbc.sp());
        EXPECT(0x9908, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9906));
        EXPECT(0x51, gbc.readMem(0x9907));
        // CB 51 03A4
        gbc.setState(0x8027, 0x2d5b, 0x82a0, 0x9481, 0xd3d6, 0xaab8, 0x1, 0x0);
        gbc.writeMem(0x8027, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x2d5b, gbc.sp());
        EXPECT(0x8029, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8027));
        EXPECT(0x51, gbc.readMem(0x8028));
        // CB 51 03A5
        gbc.setState(0x7297, 0xda1, 0xad30, 0x50ed, 0x6f51, 0x4c22, 0x1, 0x0);
        gbc.writeMem(0x7297, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xda1, gbc.sp());
        EXPECT(0x7299, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03A7
        gbc.setState(0xc4c5, 0x7b0b, 0x4be0, 0xa6fa, 0x655e, 0x3458, 0x1, 0x0);
        gbc.writeMem(0xc4c5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x7b0b, gbc.sp());
        EXPECT(0xc4c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4c5));
        EXPECT(0x51, gbc.readMem(0xc4c6));
        // CB 51 03A8
        gbc.setState(0xdb4d, 0x4b88, 0x5800, 0x1a6d, 0xb51b, 0x67c0, 0x1, 0x0);
        gbc.writeMem(0xdb4d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x4b88, gbc.sp());
        EXPECT(0xdb4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb4d));
        EXPECT(0x51, gbc.readMem(0xdb4e));
        // CB 51 03A9
        gbc.setState(0x3b92, 0xffa0, 0x6f70, 0x8a3f, 0x6c39, 0x1caf, 0x0, 0x1);
        gbc.writeMem(0x3b92, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xffa0, gbc.sp());
        EXPECT(0x3b94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03AA
        gbc.setState(0x3e34, 0x4679, 0xd920, 0x45bb, 0x58de, 0xc382, 0x0, 0x0);
        gbc.writeMem(0x3e34, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x4679, gbc.sp());
        EXPECT(0x3e36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03AB
        gbc.setState(0x6d66, 0x4bea, 0x9290, 0xaacd, 0x12db, 0xe88c, 0x1, 0x0);
        gbc.writeMem(0x6d66, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x4bea, gbc.sp());
        EXPECT(0x6d68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03AD
        gbc.setState(0x1138, 0xda57, 0xc200, 0x3134, 0x87ec, 0xa0d2, 0x0, 0x0);
        gbc.writeMem(0x1138, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xda57, gbc.sp());
        EXPECT(0x113a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03AE
        gbc.setState(0xd16a, 0xebbb, 0x5220, 0xbc6b, 0x1305, 0xb972, 0x1, 0x0);
        gbc.writeMem(0xd16a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xebbb, gbc.sp());
        EXPECT(0xd16c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd16a));
        EXPECT(0x51, gbc.readMem(0xd16b));
        // CB 51 03AF
        gbc.setState(0x24bf, 0x23bb, 0xd2d0, 0xdcc6, 0xeea1, 0xfb1c, 0x0, 0x0);
        gbc.writeMem(0x24bf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x23bb, gbc.sp());
        EXPECT(0x24c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03B0
        gbc.setState(0x22f2, 0x962d, 0xcc50, 0xf435, 0x9ceb, 0xc145, 0x1, 0x1);
        gbc.writeMem(0x22f2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x962d, gbc.sp());
        EXPECT(0x22f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03B1
        gbc.setState(0x59f5, 0x80f7, 0x1510, 0x55bf, 0x6a9d, 0xc8ed, 0x0, 0x1);
        gbc.writeMem(0x59f5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x80f7, gbc.sp());
        EXPECT(0x59f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03B2
        gbc.setState(0x59cf, 0xc8da, 0xb8f0, 0x9a3e, 0xdc73, 0x1999, 0x1, 0x0);
        gbc.writeMem(0x59cf, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xc8da, gbc.sp());
        EXPECT(0x59d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03B3
        gbc.setState(0x8fe2, 0xb492, 0xb2c0, 0xa081, 0x3605, 0x39fd, 0x0, 0x1);
        gbc.writeMem(0x8fe2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xb492, gbc.sp());
        EXPECT(0x8fe4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fe2));
        EXPECT(0x51, gbc.readMem(0x8fe3));
        // CB 51 03B4
        gbc.setState(0x2a43, 0xe6a5, 0x3370, 0x972f, 0x2afa, 0x511, 0x1, 0x0);
        gbc.writeMem(0x2a43, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xe6a5, gbc.sp());
        EXPECT(0x2a45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03B5
        gbc.setState(0xdc39, 0x2119, 0x67d0, 0xd238, 0x3b16, 0xfcab, 0x0, 0x1);
        gbc.writeMem(0xdc39, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2119, gbc.sp());
        EXPECT(0xdc3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc39));
        EXPECT(0x51, gbc.readMem(0xdc3a));
        // CB 51 03B6
        gbc.setState(0x8a53, 0xae40, 0xbd40, 0xe65a, 0xcf3b, 0x80e3, 0x0, 0x0);
        gbc.writeMem(0x8a53, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xae40, gbc.sp());
        EXPECT(0x8a55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a53));
        EXPECT(0x51, gbc.readMem(0x8a54));
        // CB 51 03B7
        gbc.setState(0x7a4e, 0x5203, 0xe90, 0xfba1, 0x5e5f, 0xf215, 0x1, 0x0);
        gbc.writeMem(0x7a4e, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x5203, gbc.sp());
        EXPECT(0x7a50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03B8
        gbc.setState(0x1fd3, 0x7d3f, 0x990, 0xc2a8, 0xa27c, 0xb725, 0x0, 0x1);
        gbc.writeMem(0x1fd3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x7d3f, gbc.sp());
        EXPECT(0x1fd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03B9
        gbc.setState(0xa057, 0x1e68, 0xfae0, 0x607e, 0x1da9, 0xb7c, 0x0, 0x1);
        gbc.writeMem(0xa057, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x1e68, gbc.sp());
        EXPECT(0xa059, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa057));
        EXPECT(0x51, gbc.readMem(0xa058));
        // CB 51 03BA
        gbc.setState(0x98cc, 0x953, 0x5620, 0x8563, 0x5752, 0x9033, 0x1, 0x0);
        gbc.writeMem(0x98cc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x953, gbc.sp());
        EXPECT(0x98ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98cc));
        EXPECT(0x51, gbc.readMem(0x98cd));
        // CB 51 03BB
        gbc.setState(0x9048, 0x87e5, 0x4740, 0xe4d4, 0xe32f, 0x7960, 0x1, 0x1);
        gbc.writeMem(0x9048, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x87e5, gbc.sp());
        EXPECT(0x904a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9048));
        EXPECT(0x51, gbc.readMem(0x9049));
        // CB 51 03BC
        gbc.setState(0xd908, 0x6bf1, 0xcba0, 0x4397, 0x3fc3, 0xa9f4, 0x1, 0x1);
        gbc.writeMem(0xd908, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x6bf1, gbc.sp());
        EXPECT(0xd90a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd908));
        EXPECT(0x51, gbc.readMem(0xd909));
        // CB 51 03BD
        gbc.setState(0x8b79, 0xe125, 0x6a30, 0xe7f8, 0xa217, 0xc796, 0x0, 0x1);
        gbc.writeMem(0x8b79, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xe125, gbc.sp());
        EXPECT(0x8b7b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b79));
        EXPECT(0x51, gbc.readMem(0x8b7a));
        // CB 51 03BE
        gbc.setState(0xbf08, 0xc0d1, 0x6050, 0xd5fb, 0x6449, 0x6f58, 0x1, 0x0);
        gbc.writeMem(0xbf08, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xc0d1, gbc.sp());
        EXPECT(0xbf0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf08));
        EXPECT(0x51, gbc.readMem(0xbf09));
        // CB 51 03BF
        gbc.setState(0x3e29, 0xbd18, 0x6fc0, 0xbded, 0x1c6b, 0x5a4b, 0x0, 0x1);
        gbc.writeMem(0x3e29, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xbd18, gbc.sp());
        EXPECT(0x3e2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03C0
        gbc.setState(0x5e2f, 0xb1db, 0x3670, 0x24bf, 0x2109, 0x1e4b, 0x1, 0x1);
        gbc.writeMem(0x5e2f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xb1db, gbc.sp());
        EXPECT(0x5e31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03C1
        gbc.setState(0x1f05, 0x962b, 0x62b0, 0x995e, 0xdd36, 0x49c9, 0x0, 0x1);
        gbc.writeMem(0x1f05, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x962b, gbc.sp());
        EXPECT(0x1f07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03C2
        gbc.setState(0x36cc, 0x29f4, 0x6600, 0x187, 0x3eba, 0xfdfe, 0x0, 0x1);
        gbc.writeMem(0x36cc, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x29f4, gbc.sp());
        EXPECT(0x36ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03C3
        gbc.setState(0xb660, 0x98a6, 0x4200, 0xc702, 0x1f6f, 0xf3ea, 0x1, 0x0);
        gbc.writeMem(0xb660, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x98a6, gbc.sp());
        EXPECT(0xb662, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb660));
        EXPECT(0x51, gbc.readMem(0xb661));
        // CB 51 03C4
        gbc.setState(0xe2d7, 0x74c1, 0x77f0, 0x4369, 0x5aff, 0x8801, 0x1, 0x0);
        gbc.writeMem(0xe2d7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x74c1, gbc.sp());
        EXPECT(0xe2d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2d7));
        EXPECT(0x51, gbc.readMem(0xe2d8));
        // CB 51 03C5
        gbc.setState(0x978a, 0xe37d, 0x9420, 0x95f4, 0x1369, 0xb9f8, 0x0, 0x0);
        gbc.writeMem(0x978a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xe37d, gbc.sp());
        EXPECT(0x978c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x978a));
        EXPECT(0x51, gbc.readMem(0x978b));
        // CB 51 03C6
        gbc.setState(0xc0c9, 0x9310, 0x320, 0xd0fd, 0xc631, 0x1a47, 0x1, 0x1);
        gbc.writeMem(0xc0c9, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x9310, gbc.sp());
        EXPECT(0xc0cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0c9));
        EXPECT(0x51, gbc.readMem(0xc0ca));
        // CB 51 03C7
        gbc.setState(0x62a7, 0x76e3, 0x20c0, 0x285b, 0x82c, 0xc835, 0x0, 0x0);
        gbc.writeMem(0x62a7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x76e3, gbc.sp());
        EXPECT(0x62a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03C8
        gbc.setState(0x1280, 0x812a, 0xeb60, 0x75e4, 0x8785, 0x1989, 0x0, 0x0);
        gbc.writeMem(0x1280, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x812a, gbc.sp());
        EXPECT(0x1282, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03C9
        gbc.setState(0x1e31, 0x8036, 0xe90, 0x759f, 0x6cf0, 0x89d6, 0x0, 0x0);
        gbc.writeMem(0x1e31, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x8036, gbc.sp());
        EXPECT(0x1e33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03CA
        gbc.setState(0xa990, 0xfed, 0x3610, 0x7648, 0xdea6, 0x2604, 0x1, 0x1);
        gbc.writeMem(0xa990, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xfed, gbc.sp());
        EXPECT(0xa992, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa990));
        EXPECT(0x51, gbc.readMem(0xa991));
        // CB 51 03CB
        gbc.setState(0x80fb, 0x8af2, 0xf9a0, 0xa463, 0x7c4f, 0xf06f, 0x1, 0x0);
        gbc.writeMem(0x80fb, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x8af2, gbc.sp());
        EXPECT(0x80fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80fb));
        EXPECT(0x51, gbc.readMem(0x80fc));
        // CB 51 03CC
        gbc.setState(0x65f5, 0x54c4, 0x6aa0, 0xe31c, 0xc138, 0x6021, 0x0, 0x0);
        gbc.writeMem(0x65f5, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x54c4, gbc.sp());
        EXPECT(0x65f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03CE
        gbc.setState(0x6a82, 0xe9be, 0xdf70, 0xa73a, 0xc4fe, 0x8207, 0x0, 0x0);
        gbc.writeMem(0x6a82, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xe9be, gbc.sp());
        EXPECT(0x6a84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03CF
        gbc.setState(0x210d, 0x91f6, 0xadd0, 0x66c5, 0x21d5, 0xcabf, 0x0, 0x1);
        gbc.writeMem(0x210d, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x91f6, gbc.sp());
        EXPECT(0x210f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03D0
        gbc.setState(0xdaf7, 0x204d, 0x2720, 0x5435, 0x22d5, 0x30c0, 0x0, 0x0);
        gbc.writeMem(0xdaf7, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x204d, gbc.sp());
        EXPECT(0xdaf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaf7));
        EXPECT(0x51, gbc.readMem(0xdaf8));
        // CB 51 03D1
        gbc.setState(0x6d86, 0x9c31, 0x1ce0, 0xe873, 0x4f1a, 0xe05, 0x1, 0x0);
        gbc.writeMem(0x6d86, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x9c31, gbc.sp());
        EXPECT(0x6d88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03D2
        gbc.setState(0x8c66, 0x8ead, 0x8750, 0xc6e7, 0x1cb, 0xbd58, 0x1, 0x0);
        gbc.writeMem(0x8c66, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x8ead, gbc.sp());
        EXPECT(0x8c68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c66));
        EXPECT(0x51, gbc.readMem(0x8c67));
        // CB 51 03D3
        gbc.setState(0x8b3a, 0x8a03, 0x9c0, 0x34d4, 0xcb5a, 0x4113, 0x1, 0x0);
        gbc.writeMem(0x8b3a, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x8a03, gbc.sp());
        EXPECT(0x8b3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b3a));
        EXPECT(0x51, gbc.readMem(0x8b3b));
        // CB 51 03D4
        gbc.setState(0x2bce, 0x1b76, 0x8440, 0x7af6, 0x5f6c, 0xbf25, 0x1, 0x0);
        gbc.writeMem(0x2bce, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x1b76, gbc.sp());
        EXPECT(0x2bd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03D5
        gbc.setState(0x4d1c, 0x1c0a, 0x2920, 0x934f, 0xa53d, 0xbcd0, 0x1, 0x0);
        gbc.writeMem(0x4d1c, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1c0a, gbc.sp());
        EXPECT(0x4d1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03D6
        gbc.setState(0x8b09, 0xbecb, 0xfa50, 0x5021, 0xdaf, 0xbe97, 0x1, 0x1);
        gbc.writeMem(0x8b09, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xbecb, gbc.sp());
        EXPECT(0x8b0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b09));
        EXPECT(0x51, gbc.readMem(0x8b0a));
        // CB 51 03D7
        gbc.setState(0xef18, 0xec7b, 0xb3c0, 0xf641, 0x6430, 0x1828, 0x1, 0x0);
        gbc.writeMem(0xef18, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xec7b, gbc.sp());
        EXPECT(0xef1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef18));
        EXPECT(0x51, gbc.readMem(0xef19));
        // CB 51 03D8
        gbc.setState(0x3661, 0x5a97, 0x55f0, 0x2b75, 0xaaa1, 0x362f, 0x0, 0x0);
        gbc.writeMem(0x3661, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x5a97, gbc.sp());
        EXPECT(0x3663, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03D9
        gbc.setState(0x2eb1, 0x43b7, 0x7630, 0xcd2d, 0x6de6, 0x52f5, 0x0, 0x1);
        gbc.writeMem(0x2eb1, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x43b7, gbc.sp());
        EXPECT(0x2eb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03DA
        gbc.setState(0x657f, 0x85ac, 0x3c20, 0x5c5, 0xb77c, 0xe2a1, 0x1, 0x0);
        gbc.writeMem(0x657f, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x85ac, gbc.sp());
        EXPECT(0x6581, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03DB
        gbc.setState(0x70db, 0x723b, 0x7700, 0xa231, 0xdbc2, 0xfd31, 0x1, 0x1);
        gbc.writeMem(0x70db, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x723b, gbc.sp());
        EXPECT(0x70dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03DC
        gbc.setState(0x745, 0xd4ca, 0xfe10, 0x178c, 0x1299, 0x73b2, 0x1, 0x1);
        gbc.writeMem(0x745, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xd4ca, gbc.sp());
        EXPECT(0x747, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03DD
        gbc.setState(0xe599, 0x340, 0x5ba0, 0xc8fb, 0xbdae, 0x3f30, 0x1, 0x0);
        gbc.writeMem(0xe599, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x340, gbc.sp());
        EXPECT(0xe59b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe599));
        EXPECT(0x51, gbc.readMem(0xe59a));
        // CB 51 03DE
        gbc.setState(0x51a6, 0x5e4c, 0xbd40, 0x4a26, 0xa389, 0xe7b3, 0x1, 0x1);
        gbc.writeMem(0x51a6, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x5e4c, gbc.sp());
        EXPECT(0x51a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03DF
        gbc.setState(0xcfa3, 0x555e, 0x4c70, 0xaaff, 0xcef5, 0xb3d3, 0x0, 0x1);
        gbc.writeMem(0xcfa3, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x555e, gbc.sp());
        EXPECT(0xcfa5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfa3));
        EXPECT(0x51, gbc.readMem(0xcfa4));
        // CB 51 03E0
        gbc.setState(0xc328, 0xdefd, 0x6260, 0x382e, 0x55a4, 0x4222, 0x1, 0x1);
        gbc.writeMem(0xc328, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xdefd, gbc.sp());
        EXPECT(0xc32a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc328));
        EXPECT(0x51, gbc.readMem(0xc329));
        // CB 51 03E1
        gbc.setState(0xaf77, 0x81e1, 0x9530, 0x4bb9, 0xe93, 0xe643, 0x1, 0x1);
        gbc.writeMem(0xaf77, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x81e1, gbc.sp());
        EXPECT(0xaf79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf77));
        EXPECT(0x51, gbc.readMem(0xaf78));
        // CB 51 03E2
        gbc.setState(0x5b85, 0x8b18, 0xb450, 0x7b7e, 0xacf2, 0xbbe2, 0x0, 0x1);
        gbc.writeMem(0x5b85, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x8b18, gbc.sp());
        EXPECT(0x5b87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03E3
        gbc.setState(0x25a2, 0x8d09, 0xcf60, 0xd424, 0x65f6, 0xf353, 0x1, 0x1);
        gbc.writeMem(0x25a2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x8d09, gbc.sp());
        EXPECT(0x25a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 51 03E4
        gbc.setState(0xd075, 0x156a, 0x5650, 0x2ecf, 0x645a, 0x9cae, 0x0, 0x1);
        gbc.writeMem(0xd075, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x156a, gbc.sp());
        EXPECT(0xd077, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd075));
        EXPECT(0x51, gbc.readMem(0xd076));
        // CB 51 03E5
        gbc.setState(0x2ef2, 0xf6b8, 0x5670, 0x99ee, 0x3c43, 0xbe67, 0x1, 0x1);
        gbc.writeMem(0x2ef2, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xf6b8, gbc.sp());
        EXPECT(0x2ef4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 51 03E6
        gbc.setState(0x921b, 0x1a13, 0xe230, 0x1d84, 0x1d11, 0x9375, 0x0, 0x0);
        gbc.writeMem(0x921b, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x1a13, gbc.sp());
        EXPECT(0x921d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x921b));
        EXPECT(0x51, gbc.readMem(0x921c));
        // CB 51 03E7
        gbc.setState(0x8a11, 0x5daf, 0x8830, 0x4469, 0x2e91, 0xefdf, 0x0, 0x1);
        gbc.writeMem(0x8a11, { 0xcb, 0x51 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x5daf, gbc.sp());
        EXPECT(0x8a13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a11));
        EXPECT(0x51, gbc.readMem(0x8a12));
    }
