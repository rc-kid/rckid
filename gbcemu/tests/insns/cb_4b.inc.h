    TEST(gbcemu, opcode_cb_4b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 4B 0000
        gbc.setState(0xa7a1, 0x3996, 0x7a30, 0x660a, 0xd336, 0x7533, 0x1, 0x0);
        gbc.writeMem(0xa7a1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3996);
        EXPECT(gbc.pc(), 0xa7a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7a1), 0xcb);
        EXPECT(gbc.readMem(0xa7a2), 0x4b);
        // CB 4B 0001
        gbc.setState(0x19ca, 0x51e4, 0x85a0, 0x776c, 0xf485, 0x2f46, 0x0, 0x0);
        gbc.writeMem(0x19ca, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x51e4);
        EXPECT(gbc.pc(), 0x19cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0002
        gbc.setState(0x3c40, 0x4344, 0x4980, 0xaaf9, 0xa8a3, 0x5fa2, 0x0, 0x0);
        gbc.writeMem(0x3c40, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4344);
        EXPECT(gbc.pc(), 0x3c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0003
        gbc.setState(0x9762, 0x5ccc, 0x1400, 0x36db, 0xfa88, 0xa05f, 0x0, 0x1);
        gbc.writeMem(0x9762, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5ccc);
        EXPECT(gbc.pc(), 0x9764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9762), 0xcb);
        EXPECT(gbc.readMem(0x9763), 0x4b);
        // CB 4B 0004
        gbc.setState(0x3b74, 0x5866, 0x7b60, 0x3a81, 0xa9c5, 0x8aad, 0x1, 0x0);
        gbc.writeMem(0x3b74, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5866);
        EXPECT(gbc.pc(), 0x3b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0005
        gbc.setState(0x43bb, 0xaa80, 0xc840, 0x115e, 0x9804, 0x39fc, 0x1, 0x0);
        gbc.writeMem(0x43bb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xaa80);
        EXPECT(gbc.pc(), 0x43bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0006
        gbc.setState(0x96e1, 0xb889, 0x9230, 0x37d4, 0x7a4c, 0x20d1, 0x0, 0x0);
        gbc.writeMem(0x96e1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb889);
        EXPECT(gbc.pc(), 0x96e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96e1), 0xcb);
        EXPECT(gbc.readMem(0x96e2), 0x4b);
        // CB 4B 0007
        gbc.setState(0x239b, 0x68a5, 0x6070, 0x9c6, 0xcac6, 0x1014, 0x1, 0x0);
        gbc.writeMem(0x239b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x68a5);
        EXPECT(gbc.pc(), 0x239d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0008
        gbc.setState(0x8f, 0x9e, 0x8550, 0x6bf3, 0x577b, 0xdb78, 0x1, 0x1);
        gbc.writeMem(0x8f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9e);
        EXPECT(gbc.pc(), 0x91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0009
        gbc.setState(0xf22, 0x1880, 0x5290, 0xa12a, 0x2974, 0x34cc, 0x1, 0x0);
        gbc.writeMem(0xf22, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1880);
        EXPECT(gbc.pc(), 0xf24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 000A
        gbc.setState(0x1d9e, 0x553e, 0x48c0, 0xaff2, 0x6553, 0x7c01, 0x1, 0x1);
        gbc.writeMem(0x1d9e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x553e);
        EXPECT(gbc.pc(), 0x1da0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 000B
        gbc.setState(0x1fcb, 0xfd8f, 0x4a50, 0xaca6, 0x7c49, 0xeeb2, 0x0, 0x1);
        gbc.writeMem(0x1fcb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfd8f);
        EXPECT(gbc.pc(), 0x1fcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 000C
        gbc.setState(0x69ec, 0x4fc4, 0xeeb0, 0xd442, 0x33d2, 0x3eda, 0x1, 0x1);
        gbc.writeMem(0x69ec, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4fc4);
        EXPECT(gbc.pc(), 0x69ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 000D
        gbc.setState(0xe6c8, 0x85b3, 0xaff0, 0x7afe, 0x2128, 0xa80f, 0x1, 0x0);
        gbc.writeMem(0xe6c8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x85b3);
        EXPECT(gbc.pc(), 0xe6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6c8), 0xcb);
        EXPECT(gbc.readMem(0xe6c9), 0x4b);
        // CB 4B 000E
        gbc.setState(0x8258, 0xef87, 0x95a0, 0x57ef, 0xcb4b, 0xc43f, 0x0, 0x1);
        gbc.writeMem(0x8258, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xef87);
        EXPECT(gbc.pc(), 0x825a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8258), 0xcb);
        EXPECT(gbc.readMem(0x8259), 0x4b);
        // CB 4B 000F
        gbc.setState(0x3135, 0x67d5, 0x93e0, 0x562b, 0x635d, 0xe7db, 0x0, 0x0);
        gbc.writeMem(0x3135, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x67d5);
        EXPECT(gbc.pc(), 0x3137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0010
        gbc.setState(0x8799, 0x3f9d, 0xb360, 0x1ad1, 0xec4c, 0xc389, 0x1, 0x1);
        gbc.writeMem(0x8799, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3f9d);
        EXPECT(gbc.pc(), 0x879b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8799), 0xcb);
        EXPECT(gbc.readMem(0x879a), 0x4b);
        // CB 4B 0011
        gbc.setState(0xd574, 0xe59b, 0x4fc0, 0x8227, 0x74c6, 0x84ec, 0x0, 0x0);
        gbc.writeMem(0xd574, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe59b);
        EXPECT(gbc.pc(), 0xd576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd574), 0xcb);
        EXPECT(gbc.readMem(0xd575), 0x4b);
        // CB 4B 0012
        gbc.setState(0xe925, 0x63e4, 0xecc0, 0x66e0, 0xc7e9, 0x46db, 0x0, 0x1);
        gbc.writeMem(0xe925, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x63e4);
        EXPECT(gbc.pc(), 0xe927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe925), 0xcb);
        EXPECT(gbc.readMem(0xe926), 0x4b);
        // CB 4B 0013
        gbc.setState(0xea3e, 0xeadb, 0x7de0, 0x49a5, 0xfad2, 0x5a59, 0x1, 0x0);
        gbc.writeMem(0xea3e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xeadb);
        EXPECT(gbc.pc(), 0xea40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea3e), 0xcb);
        EXPECT(gbc.readMem(0xea3f), 0x4b);
        // CB 4B 0014
        gbc.setState(0x7a33, 0xae06, 0xe5f0, 0x64c5, 0xe8f9, 0x75db, 0x1, 0x1);
        gbc.writeMem(0x7a33, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xae06);
        EXPECT(gbc.pc(), 0x7a35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0015
        gbc.setState(0x69a4, 0x4410, 0xbe70, 0x567d, 0x59bb, 0x5b22, 0x0, 0x1);
        gbc.writeMem(0x69a4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4410);
        EXPECT(gbc.pc(), 0x69a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0016
        gbc.setState(0xa569, 0x3e49, 0x4a40, 0xd469, 0x7f82, 0x3d6, 0x1, 0x0);
        gbc.writeMem(0xa569, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3e49);
        EXPECT(gbc.pc(), 0xa56b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa569), 0xcb);
        EXPECT(gbc.readMem(0xa56a), 0x4b);
        // CB 4B 0017
        gbc.setState(0x5f84, 0x409d, 0xd670, 0xaa14, 0x8fe1, 0xbce4, 0x1, 0x1);
        gbc.writeMem(0x5f84, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x409d);
        EXPECT(gbc.pc(), 0x5f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0018
        gbc.setState(0x463a, 0xb670, 0x1cb0, 0xbb10, 0xec0d, 0x1af2, 0x0, 0x1);
        gbc.writeMem(0x463a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb670);
        EXPECT(gbc.pc(), 0x463c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0019
        gbc.setState(0xe110, 0xf60, 0x9f30, 0x8e52, 0x9fd, 0x433f, 0x1, 0x0);
        gbc.writeMem(0xe110, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf60);
        EXPECT(gbc.pc(), 0xe112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe110), 0xcb);
        EXPECT(gbc.readMem(0xe111), 0x4b);
        // CB 4B 001A
        gbc.setState(0x8009, 0x6b5d, 0x4db0, 0x62a8, 0x1ff2, 0xd1a4, 0x0, 0x1);
        gbc.writeMem(0x8009, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6b5d);
        EXPECT(gbc.pc(), 0x800b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8009), 0xcb);
        EXPECT(gbc.readMem(0x800a), 0x4b);
        // CB 4B 001B
        gbc.setState(0x824f, 0x97b6, 0x6ea0, 0x1e47, 0xcdac, 0x4afb, 0x0, 0x1);
        gbc.writeMem(0x824f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x97b6);
        EXPECT(gbc.pc(), 0x8251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824f), 0xcb);
        EXPECT(gbc.readMem(0x8250), 0x4b);
        // CB 4B 001C
        gbc.setState(0x56f7, 0xc1dd, 0xd6a0, 0xb603, 0x9ac0, 0x430f, 0x1, 0x0);
        gbc.writeMem(0x56f7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xc1dd);
        EXPECT(gbc.pc(), 0x56f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 001D
        gbc.setState(0x129c, 0xf60, 0xe140, 0x1fce, 0x1b5a, 0xeedc, 0x0, 0x1);
        gbc.writeMem(0x129c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf60);
        EXPECT(gbc.pc(), 0x129e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 001E
        gbc.setState(0x3af3, 0xe597, 0x7240, 0x8c05, 0xda50, 0xaedb, 0x0, 0x1);
        gbc.writeMem(0x3af3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe597);
        EXPECT(gbc.pc(), 0x3af5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 001F
        gbc.setState(0x9ad4, 0x939, 0x9400, 0xf0c8, 0x41a1, 0xc11e, 0x0, 0x1);
        gbc.writeMem(0x9ad4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x939);
        EXPECT(gbc.pc(), 0x9ad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ad4), 0xcb);
        EXPECT(gbc.readMem(0x9ad5), 0x4b);
        // CB 4B 0020
        gbc.setState(0x8856, 0xff13, 0xcf80, 0xd36f, 0xc3f8, 0x4c70, 0x0, 0x0);
        gbc.writeMem(0x8856, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xff13);
        EXPECT(gbc.pc(), 0x8858);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8856), 0xcb);
        EXPECT(gbc.readMem(0x8857), 0x4b);
        // CB 4B 0021
        gbc.setState(0x8576, 0x3e2, 0xedc0, 0xfba7, 0xbb6d, 0x5ab4, 0x1, 0x1);
        gbc.writeMem(0x8576, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3e2);
        EXPECT(gbc.pc(), 0x8578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8576), 0xcb);
        EXPECT(gbc.readMem(0x8577), 0x4b);
        // CB 4B 0022
        gbc.setState(0x91fd, 0x872, 0x7ce0, 0x6d60, 0xcb7c, 0x82e6, 0x1, 0x1);
        gbc.writeMem(0x91fd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x872);
        EXPECT(gbc.pc(), 0x91ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91fd), 0xcb);
        EXPECT(gbc.readMem(0x91fe), 0x4b);
        // CB 4B 0023
        gbc.setState(0x3f47, 0x29, 0x4480, 0xe1b8, 0x3aa3, 0x7753, 0x0, 0x1);
        gbc.writeMem(0x3f47, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x29);
        EXPECT(gbc.pc(), 0x3f49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0024
        gbc.setState(0xe90b, 0x17d4, 0xf140, 0x64d0, 0xeeb9, 0x5f78, 0x1, 0x1);
        gbc.writeMem(0xe90b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x17d4);
        EXPECT(gbc.pc(), 0xe90d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe90b), 0xcb);
        EXPECT(gbc.readMem(0xe90c), 0x4b);
        // CB 4B 0025
        gbc.setState(0x2fa6, 0x470c, 0x8d70, 0x3687, 0x187b, 0xb52e, 0x0, 0x0);
        gbc.writeMem(0x2fa6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x470c);
        EXPECT(gbc.pc(), 0x2fa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0026
        gbc.setState(0x62b8, 0x6e58, 0x78d0, 0xc970, 0xff0a, 0xa72a, 0x0, 0x0);
        gbc.writeMem(0x62b8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6e58);
        EXPECT(gbc.pc(), 0x62ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0027
        gbc.setState(0x53b7, 0x4506, 0xca80, 0x56b2, 0xf7c1, 0xee45, 0x0, 0x1);
        gbc.writeMem(0x53b7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4506);
        EXPECT(gbc.pc(), 0x53b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0028
        gbc.setState(0x35f3, 0x9081, 0xd8b0, 0x7ad4, 0x6e5f, 0x872f, 0x0, 0x0);
        gbc.writeMem(0x35f3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9081);
        EXPECT(gbc.pc(), 0x35f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0029
        gbc.setState(0xe827, 0x8387, 0xd610, 0xbe32, 0x2b21, 0xbda3, 0x1, 0x0);
        gbc.writeMem(0xe827, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8387);
        EXPECT(gbc.pc(), 0xe829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe827), 0xcb);
        EXPECT(gbc.readMem(0xe828), 0x4b);
        // CB 4B 002A
        gbc.setState(0xd6a7, 0xd59, 0xbb70, 0x8ad9, 0x61cd, 0x46ef, 0x0, 0x1);
        gbc.writeMem(0xd6a7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd59);
        EXPECT(gbc.pc(), 0xd6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a7), 0xcb);
        EXPECT(gbc.readMem(0xd6a8), 0x4b);
        // CB 4B 002C
        gbc.setState(0xde7, 0xf772, 0x5970, 0x6f3e, 0x6a00, 0x688c, 0x0, 0x0);
        gbc.writeMem(0xde7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf772);
        EXPECT(gbc.pc(), 0xde9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 002D
        gbc.setState(0x3159, 0x3c25, 0xa800, 0x4383, 0xb1a7, 0xafc3, 0x0, 0x0);
        gbc.writeMem(0x3159, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3c25);
        EXPECT(gbc.pc(), 0x315b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 002E
        gbc.setState(0x8728, 0xd0a7, 0xf1c0, 0xe7ee, 0x4bfc, 0xd7b8, 0x0, 0x1);
        gbc.writeMem(0x8728, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd0a7);
        EXPECT(gbc.pc(), 0x872a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8728), 0xcb);
        EXPECT(gbc.readMem(0x8729), 0x4b);
        // CB 4B 002F
        gbc.setState(0xe256, 0xaea, 0x5950, 0xe796, 0xfeb5, 0x84f0, 0x1, 0x0);
        gbc.writeMem(0xe256, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xaea);
        EXPECT(gbc.pc(), 0xe258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe256), 0xcb);
        EXPECT(gbc.readMem(0xe257), 0x4b);
        // CB 4B 0030
        gbc.setState(0x7d7d, 0x2272, 0xf060, 0xef61, 0x3e32, 0x9824, 0x0, 0x0);
        gbc.writeMem(0x7d7d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2272);
        EXPECT(gbc.pc(), 0x7d7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0031
        gbc.setState(0x4e1b, 0x134e, 0x120, 0x9188, 0x2ea2, 0xac72, 0x0, 0x0);
        gbc.writeMem(0x4e1b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x134e);
        EXPECT(gbc.pc(), 0x4e1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0032
        gbc.setState(0x5a27, 0xec2f, 0x8940, 0xb0dd, 0x66ec, 0xf3d1, 0x1, 0x1);
        gbc.writeMem(0x5a27, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xec2f);
        EXPECT(gbc.pc(), 0x5a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0033
        gbc.setState(0x58d0, 0xfe20, 0x67d0, 0x9d56, 0x4e76, 0x53df, 0x0, 0x1);
        gbc.writeMem(0x58d0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfe20);
        EXPECT(gbc.pc(), 0x58d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0034
        gbc.setState(0xa616, 0xfa88, 0xe660, 0x350b, 0xc9cd, 0x294a, 0x1, 0x1);
        gbc.writeMem(0xa616, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfa88);
        EXPECT(gbc.pc(), 0xa618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa616), 0xcb);
        EXPECT(gbc.readMem(0xa617), 0x4b);
        // CB 4B 0035
        gbc.setState(0x5b22, 0xe689, 0xe90, 0xa911, 0x9fbe, 0x25d1, 0x1, 0x0);
        gbc.writeMem(0x5b22, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe689);
        EXPECT(gbc.pc(), 0x5b24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0036
        gbc.setState(0x5a76, 0xcd7, 0xbea0, 0xd055, 0x8ec1, 0x37b2, 0x0, 0x1);
        gbc.writeMem(0x5a76, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xcd7);
        EXPECT(gbc.pc(), 0x5a78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0038
        gbc.setState(0x2516, 0x9f97, 0x99a0, 0x8cd0, 0x47d0, 0xdcef, 0x1, 0x1);
        gbc.writeMem(0x2516, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9f97);
        EXPECT(gbc.pc(), 0x2518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0039
        gbc.setState(0xae66, 0xe241, 0x6580, 0x4420, 0xa027, 0xdaca, 0x0, 0x0);
        gbc.writeMem(0xae66, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe241);
        EXPECT(gbc.pc(), 0xae68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae66), 0xcb);
        EXPECT(gbc.readMem(0xae67), 0x4b);
        // CB 4B 003A
        gbc.setState(0x191b, 0x92e6, 0x2d80, 0x49c8, 0xa464, 0xa46a, 0x0, 0x0);
        gbc.writeMem(0x191b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x92e6);
        EXPECT(gbc.pc(), 0x191d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 003B
        gbc.setState(0x3d74, 0x46e9, 0x6240, 0x6776, 0xcdc0, 0x5ad5, 0x1, 0x0);
        gbc.writeMem(0x3d74, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x46e9);
        EXPECT(gbc.pc(), 0x3d76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 003C
        gbc.setState(0x133c, 0x34a3, 0x9550, 0xf5d5, 0xa763, 0xcaed, 0x0, 0x0);
        gbc.writeMem(0x133c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x34a3);
        EXPECT(gbc.pc(), 0x133e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 003D
        gbc.setState(0xc34b, 0xd99d, 0x4500, 0x9a5, 0x2ce3, 0xf2dc, 0x1, 0x1);
        gbc.writeMem(0xc34b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd99d);
        EXPECT(gbc.pc(), 0xc34d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34b), 0xcb);
        EXPECT(gbc.readMem(0xc34c), 0x4b);
        // CB 4B 003E
        gbc.setState(0x409a, 0x4191, 0x7ff0, 0x5fa6, 0x4652, 0x7f58, 0x1, 0x0);
        gbc.writeMem(0x409a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4191);
        EXPECT(gbc.pc(), 0x409c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 003F
        gbc.setState(0xcd15, 0xba8e, 0xc4f0, 0x7cff, 0x83ef, 0x957e, 0x1, 0x0);
        gbc.writeMem(0xcd15, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xba8e);
        EXPECT(gbc.pc(), 0xcd17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd15), 0xcb);
        EXPECT(gbc.readMem(0xcd16), 0x4b);
        // CB 4B 0040
        gbc.setState(0xbdfa, 0x1e6f, 0x1000, 0x3481, 0x3e7a, 0xd209, 0x1, 0x1);
        gbc.writeMem(0xbdfa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1e6f);
        EXPECT(gbc.pc(), 0xbdfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdfa), 0xcb);
        EXPECT(gbc.readMem(0xbdfb), 0x4b);
        // CB 4B 0041
        gbc.setState(0x42f9, 0x8216, 0x8230, 0x9ea5, 0xcb07, 0x809e, 0x0, 0x1);
        gbc.writeMem(0x42f9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8216);
        EXPECT(gbc.pc(), 0x42fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0042
        gbc.setState(0x3143, 0xa79a, 0x8210, 0x9cb3, 0xf40c, 0xef40, 0x0, 0x1);
        gbc.writeMem(0x3143, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa79a);
        EXPECT(gbc.pc(), 0x3145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0043
        gbc.setState(0x1ed6, 0xfbee, 0xd840, 0xb9a1, 0xe9bc, 0xddb4, 0x1, 0x1);
        gbc.writeMem(0x1ed6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xfbee);
        EXPECT(gbc.pc(), 0x1ed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0044
        gbc.setState(0x96b8, 0x6d38, 0xad00, 0x999, 0xa5fa, 0x43c9, 0x1, 0x0);
        gbc.writeMem(0x96b8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6d38);
        EXPECT(gbc.pc(), 0x96ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b8), 0xcb);
        EXPECT(gbc.readMem(0x96b9), 0x4b);
        // CB 4B 0045
        gbc.setState(0xa013, 0x3b6f, 0x1530, 0xc786, 0x75d8, 0xb004, 0x0, 0x0);
        gbc.writeMem(0xa013, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3b6f);
        EXPECT(gbc.pc(), 0xa015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa013), 0xcb);
        EXPECT(gbc.readMem(0xa014), 0x4b);
        // CB 4B 0047
        gbc.setState(0x41ce, 0x527f, 0x9950, 0x3540, 0x930d, 0xfac2, 0x0, 0x1);
        gbc.writeMem(0x41ce, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x527f);
        EXPECT(gbc.pc(), 0x41d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0048
        gbc.setState(0x2ec6, 0xcbd0, 0x3a20, 0x7c22, 0xa108, 0x63ce, 0x1, 0x1);
        gbc.writeMem(0x2ec6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xcbd0);
        EXPECT(gbc.pc(), 0x2ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0049
        gbc.setState(0x1d70, 0xddbd, 0xa590, 0x8aa, 0xabfb, 0xc78a, 0x0, 0x1);
        gbc.writeMem(0x1d70, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xddbd);
        EXPECT(gbc.pc(), 0x1d72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 004A
        gbc.setState(0x961f, 0x1a9a, 0x5700, 0xeee8, 0xd8cd, 0xd0e6, 0x1, 0x0);
        gbc.writeMem(0x961f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1a9a);
        EXPECT(gbc.pc(), 0x9621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961f), 0xcb);
        EXPECT(gbc.readMem(0x9620), 0x4b);
        // CB 4B 004B
        gbc.setState(0x7591, 0xbfbf, 0x2950, 0x3099, 0x9860, 0x5b95, 0x1, 0x1);
        gbc.writeMem(0x7591, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbfbf);
        EXPECT(gbc.pc(), 0x7593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 004D
        gbc.setState(0x4324, 0xc5c3, 0x7e00, 0xdba6, 0x5d5d, 0x2c40, 0x1, 0x1);
        gbc.writeMem(0x4324, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc5c3);
        EXPECT(gbc.pc(), 0x4326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0050
        gbc.setState(0xe695, 0x5709, 0xbb80, 0x567f, 0x696c, 0x2f90, 0x0, 0x0);
        gbc.writeMem(0xe695, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5709);
        EXPECT(gbc.pc(), 0xe697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe695), 0xcb);
        EXPECT(gbc.readMem(0xe696), 0x4b);
        // CB 4B 0051
        gbc.setState(0x3500, 0xca11, 0x9b60, 0x1d8c, 0x5ec3, 0x5947, 0x0, 0x0);
        gbc.writeMem(0x3500, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xca11);
        EXPECT(gbc.pc(), 0x3502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0053
        gbc.setState(0xe192, 0x149b, 0x7220, 0xe37b, 0x2ed3, 0x134c, 0x0, 0x1);
        gbc.writeMem(0xe192, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x149b);
        EXPECT(gbc.pc(), 0xe194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe192), 0xcb);
        EXPECT(gbc.readMem(0xe193), 0x4b);
        // CB 4B 0055
        gbc.setState(0x7348, 0x4fd3, 0xf390, 0xe96d, 0x6501, 0xba6, 0x0, 0x0);
        gbc.writeMem(0x7348, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4fd3);
        EXPECT(gbc.pc(), 0x734a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0057
        gbc.setState(0xb913, 0x9a4d, 0x4d10, 0xbdc0, 0x6f93, 0x74c2, 0x0, 0x1);
        gbc.writeMem(0xb913, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9a4d);
        EXPECT(gbc.pc(), 0xb915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb913), 0xcb);
        EXPECT(gbc.readMem(0xb914), 0x4b);
        // CB 4B 0058
        gbc.setState(0xcaf3, 0xad72, 0x5480, 0x18ce, 0x630b, 0xe2b3, 0x1, 0x0);
        gbc.writeMem(0xcaf3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xad72);
        EXPECT(gbc.pc(), 0xcaf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf3), 0xcb);
        EXPECT(gbc.readMem(0xcaf4), 0x4b);
        // CB 4B 0059
        gbc.setState(0x91c, 0x50ea, 0x9360, 0xb7c6, 0x7144, 0x1469, 0x0, 0x0);
        gbc.writeMem(0x91c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x50ea);
        EXPECT(gbc.pc(), 0x91e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 005A
        gbc.setState(0x5f4, 0x64fc, 0x8230, 0xe0d9, 0x272c, 0x3a79, 0x0, 0x0);
        gbc.writeMem(0x5f4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x64fc);
        EXPECT(gbc.pc(), 0x5f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 005B
        gbc.setState(0x85c3, 0x5fd1, 0x6f80, 0x7138, 0x22c3, 0xf643, 0x0, 0x0);
        gbc.writeMem(0x85c3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5fd1);
        EXPECT(gbc.pc(), 0x85c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85c3), 0xcb);
        EXPECT(gbc.readMem(0x85c4), 0x4b);
        // CB 4B 005C
        gbc.setState(0xc891, 0x1c53, 0x84f0, 0x84e0, 0x9786, 0xc304, 0x0, 0x0);
        gbc.writeMem(0xc891, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1c53);
        EXPECT(gbc.pc(), 0xc893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc891), 0xcb);
        EXPECT(gbc.readMem(0xc892), 0x4b);
        // CB 4B 005D
        gbc.setState(0x4d6d, 0x19a9, 0x4e70, 0x4c8, 0xa7de, 0xb2c1, 0x1, 0x1);
        gbc.writeMem(0x4d6d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x19a9);
        EXPECT(gbc.pc(), 0x4d6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 005E
        gbc.setState(0xdfcf, 0x987e, 0x3a50, 0x9ff3, 0x9697, 0x7331, 0x1, 0x1);
        gbc.writeMem(0xdfcf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x987e);
        EXPECT(gbc.pc(), 0xdfd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfcf), 0xcb);
        EXPECT(gbc.readMem(0xdfd0), 0x4b);
        // CB 4B 005F
        gbc.setState(0x31fc, 0x3680, 0x5ff0, 0x7379, 0x3b9d, 0xa96, 0x1, 0x1);
        gbc.writeMem(0x31fc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3680);
        EXPECT(gbc.pc(), 0x31fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0060
        gbc.setState(0xe472, 0x7e9, 0x29b0, 0x9486, 0xe90d, 0x7112, 0x0, 0x0);
        gbc.writeMem(0xe472, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7e9);
        EXPECT(gbc.pc(), 0xe474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe472), 0xcb);
        EXPECT(gbc.readMem(0xe473), 0x4b);
        // CB 4B 0061
        gbc.setState(0x484, 0xcf33, 0x4fc0, 0xdf15, 0x59ba, 0x58ca, 0x0, 0x1);
        gbc.writeMem(0x484, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcf33);
        EXPECT(gbc.pc(), 0x486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0062
        gbc.setState(0xb04e, 0xfdf3, 0x7d30, 0x9169, 0x7045, 0xcf72, 0x1, 0x1);
        gbc.writeMem(0xb04e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xfdf3);
        EXPECT(gbc.pc(), 0xb050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb04e), 0xcb);
        EXPECT(gbc.readMem(0xb04f), 0x4b);
        // CB 4B 0063
        gbc.setState(0x546e, 0xf88e, 0x2c80, 0x3dd, 0x118e, 0x4ac8, 0x1, 0x1);
        gbc.writeMem(0x546e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf88e);
        EXPECT(gbc.pc(), 0x5470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0064
        gbc.setState(0x34a8, 0xefe1, 0x3b20, 0x539a, 0x72e4, 0x7819, 0x1, 0x1);
        gbc.writeMem(0x34a8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xefe1);
        EXPECT(gbc.pc(), 0x34aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0065
        gbc.setState(0x9d06, 0x4da, 0x3040, 0x87ec, 0x3669, 0x6650, 0x0, 0x1);
        gbc.writeMem(0x9d06, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4da);
        EXPECT(gbc.pc(), 0x9d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d06), 0xcb);
        EXPECT(gbc.readMem(0x9d07), 0x4b);
        // CB 4B 0066
        gbc.setState(0x52ba, 0xd3e1, 0x7c0, 0xebf0, 0x7d02, 0x4c97, 0x0, 0x1);
        gbc.writeMem(0x52ba, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd3e1);
        EXPECT(gbc.pc(), 0x52bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0067
        gbc.setState(0x2c04, 0x2a4f, 0x6120, 0xf059, 0x63b3, 0x914e, 0x0, 0x1);
        gbc.writeMem(0x2c04, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2a4f);
        EXPECT(gbc.pc(), 0x2c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0068
        gbc.setState(0x9363, 0x9204, 0x7260, 0xfb10, 0x77c0, 0x45e1, 0x1, 0x0);
        gbc.writeMem(0x9363, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9204);
        EXPECT(gbc.pc(), 0x9365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9363), 0xcb);
        EXPECT(gbc.readMem(0x9364), 0x4b);
        // CB 4B 0069
        gbc.setState(0x1ecb, 0xdf17, 0xb1f0, 0xd511, 0x24ae, 0xb71b, 0x1, 0x1);
        gbc.writeMem(0x1ecb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdf17);
        EXPECT(gbc.pc(), 0x1ecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 006A
        gbc.setState(0x9b04, 0x66ab, 0x53c0, 0x8631, 0x7ccb, 0x9eb8, 0x1, 0x0);
        gbc.writeMem(0x9b04, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x66ab);
        EXPECT(gbc.pc(), 0x9b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b04), 0xcb);
        EXPECT(gbc.readMem(0x9b05), 0x4b);
        // CB 4B 006B
        gbc.setState(0x382b, 0x9a4a, 0x90c0, 0x9e8b, 0x38d4, 0xdc45, 0x0, 0x0);
        gbc.writeMem(0x382b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9a4a);
        EXPECT(gbc.pc(), 0x382d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 006C
        gbc.setState(0x2a93, 0xf9f4, 0xa8c0, 0x5134, 0x52ab, 0x4fc4, 0x0, 0x1);
        gbc.writeMem(0x2a93, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf9f4);
        EXPECT(gbc.pc(), 0x2a95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 006D
        gbc.setState(0xaa1f, 0x17f8, 0xa7f0, 0x743d, 0x30fa, 0x7f5b, 0x0, 0x0);
        gbc.writeMem(0xaa1f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x17f8);
        EXPECT(gbc.pc(), 0xaa21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa1f), 0xcb);
        EXPECT(gbc.readMem(0xaa20), 0x4b);
        // CB 4B 006E
        gbc.setState(0xd6ca, 0x28bc, 0x43d0, 0xb3b1, 0x1b29, 0x635a, 0x0, 0x1);
        gbc.writeMem(0xd6ca, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x28bc);
        EXPECT(gbc.pc(), 0xd6cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ca), 0xcb);
        EXPECT(gbc.readMem(0xd6cb), 0x4b);
        // CB 4B 0070
        gbc.setState(0x7688, 0xb041, 0xe0e0, 0x4b7, 0x4263, 0x7327, 0x0, 0x0);
        gbc.writeMem(0x7688, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb041);
        EXPECT(gbc.pc(), 0x768a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0071
        gbc.setState(0xabb1, 0x1bcc, 0x7b70, 0xc611, 0x48be, 0xc456, 0x1, 0x0);
        gbc.writeMem(0xabb1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1bcc);
        EXPECT(gbc.pc(), 0xabb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb1), 0xcb);
        EXPECT(gbc.readMem(0xabb2), 0x4b);
        // CB 4B 0072
        gbc.setState(0x176b, 0x7fee, 0x1ab0, 0x5cef, 0x1105, 0x157, 0x1, 0x0);
        gbc.writeMem(0x176b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7fee);
        EXPECT(gbc.pc(), 0x176d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0073
        gbc.setState(0xd9e4, 0x75a8, 0x42e0, 0xc45c, 0x13e7, 0xb94a, 0x0, 0x0);
        gbc.writeMem(0xd9e4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x75a8);
        EXPECT(gbc.pc(), 0xd9e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e4), 0xcb);
        EXPECT(gbc.readMem(0xd9e5), 0x4b);
        // CB 4B 0074
        gbc.setState(0x91f3, 0x3c69, 0x9580, 0x996b, 0x5fc7, 0x674, 0x1, 0x0);
        gbc.writeMem(0x91f3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3c69);
        EXPECT(gbc.pc(), 0x91f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f3), 0xcb);
        EXPECT(gbc.readMem(0x91f4), 0x4b);
        // CB 4B 0076
        gbc.setState(0x1f99, 0x70b, 0xfd40, 0x6111, 0xc0d9, 0x68ea, 0x1, 0x0);
        gbc.writeMem(0x1f99, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x70b);
        EXPECT(gbc.pc(), 0x1f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0077
        gbc.setState(0x87e6, 0x628c, 0xf900, 0x591, 0xf0b1, 0xe55e, 0x1, 0x0);
        gbc.writeMem(0x87e6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x628c);
        EXPECT(gbc.pc(), 0x87e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e6), 0xcb);
        EXPECT(gbc.readMem(0x87e7), 0x4b);
        // CB 4B 0078
        gbc.setState(0x84ec, 0x922, 0x2350, 0x2808, 0xd245, 0x6b4e, 0x0, 0x1);
        gbc.writeMem(0x84ec, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x922);
        EXPECT(gbc.pc(), 0x84ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ec), 0xcb);
        EXPECT(gbc.readMem(0x84ed), 0x4b);
        // CB 4B 0079
        gbc.setState(0x2d90, 0xf278, 0xd990, 0x2766, 0x352f, 0x1057, 0x1, 0x1);
        gbc.writeMem(0x2d90, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf278);
        EXPECT(gbc.pc(), 0x2d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 007A
        gbc.setState(0x762e, 0x8d8e, 0x6a80, 0xadc0, 0xd0e6, 0xcf7f, 0x0, 0x0);
        gbc.writeMem(0x762e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8d8e);
        EXPECT(gbc.pc(), 0x7630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 007B
        gbc.setState(0x1925, 0xf6c0, 0x92a0, 0x7e7d, 0x5d9a, 0x616b, 0x1, 0x0);
        gbc.writeMem(0x1925, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf6c0);
        EXPECT(gbc.pc(), 0x1927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 007C
        gbc.setState(0x12cf, 0x7527, 0xb20, 0xdb1, 0xdeb, 0x79a0, 0x0, 0x0);
        gbc.writeMem(0x12cf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7527);
        EXPECT(gbc.pc(), 0x12d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 007D
        gbc.setState(0x1175, 0xce27, 0x6a50, 0x1af9, 0x65e4, 0xb215, 0x0, 0x0);
        gbc.writeMem(0x1175, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xce27);
        EXPECT(gbc.pc(), 0x1177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 007E
        gbc.setState(0x649b, 0xa6d2, 0x9710, 0x8392, 0x8d88, 0x67f0, 0x1, 0x0);
        gbc.writeMem(0x649b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa6d2);
        EXPECT(gbc.pc(), 0x649d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0080
        gbc.setState(0x6598, 0x6141, 0x7fd0, 0x9449, 0xe0b4, 0x453e, 0x1, 0x0);
        gbc.writeMem(0x6598, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6141);
        EXPECT(gbc.pc(), 0x659a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0081
        gbc.setState(0xec6c, 0x92d, 0x7740, 0x8abd, 0xb51d, 0xdae0, 0x0, 0x1);
        gbc.writeMem(0xec6c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x92d);
        EXPECT(gbc.pc(), 0xec6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec6c), 0xcb);
        EXPECT(gbc.readMem(0xec6d), 0x4b);
        // CB 4B 0082
        gbc.setState(0x5e3a, 0x3c8d, 0xc270, 0x31b0, 0x8e4e, 0x63f6, 0x0, 0x1);
        gbc.writeMem(0x5e3a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3c8d);
        EXPECT(gbc.pc(), 0x5e3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0083
        gbc.setState(0x1d4c, 0x8bf4, 0xf6b0, 0x2760, 0x919f, 0xc60, 0x1, 0x0);
        gbc.writeMem(0x1d4c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8bf4);
        EXPECT(gbc.pc(), 0x1d4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0084
        gbc.setState(0xb091, 0xa9cc, 0x6720, 0x93ae, 0xb3b2, 0xfa2, 0x0, 0x0);
        gbc.writeMem(0xb091, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa9cc);
        EXPECT(gbc.pc(), 0xb093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb091), 0xcb);
        EXPECT(gbc.readMem(0xb092), 0x4b);
        // CB 4B 0085
        gbc.setState(0x105a, 0x26c, 0x5b20, 0x383a, 0x3c4d, 0x5959, 0x0, 0x1);
        gbc.writeMem(0x105a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x26c);
        EXPECT(gbc.pc(), 0x105c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0086
        gbc.setState(0xa6a1, 0xecd5, 0x9610, 0x9e8, 0xf22d, 0x4242, 0x1, 0x1);
        gbc.writeMem(0xa6a1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xecd5);
        EXPECT(gbc.pc(), 0xa6a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a1), 0xcb);
        EXPECT(gbc.readMem(0xa6a2), 0x4b);
        // CB 4B 0087
        gbc.setState(0x2b66, 0x1dcd, 0x2610, 0x267f, 0xb5fb, 0x36e6, 0x0, 0x0);
        gbc.writeMem(0x2b66, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1dcd);
        EXPECT(gbc.pc(), 0x2b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0088
        gbc.setState(0x750c, 0xab3, 0xd850, 0x6e8d, 0x5082, 0xc1a7, 0x1, 0x0);
        gbc.writeMem(0x750c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xab3);
        EXPECT(gbc.pc(), 0x750e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0089
        gbc.setState(0x95b8, 0x8996, 0xaf10, 0xd907, 0x445f, 0x8b93, 0x1, 0x0);
        gbc.writeMem(0x95b8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8996);
        EXPECT(gbc.pc(), 0x95ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95b8), 0xcb);
        EXPECT(gbc.readMem(0x95b9), 0x4b);
        // CB 4B 008A
        gbc.setState(0xf0b, 0x8942, 0xce10, 0x6286, 0xdf60, 0x55b3, 0x0, 0x0);
        gbc.writeMem(0xf0b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8942);
        EXPECT(gbc.pc(), 0xf0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 008B
        gbc.setState(0xa22a, 0xed10, 0xfd90, 0x96f2, 0x1b40, 0xdf39, 0x1, 0x0);
        gbc.writeMem(0xa22a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xed10);
        EXPECT(gbc.pc(), 0xa22c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa22a), 0xcb);
        EXPECT(gbc.readMem(0xa22b), 0x4b);
        // CB 4B 008C
        gbc.setState(0x2438, 0x3314, 0x7b00, 0x5363, 0xee90, 0x7666, 0x0, 0x1);
        gbc.writeMem(0x2438, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3314);
        EXPECT(gbc.pc(), 0x243a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 008D
        gbc.setState(0xe154, 0xb588, 0x9b30, 0xa236, 0x7316, 0x917f, 0x1, 0x1);
        gbc.writeMem(0xe154, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb588);
        EXPECT(gbc.pc(), 0xe156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe154), 0xcb);
        EXPECT(gbc.readMem(0xe155), 0x4b);
        // CB 4B 008E
        gbc.setState(0xded3, 0xb0f7, 0x83c0, 0xc2f9, 0xc39a, 0x52c9, 0x0, 0x0);
        gbc.writeMem(0xded3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb0f7);
        EXPECT(gbc.pc(), 0xded5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded3), 0xcb);
        EXPECT(gbc.readMem(0xded4), 0x4b);
        // CB 4B 008F
        gbc.setState(0x650c, 0xd4aa, 0x16f0, 0x9e7, 0xebb2, 0x9fa1, 0x1, 0x0);
        gbc.writeMem(0x650c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd4aa);
        EXPECT(gbc.pc(), 0x650e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0090
        gbc.setState(0xe692, 0xdb34, 0x4a0, 0x5b4c, 0xbced, 0x5e54, 0x1, 0x1);
        gbc.writeMem(0xe692, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdb34);
        EXPECT(gbc.pc(), 0xe694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe692), 0xcb);
        EXPECT(gbc.readMem(0xe693), 0x4b);
        // CB 4B 0091
        gbc.setState(0xdd37, 0x2528, 0xee10, 0x137a, 0x7c, 0x5a84, 0x1, 0x1);
        gbc.writeMem(0xdd37, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2528);
        EXPECT(gbc.pc(), 0xdd39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd37), 0xcb);
        EXPECT(gbc.readMem(0xdd38), 0x4b);
        // CB 4B 0092
        gbc.setState(0xee69, 0xa7bd, 0xd880, 0x22c1, 0x805b, 0xd74e, 0x1, 0x0);
        gbc.writeMem(0xee69, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa7bd);
        EXPECT(gbc.pc(), 0xee6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee69), 0xcb);
        EXPECT(gbc.readMem(0xee6a), 0x4b);
        // CB 4B 0093
        gbc.setState(0x3686, 0x4472, 0x2af0, 0x10a1, 0x29f2, 0x983e, 0x1, 0x0);
        gbc.writeMem(0x3686, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4472);
        EXPECT(gbc.pc(), 0x3688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0094
        gbc.setState(0x95ce, 0xd21, 0x5c30, 0xe35b, 0xe3bc, 0xa279, 0x1, 0x1);
        gbc.writeMem(0x95ce, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd21);
        EXPECT(gbc.pc(), 0x95d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ce), 0xcb);
        EXPECT(gbc.readMem(0x95cf), 0x4b);
        // CB 4B 0095
        gbc.setState(0x4bd5, 0x8cf0, 0x7dd0, 0xa99c, 0xc99a, 0x68e6, 0x0, 0x1);
        gbc.writeMem(0x4bd5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8cf0);
        EXPECT(gbc.pc(), 0x4bd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0096
        gbc.setState(0x8fcc, 0x6286, 0x5b20, 0xd087, 0xed71, 0x6c22, 0x1, 0x1);
        gbc.writeMem(0x8fcc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6286);
        EXPECT(gbc.pc(), 0x8fce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fcc), 0xcb);
        EXPECT(gbc.readMem(0x8fcd), 0x4b);
        // CB 4B 0097
        gbc.setState(0x8694, 0x783b, 0xc590, 0x2730, 0xd7fa, 0x62b3, 0x1, 0x0);
        gbc.writeMem(0x8694, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x783b);
        EXPECT(gbc.pc(), 0x8696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8694), 0xcb);
        EXPECT(gbc.readMem(0x8695), 0x4b);
        // CB 4B 0098
        gbc.setState(0x81a8, 0xc011, 0xe9c0, 0xcc0c, 0x65e2, 0xe762, 0x0, 0x1);
        gbc.writeMem(0x81a8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc011);
        EXPECT(gbc.pc(), 0x81aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a8), 0xcb);
        EXPECT(gbc.readMem(0x81a9), 0x4b);
        // CB 4B 0099
        gbc.setState(0xabf6, 0x7b30, 0x6400, 0x42a7, 0x8ae2, 0x2bf4, 0x0, 0x1);
        gbc.writeMem(0xabf6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7b30);
        EXPECT(gbc.pc(), 0xabf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabf6), 0xcb);
        EXPECT(gbc.readMem(0xabf7), 0x4b);
        // CB 4B 009A
        gbc.setState(0xed14, 0x1ad4, 0x67b0, 0x5f6d, 0x5abf, 0x981a, 0x0, 0x0);
        gbc.writeMem(0xed14, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1ad4);
        EXPECT(gbc.pc(), 0xed16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed14), 0xcb);
        EXPECT(gbc.readMem(0xed15), 0x4b);
        // CB 4B 009B
        gbc.setState(0xa00, 0xf834, 0xac70, 0x3791, 0x6cd0, 0x6642, 0x1, 0x0);
        gbc.writeMem(0xa00, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf834);
        EXPECT(gbc.pc(), 0xa02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 009C
        gbc.setState(0xc749, 0x5612, 0xc530, 0x4359, 0xa02c, 0x106f, 0x0, 0x0);
        gbc.writeMem(0xc749, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5612);
        EXPECT(gbc.pc(), 0xc74b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc749), 0xcb);
        EXPECT(gbc.readMem(0xc74a), 0x4b);
        // CB 4B 009D
        gbc.setState(0x8a61, 0x1dfa, 0x3ce0, 0x6ef, 0x1814, 0x334b, 0x1, 0x1);
        gbc.writeMem(0x8a61, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1dfa);
        EXPECT(gbc.pc(), 0x8a63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a61), 0xcb);
        EXPECT(gbc.readMem(0x8a62), 0x4b);
        // CB 4B 009E
        gbc.setState(0xba24, 0xa4f8, 0x6c20, 0x8ffd, 0xde0f, 0x83c2, 0x0, 0x1);
        gbc.writeMem(0xba24, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa4f8);
        EXPECT(gbc.pc(), 0xba26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba24), 0xcb);
        EXPECT(gbc.readMem(0xba25), 0x4b);
        // CB 4B 009F
        gbc.setState(0xc64d, 0xf85e, 0x9240, 0x2233, 0x85d3, 0x911f, 0x0, 0x0);
        gbc.writeMem(0xc64d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf85e);
        EXPECT(gbc.pc(), 0xc64f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc64d), 0xcb);
        EXPECT(gbc.readMem(0xc64e), 0x4b);
        // CB 4B 00A0
        gbc.setState(0x57b7, 0x4ed3, 0xa6d0, 0x6840, 0x64a0, 0xc94c, 0x1, 0x1);
        gbc.writeMem(0x57b7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4ed3);
        EXPECT(gbc.pc(), 0x57b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00A1
        gbc.setState(0xdfbf, 0x7130, 0xc590, 0x6ee4, 0xaedd, 0x89e2, 0x0, 0x0);
        gbc.writeMem(0xdfbf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7130);
        EXPECT(gbc.pc(), 0xdfc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfbf), 0xcb);
        EXPECT(gbc.readMem(0xdfc0), 0x4b);
        // CB 4B 00A2
        gbc.setState(0x5900, 0xad03, 0xcde0, 0xb39f, 0x4bb5, 0xea0, 0x0, 0x1);
        gbc.writeMem(0x5900, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xad03);
        EXPECT(gbc.pc(), 0x5902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00A3
        gbc.setState(0x9826, 0x18b0, 0x4670, 0xeb91, 0x71c5, 0x921, 0x1, 0x1);
        gbc.writeMem(0x9826, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x18b0);
        EXPECT(gbc.pc(), 0x9828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9826), 0xcb);
        EXPECT(gbc.readMem(0x9827), 0x4b);
        // CB 4B 00A4
        gbc.setState(0x92b0, 0x8b33, 0x50c0, 0x2eef, 0x4e7e, 0x11ac, 0x0, 0x1);
        gbc.writeMem(0x92b0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8b33);
        EXPECT(gbc.pc(), 0x92b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92b0), 0xcb);
        EXPECT(gbc.readMem(0x92b1), 0x4b);
        // CB 4B 00A5
        gbc.setState(0x97d9, 0x2f83, 0x8a0, 0x316f, 0x6758, 0xc558, 0x0, 0x0);
        gbc.writeMem(0x97d9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2f83);
        EXPECT(gbc.pc(), 0x97db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d9), 0xcb);
        EXPECT(gbc.readMem(0x97da), 0x4b);
        // CB 4B 00A6
        gbc.setState(0x26d2, 0x662c, 0xa340, 0xdead, 0x836f, 0xec1d, 0x0, 0x1);
        gbc.writeMem(0x26d2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x662c);
        EXPECT(gbc.pc(), 0x26d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00A7
        gbc.setState(0x255a, 0xadc6, 0x7f70, 0x7210, 0xacc0, 0x5312, 0x0, 0x0);
        gbc.writeMem(0x255a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xadc6);
        EXPECT(gbc.pc(), 0x255c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00A8
        gbc.setState(0xde9, 0x5c92, 0x6e50, 0xa2e0, 0x5467, 0xbb81, 0x0, 0x1);
        gbc.writeMem(0xde9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5c92);
        EXPECT(gbc.pc(), 0xdeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00A9
        gbc.setState(0xca83, 0x99d7, 0x3ea0, 0x2763, 0xb5a4, 0x5241, 0x0, 0x1);
        gbc.writeMem(0xca83, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x99d7);
        EXPECT(gbc.pc(), 0xca85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca83), 0xcb);
        EXPECT(gbc.readMem(0xca84), 0x4b);
        // CB 4B 00AA
        gbc.setState(0x26fb, 0x88c, 0x54d0, 0xe35b, 0xb59d, 0xe281, 0x1, 0x1);
        gbc.writeMem(0x26fb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x88c);
        EXPECT(gbc.pc(), 0x26fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00AB
        gbc.setState(0xc3eb, 0x5a4a, 0x8e60, 0x9838, 0x4157, 0xb21f, 0x1, 0x0);
        gbc.writeMem(0xc3eb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5a4a);
        EXPECT(gbc.pc(), 0xc3ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3eb), 0xcb);
        EXPECT(gbc.readMem(0xc3ec), 0x4b);
        // CB 4B 00AC
        gbc.setState(0x3828, 0xb5d, 0xfe0, 0x9cb, 0xb8d7, 0xad56, 0x0, 0x0);
        gbc.writeMem(0x3828, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb5d);
        EXPECT(gbc.pc(), 0x382a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00AD
        gbc.setState(0x23ec, 0xeac2, 0x9060, 0xe69c, 0x95b1, 0xd15e, 0x1, 0x0);
        gbc.writeMem(0x23ec, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xeac2);
        EXPECT(gbc.pc(), 0x23ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00AE
        gbc.setState(0xc34a, 0x2906, 0x50c0, 0xff7f, 0xb021, 0xea55, 0x0, 0x1);
        gbc.writeMem(0xc34a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2906);
        EXPECT(gbc.pc(), 0xc34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34a), 0xcb);
        EXPECT(gbc.readMem(0xc34b), 0x4b);
        // CB 4B 00AF
        gbc.setState(0x22b4, 0x6d82, 0x4ce0, 0xa189, 0x47d2, 0xdcf9, 0x1, 0x1);
        gbc.writeMem(0x22b4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6d82);
        EXPECT(gbc.pc(), 0x22b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00B0
        gbc.setState(0x8e99, 0xa2b3, 0xcfa0, 0x9fa2, 0xd2a9, 0x903f, 0x0, 0x1);
        gbc.writeMem(0x8e99, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa2b3);
        EXPECT(gbc.pc(), 0x8e9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e99), 0xcb);
        EXPECT(gbc.readMem(0x8e9a), 0x4b);
        // CB 4B 00B1
        gbc.setState(0xda8d, 0x4fd5, 0x2ef0, 0x5334, 0xa7fa, 0xf54, 0x0, 0x1);
        gbc.writeMem(0xda8d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4fd5);
        EXPECT(gbc.pc(), 0xda8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda8d), 0xcb);
        EXPECT(gbc.readMem(0xda8e), 0x4b);
        // CB 4B 00B2
        gbc.setState(0x808b, 0xbcd0, 0xcb80, 0xfb3b, 0xc480, 0x10f0, 0x1, 0x1);
        gbc.writeMem(0x808b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xbcd0);
        EXPECT(gbc.pc(), 0x808d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808b), 0xcb);
        EXPECT(gbc.readMem(0x808c), 0x4b);
        // CB 4B 00B4
        gbc.setState(0x4390, 0xc9e5, 0xf30, 0xdbc5, 0xa424, 0x9274, 0x0, 0x1);
        gbc.writeMem(0x4390, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc9e5);
        EXPECT(gbc.pc(), 0x4392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00B5
        gbc.setState(0x936a, 0xca61, 0xa620, 0x2b07, 0x4627, 0xf3ad, 0x0, 0x0);
        gbc.writeMem(0x936a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xca61);
        EXPECT(gbc.pc(), 0x936c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x936a), 0xcb);
        EXPECT(gbc.readMem(0x936b), 0x4b);
        // CB 4B 00B6
        gbc.setState(0x319, 0xcf9, 0xf260, 0x9f52, 0x94bb, 0x524e, 0x0, 0x0);
        gbc.writeMem(0x319, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xcf9);
        EXPECT(gbc.pc(), 0x31b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00B7
        gbc.setState(0x25d6, 0xf6ea, 0x7fb0, 0x2ea4, 0x7540, 0xd9e1, 0x0, 0x1);
        gbc.writeMem(0x25d6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf6ea);
        EXPECT(gbc.pc(), 0x25d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00B8
        gbc.setState(0x3c78, 0x9271, 0x85c0, 0x56a6, 0xd3bd, 0xc7cb, 0x1, 0x1);
        gbc.writeMem(0x3c78, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9271);
        EXPECT(gbc.pc(), 0x3c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00B9
        gbc.setState(0xcb2e, 0x80cd, 0x6d90, 0xb82e, 0x5e01, 0x3183, 0x0, 0x0);
        gbc.writeMem(0xcb2e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x80cd);
        EXPECT(gbc.pc(), 0xcb30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb2e), 0xcb);
        EXPECT(gbc.readMem(0xcb2f), 0x4b);
        // CB 4B 00BA
        gbc.setState(0x701b, 0x548f, 0xab20, 0xfb52, 0x8862, 0xa7b5, 0x1, 0x0);
        gbc.writeMem(0x701b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x548f);
        EXPECT(gbc.pc(), 0x701d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00BB
        gbc.setState(0x2af9, 0xa135, 0x40, 0x46af, 0x720, 0x72b, 0x1, 0x1);
        gbc.writeMem(0x2af9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa135);
        EXPECT(gbc.pc(), 0x2afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00BC
        gbc.setState(0x517c, 0x7b12, 0xa610, 0xb80d, 0x2ad8, 0x516f, 0x0, 0x1);
        gbc.writeMem(0x517c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7b12);
        EXPECT(gbc.pc(), 0x517e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00BE
        gbc.setState(0xb99d, 0xe057, 0xe1b0, 0x5ea7, 0x8edb, 0x1daa, 0x1, 0x1);
        gbc.writeMem(0xb99d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe057);
        EXPECT(gbc.pc(), 0xb99f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb99d), 0xcb);
        EXPECT(gbc.readMem(0xb99e), 0x4b);
        // CB 4B 00BF
        gbc.setState(0xe5a7, 0x1991, 0x3ec0, 0x180e, 0xba58, 0xa1ba, 0x0, 0x1);
        gbc.writeMem(0xe5a7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1991);
        EXPECT(gbc.pc(), 0xe5a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5a7), 0xcb);
        EXPECT(gbc.readMem(0xe5a8), 0x4b);
        // CB 4B 00C0
        gbc.setState(0xa094, 0x61b2, 0x13b0, 0x52a4, 0x76fc, 0x51bf, 0x0, 0x0);
        gbc.writeMem(0xa094, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x61b2);
        EXPECT(gbc.pc(), 0xa096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa094), 0xcb);
        EXPECT(gbc.readMem(0xa095), 0x4b);
        // CB 4B 00C3
        gbc.setState(0x41b6, 0xc399, 0xa7e0, 0xa104, 0xc633, 0x8e46, 0x1, 0x0);
        gbc.writeMem(0x41b6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc399);
        EXPECT(gbc.pc(), 0x41b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00C4
        gbc.setState(0x47bb, 0xe532, 0x3090, 0xf4bc, 0x9a6c, 0xbd77, 0x1, 0x0);
        gbc.writeMem(0x47bb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe532);
        EXPECT(gbc.pc(), 0x47bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00C5
        gbc.setState(0x157a, 0x7e2f, 0x12f0, 0xe47a, 0xf27, 0x19a8, 0x1, 0x0);
        gbc.writeMem(0x157a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7e2f);
        EXPECT(gbc.pc(), 0x157c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00C6
        gbc.setState(0xcb0c, 0x86f1, 0x66d0, 0x9727, 0x9d16, 0x9f63, 0x0, 0x0);
        gbc.writeMem(0xcb0c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x86f1);
        EXPECT(gbc.pc(), 0xcb0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb0c), 0xcb);
        EXPECT(gbc.readMem(0xcb0d), 0x4b);
        // CB 4B 00C7
        gbc.setState(0x132f, 0x5aba, 0xf670, 0xf392, 0x881e, 0xdc5e, 0x1, 0x1);
        gbc.writeMem(0x132f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5aba);
        EXPECT(gbc.pc(), 0x1331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00C8
        gbc.setState(0x7efe, 0x7b24, 0x7720, 0x5462, 0x17fa, 0xba0a, 0x1, 0x1);
        gbc.writeMem(0x7efe, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7b24);
        EXPECT(gbc.pc(), 0x7f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00C9
        gbc.setState(0x3e43, 0x5887, 0x1880, 0xf53e, 0x534b, 0x214e, 0x0, 0x1);
        gbc.writeMem(0x3e43, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5887);
        EXPECT(gbc.pc(), 0x3e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00CA
        gbc.setState(0x25a9, 0x2590, 0xfd60, 0xa223, 0x9ce4, 0xbc84, 0x0, 0x0);
        gbc.writeMem(0x25a9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2590);
        EXPECT(gbc.pc(), 0x25ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00CB
        gbc.setState(0xacb, 0x4607, 0x70f0, 0x82a7, 0x7500, 0x8e37, 0x0, 0x0);
        gbc.writeMem(0xacb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4607);
        EXPECT(gbc.pc(), 0xacd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00CC
        gbc.setState(0x2e04, 0xd61a, 0x8d70, 0xe348, 0xf4da, 0x80e2, 0x1, 0x1);
        gbc.writeMem(0x2e04, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd61a);
        EXPECT(gbc.pc(), 0x2e06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00CD
        gbc.setState(0x5a3f, 0xea82, 0xdb90, 0xce4a, 0xcf04, 0xdb3c, 0x0, 0x0);
        gbc.writeMem(0x5a3f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xea82);
        EXPECT(gbc.pc(), 0x5a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00CE
        gbc.setState(0xaddc, 0xb603, 0x54b0, 0xec4e, 0x9f6e, 0x9b15, 0x1, 0x0);
        gbc.writeMem(0xaddc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb603);
        EXPECT(gbc.pc(), 0xadde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaddc), 0xcb);
        EXPECT(gbc.readMem(0xaddd), 0x4b);
        // CB 4B 00CF
        gbc.setState(0x29ec, 0x5725, 0x63c0, 0xa739, 0x287e, 0x5efe, 0x0, 0x1);
        gbc.writeMem(0x29ec, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5725);
        EXPECT(gbc.pc(), 0x29ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00D1
        gbc.setState(0xcf97, 0x3d7c, 0x2550, 0xb17b, 0xb424, 0x3f05, 0x0, 0x1);
        gbc.writeMem(0xcf97, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3d7c);
        EXPECT(gbc.pc(), 0xcf99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf97), 0xcb);
        EXPECT(gbc.readMem(0xcf98), 0x4b);
        // CB 4B 00D5
        gbc.setState(0x5334, 0xaba6, 0x75b0, 0xb1c3, 0xb676, 0xe511, 0x1, 0x1);
        gbc.writeMem(0x5334, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xaba6);
        EXPECT(gbc.pc(), 0x5336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00D6
        gbc.setState(0x276c, 0x2007, 0x4220, 0x7b9b, 0xf28c, 0xbfe1, 0x1, 0x1);
        gbc.writeMem(0x276c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x2007);
        EXPECT(gbc.pc(), 0x276e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00D7
        gbc.setState(0xd93e, 0xba92, 0xc2b0, 0xc1f7, 0xac9c, 0x5433, 0x0, 0x0);
        gbc.writeMem(0xd93e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xba92);
        EXPECT(gbc.pc(), 0xd940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd93e), 0xcb);
        EXPECT(gbc.readMem(0xd93f), 0x4b);
        // CB 4B 00D8
        gbc.setState(0x4805, 0x5036, 0xd910, 0xe482, 0x978e, 0x9e74, 0x0, 0x0);
        gbc.writeMem(0x4805, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5036);
        EXPECT(gbc.pc(), 0x4807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00D9
        gbc.setState(0xc814, 0xdc3f, 0xfe60, 0x140, 0xffa9, 0x7e2b, 0x1, 0x0);
        gbc.writeMem(0xc814, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xdc3f);
        EXPECT(gbc.pc(), 0xc816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc814), 0xcb);
        EXPECT(gbc.readMem(0xc815), 0x4b);
        // CB 4B 00DA
        gbc.setState(0x91a8, 0x62b4, 0xed70, 0xfae4, 0xe665, 0xf05e, 0x0, 0x0);
        gbc.writeMem(0x91a8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x62b4);
        EXPECT(gbc.pc(), 0x91aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a8), 0xcb);
        EXPECT(gbc.readMem(0x91a9), 0x4b);
        // CB 4B 00DB
        gbc.setState(0x3202, 0xcc53, 0xdbb0, 0x834b, 0x9d4e, 0xc80d, 0x0, 0x0);
        gbc.writeMem(0x3202, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcc53);
        EXPECT(gbc.pc(), 0x3204);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00DC
        gbc.setState(0x3eb5, 0xf834, 0x5830, 0x7724, 0x5fc5, 0xe6d6, 0x1, 0x0);
        gbc.writeMem(0x3eb5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf834);
        EXPECT(gbc.pc(), 0x3eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00DD
        gbc.setState(0xa7b, 0x8127, 0x2820, 0x6d0, 0x738a, 0x9b06, 0x1, 0x0);
        gbc.writeMem(0xa7b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8127);
        EXPECT(gbc.pc(), 0xa7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00DE
        gbc.setState(0x451d, 0x85ec, 0x6ec0, 0x8fe7, 0x9091, 0xa997, 0x0, 0x1);
        gbc.writeMem(0x451d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x85ec);
        EXPECT(gbc.pc(), 0x451f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00DF
        gbc.setState(0xb6ef, 0xdc77, 0x9670, 0x7f2f, 0xacc2, 0x6f58, 0x1, 0x0);
        gbc.writeMem(0xb6ef, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xdc77);
        EXPECT(gbc.pc(), 0xb6f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ef), 0xcb);
        EXPECT(gbc.readMem(0xb6f0), 0x4b);
        // CB 4B 00E0
        gbc.setState(0x1bc2, 0x69dd, 0xb60, 0xdcd, 0x2f12, 0xce92, 0x1, 0x0);
        gbc.writeMem(0x1bc2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x69dd);
        EXPECT(gbc.pc(), 0x1bc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00E1
        gbc.setState(0x7285, 0xb042, 0xeab0, 0xe256, 0xdc36, 0x8a4, 0x0, 0x0);
        gbc.writeMem(0x7285, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb042);
        EXPECT(gbc.pc(), 0x7287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00E2
        gbc.setState(0x3918, 0x2478, 0x2fe0, 0xec62, 0x7d3c, 0x1863, 0x0, 0x1);
        gbc.writeMem(0x3918, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2478);
        EXPECT(gbc.pc(), 0x391a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00E3
        gbc.setState(0x9522, 0xe79e, 0xcef0, 0x55dd, 0x7c79, 0xde0b, 0x0, 0x0);
        gbc.writeMem(0x9522, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe79e);
        EXPECT(gbc.pc(), 0x9524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9522), 0xcb);
        EXPECT(gbc.readMem(0x9523), 0x4b);
        // CB 4B 00E4
        gbc.setState(0xc06b, 0x9a00, 0xaf10, 0xc6e3, 0xf7ef, 0x7252, 0x0, 0x1);
        gbc.writeMem(0xc06b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9a00);
        EXPECT(gbc.pc(), 0xc06d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc06b), 0xcb);
        EXPECT(gbc.readMem(0xc06c), 0x4b);
        // CB 4B 00E5
        gbc.setState(0xc31b, 0x41ed, 0x6eb0, 0x7a0b, 0xf1a6, 0xee90, 0x1, 0x0);
        gbc.writeMem(0xc31b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x41ed);
        EXPECT(gbc.pc(), 0xc31d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc31b), 0xcb);
        EXPECT(gbc.readMem(0xc31c), 0x4b);
        // CB 4B 00E6
        gbc.setState(0xacb9, 0x8e4b, 0xcdf0, 0x3d5d, 0xa12, 0x88fb, 0x1, 0x1);
        gbc.writeMem(0xacb9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8e4b);
        EXPECT(gbc.pc(), 0xacbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb9), 0xcb);
        EXPECT(gbc.readMem(0xacba), 0x4b);
        // CB 4B 00E7
        gbc.setState(0x30dc, 0x5e80, 0xf3e0, 0x4dd6, 0x1a34, 0xa41, 0x0, 0x0);
        gbc.writeMem(0x30dc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5e80);
        EXPECT(gbc.pc(), 0x30de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00E8
        gbc.setState(0x1daf, 0x14e6, 0xd260, 0x7501, 0xabc6, 0x6ead, 0x0, 0x0);
        gbc.writeMem(0x1daf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x14e6);
        EXPECT(gbc.pc(), 0x1db1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00E9
        gbc.setState(0x9ef0, 0x7c43, 0x7ee0, 0x3cfb, 0xe6ae, 0xcba3, 0x1, 0x1);
        gbc.writeMem(0x9ef0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7c43);
        EXPECT(gbc.pc(), 0x9ef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef0), 0xcb);
        EXPECT(gbc.readMem(0x9ef1), 0x4b);
        // CB 4B 00EA
        gbc.setState(0x5332, 0xbf6, 0x6100, 0x1787, 0xa207, 0xb416, 0x0, 0x1);
        gbc.writeMem(0x5332, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbf6);
        EXPECT(gbc.pc(), 0x5334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00EB
        gbc.setState(0xdf1e, 0x15d0, 0x7c0, 0x204d, 0x74e6, 0xc9ae, 0x0, 0x0);
        gbc.writeMem(0xdf1e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x15d0);
        EXPECT(gbc.pc(), 0xdf20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf1e), 0xcb);
        EXPECT(gbc.readMem(0xdf1f), 0x4b);
        // CB 4B 00ED
        gbc.setState(0x69db, 0xd119, 0x1a40, 0xce3c, 0x482c, 0xf40, 0x0, 0x0);
        gbc.writeMem(0x69db, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd119);
        EXPECT(gbc.pc(), 0x69dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00EF
        gbc.setState(0x1086, 0x147, 0x7ea0, 0xaa6b, 0x4554, 0x5f14, 0x0, 0x1);
        gbc.writeMem(0x1086, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x147);
        EXPECT(gbc.pc(), 0x1088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00F0
        gbc.setState(0x99cc, 0x75a2, 0xb160, 0x2acb, 0x2d5a, 0xc0c6, 0x1, 0x1);
        gbc.writeMem(0x99cc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x75a2);
        EXPECT(gbc.pc(), 0x99ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99cc), 0xcb);
        EXPECT(gbc.readMem(0x99cd), 0x4b);
        // CB 4B 00F1
        gbc.setState(0xd61a, 0x64b4, 0xca70, 0x6262, 0x749a, 0x6ad8, 0x1, 0x1);
        gbc.writeMem(0xd61a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x64b4);
        EXPECT(gbc.pc(), 0xd61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd61a), 0xcb);
        EXPECT(gbc.readMem(0xd61b), 0x4b);
        // CB 4B 00F2
        gbc.setState(0x592e, 0xb966, 0x5440, 0xdada, 0x4680, 0xc61f, 0x0, 0x0);
        gbc.writeMem(0x592e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb966);
        EXPECT(gbc.pc(), 0x5930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00F3
        gbc.setState(0x1a07, 0x8a8a, 0xe2e0, 0x1679, 0x8394, 0x51f4, 0x0, 0x0);
        gbc.writeMem(0x1a07, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8a8a);
        EXPECT(gbc.pc(), 0x1a09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00F4
        gbc.setState(0x1786, 0xd31d, 0xe640, 0x3c85, 0xedb1, 0x780c, 0x0, 0x1);
        gbc.writeMem(0x1786, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd31d);
        EXPECT(gbc.pc(), 0x1788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00F5
        gbc.setState(0xa0c2, 0x7902, 0x3850, 0x146f, 0x132e, 0x274b, 0x1, 0x1);
        gbc.writeMem(0xa0c2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7902);
        EXPECT(gbc.pc(), 0xa0c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0c2), 0xcb);
        EXPECT(gbc.readMem(0xa0c3), 0x4b);
        // CB 4B 00F6
        gbc.setState(0xde9a, 0x97b7, 0x6830, 0x20d8, 0x9547, 0xb795, 0x0, 0x0);
        gbc.writeMem(0xde9a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x97b7);
        EXPECT(gbc.pc(), 0xde9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde9a), 0xcb);
        EXPECT(gbc.readMem(0xde9b), 0x4b);
        // CB 4B 00F7
        gbc.setState(0xcad2, 0x7647, 0x3d70, 0x3c2b, 0x97f, 0x372a, 0x1, 0x0);
        gbc.writeMem(0xcad2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7647);
        EXPECT(gbc.pc(), 0xcad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcad2), 0xcb);
        EXPECT(gbc.readMem(0xcad3), 0x4b);
        // CB 4B 00F8
        gbc.setState(0x792b, 0xefc7, 0x29f0, 0x2654, 0x32a5, 0xdee1, 0x1, 0x0);
        gbc.writeMem(0x792b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xefc7);
        EXPECT(gbc.pc(), 0x792d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00F9
        gbc.setState(0xeb5c, 0xfc09, 0x2ae0, 0x64c7, 0x1c58, 0x4f83, 0x1, 0x0);
        gbc.writeMem(0xeb5c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfc09);
        EXPECT(gbc.pc(), 0xeb5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb5c), 0xcb);
        EXPECT(gbc.readMem(0xeb5d), 0x4b);
        // CB 4B 00FA
        gbc.setState(0x2dc1, 0x7a73, 0xefa0, 0x7214, 0xb3bc, 0x15af, 0x1, 0x0);
        gbc.writeMem(0x2dc1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7a73);
        EXPECT(gbc.pc(), 0x2dc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 00FB
        gbc.setState(0xea49, 0xc92, 0xad80, 0x3cd3, 0x28a0, 0xcc8d, 0x1, 0x0);
        gbc.writeMem(0xea49, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc92);
        EXPECT(gbc.pc(), 0xea4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea49), 0xcb);
        EXPECT(gbc.readMem(0xea4a), 0x4b);
        // CB 4B 00FC
        gbc.setState(0xa562, 0x2fb6, 0xbf90, 0xe8ab, 0x309f, 0x3c05, 0x0, 0x0);
        gbc.writeMem(0xa562, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2fb6);
        EXPECT(gbc.pc(), 0xa564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa562), 0xcb);
        EXPECT(gbc.readMem(0xa563), 0x4b);
        // CB 4B 00FD
        gbc.setState(0x190c, 0xd203, 0xcd30, 0x861c, 0xb85e, 0x354f, 0x0, 0x0);
        gbc.writeMem(0x190c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd203);
        EXPECT(gbc.pc(), 0x190e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 00FF
        gbc.setState(0xea45, 0x1f0b, 0x24b0, 0xd136, 0xffd8, 0x6d34, 0x1, 0x0);
        gbc.writeMem(0xea45, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1f0b);
        EXPECT(gbc.pc(), 0xea47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea45), 0xcb);
        EXPECT(gbc.readMem(0xea46), 0x4b);
        // CB 4B 0100
        gbc.setState(0x6735, 0x77ed, 0xcc90, 0x2c64, 0x35b8, 0x78cf, 0x0, 0x1);
        gbc.writeMem(0x6735, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x77ed);
        EXPECT(gbc.pc(), 0x6737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0101
        gbc.setState(0x973b, 0x8da0, 0x1920, 0x97ce, 0xfc8b, 0x282b, 0x0, 0x0);
        gbc.writeMem(0x973b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8da0);
        EXPECT(gbc.pc(), 0x973d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x973b), 0xcb);
        EXPECT(gbc.readMem(0x973c), 0x4b);
        // CB 4B 0102
        gbc.setState(0xc6e8, 0xd18, 0xe580, 0x9c68, 0x5ab6, 0xbf56, 0x1, 0x0);
        gbc.writeMem(0xc6e8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd18);
        EXPECT(gbc.pc(), 0xc6ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e8), 0xcb);
        EXPECT(gbc.readMem(0xc6e9), 0x4b);
        // CB 4B 0103
        gbc.setState(0x8da0, 0xd6da, 0x67d0, 0xbb86, 0x8cff, 0xae94, 0x1, 0x0);
        gbc.writeMem(0x8da0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd6da);
        EXPECT(gbc.pc(), 0x8da2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da0), 0xcb);
        EXPECT(gbc.readMem(0x8da1), 0x4b);
        // CB 4B 0104
        gbc.setState(0x51dd, 0x84f2, 0x1080, 0xe40b, 0x9cab, 0xe795, 0x1, 0x0);
        gbc.writeMem(0x51dd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x84f2);
        EXPECT(gbc.pc(), 0x51df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0105
        gbc.setState(0x91eb, 0x207c, 0xa080, 0x71c, 0x6f47, 0x7346, 0x1, 0x0);
        gbc.writeMem(0x91eb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x207c);
        EXPECT(gbc.pc(), 0x91ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91eb), 0xcb);
        EXPECT(gbc.readMem(0x91ec), 0x4b);
        // CB 4B 0106
        gbc.setState(0xcf4a, 0xfac8, 0x6f20, 0x21d8, 0xb649, 0x6fff, 0x1, 0x0);
        gbc.writeMem(0xcf4a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfac8);
        EXPECT(gbc.pc(), 0xcf4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf4a), 0xcb);
        EXPECT(gbc.readMem(0xcf4b), 0x4b);
        // CB 4B 0107
        gbc.setState(0xb352, 0x9f50, 0x34e0, 0xde4e, 0x68, 0x64d5, 0x0, 0x0);
        gbc.writeMem(0xb352, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9f50);
        EXPECT(gbc.pc(), 0xb354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb352), 0xcb);
        EXPECT(gbc.readMem(0xb353), 0x4b);
        // CB 4B 0108
        gbc.setState(0x129f, 0xe0a0, 0x5270, 0xce76, 0xa659, 0x5fad, 0x1, 0x0);
        gbc.writeMem(0x129f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe0a0);
        EXPECT(gbc.pc(), 0x12a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0109
        gbc.setState(0x1a9a, 0x6f9e, 0x97f0, 0x28d2, 0xa3bb, 0x9b39, 0x1, 0x0);
        gbc.writeMem(0x1a9a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6f9e);
        EXPECT(gbc.pc(), 0x1a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 010A
        gbc.setState(0xb962, 0x902e, 0x6aa0, 0x26b1, 0x4ba2, 0x25ef, 0x0, 0x0);
        gbc.writeMem(0xb962, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x902e);
        EXPECT(gbc.pc(), 0xb964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb962), 0xcb);
        EXPECT(gbc.readMem(0xb963), 0x4b);
        // CB 4B 010B
        gbc.setState(0x42c, 0xb937, 0xee30, 0xab87, 0xa0a7, 0x6ddf, 0x1, 0x0);
        gbc.writeMem(0x42c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb937);
        EXPECT(gbc.pc(), 0x42e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 010C
        gbc.setState(0xb23f, 0xf22f, 0xde60, 0xad31, 0xa9c1, 0x15b7, 0x1, 0x1);
        gbc.writeMem(0xb23f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf22f);
        EXPECT(gbc.pc(), 0xb241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb23f), 0xcb);
        EXPECT(gbc.readMem(0xb240), 0x4b);
        // CB 4B 010D
        gbc.setState(0x9a96, 0xe4a8, 0xc930, 0x2a53, 0xb230, 0xaac1, 0x1, 0x1);
        gbc.writeMem(0x9a96, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe4a8);
        EXPECT(gbc.pc(), 0x9a98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a96), 0xcb);
        EXPECT(gbc.readMem(0x9a97), 0x4b);
        // CB 4B 010E
        gbc.setState(0x95c3, 0xd777, 0x5240, 0xee30, 0xb7ad, 0x8186, 0x1, 0x1);
        gbc.writeMem(0x95c3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd777);
        EXPECT(gbc.pc(), 0x95c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c3), 0xcb);
        EXPECT(gbc.readMem(0x95c4), 0x4b);
        // CB 4B 010F
        gbc.setState(0x69a3, 0x5859, 0xd5d0, 0x45c1, 0xcfd9, 0xdb37, 0x1, 0x0);
        gbc.writeMem(0x69a3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5859);
        EXPECT(gbc.pc(), 0x69a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0110
        gbc.setState(0xbdc8, 0x3876, 0x6880, 0x2659, 0x2a9a, 0xede7, 0x0, 0x0);
        gbc.writeMem(0xbdc8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3876);
        EXPECT(gbc.pc(), 0xbdca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc8), 0xcb);
        EXPECT(gbc.readMem(0xbdc9), 0x4b);
        // CB 4B 0111
        gbc.setState(0xc341, 0x8792, 0x6620, 0x646c, 0xebc5, 0xc6c5, 0x0, 0x1);
        gbc.writeMem(0xc341, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8792);
        EXPECT(gbc.pc(), 0xc343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc341), 0xcb);
        EXPECT(gbc.readMem(0xc342), 0x4b);
        // CB 4B 0112
        gbc.setState(0xde1, 0x52f7, 0xd120, 0x16f7, 0xf5d7, 0x7e9c, 0x1, 0x0);
        gbc.writeMem(0xde1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x52f7);
        EXPECT(gbc.pc(), 0xde3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0113
        gbc.setState(0x4a82, 0xe835, 0x4c80, 0xa4ee, 0x334e, 0xef2c, 0x1, 0x1);
        gbc.writeMem(0x4a82, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe835);
        EXPECT(gbc.pc(), 0x4a84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0114
        gbc.setState(0x68ac, 0x4958, 0x6f20, 0x6e4f, 0xce12, 0xbcc3, 0x0, 0x0);
        gbc.writeMem(0x68ac, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4958);
        EXPECT(gbc.pc(), 0x68ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0115
        gbc.setState(0x67d, 0x3487, 0x6f60, 0x3a4a, 0x9057, 0xece1, 0x1, 0x0);
        gbc.writeMem(0x67d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3487);
        EXPECT(gbc.pc(), 0x67f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0116
        gbc.setState(0xbb1c, 0x99a2, 0x9e50, 0x30f9, 0xa18c, 0x23b4, 0x0, 0x0);
        gbc.writeMem(0xbb1c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x99a2);
        EXPECT(gbc.pc(), 0xbb1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb1c), 0xcb);
        EXPECT(gbc.readMem(0xbb1d), 0x4b);
        // CB 4B 0117
        gbc.setState(0xac9, 0x2f5c, 0x6bd0, 0xb074, 0x6eb6, 0xa1a7, 0x0, 0x1);
        gbc.writeMem(0xac9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2f5c);
        EXPECT(gbc.pc(), 0xacb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0118
        gbc.setState(0x512e, 0x6aec, 0xc920, 0x6644, 0xfab6, 0xb001, 0x0, 0x0);
        gbc.writeMem(0x512e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6aec);
        EXPECT(gbc.pc(), 0x5130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0119
        gbc.setState(0xe1c, 0x1fd6, 0x5230, 0x5559, 0x5b4a, 0x994, 0x0, 0x1);
        gbc.writeMem(0xe1c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1fd6);
        EXPECT(gbc.pc(), 0xe1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 011A
        gbc.setState(0xae07, 0x393f, 0x4060, 0x355b, 0x8a7b, 0x78c8, 0x0, 0x0);
        gbc.writeMem(0xae07, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x393f);
        EXPECT(gbc.pc(), 0xae09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae07), 0xcb);
        EXPECT(gbc.readMem(0xae08), 0x4b);
        // CB 4B 011B
        gbc.setState(0xb1e, 0xcbdf, 0x3a90, 0xd02, 0xc555, 0x15c8, 0x0, 0x1);
        gbc.writeMem(0xb1e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xcbdf);
        EXPECT(gbc.pc(), 0xb20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 011C
        gbc.setState(0x9b8b, 0x4f52, 0x6470, 0xe668, 0x2574, 0x6069, 0x1, 0x1);
        gbc.writeMem(0x9b8b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4f52);
        EXPECT(gbc.pc(), 0x9b8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b8b), 0xcb);
        EXPECT(gbc.readMem(0x9b8c), 0x4b);
        // CB 4B 011D
        gbc.setState(0x1a47, 0x39dc, 0x5020, 0x609e, 0x26ed, 0x4418, 0x1, 0x0);
        gbc.writeMem(0x1a47, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x39dc);
        EXPECT(gbc.pc(), 0x1a49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 011E
        gbc.setState(0x1526, 0xb6c1, 0x85d0, 0x3a39, 0xd2da, 0xc4fc, 0x1, 0x1);
        gbc.writeMem(0x1526, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb6c1);
        EXPECT(gbc.pc(), 0x1528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0121
        gbc.setState(0x73d0, 0xb918, 0x8940, 0xdb2c, 0xc557, 0x1098, 0x0, 0x0);
        gbc.writeMem(0x73d0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xb918);
        EXPECT(gbc.pc(), 0x73d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0122
        gbc.setState(0x3ce0, 0x13cd, 0xffc0, 0x21b0, 0x8af, 0xb597, 0x1, 0x1);
        gbc.writeMem(0x3ce0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x13cd);
        EXPECT(gbc.pc(), 0x3ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0123
        gbc.setState(0x219c, 0xd60d, 0x1e50, 0xb221, 0x7aaf, 0xf881, 0x1, 0x1);
        gbc.writeMem(0x219c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd60d);
        EXPECT(gbc.pc(), 0x219e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0124
        gbc.setState(0x3ec2, 0xddb0, 0x4040, 0x6449, 0xab64, 0xecec, 0x0, 0x0);
        gbc.writeMem(0x3ec2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xddb0);
        EXPECT(gbc.pc(), 0x3ec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0125
        gbc.setState(0x4c4b, 0x72e7, 0x16c0, 0x3d5f, 0x2f17, 0x563f, 0x0, 0x1);
        gbc.writeMem(0x4c4b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x72e7);
        EXPECT(gbc.pc(), 0x4c4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0126
        gbc.setState(0xe7e0, 0xfb44, 0x21f0, 0x9e3e, 0x4f00, 0xfddb, 0x0, 0x0);
        gbc.writeMem(0xe7e0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xfb44);
        EXPECT(gbc.pc(), 0xe7e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7e0), 0xcb);
        EXPECT(gbc.readMem(0xe7e1), 0x4b);
        // CB 4B 0127
        gbc.setState(0x24fc, 0x1931, 0x4830, 0x6e59, 0x5e22, 0xb46, 0x1, 0x1);
        gbc.writeMem(0x24fc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1931);
        EXPECT(gbc.pc(), 0x24fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0128
        gbc.setState(0x323, 0xf146, 0x36b0, 0x1818, 0x1207, 0x6006, 0x1, 0x1);
        gbc.writeMem(0x323, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf146);
        EXPECT(gbc.pc(), 0x325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0129
        gbc.setState(0xa0a, 0x9afb, 0xc820, 0xf14a, 0x55f1, 0x652c, 0x0, 0x0);
        gbc.writeMem(0xa0a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9afb);
        EXPECT(gbc.pc(), 0xa0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 012B
        gbc.setState(0xa53e, 0x3a7b, 0xef10, 0xaf36, 0xfc5c, 0xdfd0, 0x1, 0x0);
        gbc.writeMem(0xa53e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3a7b);
        EXPECT(gbc.pc(), 0xa540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa53e), 0xcb);
        EXPECT(gbc.readMem(0xa53f), 0x4b);
        // CB 4B 012C
        gbc.setState(0x54b5, 0xe768, 0x35e0, 0x3f8c, 0x222f, 0x2d20, 0x1, 0x1);
        gbc.writeMem(0x54b5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe768);
        EXPECT(gbc.pc(), 0x54b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 012D
        gbc.setState(0x7477, 0x579e, 0x8100, 0x312c, 0xc39b, 0x4de8, 0x1, 0x0);
        gbc.writeMem(0x7477, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x579e);
        EXPECT(gbc.pc(), 0x7479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 012E
        gbc.setState(0x7469, 0x964a, 0x4070, 0x788d, 0x9a3f, 0x167a, 0x0, 0x0);
        gbc.writeMem(0x7469, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x964a);
        EXPECT(gbc.pc(), 0x746b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 012F
        gbc.setState(0x4190, 0x9eb0, 0xf2b0, 0x6dc6, 0x9d30, 0x15b9, 0x0, 0x0);
        gbc.writeMem(0x4190, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9eb0);
        EXPECT(gbc.pc(), 0x4192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0130
        gbc.setState(0x687, 0x7f66, 0xb590, 0x9396, 0x8dbc, 0x514d, 0x0, 0x0);
        gbc.writeMem(0x687, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7f66);
        EXPECT(gbc.pc(), 0x689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0131
        gbc.setState(0xde39, 0xa9a, 0x16c0, 0x8ae0, 0xd2c, 0xd4c0, 0x0, 0x0);
        gbc.writeMem(0xde39, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa9a);
        EXPECT(gbc.pc(), 0xde3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde39), 0xcb);
        EXPECT(gbc.readMem(0xde3a), 0x4b);
        // CB 4B 0132
        gbc.setState(0x4d6e, 0xe4e, 0xdda0, 0x2b0b, 0xc5b9, 0xfd41, 0x1, 0x1);
        gbc.writeMem(0x4d6e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe4e);
        EXPECT(gbc.pc(), 0x4d70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0134
        gbc.setState(0x565c, 0xc3f5, 0x4260, 0xb3bf, 0x1733, 0xd10b, 0x0, 0x0);
        gbc.writeMem(0x565c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc3f5);
        EXPECT(gbc.pc(), 0x565e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0135
        gbc.setState(0xb09d, 0x963f, 0xd750, 0xad4a, 0xd6f2, 0x89e3, 0x1, 0x0);
        gbc.writeMem(0xb09d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x963f);
        EXPECT(gbc.pc(), 0xb09f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb09d), 0xcb);
        EXPECT(gbc.readMem(0xb09e), 0x4b);
        // CB 4B 0136
        gbc.setState(0x8998, 0x2768, 0x2c70, 0x110c, 0xd2c3, 0x6ee8, 0x0, 0x0);
        gbc.writeMem(0x8998, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2768);
        EXPECT(gbc.pc(), 0x899a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8998), 0xcb);
        EXPECT(gbc.readMem(0x8999), 0x4b);
        // CB 4B 0137
        gbc.setState(0xcbf8, 0x4c8f, 0x2030, 0xdd8d, 0xd77a, 0xcc8f, 0x0, 0x0);
        gbc.writeMem(0xcbf8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4c8f);
        EXPECT(gbc.pc(), 0xcbfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf8), 0xcb);
        EXPECT(gbc.readMem(0xcbf9), 0x4b);
        // CB 4B 0138
        gbc.setState(0xe961, 0xa3dd, 0xdc20, 0x8f4d, 0xc2d3, 0xa211, 0x1, 0x1);
        gbc.writeMem(0xe961, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa3dd);
        EXPECT(gbc.pc(), 0xe963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe961), 0xcb);
        EXPECT(gbc.readMem(0xe962), 0x4b);
        // CB 4B 0139
        gbc.setState(0x4e32, 0xcd94, 0x1320, 0x77f2, 0xde4a, 0x1537, 0x0, 0x0);
        gbc.writeMem(0x4e32, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcd94);
        EXPECT(gbc.pc(), 0x4e34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 013A
        gbc.setState(0xc15a, 0x1bcc, 0x7b30, 0x950f, 0x4346, 0x7e2d, 0x1, 0x0);
        gbc.writeMem(0xc15a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1bcc);
        EXPECT(gbc.pc(), 0xc15c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc15a), 0xcb);
        EXPECT(gbc.readMem(0xc15b), 0x4b);
        // CB 4B 013B
        gbc.setState(0x9775, 0xbe04, 0xc010, 0xb718, 0x38ac, 0xf0aa, 0x1, 0x0);
        gbc.writeMem(0x9775, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbe04);
        EXPECT(gbc.pc(), 0x9777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9775), 0xcb);
        EXPECT(gbc.readMem(0x9776), 0x4b);
        // CB 4B 013C
        gbc.setState(0x8b70, 0x2c, 0x8750, 0x7c35, 0x9ce1, 0x8826, 0x0, 0x0);
        gbc.writeMem(0x8b70, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2c);
        EXPECT(gbc.pc(), 0x8b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b70), 0xcb);
        EXPECT(gbc.readMem(0x8b71), 0x4b);
        // CB 4B 013D
        gbc.setState(0xcef9, 0x7e6f, 0x9730, 0x3f1f, 0xbc48, 0xbb6f, 0x1, 0x1);
        gbc.writeMem(0xcef9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7e6f);
        EXPECT(gbc.pc(), 0xcefb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcef9), 0xcb);
        EXPECT(gbc.readMem(0xcefa), 0x4b);
        // CB 4B 013E
        gbc.setState(0x64d4, 0x68f8, 0x5e0, 0xd310, 0x9cd9, 0xee71, 0x0, 0x0);
        gbc.writeMem(0x64d4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x68f8);
        EXPECT(gbc.pc(), 0x64d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 013F
        gbc.setState(0x55d1, 0xff70, 0xf620, 0xf77, 0x70c3, 0xc706, 0x0, 0x0);
        gbc.writeMem(0x55d1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xff70);
        EXPECT(gbc.pc(), 0x55d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0140
        gbc.setState(0x8aab, 0x195d, 0xe600, 0x5971, 0x8bbc, 0xa6e0, 0x0, 0x0);
        gbc.writeMem(0x8aab, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x195d);
        EXPECT(gbc.pc(), 0x8aad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aab), 0xcb);
        EXPECT(gbc.readMem(0x8aac), 0x4b);
        // CB 4B 0141
        gbc.setState(0x44ba, 0x3b7b, 0xff80, 0x3d98, 0x9ad9, 0x914c, 0x1, 0x0);
        gbc.writeMem(0x44ba, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3b7b);
        EXPECT(gbc.pc(), 0x44bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0142
        gbc.setState(0x2c65, 0xbb13, 0x9e40, 0xfed1, 0x67d8, 0x7daa, 0x0, 0x1);
        gbc.writeMem(0x2c65, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbb13);
        EXPECT(gbc.pc(), 0x2c67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0143
        gbc.setState(0x78e4, 0xc83a, 0xa530, 0xd09f, 0x4ace, 0x9cd6, 0x0, 0x1);
        gbc.writeMem(0x78e4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc83a);
        EXPECT(gbc.pc(), 0x78e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0144
        gbc.setState(0x6b96, 0x3cb5, 0xc000, 0x7884, 0xfb8a, 0xf956, 0x1, 0x0);
        gbc.writeMem(0x6b96, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3cb5);
        EXPECT(gbc.pc(), 0x6b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0145
        gbc.setState(0x2774, 0xd0d4, 0x32d0, 0xea13, 0x2630, 0x6a79, 0x0, 0x1);
        gbc.writeMem(0x2774, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd0d4);
        EXPECT(gbc.pc(), 0x2776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0146
        gbc.setState(0x1860, 0x7c8d, 0xdd70, 0x5f32, 0x6c02, 0xd7b7, 0x0, 0x0);
        gbc.writeMem(0x1860, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7c8d);
        EXPECT(gbc.pc(), 0x1862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0147
        gbc.setState(0x9fd2, 0x2cd3, 0x53b0, 0x2a7e, 0xabcd, 0x9ced, 0x1, 0x0);
        gbc.writeMem(0x9fd2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2cd3);
        EXPECT(gbc.pc(), 0x9fd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fd2), 0xcb);
        EXPECT(gbc.readMem(0x9fd3), 0x4b);
        // CB 4B 0148
        gbc.setState(0x49e6, 0x7306, 0xa700, 0x1557, 0x6e3, 0x56fd, 0x0, 0x0);
        gbc.writeMem(0x49e6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7306);
        EXPECT(gbc.pc(), 0x49e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0149
        gbc.setState(0x7a19, 0xbe56, 0x9790, 0x5a64, 0x3386, 0xd47, 0x1, 0x0);
        gbc.writeMem(0x7a19, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbe56);
        EXPECT(gbc.pc(), 0x7a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 014A
        gbc.setState(0xe78f, 0xf06f, 0xf820, 0x2c78, 0x289f, 0xae02, 0x0, 0x0);
        gbc.writeMem(0xe78f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf06f);
        EXPECT(gbc.pc(), 0xe791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78f), 0xcb);
        EXPECT(gbc.readMem(0xe790), 0x4b);
        // CB 4B 014B
        gbc.setState(0xbd2e, 0xfb46, 0xbf00, 0xa4ec, 0x8ba7, 0x47c9, 0x1, 0x0);
        gbc.writeMem(0xbd2e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfb46);
        EXPECT(gbc.pc(), 0xbd30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd2e), 0xcb);
        EXPECT(gbc.readMem(0xbd2f), 0x4b);
        // CB 4B 014D
        gbc.setState(0x3907, 0x35da, 0x22a0, 0xab54, 0x4f93, 0x1804, 0x1, 0x1);
        gbc.writeMem(0x3907, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x35da);
        EXPECT(gbc.pc(), 0x3909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 014E
        gbc.setState(0x538e, 0x9603, 0xe340, 0x12f5, 0xbda7, 0xe070, 0x1, 0x1);
        gbc.writeMem(0x538e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0x5390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 014F
        gbc.setState(0x8b1d, 0x43a4, 0xe9c0, 0xd14, 0xbe3e, 0xc330, 0x0, 0x1);
        gbc.writeMem(0x8b1d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x43a4);
        EXPECT(gbc.pc(), 0x8b1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1d), 0xcb);
        EXPECT(gbc.readMem(0x8b1e), 0x4b);
        // CB 4B 0150
        gbc.setState(0x8fd, 0xe2d, 0xbce0, 0x3ae1, 0x4478, 0xbf99, 0x1, 0x1);
        gbc.writeMem(0x8fd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe2d);
        EXPECT(gbc.pc(), 0x8ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0151
        gbc.setState(0x997a, 0x486f, 0x8aa0, 0x5103, 0xe0f0, 0xdaed, 0x1, 0x1);
        gbc.writeMem(0x997a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x486f);
        EXPECT(gbc.pc(), 0x997c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x997a), 0xcb);
        EXPECT(gbc.readMem(0x997b), 0x4b);
        // CB 4B 0152
        gbc.setState(0x22d2, 0x7cd1, 0xc670, 0x2b68, 0x51c, 0x9650, 0x0, 0x0);
        gbc.writeMem(0x22d2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7cd1);
        EXPECT(gbc.pc(), 0x22d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0153
        gbc.setState(0x9880, 0x58eb, 0x5f60, 0xde72, 0x198c, 0xf002, 0x1, 0x1);
        gbc.writeMem(0x9880, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x58eb);
        EXPECT(gbc.pc(), 0x9882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9880), 0xcb);
        EXPECT(gbc.readMem(0x9881), 0x4b);
        // CB 4B 0154
        gbc.setState(0x42e6, 0xb7b9, 0xef50, 0x61c1, 0xc34, 0x8e02, 0x0, 0x1);
        gbc.writeMem(0x42e6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb7b9);
        EXPECT(gbc.pc(), 0x42e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0155
        gbc.setState(0xd13e, 0xce7a, 0x5d80, 0x51a0, 0x3ae5, 0x1a8b, 0x1, 0x0);
        gbc.writeMem(0xd13e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xce7a);
        EXPECT(gbc.pc(), 0xd140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13e), 0xcb);
        EXPECT(gbc.readMem(0xd13f), 0x4b);
        // CB 4B 0156
        gbc.setState(0xbd70, 0xb4cc, 0xd20, 0xa2a6, 0x4e2f, 0x88ff, 0x1, 0x0);
        gbc.writeMem(0xbd70, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb4cc);
        EXPECT(gbc.pc(), 0xbd72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd70), 0xcb);
        EXPECT(gbc.readMem(0xbd71), 0x4b);
        // CB 4B 0157
        gbc.setState(0x35f3, 0x598, 0xc000, 0xd77, 0xe993, 0x494b, 0x0, 0x0);
        gbc.writeMem(0x35f3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x598);
        EXPECT(gbc.pc(), 0x35f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0158
        gbc.setState(0x825c, 0x457b, 0xace0, 0xa50c, 0x897d, 0xd669, 0x0, 0x0);
        gbc.writeMem(0x825c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x457b);
        EXPECT(gbc.pc(), 0x825e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x825c), 0xcb);
        EXPECT(gbc.readMem(0x825d), 0x4b);
        // CB 4B 0159
        gbc.setState(0xb204, 0xf68d, 0x94d0, 0x73a7, 0xec16, 0xed0a, 0x0, 0x1);
        gbc.writeMem(0xb204, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf68d);
        EXPECT(gbc.pc(), 0xb206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb204), 0xcb);
        EXPECT(gbc.readMem(0xb205), 0x4b);
        // CB 4B 015A
        gbc.setState(0xe79, 0x2ed9, 0x8900, 0xab77, 0xb862, 0x8777, 0x1, 0x0);
        gbc.writeMem(0xe79, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2ed9);
        EXPECT(gbc.pc(), 0xe7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 015B
        gbc.setState(0x8335, 0x34d4, 0x8540, 0x19f5, 0xb2ee, 0xa2f4, 0x1, 0x1);
        gbc.writeMem(0x8335, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x34d4);
        EXPECT(gbc.pc(), 0x8337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8335), 0xcb);
        EXPECT(gbc.readMem(0x8336), 0x4b);
        // CB 4B 015C
        gbc.setState(0x9afc, 0x2d37, 0xb740, 0xbfbb, 0x182d, 0xa88c, 0x0, 0x0);
        gbc.writeMem(0x9afc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2d37);
        EXPECT(gbc.pc(), 0x9afe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afc), 0xcb);
        EXPECT(gbc.readMem(0x9afd), 0x4b);
        // CB 4B 015D
        gbc.setState(0x5213, 0xf797, 0x3f60, 0x1cf4, 0x43fa, 0x49b4, 0x0, 0x1);
        gbc.writeMem(0x5213, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf797);
        EXPECT(gbc.pc(), 0x5215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 015E
        gbc.setState(0x42e8, 0xfca9, 0xc0, 0x37cf, 0xb117, 0xfb74, 0x1, 0x1);
        gbc.writeMem(0x42e8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfca9);
        EXPECT(gbc.pc(), 0x42ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 015F
        gbc.setState(0x4de7, 0x6204, 0x460, 0x1082, 0x8426, 0xba09, 0x0, 0x0);
        gbc.writeMem(0x4de7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6204);
        EXPECT(gbc.pc(), 0x4de9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0160
        gbc.setState(0xd497, 0x3812, 0xa000, 0xe3af, 0xd1c4, 0x47e7, 0x1, 0x0);
        gbc.writeMem(0xd497, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3812);
        EXPECT(gbc.pc(), 0xd499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd497), 0xcb);
        EXPECT(gbc.readMem(0xd498), 0x4b);
        // CB 4B 0161
        gbc.setState(0xe57, 0xe9b7, 0x8cb0, 0xec11, 0xb247, 0xd067, 0x1, 0x1);
        gbc.writeMem(0xe57, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe9b7);
        EXPECT(gbc.pc(), 0xe59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0162
        gbc.setState(0x1a59, 0x7513, 0x6ff0, 0xb0ae, 0xad66, 0xf87a, 0x0, 0x0);
        gbc.writeMem(0x1a59, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7513);
        EXPECT(gbc.pc(), 0x1a5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0163
        gbc.setState(0xb9b8, 0xff1a, 0x5370, 0x8b4, 0xf04, 0xb363, 0x1, 0x1);
        gbc.writeMem(0xb9b8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xff1a);
        EXPECT(gbc.pc(), 0xb9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b8), 0xcb);
        EXPECT(gbc.readMem(0xb9b9), 0x4b);
        // CB 4B 0164
        gbc.setState(0xc66a, 0x68e9, 0x3070, 0xbff4, 0x1afa, 0xabd8, 0x1, 0x1);
        gbc.writeMem(0xc66a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x68e9);
        EXPECT(gbc.pc(), 0xc66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc66a), 0xcb);
        EXPECT(gbc.readMem(0xc66b), 0x4b);
        // CB 4B 0165
        gbc.setState(0x2d85, 0xcaa, 0x40c0, 0xb4a4, 0x997f, 0x8999, 0x0, 0x1);
        gbc.writeMem(0x2d85, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcaa);
        EXPECT(gbc.pc(), 0x2d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0166
        gbc.setState(0x3e8c, 0x7590, 0x6cc0, 0xdae0, 0xd783, 0x3cf0, 0x0, 0x0);
        gbc.writeMem(0x3e8c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7590);
        EXPECT(gbc.pc(), 0x3e8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0167
        gbc.setState(0x3bd0, 0xbe47, 0xddf0, 0xcaf0, 0x7e, 0xe5a1, 0x0, 0x0);
        gbc.writeMem(0x3bd0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xbe47);
        EXPECT(gbc.pc(), 0x3bd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0168
        gbc.setState(0x66fd, 0xdf29, 0x99f0, 0x6140, 0x7708, 0xd40a, 0x1, 0x1);
        gbc.writeMem(0x66fd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xdf29);
        EXPECT(gbc.pc(), 0x66ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0169
        gbc.setState(0x306d, 0xc579, 0x5b10, 0x2e1c, 0x96f4, 0x546c, 0x1, 0x1);
        gbc.writeMem(0x306d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc579);
        EXPECT(gbc.pc(), 0x306f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 016A
        gbc.setState(0xc715, 0xe498, 0x7e30, 0xe47, 0xa47a, 0xdcac, 0x0, 0x1);
        gbc.writeMem(0xc715, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe498);
        EXPECT(gbc.pc(), 0xc717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc715), 0xcb);
        EXPECT(gbc.readMem(0xc716), 0x4b);
        // CB 4B 016B
        gbc.setState(0x3807, 0x7774, 0x31d0, 0xac2c, 0xf985, 0xcbe0, 0x1, 0x1);
        gbc.writeMem(0x3807, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7774);
        EXPECT(gbc.pc(), 0x3809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 016C
        gbc.setState(0x62e, 0xa06d, 0x1080, 0xb542, 0xc8d8, 0xdc2d, 0x0, 0x1);
        gbc.writeMem(0x62e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa06d);
        EXPECT(gbc.pc(), 0x630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 016D
        gbc.setState(0xc35e, 0xbc80, 0x6ca0, 0x922c, 0xb1fa, 0x27f2, 0x1, 0x0);
        gbc.writeMem(0xc35e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbc80);
        EXPECT(gbc.pc(), 0xc360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc35e), 0xcb);
        EXPECT(gbc.readMem(0xc35f), 0x4b);
        // CB 4B 016E
        gbc.setState(0x5a7, 0xe474, 0x79a0, 0x26b3, 0xc01c, 0x1f43, 0x0, 0x0);
        gbc.writeMem(0x5a7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe474);
        EXPECT(gbc.pc(), 0x5a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 016F
        gbc.setState(0xcce7, 0xd327, 0xaef0, 0xfcdd, 0xea5b, 0x88d3, 0x1, 0x1);
        gbc.writeMem(0xcce7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd327);
        EXPECT(gbc.pc(), 0xcce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcce7), 0xcb);
        EXPECT(gbc.readMem(0xcce8), 0x4b);
        // CB 4B 0170
        gbc.setState(0x8b9c, 0xf5df, 0x7970, 0x4f29, 0x5590, 0xc0c0, 0x0, 0x1);
        gbc.writeMem(0x8b9c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf5df);
        EXPECT(gbc.pc(), 0x8b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b9c), 0xcb);
        EXPECT(gbc.readMem(0x8b9d), 0x4b);
        // CB 4B 0171
        gbc.setState(0xdae0, 0xe44a, 0x8980, 0x8fa2, 0xbdd, 0xa029, 0x1, 0x0);
        gbc.writeMem(0xdae0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe44a);
        EXPECT(gbc.pc(), 0xdae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae0), 0xcb);
        EXPECT(gbc.readMem(0xdae1), 0x4b);
        // CB 4B 0172
        gbc.setState(0x40bd, 0x6daa, 0x6ca0, 0x6acf, 0x5e08, 0x3681, 0x0, 0x0);
        gbc.writeMem(0x40bd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6daa);
        EXPECT(gbc.pc(), 0x40bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0173
        gbc.setState(0xa8c1, 0x2a74, 0x5940, 0x22dc, 0x2ed4, 0xc436, 0x1, 0x0);
        gbc.writeMem(0xa8c1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2a74);
        EXPECT(gbc.pc(), 0xa8c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c1), 0xcb);
        EXPECT(gbc.readMem(0xa8c2), 0x4b);
        // CB 4B 0174
        gbc.setState(0x7044, 0xb91f, 0xdf30, 0x2eb1, 0x8a60, 0xd3e0, 0x1, 0x1);
        gbc.writeMem(0x7044, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb91f);
        EXPECT(gbc.pc(), 0x7046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0175
        gbc.setState(0x7e1b, 0x6559, 0x4cf0, 0x156e, 0x66c1, 0xba5f, 0x1, 0x0);
        gbc.writeMem(0x7e1b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6559);
        EXPECT(gbc.pc(), 0x7e1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0176
        gbc.setState(0x7fd7, 0xa702, 0x3e80, 0x3544, 0x629d, 0x2a3b, 0x0, 0x1);
        gbc.writeMem(0x7fd7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa702);
        EXPECT(gbc.pc(), 0x7fd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0177
        gbc.setState(0x96f7, 0xd303, 0x140, 0xdcdd, 0x55fb, 0x6aff, 0x1, 0x0);
        gbc.writeMem(0x96f7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd303);
        EXPECT(gbc.pc(), 0x96f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f7), 0xcb);
        EXPECT(gbc.readMem(0x96f8), 0x4b);
        // CB 4B 0178
        gbc.setState(0x91d0, 0x394c, 0x8f60, 0xa76e, 0x862a, 0x69c4, 0x0, 0x1);
        gbc.writeMem(0x91d0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x394c);
        EXPECT(gbc.pc(), 0x91d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91d0), 0xcb);
        EXPECT(gbc.readMem(0x91d1), 0x4b);
        // CB 4B 0179
        gbc.setState(0x1c1, 0x7ec6, 0xd950, 0xbca9, 0x3b5, 0xb802, 0x0, 0x1);
        gbc.writeMem(0x1c1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7ec6);
        EXPECT(gbc.pc(), 0x1c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 017A
        gbc.setState(0xdd4, 0x52, 0xad90, 0x2f13, 0x72a2, 0x68eb, 0x0, 0x1);
        gbc.writeMem(0xdd4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x52);
        EXPECT(gbc.pc(), 0xdd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 017B
        gbc.setState(0x9e7f, 0x72e, 0xeea0, 0xa997, 0x7681, 0x8047, 0x0, 0x1);
        gbc.writeMem(0x9e7f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x72e);
        EXPECT(gbc.pc(), 0x9e81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e7f), 0xcb);
        EXPECT(gbc.readMem(0x9e80), 0x4b);
        // CB 4B 017C
        gbc.setState(0x22cb, 0x123a, 0x1650, 0x6a4e, 0x9579, 0x400e, 0x0, 0x1);
        gbc.writeMem(0x22cb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x123a);
        EXPECT(gbc.pc(), 0x22cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 017D
        gbc.setState(0xb041, 0xd173, 0x89e0, 0x2d6f, 0x65b3, 0x84e4, 0x1, 0x1);
        gbc.writeMem(0xb041, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd173);
        EXPECT(gbc.pc(), 0xb043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb041), 0xcb);
        EXPECT(gbc.readMem(0xb042), 0x4b);
        // CB 4B 017E
        gbc.setState(0x9cf6, 0xca48, 0xaa80, 0xbcb9, 0x78a5, 0x9e94, 0x0, 0x1);
        gbc.writeMem(0x9cf6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xca48);
        EXPECT(gbc.pc(), 0x9cf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf6), 0xcb);
        EXPECT(gbc.readMem(0x9cf7), 0x4b);
        // CB 4B 017F
        gbc.setState(0x38f0, 0x2522, 0x38b0, 0xadb2, 0xbd54, 0x610d, 0x1, 0x1);
        gbc.writeMem(0x38f0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2522);
        EXPECT(gbc.pc(), 0x38f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0180
        gbc.setState(0x2d68, 0x945c, 0xe510, 0x35a3, 0x393c, 0x3825, 0x1, 0x1);
        gbc.writeMem(0x2d68, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x945c);
        EXPECT(gbc.pc(), 0x2d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0183
        gbc.setState(0x6c3a, 0x2de8, 0xb730, 0xeef6, 0x1bc9, 0x3d4e, 0x0, 0x0);
        gbc.writeMem(0x6c3a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2de8);
        EXPECT(gbc.pc(), 0x6c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0184
        gbc.setState(0x555b, 0xa412, 0x2780, 0x7391, 0x421c, 0x595a, 0x0, 0x0);
        gbc.writeMem(0x555b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa412);
        EXPECT(gbc.pc(), 0x555d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0185
        gbc.setState(0x453a, 0x305d, 0xdde0, 0x709f, 0x41ff, 0xdd83, 0x1, 0x1);
        gbc.writeMem(0x453a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x305d);
        EXPECT(gbc.pc(), 0x453c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0186
        gbc.setState(0xe781, 0xd556, 0xa70, 0x4c58, 0x8026, 0xb8b7, 0x0, 0x0);
        gbc.writeMem(0xe781, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd556);
        EXPECT(gbc.pc(), 0xe783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe781), 0xcb);
        EXPECT(gbc.readMem(0xe782), 0x4b);
        // CB 4B 0187
        gbc.setState(0xee52, 0x3c48, 0x3f30, 0x8bfa, 0x2c0e, 0x448c, 0x0, 0x0);
        gbc.writeMem(0xee52, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3c48);
        EXPECT(gbc.pc(), 0xee54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee52), 0xcb);
        EXPECT(gbc.readMem(0xee53), 0x4b);
        // CB 4B 0188
        gbc.setState(0x2bf5, 0xf48e, 0xe430, 0xa49e, 0xee72, 0xaa, 0x1, 0x1);
        gbc.writeMem(0x2bf5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf48e);
        EXPECT(gbc.pc(), 0x2bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0189
        gbc.setState(0xd20, 0x3e91, 0x3230, 0x9266, 0xe1cb, 0x8e5f, 0x0, 0x0);
        gbc.writeMem(0xd20, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3e91);
        EXPECT(gbc.pc(), 0xd22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 018A
        gbc.setState(0x740c, 0x7bd6, 0xcbc0, 0xddae, 0xaec2, 0xaa61, 0x1, 0x1);
        gbc.writeMem(0x740c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7bd6);
        EXPECT(gbc.pc(), 0x740e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 018B
        gbc.setState(0xa758, 0x13ce, 0xe330, 0xdfdd, 0x1324, 0x2ea6, 0x1, 0x0);
        gbc.writeMem(0xa758, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x13ce);
        EXPECT(gbc.pc(), 0xa75a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa758), 0xcb);
        EXPECT(gbc.readMem(0xa759), 0x4b);
        // CB 4B 018C
        gbc.setState(0x84c8, 0x24f, 0x23e0, 0x4a68, 0x6835, 0xa18e, 0x1, 0x0);
        gbc.writeMem(0x84c8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x24f);
        EXPECT(gbc.pc(), 0x84ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c8), 0xcb);
        EXPECT(gbc.readMem(0x84c9), 0x4b);
        // CB 4B 018D
        gbc.setState(0xe3b7, 0x7e3b, 0x4340, 0x996d, 0x49e4, 0x1e3b, 0x1, 0x1);
        gbc.writeMem(0xe3b7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7e3b);
        EXPECT(gbc.pc(), 0xe3b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b7), 0xcb);
        EXPECT(gbc.readMem(0xe3b8), 0x4b);
        // CB 4B 018E
        gbc.setState(0xd9e4, 0x7600, 0xdfe0, 0xebf7, 0xcc27, 0x580d, 0x1, 0x1);
        gbc.writeMem(0xd9e4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7600);
        EXPECT(gbc.pc(), 0xd9e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e4), 0xcb);
        EXPECT(gbc.readMem(0xd9e5), 0x4b);
        // CB 4B 0190
        gbc.setState(0xb3e2, 0xbd2b, 0x1db0, 0xbd82, 0xc992, 0xda3e, 0x0, 0x1);
        gbc.writeMem(0xb3e2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xbd2b);
        EXPECT(gbc.pc(), 0xb3e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e2), 0xcb);
        EXPECT(gbc.readMem(0xb3e3), 0x4b);
        // CB 4B 0191
        gbc.setState(0x221, 0x1340, 0x5d40, 0x2690, 0xa92c, 0x8824, 0x1, 0x0);
        gbc.writeMem(0x221, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1340);
        EXPECT(gbc.pc(), 0x223);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0192
        gbc.setState(0x6c1a, 0x3676, 0xc7c0, 0x484f, 0xc53b, 0x89d7, 0x1, 0x1);
        gbc.writeMem(0x6c1a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3676);
        EXPECT(gbc.pc(), 0x6c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0193
        gbc.setState(0xa76b, 0xf09, 0x3e50, 0x7a24, 0x7afe, 0xc81b, 0x0, 0x0);
        gbc.writeMem(0xa76b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf09);
        EXPECT(gbc.pc(), 0xa76d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76b), 0xcb);
        EXPECT(gbc.readMem(0xa76c), 0x4b);
        // CB 4B 0194
        gbc.setState(0x991f, 0xa4fc, 0xa780, 0x4e2a, 0x2ad1, 0xc370, 0x0, 0x0);
        gbc.writeMem(0x991f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa4fc);
        EXPECT(gbc.pc(), 0x9921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991f), 0xcb);
        EXPECT(gbc.readMem(0x9920), 0x4b);
        // CB 4B 0195
        gbc.setState(0x648f, 0x5f64, 0x52b0, 0x4711, 0x2f24, 0xa3c2, 0x0, 0x0);
        gbc.writeMem(0x648f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5f64);
        EXPECT(gbc.pc(), 0x6491);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0196
        gbc.setState(0xb152, 0xd009, 0xcef0, 0xb0d9, 0x909, 0xdcb, 0x1, 0x1);
        gbc.writeMem(0xb152, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd009);
        EXPECT(gbc.pc(), 0xb154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb152), 0xcb);
        EXPECT(gbc.readMem(0xb153), 0x4b);
        // CB 4B 0197
        gbc.setState(0x4e1e, 0x4115, 0x5be0, 0x7df7, 0x84e4, 0x3e26, 0x0, 0x0);
        gbc.writeMem(0x4e1e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4115);
        EXPECT(gbc.pc(), 0x4e20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0198
        gbc.setState(0xb39f, 0x6754, 0xb910, 0x4e57, 0xbe5c, 0x3eb0, 0x1, 0x0);
        gbc.writeMem(0xb39f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6754);
        EXPECT(gbc.pc(), 0xb3a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb39f), 0xcb);
        EXPECT(gbc.readMem(0xb3a0), 0x4b);
        // CB 4B 0199
        gbc.setState(0x6872, 0x2460, 0xdbd0, 0x75fd, 0x184f, 0xbaf8, 0x0, 0x0);
        gbc.writeMem(0x6872, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2460);
        EXPECT(gbc.pc(), 0x6874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 019A
        gbc.setState(0xbf03, 0x6a83, 0x5330, 0xca5f, 0x7fd4, 0x904c, 0x1, 0x1);
        gbc.writeMem(0xbf03, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6a83);
        EXPECT(gbc.pc(), 0xbf05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf03), 0xcb);
        EXPECT(gbc.readMem(0xbf04), 0x4b);
        // CB 4B 019B
        gbc.setState(0x5819, 0xba1f, 0x9fd0, 0xdb01, 0xaf82, 0x37fc, 0x0, 0x0);
        gbc.writeMem(0x5819, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xba1f);
        EXPECT(gbc.pc(), 0x581b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 019C
        gbc.setState(0xc2bc, 0xe954, 0x72a0, 0x599f, 0x5ae1, 0xdf2a, 0x1, 0x0);
        gbc.writeMem(0xc2bc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe954);
        EXPECT(gbc.pc(), 0xc2be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2bc), 0xcb);
        EXPECT(gbc.readMem(0xc2bd), 0x4b);
        // CB 4B 019D
        gbc.setState(0x4a6a, 0x9790, 0xcd40, 0xc1f5, 0xeabf, 0x303f, 0x0, 0x1);
        gbc.writeMem(0x4a6a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9790);
        EXPECT(gbc.pc(), 0x4a6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 019E
        gbc.setState(0xd888, 0xcfe5, 0xe1d0, 0x8b3f, 0xd2c4, 0xcdc5, 0x0, 0x0);
        gbc.writeMem(0xd888, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xcfe5);
        EXPECT(gbc.pc(), 0xd88a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd888), 0xcb);
        EXPECT(gbc.readMem(0xd889), 0x4b);
        // CB 4B 019F
        gbc.setState(0xeb43, 0x7717, 0xb7e0, 0xc5fa, 0xb828, 0xc12f, 0x1, 0x0);
        gbc.writeMem(0xeb43, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7717);
        EXPECT(gbc.pc(), 0xeb45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb43), 0xcb);
        EXPECT(gbc.readMem(0xeb44), 0x4b);
        // CB 4B 01A0
        gbc.setState(0x25a9, 0x2a98, 0xf30, 0x6041, 0xf2d7, 0xce3c, 0x0, 0x1);
        gbc.writeMem(0x25a9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2a98);
        EXPECT(gbc.pc(), 0x25ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01A1
        gbc.setState(0x8f64, 0x6a6a, 0x78d0, 0x16fc, 0xf240, 0x441c, 0x1, 0x1);
        gbc.writeMem(0x8f64, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6a6a);
        EXPECT(gbc.pc(), 0x8f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f64), 0xcb);
        EXPECT(gbc.readMem(0x8f65), 0x4b);
        // CB 4B 01A2
        gbc.setState(0x7d62, 0xd02, 0xa190, 0x9812, 0x9298, 0x2343, 0x0, 0x1);
        gbc.writeMem(0x7d62, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd02);
        EXPECT(gbc.pc(), 0x7d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01A3
        gbc.setState(0xd739, 0x7dea, 0x1120, 0xa057, 0x3da5, 0x5e10, 0x0, 0x1);
        gbc.writeMem(0xd739, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7dea);
        EXPECT(gbc.pc(), 0xd73b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd739), 0xcb);
        EXPECT(gbc.readMem(0xd73a), 0x4b);
        // CB 4B 01A4
        gbc.setState(0x8522, 0xdadc, 0x9ec0, 0x1c83, 0xc982, 0x44cb, 0x0, 0x1);
        gbc.writeMem(0x8522, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xdadc);
        EXPECT(gbc.pc(), 0x8524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8522), 0xcb);
        EXPECT(gbc.readMem(0x8523), 0x4b);
        // CB 4B 01A5
        gbc.setState(0xe9ac, 0x2e62, 0xab30, 0x4385, 0xd5f7, 0x953d, 0x0, 0x0);
        gbc.writeMem(0xe9ac, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2e62);
        EXPECT(gbc.pc(), 0xe9ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9ac), 0xcb);
        EXPECT(gbc.readMem(0xe9ad), 0x4b);
        // CB 4B 01A6
        gbc.setState(0xada8, 0x2924, 0x1b60, 0x1776, 0x779f, 0x9af5, 0x1, 0x1);
        gbc.writeMem(0xada8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2924);
        EXPECT(gbc.pc(), 0xadaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada8), 0xcb);
        EXPECT(gbc.readMem(0xada9), 0x4b);
        // CB 4B 01A7
        gbc.setState(0xec43, 0x7d73, 0x2210, 0xcc90, 0xbec3, 0xa5a9, 0x0, 0x1);
        gbc.writeMem(0xec43, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7d73);
        EXPECT(gbc.pc(), 0xec45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec43), 0xcb);
        EXPECT(gbc.readMem(0xec44), 0x4b);
        // CB 4B 01A8
        gbc.setState(0xed57, 0xc8b9, 0x47b0, 0x3ba8, 0x1845, 0x7fab, 0x1, 0x1);
        gbc.writeMem(0xed57, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0xed59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed57), 0xcb);
        EXPECT(gbc.readMem(0xed58), 0x4b);
        // CB 4B 01A9
        gbc.setState(0xe93, 0x9621, 0xcdd0, 0x48f8, 0xdd99, 0x8bbc, 0x1, 0x1);
        gbc.writeMem(0xe93, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9621);
        EXPECT(gbc.pc(), 0xe95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01AA
        gbc.setState(0x1c88, 0xa9ab, 0xbd30, 0xc207, 0x768, 0x69f0, 0x1, 0x1);
        gbc.writeMem(0x1c88, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa9ab);
        EXPECT(gbc.pc(), 0x1c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01AC
        gbc.setState(0x44ed, 0x1292, 0xb880, 0x32ed, 0xcacf, 0xb895, 0x1, 0x1);
        gbc.writeMem(0x44ed, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1292);
        EXPECT(gbc.pc(), 0x44ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01AD
        gbc.setState(0x9950, 0xb7ae, 0xb640, 0x537d, 0x38aa, 0x6a1d, 0x0, 0x0);
        gbc.writeMem(0x9950, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb7ae);
        EXPECT(gbc.pc(), 0x9952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9950), 0xcb);
        EXPECT(gbc.readMem(0x9951), 0x4b);
        // CB 4B 01AE
        gbc.setState(0x63cc, 0xb715, 0xdf50, 0x4963, 0x4d8f, 0xf4e3, 0x1, 0x0);
        gbc.writeMem(0x63cc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb715);
        EXPECT(gbc.pc(), 0x63ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01AF
        gbc.setState(0x4237, 0x12de, 0x2b80, 0x853, 0x8969, 0xb99f, 0x1, 0x0);
        gbc.writeMem(0x4237, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x12de);
        EXPECT(gbc.pc(), 0x4239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01B0
        gbc.setState(0xc610, 0xff67, 0x2e00, 0x957e, 0xe9b1, 0xd517, 0x0, 0x0);
        gbc.writeMem(0xc610, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xff67);
        EXPECT(gbc.pc(), 0xc612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc610), 0xcb);
        EXPECT(gbc.readMem(0xc611), 0x4b);
        // CB 4B 01B1
        gbc.setState(0x20dd, 0x4bd, 0xa4d0, 0x5d69, 0x205c, 0x7515, 0x1, 0x1);
        gbc.writeMem(0x20dd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4bd);
        EXPECT(gbc.pc(), 0x20df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01B3
        gbc.setState(0xb34f, 0x9364, 0x1630, 0x3aeb, 0xec41, 0x4038, 0x1, 0x0);
        gbc.writeMem(0xb34f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9364);
        EXPECT(gbc.pc(), 0xb351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb34f), 0xcb);
        EXPECT(gbc.readMem(0xb350), 0x4b);
        // CB 4B 01B4
        gbc.setState(0x489f, 0x6145, 0x40, 0x870e, 0xee7f, 0xabf9, 0x0, 0x0);
        gbc.writeMem(0x489f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6145);
        EXPECT(gbc.pc(), 0x48a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01B5
        gbc.setState(0xdcd3, 0xf416, 0x6570, 0xcd7d, 0x40be, 0xddc, 0x1, 0x0);
        gbc.writeMem(0xdcd3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf416);
        EXPECT(gbc.pc(), 0xdcd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcd3), 0xcb);
        EXPECT(gbc.readMem(0xdcd4), 0x4b);
        // CB 4B 01B6
        gbc.setState(0xd5cd, 0xd729, 0xdbf0, 0xff15, 0x6e4a, 0xfa5e, 0x0, 0x0);
        gbc.writeMem(0xd5cd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd729);
        EXPECT(gbc.pc(), 0xd5cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5cd), 0xcb);
        EXPECT(gbc.readMem(0xd5ce), 0x4b);
        // CB 4B 01B7
        gbc.setState(0xe793, 0x6d30, 0xee50, 0xbb4a, 0xf258, 0x2af9, 0x1, 0x0);
        gbc.writeMem(0xe793, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6d30);
        EXPECT(gbc.pc(), 0xe795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe793), 0xcb);
        EXPECT(gbc.readMem(0xe794), 0x4b);
        // CB 4B 01B8
        gbc.setState(0x1922, 0x6533, 0x5c10, 0x6d0b, 0xd716, 0x5604, 0x1, 0x0);
        gbc.writeMem(0x1922, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6533);
        EXPECT(gbc.pc(), 0x1924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01B9
        gbc.setState(0xc8de, 0x468e, 0x4d0, 0xfaf2, 0x3fc0, 0xcbd1, 0x1, 0x0);
        gbc.writeMem(0xc8de, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x468e);
        EXPECT(gbc.pc(), 0xc8e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8de), 0xcb);
        EXPECT(gbc.readMem(0xc8df), 0x4b);
        // CB 4B 01BA
        gbc.setState(0xbdba, 0x170a, 0x98b0, 0x3ce1, 0xc64f, 0xb81b, 0x0, 0x1);
        gbc.writeMem(0xbdba, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x170a);
        EXPECT(gbc.pc(), 0xbdbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdba), 0xcb);
        EXPECT(gbc.readMem(0xbdbb), 0x4b);
        // CB 4B 01BB
        gbc.setState(0x9f7, 0xba3d, 0x5890, 0x1421, 0xc017, 0x3e4a, 0x1, 0x1);
        gbc.writeMem(0x9f7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xba3d);
        EXPECT(gbc.pc(), 0x9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01BC
        gbc.setState(0x6647, 0x5445, 0x3180, 0x5bf3, 0xb598, 0x7078, 0x0, 0x1);
        gbc.writeMem(0x6647, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5445);
        EXPECT(gbc.pc(), 0x6649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01BD
        gbc.setState(0x308d, 0xc0d4, 0xd5b0, 0x9e31, 0x77c6, 0x233c, 0x1, 0x1);
        gbc.writeMem(0x308d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc0d4);
        EXPECT(gbc.pc(), 0x308f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01BE
        gbc.setState(0x1ccd, 0x9590, 0xef30, 0x665b, 0x77a1, 0xf595, 0x1, 0x0);
        gbc.writeMem(0x1ccd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9590);
        EXPECT(gbc.pc(), 0x1ccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01BF
        gbc.setState(0x5241, 0x54f3, 0x6a70, 0x6e90, 0x2597, 0xdf20, 0x0, 0x1);
        gbc.writeMem(0x5241, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x54f3);
        EXPECT(gbc.pc(), 0x5243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01C0
        gbc.setState(0xb241, 0x1c7a, 0xa4a0, 0xe62d, 0x54dd, 0x6057, 0x0, 0x0);
        gbc.writeMem(0xb241, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1c7a);
        EXPECT(gbc.pc(), 0xb243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb241), 0xcb);
        EXPECT(gbc.readMem(0xb242), 0x4b);
        // CB 4B 01C1
        gbc.setState(0x6555, 0xc6d7, 0x46b0, 0x11e3, 0x1b2b, 0x816d, 0x0, 0x0);
        gbc.writeMem(0x6555, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc6d7);
        EXPECT(gbc.pc(), 0x6557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01C2
        gbc.setState(0x9674, 0x907a, 0x6580, 0x1d03, 0x5a7a, 0xf397, 0x1, 0x0);
        gbc.writeMem(0x9674, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x907a);
        EXPECT(gbc.pc(), 0x9676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9674), 0xcb);
        EXPECT(gbc.readMem(0x9675), 0x4b);
        // CB 4B 01C3
        gbc.setState(0x64c5, 0x34d3, 0x22e0, 0xe546, 0x39d7, 0xf519, 0x1, 0x1);
        gbc.writeMem(0x64c5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x34d3);
        EXPECT(gbc.pc(), 0x64c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01C4
        gbc.setState(0xcfdb, 0xa6f, 0x4260, 0x1dbd, 0xe0c1, 0x2745, 0x1, 0x0);
        gbc.writeMem(0xcfdb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa6f);
        EXPECT(gbc.pc(), 0xcfdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfdb), 0xcb);
        EXPECT(gbc.readMem(0xcfdc), 0x4b);
        // CB 4B 01C5
        gbc.setState(0xbdac, 0x1a97, 0x450, 0xe51b, 0xa120, 0x8c60, 0x1, 0x0);
        gbc.writeMem(0xbdac, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1a97);
        EXPECT(gbc.pc(), 0xbdae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdac), 0xcb);
        EXPECT(gbc.readMem(0xbdad), 0x4b);
        // CB 4B 01C6
        gbc.setState(0x2ea, 0x2ab6, 0x50d0, 0xb40e, 0x540d, 0xc976, 0x1, 0x1);
        gbc.writeMem(0x2ea, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2ab6);
        EXPECT(gbc.pc(), 0x2ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01C7
        gbc.setState(0x4c17, 0x633b, 0x40f0, 0xb578, 0xc128, 0x4e61, 0x0, 0x0);
        gbc.writeMem(0x4c17, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x633b);
        EXPECT(gbc.pc(), 0x4c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01C8
        gbc.setState(0xdf2b, 0x4572, 0x95d0, 0x3474, 0x3a2a, 0x75a2, 0x1, 0x0);
        gbc.writeMem(0xdf2b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4572);
        EXPECT(gbc.pc(), 0xdf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2b), 0xcb);
        EXPECT(gbc.readMem(0xdf2c), 0x4b);
        // CB 4B 01C9
        gbc.setState(0xdc5b, 0xdfce, 0xc420, 0xef8b, 0xfd4c, 0xe97b, 0x0, 0x0);
        gbc.writeMem(0xdc5b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xdfce);
        EXPECT(gbc.pc(), 0xdc5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc5b), 0xcb);
        EXPECT(gbc.readMem(0xdc5c), 0x4b);
        // CB 4B 01CA
        gbc.setState(0xe550, 0x8959, 0x7da0, 0xa199, 0xffa, 0x8718, 0x0, 0x1);
        gbc.writeMem(0xe550, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8959);
        EXPECT(gbc.pc(), 0xe552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe550), 0xcb);
        EXPECT(gbc.readMem(0xe551), 0x4b);
        // CB 4B 01CB
        gbc.setState(0x6e8b, 0x108c, 0xc910, 0xcad5, 0x862a, 0x97be, 0x0, 0x0);
        gbc.writeMem(0x6e8b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x108c);
        EXPECT(gbc.pc(), 0x6e8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01CC
        gbc.setState(0x213b, 0x1f30, 0xc910, 0xb781, 0xf388, 0x97b3, 0x0, 0x1);
        gbc.writeMem(0x213b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1f30);
        EXPECT(gbc.pc(), 0x213d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01CD
        gbc.setState(0xe2df, 0xddb5, 0x86d0, 0x7978, 0x7071, 0x2b34, 0x0, 0x0);
        gbc.writeMem(0xe2df, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xddb5);
        EXPECT(gbc.pc(), 0xe2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2df), 0xcb);
        EXPECT(gbc.readMem(0xe2e0), 0x4b);
        // CB 4B 01CF
        gbc.setState(0x4b04, 0x4713, 0x1e20, 0x6ab1, 0x4b12, 0xddd, 0x0, 0x1);
        gbc.writeMem(0x4b04, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4713);
        EXPECT(gbc.pc(), 0x4b06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01D0
        gbc.setState(0xb537, 0xec6, 0xcf10, 0x1d72, 0x17f, 0x3ca3, 0x0, 0x1);
        gbc.writeMem(0xb537, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xec6);
        EXPECT(gbc.pc(), 0xb539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb537), 0xcb);
        EXPECT(gbc.readMem(0xb538), 0x4b);
        // CB 4B 01D1
        gbc.setState(0x5d8d, 0x2aa1, 0xcd60, 0x2d33, 0xd081, 0xa1f4, 0x1, 0x0);
        gbc.writeMem(0x5d8d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2aa1);
        EXPECT(gbc.pc(), 0x5d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01D2
        gbc.setState(0x43a0, 0x2710, 0x7f00, 0x2503, 0x2735, 0x25f6, 0x1, 0x1);
        gbc.writeMem(0x43a0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2710);
        EXPECT(gbc.pc(), 0x43a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01D3
        gbc.setState(0xdb3e, 0xec2b, 0xdf0, 0x5164, 0xc4d, 0x6eec, 0x0, 0x1);
        gbc.writeMem(0xdb3e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xec2b);
        EXPECT(gbc.pc(), 0xdb40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb3e), 0xcb);
        EXPECT(gbc.readMem(0xdb3f), 0x4b);
        // CB 4B 01D5
        gbc.setState(0x921a, 0x6e71, 0x4050, 0x9775, 0x3664, 0x9288, 0x1, 0x1);
        gbc.writeMem(0x921a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6e71);
        EXPECT(gbc.pc(), 0x921c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x921a), 0xcb);
        EXPECT(gbc.readMem(0x921b), 0x4b);
        // CB 4B 01D6
        gbc.setState(0xdd1a, 0x8f84, 0x350, 0x3052, 0x17f1, 0x8c9c, 0x1, 0x1);
        gbc.writeMem(0xdd1a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8f84);
        EXPECT(gbc.pc(), 0xdd1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd1a), 0xcb);
        EXPECT(gbc.readMem(0xdd1b), 0x4b);
        // CB 4B 01D7
        gbc.setState(0x429d, 0x8ded, 0xdba0, 0x60de, 0x4e35, 0x70cf, 0x0, 0x1);
        gbc.writeMem(0x429d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8ded);
        EXPECT(gbc.pc(), 0x429f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01D8
        gbc.setState(0x6e85, 0x2774, 0x8970, 0xbb24, 0x4e89, 0x9d66, 0x0, 0x1);
        gbc.writeMem(0x6e85, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2774);
        EXPECT(gbc.pc(), 0x6e87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01D9
        gbc.setState(0x79be, 0x31a8, 0xfe60, 0x5f0c, 0xe784, 0x6503, 0x1, 0x1);
        gbc.writeMem(0x79be, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x31a8);
        EXPECT(gbc.pc(), 0x79c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01DA
        gbc.setState(0x8798, 0x4a6b, 0x6c50, 0x6ce7, 0x87d3, 0x7277, 0x0, 0x1);
        gbc.writeMem(0x8798, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4a6b);
        EXPECT(gbc.pc(), 0x879a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8798), 0xcb);
        EXPECT(gbc.readMem(0x8799), 0x4b);
        // CB 4B 01DB
        gbc.setState(0x849e, 0x6ba9, 0x6d90, 0xbcde, 0x4b5a, 0xe55b, 0x0, 0x1);
        gbc.writeMem(0x849e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6ba9);
        EXPECT(gbc.pc(), 0x84a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x849e), 0xcb);
        EXPECT(gbc.readMem(0x849f), 0x4b);
        // CB 4B 01DC
        gbc.setState(0x5fe4, 0xcb94, 0x6270, 0x20a1, 0x8eaf, 0x1108, 0x1, 0x0);
        gbc.writeMem(0x5fe4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcb94);
        EXPECT(gbc.pc(), 0x5fe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01DD
        gbc.setState(0x203e, 0x2f90, 0xb3d0, 0xea0e, 0x1271, 0xff33, 0x0, 0x1);
        gbc.writeMem(0x203e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2f90);
        EXPECT(gbc.pc(), 0x2040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01DE
        gbc.setState(0x4c88, 0x3ba7, 0xc1d0, 0x8206, 0x92ff, 0xae11, 0x1, 0x0);
        gbc.writeMem(0x4c88, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3ba7);
        EXPECT(gbc.pc(), 0x4c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01DF
        gbc.setState(0xec7d, 0x8104, 0x2020, 0x9d6b, 0xb32f, 0x165a, 0x1, 0x1);
        gbc.writeMem(0xec7d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8104);
        EXPECT(gbc.pc(), 0xec7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7d), 0xcb);
        EXPECT(gbc.readMem(0xec7e), 0x4b);
        // CB 4B 01E0
        gbc.setState(0xe9f6, 0x7a52, 0xb130, 0x6b47, 0x501, 0x7af2, 0x1, 0x1);
        gbc.writeMem(0xe9f6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7a52);
        EXPECT(gbc.pc(), 0xe9f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f6), 0xcb);
        EXPECT(gbc.readMem(0xe9f7), 0x4b);
        // CB 4B 01E1
        gbc.setState(0x13cb, 0x89a6, 0xa060, 0xbf48, 0xb783, 0xac9a, 0x0, 0x1);
        gbc.writeMem(0x13cb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x89a6);
        EXPECT(gbc.pc(), 0x13cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01E2
        gbc.setState(0x454f, 0x9400, 0x5e90, 0x8405, 0x9ed4, 0x7053, 0x0, 0x0);
        gbc.writeMem(0x454f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9400);
        EXPECT(gbc.pc(), 0x4551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01E3
        gbc.setState(0x9f6, 0x9279, 0xf770, 0x3d86, 0xdf0, 0xbbe7, 0x0, 0x0);
        gbc.writeMem(0x9f6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9279);
        EXPECT(gbc.pc(), 0x9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01E4
        gbc.setState(0x6d0d, 0x58fc, 0x830, 0x160c, 0x4ef3, 0xae87, 0x1, 0x1);
        gbc.writeMem(0x6d0d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x58fc);
        EXPECT(gbc.pc(), 0x6d0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01E5
        gbc.setState(0x9247, 0x6662, 0x3ac0, 0x14cf, 0x37db, 0xca08, 0x1, 0x1);
        gbc.writeMem(0x9247, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6662);
        EXPECT(gbc.pc(), 0x9249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9247), 0xcb);
        EXPECT(gbc.readMem(0x9248), 0x4b);
        // CB 4B 01E6
        gbc.setState(0x2892, 0xb12c, 0xf3f0, 0xbb5d, 0xe0e4, 0xb458, 0x0, 0x1);
        gbc.writeMem(0x2892, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb12c);
        EXPECT(gbc.pc(), 0x2894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01E7
        gbc.setState(0x851d, 0x942c, 0x4560, 0xef1, 0xaadb, 0x559e, 0x0, 0x0);
        gbc.writeMem(0x851d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x942c);
        EXPECT(gbc.pc(), 0x851f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x851d), 0xcb);
        EXPECT(gbc.readMem(0x851e), 0x4b);
        // CB 4B 01E8
        gbc.setState(0x3c2a, 0xbd38, 0x4a90, 0x88bd, 0x8c0d, 0x80af, 0x1, 0x0);
        gbc.writeMem(0x3c2a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xbd38);
        EXPECT(gbc.pc(), 0x3c2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01E9
        gbc.setState(0x7511, 0x7920, 0x3800, 0x8123, 0x70bc, 0x304a, 0x1, 0x0);
        gbc.writeMem(0x7511, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7920);
        EXPECT(gbc.pc(), 0x7513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01EA
        gbc.setState(0xc11d, 0xac06, 0xdca0, 0x9235, 0x4d00, 0x15cf, 0x0, 0x0);
        gbc.writeMem(0xc11d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xac06);
        EXPECT(gbc.pc(), 0xc11f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11d), 0xcb);
        EXPECT(gbc.readMem(0xc11e), 0x4b);
        // CB 4B 01EB
        gbc.setState(0x52e6, 0xd81, 0x6ab0, 0xf86c, 0xf75c, 0x5429, 0x1, 0x1);
        gbc.writeMem(0x52e6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd81);
        EXPECT(gbc.pc(), 0x52e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01EC
        gbc.setState(0x2a4d, 0xced, 0xfe20, 0x8ba2, 0xdaa3, 0xd996, 0x1, 0x0);
        gbc.writeMem(0x2a4d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xced);
        EXPECT(gbc.pc(), 0x2a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01ED
        gbc.setState(0x6a5e, 0xfbcd, 0xe890, 0xd2ec, 0x885b, 0x3c60, 0x1, 0x1);
        gbc.writeMem(0x6a5e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xfbcd);
        EXPECT(gbc.pc(), 0x6a60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01EE
        gbc.setState(0x110, 0x89b3, 0x5780, 0xa011, 0x48ff, 0xacdc, 0x0, 0x0);
        gbc.writeMem(0x110, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x89b3);
        EXPECT(gbc.pc(), 0x112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01EF
        gbc.setState(0xa191, 0x7828, 0x3300, 0x9d77, 0xb445, 0xacfa, 0x1, 0x1);
        gbc.writeMem(0xa191, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7828);
        EXPECT(gbc.pc(), 0xa193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa191), 0xcb);
        EXPECT(gbc.readMem(0xa192), 0x4b);
        // CB 4B 01F0
        gbc.setState(0x9e79, 0x9dfa, 0xa00, 0xbfc6, 0x1c12, 0x311b, 0x1, 0x1);
        gbc.writeMem(0x9e79, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9dfa);
        EXPECT(gbc.pc(), 0x9e7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e79), 0xcb);
        EXPECT(gbc.readMem(0x9e7a), 0x4b);
        // CB 4B 01F1
        gbc.setState(0x5d00, 0x248b, 0x6f30, 0xe9cc, 0x7f85, 0x59c2, 0x0, 0x0);
        gbc.writeMem(0x5d00, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x248b);
        EXPECT(gbc.pc(), 0x5d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01F2
        gbc.setState(0x47e4, 0xe8e2, 0xb940, 0x65f6, 0x1d5, 0x1064, 0x1, 0x1);
        gbc.writeMem(0x47e4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe8e2);
        EXPECT(gbc.pc(), 0x47e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01F3
        gbc.setState(0x6376, 0xaac0, 0xf790, 0x2bbb, 0x736a, 0x548e, 0x1, 0x1);
        gbc.writeMem(0x6376, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xaac0);
        EXPECT(gbc.pc(), 0x6378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01F4
        gbc.setState(0xeb0e, 0x83b1, 0x47c0, 0xf865, 0x4202, 0xde7b, 0x0, 0x0);
        gbc.writeMem(0xeb0e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x83b1);
        EXPECT(gbc.pc(), 0xeb10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb0e), 0xcb);
        EXPECT(gbc.readMem(0xeb0f), 0x4b);
        // CB 4B 01F5
        gbc.setState(0x3ae0, 0x74d0, 0xdf80, 0xfa8a, 0x7eb3, 0x8c4, 0x1, 0x0);
        gbc.writeMem(0x3ae0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x74d0);
        EXPECT(gbc.pc(), 0x3ae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01F6
        gbc.setState(0x91ed, 0x89a5, 0xb470, 0xec95, 0x6641, 0x898f, 0x0, 0x0);
        gbc.writeMem(0x91ed, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x89a5);
        EXPECT(gbc.pc(), 0x91ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ed), 0xcb);
        EXPECT(gbc.readMem(0x91ee), 0x4b);
        // CB 4B 01F7
        gbc.setState(0xc80e, 0x14d, 0xe3a0, 0x56e4, 0x795c, 0x9d2d, 0x0, 0x0);
        gbc.writeMem(0xc80e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x14d);
        EXPECT(gbc.pc(), 0xc810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc80e), 0xcb);
        EXPECT(gbc.readMem(0xc80f), 0x4b);
        // CB 4B 01F8
        gbc.setState(0xe2c4, 0x3499, 0x96f0, 0xce65, 0xd96a, 0x105d, 0x0, 0x1);
        gbc.writeMem(0xe2c4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3499);
        EXPECT(gbc.pc(), 0xe2c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c4), 0xcb);
        EXPECT(gbc.readMem(0xe2c5), 0x4b);
        // CB 4B 01F9
        gbc.setState(0x9a8c, 0x493f, 0xcc40, 0xf13b, 0x34c2, 0x5ef7, 0x1, 0x1);
        gbc.writeMem(0x9a8c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x493f);
        EXPECT(gbc.pc(), 0x9a8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a8c), 0xcb);
        EXPECT(gbc.readMem(0x9a8d), 0x4b);
        // CB 4B 01FA
        gbc.setState(0x9a3f, 0x5a7f, 0x3c80, 0x15f6, 0x4a63, 0x427d, 0x0, 0x1);
        gbc.writeMem(0x9a3f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5a7f);
        EXPECT(gbc.pc(), 0x9a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a3f), 0xcb);
        EXPECT(gbc.readMem(0x9a40), 0x4b);
        // CB 4B 01FB
        gbc.setState(0x6542, 0xd397, 0x4b60, 0xee84, 0x513a, 0x92f5, 0x0, 0x0);
        gbc.writeMem(0x6542, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd397);
        EXPECT(gbc.pc(), 0x6544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 01FC
        gbc.setState(0x5af2, 0xd2e8, 0x7090, 0x5a61, 0xc03d, 0xcfc3, 0x1, 0x0);
        gbc.writeMem(0x5af2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd2e8);
        EXPECT(gbc.pc(), 0x5af4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01FD
        gbc.setState(0x1c37, 0x1c4c, 0x7b70, 0x1f71, 0x4c95, 0x4afc, 0x0, 0x0);
        gbc.writeMem(0x1c37, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1c4c);
        EXPECT(gbc.pc(), 0x1c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 01FE
        gbc.setState(0xa8d0, 0xb25a, 0x63d0, 0xef06, 0xf68e, 0x7ba5, 0x1, 0x0);
        gbc.writeMem(0xa8d0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb25a);
        EXPECT(gbc.pc(), 0xa8d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d0), 0xcb);
        EXPECT(gbc.readMem(0xa8d1), 0x4b);
        // CB 4B 01FF
        gbc.setState(0xdfe2, 0x7e5c, 0xbe10, 0x14d7, 0xec0d, 0xaa4b, 0x1, 0x0);
        gbc.writeMem(0xdfe2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7e5c);
        EXPECT(gbc.pc(), 0xdfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe2), 0xcb);
        EXPECT(gbc.readMem(0xdfe3), 0x4b);
        // CB 4B 0201
        gbc.setState(0x32a0, 0x18f0, 0xd490, 0xc10d, 0x1650, 0x518d, 0x1, 0x1);
        gbc.writeMem(0x32a0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x18f0);
        EXPECT(gbc.pc(), 0x32a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0203
        gbc.setState(0x69f8, 0xdbdf, 0x2fc0, 0xf2fa, 0x4df8, 0x9e24, 0x0, 0x0);
        gbc.writeMem(0x69f8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdbdf);
        EXPECT(gbc.pc(), 0x69fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0204
        gbc.setState(0x22ad, 0x31e0, 0x14f0, 0x92e7, 0x1b, 0xa39b, 0x1, 0x1);
        gbc.writeMem(0x22ad, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x31e0);
        EXPECT(gbc.pc(), 0x22af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0205
        gbc.setState(0xdc2c, 0x558d, 0x7370, 0x5c88, 0xa156, 0xe777, 0x1, 0x1);
        gbc.writeMem(0xdc2c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x558d);
        EXPECT(gbc.pc(), 0xdc2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2c), 0xcb);
        EXPECT(gbc.readMem(0xdc2d), 0x4b);
        // CB 4B 0206
        gbc.setState(0x19f1, 0xdfd, 0x5fb0, 0x51f3, 0xf5a7, 0x5012, 0x0, 0x0);
        gbc.writeMem(0x19f1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdfd);
        EXPECT(gbc.pc(), 0x19f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0207
        gbc.setState(0xd4a3, 0x8f38, 0x99c0, 0xf835, 0x99d6, 0x7218, 0x1, 0x1);
        gbc.writeMem(0xd4a3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8f38);
        EXPECT(gbc.pc(), 0xd4a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4a3), 0xcb);
        EXPECT(gbc.readMem(0xd4a4), 0x4b);
        // CB 4B 0208
        gbc.setState(0x6ac8, 0x4bfc, 0x18e0, 0x20a9, 0x3d63, 0xd825, 0x0, 0x0);
        gbc.writeMem(0x6ac8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4bfc);
        EXPECT(gbc.pc(), 0x6aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0209
        gbc.setState(0x7b1e, 0xfbd0, 0xccb0, 0x7b93, 0x747c, 0x2f73, 0x0, 0x0);
        gbc.writeMem(0x7b1e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xfbd0);
        EXPECT(gbc.pc(), 0x7b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 020A
        gbc.setState(0x90cf, 0xd2fd, 0x47e0, 0x16b8, 0xbe60, 0x2aa9, 0x0, 0x0);
        gbc.writeMem(0x90cf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd2fd);
        EXPECT(gbc.pc(), 0x90d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90cf), 0xcb);
        EXPECT(gbc.readMem(0x90d0), 0x4b);
        // CB 4B 020B
        gbc.setState(0xdcef, 0x4429, 0x2830, 0xce4a, 0xc927, 0xc78e, 0x0, 0x0);
        gbc.writeMem(0xdcef, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4429);
        EXPECT(gbc.pc(), 0xdcf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcef), 0xcb);
        EXPECT(gbc.readMem(0xdcf0), 0x4b);
        // CB 4B 020C
        gbc.setState(0x8eef, 0x420e, 0xbfe0, 0x9a94, 0x69f1, 0xc877, 0x0, 0x0);
        gbc.writeMem(0x8eef, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x420e);
        EXPECT(gbc.pc(), 0x8ef1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eef), 0xcb);
        EXPECT(gbc.readMem(0x8ef0), 0x4b);
        // CB 4B 020D
        gbc.setState(0x6564, 0xc9fa, 0x3000, 0x54ec, 0x19d6, 0xf574, 0x0, 0x1);
        gbc.writeMem(0x6564, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc9fa);
        EXPECT(gbc.pc(), 0x6566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 020E
        gbc.setState(0x88e4, 0xcd93, 0x6500, 0xe08e, 0xce63, 0xdcf8, 0x1, 0x0);
        gbc.writeMem(0x88e4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xcd93);
        EXPECT(gbc.pc(), 0x88e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88e4), 0xcb);
        EXPECT(gbc.readMem(0x88e5), 0x4b);
        // CB 4B 020F
        gbc.setState(0xe535, 0x334, 0xf330, 0x25e7, 0xb381, 0x8eb4, 0x1, 0x1);
        gbc.writeMem(0xe535, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x334);
        EXPECT(gbc.pc(), 0xe537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe535), 0xcb);
        EXPECT(gbc.readMem(0xe536), 0x4b);
        // CB 4B 0210
        gbc.setState(0xc51b, 0x1bf9, 0x7740, 0x934a, 0xd6f1, 0x5fc8, 0x0, 0x1);
        gbc.writeMem(0xc51b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1bf9);
        EXPECT(gbc.pc(), 0xc51d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc51b), 0xcb);
        EXPECT(gbc.readMem(0xc51c), 0x4b);
        // CB 4B 0211
        gbc.setState(0xa1b9, 0xcc5, 0x5460, 0x1bd7, 0x7d57, 0x8d05, 0x0, 0x0);
        gbc.writeMem(0xa1b9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcc5);
        EXPECT(gbc.pc(), 0xa1bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b9), 0xcb);
        EXPECT(gbc.readMem(0xa1ba), 0x4b);
        // CB 4B 0212
        gbc.setState(0x9511, 0xee5e, 0xcf70, 0x49ab, 0x4135, 0xb0c5, 0x1, 0x1);
        gbc.writeMem(0x9511, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xee5e);
        EXPECT(gbc.pc(), 0x9513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9511), 0xcb);
        EXPECT(gbc.readMem(0x9512), 0x4b);
        // CB 4B 0213
        gbc.setState(0xa2cc, 0x510, 0x5d10, 0x5e38, 0x4fae, 0x372e, 0x1, 0x1);
        gbc.writeMem(0xa2cc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x510);
        EXPECT(gbc.pc(), 0xa2ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2cc), 0xcb);
        EXPECT(gbc.readMem(0xa2cd), 0x4b);
        // CB 4B 0214
        gbc.setState(0x3938, 0xc82d, 0x63c0, 0x2be, 0x4a15, 0x2a77, 0x0, 0x1);
        gbc.writeMem(0x3938, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc82d);
        EXPECT(gbc.pc(), 0x393a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0215
        gbc.setState(0x8c0, 0xa072, 0x90b0, 0x6af4, 0x3108, 0xcaf7, 0x1, 0x1);
        gbc.writeMem(0x8c0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa072);
        EXPECT(gbc.pc(), 0x8c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0217
        gbc.setState(0x736, 0x6e67, 0x3ae0, 0x89e6, 0xd524, 0xb99e, 0x1, 0x1);
        gbc.writeMem(0x736, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6e67);
        EXPECT(gbc.pc(), 0x738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0218
        gbc.setState(0x7e4d, 0xa2df, 0xe310, 0xbe0c, 0x235, 0x6762, 0x0, 0x0);
        gbc.writeMem(0x7e4d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa2df);
        EXPECT(gbc.pc(), 0x7e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0219
        gbc.setState(0x2529, 0x1ec7, 0x92b0, 0xe1b, 0xacdc, 0x7498, 0x1, 0x0);
        gbc.writeMem(0x2529, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1ec7);
        EXPECT(gbc.pc(), 0x252b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 021B
        gbc.setState(0xe0ca, 0x5aee, 0xd2c0, 0x247f, 0xb209, 0x2a6a, 0x1, 0x1);
        gbc.writeMem(0xe0ca, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5aee);
        EXPECT(gbc.pc(), 0xe0cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ca), 0xcb);
        EXPECT(gbc.readMem(0xe0cb), 0x4b);
        // CB 4B 021C
        gbc.setState(0x66c8, 0x7668, 0xfd70, 0x9d99, 0xa9c1, 0xf781, 0x0, 0x1);
        gbc.writeMem(0x66c8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7668);
        EXPECT(gbc.pc(), 0x66ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 021D
        gbc.setState(0x9690, 0x202, 0xe510, 0xcfb6, 0x1fd8, 0x6e5d, 0x1, 0x1);
        gbc.writeMem(0x9690, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x202);
        EXPECT(gbc.pc(), 0x9692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9690), 0xcb);
        EXPECT(gbc.readMem(0x9691), 0x4b);
        // CB 4B 021E
        gbc.setState(0xe9bd, 0x875c, 0xed50, 0xf9ce, 0x1fb3, 0xf79a, 0x0, 0x0);
        gbc.writeMem(0xe9bd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x875c);
        EXPECT(gbc.pc(), 0xe9bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9bd), 0xcb);
        EXPECT(gbc.readMem(0xe9be), 0x4b);
        // CB 4B 021F
        gbc.setState(0xcf0, 0xc3ea, 0x7390, 0x53bc, 0xe523, 0xb513, 0x0, 0x1);
        gbc.writeMem(0xcf0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc3ea);
        EXPECT(gbc.pc(), 0xcf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0220
        gbc.setState(0xd71b, 0xf7db, 0x9780, 0x5e53, 0xc3d6, 0xe3b8, 0x0, 0x1);
        gbc.writeMem(0xd71b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf7db);
        EXPECT(gbc.pc(), 0xd71d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71b), 0xcb);
        EXPECT(gbc.readMem(0xd71c), 0x4b);
        // CB 4B 0221
        gbc.setState(0xa86f, 0x6740, 0x690, 0x977a, 0x5e25, 0xbc26, 0x1, 0x0);
        gbc.writeMem(0xa86f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6740);
        EXPECT(gbc.pc(), 0xa871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa86f), 0xcb);
        EXPECT(gbc.readMem(0xa870), 0x4b);
        // CB 4B 0222
        gbc.setState(0x7b54, 0xb544, 0x83c0, 0xcb04, 0xfe8e, 0xff0a, 0x0, 0x0);
        gbc.writeMem(0x7b54, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb544);
        EXPECT(gbc.pc(), 0x7b56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0223
        gbc.setState(0x8a4, 0xec98, 0x9360, 0xbdcf, 0xc899, 0x37fb, 0x1, 0x0);
        gbc.writeMem(0x8a4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xec98);
        EXPECT(gbc.pc(), 0x8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0224
        gbc.setState(0x7ede, 0x2882, 0xf180, 0x978a, 0xe7f5, 0x8af9, 0x0, 0x1);
        gbc.writeMem(0x7ede, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2882);
        EXPECT(gbc.pc(), 0x7ee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0225
        gbc.setState(0xa55d, 0x6587, 0x43c0, 0xb008, 0xa4a8, 0x89e8, 0x1, 0x1);
        gbc.writeMem(0xa55d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6587);
        EXPECT(gbc.pc(), 0xa55f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa55d), 0xcb);
        EXPECT(gbc.readMem(0xa55e), 0x4b);
        // CB 4B 0226
        gbc.setState(0xcf48, 0x6d6, 0xd390, 0x8499, 0x62c7, 0x9e8e, 0x1, 0x0);
        gbc.writeMem(0xcf48, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6d6);
        EXPECT(gbc.pc(), 0xcf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf48), 0xcb);
        EXPECT(gbc.readMem(0xcf49), 0x4b);
        // CB 4B 0227
        gbc.setState(0x4dc1, 0xdc98, 0x8760, 0x16d9, 0x48f4, 0x4079, 0x1, 0x1);
        gbc.writeMem(0x4dc1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdc98);
        EXPECT(gbc.pc(), 0x4dc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0228
        gbc.setState(0x4a28, 0x57d1, 0x6bc0, 0xdc94, 0x51a9, 0x7735, 0x1, 0x1);
        gbc.writeMem(0x4a28, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x57d1);
        EXPECT(gbc.pc(), 0x4a2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0229
        gbc.setState(0x1abd, 0x5e85, 0x86c0, 0x3de4, 0xf83b, 0xf401, 0x1, 0x0);
        gbc.writeMem(0x1abd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5e85);
        EXPECT(gbc.pc(), 0x1abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 022B
        gbc.setState(0x7127, 0x5f5, 0x9790, 0x760, 0x97a6, 0x20e9, 0x0, 0x0);
        gbc.writeMem(0x7127, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5f5);
        EXPECT(gbc.pc(), 0x7129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 022D
        gbc.setState(0x74cd, 0x11ac, 0xf460, 0x3fb2, 0xaf4b, 0x7cc6, 0x0, 0x0);
        gbc.writeMem(0x74cd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x11ac);
        EXPECT(gbc.pc(), 0x74cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 022E
        gbc.setState(0xb3d5, 0x6f, 0xd760, 0xd8dc, 0x80fa, 0x33a8, 0x1, 0x1);
        gbc.writeMem(0xb3d5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6f);
        EXPECT(gbc.pc(), 0xb3d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d5), 0xcb);
        EXPECT(gbc.readMem(0xb3d6), 0x4b);
        // CB 4B 022F
        gbc.setState(0xeee6, 0x3980, 0xa790, 0xe6db, 0x61a3, 0xbe8d, 0x1, 0x0);
        gbc.writeMem(0xeee6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3980);
        EXPECT(gbc.pc(), 0xeee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeee6), 0xcb);
        EXPECT(gbc.readMem(0xeee7), 0x4b);
        // CB 4B 0230
        gbc.setState(0x34a3, 0xf6d0, 0x6c40, 0xf8e0, 0xf848, 0xa5fa, 0x0, 0x1);
        gbc.writeMem(0x34a3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf6d0);
        EXPECT(gbc.pc(), 0x34a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0231
        gbc.setState(0x30b4, 0x890d, 0x180, 0x2751, 0x265e, 0xcad, 0x1, 0x0);
        gbc.writeMem(0x30b4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x890d);
        EXPECT(gbc.pc(), 0x30b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0232
        gbc.setState(0x2c, 0x5f56, 0x290, 0x75ec, 0x5351, 0x5d44, 0x1, 0x1);
        gbc.writeMem(0x2c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5f56);
        EXPECT(gbc.pc(), 0x2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0233
        gbc.setState(0x4ac9, 0xfb03, 0x68d0, 0x41f, 0xf815, 0xa0bb, 0x1, 0x0);
        gbc.writeMem(0x4ac9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfb03);
        EXPECT(gbc.pc(), 0x4acb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0234
        gbc.setState(0xd5f, 0x3e7f, 0xfb50, 0x3bb6, 0x25f1, 0xf2d9, 0x0, 0x0);
        gbc.writeMem(0xd5f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3e7f);
        EXPECT(gbc.pc(), 0xd61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0235
        gbc.setState(0x196e, 0xfbd3, 0xc320, 0x9111, 0x7643, 0x9f3f, 0x1, 0x1);
        gbc.writeMem(0x196e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xfbd3);
        EXPECT(gbc.pc(), 0x1970);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0236
        gbc.setState(0x4d3a, 0x71ee, 0x4cf0, 0x16d8, 0x287f, 0xbaca, 0x1, 0x1);
        gbc.writeMem(0x4d3a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x71ee);
        EXPECT(gbc.pc(), 0x4d3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0237
        gbc.setState(0x493a, 0x8b06, 0xf9c0, 0xc45a, 0x6676, 0x8ae1, 0x0, 0x0);
        gbc.writeMem(0x493a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8b06);
        EXPECT(gbc.pc(), 0x493c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0238
        gbc.setState(0x4e28, 0xd63c, 0x7fa0, 0x2282, 0xfb06, 0xaca7, 0x0, 0x0);
        gbc.writeMem(0x4e28, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd63c);
        EXPECT(gbc.pc(), 0x4e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0239
        gbc.setState(0x5a6e, 0x57fd, 0x4640, 0x2ee7, 0x8dc2, 0xfc34, 0x1, 0x1);
        gbc.writeMem(0x5a6e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x57fd);
        EXPECT(gbc.pc(), 0x5a70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 023B
        gbc.setState(0x41c6, 0x9518, 0x8710, 0x5e6f, 0x6086, 0x7f85, 0x0, 0x1);
        gbc.writeMem(0x41c6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9518);
        EXPECT(gbc.pc(), 0x41c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 023C
        gbc.setState(0x976c, 0x66e9, 0xc0f0, 0x5df9, 0x8a2a, 0x8e4a, 0x0, 0x1);
        gbc.writeMem(0x976c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x66e9);
        EXPECT(gbc.pc(), 0x976e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x976c), 0xcb);
        EXPECT(gbc.readMem(0x976d), 0x4b);
        // CB 4B 023E
        gbc.setState(0x11fb, 0x5d2c, 0x6360, 0xf33a, 0xd8b3, 0xdfb6, 0x0, 0x1);
        gbc.writeMem(0x11fb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5d2c);
        EXPECT(gbc.pc(), 0x11fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 023F
        gbc.setState(0x6d12, 0x4f48, 0xe0b0, 0x2338, 0x9fcb, 0xa928, 0x1, 0x0);
        gbc.writeMem(0x6d12, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4f48);
        EXPECT(gbc.pc(), 0x6d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0240
        gbc.setState(0xc097, 0x1bfe, 0x2cf0, 0xf37c, 0x5056, 0xdfb1, 0x1, 0x0);
        gbc.writeMem(0xc097, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1bfe);
        EXPECT(gbc.pc(), 0xc099);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc097), 0xcb);
        EXPECT(gbc.readMem(0xc098), 0x4b);
        // CB 4B 0241
        gbc.setState(0x987e, 0xf440, 0x2340, 0xfd1e, 0xae9c, 0x6aa6, 0x1, 0x0);
        gbc.writeMem(0x987e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf440);
        EXPECT(gbc.pc(), 0x9880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x987e), 0xcb);
        EXPECT(gbc.readMem(0x987f), 0x4b);
        // CB 4B 0242
        gbc.setState(0xe5db, 0xbd6b, 0x7500, 0x2eac, 0xe944, 0x1226, 0x1, 0x0);
        gbc.writeMem(0xe5db, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xbd6b);
        EXPECT(gbc.pc(), 0xe5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5db), 0xcb);
        EXPECT(gbc.readMem(0xe5dc), 0x4b);
        // CB 4B 0243
        gbc.setState(0x9c47, 0xffa6, 0xe1b0, 0x29e4, 0x206a, 0x81c1, 0x1, 0x0);
        gbc.writeMem(0x9c47, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xffa6);
        EXPECT(gbc.pc(), 0x9c49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c47), 0xcb);
        EXPECT(gbc.readMem(0x9c48), 0x4b);
        // CB 4B 0244
        gbc.setState(0x51ad, 0x2f88, 0xef80, 0x3333, 0x6373, 0x804e, 0x0, 0x1);
        gbc.writeMem(0x51ad, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2f88);
        EXPECT(gbc.pc(), 0x51af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0245
        gbc.setState(0x5111, 0x42c, 0x8a50, 0xc5a, 0x5450, 0x4a71, 0x1, 0x0);
        gbc.writeMem(0x5111, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x42c);
        EXPECT(gbc.pc(), 0x5113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0246
        gbc.setState(0x3058, 0xdf71, 0x9580, 0x31cb, 0xff6a, 0xf87, 0x1, 0x0);
        gbc.writeMem(0x3058, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xdf71);
        EXPECT(gbc.pc(), 0x305a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0247
        gbc.setState(0xc9d3, 0x1581, 0x8ec0, 0x2ca, 0x930c, 0xaf0a, 0x0, 0x1);
        gbc.writeMem(0xc9d3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1581);
        EXPECT(gbc.pc(), 0xc9d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d3), 0xcb);
        EXPECT(gbc.readMem(0xc9d4), 0x4b);
        // CB 4B 0248
        gbc.setState(0xa3fe, 0x408b, 0xbe40, 0xf7d7, 0xcbc9, 0x3e20, 0x1, 0x0);
        gbc.writeMem(0xa3fe, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x408b);
        EXPECT(gbc.pc(), 0xa400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3fe), 0xcb);
        EXPECT(gbc.readMem(0xa3ff), 0x4b);
        // CB 4B 0249
        gbc.setState(0x8d6e, 0x6ff7, 0xc070, 0xdc5f, 0x19b5, 0xf136, 0x0, 0x0);
        gbc.writeMem(0x8d6e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6ff7);
        EXPECT(gbc.pc(), 0x8d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d6e), 0xcb);
        EXPECT(gbc.readMem(0x8d6f), 0x4b);
        // CB 4B 024A
        gbc.setState(0x4a51, 0x53f0, 0xc670, 0x8a83, 0xdcd1, 0xdceb, 0x0, 0x1);
        gbc.writeMem(0x4a51, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x53f0);
        EXPECT(gbc.pc(), 0x4a53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 024B
        gbc.setState(0x657c, 0xa462, 0x110, 0x18b4, 0x17a6, 0xc3c9, 0x0, 0x0);
        gbc.writeMem(0x657c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa462);
        EXPECT(gbc.pc(), 0x657e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 024C
        gbc.setState(0xb461, 0x4a5a, 0x5f00, 0xced0, 0x592b, 0x1b0d, 0x1, 0x0);
        gbc.writeMem(0xb461, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4a5a);
        EXPECT(gbc.pc(), 0xb463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb461), 0xcb);
        EXPECT(gbc.readMem(0xb462), 0x4b);
        // CB 4B 024D
        gbc.setState(0xdf42, 0xbfaa, 0xbde0, 0xa9af, 0x3e95, 0x38ef, 0x0, 0x1);
        gbc.writeMem(0xdf42, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xbfaa);
        EXPECT(gbc.pc(), 0xdf44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf42), 0xcb);
        EXPECT(gbc.readMem(0xdf43), 0x4b);
        // CB 4B 024F
        gbc.setState(0xa3ff, 0xf8a6, 0xde50, 0x86ed, 0xd599, 0xdf40, 0x0, 0x0);
        gbc.writeMem(0xa3ff, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf8a6);
        EXPECT(gbc.pc(), 0xa401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ff), 0xcb);
        EXPECT(gbc.readMem(0xa400), 0x4b);
        // CB 4B 0250
        gbc.setState(0x1545, 0x2283, 0x8360, 0x9193, 0xf96, 0x6745, 0x0, 0x0);
        gbc.writeMem(0x1545, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2283);
        EXPECT(gbc.pc(), 0x1547);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0251
        gbc.setState(0x1d17, 0x80f7, 0x6620, 0xce68, 0x1197, 0xcfb6, 0x0, 0x0);
        gbc.writeMem(0x1d17, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x80f7);
        EXPECT(gbc.pc(), 0x1d19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0252
        gbc.setState(0x84a0, 0x9c53, 0x9a00, 0x3fe3, 0x4010, 0xcfbe, 0x1, 0x0);
        gbc.writeMem(0x84a0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9c53);
        EXPECT(gbc.pc(), 0x84a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a0), 0xcb);
        EXPECT(gbc.readMem(0x84a1), 0x4b);
        // CB 4B 0253
        gbc.setState(0x3f26, 0x35a6, 0x8410, 0xdf85, 0x3228, 0xf79, 0x0, 0x1);
        gbc.writeMem(0x3f26, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x35a6);
        EXPECT(gbc.pc(), 0x3f28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0254
        gbc.setState(0xc9a0, 0xb27e, 0xac00, 0x2dbd, 0x383c, 0x325b, 0x0, 0x1);
        gbc.writeMem(0xc9a0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb27e);
        EXPECT(gbc.pc(), 0xc9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a0), 0xcb);
        EXPECT(gbc.readMem(0xc9a1), 0x4b);
        // CB 4B 0255
        gbc.setState(0x6963, 0x39e6, 0xd8d0, 0x86de, 0xbf0f, 0xd917, 0x1, 0x1);
        gbc.writeMem(0x6963, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x39e6);
        EXPECT(gbc.pc(), 0x6965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0256
        gbc.setState(0xd7a0, 0x49ba, 0x6a10, 0xce3e, 0x2696, 0xe5c8, 0x0, 0x1);
        gbc.writeMem(0xd7a0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x49ba);
        EXPECT(gbc.pc(), 0xd7a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7a0), 0xcb);
        EXPECT(gbc.readMem(0xd7a1), 0x4b);
        // CB 4B 0257
        gbc.setState(0x49d1, 0xe37e, 0xd550, 0x54ef, 0xf8b4, 0xc39d, 0x1, 0x0);
        gbc.writeMem(0x49d1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe37e);
        EXPECT(gbc.pc(), 0x49d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0259
        gbc.setState(0x2380, 0xf8db, 0x15e0, 0x8d27, 0x99ae, 0x2c67, 0x1, 0x0);
        gbc.writeMem(0x2380, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf8db);
        EXPECT(gbc.pc(), 0x2382);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 025A
        gbc.setState(0x96b9, 0xae8c, 0x6100, 0xc654, 0x3360, 0xccc, 0x0, 0x1);
        gbc.writeMem(0x96b9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xae8c);
        EXPECT(gbc.pc(), 0x96bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b9), 0xcb);
        EXPECT(gbc.readMem(0x96ba), 0x4b);
        // CB 4B 025B
        gbc.setState(0x81cc, 0x6d2b, 0xeef0, 0x6b8, 0x85e4, 0x9e02, 0x0, 0x1);
        gbc.writeMem(0x81cc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6d2b);
        EXPECT(gbc.pc(), 0x81ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81cc), 0xcb);
        EXPECT(gbc.readMem(0x81cd), 0x4b);
        // CB 4B 025C
        gbc.setState(0x74a8, 0x50fc, 0x8570, 0x13f, 0x8bd5, 0x16c5, 0x0, 0x0);
        gbc.writeMem(0x74a8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x50fc);
        EXPECT(gbc.pc(), 0x74aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 025D
        gbc.setState(0xa281, 0x9670, 0x96b0, 0xf43, 0xe779, 0x215c, 0x0, 0x1);
        gbc.writeMem(0xa281, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9670);
        EXPECT(gbc.pc(), 0xa283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa281), 0xcb);
        EXPECT(gbc.readMem(0xa282), 0x4b);
        // CB 4B 025E
        gbc.setState(0xa0ce, 0x613, 0x4e50, 0xe75, 0x52a4, 0xa4e7, 0x1, 0x0);
        gbc.writeMem(0xa0ce, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x613);
        EXPECT(gbc.pc(), 0xa0d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ce), 0xcb);
        EXPECT(gbc.readMem(0xa0cf), 0x4b);
        // CB 4B 025F
        gbc.setState(0xee45, 0x9d2f, 0x58b0, 0xd2e0, 0xcca, 0xfb61, 0x1, 0x1);
        gbc.writeMem(0xee45, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9d2f);
        EXPECT(gbc.pc(), 0xee47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee45), 0xcb);
        EXPECT(gbc.readMem(0xee46), 0x4b);
        // CB 4B 0260
        gbc.setState(0x1cc5, 0x260e, 0xeb0, 0xe451, 0xf9ad, 0xa748, 0x1, 0x1);
        gbc.writeMem(0x1cc5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x260e);
        EXPECT(gbc.pc(), 0x1cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0261
        gbc.setState(0x2d43, 0x7913, 0xa0b0, 0x3cf, 0x6542, 0x5446, 0x1, 0x1);
        gbc.writeMem(0x2d43, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7913);
        EXPECT(gbc.pc(), 0x2d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0262
        gbc.setState(0x4379, 0x5e3b, 0x3de0, 0x7dcb, 0xc856, 0xb920, 0x0, 0x1);
        gbc.writeMem(0x4379, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5e3b);
        EXPECT(gbc.pc(), 0x437b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0263
        gbc.setState(0xd221, 0xace7, 0x1b60, 0xba38, 0xc170, 0x7337, 0x0, 0x0);
        gbc.writeMem(0xd221, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xace7);
        EXPECT(gbc.pc(), 0xd223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd221), 0xcb);
        EXPECT(gbc.readMem(0xd222), 0x4b);
        // CB 4B 0264
        gbc.setState(0xe1fc, 0x9dd5, 0xbe80, 0x40d6, 0x9b41, 0xc7ee, 0x0, 0x0);
        gbc.writeMem(0xe1fc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9dd5);
        EXPECT(gbc.pc(), 0xe1fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1fc), 0xcb);
        EXPECT(gbc.readMem(0xe1fd), 0x4b);
        // CB 4B 0265
        gbc.setState(0x6fe8, 0xe492, 0x5f90, 0x3968, 0xb760, 0xa231, 0x1, 0x0);
        gbc.writeMem(0x6fe8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe492);
        EXPECT(gbc.pc(), 0x6fea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0266
        gbc.setState(0x7103, 0xd665, 0xa920, 0x89c4, 0x65fa, 0xb675, 0x0, 0x1);
        gbc.writeMem(0x7103, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd665);
        EXPECT(gbc.pc(), 0x7105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0267
        gbc.setState(0x81e8, 0xe4de, 0x970, 0xf454, 0x5117, 0x24c9, 0x0, 0x0);
        gbc.writeMem(0x81e8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe4de);
        EXPECT(gbc.pc(), 0x81ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e8), 0xcb);
        EXPECT(gbc.readMem(0x81e9), 0x4b);
        // CB 4B 0268
        gbc.setState(0xa85e, 0xaeae, 0xeb0, 0xe0a1, 0x1582, 0xfede, 0x1, 0x1);
        gbc.writeMem(0xa85e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xaeae);
        EXPECT(gbc.pc(), 0xa860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85e), 0xcb);
        EXPECT(gbc.readMem(0xa85f), 0x4b);
        // CB 4B 0269
        gbc.setState(0x4597, 0x4047, 0x1fd0, 0xc578, 0xcfd6, 0xfabb, 0x0, 0x0);
        gbc.writeMem(0x4597, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4047);
        EXPECT(gbc.pc(), 0x4599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 026A
        gbc.setState(0x41cc, 0xf6b1, 0xba10, 0xd6d7, 0x1a56, 0xa3d0, 0x1, 0x0);
        gbc.writeMem(0x41cc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0x41ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 026B
        gbc.setState(0x80e7, 0x1b9a, 0xf980, 0xfa4c, 0xa922, 0xebb0, 0x1, 0x0);
        gbc.writeMem(0x80e7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1b9a);
        EXPECT(gbc.pc(), 0x80e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e7), 0xcb);
        EXPECT(gbc.readMem(0x80e8), 0x4b);
        // CB 4B 026C
        gbc.setState(0x339e, 0x388c, 0x2fb0, 0xc033, 0xedd1, 0xdbf6, 0x1, 0x0);
        gbc.writeMem(0x339e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x388c);
        EXPECT(gbc.pc(), 0x33a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 026D
        gbc.setState(0xd71, 0xb218, 0x1200, 0x94c4, 0xa69, 0x6efd, 0x0, 0x1);
        gbc.writeMem(0xd71, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb218);
        EXPECT(gbc.pc(), 0xd73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 026E
        gbc.setState(0xe904, 0x27b2, 0x16a0, 0xa86, 0xfb53, 0x14b6, 0x1, 0x0);
        gbc.writeMem(0xe904, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x27b2);
        EXPECT(gbc.pc(), 0xe906);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe904), 0xcb);
        EXPECT(gbc.readMem(0xe905), 0x4b);
        // CB 4B 026F
        gbc.setState(0x85b4, 0xaae6, 0x1580, 0x1f8d, 0x1767, 0xe6e3, 0x0, 0x0);
        gbc.writeMem(0x85b4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xaae6);
        EXPECT(gbc.pc(), 0x85b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b4), 0xcb);
        EXPECT(gbc.readMem(0x85b5), 0x4b);
        // CB 4B 0270
        gbc.setState(0xc31a, 0x54c5, 0x93d0, 0x7987, 0x6955, 0xe2a7, 0x1, 0x1);
        gbc.writeMem(0xc31a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x54c5);
        EXPECT(gbc.pc(), 0xc31c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc31a), 0xcb);
        EXPECT(gbc.readMem(0xc31b), 0x4b);
        // CB 4B 0271
        gbc.setState(0xb132, 0x9d2, 0x810, 0xab44, 0x80ee, 0x69dc, 0x0, 0x1);
        gbc.writeMem(0xb132, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9d2);
        EXPECT(gbc.pc(), 0xb134);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb132), 0xcb);
        EXPECT(gbc.readMem(0xb133), 0x4b);
        // CB 4B 0272
        gbc.setState(0x5a7e, 0x1ba2, 0x3690, 0xe131, 0xa77b, 0x29c5, 0x0, 0x0);
        gbc.writeMem(0x5a7e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1ba2);
        EXPECT(gbc.pc(), 0x5a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0273
        gbc.setState(0x504e, 0x9965, 0xcb20, 0x9d8a, 0x5bfe, 0x32e3, 0x1, 0x0);
        gbc.writeMem(0x504e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9965);
        EXPECT(gbc.pc(), 0x5050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0274
        gbc.setState(0x40c, 0x95fa, 0x4c80, 0xbc1e, 0xc05b, 0xebf4, 0x1, 0x0);
        gbc.writeMem(0x40c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x95fa);
        EXPECT(gbc.pc(), 0x40e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0275
        gbc.setState(0xb477, 0x42d5, 0xfea0, 0x1949, 0x62cd, 0xb607, 0x0, 0x1);
        gbc.writeMem(0xb477, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x42d5);
        EXPECT(gbc.pc(), 0xb479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb477), 0xcb);
        EXPECT(gbc.readMem(0xb478), 0x4b);
        // CB 4B 0276
        gbc.setState(0xc6d1, 0x1213, 0x1dc0, 0x66bd, 0x9223, 0x79e8, 0x1, 0x0);
        gbc.writeMem(0xc6d1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1213);
        EXPECT(gbc.pc(), 0xc6d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6d1), 0xcb);
        EXPECT(gbc.readMem(0xc6d2), 0x4b);
        // CB 4B 0277
        gbc.setState(0xe182, 0xac23, 0xb400, 0x5262, 0x719c, 0x6145, 0x1, 0x1);
        gbc.writeMem(0xe182, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xac23);
        EXPECT(gbc.pc(), 0xe184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe182), 0xcb);
        EXPECT(gbc.readMem(0xe183), 0x4b);
        // CB 4B 0278
        gbc.setState(0x75db, 0x2c31, 0xdda0, 0xe13f, 0x6fee, 0x33db, 0x1, 0x1);
        gbc.writeMem(0x75db, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2c31);
        EXPECT(gbc.pc(), 0x75dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0279
        gbc.setState(0xc0e5, 0x78f2, 0xfd20, 0x7f84, 0x297b, 0x1135, 0x0, 0x1);
        gbc.writeMem(0xc0e5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x78f2);
        EXPECT(gbc.pc(), 0xc0e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0e5), 0xcb);
        EXPECT(gbc.readMem(0xc0e6), 0x4b);
        // CB 4B 027A
        gbc.setState(0x6c1f, 0xc76, 0x4800, 0x1839, 0xc2a, 0xba23, 0x0, 0x0);
        gbc.writeMem(0x6c1f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc76);
        EXPECT(gbc.pc(), 0x6c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 027B
        gbc.setState(0x8471, 0x4a13, 0xae30, 0x7d83, 0x8fa3, 0x4c09, 0x1, 0x0);
        gbc.writeMem(0x8471, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4a13);
        EXPECT(gbc.pc(), 0x8473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8471), 0xcb);
        EXPECT(gbc.readMem(0x8472), 0x4b);
        // CB 4B 027C
        gbc.setState(0xe72, 0xebd0, 0x79c0, 0xc345, 0x79c9, 0xeadd, 0x1, 0x0);
        gbc.writeMem(0xe72, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xebd0);
        EXPECT(gbc.pc(), 0xe74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 027D
        gbc.setState(0x7cf3, 0x2aa6, 0x8960, 0x3ee5, 0x69d, 0xd8cf, 0x0, 0x1);
        gbc.writeMem(0x7cf3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2aa6);
        EXPECT(gbc.pc(), 0x7cf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 027E
        gbc.setState(0x7ce1, 0x9f76, 0x18d0, 0x34d1, 0xc204, 0xccf4, 0x1, 0x1);
        gbc.writeMem(0x7ce1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9f76);
        EXPECT(gbc.pc(), 0x7ce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 027F
        gbc.setState(0xc5b0, 0xaa38, 0xf2e0, 0xafdb, 0x35a8, 0xa4df, 0x1, 0x1);
        gbc.writeMem(0xc5b0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xaa38);
        EXPECT(gbc.pc(), 0xc5b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5b0), 0xcb);
        EXPECT(gbc.readMem(0xc5b1), 0x4b);
        // CB 4B 0280
        gbc.setState(0xad1a, 0x27a7, 0x7010, 0xa100, 0xa2d3, 0x93b9, 0x0, 0x0);
        gbc.writeMem(0xad1a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x27a7);
        EXPECT(gbc.pc(), 0xad1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad1a), 0xcb);
        EXPECT(gbc.readMem(0xad1b), 0x4b);
        // CB 4B 0281
        gbc.setState(0xb99a, 0xdc89, 0x3ba0, 0x17e1, 0x1b2c, 0xf9c3, 0x0, 0x1);
        gbc.writeMem(0xb99a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdc89);
        EXPECT(gbc.pc(), 0xb99c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99a), 0xcb);
        EXPECT(gbc.readMem(0xb99b), 0x4b);
        // CB 4B 0282
        gbc.setState(0x7faa, 0x486b, 0xf50, 0x4f34, 0xfcd4, 0xcf2d, 0x1, 0x0);
        gbc.writeMem(0x7faa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x486b);
        EXPECT(gbc.pc(), 0x7fac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0283
        gbc.setState(0x21ed, 0xef0a, 0xde40, 0x2860, 0xc366, 0xb288, 0x1, 0x0);
        gbc.writeMem(0x21ed, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xef0a);
        EXPECT(gbc.pc(), 0x21ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0284
        gbc.setState(0xc552, 0x6932, 0xfb80, 0x1224, 0x4f14, 0x70b, 0x0, 0x0);
        gbc.writeMem(0xc552, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6932);
        EXPECT(gbc.pc(), 0xc554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc552), 0xcb);
        EXPECT(gbc.readMem(0xc553), 0x4b);
        // CB 4B 0285
        gbc.setState(0x6724, 0xc6d1, 0x7630, 0x17d2, 0x4081, 0x2889, 0x0, 0x0);
        gbc.writeMem(0x6724, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc6d1);
        EXPECT(gbc.pc(), 0x6726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0286
        gbc.setState(0xa9a8, 0x13, 0x9780, 0x13, 0x6c48, 0xaf99, 0x0, 0x0);
        gbc.writeMem(0xa9a8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x13);
        EXPECT(gbc.pc(), 0xa9aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a8), 0xcb);
        EXPECT(gbc.readMem(0xa9a9), 0x4b);
        // CB 4B 0287
        gbc.setState(0x13e4, 0xe7be, 0xe520, 0x8801, 0xd1e, 0x80c9, 0x0, 0x0);
        gbc.writeMem(0x13e4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe7be);
        EXPECT(gbc.pc(), 0x13e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0289
        gbc.setState(0xbe24, 0x1599, 0xedb0, 0x5bdb, 0xec8, 0x695, 0x0, 0x1);
        gbc.writeMem(0xbe24, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1599);
        EXPECT(gbc.pc(), 0xbe26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe24), 0xcb);
        EXPECT(gbc.readMem(0xbe25), 0x4b);
        // CB 4B 028A
        gbc.setState(0x4b7, 0x1fc3, 0xaed0, 0x5945, 0x29c3, 0x959c, 0x1, 0x1);
        gbc.writeMem(0x4b7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1fc3);
        EXPECT(gbc.pc(), 0x4b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 028B
        gbc.setState(0x72d0, 0x8316, 0x95c0, 0x16b5, 0x42e2, 0x4ac, 0x0, 0x1);
        gbc.writeMem(0x72d0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8316);
        EXPECT(gbc.pc(), 0x72d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 028C
        gbc.setState(0x860e, 0x9526, 0x88e0, 0xf949, 0xf85, 0x60b7, 0x0, 0x0);
        gbc.writeMem(0x860e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9526);
        EXPECT(gbc.pc(), 0x8610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x860e), 0xcb);
        EXPECT(gbc.readMem(0x860f), 0x4b);
        // CB 4B 028D
        gbc.setState(0x284c, 0x183d, 0xc7a0, 0x2560, 0x343d, 0xce86, 0x0, 0x1);
        gbc.writeMem(0x284c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x183d);
        EXPECT(gbc.pc(), 0x284e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 028E
        gbc.setState(0x7408, 0x3e9, 0x1490, 0x51d2, 0x3cc7, 0x530d, 0x0, 0x1);
        gbc.writeMem(0x7408, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3e9);
        EXPECT(gbc.pc(), 0x740a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 028F
        gbc.setState(0x8521, 0xdf0, 0xdac0, 0x5a73, 0xaa0b, 0x48e8, 0x1, 0x1);
        gbc.writeMem(0x8521, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xdf0);
        EXPECT(gbc.pc(), 0x8523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8521), 0xcb);
        EXPECT(gbc.readMem(0x8522), 0x4b);
        // CB 4B 0292
        gbc.setState(0x73f5, 0x652, 0xf090, 0x4caf, 0x6f86, 0xe4d2, 0x1, 0x1);
        gbc.writeMem(0x73f5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x652);
        EXPECT(gbc.pc(), 0x73f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0293
        gbc.setState(0x3b2f, 0x85a1, 0x5790, 0xc001, 0xc32e, 0x5d8f, 0x0, 0x1);
        gbc.writeMem(0x3b2f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x85a1);
        EXPECT(gbc.pc(), 0x3b31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0294
        gbc.setState(0x909b, 0x15d2, 0x8af0, 0xc1c5, 0xba74, 0x7af6, 0x1, 0x0);
        gbc.writeMem(0x909b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x15d2);
        EXPECT(gbc.pc(), 0x909d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x909b), 0xcb);
        EXPECT(gbc.readMem(0x909c), 0x4b);
        // CB 4B 0295
        gbc.setState(0x610c, 0xbf1c, 0xac30, 0x80d8, 0x99a2, 0x8df8, 0x0, 0x0);
        gbc.writeMem(0x610c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbf1c);
        EXPECT(gbc.pc(), 0x610e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0296
        gbc.setState(0x7064, 0x58ee, 0x3030, 0xb1e5, 0xc96d, 0xce29, 0x0, 0x0);
        gbc.writeMem(0x7064, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x58ee);
        EXPECT(gbc.pc(), 0x7066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0297
        gbc.setState(0x77b1, 0xda3d, 0x49a0, 0x783f, 0x6e2e, 0x8ef5, 0x0, 0x0);
        gbc.writeMem(0x77b1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xda3d);
        EXPECT(gbc.pc(), 0x77b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0298
        gbc.setState(0x3fb2, 0xc6bc, 0x92e0, 0x96dd, 0x7ff, 0x5786, 0x1, 0x1);
        gbc.writeMem(0x3fb2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc6bc);
        EXPECT(gbc.pc(), 0x3fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0299
        gbc.setState(0xa366, 0x4726, 0x9800, 0x4e63, 0xed0f, 0x6bb6, 0x0, 0x1);
        gbc.writeMem(0xa366, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4726);
        EXPECT(gbc.pc(), 0xa368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa366), 0xcb);
        EXPECT(gbc.readMem(0xa367), 0x4b);
        // CB 4B 029A
        gbc.setState(0xe94b, 0x244b, 0x4970, 0xd530, 0xa364, 0x67a9, 0x1, 0x0);
        gbc.writeMem(0xe94b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x244b);
        EXPECT(gbc.pc(), 0xe94d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe94b), 0xcb);
        EXPECT(gbc.readMem(0xe94c), 0x4b);
        // CB 4B 029B
        gbc.setState(0x76ee, 0x1aef, 0xf2a0, 0xe3a6, 0xfd66, 0x8bc5, 0x0, 0x0);
        gbc.writeMem(0x76ee, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1aef);
        EXPECT(gbc.pc(), 0x76f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 029C
        gbc.setState(0xaa04, 0x6c35, 0xd2b0, 0x39ac, 0xfe07, 0xa59b, 0x0, 0x0);
        gbc.writeMem(0xaa04, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6c35);
        EXPECT(gbc.pc(), 0xaa06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa04), 0xcb);
        EXPECT(gbc.readMem(0xaa05), 0x4b);
        // CB 4B 029D
        gbc.setState(0x6138, 0xfe79, 0x4950, 0xeea0, 0x5f72, 0x1bd, 0x1, 0x1);
        gbc.writeMem(0x6138, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xfe79);
        EXPECT(gbc.pc(), 0x613a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 029E
        gbc.setState(0xaab0, 0xed54, 0xd50, 0xb493, 0xc3a0, 0xd8fd, 0x0, 0x1);
        gbc.writeMem(0xaab0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xed54);
        EXPECT(gbc.pc(), 0xaab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaab0), 0xcb);
        EXPECT(gbc.readMem(0xaab1), 0x4b);
        // CB 4B 029F
        gbc.setState(0xd8b, 0xba5c, 0x8070, 0xdb63, 0xd4f5, 0x24d7, 0x1, 0x0);
        gbc.writeMem(0xd8b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xba5c);
        EXPECT(gbc.pc(), 0xd8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02A0
        gbc.setState(0x6d79, 0xf098, 0xc120, 0xbf9e, 0x7ce5, 0xf911, 0x0, 0x0);
        gbc.writeMem(0x6d79, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf098);
        EXPECT(gbc.pc(), 0x6d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02A1
        gbc.setState(0xd4ed, 0x6213, 0x2f80, 0x6894, 0x234, 0x3702, 0x1, 0x0);
        gbc.writeMem(0xd4ed, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6213);
        EXPECT(gbc.pc(), 0xd4ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ed), 0xcb);
        EXPECT(gbc.readMem(0xd4ee), 0x4b);
        // CB 4B 02A2
        gbc.setState(0xb1, 0xd782, 0x60f0, 0x50d5, 0xa491, 0x6728, 0x0, 0x0);
        gbc.writeMem(0xb1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd782);
        EXPECT(gbc.pc(), 0xb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02A3
        gbc.setState(0x9a8d, 0x4798, 0xe610, 0x6fd8, 0x7bd7, 0x838, 0x0, 0x0);
        gbc.writeMem(0x9a8d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4798);
        EXPECT(gbc.pc(), 0x9a8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a8d), 0xcb);
        EXPECT(gbc.readMem(0x9a8e), 0x4b);
        // CB 4B 02A4
        gbc.setState(0x288d, 0xd719, 0x6830, 0xdbd9, 0xb493, 0x226, 0x1, 0x0);
        gbc.writeMem(0x288d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd719);
        EXPECT(gbc.pc(), 0x288f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02A5
        gbc.setState(0x2324, 0x839e, 0xf1d0, 0x125c, 0xbe29, 0xd915, 0x1, 0x0);
        gbc.writeMem(0x2324, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x839e);
        EXPECT(gbc.pc(), 0x2326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02A6
        gbc.setState(0x2bd, 0xd152, 0x4510, 0x6178, 0xffcc, 0x81ea, 0x1, 0x1);
        gbc.writeMem(0x2bd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd152);
        EXPECT(gbc.pc(), 0x2bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02A7
        gbc.setState(0x4f2, 0x6bf, 0x1f0, 0x2f3a, 0x50f8, 0xd113, 0x0, 0x1);
        gbc.writeMem(0x4f2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6bf);
        EXPECT(gbc.pc(), 0x4f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02A9
        gbc.setState(0x5eb3, 0x11ff, 0x2900, 0x27, 0x52c4, 0x7bd, 0x1, 0x0);
        gbc.writeMem(0x5eb3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x11ff);
        EXPECT(gbc.pc(), 0x5eb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02AA
        gbc.setState(0xe458, 0x7315, 0x5870, 0xe12a, 0x760e, 0x727b, 0x0, 0x1);
        gbc.writeMem(0xe458, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7315);
        EXPECT(gbc.pc(), 0xe45a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe458), 0xcb);
        EXPECT(gbc.readMem(0xe459), 0x4b);
        // CB 4B 02AB
        gbc.setState(0x278f, 0xa8ee, 0x2cf0, 0x15c, 0xa66f, 0x95d7, 0x0, 0x1);
        gbc.writeMem(0x278f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xa8ee);
        EXPECT(gbc.pc(), 0x2791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02AC
        gbc.setState(0xbcd6, 0x9cac, 0xb480, 0x52db, 0xda7e, 0xe278, 0x0, 0x0);
        gbc.writeMem(0xbcd6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9cac);
        EXPECT(gbc.pc(), 0xbcd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd6), 0xcb);
        EXPECT(gbc.readMem(0xbcd7), 0x4b);
        // CB 4B 02AD
        gbc.setState(0x6679, 0x6448, 0x6da0, 0xefb, 0xe2e0, 0x15b5, 0x0, 0x1);
        gbc.writeMem(0x6679, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6448);
        EXPECT(gbc.pc(), 0x667b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02AE
        gbc.setState(0xaeef, 0x4be7, 0x870, 0x4747, 0x1196, 0xe3f9, 0x1, 0x1);
        gbc.writeMem(0xaeef, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4be7);
        EXPECT(gbc.pc(), 0xaef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeef), 0xcb);
        EXPECT(gbc.readMem(0xaef0), 0x4b);
        // CB 4B 02AF
        gbc.setState(0x755a, 0x9d45, 0xfd70, 0x9ac9, 0xadf7, 0xc4a9, 0x1, 0x0);
        gbc.writeMem(0x755a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9d45);
        EXPECT(gbc.pc(), 0x755c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02B0
        gbc.setState(0x9118, 0x25a0, 0xf370, 0xc89f, 0x1910, 0xbff8, 0x0, 0x0);
        gbc.writeMem(0x9118, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x25a0);
        EXPECT(gbc.pc(), 0x911a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9118), 0xcb);
        EXPECT(gbc.readMem(0x9119), 0x4b);
        // CB 4B 02B1
        gbc.setState(0xe19b, 0x7cbf, 0x4800, 0x4e, 0xa401, 0x5a53, 0x1, 0x1);
        gbc.writeMem(0xe19b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7cbf);
        EXPECT(gbc.pc(), 0xe19d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe19b), 0xcb);
        EXPECT(gbc.readMem(0xe19c), 0x4b);
        // CB 4B 02B2
        gbc.setState(0xe899, 0x951f, 0x4730, 0x418b, 0xcf33, 0xfaca, 0x0, 0x0);
        gbc.writeMem(0xe899, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x951f);
        EXPECT(gbc.pc(), 0xe89b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe899), 0xcb);
        EXPECT(gbc.readMem(0xe89a), 0x4b);
        // CB 4B 02B3
        gbc.setState(0x56aa, 0x57c4, 0x2f50, 0xdd07, 0xf9e0, 0x6875, 0x1, 0x0);
        gbc.writeMem(0x56aa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x57c4);
        EXPECT(gbc.pc(), 0x56ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02B4
        gbc.setState(0x56d0, 0xfc00, 0xcaf0, 0xceed, 0x3a3c, 0xb88c, 0x0, 0x0);
        gbc.writeMem(0x56d0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xfc00);
        EXPECT(gbc.pc(), 0x56d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02B5
        gbc.setState(0x9431, 0xe3bc, 0x89b0, 0xa644, 0x6bdf, 0xda10, 0x1, 0x0);
        gbc.writeMem(0x9431, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe3bc);
        EXPECT(gbc.pc(), 0x9433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9431), 0xcb);
        EXPECT(gbc.readMem(0x9432), 0x4b);
        // CB 4B 02B6
        gbc.setState(0x592b, 0xd73c, 0xfc90, 0x31bc, 0x4f71, 0xa02a, 0x0, 0x0);
        gbc.writeMem(0x592b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd73c);
        EXPECT(gbc.pc(), 0x592d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02B7
        gbc.setState(0xd869, 0x795d, 0xbba0, 0xa295, 0x43ad, 0x5960, 0x0, 0x0);
        gbc.writeMem(0xd869, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x795d);
        EXPECT(gbc.pc(), 0xd86b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd869), 0xcb);
        EXPECT(gbc.readMem(0xd86a), 0x4b);
        // CB 4B 02B8
        gbc.setState(0xbf5a, 0xb5d3, 0x8980, 0x4a36, 0xe63f, 0x787d, 0x1, 0x0);
        gbc.writeMem(0xbf5a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb5d3);
        EXPECT(gbc.pc(), 0xbf5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf5a), 0xcb);
        EXPECT(gbc.readMem(0xbf5b), 0x4b);
        // CB 4B 02B9
        gbc.setState(0x9574, 0xc56, 0xe4b0, 0x3bc2, 0x6b56, 0xba92, 0x0, 0x1);
        gbc.writeMem(0x9574, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc56);
        EXPECT(gbc.pc(), 0x9576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9574), 0xcb);
        EXPECT(gbc.readMem(0x9575), 0x4b);
        // CB 4B 02BA
        gbc.setState(0x5df9, 0x85ea, 0xd610, 0xac57, 0x9c11, 0x86c1, 0x1, 0x0);
        gbc.writeMem(0x5df9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x85ea);
        EXPECT(gbc.pc(), 0x5dfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02BB
        gbc.setState(0x79ba, 0x7b46, 0x5ed0, 0x22b6, 0xa80a, 0x34d5, 0x1, 0x0);
        gbc.writeMem(0x79ba, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7b46);
        EXPECT(gbc.pc(), 0x79bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02BC
        gbc.setState(0x3a3c, 0x3a60, 0x6d80, 0x997, 0xb728, 0x153c, 0x0, 0x0);
        gbc.writeMem(0x3a3c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3a60);
        EXPECT(gbc.pc(), 0x3a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02BE
        gbc.setState(0x8e91, 0x5f5e, 0x5f60, 0x18bb, 0x598f, 0xb93c, 0x1, 0x1);
        gbc.writeMem(0x8e91, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5f5e);
        EXPECT(gbc.pc(), 0x8e93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e91), 0xcb);
        EXPECT(gbc.readMem(0x8e92), 0x4b);
        // CB 4B 02BF
        gbc.setState(0x2008, 0xf49c, 0xd9c0, 0xc9a9, 0x96, 0x9fce, 0x0, 0x0);
        gbc.writeMem(0x2008, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf49c);
        EXPECT(gbc.pc(), 0x200a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02C0
        gbc.setState(0x4b16, 0xc33, 0x8f20, 0x85f4, 0xcdf7, 0xe351, 0x0, 0x0);
        gbc.writeMem(0x4b16, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc33);
        EXPECT(gbc.pc(), 0x4b18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02C1
        gbc.setState(0xf3b, 0x36cb, 0x7550, 0xd73, 0x65c8, 0x53d8, 0x0, 0x0);
        gbc.writeMem(0xf3b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x36cb);
        EXPECT(gbc.pc(), 0xf3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02C2
        gbc.setState(0x648e, 0xfe19, 0xe930, 0xd105, 0xa8, 0xa56d, 0x0, 0x1);
        gbc.writeMem(0x648e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfe19);
        EXPECT(gbc.pc(), 0x6490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02C3
        gbc.setState(0x4303, 0xac9c, 0xdee0, 0xf56a, 0x3a3a, 0xeff2, 0x1, 0x0);
        gbc.writeMem(0x4303, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xac9c);
        EXPECT(gbc.pc(), 0x4305);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02C5
        gbc.setState(0x3f7d, 0x7431, 0x9a30, 0x1088, 0x6da, 0x3c16, 0x1, 0x0);
        gbc.writeMem(0x3f7d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7431);
        EXPECT(gbc.pc(), 0x3f7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02C6
        gbc.setState(0x1e80, 0xb788, 0x5e20, 0x8eaf, 0x7d94, 0xeedc, 0x1, 0x1);
        gbc.writeMem(0x1e80, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb788);
        EXPECT(gbc.pc(), 0x1e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02C7
        gbc.setState(0x45b5, 0xd35e, 0x3fd0, 0xcd70, 0xbade, 0x32f9, 0x1, 0x0);
        gbc.writeMem(0x45b5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd35e);
        EXPECT(gbc.pc(), 0x45b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02C8
        gbc.setState(0xea0e, 0x9e0f, 0x5ae0, 0x735a, 0xf897, 0xb620, 0x0, 0x1);
        gbc.writeMem(0xea0e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9e0f);
        EXPECT(gbc.pc(), 0xea10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea0e), 0xcb);
        EXPECT(gbc.readMem(0xea0f), 0x4b);
        // CB 4B 02C9
        gbc.setState(0x7039, 0x610c, 0x2ca0, 0x6fcf, 0xfa3e, 0x855a, 0x1, 0x0);
        gbc.writeMem(0x7039, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x610c);
        EXPECT(gbc.pc(), 0x703b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02CA
        gbc.setState(0x689b, 0x3f55, 0xdf50, 0xe5c5, 0xbcf8, 0x76b, 0x0, 0x0);
        gbc.writeMem(0x689b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3f55);
        EXPECT(gbc.pc(), 0x689d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02CB
        gbc.setState(0xb25a, 0xc271, 0xe110, 0xf606, 0xaff1, 0x3d59, 0x1, 0x0);
        gbc.writeMem(0xb25a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc271);
        EXPECT(gbc.pc(), 0xb25c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb25a), 0xcb);
        EXPECT(gbc.readMem(0xb25b), 0x4b);
        // CB 4B 02CD
        gbc.setState(0x69bd, 0x2df0, 0x8dd0, 0x9ae8, 0xb6a6, 0x1f0e, 0x0, 0x1);
        gbc.writeMem(0x69bd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2df0);
        EXPECT(gbc.pc(), 0x69bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02CE
        gbc.setState(0xbc0a, 0xed6b, 0xf2b0, 0x36f3, 0xdd65, 0x1444, 0x0, 0x1);
        gbc.writeMem(0xbc0a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xed6b);
        EXPECT(gbc.pc(), 0xbc0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc0a), 0xcb);
        EXPECT(gbc.readMem(0xbc0b), 0x4b);
        // CB 4B 02CF
        gbc.setState(0x59de, 0x74ce, 0xb0a0, 0x138d, 0x545c, 0xd1ba, 0x0, 0x0);
        gbc.writeMem(0x59de, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x74ce);
        EXPECT(gbc.pc(), 0x59e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02D0
        gbc.setState(0xb332, 0xbb2d, 0x6180, 0xcb49, 0x1ce6, 0x4c78, 0x0, 0x1);
        gbc.writeMem(0xb332, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbb2d);
        EXPECT(gbc.pc(), 0xb334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb332), 0xcb);
        EXPECT(gbc.readMem(0xb333), 0x4b);
        // CB 4B 02D1
        gbc.setState(0x981f, 0x5994, 0x2ea0, 0x5859, 0x7f01, 0x2828, 0x1, 0x1);
        gbc.writeMem(0x981f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5994);
        EXPECT(gbc.pc(), 0x9821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x981f), 0xcb);
        EXPECT(gbc.readMem(0x9820), 0x4b);
        // CB 4B 02D2
        gbc.setState(0xe5ea, 0xefbe, 0xd7d0, 0x14b1, 0x609b, 0x42d6, 0x1, 0x0);
        gbc.writeMem(0xe5ea, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xefbe);
        EXPECT(gbc.pc(), 0xe5ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ea), 0xcb);
        EXPECT(gbc.readMem(0xe5eb), 0x4b);
        // CB 4B 02D3
        gbc.setState(0xadb7, 0x45d3, 0x9650, 0x58ef, 0x120f, 0x2923, 0x1, 0x1);
        gbc.writeMem(0xadb7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x45d3);
        EXPECT(gbc.pc(), 0xadb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb7), 0xcb);
        EXPECT(gbc.readMem(0xadb8), 0x4b);
        // CB 4B 02D4
        gbc.setState(0x9692, 0x57dc, 0x88a0, 0x2b09, 0x82c1, 0x4dc5, 0x0, 0x0);
        gbc.writeMem(0x9692, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x57dc);
        EXPECT(gbc.pc(), 0x9694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9692), 0xcb);
        EXPECT(gbc.readMem(0x9693), 0x4b);
        // CB 4B 02D5
        gbc.setState(0xd4c3, 0x1dcf, 0xe670, 0x87c5, 0x8459, 0x614b, 0x1, 0x1);
        gbc.writeMem(0xd4c3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1dcf);
        EXPECT(gbc.pc(), 0xd4c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4c3), 0xcb);
        EXPECT(gbc.readMem(0xd4c4), 0x4b);
        // CB 4B 02D6
        gbc.setState(0x47ce, 0xb570, 0xd450, 0x3300, 0x11d6, 0xc020, 0x0, 0x1);
        gbc.writeMem(0x47ce, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb570);
        EXPECT(gbc.pc(), 0x47d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02D8
        gbc.setState(0xb8e0, 0x69ac, 0x4980, 0xe327, 0x216d, 0x5c04, 0x0, 0x0);
        gbc.writeMem(0xb8e0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x69ac);
        EXPECT(gbc.pc(), 0xb8e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e0), 0xcb);
        EXPECT(gbc.readMem(0xb8e1), 0x4b);
        // CB 4B 02D9
        gbc.setState(0x24a9, 0x4fb7, 0x9990, 0x6c41, 0xa014, 0x92, 0x0, 0x1);
        gbc.writeMem(0x24a9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4fb7);
        EXPECT(gbc.pc(), 0x24ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02DA
        gbc.setState(0x9922, 0x6400, 0x9e10, 0xab12, 0x1b39, 0x9b1, 0x0, 0x0);
        gbc.writeMem(0x9922, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6400);
        EXPECT(gbc.pc(), 0x9924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9922), 0xcb);
        EXPECT(gbc.readMem(0x9923), 0x4b);
        // CB 4B 02DB
        gbc.setState(0xb26e, 0xeacd, 0xc30, 0x6ff8, 0x8f8d, 0xcf39, 0x1, 0x1);
        gbc.writeMem(0xb26e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xeacd);
        EXPECT(gbc.pc(), 0xb270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb26e), 0xcb);
        EXPECT(gbc.readMem(0xb26f), 0x4b);
        // CB 4B 02DC
        gbc.setState(0x5b, 0xfe15, 0xc7c0, 0x1214, 0x2811, 0x72e9, 0x0, 0x0);
        gbc.writeMem(0x5b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xfe15);
        EXPECT(gbc.pc(), 0x5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02DD
        gbc.setState(0xa6e9, 0x6c86, 0xf680, 0x624d, 0xcf6f, 0x8de2, 0x1, 0x1);
        gbc.writeMem(0xa6e9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6c86);
        EXPECT(gbc.pc(), 0xa6eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e9), 0xcb);
        EXPECT(gbc.readMem(0xa6ea), 0x4b);
        // CB 4B 02DE
        gbc.setState(0x2a6c, 0xa1a, 0x8500, 0x6f06, 0xbd5e, 0x52f0, 0x1, 0x0);
        gbc.writeMem(0x2a6c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa1a);
        EXPECT(gbc.pc(), 0x2a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02DF
        gbc.setState(0xc64b, 0xf818, 0x2d0, 0xd1f7, 0xd316, 0x6871, 0x0, 0x1);
        gbc.writeMem(0xc64b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf818);
        EXPECT(gbc.pc(), 0xc64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc64b), 0xcb);
        EXPECT(gbc.readMem(0xc64c), 0x4b);
        // CB 4B 02E0
        gbc.setState(0x6853, 0x2f48, 0x9db0, 0xdae9, 0x833f, 0x49, 0x1, 0x0);
        gbc.writeMem(0x6853, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2f48);
        EXPECT(gbc.pc(), 0x6855);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02E1
        gbc.setState(0xd16a, 0xf05a, 0x3bf0, 0x8ee3, 0x8226, 0x695d, 0x1, 0x1);
        gbc.writeMem(0xd16a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf05a);
        EXPECT(gbc.pc(), 0xd16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd16a), 0xcb);
        EXPECT(gbc.readMem(0xd16b), 0x4b);
        // CB 4B 02E2
        gbc.setState(0x2558, 0x768, 0xd980, 0x44cb, 0x9d3, 0xc63a, 0x1, 0x1);
        gbc.writeMem(0x2558, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x768);
        EXPECT(gbc.pc(), 0x255a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02E4
        gbc.setState(0xdd87, 0xa877, 0x9040, 0x934, 0xb6b9, 0xd04b, 0x1, 0x1);
        gbc.writeMem(0xdd87, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa877);
        EXPECT(gbc.pc(), 0xdd89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd87), 0xcb);
        EXPECT(gbc.readMem(0xdd88), 0x4b);
        // CB 4B 02E5
        gbc.setState(0xae94, 0x137f, 0x2730, 0xa5f9, 0x1345, 0xb74f, 0x1, 0x1);
        gbc.writeMem(0xae94, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x137f);
        EXPECT(gbc.pc(), 0xae96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae94), 0xcb);
        EXPECT(gbc.readMem(0xae95), 0x4b);
        // CB 4B 02E6
        gbc.setState(0x80a2, 0x4f9f, 0x580, 0xafb5, 0xdca1, 0x4288, 0x0, 0x1);
        gbc.writeMem(0x80a2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4f9f);
        EXPECT(gbc.pc(), 0x80a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a2), 0xcb);
        EXPECT(gbc.readMem(0x80a3), 0x4b);
        // CB 4B 02E7
        gbc.setState(0x5843, 0x51c3, 0x6400, 0xa7a5, 0xd293, 0xe51b, 0x0, 0x0);
        gbc.writeMem(0x5843, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x51c3);
        EXPECT(gbc.pc(), 0x5845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02E8
        gbc.setState(0x50ca, 0x3a4, 0xf110, 0x7640, 0xa00c, 0xaa9e, 0x0, 0x1);
        gbc.writeMem(0x50ca, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3a4);
        EXPECT(gbc.pc(), 0x50cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02E9
        gbc.setState(0x566c, 0x4140, 0xee00, 0x2559, 0xa60c, 0x5d35, 0x0, 0x1);
        gbc.writeMem(0x566c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4140);
        EXPECT(gbc.pc(), 0x566e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02EA
        gbc.setState(0x8576, 0xc054, 0x4e00, 0x9393, 0x4a89, 0x21bd, 0x1, 0x1);
        gbc.writeMem(0x8576, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc054);
        EXPECT(gbc.pc(), 0x8578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8576), 0xcb);
        EXPECT(gbc.readMem(0x8577), 0x4b);
        // CB 4B 02EB
        gbc.setState(0x8864, 0xa7c7, 0x2d50, 0x211f, 0x54df, 0xf1, 0x0, 0x0);
        gbc.writeMem(0x8864, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa7c7);
        EXPECT(gbc.pc(), 0x8866);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8864), 0xcb);
        EXPECT(gbc.readMem(0x8865), 0x4b);
        // CB 4B 02EC
        gbc.setState(0xb172, 0xfde5, 0x6030, 0x7e66, 0x7ec9, 0xaf40, 0x1, 0x1);
        gbc.writeMem(0xb172, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfde5);
        EXPECT(gbc.pc(), 0xb174);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb172), 0xcb);
        EXPECT(gbc.readMem(0xb173), 0x4b);
        // CB 4B 02ED
        gbc.setState(0x7379, 0xd1b2, 0xb40, 0x10f7, 0xf382, 0xdee5, 0x1, 0x0);
        gbc.writeMem(0x7379, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd1b2);
        EXPECT(gbc.pc(), 0x737b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02EE
        gbc.setState(0x5005, 0xb11e, 0xf4c0, 0xea29, 0x5b3e, 0x7bf8, 0x1, 0x1);
        gbc.writeMem(0x5005, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb11e);
        EXPECT(gbc.pc(), 0x5007);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02EF
        gbc.setState(0x4656, 0x541b, 0x92c0, 0x8afe, 0x3aec, 0x6c34, 0x1, 0x1);
        gbc.writeMem(0x4656, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x541b);
        EXPECT(gbc.pc(), 0x4658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02F1
        gbc.setState(0xbcb9, 0x11dc, 0xee90, 0x18b0, 0xa2bb, 0x1cd3, 0x0, 0x1);
        gbc.writeMem(0xbcb9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x11dc);
        EXPECT(gbc.pc(), 0xbcbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb9), 0xcb);
        EXPECT(gbc.readMem(0xbcba), 0x4b);
        // CB 4B 02F2
        gbc.setState(0x953a, 0x952a, 0x8e0, 0x5799, 0x38f0, 0xb604, 0x0, 0x1);
        gbc.writeMem(0x953a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x952a);
        EXPECT(gbc.pc(), 0x953c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x953a), 0xcb);
        EXPECT(gbc.readMem(0x953b), 0x4b);
        // CB 4B 02F3
        gbc.setState(0x81df, 0xd666, 0xeed0, 0x86c9, 0x7007, 0xc341, 0x0, 0x0);
        gbc.writeMem(0x81df, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd666);
        EXPECT(gbc.pc(), 0x81e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81df), 0xcb);
        EXPECT(gbc.readMem(0x81e0), 0x4b);
        // CB 4B 02F4
        gbc.setState(0x12a1, 0x3e5d, 0xb230, 0x3a0a, 0xcbe3, 0x20c9, 0x1, 0x0);
        gbc.writeMem(0x12a1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3e5d);
        EXPECT(gbc.pc(), 0x12a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02F5
        gbc.setState(0x431d, 0xb065, 0x6ca0, 0x60e4, 0xed90, 0x3778, 0x0, 0x0);
        gbc.writeMem(0x431d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb065);
        EXPECT(gbc.pc(), 0x431f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02F7
        gbc.setState(0x5f89, 0xb7c6, 0xac60, 0x9efe, 0xd758, 0x1abc, 0x1, 0x1);
        gbc.writeMem(0x5f89, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb7c6);
        EXPECT(gbc.pc(), 0x5f8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02F8
        gbc.setState(0x13dd, 0x2f28, 0xccc0, 0x93f, 0xb579, 0x117, 0x1, 0x0);
        gbc.writeMem(0x13dd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2f28);
        EXPECT(gbc.pc(), 0x13df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02F9
        gbc.setState(0x3325, 0x642a, 0xef60, 0x5e70, 0x37ec, 0xb1be, 0x1, 0x1);
        gbc.writeMem(0x3325, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x642a);
        EXPECT(gbc.pc(), 0x3327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02FA
        gbc.setState(0x7322, 0x7a11, 0x9230, 0x40a7, 0xb06b, 0x31bf, 0x0, 0x1);
        gbc.writeMem(0x7322, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7a11);
        EXPECT(gbc.pc(), 0x7324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 02FC
        gbc.setState(0xb1fa, 0x2bf, 0xa6d0, 0x9465, 0x39fd, 0xce85, 0x1, 0x1);
        gbc.writeMem(0xb1fa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2bf);
        EXPECT(gbc.pc(), 0xb1fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1fa), 0xcb);
        EXPECT(gbc.readMem(0xb1fb), 0x4b);
        // CB 4B 02FD
        gbc.setState(0x4bd3, 0xb46b, 0x3a00, 0xa962, 0x36fd, 0x3297, 0x0, 0x1);
        gbc.writeMem(0x4bd3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb46b);
        EXPECT(gbc.pc(), 0x4bd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 02FE
        gbc.setState(0x9b18, 0xfc74, 0x5180, 0x64ef, 0x7546, 0x37cb, 0x0, 0x1);
        gbc.writeMem(0x9b18, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfc74);
        EXPECT(gbc.pc(), 0x9b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b18), 0xcb);
        EXPECT(gbc.readMem(0x9b19), 0x4b);
        // CB 4B 02FF
        gbc.setState(0xcf9f, 0x70a0, 0xf010, 0xcd7c, 0xa516, 0xd069, 0x0, 0x1);
        gbc.writeMem(0xcf9f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x70a0);
        EXPECT(gbc.pc(), 0xcfa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf9f), 0xcb);
        EXPECT(gbc.readMem(0xcfa0), 0x4b);
        // CB 4B 0300
        gbc.setState(0x5be6, 0xd333, 0xcee0, 0x281, 0x5f52, 0xeea4, 0x1, 0x1);
        gbc.writeMem(0x5be6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd333);
        EXPECT(gbc.pc(), 0x5be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0301
        gbc.setState(0x7a4b, 0x267, 0x7970, 0xe968, 0xf1f3, 0xca59, 0x0, 0x0);
        gbc.writeMem(0x7a4b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x267);
        EXPECT(gbc.pc(), 0x7a4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0302
        gbc.setState(0x742f, 0xf21d, 0xd2c0, 0xee79, 0x57cf, 0x78fe, 0x1, 0x0);
        gbc.writeMem(0x742f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf21d);
        EXPECT(gbc.pc(), 0x7431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0303
        gbc.setState(0xd22b, 0xd6f8, 0x3b40, 0x7fce, 0x3347, 0xb553, 0x0, 0x0);
        gbc.writeMem(0xd22b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd6f8);
        EXPECT(gbc.pc(), 0xd22d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd22b), 0xcb);
        EXPECT(gbc.readMem(0xd22c), 0x4b);
        // CB 4B 0304
        gbc.setState(0x69cf, 0xc23f, 0xb6b0, 0x4eba, 0xca8f, 0xf349, 0x1, 0x1);
        gbc.writeMem(0x69cf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc23f);
        EXPECT(gbc.pc(), 0x69d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0305
        gbc.setState(0xc116, 0x714e, 0x5970, 0x568b, 0xf475, 0xb484, 0x1, 0x1);
        gbc.writeMem(0xc116, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x714e);
        EXPECT(gbc.pc(), 0xc118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc116), 0xcb);
        EXPECT(gbc.readMem(0xc117), 0x4b);
        // CB 4B 0306
        gbc.setState(0x836a, 0xb9db, 0x8500, 0x6872, 0x3961, 0xba2e, 0x1, 0x1);
        gbc.writeMem(0x836a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb9db);
        EXPECT(gbc.pc(), 0x836c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x836a), 0xcb);
        EXPECT(gbc.readMem(0x836b), 0x4b);
        // CB 4B 0307
        gbc.setState(0x1ca8, 0x88b1, 0x7c40, 0x2319, 0x49ad, 0x1f96, 0x1, 0x1);
        gbc.writeMem(0x1ca8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x88b1);
        EXPECT(gbc.pc(), 0x1caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0308
        gbc.setState(0x152f, 0x58d8, 0xc860, 0x9ecc, 0x8f25, 0x6f40, 0x1, 0x0);
        gbc.writeMem(0x152f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x58d8);
        EXPECT(gbc.pc(), 0x1531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 030A
        gbc.setState(0x2c23, 0x5091, 0xdb10, 0x4331, 0xeba6, 0x1eb0, 0x1, 0x1);
        gbc.writeMem(0x2c23, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5091);
        EXPECT(gbc.pc(), 0x2c25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 030B
        gbc.setState(0xb17b, 0x98dd, 0x890, 0x7940, 0x3187, 0xb4, 0x1, 0x1);
        gbc.writeMem(0xb17b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x98dd);
        EXPECT(gbc.pc(), 0xb17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb17b), 0xcb);
        EXPECT(gbc.readMem(0xb17c), 0x4b);
        // CB 4B 030C
        gbc.setState(0x5c73, 0xe925, 0xa610, 0xa0a1, 0xffcf, 0xc945, 0x0, 0x1);
        gbc.writeMem(0x5c73, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe925);
        EXPECT(gbc.pc(), 0x5c75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 030D
        gbc.setState(0xe3e8, 0x8263, 0xdd90, 0x6d8b, 0x1063, 0x533a, 0x0, 0x0);
        gbc.writeMem(0xe3e8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8263);
        EXPECT(gbc.pc(), 0xe3ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3e8), 0xcb);
        EXPECT(gbc.readMem(0xe3e9), 0x4b);
        // CB 4B 030E
        gbc.setState(0xb824, 0x9849, 0xcd80, 0x3a8d, 0xc27b, 0x71ea, 0x0, 0x1);
        gbc.writeMem(0xb824, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9849);
        EXPECT(gbc.pc(), 0xb826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb824), 0xcb);
        EXPECT(gbc.readMem(0xb825), 0x4b);
        // CB 4B 030F
        gbc.setState(0x87d8, 0x23f0, 0x8e0, 0x2a45, 0x4b45, 0x4dc6, 0x0, 0x1);
        gbc.writeMem(0x87d8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x23f0);
        EXPECT(gbc.pc(), 0x87da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d8), 0xcb);
        EXPECT(gbc.readMem(0x87d9), 0x4b);
        // CB 4B 0310
        gbc.setState(0x7b1e, 0x4f8d, 0x2d70, 0xbb34, 0xfd9c, 0xd59, 0x0, 0x1);
        gbc.writeMem(0x7b1e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4f8d);
        EXPECT(gbc.pc(), 0x7b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0311
        gbc.setState(0x9575, 0xf692, 0xbf80, 0x849e, 0xb6a0, 0xe2fc, 0x0, 0x1);
        gbc.writeMem(0x9575, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf692);
        EXPECT(gbc.pc(), 0x9577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9575), 0xcb);
        EXPECT(gbc.readMem(0x9576), 0x4b);
        // CB 4B 0312
        gbc.setState(0xf8b, 0xf799, 0xf820, 0xca3d, 0xcd01, 0x261c, 0x0, 0x0);
        gbc.writeMem(0xf8b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf799);
        EXPECT(gbc.pc(), 0xf8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0313
        gbc.setState(0xa63b, 0xaa0, 0x8c40, 0x3c95, 0x75ab, 0x82cf, 0x1, 0x1);
        gbc.writeMem(0xa63b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xaa0);
        EXPECT(gbc.pc(), 0xa63d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa63b), 0xcb);
        EXPECT(gbc.readMem(0xa63c), 0x4b);
        // CB 4B 0315
        gbc.setState(0x98c2, 0xbc1, 0xf9c0, 0x98dd, 0x83a0, 0x504b, 0x0, 0x0);
        gbc.writeMem(0x98c2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbc1);
        EXPECT(gbc.pc(), 0x98c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c2), 0xcb);
        EXPECT(gbc.readMem(0x98c3), 0x4b);
        // CB 4B 0316
        gbc.setState(0xd03e, 0xf9f4, 0x5800, 0x8360, 0x9bff, 0x1f60, 0x0, 0x1);
        gbc.writeMem(0xd03e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf9f4);
        EXPECT(gbc.pc(), 0xd040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd03e), 0xcb);
        EXPECT(gbc.readMem(0xd03f), 0x4b);
        // CB 4B 0317
        gbc.setState(0xdfa0, 0xdee1, 0xd730, 0x530d, 0x1022, 0x4f6, 0x1, 0x0);
        gbc.writeMem(0xdfa0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdee1);
        EXPECT(gbc.pc(), 0xdfa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa0), 0xcb);
        EXPECT(gbc.readMem(0xdfa1), 0x4b);
        // CB 4B 0318
        gbc.setState(0xa80e, 0xa70, 0x5870, 0xe93e, 0xf283, 0x1299, 0x0, 0x1);
        gbc.writeMem(0xa80e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa70);
        EXPECT(gbc.pc(), 0xa810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa80e), 0xcb);
        EXPECT(gbc.readMem(0xa80f), 0x4b);
        // CB 4B 0319
        gbc.setState(0xc7e8, 0x9c57, 0x6450, 0x56a5, 0x7777, 0x59e, 0x0, 0x1);
        gbc.writeMem(0xc7e8, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9c57);
        EXPECT(gbc.pc(), 0xc7ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7e8), 0xcb);
        EXPECT(gbc.readMem(0xc7e9), 0x4b);
        // CB 4B 031A
        gbc.setState(0xb1aa, 0xeee6, 0x2500, 0x5e9b, 0x7508, 0x93ee, 0x1, 0x0);
        gbc.writeMem(0xb1aa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xeee6);
        EXPECT(gbc.pc(), 0xb1ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1aa), 0xcb);
        EXPECT(gbc.readMem(0xb1ab), 0x4b);
        // CB 4B 031B
        gbc.setState(0x3513, 0x3c54, 0x96e0, 0x68a2, 0xb379, 0x946f, 0x0, 0x0);
        gbc.writeMem(0x3513, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x3c54);
        EXPECT(gbc.pc(), 0x3515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 031C
        gbc.setState(0xa0bd, 0x2dee, 0xa8e0, 0xf772, 0x295b, 0x1e93, 0x0, 0x0);
        gbc.writeMem(0xa0bd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2dee);
        EXPECT(gbc.pc(), 0xa0bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0bd), 0xcb);
        EXPECT(gbc.readMem(0xa0be), 0x4b);
        // CB 4B 031D
        gbc.setState(0x2948, 0x39c8, 0x42d0, 0x4b1a, 0x8a82, 0xcb15, 0x1, 0x1);
        gbc.writeMem(0x2948, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x39c8);
        EXPECT(gbc.pc(), 0x294a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 031E
        gbc.setState(0x20f5, 0x7c75, 0x90a0, 0xfb2f, 0xe7f9, 0xa89d, 0x0, 0x1);
        gbc.writeMem(0x20f5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7c75);
        EXPECT(gbc.pc(), 0x20f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 031F
        gbc.setState(0xd829, 0x7c28, 0xc9b0, 0xa66b, 0x5fb4, 0x7d69, 0x1, 0x1);
        gbc.writeMem(0xd829, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7c28);
        EXPECT(gbc.pc(), 0xd82b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd829), 0xcb);
        EXPECT(gbc.readMem(0xd82a), 0x4b);
        // CB 4B 0320
        gbc.setState(0xafc4, 0x462a, 0xade0, 0x2fe9, 0x832c, 0xe882, 0x1, 0x0);
        gbc.writeMem(0xafc4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x462a);
        EXPECT(gbc.pc(), 0xafc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc4), 0xcb);
        EXPECT(gbc.readMem(0xafc5), 0x4b);
        // CB 4B 0321
        gbc.setState(0xe6b6, 0x233a, 0xd440, 0x9224, 0x4d27, 0xc6ed, 0x0, 0x0);
        gbc.writeMem(0xe6b6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x233a);
        EXPECT(gbc.pc(), 0xe6b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6b6), 0xcb);
        EXPECT(gbc.readMem(0xe6b7), 0x4b);
        // CB 4B 0322
        gbc.setState(0x11b7, 0x4a2b, 0xe940, 0x2328, 0x60a0, 0x383, 0x0, 0x1);
        gbc.writeMem(0x11b7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4a2b);
        EXPECT(gbc.pc(), 0x11b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0323
        gbc.setState(0xa65b, 0x4471, 0x4060, 0x6e1e, 0x1f55, 0xfa11, 0x1, 0x1);
        gbc.writeMem(0xa65b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4471);
        EXPECT(gbc.pc(), 0xa65d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa65b), 0xcb);
        EXPECT(gbc.readMem(0xa65c), 0x4b);
        // CB 4B 0324
        gbc.setState(0x595f, 0x7400, 0xfaf0, 0x985d, 0xf869, 0x5ec5, 0x1, 0x1);
        gbc.writeMem(0x595f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7400);
        EXPECT(gbc.pc(), 0x5961);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0325
        gbc.setState(0x4b39, 0x237c, 0xe50, 0x292c, 0x562a, 0x6f92, 0x1, 0x0);
        gbc.writeMem(0x4b39, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x237c);
        EXPECT(gbc.pc(), 0x4b3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0326
        gbc.setState(0x467c, 0x39c3, 0x75c0, 0x7610, 0x5fa7, 0xd707, 0x0, 0x0);
        gbc.writeMem(0x467c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x39c3);
        EXPECT(gbc.pc(), 0x467e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0327
        gbc.setState(0xd6d1, 0x685f, 0xa240, 0x7622, 0xa482, 0xd69b, 0x1, 0x1);
        gbc.writeMem(0xd6d1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x685f);
        EXPECT(gbc.pc(), 0xd6d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6d1), 0xcb);
        EXPECT(gbc.readMem(0xd6d2), 0x4b);
        // CB 4B 0328
        gbc.setState(0x7c41, 0x3d69, 0x53b0, 0x2976, 0xcd56, 0x5754, 0x1, 0x0);
        gbc.writeMem(0x7c41, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3d69);
        EXPECT(gbc.pc(), 0x7c43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0329
        gbc.setState(0xb354, 0x13d, 0x9f80, 0xf6a3, 0xc766, 0xeb38, 0x0, 0x1);
        gbc.writeMem(0xb354, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x13d);
        EXPECT(gbc.pc(), 0xb356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb354), 0xcb);
        EXPECT(gbc.readMem(0xb355), 0x4b);
        // CB 4B 032A
        gbc.setState(0x2d49, 0x1a67, 0x2b30, 0xd71d, 0x4222, 0x7a45, 0x0, 0x1);
        gbc.writeMem(0x2d49, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1a67);
        EXPECT(gbc.pc(), 0x2d4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 032B
        gbc.setState(0xe9a3, 0xc098, 0x5040, 0x3593, 0x102e, 0xcb, 0x0, 0x1);
        gbc.writeMem(0xe9a3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc098);
        EXPECT(gbc.pc(), 0xe9a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a3), 0xcb);
        EXPECT(gbc.readMem(0xe9a4), 0x4b);
        // CB 4B 032D
        gbc.setState(0x7f20, 0x2dbe, 0x9c90, 0x4f80, 0x7e7b, 0xe84e, 0x0, 0x1);
        gbc.writeMem(0x7f20, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2dbe);
        EXPECT(gbc.pc(), 0x7f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 032E
        gbc.setState(0x8baa, 0xa5a4, 0x1ae0, 0xcec2, 0xb952, 0x8d2f, 0x0, 0x0);
        gbc.writeMem(0x8baa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa5a4);
        EXPECT(gbc.pc(), 0x8bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8baa), 0xcb);
        EXPECT(gbc.readMem(0x8bab), 0x4b);
        // CB 4B 032F
        gbc.setState(0x4533, 0x279b, 0xd0, 0xced7, 0xca3f, 0xd217, 0x0, 0x0);
        gbc.writeMem(0x4533, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x279b);
        EXPECT(gbc.pc(), 0x4535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0330
        gbc.setState(0x3702, 0x9455, 0x5260, 0xa395, 0x8fc5, 0x2e8e, 0x0, 0x0);
        gbc.writeMem(0x3702, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9455);
        EXPECT(gbc.pc(), 0x3704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0331
        gbc.setState(0xdf0, 0xb303, 0x4c10, 0x606b, 0x1d95, 0x7385, 0x1, 0x1);
        gbc.writeMem(0xdf0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb303);
        EXPECT(gbc.pc(), 0xdf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0332
        gbc.setState(0x1ee0, 0x7182, 0x3440, 0x4d12, 0xe55a, 0xdc08, 0x1, 0x1);
        gbc.writeMem(0x1ee0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7182);
        EXPECT(gbc.pc(), 0x1ee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0333
        gbc.setState(0xe1ea, 0xfd1e, 0xe130, 0x7b0, 0x868a, 0x6935, 0x0, 0x1);
        gbc.writeMem(0xe1ea, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfd1e);
        EXPECT(gbc.pc(), 0xe1ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1ea), 0xcb);
        EXPECT(gbc.readMem(0xe1eb), 0x4b);
        // CB 4B 0335
        gbc.setState(0xe542, 0x4e83, 0xc9a0, 0xf1bc, 0xf1ea, 0x7452, 0x0, 0x1);
        gbc.writeMem(0xe542, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4e83);
        EXPECT(gbc.pc(), 0xe544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe542), 0xcb);
        EXPECT(gbc.readMem(0xe543), 0x4b);
        // CB 4B 0336
        gbc.setState(0x990, 0x8673, 0x8bb0, 0xcef1, 0x8bdd, 0xedb0, 0x1, 0x1);
        gbc.writeMem(0x990, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8673);
        EXPECT(gbc.pc(), 0x992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0337
        gbc.setState(0x4a48, 0xeba8, 0x9bb0, 0x926a, 0x2d6e, 0xbee4, 0x1, 0x1);
        gbc.writeMem(0x4a48, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xeba8);
        EXPECT(gbc.pc(), 0x4a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0339
        gbc.setState(0x6642, 0xfdd3, 0x73c0, 0x7e11, 0xd8f7, 0xbe6f, 0x0, 0x1);
        gbc.writeMem(0x6642, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfdd3);
        EXPECT(gbc.pc(), 0x6644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 033A
        gbc.setState(0xb3b1, 0x1ef6, 0xcbb0, 0x46ad, 0x3e1a, 0xdb16, 0x0, 0x0);
        gbc.writeMem(0xb3b1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1ef6);
        EXPECT(gbc.pc(), 0xb3b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3b1), 0xcb);
        EXPECT(gbc.readMem(0xb3b2), 0x4b);
        // CB 4B 033B
        gbc.setState(0x1b5c, 0x4879, 0x7a40, 0x53e0, 0x9091, 0xb0a1, 0x0, 0x0);
        gbc.writeMem(0x1b5c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4879);
        EXPECT(gbc.pc(), 0x1b5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 033C
        gbc.setState(0x3c75, 0x3c9f, 0xd2f0, 0xf302, 0xe8ee, 0xba24, 0x0, 0x1);
        gbc.writeMem(0x3c75, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3c9f);
        EXPECT(gbc.pc(), 0x3c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 033D
        gbc.setState(0x90d9, 0x3df3, 0xddb0, 0x6e0, 0x2c0a, 0x60f5, 0x1, 0x1);
        gbc.writeMem(0x90d9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3df3);
        EXPECT(gbc.pc(), 0x90db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d9), 0xcb);
        EXPECT(gbc.readMem(0x90da), 0x4b);
        // CB 4B 033E
        gbc.setState(0x57a0, 0x67ec, 0x18e0, 0x70c9, 0x4805, 0x496c, 0x0, 0x1);
        gbc.writeMem(0x57a0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x67ec);
        EXPECT(gbc.pc(), 0x57a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 033F
        gbc.setState(0x5e03, 0xa904, 0xf150, 0xa719, 0x2085, 0xd2da, 0x1, 0x1);
        gbc.writeMem(0x5e03, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa904);
        EXPECT(gbc.pc(), 0x5e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0340
        gbc.setState(0xa04f, 0xe70b, 0x7ad0, 0x695b, 0x5dd, 0x4553, 0x0, 0x1);
        gbc.writeMem(0xa04f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe70b);
        EXPECT(gbc.pc(), 0xa051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa04f), 0xcb);
        EXPECT(gbc.readMem(0xa050), 0x4b);
        // CB 4B 0341
        gbc.setState(0xea2, 0xb105, 0x6000, 0x4b21, 0xb8d3, 0xc18a, 0x0, 0x1);
        gbc.writeMem(0xea2, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb105);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0342
        gbc.setState(0xee68, 0xc154, 0x1420, 0x31c, 0xe834, 0x7474, 0x0, 0x0);
        gbc.writeMem(0xee68, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc154);
        EXPECT(gbc.pc(), 0xee6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee68), 0xcb);
        EXPECT(gbc.readMem(0xee69), 0x4b);
        // CB 4B 0343
        gbc.setState(0xc541, 0x658b, 0x8f30, 0xc026, 0x89b5, 0x88b0, 0x1, 0x1);
        gbc.writeMem(0xc541, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x658b);
        EXPECT(gbc.pc(), 0xc543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc541), 0xcb);
        EXPECT(gbc.readMem(0xc542), 0x4b);
        // CB 4B 0344
        gbc.setState(0x9861, 0xb414, 0xf570, 0xa5f7, 0x8a35, 0x343c, 0x1, 0x1);
        gbc.writeMem(0x9861, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb414);
        EXPECT(gbc.pc(), 0x9863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9861), 0xcb);
        EXPECT(gbc.readMem(0x9862), 0x4b);
        // CB 4B 0345
        gbc.setState(0x9ee4, 0x63f9, 0xc2d0, 0xb986, 0x607a, 0x2f67, 0x1, 0x1);
        gbc.writeMem(0x9ee4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x63f9);
        EXPECT(gbc.pc(), 0x9ee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee4), 0xcb);
        EXPECT(gbc.readMem(0x9ee5), 0x4b);
        // CB 4B 0346
        gbc.setState(0xadbf, 0xd30d, 0x5f0, 0x6eca, 0x52b4, 0x8194, 0x0, 0x0);
        gbc.writeMem(0xadbf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd30d);
        EXPECT(gbc.pc(), 0xadc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadbf), 0xcb);
        EXPECT(gbc.readMem(0xadc0), 0x4b);
        // CB 4B 0348
        gbc.setState(0x3da6, 0x9bc9, 0x3590, 0x97c8, 0x86be, 0x113e, 0x0, 0x1);
        gbc.writeMem(0x3da6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9bc9);
        EXPECT(gbc.pc(), 0x3da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0349
        gbc.setState(0xd3a5, 0xc901, 0xa070, 0x5971, 0xa905, 0x20dd, 0x1, 0x1);
        gbc.writeMem(0xd3a5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc901);
        EXPECT(gbc.pc(), 0xd3a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3a5), 0xcb);
        EXPECT(gbc.readMem(0xd3a6), 0x4b);
        // CB 4B 034A
        gbc.setState(0xa5a0, 0x2ca2, 0x82b0, 0xc937, 0x9ca0, 0x4b9f, 0x0, 0x0);
        gbc.writeMem(0xa5a0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2ca2);
        EXPECT(gbc.pc(), 0xa5a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5a0), 0xcb);
        EXPECT(gbc.readMem(0xa5a1), 0x4b);
        // CB 4B 034B
        gbc.setState(0xe676, 0xe26c, 0xa4c0, 0xf0da, 0x26e0, 0x1636, 0x0, 0x0);
        gbc.writeMem(0xe676, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xe26c);
        EXPECT(gbc.pc(), 0xe678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe676), 0xcb);
        EXPECT(gbc.readMem(0xe677), 0x4b);
        // CB 4B 034C
        gbc.setState(0x6f35, 0x5e3c, 0x9930, 0x203b, 0x5710, 0x1b37, 0x0, 0x0);
        gbc.writeMem(0x6f35, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5e3c);
        EXPECT(gbc.pc(), 0x6f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 034D
        gbc.setState(0xc018, 0x9954, 0x6830, 0x5778, 0x1b77, 0xf7b, 0x1, 0x0);
        gbc.writeMem(0xc018, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9954);
        EXPECT(gbc.pc(), 0xc01a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc018), 0xcb);
        EXPECT(gbc.readMem(0xc019), 0x4b);
        // CB 4B 034E
        gbc.setState(0xa3a9, 0xcbf2, 0xbd70, 0xd6f, 0x3376, 0x5d5c, 0x0, 0x1);
        gbc.writeMem(0xa3a9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcbf2);
        EXPECT(gbc.pc(), 0xa3ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3a9), 0xcb);
        EXPECT(gbc.readMem(0xa3aa), 0x4b);
        // CB 4B 034F
        gbc.setState(0xe60c, 0x7f54, 0xcca0, 0x53a8, 0xbe63, 0xaef2, 0x1, 0x1);
        gbc.writeMem(0xe60c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7f54);
        EXPECT(gbc.pc(), 0xe60e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60c), 0xcb);
        EXPECT(gbc.readMem(0xe60d), 0x4b);
        // CB 4B 0350
        gbc.setState(0x3cb6, 0x3e37, 0xc070, 0x6fa2, 0xcce1, 0x2770, 0x1, 0x1);
        gbc.writeMem(0x3cb6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3e37);
        EXPECT(gbc.pc(), 0x3cb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0351
        gbc.setState(0x19da, 0x1536, 0x2780, 0xa6d5, 0x7903, 0xa82b, 0x1, 0x0);
        gbc.writeMem(0x19da, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1536);
        EXPECT(gbc.pc(), 0x19dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0352
        gbc.setState(0xdeec, 0x42c4, 0x92a0, 0x1001, 0xbab5, 0x1324, 0x0, 0x0);
        gbc.writeMem(0xdeec, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x42c4);
        EXPECT(gbc.pc(), 0xdeee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeec), 0xcb);
        EXPECT(gbc.readMem(0xdeed), 0x4b);
        // CB 4B 0353
        gbc.setState(0x42ca, 0xf8d1, 0x4900, 0xbc6d, 0xbb6a, 0xa3d6, 0x1, 0x0);
        gbc.writeMem(0x42ca, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf8d1);
        EXPECT(gbc.pc(), 0x42cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0354
        gbc.setState(0xd63a, 0x9ea5, 0x7a90, 0xc39f, 0x5745, 0x6c59, 0x0, 0x0);
        gbc.writeMem(0xd63a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9ea5);
        EXPECT(gbc.pc(), 0xd63c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd63a), 0xcb);
        EXPECT(gbc.readMem(0xd63b), 0x4b);
        // CB 4B 0355
        gbc.setState(0x22c3, 0x75e1, 0xd390, 0x9077, 0xbe06, 0x917e, 0x0, 0x1);
        gbc.writeMem(0x22c3, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x75e1);
        EXPECT(gbc.pc(), 0x22c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0356
        gbc.setState(0xcfe0, 0x5aa0, 0x1f10, 0xb584, 0x5c70, 0xafb4, 0x0, 0x1);
        gbc.writeMem(0xcfe0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5aa0);
        EXPECT(gbc.pc(), 0xcfe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe0), 0xcb);
        EXPECT(gbc.readMem(0xcfe1), 0x4b);
        // CB 4B 0357
        gbc.setState(0x7f1c, 0x39e9, 0x8620, 0xcb2c, 0x87d5, 0x3580, 0x1, 0x1);
        gbc.writeMem(0x7f1c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x39e9);
        EXPECT(gbc.pc(), 0x7f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0358
        gbc.setState(0xac08, 0x2fb4, 0x1260, 0x9b25, 0x462c, 0x47f, 0x1, 0x1);
        gbc.writeMem(0xac08, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2fb4);
        EXPECT(gbc.pc(), 0xac0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac08), 0xcb);
        EXPECT(gbc.readMem(0xac09), 0x4b);
        // CB 4B 0359
        gbc.setState(0x39b1, 0x5825, 0x1670, 0x2dac, 0xb49, 0xb4be, 0x1, 0x1);
        gbc.writeMem(0x39b1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5825);
        EXPECT(gbc.pc(), 0x39b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 035B
        gbc.setState(0xecfa, 0x8340, 0xf4a0, 0x3245, 0x728f, 0x90ea, 0x1, 0x0);
        gbc.writeMem(0xecfa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8340);
        EXPECT(gbc.pc(), 0xecfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecfa), 0xcb);
        EXPECT(gbc.readMem(0xecfb), 0x4b);
        // CB 4B 035C
        gbc.setState(0x44e5, 0x9a90, 0x6730, 0x29d1, 0x8c4c, 0x2a71, 0x1, 0x0);
        gbc.writeMem(0x44e5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9a90);
        EXPECT(gbc.pc(), 0x44e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 035D
        gbc.setState(0x8f85, 0x9c88, 0xcbb0, 0x685e, 0x4861, 0x358c, 0x1, 0x0);
        gbc.writeMem(0x8f85, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9c88);
        EXPECT(gbc.pc(), 0x8f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f85), 0xcb);
        EXPECT(gbc.readMem(0x8f86), 0x4b);
        // CB 4B 035E
        gbc.setState(0x451c, 0xb2fb, 0x9e50, 0x24db, 0x936c, 0x881c, 0x0, 0x1);
        gbc.writeMem(0x451c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb2fb);
        EXPECT(gbc.pc(), 0x451e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 035F
        gbc.setState(0x54ef, 0x71ef, 0x2180, 0x14a0, 0xb931, 0x716c, 0x1, 0x1);
        gbc.writeMem(0x54ef, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x71ef);
        EXPECT(gbc.pc(), 0x54f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0361
        gbc.setState(0xf79, 0x2cb9, 0x8950, 0x696a, 0xaa85, 0x6352, 0x0, 0x0);
        gbc.writeMem(0xf79, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2cb9);
        EXPECT(gbc.pc(), 0xf7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0362
        gbc.setState(0x86cd, 0xbcc9, 0x1830, 0x813b, 0x177e, 0x6448, 0x1, 0x0);
        gbc.writeMem(0x86cd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbcc9);
        EXPECT(gbc.pc(), 0x86cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86cd), 0xcb);
        EXPECT(gbc.readMem(0x86ce), 0x4b);
        // CB 4B 0363
        gbc.setState(0x6b0b, 0xa614, 0x18b0, 0x1122, 0xb530, 0xb5e4, 0x1, 0x0);
        gbc.writeMem(0x6b0b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa614);
        EXPECT(gbc.pc(), 0x6b0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0365
        gbc.setState(0xd6f0, 0xcbda, 0x6820, 0x24cb, 0x1fe1, 0xa1f3, 0x0, 0x1);
        gbc.writeMem(0xd6f0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xcbda);
        EXPECT(gbc.pc(), 0xd6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6f0), 0xcb);
        EXPECT(gbc.readMem(0xd6f1), 0x4b);
        // CB 4B 0366
        gbc.setState(0x4aef, 0x7ee6, 0xe060, 0x6964, 0xd8d2, 0x727e, 0x0, 0x1);
        gbc.writeMem(0x4aef, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7ee6);
        EXPECT(gbc.pc(), 0x4af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0368
        gbc.setState(0xb4eb, 0xe7c9, 0x80a0, 0x5bb4, 0xb925, 0x8024, 0x1, 0x0);
        gbc.writeMem(0xb4eb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe7c9);
        EXPECT(gbc.pc(), 0xb4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4eb), 0xcb);
        EXPECT(gbc.readMem(0xb4ec), 0x4b);
        // CB 4B 0369
        gbc.setState(0x472f, 0xd355, 0x29a0, 0x9fe8, 0x4dcd, 0xa0e5, 0x1, 0x1);
        gbc.writeMem(0x472f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd355);
        EXPECT(gbc.pc(), 0x4731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 036A
        gbc.setState(0xe25e, 0xbe4b, 0x54a0, 0xf390, 0xacb9, 0xe060, 0x0, 0x1);
        gbc.writeMem(0xe25e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbe4b);
        EXPECT(gbc.pc(), 0xe260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe25e), 0xcb);
        EXPECT(gbc.readMem(0xe25f), 0x4b);
        // CB 4B 036B
        gbc.setState(0x555f, 0x32a2, 0x7640, 0x7180, 0x9418, 0xf0a0, 0x1, 0x0);
        gbc.writeMem(0x555f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x32a2);
        EXPECT(gbc.pc(), 0x5561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 036C
        gbc.setState(0xdfc7, 0x3b84, 0x9380, 0xf20a, 0xdb73, 0x2b9a, 0x0, 0x1);
        gbc.writeMem(0xdfc7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3b84);
        EXPECT(gbc.pc(), 0xdfc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc7), 0xcb);
        EXPECT(gbc.readMem(0xdfc8), 0x4b);
        // CB 4B 036D
        gbc.setState(0x5128, 0xf134, 0xa8e0, 0x9c0f, 0xefba, 0x39f2, 0x1, 0x1);
        gbc.writeMem(0x5128, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf134);
        EXPECT(gbc.pc(), 0x512a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 036F
        gbc.setState(0xcebd, 0x325e, 0x8560, 0x17e6, 0xa7c, 0xe0ef, 0x0, 0x0);
        gbc.writeMem(0xcebd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x325e);
        EXPECT(gbc.pc(), 0xcebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcebd), 0xcb);
        EXPECT(gbc.readMem(0xcebe), 0x4b);
        // CB 4B 0370
        gbc.setState(0x464a, 0x616a, 0xede0, 0x1270, 0x90ef, 0xe8b4, 0x0, 0x0);
        gbc.writeMem(0x464a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x616a);
        EXPECT(gbc.pc(), 0x464c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0371
        gbc.setState(0x2997, 0xf7de, 0xe450, 0x7ea2, 0x4e36, 0x73ac, 0x1, 0x1);
        gbc.writeMem(0x2997, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xf7de);
        EXPECT(gbc.pc(), 0x2999);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0372
        gbc.setState(0x13bb, 0xdd60, 0xe360, 0xf67c, 0xc71f, 0x9337, 0x1, 0x1);
        gbc.writeMem(0x13bb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdd60);
        EXPECT(gbc.pc(), 0x13bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0373
        gbc.setState(0x4c6b, 0x6a4a, 0x2a0, 0x675b, 0xa99c, 0xeb92, 0x0, 0x1);
        gbc.writeMem(0x4c6b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6a4a);
        EXPECT(gbc.pc(), 0x4c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0374
        gbc.setState(0x401f, 0x6dd2, 0xf2f0, 0xdaf1, 0x185f, 0x4148, 0x1, 0x0);
        gbc.writeMem(0x401f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6dd2);
        EXPECT(gbc.pc(), 0x4021);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0375
        gbc.setState(0xb0a6, 0x3c5b, 0xf890, 0x28a8, 0xf7de, 0x5ea1, 0x1, 0x1);
        gbc.writeMem(0xb0a6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3c5b);
        EXPECT(gbc.pc(), 0xb0a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a6), 0xcb);
        EXPECT(gbc.readMem(0xb0a7), 0x4b);
        // CB 4B 0376
        gbc.setState(0x3424, 0x5ac5, 0x1f70, 0xa5aa, 0xdc51, 0x7309, 0x1, 0x1);
        gbc.writeMem(0x3424, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5ac5);
        EXPECT(gbc.pc(), 0x3426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0377
        gbc.setState(0xb6e1, 0x31fe, 0x6b70, 0xc852, 0xbbca, 0x625d, 0x0, 0x0);
        gbc.writeMem(0xb6e1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x31fe);
        EXPECT(gbc.pc(), 0xb6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e1), 0xcb);
        EXPECT(gbc.readMem(0xb6e2), 0x4b);
        // CB 4B 0378
        gbc.setState(0x15df, 0x2e11, 0x3610, 0x94c4, 0x901f, 0x547a, 0x0, 0x0);
        gbc.writeMem(0x15df, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2e11);
        EXPECT(gbc.pc(), 0x15e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0379
        gbc.setState(0xd99e, 0xbb49, 0x20a0, 0xd3fc, 0xa26, 0xa64f, 0x1, 0x0);
        gbc.writeMem(0xd99e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xbb49);
        EXPECT(gbc.pc(), 0xd9a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99e), 0xcb);
        EXPECT(gbc.readMem(0xd99f), 0x4b);
        // CB 4B 037A
        gbc.setState(0x8331, 0xd2f2, 0x2d30, 0x6042, 0xa7c2, 0xb50c, 0x1, 0x0);
        gbc.writeMem(0x8331, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd2f2);
        EXPECT(gbc.pc(), 0x8333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8331), 0xcb);
        EXPECT(gbc.readMem(0x8332), 0x4b);
        // CB 4B 037B
        gbc.setState(0x66bc, 0x6bd9, 0x9640, 0xff19, 0x74e3, 0xfbc3, 0x1, 0x1);
        gbc.writeMem(0x66bc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6bd9);
        EXPECT(gbc.pc(), 0x66be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 037C
        gbc.setState(0xd085, 0x29be, 0xbbc0, 0xfa2c, 0x3f20, 0xebb1, 0x0, 0x0);
        gbc.writeMem(0xd085, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x29be);
        EXPECT(gbc.pc(), 0xd087);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd085), 0xcb);
        EXPECT(gbc.readMem(0xd086), 0x4b);
        // CB 4B 037D
        gbc.setState(0x6fef, 0x450, 0x74c0, 0x1253, 0x5e56, 0x5d5e, 0x0, 0x0);
        gbc.writeMem(0x6fef, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x450);
        EXPECT(gbc.pc(), 0x6ff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 037E
        gbc.setState(0x19e7, 0x6482, 0xb80, 0x8c97, 0xc21, 0x7861, 0x1, 0x0);
        gbc.writeMem(0x19e7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6482);
        EXPECT(gbc.pc(), 0x19e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 037F
        gbc.setState(0xdca1, 0x1273, 0xe110, 0x4931, 0x213c, 0x96c2, 0x1, 0x0);
        gbc.writeMem(0xdca1, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1273);
        EXPECT(gbc.pc(), 0xdca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdca1), 0xcb);
        EXPECT(gbc.readMem(0xdca2), 0x4b);
        // CB 4B 0380
        gbc.setState(0x7dcc, 0x42d7, 0xc9b0, 0xeeb3, 0x558d, 0x3940, 0x1, 0x0);
        gbc.writeMem(0x7dcc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x42d7);
        EXPECT(gbc.pc(), 0x7dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0381
        gbc.setState(0x6cd6, 0xde08, 0xff00, 0xfb48, 0xab48, 0xd7ff, 0x1, 0x1);
        gbc.writeMem(0x6cd6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xde08);
        EXPECT(gbc.pc(), 0x6cd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0382
        gbc.setState(0x9914, 0x8466, 0x2480, 0xf5ac, 0xfb50, 0x3c33, 0x1, 0x1);
        gbc.writeMem(0x9914, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8466);
        EXPECT(gbc.pc(), 0x9916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9914), 0xcb);
        EXPECT(gbc.readMem(0x9915), 0x4b);
        // CB 4B 0383
        gbc.setState(0x7eb7, 0xe85d, 0x6030, 0x1729, 0x175d, 0xeffa, 0x1, 0x1);
        gbc.writeMem(0x7eb7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe85d);
        EXPECT(gbc.pc(), 0x7eb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0384
        gbc.setState(0x2d89, 0xf2a4, 0xf20, 0x73ac, 0x23a9, 0x191f, 0x0, 0x0);
        gbc.writeMem(0x2d89, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf2a4);
        EXPECT(gbc.pc(), 0x2d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0385
        gbc.setState(0x65ca, 0xdfe6, 0x6a90, 0x67c2, 0x9622, 0x63d, 0x1, 0x1);
        gbc.writeMem(0x65ca, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xdfe6);
        EXPECT(gbc.pc(), 0x65cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0386
        gbc.setState(0x8318, 0x7f98, 0x23d0, 0xbd6c, 0xcadd, 0x9710, 0x0, 0x1);
        gbc.writeMem(0x8318, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7f98);
        EXPECT(gbc.pc(), 0x831a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8318), 0xcb);
        EXPECT(gbc.readMem(0x8319), 0x4b);
        // CB 4B 0387
        gbc.setState(0x88f6, 0x977, 0x8720, 0x2294, 0x28d8, 0xd27f, 0x1, 0x1);
        gbc.writeMem(0x88f6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x977);
        EXPECT(gbc.pc(), 0x88f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f6), 0xcb);
        EXPECT(gbc.readMem(0x88f7), 0x4b);
        // CB 4B 0388
        gbc.setState(0x6aff, 0x1f0b, 0x5580, 0x274, 0x29cb, 0x7431, 0x1, 0x1);
        gbc.writeMem(0x6aff, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1f0b);
        EXPECT(gbc.pc(), 0x6b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0389
        gbc.setState(0x4a7e, 0x8114, 0x6320, 0x65f9, 0x9566, 0x438a, 0x1, 0x1);
        gbc.writeMem(0x4a7e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8114);
        EXPECT(gbc.pc(), 0x4a80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 038A
        gbc.setState(0x4b29, 0xb312, 0x4620, 0xe2c6, 0xae98, 0x7960, 0x0, 0x0);
        gbc.writeMem(0x4b29, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb312);
        EXPECT(gbc.pc(), 0x4b2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 038B
        gbc.setState(0x33e, 0x61ef, 0xba60, 0xc345, 0x510, 0xa10a, 0x1, 0x1);
        gbc.writeMem(0x33e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x61ef);
        EXPECT(gbc.pc(), 0x340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 038C
        gbc.setState(0xccbc, 0x1b13, 0x4bf0, 0x5563, 0x2126, 0x31ff, 0x1, 0x1);
        gbc.writeMem(0xccbc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1b13);
        EXPECT(gbc.pc(), 0xccbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccbc), 0xcb);
        EXPECT(gbc.readMem(0xccbd), 0x4b);
        // CB 4B 038E
        gbc.setState(0x71ed, 0xdb5c, 0xc140, 0xbf7a, 0x9a78, 0xf755, 0x0, 0x1);
        gbc.writeMem(0x71ed, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xdb5c);
        EXPECT(gbc.pc(), 0x71ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 038F
        gbc.setState(0x9443, 0xadfb, 0x2cb0, 0xeb5b, 0xd77f, 0x8ba5, 0x1, 0x1);
        gbc.writeMem(0x9443, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xadfb);
        EXPECT(gbc.pc(), 0x9445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9443), 0xcb);
        EXPECT(gbc.readMem(0x9444), 0x4b);
        // CB 4B 0390
        gbc.setState(0xd425, 0x2bb0, 0x210, 0x94c7, 0x1064, 0xc103, 0x1, 0x1);
        gbc.writeMem(0xd425, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2bb0);
        EXPECT(gbc.pc(), 0xd427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd425), 0xcb);
        EXPECT(gbc.readMem(0xd426), 0x4b);
        // CB 4B 0391
        gbc.setState(0xb79, 0x1266, 0x2cc0, 0x72cb, 0xc65c, 0xebf2, 0x0, 0x1);
        gbc.writeMem(0xb79, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1266);
        EXPECT(gbc.pc(), 0xb7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0392
        gbc.setState(0xb7e, 0xb81d, 0xff40, 0xf33, 0x146b, 0xe63c, 0x0, 0x1);
        gbc.writeMem(0xb7e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb81d);
        EXPECT(gbc.pc(), 0xb80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0393
        gbc.setState(0x851d, 0x221f, 0xffd0, 0xd8aa, 0xf498, 0x5aa4, 0x1, 0x0);
        gbc.writeMem(0x851d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x221f);
        EXPECT(gbc.pc(), 0x851f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x851d), 0xcb);
        EXPECT(gbc.readMem(0x851e), 0x4b);
        // CB 4B 0394
        gbc.setState(0x3eb, 0x9a38, 0x8700, 0x5722, 0x2484, 0xd355, 0x0, 0x1);
        gbc.writeMem(0x3eb, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9a38);
        EXPECT(gbc.pc(), 0x3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0396
        gbc.setState(0x10c6, 0xade5, 0x2e00, 0x6871, 0xff12, 0x9fef, 0x1, 0x0);
        gbc.writeMem(0x10c6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xade5);
        EXPECT(gbc.pc(), 0x10c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 0397
        gbc.setState(0x1f35, 0x6ad6, 0xf330, 0xbf12, 0xc572, 0xa7c3, 0x1, 0x0);
        gbc.writeMem(0x1f35, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6ad6);
        EXPECT(gbc.pc(), 0x1f37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 0398
        gbc.setState(0xd864, 0x2064, 0x12a0, 0x6a68, 0xc636, 0x205d, 0x1, 0x1);
        gbc.writeMem(0xd864, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2064);
        EXPECT(gbc.pc(), 0xd866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd864), 0xcb);
        EXPECT(gbc.readMem(0xd865), 0x4b);
        // CB 4B 0399
        gbc.setState(0x4163, 0xac84, 0xea10, 0x628a, 0x5f4c, 0x65da, 0x0, 0x1);
        gbc.writeMem(0x4163, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xac84);
        EXPECT(gbc.pc(), 0x4165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 039A
        gbc.setState(0xbfc7, 0xf395, 0x230, 0xf399, 0x80a5, 0x2d70, 0x0, 0x1);
        gbc.writeMem(0xbfc7, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf395);
        EXPECT(gbc.pc(), 0xbfc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc7), 0xcb);
        EXPECT(gbc.readMem(0xbfc8), 0x4b);
        // CB 4B 039B
        gbc.setState(0x53b9, 0x5a13, 0x70f0, 0x155, 0x127, 0x589, 0x1, 0x0);
        gbc.writeMem(0x53b9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5a13);
        EXPECT(gbc.pc(), 0x53bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 039C
        gbc.setState(0xd1d4, 0xdc79, 0x7b10, 0x7239, 0x2ce0, 0x5e00, 0x0, 0x0);
        gbc.writeMem(0xd1d4, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xdc79);
        EXPECT(gbc.pc(), 0xd1d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d4), 0xcb);
        EXPECT(gbc.readMem(0xd1d5), 0x4b);
        // CB 4B 039D
        gbc.setState(0xe0dd, 0x2f0a, 0xc6e0, 0xd6b4, 0x5a0f, 0x4140, 0x1, 0x0);
        gbc.writeMem(0xe0dd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2f0a);
        EXPECT(gbc.pc(), 0xe0df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0dd), 0xcb);
        EXPECT(gbc.readMem(0xe0de), 0x4b);
        // CB 4B 039E
        gbc.setState(0xb4e0, 0x83bb, 0x7260, 0xe882, 0x5803, 0x5bc5, 0x0, 0x0);
        gbc.writeMem(0xb4e0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x83bb);
        EXPECT(gbc.pc(), 0xb4e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e0), 0xcb);
        EXPECT(gbc.readMem(0xb4e1), 0x4b);
        // CB 4B 039F
        gbc.setState(0x34aa, 0x61e0, 0x7d0, 0x7cc9, 0xf855, 0xedd1, 0x1, 0x0);
        gbc.writeMem(0x34aa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x61e0);
        EXPECT(gbc.pc(), 0x34ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03A0
        gbc.setState(0xe640, 0x6f68, 0xaef0, 0xfc84, 0x1f, 0x6ff2, 0x1, 0x0);
        gbc.writeMem(0xe640, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6f68);
        EXPECT(gbc.pc(), 0xe642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe640), 0xcb);
        EXPECT(gbc.readMem(0xe641), 0x4b);
        // CB 4B 03A1
        gbc.setState(0x4358, 0x7df9, 0xfe0, 0x4502, 0x59bf, 0x6f04, 0x1, 0x0);
        gbc.writeMem(0x4358, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7df9);
        EXPECT(gbc.pc(), 0x435a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03A3
        gbc.setState(0x5342, 0xf1dc, 0x47b0, 0xadbf, 0xde48, 0x2b3f, 0x1, 0x1);
        gbc.writeMem(0x5342, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf1dc);
        EXPECT(gbc.pc(), 0x5344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03A4
        gbc.setState(0x8bdf, 0xef4c, 0xb7d0, 0x4647, 0x9fb, 0x6828, 0x1, 0x1);
        gbc.writeMem(0x8bdf, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xef4c);
        EXPECT(gbc.pc(), 0x8be1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bdf), 0xcb);
        EXPECT(gbc.readMem(0x8be0), 0x4b);
        // CB 4B 03A5
        gbc.setState(0x20ff, 0x23fd, 0x6340, 0xb4c3, 0x9ea3, 0xce85, 0x0, 0x1);
        gbc.writeMem(0x20ff, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x23fd);
        EXPECT(gbc.pc(), 0x2101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03A6
        gbc.setState(0xea6, 0xf840, 0x1880, 0x2b22, 0xd88c, 0xff75, 0x0, 0x0);
        gbc.writeMem(0xea6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf840);
        EXPECT(gbc.pc(), 0xea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03A7
        gbc.setState(0x834e, 0x9324, 0xd790, 0x1724, 0x4510, 0xf687, 0x0, 0x0);
        gbc.writeMem(0x834e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9324);
        EXPECT(gbc.pc(), 0x8350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x834e), 0xcb);
        EXPECT(gbc.readMem(0x834f), 0x4b);
        // CB 4B 03A8
        gbc.setState(0x666a, 0x340e, 0xa810, 0xb4bb, 0x629b, 0xabe9, 0x0, 0x1);
        gbc.writeMem(0x666a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x340e);
        EXPECT(gbc.pc(), 0x666c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03A9
        gbc.setState(0x39c0, 0xeb57, 0x5b40, 0x69f, 0xc220, 0x5d00, 0x0, 0x1);
        gbc.writeMem(0x39c0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xeb57);
        EXPECT(gbc.pc(), 0x39c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03AA
        gbc.setState(0xe304, 0x7758, 0x73f0, 0xa731, 0xb3d6, 0xe7cf, 0x1, 0x0);
        gbc.writeMem(0xe304, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7758);
        EXPECT(gbc.pc(), 0xe306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe304), 0xcb);
        EXPECT(gbc.readMem(0xe305), 0x4b);
        // CB 4B 03AD
        gbc.setState(0x9caa, 0xa640, 0xdc70, 0x1574, 0x607b, 0xea31, 0x0, 0x1);
        gbc.writeMem(0x9caa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa640);
        EXPECT(gbc.pc(), 0x9cac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9caa), 0xcb);
        EXPECT(gbc.readMem(0x9cab), 0x4b);
        // CB 4B 03AE
        gbc.setState(0x6610, 0x6280, 0x1590, 0x355e, 0xc553, 0x9991, 0x1, 0x1);
        gbc.writeMem(0x6610, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6280);
        EXPECT(gbc.pc(), 0x6612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03AF
        gbc.setState(0x8ed9, 0x956b, 0xd570, 0xe751, 0x4f3e, 0x1e4a, 0x1, 0x1);
        gbc.writeMem(0x8ed9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x956b);
        EXPECT(gbc.pc(), 0x8edb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ed9), 0xcb);
        EXPECT(gbc.readMem(0x8eda), 0x4b);
        // CB 4B 03B0
        gbc.setState(0x800d, 0x918e, 0x6570, 0x992e, 0x3b1f, 0xbff1, 0x0, 0x1);
        gbc.writeMem(0x800d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x918e);
        EXPECT(gbc.pc(), 0x800f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x800d), 0xcb);
        EXPECT(gbc.readMem(0x800e), 0x4b);
        // CB 4B 03B2
        gbc.setState(0xedba, 0xb2c, 0xdd20, 0x9617, 0xee34, 0x2de9, 0x1, 0x0);
        gbc.writeMem(0xedba, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb2c);
        EXPECT(gbc.pc(), 0xedbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedba), 0xcb);
        EXPECT(gbc.readMem(0xedbb), 0x4b);
        // CB 4B 03B3
        gbc.setState(0x6734, 0x727c, 0x9330, 0xd00, 0x20fd, 0x2d24, 0x0, 0x0);
        gbc.writeMem(0x6734, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x727c);
        EXPECT(gbc.pc(), 0x6736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03B4
        gbc.setState(0xe311, 0xe43d, 0x68a0, 0x3f8b, 0x9832, 0x76a4, 0x0, 0x0);
        gbc.writeMem(0xe311, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe43d);
        EXPECT(gbc.pc(), 0xe313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe311), 0xcb);
        EXPECT(gbc.readMem(0xe312), 0x4b);
        // CB 4B 03B5
        gbc.setState(0xe021, 0x4b30, 0xc0e0, 0xc71b, 0x5ff4, 0x2392, 0x0, 0x1);
        gbc.writeMem(0xe021, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4b30);
        EXPECT(gbc.pc(), 0xe023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe021), 0xcb);
        EXPECT(gbc.readMem(0xe022), 0x4b);
        // CB 4B 03B6
        gbc.setState(0xcd75, 0x71f7, 0xcdb0, 0x911a, 0x2b38, 0x7244, 0x0, 0x0);
        gbc.writeMem(0xcd75, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x71f7);
        EXPECT(gbc.pc(), 0xcd77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd75), 0xcb);
        EXPECT(gbc.readMem(0xcd76), 0x4b);
        // CB 4B 03B7
        gbc.setState(0x5a81, 0xc33f, 0xfa10, 0xaf66, 0xb92f, 0xa6c3, 0x1, 0x0);
        gbc.writeMem(0x5a81, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc33f);
        EXPECT(gbc.pc(), 0x5a83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03B8
        gbc.setState(0x7ddd, 0x70df, 0x8b20, 0x144, 0x8d3c, 0xdad, 0x1, 0x0);
        gbc.writeMem(0x7ddd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x70df);
        EXPECT(gbc.pc(), 0x7ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03B9
        gbc.setState(0x2b39, 0x22c8, 0xad0, 0xa88a, 0x4a57, 0x8042, 0x1, 0x0);
        gbc.writeMem(0x2b39, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x22c8);
        EXPECT(gbc.pc(), 0x2b3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03BA
        gbc.setState(0xee45, 0x669e, 0x1390, 0x3cd3, 0xbd93, 0xf89f, 0x0, 0x0);
        gbc.writeMem(0xee45, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x669e);
        EXPECT(gbc.pc(), 0xee47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee45), 0xcb);
        EXPECT(gbc.readMem(0xee46), 0x4b);
        // CB 4B 03BC
        gbc.setState(0xaf1d, 0xe47f, 0x6280, 0x4e7, 0xf13, 0xa0b5, 0x0, 0x1);
        gbc.writeMem(0xaf1d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe47f);
        EXPECT(gbc.pc(), 0xaf1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf1d), 0xcb);
        EXPECT(gbc.readMem(0xaf1e), 0x4b);
        // CB 4B 03BD
        gbc.setState(0xa4f6, 0xb056, 0x1e40, 0x852, 0xe9ff, 0xcf53, 0x1, 0x0);
        gbc.writeMem(0xa4f6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb056);
        EXPECT(gbc.pc(), 0xa4f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f6), 0xcb);
        EXPECT(gbc.readMem(0xa4f7), 0x4b);
        // CB 4B 03BE
        gbc.setState(0x552b, 0x1518, 0x1250, 0xdeb4, 0x8f4f, 0x4af5, 0x0, 0x1);
        gbc.writeMem(0x552b, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1518);
        EXPECT(gbc.pc(), 0x552d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03BF
        gbc.setState(0x85ed, 0x50c8, 0x1290, 0x883c, 0x5614, 0x70cb, 0x1, 0x0);
        gbc.writeMem(0x85ed, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x50c8);
        EXPECT(gbc.pc(), 0x85ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ed), 0xcb);
        EXPECT(gbc.readMem(0x85ee), 0x4b);
        // CB 4B 03C0
        gbc.setState(0x8e09, 0xd6c, 0x2220, 0x9ab6, 0xb713, 0x38de, 0x1, 0x1);
        gbc.writeMem(0x8e09, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd6c);
        EXPECT(gbc.pc(), 0x8e0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e09), 0xcb);
        EXPECT(gbc.readMem(0x8e0a), 0x4b);
        // CB 4B 03C1
        gbc.setState(0xd008, 0xa57d, 0xf8f0, 0x9c8c, 0xe71b, 0x62ad, 0x0, 0x0);
        gbc.writeMem(0xd008, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa57d);
        EXPECT(gbc.pc(), 0xd00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd008), 0xcb);
        EXPECT(gbc.readMem(0xd009), 0x4b);
        // CB 4B 03C2
        gbc.setState(0x941f, 0x923d, 0xe3f0, 0x1821, 0x94aa, 0xa66f, 0x1, 0x0);
        gbc.writeMem(0x941f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x923d);
        EXPECT(gbc.pc(), 0x9421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x941f), 0xcb);
        EXPECT(gbc.readMem(0x9420), 0x4b);
        // CB 4B 03C3
        gbc.setState(0x4efe, 0x4a48, 0x5480, 0x9a33, 0xa0f9, 0xbea9, 0x1, 0x0);
        gbc.writeMem(0x4efe, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4a48);
        EXPECT(gbc.pc(), 0x4f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03C4
        gbc.setState(0x3624, 0x3fd5, 0x61b0, 0xb435, 0x4d18, 0x1ece, 0x0, 0x1);
        gbc.writeMem(0x3624, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3fd5);
        EXPECT(gbc.pc(), 0x3626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03C5
        gbc.setState(0x9b54, 0x6820, 0xaac0, 0xef6d, 0xfd6e, 0xd409, 0x1, 0x1);
        gbc.writeMem(0x9b54, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6820);
        EXPECT(gbc.pc(), 0x9b56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b54), 0xcb);
        EXPECT(gbc.readMem(0x9b55), 0x4b);
        // CB 4B 03C6
        gbc.setState(0x61cc, 0xfa20, 0x52c0, 0x4e06, 0x2d2d, 0x663a, 0x1, 0x1);
        gbc.writeMem(0x61cc, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xfa20);
        EXPECT(gbc.pc(), 0x61ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03C7
        gbc.setState(0xc10d, 0x84da, 0xd9f0, 0xe255, 0xa7cd, 0x5c7c, 0x0, 0x1);
        gbc.writeMem(0xc10d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x84da);
        EXPECT(gbc.pc(), 0xc10f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc10d), 0xcb);
        EXPECT(gbc.readMem(0xc10e), 0x4b);
        // CB 4B 03C8
        gbc.setState(0x765e, 0x311, 0x2110, 0xfc3e, 0xae7d, 0xd436, 0x0, 0x1);
        gbc.writeMem(0x765e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x311);
        EXPECT(gbc.pc(), 0x7660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03C9
        gbc.setState(0x6354, 0x7f6e, 0xa530, 0x4f00, 0x8645, 0x291f, 0x0, 0x0);
        gbc.writeMem(0x6354, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7f6e);
        EXPECT(gbc.pc(), 0x6356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03CA
        gbc.setState(0x4976, 0xfdf1, 0xa580, 0x5b70, 0xf7f5, 0xb33c, 0x1, 0x0);
        gbc.writeMem(0x4976, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfdf1);
        EXPECT(gbc.pc(), 0x4978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03CB
        gbc.setState(0xaa14, 0xf878, 0x6af0, 0xa7fd, 0xa3fe, 0x64d9, 0x0, 0x1);
        gbc.writeMem(0xaa14, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf878);
        EXPECT(gbc.pc(), 0xaa16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa14), 0xcb);
        EXPECT(gbc.readMem(0xaa15), 0x4b);
        // CB 4B 03CC
        gbc.setState(0xc298, 0x2432, 0x6a90, 0x8c59, 0xe570, 0x90bf, 0x1, 0x1);
        gbc.writeMem(0xc298, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2432);
        EXPECT(gbc.pc(), 0xc29a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc298), 0xcb);
        EXPECT(gbc.readMem(0xc299), 0x4b);
        // CB 4B 03CD
        gbc.setState(0x689f, 0xa2fe, 0xb260, 0x994a, 0x6e21, 0x8e7d, 0x0, 0x1);
        gbc.writeMem(0x689f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa2fe);
        EXPECT(gbc.pc(), 0x68a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03CE
        gbc.setState(0xc4aa, 0x175d, 0x7eb0, 0x6e25, 0x75ef, 0x52d0, 0x0, 0x1);
        gbc.writeMem(0xc4aa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x175d);
        EXPECT(gbc.pc(), 0xc4ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4aa), 0xcb);
        EXPECT(gbc.readMem(0xc4ab), 0x4b);
        // CB 4B 03CF
        gbc.setState(0x846c, 0x421, 0x81c0, 0xcf77, 0xcfc2, 0xe44d, 0x0, 0x1);
        gbc.writeMem(0x846c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x421);
        EXPECT(gbc.pc(), 0x846e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x846c), 0xcb);
        EXPECT(gbc.readMem(0x846d), 0x4b);
        // CB 4B 03D0
        gbc.setState(0x5d1d, 0x79, 0x6140, 0xe8aa, 0x84fb, 0xa930, 0x0, 0x0);
        gbc.writeMem(0x5d1d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x79);
        EXPECT(gbc.pc(), 0x5d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03D1
        gbc.setState(0x1df6, 0x417f, 0xe570, 0x5af8, 0x8ca4, 0x9ca2, 0x0, 0x1);
        gbc.writeMem(0x1df6, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x417f);
        EXPECT(gbc.pc(), 0x1df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03D2
        gbc.setState(0x3ab9, 0xbba0, 0x3240, 0xd51d, 0x28cf, 0x31fd, 0x0, 0x1);
        gbc.writeMem(0x3ab9, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbba0);
        EXPECT(gbc.pc(), 0x3abb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03D3
        gbc.setState(0x2a66, 0x9b75, 0x6e40, 0x51fe, 0xbd9b, 0x9f27, 0x1, 0x0);
        gbc.writeMem(0x2a66, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9b75);
        EXPECT(gbc.pc(), 0x2a68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03D4
        gbc.setState(0x9202, 0x38e0, 0xc470, 0x1f17, 0x2833, 0xd4a8, 0x0, 0x1);
        gbc.writeMem(0x9202, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x38e0);
        EXPECT(gbc.pc(), 0x9204);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9202), 0xcb);
        EXPECT(gbc.readMem(0x9203), 0x4b);
        // CB 4B 03D5
        gbc.setState(0x4007, 0x2113, 0xfa90, 0xf4c8, 0xcde7, 0x1ad7, 0x0, 0x0);
        gbc.writeMem(0x4007, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2113);
        EXPECT(gbc.pc(), 0x4009);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03D6
        gbc.setState(0x130d, 0xd2b4, 0x47d0, 0x3c16, 0xf6a8, 0x439d, 0x0, 0x1);
        gbc.writeMem(0x130d, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd2b4);
        EXPECT(gbc.pc(), 0x130f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03D7
        gbc.setState(0x34b5, 0x1ecf, 0x6f0, 0xbdec, 0x9b8a, 0x6685, 0x0, 0x0);
        gbc.writeMem(0x34b5, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1ecf);
        EXPECT(gbc.pc(), 0x34b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03D8
        gbc.setState(0x49cd, 0xaeb8, 0xec0, 0x8867, 0x2827, 0xae97, 0x1, 0x1);
        gbc.writeMem(0x49cd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xaeb8);
        EXPECT(gbc.pc(), 0x49cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03D9
        gbc.setState(0xe15e, 0xbfc8, 0xbbc0, 0xf281, 0xbcc5, 0x520, 0x0, 0x0);
        gbc.writeMem(0xe15e, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbfc8);
        EXPECT(gbc.pc(), 0xe160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe15e), 0xcb);
        EXPECT(gbc.readMem(0xe15f), 0x4b);
        // CB 4B 03DA
        gbc.setState(0xf3c, 0x9238, 0xb330, 0xa791, 0x1154, 0xcdd1, 0x1, 0x0);
        gbc.writeMem(0xf3c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9238);
        EXPECT(gbc.pc(), 0xf3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03DB
        gbc.setState(0xd51f, 0xee1d, 0x1fb0, 0xd9bb, 0x3737, 0x896b, 0x0, 0x1);
        gbc.writeMem(0xd51f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xee1d);
        EXPECT(gbc.pc(), 0xd521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd51f), 0xcb);
        EXPECT(gbc.readMem(0xd520), 0x4b);
        // CB 4B 03DC
        gbc.setState(0x766f, 0x55ab, 0xf2a0, 0xa83, 0x54c9, 0xea1d, 0x0, 0x1);
        gbc.writeMem(0x766f, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x55ab);
        EXPECT(gbc.pc(), 0x7671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03DD
        gbc.setState(0x831a, 0x75fc, 0x81d0, 0xab89, 0xd5ec, 0x14d0, 0x1, 0x1);
        gbc.writeMem(0x831a, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x75fc);
        EXPECT(gbc.pc(), 0x831c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x831a), 0xcb);
        EXPECT(gbc.readMem(0x831b), 0x4b);
        // CB 4B 03DE
        gbc.setState(0x5214, 0x53b9, 0xc710, 0x4a75, 0x31dc, 0xd443, 0x1, 0x1);
        gbc.writeMem(0x5214, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x53b9);
        EXPECT(gbc.pc(), 0x5216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03DF
        gbc.setState(0x67fd, 0xffac, 0x110, 0x2c80, 0x6a7a, 0x7840, 0x0, 0x1);
        gbc.writeMem(0x67fd, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xffac);
        EXPECT(gbc.pc(), 0x67ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03E0
        gbc.setState(0xb21, 0xebb6, 0x3f60, 0x5cd5, 0x8e5c, 0x66a8, 0x1, 0x0);
        gbc.writeMem(0xb21, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xebb6);
        EXPECT(gbc.pc(), 0xb23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4B 03E1
        gbc.setState(0x3e84, 0x1792, 0x60b0, 0x8877, 0x870b, 0xee78, 0x0, 0x0);
        gbc.writeMem(0x3e84, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1792);
        EXPECT(gbc.pc(), 0x3e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03E2
        gbc.setState(0x1da0, 0xbd08, 0x3e30, 0xaeab, 0xc80f, 0x8b47, 0x1, 0x0);
        gbc.writeMem(0x1da0, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbd08);
        EXPECT(gbc.pc(), 0x1da2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03E5
        gbc.setState(0x76ca, 0xd4c0, 0x8b70, 0x83a9, 0xadcc, 0x57bf, 0x1, 0x0);
        gbc.writeMem(0x76ca, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd4c0);
        EXPECT(gbc.pc(), 0x76cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4B 03E6
        gbc.setState(0xe72c, 0x7ad4, 0xdb70, 0x7ae0, 0xa7e6, 0x91a4, 0x1, 0x0);
        gbc.writeMem(0xe72c, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7ad4);
        EXPECT(gbc.pc(), 0xe72e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe72c), 0xcb);
        EXPECT(gbc.readMem(0xe72d), 0x4b);
        // CB 4B 03E7
        gbc.setState(0x3daa, 0x90b6, 0x1de0, 0x119c, 0xbbd2, 0x199d, 0x0, 0x1);
        gbc.writeMem(0x3daa, { 0xcb, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x90b6);
        EXPECT(gbc.pc(), 0x3dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
