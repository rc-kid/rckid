#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_d6)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_d6) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB D6 0001
        gbc.setState(0x6cca, 0x1337, 0x3870, 0xf541, 0xedf0, 0x8969, 0x1, 0x1);
        gbc.writeMem(0x6cca, { 0xcb, 0xd6 });
        gbc.writeMem(0x8969, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1337);
        EXPECT(gbc.pc(), 0x6ccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8969), 0xc7);
        // CB D6 0002
        gbc.setState(0xef69, 0x1dee, 0x8450, 0xa4d8, 0x668b, 0x884e, 0x1, 0x1);
        gbc.writeMem(0x884e, { 0xe7 });
        gbc.writeMem(0xef69, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1dee);
        EXPECT(gbc.pc(), 0xef6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884e), 0xe7);
        EXPECT(gbc.readMem(0xef69), 0xcb);
        EXPECT(gbc.readMem(0xef6a), 0xd6);
        // CB D6 0003
        gbc.setState(0x5fec, 0xef63, 0x9e80, 0xd082, 0x497, 0x2d5c, 0x1, 0x0);
        gbc.writeMem(0x2d5c, { 0x5d });
        gbc.writeMem(0x5fec, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xef63);
        EXPECT(gbc.pc(), 0x5fee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0004
        gbc.setState(0x5543, 0x58bb, 0xd8e0, 0xf82f, 0x761b, 0x1f9, 0x0, 0x0);
        gbc.writeMem(0x1f9, { 0xb4 });
        gbc.writeMem(0x5543, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x58bb);
        EXPECT(gbc.pc(), 0x5545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0005
        gbc.setState(0x7e9a, 0x5c09, 0xb6e0, 0x8b7b, 0xc93c, 0x8f62, 0x1, 0x1);
        gbc.writeMem(0x7e9a, { 0xcb, 0xd6 });
        gbc.writeMem(0x8f62, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5c09);
        EXPECT(gbc.pc(), 0x7e9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f62), 0x7e);
        // CB D6 0006
        gbc.setState(0xdcf8, 0xeb7a, 0xa0e0, 0x7f22, 0x500c, 0x84b8, 0x1, 0x1);
        gbc.writeMem(0x84b8, { 0x5b });
        gbc.writeMem(0xdcf8, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xeb7a);
        EXPECT(gbc.pc(), 0xdcfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b8), 0x5f);
        EXPECT(gbc.readMem(0xdcf8), 0xcb);
        EXPECT(gbc.readMem(0xdcf9), 0xd6);
        // CB D6 0007
        gbc.setState(0x64a1, 0xa499, 0x5700, 0x102, 0xe37a, 0xbcd5, 0x0, 0x1);
        gbc.writeMem(0x64a1, { 0xcb, 0xd6 });
        gbc.writeMem(0xbcd5, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa499);
        EXPECT(gbc.pc(), 0x64a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd5), 0xb5);
        // CB D6 0008
        gbc.setState(0x4678, 0x8ce1, 0x7b0, 0xff9d, 0xcd59, 0xd237, 0x1, 0x1);
        gbc.writeMem(0x4678, { 0xcb, 0xd6 });
        gbc.writeMem(0xd237, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8ce1);
        EXPECT(gbc.pc(), 0x467a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd237), 0x5f);
        // CB D6 0009
        gbc.setState(0xcb4b, 0x1d82, 0x42e0, 0x2cdb, 0xd810, 0x59f0, 0x1, 0x0);
        gbc.writeMem(0x59f0, { 0x7 });
        gbc.writeMem(0xcb4b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1d82);
        EXPECT(gbc.pc(), 0xcb4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb4b), 0xcb);
        EXPECT(gbc.readMem(0xcb4c), 0xd6);
        // CB D6 000A
        gbc.setState(0xa762, 0x553, 0xb8a0, 0xf0bb, 0x1aba, 0x807e, 0x0, 0x1);
        gbc.writeMem(0x807e, { 0x31 });
        gbc.writeMem(0xa762, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x553);
        EXPECT(gbc.pc(), 0xa764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807e), 0x35);
        EXPECT(gbc.readMem(0xa762), 0xcb);
        EXPECT(gbc.readMem(0xa763), 0xd6);
        // CB D6 000B
        gbc.setState(0x4d09, 0x5a59, 0x9bd0, 0xe4c6, 0x491f, 0xcb18, 0x1, 0x0);
        gbc.writeMem(0x4d09, { 0xcb, 0xd6 });
        gbc.writeMem(0xcb18, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5a59);
        EXPECT(gbc.pc(), 0x4d0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb18), 0xe5);
        // CB D6 000C
        gbc.setState(0x10b1, 0x4e20, 0x4750, 0x4f55, 0x7755, 0xf42, 0x0, 0x0);
        gbc.writeMem(0xf42, { 0x94 });
        gbc.writeMem(0x10b1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4e20);
        EXPECT(gbc.pc(), 0x10b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 000E
        gbc.setState(0x4cb0, 0x83b3, 0xb250, 0xf7ce, 0x5c63, 0xf610, 0x0, 0x1);
        gbc.writeMem(0x4cb0, { 0xcb, 0xd6 });
        gbc.writeMem(0xf610, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x83b3);
        EXPECT(gbc.pc(), 0x4cb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf610), 0xcc);
        // CB D6 0010
        gbc.setState(0xbaa1, 0xdfac, 0xabb0, 0x1032, 0x5171, 0xf438, 0x0, 0x0);
        gbc.writeMem(0xbaa1, { 0xcb, 0xd6 });
        gbc.writeMem(0xf438, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdfac);
        EXPECT(gbc.pc(), 0xbaa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaa1), 0xcb);
        EXPECT(gbc.readMem(0xbaa2), 0xd6);
        EXPECT(gbc.readMem(0xf438), 0xff);
        // CB D6 0011
        gbc.setState(0xd37e, 0xc42a, 0x3720, 0x8450, 0x7c06, 0x5fab, 0x0, 0x0);
        gbc.writeMem(0x5fab, { 0x2d });
        gbc.writeMem(0xd37e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc42a);
        EXPECT(gbc.pc(), 0xd380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37e), 0xcb);
        EXPECT(gbc.readMem(0xd37f), 0xd6);
        // CB D6 0013
        gbc.setState(0x39b1, 0xbff0, 0x6070, 0x48ed, 0xa62e, 0xe176, 0x1, 0x1);
        gbc.writeMem(0x39b1, { 0xcb, 0xd6 });
        gbc.writeMem(0xe176, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbff0);
        EXPECT(gbc.pc(), 0x39b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe176), 0xdf);
        // CB D6 0014
        gbc.setState(0x2061, 0x26a5, 0xc570, 0x31cd, 0xbcc2, 0xab32, 0x1, 0x1);
        gbc.writeMem(0x2061, { 0xcb, 0xd6 });
        gbc.writeMem(0xab32, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x26a5);
        EXPECT(gbc.pc(), 0x2063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab32), 0xfe);
        // CB D6 0015
        gbc.setState(0x4374, 0xa5f9, 0x9830, 0xb313, 0xb43b, 0x15ff, 0x0, 0x0);
        gbc.writeMem(0x15ff, { 0xfe });
        gbc.writeMem(0x4374, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa5f9);
        EXPECT(gbc.pc(), 0x4376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0016
        gbc.setState(0x8a48, 0x361e, 0x47b0, 0x934, 0x5d90, 0xd419, 0x1, 0x1);
        gbc.writeMem(0x8a48, { 0xcb, 0xd6 });
        gbc.writeMem(0xd419, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x361e);
        EXPECT(gbc.pc(), 0x8a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a48), 0xcb);
        EXPECT(gbc.readMem(0x8a49), 0xd6);
        EXPECT(gbc.readMem(0xd419), 0x6d);
        // CB D6 0017
        gbc.setState(0xa870, 0x1303, 0xa4e0, 0x7c31, 0xef89, 0xce85, 0x0, 0x1);
        gbc.writeMem(0xa870, { 0xcb, 0xd6 });
        gbc.writeMem(0xce85, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1303);
        EXPECT(gbc.pc(), 0xa872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa870), 0xcb);
        EXPECT(gbc.readMem(0xa871), 0xd6);
        EXPECT(gbc.readMem(0xce85), 0x2d);
        // CB D6 0018
        gbc.setState(0x1bf, 0x3270, 0x7690, 0x22b9, 0x1c32, 0xa265, 0x0, 0x1);
        gbc.writeMem(0x1bf, { 0xcb, 0xd6 });
        gbc.writeMem(0xa265, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3270);
        EXPECT(gbc.pc(), 0x1c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa265), 0xb5);
        // CB D6 001C
        gbc.setState(0xdbb1, 0xdfd5, 0x8580, 0x819d, 0x8322, 0xc754, 0x0, 0x0);
        gbc.writeMem(0xc754, { 0x43 });
        gbc.writeMem(0xdbb1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdfd5);
        EXPECT(gbc.pc(), 0xdbb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc754), 0x47);
        EXPECT(gbc.readMem(0xdbb1), 0xcb);
        EXPECT(gbc.readMem(0xdbb2), 0xd6);
        // CB D6 001D
        gbc.setState(0x74c3, 0xef63, 0x9800, 0x8fc2, 0x1825, 0xc0a0, 0x0, 0x0);
        gbc.writeMem(0x74c3, { 0xcb, 0xd6 });
        gbc.writeMem(0xc0a0, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xef63);
        EXPECT(gbc.pc(), 0x74c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a0), 0x37);
        // CB D6 001E
        gbc.setState(0x9c64, 0x61c7, 0x5fe0, 0x5105, 0x1802, 0xf6c3, 0x1, 0x1);
        gbc.writeMem(0x9c64, { 0xcb, 0xd6 });
        gbc.writeMem(0xf6c3, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x61c7);
        EXPECT(gbc.pc(), 0x9c66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c64), 0xcb);
        EXPECT(gbc.readMem(0x9c65), 0xd6);
        EXPECT(gbc.readMem(0xf6c3), 0x44);
        // CB D6 0022
        gbc.setState(0x55c2, 0x2646, 0xcf0, 0x1afc, 0x6868, 0x4e51, 0x0, 0x0);
        gbc.writeMem(0x4e51, { 0x1e });
        gbc.writeMem(0x55c2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2646);
        EXPECT(gbc.pc(), 0x55c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0024
        gbc.setState(0xae1f, 0xf43a, 0xd30, 0x485f, 0x8a47, 0x3e3f, 0x1, 0x0);
        gbc.writeMem(0x3e3f, { 0xef });
        gbc.writeMem(0xae1f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf43a);
        EXPECT(gbc.pc(), 0xae21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae1f), 0xcb);
        EXPECT(gbc.readMem(0xae20), 0xd6);
        // CB D6 0026
        gbc.setState(0x6e59, 0x6e9, 0x5c60, 0xdf5d, 0x363e, 0x95a6, 0x0, 0x1);
        gbc.writeMem(0x6e59, { 0xcb, 0xd6 });
        gbc.writeMem(0x95a6, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6e9);
        EXPECT(gbc.pc(), 0x6e5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a6), 0xec);
        // CB D6 0028
        gbc.setState(0x663e, 0x78d8, 0x5470, 0xed8e, 0xf6a4, 0x903b, 0x1, 0x1);
        gbc.writeMem(0x663e, { 0xcb, 0xd6 });
        gbc.writeMem(0x903b, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x78d8);
        EXPECT(gbc.pc(), 0x6640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x903b), 0xd6);
        // CB D6 0029
        gbc.setState(0xc306, 0x58f0, 0x3540, 0x4818, 0x744c, 0xbb0e, 0x0, 0x0);
        gbc.writeMem(0xbb0e, { 0xc });
        gbc.writeMem(0xc306, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x58f0);
        EXPECT(gbc.pc(), 0xc308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb0e), 0xc);
        EXPECT(gbc.readMem(0xc306), 0xcb);
        EXPECT(gbc.readMem(0xc307), 0xd6);
        // CB D6 002B
        gbc.setState(0x7c97, 0x16db, 0x6450, 0x94c1, 0x1f5f, 0xb92b, 0x0, 0x1);
        gbc.writeMem(0x7c97, { 0xcb, 0xd6 });
        gbc.writeMem(0xb92b, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x16db);
        EXPECT(gbc.pc(), 0x7c99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb92b), 0x9e);
        // CB D6 002D
        gbc.setState(0x4ca8, 0x7f79, 0x15d0, 0xe416, 0xe914, 0xa082, 0x1, 0x0);
        gbc.writeMem(0x4ca8, { 0xcb, 0xd6 });
        gbc.writeMem(0xa082, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7f79);
        EXPECT(gbc.pc(), 0x4caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa082), 0xa4);
        // CB D6 002E
        gbc.setState(0xad02, 0x76bc, 0xb980, 0xe58a, 0xe14f, 0xf3a8, 0x0, 0x1);
        gbc.writeMem(0xad02, { 0xcb, 0xd6 });
        gbc.writeMem(0xf3a8, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x76bc);
        EXPECT(gbc.pc(), 0xad04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad02), 0xcb);
        EXPECT(gbc.readMem(0xad03), 0xd6);
        EXPECT(gbc.readMem(0xf3a8), 0xc4);
        // CB D6 002F
        gbc.setState(0x93f4, 0x3575, 0xde20, 0xb90b, 0x3a95, 0xadb3, 0x1, 0x0);
        gbc.writeMem(0x93f4, { 0xcb, 0xd6 });
        gbc.writeMem(0xadb3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3575);
        EXPECT(gbc.pc(), 0x93f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f4), 0xcb);
        EXPECT(gbc.readMem(0x93f5), 0xd6);
        EXPECT(gbc.readMem(0xadb3), 0x6f);
        // CB D6 0030
        gbc.setState(0xdeb2, 0x4d67, 0x3ea0, 0x419d, 0x38bb, 0xb8e, 0x0, 0x0);
        gbc.writeMem(0xb8e, { 0x55 });
        gbc.writeMem(0xdeb2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4d67);
        EXPECT(gbc.pc(), 0xdeb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb2), 0xcb);
        EXPECT(gbc.readMem(0xdeb3), 0xd6);
        // CB D6 0031
        gbc.setState(0x7e10, 0x3876, 0x840, 0xf3be, 0x78bb, 0xc85, 0x1, 0x1);
        gbc.writeMem(0xc85, { 0x2f });
        gbc.writeMem(0x7e10, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3876);
        EXPECT(gbc.pc(), 0x7e12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0032
        gbc.setState(0x3ef9, 0xbecc, 0x3f30, 0x4384, 0x64a6, 0x1cf7, 0x1, 0x0);
        gbc.writeMem(0x1cf7, { 0xdd });
        gbc.writeMem(0x3ef9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xbecc);
        EXPECT(gbc.pc(), 0x3efb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0033
        gbc.setState(0x2408, 0x1aa8, 0x7a0, 0x1bd1, 0xdee9, 0xa863, 0x1, 0x1);
        gbc.writeMem(0x2408, { 0xcb, 0xd6 });
        gbc.writeMem(0xa863, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1aa8);
        EXPECT(gbc.pc(), 0x240a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa863), 0x6f);
        // CB D6 0034
        gbc.setState(0x1dd7, 0x9e04, 0xf0d0, 0xc68e, 0xe1b5, 0x4e0, 0x1, 0x0);
        gbc.writeMem(0x4e0, { 0xc7 });
        gbc.writeMem(0x1dd7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9e04);
        EXPECT(gbc.pc(), 0x1dd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0037
        gbc.setState(0x39a9, 0xf3b8, 0x80d0, 0x8557, 0x27ff, 0x80da, 0x1, 0x1);
        gbc.writeMem(0x39a9, { 0xcb, 0xd6 });
        gbc.writeMem(0x80da, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf3b8);
        EXPECT(gbc.pc(), 0x39ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80da), 0x1d);
        // CB D6 0039
        gbc.setState(0xa785, 0xbc76, 0x96e0, 0x2bb1, 0x64c7, 0x22b1, 0x0, 0x0);
        gbc.writeMem(0x22b1, { 0x75 });
        gbc.writeMem(0xa785, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xbc76);
        EXPECT(gbc.pc(), 0xa787);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa785), 0xcb);
        EXPECT(gbc.readMem(0xa786), 0xd6);
        // CB D6 003E
        gbc.setState(0xd9f3, 0xbdde, 0xb20, 0x8242, 0xb9f9, 0x8a46, 0x0, 0x1);
        gbc.writeMem(0x8a46, { 0xa5 });
        gbc.writeMem(0xd9f3, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbdde);
        EXPECT(gbc.pc(), 0xd9f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a46), 0xa5);
        EXPECT(gbc.readMem(0xd9f3), 0xcb);
        EXPECT(gbc.readMem(0xd9f4), 0xd6);
        // CB D6 003F
        gbc.setState(0x883d, 0xb4cd, 0xbfe0, 0x233b, 0xd838, 0xba2b, 0x1, 0x0);
        gbc.writeMem(0x883d, { 0xcb, 0xd6 });
        gbc.writeMem(0xba2b, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb4cd);
        EXPECT(gbc.pc(), 0x883f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x883d), 0xcb);
        EXPECT(gbc.readMem(0x883e), 0xd6);
        EXPECT(gbc.readMem(0xba2b), 0x37);
        // CB D6 0040
        gbc.setState(0xacdc, 0x5bd7, 0x50a0, 0x4e5a, 0x6b25, 0x384e, 0x0, 0x1);
        gbc.writeMem(0x384e, { 0xac });
        gbc.writeMem(0xacdc, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5bd7);
        EXPECT(gbc.pc(), 0xacde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacdc), 0xcb);
        EXPECT(gbc.readMem(0xacdd), 0xd6);
        // CB D6 0041
        gbc.setState(0xe8ba, 0xba2c, 0xa6c0, 0xd5b, 0xc1fc, 0xb0fc, 0x1, 0x1);
        gbc.writeMem(0xb0fc, { 0xaf });
        gbc.writeMem(0xe8ba, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xba2c);
        EXPECT(gbc.pc(), 0xe8bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0fc), 0xaf);
        EXPECT(gbc.readMem(0xe8ba), 0xcb);
        EXPECT(gbc.readMem(0xe8bb), 0xd6);
        // CB D6 0044
        gbc.setState(0xdf0b, 0xf55, 0x1b10, 0x17d7, 0xa066, 0xf565, 0x1, 0x1);
        gbc.writeMem(0xdf0b, { 0xcb, 0xd6 });
        gbc.writeMem(0xf565, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf55);
        EXPECT(gbc.pc(), 0xdf0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf0b), 0xcb);
        EXPECT(gbc.readMem(0xdf0c), 0xd6);
        EXPECT(gbc.readMem(0xf565), 0x3f);
        // CB D6 0045
        gbc.setState(0xcf4f, 0x21e1, 0x1820, 0x795f, 0xa139, 0x982e, 0x1, 0x1);
        gbc.writeMem(0x982e, { 0xef });
        gbc.writeMem(0xcf4f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x21e1);
        EXPECT(gbc.pc(), 0xcf51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x982e), 0xef);
        EXPECT(gbc.readMem(0xcf4f), 0xcb);
        EXPECT(gbc.readMem(0xcf50), 0xd6);
        // CB D6 0046
        gbc.setState(0x6e3d, 0x87c9, 0x3470, 0xd31f, 0xbf95, 0x9f1c, 0x1, 0x0);
        gbc.writeMem(0x6e3d, { 0xcb, 0xd6 });
        gbc.writeMem(0x9f1c, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x87c9);
        EXPECT(gbc.pc(), 0x6e3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f1c), 0x8d);
        // CB D6 0049
        gbc.setState(0xa323, 0xb80a, 0x2f00, 0xefba, 0x56a, 0xc7ef, 0x1, 0x1);
        gbc.writeMem(0xa323, { 0xcb, 0xd6 });
        gbc.writeMem(0xc7ef, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb80a);
        EXPECT(gbc.pc(), 0xa325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa323), 0xcb);
        EXPECT(gbc.readMem(0xa324), 0xd6);
        EXPECT(gbc.readMem(0xc7ef), 0x2f);
        // CB D6 004F
        gbc.setState(0x86e7, 0x461a, 0x2940, 0x8eab, 0x4617, 0x705d, 0x0, 0x0);
        gbc.writeMem(0x705d, { 0x2f });
        gbc.writeMem(0x86e7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x461a);
        EXPECT(gbc.pc(), 0x86e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e7), 0xcb);
        EXPECT(gbc.readMem(0x86e8), 0xd6);
        // CB D6 0050
        gbc.setState(0x7feb, 0xb6e8, 0xa590, 0x721, 0xf670, 0xdadd, 0x0, 0x0);
        gbc.writeMem(0x7feb, { 0xcb, 0xd6 });
        gbc.writeMem(0xdadd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb6e8);
        EXPECT(gbc.pc(), 0x7fed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdadd), 0x44);
        // CB D6 0051
        gbc.setState(0xd092, 0x72d1, 0xa00, 0xcaca, 0xb886, 0x92bb, 0x1, 0x0);
        gbc.writeMem(0x92bb, { 0x71 });
        gbc.writeMem(0xd092, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x72d1);
        EXPECT(gbc.pc(), 0xd094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92bb), 0x75);
        EXPECT(gbc.readMem(0xd092), 0xcb);
        EXPECT(gbc.readMem(0xd093), 0xd6);
        // CB D6 0054
        gbc.setState(0x73a1, 0xe479, 0xe190, 0x4a36, 0x1fd6, 0x36d8, 0x0, 0x1);
        gbc.writeMem(0x36d8, { 0xb7 });
        gbc.writeMem(0x73a1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe479);
        EXPECT(gbc.pc(), 0x73a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0056
        gbc.setState(0x7e99, 0x7ab9, 0xc3a0, 0xe308, 0xf320, 0x3f76, 0x0, 0x0);
        gbc.writeMem(0x3f76, { 0x7f });
        gbc.writeMem(0x7e99, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7ab9);
        EXPECT(gbc.pc(), 0x7e9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0057
        gbc.setState(0x6e0f, 0x508c, 0xe210, 0x1ae3, 0x3c89, 0x1109, 0x0, 0x1);
        gbc.writeMem(0x1109, { 0x7 });
        gbc.writeMem(0x6e0f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x508c);
        EXPECT(gbc.pc(), 0x6e11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0058
        gbc.setState(0x984a, 0xbd65, 0xcd60, 0xb9e1, 0x928a, 0xee0f, 0x1, 0x1);
        gbc.writeMem(0x984a, { 0xcb, 0xd6 });
        gbc.writeMem(0xee0f, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbd65);
        EXPECT(gbc.pc(), 0x984c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x984a), 0xcb);
        EXPECT(gbc.readMem(0x984b), 0xd6);
        EXPECT(gbc.readMem(0xee0f), 0x8e);
        // CB D6 0059
        gbc.setState(0x7b76, 0xa51a, 0x5430, 0x80ea, 0xae78, 0xe7a0, 0x0, 0x1);
        gbc.writeMem(0x7b76, { 0xcb, 0xd6 });
        gbc.writeMem(0xe7a0, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa51a);
        EXPECT(gbc.pc(), 0x7b78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7a0), 0xe);
        // CB D6 005A
        gbc.setState(0xd734, 0x2ca5, 0xf070, 0x3e5a, 0xcb7b, 0x85b9, 0x1, 0x0);
        gbc.writeMem(0x85b9, { 0xba });
        gbc.writeMem(0xd734, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2ca5);
        EXPECT(gbc.pc(), 0xd736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b9), 0xbe);
        EXPECT(gbc.readMem(0xd734), 0xcb);
        EXPECT(gbc.readMem(0xd735), 0xd6);
        // CB D6 005B
        gbc.setState(0x2c36, 0xa967, 0x6f90, 0xf95f, 0xabdc, 0xce31, 0x0, 0x1);
        gbc.writeMem(0x2c36, { 0xcb, 0xd6 });
        gbc.writeMem(0xce31, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa967);
        EXPECT(gbc.pc(), 0x2c38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce31), 0xcd);
        // CB D6 005D
        gbc.setState(0xb982, 0x2a83, 0x270, 0xbfb7, 0xd6e1, 0xfb44, 0x1, 0x0);
        gbc.writeMem(0xb982, { 0xcb, 0xd6 });
        gbc.writeMem(0xfb44, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2a83);
        EXPECT(gbc.pc(), 0xb984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb982), 0xcb);
        EXPECT(gbc.readMem(0xb983), 0xd6);
        EXPECT(gbc.readMem(0xfb44), 0xbf);
        // CB D6 005E
        gbc.setState(0x8488, 0x491f, 0xb7b0, 0x180b, 0x7d0d, 0x3f9b, 0x1, 0x0);
        gbc.writeMem(0x3f9b, { 0x46 });
        gbc.writeMem(0x8488, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x491f);
        EXPECT(gbc.pc(), 0x848a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8488), 0xcb);
        EXPECT(gbc.readMem(0x8489), 0xd6);
        // CB D6 005F
        gbc.setState(0xdd66, 0xdb1c, 0x2c70, 0xc3c1, 0x3e9d, 0xc2e1, 0x0, 0x0);
        gbc.writeMem(0xc2e1, { 0x8 });
        gbc.writeMem(0xdd66, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xdb1c);
        EXPECT(gbc.pc(), 0xdd68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e1), 0xc);
        EXPECT(gbc.readMem(0xdd66), 0xcb);
        EXPECT(gbc.readMem(0xdd67), 0xd6);
        // CB D6 0061
        gbc.setState(0x2fc0, 0x13e3, 0x7470, 0x22f4, 0xd493, 0x7a33, 0x1, 0x0);
        gbc.writeMem(0x2fc0, { 0xcb, 0xd6 });
        gbc.writeMem(0x7a33, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x13e3);
        EXPECT(gbc.pc(), 0x2fc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0062
        gbc.setState(0x54ed, 0xb4b0, 0x28c0, 0xe42d, 0x5057, 0x8fee, 0x1, 0x0);
        gbc.writeMem(0x54ed, { 0xcb, 0xd6 });
        gbc.writeMem(0x8fee, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb4b0);
        EXPECT(gbc.pc(), 0x54ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fee), 0x75);
        // CB D6 0063
        gbc.setState(0xb51, 0xd31e, 0xa530, 0x4779, 0xb1c7, 0xb64e, 0x1, 0x0);
        gbc.writeMem(0xb51, { 0xcb, 0xd6 });
        gbc.writeMem(0xb64e, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd31e);
        EXPECT(gbc.pc(), 0xb53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb64e), 0x76);
        // CB D6 0064
        gbc.setState(0xc634, 0x8f86, 0x2f60, 0xefc7, 0xdc81, 0xa02, 0x1, 0x1);
        gbc.writeMem(0xa02, { 0xef });
        gbc.writeMem(0xc634, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8f86);
        EXPECT(gbc.pc(), 0xc636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc634), 0xcb);
        EXPECT(gbc.readMem(0xc635), 0xd6);
        // CB D6 0065
        gbc.setState(0x7e9c, 0xdd54, 0xc980, 0x8075, 0xa52c, 0x3e9a, 0x0, 0x0);
        gbc.writeMem(0x3e9a, { 0xe4 });
        gbc.writeMem(0x7e9c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdd54);
        EXPECT(gbc.pc(), 0x7e9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0067
        gbc.setState(0xea9e, 0xeb0f, 0x4110, 0x7772, 0xb7d1, 0x3357, 0x0, 0x1);
        gbc.writeMem(0x3357, { 0x36 });
        gbc.writeMem(0xea9e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xeb0f);
        EXPECT(gbc.pc(), 0xeaa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea9e), 0xcb);
        EXPECT(gbc.readMem(0xea9f), 0xd6);
        // CB D6 0069
        gbc.setState(0x5389, 0xf0ec, 0xfd30, 0x10dc, 0x8902, 0xa420, 0x0, 0x0);
        gbc.writeMem(0x5389, { 0xcb, 0xd6 });
        gbc.writeMem(0xa420, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf0ec);
        EXPECT(gbc.pc(), 0x538b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa420), 0xf5);
        // CB D6 006A
        gbc.setState(0xcb2b, 0x82df, 0xeaa0, 0x12e4, 0x1950, 0x23ce, 0x1, 0x1);
        gbc.writeMem(0x23ce, { 0x24 });
        gbc.writeMem(0xcb2b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x82df);
        EXPECT(gbc.pc(), 0xcb2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2b), 0xcb);
        EXPECT(gbc.readMem(0xcb2c), 0xd6);
        // CB D6 006B
        gbc.setState(0xdc99, 0x29dd, 0x9330, 0xc945, 0x9f32, 0x803c, 0x0, 0x0);
        gbc.writeMem(0x803c, { 0xbd });
        gbc.writeMem(0xdc99, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x29dd);
        EXPECT(gbc.pc(), 0xdc9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x803c), 0xbd);
        EXPECT(gbc.readMem(0xdc99), 0xcb);
        EXPECT(gbc.readMem(0xdc9a), 0xd6);
        // CB D6 006D
        gbc.setState(0x4464, 0xd296, 0x78a0, 0xca04, 0x92e2, 0xb55a, 0x0, 0x0);
        gbc.writeMem(0x4464, { 0xcb, 0xd6 });
        gbc.writeMem(0xb55a, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd296);
        EXPECT(gbc.pc(), 0x4466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb55a), 0x6);
        // CB D6 006E
        gbc.setState(0xd513, 0x7043, 0x4260, 0xa281, 0x50b3, 0xfb5e, 0x0, 0x0);
        gbc.writeMem(0xd513, { 0xcb, 0xd6 });
        gbc.writeMem(0xfb5e, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7043);
        EXPECT(gbc.pc(), 0xd515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd513), 0xcb);
        EXPECT(gbc.readMem(0xd514), 0xd6);
        EXPECT(gbc.readMem(0xfb5e), 0x96);
        // CB D6 006F
        gbc.setState(0x7cb, 0x6cb1, 0x82c0, 0x7827, 0xee6a, 0x918c, 0x1, 0x0);
        gbc.writeMem(0x7cb, { 0xcb, 0xd6 });
        gbc.writeMem(0x918c, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6cb1);
        EXPECT(gbc.pc(), 0x7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x918c), 0xd7);
        // CB D6 0070
        gbc.setState(0x83e2, 0xd58d, 0x3e0, 0x3bc8, 0xc2fc, 0x162f, 0x1, 0x1);
        gbc.writeMem(0x162f, { 0xee });
        gbc.writeMem(0x83e2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd58d);
        EXPECT(gbc.pc(), 0x83e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e2), 0xcb);
        EXPECT(gbc.readMem(0x83e3), 0xd6);
        // CB D6 0072
        gbc.setState(0xe872, 0xa82, 0x13a0, 0xff51, 0x7f08, 0xb81b, 0x1, 0x0);
        gbc.writeMem(0xb81b, { 0xf0 });
        gbc.writeMem(0xe872, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa82);
        EXPECT(gbc.pc(), 0xe874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81b), 0xf4);
        EXPECT(gbc.readMem(0xe872), 0xcb);
        EXPECT(gbc.readMem(0xe873), 0xd6);
        // CB D6 0073
        gbc.setState(0x6d6b, 0xf180, 0x2720, 0x74a1, 0x3716, 0x111c, 0x1, 0x0);
        gbc.writeMem(0x111c, { 0xac });
        gbc.writeMem(0x6d6b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf180);
        EXPECT(gbc.pc(), 0x6d6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0074
        gbc.setState(0x10c5, 0xe9ea, 0x1230, 0x4468, 0xd01e, 0x9852, 0x1, 0x0);
        gbc.writeMem(0x10c5, { 0xcb, 0xd6 });
        gbc.writeMem(0x9852, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe9ea);
        EXPECT(gbc.pc(), 0x10c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9852), 0xa7);
        // CB D6 0075
        gbc.setState(0x701a, 0xf45, 0x9300, 0xe6c3, 0xd6e8, 0x7de5, 0x1, 0x1);
        gbc.writeMem(0x701a, { 0xcb, 0xd6 });
        gbc.writeMem(0x7de5, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf45);
        EXPECT(gbc.pc(), 0x701c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0077
        gbc.setState(0x4181, 0x7cbf, 0xd360, 0xdd22, 0x5132, 0xa5a8, 0x0, 0x1);
        gbc.writeMem(0x4181, { 0xcb, 0xd6 });
        gbc.writeMem(0xa5a8, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7cbf);
        EXPECT(gbc.pc(), 0x4183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a8), 0x47);
        // CB D6 0078
        gbc.setState(0x9335, 0x6b5f, 0x43e0, 0x5728, 0xe4cf, 0xf82e, 0x0, 0x0);
        gbc.writeMem(0x9335, { 0xcb, 0xd6 });
        gbc.writeMem(0xf82e, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6b5f);
        EXPECT(gbc.pc(), 0x9337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9335), 0xcb);
        EXPECT(gbc.readMem(0x9336), 0xd6);
        EXPECT(gbc.readMem(0xf82e), 0x76);
        // CB D6 007A
        gbc.setState(0x6403, 0x1963, 0x1da0, 0x2bdf, 0x4629, 0xdc07, 0x1, 0x1);
        gbc.writeMem(0x6403, { 0xcb, 0xd6 });
        gbc.writeMem(0xdc07, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1963);
        EXPECT(gbc.pc(), 0x6405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc07), 0x8f);
        // CB D6 007B
        gbc.setState(0x3622, 0x74d1, 0x5630, 0x7c25, 0x1598, 0xdb92, 0x0, 0x0);
        gbc.writeMem(0x3622, { 0xcb, 0xd6 });
        gbc.writeMem(0xdb92, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x74d1);
        EXPECT(gbc.pc(), 0x3624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb92), 0xc4);
        // CB D6 007C
        gbc.setState(0xeab5, 0xad0c, 0x9a40, 0xf53f, 0x6119, 0xedde, 0x0, 0x0);
        gbc.writeMem(0xeab5, { 0xcb, 0xd6 });
        gbc.writeMem(0xedde, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xad0c);
        EXPECT(gbc.pc(), 0xeab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab5), 0xcb);
        EXPECT(gbc.readMem(0xeab6), 0xd6);
        EXPECT(gbc.readMem(0xedde), 0x1e);
        // CB D6 007D
        gbc.setState(0x7239, 0x56fe, 0xaef0, 0xaba7, 0x9adb, 0xfb85, 0x1, 0x0);
        gbc.writeMem(0x7239, { 0xcb, 0xd6 });
        gbc.writeMem(0xfb85, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x56fe);
        EXPECT(gbc.pc(), 0x723b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb85), 0x4f);
        // CB D6 007E
        gbc.setState(0x5481, 0x3ae9, 0x8580, 0xbe8e, 0xd7a0, 0xbe30, 0x1, 0x0);
        gbc.writeMem(0x5481, { 0xcb, 0xd6 });
        gbc.writeMem(0xbe30, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3ae9);
        EXPECT(gbc.pc(), 0x5483);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe30), 0xfc);
        // CB D6 007F
        gbc.setState(0xb81a, 0x5a6e, 0xc160, 0x7e0f, 0xaf18, 0x9ab4, 0x0, 0x0);
        gbc.writeMem(0x9ab4, { 0x80 });
        gbc.writeMem(0xb81a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5a6e);
        EXPECT(gbc.pc(), 0xb81c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab4), 0x84);
        EXPECT(gbc.readMem(0xb81a), 0xcb);
        EXPECT(gbc.readMem(0xb81b), 0xd6);
        // CB D6 0082
        gbc.setState(0x4a23, 0x7980, 0xcd00, 0x2328, 0xec80, 0x1de6, 0x1, 0x1);
        gbc.writeMem(0x1de6, { 0xcd });
        gbc.writeMem(0x4a23, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7980);
        EXPECT(gbc.pc(), 0x4a25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0084
        gbc.setState(0xe258, 0xa461, 0xb660, 0xc769, 0x8afa, 0xcfe, 0x1, 0x0);
        gbc.writeMem(0xcfe, { 0xa6 });
        gbc.writeMem(0xe258, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa461);
        EXPECT(gbc.pc(), 0xe25a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe258), 0xcb);
        EXPECT(gbc.readMem(0xe259), 0xd6);
        // CB D6 0085
        gbc.setState(0x28ad, 0x10d2, 0x7370, 0x9621, 0x4c2, 0x6a6d, 0x0, 0x0);
        gbc.writeMem(0x28ad, { 0xcb, 0xd6 });
        gbc.writeMem(0x6a6d, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x10d2);
        EXPECT(gbc.pc(), 0x28af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0087
        gbc.setState(0xe8d8, 0x819f, 0xef80, 0x636f, 0x280b, 0x9b08, 0x0, 0x1);
        gbc.writeMem(0x9b08, { 0x1d });
        gbc.writeMem(0xe8d8, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x819f);
        EXPECT(gbc.pc(), 0xe8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b08), 0x1d);
        EXPECT(gbc.readMem(0xe8d8), 0xcb);
        EXPECT(gbc.readMem(0xe8d9), 0xd6);
        // CB D6 0089
        gbc.setState(0xe53, 0x1180, 0xa7b0, 0xb0d1, 0x94cc, 0xa812, 0x1, 0x1);
        gbc.writeMem(0xe53, { 0xcb, 0xd6 });
        gbc.writeMem(0xa812, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1180);
        EXPECT(gbc.pc(), 0xe55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa812), 0x1c);
        // CB D6 008A
        gbc.setState(0xa24a, 0xa278, 0x5b10, 0x4aa5, 0xad9b, 0x2f5f, 0x0, 0x0);
        gbc.writeMem(0x2f5f, { 0x5 });
        gbc.writeMem(0xa24a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa278);
        EXPECT(gbc.pc(), 0xa24c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24a), 0xcb);
        EXPECT(gbc.readMem(0xa24b), 0xd6);
        // CB D6 008C
        gbc.setState(0x1979, 0x4df2, 0x6bc0, 0x3d5a, 0x7834, 0xb44d, 0x1, 0x0);
        gbc.writeMem(0x1979, { 0xcb, 0xd6 });
        gbc.writeMem(0xb44d, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4df2);
        EXPECT(gbc.pc(), 0x197b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb44d), 0x54);
        // CB D6 008D
        gbc.setState(0x1d1, 0xd836, 0x2670, 0xffea, 0xad01, 0x71b1, 0x0, 0x0);
        gbc.writeMem(0x1d1, { 0xcb, 0xd6 });
        gbc.writeMem(0x71b1, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd836);
        EXPECT(gbc.pc(), 0x1d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 008E
        gbc.setState(0x617b, 0x8243, 0x5a20, 0x7134, 0x65a3, 0xc594, 0x0, 0x1);
        gbc.writeMem(0x617b, { 0xcb, 0xd6 });
        gbc.writeMem(0xc594, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8243);
        EXPECT(gbc.pc(), 0x617d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc594), 0xee);
        // CB D6 008F
        gbc.setState(0xa151, 0xa76e, 0xcd50, 0x1acf, 0xf623, 0x8ba5, 0x0, 0x1);
        gbc.writeMem(0x8ba5, { 0xe5 });
        gbc.writeMem(0xa151, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa76e);
        EXPECT(gbc.pc(), 0xa153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba5), 0xe5);
        EXPECT(gbc.readMem(0xa151), 0xcb);
        EXPECT(gbc.readMem(0xa152), 0xd6);
        // CB D6 0090
        gbc.setState(0x4cf1, 0xe7b, 0xd980, 0x5439, 0x2603, 0x388c, 0x1, 0x0);
        gbc.writeMem(0x388c, { 0x36 });
        gbc.writeMem(0x4cf1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe7b);
        EXPECT(gbc.pc(), 0x4cf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0091
        gbc.setState(0x9e07, 0x257c, 0x4fe0, 0xa8c3, 0x1c1, 0x9c14, 0x1, 0x1);
        gbc.writeMem(0x9c14, { 0x5b });
        gbc.writeMem(0x9e07, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x257c);
        EXPECT(gbc.pc(), 0x9e09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c14), 0x5f);
        EXPECT(gbc.readMem(0x9e07), 0xcb);
        EXPECT(gbc.readMem(0x9e08), 0xd6);
        // CB D6 0093
        gbc.setState(0x662b, 0x8cde, 0xeb90, 0x9b16, 0x454e, 0x56b4, 0x1, 0x0);
        gbc.writeMem(0x56b4, { 0xcc });
        gbc.writeMem(0x662b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8cde);
        EXPECT(gbc.pc(), 0x662d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0094
        gbc.setState(0x33ed, 0x64a9, 0x6860, 0xc4d4, 0x7271, 0xd64f, 0x1, 0x0);
        gbc.writeMem(0x33ed, { 0xcb, 0xd6 });
        gbc.writeMem(0xd64f, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x64a9);
        EXPECT(gbc.pc(), 0x33ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd64f), 0xfe);
        // CB D6 0097
        gbc.setState(0xf1f, 0xdcf0, 0x5b10, 0x416e, 0x6d79, 0xc61a, 0x1, 0x0);
        gbc.writeMem(0xf1f, { 0xcb, 0xd6 });
        gbc.writeMem(0xc61a, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xdcf0);
        EXPECT(gbc.pc(), 0xf21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc61a), 0xd4);
        // CB D6 0098
        gbc.setState(0xa74a, 0x116e, 0x1df0, 0x21b1, 0xaa1b, 0xde17, 0x0, 0x1);
        gbc.writeMem(0xa74a, { 0xcb, 0xd6 });
        gbc.writeMem(0xde17, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x116e);
        EXPECT(gbc.pc(), 0xa74c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa74a), 0xcb);
        EXPECT(gbc.readMem(0xa74b), 0xd6);
        EXPECT(gbc.readMem(0xde17), 0xb7);
        // CB D6 009A
        gbc.setState(0x6aee, 0xcd63, 0xefe0, 0x1f52, 0x5d29, 0x4d10, 0x1, 0x1);
        gbc.writeMem(0x4d10, { 0x9d });
        gbc.writeMem(0x6aee, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xcd63);
        EXPECT(gbc.pc(), 0x6af0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 009B
        gbc.setState(0x647c, 0xfb66, 0x1f00, 0x2c9d, 0x2ae3, 0xc049, 0x0, 0x1);
        gbc.writeMem(0x647c, { 0xcb, 0xd6 });
        gbc.writeMem(0xc049, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xfb66);
        EXPECT(gbc.pc(), 0x647e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc049), 0x4);
        // CB D6 009E
        gbc.setState(0x2729, 0xb1eb, 0x5fe0, 0xace1, 0x7688, 0xc2aa, 0x1, 0x1);
        gbc.writeMem(0x2729, { 0xcb, 0xd6 });
        gbc.writeMem(0xc2aa, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb1eb);
        EXPECT(gbc.pc(), 0x272b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2aa), 0x66);
        // CB D6 009F
        gbc.setState(0xbf0a, 0xd8ef, 0x8740, 0xba74, 0xe99e, 0xfbe5, 0x1, 0x0);
        gbc.writeMem(0xbf0a, { 0xcb, 0xd6 });
        gbc.writeMem(0xfbe5, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd8ef);
        EXPECT(gbc.pc(), 0xbf0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf0a), 0xcb);
        EXPECT(gbc.readMem(0xbf0b), 0xd6);
        EXPECT(gbc.readMem(0xfbe5), 0x1e);
        // CB D6 00A0
        gbc.setState(0xe034, 0x3772, 0xfe50, 0xca02, 0x7ccb, 0x89f3, 0x0, 0x1);
        gbc.writeMem(0x89f3, { 0x59 });
        gbc.writeMem(0xe034, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3772);
        EXPECT(gbc.pc(), 0xe036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89f3), 0x5d);
        EXPECT(gbc.readMem(0xe034), 0xcb);
        EXPECT(gbc.readMem(0xe035), 0xd6);
        // CB D6 00A1
        gbc.setState(0x1c8a, 0x59ad, 0xf160, 0xb00f, 0x1002, 0xd0a0, 0x0, 0x1);
        gbc.writeMem(0x1c8a, { 0xcb, 0xd6 });
        gbc.writeMem(0xd0a0, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x59ad);
        EXPECT(gbc.pc(), 0x1c8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0a0), 0xad);
        // CB D6 00A3
        gbc.setState(0xa536, 0x9ffd, 0xd380, 0xfa2e, 0x786d, 0xe755, 0x0, 0x1);
        gbc.writeMem(0xa536, { 0xcb, 0xd6 });
        gbc.writeMem(0xe755, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9ffd);
        EXPECT(gbc.pc(), 0xa538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa536), 0xcb);
        EXPECT(gbc.readMem(0xa537), 0xd6);
        EXPECT(gbc.readMem(0xe755), 0xe7);
        // CB D6 00A4
        gbc.setState(0x2494, 0xcb18, 0xf530, 0xd599, 0xf035, 0x8233, 0x0, 0x0);
        gbc.writeMem(0x2494, { 0xcb, 0xd6 });
        gbc.writeMem(0x8233, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcb18);
        EXPECT(gbc.pc(), 0x2496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8233), 0x9d);
        // CB D6 00A6
        gbc.setState(0x67e0, 0x54c8, 0x1d10, 0xaf2a, 0x9ff6, 0xcaca, 0x0, 0x1);
        gbc.writeMem(0x67e0, { 0xcb, 0xd6 });
        gbc.writeMem(0xcaca, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x54c8);
        EXPECT(gbc.pc(), 0x67e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaca), 0x77);
        // CB D6 00A9
        gbc.setState(0xc97c, 0xd4ef, 0x3750, 0xa8d7, 0xe945, 0xf57c, 0x0, 0x0);
        gbc.writeMem(0xc97c, { 0xcb, 0xd6 });
        gbc.writeMem(0xf57c, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd4ef);
        EXPECT(gbc.pc(), 0xc97e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc97c), 0xcb);
        EXPECT(gbc.readMem(0xc97d), 0xd6);
        EXPECT(gbc.readMem(0xf57c), 0x4e);
        // CB D6 00AA
        gbc.setState(0x9, 0x2051, 0xd2a0, 0x2394, 0xb477, 0x80ac, 0x1, 0x1);
        gbc.writeMem(0x9, { 0xcb, 0xd6 });
        gbc.writeMem(0x80ac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2051);
        EXPECT(gbc.pc(), 0xb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ac), 0xff);
        // CB D6 00AC
        gbc.setState(0x412a, 0x79a7, 0xcec0, 0xca3, 0x1a11, 0xf7b7, 0x0, 0x1);
        gbc.writeMem(0x412a, { 0xcb, 0xd6 });
        gbc.writeMem(0xf7b7, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x79a7);
        EXPECT(gbc.pc(), 0x412c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7b7), 0x5c);
        // CB D6 00AD
        gbc.setState(0xe456, 0x68df, 0xf2e0, 0xf749, 0x27be, 0xad4a, 0x0, 0x0);
        gbc.writeMem(0xad4a, { 0xdc });
        gbc.writeMem(0xe456, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x68df);
        EXPECT(gbc.pc(), 0xe458);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4a), 0xdc);
        EXPECT(gbc.readMem(0xe456), 0xcb);
        EXPECT(gbc.readMem(0xe457), 0xd6);
        // CB D6 00AF
        gbc.setState(0x55f5, 0x3e65, 0x2580, 0x32d5, 0x2025, 0x9376, 0x1, 0x1);
        gbc.writeMem(0x55f5, { 0xcb, 0xd6 });
        gbc.writeMem(0x9376, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3e65);
        EXPECT(gbc.pc(), 0x55f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9376), 0xd5);
        // CB D6 00B0
        gbc.setState(0x21d2, 0x609f, 0xa070, 0xdaea, 0x68, 0xe659, 0x0, 0x0);
        gbc.writeMem(0x21d2, { 0xcb, 0xd6 });
        gbc.writeMem(0xe659, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x609f);
        EXPECT(gbc.pc(), 0x21d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe659), 0xde);
        // CB D6 00B1
        gbc.setState(0x4447, 0x5a13, 0x73f0, 0x7f3c, 0x7f24, 0xc985, 0x1, 0x0);
        gbc.writeMem(0x4447, { 0xcb, 0xd6 });
        gbc.writeMem(0xc985, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5a13);
        EXPECT(gbc.pc(), 0x4449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc985), 0xce);
        // CB D6 00B3
        gbc.setState(0x4f8, 0x59de, 0xb2f0, 0xaa9, 0xd4ac, 0xbc92, 0x1, 0x1);
        gbc.writeMem(0x4f8, { 0xcb, 0xd6 });
        gbc.writeMem(0xbc92, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x59de);
        EXPECT(gbc.pc(), 0x4fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc92), 0xb4);
        // CB D6 00B4
        gbc.setState(0xd039, 0x1cc9, 0x7880, 0x23fa, 0x4bbf, 0x4e34, 0x0, 0x1);
        gbc.writeMem(0x4e34, { 0xa4 });
        gbc.writeMem(0xd039, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1cc9);
        EXPECT(gbc.pc(), 0xd03b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd039), 0xcb);
        EXPECT(gbc.readMem(0xd03a), 0xd6);
        // CB D6 00B5
        gbc.setState(0x1996, 0x6fa6, 0x9d0, 0x5f13, 0xe14, 0x5fbe, 0x0, 0x0);
        gbc.writeMem(0x1996, { 0xcb, 0xd6 });
        gbc.writeMem(0x5fbe, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6fa6);
        EXPECT(gbc.pc(), 0x1998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 00BA
        gbc.setState(0x7897, 0x18ea, 0xa530, 0xc2f4, 0x3074, 0x2d12, 0x1, 0x1);
        gbc.writeMem(0x2d12, { 0xb5 });
        gbc.writeMem(0x7897, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x18ea);
        EXPECT(gbc.pc(), 0x7899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 00BD
        gbc.setState(0xb434, 0xb227, 0x9bd0, 0xa244, 0x1d9c, 0xb879, 0x0, 0x0);
        gbc.writeMem(0xb434, { 0xcb, 0xd6 });
        gbc.writeMem(0xb879, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb227);
        EXPECT(gbc.pc(), 0xb436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb434), 0xcb);
        EXPECT(gbc.readMem(0xb435), 0xd6);
        EXPECT(gbc.readMem(0xb879), 0x75);
        // CB D6 00BF
        gbc.setState(0x97b5, 0x579d, 0x95f0, 0x427, 0x72c2, 0x7e98, 0x0, 0x1);
        gbc.writeMem(0x7e98, { 0x4d });
        gbc.writeMem(0x97b5, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x579d);
        EXPECT(gbc.pc(), 0x97b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b5), 0xcb);
        EXPECT(gbc.readMem(0x97b6), 0xd6);
        // CB D6 00C0
        gbc.setState(0x5ea6, 0xc455, 0xd280, 0x9322, 0xf75, 0x8f42, 0x1, 0x0);
        gbc.writeMem(0x5ea6, { 0xcb, 0xd6 });
        gbc.writeMem(0x8f42, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc455);
        EXPECT(gbc.pc(), 0x5ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f42), 0x56);
        // CB D6 00C1
        gbc.setState(0xb170, 0xc978, 0x59e0, 0x92aa, 0xb9bc, 0xe597, 0x0, 0x0);
        gbc.writeMem(0xb170, { 0xcb, 0xd6 });
        gbc.writeMem(0xe597, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc978);
        EXPECT(gbc.pc(), 0xb172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb170), 0xcb);
        EXPECT(gbc.readMem(0xb171), 0xd6);
        EXPECT(gbc.readMem(0xe597), 0xfe);
        // CB D6 00C2
        gbc.setState(0xd76d, 0xa097, 0x4d70, 0x19a9, 0x7354, 0xcda2, 0x0, 0x0);
        gbc.writeMem(0xcda2, { 0xf0 });
        gbc.writeMem(0xd76d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa097);
        EXPECT(gbc.pc(), 0xd76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcda2), 0xf4);
        EXPECT(gbc.readMem(0xd76d), 0xcb);
        EXPECT(gbc.readMem(0xd76e), 0xd6);
        // CB D6 00C4
        gbc.setState(0xcb2a, 0x4605, 0xf160, 0x49b8, 0x48cb, 0x1a51, 0x1, 0x0);
        gbc.writeMem(0x1a51, { 0xad });
        gbc.writeMem(0xcb2a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4605);
        EXPECT(gbc.pc(), 0xcb2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2a), 0xcb);
        EXPECT(gbc.readMem(0xcb2b), 0xd6);
        // CB D6 00C6
        gbc.setState(0x9f14, 0xb472, 0x6510, 0xa421, 0xd64e, 0xbcbb, 0x1, 0x0);
        gbc.writeMem(0x9f14, { 0xcb, 0xd6 });
        gbc.writeMem(0xbcbb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb472);
        EXPECT(gbc.pc(), 0x9f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f14), 0xcb);
        EXPECT(gbc.readMem(0x9f15), 0xd6);
        EXPECT(gbc.readMem(0xbcbb), 0xa5);
        // CB D6 00C8
        gbc.setState(0xbc62, 0xb6b8, 0x6550, 0x66ce, 0x4cc3, 0xf507, 0x0, 0x0);
        gbc.writeMem(0xbc62, { 0xcb, 0xd6 });
        gbc.writeMem(0xf507, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb6b8);
        EXPECT(gbc.pc(), 0xbc64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc62), 0xcb);
        EXPECT(gbc.readMem(0xbc63), 0xd6);
        EXPECT(gbc.readMem(0xf507), 0x4);
        // CB D6 00C9
        gbc.setState(0xa85f, 0x7754, 0xc940, 0x9417, 0x6b90, 0x4f61, 0x0, 0x1);
        gbc.writeMem(0x4f61, { 0xef });
        gbc.writeMem(0xa85f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7754);
        EXPECT(gbc.pc(), 0xa861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa85f), 0xcb);
        EXPECT(gbc.readMem(0xa860), 0xd6);
        // CB D6 00CC
        gbc.setState(0xaf26, 0x9200, 0x7120, 0xc25c, 0xedeb, 0xaa42, 0x1, 0x1);
        gbc.writeMem(0xaa42, { 0xa5 });
        gbc.writeMem(0xaf26, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9200);
        EXPECT(gbc.pc(), 0xaf28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa42), 0xa5);
        EXPECT(gbc.readMem(0xaf26), 0xcb);
        EXPECT(gbc.readMem(0xaf27), 0xd6);
        // CB D6 00CD
        gbc.setState(0x4c78, 0xac25, 0xe4e0, 0xd5c6, 0x46d4, 0x9237, 0x0, 0x1);
        gbc.writeMem(0x4c78, { 0xcb, 0xd6 });
        gbc.writeMem(0x9237, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xac25);
        EXPECT(gbc.pc(), 0x4c7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9237), 0x56);
        // CB D6 00CF
        gbc.setState(0xd843, 0xf95f, 0xc010, 0xe521, 0x75af, 0x599d, 0x0, 0x0);
        gbc.writeMem(0x599d, { 0x24 });
        gbc.writeMem(0xd843, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf95f);
        EXPECT(gbc.pc(), 0xd845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd843), 0xcb);
        EXPECT(gbc.readMem(0xd844), 0xd6);
        // CB D6 00D0
        gbc.setState(0x445a, 0x1a94, 0xe900, 0x5622, 0xddcd, 0x3873, 0x1, 0x1);
        gbc.writeMem(0x3873, { 0x2d });
        gbc.writeMem(0x445a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1a94);
        EXPECT(gbc.pc(), 0x445c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 00D1
        gbc.setState(0xdb6f, 0x2d3a, 0xec60, 0x8376, 0xca88, 0x4fe7, 0x0, 0x1);
        gbc.writeMem(0x4fe7, { 0x45 });
        gbc.writeMem(0xdb6f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2d3a);
        EXPECT(gbc.pc(), 0xdb71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb6f), 0xcb);
        EXPECT(gbc.readMem(0xdb70), 0xd6);
        // CB D6 00D4
        gbc.setState(0x1e0, 0xef44, 0xf340, 0xb458, 0xff9c, 0xda44, 0x0, 0x1);
        gbc.writeMem(0x1e0, { 0xcb, 0xd6 });
        gbc.writeMem(0xda44, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xef44);
        EXPECT(gbc.pc(), 0x1e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda44), 0x25);
        // CB D6 00D6
        gbc.setState(0x849f, 0xd0cd, 0xe8f0, 0xf1ee, 0xec17, 0x54f5, 0x0, 0x0);
        gbc.writeMem(0x54f5, { 0x35 });
        gbc.writeMem(0x849f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd0cd);
        EXPECT(gbc.pc(), 0x84a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x849f), 0xcb);
        EXPECT(gbc.readMem(0x84a0), 0xd6);
        // CB D6 00D7
        gbc.setState(0x4c6a, 0x31be, 0xec00, 0x5283, 0x7529, 0x936c, 0x1, 0x0);
        gbc.writeMem(0x4c6a, { 0xcb, 0xd6 });
        gbc.writeMem(0x936c, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x31be);
        EXPECT(gbc.pc(), 0x4c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x936c), 0x9d);
        // CB D6 00D9
        gbc.setState(0xc2b8, 0x8aca, 0xc2b0, 0x11a6, 0x4855, 0x4eb8, 0x0, 0x1);
        gbc.writeMem(0x4eb8, { 0x76 });
        gbc.writeMem(0xc2b8, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8aca);
        EXPECT(gbc.pc(), 0xc2ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2b8), 0xcb);
        EXPECT(gbc.readMem(0xc2b9), 0xd6);
        // CB D6 00DB
        gbc.setState(0xcf4a, 0x917, 0xcb70, 0x2799, 0xbc3e, 0xc0d5, 0x1, 0x1);
        gbc.writeMem(0xc0d5, { 0x5a });
        gbc.writeMem(0xcf4a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x917);
        EXPECT(gbc.pc(), 0xcf4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d5), 0x5e);
        EXPECT(gbc.readMem(0xcf4a), 0xcb);
        EXPECT(gbc.readMem(0xcf4b), 0xd6);
        // CB D6 00DC
        gbc.setState(0xa99b, 0x255, 0xc750, 0xdba9, 0x8952, 0xe5e8, 0x1, 0x0);
        gbc.writeMem(0xa99b, { 0xcb, 0xd6 });
        gbc.writeMem(0xe5e8, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x255);
        EXPECT(gbc.pc(), 0xa99d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99b), 0xcb);
        EXPECT(gbc.readMem(0xa99c), 0xd6);
        EXPECT(gbc.readMem(0xe5e8), 0x67);
        // CB D6 00DF
        gbc.setState(0xb326, 0xb302, 0x3c0, 0x7790, 0x9ad9, 0x10f2, 0x1, 0x1);
        gbc.writeMem(0x10f2, { 0xde });
        gbc.writeMem(0xb326, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb302);
        EXPECT(gbc.pc(), 0xb328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb326), 0xcb);
        EXPECT(gbc.readMem(0xb327), 0xd6);
        // CB D6 00E1
        gbc.setState(0xd7b7, 0xb55, 0x64d0, 0x3051, 0xc717, 0xc47d, 0x0, 0x0);
        gbc.writeMem(0xc47d, { 0x90 });
        gbc.writeMem(0xd7b7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb55);
        EXPECT(gbc.pc(), 0xd7b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc47d), 0x94);
        EXPECT(gbc.readMem(0xd7b7), 0xcb);
        EXPECT(gbc.readMem(0xd7b8), 0xd6);
        // CB D6 00E2
        gbc.setState(0x10cd, 0x499c, 0xc9d0, 0xa978, 0x6539, 0xc6ce, 0x0, 0x1);
        gbc.writeMem(0x10cd, { 0xcb, 0xd6 });
        gbc.writeMem(0xc6ce, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x499c);
        EXPECT(gbc.pc(), 0x10cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ce), 0xc4);
        // CB D6 00E3
        gbc.setState(0x1384, 0xc570, 0x1570, 0xbc6, 0x9f26, 0xcd9f, 0x1, 0x0);
        gbc.writeMem(0x1384, { 0xcb, 0xd6 });
        gbc.writeMem(0xcd9f, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc570);
        EXPECT(gbc.pc(), 0x1386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd9f), 0x9e);
        // CB D6 00E4
        gbc.setState(0xfb, 0x6cfc, 0x79d0, 0x23dc, 0xb8e0, 0xffa4, 0x0, 0x1);
        gbc.writeMem(0xfb, { 0xcb, 0xd6 });
        gbc.writeMem(0xffa4, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6cfc);
        EXPECT(gbc.pc(), 0xfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa4), 0xbc);
        // CB D6 00E7
        gbc.setState(0x8c7c, 0xcecf, 0xe1f0, 0xc811, 0x7280, 0xdd94, 0x1, 0x1);
        gbc.writeMem(0x8c7c, { 0xcb, 0xd6 });
        gbc.writeMem(0xdd94, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xcecf);
        EXPECT(gbc.pc(), 0x8c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c7c), 0xcb);
        EXPECT(gbc.readMem(0x8c7d), 0xd6);
        EXPECT(gbc.readMem(0xdd94), 0x55);
        // CB D6 00E8
        gbc.setState(0xbb95, 0xb0bc, 0xa180, 0x38b8, 0xcedc, 0x7202, 0x1, 0x0);
        gbc.writeMem(0x7202, { 0x7c });
        gbc.writeMem(0xbb95, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb0bc);
        EXPECT(gbc.pc(), 0xbb97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb95), 0xcb);
        EXPECT(gbc.readMem(0xbb96), 0xd6);
        // CB D6 00E9
        gbc.setState(0xe984, 0xfc6e, 0x780, 0x2bae, 0x4bcd, 0xfde8, 0x0, 0x0);
        gbc.writeMem(0xe984, { 0xcb, 0xd6 });
        gbc.writeMem(0xfde8, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xfc6e);
        EXPECT(gbc.pc(), 0xe986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe984), 0xcb);
        EXPECT(gbc.readMem(0xe985), 0xd6);
        EXPECT(gbc.readMem(0xfde8), 0xcf);
        // CB D6 00EA
        gbc.setState(0x1583, 0x8cb3, 0xad30, 0x5059, 0x4f09, 0x30f, 0x1, 0x0);
        gbc.writeMem(0x30f, { 0xa6 });
        gbc.writeMem(0x1583, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8cb3);
        EXPECT(gbc.pc(), 0x1585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 00EB
        gbc.setState(0xb93, 0xa906, 0xccd0, 0x2e0, 0xcb19, 0x4ba2, 0x0, 0x0);
        gbc.writeMem(0xb93, { 0xcb, 0xd6 });
        gbc.writeMem(0x4ba2, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa906);
        EXPECT(gbc.pc(), 0xb95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 00EC
        gbc.setState(0x4db2, 0xd7ee, 0x54e0, 0x420e, 0x810, 0x9c78, 0x1, 0x0);
        gbc.writeMem(0x4db2, { 0xcb, 0xd6 });
        gbc.writeMem(0x9c78, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd7ee);
        EXPECT(gbc.pc(), 0x4db4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c78), 0xf4);
        // CB D6 00ED
        gbc.setState(0xd2f0, 0x60c9, 0x6180, 0x9a7d, 0xad4a, 0xdfea, 0x0, 0x1);
        gbc.writeMem(0xd2f0, { 0xcb, 0xd6 });
        gbc.writeMem(0xdfea, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x60c9);
        EXPECT(gbc.pc(), 0xd2f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f0), 0xcb);
        EXPECT(gbc.readMem(0xd2f1), 0xd6);
        EXPECT(gbc.readMem(0xdfea), 0x37);
        // CB D6 00EF
        gbc.setState(0x5b47, 0x84e6, 0xd3d0, 0xce0b, 0x8a25, 0x4868, 0x1, 0x1);
        gbc.writeMem(0x4868, { 0x6 });
        gbc.writeMem(0x5b47, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x84e6);
        EXPECT(gbc.pc(), 0x5b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 00F0
        gbc.setState(0xe3ee, 0xd3da, 0x18e0, 0x169, 0xdc2c, 0xd5a, 0x0, 0x1);
        gbc.writeMem(0xd5a, { 0xec });
        gbc.writeMem(0xe3ee, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd3da);
        EXPECT(gbc.pc(), 0xe3f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ee), 0xcb);
        EXPECT(gbc.readMem(0xe3ef), 0xd6);
        // CB D6 00F2
        gbc.setState(0xefb9, 0x9c02, 0x3ca0, 0x643b, 0x5363, 0xadbc, 0x1, 0x0);
        gbc.writeMem(0xadbc, { 0xa7 });
        gbc.writeMem(0xefb9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9c02);
        EXPECT(gbc.pc(), 0xefbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadbc), 0xa7);
        EXPECT(gbc.readMem(0xefb9), 0xcb);
        EXPECT(gbc.readMem(0xefba), 0xd6);
        // CB D6 00F4
        gbc.setState(0x5edc, 0xf9f5, 0xf6f0, 0xad29, 0xeb09, 0xce8e, 0x0, 0x0);
        gbc.writeMem(0x5edc, { 0xcb, 0xd6 });
        gbc.writeMem(0xce8e, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf9f5);
        EXPECT(gbc.pc(), 0x5ede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce8e), 0xaf);
        // CB D6 00F5
        gbc.setState(0x7baa, 0x4072, 0x1ee0, 0xed73, 0x6b4, 0x5540, 0x1, 0x0);
        gbc.writeMem(0x5540, { 0x35 });
        gbc.writeMem(0x7baa, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4072);
        EXPECT(gbc.pc(), 0x7bac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 00F7
        gbc.setState(0x7e5d, 0x240a, 0x3970, 0xdc85, 0x7aed, 0x63fe, 0x0, 0x1);
        gbc.writeMem(0x63fe, { 0xc4 });
        gbc.writeMem(0x7e5d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x240a);
        EXPECT(gbc.pc(), 0x7e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 00F8
        gbc.setState(0x6357, 0x6670, 0x4e60, 0xae23, 0xbd0d, 0x6c16, 0x1, 0x0);
        gbc.writeMem(0x6357, { 0xcb, 0xd6 });
        gbc.writeMem(0x6c16, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6670);
        EXPECT(gbc.pc(), 0x6359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 00FA
        gbc.setState(0x67c5, 0x7dca, 0x8dc0, 0x3033, 0xfb8b, 0x9ccd, 0x0, 0x1);
        gbc.writeMem(0x67c5, { 0xcb, 0xd6 });
        gbc.writeMem(0x9ccd, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7dca);
        EXPECT(gbc.pc(), 0x67c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccd), 0xdc);
        // CB D6 00FC
        gbc.setState(0x9ccd, 0xa297, 0x5a20, 0x4f43, 0xe392, 0xeab6, 0x1, 0x0);
        gbc.writeMem(0x9ccd, { 0xcb, 0xd6 });
        gbc.writeMem(0xeab6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa297);
        EXPECT(gbc.pc(), 0x9ccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccd), 0xcb);
        EXPECT(gbc.readMem(0x9cce), 0xd6);
        EXPECT(gbc.readMem(0xeab6), 0x1f);
        // CB D6 00FD
        gbc.setState(0x22a3, 0xd3bd, 0xeb40, 0xb68f, 0xa7d0, 0xaa00, 0x1, 0x0);
        gbc.writeMem(0x22a3, { 0xcb, 0xd6 });
        gbc.writeMem(0xaa00, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd3bd);
        EXPECT(gbc.pc(), 0x22a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa00), 0x54);
        // CB D6 0100
        gbc.setState(0x8944, 0xb6a9, 0x15f0, 0xcbe4, 0xe93f, 0xdab9, 0x1, 0x1);
        gbc.writeMem(0x8944, { 0xcb, 0xd6 });
        gbc.writeMem(0xdab9, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb6a9);
        EXPECT(gbc.pc(), 0x8946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8944), 0xcb);
        EXPECT(gbc.readMem(0x8945), 0xd6);
        EXPECT(gbc.readMem(0xdab9), 0xa5);
        // CB D6 0101
        gbc.setState(0xd6d, 0x64b4, 0xeff0, 0x8265, 0x5fde, 0x935c, 0x0, 0x0);
        gbc.writeMem(0xd6d, { 0xcb, 0xd6 });
        gbc.writeMem(0x935c, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x64b4);
        EXPECT(gbc.pc(), 0xd6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x935c), 0xe4);
        // CB D6 0102
        gbc.setState(0x7102, 0x3a0d, 0x9bc0, 0x1764, 0xfb3a, 0x90bd, 0x0, 0x0);
        gbc.writeMem(0x7102, { 0xcb, 0xd6 });
        gbc.writeMem(0x90bd, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3a0d);
        EXPECT(gbc.pc(), 0x7104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90bd), 0xe);
        // CB D6 0103
        gbc.setState(0xd20c, 0x94f4, 0x5670, 0x6b98, 0xee3b, 0x8d41, 0x0, 0x1);
        gbc.writeMem(0x8d41, { 0xed });
        gbc.writeMem(0xd20c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x94f4);
        EXPECT(gbc.pc(), 0xd20e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d41), 0xed);
        EXPECT(gbc.readMem(0xd20c), 0xcb);
        EXPECT(gbc.readMem(0xd20d), 0xd6);
        // CB D6 0104
        gbc.setState(0xaa0e, 0xa8c0, 0xc510, 0xcfe7, 0xf003, 0x8892, 0x0, 0x0);
        gbc.writeMem(0x8892, { 0xb8 });
        gbc.writeMem(0xaa0e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa8c0);
        EXPECT(gbc.pc(), 0xaa10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8892), 0xbc);
        EXPECT(gbc.readMem(0xaa0e), 0xcb);
        EXPECT(gbc.readMem(0xaa0f), 0xd6);
        // CB D6 0106
        gbc.setState(0x2297, 0x87b, 0x89c0, 0x29f6, 0x5312, 0xfbbf, 0x1, 0x1);
        gbc.writeMem(0x2297, { 0xcb, 0xd6 });
        gbc.writeMem(0xfbbf, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x87b);
        EXPECT(gbc.pc(), 0x2299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfbbf), 0x6f);
        // CB D6 0107
        gbc.setState(0xe3f1, 0xf37, 0x5d30, 0xce69, 0x808a, 0x806a, 0x0, 0x0);
        gbc.writeMem(0x806a, { 0xb });
        gbc.writeMem(0xe3f1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf37);
        EXPECT(gbc.pc(), 0xe3f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x806a), 0xf);
        EXPECT(gbc.readMem(0xe3f1), 0xcb);
        EXPECT(gbc.readMem(0xe3f2), 0xd6);
        // CB D6 0108
        gbc.setState(0x1f61, 0x8bc1, 0x95c0, 0xbe0, 0x7f85, 0xa71a, 0x0, 0x1);
        gbc.writeMem(0x1f61, { 0xcb, 0xd6 });
        gbc.writeMem(0xa71a, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8bc1);
        EXPECT(gbc.pc(), 0x1f63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa71a), 0xc);
        // CB D6 0109
        gbc.setState(0x19fe, 0x5649, 0x2ba0, 0x3bfe, 0xa1ce, 0xc158, 0x1, 0x0);
        gbc.writeMem(0x19fe, { 0xcb, 0xd6 });
        gbc.writeMem(0xc158, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5649);
        EXPECT(gbc.pc(), 0x1a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc158), 0x84);
        // CB D6 010A
        gbc.setState(0xd7b6, 0xd9d4, 0x3f70, 0x31b5, 0x84d8, 0x5e1e, 0x1, 0x1);
        gbc.writeMem(0x5e1e, { 0x6e });
        gbc.writeMem(0xd7b6, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd9d4);
        EXPECT(gbc.pc(), 0xd7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7b6), 0xcb);
        EXPECT(gbc.readMem(0xd7b7), 0xd6);
        // CB D6 010B
        gbc.setState(0xaf2e, 0x66b1, 0xd670, 0xf327, 0xdd26, 0xc0fe, 0x1, 0x0);
        gbc.writeMem(0xaf2e, { 0xcb, 0xd6 });
        gbc.writeMem(0xc0fe, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x66b1);
        EXPECT(gbc.pc(), 0xaf30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf2e), 0xcb);
        EXPECT(gbc.readMem(0xaf2f), 0xd6);
        EXPECT(gbc.readMem(0xc0fe), 0xbc);
        // CB D6 010C
        gbc.setState(0x4a96, 0xa7c7, 0x7360, 0x2623, 0x5426, 0xd10d, 0x0, 0x0);
        gbc.writeMem(0x4a96, { 0xcb, 0xd6 });
        gbc.writeMem(0xd10d, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa7c7);
        EXPECT(gbc.pc(), 0x4a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd10d), 0x3c);
        // CB D6 010D
        gbc.setState(0xc8a5, 0x6dbf, 0x82f0, 0x23e9, 0xded5, 0x123, 0x1, 0x0);
        gbc.writeMem(0x123, { 0x2c });
        gbc.writeMem(0xc8a5, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6dbf);
        EXPECT(gbc.pc(), 0xc8a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a5), 0xcb);
        EXPECT(gbc.readMem(0xc8a6), 0xd6);
        // CB D6 010E
        gbc.setState(0x7455, 0x589, 0x39f0, 0xb90a, 0x814e, 0xa571, 0x1, 0x1);
        gbc.writeMem(0x7455, { 0xcb, 0xd6 });
        gbc.writeMem(0xa571, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x589);
        EXPECT(gbc.pc(), 0x7457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa571), 0xee);
        // CB D6 0111
        gbc.setState(0x6e31, 0xf17c, 0x54c0, 0xfcf4, 0xe41e, 0xf45f, 0x0, 0x1);
        gbc.writeMem(0x6e31, { 0xcb, 0xd6 });
        gbc.writeMem(0xf45f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf17c);
        EXPECT(gbc.pc(), 0x6e33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf45f), 0x44);
        // CB D6 0112
        gbc.setState(0xa556, 0xba74, 0xaa0, 0xbde1, 0x1fb4, 0xbcb0, 0x0, 0x0);
        gbc.writeMem(0xa556, { 0xcb, 0xd6 });
        gbc.writeMem(0xbcb0, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xba74);
        EXPECT(gbc.pc(), 0xa558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa556), 0xcb);
        EXPECT(gbc.readMem(0xa557), 0xd6);
        EXPECT(gbc.readMem(0xbcb0), 0xb5);
        // CB D6 0113
        gbc.setState(0xb36a, 0xe560, 0xf9b0, 0x6d4, 0x75a1, 0xe3d0, 0x1, 0x1);
        gbc.writeMem(0xb36a, { 0xcb, 0xd6 });
        gbc.writeMem(0xe3d0, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe560);
        EXPECT(gbc.pc(), 0xb36c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36a), 0xcb);
        EXPECT(gbc.readMem(0xb36b), 0xd6);
        EXPECT(gbc.readMem(0xe3d0), 0x85);
        // CB D6 0114
        gbc.setState(0xbfbb, 0xe73f, 0x5c40, 0xf29d, 0xaf9b, 0xbf13, 0x1, 0x0);
        gbc.writeMem(0xbf13, { 0x83 });
        gbc.writeMem(0xbfbb, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe73f);
        EXPECT(gbc.pc(), 0xbfbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf13), 0x87);
        EXPECT(gbc.readMem(0xbfbb), 0xcb);
        EXPECT(gbc.readMem(0xbfbc), 0xd6);
        // CB D6 0117
        gbc.setState(0xced1, 0x26ea, 0xbd50, 0x442b, 0xe7ec, 0xc2d5, 0x1, 0x0);
        gbc.writeMem(0xc2d5, { 0x9d });
        gbc.writeMem(0xced1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x26ea);
        EXPECT(gbc.pc(), 0xced3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d5), 0x9d);
        EXPECT(gbc.readMem(0xced1), 0xcb);
        EXPECT(gbc.readMem(0xced2), 0xd6);
        // CB D6 0119
        gbc.setState(0xd2a8, 0x7fd9, 0x2b80, 0xb06d, 0x73ac, 0xf1bb, 0x0, 0x0);
        gbc.writeMem(0xd2a8, { 0xcb, 0xd6 });
        gbc.writeMem(0xf1bb, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7fd9);
        EXPECT(gbc.pc(), 0xd2aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2a8), 0xcb);
        EXPECT(gbc.readMem(0xd2a9), 0xd6);
        EXPECT(gbc.readMem(0xf1bb), 0xbd);
        // CB D6 011B
        gbc.setState(0xbf6b, 0xbd7a, 0xe80, 0x11f4, 0x4573, 0x3354, 0x0, 0x1);
        gbc.writeMem(0x3354, { 0xbd });
        gbc.writeMem(0xbf6b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbd7a);
        EXPECT(gbc.pc(), 0xbf6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf6b), 0xcb);
        EXPECT(gbc.readMem(0xbf6c), 0xd6);
        // CB D6 011C
        gbc.setState(0xe543, 0xfad4, 0x9c70, 0xfc7c, 0xf533, 0xf3c7, 0x0, 0x1);
        gbc.writeMem(0xe543, { 0xcb, 0xd6 });
        gbc.writeMem(0xf3c7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfad4);
        EXPECT(gbc.pc(), 0xe545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe543), 0xcb);
        EXPECT(gbc.readMem(0xe544), 0xd6);
        EXPECT(gbc.readMem(0xf3c7), 0x8f);
        // CB D6 011D
        gbc.setState(0xe047, 0x4afb, 0x7be0, 0xb14f, 0x78bf, 0x18e, 0x0, 0x0);
        gbc.writeMem(0x18e, { 0xa7 });
        gbc.writeMem(0xe047, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4afb);
        EXPECT(gbc.pc(), 0xe049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe047), 0xcb);
        EXPECT(gbc.readMem(0xe048), 0xd6);
        // CB D6 011E
        gbc.setState(0xbdea, 0xd69, 0x5aa0, 0x6d6b, 0x73b9, 0x8ccd, 0x0, 0x1);
        gbc.writeMem(0x8ccd, { 0x27 });
        gbc.writeMem(0xbdea, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd69);
        EXPECT(gbc.pc(), 0xbdec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ccd), 0x27);
        EXPECT(gbc.readMem(0xbdea), 0xcb);
        EXPECT(gbc.readMem(0xbdeb), 0xd6);
        // CB D6 011F
        gbc.setState(0xeae2, 0x88f5, 0x8700, 0xfd06, 0xc557, 0xd10e, 0x0, 0x0);
        gbc.writeMem(0xd10e, { 0xda });
        gbc.writeMem(0xeae2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x88f5);
        EXPECT(gbc.pc(), 0xeae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd10e), 0xde);
        EXPECT(gbc.readMem(0xeae2), 0xcb);
        EXPECT(gbc.readMem(0xeae3), 0xd6);
        // CB D6 0120
        gbc.setState(0x2fa7, 0xe900, 0xfcf0, 0xf5e3, 0xe422, 0xb77d, 0x1, 0x0);
        gbc.writeMem(0x2fa7, { 0xcb, 0xd6 });
        gbc.writeMem(0xb77d, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe900);
        EXPECT(gbc.pc(), 0x2fa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb77d), 0xd5);
        // CB D6 0126
        gbc.setState(0x5b05, 0x4973, 0xeae0, 0xa60d, 0x1286, 0xcfc5, 0x1, 0x1);
        gbc.writeMem(0x5b05, { 0xcb, 0xd6 });
        gbc.writeMem(0xcfc5, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4973);
        EXPECT(gbc.pc(), 0x5b07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc5), 0x3d);
        // CB D6 0127
        gbc.setState(0x7009, 0x52ca, 0xd40, 0x296, 0xfdcf, 0xf130, 0x1, 0x0);
        gbc.writeMem(0x7009, { 0xcb, 0xd6 });
        gbc.writeMem(0xf130, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x52ca);
        EXPECT(gbc.pc(), 0x700b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf130), 0x9d);
        // CB D6 012A
        gbc.setState(0x3a8b, 0xea74, 0x3390, 0x19b0, 0xf6b8, 0xc64f, 0x0, 0x0);
        gbc.writeMem(0x3a8b, { 0xcb, 0xd6 });
        gbc.writeMem(0xc64f, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xea74);
        EXPECT(gbc.pc(), 0x3a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc64f), 0x65);
        // CB D6 012B
        gbc.setState(0xb764, 0xb4f1, 0x6a30, 0x2515, 0xb8d7, 0xa83e, 0x1, 0x1);
        gbc.writeMem(0xa83e, { 0xbe });
        gbc.writeMem(0xb764, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb4f1);
        EXPECT(gbc.pc(), 0xb766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa83e), 0xbe);
        EXPECT(gbc.readMem(0xb764), 0xcb);
        EXPECT(gbc.readMem(0xb765), 0xd6);
        // CB D6 012E
        gbc.setState(0x6d37, 0xc0db, 0xb570, 0xa33c, 0xf49f, 0x3265, 0x0, 0x0);
        gbc.writeMem(0x3265, { 0x95 });
        gbc.writeMem(0x6d37, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc0db);
        EXPECT(gbc.pc(), 0x6d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 012F
        gbc.setState(0xd73, 0xf82a, 0x7d20, 0xecaf, 0xf2a4, 0xc1e2, 0x0, 0x0);
        gbc.writeMem(0xd73, { 0xcb, 0xd6 });
        gbc.writeMem(0xc1e2, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf82a);
        EXPECT(gbc.pc(), 0xd75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1e2), 0xdd);
        // CB D6 0130
        gbc.setState(0x5b89, 0x282, 0x5160, 0xb004, 0xd647, 0x2789, 0x1, 0x1);
        gbc.writeMem(0x2789, { 0xef });
        gbc.writeMem(0x5b89, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x282);
        EXPECT(gbc.pc(), 0x5b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0131
        gbc.setState(0xc974, 0xa9ef, 0x15f0, 0xac25, 0xbf9a, 0x6724, 0x0, 0x1);
        gbc.writeMem(0x6724, { 0x76 });
        gbc.writeMem(0xc974, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa9ef);
        EXPECT(gbc.pc(), 0xc976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc974), 0xcb);
        EXPECT(gbc.readMem(0xc975), 0xd6);
        // CB D6 0132
        gbc.setState(0x6001, 0xb63d, 0x1d00, 0xdb83, 0x82e6, 0x58ce, 0x0, 0x0);
        gbc.writeMem(0x58ce, { 0xd7 });
        gbc.writeMem(0x6001, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb63d);
        EXPECT(gbc.pc(), 0x6003);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0133
        gbc.setState(0x8504, 0xf525, 0xf500, 0x1645, 0xd78b, 0x621b, 0x1, 0x1);
        gbc.writeMem(0x621b, { 0x9c });
        gbc.writeMem(0x8504, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf525);
        EXPECT(gbc.pc(), 0x8506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8504), 0xcb);
        EXPECT(gbc.readMem(0x8505), 0xd6);
        // CB D6 0134
        gbc.setState(0x2241, 0x98ae, 0xe980, 0xa0e0, 0x86a, 0xa452, 0x0, 0x1);
        gbc.writeMem(0x2241, { 0xcb, 0xd6 });
        gbc.writeMem(0xa452, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x98ae);
        EXPECT(gbc.pc(), 0x2243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa452), 0x5c);
        // CB D6 0137
        gbc.setState(0x4e92, 0xc5d2, 0x1e00, 0x546f, 0xb6fb, 0xbfaa, 0x0, 0x1);
        gbc.writeMem(0x4e92, { 0xcb, 0xd6 });
        gbc.writeMem(0xbfaa, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc5d2);
        EXPECT(gbc.pc(), 0x4e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfaa), 0xac);
        // CB D6 0138
        gbc.setState(0x5f14, 0x1c02, 0x26f0, 0x6c7d, 0x735f, 0xd6fb, 0x1, 0x1);
        gbc.writeMem(0x5f14, { 0xcb, 0xd6 });
        gbc.writeMem(0xd6fb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1c02);
        EXPECT(gbc.pc(), 0x5f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6fb), 0x47);
        // CB D6 0139
        gbc.setState(0x1c2e, 0xa3e2, 0xa7f0, 0x1f5d, 0x46ae, 0x5e66, 0x1, 0x1);
        gbc.writeMem(0x1c2e, { 0xcb, 0xd6 });
        gbc.writeMem(0x5e66, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa3e2);
        EXPECT(gbc.pc(), 0x1c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 013A
        gbc.setState(0xc849, 0x8b2f, 0x2240, 0x2db6, 0x7788, 0xc774, 0x1, 0x0);
        gbc.writeMem(0xc774, { 0xf5 });
        gbc.writeMem(0xc849, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8b2f);
        EXPECT(gbc.pc(), 0xc84b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc774), 0xf5);
        EXPECT(gbc.readMem(0xc849), 0xcb);
        EXPECT(gbc.readMem(0xc84a), 0xd6);
        // CB D6 013D
        gbc.setState(0x4f51, 0xfd27, 0xc700, 0xd580, 0xe6c8, 0xcc6d, 0x0, 0x0);
        gbc.writeMem(0x4f51, { 0xcb, 0xd6 });
        gbc.writeMem(0xcc6d, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfd27);
        EXPECT(gbc.pc(), 0x4f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc6d), 0xe7);
        // CB D6 013E
        gbc.setState(0xc699, 0x6e39, 0x1c10, 0xe74c, 0xaea8, 0x36b7, 0x0, 0x0);
        gbc.writeMem(0x36b7, { 0x14 });
        gbc.writeMem(0xc699, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6e39);
        EXPECT(gbc.pc(), 0xc69b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc699), 0xcb);
        EXPECT(gbc.readMem(0xc69a), 0xd6);
        // CB D6 013F
        gbc.setState(0x8bd3, 0x2479, 0x85f0, 0xf4a7, 0xe861, 0xea02, 0x1, 0x0);
        gbc.writeMem(0x8bd3, { 0xcb, 0xd6 });
        gbc.writeMem(0xea02, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2479);
        EXPECT(gbc.pc(), 0x8bd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bd3), 0xcb);
        EXPECT(gbc.readMem(0x8bd4), 0xd6);
        EXPECT(gbc.readMem(0xea02), 0xe6);
        // CB D6 0141
        gbc.setState(0x5727, 0x70c5, 0x5ee0, 0xafdb, 0x897a, 0xb765, 0x0, 0x1);
        gbc.writeMem(0x5727, { 0xcb, 0xd6 });
        gbc.writeMem(0xb765, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x70c5);
        EXPECT(gbc.pc(), 0x5729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb765), 0x94);
        // CB D6 0143
        gbc.setState(0xefbb, 0xecf, 0x7700, 0x6a40, 0xde10, 0x82b1, 0x0, 0x0);
        gbc.writeMem(0x82b1, { 0x8e });
        gbc.writeMem(0xefbb, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xecf);
        EXPECT(gbc.pc(), 0xefbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b1), 0x8e);
        EXPECT(gbc.readMem(0xefbb), 0xcb);
        EXPECT(gbc.readMem(0xefbc), 0xd6);
        // CB D6 0144
        gbc.setState(0x6880, 0x8bef, 0x8dd0, 0x722c, 0xbd29, 0xd437, 0x0, 0x1);
        gbc.writeMem(0x6880, { 0xcb, 0xd6 });
        gbc.writeMem(0xd437, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8bef);
        EXPECT(gbc.pc(), 0x6882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd437), 0x6);
        // CB D6 0145
        gbc.setState(0xc17f, 0xebbd, 0xe90, 0x2bb5, 0xc2c5, 0xec37, 0x1, 0x1);
        gbc.writeMem(0xc17f, { 0xcb, 0xd6 });
        gbc.writeMem(0xec37, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xebbd);
        EXPECT(gbc.pc(), 0xc181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc17f), 0xcb);
        EXPECT(gbc.readMem(0xc180), 0xd6);
        EXPECT(gbc.readMem(0xec37), 0xb5);
        // CB D6 0147
        gbc.setState(0x1541, 0xaed, 0x47b0, 0x39ba, 0xf411, 0xd05d, 0x0, 0x0);
        gbc.writeMem(0x1541, { 0xcb, 0xd6 });
        gbc.writeMem(0xd05d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xaed);
        EXPECT(gbc.pc(), 0x1543);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd05d), 0xa6);
        // CB D6 0148
        gbc.setState(0x2184, 0x2d1, 0x43e0, 0x4b56, 0x6bc4, 0x51f1, 0x1, 0x1);
        gbc.writeMem(0x2184, { 0xcb, 0xd6 });
        gbc.writeMem(0x51f1, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2d1);
        EXPECT(gbc.pc(), 0x2186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0149
        gbc.setState(0x19ff, 0x26a1, 0xe760, 0x3a41, 0xc88c, 0xa976, 0x1, 0x0);
        gbc.writeMem(0x19ff, { 0xcb, 0xd6 });
        gbc.writeMem(0xa976, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x26a1);
        EXPECT(gbc.pc(), 0x1a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa976), 0x44);
        // CB D6 014A
        gbc.setState(0xc7d9, 0x7f26, 0xead0, 0xdbfd, 0x7051, 0x86de, 0x1, 0x1);
        gbc.writeMem(0x86de, { 0xee });
        gbc.writeMem(0xc7d9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7f26);
        EXPECT(gbc.pc(), 0xc7db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86de), 0xee);
        EXPECT(gbc.readMem(0xc7d9), 0xcb);
        EXPECT(gbc.readMem(0xc7da), 0xd6);
        // CB D6 014D
        gbc.setState(0x5390, 0xed29, 0xf680, 0x2ed1, 0x6934, 0xae83, 0x1, 0x1);
        gbc.writeMem(0x5390, { 0xcb, 0xd6 });
        gbc.writeMem(0xae83, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xed29);
        EXPECT(gbc.pc(), 0x5392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae83), 0x35);
        // CB D6 014E
        gbc.setState(0x4515, 0x20b7, 0xab60, 0xad7f, 0x3bee, 0x69d1, 0x1, 0x0);
        gbc.writeMem(0x4515, { 0xcb, 0xd6 });
        gbc.writeMem(0x69d1, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x20b7);
        EXPECT(gbc.pc(), 0x4517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0150
        gbc.setState(0xe190, 0x398d, 0x6f70, 0xec0f, 0x4170, 0x9bdb, 0x0, 0x0);
        gbc.writeMem(0x9bdb, { 0x80 });
        gbc.writeMem(0xe190, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x398d);
        EXPECT(gbc.pc(), 0xe192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bdb), 0x84);
        EXPECT(gbc.readMem(0xe190), 0xcb);
        EXPECT(gbc.readMem(0xe191), 0xd6);
        // CB D6 0151
        gbc.setState(0x58a9, 0xed93, 0xb6c0, 0x78e8, 0x9702, 0x6bce, 0x0, 0x0);
        gbc.writeMem(0x58a9, { 0xcb, 0xd6 });
        gbc.writeMem(0x6bce, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xed93);
        EXPECT(gbc.pc(), 0x58ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0152
        gbc.setState(0x6633, 0x98e7, 0xf000, 0xe149, 0x9e1c, 0xa074, 0x0, 0x0);
        gbc.writeMem(0x6633, { 0xcb, 0xd6 });
        gbc.writeMem(0xa074, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x98e7);
        EXPECT(gbc.pc(), 0x6635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa074), 0x6c);
        // CB D6 0153
        gbc.setState(0xb258, 0x340d, 0x9830, 0x2998, 0x979, 0xbb90, 0x1, 0x0);
        gbc.writeMem(0xb258, { 0xcb, 0xd6 });
        gbc.writeMem(0xbb90, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x340d);
        EXPECT(gbc.pc(), 0xb25a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb258), 0xcb);
        EXPECT(gbc.readMem(0xb259), 0xd6);
        EXPECT(gbc.readMem(0xbb90), 0xcf);
        // CB D6 0154
        gbc.setState(0x89d7, 0xf40b, 0x77b0, 0xd99d, 0xbd66, 0x9ad1, 0x1, 0x0);
        gbc.writeMem(0x89d7, { 0xcb, 0xd6 });
        gbc.writeMem(0x9ad1, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf40b);
        EXPECT(gbc.pc(), 0x89d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89d7), 0xcb);
        EXPECT(gbc.readMem(0x89d8), 0xd6);
        EXPECT(gbc.readMem(0x9ad1), 0x5c);
        // CB D6 0155
        gbc.setState(0x4ec, 0xf35f, 0x44d0, 0x4d, 0xb027, 0x8359, 0x1, 0x1);
        gbc.writeMem(0x4ec, { 0xcb, 0xd6 });
        gbc.writeMem(0x8359, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf35f);
        EXPECT(gbc.pc(), 0x4ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8359), 0x7c);
        // CB D6 0158
        gbc.setState(0x4cbf, 0x3f2, 0x4310, 0xd92c, 0xf47, 0x99c6, 0x1, 0x0);
        gbc.writeMem(0x4cbf, { 0xcb, 0xd6 });
        gbc.writeMem(0x99c6, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3f2);
        EXPECT(gbc.pc(), 0x4cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c6), 0x45);
        // CB D6 015A
        gbc.setState(0x234f, 0x3298, 0x1660, 0xc356, 0xa5dd, 0x938c, 0x1, 0x1);
        gbc.writeMem(0x234f, { 0xcb, 0xd6 });
        gbc.writeMem(0x938c, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3298);
        EXPECT(gbc.pc(), 0x2351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x938c), 0xbf);
        // CB D6 015B
        gbc.setState(0xbb28, 0x1075, 0xebc0, 0xe0fd, 0x3e05, 0xe3cd, 0x0, 0x0);
        gbc.writeMem(0xbb28, { 0xcb, 0xd6 });
        gbc.writeMem(0xe3cd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1075);
        EXPECT(gbc.pc(), 0xbb2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb28), 0xcb);
        EXPECT(gbc.readMem(0xbb29), 0xd6);
        EXPECT(gbc.readMem(0xe3cd), 0x84);
        // CB D6 015C
        gbc.setState(0x3160, 0x1a27, 0xb060, 0xc6be, 0xfe5, 0x9cc6, 0x0, 0x1);
        gbc.writeMem(0x3160, { 0xcb, 0xd6 });
        gbc.writeMem(0x9cc6, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1a27);
        EXPECT(gbc.pc(), 0x3162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cc6), 0xe4);
        // CB D6 015D
        gbc.setState(0x5dc7, 0x210d, 0xd0e0, 0x8dbc, 0x3a54, 0x4004, 0x0, 0x0);
        gbc.writeMem(0x4004, { 0xf4 });
        gbc.writeMem(0x5dc7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x210d);
        EXPECT(gbc.pc(), 0x5dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 015F
        gbc.setState(0xb0e1, 0x59e1, 0x2040, 0x3004, 0x2fd9, 0x2e3f, 0x0, 0x1);
        gbc.writeMem(0x2e3f, { 0xc });
        gbc.writeMem(0xb0e1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x59e1);
        EXPECT(gbc.pc(), 0xb0e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0e1), 0xcb);
        EXPECT(gbc.readMem(0xb0e2), 0xd6);
        // CB D6 0160
        gbc.setState(0xd6d7, 0x6edb, 0xd70, 0x3f65, 0xddd3, 0xa678, 0x1, 0x0);
        gbc.writeMem(0xa678, { 0xe6 });
        gbc.writeMem(0xd6d7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6edb);
        EXPECT(gbc.pc(), 0xd6d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa678), 0xe6);
        EXPECT(gbc.readMem(0xd6d7), 0xcb);
        EXPECT(gbc.readMem(0xd6d8), 0xd6);
        // CB D6 0161
        gbc.setState(0x1487, 0xd535, 0x19a0, 0x781f, 0x2b07, 0x1cd0, 0x0, 0x0);
        gbc.writeMem(0x1487, { 0xcb, 0xd6 });
        gbc.writeMem(0x1cd0, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd535);
        EXPECT(gbc.pc(), 0x1489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0162
        gbc.setState(0x990e, 0x1fd5, 0x4d70, 0xbbb3, 0xd22a, 0x563c, 0x0, 0x1);
        gbc.writeMem(0x563c, { 0xa6 });
        gbc.writeMem(0x990e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1fd5);
        EXPECT(gbc.pc(), 0x9910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x990e), 0xcb);
        EXPECT(gbc.readMem(0x990f), 0xd6);
        // CB D6 0165
        gbc.setState(0xe921, 0x37fc, 0x44d0, 0x2e6e, 0x691a, 0x8dc4, 0x0, 0x1);
        gbc.writeMem(0x8dc4, { 0x35 });
        gbc.writeMem(0xe921, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x37fc);
        EXPECT(gbc.pc(), 0xe923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc4), 0x35);
        EXPECT(gbc.readMem(0xe921), 0xcb);
        EXPECT(gbc.readMem(0xe922), 0xd6);
        // CB D6 0166
        gbc.setState(0x7e06, 0x452c, 0xc060, 0xccf9, 0x137d, 0x2536, 0x0, 0x1);
        gbc.writeMem(0x2536, { 0xfc });
        gbc.writeMem(0x7e06, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x452c);
        EXPECT(gbc.pc(), 0x7e08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0167
        gbc.setState(0x4c3d, 0xb619, 0xbe0, 0xd9ce, 0xf577, 0xc526, 0x0, 0x1);
        gbc.writeMem(0x4c3d, { 0xcb, 0xd6 });
        gbc.writeMem(0xc526, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb619);
        EXPECT(gbc.pc(), 0x4c3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc526), 0x5c);
        // CB D6 0169
        gbc.setState(0xab3f, 0xb99c, 0xf130, 0xf69d, 0x2b8f, 0x90bb, 0x0, 0x0);
        gbc.writeMem(0x90bb, { 0xbf });
        gbc.writeMem(0xab3f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb99c);
        EXPECT(gbc.pc(), 0xab41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90bb), 0xbf);
        EXPECT(gbc.readMem(0xab3f), 0xcb);
        EXPECT(gbc.readMem(0xab40), 0xd6);
        // CB D6 016A
        gbc.setState(0x6e8a, 0x2cd3, 0xa2f0, 0xc009, 0xfe4c, 0xf4f8, 0x0, 0x0);
        gbc.writeMem(0x6e8a, { 0xcb, 0xd6 });
        gbc.writeMem(0xf4f8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2cd3);
        EXPECT(gbc.pc(), 0x6e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4f8), 0x47);
        // CB D6 016C
        gbc.setState(0x4603, 0x7f78, 0x4b60, 0x80a4, 0x473c, 0xb3f2, 0x0, 0x1);
        gbc.writeMem(0x4603, { 0xcb, 0xd6 });
        gbc.writeMem(0xb3f2, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7f78);
        EXPECT(gbc.pc(), 0x4605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f2), 0xc4);
        // CB D6 0171
        gbc.setState(0x7ec9, 0x29fe, 0xc8f0, 0x8632, 0x606, 0x933b, 0x0, 0x1);
        gbc.writeMem(0x7ec9, { 0xcb, 0xd6 });
        gbc.writeMem(0x933b, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x29fe);
        EXPECT(gbc.pc(), 0x7ecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x933b), 0x16);
        // CB D6 0172
        gbc.setState(0x8f42, 0x7332, 0x41b0, 0x7cb4, 0x88d, 0xfb2d, 0x1, 0x1);
        gbc.writeMem(0x8f42, { 0xcb, 0xd6 });
        gbc.writeMem(0xfb2d, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7332);
        EXPECT(gbc.pc(), 0x8f44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f42), 0xcb);
        EXPECT(gbc.readMem(0x8f43), 0xd6);
        EXPECT(gbc.readMem(0xfb2d), 0x55);
        // CB D6 0173
        gbc.setState(0xc47e, 0x6bf7, 0x7fb0, 0x9295, 0x6d7c, 0xcdf7, 0x0, 0x0);
        gbc.writeMem(0xc47e, { 0xcb, 0xd6 });
        gbc.writeMem(0xcdf7, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6bf7);
        EXPECT(gbc.pc(), 0xc480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc47e), 0xcb);
        EXPECT(gbc.readMem(0xc47f), 0xd6);
        EXPECT(gbc.readMem(0xcdf7), 0x95);
        // CB D6 0174
        gbc.setState(0x5ebe, 0xe4e8, 0xf2f0, 0xd0b1, 0x242f, 0xdd75, 0x1, 0x0);
        gbc.writeMem(0x5ebe, { 0xcb, 0xd6 });
        gbc.writeMem(0xdd75, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe4e8);
        EXPECT(gbc.pc(), 0x5ec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd75), 0x2e);
        // CB D6 0176
        gbc.setState(0x2a1d, 0xe021, 0xa970, 0x9bee, 0x8f07, 0x6383, 0x0, 0x0);
        gbc.writeMem(0x2a1d, { 0xcb, 0xd6 });
        gbc.writeMem(0x6383, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe021);
        EXPECT(gbc.pc(), 0x2a1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0178
        gbc.setState(0xe947, 0xf417, 0xf850, 0xb575, 0x18ce, 0xced0, 0x1, 0x0);
        gbc.writeMem(0xced0, { 0xee });
        gbc.writeMem(0xe947, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf417);
        EXPECT(gbc.pc(), 0xe949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced0), 0xee);
        EXPECT(gbc.readMem(0xe947), 0xcb);
        EXPECT(gbc.readMem(0xe948), 0xd6);
        // CB D6 0179
        gbc.setState(0x1496, 0xfc24, 0xbf40, 0x3081, 0x17ee, 0x220e, 0x1, 0x0);
        gbc.writeMem(0x1496, { 0xcb, 0xd6 });
        gbc.writeMem(0x220e, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfc24);
        EXPECT(gbc.pc(), 0x1498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 017A
        gbc.setState(0x9e0, 0x36c1, 0x38e0, 0xd48f, 0xf019, 0x9696, 0x0, 0x0);
        gbc.writeMem(0x9e0, { 0xcb, 0xd6 });
        gbc.writeMem(0x9696, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x36c1);
        EXPECT(gbc.pc(), 0x9e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9696), 0x4c);
        // CB D6 017B
        gbc.setState(0x607e, 0xff00, 0xf6f0, 0x99f1, 0xb7a4, 0x985e, 0x1, 0x1);
        gbc.writeMem(0x607e, { 0xcb, 0xd6 });
        gbc.writeMem(0x985e, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xff00);
        EXPECT(gbc.pc(), 0x6080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x985e), 0x1d);
        // CB D6 017D
        gbc.setState(0x9cd, 0x76fa, 0xa3e0, 0x2c1b, 0xbd5b, 0x72d1, 0x0, 0x1);
        gbc.writeMem(0x9cd, { 0xcb, 0xd6 });
        gbc.writeMem(0x72d1, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x76fa);
        EXPECT(gbc.pc(), 0x9cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 017E
        gbc.setState(0xb540, 0xe504, 0x6d70, 0xf194, 0xddab, 0xf30d, 0x0, 0x0);
        gbc.writeMem(0xb540, { 0xcb, 0xd6 });
        gbc.writeMem(0xf30d, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe504);
        EXPECT(gbc.pc(), 0xb542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb540), 0xcb);
        EXPECT(gbc.readMem(0xb541), 0xd6);
        EXPECT(gbc.readMem(0xf30d), 0x95);
        // CB D6 017F
        gbc.setState(0xadf4, 0x5f00, 0xf8c0, 0x71be, 0x91dc, 0x427e, 0x0, 0x1);
        gbc.writeMem(0x427e, { 0xa7 });
        gbc.writeMem(0xadf4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5f00);
        EXPECT(gbc.pc(), 0xadf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf4), 0xcb);
        EXPECT(gbc.readMem(0xadf5), 0xd6);
        // CB D6 0180
        gbc.setState(0x3c58, 0x5392, 0x1610, 0xc471, 0x2644, 0xf1ec, 0x1, 0x0);
        gbc.writeMem(0x3c58, { 0xcb, 0xd6 });
        gbc.writeMem(0xf1ec, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5392);
        EXPECT(gbc.pc(), 0x3c5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1ec), 0x47);
        // CB D6 0181
        gbc.setState(0x7a97, 0x452, 0x9a50, 0x6b09, 0x142c, 0x76c1, 0x1, 0x0);
        gbc.writeMem(0x76c1, { 0xbd });
        gbc.writeMem(0x7a97, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x452);
        EXPECT(gbc.pc(), 0x7a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0182
        gbc.setState(0xccd3, 0xdc83, 0xc1e0, 0xa260, 0x17d2, 0xfe6d, 0x0, 0x1);
        gbc.writeMem(0xccd3, { 0xcb, 0xd6 });
        gbc.writeMem(0xfe6d, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xdc83);
        EXPECT(gbc.pc(), 0xccd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccd3), 0xcb);
        EXPECT(gbc.readMem(0xccd4), 0xd6);
        EXPECT(gbc.readMem(0xfe6d), 0xee);
        // CB D6 0183
        gbc.setState(0x8287, 0xa59c, 0xf280, 0xf3af, 0x5520, 0x663d, 0x0, 0x0);
        gbc.writeMem(0x663d, { 0x97 });
        gbc.writeMem(0x8287, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa59c);
        EXPECT(gbc.pc(), 0x8289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8287), 0xcb);
        EXPECT(gbc.readMem(0x8288), 0xd6);
        // CB D6 0185
        gbc.setState(0x3232, 0xaafa, 0xa6c0, 0xcd31, 0xecf5, 0x54a2, 0x0, 0x0);
        gbc.writeMem(0x3232, { 0xcb, 0xd6 });
        gbc.writeMem(0x54a2, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xaafa);
        EXPECT(gbc.pc(), 0x3234);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0189
        gbc.setState(0xd59c, 0x62e0, 0x2d80, 0x1186, 0x64ac, 0x66ea, 0x1, 0x0);
        gbc.writeMem(0x66ea, { 0x95 });
        gbc.writeMem(0xd59c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x62e0);
        EXPECT(gbc.pc(), 0xd59e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd59c), 0xcb);
        EXPECT(gbc.readMem(0xd59d), 0xd6);
        // CB D6 018D
        gbc.setState(0x6c04, 0x7fb5, 0x8870, 0xec42, 0xe298, 0xa5d4, 0x0, 0x0);
        gbc.writeMem(0x6c04, { 0xcb, 0xd6 });
        gbc.writeMem(0xa5d4, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7fb5);
        EXPECT(gbc.pc(), 0x6c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d4), 0x65);
        // CB D6 018E
        gbc.setState(0xedf2, 0x34f9, 0x91b0, 0x22a0, 0x17a5, 0xa154, 0x1, 0x1);
        gbc.writeMem(0xa154, { 0x66 });
        gbc.writeMem(0xedf2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x34f9);
        EXPECT(gbc.pc(), 0xedf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa154), 0x66);
        EXPECT(gbc.readMem(0xedf2), 0xcb);
        EXPECT(gbc.readMem(0xedf3), 0xd6);
        // CB D6 018F
        gbc.setState(0x80c4, 0xd795, 0x62c0, 0x3c9d, 0x5afb, 0xda2c, 0x1, 0x0);
        gbc.writeMem(0x80c4, { 0xcb, 0xd6 });
        gbc.writeMem(0xda2c, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd795);
        EXPECT(gbc.pc(), 0x80c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c4), 0xcb);
        EXPECT(gbc.readMem(0x80c5), 0xd6);
        EXPECT(gbc.readMem(0xda2c), 0xb7);
        // CB D6 0190
        gbc.setState(0xeab4, 0xe4f6, 0xcda0, 0xcff2, 0xdb83, 0x8453, 0x1, 0x1);
        gbc.writeMem(0x8453, { 0xfb });
        gbc.writeMem(0xeab4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe4f6);
        EXPECT(gbc.pc(), 0xeab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8453), 0xff);
        EXPECT(gbc.readMem(0xeab4), 0xcb);
        EXPECT(gbc.readMem(0xeab5), 0xd6);
        // CB D6 0194
        gbc.setState(0x7aa1, 0x3a1a, 0xaa00, 0x819a, 0x3bc5, 0xc539, 0x0, 0x1);
        gbc.writeMem(0x7aa1, { 0xcb, 0xd6 });
        gbc.writeMem(0xc539, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3a1a);
        EXPECT(gbc.pc(), 0x7aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc539), 0xdd);
        // CB D6 0196
        gbc.setState(0x2431, 0x51e4, 0x4200, 0x3252, 0x60c1, 0x9ac6, 0x0, 0x1);
        gbc.writeMem(0x2431, { 0xcb, 0xd6 });
        gbc.writeMem(0x9ac6, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x51e4);
        EXPECT(gbc.pc(), 0x2433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac6), 0x45);
        // CB D6 0197
        gbc.setState(0x4b01, 0x7ce9, 0x9f80, 0x62c7, 0x7127, 0xbfde, 0x1, 0x0);
        gbc.writeMem(0x4b01, { 0xcb, 0xd6 });
        gbc.writeMem(0xbfde, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7ce9);
        EXPECT(gbc.pc(), 0x4b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfde), 0xae);
        // CB D6 0198
        gbc.setState(0x7901, 0x72ce, 0xd3c0, 0x509c, 0x3eec, 0x64af, 0x1, 0x0);
        gbc.writeMem(0x64af, { 0xde });
        gbc.writeMem(0x7901, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x72ce);
        EXPECT(gbc.pc(), 0x7903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0199
        gbc.setState(0xce18, 0xd79d, 0x7990, 0xc4cc, 0x8e6d, 0x1064, 0x0, 0x0);
        gbc.writeMem(0x1064, { 0x36 });
        gbc.writeMem(0xce18, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd79d);
        EXPECT(gbc.pc(), 0xce1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce18), 0xcb);
        EXPECT(gbc.readMem(0xce19), 0xd6);
        // CB D6 019A
        gbc.setState(0x963a, 0x3941, 0x35b0, 0xc721, 0x9f71, 0x6744, 0x1, 0x1);
        gbc.writeMem(0x6744, { 0xed });
        gbc.writeMem(0x963a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x3941);
        EXPECT(gbc.pc(), 0x963c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x963a), 0xcb);
        EXPECT(gbc.readMem(0x963b), 0xd6);
        // CB D6 019B
        gbc.setState(0x29a7, 0xedaa, 0xfc70, 0x599f, 0x863f, 0xd3ef, 0x0, 0x0);
        gbc.writeMem(0x29a7, { 0xcb, 0xd6 });
        gbc.writeMem(0xd3ef, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xedaa);
        EXPECT(gbc.pc(), 0x29a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ef), 0x5e);
        // CB D6 019C
        gbc.setState(0x12b8, 0x64ca, 0xb0b0, 0xb5c5, 0xff56, 0xc32e, 0x0, 0x0);
        gbc.writeMem(0x12b8, { 0xcb, 0xd6 });
        gbc.writeMem(0xc32e, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x64ca);
        EXPECT(gbc.pc(), 0x12ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc32e), 0x9f);
        // CB D6 019D
        gbc.setState(0x8fa2, 0xd326, 0xa1c0, 0x7871, 0x9e33, 0x58b8, 0x0, 0x1);
        gbc.writeMem(0x58b8, { 0x54 });
        gbc.writeMem(0x8fa2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd326);
        EXPECT(gbc.pc(), 0x8fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa2), 0xcb);
        EXPECT(gbc.readMem(0x8fa3), 0xd6);
        // CB D6 019E
        gbc.setState(0xea6c, 0x83ac, 0x4c50, 0x7af, 0x32d1, 0xbcb5, 0x0, 0x1);
        gbc.writeMem(0xbcb5, { 0x1 });
        gbc.writeMem(0xea6c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x83ac);
        EXPECT(gbc.pc(), 0xea6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb5), 0x5);
        EXPECT(gbc.readMem(0xea6c), 0xcb);
        EXPECT(gbc.readMem(0xea6d), 0xd6);
        // CB D6 01A0
        gbc.setState(0x6460, 0x8de3, 0xad70, 0x34d2, 0x8c47, 0x62c6, 0x0, 0x1);
        gbc.writeMem(0x62c6, { 0xa5 });
        gbc.writeMem(0x6460, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8de3);
        EXPECT(gbc.pc(), 0x6462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 01A3
        gbc.setState(0x104c, 0xe44d, 0x1b90, 0x1e43, 0x6a39, 0xa1fb, 0x1, 0x0);
        gbc.writeMem(0x104c, { 0xcb, 0xd6 });
        gbc.writeMem(0xa1fb, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe44d);
        EXPECT(gbc.pc(), 0x104e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1fb), 0x9d);
        // CB D6 01A4
        gbc.setState(0xb83f, 0x61e9, 0x240, 0xeb48, 0x4f4, 0x1a6b, 0x1, 0x1);
        gbc.writeMem(0x1a6b, { 0x44 });
        gbc.writeMem(0xb83f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x61e9);
        EXPECT(gbc.pc(), 0xb841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83f), 0xcb);
        EXPECT(gbc.readMem(0xb840), 0xd6);
        // CB D6 01A5
        gbc.setState(0x12bd, 0xa08b, 0x5f80, 0x1240, 0x4f32, 0xd246, 0x1, 0x0);
        gbc.writeMem(0x12bd, { 0xcb, 0xd6 });
        gbc.writeMem(0xd246, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa08b);
        EXPECT(gbc.pc(), 0x12bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd246), 0x77);
        // CB D6 01A6
        gbc.setState(0x37d7, 0xd6f0, 0xd090, 0x981f, 0xb24d, 0xbc1, 0x0, 0x1);
        gbc.writeMem(0xbc1, { 0x17 });
        gbc.writeMem(0x37d7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd6f0);
        EXPECT(gbc.pc(), 0x37d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 01A7
        gbc.setState(0x4633, 0x2b26, 0xc210, 0x26f3, 0x5f4f, 0xcfa2, 0x0, 0x1);
        gbc.writeMem(0x4633, { 0xcb, 0xd6 });
        gbc.writeMem(0xcfa2, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2b26);
        EXPECT(gbc.pc(), 0x4635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa2), 0x67);
        // CB D6 01A8
        gbc.setState(0xd62d, 0x3b6e, 0xd160, 0x4f28, 0xdf3e, 0xcc80, 0x0, 0x0);
        gbc.writeMem(0xcc80, { 0xbf });
        gbc.writeMem(0xd62d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3b6e);
        EXPECT(gbc.pc(), 0xd62f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc80), 0xbf);
        EXPECT(gbc.readMem(0xd62d), 0xcb);
        EXPECT(gbc.readMem(0xd62e), 0xd6);
        // CB D6 01AA
        gbc.setState(0xa82f, 0xb966, 0xa5c0, 0xd3e5, 0x6cc1, 0x2234, 0x1, 0x0);
        gbc.writeMem(0x2234, { 0x1e });
        gbc.writeMem(0xa82f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb966);
        EXPECT(gbc.pc(), 0xa831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa82f), 0xcb);
        EXPECT(gbc.readMem(0xa830), 0xd6);
        // CB D6 01AB
        gbc.setState(0x7a98, 0x604e, 0x22b0, 0xb1c6, 0xa301, 0xe58d, 0x0, 0x0);
        gbc.writeMem(0x7a98, { 0xcb, 0xd6 });
        gbc.writeMem(0xe58d, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x604e);
        EXPECT(gbc.pc(), 0x7a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe58d), 0xe6);
        // CB D6 01AC
        gbc.setState(0xdb82, 0xb908, 0x79e0, 0xe168, 0x4c9e, 0xf144, 0x0, 0x1);
        gbc.writeMem(0xdb82, { 0xcb, 0xd6 });
        gbc.writeMem(0xf144, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb908);
        EXPECT(gbc.pc(), 0xdb84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb82), 0xcb);
        EXPECT(gbc.readMem(0xdb83), 0xd6);
        EXPECT(gbc.readMem(0xf144), 0x3c);
        // CB D6 01AE
        gbc.setState(0xc8c0, 0xa273, 0xe4e0, 0x4d8b, 0xbb0a, 0x2065, 0x1, 0x1);
        gbc.writeMem(0x2065, { 0xa7 });
        gbc.writeMem(0xc8c0, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa273);
        EXPECT(gbc.pc(), 0xc8c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c0), 0xcb);
        EXPECT(gbc.readMem(0xc8c1), 0xd6);
        // CB D6 01AF
        gbc.setState(0xabb4, 0xb210, 0x53c0, 0x1e0f, 0xd659, 0x79c9, 0x1, 0x1);
        gbc.writeMem(0x79c9, { 0xb6 });
        gbc.writeMem(0xabb4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb210);
        EXPECT(gbc.pc(), 0xabb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb4), 0xcb);
        EXPECT(gbc.readMem(0xabb5), 0xd6);
        // CB D6 01B0
        gbc.setState(0x6973, 0x5473, 0x800, 0x6915, 0x7497, 0x87d8, 0x1, 0x0);
        gbc.writeMem(0x6973, { 0xcb, 0xd6 });
        gbc.writeMem(0x87d8, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5473);
        EXPECT(gbc.pc(), 0x6975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d8), 0x3e);
        // CB D6 01B1
        gbc.setState(0xcfe, 0xc5f, 0x6cd0, 0x11ff, 0x12fb, 0x8894, 0x1, 0x0);
        gbc.writeMem(0xcfe, { 0xcb, 0xd6 });
        gbc.writeMem(0x8894, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc5f);
        EXPECT(gbc.pc(), 0xd00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8894), 0x65);
        // CB D6 01B2
        gbc.setState(0xaf46, 0xd89b, 0xa90, 0x2761, 0x502, 0xba50, 0x0, 0x0);
        gbc.writeMem(0xaf46, { 0xcb, 0xd6 });
        gbc.writeMem(0xba50, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd89b);
        EXPECT(gbc.pc(), 0xaf48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf46), 0xcb);
        EXPECT(gbc.readMem(0xaf47), 0xd6);
        EXPECT(gbc.readMem(0xba50), 0x1f);
        // CB D6 01B3
        gbc.setState(0x63f9, 0x51e2, 0x19c0, 0x6535, 0xe87d, 0x3433, 0x1, 0x0);
        gbc.writeMem(0x3433, { 0x1d });
        gbc.writeMem(0x63f9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x51e2);
        EXPECT(gbc.pc(), 0x63fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 01B5
        gbc.setState(0xe314, 0x5f01, 0xcf50, 0xa1e9, 0xdf7f, 0xe37f, 0x0, 0x0);
        gbc.writeMem(0xe314, { 0xcb, 0xd6 });
        gbc.writeMem(0xe37f, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5f01);
        EXPECT(gbc.pc(), 0xe316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe314), 0xcb);
        EXPECT(gbc.readMem(0xe315), 0xd6);
        EXPECT(gbc.readMem(0xe37f), 0xb6);
        // CB D6 01B8
        gbc.setState(0x3233, 0xfe6a, 0xd0c0, 0x475f, 0x282d, 0xef94, 0x0, 0x0);
        gbc.writeMem(0x3233, { 0xcb, 0xd6 });
        gbc.writeMem(0xef94, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfe6a);
        EXPECT(gbc.pc(), 0x3235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef94), 0xe);
        // CB D6 01B9
        gbc.setState(0x2299, 0xc043, 0x29a0, 0xeaa5, 0x4ef3, 0xcb58, 0x0, 0x0);
        gbc.writeMem(0x2299, { 0xcb, 0xd6 });
        gbc.writeMem(0xcb58, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc043);
        EXPECT(gbc.pc(), 0x229b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb58), 0x4e);
        // CB D6 01BA
        gbc.setState(0x3e66, 0xadf3, 0xd4c0, 0x683f, 0x73b5, 0xbd45, 0x1, 0x1);
        gbc.writeMem(0x3e66, { 0xcb, 0xd6 });
        gbc.writeMem(0xbd45, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xadf3);
        EXPECT(gbc.pc(), 0x3e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd45), 0x74);
        // CB D6 01BB
        gbc.setState(0xc912, 0x61c, 0x8b0, 0xc56a, 0x4c79, 0xbd59, 0x1, 0x0);
        gbc.writeMem(0xbd59, { 0x56 });
        gbc.writeMem(0xc912, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x61c);
        EXPECT(gbc.pc(), 0xc914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd59), 0x56);
        EXPECT(gbc.readMem(0xc912), 0xcb);
        EXPECT(gbc.readMem(0xc913), 0xd6);
        // CB D6 01BC
        gbc.setState(0x334a, 0x708f, 0x40c0, 0xfce1, 0x2b0e, 0x6d30, 0x0, 0x0);
        gbc.writeMem(0x334a, { 0xcb, 0xd6 });
        gbc.writeMem(0x6d30, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x708f);
        EXPECT(gbc.pc(), 0x334c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 01BE
        gbc.setState(0xb560, 0x2433, 0xeac0, 0x837, 0x6d7c, 0xea9a, 0x0, 0x1);
        gbc.writeMem(0xb560, { 0xcb, 0xd6 });
        gbc.writeMem(0xea9a, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2433);
        EXPECT(gbc.pc(), 0xb562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb560), 0xcb);
        EXPECT(gbc.readMem(0xb561), 0xd6);
        EXPECT(gbc.readMem(0xea9a), 0x97);
        // CB D6 01BF
        gbc.setState(0x6a1e, 0x15, 0x2930, 0xe04, 0x7083, 0xa03f, 0x0, 0x1);
        gbc.writeMem(0x6a1e, { 0xcb, 0xd6 });
        gbc.writeMem(0xa03f, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x15);
        EXPECT(gbc.pc(), 0x6a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03f), 0x36);
        // CB D6 01C0
        gbc.setState(0xade5, 0xeddd, 0x4730, 0x71cd, 0x1e9d, 0xb45, 0x1, 0x0);
        gbc.writeMem(0xb45, { 0x7e });
        gbc.writeMem(0xade5, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xeddd);
        EXPECT(gbc.pc(), 0xade7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade5), 0xcb);
        EXPECT(gbc.readMem(0xade6), 0xd6);
        // CB D6 01C1
        gbc.setState(0x8d4, 0x1cbe, 0x6f00, 0x8e97, 0xe572, 0x9881, 0x1, 0x1);
        gbc.writeMem(0x8d4, { 0xcb, 0xd6 });
        gbc.writeMem(0x9881, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1cbe);
        EXPECT(gbc.pc(), 0x8d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9881), 0xac);
        // CB D6 01C3
        gbc.setState(0x92ab, 0x692a, 0x2860, 0xfd74, 0x1ea1, 0x7bac, 0x0, 0x1);
        gbc.writeMem(0x7bac, { 0x5c });
        gbc.writeMem(0x92ab, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x692a);
        EXPECT(gbc.pc(), 0x92ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ab), 0xcb);
        EXPECT(gbc.readMem(0x92ac), 0xd6);
        // CB D6 01C4
        gbc.setState(0x7342, 0x4d6d, 0xd6d0, 0xee97, 0x1191, 0xc7c6, 0x1, 0x1);
        gbc.writeMem(0x7342, { 0xcb, 0xd6 });
        gbc.writeMem(0xc7c6, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4d6d);
        EXPECT(gbc.pc(), 0x7344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7c6), 0x77);
        // CB D6 01C7
        gbc.setState(0xe25b, 0xc2da, 0x4df0, 0xf65a, 0xc5e3, 0x4222, 0x1, 0x1);
        gbc.writeMem(0x4222, { 0x95 });
        gbc.writeMem(0xe25b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc2da);
        EXPECT(gbc.pc(), 0xe25d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe25b), 0xcb);
        EXPECT(gbc.readMem(0xe25c), 0xd6);
        // CB D6 01C8
        gbc.setState(0x6af6, 0x273, 0xec70, 0x30c4, 0x41ff, 0xf630, 0x1, 0x1);
        gbc.writeMem(0x6af6, { 0xcb, 0xd6 });
        gbc.writeMem(0xf630, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x273);
        EXPECT(gbc.pc(), 0x6af8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf630), 0xaf);
        // CB D6 01CA
        gbc.setState(0x810d, 0x1fa1, 0x6050, 0xc54d, 0xa52d, 0xd1ae, 0x0, 0x1);
        gbc.writeMem(0x810d, { 0xcb, 0xd6 });
        gbc.writeMem(0xd1ae, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1fa1);
        EXPECT(gbc.pc(), 0x810f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x810d), 0xcb);
        EXPECT(gbc.readMem(0x810e), 0xd6);
        EXPECT(gbc.readMem(0xd1ae), 0xad);
        // CB D6 01CB
        gbc.setState(0x1578, 0xf8c6, 0x52b0, 0xd330, 0x96c8, 0xc1c4, 0x1, 0x1);
        gbc.writeMem(0x1578, { 0xcb, 0xd6 });
        gbc.writeMem(0xc1c4, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf8c6);
        EXPECT(gbc.pc(), 0x157a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1c4), 0x6);
        // CB D6 01CC
        gbc.setState(0x7232, 0x6d6d, 0xfcb0, 0xd72c, 0x95f, 0xd1bf, 0x1, 0x0);
        gbc.writeMem(0x7232, { 0xcb, 0xd6 });
        gbc.writeMem(0xd1bf, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6d6d);
        EXPECT(gbc.pc(), 0x7234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1bf), 0xfe);
        // CB D6 01CE
        gbc.setState(0xe40d, 0x7703, 0x9f20, 0xa47d, 0x58c1, 0xb7d2, 0x1, 0x0);
        gbc.writeMem(0xb7d2, { 0x4d });
        gbc.writeMem(0xe40d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7703);
        EXPECT(gbc.pc(), 0xe40f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d2), 0x4d);
        EXPECT(gbc.readMem(0xe40d), 0xcb);
        EXPECT(gbc.readMem(0xe40e), 0xd6);
        // CB D6 01D0
        gbc.setState(0xb2a4, 0xd7a1, 0xfa00, 0x1bbe, 0x1de7, 0xd37c, 0x0, 0x0);
        gbc.writeMem(0xb2a4, { 0xcb, 0xd6 });
        gbc.writeMem(0xd37c, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd7a1);
        EXPECT(gbc.pc(), 0xb2a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a4), 0xcb);
        EXPECT(gbc.readMem(0xb2a5), 0xd6);
        EXPECT(gbc.readMem(0xd37c), 0x26);
        // CB D6 01D2
        gbc.setState(0x6f18, 0xfe6a, 0x7090, 0x5f92, 0xfde7, 0xb45a, 0x1, 0x0);
        gbc.writeMem(0x6f18, { 0xcb, 0xd6 });
        gbc.writeMem(0xb45a, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfe6a);
        EXPECT(gbc.pc(), 0x6f1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb45a), 0x15);
        // CB D6 01D3
        gbc.setState(0xad4b, 0xe304, 0x8ef0, 0x2db8, 0x3f4f, 0xaab2, 0x1, 0x0);
        gbc.writeMem(0xaab2, { 0x48 });
        gbc.writeMem(0xad4b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe304);
        EXPECT(gbc.pc(), 0xad4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaab2), 0x4c);
        EXPECT(gbc.readMem(0xad4b), 0xcb);
        EXPECT(gbc.readMem(0xad4c), 0xd6);
        // CB D6 01D5
        gbc.setState(0x818d, 0xc9c0, 0xae0, 0xef30, 0xedc0, 0x9fa7, 0x1, 0x0);
        gbc.writeMem(0x818d, { 0xcb, 0xd6 });
        gbc.writeMem(0x9fa7, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc9c0);
        EXPECT(gbc.pc(), 0x818f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818d), 0xcb);
        EXPECT(gbc.readMem(0x818e), 0xd6);
        EXPECT(gbc.readMem(0x9fa7), 0x7e);
        // CB D6 01D6
        gbc.setState(0xcbc1, 0x9d9f, 0x1710, 0x36ad, 0xb22, 0xecb2, 0x0, 0x0);
        gbc.writeMem(0xcbc1, { 0xcb, 0xd6 });
        gbc.writeMem(0xecb2, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9d9f);
        EXPECT(gbc.pc(), 0xcbc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc1), 0xcb);
        EXPECT(gbc.readMem(0xcbc2), 0xd6);
        EXPECT(gbc.readMem(0xecb2), 0x56);
        // CB D6 01D7
        gbc.setState(0xde67, 0x5e22, 0x65d0, 0x8721, 0x5187, 0xdc03, 0x1, 0x1);
        gbc.writeMem(0xdc03, { 0x94 });
        gbc.writeMem(0xde67, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5e22);
        EXPECT(gbc.pc(), 0xde69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc03), 0x94);
        EXPECT(gbc.readMem(0xde67), 0xcb);
        EXPECT(gbc.readMem(0xde68), 0xd6);
        // CB D6 01D8
        gbc.setState(0x9c4c, 0xc49b, 0x7f00, 0x48d1, 0xcc55, 0xfdbb, 0x1, 0x0);
        gbc.writeMem(0x9c4c, { 0xcb, 0xd6 });
        gbc.writeMem(0xfdbb, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc49b);
        EXPECT(gbc.pc(), 0x9c4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c4c), 0xcb);
        EXPECT(gbc.readMem(0x9c4d), 0xd6);
        EXPECT(gbc.readMem(0xfdbb), 0xee);
        // CB D6 01D9
        gbc.setState(0x3109, 0x6c, 0xb770, 0xdf90, 0xf05e, 0xc740, 0x0, 0x0);
        gbc.writeMem(0x3109, { 0xcb, 0xd6 });
        gbc.writeMem(0xc740, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6c);
        EXPECT(gbc.pc(), 0x310b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc740), 0xce);
        // CB D6 01DA
        gbc.setState(0x91c1, 0x2b2, 0x4720, 0x9cf5, 0xb6a7, 0xb766, 0x0, 0x0);
        gbc.writeMem(0x91c1, { 0xcb, 0xd6 });
        gbc.writeMem(0xb766, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2b2);
        EXPECT(gbc.pc(), 0x91c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c1), 0xcb);
        EXPECT(gbc.readMem(0x91c2), 0xd6);
        EXPECT(gbc.readMem(0xb766), 0xad);
        // CB D6 01DB
        gbc.setState(0x2351, 0x36b7, 0x340, 0xc98f, 0xce45, 0x31a9, 0x1, 0x1);
        gbc.writeMem(0x2351, { 0xcb, 0xd6 });
        gbc.writeMem(0x31a9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x36b7);
        EXPECT(gbc.pc(), 0x2353);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 01DC
        gbc.setState(0x32db, 0xc69c, 0xe910, 0x748a, 0xade5, 0xa29e, 0x0, 0x0);
        gbc.writeMem(0x32db, { 0xcb, 0xd6 });
        gbc.writeMem(0xa29e, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc69c);
        EXPECT(gbc.pc(), 0x32dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29e), 0xe4);
        // CB D6 01DD
        gbc.setState(0x834f, 0xfdf6, 0x3710, 0xcd1d, 0xa391, 0x5544, 0x1, 0x1);
        gbc.writeMem(0x5544, { 0x3f });
        gbc.writeMem(0x834f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfdf6);
        EXPECT(gbc.pc(), 0x8351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x834f), 0xcb);
        EXPECT(gbc.readMem(0x8350), 0xd6);
        // CB D6 01DE
        gbc.setState(0xf8b, 0x9594, 0xe480, 0x3622, 0x51d9, 0xbdda, 0x0, 0x0);
        gbc.writeMem(0xf8b, { 0xcb, 0xd6 });
        gbc.writeMem(0xbdda, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9594);
        EXPECT(gbc.pc(), 0xf8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdda), 0xa6);
        // CB D6 01DF
        gbc.setState(0xefb7, 0x90d5, 0xb150, 0x9751, 0x4a6a, 0xf4e7, 0x0, 0x1);
        gbc.writeMem(0xefb7, { 0xcb, 0xd6 });
        gbc.writeMem(0xf4e7, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x90d5);
        EXPECT(gbc.pc(), 0xefb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefb7), 0xcb);
        EXPECT(gbc.readMem(0xefb8), 0xd6);
        EXPECT(gbc.readMem(0xf4e7), 0xee);
        // CB D6 01E1
        gbc.setState(0xe878, 0x50c1, 0x1930, 0xddcd, 0x5328, 0x982d, 0x1, 0x0);
        gbc.writeMem(0x982d, { 0x42 });
        gbc.writeMem(0xe878, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x50c1);
        EXPECT(gbc.pc(), 0xe87a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x982d), 0x46);
        EXPECT(gbc.readMem(0xe878), 0xcb);
        EXPECT(gbc.readMem(0xe879), 0xd6);
        // CB D6 01E2
        gbc.setState(0xdbc4, 0x8472, 0x36d0, 0x1514, 0x25c3, 0x8fe5, 0x1, 0x1);
        gbc.writeMem(0x8fe5, { 0x74 });
        gbc.writeMem(0xdbc4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x8472);
        EXPECT(gbc.pc(), 0xdbc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fe5), 0x74);
        EXPECT(gbc.readMem(0xdbc4), 0xcb);
        EXPECT(gbc.readMem(0xdbc5), 0xd6);
        // CB D6 01E3
        gbc.setState(0xa641, 0xdbf7, 0x7b30, 0xa94b, 0x5f03, 0xa5d0, 0x0, 0x0);
        gbc.writeMem(0xa5d0, { 0x4e });
        gbc.writeMem(0xa641, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xdbf7);
        EXPECT(gbc.pc(), 0xa643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d0), 0x4e);
        EXPECT(gbc.readMem(0xa641), 0xcb);
        EXPECT(gbc.readMem(0xa642), 0xd6);
        // CB D6 01E4
        gbc.setState(0x79f7, 0x5f0a, 0xdf70, 0x82b9, 0x75fe, 0x9c49, 0x0, 0x0);
        gbc.writeMem(0x79f7, { 0xcb, 0xd6 });
        gbc.writeMem(0x9c49, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5f0a);
        EXPECT(gbc.pc(), 0x79f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c49), 0xf);
        // CB D6 01E5
        gbc.setState(0x3376, 0xdf89, 0xc920, 0x21a9, 0xc950, 0x73f1, 0x0, 0x1);
        gbc.writeMem(0x3376, { 0xcb, 0xd6 });
        gbc.writeMem(0x73f1, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdf89);
        EXPECT(gbc.pc(), 0x3378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 01E6
        gbc.setState(0x569, 0xfb79, 0xe020, 0x577a, 0x6707, 0x7554, 0x0, 0x1);
        gbc.writeMem(0x569, { 0xcb, 0xd6 });
        gbc.writeMem(0x7554, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xfb79);
        EXPECT(gbc.pc(), 0x56b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 01E7
        gbc.setState(0xa6b1, 0xebf2, 0xba20, 0xff41, 0x906f, 0x48d6, 0x0, 0x0);
        gbc.writeMem(0x48d6, { 0x1e });
        gbc.writeMem(0xa6b1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xebf2);
        EXPECT(gbc.pc(), 0xa6b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b1), 0xcb);
        EXPECT(gbc.readMem(0xa6b2), 0xd6);
        // CB D6 01E9
        gbc.setState(0xda48, 0xa60f, 0xd550, 0x48b9, 0x8fec, 0xbe75, 0x0, 0x0);
        gbc.writeMem(0xbe75, { 0xfb });
        gbc.writeMem(0xda48, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa60f);
        EXPECT(gbc.pc(), 0xda4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe75), 0xff);
        EXPECT(gbc.readMem(0xda48), 0xcb);
        EXPECT(gbc.readMem(0xda49), 0xd6);
        // CB D6 01EA
        gbc.setState(0x2530, 0xf5fb, 0x4f80, 0x2379, 0x56ae, 0x3914, 0x1, 0x1);
        gbc.writeMem(0x2530, { 0xcb, 0xd6 });
        gbc.writeMem(0x3914, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf5fb);
        EXPECT(gbc.pc(), 0x2532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 01EB
        gbc.setState(0xb9f2, 0xcf85, 0x6ef0, 0x335d, 0x1be7, 0xdd19, 0x1, 0x1);
        gbc.writeMem(0xb9f2, { 0xcb, 0xd6 });
        gbc.writeMem(0xdd19, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xcf85);
        EXPECT(gbc.pc(), 0xb9f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9f2), 0xcb);
        EXPECT(gbc.readMem(0xb9f3), 0xd6);
        EXPECT(gbc.readMem(0xdd19), 0x44);
        // CB D6 01ED
        gbc.setState(0x3d1e, 0xf0d, 0xf6f0, 0xbb06, 0x730b, 0x952d, 0x0, 0x0);
        gbc.writeMem(0x3d1e, { 0xcb, 0xd6 });
        gbc.writeMem(0x952d, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf0d);
        EXPECT(gbc.pc(), 0x3d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x952d), 0x6e);
        // CB D6 01F2
        gbc.setState(0x7e53, 0x3457, 0xbfb0, 0xf277, 0xaa9, 0x7a40, 0x0, 0x0);
        gbc.writeMem(0x7a40, { 0xbe });
        gbc.writeMem(0x7e53, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3457);
        EXPECT(gbc.pc(), 0x7e55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 01F4
        gbc.setState(0x454d, 0xa1ef, 0x4d20, 0x9244, 0xce1d, 0xe681, 0x0, 0x0);
        gbc.writeMem(0x454d, { 0xcb, 0xd6 });
        gbc.writeMem(0xe681, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa1ef);
        EXPECT(gbc.pc(), 0x454f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe681), 0x9e);
        // CB D6 01F6
        gbc.setState(0x9875, 0x85ea, 0x1ae0, 0xef60, 0x838e, 0xa267, 0x0, 0x1);
        gbc.writeMem(0x9875, { 0xcb, 0xd6 });
        gbc.writeMem(0xa267, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x85ea);
        EXPECT(gbc.pc(), 0x9877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9875), 0xcb);
        EXPECT(gbc.readMem(0x9876), 0xd6);
        EXPECT(gbc.readMem(0xa267), 0x7d);
        // CB D6 01F7
        gbc.setState(0x4745, 0xa8aa, 0x46b0, 0x3e15, 0x413a, 0xdc2a, 0x1, 0x0);
        gbc.writeMem(0x4745, { 0xcb, 0xd6 });
        gbc.writeMem(0xdc2a, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa8aa);
        EXPECT(gbc.pc(), 0x4747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2a), 0x8c);
        // CB D6 01F8
        gbc.setState(0x602a, 0x7ec6, 0x1580, 0x69ad, 0x8d13, 0xaae9, 0x1, 0x1);
        gbc.writeMem(0x602a, { 0xcb, 0xd6 });
        gbc.writeMem(0xaae9, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7ec6);
        EXPECT(gbc.pc(), 0x602c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae9), 0xbe);
        // CB D6 01F9
        gbc.setState(0x3709, 0x53b0, 0xf050, 0x2da2, 0x41f5, 0xc171, 0x1, 0x0);
        gbc.writeMem(0x3709, { 0xcb, 0xd6 });
        gbc.writeMem(0xc171, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x53b0);
        EXPECT(gbc.pc(), 0x370b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc171), 0x7d);
        // CB D6 01FA
        gbc.setState(0x8408, 0x28a1, 0x31d0, 0xe9c0, 0x22ac, 0x9c9b, 0x0, 0x1);
        gbc.writeMem(0x8408, { 0xcb, 0xd6 });
        gbc.writeMem(0x9c9b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x28a1);
        EXPECT(gbc.pc(), 0x840a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8408), 0xcb);
        EXPECT(gbc.readMem(0x8409), 0xd6);
        EXPECT(gbc.readMem(0x9c9b), 0xa5);
        // CB D6 01FC
        gbc.setState(0xbbde, 0x4d49, 0xb770, 0x71b4, 0x5c5a, 0xf20e, 0x1, 0x0);
        gbc.writeMem(0xbbde, { 0xcb, 0xd6 });
        gbc.writeMem(0xf20e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4d49);
        EXPECT(gbc.pc(), 0xbbe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbde), 0xcb);
        EXPECT(gbc.readMem(0xbbdf), 0xd6);
        EXPECT(gbc.readMem(0xf20e), 0x4c);
        // CB D6 01FF
        gbc.setState(0x6156, 0xc8ab, 0xd600, 0x4217, 0x649c, 0xc369, 0x0, 0x0);
        gbc.writeMem(0x6156, { 0xcb, 0xd6 });
        gbc.writeMem(0xc369, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc8ab);
        EXPECT(gbc.pc(), 0x6158);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc369), 0x77);
        // CB D6 0201
        gbc.setState(0xef8a, 0x4ae6, 0x0, 0xea1f, 0xbf68, 0x800, 0x0, 0x0);
        gbc.writeMem(0x800, { 0x76 });
        gbc.writeMem(0xef8a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4ae6);
        EXPECT(gbc.pc(), 0xef8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef8a), 0xcb);
        EXPECT(gbc.readMem(0xef8b), 0xd6);
        // CB D6 0202
        gbc.setState(0x8e18, 0xa08, 0xe0f0, 0x69b1, 0x6b54, 0xb79e, 0x0, 0x0);
        gbc.writeMem(0x8e18, { 0xcb, 0xd6 });
        gbc.writeMem(0xb79e, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa08);
        EXPECT(gbc.pc(), 0x8e1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e18), 0xcb);
        EXPECT(gbc.readMem(0x8e19), 0xd6);
        EXPECT(gbc.readMem(0xb79e), 0xd5);
        // CB D6 0205
        gbc.setState(0xeb15, 0xf6de, 0x80e0, 0x9692, 0xe1b5, 0xc4f1, 0x1, 0x0);
        gbc.writeMem(0xc4f1, { 0x37 });
        gbc.writeMem(0xeb15, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xf6de);
        EXPECT(gbc.pc(), 0xeb17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4f1), 0x37);
        EXPECT(gbc.readMem(0xeb15), 0xcb);
        EXPECT(gbc.readMem(0xeb16), 0xd6);
        // CB D6 0206
        gbc.setState(0x4b95, 0xdd8c, 0x7620, 0x31ee, 0x1f60, 0x9851, 0x1, 0x1);
        gbc.writeMem(0x4b95, { 0xcb, 0xd6 });
        gbc.writeMem(0x9851, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdd8c);
        EXPECT(gbc.pc(), 0x4b97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9851), 0x24);
        // CB D6 0207
        gbc.setState(0xb5ee, 0xc287, 0xd8a0, 0x566, 0x4faf, 0xb9f1, 0x1, 0x0);
        gbc.writeMem(0xb5ee, { 0xcb, 0xd6 });
        gbc.writeMem(0xb9f1, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc287);
        EXPECT(gbc.pc(), 0xb5f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ee), 0xcb);
        EXPECT(gbc.readMem(0xb5ef), 0xd6);
        EXPECT(gbc.readMem(0xb9f1), 0x5d);
        // CB D6 0208
        gbc.setState(0x2c1f, 0x1be, 0xe010, 0x6665, 0x44a, 0xdfd5, 0x0, 0x1);
        gbc.writeMem(0x2c1f, { 0xcb, 0xd6 });
        gbc.writeMem(0xdfd5, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x1be);
        EXPECT(gbc.pc(), 0x2c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfd5), 0xf);
        // CB D6 0209
        gbc.setState(0x6721, 0xe418, 0xf170, 0x951, 0x9c75, 0xae7a, 0x1, 0x1);
        gbc.writeMem(0x6721, { 0xcb, 0xd6 });
        gbc.writeMem(0xae7a, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe418);
        EXPECT(gbc.pc(), 0x6723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae7a), 0x57);
        // CB D6 020C
        gbc.setState(0xd169, 0x4148, 0xbcf0, 0xc222, 0xc487, 0xd260, 0x1, 0x1);
        gbc.writeMem(0xd169, { 0xcb, 0xd6 });
        gbc.writeMem(0xd260, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4148);
        EXPECT(gbc.pc(), 0xd16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd169), 0xcb);
        EXPECT(gbc.readMem(0xd16a), 0xd6);
        EXPECT(gbc.readMem(0xd260), 0x2d);
        // CB D6 020D
        gbc.setState(0xeb0a, 0xe7b, 0x9460, 0xc9c0, 0xe076, 0xb5d9, 0x1, 0x1);
        gbc.writeMem(0xb5d9, { 0xdf });
        gbc.writeMem(0xeb0a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe7b);
        EXPECT(gbc.pc(), 0xeb0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d9), 0xdf);
        EXPECT(gbc.readMem(0xeb0a), 0xcb);
        EXPECT(gbc.readMem(0xeb0b), 0xd6);
        // CB D6 020E
        gbc.setState(0xcc4b, 0x2f00, 0x5af0, 0x534c, 0xf514, 0x651d, 0x1, 0x1);
        gbc.writeMem(0x651d, { 0x64 });
        gbc.writeMem(0xcc4b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2f00);
        EXPECT(gbc.pc(), 0xcc4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc4b), 0xcb);
        EXPECT(gbc.readMem(0xcc4c), 0xd6);
        // CB D6 020F
        gbc.setState(0x43ed, 0xcb53, 0x7680, 0x5411, 0xb1d9, 0xfe38, 0x1, 0x0);
        gbc.writeMem(0x43ed, { 0xcb, 0xd6 });
        gbc.writeMem(0xfe38, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcb53);
        EXPECT(gbc.pc(), 0x43ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe38), 0xc7);
        // CB D6 0211
        gbc.setState(0x6ae8, 0x76f2, 0xd9b0, 0x7599, 0x3ca4, 0xe0b4, 0x0, 0x0);
        gbc.writeMem(0x6ae8, { 0xcb, 0xd6 });
        gbc.writeMem(0xe0b4, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x76f2);
        EXPECT(gbc.pc(), 0x6aea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0b4), 0xf4);
        // CB D6 0212
        gbc.setState(0xe6d9, 0x2461, 0x9480, 0xbd47, 0xa69e, 0xfd17, 0x0, 0x1);
        gbc.writeMem(0xe6d9, { 0xcb, 0xd6 });
        gbc.writeMem(0xfd17, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2461);
        EXPECT(gbc.pc(), 0xe6db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d9), 0xcb);
        EXPECT(gbc.readMem(0xe6da), 0xd6);
        EXPECT(gbc.readMem(0xfd17), 0x45);
        // CB D6 0213
        gbc.setState(0x7959, 0x85a2, 0x68b0, 0x2c8e, 0xd265, 0x780a, 0x1, 0x1);
        gbc.writeMem(0x780a, { 0x16 });
        gbc.writeMem(0x7959, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x85a2);
        EXPECT(gbc.pc(), 0x795b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0216
        gbc.setState(0xcdb, 0xdebb, 0xb5b0, 0x6c75, 0x812e, 0x1776, 0x0, 0x1);
        gbc.writeMem(0xcdb, { 0xcb, 0xd6 });
        gbc.writeMem(0x1776, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xdebb);
        EXPECT(gbc.pc(), 0xcdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0217
        gbc.setState(0x8115, 0x95bb, 0xeef0, 0x907d, 0x9fbf, 0x92d5, 0x0, 0x0);
        gbc.writeMem(0x8115, { 0xcb, 0xd6 });
        gbc.writeMem(0x92d5, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x95bb);
        EXPECT(gbc.pc(), 0x8117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8115), 0xcb);
        EXPECT(gbc.readMem(0x8116), 0xd6);
        EXPECT(gbc.readMem(0x92d5), 0x6f);
        // CB D6 0218
        gbc.setState(0xa2e9, 0x12eb, 0xf030, 0xb874, 0xe15b, 0x8de2, 0x1, 0x1);
        gbc.writeMem(0x8de2, { 0x2a });
        gbc.writeMem(0xa2e9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x12eb);
        EXPECT(gbc.pc(), 0xa2eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8de2), 0x2e);
        EXPECT(gbc.readMem(0xa2e9), 0xcb);
        EXPECT(gbc.readMem(0xa2ea), 0xd6);
        // CB D6 0219
        gbc.setState(0xadff, 0x3c88, 0xc2f0, 0x2f14, 0x4053, 0x71cd, 0x0, 0x0);
        gbc.writeMem(0x71cd, { 0x7 });
        gbc.writeMem(0xadff, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3c88);
        EXPECT(gbc.pc(), 0xae01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadff), 0xcb);
        EXPECT(gbc.readMem(0xae00), 0xd6);
        // CB D6 021B
        gbc.setState(0xc86c, 0xdf51, 0x4420, 0x97a7, 0x7815, 0xd8f7, 0x1, 0x1);
        gbc.writeMem(0xc86c, { 0xcb, 0xd6 });
        gbc.writeMem(0xd8f7, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xdf51);
        EXPECT(gbc.pc(), 0xc86e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc86c), 0xcb);
        EXPECT(gbc.readMem(0xc86d), 0xd6);
        EXPECT(gbc.readMem(0xd8f7), 0x44);
        // CB D6 021C
        gbc.setState(0xe5d9, 0x6665, 0xb280, 0xac4e, 0x2eae, 0xfe11, 0x0, 0x1);
        gbc.writeMem(0xe5d9, { 0xcb, 0xd6 });
        gbc.writeMem(0xfe11, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6665);
        EXPECT(gbc.pc(), 0xe5db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d9), 0xcb);
        EXPECT(gbc.readMem(0xe5da), 0xd6);
        EXPECT(gbc.readMem(0xfe11), 0x17);
        // CB D6 021E
        gbc.setState(0x5ca3, 0xf56a, 0xe4f0, 0x38b, 0x564, 0xef92, 0x0, 0x1);
        gbc.writeMem(0x5ca3, { 0xcb, 0xd6 });
        gbc.writeMem(0xef92, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf56a);
        EXPECT(gbc.pc(), 0x5ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef92), 0x1e);
        // CB D6 021F
        gbc.setState(0x3ca7, 0xbdfc, 0xcc90, 0xe400, 0x364a, 0xb721, 0x1, 0x0);
        gbc.writeMem(0x3ca7, { 0xcb, 0xd6 });
        gbc.writeMem(0xb721, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xbdfc);
        EXPECT(gbc.pc(), 0x3ca9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb721), 0xd5);
        // CB D6 0220
        gbc.setState(0xcae5, 0x394f, 0x8480, 0xa55a, 0x1df2, 0x350b, 0x0, 0x1);
        gbc.writeMem(0x350b, { 0xf4 });
        gbc.writeMem(0xcae5, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x394f);
        EXPECT(gbc.pc(), 0xcae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae5), 0xcb);
        EXPECT(gbc.readMem(0xcae6), 0xd6);
        // CB D6 0222
        gbc.setState(0x6d68, 0x7ce9, 0xc860, 0x8d7e, 0xa712, 0x7f1f, 0x0, 0x0);
        gbc.writeMem(0x6d68, { 0xcb, 0xd6 });
        gbc.writeMem(0x7f1f, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7ce9);
        EXPECT(gbc.pc(), 0x6d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0223
        gbc.setState(0xbbf, 0x8489, 0x4720, 0xa9fd, 0xf0a7, 0xa192, 0x1, 0x1);
        gbc.writeMem(0xbbf, { 0xcb, 0xd6 });
        gbc.writeMem(0xa192, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8489);
        EXPECT(gbc.pc(), 0xbc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa192), 0x4d);
        // CB D6 0224
        gbc.setState(0xbb0f, 0x996f, 0xd090, 0x4494, 0x7bd8, 0x73ad, 0x0, 0x0);
        gbc.writeMem(0x73ad, { 0x7c });
        gbc.writeMem(0xbb0f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x996f);
        EXPECT(gbc.pc(), 0xbb11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb0f), 0xcb);
        EXPECT(gbc.readMem(0xbb10), 0xd6);
        // CB D6 0225
        gbc.setState(0x8865, 0x8e8f, 0xdee0, 0x355e, 0xa180, 0x9abe, 0x0, 0x1);
        gbc.writeMem(0x8865, { 0xcb, 0xd6 });
        gbc.writeMem(0x9abe, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8e8f);
        EXPECT(gbc.pc(), 0x8867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8865), 0xcb);
        EXPECT(gbc.readMem(0x8866), 0xd6);
        EXPECT(gbc.readMem(0x9abe), 0xbe);
        // CB D6 0226
        gbc.setState(0xacc4, 0x2ce3, 0xee40, 0x4214, 0xf134, 0x5fe7, 0x0, 0x1);
        gbc.writeMem(0x5fe7, { 0x5 });
        gbc.writeMem(0xacc4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2ce3);
        EXPECT(gbc.pc(), 0xacc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc4), 0xcb);
        EXPECT(gbc.readMem(0xacc5), 0xd6);
        // CB D6 0229
        gbc.setState(0x9691, 0x9171, 0xa640, 0x3249, 0xf0b0, 0xc36c, 0x1, 0x0);
        gbc.writeMem(0x9691, { 0xcb, 0xd6 });
        gbc.writeMem(0xc36c, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9171);
        EXPECT(gbc.pc(), 0x9693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9691), 0xcb);
        EXPECT(gbc.readMem(0x9692), 0xd6);
        EXPECT(gbc.readMem(0xc36c), 0xec);
        // CB D6 022B
        gbc.setState(0xd012, 0x3437, 0x7b0, 0x178a, 0x6140, 0x2a25, 0x0, 0x1);
        gbc.writeMem(0x2a25, { 0x14 });
        gbc.writeMem(0xd012, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3437);
        EXPECT(gbc.pc(), 0xd014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd012), 0xcb);
        EXPECT(gbc.readMem(0xd013), 0xd6);
        // CB D6 022C
        gbc.setState(0x8c73, 0xda9b, 0x38a0, 0xc2ca, 0xdd72, 0x92bf, 0x0, 0x1);
        gbc.writeMem(0x8c73, { 0xcb, 0xd6 });
        gbc.writeMem(0x92bf, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xda9b);
        EXPECT(gbc.pc(), 0x8c75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c73), 0xcb);
        EXPECT(gbc.readMem(0x8c74), 0xd6);
        EXPECT(gbc.readMem(0x92bf), 0xd6);
        // CB D6 022D
        gbc.setState(0xb7f2, 0x2cb9, 0x7d50, 0x7ce, 0xb6fc, 0xb417, 0x1, 0x1);
        gbc.writeMem(0xb417, { 0x4e });
        gbc.writeMem(0xb7f2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2cb9);
        EXPECT(gbc.pc(), 0xb7f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb417), 0x4e);
        EXPECT(gbc.readMem(0xb7f2), 0xcb);
        EXPECT(gbc.readMem(0xb7f3), 0xd6);
        // CB D6 022E
        gbc.setState(0xc289, 0x3009, 0x8e60, 0x9fa2, 0x170c, 0xa48c, 0x0, 0x0);
        gbc.writeMem(0xa48c, { 0x45 });
        gbc.writeMem(0xc289, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3009);
        EXPECT(gbc.pc(), 0xc28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa48c), 0x45);
        EXPECT(gbc.readMem(0xc289), 0xcb);
        EXPECT(gbc.readMem(0xc28a), 0xd6);
        // CB D6 022F
        gbc.setState(0xdf57, 0x103f, 0xc6c0, 0xc7fb, 0x9643, 0x13bc, 0x0, 0x0);
        gbc.writeMem(0x13bc, { 0x4 });
        gbc.writeMem(0xdf57, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x103f);
        EXPECT(gbc.pc(), 0xdf59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf57), 0xcb);
        EXPECT(gbc.readMem(0xdf58), 0xd6);
        // CB D6 0231
        gbc.setState(0x2d10, 0xf9b8, 0x6770, 0xd1c9, 0x7519, 0xcfb8, 0x1, 0x0);
        gbc.writeMem(0x2d10, { 0xcb, 0xd6 });
        gbc.writeMem(0xcfb8, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf9b8);
        EXPECT(gbc.pc(), 0x2d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb8), 0x66);
        // CB D6 0232
        gbc.setState(0x6d07, 0x612e, 0x1d80, 0xed19, 0xce1, 0xcd8b, 0x0, 0x0);
        gbc.writeMem(0x6d07, { 0xcb, 0xd6 });
        gbc.writeMem(0xcd8b, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x612e);
        EXPECT(gbc.pc(), 0x6d09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd8b), 0x76);
        // CB D6 0234
        gbc.setState(0xe80c, 0x5bbe, 0x1050, 0xb7a7, 0xad77, 0xbe11, 0x0, 0x1);
        gbc.writeMem(0xbe11, { 0x95 });
        gbc.writeMem(0xe80c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5bbe);
        EXPECT(gbc.pc(), 0xe80e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe11), 0x95);
        EXPECT(gbc.readMem(0xe80c), 0xcb);
        EXPECT(gbc.readMem(0xe80d), 0xd6);
        // CB D6 0236
        gbc.setState(0xa401, 0xa2db, 0x1a30, 0xa2e5, 0xecef, 0x83f, 0x0, 0x1);
        gbc.writeMem(0x83f, { 0x3d });
        gbc.writeMem(0xa401, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa2db);
        EXPECT(gbc.pc(), 0xa403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa401), 0xcb);
        EXPECT(gbc.readMem(0xa402), 0xd6);
        // CB D6 0238
        gbc.setState(0x3d62, 0xb27d, 0x4f90, 0x182, 0xd786, 0x61cb, 0x0, 0x1);
        gbc.writeMem(0x3d62, { 0xcb, 0xd6 });
        gbc.writeMem(0x61cb, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb27d);
        EXPECT(gbc.pc(), 0x3d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0239
        gbc.setState(0x495e, 0xdac4, 0xb2f0, 0xdcc8, 0x6a67, 0x26c9, 0x1, 0x0);
        gbc.writeMem(0x26c9, { 0x35 });
        gbc.writeMem(0x495e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdac4);
        EXPECT(gbc.pc(), 0x4960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 023A
        gbc.setState(0x3c39, 0x69ae, 0xef60, 0x2013, 0x2abf, 0x8f47, 0x1, 0x0);
        gbc.writeMem(0x3c39, { 0xcb, 0xd6 });
        gbc.writeMem(0x8f47, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x69ae);
        EXPECT(gbc.pc(), 0x3c3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f47), 0x96);
        // CB D6 023C
        gbc.setState(0xc1a2, 0x2e3d, 0x1f60, 0xcbf2, 0x3cde, 0xdfae, 0x0, 0x1);
        gbc.writeMem(0xc1a2, { 0xcb, 0xd6 });
        gbc.writeMem(0xdfae, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2e3d);
        EXPECT(gbc.pc(), 0xc1a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a2), 0xcb);
        EXPECT(gbc.readMem(0xc1a3), 0xd6);
        EXPECT(gbc.readMem(0xdfae), 0x85);
        // CB D6 023D
        gbc.setState(0x734d, 0x3895, 0xadc0, 0xb7b9, 0x70b0, 0xf44a, 0x1, 0x1);
        gbc.writeMem(0x734d, { 0xcb, 0xd6 });
        gbc.writeMem(0xf44a, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3895);
        EXPECT(gbc.pc(), 0x734f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf44a), 0x4e);
        // CB D6 023E
        gbc.setState(0xd35d, 0xb3c4, 0x17b0, 0x2439, 0xaf1, 0x9647, 0x1, 0x1);
        gbc.writeMem(0x9647, { 0x3e });
        gbc.writeMem(0xd35d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb3c4);
        EXPECT(gbc.pc(), 0xd35f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9647), 0x3e);
        EXPECT(gbc.readMem(0xd35d), 0xcb);
        EXPECT(gbc.readMem(0xd35e), 0xd6);
        // CB D6 0240
        gbc.setState(0x6411, 0x47a3, 0x75f0, 0x1369, 0xdf4, 0xb492, 0x1, 0x0);
        gbc.writeMem(0x6411, { 0xcb, 0xd6 });
        gbc.writeMem(0xb492, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x47a3);
        EXPECT(gbc.pc(), 0x6413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb492), 0x56);
        // CB D6 0241
        gbc.setState(0x186, 0x2b6b, 0x40, 0x2b8a, 0xec1d, 0x738c, 0x0, 0x1);
        gbc.writeMem(0x186, { 0xcb, 0xd6 });
        gbc.writeMem(0x738c, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2b6b);
        EXPECT(gbc.pc(), 0x188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0243
        gbc.setState(0x8b5b, 0xc50, 0x3770, 0x7d0a, 0xe3be, 0x9c31, 0x0, 0x0);
        gbc.writeMem(0x8b5b, { 0xcb, 0xd6 });
        gbc.writeMem(0x9c31, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc50);
        EXPECT(gbc.pc(), 0x8b5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b5b), 0xcb);
        EXPECT(gbc.readMem(0x8b5c), 0xd6);
        EXPECT(gbc.readMem(0x9c31), 0x8d);
        // CB D6 0244
        gbc.setState(0xc740, 0x9b78, 0xc5e0, 0x7e17, 0xa54b, 0xafb8, 0x0, 0x0);
        gbc.writeMem(0xafb8, { 0xd8 });
        gbc.writeMem(0xc740, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9b78);
        EXPECT(gbc.pc(), 0xc742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb8), 0xdc);
        EXPECT(gbc.readMem(0xc740), 0xcb);
        EXPECT(gbc.readMem(0xc741), 0xd6);
        // CB D6 0246
        gbc.setState(0xd088, 0xd4d, 0x77b0, 0x933e, 0x28f0, 0xfa2c, 0x0, 0x1);
        gbc.writeMem(0xd088, { 0xcb, 0xd6 });
        gbc.writeMem(0xfa2c, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd4d);
        EXPECT(gbc.pc(), 0xd08a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd088), 0xcb);
        EXPECT(gbc.readMem(0xd089), 0xd6);
        EXPECT(gbc.readMem(0xfa2c), 0x1d);
        // CB D6 0248
        gbc.setState(0x472, 0x4576, 0xdb60, 0xa42a, 0x839c, 0x69ce, 0x1, 0x0);
        gbc.writeMem(0x472, { 0xcb, 0xd6 });
        gbc.writeMem(0x69ce, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4576);
        EXPECT(gbc.pc(), 0x474);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0249
        gbc.setState(0xe146, 0xbe76, 0xb370, 0x7c5e, 0x4e2c, 0x7cee, 0x0, 0x1);
        gbc.writeMem(0x7cee, { 0xfe });
        gbc.writeMem(0xe146, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xbe76);
        EXPECT(gbc.pc(), 0xe148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe146), 0xcb);
        EXPECT(gbc.readMem(0xe147), 0xd6);
        // CB D6 024A
        gbc.setState(0x3b28, 0xb96b, 0x26f0, 0xb71e, 0x741e, 0x4711, 0x1, 0x1);
        gbc.writeMem(0x3b28, { 0xcb, 0xd6 });
        gbc.writeMem(0x4711, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb96b);
        EXPECT(gbc.pc(), 0x3b2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 024B
        gbc.setState(0x77ee, 0xed43, 0xc250, 0x5bfe, 0x2bd5, 0xdec6, 0x0, 0x0);
        gbc.writeMem(0x77ee, { 0xcb, 0xd6 });
        gbc.writeMem(0xdec6, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xed43);
        EXPECT(gbc.pc(), 0x77f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdec6), 0x54);
        // CB D6 024C
        gbc.setState(0xd9c3, 0xe66f, 0x3dc0, 0xdd7a, 0x2898, 0x154e, 0x1, 0x0);
        gbc.writeMem(0x154e, { 0x37 });
        gbc.writeMem(0xd9c3, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe66f);
        EXPECT(gbc.pc(), 0xd9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c3), 0xcb);
        EXPECT(gbc.readMem(0xd9c4), 0xd6);
        // CB D6 024D
        gbc.setState(0x1742, 0xce5b, 0x15a0, 0xf51b, 0xa2b4, 0xeab8, 0x1, 0x0);
        gbc.writeMem(0x1742, { 0xcb, 0xd6 });
        gbc.writeMem(0xeab8, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xce5b);
        EXPECT(gbc.pc(), 0x1744);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab8), 0x5);
        // CB D6 024F
        gbc.setState(0x881a, 0xd233, 0x5ae0, 0x67ff, 0xfc9a, 0x9229, 0x0, 0x1);
        gbc.writeMem(0x881a, { 0xcb, 0xd6 });
        gbc.writeMem(0x9229, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd233);
        EXPECT(gbc.pc(), 0x881c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x881a), 0xcb);
        EXPECT(gbc.readMem(0x881b), 0xd6);
        EXPECT(gbc.readMem(0x9229), 0xfe);
        // CB D6 0251
        gbc.setState(0xe483, 0xd382, 0x7db0, 0x1cc8, 0x939c, 0xe07d, 0x0, 0x0);
        gbc.writeMem(0xe07d, { 0xa });
        gbc.writeMem(0xe483, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd382);
        EXPECT(gbc.pc(), 0xe485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe07d), 0xe);
        EXPECT(gbc.readMem(0xe483), 0xcb);
        EXPECT(gbc.readMem(0xe484), 0xd6);
        // CB D6 0252
        gbc.setState(0xb6f5, 0x767, 0xe850, 0xb63c, 0xf23e, 0xc254, 0x1, 0x0);
        gbc.writeMem(0xb6f5, { 0xcb, 0xd6 });
        gbc.writeMem(0xc254, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x767);
        EXPECT(gbc.pc(), 0xb6f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f5), 0xcb);
        EXPECT(gbc.readMem(0xb6f6), 0xd6);
        EXPECT(gbc.readMem(0xc254), 0xfe);
        // CB D6 0253
        gbc.setState(0xb70c, 0x41fd, 0x5170, 0x896e, 0x6443, 0x9bef, 0x0, 0x0);
        gbc.writeMem(0x9bef, { 0x4e });
        gbc.writeMem(0xb70c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x41fd);
        EXPECT(gbc.pc(), 0xb70e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bef), 0x4e);
        EXPECT(gbc.readMem(0xb70c), 0xcb);
        EXPECT(gbc.readMem(0xb70d), 0xd6);
        // CB D6 0257
        gbc.setState(0xebe6, 0x313a, 0x61b0, 0x4023, 0x5604, 0xc7c3, 0x0, 0x0);
        gbc.writeMem(0xc7c3, { 0xf9 });
        gbc.writeMem(0xebe6, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x313a);
        EXPECT(gbc.pc(), 0xebe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7c3), 0xfd);
        EXPECT(gbc.readMem(0xebe6), 0xcb);
        EXPECT(gbc.readMem(0xebe7), 0xd6);
        // CB D6 0258
        gbc.setState(0xce7c, 0xe349, 0xc730, 0xad4b, 0x7b29, 0xfb53, 0x0, 0x1);
        gbc.writeMem(0xce7c, { 0xcb, 0xd6 });
        gbc.writeMem(0xfb53, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe349);
        EXPECT(gbc.pc(), 0xce7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce7c), 0xcb);
        EXPECT(gbc.readMem(0xce7d), 0xd6);
        EXPECT(gbc.readMem(0xfb53), 0xe7);
        // CB D6 0259
        gbc.setState(0xc914, 0x1855, 0xe3c0, 0x5128, 0xe34c, 0xac1a, 0x1, 0x0);
        gbc.writeMem(0xac1a, { 0x1c });
        gbc.writeMem(0xc914, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1855);
        EXPECT(gbc.pc(), 0xc916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac1a), 0x1c);
        EXPECT(gbc.readMem(0xc914), 0xcb);
        EXPECT(gbc.readMem(0xc915), 0xd6);
        // CB D6 025B
        gbc.setState(0x60ef, 0x95b2, 0x2fa0, 0xd9e2, 0x1f3c, 0xb66b, 0x1, 0x0);
        gbc.writeMem(0x60ef, { 0xcb, 0xd6 });
        gbc.writeMem(0xb66b, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x95b2);
        EXPECT(gbc.pc(), 0x60f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb66b), 0x2d);
        // CB D6 025C
        gbc.setState(0x9937, 0x5fc4, 0xead0, 0x2d8d, 0xb30a, 0xfc82, 0x1, 0x0);
        gbc.writeMem(0x9937, { 0xcb, 0xd6 });
        gbc.writeMem(0xfc82, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5fc4);
        EXPECT(gbc.pc(), 0x9939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9937), 0xcb);
        EXPECT(gbc.readMem(0x9938), 0xd6);
        EXPECT(gbc.readMem(0xfc82), 0xe5);
        // CB D6 025D
        gbc.setState(0xa675, 0xb60c, 0x8990, 0xa1f9, 0x1e54, 0xf31c, 0x0, 0x0);
        gbc.writeMem(0xa675, { 0xcb, 0xd6 });
        gbc.writeMem(0xf31c, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb60c);
        EXPECT(gbc.pc(), 0xa677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa675), 0xcb);
        EXPECT(gbc.readMem(0xa676), 0xd6);
        EXPECT(gbc.readMem(0xf31c), 0xc4);
        // CB D6 025E
        gbc.setState(0x8d4f, 0x67c7, 0x33b0, 0xe8d6, 0x7759, 0xb238, 0x0, 0x0);
        gbc.writeMem(0x8d4f, { 0xcb, 0xd6 });
        gbc.writeMem(0xb238, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x67c7);
        EXPECT(gbc.pc(), 0x8d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d4f), 0xcb);
        EXPECT(gbc.readMem(0x8d50), 0xd6);
        EXPECT(gbc.readMem(0xb238), 0x84);
        // CB D6 025F
        gbc.setState(0xe3e7, 0xef54, 0x4fb0, 0x30b8, 0xd1fa, 0xb655, 0x1, 0x0);
        gbc.writeMem(0xb655, { 0xf7 });
        gbc.writeMem(0xe3e7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xef54);
        EXPECT(gbc.pc(), 0xe3e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb655), 0xf7);
        EXPECT(gbc.readMem(0xe3e7), 0xcb);
        EXPECT(gbc.readMem(0xe3e8), 0xd6);
        // CB D6 0264
        gbc.setState(0x908e, 0xcced, 0x1bb0, 0x40e7, 0x33e1, 0xe6a2, 0x1, 0x0);
        gbc.writeMem(0x908e, { 0xcb, 0xd6 });
        gbc.writeMem(0xe6a2, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcced);
        EXPECT(gbc.pc(), 0x9090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x908e), 0xcb);
        EXPECT(gbc.readMem(0x908f), 0xd6);
        EXPECT(gbc.readMem(0xe6a2), 0xce);
        // CB D6 0265
        gbc.setState(0x6302, 0xf45a, 0x5020, 0x2563, 0xd965, 0x883b, 0x0, 0x1);
        gbc.writeMem(0x6302, { 0xcb, 0xd6 });
        gbc.writeMem(0x883b, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf45a);
        EXPECT(gbc.pc(), 0x6304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x883b), 0xc5);
        // CB D6 0266
        gbc.setState(0x547e, 0xc5d7, 0x9c10, 0xfeeb, 0x49f8, 0x23fb, 0x1, 0x0);
        gbc.writeMem(0x23fb, { 0x5c });
        gbc.writeMem(0x547e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc5d7);
        EXPECT(gbc.pc(), 0x5480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0267
        gbc.setState(0x9cdf, 0xc64d, 0xf50, 0xeb01, 0x47c9, 0xb571, 0x1, 0x1);
        gbc.writeMem(0x9cdf, { 0xcb, 0xd6 });
        gbc.writeMem(0xb571, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc64d);
        EXPECT(gbc.pc(), 0x9ce1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cdf), 0xcb);
        EXPECT(gbc.readMem(0x9ce0), 0xd6);
        EXPECT(gbc.readMem(0xb571), 0x8c);
        // CB D6 0269
        gbc.setState(0xadb1, 0x1215, 0x8410, 0x3e5e, 0x6956, 0x1c92, 0x1, 0x0);
        gbc.writeMem(0x1c92, { 0x35 });
        gbc.writeMem(0xadb1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1215);
        EXPECT(gbc.pc(), 0xadb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb1), 0xcb);
        EXPECT(gbc.readMem(0xadb2), 0xd6);
        // CB D6 026A
        gbc.setState(0x1041, 0x7f6a, 0x1bf0, 0x4c40, 0x5fb7, 0x564b, 0x0, 0x0);
        gbc.writeMem(0x1041, { 0xcb, 0xd6 });
        gbc.writeMem(0x564b, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7f6a);
        EXPECT(gbc.pc(), 0x1043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 026B
        gbc.setState(0xe9c3, 0xdf0a, 0x35b0, 0xe6f2, 0x2695, 0xe8d1, 0x1, 0x1);
        gbc.writeMem(0xe8d1, { 0xb });
        gbc.writeMem(0xe9c3, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdf0a);
        EXPECT(gbc.pc(), 0xe9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8d1), 0xf);
        EXPECT(gbc.readMem(0xe9c3), 0xcb);
        EXPECT(gbc.readMem(0xe9c4), 0xd6);
        // CB D6 026C
        gbc.setState(0xab47, 0x655d, 0x7b90, 0xef9f, 0xab01, 0x3b59, 0x1, 0x0);
        gbc.writeMem(0x3b59, { 0xc7 });
        gbc.writeMem(0xab47, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x655d);
        EXPECT(gbc.pc(), 0xab49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab47), 0xcb);
        EXPECT(gbc.readMem(0xab48), 0xd6);
        // CB D6 026E
        gbc.setState(0x22cd, 0xd4be, 0x1e0, 0xa669, 0x7d6d, 0xac6f, 0x0, 0x0);
        gbc.writeMem(0x22cd, { 0xcb, 0xd6 });
        gbc.writeMem(0xac6f, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd4be);
        EXPECT(gbc.pc(), 0x22cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac6f), 0xef);
        // CB D6 0271
        gbc.setState(0xc339, 0x393a, 0xaef0, 0xbc7b, 0x7878, 0xe61a, 0x0, 0x0);
        gbc.writeMem(0xc339, { 0xcb, 0xd6 });
        gbc.writeMem(0xe61a, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x393a);
        EXPECT(gbc.pc(), 0xc33b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc339), 0xcb);
        EXPECT(gbc.readMem(0xc33a), 0xd6);
        EXPECT(gbc.readMem(0xe61a), 0x84);
        // CB D6 0273
        gbc.setState(0x9b6e, 0xc19d, 0x35e0, 0xd1f2, 0x42ce, 0xf0c6, 0x1, 0x1);
        gbc.writeMem(0x9b6e, { 0xcb, 0xd6 });
        gbc.writeMem(0xf0c6, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc19d);
        EXPECT(gbc.pc(), 0x9b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b6e), 0xcb);
        EXPECT(gbc.readMem(0x9b6f), 0xd6);
        EXPECT(gbc.readMem(0xf0c6), 0xf5);
        // CB D6 0274
        gbc.setState(0xdf67, 0x326e, 0x8b70, 0x111d, 0xb9b4, 0x5434, 0x0, 0x0);
        gbc.writeMem(0x5434, { 0x6d });
        gbc.writeMem(0xdf67, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x326e);
        EXPECT(gbc.pc(), 0xdf69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf67), 0xcb);
        EXPECT(gbc.readMem(0xdf68), 0xd6);
        // CB D6 0276
        gbc.setState(0x184d, 0x5ba3, 0xc790, 0x6e51, 0x7e22, 0xe39a, 0x0, 0x0);
        gbc.writeMem(0x184d, { 0xcb, 0xd6 });
        gbc.writeMem(0xe39a, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5ba3);
        EXPECT(gbc.pc(), 0x184f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe39a), 0xbc);
        // CB D6 0277
        gbc.setState(0xda57, 0xf23d, 0x4d60, 0xcde6, 0x38a1, 0xc553, 0x0, 0x0);
        gbc.writeMem(0xc553, { 0xa1 });
        gbc.writeMem(0xda57, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf23d);
        EXPECT(gbc.pc(), 0xda59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc553), 0xa5);
        EXPECT(gbc.readMem(0xda57), 0xcb);
        EXPECT(gbc.readMem(0xda58), 0xd6);
        // CB D6 0278
        gbc.setState(0x39e7, 0x5d5e, 0xbc90, 0xf033, 0x418e, 0xc729, 0x1, 0x1);
        gbc.writeMem(0x39e7, { 0xcb, 0xd6 });
        gbc.writeMem(0xc729, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5d5e);
        EXPECT(gbc.pc(), 0x39e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc729), 0xbf);
        // CB D6 0279
        gbc.setState(0x4a83, 0x477, 0x3640, 0xc96c, 0x7cc2, 0xec9f, 0x0, 0x1);
        gbc.writeMem(0x4a83, { 0xcb, 0xd6 });
        gbc.writeMem(0xec9f, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x477);
        EXPECT(gbc.pc(), 0x4a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec9f), 0xa4);
        // CB D6 027A
        gbc.setState(0xd5b2, 0x9316, 0xb3a0, 0xca8b, 0x2c6e, 0xf559, 0x0, 0x1);
        gbc.writeMem(0xd5b2, { 0xcb, 0xd6 });
        gbc.writeMem(0xf559, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9316);
        EXPECT(gbc.pc(), 0xd5b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b2), 0xcb);
        EXPECT(gbc.readMem(0xd5b3), 0xd6);
        EXPECT(gbc.readMem(0xf559), 0x94);
        // CB D6 027C
        gbc.setState(0xedc8, 0x9ff2, 0xddb0, 0x969, 0xaf23, 0xcb59, 0x0, 0x0);
        gbc.writeMem(0xcb59, { 0xc });
        gbc.writeMem(0xedc8, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9ff2);
        EXPECT(gbc.pc(), 0xedca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb59), 0xc);
        EXPECT(gbc.readMem(0xedc8), 0xcb);
        EXPECT(gbc.readMem(0xedc9), 0xd6);
        // CB D6 027D
        gbc.setState(0x3e19, 0xdd42, 0x9710, 0xa91b, 0xf9, 0x99d7, 0x0, 0x1);
        gbc.writeMem(0x3e19, { 0xcb, 0xd6 });
        gbc.writeMem(0x99d7, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xdd42);
        EXPECT(gbc.pc(), 0x3e1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d7), 0x4c);
        // CB D6 027F
        gbc.setState(0xc4a9, 0x6ea6, 0x280, 0xb66c, 0x15f6, 0xb729, 0x0, 0x0);
        gbc.writeMem(0xb729, { 0xae });
        gbc.writeMem(0xc4a9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6ea6);
        EXPECT(gbc.pc(), 0xc4ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb729), 0xae);
        EXPECT(gbc.readMem(0xc4a9), 0xcb);
        EXPECT(gbc.readMem(0xc4aa), 0xd6);
        // CB D6 0282
        gbc.setState(0x2617, 0x6d37, 0x49d0, 0x6aa6, 0x1ecb, 0x603d, 0x1, 0x1);
        gbc.writeMem(0x2617, { 0xcb, 0xd6 });
        gbc.writeMem(0x603d, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6d37);
        EXPECT(gbc.pc(), 0x2619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0283
        gbc.setState(0x90db, 0x663f, 0xf360, 0xefb0, 0x8aec, 0xf39d, 0x0, 0x1);
        gbc.writeMem(0x90db, { 0xcb, 0xd6 });
        gbc.writeMem(0xf39d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x663f);
        EXPECT(gbc.pc(), 0x90dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90db), 0xcb);
        EXPECT(gbc.readMem(0x90dc), 0xd6);
        EXPECT(gbc.readMem(0xf39d), 0x54);
        // CB D6 0284
        gbc.setState(0x235, 0x3db1, 0xca80, 0x9f61, 0xaeaa, 0x9ec2, 0x0, 0x1);
        gbc.writeMem(0x235, { 0xcb, 0xd6 });
        gbc.writeMem(0x9ec2, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3db1);
        EXPECT(gbc.pc(), 0x237);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ec2), 0xde);
        // CB D6 0285
        gbc.setState(0xddff, 0xd7e2, 0x1b90, 0xef62, 0x9473, 0x8574, 0x0, 0x1);
        gbc.writeMem(0x8574, { 0x78 });
        gbc.writeMem(0xddff, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd7e2);
        EXPECT(gbc.pc(), 0xde01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8574), 0x7c);
        EXPECT(gbc.readMem(0xddff), 0xcb);
        EXPECT(gbc.readMem(0xde00), 0xd6);
        // CB D6 0286
        gbc.setState(0x9f12, 0x7ed5, 0x4af0, 0xedd0, 0xbb38, 0xb0cf, 0x0, 0x0);
        gbc.writeMem(0x9f12, { 0xcb, 0xd6 });
        gbc.writeMem(0xb0cf, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7ed5);
        EXPECT(gbc.pc(), 0x9f14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f12), 0xcb);
        EXPECT(gbc.readMem(0x9f13), 0xd6);
        EXPECT(gbc.readMem(0xb0cf), 0xd7);
        // CB D6 0287
        gbc.setState(0x7550, 0x7180, 0xd5d0, 0xf929, 0xd92d, 0x84a2, 0x0, 0x1);
        gbc.writeMem(0x7550, { 0xcb, 0xd6 });
        gbc.writeMem(0x84a2, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7180);
        EXPECT(gbc.pc(), 0x7552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a2), 0x4d);
        // CB D6 0288
        gbc.setState(0x124, 0x8a3e, 0x81a0, 0x4c13, 0x9eb6, 0xa5e9, 0x0, 0x0);
        gbc.writeMem(0x124, { 0xcb, 0xd6 });
        gbc.writeMem(0xa5e9, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8a3e);
        EXPECT(gbc.pc(), 0x126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e9), 0x14);
        // CB D6 0289
        gbc.setState(0x1960, 0x27cd, 0x7330, 0x3c75, 0x49ed, 0xf8f3, 0x1, 0x1);
        gbc.writeMem(0x1960, { 0xcb, 0xd6 });
        gbc.writeMem(0xf8f3, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x27cd);
        EXPECT(gbc.pc(), 0x1962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8f3), 0x8e);
        // CB D6 028A
        gbc.setState(0x9a5, 0x49b9, 0xc2a0, 0xda83, 0x7d27, 0x7ca, 0x0, 0x0);
        gbc.writeMem(0x7ca, { 0xef });
        gbc.writeMem(0x9a5, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x49b9);
        EXPECT(gbc.pc(), 0x9a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 028B
        gbc.setState(0xc2ff, 0x8848, 0xe0e0, 0xbfeb, 0xd93f, 0xe23d, 0x0, 0x0);
        gbc.writeMem(0xc2ff, { 0xcb, 0xd6 });
        gbc.writeMem(0xe23d, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8848);
        EXPECT(gbc.pc(), 0xc301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ff), 0xcb);
        EXPECT(gbc.readMem(0xc300), 0xd6);
        EXPECT(gbc.readMem(0xe23d), 0x6);
        // CB D6 028C
        gbc.setState(0x40b0, 0x3ee0, 0x10, 0xa86d, 0x1b86, 0xd22e, 0x0, 0x0);
        gbc.writeMem(0x40b0, { 0xcb, 0xd6 });
        gbc.writeMem(0xd22e, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3ee0);
        EXPECT(gbc.pc(), 0x40b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22e), 0x3c);
        // CB D6 028E
        gbc.setState(0x76ec, 0x672b, 0x5c50, 0x500c, 0xace3, 0xfd5d, 0x0, 0x1);
        gbc.writeMem(0x76ec, { 0xcb, 0xd6 });
        gbc.writeMem(0xfd5d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x672b);
        EXPECT(gbc.pc(), 0x76ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd5d), 0xae);
        // CB D6 028F
        gbc.setState(0x62b6, 0x3deb, 0x9ff0, 0x683c, 0xc1b7, 0xcd85, 0x1, 0x1);
        gbc.writeMem(0x62b6, { 0xcb, 0xd6 });
        gbc.writeMem(0xcd85, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3deb);
        EXPECT(gbc.pc(), 0x62b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd85), 0xf5);
        // CB D6 0290
        gbc.setState(0xdc7d, 0x1336, 0x8360, 0x6137, 0x7af4, 0x42f3, 0x0, 0x0);
        gbc.writeMem(0x42f3, { 0x96 });
        gbc.writeMem(0xdc7d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1336);
        EXPECT(gbc.pc(), 0xdc7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc7d), 0xcb);
        EXPECT(gbc.readMem(0xdc7e), 0xd6);
        // CB D6 0292
        gbc.setState(0x1877, 0xe722, 0x9490, 0xa318, 0x1805, 0x11b0, 0x1, 0x1);
        gbc.writeMem(0x11b0, { 0x3f });
        gbc.writeMem(0x1877, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe722);
        EXPECT(gbc.pc(), 0x1879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0294
        gbc.setState(0x1ada, 0x54e9, 0x6330, 0x7807, 0x1532, 0xfa6d, 0x1, 0x0);
        gbc.writeMem(0x1ada, { 0xcb, 0xd6 });
        gbc.writeMem(0xfa6d, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x54e9);
        EXPECT(gbc.pc(), 0x1adc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa6d), 0xce);
        // CB D6 0297
        gbc.setState(0x9633, 0x59f4, 0x5530, 0x988a, 0xa27a, 0x3462, 0x0, 0x1);
        gbc.writeMem(0x3462, { 0x1f });
        gbc.writeMem(0x9633, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x59f4);
        EXPECT(gbc.pc(), 0x9635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9633), 0xcb);
        EXPECT(gbc.readMem(0x9634), 0xd6);
        // CB D6 0298
        gbc.setState(0x1b1f, 0x80, 0xbd30, 0xa1de, 0x6b87, 0xb4eb, 0x0, 0x1);
        gbc.writeMem(0x1b1f, { 0xcb, 0xd6 });
        gbc.writeMem(0xb4eb, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x80);
        EXPECT(gbc.pc(), 0x1b21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4eb), 0x66);
        // CB D6 0299
        gbc.setState(0xcc8, 0x82d, 0x78d0, 0x1c1d, 0x2284, 0x9870, 0x0, 0x0);
        gbc.writeMem(0xcc8, { 0xcb, 0xd6 });
        gbc.writeMem(0x9870, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x82d);
        EXPECT(gbc.pc(), 0xcca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9870), 0x1c);
        // CB D6 029A
        gbc.setState(0x199c, 0x9f20, 0xcc20, 0x20bf, 0x9c36, 0x9f2d, 0x1, 0x1);
        gbc.writeMem(0x199c, { 0xcb, 0xd6 });
        gbc.writeMem(0x9f2d, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9f20);
        EXPECT(gbc.pc(), 0x199e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f2d), 0x35);
        // CB D6 029B
        gbc.setState(0xe994, 0xa34, 0x5190, 0x6ea7, 0x3a21, 0x9ca0, 0x1, 0x0);
        gbc.writeMem(0x9ca0, { 0x3b });
        gbc.writeMem(0xe994, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa34);
        EXPECT(gbc.pc(), 0xe996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca0), 0x3f);
        EXPECT(gbc.readMem(0xe994), 0xcb);
        EXPECT(gbc.readMem(0xe995), 0xd6);
        // CB D6 029C
        gbc.setState(0x92e2, 0xf18e, 0x27b0, 0xfc99, 0x6560, 0x9135, 0x1, 0x1);
        gbc.writeMem(0x9135, { 0x35 });
        gbc.writeMem(0x92e2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf18e);
        EXPECT(gbc.pc(), 0x92e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9135), 0x35);
        EXPECT(gbc.readMem(0x92e2), 0xcb);
        EXPECT(gbc.readMem(0x92e3), 0xd6);
        // CB D6 029D
        gbc.setState(0x46f6, 0x3961, 0xf850, 0xbc51, 0x5ae4, 0x9bb9, 0x0, 0x1);
        gbc.writeMem(0x46f6, { 0xcb, 0xd6 });
        gbc.writeMem(0x9bb9, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3961);
        EXPECT(gbc.pc(), 0x46f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb9), 0xbe);
        // CB D6 02A0
        gbc.setState(0xd1ad, 0xf45, 0x3a20, 0xb4f3, 0xe9f2, 0xd973, 0x0, 0x1);
        gbc.writeMem(0xd1ad, { 0xcb, 0xd6 });
        gbc.writeMem(0xd973, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf45);
        EXPECT(gbc.pc(), 0xd1af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ad), 0xcb);
        EXPECT(gbc.readMem(0xd1ae), 0xd6);
        EXPECT(gbc.readMem(0xd973), 0x8e);
        // CB D6 02A1
        gbc.setState(0x4d3f, 0x2e7c, 0x6bf0, 0x3adb, 0x1de4, 0x9f85, 0x0, 0x1);
        gbc.writeMem(0x4d3f, { 0xcb, 0xd6 });
        gbc.writeMem(0x9f85, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2e7c);
        EXPECT(gbc.pc(), 0x4d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f85), 0x75);
        // CB D6 02A2
        gbc.setState(0xa44d, 0xc872, 0xe40, 0x747d, 0x315f, 0xa928, 0x0, 0x1);
        gbc.writeMem(0xa44d, { 0xcb, 0xd6 });
        gbc.writeMem(0xa928, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc872);
        EXPECT(gbc.pc(), 0xa44f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa44d), 0xcb);
        EXPECT(gbc.readMem(0xa44e), 0xd6);
        EXPECT(gbc.readMem(0xa928), 0x84);
        // CB D6 02A3
        gbc.setState(0xd528, 0xaf4c, 0xb0f0, 0x74a2, 0xa390, 0xe476, 0x1, 0x1);
        gbc.writeMem(0xd528, { 0xcb, 0xd6 });
        gbc.writeMem(0xe476, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xaf4c);
        EXPECT(gbc.pc(), 0xd52a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd528), 0xcb);
        EXPECT(gbc.readMem(0xd529), 0xd6);
        EXPECT(gbc.readMem(0xe476), 0xcd);
        // CB D6 02A4
        gbc.setState(0x3d80, 0x1438, 0x4e0, 0xd0d5, 0x872a, 0x4af, 0x0, 0x1);
        gbc.writeMem(0x4af, { 0xd6 });
        gbc.writeMem(0x3d80, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1438);
        EXPECT(gbc.pc(), 0x3d82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 02A5
        gbc.setState(0x1109, 0x6ab2, 0xa780, 0xe634, 0xd73b, 0x2641, 0x1, 0x1);
        gbc.writeMem(0x1109, { 0xcb, 0xd6 });
        gbc.writeMem(0x2641, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6ab2);
        EXPECT(gbc.pc(), 0x110b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 02A9
        gbc.setState(0x4907, 0x1ac9, 0xfbb0, 0xacfe, 0xaf72, 0x934b, 0x1, 0x1);
        gbc.writeMem(0x4907, { 0xcb, 0xd6 });
        gbc.writeMem(0x934b, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1ac9);
        EXPECT(gbc.pc(), 0x4909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x934b), 0x94);
        // CB D6 02AA
        gbc.setState(0x11ca, 0xe9d9, 0x8980, 0xa472, 0xd469, 0xa26d, 0x1, 0x0);
        gbc.writeMem(0x11ca, { 0xcb, 0xd6 });
        gbc.writeMem(0xa26d, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe9d9);
        EXPECT(gbc.pc(), 0x11cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa26d), 0x77);
        // CB D6 02AD
        gbc.setState(0x30a5, 0x32d6, 0x7610, 0x8457, 0xb92f, 0x125f, 0x0, 0x1);
        gbc.writeMem(0x125f, { 0x27 });
        gbc.writeMem(0x30a5, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x32d6);
        EXPECT(gbc.pc(), 0x30a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 02AE
        gbc.setState(0x1bcc, 0x4ff0, 0x45c0, 0x9622, 0x9e8d, 0xf62f, 0x0, 0x0);
        gbc.writeMem(0x1bcc, { 0xcb, 0xd6 });
        gbc.writeMem(0xf62f, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4ff0);
        EXPECT(gbc.pc(), 0x1bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf62f), 0x5f);
        // CB D6 02B0
        gbc.setState(0xe362, 0xfaac, 0x82f0, 0x4668, 0xff70, 0x3c94, 0x0, 0x1);
        gbc.writeMem(0x3c94, { 0xdf });
        gbc.writeMem(0xe362, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfaac);
        EXPECT(gbc.pc(), 0xe364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe362), 0xcb);
        EXPECT(gbc.readMem(0xe363), 0xd6);
        // CB D6 02B1
        gbc.setState(0x4617, 0xb1b0, 0x31b0, 0x4f73, 0xe9bc, 0xe318, 0x0, 0x1);
        gbc.writeMem(0x4617, { 0xcb, 0xd6 });
        gbc.writeMem(0xe318, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb1b0);
        EXPECT(gbc.pc(), 0x4619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe318), 0x26);
        // CB D6 02B2
        gbc.setState(0x9c57, 0x6b, 0x7ae0, 0xe1dd, 0x39, 0xf241, 0x0, 0x0);
        gbc.writeMem(0x9c57, { 0xcb, 0xd6 });
        gbc.writeMem(0xf241, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6b);
        EXPECT(gbc.pc(), 0x9c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c57), 0xcb);
        EXPECT(gbc.readMem(0x9c58), 0xd6);
        EXPECT(gbc.readMem(0xf241), 0x67);
        // CB D6 02B3
        gbc.setState(0x52ee, 0x10c5, 0xb4c0, 0xd3f0, 0xcbef, 0x8c94, 0x1, 0x1);
        gbc.writeMem(0x52ee, { 0xcb, 0xd6 });
        gbc.writeMem(0x8c94, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x10c5);
        EXPECT(gbc.pc(), 0x52f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c94), 0x9d);
        // CB D6 02B7
        gbc.setState(0xb1ce, 0xcf5f, 0xf040, 0xdc5a, 0x1091, 0xf621, 0x1, 0x1);
        gbc.writeMem(0xb1ce, { 0xcb, 0xd6 });
        gbc.writeMem(0xf621, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xcf5f);
        EXPECT(gbc.pc(), 0xb1d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ce), 0xcb);
        EXPECT(gbc.readMem(0xb1cf), 0xd6);
        EXPECT(gbc.readMem(0xf621), 0xbc);
        // CB D6 02B9
        gbc.setState(0xc660, 0x7049, 0xd430, 0x4c8d, 0xf31c, 0x92a5, 0x0, 0x0);
        gbc.writeMem(0x92a5, { 0x27 });
        gbc.writeMem(0xc660, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7049);
        EXPECT(gbc.pc(), 0xc662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92a5), 0x27);
        EXPECT(gbc.readMem(0xc660), 0xcb);
        EXPECT(gbc.readMem(0xc661), 0xd6);
        // CB D6 02BA
        gbc.setState(0xc0bc, 0x383b, 0x9170, 0x72ef, 0x8ede, 0x31d6, 0x1, 0x1);
        gbc.writeMem(0x31d6, { 0x36 });
        gbc.writeMem(0xc0bc, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x383b);
        EXPECT(gbc.pc(), 0xc0be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0bc), 0xcb);
        EXPECT(gbc.readMem(0xc0bd), 0xd6);
        // CB D6 02BB
        gbc.setState(0x68a2, 0xbea1, 0xd190, 0xe646, 0x7978, 0xfcb4, 0x0, 0x0);
        gbc.writeMem(0x68a2, { 0xcb, 0xd6 });
        gbc.writeMem(0xfcb4, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xbea1);
        EXPECT(gbc.pc(), 0x68a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfcb4), 0xac);
        // CB D6 02BD
        gbc.setState(0x1d99, 0xa31, 0xd8f0, 0xb417, 0x1c2f, 0x92c, 0x1, 0x1);
        gbc.writeMem(0x92c, { 0x16 });
        gbc.writeMem(0x1d99, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa31);
        EXPECT(gbc.pc(), 0x1d9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 02BE
        gbc.setState(0xb821, 0x6934, 0x6ac0, 0xfc02, 0xa99d, 0xca86, 0x1, 0x1);
        gbc.writeMem(0xb821, { 0xcb, 0xd6 });
        gbc.writeMem(0xca86, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6934);
        EXPECT(gbc.pc(), 0xb823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb821), 0xcb);
        EXPECT(gbc.readMem(0xb822), 0xd6);
        EXPECT(gbc.readMem(0xca86), 0x15);
        // CB D6 02C1
        gbc.setState(0x1531, 0x9100, 0xdb20, 0xa91e, 0xf69d, 0xff72, 0x1, 0x0);
        gbc.writeMem(0x1531, { 0xcb, 0xd6 });
        gbc.writeMem(0xff72, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9100);
        EXPECT(gbc.pc(), 0x1533);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff72), 0xc6);
        // CB D6 02C2
        gbc.setState(0x52a0, 0x8870, 0x5440, 0x6960, 0x53f, 0xc354, 0x0, 0x0);
        gbc.writeMem(0x52a0, { 0xcb, 0xd6 });
        gbc.writeMem(0xc354, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8870);
        EXPECT(gbc.pc(), 0x52a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc354), 0x3c);
        // CB D6 02C4
        gbc.setState(0xb3d3, 0x83f5, 0xf260, 0x612d, 0x3c4c, 0xfa1f, 0x0, 0x0);
        gbc.writeMem(0xb3d3, { 0xcb, 0xd6 });
        gbc.writeMem(0xfa1f, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x83f5);
        EXPECT(gbc.pc(), 0xb3d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d3), 0xcb);
        EXPECT(gbc.readMem(0xb3d4), 0xd6);
        EXPECT(gbc.readMem(0xfa1f), 0x57);
        // CB D6 02C5
        gbc.setState(0x1e98, 0x2d26, 0xcae0, 0xbceb, 0xbac5, 0xe365, 0x1, 0x1);
        gbc.writeMem(0x1e98, { 0xcb, 0xd6 });
        gbc.writeMem(0xe365, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2d26);
        EXPECT(gbc.pc(), 0x1e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe365), 0xf);
        // CB D6 02C6
        gbc.setState(0x3783, 0x9a63, 0x2c40, 0x3dfd, 0xb55, 0x80b, 0x0, 0x1);
        gbc.writeMem(0x80b, { 0x34 });
        gbc.writeMem(0x3783, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9a63);
        EXPECT(gbc.pc(), 0x3785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 02CA
        gbc.setState(0x928f, 0xf893, 0xdef0, 0x71ef, 0x367e, 0x5e04, 0x1, 0x0);
        gbc.writeMem(0x5e04, { 0xef });
        gbc.writeMem(0x928f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf893);
        EXPECT(gbc.pc(), 0x9291);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x928f), 0xcb);
        EXPECT(gbc.readMem(0x9290), 0xd6);
        // CB D6 02CB
        gbc.setState(0xe7e3, 0x57d7, 0xa0a0, 0xa4b2, 0xa445, 0x1442, 0x1, 0x1);
        gbc.writeMem(0x1442, { 0xe });
        gbc.writeMem(0xe7e3, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x57d7);
        EXPECT(gbc.pc(), 0xe7e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e3), 0xcb);
        EXPECT(gbc.readMem(0xe7e4), 0xd6);
        // CB D6 02CC
        gbc.setState(0x5e74, 0xf22c, 0x4e60, 0x860b, 0x2a5f, 0x8964, 0x1, 0x0);
        gbc.writeMem(0x5e74, { 0xcb, 0xd6 });
        gbc.writeMem(0x8964, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf22c);
        EXPECT(gbc.pc(), 0x5e76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8964), 0x9e);
        // CB D6 02CD
        gbc.setState(0x7f37, 0x4541, 0xa8d0, 0xcdf1, 0x3146, 0x4aa5, 0x0, 0x1);
        gbc.writeMem(0x4aa5, { 0x5f });
        gbc.writeMem(0x7f37, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4541);
        EXPECT(gbc.pc(), 0x7f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 02CF
        gbc.setState(0x63bd, 0xb1ff, 0xd6a0, 0xf4e6, 0xfdc9, 0xcc02, 0x1, 0x0);
        gbc.writeMem(0x63bd, { 0xcb, 0xd6 });
        gbc.writeMem(0xcc02, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb1ff);
        EXPECT(gbc.pc(), 0x63bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc02), 0x5e);
        // CB D6 02D0
        gbc.setState(0x481d, 0x721b, 0x2350, 0x9e0b, 0x8e5b, 0xc33a, 0x0, 0x1);
        gbc.writeMem(0x481d, { 0xcb, 0xd6 });
        gbc.writeMem(0xc33a, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x721b);
        EXPECT(gbc.pc(), 0x481f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33a), 0x67);
        // CB D6 02D1
        gbc.setState(0xceb, 0x7c9d, 0xb3f0, 0xa46e, 0x3546, 0x991f, 0x0, 0x1);
        gbc.writeMem(0xceb, { 0xcb, 0xd6 });
        gbc.writeMem(0x991f, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7c9d);
        EXPECT(gbc.pc(), 0xced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991f), 0x8e);
        // CB D6 02D2
        gbc.setState(0xae4, 0x86b5, 0xb4e0, 0xb26a, 0xc703, 0x4e9e, 0x0, 0x1);
        gbc.writeMem(0xae4, { 0xcb, 0xd6 });
        gbc.writeMem(0x4e9e, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x86b5);
        EXPECT(gbc.pc(), 0xae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 02D3
        gbc.setState(0x884f, 0xa3f4, 0xe580, 0x3bf, 0x3450, 0xf1d3, 0x1, 0x1);
        gbc.writeMem(0x884f, { 0xcb, 0xd6 });
        gbc.writeMem(0xf1d3, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa3f4);
        EXPECT(gbc.pc(), 0x8851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884f), 0xcb);
        EXPECT(gbc.readMem(0x8850), 0xd6);
        EXPECT(gbc.readMem(0xf1d3), 0x86);
        // CB D6 02D4
        gbc.setState(0xb188, 0x6593, 0x3800, 0x5d37, 0x1642, 0xbcd7, 0x0, 0x0);
        gbc.writeMem(0xb188, { 0xcb, 0xd6 });
        gbc.writeMem(0xbcd7, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6593);
        EXPECT(gbc.pc(), 0xb18a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb188), 0xcb);
        EXPECT(gbc.readMem(0xb189), 0xd6);
        EXPECT(gbc.readMem(0xbcd7), 0x56);
        // CB D6 02D5
        gbc.setState(0x809c, 0xf95f, 0x7810, 0xa3c, 0xbbe1, 0x302c, 0x0, 0x1);
        gbc.writeMem(0x302c, { 0x75 });
        gbc.writeMem(0x809c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf95f);
        EXPECT(gbc.pc(), 0x809e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x809c), 0xcb);
        EXPECT(gbc.readMem(0x809d), 0xd6);
        // CB D6 02D6
        gbc.setState(0x1217, 0x2eab, 0xab70, 0xe039, 0xb391, 0xd390, 0x1, 0x1);
        gbc.writeMem(0x1217, { 0xcb, 0xd6 });
        gbc.writeMem(0xd390, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2eab);
        EXPECT(gbc.pc(), 0x1219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd390), 0x4c);
        // CB D6 02D7
        gbc.setState(0x6327, 0x221f, 0xef20, 0x5999, 0x3f1a, 0x8ea6, 0x0, 0x1);
        gbc.writeMem(0x6327, { 0xcb, 0xd6 });
        gbc.writeMem(0x8ea6, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x221f);
        EXPECT(gbc.pc(), 0x6329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea6), 0xad);
        // CB D6 02D8
        gbc.setState(0xc57c, 0xe600, 0xd100, 0x9b44, 0x71c, 0xfc5, 0x0, 0x0);
        gbc.writeMem(0xfc5, { 0x5c });
        gbc.writeMem(0xc57c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe600);
        EXPECT(gbc.pc(), 0xc57e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc57c), 0xcb);
        EXPECT(gbc.readMem(0xc57d), 0xd6);
        // CB D6 02D9
        gbc.setState(0x87b9, 0x1601, 0xe5e0, 0x9f77, 0xded4, 0xc488, 0x0, 0x1);
        gbc.writeMem(0x87b9, { 0xcb, 0xd6 });
        gbc.writeMem(0xc488, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1601);
        EXPECT(gbc.pc(), 0x87bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b9), 0xcb);
        EXPECT(gbc.readMem(0x87ba), 0xd6);
        EXPECT(gbc.readMem(0xc488), 0xae);
        // CB D6 02DA
        gbc.setState(0x4265, 0x815d, 0xeb40, 0x7349, 0x7d5d, 0xec6c, 0x0, 0x1);
        gbc.writeMem(0x4265, { 0xcb, 0xd6 });
        gbc.writeMem(0xec6c, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x815d);
        EXPECT(gbc.pc(), 0x4267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec6c), 0x55);
        // CB D6 02DB
        gbc.setState(0x7b38, 0x17c1, 0x27f0, 0xcc1c, 0xe9eb, 0x8b75, 0x1, 0x0);
        gbc.writeMem(0x7b38, { 0xcb, 0xd6 });
        gbc.writeMem(0x8b75, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x17c1);
        EXPECT(gbc.pc(), 0x7b3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b75), 0x35);
        // CB D6 02DC
        gbc.setState(0x9cd5, 0x8173, 0xc980, 0x38a6, 0x7baf, 0xc9d1, 0x0, 0x0);
        gbc.writeMem(0x9cd5, { 0xcb, 0xd6 });
        gbc.writeMem(0xc9d1, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8173);
        EXPECT(gbc.pc(), 0x9cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd5), 0xcb);
        EXPECT(gbc.readMem(0x9cd6), 0xd6);
        EXPECT(gbc.readMem(0xc9d1), 0x6);
        // CB D6 02DE
        gbc.setState(0xc62b, 0xa84c, 0x72d0, 0x993f, 0x9d7e, 0x47d2, 0x1, 0x0);
        gbc.writeMem(0x47d2, { 0xe5 });
        gbc.writeMem(0xc62b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa84c);
        EXPECT(gbc.pc(), 0xc62d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc62b), 0xcb);
        EXPECT(gbc.readMem(0xc62c), 0xd6);
        // CB D6 02DF
        gbc.setState(0xed55, 0xfcb9, 0xd2e0, 0x8930, 0x6af8, 0xe32, 0x0, 0x1);
        gbc.writeMem(0xe32, { 0xe });
        gbc.writeMem(0xed55, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xfcb9);
        EXPECT(gbc.pc(), 0xed57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed55), 0xcb);
        EXPECT(gbc.readMem(0xed56), 0xd6);
        // CB D6 02E1
        gbc.setState(0x907d, 0x749c, 0x1b30, 0xc81, 0xf3c, 0x53a8, 0x0, 0x1);
        gbc.writeMem(0x53a8, { 0x1c });
        gbc.writeMem(0x907d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x749c);
        EXPECT(gbc.pc(), 0x907f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x907d), 0xcb);
        EXPECT(gbc.readMem(0x907e), 0xd6);
        // CB D6 02E2
        gbc.setState(0xa1e3, 0x9cb8, 0x40, 0xd23c, 0x2227, 0xb9a7, 0x0, 0x1);
        gbc.writeMem(0xa1e3, { 0xcb, 0xd6 });
        gbc.writeMem(0xb9a7, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9cb8);
        EXPECT(gbc.pc(), 0xa1e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1e3), 0xcb);
        EXPECT(gbc.readMem(0xa1e4), 0xd6);
        EXPECT(gbc.readMem(0xb9a7), 0xb6);
        // CB D6 02E3
        gbc.setState(0x44d2, 0xd681, 0xbf90, 0x6996, 0xcf63, 0x3eae, 0x0, 0x1);
        gbc.writeMem(0x3eae, { 0xe7 });
        gbc.writeMem(0x44d2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd681);
        EXPECT(gbc.pc(), 0x44d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 02E4
        gbc.setState(0x438b, 0x7ed6, 0x9060, 0x12fd, 0xb00a, 0xb77c, 0x0, 0x1);
        gbc.writeMem(0x438b, { 0xcb, 0xd6 });
        gbc.writeMem(0xb77c, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7ed6);
        EXPECT(gbc.pc(), 0x438d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb77c), 0x17);
        // CB D6 02E6
        gbc.setState(0x5c03, 0x9774, 0xd400, 0x9fbf, 0x6039, 0xcbab, 0x1, 0x1);
        gbc.writeMem(0x5c03, { 0xcb, 0xd6 });
        gbc.writeMem(0xcbab, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9774);
        EXPECT(gbc.pc(), 0x5c05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbab), 0xf5);
        // CB D6 02E7
        gbc.setState(0xb7e6, 0x2170, 0x55c0, 0xda29, 0x1fc2, 0xcd61, 0x1, 0x0);
        gbc.writeMem(0xb7e6, { 0xcb, 0xd6 });
        gbc.writeMem(0xcd61, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2170);
        EXPECT(gbc.pc(), 0xb7e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e6), 0xcb);
        EXPECT(gbc.readMem(0xb7e7), 0xd6);
        EXPECT(gbc.readMem(0xcd61), 0x7e);
        // CB D6 02E8
        gbc.setState(0x9fed, 0x6ccb, 0xf220, 0x27bf, 0xd0d2, 0x3381, 0x1, 0x1);
        gbc.writeMem(0x3381, { 0xf7 });
        gbc.writeMem(0x9fed, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6ccb);
        EXPECT(gbc.pc(), 0x9fef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fed), 0xcb);
        EXPECT(gbc.readMem(0x9fee), 0xd6);
        // CB D6 02EA
        gbc.setState(0x6522, 0x357f, 0x67f0, 0xe7f3, 0x146c, 0xf9cb, 0x1, 0x1);
        gbc.writeMem(0x6522, { 0xcb, 0xd6 });
        gbc.writeMem(0xf9cb, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x357f);
        EXPECT(gbc.pc(), 0x6524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9cb), 0xd5);
        // CB D6 02EC
        gbc.setState(0xe233, 0xc33e, 0xa500, 0xb1e4, 0xe650, 0x8873, 0x0, 0x0);
        gbc.writeMem(0x8873, { 0xf9 });
        gbc.writeMem(0xe233, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc33e);
        EXPECT(gbc.pc(), 0xe235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8873), 0xfd);
        EXPECT(gbc.readMem(0xe233), 0xcb);
        EXPECT(gbc.readMem(0xe234), 0xd6);
        // CB D6 02ED
        gbc.setState(0x957d, 0x89fe, 0xa4f0, 0x5ed, 0xd013, 0x8105, 0x0, 0x1);
        gbc.writeMem(0x8105, { 0xe4 });
        gbc.writeMem(0x957d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x89fe);
        EXPECT(gbc.pc(), 0x957f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8105), 0xe4);
        EXPECT(gbc.readMem(0x957d), 0xcb);
        EXPECT(gbc.readMem(0x957e), 0xd6);
        // CB D6 02EE
        gbc.setState(0xbd63, 0xac69, 0xb7d0, 0xdf55, 0x711c, 0xe04d, 0x1, 0x1);
        gbc.writeMem(0xbd63, { 0xcb, 0xd6 });
        gbc.writeMem(0xe04d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xac69);
        EXPECT(gbc.pc(), 0xbd65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd63), 0xcb);
        EXPECT(gbc.readMem(0xbd64), 0xd6);
        EXPECT(gbc.readMem(0xe04d), 0xa6);
        // CB D6 02EF
        gbc.setState(0x50d3, 0xce4a, 0x7d70, 0x682, 0x24e1, 0x8743, 0x1, 0x0);
        gbc.writeMem(0x50d3, { 0xcb, 0xd6 });
        gbc.writeMem(0x8743, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xce4a);
        EXPECT(gbc.pc(), 0x50d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8743), 0xbe);
        // CB D6 02F0
        gbc.setState(0xd687, 0x1fb6, 0xbf30, 0x3bce, 0x5ff6, 0xb19d, 0x1, 0x0);
        gbc.writeMem(0xb19d, { 0x2 });
        gbc.writeMem(0xd687, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1fb6);
        EXPECT(gbc.pc(), 0xd689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19d), 0x6);
        EXPECT(gbc.readMem(0xd687), 0xcb);
        EXPECT(gbc.readMem(0xd688), 0xd6);
        // CB D6 02F1
        gbc.setState(0xd2f1, 0x28e7, 0x8d10, 0xebf, 0xb13, 0xf037, 0x0, 0x1);
        gbc.writeMem(0xd2f1, { 0xcb, 0xd6 });
        gbc.writeMem(0xf037, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x28e7);
        EXPECT(gbc.pc(), 0xd2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f1), 0xcb);
        EXPECT(gbc.readMem(0xd2f2), 0xd6);
        EXPECT(gbc.readMem(0xf037), 0x1f);
        // CB D6 02F2
        gbc.setState(0xe45d, 0xe02f, 0x5b60, 0x2ef9, 0x5c8a, 0xc0aa, 0x0, 0x0);
        gbc.writeMem(0xc0aa, { 0x8b });
        gbc.writeMem(0xe45d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe02f);
        EXPECT(gbc.pc(), 0xe45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0aa), 0x8f);
        EXPECT(gbc.readMem(0xe45d), 0xcb);
        EXPECT(gbc.readMem(0xe45e), 0xd6);
        // CB D6 02F3
        gbc.setState(0xbcf1, 0xf15a, 0x42c0, 0x312a, 0xb40d, 0xf227, 0x1, 0x0);
        gbc.writeMem(0xbcf1, { 0xcb, 0xd6 });
        gbc.writeMem(0xf227, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf15a);
        EXPECT(gbc.pc(), 0xbcf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcf1), 0xcb);
        EXPECT(gbc.readMem(0xbcf2), 0xd6);
        EXPECT(gbc.readMem(0xf227), 0xa6);
        // CB D6 02F4
        gbc.setState(0x2c86, 0xd179, 0x4b0, 0x92a6, 0x9305, 0x8dcc, 0x0, 0x1);
        gbc.writeMem(0x2c86, { 0xcb, 0xd6 });
        gbc.writeMem(0x8dcc, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd179);
        EXPECT(gbc.pc(), 0x2c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dcc), 0x4);
        // CB D6 02F5
        gbc.setState(0xa1ff, 0x73f4, 0x3340, 0xdd39, 0x262c, 0x9ca5, 0x1, 0x1);
        gbc.writeMem(0x9ca5, { 0xda });
        gbc.writeMem(0xa1ff, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x73f4);
        EXPECT(gbc.pc(), 0xa201);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca5), 0xde);
        EXPECT(gbc.readMem(0xa1ff), 0xcb);
        EXPECT(gbc.readMem(0xa200), 0xd6);
        // CB D6 02F6
        gbc.setState(0xa008, 0x5b9b, 0x460, 0xaae3, 0x44e0, 0x18d3, 0x0, 0x0);
        gbc.writeMem(0x18d3, { 0xc7 });
        gbc.writeMem(0xa008, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x5b9b);
        EXPECT(gbc.pc(), 0xa00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa008), 0xcb);
        EXPECT(gbc.readMem(0xa009), 0xd6);
        // CB D6 02F7
        gbc.setState(0x4a36, 0x75df, 0x630, 0xcd3a, 0x4c7b, 0xfabc, 0x1, 0x1);
        gbc.writeMem(0x4a36, { 0xcb, 0xd6 });
        gbc.writeMem(0xfabc, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x75df);
        EXPECT(gbc.pc(), 0x4a38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfabc), 0x5d);
        // CB D6 02FA
        gbc.setState(0xd0de, 0x6fa3, 0x4870, 0x524c, 0x94f7, 0x9908, 0x1, 0x0);
        gbc.writeMem(0x9908, { 0xde });
        gbc.writeMem(0xd0de, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6fa3);
        EXPECT(gbc.pc(), 0xd0e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9908), 0xde);
        EXPECT(gbc.readMem(0xd0de), 0xcb);
        EXPECT(gbc.readMem(0xd0df), 0xd6);
        // CB D6 02FB
        gbc.setState(0x64c, 0x5cd9, 0x4680, 0x9ad8, 0x22c5, 0x6a24, 0x0, 0x0);
        gbc.writeMem(0x64c, { 0xcb, 0xd6 });
        gbc.writeMem(0x6a24, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5cd9);
        EXPECT(gbc.pc(), 0x64e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 02FC
        gbc.setState(0x5951, 0x7871, 0x290, 0x9226, 0x11bb, 0x6521, 0x1, 0x1);
        gbc.writeMem(0x5951, { 0xcb, 0xd6 });
        gbc.writeMem(0x6521, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7871);
        EXPECT(gbc.pc(), 0x5953);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 02FD
        gbc.setState(0x1387, 0x4c59, 0xa510, 0x76af, 0x1d9e, 0x60e, 0x0, 0x1);
        gbc.writeMem(0x60e, { 0x2d });
        gbc.writeMem(0x1387, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4c59);
        EXPECT(gbc.pc(), 0x1389);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 02FE
        gbc.setState(0x138, 0x4553, 0x11c0, 0x13dd, 0x7380, 0xc627, 0x0, 0x0);
        gbc.writeMem(0x138, { 0xcb, 0xd6 });
        gbc.writeMem(0xc627, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4553);
        EXPECT(gbc.pc(), 0x13a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc627), 0x86);
        // CB D6 0300
        gbc.setState(0x4ee1, 0x371b, 0x5bf0, 0x15ce, 0x7f4a, 0x1627, 0x0, 0x1);
        gbc.writeMem(0x1627, { 0x7d });
        gbc.writeMem(0x4ee1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x371b);
        EXPECT(gbc.pc(), 0x4ee3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0301
        gbc.setState(0x761a, 0x1be9, 0xee40, 0x1583, 0xb46e, 0xbc21, 0x0, 0x0);
        gbc.writeMem(0x761a, { 0xcb, 0xd6 });
        gbc.writeMem(0xbc21, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1be9);
        EXPECT(gbc.pc(), 0x761c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc21), 0x6);
        // CB D6 0303
        gbc.setState(0xd3f4, 0xbc9d, 0xae80, 0x6d25, 0x130e, 0x36c5, 0x1, 0x1);
        gbc.writeMem(0x36c5, { 0xcf });
        gbc.writeMem(0xd3f4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xbc9d);
        EXPECT(gbc.pc(), 0xd3f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f4), 0xcb);
        EXPECT(gbc.readMem(0xd3f5), 0xd6);
        // CB D6 0305
        gbc.setState(0x5474, 0x8620, 0x69f0, 0x27d1, 0x4308, 0x37a, 0x0, 0x1);
        gbc.writeMem(0x37a, { 0x56 });
        gbc.writeMem(0x5474, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8620);
        EXPECT(gbc.pc(), 0x5476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0307
        gbc.setState(0xab65, 0xabe5, 0xe610, 0x13f6, 0x9ca, 0xf3b5, 0x0, 0x1);
        gbc.writeMem(0xab65, { 0xcb, 0xd6 });
        gbc.writeMem(0xf3b5, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xabe5);
        EXPECT(gbc.pc(), 0xab67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab65), 0xcb);
        EXPECT(gbc.readMem(0xab66), 0xd6);
        EXPECT(gbc.readMem(0xf3b5), 0x4e);
        // CB D6 0308
        gbc.setState(0xacef, 0x8c91, 0xb730, 0xb229, 0x2e1c, 0xa4f0, 0x1, 0x1);
        gbc.writeMem(0xa4f0, { 0xcf });
        gbc.writeMem(0xacef, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8c91);
        EXPECT(gbc.pc(), 0xacf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4f0), 0xcf);
        EXPECT(gbc.readMem(0xacef), 0xcb);
        EXPECT(gbc.readMem(0xacf0), 0xd6);
        // CB D6 030A
        gbc.setState(0xce10, 0x697f, 0xde90, 0x75fc, 0x8f15, 0xdf2e, 0x1, 0x1);
        gbc.writeMem(0xce10, { 0xcb, 0xd6 });
        gbc.writeMem(0xdf2e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x697f);
        EXPECT(gbc.pc(), 0xce12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce10), 0xcb);
        EXPECT(gbc.readMem(0xce11), 0xd6);
        EXPECT(gbc.readMem(0xdf2e), 0xa6);
        // CB D6 030B
        gbc.setState(0x4eb1, 0x1d82, 0x97e0, 0x61ea, 0x4d8e, 0x8992, 0x1, 0x0);
        gbc.writeMem(0x4eb1, { 0xcb, 0xd6 });
        gbc.writeMem(0x8992, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1d82);
        EXPECT(gbc.pc(), 0x4eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8992), 0x9c);
        // CB D6 030D
        gbc.setState(0xea38, 0x8fae, 0x2950, 0x234a, 0x130f, 0x4b61, 0x1, 0x1);
        gbc.writeMem(0x4b61, { 0xee });
        gbc.writeMem(0xea38, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8fae);
        EXPECT(gbc.pc(), 0xea3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea38), 0xcb);
        EXPECT(gbc.readMem(0xea39), 0xd6);
        // CB D6 030E
        gbc.setState(0x70a1, 0xcad8, 0x1030, 0x114f, 0x8833, 0x935e, 0x0, 0x1);
        gbc.writeMem(0x70a1, { 0xcb, 0xd6 });
        gbc.writeMem(0x935e, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcad8);
        EXPECT(gbc.pc(), 0x70a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x935e), 0x6e);
        // CB D6 030F
        gbc.setState(0x7d37, 0x58ab, 0xf9f0, 0xea30, 0x2579, 0xd67f, 0x1, 0x0);
        gbc.writeMem(0x7d37, { 0xcb, 0xd6 });
        gbc.writeMem(0xd67f, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x58ab);
        EXPECT(gbc.pc(), 0x7d39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd67f), 0xdc);
        // CB D6 0310
        gbc.setState(0xef37, 0x1e0b, 0x3850, 0x8f64, 0xd4b4, 0xb7b1, 0x1, 0x0);
        gbc.writeMem(0xb7b1, { 0xde });
        gbc.writeMem(0xef37, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1e0b);
        EXPECT(gbc.pc(), 0xef39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7b1), 0xde);
        EXPECT(gbc.readMem(0xef37), 0xcb);
        EXPECT(gbc.readMem(0xef38), 0xd6);
        // CB D6 0311
        gbc.setState(0xe39e, 0xb0d0, 0xb4d0, 0x363, 0x47c8, 0xc302, 0x1, 0x0);
        gbc.writeMem(0xc302, { 0x3f });
        gbc.writeMem(0xe39e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb0d0);
        EXPECT(gbc.pc(), 0xe3a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc302), 0x3f);
        EXPECT(gbc.readMem(0xe39e), 0xcb);
        EXPECT(gbc.readMem(0xe39f), 0xd6);
        // CB D6 0312
        gbc.setState(0x38a2, 0xc88d, 0x73c0, 0x8ed8, 0x6a1e, 0xd6df, 0x0, 0x0);
        gbc.writeMem(0x38a2, { 0xcb, 0xd6 });
        gbc.writeMem(0xd6df, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc88d);
        EXPECT(gbc.pc(), 0x38a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6df), 0x86);
        // CB D6 0313
        gbc.setState(0x57ff, 0xa0fc, 0x6c30, 0xdd55, 0xadaa, 0xa509, 0x1, 0x0);
        gbc.writeMem(0x57ff, { 0xcb, 0xd6 });
        gbc.writeMem(0xa509, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa0fc);
        EXPECT(gbc.pc(), 0x5801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa509), 0x1e);
        // CB D6 0314
        gbc.setState(0xd81b, 0x7167, 0xfdc0, 0xc80a, 0x978, 0x1e60, 0x0, 0x0);
        gbc.writeMem(0x1e60, { 0x6f });
        gbc.writeMem(0xd81b, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7167);
        EXPECT(gbc.pc(), 0xd81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81b), 0xcb);
        EXPECT(gbc.readMem(0xd81c), 0xd6);
        // CB D6 0316
        gbc.setState(0x661c, 0x80c7, 0x1c40, 0x46b5, 0xeaf9, 0x37d0, 0x0, 0x1);
        gbc.writeMem(0x37d0, { 0xbf });
        gbc.writeMem(0x661c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x80c7);
        EXPECT(gbc.pc(), 0x661e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0317
        gbc.setState(0x38c3, 0x7a0c, 0x1900, 0xd121, 0xacd7, 0xeb16, 0x1, 0x0);
        gbc.writeMem(0x38c3, { 0xcb, 0xd6 });
        gbc.writeMem(0xeb16, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7a0c);
        EXPECT(gbc.pc(), 0x38c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb16), 0x5d);
        // CB D6 0318
        gbc.setState(0x6dcc, 0xc550, 0xb640, 0xe1f1, 0xa93e, 0x805f, 0x0, 0x1);
        gbc.writeMem(0x6dcc, { 0xcb, 0xd6 });
        gbc.writeMem(0x805f, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc550);
        EXPECT(gbc.pc(), 0x6dce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x805f), 0x77);
        // CB D6 0319
        gbc.setState(0x6e93, 0x347a, 0x5660, 0x8089, 0x701f, 0x3520, 0x0, 0x1);
        gbc.writeMem(0x3520, { 0x27 });
        gbc.writeMem(0x6e93, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x347a);
        EXPECT(gbc.pc(), 0x6e95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 031A
        gbc.setState(0x8a26, 0x3566, 0x69b0, 0xfe14, 0x4537, 0x1abc, 0x1, 0x1);
        gbc.writeMem(0x1abc, { 0xec });
        gbc.writeMem(0x8a26, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3566);
        EXPECT(gbc.pc(), 0x8a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a26), 0xcb);
        EXPECT(gbc.readMem(0x8a27), 0xd6);
        // CB D6 031B
        gbc.setState(0x91ef, 0x6186, 0x4870, 0xa68, 0xf74b, 0xe58f, 0x1, 0x0);
        gbc.writeMem(0x91ef, { 0xcb, 0xd6 });
        gbc.writeMem(0xe58f, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6186);
        EXPECT(gbc.pc(), 0x91f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ef), 0xcb);
        EXPECT(gbc.readMem(0x91f0), 0xd6);
        EXPECT(gbc.readMem(0xe58f), 0x3c);
        // CB D6 031C
        gbc.setState(0x9d0c, 0x7c9b, 0x85c0, 0xcb7a, 0x4981, 0xa16f, 0x1, 0x1);
        gbc.writeMem(0x9d0c, { 0xcb, 0xd6 });
        gbc.writeMem(0xa16f, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7c9b);
        EXPECT(gbc.pc(), 0x9d0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d0c), 0xcb);
        EXPECT(gbc.readMem(0x9d0d), 0xd6);
        EXPECT(gbc.readMem(0xa16f), 0x7);
        // CB D6 031E
        gbc.setState(0x5418, 0xf551, 0x82d0, 0x2386, 0x5324, 0xda95, 0x0, 0x0);
        gbc.writeMem(0x5418, { 0xcb, 0xd6 });
        gbc.writeMem(0xda95, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf551);
        EXPECT(gbc.pc(), 0x541a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda95), 0x4f);
        // CB D6 031F
        gbc.setState(0x81c6, 0xce1e, 0x5080, 0xffae, 0x7871, 0x82f8, 0x0, 0x0);
        gbc.writeMem(0x81c6, { 0xcb, 0xd6 });
        gbc.writeMem(0x82f8, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xce1e);
        EXPECT(gbc.pc(), 0x81c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c6), 0xcb);
        EXPECT(gbc.readMem(0x81c7), 0xd6);
        EXPECT(gbc.readMem(0x82f8), 0xec);
        // CB D6 0320
        gbc.setState(0xbc53, 0xb928, 0x4d90, 0x1a64, 0x9b24, 0xc3ad, 0x1, 0x0);
        gbc.writeMem(0xbc53, { 0xcb, 0xd6 });
        gbc.writeMem(0xc3ad, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb928);
        EXPECT(gbc.pc(), 0xbc55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc53), 0xcb);
        EXPECT(gbc.readMem(0xbc54), 0xd6);
        EXPECT(gbc.readMem(0xc3ad), 0x6d);
        // CB D6 0321
        gbc.setState(0xe9f6, 0xc428, 0xb200, 0x221e, 0x8d2c, 0x8233, 0x1, 0x0);
        gbc.writeMem(0x8233, { 0x99 });
        gbc.writeMem(0xe9f6, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc428);
        EXPECT(gbc.pc(), 0xe9f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8233), 0x9d);
        EXPECT(gbc.readMem(0xe9f6), 0xcb);
        EXPECT(gbc.readMem(0xe9f7), 0xd6);
        // CB D6 0322
        gbc.setState(0x45a0, 0x5f02, 0x1d60, 0x73be, 0x26a, 0x6488, 0x0, 0x0);
        gbc.writeMem(0x45a0, { 0xcb, 0xd6 });
        gbc.writeMem(0x6488, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5f02);
        EXPECT(gbc.pc(), 0x45a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0323
        gbc.setState(0xbb8f, 0xf521, 0x8a50, 0xc29d, 0x3419, 0xd601, 0x1, 0x1);
        gbc.writeMem(0xbb8f, { 0xcb, 0xd6 });
        gbc.writeMem(0xd601, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf521);
        EXPECT(gbc.pc(), 0xbb91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb8f), 0xcb);
        EXPECT(gbc.readMem(0xbb90), 0xd6);
        EXPECT(gbc.readMem(0xd601), 0x87);
        // CB D6 0324
        gbc.setState(0x625c, 0x6bfb, 0xf340, 0x4851, 0xd574, 0xfe60, 0x0, 0x0);
        gbc.writeMem(0x625c, { 0xcb, 0xd6 });
        gbc.writeMem(0xfe60, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6bfb);
        EXPECT(gbc.pc(), 0x625e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe60), 0xff);
        // CB D6 0325
        gbc.setState(0x86e1, 0xa8f3, 0xdb0, 0x4a92, 0xcbea, 0xaca2, 0x1, 0x0);
        gbc.writeMem(0x86e1, { 0xcb, 0xd6 });
        gbc.writeMem(0xaca2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa8f3);
        EXPECT(gbc.pc(), 0x86e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86e1), 0xcb);
        EXPECT(gbc.readMem(0x86e2), 0xd6);
        EXPECT(gbc.readMem(0xaca2), 0xbd);
        // CB D6 0326
        gbc.setState(0xa6d, 0xe1f7, 0x36d0, 0xd4fd, 0xde4c, 0xc189, 0x0, 0x1);
        gbc.writeMem(0xa6d, { 0xcb, 0xd6 });
        gbc.writeMem(0xc189, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe1f7);
        EXPECT(gbc.pc(), 0xa6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc189), 0xf);
        // CB D6 0327
        gbc.setState(0x457, 0xa8a5, 0x5c80, 0xc56f, 0xb6d2, 0xb9b5, 0x0, 0x0);
        gbc.writeMem(0x457, { 0xcb, 0xd6 });
        gbc.writeMem(0xb9b5, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa8a5);
        EXPECT(gbc.pc(), 0x459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b5), 0x9e);
        // CB D6 032A
        gbc.setState(0x1d0d, 0x7449, 0x76d0, 0xc38b, 0x86ae, 0x97fb, 0x0, 0x0);
        gbc.writeMem(0x1d0d, { 0xcb, 0xd6 });
        gbc.writeMem(0x97fb, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7449);
        EXPECT(gbc.pc(), 0x1d0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97fb), 0x55);
        // CB D6 032C
        gbc.setState(0x39b9, 0xb1f7, 0xde30, 0x9069, 0xd1d, 0xe7bc, 0x0, 0x1);
        gbc.writeMem(0x39b9, { 0xcb, 0xd6 });
        gbc.writeMem(0xe7bc, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb1f7);
        EXPECT(gbc.pc(), 0x39bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7bc), 0x27);
        // CB D6 032D
        gbc.setState(0x447d, 0xbad5, 0xdb20, 0x96b3, 0x4947, 0xdce5, 0x0, 0x1);
        gbc.writeMem(0x447d, { 0xcb, 0xd6 });
        gbc.writeMem(0xdce5, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xbad5);
        EXPECT(gbc.pc(), 0x447f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce5), 0x3c);
        // CB D6 032E
        gbc.setState(0xd10e, 0x4326, 0xf0b0, 0x9cb3, 0x6033, 0xe80b, 0x0, 0x0);
        gbc.writeMem(0xd10e, { 0xcb, 0xd6 });
        gbc.writeMem(0xe80b, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4326);
        EXPECT(gbc.pc(), 0xd110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd10e), 0xcb);
        EXPECT(gbc.readMem(0xd10f), 0xd6);
        EXPECT(gbc.readMem(0xe80b), 0xef);
        // CB D6 032F
        gbc.setState(0x467b, 0x826a, 0x16f0, 0x5357, 0x3268, 0xdb96, 0x1, 0x1);
        gbc.writeMem(0x467b, { 0xcb, 0xd6 });
        gbc.writeMem(0xdb96, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x826a);
        EXPECT(gbc.pc(), 0x467d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb96), 0xa4);
        // CB D6 0330
        gbc.setState(0x9d1f, 0x7ae8, 0x4230, 0x3fd3, 0xe561, 0xf7f6, 0x1, 0x0);
        gbc.writeMem(0x9d1f, { 0xcb, 0xd6 });
        gbc.writeMem(0xf7f6, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7ae8);
        EXPECT(gbc.pc(), 0x9d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d1f), 0xcb);
        EXPECT(gbc.readMem(0x9d20), 0xd6);
        EXPECT(gbc.readMem(0xf7f6), 0x56);
        // CB D6 0331
        gbc.setState(0x6827, 0xdcb3, 0x88b0, 0xbaec, 0xcaee, 0xc7d, 0x1, 0x0);
        gbc.writeMem(0xc7d, { 0x6f });
        gbc.writeMem(0x6827, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xdcb3);
        EXPECT(gbc.pc(), 0x6829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0332
        gbc.setState(0x6598, 0xb93, 0xf410, 0x8f49, 0x796e, 0xf2d8, 0x0, 0x0);
        gbc.writeMem(0x6598, { 0xcb, 0xd6 });
        gbc.writeMem(0xf2d8, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb93);
        EXPECT(gbc.pc(), 0x659a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf2d8), 0x87);
        // CB D6 0334
        gbc.setState(0x4ef1, 0x2d94, 0x3d00, 0x3904, 0x101d, 0x3b0f, 0x0, 0x0);
        gbc.writeMem(0x3b0f, { 0x2c });
        gbc.writeMem(0x4ef1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2d94);
        EXPECT(gbc.pc(), 0x4ef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0335
        gbc.setState(0x1335, 0xae2e, 0x9a80, 0x7a5f, 0x5a79, 0xf5f, 0x1, 0x1);
        gbc.writeMem(0xf5f, { 0x7c });
        gbc.writeMem(0x1335, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xae2e);
        EXPECT(gbc.pc(), 0x1337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0336
        gbc.setState(0xb238, 0xa7d3, 0x5800, 0x4ab, 0xfa6b, 0x98f2, 0x0, 0x1);
        gbc.writeMem(0x98f2, { 0xe7 });
        gbc.writeMem(0xb238, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa7d3);
        EXPECT(gbc.pc(), 0xb23a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f2), 0xe7);
        EXPECT(gbc.readMem(0xb238), 0xcb);
        EXPECT(gbc.readMem(0xb239), 0xd6);
        // CB D6 0337
        gbc.setState(0xd8, 0xdf97, 0xee20, 0xc009, 0x9819, 0x5a64, 0x1, 0x0);
        gbc.writeMem(0xd8, { 0xcb, 0xd6 });
        gbc.writeMem(0x5a64, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdf97);
        EXPECT(gbc.pc(), 0xda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0338
        gbc.setState(0xaaeb, 0x7ecc, 0xff30, 0x30d5, 0x4d0, 0xb352, 0x0, 0x1);
        gbc.writeMem(0xaaeb, { 0xcb, 0xd6 });
        gbc.writeMem(0xb352, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7ecc);
        EXPECT(gbc.pc(), 0xaaed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaeb), 0xcb);
        EXPECT(gbc.readMem(0xaaec), 0xd6);
        EXPECT(gbc.readMem(0xb352), 0x4c);
        // CB D6 033A
        gbc.setState(0xa94f, 0x145b, 0xe560, 0xaf3b, 0xe579, 0x1865, 0x0, 0x1);
        gbc.writeMem(0x1865, { 0xf7 });
        gbc.writeMem(0xa94f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x145b);
        EXPECT(gbc.pc(), 0xa951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94f), 0xcb);
        EXPECT(gbc.readMem(0xa950), 0xd6);
        // CB D6 033B
        gbc.setState(0x31c0, 0x8d9a, 0x5d30, 0xc2d, 0xe474, 0xa2ff, 0x0, 0x0);
        gbc.writeMem(0x31c0, { 0xcb, 0xd6 });
        gbc.writeMem(0xa2ff, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8d9a);
        EXPECT(gbc.pc(), 0x31c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ff), 0x76);
        // CB D6 033C
        gbc.setState(0xcfe7, 0x5aff, 0x4c40, 0x1d95, 0xeafd, 0x74d, 0x0, 0x1);
        gbc.writeMem(0x74d, { 0x26 });
        gbc.writeMem(0xcfe7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5aff);
        EXPECT(gbc.pc(), 0xcfe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe7), 0xcb);
        EXPECT(gbc.readMem(0xcfe8), 0xd6);
        // CB D6 033D
        gbc.setState(0xbbe7, 0x7038, 0x73f0, 0xd1fd, 0x37ec, 0xc6b2, 0x1, 0x0);
        gbc.writeMem(0xbbe7, { 0xcb, 0xd6 });
        gbc.writeMem(0xc6b2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7038);
        EXPECT(gbc.pc(), 0xbbe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe7), 0xcb);
        EXPECT(gbc.readMem(0xbbe8), 0xd6);
        EXPECT(gbc.readMem(0xc6b2), 0x4);
        // CB D6 033E
        gbc.setState(0x1c06, 0xfab1, 0x28c0, 0x373b, 0xc379, 0xe57a, 0x1, 0x1);
        gbc.writeMem(0x1c06, { 0xcb, 0xd6 });
        gbc.writeMem(0xe57a, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xfab1);
        EXPECT(gbc.pc(), 0x1c08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe57a), 0x24);
        // CB D6 033F
        gbc.setState(0x3fea, 0x516d, 0xe60, 0x8031, 0x4fab, 0xce2f, 0x1, 0x1);
        gbc.writeMem(0x3fea, { 0xcb, 0xd6 });
        gbc.writeMem(0xce2f, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x516d);
        EXPECT(gbc.pc(), 0x3fec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce2f), 0x44);
        // CB D6 0340
        gbc.setState(0x7e6d, 0x5a6f, 0x75d0, 0xe455, 0x3b19, 0x1cd, 0x0, 0x0);
        gbc.writeMem(0x1cd, { 0x9d });
        gbc.writeMem(0x7e6d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5a6f);
        EXPECT(gbc.pc(), 0x7e6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0341
        gbc.setState(0xae99, 0x2329, 0xc20, 0x464d, 0x157a, 0xd8f7, 0x1, 0x1);
        gbc.writeMem(0xae99, { 0xcb, 0xd6 });
        gbc.writeMem(0xd8f7, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2329);
        EXPECT(gbc.pc(), 0xae9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae99), 0xcb);
        EXPECT(gbc.readMem(0xae9a), 0xd6);
        EXPECT(gbc.readMem(0xd8f7), 0x44);
        // CB D6 0342
        gbc.setState(0x4ebd, 0x2557, 0x7c10, 0x90da, 0x338a, 0x8a82, 0x1, 0x0);
        gbc.writeMem(0x4ebd, { 0xcb, 0xd6 });
        gbc.writeMem(0x8a82, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2557);
        EXPECT(gbc.pc(), 0x4ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a82), 0x7e);
        // CB D6 0343
        gbc.setState(0x7a5c, 0x9d3, 0xeba0, 0xa5a1, 0x5f1c, 0xb3f9, 0x0, 0x0);
        gbc.writeMem(0x7a5c, { 0xcb, 0xd6 });
        gbc.writeMem(0xb3f9, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9d3);
        EXPECT(gbc.pc(), 0x7a5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f9), 0x25);
        // CB D6 0344
        gbc.setState(0xabc5, 0x49ea, 0xcfc0, 0x495, 0xe342, 0x839d, 0x1, 0x0);
        gbc.writeMem(0x839d, { 0xfa });
        gbc.writeMem(0xabc5, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x49ea);
        EXPECT(gbc.pc(), 0xabc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839d), 0xfe);
        EXPECT(gbc.readMem(0xabc5), 0xcb);
        EXPECT(gbc.readMem(0xabc6), 0xd6);
        // CB D6 0345
        gbc.setState(0x3813, 0x2b26, 0xa960, 0x42cb, 0x849f, 0xba61, 0x0, 0x1);
        gbc.writeMem(0x3813, { 0xcb, 0xd6 });
        gbc.writeMem(0xba61, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2b26);
        EXPECT(gbc.pc(), 0x3815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba61), 0xb6);
        // CB D6 0346
        gbc.setState(0x3bf8, 0x235e, 0xbb30, 0xb130, 0x33a2, 0xa4b5, 0x1, 0x1);
        gbc.writeMem(0x3bf8, { 0xcb, 0xd6 });
        gbc.writeMem(0xa4b5, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x235e);
        EXPECT(gbc.pc(), 0x3bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4b5), 0x3c);
        // CB D6 034A
        gbc.setState(0x7cc1, 0xb15c, 0x62e0, 0x7d71, 0xa7c7, 0x1f78, 0x1, 0x0);
        gbc.writeMem(0x1f78, { 0x1e });
        gbc.writeMem(0x7cc1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb15c);
        EXPECT(gbc.pc(), 0x7cc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 034B
        gbc.setState(0x9127, 0xfdce, 0x9650, 0x252c, 0xb08d, 0xfb24, 0x0, 0x0);
        gbc.writeMem(0x9127, { 0xcb, 0xd6 });
        gbc.writeMem(0xfb24, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfdce);
        EXPECT(gbc.pc(), 0x9129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9127), 0xcb);
        EXPECT(gbc.readMem(0x9128), 0xd6);
        EXPECT(gbc.readMem(0xfb24), 0x74);
        // CB D6 034C
        gbc.setState(0xc5c1, 0x8a57, 0xcfa0, 0x793f, 0xecd, 0xcf02, 0x1, 0x0);
        gbc.writeMem(0xc5c1, { 0xcb, 0xd6 });
        gbc.writeMem(0xcf02, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8a57);
        EXPECT(gbc.pc(), 0xc5c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c1), 0xcb);
        EXPECT(gbc.readMem(0xc5c2), 0xd6);
        EXPECT(gbc.readMem(0xcf02), 0xd7);
        // CB D6 034D
        gbc.setState(0x3a71, 0x54db, 0x3d60, 0x2ef7, 0x6029, 0x62c4, 0x1, 0x1);
        gbc.writeMem(0x3a71, { 0xcb, 0xd6 });
        gbc.writeMem(0x62c4, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x54db);
        EXPECT(gbc.pc(), 0x3a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 034E
        gbc.setState(0xbf35, 0xcb8, 0xb470, 0xe57c, 0xcba2, 0x2241, 0x0, 0x0);
        gbc.writeMem(0x2241, { 0x1e });
        gbc.writeMem(0xbf35, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcb8);
        EXPECT(gbc.pc(), 0xbf37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf35), 0xcb);
        EXPECT(gbc.readMem(0xbf36), 0xd6);
        // CB D6 034F
        gbc.setState(0x179a, 0x13f0, 0x5620, 0x191e, 0x5e6a, 0xb57e, 0x1, 0x0);
        gbc.writeMem(0x179a, { 0xcb, 0xd6 });
        gbc.writeMem(0xb57e, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x13f0);
        EXPECT(gbc.pc(), 0x179c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57e), 0x3e);
        // CB D6 0350
        gbc.setState(0xa3c2, 0xd35c, 0x9e30, 0xcbd7, 0xdb0d, 0xe536, 0x1, 0x0);
        gbc.writeMem(0xa3c2, { 0xcb, 0xd6 });
        gbc.writeMem(0xe536, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd35c);
        EXPECT(gbc.pc(), 0xa3c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3c2), 0xcb);
        EXPECT(gbc.readMem(0xa3c3), 0xd6);
        EXPECT(gbc.readMem(0xe536), 0xf4);
        // CB D6 0351
        gbc.setState(0xa910, 0x744f, 0xa320, 0x5ca5, 0xd142, 0xfcb7, 0x1, 0x1);
        gbc.writeMem(0xa910, { 0xcb, 0xd6 });
        gbc.writeMem(0xfcb7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x744f);
        EXPECT(gbc.pc(), 0xa912);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa910), 0xcb);
        EXPECT(gbc.readMem(0xa911), 0xd6);
        EXPECT(gbc.readMem(0xfcb7), 0x6f);
        // CB D6 0352
        gbc.setState(0xbf6c, 0x4d40, 0xd360, 0x7a07, 0x4756, 0xecc5, 0x0, 0x0);
        gbc.writeMem(0xbf6c, { 0xcb, 0xd6 });
        gbc.writeMem(0xecc5, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4d40);
        EXPECT(gbc.pc(), 0xbf6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf6c), 0xcb);
        EXPECT(gbc.readMem(0xbf6d), 0xd6);
        EXPECT(gbc.readMem(0xecc5), 0xed);
        // CB D6 0353
        gbc.setState(0xe1ef, 0x5c2b, 0xe8b0, 0x8e83, 0x95cc, 0x5ed2, 0x1, 0x1);
        gbc.writeMem(0x5ed2, { 0xcd });
        gbc.writeMem(0xe1ef, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5c2b);
        EXPECT(gbc.pc(), 0xe1f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1ef), 0xcb);
        EXPECT(gbc.readMem(0xe1f0), 0xd6);
        // CB D6 0354
        gbc.setState(0x222a, 0x97a8, 0x3da0, 0x24e7, 0x910b, 0x4833, 0x1, 0x1);
        gbc.writeMem(0x222a, { 0xcb, 0xd6 });
        gbc.writeMem(0x4833, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x97a8);
        EXPECT(gbc.pc(), 0x222c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0355
        gbc.setState(0x34dc, 0x6a31, 0x7840, 0x6e0f, 0xe3e, 0xf675, 0x1, 0x1);
        gbc.writeMem(0x34dc, { 0xcb, 0xd6 });
        gbc.writeMem(0xf675, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6a31);
        EXPECT(gbc.pc(), 0x34de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf675), 0xac);
        // CB D6 0356
        gbc.setState(0x6ba1, 0x6341, 0xa190, 0x57e0, 0x7e00, 0xe251, 0x1, 0x0);
        gbc.writeMem(0x6ba1, { 0xcb, 0xd6 });
        gbc.writeMem(0xe251, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6341);
        EXPECT(gbc.pc(), 0x6ba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe251), 0x3d);
        // CB D6 0357
        gbc.setState(0x1e45, 0xbc6, 0xf4f0, 0xe8a2, 0xf575, 0xc39e, 0x0, 0x1);
        gbc.writeMem(0x1e45, { 0xcb, 0xd6 });
        gbc.writeMem(0xc39e, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbc6);
        EXPECT(gbc.pc(), 0x1e47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc39e), 0x87);
        // CB D6 0358
        gbc.setState(0x2349, 0x4580, 0xaa10, 0x6c42, 0xbeda, 0xc3d0, 0x0, 0x0);
        gbc.writeMem(0x2349, { 0xcb, 0xd6 });
        gbc.writeMem(0xc3d0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4580);
        EXPECT(gbc.pc(), 0x234b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3d0), 0x7);
        // CB D6 0359
        gbc.setState(0xd2dd, 0x7385, 0x6ac0, 0x3547, 0xfe40, 0xf9b6, 0x0, 0x0);
        gbc.writeMem(0xd2dd, { 0xcb, 0xd6 });
        gbc.writeMem(0xf9b6, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7385);
        EXPECT(gbc.pc(), 0xd2df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2dd), 0xcb);
        EXPECT(gbc.readMem(0xd2de), 0xd6);
        EXPECT(gbc.readMem(0xf9b6), 0xad);
        // CB D6 035C
        gbc.setState(0x7a5c, 0x2d6f, 0xb580, 0x9acc, 0x2fbe, 0x914a, 0x1, 0x1);
        gbc.writeMem(0x7a5c, { 0xcb, 0xd6 });
        gbc.writeMem(0x914a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2d6f);
        EXPECT(gbc.pc(), 0x7a5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914a), 0xa5);
        // CB D6 035D
        gbc.setState(0xbab7, 0x417b, 0x1920, 0xcd4a, 0xf331, 0xaaba, 0x0, 0x0);
        gbc.writeMem(0xaaba, { 0x56 });
        gbc.writeMem(0xbab7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x417b);
        EXPECT(gbc.pc(), 0xbab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaba), 0x56);
        EXPECT(gbc.readMem(0xbab7), 0xcb);
        EXPECT(gbc.readMem(0xbab8), 0xd6);
        // CB D6 035E
        gbc.setState(0xea51, 0x9a70, 0x9540, 0xf68, 0x3dbc, 0x5c04, 0x0, 0x1);
        gbc.writeMem(0x5c04, { 0xb6 });
        gbc.writeMem(0xea51, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9a70);
        EXPECT(gbc.pc(), 0xea53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea51), 0xcb);
        EXPECT(gbc.readMem(0xea52), 0xd6);
        // CB D6 035F
        gbc.setState(0x1f71, 0xee0e, 0x1b70, 0xab07, 0x24f, 0xe1aa, 0x0, 0x1);
        gbc.writeMem(0x1f71, { 0xcb, 0xd6 });
        gbc.writeMem(0xe1aa, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xee0e);
        EXPECT(gbc.pc(), 0x1f73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1aa), 0x65);
        // CB D6 0362
        gbc.setState(0x7c7, 0x6332, 0x9220, 0x2716, 0xd965, 0x744f, 0x0, 0x1);
        gbc.writeMem(0x7c7, { 0xcb, 0xd6 });
        gbc.writeMem(0x744f, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6332);
        EXPECT(gbc.pc(), 0x7c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0363
        gbc.setState(0xb1ce, 0x4543, 0xb8f0, 0xa004, 0xbe5, 0x508f, 0x0, 0x0);
        gbc.writeMem(0x508f, { 0x55 });
        gbc.writeMem(0xb1ce, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4543);
        EXPECT(gbc.pc(), 0xb1d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1ce), 0xcb);
        EXPECT(gbc.readMem(0xb1cf), 0xd6);
        // CB D6 0364
        gbc.setState(0xaab3, 0xc2ac, 0xf400, 0x141, 0xc9fa, 0xa8b7, 0x0, 0x0);
        gbc.writeMem(0xa8b7, { 0x6d });
        gbc.writeMem(0xaab3, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc2ac);
        EXPECT(gbc.pc(), 0xaab5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b7), 0x6d);
        EXPECT(gbc.readMem(0xaab3), 0xcb);
        EXPECT(gbc.readMem(0xaab4), 0xd6);
        // CB D6 0365
        gbc.setState(0x4f26, 0xd1b5, 0x200, 0x8011, 0x3e24, 0xda00, 0x1, 0x0);
        gbc.writeMem(0x4f26, { 0xcb, 0xd6 });
        gbc.writeMem(0xda00, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd1b5);
        EXPECT(gbc.pc(), 0x4f28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda00), 0xa6);
        // CB D6 0366
        gbc.setState(0x153b, 0x9191, 0x47c0, 0xaadb, 0xe4e7, 0xb604, 0x0, 0x1);
        gbc.writeMem(0x153b, { 0xcb, 0xd6 });
        gbc.writeMem(0xb604, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9191);
        EXPECT(gbc.pc(), 0x153d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb604), 0x5f);
        // CB D6 0367
        gbc.setState(0xb5c3, 0xc12a, 0xa330, 0x5975, 0x8d34, 0x4599, 0x0, 0x1);
        gbc.writeMem(0x4599, { 0x55 });
        gbc.writeMem(0xb5c3, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc12a);
        EXPECT(gbc.pc(), 0xb5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c3), 0xcb);
        EXPECT(gbc.readMem(0xb5c4), 0xd6);
        // CB D6 0369
        gbc.setState(0x50aa, 0xc08e, 0xc4f0, 0x7e1d, 0xa06, 0x16a, 0x1, 0x0);
        gbc.writeMem(0x16a, { 0xe6 });
        gbc.writeMem(0x50aa, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc08e);
        EXPECT(gbc.pc(), 0x50ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 036C
        gbc.setState(0x6105, 0xab35, 0x9f70, 0x4294, 0x80fa, 0x3ffb, 0x0, 0x0);
        gbc.writeMem(0x3ffb, { 0xc7 });
        gbc.writeMem(0x6105, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xab35);
        EXPECT(gbc.pc(), 0x6107);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 036D
        gbc.setState(0xaecd, 0x734b, 0xa660, 0xb26a, 0x6f33, 0xaa11, 0x0, 0x0);
        gbc.writeMem(0xaa11, { 0xc6 });
        gbc.writeMem(0xaecd, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x734b);
        EXPECT(gbc.pc(), 0xaecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa11), 0xc6);
        EXPECT(gbc.readMem(0xaecd), 0xcb);
        EXPECT(gbc.readMem(0xaece), 0xd6);
        // CB D6 036F
        gbc.setState(0xc33f, 0xac5b, 0x55d0, 0x3730, 0x241b, 0xf618, 0x1, 0x0);
        gbc.writeMem(0xc33f, { 0xcb, 0xd6 });
        gbc.writeMem(0xf618, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xac5b);
        EXPECT(gbc.pc(), 0xc341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33f), 0xcb);
        EXPECT(gbc.readMem(0xc340), 0xd6);
        EXPECT(gbc.readMem(0xf618), 0xf);
        // CB D6 0370
        gbc.setState(0x291b, 0x9432, 0x6120, 0xebdd, 0x7c6f, 0xfab7, 0x1, 0x1);
        gbc.writeMem(0x291b, { 0xcb, 0xd6 });
        gbc.writeMem(0xfab7, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9432);
        EXPECT(gbc.pc(), 0x291d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfab7), 0x4e);
        // CB D6 0371
        gbc.setState(0xdba9, 0xc2c3, 0x3ac0, 0x704, 0xb32f, 0xf7e6, 0x0, 0x1);
        gbc.writeMem(0xdba9, { 0xcb, 0xd6 });
        gbc.writeMem(0xf7e6, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc2c3);
        EXPECT(gbc.pc(), 0xdbab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba9), 0xcb);
        EXPECT(gbc.readMem(0xdbaa), 0xd6);
        EXPECT(gbc.readMem(0xf7e6), 0xc5);
        // CB D6 0372
        gbc.setState(0xbbdf, 0x1bf4, 0xdab0, 0x6497, 0xdd04, 0xa71c, 0x0, 0x1);
        gbc.writeMem(0xa71c, { 0x5e });
        gbc.writeMem(0xbbdf, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1bf4);
        EXPECT(gbc.pc(), 0xbbe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa71c), 0x5e);
        EXPECT(gbc.readMem(0xbbdf), 0xcb);
        EXPECT(gbc.readMem(0xbbe0), 0xd6);
        // CB D6 0374
        gbc.setState(0x362c, 0x7e4d, 0x39a0, 0x4158, 0xb390, 0xc50, 0x1, 0x1);
        gbc.writeMem(0xc50, { 0xdf });
        gbc.writeMem(0x362c, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7e4d);
        EXPECT(gbc.pc(), 0x362e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0375
        gbc.setState(0x3703, 0x9fc0, 0x700, 0xdd27, 0x963a, 0xa435, 0x1, 0x1);
        gbc.writeMem(0x3703, { 0xcb, 0xd6 });
        gbc.writeMem(0xa435, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9fc0);
        EXPECT(gbc.pc(), 0x3705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa435), 0xcf);
        // CB D6 0376
        gbc.setState(0x284f, 0xf879, 0x64b0, 0xbb6d, 0x1c03, 0xd262, 0x1, 0x0);
        gbc.writeMem(0x284f, { 0xcb, 0xd6 });
        gbc.writeMem(0xd262, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf879);
        EXPECT(gbc.pc(), 0x2851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd262), 0x2c);
        // CB D6 0377
        gbc.setState(0x9d6f, 0x978e, 0x14f0, 0x3dd2, 0xc565, 0x38d8, 0x1, 0x0);
        gbc.writeMem(0x38d8, { 0x35 });
        gbc.writeMem(0x9d6f, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x978e);
        EXPECT(gbc.pc(), 0x9d71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d6f), 0xcb);
        EXPECT(gbc.readMem(0x9d70), 0xd6);
        // CB D6 0378
        gbc.setState(0xa3e9, 0xcd31, 0xd220, 0x6239, 0x2cf1, 0x53a1, 0x0, 0x1);
        gbc.writeMem(0x53a1, { 0xe });
        gbc.writeMem(0xa3e9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xcd31);
        EXPECT(gbc.pc(), 0xa3eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e9), 0xcb);
        EXPECT(gbc.readMem(0xa3ea), 0xd6);
        // CB D6 0379
        gbc.setState(0xdde2, 0x1a28, 0x2a0, 0xadf6, 0xe13f, 0xc0a3, 0x0, 0x1);
        gbc.writeMem(0xc0a3, { 0xf0 });
        gbc.writeMem(0xdde2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1a28);
        EXPECT(gbc.pc(), 0xdde4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a3), 0xf4);
        EXPECT(gbc.readMem(0xdde2), 0xcb);
        EXPECT(gbc.readMem(0xdde3), 0xd6);
        // CB D6 037A
        gbc.setState(0x14a, 0x65fb, 0x740, 0x334c, 0xef10, 0x80e0, 0x0, 0x0);
        gbc.writeMem(0x14a, { 0xcb, 0xd6 });
        gbc.writeMem(0x80e0, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x65fb);
        EXPECT(gbc.pc(), 0x14c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e0), 0x7c);
        // CB D6 037B
        gbc.setState(0xd3ce, 0xa339, 0x4c0, 0x1947, 0x3a3b, 0xec47, 0x1, 0x0);
        gbc.writeMem(0xd3ce, { 0xcb, 0xd6 });
        gbc.writeMem(0xec47, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa339);
        EXPECT(gbc.pc(), 0xd3d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ce), 0xcb);
        EXPECT(gbc.readMem(0xd3cf), 0xd6);
        EXPECT(gbc.readMem(0xec47), 0x37);
        // CB D6 037C
        gbc.setState(0xd7a4, 0xb3a6, 0x9850, 0x4fe1, 0x5a68, 0xc61c, 0x0, 0x0);
        gbc.writeMem(0xc61c, { 0xe4 });
        gbc.writeMem(0xd7a4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb3a6);
        EXPECT(gbc.pc(), 0xd7a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc61c), 0xe4);
        EXPECT(gbc.readMem(0xd7a4), 0xcb);
        EXPECT(gbc.readMem(0xd7a5), 0xd6);
        // CB D6 037E
        gbc.setState(0x1262, 0xa006, 0xea40, 0x4d7f, 0x760f, 0x2d5c, 0x0, 0x0);
        gbc.writeMem(0x1262, { 0xcb, 0xd6 });
        gbc.writeMem(0x2d5c, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa006);
        EXPECT(gbc.pc(), 0x1264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 037F
        gbc.setState(0xdf88, 0xdef8, 0x64c0, 0x788d, 0xaf48, 0x49ac, 0x1, 0x1);
        gbc.writeMem(0x49ac, { 0xcf });
        gbc.writeMem(0xdf88, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdef8);
        EXPECT(gbc.pc(), 0xdf8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf88), 0xcb);
        EXPECT(gbc.readMem(0xdf89), 0xd6);
        // CB D6 0380
        gbc.setState(0xc4d, 0x18a5, 0xc690, 0xf3c8, 0x520c, 0x68b0, 0x1, 0x0);
        gbc.writeMem(0xc4d, { 0xcb, 0xd6 });
        gbc.writeMem(0x68b0, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x18a5);
        EXPECT(gbc.pc(), 0xc4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 0382
        gbc.setState(0x2d8e, 0x2494, 0x8dc0, 0xdabf, 0xabc4, 0x28f, 0x1, 0x1);
        gbc.writeMem(0x28f, { 0x96 });
        gbc.writeMem(0x2d8e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2494);
        EXPECT(gbc.pc(), 0x2d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0383
        gbc.setState(0x4073, 0xccdf, 0x6980, 0xb569, 0x79a, 0xb666, 0x0, 0x0);
        gbc.writeMem(0x4073, { 0xcb, 0xd6 });
        gbc.writeMem(0xb666, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xccdf);
        EXPECT(gbc.pc(), 0x4075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb666), 0x2f);
        // CB D6 0385
        gbc.setState(0x7401, 0xcd9a, 0x2400, 0x370d, 0x4c2, 0x4be5, 0x1, 0x0);
        gbc.writeMem(0x4be5, { 0xe6 });
        gbc.writeMem(0x7401, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcd9a);
        EXPECT(gbc.pc(), 0x7403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 0388
        gbc.setState(0xd6c9, 0xb13d, 0x8330, 0xae66, 0xeb2a, 0x8700, 0x1, 0x0);
        gbc.writeMem(0x8700, { 0x98 });
        gbc.writeMem(0xd6c9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb13d);
        EXPECT(gbc.pc(), 0xd6cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8700), 0x9c);
        EXPECT(gbc.readMem(0xd6c9), 0xcb);
        EXPECT(gbc.readMem(0xd6ca), 0xd6);
        // CB D6 0389
        gbc.setState(0xacbf, 0xdce, 0x71d0, 0x2a33, 0x2a7c, 0x4bb0, 0x0, 0x0);
        gbc.writeMem(0x4bb0, { 0x46 });
        gbc.writeMem(0xacbf, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdce);
        EXPECT(gbc.pc(), 0xacc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacbf), 0xcb);
        EXPECT(gbc.readMem(0xacc0), 0xd6);
        // CB D6 038C
        gbc.setState(0x6f7a, 0xe701, 0xfc70, 0xa3eb, 0x5278, 0x1867, 0x1, 0x0);
        gbc.writeMem(0x1867, { 0x16 });
        gbc.writeMem(0x6f7a, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe701);
        EXPECT(gbc.pc(), 0x6f7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 038D
        gbc.setState(0xc4d3, 0xcfca, 0x8df0, 0x5bed, 0xc090, 0xcb65, 0x0, 0x0);
        gbc.writeMem(0xc4d3, { 0xcb, 0xd6 });
        gbc.writeMem(0xcb65, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xcfca);
        EXPECT(gbc.pc(), 0xc4d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4d3), 0xcb);
        EXPECT(gbc.readMem(0xc4d4), 0xd6);
        EXPECT(gbc.readMem(0xcb65), 0x16);
        // CB D6 038E
        gbc.setState(0x5de3, 0x56a1, 0x3c70, 0x6353, 0x4fe1, 0x88fc, 0x0, 0x0);
        gbc.writeMem(0x5de3, { 0xcb, 0xd6 });
        gbc.writeMem(0x88fc, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x56a1);
        EXPECT(gbc.pc(), 0x5de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88fc), 0xc7);
        // CB D6 038F
        gbc.setState(0x36b, 0x165f, 0xae00, 0x750d, 0x482f, 0xbe0d, 0x0, 0x0);
        gbc.writeMem(0x36b, { 0xcb, 0xd6 });
        gbc.writeMem(0xbe0d, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x165f);
        EXPECT(gbc.pc(), 0x36d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe0d), 0x8d);
        // CB D6 0392
        gbc.setState(0x4055, 0x42da, 0xf430, 0xb322, 0xad83, 0x9f4c, 0x0, 0x0);
        gbc.writeMem(0x4055, { 0xcb, 0xd6 });
        gbc.writeMem(0x9f4c, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x42da);
        EXPECT(gbc.pc(), 0x4057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f4c), 0x35);
        // CB D6 0394
        gbc.setState(0x855e, 0x8479, 0xd2a0, 0xaf9e, 0xc7c, 0x5fc3, 0x0, 0x1);
        gbc.writeMem(0x5fc3, { 0xb6 });
        gbc.writeMem(0x855e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8479);
        EXPECT(gbc.pc(), 0x8560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x855e), 0xcb);
        EXPECT(gbc.readMem(0x855f), 0xd6);
        // CB D6 0395
        gbc.setState(0xbcb, 0x3fd8, 0x3400, 0x247d, 0xf29f, 0xbb3a, 0x1, 0x0);
        gbc.writeMem(0xbcb, { 0xcb, 0xd6 });
        gbc.writeMem(0xbb3a, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3fd8);
        EXPECT(gbc.pc(), 0xbcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3a), 0x9c);
        // CB D6 0396
        gbc.setState(0xdff0, 0x892a, 0x8960, 0x6bb5, 0xff41, 0xe0c0, 0x1, 0x1);
        gbc.writeMem(0xdff0, { 0xcb, 0xd6 });
        gbc.writeMem(0xe0c0, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x892a);
        EXPECT(gbc.pc(), 0xdff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff0), 0xcb);
        EXPECT(gbc.readMem(0xdff1), 0xd6);
        EXPECT(gbc.readMem(0xe0c0), 0x44);
        // CB D6 0399
        gbc.setState(0xce54, 0xf0fc, 0xa080, 0xe9e6, 0x6b7b, 0xe38f, 0x1, 0x1);
        gbc.writeMem(0xce54, { 0xcb, 0xd6 });
        gbc.writeMem(0xe38f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf0fc);
        EXPECT(gbc.pc(), 0xce56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce54), 0xcb);
        EXPECT(gbc.readMem(0xce55), 0xd6);
        EXPECT(gbc.readMem(0xe38f), 0xad);
        // CB D6 039A
        gbc.setState(0x3afb, 0x2d35, 0xfee0, 0x344, 0x9bce, 0x3d61, 0x0, 0x1);
        gbc.writeMem(0x3afb, { 0xcb, 0xd6 });
        gbc.writeMem(0x3d61, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2d35);
        EXPECT(gbc.pc(), 0x3afd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 039B
        gbc.setState(0x6d31, 0xdf2f, 0xb3d0, 0x2889, 0x51ea, 0xf5, 0x1, 0x0);
        gbc.writeMem(0xf5, { 0xbd });
        gbc.writeMem(0x6d31, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdf2f);
        EXPECT(gbc.pc(), 0x6d33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 039C
        gbc.setState(0x2ba7, 0xa5ad, 0xcc90, 0x14a0, 0xb67f, 0xfd69, 0x1, 0x1);
        gbc.writeMem(0x2ba7, { 0xcb, 0xd6 });
        gbc.writeMem(0xfd69, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa5ad);
        EXPECT(gbc.pc(), 0x2ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd69), 0xcc);
        // CB D6 039D
        gbc.setState(0x5bde, 0x22e4, 0x38b0, 0xb2ae, 0xd561, 0xca49, 0x1, 0x1);
        gbc.writeMem(0x5bde, { 0xcb, 0xd6 });
        gbc.writeMem(0xca49, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x22e4);
        EXPECT(gbc.pc(), 0x5be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca49), 0xfd);
        // CB D6 039E
        gbc.setState(0x41d2, 0x53f0, 0x92f0, 0x89cd, 0x1902, 0xe69b, 0x1, 0x0);
        gbc.writeMem(0x41d2, { 0xcb, 0xd6 });
        gbc.writeMem(0xe69b, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x53f0);
        EXPECT(gbc.pc(), 0x41d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe69b), 0x46);
        // CB D6 03A0
        gbc.setState(0x4a7, 0x327b, 0xa90, 0xb841, 0x575b, 0xa4dd, 0x1, 0x1);
        gbc.writeMem(0x4a7, { 0xcb, 0xd6 });
        gbc.writeMem(0xa4dd, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x327b);
        EXPECT(gbc.pc(), 0x4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4dd), 0x65);
        // CB D6 03A1
        gbc.setState(0x2196, 0xd443, 0x2100, 0xe058, 0x3dde, 0xff1c, 0x1, 0x1);
        gbc.writeMem(0x2196, { 0xcb, 0xd6 });
        gbc.writeMem(0xff1c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd443);
        EXPECT(gbc.pc(), 0x2198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff1c), 0x94);
        // CB D6 03A2
        gbc.setState(0x39d7, 0xb173, 0xe160, 0xca0, 0x32eb, 0x7c49, 0x1, 0x0);
        gbc.writeMem(0x39d7, { 0xcb, 0xd6 });
        gbc.writeMem(0x7c49, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb173);
        EXPECT(gbc.pc(), 0x39d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 03A3
        gbc.setState(0x6a26, 0xaef0, 0xcef0, 0x8de1, 0x52f1, 0xfa54, 0x1, 0x1);
        gbc.writeMem(0x6a26, { 0xcb, 0xd6 });
        gbc.writeMem(0xfa54, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xaef0);
        EXPECT(gbc.pc(), 0x6a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa54), 0x54);
        // CB D6 03A4
        gbc.setState(0xb0d4, 0xda8, 0xf9d0, 0xe562, 0xfd82, 0x82ed, 0x1, 0x1);
        gbc.writeMem(0x82ed, { 0xfb });
        gbc.writeMem(0xb0d4, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xda8);
        EXPECT(gbc.pc(), 0xb0d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ed), 0xff);
        EXPECT(gbc.readMem(0xb0d4), 0xcb);
        EXPECT(gbc.readMem(0xb0d5), 0xd6);
        // CB D6 03A5
        gbc.setState(0xa9f3, 0xf49b, 0x1300, 0x68af, 0x4f09, 0xca17, 0x0, 0x1);
        gbc.writeMem(0xa9f3, { 0xcb, 0xd6 });
        gbc.writeMem(0xca17, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf49b);
        EXPECT(gbc.pc(), 0xa9f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9f3), 0xcb);
        EXPECT(gbc.readMem(0xa9f4), 0xd6);
        EXPECT(gbc.readMem(0xca17), 0x3e);
        // CB D6 03A6
        gbc.setState(0x6775, 0xe4b1, 0xbfa0, 0x18f, 0x47e8, 0x280e, 0x0, 0x1);
        gbc.writeMem(0x280e, { 0x4f });
        gbc.writeMem(0x6775, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe4b1);
        EXPECT(gbc.pc(), 0x6777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 03A7
        gbc.setState(0x4064, 0x99ae, 0x9030, 0x845d, 0x5621, 0xc524, 0x1, 0x0);
        gbc.writeMem(0x4064, { 0xcb, 0xd6 });
        gbc.writeMem(0xc524, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x99ae);
        EXPECT(gbc.pc(), 0x4066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc524), 0x95);
        // CB D6 03A8
        gbc.setState(0xcbf4, 0x9b94, 0x50f0, 0x90f5, 0x96bf, 0xe18f, 0x1, 0x0);
        gbc.writeMem(0xcbf4, { 0xcb, 0xd6 });
        gbc.writeMem(0xe18f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9b94);
        EXPECT(gbc.pc(), 0xcbf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf4), 0xcb);
        EXPECT(gbc.readMem(0xcbf5), 0xd6);
        EXPECT(gbc.readMem(0xe18f), 0x4f);
        // CB D6 03AA
        gbc.setState(0x2be9, 0x2fb2, 0xc110, 0x28ba, 0xc9c9, 0x2b59, 0x0, 0x1);
        gbc.writeMem(0x2b59, { 0x1c });
        gbc.writeMem(0x2be9, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2fb2);
        EXPECT(gbc.pc(), 0x2beb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D6 03AE
        gbc.setState(0x77b1, 0x43d4, 0x4740, 0x927f, 0x2883, 0x3c22, 0x1, 0x0);
        gbc.writeMem(0x3c22, { 0x2d });
        gbc.writeMem(0x77b1, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x43d4);
        EXPECT(gbc.pc(), 0x77b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 03AF
        gbc.setState(0xb30c, 0x540a, 0xe600, 0x11ce, 0x2032, 0xe643, 0x0, 0x1);
        gbc.writeMem(0xb30c, { 0xcb, 0xd6 });
        gbc.writeMem(0xe643, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x540a);
        EXPECT(gbc.pc(), 0xb30e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb30c), 0xcb);
        EXPECT(gbc.readMem(0xb30d), 0xd6);
        EXPECT(gbc.readMem(0xe643), 0xc5);
        // CB D6 03B0
        gbc.setState(0xd831, 0xe39f, 0xacc0, 0xe50, 0x2040, 0x27b9, 0x0, 0x1);
        gbc.writeMem(0x27b9, { 0x8e });
        gbc.writeMem(0xd831, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe39f);
        EXPECT(gbc.pc(), 0xd833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd831), 0xcb);
        EXPECT(gbc.readMem(0xd832), 0xd6);
        // CB D6 03B1
        gbc.setState(0xe796, 0x872c, 0x7c60, 0xfcb0, 0xa609, 0x6b25, 0x0, 0x1);
        gbc.writeMem(0x6b25, { 0x14 });
        gbc.writeMem(0xe796, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x872c);
        EXPECT(gbc.pc(), 0xe798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe796), 0xcb);
        EXPECT(gbc.readMem(0xe797), 0xd6);
        // CB D6 03B3
        gbc.setState(0xb3fd, 0x9db5, 0xc270, 0x2d5a, 0xa159, 0xe725, 0x0, 0x1);
        gbc.writeMem(0xb3fd, { 0xcb, 0xd6 });
        gbc.writeMem(0xe725, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9db5);
        EXPECT(gbc.pc(), 0xb3ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3fd), 0xcb);
        EXPECT(gbc.readMem(0xb3fe), 0xd6);
        EXPECT(gbc.readMem(0xe725), 0xb4);
        // CB D6 03B4
        gbc.setState(0x693c, 0x9594, 0x6960, 0xe169, 0xb85e, 0xa055, 0x0, 0x1);
        gbc.writeMem(0x693c, { 0xcb, 0xd6 });
        gbc.writeMem(0xa055, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9594);
        EXPECT(gbc.pc(), 0x693e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa055), 0x45);
        // CB D6 03B5
        gbc.setState(0xc2d7, 0x575d, 0xb320, 0xa75c, 0x76f6, 0xbbd, 0x0, 0x1);
        gbc.writeMem(0xbbd, { 0x95 });
        gbc.writeMem(0xc2d7, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x575d);
        EXPECT(gbc.pc(), 0xc2d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d7), 0xcb);
        EXPECT(gbc.readMem(0xc2d8), 0xd6);
        // CB D6 03B7
        gbc.setState(0x544d, 0x9e6b, 0xc620, 0x394c, 0x7db7, 0x3296, 0x0, 0x1);
        gbc.writeMem(0x3296, { 0xa4 });
        gbc.writeMem(0x544d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9e6b);
        EXPECT(gbc.pc(), 0x544f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 03B8
        gbc.setState(0xcd6, 0xbb79, 0xcc70, 0x44a1, 0x7667, 0x8399, 0x1, 0x1);
        gbc.writeMem(0xcd6, { 0xcb, 0xd6 });
        gbc.writeMem(0x8399, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbb79);
        EXPECT(gbc.pc(), 0xcd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8399), 0xd);
        // CB D6 03B9
        gbc.setState(0x7538, 0x90a6, 0xaca0, 0x70c3, 0x6bf1, 0xfa1b, 0x1, 0x1);
        gbc.writeMem(0x7538, { 0xcb, 0xd6 });
        gbc.writeMem(0xfa1b, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x90a6);
        EXPECT(gbc.pc(), 0x753a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa1b), 0x5f);
        // CB D6 03BB
        gbc.setState(0xae82, 0xa800, 0x80a0, 0x746c, 0xdfa0, 0xc213, 0x0, 0x1);
        gbc.writeMem(0xae82, { 0xcb, 0xd6 });
        gbc.writeMem(0xc213, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa800);
        EXPECT(gbc.pc(), 0xae84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae82), 0xcb);
        EXPECT(gbc.readMem(0xae83), 0xd6);
        EXPECT(gbc.readMem(0xc213), 0xec);
        // CB D6 03BF
        gbc.setState(0x780e, 0xa3cd, 0x3ab0, 0x16b3, 0xa4d9, 0xc066, 0x0, 0x1);
        gbc.writeMem(0x780e, { 0xcb, 0xd6 });
        gbc.writeMem(0xc066, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa3cd);
        EXPECT(gbc.pc(), 0x7810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc066), 0x5f);
        // CB D6 03C0
        gbc.setState(0xa5a8, 0xc41, 0xf900, 0x1410, 0xdef7, 0x369c, 0x1, 0x1);
        gbc.writeMem(0x369c, { 0x6e });
        gbc.writeMem(0xa5a8, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc41);
        EXPECT(gbc.pc(), 0xa5aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a8), 0xcb);
        EXPECT(gbc.readMem(0xa5a9), 0xd6);
        // CB D6 03C1
        gbc.setState(0x2bc, 0x5ccb, 0x5340, 0x2116, 0xfe08, 0x6fa2, 0x0, 0x1);
        gbc.writeMem(0x2bc, { 0xcb, 0xd6 });
        gbc.writeMem(0x6fa2, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5ccb);
        EXPECT(gbc.pc(), 0x2be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 03C2
        gbc.setState(0xca42, 0x403c, 0x78e0, 0x1abf, 0x3c48, 0xe406, 0x1, 0x1);
        gbc.writeMem(0xca42, { 0xcb, 0xd6 });
        gbc.writeMem(0xe406, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x403c);
        EXPECT(gbc.pc(), 0xca44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca42), 0xcb);
        EXPECT(gbc.readMem(0xca43), 0xd6);
        EXPECT(gbc.readMem(0xe406), 0xfc);
        // CB D6 03C3
        gbc.setState(0x89c1, 0xa8a3, 0x8170, 0x7738, 0xa3ae, 0xd7bf, 0x1, 0x1);
        gbc.writeMem(0x89c1, { 0xcb, 0xd6 });
        gbc.writeMem(0xd7bf, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa8a3);
        EXPECT(gbc.pc(), 0x89c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c1), 0xcb);
        EXPECT(gbc.readMem(0x89c2), 0xd6);
        EXPECT(gbc.readMem(0xd7bf), 0x5);
        // CB D6 03C4
        gbc.setState(0x812d, 0xc18b, 0x4330, 0x9c38, 0xd4a8, 0x8075, 0x0, 0x0);
        gbc.writeMem(0x8075, { 0x49 });
        gbc.writeMem(0x812d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc18b);
        EXPECT(gbc.pc(), 0x812f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8075), 0x4d);
        EXPECT(gbc.readMem(0x812d), 0xcb);
        EXPECT(gbc.readMem(0x812e), 0xd6);
        // CB D6 03C5
        gbc.setState(0x6676, 0xb252, 0x3790, 0x55aa, 0xf76d, 0xc8fa, 0x0, 0x0);
        gbc.writeMem(0x6676, { 0xcb, 0xd6 });
        gbc.writeMem(0xc8fa, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb252);
        EXPECT(gbc.pc(), 0x6678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8fa), 0xb7);
        // CB D6 03C8
        gbc.setState(0xf6b, 0x9d95, 0xe3a0, 0x6717, 0xdf6b, 0x5ea5, 0x1, 0x1);
        gbc.writeMem(0xf6b, { 0xcb, 0xd6 });
        gbc.writeMem(0x5ea5, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9d95);
        EXPECT(gbc.pc(), 0xf6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D6 03C9
        gbc.setState(0xbb67, 0x57cb, 0xb3b0, 0xa85, 0x282d, 0xb114, 0x1, 0x1);
        gbc.writeMem(0xb114, { 0x3c });
        gbc.writeMem(0xbb67, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x57cb);
        EXPECT(gbc.pc(), 0xbb69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb114), 0x3c);
        EXPECT(gbc.readMem(0xbb67), 0xcb);
        EXPECT(gbc.readMem(0xbb68), 0xd6);
        // CB D6 03CA
        gbc.setState(0xe647, 0x11e1, 0xf450, 0xdd52, 0x61b1, 0x99d1, 0x1, 0x1);
        gbc.writeMem(0x99d1, { 0x2 });
        gbc.writeMem(0xe647, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x11e1);
        EXPECT(gbc.pc(), 0xe649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d1), 0x6);
        EXPECT(gbc.readMem(0xe647), 0xcb);
        EXPECT(gbc.readMem(0xe648), 0xd6);
        // CB D6 03CB
        gbc.setState(0xce82, 0x8dfd, 0xb240, 0x5e07, 0x13f, 0xb3fe, 0x0, 0x0);
        gbc.writeMem(0xb3fe, { 0xd1 });
        gbc.writeMem(0xce82, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8dfd);
        EXPECT(gbc.pc(), 0xce84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3fe), 0xd5);
        EXPECT(gbc.readMem(0xce82), 0xcb);
        EXPECT(gbc.readMem(0xce83), 0xd6);
        // CB D6 03CC
        gbc.setState(0x3194, 0x5f28, 0x5680, 0x2d60, 0xfbd4, 0xed69, 0x0, 0x1);
        gbc.writeMem(0x3194, { 0xcb, 0xd6 });
        gbc.writeMem(0xed69, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5f28);
        EXPECT(gbc.pc(), 0x3196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed69), 0x55);
        // CB D6 03CE
        gbc.setState(0x831a, 0x39f1, 0xcda0, 0xb572, 0x8085, 0xb0f7, 0x1, 0x0);
        gbc.writeMem(0x831a, { 0xcb, 0xd6 });
        gbc.writeMem(0xb0f7, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x39f1);
        EXPECT(gbc.pc(), 0x831c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831a), 0xcb);
        EXPECT(gbc.readMem(0x831b), 0xd6);
        EXPECT(gbc.readMem(0xb0f7), 0x57);
        // CB D6 03CF
        gbc.setState(0x3552, 0x3652, 0x1e70, 0x5099, 0x9099, 0x901d, 0x0, 0x0);
        gbc.writeMem(0x3552, { 0xcb, 0xd6 });
        gbc.writeMem(0x901d, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3652);
        EXPECT(gbc.pc(), 0x3554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901d), 0x94);
        // CB D6 03D0
        gbc.setState(0x93c8, 0xd0d9, 0xfc00, 0xfe7f, 0x741, 0xb737, 0x1, 0x0);
        gbc.writeMem(0x93c8, { 0xcb, 0xd6 });
        gbc.writeMem(0xb737, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd0d9);
        EXPECT(gbc.pc(), 0x93ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c8), 0xcb);
        EXPECT(gbc.readMem(0x93c9), 0xd6);
        EXPECT(gbc.readMem(0xb737), 0x17);
        // CB D6 03D1
        gbc.setState(0xe3, 0x58f2, 0xbc00, 0x672a, 0x1975, 0xa8f, 0x1, 0x0);
        gbc.writeMem(0xe3, { 0xcb, 0xd6 });
        gbc.writeMem(0xa8f, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x58f2);
        EXPECT(gbc.pc(), 0xe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D6 03D3
        gbc.setState(0x9039, 0xb700, 0x78f0, 0xc8d4, 0x9f6d, 0xba93, 0x0, 0x1);
        gbc.writeMem(0x9039, { 0xcb, 0xd6 });
        gbc.writeMem(0xba93, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb700);
        EXPECT(gbc.pc(), 0x903b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9039), 0xcb);
        EXPECT(gbc.readMem(0x903a), 0xd6);
        EXPECT(gbc.readMem(0xba93), 0x87);
        // CB D6 03D5
        gbc.setState(0xc25, 0x19b0, 0xe570, 0x155c, 0xd178, 0xfbc0, 0x0, 0x0);
        gbc.writeMem(0xc25, { 0xcb, 0xd6 });
        gbc.writeMem(0xfbc0, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x19b0);
        EXPECT(gbc.pc(), 0xc27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbc0), 0x7c);
        // CB D6 03D6
        gbc.setState(0xdae2, 0x1d, 0xf710, 0x97e1, 0x4e28, 0x8cca, 0x1, 0x0);
        gbc.writeMem(0x8cca, { 0xdf });
        gbc.writeMem(0xdae2, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1d);
        EXPECT(gbc.pc(), 0xdae4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cca), 0xdf);
        EXPECT(gbc.readMem(0xdae2), 0xcb);
        EXPECT(gbc.readMem(0xdae3), 0xd6);
        // CB D6 03DB
        gbc.setState(0xc46e, 0xca43, 0xd940, 0xe6d7, 0x2424, 0xbc4c, 0x1, 0x0);
        gbc.writeMem(0xbc4c, { 0xdd });
        gbc.writeMem(0xc46e, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xca43);
        EXPECT(gbc.pc(), 0xc470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc4c), 0xdd);
        EXPECT(gbc.readMem(0xc46e), 0xcb);
        EXPECT(gbc.readMem(0xc46f), 0xd6);
        // CB D6 03DC
        gbc.setState(0xa50f, 0x19fc, 0x3d90, 0x8309, 0xe27b, 0xb373, 0x1, 0x1);
        gbc.writeMem(0xa50f, { 0xcb, 0xd6 });
        gbc.writeMem(0xb373, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x19fc);
        EXPECT(gbc.pc(), 0xa511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50f), 0xcb);
        EXPECT(gbc.readMem(0xa510), 0xd6);
        EXPECT(gbc.readMem(0xb373), 0xf6);
        // CB D6 03DF
        gbc.setState(0x69ea, 0xb403, 0x8db0, 0xc309, 0x5ad6, 0xcc5e, 0x1, 0x1);
        gbc.writeMem(0x69ea, { 0xcb, 0xd6 });
        gbc.writeMem(0xcc5e, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb403);
        EXPECT(gbc.pc(), 0x69ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc5e), 0xa7);
        // CB D6 03E1
        gbc.setState(0x8930, 0xa37a, 0xfb80, 0xadd7, 0xe878, 0x29d2, 0x0, 0x1);
        gbc.writeMem(0x29d2, { 0x66 });
        gbc.writeMem(0x8930, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa37a);
        EXPECT(gbc.pc(), 0x8932);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8930), 0xcb);
        EXPECT(gbc.readMem(0x8931), 0xd6);
        // CB D6 03E2
        gbc.setState(0x7a80, 0xf741, 0x9330, 0xbe57, 0xef1b, 0x4b4, 0x0, 0x1);
        gbc.writeMem(0x4b4, { 0xc6 });
        gbc.writeMem(0x7a80, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf741);
        EXPECT(gbc.pc(), 0x7a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D6 03E6
        gbc.setState(0x8f1d, 0x8769, 0x5800, 0xdbe6, 0xb66e, 0x8c57, 0x1, 0x0);
        gbc.writeMem(0x8c57, { 0x7 });
        gbc.writeMem(0x8f1d, { 0xcb, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8769);
        EXPECT(gbc.pc(), 0x8f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c57), 0x7);
        EXPECT(gbc.readMem(0x8f1d), 0xcb);
        EXPECT(gbc.readMem(0x8f1e), 0xd6);
        // CB D6 03E7
        gbc.setState(0x4674, 0xb566, 0x8220, 0x21b6, 0x9294, 0xf467, 0x1, 0x0);
        gbc.writeMem(0x4674, { 0xcb, 0xd6 });
        gbc.writeMem(0xf467, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb566);
        EXPECT(gbc.pc(), 0x4676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf467), 0x5e);
    }
}
#endif
