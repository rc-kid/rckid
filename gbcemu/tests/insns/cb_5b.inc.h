    TEST(gbcemu, opcode_cb_5b) {
        GBCEmu gbc{"", nullptr};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 5B 0000
        gbc.setState(0x92c8, 0x769c, 0x1cd0, 0xc47a, 0x6329, 0xaa12, 0x0, 0x1);
        gbc.writeMem(0x92c8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x769c, gbc.sp());
        EXPECT(0x92ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92c8));
        EXPECT(0x5b, gbc.readMem(0x92c9));
        // CB 5B 0001
        gbc.setState(0x7368, 0xed47, 0xd580, 0x8c36, 0x5ab5, 0xbf43, 0x1, 0x1);
        gbc.writeMem(0x7368, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xed47, gbc.sp());
        EXPECT(0x736a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0002
        gbc.setState(0x80f4, 0xf468, 0x61f0, 0x3b9b, 0x1dff, 0xfd60, 0x0, 0x1);
        gbc.writeMem(0x80f4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xf468, gbc.sp());
        EXPECT(0x80f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80f4));
        EXPECT(0x5b, gbc.readMem(0x80f5));
        // CB 5B 0003
        gbc.setState(0x2130, 0xe0fc, 0x9040, 0x9fea, 0x1f55, 0xb73b, 0x0, 0x0);
        gbc.writeMem(0x2130, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xe0fc, gbc.sp());
        EXPECT(0x2132, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0005
        gbc.setState(0xbdbd, 0x483c, 0x2170, 0xb5df, 0x87ab, 0x2a67, 0x0, 0x0);
        gbc.writeMem(0xbdbd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x483c, gbc.sp());
        EXPECT(0xbdbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdbd));
        EXPECT(0x5b, gbc.readMem(0xbdbe));
        // CB 5B 0006
        gbc.setState(0xad7e, 0x6189, 0xed50, 0xd8b7, 0x11c6, 0xbd90, 0x0, 0x0);
        gbc.writeMem(0xad7e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x6189, gbc.sp());
        EXPECT(0xad80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad7e));
        EXPECT(0x5b, gbc.readMem(0xad7f));
        // CB 5B 0007
        gbc.setState(0x8f53, 0xb640, 0x5da0, 0x6ef1, 0x8539, 0x452f, 0x0, 0x0);
        gbc.writeMem(0x8f53, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xb640, gbc.sp());
        EXPECT(0x8f55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f53));
        EXPECT(0x5b, gbc.readMem(0x8f54));
        // CB 5B 0008
        gbc.setState(0x3bca, 0x1bc5, 0x5970, 0xb5ed, 0x46c2, 0x7a2c, 0x0, 0x0);
        gbc.writeMem(0x3bca, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x1bc5, gbc.sp());
        EXPECT(0x3bcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0009
        gbc.setState(0x30c0, 0x513, 0x4fc0, 0xf285, 0x60f5, 0xeb66, 0x1, 0x1);
        gbc.writeMem(0x30c0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x513, gbc.sp());
        EXPECT(0x30c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 000A
        gbc.setState(0xe8fb, 0xded5, 0xab40, 0x361b, 0xc8c7, 0x172b, 0x1, 0x0);
        gbc.writeMem(0xe8fb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xded5, gbc.sp());
        EXPECT(0xe8fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8fb));
        EXPECT(0x5b, gbc.readMem(0xe8fc));
        // CB 5B 000B
        gbc.setState(0xb3b1, 0x7719, 0xc9b0, 0x36b4, 0x29d8, 0x3f65, 0x1, 0x0);
        gbc.writeMem(0xb3b1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x7719, gbc.sp());
        EXPECT(0xb3b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3b1));
        EXPECT(0x5b, gbc.readMem(0xb3b2));
        // CB 5B 000C
        gbc.setState(0xc7b6, 0x5685, 0xc150, 0x84c5, 0x96bd, 0x5e0, 0x1, 0x0);
        gbc.writeMem(0xc7b6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x5685, gbc.sp());
        EXPECT(0xc7b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7b6));
        EXPECT(0x5b, gbc.readMem(0xc7b7));
        // CB 5B 000D
        gbc.setState(0x63a8, 0xc7c9, 0x8b30, 0xccfd, 0x15c9, 0x1137, 0x1, 0x0);
        gbc.writeMem(0x63a8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xc7c9, gbc.sp());
        EXPECT(0x63aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 000E
        gbc.setState(0x8a3a, 0x8cac, 0xdf00, 0x9e79, 0x98cf, 0x6a16, 0x1, 0x0);
        gbc.writeMem(0x8a3a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x8cac, gbc.sp());
        EXPECT(0x8a3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a3a));
        EXPECT(0x5b, gbc.readMem(0x8a3b));
        // CB 5B 000F
        gbc.setState(0x905a, 0x1d7b, 0x1da0, 0x5589, 0x9cc1, 0xdaa6, 0x0, 0x0);
        gbc.writeMem(0x905a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x1d7b, gbc.sp());
        EXPECT(0x905c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x905a));
        EXPECT(0x5b, gbc.readMem(0x905b));
        // CB 5B 0010
        gbc.setState(0x45d3, 0x2f4c, 0x3ed0, 0x393f, 0x2cb1, 0x8090, 0x1, 0x0);
        gbc.writeMem(0x45d3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2f4c, gbc.sp());
        EXPECT(0x45d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0011
        gbc.setState(0xb9fe, 0x6c6f, 0x1e00, 0x91ce, 0x7c7, 0xbbd5, 0x0, 0x1);
        gbc.writeMem(0xb9fe, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x6c6f, gbc.sp());
        EXPECT(0xba00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9fe));
        EXPECT(0x5b, gbc.readMem(0xb9ff));
        // CB 5B 0012
        gbc.setState(0xdbda, 0xfe32, 0x61a0, 0xcbf5, 0xa694, 0x489, 0x0, 0x1);
        gbc.writeMem(0xdbda, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xfe32, gbc.sp());
        EXPECT(0xdbdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbda));
        EXPECT(0x5b, gbc.readMem(0xdbdb));
        // CB 5B 0013
        gbc.setState(0xc903, 0xe755, 0x3e70, 0xaed8, 0x122, 0xa89f, 0x0, 0x1);
        gbc.writeMem(0xc903, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xe755, gbc.sp());
        EXPECT(0xc905, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc903));
        EXPECT(0x5b, gbc.readMem(0xc904));
        // CB 5B 0015
        gbc.setState(0x2e7e, 0xa18e, 0x2900, 0x349c, 0x885c, 0xe81d, 0x1, 0x0);
        gbc.writeMem(0x2e7e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xa18e, gbc.sp());
        EXPECT(0x2e80, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0016
        gbc.setState(0x7273, 0xd7d9, 0x5100, 0x7e2, 0x3ff3, 0x7723, 0x1, 0x1);
        gbc.writeMem(0x7273, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xd7d9, gbc.sp());
        EXPECT(0x7275, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0017
        gbc.setState(0x169b, 0xa9a4, 0xd1a0, 0x15eb, 0x6326, 0x43b5, 0x1, 0x0);
        gbc.writeMem(0x169b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xa9a4, gbc.sp());
        EXPECT(0x169d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0018
        gbc.setState(0xe5ee, 0xec7, 0x71b0, 0xa17, 0xa096, 0xaccc, 0x0, 0x0);
        gbc.writeMem(0xe5ee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xec7, gbc.sp());
        EXPECT(0xe5f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5ee));
        EXPECT(0x5b, gbc.readMem(0xe5ef));
        // CB 5B 0019
        gbc.setState(0x44ef, 0x58d9, 0x42e0, 0x95e5, 0x54d5, 0x12dd, 0x0, 0x1);
        gbc.writeMem(0x44ef, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x58d9, gbc.sp());
        EXPECT(0x44f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 001A
        gbc.setState(0x8691, 0x6421, 0xdc70, 0x33a5, 0x30db, 0xf139, 0x1, 0x1);
        gbc.writeMem(0x8691, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x6421, gbc.sp());
        EXPECT(0x8693, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8691));
        EXPECT(0x5b, gbc.readMem(0x8692));
        // CB 5B 001B
        gbc.setState(0x936c, 0xf778, 0xa190, 0xcf09, 0x8884, 0x16cb, 0x0, 0x1);
        gbc.writeMem(0x936c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xf778, gbc.sp());
        EXPECT(0x936e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x936c));
        EXPECT(0x5b, gbc.readMem(0x936d));
        // CB 5B 001C
        gbc.setState(0x5bbe, 0xcad7, 0x1fc0, 0xbade, 0x197f, 0x243d, 0x1, 0x0);
        gbc.writeMem(0x5bbe, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xcad7, gbc.sp());
        EXPECT(0x5bc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 001D
        gbc.setState(0x9736, 0x896d, 0xb500, 0x957a, 0xbe71, 0x7f8f, 0x0, 0x1);
        gbc.writeMem(0x9736, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x896d, gbc.sp());
        EXPECT(0x9738, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9736));
        EXPECT(0x5b, gbc.readMem(0x9737));
        // CB 5B 001E
        gbc.setState(0xe1ea, 0x5f67, 0x6ca0, 0x343, 0x97c2, 0x2e40, 0x1, 0x0);
        gbc.writeMem(0xe1ea, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x5f67, gbc.sp());
        EXPECT(0xe1ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1ea));
        EXPECT(0x5b, gbc.readMem(0xe1eb));
        // CB 5B 001F
        gbc.setState(0xb3c9, 0xac6e, 0xbba0, 0xea90, 0x6f21, 0x4800, 0x1, 0x0);
        gbc.writeMem(0xb3c9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xac6e, gbc.sp());
        EXPECT(0xb3cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3c9));
        EXPECT(0x5b, gbc.readMem(0xb3ca));
        // CB 5B 0020
        gbc.setState(0x4782, 0xc67a, 0x7c30, 0x11a9, 0x93c5, 0xb07e, 0x0, 0x0);
        gbc.writeMem(0x4782, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xc67a, gbc.sp());
        EXPECT(0x4784, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0021
        gbc.setState(0xa586, 0x89be, 0x3cd0, 0x30a2, 0x6035, 0x4fcf, 0x1, 0x1);
        gbc.writeMem(0xa586, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x89be, gbc.sp());
        EXPECT(0xa588, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa586));
        EXPECT(0x5b, gbc.readMem(0xa587));
        // CB 5B 0022
        gbc.setState(0x9f8b, 0xa8c8, 0xcea0, 0xe815, 0x951e, 0xc78f, 0x1, 0x1);
        gbc.writeMem(0x9f8b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xa8c8, gbc.sp());
        EXPECT(0x9f8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f8b));
        EXPECT(0x5b, gbc.readMem(0x9f8c));
        // CB 5B 0023
        gbc.setState(0x4ae9, 0xec18, 0x7370, 0x708a, 0xa489, 0xb318, 0x1, 0x1);
        gbc.writeMem(0x4ae9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xec18, gbc.sp());
        EXPECT(0x4aeb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0024
        gbc.setState(0x17ca, 0x137a, 0x99d0, 0x4199, 0x2c7a, 0xc431, 0x1, 0x0);
        gbc.writeMem(0x17ca, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x137a, gbc.sp());
        EXPECT(0x17cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0025
        gbc.setState(0x5d6c, 0x247c, 0x5160, 0xabd9, 0xebee, 0x2a77, 0x1, 0x0);
        gbc.writeMem(0x5d6c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x247c, gbc.sp());
        EXPECT(0x5d6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0026
        gbc.setState(0x931d, 0xac5, 0x36c0, 0x671d, 0x9c5, 0xa655, 0x0, 0x0);
        gbc.writeMem(0x931d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xac5, gbc.sp());
        EXPECT(0x931f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x931d));
        EXPECT(0x5b, gbc.readMem(0x931e));
        // CB 5B 0027
        gbc.setState(0x2647, 0x4a72, 0x700, 0x72ec, 0xfcc5, 0x141d, 0x1, 0x1);
        gbc.writeMem(0x2647, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x4a72, gbc.sp());
        EXPECT(0x2649, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0029
        gbc.setState(0x6926, 0xd1ba, 0xfad0, 0x8faf, 0xdd19, 0xb2d1, 0x0, 0x0);
        gbc.writeMem(0x6926, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xd1ba, gbc.sp());
        EXPECT(0x6928, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 002A
        gbc.setState(0x8ac4, 0x2764, 0xec80, 0x5773, 0xa10e, 0xd477, 0x1, 0x0);
        gbc.writeMem(0x8ac4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x2764, gbc.sp());
        EXPECT(0x8ac6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ac4));
        EXPECT(0x5b, gbc.readMem(0x8ac5));
        // CB 5B 002B
        gbc.setState(0x9215, 0x53a7, 0xe880, 0x7a5f, 0x3ff3, 0xc351, 0x1, 0x0);
        gbc.writeMem(0x9215, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x53a7, gbc.sp());
        EXPECT(0x9217, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9215));
        EXPECT(0x5b, gbc.readMem(0x9216));
        // CB 5B 002C
        gbc.setState(0x5339, 0x96cd, 0x8b80, 0xb0ea, 0xc5d9, 0x1b, 0x1, 0x1);
        gbc.writeMem(0x5339, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x96cd, gbc.sp());
        EXPECT(0x533b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 002D
        gbc.setState(0x1fca, 0x6f4d, 0xb240, 0xbe9b, 0xe383, 0xf727, 0x0, 0x0);
        gbc.writeMem(0x1fca, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x6f4d, gbc.sp());
        EXPECT(0x1fcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 002E
        gbc.setState(0x4b54, 0xf1a3, 0x72b0, 0x7ab4, 0x2253, 0x8ae3, 0x1, 0x0);
        gbc.writeMem(0x4b54, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xf1a3, gbc.sp());
        EXPECT(0x4b56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 002F
        gbc.setState(0x4525, 0xfd82, 0x3840, 0x50d7, 0xb4e5, 0xf3da, 0x1, 0x0);
        gbc.writeMem(0x4525, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xfd82, gbc.sp());
        EXPECT(0x4527, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0030
        gbc.setState(0x190e, 0x1230, 0x1060, 0x80e3, 0xe577, 0x306a, 0x1, 0x1);
        gbc.writeMem(0x190e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x1230, gbc.sp());
        EXPECT(0x1910, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0031
        gbc.setState(0x9171, 0xf84f, 0x4240, 0x7e48, 0xd55f, 0x4589, 0x1, 0x1);
        gbc.writeMem(0x9171, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xf84f, gbc.sp());
        EXPECT(0x9173, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9171));
        EXPECT(0x5b, gbc.readMem(0x9172));
        // CB 5B 0033
        gbc.setState(0x8949, 0x9f60, 0x4e80, 0x98e9, 0xd0ab, 0x508f, 0x1, 0x0);
        gbc.writeMem(0x8949, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x9f60, gbc.sp());
        EXPECT(0x894b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8949));
        EXPECT(0x5b, gbc.readMem(0x894a));
        // CB 5B 0034
        gbc.setState(0x39f4, 0x9f81, 0x4e20, 0xa322, 0xc1f1, 0x67cc, 0x0, 0x0);
        gbc.writeMem(0x39f4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x9f81, gbc.sp());
        EXPECT(0x39f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0035
        gbc.setState(0x16ec, 0xc9b7, 0x6400, 0x22d2, 0x475e, 0x6e1d, 0x1, 0x1);
        gbc.writeMem(0x16ec, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xc9b7, gbc.sp());
        EXPECT(0x16ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0036
        gbc.setState(0x65a0, 0x236e, 0xba00, 0x359c, 0x191e, 0x2381, 0x1, 0x1);
        gbc.writeMem(0x65a0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x236e, gbc.sp());
        EXPECT(0x65a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0038
        gbc.setState(0x14af, 0xa2e1, 0xb170, 0x9644, 0x8010, 0xf07, 0x0, 0x0);
        gbc.writeMem(0x14af, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xa2e1, gbc.sp());
        EXPECT(0x14b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0039
        gbc.setState(0x22f4, 0xec5c, 0x14e0, 0x347b, 0xd1ad, 0x9fc5, 0x1, 0x1);
        gbc.writeMem(0x22f4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xec5c, gbc.sp());
        EXPECT(0x22f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 003A
        gbc.setState(0xd1d1, 0x9aa2, 0xbee0, 0xd6d6, 0xa87c, 0xc3a0, 0x1, 0x0);
        gbc.writeMem(0xd1d1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x9aa2, gbc.sp());
        EXPECT(0xd1d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1d1));
        EXPECT(0x5b, gbc.readMem(0xd1d2));
        // CB 5B 003B
        gbc.setState(0xb348, 0xabb, 0x1b0, 0xb040, 0x5c03, 0xf2d9, 0x1, 0x0);
        gbc.writeMem(0xb348, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xabb, gbc.sp());
        EXPECT(0xb34a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb348));
        EXPECT(0x5b, gbc.readMem(0xb349));
        // CB 5B 003C
        gbc.setState(0xac69, 0x44d, 0x6de0, 0x8bf9, 0x3887, 0x751b, 0x1, 0x0);
        gbc.writeMem(0xac69, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x44d, gbc.sp());
        EXPECT(0xac6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac69));
        EXPECT(0x5b, gbc.readMem(0xac6a));
        // CB 5B 003D
        gbc.setState(0xa480, 0x741f, 0x9d60, 0xacb0, 0x703c, 0x88e8, 0x1, 0x1);
        gbc.writeMem(0xa480, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x741f, gbc.sp());
        EXPECT(0xa482, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa480));
        EXPECT(0x5b, gbc.readMem(0xa481));
        // CB 5B 003E
        gbc.setState(0xe51, 0x9c27, 0x13b0, 0xd64c, 0xff02, 0x87c0, 0x1, 0x1);
        gbc.writeMem(0xe51, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x9c27, gbc.sp());
        EXPECT(0xe53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 003F
        gbc.setState(0x9d72, 0xf4a2, 0xf490, 0x64aa, 0x1526, 0x58d7, 0x1, 0x1);
        gbc.writeMem(0x9d72, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xf4a2, gbc.sp());
        EXPECT(0x9d74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d72));
        EXPECT(0x5b, gbc.readMem(0x9d73));
        // CB 5B 0040
        gbc.setState(0xa8c8, 0x4707, 0x4ea0, 0x739d, 0x5cd3, 0x408d, 0x0, 0x1);
        gbc.writeMem(0xa8c8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x4707, gbc.sp());
        EXPECT(0xa8ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8c8));
        EXPECT(0x5b, gbc.readMem(0xa8c9));
        // CB 5B 0041
        gbc.setState(0x2599, 0x73d4, 0x6040, 0x3fb5, 0x9658, 0x6db7, 0x0, 0x0);
        gbc.writeMem(0x2599, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x73d4, gbc.sp());
        EXPECT(0x259b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0042
        gbc.setState(0x1ce2, 0xdc01, 0x9c30, 0x4d8f, 0xa162, 0xe3e9, 0x1, 0x1);
        gbc.writeMem(0x1ce2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xdc01, gbc.sp());
        EXPECT(0x1ce4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0043
        gbc.setState(0xa674, 0xc02a, 0xb490, 0xbc05, 0x4b9d, 0x335d, 0x1, 0x0);
        gbc.writeMem(0xa674, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xc02a, gbc.sp());
        EXPECT(0xa676, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa674));
        EXPECT(0x5b, gbc.readMem(0xa675));
        // CB 5B 0044
        gbc.setState(0xafd5, 0x8501, 0xf1e0, 0xcf01, 0xf366, 0xbd57, 0x1, 0x0);
        gbc.writeMem(0xafd5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x8501, gbc.sp());
        EXPECT(0xafd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafd5));
        EXPECT(0x5b, gbc.readMem(0xafd6));
        // CB 5B 0045
        gbc.setState(0x3514, 0xf45a, 0xe680, 0xe769, 0x47de, 0x44fa, 0x1, 0x0);
        gbc.writeMem(0x3514, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xf45a, gbc.sp());
        EXPECT(0x3516, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0046
        gbc.setState(0xa16f, 0xe39e, 0xa7e0, 0xff0, 0xc79b, 0x6951, 0x1, 0x0);
        gbc.writeMem(0xa16f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xe39e, gbc.sp());
        EXPECT(0xa171, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa16f));
        EXPECT(0x5b, gbc.readMem(0xa170));
        // CB 5B 0048
        gbc.setState(0x65e7, 0xe201, 0xc1f0, 0x89a, 0x95, 0xe5c7, 0x1, 0x1);
        gbc.writeMem(0x65e7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xe201, gbc.sp());
        EXPECT(0x65e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0049
        gbc.setState(0xe062, 0x23e8, 0x8840, 0x9079, 0xcd57, 0xfd30, 0x0, 0x0);
        gbc.writeMem(0xe062, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x23e8, gbc.sp());
        EXPECT(0xe064, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe062));
        EXPECT(0x5b, gbc.readMem(0xe063));
        // CB 5B 004A
        gbc.setState(0x7081, 0x5ad4, 0x69e0, 0xc0d5, 0x306b, 0xe0cc, 0x0, 0x1);
        gbc.writeMem(0x7081, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x5ad4, gbc.sp());
        EXPECT(0x7083, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 004B
        gbc.setState(0xb0f5, 0x9b39, 0x5c0, 0x92c2, 0x71dc, 0xeff2, 0x0, 0x0);
        gbc.writeMem(0xb0f5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x9b39, gbc.sp());
        EXPECT(0xb0f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0f5));
        EXPECT(0x5b, gbc.readMem(0xb0f6));
        // CB 5B 004C
        gbc.setState(0x2416, 0xc47f, 0xe8e0, 0xd1c9, 0x7f8, 0x873b, 0x0, 0x0);
        gbc.writeMem(0x2416, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xc47f, gbc.sp());
        EXPECT(0x2418, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 004D
        gbc.setState(0xee18, 0x61dd, 0x9890, 0x1287, 0x1eac, 0x6274, 0x1, 0x0);
        gbc.writeMem(0xee18, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x61dd, gbc.sp());
        EXPECT(0xee1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee18));
        EXPECT(0x5b, gbc.readMem(0xee19));
        // CB 5B 004E
        gbc.setState(0xd51f, 0x7ac5, 0xdac0, 0x6bc9, 0xaaf, 0x505f, 0x1, 0x0);
        gbc.writeMem(0xd51f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x7ac5, gbc.sp());
        EXPECT(0xd521, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd51f));
        EXPECT(0x5b, gbc.readMem(0xd520));
        // CB 5B 004F
        gbc.setState(0x82cf, 0x145c, 0x4140, 0xd39b, 0xd480, 0xbecb, 0x1, 0x1);
        gbc.writeMem(0x82cf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x145c, gbc.sp());
        EXPECT(0x82d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82cf));
        EXPECT(0x5b, gbc.readMem(0x82d0));
        // CB 5B 0050
        gbc.setState(0x3e00, 0x1a30, 0x1620, 0xcc11, 0x55ee, 0xf298, 0x0, 0x0);
        gbc.writeMem(0x3e00, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x1a30, gbc.sp());
        EXPECT(0x3e02, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0053
        gbc.setState(0x34c0, 0x2bf7, 0xfe60, 0xa031, 0x7497, 0x597d, 0x0, 0x0);
        gbc.writeMem(0x34c0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x2bf7, gbc.sp());
        EXPECT(0x34c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0054
        gbc.setState(0x372e, 0xe820, 0xa550, 0x3f91, 0x8b0, 0xb54a, 0x0, 0x0);
        gbc.writeMem(0x372e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xe820, gbc.sp());
        EXPECT(0x3730, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0055
        gbc.setState(0x193a, 0x8c7f, 0x3f40, 0xf192, 0x8dc6, 0xd4ce, 0x1, 0x0);
        gbc.writeMem(0x193a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x8c7f, gbc.sp());
        EXPECT(0x193c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0057
        gbc.setState(0x7637, 0xadc8, 0x79d0, 0x8f00, 0x5d09, 0x2bad, 0x1, 0x1);
        gbc.writeMem(0x7637, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xadc8, gbc.sp());
        EXPECT(0x7639, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0058
        gbc.setState(0xab51, 0x835a, 0x1890, 0x11b6, 0xd9ff, 0xe57c, 0x1, 0x1);
        gbc.writeMem(0xab51, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x835a, gbc.sp());
        EXPECT(0xab53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab51));
        EXPECT(0x5b, gbc.readMem(0xab52));
        // CB 5B 0059
        gbc.setState(0x1d75, 0xa5a5, 0x4b30, 0x3f3, 0x3441, 0x9e4d, 0x0, 0x1);
        gbc.writeMem(0x1d75, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xa5a5, gbc.sp());
        EXPECT(0x1d77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 005A
        gbc.setState(0xa1a6, 0x3fdc, 0xf260, 0x73e9, 0x8c1, 0x9e71, 0x1, 0x1);
        gbc.writeMem(0xa1a6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x3fdc, gbc.sp());
        EXPECT(0xa1a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1a6));
        EXPECT(0x5b, gbc.readMem(0xa1a7));
        // CB 5B 005B
        gbc.setState(0xe3cb, 0x2010, 0x2d40, 0x2744, 0xf3a3, 0x7f2, 0x0, 0x0);
        gbc.writeMem(0xe3cb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x2010, gbc.sp());
        EXPECT(0xe3cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3cb));
        EXPECT(0x5b, gbc.readMem(0xe3cc));
        // CB 5B 005C
        gbc.setState(0xe9ac, 0x5083, 0x9ac0, 0x2866, 0x92bb, 0xa16f, 0x1, 0x0);
        gbc.writeMem(0xe9ac, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x5083, gbc.sp());
        EXPECT(0xe9ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9ac));
        EXPECT(0x5b, gbc.readMem(0xe9ad));
        // CB 5B 005D
        gbc.setState(0x23ee, 0x2db4, 0x49e0, 0x7001, 0x3a2a, 0xd27d, 0x1, 0x1);
        gbc.writeMem(0x23ee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x2db4, gbc.sp());
        EXPECT(0x23f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 005F
        gbc.setState(0x4179, 0xf489, 0xae40, 0xba6a, 0x8733, 0x9a25, 0x0, 0x0);
        gbc.writeMem(0x4179, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xf489, gbc.sp());
        EXPECT(0x417b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0060
        gbc.setState(0xcc5e, 0x69be, 0xd2f0, 0xd79e, 0xd07b, 0x6cd4, 0x0, 0x0);
        gbc.writeMem(0xcc5e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x69be, gbc.sp());
        EXPECT(0xcc60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc5e));
        EXPECT(0x5b, gbc.readMem(0xcc5f));
        // CB 5B 0061
        gbc.setState(0xa193, 0x29ea, 0x7d20, 0xdb5, 0xf98, 0x1877, 0x0, 0x0);
        gbc.writeMem(0xa193, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x29ea, gbc.sp());
        EXPECT(0xa195, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa193));
        EXPECT(0x5b, gbc.readMem(0xa194));
        // CB 5B 0062
        gbc.setState(0xd68f, 0x467b, 0x80, 0x7bbd, 0xbcfe, 0x91f3, 0x1, 0x1);
        gbc.writeMem(0xd68f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x467b, gbc.sp());
        EXPECT(0xd691, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd68f));
        EXPECT(0x5b, gbc.readMem(0xd690));
        // CB 5B 0064
        gbc.setState(0xa373, 0x7455, 0x1800, 0xf6a8, 0x2a20, 0x2d6, 0x1, 0x0);
        gbc.writeMem(0xa373, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x7455, gbc.sp());
        EXPECT(0xa375, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa373));
        EXPECT(0x5b, gbc.readMem(0xa374));
        // CB 5B 0065
        gbc.setState(0x6a20, 0xf00e, 0x3d70, 0xb89f, 0x4b55, 0x2845, 0x1, 0x1);
        gbc.writeMem(0x6a20, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xf00e, gbc.sp());
        EXPECT(0x6a22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0066
        gbc.setState(0xd079, 0xfca2, 0x6aa0, 0xdda4, 0x224d, 0xda04, 0x1, 0x1);
        gbc.writeMem(0xd079, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xfca2, gbc.sp());
        EXPECT(0xd07b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd079));
        EXPECT(0x5b, gbc.readMem(0xd07a));
        // CB 5B 0068
        gbc.setState(0xe0ab, 0xdd59, 0x2340, 0xa655, 0x5b5b, 0xac62, 0x1, 0x0);
        gbc.writeMem(0xe0ab, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xdd59, gbc.sp());
        EXPECT(0xe0ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0ab));
        EXPECT(0x5b, gbc.readMem(0xe0ac));
        // CB 5B 0069
        gbc.setState(0x5d07, 0x9fb3, 0x6f00, 0xe673, 0x4ff, 0x5182, 0x0, 0x0);
        gbc.writeMem(0x5d07, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x9fb3, gbc.sp());
        EXPECT(0x5d09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 006A
        gbc.setState(0x18e9, 0x1456, 0xfc70, 0x3b65, 0xd8b3, 0x9992, 0x1, 0x0);
        gbc.writeMem(0x18e9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x1456, gbc.sp());
        EXPECT(0x18eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 006B
        gbc.setState(0x374f, 0x79a3, 0x9d00, 0xb66e, 0xe4ff, 0x1302, 0x1, 0x1);
        gbc.writeMem(0x374f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x79a3, gbc.sp());
        EXPECT(0x3751, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 006C
        gbc.setState(0x5166, 0x3b3c, 0x5530, 0x8a4d, 0xc6b9, 0xc092, 0x1, 0x1);
        gbc.writeMem(0x5166, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x3b3c, gbc.sp());
        EXPECT(0x5168, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 006D
        gbc.setState(0xdfcc, 0x3f59, 0xe7c0, 0x5a5a, 0x834, 0x384d, 0x1, 0x1);
        gbc.writeMem(0xdfcc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x3f59, gbc.sp());
        EXPECT(0xdfce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfcc));
        EXPECT(0x5b, gbc.readMem(0xdfcd));
        // CB 5B 006E
        gbc.setState(0xc629, 0x198a, 0xff20, 0x9edb, 0xd16f, 0xc774, 0x0, 0x1);
        gbc.writeMem(0xc629, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x198a, gbc.sp());
        EXPECT(0xc62b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc629));
        EXPECT(0x5b, gbc.readMem(0xc62a));
        // CB 5B 006F
        gbc.setState(0x49c8, 0x1441, 0x5b50, 0xb53a, 0xa044, 0xffff, 0x0, 0x1);
        gbc.writeMem(0x49c8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x1441, gbc.sp());
        EXPECT(0x49ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0070
        gbc.setState(0xdb2a, 0x5bfd, 0xef90, 0x895b, 0x6a6c, 0xfd9f, 0x1, 0x0);
        gbc.writeMem(0xdb2a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x5bfd, gbc.sp());
        EXPECT(0xdb2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb2a));
        EXPECT(0x5b, gbc.readMem(0xdb2b));
        // CB 5B 0071
        gbc.setState(0xcd97, 0x42fd, 0xc720, 0xd42a, 0xfde9, 0xabab, 0x0, 0x0);
        gbc.writeMem(0xcd97, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x42fd, gbc.sp());
        EXPECT(0xcd99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd97));
        EXPECT(0x5b, gbc.readMem(0xcd98));
        // CB 5B 0072
        gbc.setState(0xd6ca, 0x6b5f, 0xa5d0, 0xfe2, 0x72ad, 0x99da, 0x0, 0x0);
        gbc.writeMem(0xd6ca, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x6b5f, gbc.sp());
        EXPECT(0xd6cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6ca));
        EXPECT(0x5b, gbc.readMem(0xd6cb));
        // CB 5B 0074
        gbc.setState(0x5354, 0x3038, 0x5e40, 0xd5d5, 0x77a3, 0xec27, 0x0, 0x1);
        gbc.writeMem(0x5354, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x3038, gbc.sp());
        EXPECT(0x5356, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0075
        gbc.setState(0x9250, 0x42aa, 0xe860, 0x9cf7, 0xcbd5, 0xdd78, 0x0, 0x1);
        gbc.writeMem(0x9250, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x42aa, gbc.sp());
        EXPECT(0x9252, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9250));
        EXPECT(0x5b, gbc.readMem(0x9251));
        // CB 5B 0076
        gbc.setState(0x31f9, 0x49ca, 0x96a0, 0x2dfa, 0x6230, 0x4e26, 0x1, 0x0);
        gbc.writeMem(0x31f9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x49ca, gbc.sp());
        EXPECT(0x31fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0078
        gbc.setState(0x3283, 0x5994, 0xd5b0, 0x39a5, 0x16e2, 0x2428, 0x0, 0x1);
        gbc.writeMem(0x3283, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x5994, gbc.sp());
        EXPECT(0x3285, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0079
        gbc.setState(0xef86, 0xc27b, 0xe20, 0xaeb7, 0x2a7b, 0x50c4, 0x1, 0x0);
        gbc.writeMem(0xef86, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xc27b, gbc.sp());
        EXPECT(0xef88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef86));
        EXPECT(0x5b, gbc.readMem(0xef87));
        // CB 5B 007A
        gbc.setState(0x33da, 0x72e2, 0x8670, 0x679e, 0xabd9, 0x4a1, 0x1, 0x0);
        gbc.writeMem(0x33da, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x72e2, gbc.sp());
        EXPECT(0x33dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 007B
        gbc.setState(0xe92e, 0xeb8b, 0xa630, 0xf49a, 0x486b, 0xd955, 0x0, 0x0);
        gbc.writeMem(0xe92e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xeb8b, gbc.sp());
        EXPECT(0xe930, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe92e));
        EXPECT(0x5b, gbc.readMem(0xe92f));
        // CB 5B 007C
        gbc.setState(0x340, 0x6283, 0xca90, 0xc2c0, 0xbc9b, 0xe988, 0x1, 0x0);
        gbc.writeMem(0x340, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x6283, gbc.sp());
        EXPECT(0x342, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 007D
        gbc.setState(0x6ee8, 0x66d9, 0xd320, 0x8951, 0xf114, 0x8c41, 0x1, 0x0);
        gbc.writeMem(0x6ee8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x66d9, gbc.sp());
        EXPECT(0x6eea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 007E
        gbc.setState(0x40f, 0x93c4, 0x4ec0, 0x21e3, 0xdbb6, 0x849a, 0x0, 0x1);
        gbc.writeMem(0x40f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x93c4, gbc.sp());
        EXPECT(0x411, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 007F
        gbc.setState(0xdbf6, 0x7cd6, 0x70a0, 0xff2a, 0xe4fa, 0x64dc, 0x0, 0x0);
        gbc.writeMem(0xdbf6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x7cd6, gbc.sp());
        EXPECT(0xdbf8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbf6));
        EXPECT(0x5b, gbc.readMem(0xdbf7));
        // CB 5B 0080
        gbc.setState(0xd6ed, 0x8397, 0xe920, 0x78a6, 0x5f3b, 0x370a, 0x0, 0x1);
        gbc.writeMem(0xd6ed, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x8397, gbc.sp());
        EXPECT(0xd6ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6ed));
        EXPECT(0x5b, gbc.readMem(0xd6ee));
        // CB 5B 0081
        gbc.setState(0xb4a, 0x8239, 0xbbd0, 0x33a5, 0xefcf, 0x3010, 0x0, 0x1);
        gbc.writeMem(0xb4a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x8239, gbc.sp());
        EXPECT(0xb4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0082
        gbc.setState(0xd535, 0x983f, 0xdc40, 0x9e3f, 0x5587, 0x192e, 0x1, 0x0);
        gbc.writeMem(0xd535, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x983f, gbc.sp());
        EXPECT(0xd537, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd535));
        EXPECT(0x5b, gbc.readMem(0xd536));
        // CB 5B 0083
        gbc.setState(0x24, 0x19e, 0x7830, 0xcae1, 0x245b, 0x976c, 0x0, 0x1);
        gbc.writeMem(0x24, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x19e, gbc.sp());
        EXPECT(0x26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0084
        gbc.setState(0x235, 0xea24, 0x5170, 0xacbd, 0x7082, 0x65ef, 0x1, 0x1);
        gbc.writeMem(0x235, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xea24, gbc.sp());
        EXPECT(0x237, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0086
        gbc.setState(0xc6f, 0xda7, 0xaa60, 0xd41a, 0x8e34, 0x6a96, 0x0, 0x0);
        gbc.writeMem(0xc6f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xda7, gbc.sp());
        EXPECT(0xc71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0087
        gbc.setState(0xd866, 0x8abd, 0x4680, 0x91ce, 0x26fe, 0x9020, 0x0, 0x0);
        gbc.writeMem(0xd866, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x8abd, gbc.sp());
        EXPECT(0xd868, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd866));
        EXPECT(0x5b, gbc.readMem(0xd867));
        // CB 5B 0088
        gbc.setState(0x9822, 0x9bf9, 0x260, 0xf26d, 0x58de, 0x6c4d, 0x0, 0x0);
        gbc.writeMem(0x9822, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x9bf9, gbc.sp());
        EXPECT(0x9824, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9822));
        EXPECT(0x5b, gbc.readMem(0x9823));
        // CB 5B 0089
        gbc.setState(0x8811, 0x5971, 0x55a0, 0xbe5, 0xb523, 0xd0f7, 0x0, 0x0);
        gbc.writeMem(0x8811, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x5971, gbc.sp());
        EXPECT(0x8813, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8811));
        EXPECT(0x5b, gbc.readMem(0x8812));
        // CB 5B 008A
        gbc.setState(0x285f, 0x694e, 0x1750, 0x5814, 0xb3e3, 0x1cf3, 0x1, 0x0);
        gbc.writeMem(0x285f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x694e, gbc.sp());
        EXPECT(0x2861, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 008B
        gbc.setState(0xbfd9, 0x4cf5, 0x8130, 0xb474, 0x236d, 0xbb30, 0x0, 0x1);
        gbc.writeMem(0xbfd9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x4cf5, gbc.sp());
        EXPECT(0xbfdb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfd9));
        EXPECT(0x5b, gbc.readMem(0xbfda));
        // CB 5B 008C
        gbc.setState(0xd0be, 0xc264, 0x6bd0, 0x1a8, 0xbb9c, 0x36d, 0x1, 0x1);
        gbc.writeMem(0xd0be, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xc264, gbc.sp());
        EXPECT(0xd0c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0be));
        EXPECT(0x5b, gbc.readMem(0xd0bf));
        // CB 5B 008D
        gbc.setState(0xa5b9, 0x13de, 0x8360, 0x9541, 0x26a, 0x45d9, 0x0, 0x1);
        gbc.writeMem(0xa5b9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x13de, gbc.sp());
        EXPECT(0xa5bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa5b9));
        EXPECT(0x5b, gbc.readMem(0xa5ba));
        // CB 5B 008E
        gbc.setState(0x728c, 0xe9a8, 0xbfb0, 0x12cb, 0x98e7, 0x1d3b, 0x0, 0x0);
        gbc.writeMem(0x728c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xe9a8, gbc.sp());
        EXPECT(0x728e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 008F
        gbc.setState(0xdc91, 0xb97c, 0x6790, 0x98dd, 0x280, 0x5888, 0x1, 0x0);
        gbc.writeMem(0xdc91, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xb97c, gbc.sp());
        EXPECT(0xdc93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc91));
        EXPECT(0x5b, gbc.readMem(0xdc92));
        // CB 5B 0090
        gbc.setState(0xb59c, 0x31bc, 0xa380, 0xe5a7, 0xb764, 0xf00e, 0x1, 0x0);
        gbc.writeMem(0xb59c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x31bc, gbc.sp());
        EXPECT(0xb59e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb59c));
        EXPECT(0x5b, gbc.readMem(0xb59d));
        // CB 5B 0091
        gbc.setState(0x66c2, 0x9591, 0xc000, 0x69a7, 0x6219, 0xee18, 0x1, 0x1);
        gbc.writeMem(0x66c2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x9591, gbc.sp());
        EXPECT(0x66c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0092
        gbc.setState(0x4d4a, 0x85bc, 0xa310, 0x7c0a, 0x5633, 0x4f2, 0x0, 0x0);
        gbc.writeMem(0x4d4a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x85bc, gbc.sp());
        EXPECT(0x4d4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0093
        gbc.setState(0xef49, 0xed4, 0x5c80, 0x4d6f, 0xab75, 0xc994, 0x1, 0x0);
        gbc.writeMem(0xef49, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xed4, gbc.sp());
        EXPECT(0xef4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef49));
        EXPECT(0x5b, gbc.readMem(0xef4a));
        // CB 5B 0094
        gbc.setState(0xab18, 0x4744, 0x48e0, 0x90bd, 0x9f76, 0x27e4, 0x0, 0x0);
        gbc.writeMem(0xab18, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x4744, gbc.sp());
        EXPECT(0xab1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab18));
        EXPECT(0x5b, gbc.readMem(0xab19));
        // CB 5B 0095
        gbc.setState(0x84b1, 0x822a, 0xf470, 0x7ea1, 0xf9c4, 0x4411, 0x0, 0x0);
        gbc.writeMem(0x84b1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x822a, gbc.sp());
        EXPECT(0x84b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84b1));
        EXPECT(0x5b, gbc.readMem(0x84b2));
        // CB 5B 0096
        gbc.setState(0xe9e, 0x506d, 0xb2e0, 0xf328, 0x20c, 0xd375, 0x1, 0x0);
        gbc.writeMem(0xe9e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x506d, gbc.sp());
        EXPECT(0xea0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0097
        gbc.setState(0x9c43, 0xf7e3, 0xd00, 0x4629, 0x38de, 0x777, 0x1, 0x0);
        gbc.writeMem(0x9c43, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xf7e3, gbc.sp());
        EXPECT(0x9c45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c43));
        EXPECT(0x5b, gbc.readMem(0x9c44));
        // CB 5B 0098
        gbc.setState(0xc8e5, 0x1b33, 0xea00, 0x3f60, 0xd2eb, 0xa61b, 0x1, 0x0);
        gbc.writeMem(0xc8e5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x1b33, gbc.sp());
        EXPECT(0xc8e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8e5));
        EXPECT(0x5b, gbc.readMem(0xc8e6));
        // CB 5B 0099
        gbc.setState(0x87d2, 0xc025, 0x7630, 0x332d, 0xa1b4, 0x86c, 0x0, 0x0);
        gbc.writeMem(0x87d2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xc025, gbc.sp());
        EXPECT(0x87d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87d2));
        EXPECT(0x5b, gbc.readMem(0x87d3));
        // CB 5B 009A
        gbc.setState(0xe3b8, 0x4f67, 0x16b0, 0x4dd4, 0xecae, 0xc45f, 0x1, 0x1);
        gbc.writeMem(0xe3b8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x4f67, gbc.sp());
        EXPECT(0xe3ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3b8));
        EXPECT(0x5b, gbc.readMem(0xe3b9));
        // CB 5B 009B
        gbc.setState(0xb017, 0xf62a, 0xd180, 0x4865, 0xc486, 0x5afa, 0x0, 0x0);
        gbc.writeMem(0xb017, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xf62a, gbc.sp());
        EXPECT(0xb019, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb017));
        EXPECT(0x5b, gbc.readMem(0xb018));
        // CB 5B 009C
        gbc.setState(0x463c, 0x1163, 0xe390, 0x7747, 0x652f, 0x3cb2, 0x1, 0x0);
        gbc.writeMem(0x463c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x1163, gbc.sp());
        EXPECT(0x463e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 009D
        gbc.setState(0xcf59, 0xf8c5, 0x8fb0, 0x2686, 0xaccb, 0x66c0, 0x1, 0x0);
        gbc.writeMem(0xcf59, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xf8c5, gbc.sp());
        EXPECT(0xcf5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf59));
        EXPECT(0x5b, gbc.readMem(0xcf5a));
        // CB 5B 009E
        gbc.setState(0xcf07, 0x377c, 0x50b0, 0x689c, 0xf904, 0x3a01, 0x1, 0x0);
        gbc.writeMem(0xcf07, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x377c, gbc.sp());
        EXPECT(0xcf09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf07));
        EXPECT(0x5b, gbc.readMem(0xcf08));
        // CB 5B 009F
        gbc.setState(0x2c26, 0x56bd, 0x9130, 0x91dd, 0x2b68, 0xdc9f, 0x1, 0x1);
        gbc.writeMem(0x2c26, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x56bd, gbc.sp());
        EXPECT(0x2c28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00A0
        gbc.setState(0xe76f, 0x1a3b, 0xb810, 0x8c99, 0xbd10, 0xfc08, 0x0, 0x1);
        gbc.writeMem(0xe76f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x1a3b, gbc.sp());
        EXPECT(0xe771, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe76f));
        EXPECT(0x5b, gbc.readMem(0xe770));
        // CB 5B 00A1
        gbc.setState(0xe7f4, 0xe9cb, 0x7320, 0xd3ab, 0x8a1a, 0xa748, 0x0, 0x1);
        gbc.writeMem(0xe7f4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xe9cb, gbc.sp());
        EXPECT(0xe7f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7f4));
        EXPECT(0x5b, gbc.readMem(0xe7f5));
        // CB 5B 00A2
        gbc.setState(0x4d9d, 0x55f5, 0xf910, 0x3059, 0xe48d, 0x80e3, 0x1, 0x0);
        gbc.writeMem(0x4d9d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x55f5, gbc.sp());
        EXPECT(0x4d9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00A3
        gbc.setState(0x2d61, 0xb5bb, 0xfb20, 0x9869, 0x483d, 0xcae8, 0x1, 0x1);
        gbc.writeMem(0x2d61, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xb5bb, gbc.sp());
        EXPECT(0x2d63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00A4
        gbc.setState(0x4feb, 0x68ce, 0x5c0, 0xf465, 0xc614, 0xae63, 0x0, 0x1);
        gbc.writeMem(0x4feb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x68ce, gbc.sp());
        EXPECT(0x4fed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00A5
        gbc.setState(0xe578, 0xd971, 0x7dd0, 0x8081, 0xf188, 0x9798, 0x0, 0x1);
        gbc.writeMem(0xe578, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xd971, gbc.sp());
        EXPECT(0xe57a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe578));
        EXPECT(0x5b, gbc.readMem(0xe579));
        // CB 5B 00A6
        gbc.setState(0x1ae2, 0x4059, 0x4a70, 0xff23, 0x5a4d, 0x81f3, 0x0, 0x0);
        gbc.writeMem(0x1ae2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x4059, gbc.sp());
        EXPECT(0x1ae4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00A7
        gbc.setState(0xa7c, 0xfad5, 0xaf90, 0x1991, 0xa15f, 0x640, 0x1, 0x1);
        gbc.writeMem(0xa7c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xfad5, gbc.sp());
        EXPECT(0xa7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00A8
        gbc.setState(0x4b34, 0x1def, 0x8c60, 0xacf8, 0xd307, 0x4cd6, 0x0, 0x0);
        gbc.writeMem(0x4b34, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x1def, gbc.sp());
        EXPECT(0x4b36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00A9
        gbc.setState(0xd09e, 0x91cf, 0xd730, 0xc738, 0xb584, 0x2186, 0x0, 0x1);
        gbc.writeMem(0xd09e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x91cf, gbc.sp());
        EXPECT(0xd0a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd09e));
        EXPECT(0x5b, gbc.readMem(0xd09f));
        // CB 5B 00AA
        gbc.setState(0x574c, 0xb933, 0x9980, 0x9166, 0xdf5d, 0x1b3f, 0x1, 0x1);
        gbc.writeMem(0x574c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xb933, gbc.sp());
        EXPECT(0x574e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00AB
        gbc.setState(0xbf44, 0xc0f0, 0x2b80, 0x451d, 0x533b, 0x83c7, 0x1, 0x0);
        gbc.writeMem(0xbf44, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xc0f0, gbc.sp());
        EXPECT(0xbf46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf44));
        EXPECT(0x5b, gbc.readMem(0xbf45));
        // CB 5B 00AC
        gbc.setState(0xa46d, 0x8dba, 0x5b70, 0xa694, 0xf6f, 0xb6d7, 0x0, 0x0);
        gbc.writeMem(0xa46d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x8dba, gbc.sp());
        EXPECT(0xa46f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa46d));
        EXPECT(0x5b, gbc.readMem(0xa46e));
        // CB 5B 00AD
        gbc.setState(0x75e2, 0xc643, 0xe700, 0x2877, 0x8055, 0x9f18, 0x1, 0x0);
        gbc.writeMem(0x75e2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xc643, gbc.sp());
        EXPECT(0x75e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00AE
        gbc.setState(0x4010, 0x516e, 0xc30, 0x83bd, 0x77d2, 0x482b, 0x1, 0x0);
        gbc.writeMem(0x4010, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x516e, gbc.sp());
        EXPECT(0x4012, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00AF
        gbc.setState(0xa1af, 0xcb24, 0xf00, 0x6573, 0x3a9b, 0xbd3, 0x0, 0x1);
        gbc.writeMem(0xa1af, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xcb24, gbc.sp());
        EXPECT(0xa1b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1af));
        EXPECT(0x5b, gbc.readMem(0xa1b0));
        // CB 5B 00B0
        gbc.setState(0x596a, 0x9ccd, 0x3670, 0x631b, 0xbd80, 0xf9ef, 0x0, 0x0);
        gbc.writeMem(0x596a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x9ccd, gbc.sp());
        EXPECT(0x596c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00B1
        gbc.setState(0x6223, 0x61d6, 0xcd80, 0xd6f4, 0xffcf, 0xaf9f, 0x1, 0x1);
        gbc.writeMem(0x6223, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x61d6, gbc.sp());
        EXPECT(0x6225, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00B2
        gbc.setState(0xe4fa, 0x7fa2, 0xf200, 0xab83, 0xcca5, 0xd55a, 0x1, 0x1);
        gbc.writeMem(0xe4fa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x7fa2, gbc.sp());
        EXPECT(0xe4fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4fa));
        EXPECT(0x5b, gbc.readMem(0xe4fb));
        // CB 5B 00B3
        gbc.setState(0xd37a, 0xb03a, 0xa2f0, 0x4039, 0xbd70, 0xfbd8, 0x0, 0x0);
        gbc.writeMem(0xd37a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xb03a, gbc.sp());
        EXPECT(0xd37c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd37a));
        EXPECT(0x5b, gbc.readMem(0xd37b));
        // CB 5B 00B4
        gbc.setState(0xb54, 0x7918, 0xb2f0, 0xdb0b, 0xb22f, 0x55a4, 0x1, 0x1);
        gbc.writeMem(0xb54, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x7918, gbc.sp());
        EXPECT(0xb56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00B5
        gbc.setState(0x646a, 0x6d51, 0x1a0, 0xc9b3, 0x406a, 0xfb72, 0x0, 0x0);
        gbc.writeMem(0x646a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x6d51, gbc.sp());
        EXPECT(0x646c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00B6
        gbc.setState(0x7280, 0x9cb6, 0xf20, 0x634d, 0x222a, 0xc5a5, 0x0, 0x1);
        gbc.writeMem(0x7280, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x9cb6, gbc.sp());
        EXPECT(0x7282, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00B7
        gbc.setState(0x7e2f, 0xe3cc, 0xe5b0, 0xe55, 0x1cb, 0x5870, 0x0, 0x0);
        gbc.writeMem(0x7e2f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xe3cc, gbc.sp());
        EXPECT(0x7e31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00B8
        gbc.setState(0x572, 0x3055, 0xbef0, 0xa560, 0x1b4b, 0x839d, 0x0, 0x1);
        gbc.writeMem(0x572, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x3055, gbc.sp());
        EXPECT(0x574, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00B9
        gbc.setState(0xa6d8, 0x7fdd, 0x6cb0, 0xf365, 0x9496, 0x84ad, 0x0, 0x0);
        gbc.writeMem(0xa6d8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x7fdd, gbc.sp());
        EXPECT(0xa6da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6d8));
        EXPECT(0x5b, gbc.readMem(0xa6d9));
        // CB 5B 00BB
        gbc.setState(0x4002, 0x1bad, 0x5700, 0xfe67, 0xee77, 0xef47, 0x0, 0x1);
        gbc.writeMem(0x4002, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x1bad, gbc.sp());
        EXPECT(0x4004, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00BC
        gbc.setState(0x7bb5, 0x8e40, 0x46b0, 0xcbab, 0x2272, 0x737d, 0x0, 0x0);
        gbc.writeMem(0x7bb5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x8e40, gbc.sp());
        EXPECT(0x7bb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00BD
        gbc.setState(0x8ffe, 0x64f9, 0x9ce0, 0xa585, 0x17a6, 0xa0bc, 0x0, 0x1);
        gbc.writeMem(0x8ffe, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x64f9, gbc.sp());
        EXPECT(0x9000, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ffe));
        EXPECT(0x5b, gbc.readMem(0x8fff));
        // CB 5B 00BE
        gbc.setState(0xcdb8, 0x37c6, 0x5200, 0xdb21, 0x2127, 0xae52, 0x1, 0x0);
        gbc.writeMem(0xcdb8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x37c6, gbc.sp());
        EXPECT(0xcdba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdb8));
        EXPECT(0x5b, gbc.readMem(0xcdb9));
        // CB 5B 00BF
        gbc.setState(0x4514, 0x8c8a, 0x28c0, 0x4f94, 0x7d4d, 0x4e42, 0x1, 0x1);
        gbc.writeMem(0x4514, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x8c8a, gbc.sp());
        EXPECT(0x4516, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00C0
        gbc.setState(0xba06, 0x1b2, 0x3680, 0x6053, 0x61d0, 0x4748, 0x1, 0x1);
        gbc.writeMem(0xba06, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x1b2, gbc.sp());
        EXPECT(0xba08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba06));
        EXPECT(0x5b, gbc.readMem(0xba07));
        // CB 5B 00C1
        gbc.setState(0x77e8, 0x70ea, 0x67c0, 0x1297, 0xe25d, 0x7b40, 0x0, 0x0);
        gbc.writeMem(0x77e8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x70ea, gbc.sp());
        EXPECT(0x77ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00C2
        gbc.setState(0x1143, 0xbefd, 0xcc40, 0xacb2, 0xcee2, 0x39b5, 0x0, 0x1);
        gbc.writeMem(0x1143, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xbefd, gbc.sp());
        EXPECT(0x1145, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00C3
        gbc.setState(0x2b5c, 0xd19f, 0xb9f0, 0xce35, 0x71bc, 0x74d2, 0x0, 0x1);
        gbc.writeMem(0x2b5c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xd19f, gbc.sp());
        EXPECT(0x2b5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00C4
        gbc.setState(0x55fd, 0xe233, 0x7570, 0x116f, 0x1f5a, 0x9069, 0x1, 0x1);
        gbc.writeMem(0x55fd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xe233, gbc.sp());
        EXPECT(0x55ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00C5
        gbc.setState(0x5817, 0xd2e6, 0x25d0, 0xcef6, 0x74ed, 0x80de, 0x1, 0x0);
        gbc.writeMem(0x5817, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xd2e6, gbc.sp());
        EXPECT(0x5819, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00C6
        gbc.setState(0x4dad, 0x586b, 0x8e10, 0xe7dd, 0x34f4, 0x47ba, 0x0, 0x0);
        gbc.writeMem(0x4dad, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x586b, gbc.sp());
        EXPECT(0x4daf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00C7
        gbc.setState(0x659f, 0xb226, 0x5b00, 0x423, 0xa39c, 0xca9f, 0x1, 0x1);
        gbc.writeMem(0x659f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xb226, gbc.sp());
        EXPECT(0x65a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00C8
        gbc.setState(0x5163, 0x41ec, 0x5d40, 0xca11, 0xde6f, 0x2dbd, 0x1, 0x1);
        gbc.writeMem(0x5163, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x41ec, gbc.sp());
        EXPECT(0x5165, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00C9
        gbc.setState(0x4730, 0xee3, 0x9fc0, 0x5065, 0x106b, 0x2569, 0x0, 0x1);
        gbc.writeMem(0x4730, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xee3, gbc.sp());
        EXPECT(0x4732, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00CA
        gbc.setState(0xa2ab, 0xa21e, 0xd190, 0xfd61, 0xb917, 0xb1d, 0x1, 0x1);
        gbc.writeMem(0xa2ab, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xa21e, gbc.sp());
        EXPECT(0xa2ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2ab));
        EXPECT(0x5b, gbc.readMem(0xa2ac));
        // CB 5B 00CB
        gbc.setState(0x84db, 0x653b, 0xd5b0, 0xd99b, 0x2283, 0xc048, 0x0, 0x1);
        gbc.writeMem(0x84db, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x653b, gbc.sp());
        EXPECT(0x84dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84db));
        EXPECT(0x5b, gbc.readMem(0x84dc));
        // CB 5B 00CC
        gbc.setState(0x5b07, 0xe1fd, 0x3f10, 0x994d, 0xfc10, 0xd16d, 0x1, 0x1);
        gbc.writeMem(0x5b07, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xe1fd, gbc.sp());
        EXPECT(0x5b09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00CD
        gbc.setState(0x3159, 0x456d, 0xd140, 0xcb05, 0x74dd, 0xb7aa, 0x1, 0x1);
        gbc.writeMem(0x3159, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x456d, gbc.sp());
        EXPECT(0x315b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00CE
        gbc.setState(0x4da1, 0xf70b, 0xc3c0, 0x25e5, 0x43f3, 0x9e17, 0x0, 0x1);
        gbc.writeMem(0x4da1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xf70b, gbc.sp());
        EXPECT(0x4da3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00CF
        gbc.setState(0x7ca7, 0xa80c, 0x1a90, 0xa707, 0x977a, 0x50e3, 0x1, 0x0);
        gbc.writeMem(0x7ca7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xa80c, gbc.sp());
        EXPECT(0x7ca9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00D0
        gbc.setState(0x5e71, 0x60a, 0xe3b0, 0x778f, 0xb00b, 0x7892, 0x0, 0x0);
        gbc.writeMem(0x5e71, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x60a, gbc.sp());
        EXPECT(0x5e73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00D1
        gbc.setState(0xedb, 0xfcc3, 0xc380, 0x87, 0x7428, 0xbfae, 0x0, 0x0);
        gbc.writeMem(0xedb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xfcc3, gbc.sp());
        EXPECT(0xedd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00D2
        gbc.setState(0x2ae3, 0x7e46, 0xc440, 0xd105, 0x6954, 0xfcb5, 0x0, 0x1);
        gbc.writeMem(0x2ae3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x7e46, gbc.sp());
        EXPECT(0x2ae5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00D3
        gbc.setState(0xeba3, 0x476f, 0x9530, 0x5a48, 0xb6e6, 0x6e26, 0x0, 0x1);
        gbc.writeMem(0xeba3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x476f, gbc.sp());
        EXPECT(0xeba5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeba3));
        EXPECT(0x5b, gbc.readMem(0xeba4));
        // CB 5B 00D4
        gbc.setState(0xd164, 0xbb9b, 0x6e90, 0x2ee7, 0x22d7, 0xd100, 0x0, 0x0);
        gbc.writeMem(0xd164, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xbb9b, gbc.sp());
        EXPECT(0xd166, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd164));
        EXPECT(0x5b, gbc.readMem(0xd165));
        // CB 5B 00D5
        gbc.setState(0xa1d8, 0xf6c4, 0xd10, 0xf7d9, 0x54e5, 0xe23f, 0x1, 0x0);
        gbc.writeMem(0xa1d8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xf6c4, gbc.sp());
        EXPECT(0xa1da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1d8));
        EXPECT(0x5b, gbc.readMem(0xa1d9));
        // CB 5B 00D6
        gbc.setState(0x6b49, 0x945c, 0x7f00, 0xae77, 0xa28c, 0xfafb, 0x1, 0x1);
        gbc.writeMem(0x6b49, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x945c, gbc.sp());
        EXPECT(0x6b4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00D8
        gbc.setState(0xdd76, 0x4f77, 0xc8e0, 0x239d, 0x8d52, 0xcd15, 0x0, 0x0);
        gbc.writeMem(0xdd76, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x4f77, gbc.sp());
        EXPECT(0xdd78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd76));
        EXPECT(0x5b, gbc.readMem(0xdd77));
        // CB 5B 00D9
        gbc.setState(0x9a85, 0x319f, 0xc2f0, 0x4686, 0x79f7, 0x9619, 0x1, 0x1);
        gbc.writeMem(0x9a85, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x319f, gbc.sp());
        EXPECT(0x9a87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a85));
        EXPECT(0x5b, gbc.readMem(0x9a86));
        // CB 5B 00DA
        gbc.setState(0xc74b, 0x78b9, 0xdd60, 0x4cbe, 0x373e, 0x680, 0x1, 0x1);
        gbc.writeMem(0xc74b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x78b9, gbc.sp());
        EXPECT(0xc74d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc74b));
        EXPECT(0x5b, gbc.readMem(0xc74c));
        // CB 5B 00DB
        gbc.setState(0xa35f, 0xb572, 0x86d0, 0x935e, 0x9fb, 0x4fa6, 0x1, 0x0);
        gbc.writeMem(0xa35f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xb572, gbc.sp());
        EXPECT(0xa361, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa35f));
        EXPECT(0x5b, gbc.readMem(0xa360));
        // CB 5B 00DC
        gbc.setState(0x8719, 0x9747, 0x76d0, 0xa788, 0x3d09, 0x70d, 0x1, 0x0);
        gbc.writeMem(0x8719, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x9747, gbc.sp());
        EXPECT(0x871b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8719));
        EXPECT(0x5b, gbc.readMem(0x871a));
        // CB 5B 00DD
        gbc.setState(0xe279, 0x80d0, 0xa0d0, 0xd85b, 0x409f, 0x3d2e, 0x1, 0x1);
        gbc.writeMem(0xe279, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x80d0, gbc.sp());
        EXPECT(0xe27b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe279));
        EXPECT(0x5b, gbc.readMem(0xe27a));
        // CB 5B 00DE
        gbc.setState(0x516a, 0x624c, 0x6a60, 0xf123, 0xcd6e, 0x1d71, 0x0, 0x1);
        gbc.writeMem(0x516a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x624c, gbc.sp());
        EXPECT(0x516c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00DF
        gbc.setState(0x1715, 0x7d59, 0xb70, 0xc460, 0xfcee, 0x6f5, 0x0, 0x1);
        gbc.writeMem(0x1715, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x7d59, gbc.sp());
        EXPECT(0x1717, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00E0
        gbc.setState(0xd894, 0x4847, 0x6db0, 0x5ef5, 0xfd3a, 0xde57, 0x0, 0x1);
        gbc.writeMem(0xd894, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x4847, gbc.sp());
        EXPECT(0xd896, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd894));
        EXPECT(0x5b, gbc.readMem(0xd895));
        // CB 5B 00E1
        gbc.setState(0x5001, 0x89c5, 0x1eb0, 0xe6dd, 0x9201, 0xb60b, 0x1, 0x0);
        gbc.writeMem(0x5001, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x89c5, gbc.sp());
        EXPECT(0x5003, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00E3
        gbc.setState(0x6010, 0xa0b, 0x1210, 0xa1c3, 0x73de, 0x434e, 0x1, 0x0);
        gbc.writeMem(0x6010, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xa0b, gbc.sp());
        EXPECT(0x6012, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00E4
        gbc.setState(0x95af, 0x9887, 0xc990, 0xdacf, 0x2bb7, 0x985, 0x0, 0x0);
        gbc.writeMem(0x95af, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x9887, gbc.sp());
        EXPECT(0x95b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95af));
        EXPECT(0x5b, gbc.readMem(0x95b0));
        // CB 5B 00E5
        gbc.setState(0x899d, 0xd7a9, 0x7d40, 0x119c, 0x96f2, 0x292f, 0x0, 0x0);
        gbc.writeMem(0x899d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xd7a9, gbc.sp());
        EXPECT(0x899f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x899d));
        EXPECT(0x5b, gbc.readMem(0x899e));
        // CB 5B 00E6
        gbc.setState(0x1dc2, 0xe264, 0xf6b0, 0x366, 0x6844, 0x9bf8, 0x1, 0x1);
        gbc.writeMem(0x1dc2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xe264, gbc.sp());
        EXPECT(0x1dc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00E7
        gbc.setState(0xb393, 0xb423, 0x6c0, 0x209f, 0x2bc8, 0x8204, 0x0, 0x1);
        gbc.writeMem(0xb393, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xb423, gbc.sp());
        EXPECT(0xb395, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb393));
        EXPECT(0x5b, gbc.readMem(0xb394));
        // CB 5B 00E8
        gbc.setState(0xcc8c, 0xf420, 0xcd00, 0xf6dd, 0xb0b3, 0x28d9, 0x1, 0x1);
        gbc.writeMem(0xcc8c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xf420, gbc.sp());
        EXPECT(0xcc8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc8c));
        EXPECT(0x5b, gbc.readMem(0xcc8d));
        // CB 5B 00EA
        gbc.setState(0xec32, 0x415c, 0x2ca0, 0x993a, 0x8d71, 0xf457, 0x1, 0x0);
        gbc.writeMem(0xec32, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x415c, gbc.sp());
        EXPECT(0xec34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec32));
        EXPECT(0x5b, gbc.readMem(0xec33));
        // CB 5B 00EB
        gbc.setState(0x952f, 0x8fa7, 0xab60, 0xc57d, 0xf832, 0x4ae4, 0x1, 0x1);
        gbc.writeMem(0x952f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x8fa7, gbc.sp());
        EXPECT(0x9531, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x952f));
        EXPECT(0x5b, gbc.readMem(0x9530));
        // CB 5B 00EC
        gbc.setState(0x3a3e, 0x34d1, 0x6d40, 0xa86e, 0xfdbf, 0x46e1, 0x0, 0x0);
        gbc.writeMem(0x3a3e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x34d1, gbc.sp());
        EXPECT(0x3a40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00ED
        gbc.setState(0x3c93, 0x9bff, 0xe8b0, 0x943e, 0x268c, 0x4988, 0x1, 0x0);
        gbc.writeMem(0x3c93, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x9bff, gbc.sp());
        EXPECT(0x3c95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00EE
        gbc.setState(0x8235, 0x135b, 0x9120, 0xe90c, 0x1696, 0x32bf, 0x0, 0x0);
        gbc.writeMem(0x8235, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x135b, gbc.sp());
        EXPECT(0x8237, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8235));
        EXPECT(0x5b, gbc.readMem(0x8236));
        // CB 5B 00EF
        gbc.setState(0x6a81, 0x140f, 0x1ee0, 0x1640, 0x86f6, 0x9651, 0x1, 0x0);
        gbc.writeMem(0x6a81, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x140f, gbc.sp());
        EXPECT(0x6a83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00F0
        gbc.setState(0xb26d, 0x8093, 0x5a30, 0x84ab, 0x916c, 0x45a3, 0x1, 0x1);
        gbc.writeMem(0xb26d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x8093, gbc.sp());
        EXPECT(0xb26f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb26d));
        EXPECT(0x5b, gbc.readMem(0xb26e));
        // CB 5B 00F1
        gbc.setState(0x93c5, 0xffcf, 0x3b30, 0x484c, 0x3ff9, 0xd451, 0x0, 0x1);
        gbc.writeMem(0x93c5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xffcf, gbc.sp());
        EXPECT(0x93c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93c5));
        EXPECT(0x5b, gbc.readMem(0x93c6));
        // CB 5B 00F2
        gbc.setState(0x2ccc, 0x209b, 0xb280, 0xbfa9, 0x1996, 0x6e3f, 0x0, 0x0);
        gbc.writeMem(0x2ccc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x209b, gbc.sp());
        EXPECT(0x2cce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00F3
        gbc.setState(0xeaf3, 0xcf19, 0x3100, 0xd07f, 0x5164, 0xdfd3, 0x0, 0x1);
        gbc.writeMem(0xeaf3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xcf19, gbc.sp());
        EXPECT(0xeaf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaf3));
        EXPECT(0x5b, gbc.readMem(0xeaf4));
        // CB 5B 00F4
        gbc.setState(0xcaa3, 0x6c9d, 0xa110, 0x8c99, 0x2f04, 0xc694, 0x0, 0x1);
        gbc.writeMem(0xcaa3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x6c9d, gbc.sp());
        EXPECT(0xcaa5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaa3));
        EXPECT(0x5b, gbc.readMem(0xcaa4));
        // CB 5B 00F6
        gbc.setState(0xa280, 0xe042, 0x3200, 0x3168, 0x1883, 0x4fbd, 0x1, 0x0);
        gbc.writeMem(0xa280, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xe042, gbc.sp());
        EXPECT(0xa282, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa280));
        EXPECT(0x5b, gbc.readMem(0xa281));
        // CB 5B 00F7
        gbc.setState(0xe8f1, 0x4117, 0xa8c0, 0x9264, 0x4d90, 0x9e1c, 0x1, 0x0);
        gbc.writeMem(0xe8f1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x4117, gbc.sp());
        EXPECT(0xe8f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8f1));
        EXPECT(0x5b, gbc.readMem(0xe8f2));
        // CB 5B 00F8
        gbc.setState(0x3b83, 0xba50, 0xd710, 0xf0a9, 0x311a, 0xdd50, 0x0, 0x1);
        gbc.writeMem(0x3b83, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xba50, gbc.sp());
        EXPECT(0x3b85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00F9
        gbc.setState(0x3cb2, 0x2c4f, 0xb0f0, 0x657, 0x4312, 0x9c52, 0x0, 0x0);
        gbc.writeMem(0x3cb2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x2c4f, gbc.sp());
        EXPECT(0x3cb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00FA
        gbc.setState(0xef36, 0x3f7d, 0xa920, 0x854f, 0x7c65, 0xe5ed, 0x0, 0x1);
        gbc.writeMem(0xef36, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x3f7d, gbc.sp());
        EXPECT(0xef38, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef36));
        EXPECT(0x5b, gbc.readMem(0xef37));
        // CB 5B 00FB
        gbc.setState(0x2b7c, 0x3bf5, 0x4860, 0x3d8e, 0x3240, 0x6ec, 0x1, 0x1);
        gbc.writeMem(0x2b7c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x3bf5, gbc.sp());
        EXPECT(0x2b7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 00FD
        gbc.setState(0x426a, 0x975c, 0xfa10, 0xe1ea, 0xe66e, 0xd47f, 0x0, 0x1);
        gbc.writeMem(0x426a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x975c, gbc.sp());
        EXPECT(0x426c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00FE
        gbc.setState(0x448d, 0xad03, 0xb9f0, 0xb5fa, 0x7f8, 0xbd8, 0x0, 0x1);
        gbc.writeMem(0x448d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xad03, gbc.sp());
        EXPECT(0x448f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 00FF
        gbc.setState(0x5146, 0xa854, 0x6c10, 0x4dd5, 0xaf6, 0xc5e3, 0x1, 0x0);
        gbc.writeMem(0x5146, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xa854, gbc.sp());
        EXPECT(0x5148, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0100
        gbc.setState(0x7b, 0xdf02, 0xb080, 0x662d, 0x4320, 0x80f2, 0x0, 0x0);
        gbc.writeMem(0x7b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xdf02, gbc.sp());
        EXPECT(0x7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0101
        gbc.setState(0x2418, 0x6033, 0xccd0, 0x1704, 0x4f9b, 0xd687, 0x1, 0x0);
        gbc.writeMem(0x2418, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x6033, gbc.sp());
        EXPECT(0x241a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0102
        gbc.setState(0x6be2, 0x9405, 0x6b0, 0xf313, 0xb006, 0xbc76, 0x1, 0x1);
        gbc.writeMem(0x6be2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x9405, gbc.sp());
        EXPECT(0x6be4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0103
        gbc.setState(0x7b64, 0x5fd1, 0xc8c0, 0x18ac, 0x25c1, 0xce3d, 0x1, 0x0);
        gbc.writeMem(0x7b64, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x5fd1, gbc.sp());
        EXPECT(0x7b66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0104
        gbc.setState(0x2d72, 0xaf0b, 0xed0, 0xb02, 0x70b3, 0xffb6, 0x1, 0x1);
        gbc.writeMem(0x2d72, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xaf0b, gbc.sp());
        EXPECT(0x2d74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0105
        gbc.setState(0x44a, 0x3f1d, 0x5a10, 0x260, 0x329e, 0x9fbf, 0x1, 0x0);
        gbc.writeMem(0x44a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x3f1d, gbc.sp());
        EXPECT(0x44c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0106
        gbc.setState(0x1927, 0xbc2d, 0x3880, 0x79d7, 0xef1a, 0x9508, 0x1, 0x0);
        gbc.writeMem(0x1927, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xbc2d, gbc.sp());
        EXPECT(0x1929, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0107
        gbc.setState(0xdd2d, 0xb10, 0xd8f0, 0x7109, 0xbe10, 0x319e, 0x1, 0x0);
        gbc.writeMem(0xdd2d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xb10, gbc.sp());
        EXPECT(0xdd2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd2d));
        EXPECT(0x5b, gbc.readMem(0xdd2e));
        // CB 5B 0108
        gbc.setState(0x834e, 0xdc40, 0x9b50, 0x2cf7, 0x1e4e, 0xd8d6, 0x0, 0x0);
        gbc.writeMem(0x834e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xdc40, gbc.sp());
        EXPECT(0x8350, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x834e));
        EXPECT(0x5b, gbc.readMem(0x834f));
        // CB 5B 0109
        gbc.setState(0xa26c, 0x4630, 0xb970, 0xee36, 0x546a, 0xe103, 0x0, 0x1);
        gbc.writeMem(0xa26c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x4630, gbc.sp());
        EXPECT(0xa26e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa26c));
        EXPECT(0x5b, gbc.readMem(0xa26d));
        // CB 5B 010A
        gbc.setState(0x7f8d, 0x5301, 0xd30, 0xec37, 0xd364, 0x61d2, 0x0, 0x0);
        gbc.writeMem(0x7f8d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x5301, gbc.sp());
        EXPECT(0x7f8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 010B
        gbc.setState(0xd855, 0x78a, 0xf360, 0x7f59, 0xbc7e, 0x788d, 0x0, 0x1);
        gbc.writeMem(0xd855, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x78a, gbc.sp());
        EXPECT(0xd857, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd855));
        EXPECT(0x5b, gbc.readMem(0xd856));
        // CB 5B 010C
        gbc.setState(0x193b, 0x2919, 0x4ae0, 0x2adb, 0x2070, 0xdc, 0x0, 0x1);
        gbc.writeMem(0x193b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x2919, gbc.sp());
        EXPECT(0x193d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 010D
        gbc.setState(0x7616, 0x12f5, 0x2780, 0x86cf, 0xe82b, 0x21d9, 0x1, 0x0);
        gbc.writeMem(0x7616, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x12f5, gbc.sp());
        EXPECT(0x7618, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 010E
        gbc.setState(0xa6ff, 0xcc5b, 0x97a0, 0xd732, 0x8273, 0x6968, 0x0, 0x1);
        gbc.writeMem(0xa6ff, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xcc5b, gbc.sp());
        EXPECT(0xa701, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6ff));
        EXPECT(0x5b, gbc.readMem(0xa700));
        // CB 5B 010F
        gbc.setState(0x5b7e, 0x1125, 0x7cf0, 0x4175, 0x6c77, 0xa6c5, 0x0, 0x0);
        gbc.writeMem(0x5b7e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x1125, gbc.sp());
        EXPECT(0x5b80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0110
        gbc.setState(0xa6a2, 0xf3c9, 0x5310, 0xbb09, 0x9e68, 0xdfb4, 0x1, 0x0);
        gbc.writeMem(0xa6a2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xf3c9, gbc.sp());
        EXPECT(0xa6a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6a2));
        EXPECT(0x5b, gbc.readMem(0xa6a3));
        // CB 5B 0111
        gbc.setState(0xe504, 0x2477, 0xa780, 0x6add, 0xfb7c, 0xfbd6, 0x0, 0x0);
        gbc.writeMem(0xe504, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x2477, gbc.sp());
        EXPECT(0xe506, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe504));
        EXPECT(0x5b, gbc.readMem(0xe505));
        // CB 5B 0112
        gbc.setState(0xcccb, 0xe613, 0x430, 0x4f, 0x9fce, 0x8094, 0x0, 0x0);
        gbc.writeMem(0xcccb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xe613, gbc.sp());
        EXPECT(0xcccd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcccb));
        EXPECT(0x5b, gbc.readMem(0xcccc));
        // CB 5B 0113
        gbc.setState(0xe964, 0xa493, 0x3a20, 0xad27, 0x4e21, 0x3271, 0x0, 0x1);
        gbc.writeMem(0xe964, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xa493, gbc.sp());
        EXPECT(0xe966, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe964));
        EXPECT(0x5b, gbc.readMem(0xe965));
        // CB 5B 0114
        gbc.setState(0x34ce, 0x233, 0x4b20, 0x4a68, 0x5e4c, 0x6f05, 0x0, 0x1);
        gbc.writeMem(0x34ce, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x233, gbc.sp());
        EXPECT(0x34d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0115
        gbc.setState(0x4455, 0x5ef1, 0xe810, 0x47cd, 0x9e03, 0xdabb, 0x1, 0x0);
        gbc.writeMem(0x4455, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x5ef1, gbc.sp());
        EXPECT(0x4457, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0116
        gbc.setState(0x3e4f, 0x40d3, 0xb830, 0x49fe, 0xf609, 0xce52, 0x1, 0x0);
        gbc.writeMem(0x3e4f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x40d3, gbc.sp());
        EXPECT(0x3e51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0117
        gbc.setState(0xa980, 0x68e7, 0x4660, 0xc8a, 0x85c3, 0x5321, 0x1, 0x0);
        gbc.writeMem(0xa980, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x68e7, gbc.sp());
        EXPECT(0xa982, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa980));
        EXPECT(0x5b, gbc.readMem(0xa981));
        // CB 5B 0118
        gbc.setState(0x9027, 0xa727, 0xd7d0, 0xc7a5, 0x9b, 0x9b85, 0x0, 0x0);
        gbc.writeMem(0x9027, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xa727, gbc.sp());
        EXPECT(0x9029, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9027));
        EXPECT(0x5b, gbc.readMem(0x9028));
        // CB 5B 0119
        gbc.setState(0x7ab6, 0x9bf6, 0x3760, 0x8fcf, 0x6853, 0x9719, 0x0, 0x0);
        gbc.writeMem(0x7ab6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x9bf6, gbc.sp());
        EXPECT(0x7ab8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 011A
        gbc.setState(0x9145, 0xaa16, 0x1d90, 0x8a6e, 0x3645, 0x3ba6, 0x1, 0x0);
        gbc.writeMem(0x9145, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xaa16, gbc.sp());
        EXPECT(0x9147, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9145));
        EXPECT(0x5b, gbc.readMem(0x9146));
        // CB 5B 011B
        gbc.setState(0xca5a, 0xf6c0, 0xac00, 0xf6b3, 0x80ce, 0xd992, 0x0, 0x1);
        gbc.writeMem(0xca5a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xf6c0, gbc.sp());
        EXPECT(0xca5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca5a));
        EXPECT(0x5b, gbc.readMem(0xca5b));
        // CB 5B 011C
        gbc.setState(0x9b62, 0xbdba, 0xbe10, 0xeca6, 0x8c83, 0x10a2, 0x1, 0x0);
        gbc.writeMem(0x9b62, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xbdba, gbc.sp());
        EXPECT(0x9b64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b62));
        EXPECT(0x5b, gbc.readMem(0x9b63));
        // CB 5B 011D
        gbc.setState(0xd98a, 0x826a, 0xbba0, 0x6535, 0xc9e7, 0xb60c, 0x1, 0x0);
        gbc.writeMem(0xd98a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x826a, gbc.sp());
        EXPECT(0xd98c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd98a));
        EXPECT(0x5b, gbc.readMem(0xd98b));
        // CB 5B 011E
        gbc.setState(0xc949, 0x5e48, 0xb480, 0xfcfb, 0x2cc2, 0xd91f, 0x1, 0x0);
        gbc.writeMem(0xc949, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x5e48, gbc.sp());
        EXPECT(0xc94b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc949));
        EXPECT(0x5b, gbc.readMem(0xc94a));
        // CB 5B 0120
        gbc.setState(0x6ae8, 0x7f98, 0xc770, 0xd982, 0x2e36, 0x9e35, 0x0, 0x1);
        gbc.writeMem(0x6ae8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x7f98, gbc.sp());
        EXPECT(0x6aea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0121
        gbc.setState(0xb5bb, 0x800c, 0x5850, 0xfd7f, 0xf718, 0x2fad, 0x1, 0x1);
        gbc.writeMem(0xb5bb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x800c, gbc.sp());
        EXPECT(0xb5bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5bb));
        EXPECT(0x5b, gbc.readMem(0xb5bc));
        // CB 5B 0122
        gbc.setState(0x2656, 0xe3b, 0xbef0, 0xc899, 0x81e8, 0xb9dd, 0x1, 0x0);
        gbc.writeMem(0x2656, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xe3b, gbc.sp());
        EXPECT(0x2658, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0123
        gbc.setState(0x1887, 0xf307, 0xfba0, 0xf0f0, 0xe45f, 0xd0a7, 0x0, 0x1);
        gbc.writeMem(0x1887, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xf307, gbc.sp());
        EXPECT(0x1889, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0125
        gbc.setState(0x75c7, 0x4bc7, 0x1d40, 0xc728, 0x9598, 0x65c, 0x0, 0x0);
        gbc.writeMem(0x75c7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x4bc7, gbc.sp());
        EXPECT(0x75c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0126
        gbc.setState(0x3d66, 0xea6a, 0xb580, 0x63fc, 0xc42b, 0x500c, 0x0, 0x1);
        gbc.writeMem(0x3d66, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xea6a, gbc.sp());
        EXPECT(0x3d68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0127
        gbc.setState(0x39f8, 0xc7ef, 0xec60, 0xec30, 0xf666, 0xf639, 0x1, 0x0);
        gbc.writeMem(0x39f8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xc7ef, gbc.sp());
        EXPECT(0x39fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0128
        gbc.setState(0xe738, 0xcd16, 0x5970, 0x373d, 0x2a57, 0xf486, 0x0, 0x0);
        gbc.writeMem(0xe738, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xcd16, gbc.sp());
        EXPECT(0xe73a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe738));
        EXPECT(0x5b, gbc.readMem(0xe739));
        // CB 5B 0129
        gbc.setState(0x7edf, 0xd135, 0x9400, 0x87d1, 0x2940, 0x36d1, 0x1, 0x1);
        gbc.writeMem(0x7edf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xd135, gbc.sp());
        EXPECT(0x7ee1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 012A
        gbc.setState(0xe551, 0xd91d, 0x6b90, 0x246f, 0xed89, 0x97de, 0x1, 0x0);
        gbc.writeMem(0xe551, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xd91d, gbc.sp());
        EXPECT(0xe553, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe551));
        EXPECT(0x5b, gbc.readMem(0xe552));
        // CB 5B 012B
        gbc.setState(0xbf75, 0x3812, 0x9000, 0xa33e, 0x5bbb, 0x8b78, 0x1, 0x0);
        gbc.writeMem(0xbf75, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x3812, gbc.sp());
        EXPECT(0xbf77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf75));
        EXPECT(0x5b, gbc.readMem(0xbf76));
        // CB 5B 012C
        gbc.setState(0xa09e, 0xbe5b, 0xb4d0, 0xea1a, 0xcfa2, 0xf697, 0x1, 0x0);
        gbc.writeMem(0xa09e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xbe5b, gbc.sp());
        EXPECT(0xa0a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa09e));
        EXPECT(0x5b, gbc.readMem(0xa09f));
        // CB 5B 012D
        gbc.setState(0x6925, 0xdb4e, 0x82b0, 0xd07c, 0xadf8, 0xbe6f, 0x0, 0x0);
        gbc.writeMem(0x6925, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xdb4e, gbc.sp());
        EXPECT(0x6927, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 012E
        gbc.setState(0x4a26, 0xf5dd, 0x1680, 0xf727, 0x5a72, 0x5b56, 0x0, 0x0);
        gbc.writeMem(0x4a26, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xf5dd, gbc.sp());
        EXPECT(0x4a28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 012F
        gbc.setState(0x746d, 0xf1bb, 0xc2b0, 0xc0fa, 0xabf1, 0x7801, 0x0, 0x1);
        gbc.writeMem(0x746d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xf1bb, gbc.sp());
        EXPECT(0x746f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0130
        gbc.setState(0xa94e, 0x8529, 0xd0, 0x561, 0x543a, 0xf823, 0x0, 0x0);
        gbc.writeMem(0xa94e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x8529, gbc.sp());
        EXPECT(0xa950, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa94e));
        EXPECT(0x5b, gbc.readMem(0xa94f));
        // CB 5B 0131
        gbc.setState(0xea35, 0x6749, 0x4430, 0x9dff, 0x1369, 0x5ccf, 0x0, 0x0);
        gbc.writeMem(0xea35, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x6749, gbc.sp());
        EXPECT(0xea37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea35));
        EXPECT(0x5b, gbc.readMem(0xea36));
        // CB 5B 0132
        gbc.setState(0xb722, 0x5b16, 0x7de0, 0xf678, 0xf082, 0x7f32, 0x1, 0x0);
        gbc.writeMem(0xb722, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x5b16, gbc.sp());
        EXPECT(0xb724, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb722));
        EXPECT(0x5b, gbc.readMem(0xb723));
        // CB 5B 0133
        gbc.setState(0x173, 0xd7a4, 0x1330, 0x4937, 0x66b3, 0x8889, 0x1, 0x0);
        gbc.writeMem(0x173, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xd7a4, gbc.sp());
        EXPECT(0x175, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0134
        gbc.setState(0x6e94, 0xd3ca, 0xe330, 0xa4ec, 0x64ac, 0xa512, 0x1, 0x1);
        gbc.writeMem(0x6e94, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xd3ca, gbc.sp());
        EXPECT(0x6e96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0136
        gbc.setState(0xc23a, 0xb9cc, 0x8e0, 0x2a78, 0x7e37, 0xcee, 0x1, 0x1);
        gbc.writeMem(0xc23a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xb9cc, gbc.sp());
        EXPECT(0xc23c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc23a));
        EXPECT(0x5b, gbc.readMem(0xc23b));
        // CB 5B 0137
        gbc.setState(0x4b8d, 0x60ce, 0x6a10, 0xaa27, 0x6436, 0xea7, 0x0, 0x1);
        gbc.writeMem(0x4b8d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x60ce, gbc.sp());
        EXPECT(0x4b8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0138
        gbc.setState(0x8998, 0x3d19, 0x36d0, 0x2335, 0x4514, 0x8a57, 0x0, 0x1);
        gbc.writeMem(0x8998, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x3d19, gbc.sp());
        EXPECT(0x899a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8998));
        EXPECT(0x5b, gbc.readMem(0x8999));
        // CB 5B 0139
        gbc.setState(0x48b0, 0x5ef1, 0x9910, 0x15a2, 0xc7f, 0x4717, 0x0, 0x1);
        gbc.writeMem(0x48b0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x5ef1, gbc.sp());
        EXPECT(0x48b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 013A
        gbc.setState(0x409f, 0xcf7b, 0xd010, 0xca4c, 0x6412, 0x3720, 0x0, 0x1);
        gbc.writeMem(0x409f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xcf7b, gbc.sp());
        EXPECT(0x40a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 013B
        gbc.setState(0x5037, 0x3f19, 0xc0a0, 0x3849, 0x15ac, 0x97f, 0x0, 0x0);
        gbc.writeMem(0x5037, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x3f19, gbc.sp());
        EXPECT(0x5039, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 013C
        gbc.setState(0x2ed7, 0x12d1, 0x45d0, 0x1cba, 0x7e31, 0xfc7f, 0x0, 0x0);
        gbc.writeMem(0x2ed7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x12d1, gbc.sp());
        EXPECT(0x2ed9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 013D
        gbc.setState(0xabe7, 0xabef, 0x56a0, 0xfefa, 0xf555, 0x3a2a, 0x0, 0x0);
        gbc.writeMem(0xabe7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xabef, gbc.sp());
        EXPECT(0xabe9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabe7));
        EXPECT(0x5b, gbc.readMem(0xabe8));
        // CB 5B 013E
        gbc.setState(0x6042, 0xfa36, 0x9fc0, 0x11ed, 0x811c, 0x69f0, 0x0, 0x0);
        gbc.writeMem(0x6042, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xfa36, gbc.sp());
        EXPECT(0x6044, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 013F
        gbc.setState(0x5998, 0xa44c, 0xe0b0, 0x745d, 0x2084, 0xe75e, 0x0, 0x1);
        gbc.writeMem(0x5998, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xa44c, gbc.sp());
        EXPECT(0x599a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0140
        gbc.setState(0x2c6d, 0x4ae8, 0x9310, 0xdf2b, 0x5112, 0xf06d, 0x0, 0x0);
        gbc.writeMem(0x2c6d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x4ae8, gbc.sp());
        EXPECT(0x2c6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0141
        gbc.setState(0x509, 0xad1e, 0x5000, 0xdad1, 0x35df, 0xc1b1, 0x0, 0x0);
        gbc.writeMem(0x509, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xad1e, gbc.sp());
        EXPECT(0x50b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0142
        gbc.setState(0x52ec, 0x5358, 0x2b80, 0x3f2a, 0xdd50, 0x14d6, 0x0, 0x1);
        gbc.writeMem(0x52ec, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x5358, gbc.sp());
        EXPECT(0x52ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0143
        gbc.setState(0x27da, 0x4979, 0xfef0, 0x2bd0, 0x60f7, 0x959, 0x0, 0x0);
        gbc.writeMem(0x27da, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x4979, gbc.sp());
        EXPECT(0x27dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0144
        gbc.setState(0x5d62, 0x27bc, 0x23d0, 0x5984, 0x5f0, 0x27b0, 0x1, 0x0);
        gbc.writeMem(0x5d62, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x27bc, gbc.sp());
        EXPECT(0x5d64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0145
        gbc.setState(0x14d1, 0xc9af, 0x9dd0, 0xee83, 0xf406, 0x4e08, 0x1, 0x0);
        gbc.writeMem(0x14d1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc9af, gbc.sp());
        EXPECT(0x14d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0146
        gbc.setState(0xc10f, 0x1823, 0xeab0, 0xb9c1, 0x1abc, 0xfea0, 0x0, 0x1);
        gbc.writeMem(0xc10f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x1823, gbc.sp());
        EXPECT(0xc111, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc10f));
        EXPECT(0x5b, gbc.readMem(0xc110));
        // CB 5B 0147
        gbc.setState(0x3b24, 0xa677, 0xaf10, 0x65a0, 0x6fd, 0x61d4, 0x1, 0x0);
        gbc.writeMem(0x3b24, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xa677, gbc.sp());
        EXPECT(0x3b26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0148
        gbc.setState(0x4ea6, 0xd48a, 0xfba0, 0x1464, 0xd614, 0x7497, 0x0, 0x0);
        gbc.writeMem(0x4ea6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xd48a, gbc.sp());
        EXPECT(0x4ea8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0149
        gbc.setState(0x2455, 0xca6f, 0x70, 0xa28b, 0x306b, 0xaf57, 0x1, 0x1);
        gbc.writeMem(0x2455, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xca6f, gbc.sp());
        EXPECT(0x2457, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 014A
        gbc.setState(0x6c50, 0x6113, 0x17c0, 0xc263, 0x5d8b, 0x6da5, 0x0, 0x0);
        gbc.writeMem(0x6c50, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x6113, gbc.sp());
        EXPECT(0x6c52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 014B
        gbc.setState(0x61ec, 0x6d2b, 0x9c60, 0xb7e4, 0xe95b, 0xba36, 0x0, 0x1);
        gbc.writeMem(0x61ec, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x6d2b, gbc.sp());
        EXPECT(0x61ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 014C
        gbc.setState(0xa7ae, 0x9716, 0xc2c0, 0x11ce, 0xd8ff, 0x7b52, 0x1, 0x0);
        gbc.writeMem(0xa7ae, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x9716, gbc.sp());
        EXPECT(0xa7b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7ae));
        EXPECT(0x5b, gbc.readMem(0xa7af));
        // CB 5B 014D
        gbc.setState(0x9335, 0x89a6, 0x900, 0xb132, 0x59fc, 0xd4fb, 0x1, 0x1);
        gbc.writeMem(0x9335, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x89a6, gbc.sp());
        EXPECT(0x9337, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9335));
        EXPECT(0x5b, gbc.readMem(0x9336));
        // CB 5B 014E
        gbc.setState(0x820, 0x49d6, 0x7740, 0x87a5, 0x3fc6, 0xe059, 0x1, 0x1);
        gbc.writeMem(0x820, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x49d6, gbc.sp());
        EXPECT(0x822, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 014F
        gbc.setState(0xe0c2, 0x422f, 0xda90, 0xabdd, 0x3a2c, 0x5e5f, 0x1, 0x1);
        gbc.writeMem(0xe0c2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x422f, gbc.sp());
        EXPECT(0xe0c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0c2));
        EXPECT(0x5b, gbc.readMem(0xe0c3));
        // CB 5B 0150
        gbc.setState(0x9aeb, 0x32ec, 0x4c20, 0x64c7, 0x3e81, 0x77b7, 0x1, 0x0);
        gbc.writeMem(0x9aeb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x32ec, gbc.sp());
        EXPECT(0x9aed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9aeb));
        EXPECT(0x5b, gbc.readMem(0x9aec));
        // CB 5B 0151
        gbc.setState(0x6c2c, 0x52dc, 0x2410, 0xdf74, 0x7281, 0x52f6, 0x0, 0x1);
        gbc.writeMem(0x6c2c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x52dc, gbc.sp());
        EXPECT(0x6c2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0152
        gbc.setState(0x895a, 0xa511, 0xa510, 0xdc3a, 0x218b, 0xbcc4, 0x1, 0x1);
        gbc.writeMem(0x895a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xa511, gbc.sp());
        EXPECT(0x895c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x895a));
        EXPECT(0x5b, gbc.readMem(0x895b));
        // CB 5B 0154
        gbc.setState(0xa472, 0x999, 0x12e0, 0x6696, 0x50f6, 0x2814, 0x0, 0x0);
        gbc.writeMem(0xa472, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x999, gbc.sp());
        EXPECT(0xa474, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa472));
        EXPECT(0x5b, gbc.readMem(0xa473));
        // CB 5B 0155
        gbc.setState(0xbd95, 0xb13d, 0x26f0, 0x5658, 0xce80, 0xcb71, 0x1, 0x0);
        gbc.writeMem(0xbd95, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xb13d, gbc.sp());
        EXPECT(0xbd97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd95));
        EXPECT(0x5b, gbc.readMem(0xbd96));
        // CB 5B 0156
        gbc.setState(0xb067, 0xc705, 0xfa70, 0x7519, 0x47a6, 0xcc40, 0x1, 0x0);
        gbc.writeMem(0xb067, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xc705, gbc.sp());
        EXPECT(0xb069, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb067));
        EXPECT(0x5b, gbc.readMem(0xb068));
        // CB 5B 0157
        gbc.setState(0x9d2, 0xe239, 0x34b0, 0xeb8f, 0xbc4b, 0xa35c, 0x0, 0x1);
        gbc.writeMem(0x9d2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xe239, gbc.sp());
        EXPECT(0x9d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0159
        gbc.setState(0x140b, 0xccc, 0xe530, 0xd3c4, 0xf22, 0xa25c, 0x0, 0x1);
        gbc.writeMem(0x140b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xccc, gbc.sp());
        EXPECT(0x140d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 015B
        gbc.setState(0xdbd3, 0x9cf6, 0x42c0, 0xa2fb, 0x2d2d, 0xe980, 0x0, 0x0);
        gbc.writeMem(0xdbd3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x9cf6, gbc.sp());
        EXPECT(0xdbd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbd3));
        EXPECT(0x5b, gbc.readMem(0xdbd4));
        // CB 5B 015C
        gbc.setState(0xcb92, 0xc4ae, 0xdaa0, 0x9c92, 0x6c1a, 0x97, 0x0, 0x0);
        gbc.writeMem(0xcb92, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xc4ae, gbc.sp());
        EXPECT(0xcb94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb92));
        EXPECT(0x5b, gbc.readMem(0xcb93));
        // CB 5B 015D
        gbc.setState(0xae9c, 0x252, 0x6250, 0x14f3, 0xb698, 0x9133, 0x0, 0x0);
        gbc.writeMem(0xae9c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x252, gbc.sp());
        EXPECT(0xae9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae9c));
        EXPECT(0x5b, gbc.readMem(0xae9d));
        // CB 5B 015E
        gbc.setState(0x46fb, 0x640, 0x5b80, 0xd964, 0x1c1a, 0x8e51, 0x1, 0x0);
        gbc.writeMem(0x46fb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x640, gbc.sp());
        EXPECT(0x46fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 015F
        gbc.setState(0x3411, 0xcd6d, 0xda40, 0x3ced, 0x3ef9, 0xc2a7, 0x0, 0x1);
        gbc.writeMem(0x3411, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xcd6d, gbc.sp());
        EXPECT(0x3413, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0160
        gbc.setState(0xd5d, 0x5387, 0x5420, 0xfef8, 0xefa1, 0x9517, 0x0, 0x1);
        gbc.writeMem(0xd5d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x5387, gbc.sp());
        EXPECT(0xd5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0161
        gbc.setState(0x2251, 0x53c2, 0x400, 0x22c6, 0xd2d3, 0x96f2, 0x1, 0x1);
        gbc.writeMem(0x2251, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x53c2, gbc.sp());
        EXPECT(0x2253, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0162
        gbc.setState(0x97b7, 0x7268, 0x3fa0, 0x940c, 0xe4f, 0xb4c9, 0x1, 0x1);
        gbc.writeMem(0x97b7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x7268, gbc.sp());
        EXPECT(0x97b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97b7));
        EXPECT(0x5b, gbc.readMem(0x97b8));
        // CB 5B 0163
        gbc.setState(0x78cc, 0x323d, 0x5150, 0x768b, 0xfc8e, 0xf1ac, 0x0, 0x0);
        gbc.writeMem(0x78cc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x323d, gbc.sp());
        EXPECT(0x78ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0164
        gbc.setState(0xc3f7, 0x6aa0, 0x5ff0, 0x9dce, 0x2a25, 0x1008, 0x1, 0x0);
        gbc.writeMem(0xc3f7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x6aa0, gbc.sp());
        EXPECT(0xc3f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3f7));
        EXPECT(0x5b, gbc.readMem(0xc3f8));
        // CB 5B 0165
        gbc.setState(0x35f0, 0x5a5c, 0x5e10, 0x6837, 0x8452, 0xe238, 0x1, 0x0);
        gbc.writeMem(0x35f0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x5a5c, gbc.sp());
        EXPECT(0x35f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0166
        gbc.setState(0x38de, 0xb235, 0xc2e0, 0x65e3, 0x7d30, 0xe43d, 0x0, 0x1);
        gbc.writeMem(0x38de, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xb235, gbc.sp());
        EXPECT(0x38e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0167
        gbc.setState(0xb4e2, 0x658a, 0x4850, 0xffd4, 0xde25, 0xb52e, 0x1, 0x1);
        gbc.writeMem(0xb4e2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x658a, gbc.sp());
        EXPECT(0xb4e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4e2));
        EXPECT(0x5b, gbc.readMem(0xb4e3));
        // CB 5B 0168
        gbc.setState(0x76e2, 0xabfd, 0xd5c0, 0x7a2e, 0x17b3, 0x5303, 0x1, 0x1);
        gbc.writeMem(0x76e2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xabfd, gbc.sp());
        EXPECT(0x76e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 016A
        gbc.setState(0xae57, 0xc0bc, 0xb90, 0xeaf5, 0x788e, 0x14cb, 0x0, 0x0);
        gbc.writeMem(0xae57, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xc0bc, gbc.sp());
        EXPECT(0xae59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae57));
        EXPECT(0x5b, gbc.readMem(0xae58));
        // CB 5B 016B
        gbc.setState(0xdf2a, 0x60af, 0xd3a0, 0xc747, 0x9fd, 0x559d, 0x0, 0x1);
        gbc.writeMem(0xdf2a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x60af, gbc.sp());
        EXPECT(0xdf2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf2a));
        EXPECT(0x5b, gbc.readMem(0xdf2b));
        // CB 5B 016C
        gbc.setState(0x694c, 0x3629, 0xd840, 0x4abc, 0xba94, 0xab13, 0x1, 0x1);
        gbc.writeMem(0x694c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x3629, gbc.sp());
        EXPECT(0x694e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 016D
        gbc.setState(0x560e, 0x62ae, 0x8a80, 0x4af6, 0xb0c9, 0x44ff, 0x0, 0x0);
        gbc.writeMem(0x560e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x62ae, gbc.sp());
        EXPECT(0x5610, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 016E
        gbc.setState(0xecbc, 0x75e, 0xb7c0, 0xa0bd, 0xc6b5, 0x57f1, 0x1, 0x0);
        gbc.writeMem(0xecbc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x75e, gbc.sp());
        EXPECT(0xecbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecbc));
        EXPECT(0x5b, gbc.readMem(0xecbd));
        // CB 5B 016F
        gbc.setState(0x1060, 0x5e17, 0x3f80, 0x1f70, 0xcaf1, 0xd2ce, 0x0, 0x0);
        gbc.writeMem(0x1060, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x5e17, gbc.sp());
        EXPECT(0x1062, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0170
        gbc.setState(0xeb1c, 0x3d12, 0xd600, 0x88cc, 0xc1a3, 0xc64b, 0x1, 0x1);
        gbc.writeMem(0xeb1c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x3d12, gbc.sp());
        EXPECT(0xeb1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb1c));
        EXPECT(0x5b, gbc.readMem(0xeb1d));
        // CB 5B 0171
        gbc.setState(0x93dd, 0xabf8, 0xaf0, 0x130e, 0xc528, 0x37d4, 0x0, 0x1);
        gbc.writeMem(0x93dd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xabf8, gbc.sp());
        EXPECT(0x93df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93dd));
        EXPECT(0x5b, gbc.readMem(0x93de));
        // CB 5B 0172
        gbc.setState(0x7762, 0x234c, 0x96e0, 0xaaac, 0x68ac, 0xefeb, 0x0, 0x1);
        gbc.writeMem(0x7762, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x234c, gbc.sp());
        EXPECT(0x7764, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0174
        gbc.setState(0xa6cb, 0xf2cf, 0xe7a0, 0x8975, 0xecc8, 0x506a, 0x1, 0x0);
        gbc.writeMem(0xa6cb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf2cf, gbc.sp());
        EXPECT(0xa6cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6cb));
        EXPECT(0x5b, gbc.readMem(0xa6cc));
        // CB 5B 0175
        gbc.setState(0x5ea6, 0x646d, 0xb060, 0xf454, 0x7eb9, 0x89a4, 0x0, 0x1);
        gbc.writeMem(0x5ea6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x646d, gbc.sp());
        EXPECT(0x5ea8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0176
        gbc.setState(0xa22b, 0x2a00, 0x56c0, 0xb4e9, 0x28f3, 0xcdf2, 0x1, 0x1);
        gbc.writeMem(0xa22b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x2a00, gbc.sp());
        EXPECT(0xa22d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa22b));
        EXPECT(0x5b, gbc.readMem(0xa22c));
        // CB 5B 0177
        gbc.setState(0xde7a, 0x8575, 0x2800, 0x3c27, 0xb886, 0x39f2, 0x1, 0x0);
        gbc.writeMem(0xde7a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x8575, gbc.sp());
        EXPECT(0xde7c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde7a));
        EXPECT(0x5b, gbc.readMem(0xde7b));
        // CB 5B 0178
        gbc.setState(0x28f8, 0x64d4, 0x2560, 0x1b4d, 0x73e1, 0xf123, 0x1, 0x0);
        gbc.writeMem(0x28f8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x64d4, gbc.sp());
        EXPECT(0x28fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0179
        gbc.setState(0x306a, 0xb664, 0x5730, 0x3009, 0xc531, 0xdc1a, 0x1, 0x0);
        gbc.writeMem(0x306a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xb664, gbc.sp());
        EXPECT(0x306c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 017A
        gbc.setState(0x9744, 0xe711, 0xc770, 0x4f93, 0xfba8, 0x4d8e, 0x1, 0x0);
        gbc.writeMem(0x9744, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xe711, gbc.sp());
        EXPECT(0x9746, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9744));
        EXPECT(0x5b, gbc.readMem(0x9745));
        // CB 5B 017B
        gbc.setState(0x7a0, 0x6c06, 0xd7a0, 0xfae8, 0xcc03, 0xb891, 0x1, 0x1);
        gbc.writeMem(0x7a0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x6c06, gbc.sp());
        EXPECT(0x7a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 017C
        gbc.setState(0xd8b3, 0xfcc0, 0x43c0, 0x8cef, 0xefe5, 0xef6f, 0x1, 0x0);
        gbc.writeMem(0xd8b3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xfcc0, gbc.sp());
        EXPECT(0xd8b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8b3));
        EXPECT(0x5b, gbc.readMem(0xd8b4));
        // CB 5B 017D
        gbc.setState(0xd63d, 0x43b1, 0xa520, 0xf2ff, 0xca14, 0x89a1, 0x0, 0x0);
        gbc.writeMem(0xd63d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x43b1, gbc.sp());
        EXPECT(0xd63f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd63d));
        EXPECT(0x5b, gbc.readMem(0xd63e));
        // CB 5B 017E
        gbc.setState(0x4d8, 0x7b37, 0x3bb0, 0x56e8, 0xb8c9, 0x1c27, 0x1, 0x1);
        gbc.writeMem(0x4d8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x7b37, gbc.sp());
        EXPECT(0x4da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 017F
        gbc.setState(0x52c3, 0xc672, 0x73f0, 0x4098, 0x3f3d, 0xbb54, 0x0, 0x0);
        gbc.writeMem(0x52c3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xc672, gbc.sp());
        EXPECT(0x52c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0181
        gbc.setState(0x3442, 0xb6f, 0xc320, 0xcdeb, 0xbb00, 0x81d5, 0x1, 0x0);
        gbc.writeMem(0x3442, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xb6f, gbc.sp());
        EXPECT(0x3444, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0182
        gbc.setState(0x7fc9, 0xd2fe, 0xea60, 0x9aa5, 0x2501, 0xf51e, 0x1, 0x1);
        gbc.writeMem(0x7fc9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xd2fe, gbc.sp());
        EXPECT(0x7fcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0184
        gbc.setState(0x57d8, 0x18b0, 0x8650, 0x97b, 0x1a29, 0x5fc9, 0x0, 0x1);
        gbc.writeMem(0x57d8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x18b0, gbc.sp());
        EXPECT(0x57da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0185
        gbc.setState(0x928f, 0xffe8, 0xcda0, 0x8d3f, 0xbb24, 0x89aa, 0x1, 0x0);
        gbc.writeMem(0x928f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xffe8, gbc.sp());
        EXPECT(0x9291, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x928f));
        EXPECT(0x5b, gbc.readMem(0x9290));
        // CB 5B 0186
        gbc.setState(0x4cf3, 0xdc97, 0xab40, 0xd1c8, 0x629b, 0x410, 0x0, 0x0);
        gbc.writeMem(0x4cf3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xdc97, gbc.sp());
        EXPECT(0x4cf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0187
        gbc.setState(0x2506, 0x17f6, 0x5530, 0xa9a8, 0xaca5, 0x3ba1, 0x1, 0x1);
        gbc.writeMem(0x2506, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x17f6, gbc.sp());
        EXPECT(0x2508, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0188
        gbc.setState(0x62de, 0xe861, 0xe420, 0xbc82, 0x4590, 0x17bf, 0x1, 0x0);
        gbc.writeMem(0x62de, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xe861, gbc.sp());
        EXPECT(0x62e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0189
        gbc.setState(0x41f0, 0x4040, 0x5c0, 0xa195, 0xb2bd, 0x6fa9, 0x1, 0x0);
        gbc.writeMem(0x41f0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x4040, gbc.sp());
        EXPECT(0x41f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 018A
        gbc.setState(0xd0c9, 0x9011, 0xac0, 0x52b, 0x19e0, 0xde2d, 0x1, 0x1);
        gbc.writeMem(0xd0c9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x9011, gbc.sp());
        EXPECT(0xd0cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0c9));
        EXPECT(0x5b, gbc.readMem(0xd0ca));
        // CB 5B 018B
        gbc.setState(0xb561, 0x644, 0x1cf0, 0x36c4, 0x9670, 0xd6aa, 0x1, 0x1);
        gbc.writeMem(0xb561, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x644, gbc.sp());
        EXPECT(0xb563, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb561));
        EXPECT(0x5b, gbc.readMem(0xb562));
        // CB 5B 018C
        gbc.setState(0xc8c9, 0xa573, 0x6440, 0xd8ee, 0xd54b, 0xf649, 0x1, 0x1);
        gbc.writeMem(0xc8c9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xa573, gbc.sp());
        EXPECT(0xc8cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8c9));
        EXPECT(0x5b, gbc.readMem(0xc8ca));
        // CB 5B 018D
        gbc.setState(0x248a, 0x704a, 0xca40, 0xd333, 0xe9b, 0x7ef3, 0x1, 0x1);
        gbc.writeMem(0x248a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x704a, gbc.sp());
        EXPECT(0x248c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 018E
        gbc.setState(0x49c3, 0xceca, 0xb340, 0x4db9, 0x36c7, 0xee6, 0x0, 0x0);
        gbc.writeMem(0x49c3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xceca, gbc.sp());
        EXPECT(0x49c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 018F
        gbc.setState(0x468c, 0x1dd9, 0x2250, 0xd8b9, 0x968f, 0x5a5, 0x0, 0x1);
        gbc.writeMem(0x468c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x1dd9, gbc.sp());
        EXPECT(0x468e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0190
        gbc.setState(0x1b15, 0xed51, 0x3a80, 0xe4c0, 0xf78b, 0xdbf6, 0x1, 0x0);
        gbc.writeMem(0x1b15, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xed51, gbc.sp());
        EXPECT(0x1b17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0191
        gbc.setState(0x3795, 0x4d5f, 0x5800, 0x722f, 0x270e, 0x5b1, 0x0, 0x1);
        gbc.writeMem(0x3795, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x4d5f, gbc.sp());
        EXPECT(0x3797, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0192
        gbc.setState(0x1359, 0xca52, 0x13d0, 0x6f46, 0xd3b7, 0xf453, 0x1, 0x1);
        gbc.writeMem(0x1359, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xca52, gbc.sp());
        EXPECT(0x135b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0193
        gbc.setState(0x2847, 0xa60, 0xfe50, 0xacbc, 0xd99a, 0x63cb, 0x1, 0x0);
        gbc.writeMem(0x2847, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xa60, gbc.sp());
        EXPECT(0x2849, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0194
        gbc.setState(0xec6c, 0xcd66, 0xb370, 0xc60f, 0x5e59, 0xedf5, 0x0, 0x0);
        gbc.writeMem(0xec6c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xcd66, gbc.sp());
        EXPECT(0xec6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec6c));
        EXPECT(0x5b, gbc.readMem(0xec6d));
        // CB 5B 0195
        gbc.setState(0xc50f, 0xe46b, 0xc1c0, 0xc0b9, 0x49f9, 0xd71, 0x0, 0x0);
        gbc.writeMem(0xc50f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xe46b, gbc.sp());
        EXPECT(0xc511, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc50f));
        EXPECT(0x5b, gbc.readMem(0xc510));
        // CB 5B 0196
        gbc.setState(0x484d, 0x8e22, 0xf0f0, 0xb1a7, 0xab40, 0xb795, 0x1, 0x1);
        gbc.writeMem(0x484d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x8e22, gbc.sp());
        EXPECT(0x484f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0197
        gbc.setState(0x92ed, 0xa709, 0x9180, 0x65a5, 0x5ab7, 0xfc9d, 0x0, 0x1);
        gbc.writeMem(0x92ed, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xa709, gbc.sp());
        EXPECT(0x92ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92ed));
        EXPECT(0x5b, gbc.readMem(0x92ee));
        // CB 5B 0198
        gbc.setState(0x29fa, 0x39e0, 0xab50, 0x2f74, 0xf481, 0x35b9, 0x0, 0x1);
        gbc.writeMem(0x29fa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x39e0, gbc.sp());
        EXPECT(0x29fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0199
        gbc.setState(0x4c9e, 0xd3ce, 0xa60, 0xeda2, 0x8039, 0xbf53, 0x1, 0x0);
        gbc.writeMem(0x4c9e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xd3ce, gbc.sp());
        EXPECT(0x4ca0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 019A
        gbc.setState(0x255a, 0x238d, 0x97e0, 0x2928, 0x7c79, 0x738, 0x1, 0x1);
        gbc.writeMem(0x255a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x238d, gbc.sp());
        EXPECT(0x255c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 019B
        gbc.setState(0x64a2, 0xf33e, 0xcde0, 0x88d9, 0x613a, 0xe070, 0x0, 0x1);
        gbc.writeMem(0x64a2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xf33e, gbc.sp());
        EXPECT(0x64a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 019D
        gbc.setState(0x2289, 0xef4d, 0xb2d0, 0xc840, 0xadd6, 0xe3d7, 0x1, 0x1);
        gbc.writeMem(0x2289, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xef4d, gbc.sp());
        EXPECT(0x228b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 019E
        gbc.setState(0x60e5, 0xde51, 0xbed0, 0x5b84, 0x6c25, 0x67bc, 0x0, 0x1);
        gbc.writeMem(0x60e5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xde51, gbc.sp());
        EXPECT(0x60e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 019F
        gbc.setState(0xa676, 0xc7b3, 0x8930, 0x4710, 0x3e18, 0x5294, 0x0, 0x1);
        gbc.writeMem(0xa676, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xc7b3, gbc.sp());
        EXPECT(0xa678, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa676));
        EXPECT(0x5b, gbc.readMem(0xa677));
        // CB 5B 01A0
        gbc.setState(0x9167, 0xf585, 0xe3d0, 0x907b, 0x24a6, 0x5bf7, 0x1, 0x0);
        gbc.writeMem(0x9167, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xf585, gbc.sp());
        EXPECT(0x9169, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9167));
        EXPECT(0x5b, gbc.readMem(0x9168));
        // CB 5B 01A1
        gbc.setState(0xce1e, 0x9a53, 0x6970, 0xe827, 0xa2e7, 0x49f0, 0x1, 0x0);
        gbc.writeMem(0xce1e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9a53, gbc.sp());
        EXPECT(0xce20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce1e));
        EXPECT(0x5b, gbc.readMem(0xce1f));
        // CB 5B 01A2
        gbc.setState(0x4f64, 0x70ee, 0x6270, 0xc485, 0xae1c, 0x30bb, 0x0, 0x0);
        gbc.writeMem(0x4f64, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x70ee, gbc.sp());
        EXPECT(0x4f66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01A3
        gbc.setState(0x957b, 0xb98b, 0xec0, 0x22e, 0xd3a1, 0xe433, 0x0, 0x1);
        gbc.writeMem(0x957b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xb98b, gbc.sp());
        EXPECT(0x957d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x957b));
        EXPECT(0x5b, gbc.readMem(0x957c));
        // CB 5B 01A4
        gbc.setState(0x2066, 0x7a2, 0x2580, 0x1869, 0x95b, 0x9c5d, 0x1, 0x1);
        gbc.writeMem(0x2066, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x7a2, gbc.sp());
        EXPECT(0x2068, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01A5
        gbc.setState(0x49d5, 0x6be3, 0x18c0, 0x76cd, 0xde9d, 0x8962, 0x1, 0x1);
        gbc.writeMem(0x49d5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x6be3, gbc.sp());
        EXPECT(0x49d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01A6
        gbc.setState(0x68ec, 0x230f, 0xaef0, 0x82f1, 0x5157, 0x7b02, 0x0, 0x1);
        gbc.writeMem(0x68ec, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x230f, gbc.sp());
        EXPECT(0x68ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01A7
        gbc.setState(0x27fd, 0xdbf, 0x2030, 0x5df6, 0x5056, 0x9c82, 0x1, 0x0);
        gbc.writeMem(0x27fd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xdbf, gbc.sp());
        EXPECT(0x27ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01A8
        gbc.setState(0x7346, 0x13af, 0x95c0, 0xe95b, 0xd0fb, 0x391e, 0x0, 0x1);
        gbc.writeMem(0x7346, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x13af, gbc.sp());
        EXPECT(0x7348, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01A9
        gbc.setState(0x9132, 0x8904, 0xbb20, 0x67cf, 0x4ba3, 0x9705, 0x1, 0x0);
        gbc.writeMem(0x9132, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x8904, gbc.sp());
        EXPECT(0x9134, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9132));
        EXPECT(0x5b, gbc.readMem(0x9133));
        // CB 5B 01AA
        gbc.setState(0x31ab, 0x8794, 0xbed0, 0xee89, 0xf05f, 0xbf36, 0x0, 0x1);
        gbc.writeMem(0x31ab, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x8794, gbc.sp());
        EXPECT(0x31ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01AB
        gbc.setState(0x4967, 0x3886, 0xaa80, 0x154e, 0xe906, 0x15f0, 0x0, 0x1);
        gbc.writeMem(0x4967, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x3886, gbc.sp());
        EXPECT(0x4969, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01AC
        gbc.setState(0x70a0, 0xa2f2, 0x8ae0, 0x74c8, 0xf50, 0xc4d7, 0x0, 0x1);
        gbc.writeMem(0x70a0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xa2f2, gbc.sp());
        EXPECT(0x70a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01AD
        gbc.setState(0x1127, 0xda7c, 0x3d80, 0x8eb4, 0xceaf, 0xd2d5, 0x0, 0x0);
        gbc.writeMem(0x1127, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xda7c, gbc.sp());
        EXPECT(0x1129, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01AF
        gbc.setState(0x14b4, 0x3e1b, 0x3230, 0x3d58, 0xb221, 0x6ae5, 0x0, 0x1);
        gbc.writeMem(0x14b4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x3e1b, gbc.sp());
        EXPECT(0x14b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01B0
        gbc.setState(0x72f8, 0xbdac, 0x27b0, 0x59b6, 0x1888, 0xee39, 0x0, 0x0);
        gbc.writeMem(0x72f8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xbdac, gbc.sp());
        EXPECT(0x72fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01B1
        gbc.setState(0x820f, 0xb6a5, 0x5e60, 0x417e, 0xa0a4, 0xd1c3, 0x0, 0x0);
        gbc.writeMem(0x820f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xb6a5, gbc.sp());
        EXPECT(0x8211, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x820f));
        EXPECT(0x5b, gbc.readMem(0x8210));
        // CB 5B 01B2
        gbc.setState(0x9b2, 0xf87c, 0xaf10, 0x5ef, 0xd5e5, 0xf12a, 0x0, 0x1);
        gbc.writeMem(0x9b2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xf87c, gbc.sp());
        EXPECT(0x9b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01B3
        gbc.setState(0x24a0, 0x538c, 0x7110, 0x26dc, 0x4980, 0x5d50, 0x0, 0x0);
        gbc.writeMem(0x24a0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x538c, gbc.sp());
        EXPECT(0x24a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01B4
        gbc.setState(0x658b, 0x5082, 0xcdc0, 0x5c3b, 0xe682, 0x6371, 0x1, 0x1);
        gbc.writeMem(0x658b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x5082, gbc.sp());
        EXPECT(0x658d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01B5
        gbc.setState(0x8130, 0xda11, 0xc2d0, 0xa627, 0xeb53, 0x6e3e, 0x1, 0x0);
        gbc.writeMem(0x8130, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xda11, gbc.sp());
        EXPECT(0x8132, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8130));
        EXPECT(0x5b, gbc.readMem(0x8131));
        // CB 5B 01B6
        gbc.setState(0x8404, 0xb970, 0x2ed0, 0x5893, 0xd2c8, 0x6a4a, 0x0, 0x0);
        gbc.writeMem(0x8404, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xb970, gbc.sp());
        EXPECT(0x8406, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8404));
        EXPECT(0x5b, gbc.readMem(0x8405));
        // CB 5B 01B7
        gbc.setState(0xbdae, 0x3b22, 0xc520, 0x2df0, 0xe760, 0x18f8, 0x1, 0x0);
        gbc.writeMem(0xbdae, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x3b22, gbc.sp());
        EXPECT(0xbdb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdae));
        EXPECT(0x5b, gbc.readMem(0xbdaf));
        // CB 5B 01B8
        gbc.setState(0x2a34, 0xaebf, 0x520, 0xa71f, 0x119a, 0x1631, 0x1, 0x1);
        gbc.writeMem(0x2a34, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xaebf, gbc.sp());
        EXPECT(0x2a36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01B9
        gbc.setState(0x294, 0xa09d, 0xcab0, 0x4484, 0x1a48, 0xaeea, 0x1, 0x0);
        gbc.writeMem(0x294, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xa09d, gbc.sp());
        EXPECT(0x296, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01BA
        gbc.setState(0x9aa7, 0xa3f4, 0x1670, 0xd11c, 0x783b, 0xc24e, 0x0, 0x1);
        gbc.writeMem(0x9aa7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xa3f4, gbc.sp());
        EXPECT(0x9aa9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9aa7));
        EXPECT(0x5b, gbc.readMem(0x9aa8));
        // CB 5B 01BB
        gbc.setState(0x193b, 0xabd8, 0x5c80, 0x9645, 0xb97a, 0xe517, 0x1, 0x1);
        gbc.writeMem(0x193b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xabd8, gbc.sp());
        EXPECT(0x193d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01BC
        gbc.setState(0xa718, 0x103c, 0xd860, 0x2de0, 0xefb5, 0x331e, 0x0, 0x0);
        gbc.writeMem(0xa718, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x103c, gbc.sp());
        EXPECT(0xa71a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa718));
        EXPECT(0x5b, gbc.readMem(0xa719));
        // CB 5B 01BD
        gbc.setState(0xac90, 0x620f, 0x6140, 0x7b95, 0x66e, 0x24fe, 0x1, 0x0);
        gbc.writeMem(0xac90, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x620f, gbc.sp());
        EXPECT(0xac92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac90));
        EXPECT(0x5b, gbc.readMem(0xac91));
        // CB 5B 01BE
        gbc.setState(0xa10e, 0xf3fa, 0x9cc0, 0xd454, 0xf57b, 0xcbd9, 0x0, 0x0);
        gbc.writeMem(0xa10e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xf3fa, gbc.sp());
        EXPECT(0xa110, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa10e));
        EXPECT(0x5b, gbc.readMem(0xa10f));
        // CB 5B 01BF
        gbc.setState(0xbe81, 0xa823, 0x74a0, 0x5700, 0xfe62, 0xcf7f, 0x0, 0x1);
        gbc.writeMem(0xbe81, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xa823, gbc.sp());
        EXPECT(0xbe83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe81));
        EXPECT(0x5b, gbc.readMem(0xbe82));
        // CB 5B 01C0
        gbc.setState(0xc9ee, 0xf462, 0xf50, 0xfc1e, 0x28c0, 0x5caf, 0x1, 0x0);
        gbc.writeMem(0xc9ee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xf462, gbc.sp());
        EXPECT(0xc9f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9ee));
        EXPECT(0x5b, gbc.readMem(0xc9ef));
        // CB 5B 01C1
        gbc.setState(0xa05c, 0xaaea, 0x9570, 0x2748, 0x4cdc, 0x687a, 0x1, 0x0);
        gbc.writeMem(0xa05c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xaaea, gbc.sp());
        EXPECT(0xa05e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa05c));
        EXPECT(0x5b, gbc.readMem(0xa05d));
        // CB 5B 01C2
        gbc.setState(0x820b, 0x2f03, 0xaaf0, 0xcba0, 0xedae, 0xa3e6, 0x1, 0x0);
        gbc.writeMem(0x820b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x2f03, gbc.sp());
        EXPECT(0x820d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x820b));
        EXPECT(0x5b, gbc.readMem(0x820c));
        // CB 5B 01C3
        gbc.setState(0x7bb4, 0xf84a, 0x3570, 0x6350, 0xd, 0x9830, 0x1, 0x0);
        gbc.writeMem(0x7bb4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xf84a, gbc.sp());
        EXPECT(0x7bb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01C4
        gbc.setState(0x256a, 0xd30a, 0x3f10, 0x845d, 0xa50d, 0x24e8, 0x0, 0x0);
        gbc.writeMem(0x256a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xd30a, gbc.sp());
        EXPECT(0x256c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01C5
        gbc.setState(0xb1c1, 0xaa, 0xf270, 0x459e, 0x5803, 0x671d, 0x1, 0x1);
        gbc.writeMem(0xb1c1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xaa, gbc.sp());
        EXPECT(0xb1c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1c1));
        EXPECT(0x5b, gbc.readMem(0xb1c2));
        // CB 5B 01C7
        gbc.setState(0x46f2, 0xbe53, 0x7810, 0xfdc0, 0x35b9, 0x1c8e, 0x1, 0x0);
        gbc.writeMem(0x46f2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xbe53, gbc.sp());
        EXPECT(0x46f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01C8
        gbc.setState(0x6f86, 0xfb0e, 0x8f20, 0xc0cd, 0x80d1, 0xdb1c, 0x1, 0x0);
        gbc.writeMem(0x6f86, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xfb0e, gbc.sp());
        EXPECT(0x6f88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01C9
        gbc.setState(0x23dc, 0xd1a0, 0x7980, 0xb9b6, 0xd48e, 0x2f4, 0x0, 0x0);
        gbc.writeMem(0x23dc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xd1a0, gbc.sp());
        EXPECT(0x23de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01CA
        gbc.setState(0xbca3, 0xbd19, 0xdb20, 0xf9a0, 0x9caa, 0x9444, 0x0, 0x0);
        gbc.writeMem(0xbca3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xbd19, gbc.sp());
        EXPECT(0xbca5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbca3));
        EXPECT(0x5b, gbc.readMem(0xbca4));
        // CB 5B 01CB
        gbc.setState(0xd87a, 0xb211, 0xd940, 0x40dd, 0x860f, 0xcb9c, 0x1, 0x1);
        gbc.writeMem(0xd87a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xb211, gbc.sp());
        EXPECT(0xd87c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd87a));
        EXPECT(0x5b, gbc.readMem(0xd87b));
        // CB 5B 01CC
        gbc.setState(0x73f2, 0x535, 0xb3d0, 0x8c44, 0xde0a, 0x422a, 0x0, 0x0);
        gbc.writeMem(0x73f2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x535, gbc.sp());
        EXPECT(0x73f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01CE
        gbc.setState(0x7a2e, 0x64f5, 0x92d0, 0x728b, 0x6973, 0xa13e, 0x0, 0x0);
        gbc.writeMem(0x7a2e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x64f5, gbc.sp());
        EXPECT(0x7a30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01CF
        gbc.setState(0x3cf5, 0x1623, 0x92e0, 0x8003, 0x8af9, 0x9bbf, 0x0, 0x0);
        gbc.writeMem(0x3cf5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x1623, gbc.sp());
        EXPECT(0x3cf7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01D0
        gbc.setState(0x8e25, 0xdc31, 0xb710, 0xb873, 0x852f, 0x8a43, 0x1, 0x0);
        gbc.writeMem(0x8e25, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xdc31, gbc.sp());
        EXPECT(0x8e27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e25));
        EXPECT(0x5b, gbc.readMem(0x8e26));
        // CB 5B 01D1
        gbc.setState(0xbfa8, 0x4087, 0x2040, 0x10be, 0xdec3, 0xecdb, 0x0, 0x1);
        gbc.writeMem(0xbfa8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x4087, gbc.sp());
        EXPECT(0xbfaa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfa8));
        EXPECT(0x5b, gbc.readMem(0xbfa9));
        // CB 5B 01D2
        gbc.setState(0x2f6b, 0x2823, 0x2940, 0x608e, 0x7d8, 0x7838, 0x1, 0x0);
        gbc.writeMem(0x2f6b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x2823, gbc.sp());
        EXPECT(0x2f6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01D3
        gbc.setState(0x4493, 0x3273, 0xe480, 0x3ef1, 0xe032, 0xa808, 0x0, 0x0);
        gbc.writeMem(0x4493, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x3273, gbc.sp());
        EXPECT(0x4495, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01D4
        gbc.setState(0x9194, 0x8173, 0x67d0, 0x9b92, 0x439d, 0x45bd, 0x1, 0x1);
        gbc.writeMem(0x9194, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x8173, gbc.sp());
        EXPECT(0x9196, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9194));
        EXPECT(0x5b, gbc.readMem(0x9195));
        // CB 5B 01D5
        gbc.setState(0x70b3, 0xa7bc, 0x4c70, 0x9dc6, 0x6f58, 0xca8c, 0x0, 0x1);
        gbc.writeMem(0x70b3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xa7bc, gbc.sp());
        EXPECT(0x70b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01D6
        gbc.setState(0xa1d1, 0xe0a7, 0xd030, 0x3d7a, 0x358d, 0x5366, 0x1, 0x0);
        gbc.writeMem(0xa1d1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xe0a7, gbc.sp());
        EXPECT(0xa1d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1d1));
        EXPECT(0x5b, gbc.readMem(0xa1d2));
        // CB 5B 01D7
        gbc.setState(0x40cd, 0x8a05, 0x2b40, 0x33c2, 0x90ab, 0x199a, 0x1, 0x0);
        gbc.writeMem(0x40cd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x8a05, gbc.sp());
        EXPECT(0x40cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01D8
        gbc.setState(0x98ec, 0xde0b, 0xe9c0, 0xa0f3, 0xfc2f, 0x4f59, 0x1, 0x1);
        gbc.writeMem(0x98ec, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xde0b, gbc.sp());
        EXPECT(0x98ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98ec));
        EXPECT(0x5b, gbc.readMem(0x98ed));
        // CB 5B 01D9
        gbc.setState(0xee59, 0x23f9, 0x9750, 0xd51e, 0x3f3f, 0x86ba, 0x0, 0x0);
        gbc.writeMem(0xee59, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x23f9, gbc.sp());
        EXPECT(0xee5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee59));
        EXPECT(0x5b, gbc.readMem(0xee5a));
        // CB 5B 01DA
        gbc.setState(0x608f, 0x9b2d, 0x1720, 0xea2, 0x1468, 0xe28d, 0x0, 0x0);
        gbc.writeMem(0x608f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x9b2d, gbc.sp());
        EXPECT(0x6091, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01DB
        gbc.setState(0x9687, 0x3840, 0x64a0, 0x4bb5, 0x3ce, 0x517a, 0x1, 0x1);
        gbc.writeMem(0x9687, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x3840, gbc.sp());
        EXPECT(0x9689, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9687));
        EXPECT(0x5b, gbc.readMem(0x9688));
        // CB 5B 01DC
        gbc.setState(0xb6f, 0x62c7, 0xa150, 0xa832, 0xafea, 0x8346, 0x1, 0x1);
        gbc.writeMem(0xb6f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x62c7, gbc.sp());
        EXPECT(0xb71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01DD
        gbc.setState(0x494b, 0x182c, 0x6960, 0x297b, 0xfb2b, 0x6a22, 0x0, 0x0);
        gbc.writeMem(0x494b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x182c, gbc.sp());
        EXPECT(0x494d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01DE
        gbc.setState(0x7ac, 0xb8a1, 0x1550, 0x9555, 0x11f, 0x42f3, 0x1, 0x0);
        gbc.writeMem(0x7ac, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xb8a1, gbc.sp());
        EXPECT(0x7ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01DF
        gbc.setState(0x722, 0xf673, 0x9b40, 0x427d, 0xd821, 0x8211, 0x0, 0x1);
        gbc.writeMem(0x722, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xf673, gbc.sp());
        EXPECT(0x724, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01E0
        gbc.setState(0x8a0a, 0xf8e6, 0x5750, 0xc0c2, 0x9838, 0x69c3, 0x0, 0x0);
        gbc.writeMem(0x8a0a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf8e6, gbc.sp());
        EXPECT(0x8a0c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a0a));
        EXPECT(0x5b, gbc.readMem(0x8a0b));
        // CB 5B 01E1
        gbc.setState(0x7889, 0xe34e, 0x3750, 0xc02b, 0xe84b, 0x1e48, 0x0, 0x0);
        gbc.writeMem(0x7889, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xe34e, gbc.sp());
        EXPECT(0x788b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01E2
        gbc.setState(0x2d9, 0x2df7, 0x51e0, 0xdc61, 0xf2f, 0x160e, 0x0, 0x0);
        gbc.writeMem(0x2d9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x2df7, gbc.sp());
        EXPECT(0x2db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01E3
        gbc.setState(0x5a73, 0x2c8f, 0x91b0, 0xbf73, 0x4be5, 0x78d7, 0x0, 0x0);
        gbc.writeMem(0x5a73, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x2c8f, gbc.sp());
        EXPECT(0x5a75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01E4
        gbc.setState(0x73b6, 0x773a, 0x8f30, 0x918f, 0x7b0d, 0xc058, 0x0, 0x0);
        gbc.writeMem(0x73b6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x773a, gbc.sp());
        EXPECT(0x73b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01E5
        gbc.setState(0x89c8, 0x557f, 0xdf0, 0x97a6, 0x5d0f, 0xed26, 0x1, 0x0);
        gbc.writeMem(0x89c8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x557f, gbc.sp());
        EXPECT(0x89ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89c8));
        EXPECT(0x5b, gbc.readMem(0x89c9));
        // CB 5B 01E7
        gbc.setState(0x594, 0xc107, 0xe250, 0xcb3d, 0xb184, 0xaaf0, 0x0, 0x1);
        gbc.writeMem(0x594, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc107, gbc.sp());
        EXPECT(0x596, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01E8
        gbc.setState(0xaccd, 0x1319, 0x9b70, 0x139d, 0x2a9, 0xc375, 0x1, 0x0);
        gbc.writeMem(0xaccd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x1319, gbc.sp());
        EXPECT(0xaccf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaccd));
        EXPECT(0x5b, gbc.readMem(0xacce));
        // CB 5B 01E9
        gbc.setState(0x2470, 0x1bc8, 0xda20, 0x9654, 0xc23f, 0xa4d, 0x1, 0x1);
        gbc.writeMem(0x2470, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x1bc8, gbc.sp());
        EXPECT(0x2472, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01EA
        gbc.setState(0x4c91, 0xe034, 0x2380, 0x6115, 0xb1f1, 0x9f63, 0x1, 0x0);
        gbc.writeMem(0x4c91, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xe034, gbc.sp());
        EXPECT(0x4c93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01EB
        gbc.setState(0xb9ee, 0xe189, 0xbfc0, 0xf2f, 0x15c5, 0x7245, 0x0, 0x0);
        gbc.writeMem(0xb9ee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xe189, gbc.sp());
        EXPECT(0xb9f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9ee));
        EXPECT(0x5b, gbc.readMem(0xb9ef));
        // CB 5B 01EC
        gbc.setState(0x4daf, 0x4c12, 0x5860, 0x4b3a, 0x44f6, 0x6940, 0x0, 0x1);
        gbc.writeMem(0x4daf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x4c12, gbc.sp());
        EXPECT(0x4db1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01ED
        gbc.setState(0x70b2, 0x4113, 0x6110, 0xb429, 0xee0d, 0xa654, 0x0, 0x1);
        gbc.writeMem(0x70b2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x4113, gbc.sp());
        EXPECT(0x70b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01EE
        gbc.setState(0xb3a4, 0x694d, 0xc0c0, 0xd29b, 0x582a, 0x315d, 0x0, 0x1);
        gbc.writeMem(0xb3a4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x694d, gbc.sp());
        EXPECT(0xb3a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3a4));
        EXPECT(0x5b, gbc.readMem(0xb3a5));
        // CB 5B 01EF
        gbc.setState(0x6c2e, 0xfa1b, 0xb100, 0x9e10, 0xe042, 0x4733, 0x1, 0x1);
        gbc.writeMem(0x6c2e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xfa1b, gbc.sp());
        EXPECT(0x6c30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01F0
        gbc.setState(0xbdf9, 0xee88, 0x6af0, 0xa52, 0x594e, 0x21e, 0x0, 0x1);
        gbc.writeMem(0xbdf9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xee88, gbc.sp());
        EXPECT(0xbdfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdf9));
        EXPECT(0x5b, gbc.readMem(0xbdfa));
        // CB 5B 01F1
        gbc.setState(0x790e, 0x57e7, 0x8b20, 0xd7c8, 0xcb2b, 0x99d1, 0x0, 0x0);
        gbc.writeMem(0x790e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x57e7, gbc.sp());
        EXPECT(0x7910, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01F2
        gbc.setState(0xbfff, 0xa01c, 0x8210, 0xa888, 0x51b0, 0xc09a, 0x1, 0x1);
        gbc.writeMem(0xbfff, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xa01c, gbc.sp());
        EXPECT(0xc001, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfff));
        EXPECT(0x5b, gbc.readMem(0xc000));
        // CB 5B 01F3
        gbc.setState(0x7d7d, 0x7389, 0x7e20, 0x6c3e, 0x9b9c, 0x3e79, 0x0, 0x0);
        gbc.writeMem(0x7d7d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x7389, gbc.sp());
        EXPECT(0x7d7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01F4
        gbc.setState(0xd6b1, 0x18bb, 0xbde0, 0xb09a, 0xcf1, 0xe0f6, 0x0, 0x0);
        gbc.writeMem(0xd6b1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x18bb, gbc.sp());
        EXPECT(0xd6b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6b1));
        EXPECT(0x5b, gbc.readMem(0xd6b2));
        // CB 5B 01F7
        gbc.setState(0xb235, 0x3545, 0x7790, 0x5bed, 0x9076, 0x5735, 0x1, 0x0);
        gbc.writeMem(0xb235, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x3545, gbc.sp());
        EXPECT(0xb237, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb235));
        EXPECT(0x5b, gbc.readMem(0xb236));
        // CB 5B 01F8
        gbc.setState(0xb516, 0xbe10, 0x1320, 0xeef5, 0xd209, 0x819, 0x1, 0x1);
        gbc.writeMem(0xb516, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xbe10, gbc.sp());
        EXPECT(0xb518, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb516));
        EXPECT(0x5b, gbc.readMem(0xb517));
        // CB 5B 01F9
        gbc.setState(0x9c63, 0xf6b8, 0xce0, 0xb4c1, 0x51dc, 0x2f17, 0x1, 0x1);
        gbc.writeMem(0x9c63, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xf6b8, gbc.sp());
        EXPECT(0x9c65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c63));
        EXPECT(0x5b, gbc.readMem(0x9c64));
        // CB 5B 01FA
        gbc.setState(0x660f, 0xdefc, 0x720, 0x2e1a, 0x3b05, 0xa8ff, 0x1, 0x0);
        gbc.writeMem(0x660f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xdefc, gbc.sp());
        EXPECT(0x6611, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 01FC
        gbc.setState(0x9c9d, 0x8c65, 0x9da0, 0x8c4b, 0xfa14, 0x848d, 0x0, 0x1);
        gbc.writeMem(0x9c9d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x8c65, gbc.sp());
        EXPECT(0x9c9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c9d));
        EXPECT(0x5b, gbc.readMem(0x9c9e));
        // CB 5B 01FD
        gbc.setState(0x45ee, 0xcd9a, 0x5d0, 0xb32f, 0x4ec9, 0x876, 0x1, 0x0);
        gbc.writeMem(0x45ee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xcd9a, gbc.sp());
        EXPECT(0x45f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 01FE
        gbc.setState(0x984f, 0xf88f, 0xed90, 0xa880, 0x477f, 0xc5b8, 0x0, 0x0);
        gbc.writeMem(0x984f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xf88f, gbc.sp());
        EXPECT(0x9851, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x984f));
        EXPECT(0x5b, gbc.readMem(0x9850));
        // CB 5B 01FF
        gbc.setState(0x89a4, 0x6610, 0xefc0, 0xc2c0, 0x1824, 0xd913, 0x1, 0x1);
        gbc.writeMem(0x89a4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x6610, gbc.sp());
        EXPECT(0x89a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89a4));
        EXPECT(0x5b, gbc.readMem(0x89a5));
        // CB 5B 0200
        gbc.setState(0x89bf, 0x8cf7, 0x16e0, 0xc3cc, 0x2805, 0x9ee2, 0x1, 0x0);
        gbc.writeMem(0x89bf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x8cf7, gbc.sp());
        EXPECT(0x89c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89bf));
        EXPECT(0x5b, gbc.readMem(0x89c0));
        // CB 5B 0201
        gbc.setState(0x642b, 0x183c, 0xf8a0, 0x2569, 0x2113, 0x71fa, 0x1, 0x0);
        gbc.writeMem(0x642b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x183c, gbc.sp());
        EXPECT(0x642d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0202
        gbc.setState(0x4dcc, 0x84fc, 0x53a0, 0xac45, 0x7c23, 0xd28b, 0x1, 0x0);
        gbc.writeMem(0x4dcc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x84fc, gbc.sp());
        EXPECT(0x4dce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0203
        gbc.setState(0x45c8, 0x904d, 0x4260, 0xe74, 0xca3, 0x390b, 0x1, 0x0);
        gbc.writeMem(0x45c8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x904d, gbc.sp());
        EXPECT(0x45ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0204
        gbc.setState(0x32da, 0x55c5, 0xa340, 0xebab, 0xaa3c, 0x615f, 0x1, 0x0);
        gbc.writeMem(0x32da, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x55c5, gbc.sp());
        EXPECT(0x32dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0205
        gbc.setState(0x5507, 0x4752, 0x54c0, 0xe8a3, 0x18f9, 0x5e4f, 0x0, 0x0);
        gbc.writeMem(0x5507, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x4752, gbc.sp());
        EXPECT(0x5509, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0206
        gbc.setState(0xcc4a, 0x92a1, 0x8e30, 0x10f9, 0x1ae3, 0x19f7, 0x1, 0x1);
        gbc.writeMem(0xcc4a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x92a1, gbc.sp());
        EXPECT(0xcc4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc4a));
        EXPECT(0x5b, gbc.readMem(0xcc4b));
        // CB 5B 0207
        gbc.setState(0xa142, 0x9da, 0x3130, 0x4189, 0x88b8, 0x1001, 0x1, 0x1);
        gbc.writeMem(0xa142, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x9da, gbc.sp());
        EXPECT(0xa144, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa142));
        EXPECT(0x5b, gbc.readMem(0xa143));
        // CB 5B 0208
        gbc.setState(0xd3, 0x5375, 0x53d0, 0x869f, 0x9ba6, 0x9a13, 0x1, 0x1);
        gbc.writeMem(0xd3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x5375, gbc.sp());
        EXPECT(0xd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 020A
        gbc.setState(0x8ea4, 0xaf86, 0xd7f0, 0x8f28, 0x3a6a, 0xfa5e, 0x0, 0x1);
        gbc.writeMem(0x8ea4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xaf86, gbc.sp());
        EXPECT(0x8ea6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ea4));
        EXPECT(0x5b, gbc.readMem(0x8ea5));
        // CB 5B 020B
        gbc.setState(0x611c, 0xa85b, 0xe180, 0x6ea, 0xc1f8, 0xf56c, 0x0, 0x1);
        gbc.writeMem(0x611c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xa85b, gbc.sp());
        EXPECT(0x611e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 020C
        gbc.setState(0x99bc, 0x23f1, 0x5ab0, 0x7d3b, 0x47af, 0xdeca, 0x0, 0x1);
        gbc.writeMem(0x99bc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x23f1, gbc.sp());
        EXPECT(0x99be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99bc));
        EXPECT(0x5b, gbc.readMem(0x99bd));
        // CB 5B 020D
        gbc.setState(0x6ba7, 0x271b, 0xa780, 0xcd3d, 0xe3c7, 0xf533, 0x0, 0x0);
        gbc.writeMem(0x6ba7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x271b, gbc.sp());
        EXPECT(0x6ba9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 020E
        gbc.setState(0x2496, 0x6aa6, 0x4cd0, 0x5afc, 0x4918, 0xb782, 0x1, 0x1);
        gbc.writeMem(0x2496, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x6aa6, gbc.sp());
        EXPECT(0x2498, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0210
        gbc.setState(0x22a0, 0xc62e, 0x3ac0, 0x1fd6, 0xe5f5, 0x39a4, 0x1, 0x0);
        gbc.writeMem(0x22a0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xc62e, gbc.sp());
        EXPECT(0x22a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0211
        gbc.setState(0x199d, 0x901a, 0x2950, 0x28eb, 0x11e4, 0xd695, 0x1, 0x0);
        gbc.writeMem(0x199d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x901a, gbc.sp());
        EXPECT(0x199f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0213
        gbc.setState(0xe08a, 0x2b46, 0xd770, 0x902f, 0x28bf, 0x9be9, 0x1, 0x0);
        gbc.writeMem(0xe08a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x2b46, gbc.sp());
        EXPECT(0xe08c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe08a));
        EXPECT(0x5b, gbc.readMem(0xe08b));
        // CB 5B 0214
        gbc.setState(0xdb44, 0x6ba4, 0xc6b0, 0xfce7, 0x54b3, 0xa97a, 0x1, 0x0);
        gbc.writeMem(0xdb44, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x6ba4, gbc.sp());
        EXPECT(0xdb46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb44));
        EXPECT(0x5b, gbc.readMem(0xdb45));
        // CB 5B 0215
        gbc.setState(0xcf0a, 0x457b, 0x2980, 0x8ec5, 0xeb7, 0x5c7, 0x0, 0x0);
        gbc.writeMem(0xcf0a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x457b, gbc.sp());
        EXPECT(0xcf0c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf0a));
        EXPECT(0x5b, gbc.readMem(0xcf0b));
        // CB 5B 0216
        gbc.setState(0x92b6, 0xe80a, 0x17d0, 0xdba8, 0x212c, 0xc086, 0x1, 0x1);
        gbc.writeMem(0x92b6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xe80a, gbc.sp());
        EXPECT(0x92b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92b6));
        EXPECT(0x5b, gbc.readMem(0x92b7));
        // CB 5B 0217
        gbc.setState(0x940a, 0x1852, 0xa380, 0xbca4, 0xba23, 0xa83f, 0x0, 0x0);
        gbc.writeMem(0x940a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x1852, gbc.sp());
        EXPECT(0x940c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x940a));
        EXPECT(0x5b, gbc.readMem(0x940b));
        // CB 5B 0219
        gbc.setState(0x675e, 0x323a, 0xab20, 0xee88, 0x3b73, 0x4a35, 0x1, 0x1);
        gbc.writeMem(0x675e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x323a, gbc.sp());
        EXPECT(0x6760, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 021A
        gbc.setState(0x190b, 0xba92, 0x1bf0, 0x1d84, 0xd5da, 0xf55, 0x0, 0x1);
        gbc.writeMem(0x190b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xba92, gbc.sp());
        EXPECT(0x190d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 021B
        gbc.setState(0x98bd, 0x856f, 0x6c20, 0x7d1, 0x8c48, 0x73a, 0x1, 0x0);
        gbc.writeMem(0x98bd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x856f, gbc.sp());
        EXPECT(0x98bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98bd));
        EXPECT(0x5b, gbc.readMem(0x98be));
        // CB 5B 021D
        gbc.setState(0xbb2b, 0xa3de, 0xbf40, 0x88ab, 0x8068, 0xbff0, 0x1, 0x0);
        gbc.writeMem(0xbb2b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xa3de, gbc.sp());
        EXPECT(0xbb2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb2b));
        EXPECT(0x5b, gbc.readMem(0xbb2c));
        // CB 5B 021E
        gbc.setState(0xdb44, 0x53ab, 0x28e0, 0x61a0, 0xf494, 0xf2b3, 0x1, 0x0);
        gbc.writeMem(0xdb44, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x53ab, gbc.sp());
        EXPECT(0xdb46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb44));
        EXPECT(0x5b, gbc.readMem(0xdb45));
        // CB 5B 021F
        gbc.setState(0x7bab, 0xe37, 0x8a40, 0xa5f5, 0xeb42, 0x6c37, 0x0, 0x0);
        gbc.writeMem(0x7bab, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xe37, gbc.sp());
        EXPECT(0x7bad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0220
        gbc.setState(0xc640, 0x52bc, 0xdd20, 0xbee4, 0xcbc8, 0xfc2f, 0x0, 0x1);
        gbc.writeMem(0xc640, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x52bc, gbc.sp());
        EXPECT(0xc642, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc640));
        EXPECT(0x5b, gbc.readMem(0xc641));
        // CB 5B 0221
        gbc.setState(0x936b, 0x2bef, 0x4020, 0x2d94, 0xfbc5, 0x114, 0x0, 0x1);
        gbc.writeMem(0x936b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x2bef, gbc.sp());
        EXPECT(0x936d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x936b));
        EXPECT(0x5b, gbc.readMem(0x936c));
        // CB 5B 0222
        gbc.setState(0xc9d6, 0x94c1, 0x5c0, 0x1e95, 0x31e9, 0x248e, 0x0, 0x1);
        gbc.writeMem(0xc9d6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x94c1, gbc.sp());
        EXPECT(0xc9d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9d6));
        EXPECT(0x5b, gbc.readMem(0xc9d7));
        // CB 5B 0223
        gbc.setState(0x5e2a, 0xba9, 0xf910, 0x6c45, 0xbcf6, 0xfd78, 0x0, 0x0);
        gbc.writeMem(0x5e2a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xba9, gbc.sp());
        EXPECT(0x5e2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0224
        gbc.setState(0xebaa, 0xa94, 0xe5e0, 0x8723, 0x83a5, 0x2221, 0x1, 0x0);
        gbc.writeMem(0xebaa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xa94, gbc.sp());
        EXPECT(0xebac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebaa));
        EXPECT(0x5b, gbc.readMem(0xebab));
        // CB 5B 0225
        gbc.setState(0xab1b, 0x12b9, 0x760, 0x596f, 0xa660, 0xe2c6, 0x0, 0x1);
        gbc.writeMem(0xab1b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x12b9, gbc.sp());
        EXPECT(0xab1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab1b));
        EXPECT(0x5b, gbc.readMem(0xab1c));
        // CB 5B 0226
        gbc.setState(0x2b38, 0x1796, 0x1a70, 0xea72, 0x7139, 0xac76, 0x0, 0x1);
        gbc.writeMem(0x2b38, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x1796, gbc.sp());
        EXPECT(0x2b3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0227
        gbc.setState(0xac16, 0x411d, 0xea20, 0xcf45, 0x8062, 0x7155, 0x0, 0x0);
        gbc.writeMem(0xac16, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x411d, gbc.sp());
        EXPECT(0xac18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac16));
        EXPECT(0x5b, gbc.readMem(0xac17));
        // CB 5B 0228
        gbc.setState(0x59c8, 0x4042, 0xa780, 0xc0c8, 0x1d0e, 0x89be, 0x0, 0x0);
        gbc.writeMem(0x59c8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x4042, gbc.sp());
        EXPECT(0x59ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0229
        gbc.setState(0xc469, 0xcf95, 0xeb00, 0x7db8, 0xaa4c, 0x300c, 0x0, 0x1);
        gbc.writeMem(0xc469, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xcf95, gbc.sp());
        EXPECT(0xc46b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc469));
        EXPECT(0x5b, gbc.readMem(0xc46a));
        // CB 5B 022A
        gbc.setState(0x249, 0xce4d, 0x2d50, 0xc236, 0x459b, 0x8316, 0x1, 0x0);
        gbc.writeMem(0x249, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xce4d, gbc.sp());
        EXPECT(0x24b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 022B
        gbc.setState(0x704f, 0x2a38, 0xbb30, 0x62fb, 0xd834, 0x8a50, 0x1, 0x0);
        gbc.writeMem(0x704f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x2a38, gbc.sp());
        EXPECT(0x7051, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 022D
        gbc.setState(0x104e, 0x672f, 0x6fe0, 0x7094, 0x6c66, 0xa573, 0x1, 0x1);
        gbc.writeMem(0x104e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x672f, gbc.sp());
        EXPECT(0x1050, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 022E
        gbc.setState(0x9f33, 0x795a, 0x2f40, 0xb16f, 0xf866, 0x18a3, 0x1, 0x1);
        gbc.writeMem(0x9f33, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x795a, gbc.sp());
        EXPECT(0x9f35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f33));
        EXPECT(0x5b, gbc.readMem(0x9f34));
        // CB 5B 022F
        gbc.setState(0x9c61, 0x52b0, 0x72e0, 0x6370, 0x6e16, 0xcf4, 0x0, 0x0);
        gbc.writeMem(0x9c61, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x52b0, gbc.sp());
        EXPECT(0x9c63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c61));
        EXPECT(0x5b, gbc.readMem(0x9c62));
        // CB 5B 0231
        gbc.setState(0xd249, 0xb457, 0xd420, 0x2818, 0x6fd4, 0x87cf, 0x1, 0x0);
        gbc.writeMem(0xd249, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xb457, gbc.sp());
        EXPECT(0xd24b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd249));
        EXPECT(0x5b, gbc.readMem(0xd24a));
        // CB 5B 0232
        gbc.setState(0x400a, 0x3d94, 0xa440, 0x4621, 0x4022, 0x5ce8, 0x1, 0x1);
        gbc.writeMem(0x400a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x3d94, gbc.sp());
        EXPECT(0x400c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0233
        gbc.setState(0x197e, 0x302c, 0x3a80, 0xb3f7, 0x7d4f, 0x9e6d, 0x0, 0x0);
        gbc.writeMem(0x197e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x302c, gbc.sp());
        EXPECT(0x1980, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0234
        gbc.setState(0x56e1, 0xcb00, 0xfb50, 0x63c6, 0xc057, 0xd236, 0x0, 0x0);
        gbc.writeMem(0x56e1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xcb00, gbc.sp());
        EXPECT(0x56e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0235
        gbc.setState(0x14cc, 0x253b, 0x3e0, 0x61ba, 0xc4b9, 0x3fbe, 0x0, 0x0);
        gbc.writeMem(0x14cc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x253b, gbc.sp());
        EXPECT(0x14ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0236
        gbc.setState(0x5b00, 0xbcef, 0xa910, 0xd49e, 0xa34f, 0x5393, 0x1, 0x1);
        gbc.writeMem(0x5b00, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xbcef, gbc.sp());
        EXPECT(0x5b02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0237
        gbc.setState(0xb552, 0x79fc, 0xa140, 0x8e00, 0xfc7c, 0x2a91, 0x0, 0x0);
        gbc.writeMem(0xb552, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x79fc, gbc.sp());
        EXPECT(0xb554, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb552));
        EXPECT(0x5b, gbc.readMem(0xb553));
        // CB 5B 0238
        gbc.setState(0x7c47, 0x4d2f, 0x2af0, 0x615b, 0xfe58, 0x9552, 0x1, 0x0);
        gbc.writeMem(0x7c47, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x4d2f, gbc.sp());
        EXPECT(0x7c49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0239
        gbc.setState(0xdf05, 0xea0c, 0xc60, 0x2a84, 0xf7e7, 0xa93e, 0x1, 0x0);
        gbc.writeMem(0xdf05, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xea0c, gbc.sp());
        EXPECT(0xdf07, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf05));
        EXPECT(0x5b, gbc.readMem(0xdf06));
        // CB 5B 023A
        gbc.setState(0x9, 0xe1bc, 0x8080, 0x901f, 0x595f, 0xa3ed, 0x0, 0x1);
        gbc.writeMem(0x9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xe1bc, gbc.sp());
        EXPECT(0xb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 023B
        gbc.setState(0x5a9c, 0xbf8e, 0x8490, 0x4791, 0x3cb0, 0xf239, 0x1, 0x1);
        gbc.writeMem(0x5a9c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xbf8e, gbc.sp());
        EXPECT(0x5a9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 023C
        gbc.setState(0x96c4, 0x273b, 0xf60, 0x6ad1, 0x871f, 0x6825, 0x1, 0x1);
        gbc.writeMem(0x96c4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x273b, gbc.sp());
        EXPECT(0x96c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96c4));
        EXPECT(0x5b, gbc.readMem(0x96c5));
        // CB 5B 023D
        gbc.setState(0xc10c, 0x52db, 0xbe80, 0x6628, 0xefbe, 0x91, 0x0, 0x1);
        gbc.writeMem(0xc10c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x52db, gbc.sp());
        EXPECT(0xc10e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc10c));
        EXPECT(0x5b, gbc.readMem(0xc10d));
        // CB 5B 023E
        gbc.setState(0x82e7, 0xbe92, 0xc420, 0xa9d0, 0x131a, 0x1a4e, 0x0, 0x0);
        gbc.writeMem(0x82e7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xbe92, gbc.sp());
        EXPECT(0x82e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82e7));
        EXPECT(0x5b, gbc.readMem(0x82e8));
        // CB 5B 023F
        gbc.setState(0x5d2, 0x2e45, 0x2cf0, 0x4b63, 0xf612, 0xade7, 0x0, 0x1);
        gbc.writeMem(0x5d2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x2e45, gbc.sp());
        EXPECT(0x5d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0240
        gbc.setState(0x92cf, 0x2161, 0x3130, 0x752f, 0x5910, 0x4fd0, 0x0, 0x1);
        gbc.writeMem(0x92cf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x2161, gbc.sp());
        EXPECT(0x92d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92cf));
        EXPECT(0x5b, gbc.readMem(0x92d0));
        // CB 5B 0241
        gbc.setState(0x6372, 0x8ba6, 0xe620, 0x583, 0x6019, 0xd8e1, 0x1, 0x0);
        gbc.writeMem(0x6372, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x8ba6, gbc.sp());
        EXPECT(0x6374, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0242
        gbc.setState(0x7c7c, 0xfcf0, 0x9c20, 0xd845, 0x17ad, 0xaa0e, 0x0, 0x0);
        gbc.writeMem(0x7c7c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xfcf0, gbc.sp());
        EXPECT(0x7c7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0243
        gbc.setState(0x9231, 0x1fb0, 0x1c70, 0x1c9e, 0xe6e4, 0x9f84, 0x1, 0x1);
        gbc.writeMem(0x9231, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x1fb0, gbc.sp());
        EXPECT(0x9233, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9231));
        EXPECT(0x5b, gbc.readMem(0x9232));
        // CB 5B 0244
        gbc.setState(0x3973, 0x4bbe, 0x8b70, 0x14bf, 0xfb96, 0x38ac, 0x0, 0x0);
        gbc.writeMem(0x3973, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x4bbe, gbc.sp());
        EXPECT(0x3975, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0245
        gbc.setState(0x4046, 0xc4ea, 0xc190, 0x6379, 0x6d50, 0x8ab8, 0x1, 0x0);
        gbc.writeMem(0x4046, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xc4ea, gbc.sp());
        EXPECT(0x4048, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0246
        gbc.setState(0x2126, 0x3403, 0x3d30, 0x32c2, 0xd208, 0xbe5, 0x1, 0x1);
        gbc.writeMem(0x2126, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x3403, gbc.sp());
        EXPECT(0x2128, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0247
        gbc.setState(0x2b3, 0x70a0, 0xe700, 0x5c94, 0xa2c4, 0x567c, 0x1, 0x1);
        gbc.writeMem(0x2b3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x70a0, gbc.sp());
        EXPECT(0x2b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0248
        gbc.setState(0x1d0f, 0xbbdd, 0x10d0, 0xa48, 0xe487, 0xc37e, 0x1, 0x0);
        gbc.writeMem(0x1d0f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xbbdd, gbc.sp());
        EXPECT(0x1d11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0249
        gbc.setState(0xa16f, 0x73cf, 0xc760, 0x1cd6, 0x98ef, 0x10ab, 0x0, 0x1);
        gbc.writeMem(0xa16f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x73cf, gbc.sp());
        EXPECT(0xa171, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa16f));
        EXPECT(0x5b, gbc.readMem(0xa170));
        // CB 5B 024A
        gbc.setState(0x4508, 0x3d48, 0xd510, 0x8262, 0x7f8a, 0xdad4, 0x1, 0x0);
        gbc.writeMem(0x4508, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x3d48, gbc.sp());
        EXPECT(0x450a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 024B
        gbc.setState(0x41b1, 0x7619, 0x6920, 0x43ba, 0xb47e, 0x2162, 0x0, 0x0);
        gbc.writeMem(0x41b1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x7619, gbc.sp());
        EXPECT(0x41b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 024C
        gbc.setState(0x54ae, 0x9f1b, 0xfcf0, 0x29f9, 0x9d2, 0x5af, 0x0, 0x1);
        gbc.writeMem(0x54ae, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x9f1b, gbc.sp());
        EXPECT(0x54b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 024D
        gbc.setState(0xc38d, 0xc2f0, 0x5f70, 0xf94b, 0x12f0, 0x3464, 0x0, 0x0);
        gbc.writeMem(0xc38d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xc2f0, gbc.sp());
        EXPECT(0xc38f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc38d));
        EXPECT(0x5b, gbc.readMem(0xc38e));
        // CB 5B 024E
        gbc.setState(0xd0c3, 0xcb8e, 0x1f00, 0xecf2, 0x2eb3, 0x8ae9, 0x0, 0x1);
        gbc.writeMem(0xd0c3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xcb8e, gbc.sp());
        EXPECT(0xd0c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0c3));
        EXPECT(0x5b, gbc.readMem(0xd0c4));
        // CB 5B 024F
        gbc.setState(0xe75e, 0xe8f2, 0xedb0, 0x75a9, 0xfeb8, 0x6ede, 0x0, 0x1);
        gbc.writeMem(0xe75e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xe8f2, gbc.sp());
        EXPECT(0xe760, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe75e));
        EXPECT(0x5b, gbc.readMem(0xe75f));
        // CB 5B 0250
        gbc.setState(0xbacf, 0x9a26, 0xc5e0, 0x6a5c, 0x4b86, 0xcdaf, 0x0, 0x1);
        gbc.writeMem(0xbacf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x9a26, gbc.sp());
        EXPECT(0xbad1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbacf));
        EXPECT(0x5b, gbc.readMem(0xbad0));
        // CB 5B 0251
        gbc.setState(0xc158, 0x8176, 0x2b60, 0x2c51, 0xa42, 0xe157, 0x0, 0x0);
        gbc.writeMem(0xc158, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x8176, gbc.sp());
        EXPECT(0xc15a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc158));
        EXPECT(0x5b, gbc.readMem(0xc159));
        // CB 5B 0252
        gbc.setState(0x10ff, 0x4628, 0x1ca0, 0xd144, 0xcc18, 0xf146, 0x1, 0x0);
        gbc.writeMem(0x10ff, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x4628, gbc.sp());
        EXPECT(0x1101, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0253
        gbc.setState(0x791, 0xeff5, 0x2220, 0x9a72, 0xc848, 0xa177, 0x1, 0x0);
        gbc.writeMem(0x791, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xeff5, gbc.sp());
        EXPECT(0x793, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0254
        gbc.setState(0x265c, 0xa6c6, 0x6560, 0xbe11, 0x9276, 0xc8da, 0x1, 0x1);
        gbc.writeMem(0x265c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xa6c6, gbc.sp());
        EXPECT(0x265e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0255
        gbc.setState(0x999d, 0xc555, 0x100, 0x5e30, 0xdf8, 0x8136, 0x0, 0x0);
        gbc.writeMem(0x999d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xc555, gbc.sp());
        EXPECT(0x999f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x999d));
        EXPECT(0x5b, gbc.readMem(0x999e));
        // CB 5B 0256
        gbc.setState(0x2563, 0xb47b, 0xa520, 0xc288, 0x59fc, 0x1f5f, 0x1, 0x0);
        gbc.writeMem(0x2563, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xb47b, gbc.sp());
        EXPECT(0x2565, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0257
        gbc.setState(0xb65e, 0xae8d, 0x20, 0x3505, 0x8c49, 0xb874, 0x1, 0x1);
        gbc.writeMem(0xb65e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xae8d, gbc.sp());
        EXPECT(0xb660, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb65e));
        EXPECT(0x5b, gbc.readMem(0xb65f));
        // CB 5B 0258
        gbc.setState(0xd90e, 0x6773, 0x4b70, 0x6d9e, 0xaec, 0xaa2b, 0x1, 0x0);
        gbc.writeMem(0xd90e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x6773, gbc.sp());
        EXPECT(0xd910, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd90e));
        EXPECT(0x5b, gbc.readMem(0xd90f));
        // CB 5B 0259
        gbc.setState(0xc9bf, 0xda11, 0x3d80, 0x96a4, 0xec0d, 0x2e56, 0x0, 0x1);
        gbc.writeMem(0xc9bf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xda11, gbc.sp());
        EXPECT(0xc9c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9bf));
        EXPECT(0x5b, gbc.readMem(0xc9c0));
        // CB 5B 025A
        gbc.setState(0x38f6, 0x3fec, 0xd780, 0xbea1, 0xb4c1, 0x42d, 0x1, 0x1);
        gbc.writeMem(0x38f6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x3fec, gbc.sp());
        EXPECT(0x38f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 025B
        gbc.setState(0x8eff, 0x7ca3, 0xe9c0, 0x506b, 0xd964, 0x44a8, 0x1, 0x1);
        gbc.writeMem(0x8eff, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x7ca3, gbc.sp());
        EXPECT(0x8f01, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8eff));
        EXPECT(0x5b, gbc.readMem(0x8f00));
        // CB 5B 025C
        gbc.setState(0x81c4, 0xcc26, 0x71c0, 0x7386, 0xfec1, 0x8104, 0x0, 0x1);
        gbc.writeMem(0x81c4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xcc26, gbc.sp());
        EXPECT(0x81c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81c4));
        EXPECT(0x5b, gbc.readMem(0x81c5));
        // CB 5B 025D
        gbc.setState(0x8e89, 0xae43, 0xa340, 0x4bfe, 0x18af, 0x336c, 0x1, 0x1);
        gbc.writeMem(0x8e89, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xae43, gbc.sp());
        EXPECT(0x8e8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e89));
        EXPECT(0x5b, gbc.readMem(0x8e8a));
        // CB 5B 025E
        gbc.setState(0xb3b6, 0xd9a9, 0x5570, 0xe91c, 0xe7f3, 0x69dd, 0x1, 0x0);
        gbc.writeMem(0xb3b6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xd9a9, gbc.sp());
        EXPECT(0xb3b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3b6));
        EXPECT(0x5b, gbc.readMem(0xb3b7));
        // CB 5B 025F
        gbc.setState(0xe87d, 0x7cc2, 0x8120, 0x9438, 0xeddc, 0x9899, 0x0, 0x1);
        gbc.writeMem(0xe87d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x7cc2, gbc.sp());
        EXPECT(0xe87f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe87d));
        EXPECT(0x5b, gbc.readMem(0xe87e));
        // CB 5B 0260
        gbc.setState(0x3211, 0x7182, 0xc560, 0x51e6, 0x3c48, 0xe7bb, 0x0, 0x1);
        gbc.writeMem(0x3211, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x7182, gbc.sp());
        EXPECT(0x3213, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0261
        gbc.setState(0x25eb, 0x947a, 0x7700, 0x5da3, 0x87a0, 0x4618, 0x1, 0x1);
        gbc.writeMem(0x25eb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x947a, gbc.sp());
        EXPECT(0x25ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0262
        gbc.setState(0x4fff, 0x295c, 0xdb50, 0xbc4, 0x1dcc, 0xd544, 0x1, 0x1);
        gbc.writeMem(0x4fff, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x295c, gbc.sp());
        EXPECT(0x5001, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0263
        gbc.setState(0x198c, 0xae39, 0x7200, 0xa735, 0x2479, 0x9eb6, 0x1, 0x0);
        gbc.writeMem(0x198c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xae39, gbc.sp());
        EXPECT(0x198e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0264
        gbc.setState(0xbf7d, 0xf754, 0xfc80, 0x22b7, 0xd075, 0x35ea, 0x0, 0x1);
        gbc.writeMem(0xbf7d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xf754, gbc.sp());
        EXPECT(0xbf7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf7d));
        EXPECT(0x5b, gbc.readMem(0xbf7e));
        // CB 5B 0265
        gbc.setState(0x8369, 0xa1f8, 0xcc50, 0x2340, 0x7004, 0x7ae3, 0x1, 0x1);
        gbc.writeMem(0x8369, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xa1f8, gbc.sp());
        EXPECT(0x836b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8369));
        EXPECT(0x5b, gbc.readMem(0x836a));
        // CB 5B 0266
        gbc.setState(0x31aa, 0xb763, 0x960, 0xfeb5, 0xe0ff, 0xce93, 0x1, 0x0);
        gbc.writeMem(0x31aa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xb763, gbc.sp());
        EXPECT(0x31ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0267
        gbc.setState(0xb29, 0x191c, 0xd6e0, 0x8a24, 0x20a0, 0x9f53, 0x0, 0x0);
        gbc.writeMem(0xb29, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x191c, gbc.sp());
        EXPECT(0xb2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0268
        gbc.setState(0x4449, 0x34d9, 0xf780, 0x6a65, 0xba79, 0x5387, 0x0, 0x0);
        gbc.writeMem(0x4449, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x34d9, gbc.sp());
        EXPECT(0x444b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0269
        gbc.setState(0x2ac, 0x7158, 0xb040, 0x5ccb, 0x1eb5, 0x7151, 0x1, 0x0);
        gbc.writeMem(0x2ac, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x7158, gbc.sp());
        EXPECT(0x2ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 026C
        gbc.setState(0xc367, 0xf096, 0x94e0, 0x3711, 0xc5b9, 0x6703, 0x0, 0x0);
        gbc.writeMem(0xc367, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xf096, gbc.sp());
        EXPECT(0xc369, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc367));
        EXPECT(0x5b, gbc.readMem(0xc368));
        // CB 5B 026D
        gbc.setState(0xc872, 0x398c, 0xe840, 0x26fb, 0xd452, 0xc681, 0x1, 0x0);
        gbc.writeMem(0xc872, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x398c, gbc.sp());
        EXPECT(0xc874, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc872));
        EXPECT(0x5b, gbc.readMem(0xc873));
        // CB 5B 026E
        gbc.setState(0xd7a1, 0x8f5c, 0x3d00, 0x95e7, 0x5df, 0x12a5, 0x0, 0x0);
        gbc.writeMem(0xd7a1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x8f5c, gbc.sp());
        EXPECT(0xd7a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7a1));
        EXPECT(0x5b, gbc.readMem(0xd7a2));
        // CB 5B 0270
        gbc.setState(0x40aa, 0xd7c8, 0x1590, 0x6950, 0x63ad, 0x530c, 0x1, 0x1);
        gbc.writeMem(0x40aa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xd7c8, gbc.sp());
        EXPECT(0x40ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0271
        gbc.setState(0x1177, 0x68c3, 0x8540, 0x477b, 0x201d, 0xb903, 0x0, 0x0);
        gbc.writeMem(0x1177, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x68c3, gbc.sp());
        EXPECT(0x1179, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0272
        gbc.setState(0x3b8a, 0x9460, 0x3550, 0x610e, 0x4e80, 0x304a, 0x1, 0x0);
        gbc.writeMem(0x3b8a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x9460, gbc.sp());
        EXPECT(0x3b8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0273
        gbc.setState(0x1deb, 0x767a, 0x7570, 0x29cd, 0xabef, 0xce10, 0x1, 0x1);
        gbc.writeMem(0x1deb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x767a, gbc.sp());
        EXPECT(0x1ded, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0274
        gbc.setState(0x1fd2, 0x63fd, 0x94f0, 0x425a, 0xce51, 0xf87e, 0x0, 0x1);
        gbc.writeMem(0x1fd2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x63fd, gbc.sp());
        EXPECT(0x1fd4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0275
        gbc.setState(0x37db, 0x3c25, 0x8bc0, 0x9e7b, 0xfa3d, 0x2777, 0x1, 0x0);
        gbc.writeMem(0x37db, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x3c25, gbc.sp());
        EXPECT(0x37dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0276
        gbc.setState(0x1aec, 0xb5a2, 0xb370, 0x783b, 0xd0a4, 0xfe5a, 0x1, 0x0);
        gbc.writeMem(0x1aec, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xb5a2, gbc.sp());
        EXPECT(0x1aee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0277
        gbc.setState(0xe575, 0xf319, 0xe7e0, 0x85b7, 0xaaf7, 0x3a31, 0x1, 0x0);
        gbc.writeMem(0xe575, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xf319, gbc.sp());
        EXPECT(0xe577, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe575));
        EXPECT(0x5b, gbc.readMem(0xe576));
        // CB 5B 0278
        gbc.setState(0x6108, 0xa815, 0xe090, 0xa2cb, 0x1701, 0x925d, 0x0, 0x0);
        gbc.writeMem(0x6108, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xa815, gbc.sp());
        EXPECT(0x610a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0279
        gbc.setState(0xb86, 0x17b5, 0x9e40, 0xe8fc, 0xd7e5, 0x1f8c, 0x1, 0x1);
        gbc.writeMem(0xb86, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x17b5, gbc.sp());
        EXPECT(0xb88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 027A
        gbc.setState(0x33b8, 0x8125, 0xd4e0, 0x2aae, 0xef14, 0xb3b2, 0x1, 0x1);
        gbc.writeMem(0x33b8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x8125, gbc.sp());
        EXPECT(0x33ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 027B
        gbc.setState(0xc01b, 0xc158, 0xf630, 0xc411, 0x36f4, 0xa85b, 0x0, 0x1);
        gbc.writeMem(0xc01b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xc158, gbc.sp());
        EXPECT(0xc01d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc01b));
        EXPECT(0x5b, gbc.readMem(0xc01c));
        // CB 5B 027C
        gbc.setState(0xad47, 0x2dc1, 0xc450, 0xa095, 0xa672, 0xd02d, 0x1, 0x0);
        gbc.writeMem(0xad47, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x2dc1, gbc.sp());
        EXPECT(0xad49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad47));
        EXPECT(0x5b, gbc.readMem(0xad48));
        // CB 5B 027D
        gbc.setState(0x25b0, 0xe777, 0xd2c0, 0x3e0d, 0xa282, 0x8075, 0x0, 0x1);
        gbc.writeMem(0x25b0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xe777, gbc.sp());
        EXPECT(0x25b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 027E
        gbc.setState(0xb19b, 0x5859, 0xc1b0, 0x277a, 0x94f5, 0x5384, 0x0, 0x1);
        gbc.writeMem(0xb19b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x5859, gbc.sp());
        EXPECT(0xb19d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb19b));
        EXPECT(0x5b, gbc.readMem(0xb19c));
        // CB 5B 027F
        gbc.setState(0x8858, 0x1c64, 0x770, 0x38eb, 0x63ea, 0xccef, 0x1, 0x0);
        gbc.writeMem(0x8858, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x1c64, gbc.sp());
        EXPECT(0x885a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8858));
        EXPECT(0x5b, gbc.readMem(0x8859));
        // CB 5B 0280
        gbc.setState(0xd23e, 0x70be, 0x3490, 0x59b2, 0xebab, 0x31c8, 0x0, 0x0);
        gbc.writeMem(0xd23e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x70be, gbc.sp());
        EXPECT(0xd240, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd23e));
        EXPECT(0x5b, gbc.readMem(0xd23f));
        // CB 5B 0281
        gbc.setState(0x6f50, 0x1ac3, 0xf580, 0x2d, 0x5107, 0xfba8, 0x0, 0x0);
        gbc.writeMem(0x6f50, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x1ac3, gbc.sp());
        EXPECT(0x6f52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0282
        gbc.setState(0x56af, 0x898, 0x5fc0, 0xd307, 0x7c34, 0xd303, 0x0, 0x1);
        gbc.writeMem(0x56af, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x898, gbc.sp());
        EXPECT(0x56b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0283
        gbc.setState(0x4990, 0x6ad2, 0xdf20, 0xacb0, 0xeb33, 0x8e60, 0x1, 0x1);
        gbc.writeMem(0x4990, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x6ad2, gbc.sp());
        EXPECT(0x4992, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0284
        gbc.setState(0xbaba, 0x6c98, 0xdf80, 0x6582, 0xc622, 0x43fe, 0x1, 0x0);
        gbc.writeMem(0xbaba, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x6c98, gbc.sp());
        EXPECT(0xbabc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaba));
        EXPECT(0x5b, gbc.readMem(0xbabb));
        // CB 5B 0285
        gbc.setState(0x6c54, 0x208, 0xbc0, 0x2811, 0x844c, 0x4022, 0x1, 0x1);
        gbc.writeMem(0x6c54, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x208, gbc.sp());
        EXPECT(0x6c56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0287
        gbc.setState(0x4d0c, 0xef5e, 0x9ac0, 0xe624, 0x15ea, 0xd4d6, 0x1, 0x1);
        gbc.writeMem(0x4d0c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xef5e, gbc.sp());
        EXPECT(0x4d0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0288
        gbc.setState(0x3c12, 0xa459, 0x28c0, 0x3900, 0x4333, 0x262b, 0x0, 0x1);
        gbc.writeMem(0x3c12, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xa459, gbc.sp());
        EXPECT(0x3c14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0289
        gbc.setState(0xe5f7, 0x9f94, 0x89e0, 0xe77e, 0x3b4e, 0x9da, 0x1, 0x0);
        gbc.writeMem(0xe5f7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x9f94, gbc.sp());
        EXPECT(0xe5f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5f7));
        EXPECT(0x5b, gbc.readMem(0xe5f8));
        // CB 5B 028A
        gbc.setState(0x77f6, 0x15f4, 0xe680, 0x681e, 0xa6e8, 0x64fd, 0x0, 0x1);
        gbc.writeMem(0x77f6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x15f4, gbc.sp());
        EXPECT(0x77f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 028B
        gbc.setState(0x5e1d, 0x321b, 0x60e0, 0x6185, 0x351c, 0x4f7a, 0x0, 0x0);
        gbc.writeMem(0x5e1d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x321b, gbc.sp());
        EXPECT(0x5e1f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 028D
        gbc.setState(0xee02, 0x6654, 0x9c40, 0xc7fb, 0x4156, 0x13d8, 0x1, 0x0);
        gbc.writeMem(0xee02, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x6654, gbc.sp());
        EXPECT(0xee04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee02));
        EXPECT(0x5b, gbc.readMem(0xee03));
        // CB 5B 028E
        gbc.setState(0xc1a5, 0x8224, 0x8b90, 0x2171, 0x9d03, 0x780e, 0x1, 0x1);
        gbc.writeMem(0xc1a5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x8224, gbc.sp());
        EXPECT(0xc1a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1a5));
        EXPECT(0x5b, gbc.readMem(0xc1a6));
        // CB 5B 028F
        gbc.setState(0xdead, 0x712d, 0x5ac0, 0x19de, 0x788c, 0x253c, 0x1, 0x1);
        gbc.writeMem(0xdead, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x712d, gbc.sp());
        EXPECT(0xdeaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdead));
        EXPECT(0x5b, gbc.readMem(0xdeae));
        // CB 5B 0290
        gbc.setState(0x87c1, 0x6f74, 0x79e0, 0x2b8e, 0xcb82, 0x8f8e, 0x1, 0x1);
        gbc.writeMem(0x87c1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x6f74, gbc.sp());
        EXPECT(0x87c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87c1));
        EXPECT(0x5b, gbc.readMem(0x87c2));
        // CB 5B 0291
        gbc.setState(0x85f, 0xa484, 0xfcf0, 0x3c2b, 0x8757, 0xe78b, 0x0, 0x1);
        gbc.writeMem(0x85f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xa484, gbc.sp());
        EXPECT(0x861, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0292
        gbc.setState(0x88cc, 0x50e, 0x8fe0, 0xea07, 0xf537, 0xdf54, 0x0, 0x1);
        gbc.writeMem(0x88cc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x50e, gbc.sp());
        EXPECT(0x88ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88cc));
        EXPECT(0x5b, gbc.readMem(0x88cd));
        // CB 5B 0294
        gbc.setState(0xaf3d, 0x72dd, 0x8f00, 0x1316, 0x92af, 0xd393, 0x0, 0x0);
        gbc.writeMem(0xaf3d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x72dd, gbc.sp());
        EXPECT(0xaf3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf3d));
        EXPECT(0x5b, gbc.readMem(0xaf3e));
        // CB 5B 0296
        gbc.setState(0x1c2d, 0x4e54, 0x1c30, 0x3a8a, 0x91f2, 0x4635, 0x1, 0x1);
        gbc.writeMem(0x1c2d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x4e54, gbc.sp());
        EXPECT(0x1c2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0297
        gbc.setState(0x7b2, 0x984d, 0xd230, 0x2f16, 0x65d9, 0x5e9c, 0x0, 0x1);
        gbc.writeMem(0x7b2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x984d, gbc.sp());
        EXPECT(0x7b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0299
        gbc.setState(0x9bd6, 0x1f25, 0x62b0, 0x5bb, 0x5f32, 0xd869, 0x0, 0x1);
        gbc.writeMem(0x9bd6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x1f25, gbc.sp());
        EXPECT(0x9bd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bd6));
        EXPECT(0x5b, gbc.readMem(0x9bd7));
        // CB 5B 029A
        gbc.setState(0xd0f5, 0xa48e, 0x4800, 0x3026, 0x4ddd, 0xdfc7, 0x0, 0x1);
        gbc.writeMem(0xd0f5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xa48e, gbc.sp());
        EXPECT(0xd0f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0f5));
        EXPECT(0x5b, gbc.readMem(0xd0f6));
        // CB 5B 029B
        gbc.setState(0x154a, 0x217b, 0x9020, 0xaae1, 0x81b3, 0x2944, 0x0, 0x0);
        gbc.writeMem(0x154a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x217b, gbc.sp());
        EXPECT(0x154c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 029C
        gbc.setState(0x797a, 0x5490, 0x95b0, 0x5d9a, 0x2e08, 0x9c6e, 0x0, 0x1);
        gbc.writeMem(0x797a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x5490, gbc.sp());
        EXPECT(0x797c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 029D
        gbc.setState(0x61df, 0xdae8, 0x90e0, 0x711d, 0xaaa2, 0x7831, 0x0, 0x0);
        gbc.writeMem(0x61df, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xdae8, gbc.sp());
        EXPECT(0x61e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 029E
        gbc.setState(0xc3d, 0x8b92, 0xcf80, 0xd7c9, 0xfbb5, 0x30f1, 0x0, 0x0);
        gbc.writeMem(0xc3d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x8b92, gbc.sp());
        EXPECT(0xc3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 029F
        gbc.setState(0xe973, 0x25c6, 0x1be0, 0x433f, 0xc5c4, 0xe85e, 0x0, 0x0);
        gbc.writeMem(0xe973, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x25c6, gbc.sp());
        EXPECT(0xe975, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe973));
        EXPECT(0x5b, gbc.readMem(0xe974));
        // CB 5B 02A0
        gbc.setState(0x6ed9, 0xfcd0, 0x8d40, 0x9dee, 0x5dcf, 0x157e, 0x1, 0x1);
        gbc.writeMem(0x6ed9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xfcd0, gbc.sp());
        EXPECT(0x6edb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02A1
        gbc.setState(0xd1a4, 0x125e, 0x2820, 0xd248, 0x343e, 0xc21c, 0x0, 0x1);
        gbc.writeMem(0xd1a4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x125e, gbc.sp());
        EXPECT(0xd1a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1a4));
        EXPECT(0x5b, gbc.readMem(0xd1a5));
        // CB 5B 02A2
        gbc.setState(0x9cb1, 0x7a93, 0x7120, 0xa897, 0x8455, 0xfb43, 0x1, 0x0);
        gbc.writeMem(0x9cb1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x7a93, gbc.sp());
        EXPECT(0x9cb3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cb1));
        EXPECT(0x5b, gbc.readMem(0x9cb2));
        // CB 5B 02A3
        gbc.setState(0xa15, 0x8a59, 0x52f0, 0x9758, 0x5470, 0xc7de, 0x0, 0x0);
        gbc.writeMem(0xa15, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x8a59, gbc.sp());
        EXPECT(0xa17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02A4
        gbc.setState(0xbe25, 0xe5da, 0x2450, 0xdb58, 0x9288, 0xb5fc, 0x0, 0x1);
        gbc.writeMem(0xbe25, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xe5da, gbc.sp());
        EXPECT(0xbe27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe25));
        EXPECT(0x5b, gbc.readMem(0xbe26));
        // CB 5B 02A5
        gbc.setState(0x39e9, 0x819b, 0x2bf0, 0x471f, 0x442c, 0x8473, 0x1, 0x0);
        gbc.writeMem(0x39e9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x819b, gbc.sp());
        EXPECT(0x39eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02A6
        gbc.setState(0x4fb6, 0x124f, 0xf4e0, 0xacc9, 0xdddb, 0xcfdc, 0x0, 0x1);
        gbc.writeMem(0x4fb6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x124f, gbc.sp());
        EXPECT(0x4fb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02A7
        gbc.setState(0xa9a4, 0x3373, 0xa920, 0x6b60, 0x2ab8, 0x73e4, 0x1, 0x0);
        gbc.writeMem(0xa9a4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x3373, gbc.sp());
        EXPECT(0xa9a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9a4));
        EXPECT(0x5b, gbc.readMem(0xa9a5));
        // CB 5B 02A8
        gbc.setState(0x727c, 0xce74, 0x8150, 0x9fea, 0x91ea, 0x2af, 0x0, 0x1);
        gbc.writeMem(0x727c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xce74, gbc.sp());
        EXPECT(0x727e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02A9
        gbc.setState(0xabfb, 0xf522, 0x1480, 0xf792, 0x6c7f, 0x21af, 0x0, 0x1);
        gbc.writeMem(0xabfb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xf522, gbc.sp());
        EXPECT(0xabfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabfb));
        EXPECT(0x5b, gbc.readMem(0xabfc));
        // CB 5B 02AA
        gbc.setState(0xe24b, 0x5217, 0x7730, 0x9085, 0x82f2, 0xf882, 0x0, 0x1);
        gbc.writeMem(0xe24b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x5217, gbc.sp());
        EXPECT(0xe24d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe24b));
        EXPECT(0x5b, gbc.readMem(0xe24c));
        // CB 5B 02AB
        gbc.setState(0x103c, 0x34d2, 0xd6d0, 0xc7b6, 0x943c, 0xacb7, 0x1, 0x0);
        gbc.writeMem(0x103c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x34d2, gbc.sp());
        EXPECT(0x103e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02AC
        gbc.setState(0x3cb9, 0x2a2c, 0xbd90, 0x2189, 0xfef4, 0xfdfc, 0x0, 0x0);
        gbc.writeMem(0x3cb9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x2a2c, gbc.sp());
        EXPECT(0x3cbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02AD
        gbc.setState(0xa322, 0xa7d2, 0x6ce0, 0x1c48, 0xd7f2, 0x45f8, 0x1, 0x1);
        gbc.writeMem(0xa322, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xa7d2, gbc.sp());
        EXPECT(0xa324, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa322));
        EXPECT(0x5b, gbc.readMem(0xa323));
        // CB 5B 02AE
        gbc.setState(0xd53e, 0xeedf, 0x4590, 0x2012, 0x88e5, 0x8734, 0x0, 0x0);
        gbc.writeMem(0xd53e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xeedf, gbc.sp());
        EXPECT(0xd540, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd53e));
        EXPECT(0x5b, gbc.readMem(0xd53f));
        // CB 5B 02AF
        gbc.setState(0x8036, 0x8380, 0x2910, 0x19, 0x654e, 0xe85f, 0x1, 0x0);
        gbc.writeMem(0x8036, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x8380, gbc.sp());
        EXPECT(0x8038, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8036));
        EXPECT(0x5b, gbc.readMem(0x8037));
        // CB 5B 02B0
        gbc.setState(0x9f59, 0x6f62, 0x7ba0, 0xf2d9, 0xd78, 0xbbef, 0x0, 0x0);
        gbc.writeMem(0x9f59, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x6f62, gbc.sp());
        EXPECT(0x9f5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f59));
        EXPECT(0x5b, gbc.readMem(0x9f5a));
        // CB 5B 02B1
        gbc.setState(0x804d, 0x25ef, 0x1f10, 0x51fd, 0x2223, 0x328f, 0x1, 0x1);
        gbc.writeMem(0x804d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x25ef, gbc.sp());
        EXPECT(0x804f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x804d));
        EXPECT(0x5b, gbc.readMem(0x804e));
        // CB 5B 02B2
        gbc.setState(0xbaa3, 0xe0aa, 0x8ba0, 0xeba5, 0x7b78, 0xa2db, 0x1, 0x0);
        gbc.writeMem(0xbaa3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xe0aa, gbc.sp());
        EXPECT(0xbaa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaa3));
        EXPECT(0x5b, gbc.readMem(0xbaa4));
        // CB 5B 02B3
        gbc.setState(0x1c0e, 0x9a2c, 0x2560, 0xf59d, 0xe34f, 0x7be8, 0x0, 0x1);
        gbc.writeMem(0x1c0e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x9a2c, gbc.sp());
        EXPECT(0x1c10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02B4
        gbc.setState(0x4b0d, 0x9cfd, 0xf800, 0xd209, 0x6183, 0x76cb, 0x0, 0x1);
        gbc.writeMem(0x4b0d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x9cfd, gbc.sp());
        EXPECT(0x4b0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02B6
        gbc.setState(0xafc1, 0x54b0, 0xb890, 0x4815, 0x1365, 0xf8ef, 0x0, 0x1);
        gbc.writeMem(0xafc1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x54b0, gbc.sp());
        EXPECT(0xafc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafc1));
        EXPECT(0x5b, gbc.readMem(0xafc2));
        // CB 5B 02B7
        gbc.setState(0x8053, 0x3341, 0x260, 0x3408, 0x549e, 0x2905, 0x1, 0x0);
        gbc.writeMem(0x8053, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x3341, gbc.sp());
        EXPECT(0x8055, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8053));
        EXPECT(0x5b, gbc.readMem(0x8054));
        // CB 5B 02B8
        gbc.setState(0x9628, 0x4295, 0x8030, 0x62f5, 0xdcc4, 0x1dbd, 0x1, 0x1);
        gbc.writeMem(0x9628, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x4295, gbc.sp());
        EXPECT(0x962a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9628));
        EXPECT(0x5b, gbc.readMem(0x9629));
        // CB 5B 02B9
        gbc.setState(0xddf0, 0xe35f, 0x2830, 0x6cd6, 0x4901, 0xaf7, 0x1, 0x0);
        gbc.writeMem(0xddf0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xe35f, gbc.sp());
        EXPECT(0xddf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddf0));
        EXPECT(0x5b, gbc.readMem(0xddf1));
        // CB 5B 02BA
        gbc.setState(0xe33, 0xfcbd, 0xb0e0, 0x4528, 0xee96, 0x89d2, 0x0, 0x1);
        gbc.writeMem(0xe33, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xfcbd, gbc.sp());
        EXPECT(0xe35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02BB
        gbc.setState(0xd567, 0x5216, 0xbe80, 0x7321, 0x21f6, 0xf26e, 0x0, 0x0);
        gbc.writeMem(0xd567, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x5216, gbc.sp());
        EXPECT(0xd569, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd567));
        EXPECT(0x5b, gbc.readMem(0xd568));
        // CB 5B 02BC
        gbc.setState(0x17ed, 0xcca3, 0xf250, 0x5bdd, 0xa369, 0xe305, 0x0, 0x0);
        gbc.writeMem(0x17ed, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xcca3, gbc.sp());
        EXPECT(0x17ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02BD
        gbc.setState(0x3e9f, 0xdf77, 0x9a60, 0xc277, 0xcf27, 0x36fc, 0x0, 0x1);
        gbc.writeMem(0x3e9f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xdf77, gbc.sp());
        EXPECT(0x3ea1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02BE
        gbc.setState(0x1b66, 0x6c6a, 0x8a80, 0x7c42, 0x4b5f, 0xba4, 0x1, 0x0);
        gbc.writeMem(0x1b66, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x6c6a, gbc.sp());
        EXPECT(0x1b68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02BF
        gbc.setState(0x3e1a, 0x3970, 0xf140, 0xf968, 0xdf92, 0xc55a, 0x1, 0x0);
        gbc.writeMem(0x3e1a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x3970, gbc.sp());
        EXPECT(0x3e1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02C0
        gbc.setState(0x12, 0x6047, 0xb5d0, 0xd4d5, 0xc65c, 0x3a66, 0x1, 0x0);
        gbc.writeMem(0x12, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x6047, gbc.sp());
        EXPECT(0x14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02C1
        gbc.setState(0x5398, 0x1d5b, 0xea70, 0xd2ec, 0xb598, 0x7d1d, 0x0, 0x0);
        gbc.writeMem(0x5398, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x1d5b, gbc.sp());
        EXPECT(0x539a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02C2
        gbc.setState(0x66a3, 0x350b, 0x4c60, 0x63b8, 0x8052, 0xa00c, 0x1, 0x0);
        gbc.writeMem(0x66a3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x350b, gbc.sp());
        EXPECT(0x66a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02C3
        gbc.setState(0xc58e, 0x38e0, 0x2b80, 0x54a8, 0xba82, 0x65db, 0x0, 0x0);
        gbc.writeMem(0xc58e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x38e0, gbc.sp());
        EXPECT(0xc590, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc58e));
        EXPECT(0x5b, gbc.readMem(0xc58f));
        // CB 5B 02C4
        gbc.setState(0x587c, 0x8990, 0x4a50, 0x7629, 0x5166, 0x9d3a, 0x0, 0x0);
        gbc.writeMem(0x587c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x8990, gbc.sp());
        EXPECT(0x587e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02C5
        gbc.setState(0x2a65, 0x90a6, 0x5c90, 0xcaf3, 0x6a42, 0x917a, 0x0, 0x1);
        gbc.writeMem(0x2a65, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x90a6, gbc.sp());
        EXPECT(0x2a67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02C6
        gbc.setState(0x6255, 0x296b, 0xf6f0, 0x4f81, 0xb07e, 0xdb2c, 0x0, 0x1);
        gbc.writeMem(0x6255, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x296b, gbc.sp());
        EXPECT(0x6257, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02C7
        gbc.setState(0xcaee, 0x2ac, 0xfa10, 0xe68b, 0x31e6, 0xe264, 0x1, 0x0);
        gbc.writeMem(0xcaee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x2ac, gbc.sp());
        EXPECT(0xcaf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaee));
        EXPECT(0x5b, gbc.readMem(0xcaef));
        // CB 5B 02C8
        gbc.setState(0x8274, 0xdb96, 0xec30, 0x80bc, 0x46b5, 0x6075, 0x0, 0x1);
        gbc.writeMem(0x8274, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xdb96, gbc.sp());
        EXPECT(0x8276, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8274));
        EXPECT(0x5b, gbc.readMem(0x8275));
        // CB 5B 02C9
        gbc.setState(0xfda, 0xe55, 0xe650, 0x528b, 0xb56c, 0xebb5, 0x0, 0x0);
        gbc.writeMem(0xfda, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xe55, gbc.sp());
        EXPECT(0xfdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02CA
        gbc.setState(0xd6b3, 0x52d, 0x22d0, 0x4581, 0x10db, 0x4754, 0x0, 0x0);
        gbc.writeMem(0xd6b3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x52d, gbc.sp());
        EXPECT(0xd6b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6b3));
        EXPECT(0x5b, gbc.readMem(0xd6b4));
        // CB 5B 02CC
        gbc.setState(0x6d33, 0xe45b, 0x9760, 0x2914, 0x88a, 0x347b, 0x1, 0x0);
        gbc.writeMem(0x6d33, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xe45b, gbc.sp());
        EXPECT(0x6d35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02CD
        gbc.setState(0x7ecf, 0xd6f8, 0x9700, 0xee79, 0x42e8, 0x8415, 0x1, 0x0);
        gbc.writeMem(0x7ecf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xd6f8, gbc.sp());
        EXPECT(0x7ed1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02CE
        gbc.setState(0x986f, 0x51ac, 0xa3d0, 0x7d62, 0x7c0f, 0xbc82, 0x1, 0x0);
        gbc.writeMem(0x986f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x51ac, gbc.sp());
        EXPECT(0x9871, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x986f));
        EXPECT(0x5b, gbc.readMem(0x9870));
        // CB 5B 02CF
        gbc.setState(0x96b5, 0xf6e, 0x20c0, 0x7b43, 0xeacf, 0x4da6, 0x1, 0x1);
        gbc.writeMem(0x96b5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xf6e, gbc.sp());
        EXPECT(0x96b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96b5));
        EXPECT(0x5b, gbc.readMem(0x96b6));
        // CB 5B 02D0
        gbc.setState(0xd821, 0xfb41, 0x2780, 0xdce9, 0x5ecb, 0xd7d, 0x1, 0x1);
        gbc.writeMem(0xd821, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xfb41, gbc.sp());
        EXPECT(0xd823, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd821));
        EXPECT(0x5b, gbc.readMem(0xd822));
        // CB 5B 02D1
        gbc.setState(0x91a1, 0xb32c, 0xae20, 0x5194, 0x8f5a, 0x1525, 0x1, 0x0);
        gbc.writeMem(0x91a1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xb32c, gbc.sp());
        EXPECT(0x91a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91a1));
        EXPECT(0x5b, gbc.readMem(0x91a2));
        // CB 5B 02D2
        gbc.setState(0x7d8e, 0x1973, 0x8bf0, 0x8f68, 0x63e1, 0x89be, 0x0, 0x1);
        gbc.writeMem(0x7d8e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x1973, gbc.sp());
        EXPECT(0x7d90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02D5
        gbc.setState(0xd4d1, 0x3f70, 0x3c80, 0x41c, 0xdbd9, 0x7eb8, 0x0, 0x0);
        gbc.writeMem(0xd4d1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x3f70, gbc.sp());
        EXPECT(0xd4d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4d1));
        EXPECT(0x5b, gbc.readMem(0xd4d2));
        // CB 5B 02D6
        gbc.setState(0x7055, 0x4d69, 0x8d60, 0x6034, 0x4681, 0xd7a7, 0x0, 0x0);
        gbc.writeMem(0x7055, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x4d69, gbc.sp());
        EXPECT(0x7057, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02D7
        gbc.setState(0x3676, 0x6297, 0xaf10, 0x6017, 0xac04, 0x46eb, 0x0, 0x0);
        gbc.writeMem(0x3676, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x6297, gbc.sp());
        EXPECT(0x3678, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02D8
        gbc.setState(0xafe0, 0x247a, 0x7cf0, 0x9c2e, 0x9444, 0x7b55, 0x0, 0x1);
        gbc.writeMem(0xafe0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x247a, gbc.sp());
        EXPECT(0xafe2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafe0));
        EXPECT(0x5b, gbc.readMem(0xafe1));
        // CB 5B 02D9
        gbc.setState(0x6648, 0xe40d, 0xea70, 0x99e0, 0x4ca1, 0xc991, 0x0, 0x0);
        gbc.writeMem(0x6648, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xe40d, gbc.sp());
        EXPECT(0x664a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02DA
        gbc.setState(0x6ed6, 0x8876, 0xa790, 0xe7cd, 0x56e6, 0xd418, 0x0, 0x1);
        gbc.writeMem(0x6ed6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x8876, gbc.sp());
        EXPECT(0x6ed8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02DB
        gbc.setState(0x25e5, 0x4d87, 0x1190, 0xda98, 0x5de5, 0xab3b, 0x1, 0x1);
        gbc.writeMem(0x25e5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x4d87, gbc.sp());
        EXPECT(0x25e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02DD
        gbc.setState(0x9e07, 0x630f, 0x1df0, 0xac92, 0xcf16, 0x9021, 0x0, 0x0);
        gbc.writeMem(0x9e07, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x630f, gbc.sp());
        EXPECT(0x9e09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e07));
        EXPECT(0x5b, gbc.readMem(0x9e08));
        // CB 5B 02DE
        gbc.setState(0xcfed, 0xb014, 0x8230, 0x6796, 0x5ec6, 0xe332, 0x0, 0x0);
        gbc.writeMem(0xcfed, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xb014, gbc.sp());
        EXPECT(0xcfef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfed));
        EXPECT(0x5b, gbc.readMem(0xcfee));
        // CB 5B 02DF
        gbc.setState(0x1295, 0xd777, 0xc740, 0x7c0d, 0x18a0, 0x9974, 0x0, 0x0);
        gbc.writeMem(0x1295, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xd777, gbc.sp());
        EXPECT(0x1297, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02E1
        gbc.setState(0x3784, 0x4c43, 0x7be0, 0x31eb, 0x2db3, 0x39c7, 0x1, 0x0);
        gbc.writeMem(0x3784, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x4c43, gbc.sp());
        EXPECT(0x3786, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02E3
        gbc.setState(0xcd6b, 0x4684, 0xbd0, 0x858d, 0xea57, 0xc50d, 0x0, 0x1);
        gbc.writeMem(0xcd6b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x4684, gbc.sp());
        EXPECT(0xcd6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd6b));
        EXPECT(0x5b, gbc.readMem(0xcd6c));
        // CB 5B 02E4
        gbc.setState(0x4c7e, 0xdab4, 0x4740, 0xa57e, 0x238d, 0x6190, 0x1, 0x1);
        gbc.writeMem(0x4c7e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xdab4, gbc.sp());
        EXPECT(0x4c80, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02E5
        gbc.setState(0x3aa6, 0xeb7d, 0xff70, 0xe061, 0x67a9, 0xb27e, 0x1, 0x1);
        gbc.writeMem(0x3aa6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xeb7d, gbc.sp());
        EXPECT(0x3aa8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02E6
        gbc.setState(0x5a, 0xd2c2, 0x4ce0, 0x961f, 0x30f6, 0x251a, 0x0, 0x0);
        gbc.writeMem(0x5a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xd2c2, gbc.sp());
        EXPECT(0x5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02E7
        gbc.setState(0x4a9f, 0xee78, 0xd590, 0x3eb9, 0xf8d1, 0x7f15, 0x0, 0x0);
        gbc.writeMem(0x4a9f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xee78, gbc.sp());
        EXPECT(0x4aa1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02E8
        gbc.setState(0xec03, 0xe416, 0xfa20, 0xab14, 0x5a5c, 0x2f9d, 0x0, 0x1);
        gbc.writeMem(0xec03, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xe416, gbc.sp());
        EXPECT(0xec05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec03));
        EXPECT(0x5b, gbc.readMem(0xec04));
        // CB 5B 02E9
        gbc.setState(0x1429, 0x6a02, 0x2f00, 0xd3a6, 0xc129, 0xf80, 0x0, 0x1);
        gbc.writeMem(0x1429, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x6a02, gbc.sp());
        EXPECT(0x142b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02EA
        gbc.setState(0xd5fa, 0x3583, 0x6cf0, 0xb2af, 0x2772, 0xb94d, 0x1, 0x1);
        gbc.writeMem(0xd5fa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x3583, gbc.sp());
        EXPECT(0xd5fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5fa));
        EXPECT(0x5b, gbc.readMem(0xd5fb));
        // CB 5B 02EB
        gbc.setState(0x4df1, 0x7e59, 0x5fb0, 0x2a8d, 0x7236, 0xb369, 0x0, 0x1);
        gbc.writeMem(0x4df1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x7e59, gbc.sp());
        EXPECT(0x4df3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02EC
        gbc.setState(0x2c6f, 0x7695, 0xc700, 0x4b8f, 0xea3f, 0x5d4a, 0x1, 0x1);
        gbc.writeMem(0x2c6f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x7695, gbc.sp());
        EXPECT(0x2c71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02ED
        gbc.setState(0x349b, 0x43d0, 0x40b0, 0xd9c3, 0xbb11, 0xde6e, 0x1, 0x1);
        gbc.writeMem(0x349b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x43d0, gbc.sp());
        EXPECT(0x349d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02EE
        gbc.setState(0xe52e, 0x52fa, 0xe5f0, 0x9eb0, 0xf461, 0xffda, 0x0, 0x1);
        gbc.writeMem(0xe52e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x52fa, gbc.sp());
        EXPECT(0xe530, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe52e));
        EXPECT(0x5b, gbc.readMem(0xe52f));
        // CB 5B 02EF
        gbc.setState(0x27dc, 0x870f, 0xb590, 0x8011, 0x428e, 0xf05e, 0x0, 0x1);
        gbc.writeMem(0x27dc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x870f, gbc.sp());
        EXPECT(0x27de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02F0
        gbc.setState(0x19e2, 0xda50, 0x8d00, 0x7eff, 0x555e, 0xb3b2, 0x0, 0x0);
        gbc.writeMem(0x19e2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xda50, gbc.sp());
        EXPECT(0x19e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02F1
        gbc.setState(0x618, 0x2d10, 0xa10, 0x498, 0xde43, 0x2b8b, 0x0, 0x1);
        gbc.writeMem(0x618, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x2d10, gbc.sp());
        EXPECT(0x61a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02F2
        gbc.setState(0xdd99, 0xc2f8, 0x6e00, 0x6841, 0x15c1, 0x44c4, 0x1, 0x0);
        gbc.writeMem(0xdd99, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xc2f8, gbc.sp());
        EXPECT(0xdd9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd99));
        EXPECT(0x5b, gbc.readMem(0xdd9a));
        // CB 5B 02F3
        gbc.setState(0xdb6a, 0xd6ff, 0x5e90, 0xeeed, 0x99a4, 0xd98c, 0x0, 0x1);
        gbc.writeMem(0xdb6a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xd6ff, gbc.sp());
        EXPECT(0xdb6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb6a));
        EXPECT(0x5b, gbc.readMem(0xdb6b));
        // CB 5B 02F4
        gbc.setState(0x9690, 0x62ed, 0xef10, 0x611d, 0x87dd, 0x8fdf, 0x0, 0x0);
        gbc.writeMem(0x9690, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x62ed, gbc.sp());
        EXPECT(0x9692, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9690));
        EXPECT(0x5b, gbc.readMem(0x9691));
        // CB 5B 02F5
        gbc.setState(0xa071, 0x7f3e, 0x3120, 0xf033, 0x8984, 0x4324, 0x1, 0x1);
        gbc.writeMem(0xa071, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x7f3e, gbc.sp());
        EXPECT(0xa073, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa071));
        EXPECT(0x5b, gbc.readMem(0xa072));
        // CB 5B 02F6
        gbc.setState(0x3e91, 0x584, 0x85c0, 0x52a2, 0x7485, 0x28ef, 0x1, 0x1);
        gbc.writeMem(0x3e91, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x584, gbc.sp());
        EXPECT(0x3e93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02F7
        gbc.setState(0xd7f6, 0x8004, 0x44e0, 0x2100, 0x97d7, 0x280f, 0x1, 0x0);
        gbc.writeMem(0xd7f6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x8004, gbc.sp());
        EXPECT(0xd7f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7f6));
        EXPECT(0x5b, gbc.readMem(0xd7f7));
        // CB 5B 02F8
        gbc.setState(0xe875, 0xe124, 0xbb70, 0xd2af, 0x2bb0, 0x2bd8, 0x1, 0x0);
        gbc.writeMem(0xe875, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xe124, gbc.sp());
        EXPECT(0xe877, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe875));
        EXPECT(0x5b, gbc.readMem(0xe876));
        // CB 5B 02F9
        gbc.setState(0xa20e, 0x7cb8, 0xf440, 0x7e1e, 0xa70f, 0x93d5, 0x1, 0x0);
        gbc.writeMem(0xa20e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x7cb8, gbc.sp());
        EXPECT(0xa210, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa20e));
        EXPECT(0x5b, gbc.readMem(0xa20f));
        // CB 5B 02FA
        gbc.setState(0x87b4, 0x60b2, 0x2c90, 0x41b4, 0x358, 0x6ab0, 0x1, 0x0);
        gbc.writeMem(0x87b4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x60b2, gbc.sp());
        EXPECT(0x87b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87b4));
        EXPECT(0x5b, gbc.readMem(0x87b5));
        // CB 5B 02FB
        gbc.setState(0x50a7, 0xd0bd, 0x3340, 0xd0dc, 0x8bae, 0x96b0, 0x0, 0x0);
        gbc.writeMem(0x50a7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xd0bd, gbc.sp());
        EXPECT(0x50a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02FC
        gbc.setState(0x10ec, 0xcfad, 0x51b0, 0xa295, 0xcbcf, 0x2db7, 0x0, 0x1);
        gbc.writeMem(0x10ec, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xcfad, gbc.sp());
        EXPECT(0x10ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 02FD
        gbc.setState(0xe0e9, 0x3bf8, 0xcaf0, 0x74a4, 0xff2b, 0x8ec7, 0x0, 0x0);
        gbc.writeMem(0xe0e9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x3bf8, gbc.sp());
        EXPECT(0xe0eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0e9));
        EXPECT(0x5b, gbc.readMem(0xe0ea));
        // CB 5B 02FE
        gbc.setState(0x3e39, 0xe221, 0xd380, 0x60dc, 0x5a1f, 0xaa38, 0x0, 0x1);
        gbc.writeMem(0x3e39, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xe221, gbc.sp());
        EXPECT(0x3e3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 02FF
        gbc.setState(0xd86d, 0x420f, 0xff30, 0xe1ad, 0xbd4a, 0x98fc, 0x0, 0x1);
        gbc.writeMem(0xd86d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x420f, gbc.sp());
        EXPECT(0xd86f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd86d));
        EXPECT(0x5b, gbc.readMem(0xd86e));
        // CB 5B 0300
        gbc.setState(0x580c, 0x9d7, 0x8800, 0xcaa9, 0x1ece, 0x8b4d, 0x0, 0x1);
        gbc.writeMem(0x580c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x9d7, gbc.sp());
        EXPECT(0x580e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0301
        gbc.setState(0x82b4, 0x7930, 0xb7c0, 0x4f9c, 0xaf60, 0xe4f5, 0x1, 0x1);
        gbc.writeMem(0x82b4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x7930, gbc.sp());
        EXPECT(0x82b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82b4));
        EXPECT(0x5b, gbc.readMem(0x82b5));
        // CB 5B 0302
        gbc.setState(0xad90, 0xa20, 0xfd00, 0x1d5f, 0xe3ad, 0x3610, 0x1, 0x1);
        gbc.writeMem(0xad90, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xa20, gbc.sp());
        EXPECT(0xad92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad90));
        EXPECT(0x5b, gbc.readMem(0xad91));
        // CB 5B 0303
        gbc.setState(0x6c4e, 0x1eb8, 0x6060, 0xf23f, 0xbe9, 0x42de, 0x1, 0x1);
        gbc.writeMem(0x6c4e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x1eb8, gbc.sp());
        EXPECT(0x6c50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0304
        gbc.setState(0x5f1d, 0x1655, 0xb8d0, 0xd129, 0x6f99, 0xbaa1, 0x0, 0x0);
        gbc.writeMem(0x5f1d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x1655, gbc.sp());
        EXPECT(0x5f1f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0305
        gbc.setState(0x2684, 0x90e6, 0xb710, 0xaa9c, 0xef8f, 0x89ac, 0x0, 0x1);
        gbc.writeMem(0x2684, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x90e6, gbc.sp());
        EXPECT(0x2686, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0306
        gbc.setState(0xc82b, 0x4bb, 0x3b90, 0x3964, 0x2f4e, 0x6362, 0x0, 0x1);
        gbc.writeMem(0xc82b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x4bb, gbc.sp());
        EXPECT(0xc82d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc82b));
        EXPECT(0x5b, gbc.readMem(0xc82c));
        // CB 5B 0307
        gbc.setState(0x2d44, 0x1b9a, 0xcc30, 0x82b2, 0xce9b, 0x4757, 0x0, 0x0);
        gbc.writeMem(0x2d44, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x1b9a, gbc.sp());
        EXPECT(0x2d46, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0308
        gbc.setState(0x8753, 0x8439, 0xb3d0, 0x3e1f, 0x3e17, 0x6990, 0x1, 0x0);
        gbc.writeMem(0x8753, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x8439, gbc.sp());
        EXPECT(0x8755, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8753));
        EXPECT(0x5b, gbc.readMem(0x8754));
        // CB 5B 0309
        gbc.setState(0x20da, 0xd170, 0xbe30, 0xc9d8, 0xbf5, 0x42fe, 0x0, 0x0);
        gbc.writeMem(0x20da, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xd170, gbc.sp());
        EXPECT(0x20dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 030A
        gbc.setState(0x5027, 0xbf0c, 0x1280, 0x3714, 0x56f8, 0xc70b, 0x1, 0x1);
        gbc.writeMem(0x5027, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xbf0c, gbc.sp());
        EXPECT(0x5029, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 030B
        gbc.setState(0x28c0, 0xfb5f, 0xe3c0, 0x4bf8, 0x967a, 0x9bca, 0x1, 0x0);
        gbc.writeMem(0x28c0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xfb5f, gbc.sp());
        EXPECT(0x28c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 030C
        gbc.setState(0x5072, 0x51af, 0x2680, 0xf6f3, 0xfa92, 0xaa34, 0x1, 0x1);
        gbc.writeMem(0x5072, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x51af, gbc.sp());
        EXPECT(0x5074, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 030D
        gbc.setState(0x45fc, 0x6d84, 0xd940, 0xed52, 0xf2f1, 0x37, 0x1, 0x1);
        gbc.writeMem(0x45fc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x6d84, gbc.sp());
        EXPECT(0x45fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 030E
        gbc.setState(0x9107, 0x2a41, 0x8310, 0xa96f, 0x3c7a, 0xc1eb, 0x1, 0x1);
        gbc.writeMem(0x9107, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x2a41, gbc.sp());
        EXPECT(0x9109, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9107));
        EXPECT(0x5b, gbc.readMem(0x9108));
        // CB 5B 030F
        gbc.setState(0x1b24, 0x6ada, 0x8160, 0x7eab, 0x741a, 0xe200, 0x0, 0x0);
        gbc.writeMem(0x1b24, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x6ada, gbc.sp());
        EXPECT(0x1b26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0310
        gbc.setState(0x2751, 0x128c, 0x5d10, 0xf660, 0xc31d, 0x7a42, 0x1, 0x1);
        gbc.writeMem(0x2751, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x128c, gbc.sp());
        EXPECT(0x2753, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0311
        gbc.setState(0x423, 0x803d, 0xbf0, 0xd1b7, 0xbfa7, 0xdef8, 0x0, 0x0);
        gbc.writeMem(0x423, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x803d, gbc.sp());
        EXPECT(0x425, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0312
        gbc.setState(0x74e8, 0xc8e4, 0x5570, 0xb2d7, 0x6c0d, 0x5358, 0x0, 0x1);
        gbc.writeMem(0x74e8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xc8e4, gbc.sp());
        EXPECT(0x74ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0313
        gbc.setState(0x6ca8, 0x5fcd, 0xddb0, 0xa381, 0x75b1, 0xf597, 0x0, 0x0);
        gbc.writeMem(0x6ca8, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x5fcd, gbc.sp());
        EXPECT(0x6caa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0314
        gbc.setState(0x5ccf, 0xfc4e, 0xfe50, 0x160e, 0x4d74, 0x1a48, 0x0, 0x1);
        gbc.writeMem(0x5ccf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xfc4e, gbc.sp());
        EXPECT(0x5cd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0315
        gbc.setState(0x527f, 0x589f, 0x5e0, 0x491b, 0x1634, 0x3b08, 0x1, 0x1);
        gbc.writeMem(0x527f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x589f, gbc.sp());
        EXPECT(0x5281, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0316
        gbc.setState(0x284c, 0xb017, 0x1880, 0xabf9, 0x5f86, 0x1b67, 0x1, 0x1);
        gbc.writeMem(0x284c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xb017, gbc.sp());
        EXPECT(0x284e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0317
        gbc.setState(0xdf80, 0xac50, 0x5dc0, 0x1ca1, 0x4e03, 0x96b7, 0x1, 0x1);
        gbc.writeMem(0xdf80, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xac50, gbc.sp());
        EXPECT(0xdf82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf80));
        EXPECT(0x5b, gbc.readMem(0xdf81));
        // CB 5B 0318
        gbc.setState(0xec9a, 0x62e1, 0xce80, 0xde7e, 0x8e58, 0x1c72, 0x0, 0x1);
        gbc.writeMem(0xec9a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x62e1, gbc.sp());
        EXPECT(0xec9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec9a));
        EXPECT(0x5b, gbc.readMem(0xec9b));
        // CB 5B 0319
        gbc.setState(0x9cd4, 0x8584, 0x3c50, 0x44fa, 0xbfaa, 0x988f, 0x1, 0x0);
        gbc.writeMem(0x9cd4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x8584, gbc.sp());
        EXPECT(0x9cd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cd4));
        EXPECT(0x5b, gbc.readMem(0x9cd5));
        // CB 5B 031A
        gbc.setState(0xe5e6, 0xa6f3, 0x54c0, 0x5d6c, 0x5fe4, 0xe0ad, 0x1, 0x0);
        gbc.writeMem(0xe5e6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xa6f3, gbc.sp());
        EXPECT(0xe5e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5e6));
        EXPECT(0x5b, gbc.readMem(0xe5e7));
        // CB 5B 031B
        gbc.setState(0xaa0d, 0x76c5, 0x2340, 0xc896, 0x8ddb, 0x3596, 0x1, 0x1);
        gbc.writeMem(0xaa0d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x76c5, gbc.sp());
        EXPECT(0xaa0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa0d));
        EXPECT(0x5b, gbc.readMem(0xaa0e));
        // CB 5B 031D
        gbc.setState(0x4cb3, 0x1578, 0xc5c0, 0x28ca, 0x2322, 0xe31, 0x0, 0x1);
        gbc.writeMem(0x4cb3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x1578, gbc.sp());
        EXPECT(0x4cb5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 031E
        gbc.setState(0x5d10, 0xe028, 0xd970, 0x577f, 0xb291, 0x91d1, 0x0, 0x1);
        gbc.writeMem(0x5d10, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xe028, gbc.sp());
        EXPECT(0x5d12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 031F
        gbc.setState(0x5e46, 0xff69, 0x7b60, 0xdc75, 0xad32, 0x8c4e, 0x1, 0x1);
        gbc.writeMem(0x5e46, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xff69, gbc.sp());
        EXPECT(0x5e48, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0320
        gbc.setState(0x839f, 0xf455, 0x2220, 0x540a, 0xf3a7, 0xa190, 0x0, 0x0);
        gbc.writeMem(0x839f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xf455, gbc.sp());
        EXPECT(0x83a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x839f));
        EXPECT(0x5b, gbc.readMem(0x83a0));
        // CB 5B 0322
        gbc.setState(0x5713, 0x6abb, 0xc2b0, 0x5f20, 0x68d3, 0xd70a, 0x1, 0x1);
        gbc.writeMem(0x5713, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x6abb, gbc.sp());
        EXPECT(0x5715, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0323
        gbc.setState(0x5e5c, 0x76d4, 0xd650, 0xa6b7, 0x1c55, 0xd6c5, 0x0, 0x1);
        gbc.writeMem(0x5e5c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x76d4, gbc.sp());
        EXPECT(0x5e5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0324
        gbc.setState(0xe2b3, 0x2f42, 0xb8c0, 0x2cb5, 0xc3e7, 0x21c0, 0x0, 0x0);
        gbc.writeMem(0xe2b3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x2f42, gbc.sp());
        EXPECT(0xe2b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2b3));
        EXPECT(0x5b, gbc.readMem(0xe2b4));
        // CB 5B 0325
        gbc.setState(0x4835, 0x58a5, 0xa6e0, 0xb4ba, 0x5669, 0xbf1a, 0x1, 0x1);
        gbc.writeMem(0x4835, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x58a5, gbc.sp());
        EXPECT(0x4837, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0326
        gbc.setState(0xd4f2, 0xf8c5, 0xc0a0, 0x64fd, 0xfdc1, 0xd412, 0x1, 0x1);
        gbc.writeMem(0xd4f2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xf8c5, gbc.sp());
        EXPECT(0xd4f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4f2));
        EXPECT(0x5b, gbc.readMem(0xd4f3));
        // CB 5B 0327
        gbc.setState(0x324a, 0xad97, 0x8d70, 0x3759, 0xf2a8, 0x79d, 0x1, 0x0);
        gbc.writeMem(0x324a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xad97, gbc.sp());
        EXPECT(0x324c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0328
        gbc.setState(0x598b, 0xceb3, 0x7a20, 0xc9bf, 0x7cbc, 0x694, 0x0, 0x1);
        gbc.writeMem(0x598b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xceb3, gbc.sp());
        EXPECT(0x598d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0329
        gbc.setState(0xd6c1, 0x4ee, 0x2b80, 0x6db9, 0x6e0b, 0xd461, 0x1, 0x0);
        gbc.writeMem(0xd6c1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x4ee, gbc.sp());
        EXPECT(0xd6c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6c1));
        EXPECT(0x5b, gbc.readMem(0xd6c2));
        // CB 5B 032A
        gbc.setState(0x5d75, 0x3d87, 0xca30, 0x9439, 0x53a1, 0x3e79, 0x1, 0x0);
        gbc.writeMem(0x5d75, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x3d87, gbc.sp());
        EXPECT(0x5d77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 032B
        gbc.setState(0x4315, 0x3139, 0xa090, 0x85bb, 0xf30, 0x6329, 0x1, 0x0);
        gbc.writeMem(0x4315, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x3139, gbc.sp());
        EXPECT(0x4317, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 032D
        gbc.setState(0x8243, 0xf39e, 0x3bf0, 0xb1b1, 0xee45, 0xe36b, 0x1, 0x1);
        gbc.writeMem(0x8243, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xf39e, gbc.sp());
        EXPECT(0x8245, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8243));
        EXPECT(0x5b, gbc.readMem(0x8244));
        // CB 5B 032E
        gbc.setState(0x646d, 0xbfae, 0xeaf0, 0xcbac, 0x1565, 0x217b, 0x0, 0x0);
        gbc.writeMem(0x646d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xbfae, gbc.sp());
        EXPECT(0x646f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 032F
        gbc.setState(0x1a5f, 0x81c0, 0x55e0, 0xb4e3, 0x5977, 0x1d1a, 0x0, 0x0);
        gbc.writeMem(0x1a5f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x81c0, gbc.sp());
        EXPECT(0x1a61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0331
        gbc.setState(0x1281, 0xec94, 0x5850, 0xbc40, 0x8745, 0xd4a0, 0x0, 0x0);
        gbc.writeMem(0x1281, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xec94, gbc.sp());
        EXPECT(0x1283, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0332
        gbc.setState(0x5a9e, 0xdad2, 0x42a0, 0x6cc, 0x1a57, 0xce74, 0x1, 0x0);
        gbc.writeMem(0x5a9e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xdad2, gbc.sp());
        EXPECT(0x5aa0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0333
        gbc.setState(0xe19f, 0x5257, 0xf470, 0x3bc, 0xbe7a, 0xacbb, 0x0, 0x0);
        gbc.writeMem(0xe19f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x5257, gbc.sp());
        EXPECT(0xe1a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe19f));
        EXPECT(0x5b, gbc.readMem(0xe1a0));
        // CB 5B 0334
        gbc.setState(0x5bae, 0xa6a6, 0x9780, 0x3d26, 0x2d13, 0xa16d, 0x1, 0x0);
        gbc.writeMem(0x5bae, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xa6a6, gbc.sp());
        EXPECT(0x5bb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0335
        gbc.setState(0x6cf1, 0x8234, 0x3870, 0x7a0c, 0x979b, 0x673, 0x1, 0x0);
        gbc.writeMem(0x6cf1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x8234, gbc.sp());
        EXPECT(0x6cf3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0336
        gbc.setState(0xc8e0, 0x8fe3, 0x1900, 0xb6a5, 0xe08b, 0xf8d9, 0x0, 0x0);
        gbc.writeMem(0xc8e0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x8fe3, gbc.sp());
        EXPECT(0xc8e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8e0));
        EXPECT(0x5b, gbc.readMem(0xc8e1));
        // CB 5B 0337
        gbc.setState(0x4904, 0x6d70, 0xb050, 0xb581, 0x7786, 0xc44e, 0x1, 0x1);
        gbc.writeMem(0x4904, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x6d70, gbc.sp());
        EXPECT(0x4906, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0338
        gbc.setState(0x8423, 0x2ee8, 0x86e0, 0x49b5, 0xe875, 0xe4b9, 0x1, 0x1);
        gbc.writeMem(0x8423, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x2ee8, gbc.sp());
        EXPECT(0x8425, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8423));
        EXPECT(0x5b, gbc.readMem(0x8424));
        // CB 5B 0339
        gbc.setState(0x38f, 0x83e9, 0x1530, 0x720a, 0x7ce6, 0x203a, 0x0, 0x1);
        gbc.writeMem(0x38f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x83e9, gbc.sp());
        EXPECT(0x391, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 033A
        gbc.setState(0xdfa5, 0xfc2, 0x5a20, 0x94a9, 0x583d, 0xee66, 0x1, 0x0);
        gbc.writeMem(0xdfa5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xfc2, gbc.sp());
        EXPECT(0xdfa7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfa5));
        EXPECT(0x5b, gbc.readMem(0xdfa6));
        // CB 5B 033B
        gbc.setState(0xbcbe, 0xd909, 0x6090, 0x4280, 0xe624, 0xee4d, 0x0, 0x1);
        gbc.writeMem(0xbcbe, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xd909, gbc.sp());
        EXPECT(0xbcc0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcbe));
        EXPECT(0x5b, gbc.readMem(0xbcbf));
        // CB 5B 033C
        gbc.setState(0x721e, 0xcc77, 0x8ff0, 0x9c7f, 0xd640, 0x3835, 0x0, 0x1);
        gbc.writeMem(0x721e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xcc77, gbc.sp());
        EXPECT(0x7220, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 033E
        gbc.setState(0x1a56, 0x4668, 0x50c0, 0x746c, 0xdaf7, 0x3ead, 0x0, 0x1);
        gbc.writeMem(0x1a56, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x4668, gbc.sp());
        EXPECT(0x1a58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 033F
        gbc.setState(0xcf21, 0x2afd, 0xc270, 0xf1bc, 0x9200, 0x167a, 0x1, 0x1);
        gbc.writeMem(0xcf21, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x2afd, gbc.sp());
        EXPECT(0xcf23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf21));
        EXPECT(0x5b, gbc.readMem(0xcf22));
        // CB 5B 0340
        gbc.setState(0xa50d, 0x8e0a, 0x4690, 0xa04f, 0x8647, 0xed86, 0x1, 0x1);
        gbc.writeMem(0xa50d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x8e0a, gbc.sp());
        EXPECT(0xa50f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa50d));
        EXPECT(0x5b, gbc.readMem(0xa50e));
        // CB 5B 0341
        gbc.setState(0x7173, 0xd39a, 0x88a0, 0x97db, 0xf930, 0x3640, 0x1, 0x0);
        gbc.writeMem(0x7173, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xd39a, gbc.sp());
        EXPECT(0x7175, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0342
        gbc.setState(0x61e2, 0x8e38, 0x3170, 0x2ed0, 0x34fa, 0xde36, 0x1, 0x1);
        gbc.writeMem(0x61e2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x8e38, gbc.sp());
        EXPECT(0x61e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0343
        gbc.setState(0x629, 0x5345, 0x10c0, 0x8c1, 0xacd5, 0xcbae, 0x1, 0x0);
        gbc.writeMem(0x629, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x5345, gbc.sp());
        EXPECT(0x62b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0344
        gbc.setState(0x2169, 0x26c, 0x3d70, 0xc2ad, 0xbd58, 0x235f, 0x1, 0x0);
        gbc.writeMem(0x2169, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x26c, gbc.sp());
        EXPECT(0x216b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0346
        gbc.setState(0x2353, 0x620e, 0x2800, 0x6f5, 0x14b4, 0xd8d1, 0x0, 0x0);
        gbc.writeMem(0x2353, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x620e, gbc.sp());
        EXPECT(0x2355, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0347
        gbc.setState(0x4b96, 0x7fa3, 0xfa50, 0x6403, 0x4d60, 0xd5e8, 0x1, 0x1);
        gbc.writeMem(0x4b96, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x7fa3, gbc.sp());
        EXPECT(0x4b98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0348
        gbc.setState(0xd285, 0xaa23, 0x24f0, 0x34e4, 0x92f, 0x923a, 0x1, 0x0);
        gbc.writeMem(0xd285, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xaa23, gbc.sp());
        EXPECT(0xd287, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd285));
        EXPECT(0x5b, gbc.readMem(0xd286));
        // CB 5B 0349
        gbc.setState(0x780d, 0x3504, 0x59a0, 0xd924, 0xd349, 0x333e, 0x1, 0x1);
        gbc.writeMem(0x780d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x3504, gbc.sp());
        EXPECT(0x780f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 034A
        gbc.setState(0xcc2d, 0x2375, 0xa240, 0xce3d, 0xad52, 0xf8b8, 0x0, 0x0);
        gbc.writeMem(0xcc2d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x2375, gbc.sp());
        EXPECT(0xcc2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc2d));
        EXPECT(0x5b, gbc.readMem(0xcc2e));
        // CB 5B 034B
        gbc.setState(0xbaeb, 0xb41c, 0x5e10, 0x358d, 0x1e88, 0xf7a6, 0x1, 0x0);
        gbc.writeMem(0xbaeb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xb41c, gbc.sp());
        EXPECT(0xbaed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaeb));
        EXPECT(0x5b, gbc.readMem(0xbaec));
        // CB 5B 034C
        gbc.setState(0x873b, 0xf558, 0xa610, 0x59c9, 0xac35, 0x9003, 0x1, 0x0);
        gbc.writeMem(0x873b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xf558, gbc.sp());
        EXPECT(0x873d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x873b));
        EXPECT(0x5b, gbc.readMem(0x873c));
        // CB 5B 034D
        gbc.setState(0x3b06, 0x7290, 0x2e50, 0x2d8b, 0x41e5, 0x24f7, 0x1, 0x1);
        gbc.writeMem(0x3b06, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x7290, gbc.sp());
        EXPECT(0x3b08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 034F
        gbc.setState(0x121c, 0x5afa, 0xad80, 0xccd6, 0x5b45, 0xf42f, 0x0, 0x1);
        gbc.writeMem(0x121c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x5afa, gbc.sp());
        EXPECT(0x121e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0350
        gbc.setState(0xc908, 0xfa67, 0xcab0, 0x76c7, 0xcc56, 0x9d96, 0x0, 0x0);
        gbc.writeMem(0xc908, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xfa67, gbc.sp());
        EXPECT(0xc90a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc908));
        EXPECT(0x5b, gbc.readMem(0xc909));
        // CB 5B 0351
        gbc.setState(0xe0fa, 0xad8b, 0x6e60, 0xc114, 0x3b78, 0x2b6d, 0x1, 0x1);
        gbc.writeMem(0xe0fa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xad8b, gbc.sp());
        EXPECT(0xe0fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0fa));
        EXPECT(0x5b, gbc.readMem(0xe0fb));
        // CB 5B 0352
        gbc.setState(0x7183, 0xb0e0, 0xa520, 0x4419, 0x6d78, 0xc96d, 0x1, 0x0);
        gbc.writeMem(0x7183, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xb0e0, gbc.sp());
        EXPECT(0x7185, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0353
        gbc.setState(0x360f, 0xe07, 0xd580, 0xad81, 0x1529, 0x1345, 0x0, 0x0);
        gbc.writeMem(0x360f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xe07, gbc.sp());
        EXPECT(0x3611, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0354
        gbc.setState(0x74cb, 0xc5de, 0xa9d0, 0x79a2, 0x9c66, 0x3145, 0x1, 0x0);
        gbc.writeMem(0x74cb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xc5de, gbc.sp());
        EXPECT(0x74cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0355
        gbc.setState(0xb9aa, 0xb331, 0xe940, 0xcb00, 0xac5, 0xb755, 0x1, 0x1);
        gbc.writeMem(0xb9aa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xb331, gbc.sp());
        EXPECT(0xb9ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9aa));
        EXPECT(0x5b, gbc.readMem(0xb9ab));
        // CB 5B 0356
        gbc.setState(0x6993, 0x8b0c, 0x4c80, 0x9eee, 0x7fc8, 0xab74, 0x1, 0x0);
        gbc.writeMem(0x6993, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x8b0c, gbc.sp());
        EXPECT(0x6995, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0357
        gbc.setState(0x2918, 0xe119, 0xfd40, 0x685a, 0x92be, 0xe352, 0x1, 0x1);
        gbc.writeMem(0x2918, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xe119, gbc.sp());
        EXPECT(0x291a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0358
        gbc.setState(0x4f9b, 0x51d9, 0x2aa0, 0x78da, 0x56a, 0x67e0, 0x0, 0x1);
        gbc.writeMem(0x4f9b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x51d9, gbc.sp());
        EXPECT(0x4f9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0359
        gbc.setState(0xb0b7, 0xd05d, 0xeff0, 0xa42c, 0x11e, 0x4e79, 0x0, 0x0);
        gbc.writeMem(0xb0b7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xd05d, gbc.sp());
        EXPECT(0xb0b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0b7));
        EXPECT(0x5b, gbc.readMem(0xb0b8));
        // CB 5B 035A
        gbc.setState(0x1735, 0x4b2b, 0xc4f0, 0xa12e, 0x4aec, 0x4872, 0x1, 0x0);
        gbc.writeMem(0x1735, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x4b2b, gbc.sp());
        EXPECT(0x1737, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 035B
        gbc.setState(0x3c72, 0x9e15, 0x4270, 0x9696, 0x2c7f, 0x9986, 0x0, 0x1);
        gbc.writeMem(0x3c72, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x9e15, gbc.sp());
        EXPECT(0x3c74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 035C
        gbc.setState(0xe0ad, 0x3c00, 0x1b80, 0xc87c, 0xde24, 0x8809, 0x0, 0x1);
        gbc.writeMem(0xe0ad, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x3c00, gbc.sp());
        EXPECT(0xe0af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0ad));
        EXPECT(0x5b, gbc.readMem(0xe0ae));
        // CB 5B 035D
        gbc.setState(0xa07f, 0xb121, 0xd870, 0x1d75, 0x8845, 0x4ea9, 0x1, 0x1);
        gbc.writeMem(0xa07f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xb121, gbc.sp());
        EXPECT(0xa081, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa07f));
        EXPECT(0x5b, gbc.readMem(0xa080));
        // CB 5B 035E
        gbc.setState(0x7e86, 0xc78f, 0x4680, 0x9a10, 0xa8b7, 0xd9ae, 0x1, 0x1);
        gbc.writeMem(0x7e86, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xc78f, gbc.sp());
        EXPECT(0x7e88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 035F
        gbc.setState(0xd1c5, 0xc1b4, 0x9430, 0x3e69, 0x474d, 0x380e, 0x0, 0x0);
        gbc.writeMem(0xd1c5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xc1b4, gbc.sp());
        EXPECT(0xd1c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1c5));
        EXPECT(0x5b, gbc.readMem(0xd1c6));
        // CB 5B 0360
        gbc.setState(0x736e, 0xff22, 0xd1c0, 0xbba3, 0x8dc1, 0xbc10, 0x1, 0x0);
        gbc.writeMem(0x736e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xff22, gbc.sp());
        EXPECT(0x7370, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0361
        gbc.setState(0x8a62, 0x6ee1, 0xf000, 0x8d5d, 0x8b4d, 0x2f89, 0x1, 0x1);
        gbc.writeMem(0x8a62, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x6ee1, gbc.sp());
        EXPECT(0x8a64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a62));
        EXPECT(0x5b, gbc.readMem(0x8a63));
        // CB 5B 0362
        gbc.setState(0xd2d5, 0x2faf, 0xda0, 0x8422, 0xef1e, 0x6d5c, 0x1, 0x0);
        gbc.writeMem(0xd2d5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x2faf, gbc.sp());
        EXPECT(0xd2d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2d5));
        EXPECT(0x5b, gbc.readMem(0xd2d6));
        // CB 5B 0363
        gbc.setState(0x7e70, 0x9488, 0x5a20, 0x18b, 0xda15, 0x48da, 0x0, 0x0);
        gbc.writeMem(0x7e70, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x9488, gbc.sp());
        EXPECT(0x7e72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0364
        gbc.setState(0x7171, 0xecd6, 0xf220, 0xc910, 0x2318, 0xc229, 0x0, 0x0);
        gbc.writeMem(0x7171, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xecd6, gbc.sp());
        EXPECT(0x7173, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0365
        gbc.setState(0xae6b, 0xdbbd, 0xcfe0, 0x9163, 0xe9bc, 0x908d, 0x0, 0x0);
        gbc.writeMem(0xae6b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xdbbd, gbc.sp());
        EXPECT(0xae6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae6b));
        EXPECT(0x5b, gbc.readMem(0xae6c));
        // CB 5B 0366
        gbc.setState(0x1120, 0x85e2, 0x5c60, 0x4323, 0x9da8, 0xa19e, 0x0, 0x0);
        gbc.writeMem(0x1120, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x85e2, gbc.sp());
        EXPECT(0x1122, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0367
        gbc.setState(0x19c9, 0xb8cc, 0xfef0, 0xd40, 0x471a, 0x5025, 0x1, 0x1);
        gbc.writeMem(0x19c9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xb8cc, gbc.sp());
        EXPECT(0x19cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0368
        gbc.setState(0x27c1, 0xaa22, 0x3c40, 0xfa21, 0x36a0, 0xe8c6, 0x1, 0x1);
        gbc.writeMem(0x27c1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xaa22, gbc.sp());
        EXPECT(0x27c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0369
        gbc.setState(0x8d66, 0x76f7, 0xc900, 0xab13, 0xe675, 0x9fca, 0x1, 0x0);
        gbc.writeMem(0x8d66, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x76f7, gbc.sp());
        EXPECT(0x8d68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d66));
        EXPECT(0x5b, gbc.readMem(0x8d67));
        // CB 5B 036A
        gbc.setState(0x4d39, 0x1460, 0xa70, 0x2ab2, 0x4a02, 0xf40c, 0x0, 0x0);
        gbc.writeMem(0x4d39, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x1460, gbc.sp());
        EXPECT(0x4d3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 036B
        gbc.setState(0x88bc, 0x6386, 0xe5c0, 0x1117, 0x8c00, 0x826a, 0x0, 0x0);
        gbc.writeMem(0x88bc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x6386, gbc.sp());
        EXPECT(0x88be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88bc));
        EXPECT(0x5b, gbc.readMem(0x88bd));
        // CB 5B 036C
        gbc.setState(0x7961, 0xa0be, 0x2810, 0xaec0, 0x3127, 0x558d, 0x0, 0x0);
        gbc.writeMem(0x7961, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xa0be, gbc.sp());
        EXPECT(0x7963, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 036D
        gbc.setState(0x59fe, 0x79dd, 0xd30, 0xe2ad, 0xf5c4, 0x40da, 0x1, 0x1);
        gbc.writeMem(0x59fe, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x79dd, gbc.sp());
        EXPECT(0x5a00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 036F
        gbc.setState(0x3fc7, 0xb3a6, 0xaf00, 0x6a4f, 0xaf1, 0x8d80, 0x0, 0x0);
        gbc.writeMem(0x3fc7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xb3a6, gbc.sp());
        EXPECT(0x3fc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0370
        gbc.setState(0xbeac, 0x4dd5, 0x1be0, 0x83b1, 0xe77b, 0x1800, 0x1, 0x0);
        gbc.writeMem(0xbeac, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x4dd5, gbc.sp());
        EXPECT(0xbeae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbeac));
        EXPECT(0x5b, gbc.readMem(0xbead));
        // CB 5B 0371
        gbc.setState(0x95a3, 0x3089, 0x1ee0, 0x9334, 0x3d98, 0x498e, 0x1, 0x1);
        gbc.writeMem(0x95a3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x3089, gbc.sp());
        EXPECT(0x95a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95a3));
        EXPECT(0x5b, gbc.readMem(0x95a4));
        // CB 5B 0372
        gbc.setState(0x9898, 0x5ae9, 0x8a0, 0x2b03, 0x6269, 0x8d77, 0x1, 0x0);
        gbc.writeMem(0x9898, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x5ae9, gbc.sp());
        EXPECT(0x989a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9898));
        EXPECT(0x5b, gbc.readMem(0x9899));
        // CB 5B 0373
        gbc.setState(0xe1fd, 0xa9a0, 0xc040, 0x1f3b, 0xb5b9, 0xce04, 0x0, 0x0);
        gbc.writeMem(0xe1fd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xa9a0, gbc.sp());
        EXPECT(0xe1ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1fd));
        EXPECT(0x5b, gbc.readMem(0xe1fe));
        // CB 5B 0374
        gbc.setState(0x6705, 0xabd7, 0xea10, 0x68c6, 0x2ce0, 0x274c, 0x0, 0x1);
        gbc.writeMem(0x6705, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xabd7, gbc.sp());
        EXPECT(0x6707, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0375
        gbc.setState(0x863e, 0x867f, 0x72c0, 0xf4fa, 0x508d, 0x842f, 0x1, 0x0);
        gbc.writeMem(0x863e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x867f, gbc.sp());
        EXPECT(0x8640, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x863e));
        EXPECT(0x5b, gbc.readMem(0x863f));
        // CB 5B 0376
        gbc.setState(0x7a3, 0x6a71, 0x29e0, 0xbd91, 0x496c, 0x396f, 0x1, 0x0);
        gbc.writeMem(0x7a3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x6a71, gbc.sp());
        EXPECT(0x7a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0377
        gbc.setState(0x5a36, 0x1f6a, 0xc7b0, 0x5f1f, 0x5c70, 0xd24e, 0x1, 0x0);
        gbc.writeMem(0x5a36, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x1f6a, gbc.sp());
        EXPECT(0x5a38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0378
        gbc.setState(0xb479, 0xa82f, 0x49d0, 0x5357, 0x541d, 0xbf08, 0x0, 0x0);
        gbc.writeMem(0xb479, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xa82f, gbc.sp());
        EXPECT(0xb47b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb479));
        EXPECT(0x5b, gbc.readMem(0xb47a));
        // CB 5B 0379
        gbc.setState(0x5d0, 0x4ddb, 0x3380, 0xb84e, 0xd0b9, 0x28e, 0x0, 0x1);
        gbc.writeMem(0x5d0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x4ddb, gbc.sp());
        EXPECT(0x5d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 037A
        gbc.setState(0xabee, 0x754, 0xd3a0, 0x4dfd, 0x5853, 0xdd6, 0x0, 0x1);
        gbc.writeMem(0xabee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x754, gbc.sp());
        EXPECT(0xabf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabee));
        EXPECT(0x5b, gbc.readMem(0xabef));
        // CB 5B 037B
        gbc.setState(0x5be0, 0xbc23, 0xf310, 0x9287, 0x7a3d, 0x4f66, 0x1, 0x0);
        gbc.writeMem(0x5be0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xbc23, gbc.sp());
        EXPECT(0x5be2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 037C
        gbc.setState(0x6919, 0xd676, 0xea80, 0xdd5c, 0x3339, 0x1633, 0x1, 0x0);
        gbc.writeMem(0x6919, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xd676, gbc.sp());
        EXPECT(0x691b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 037D
        gbc.setState(0xb6e4, 0x4a5, 0xced0, 0xb896, 0xeb75, 0xeac9, 0x0, 0x0);
        gbc.writeMem(0xb6e4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x4a5, gbc.sp());
        EXPECT(0xb6e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6e4));
        EXPECT(0x5b, gbc.readMem(0xb6e5));
        // CB 5B 037E
        gbc.setState(0xe716, 0x5d22, 0xb730, 0x549b, 0x80d3, 0x5319, 0x1, 0x0);
        gbc.writeMem(0xe716, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x5d22, gbc.sp());
        EXPECT(0xe718, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe716));
        EXPECT(0x5b, gbc.readMem(0xe717));
        // CB 5B 037F
        gbc.setState(0xbd23, 0xb995, 0x22b0, 0x2bdd, 0x5bc4, 0x1faa, 0x1, 0x0);
        gbc.writeMem(0xbd23, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xb995, gbc.sp());
        EXPECT(0xbd25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd23));
        EXPECT(0x5b, gbc.readMem(0xbd24));
        // CB 5B 0380
        gbc.setState(0x7153, 0xb1ae, 0x4840, 0xe459, 0x9dcd, 0x4a05, 0x0, 0x1);
        gbc.writeMem(0x7153, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xb1ae, gbc.sp());
        EXPECT(0x7155, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0381
        gbc.setState(0x3640, 0x4e8e, 0xbd30, 0xa1f4, 0x35b6, 0x9cbb, 0x1, 0x1);
        gbc.writeMem(0x3640, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x4e8e, gbc.sp());
        EXPECT(0x3642, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0382
        gbc.setState(0x764d, 0x3985, 0x21e0, 0x3da8, 0x55b9, 0x76af, 0x1, 0x1);
        gbc.writeMem(0x764d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x3985, gbc.sp());
        EXPECT(0x764f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0383
        gbc.setState(0x183a, 0x1c6d, 0x86b0, 0xb31, 0xf4e2, 0x6dee, 0x1, 0x0);
        gbc.writeMem(0x183a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x1c6d, gbc.sp());
        EXPECT(0x183c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 0384
        gbc.setState(0x95a0, 0xa744, 0xca90, 0xc3ef, 0xe5f7, 0x16f2, 0x0, 0x0);
        gbc.writeMem(0x95a0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xa744, gbc.sp());
        EXPECT(0x95a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95a0));
        EXPECT(0x5b, gbc.readMem(0x95a1));
        // CB 5B 0385
        gbc.setState(0xa1cc, 0xdb6a, 0x88f0, 0x7206, 0x9171, 0x78c5, 0x1, 0x0);
        gbc.writeMem(0xa1cc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xdb6a, gbc.sp());
        EXPECT(0xa1ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1cc));
        EXPECT(0x5b, gbc.readMem(0xa1cd));
        // CB 5B 0386
        gbc.setState(0xbb65, 0xbabb, 0x4800, 0xa3e5, 0x6ffa, 0x39fb, 0x0, 0x0);
        gbc.writeMem(0xbb65, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xbabb, gbc.sp());
        EXPECT(0xbb67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb65));
        EXPECT(0x5b, gbc.readMem(0xbb66));
        // CB 5B 0387
        gbc.setState(0xb8c3, 0x7ba4, 0x4840, 0x4499, 0xf226, 0x3b12, 0x0, 0x1);
        gbc.writeMem(0xb8c3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x7ba4, gbc.sp());
        EXPECT(0xb8c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8c3));
        EXPECT(0x5b, gbc.readMem(0xb8c4));
        // CB 5B 0388
        gbc.setState(0xe3fa, 0xab8, 0x2550, 0xa7a, 0xa576, 0x811a, 0x0, 0x1);
        gbc.writeMem(0xe3fa, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xab8, gbc.sp());
        EXPECT(0xe3fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3fa));
        EXPECT(0x5b, gbc.readMem(0xe3fb));
        // CB 5B 0389
        gbc.setState(0xd93d, 0xad2d, 0x87f0, 0xcde3, 0x5662, 0x9a49, 0x1, 0x1);
        gbc.writeMem(0xd93d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xad2d, gbc.sp());
        EXPECT(0xd93f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd93d));
        EXPECT(0x5b, gbc.readMem(0xd93e));
        // CB 5B 038A
        gbc.setState(0xd0f9, 0x7dee, 0x79f0, 0x1442, 0x199a, 0x6766, 0x0, 0x1);
        gbc.writeMem(0xd0f9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x7dee, gbc.sp());
        EXPECT(0xd0fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0f9));
        EXPECT(0x5b, gbc.readMem(0xd0fa));
        // CB 5B 038B
        gbc.setState(0xa471, 0x1b50, 0xc270, 0xc2e1, 0x60a1, 0x7b3c, 0x1, 0x0);
        gbc.writeMem(0xa471, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x1b50, gbc.sp());
        EXPECT(0xa473, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa471));
        EXPECT(0x5b, gbc.readMem(0xa472));
        // CB 5B 038C
        gbc.setState(0xd0fd, 0xb02f, 0x7cb0, 0xf98f, 0x1c3c, 0x693e, 0x0, 0x0);
        gbc.writeMem(0xd0fd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xb02f, gbc.sp());
        EXPECT(0xd0ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0fd));
        EXPECT(0x5b, gbc.readMem(0xd0fe));
        // CB 5B 038D
        gbc.setState(0x7d9, 0xf42f, 0x2cb0, 0x806b, 0xfc08, 0x563a, 0x1, 0x1);
        gbc.writeMem(0x7d9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xf42f, gbc.sp());
        EXPECT(0x7db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 038E
        gbc.setState(0x196a, 0x9981, 0x20a0, 0x326, 0x2601, 0x54b9, 0x0, 0x1);
        gbc.writeMem(0x196a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x9981, gbc.sp());
        EXPECT(0x196c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 038F
        gbc.setState(0x8089, 0x6eee, 0xcb20, 0xea3f, 0xec51, 0x465a, 0x1, 0x0);
        gbc.writeMem(0x8089, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x6eee, gbc.sp());
        EXPECT(0x808b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8089));
        EXPECT(0x5b, gbc.readMem(0x808a));
        // CB 5B 0390
        gbc.setState(0x4fe5, 0x2d86, 0x89e0, 0xc8c8, 0x8eb5, 0xd568, 0x0, 0x0);
        gbc.writeMem(0x4fe5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x2d86, gbc.sp());
        EXPECT(0x4fe7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0391
        gbc.setState(0xa795, 0x7ee5, 0x850, 0x5d10, 0xc243, 0x60d7, 0x0, 0x1);
        gbc.writeMem(0xa795, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x7ee5, gbc.sp());
        EXPECT(0xa797, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa795));
        EXPECT(0x5b, gbc.readMem(0xa796));
        // CB 5B 0392
        gbc.setState(0xc905, 0xb98, 0x3e10, 0x96eb, 0x6135, 0xc1d0, 0x0, 0x0);
        gbc.writeMem(0xc905, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xb98, gbc.sp());
        EXPECT(0xc907, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc905));
        EXPECT(0x5b, gbc.readMem(0xc906));
        // CB 5B 0393
        gbc.setState(0x754e, 0x938a, 0xcbc0, 0x4f1d, 0x77ac, 0x8dad, 0x0, 0x1);
        gbc.writeMem(0x754e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x938a, gbc.sp());
        EXPECT(0x7550, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0394
        gbc.setState(0xa1ce, 0xe274, 0xe900, 0xb796, 0x9992, 0xe75a, 0x0, 0x0);
        gbc.writeMem(0xa1ce, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xe274, gbc.sp());
        EXPECT(0xa1d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1ce));
        EXPECT(0x5b, gbc.readMem(0xa1cf));
        // CB 5B 0395
        gbc.setState(0xbf63, 0xc209, 0xc6a0, 0x6403, 0xdefe, 0xa408, 0x0, 0x1);
        gbc.writeMem(0xbf63, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc209, gbc.sp());
        EXPECT(0xbf65, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf63));
        EXPECT(0x5b, gbc.readMem(0xbf64));
        // CB 5B 0396
        gbc.setState(0x6621, 0x8f8, 0x83a0, 0xadcf, 0x3738, 0x9788, 0x0, 0x1);
        gbc.writeMem(0x6621, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x8f8, gbc.sp());
        EXPECT(0x6623, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0397
        gbc.setState(0x7a4f, 0x5740, 0xad20, 0xf4b2, 0xcb55, 0xcd4c, 0x1, 0x0);
        gbc.writeMem(0x7a4f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x5740, gbc.sp());
        EXPECT(0x7a51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 0398
        gbc.setState(0xba06, 0x623b, 0x7e30, 0x2de5, 0xa021, 0x877a, 0x1, 0x0);
        gbc.writeMem(0xba06, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x623b, gbc.sp());
        EXPECT(0xba08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba06));
        EXPECT(0x5b, gbc.readMem(0xba07));
        // CB 5B 0399
        gbc.setState(0xbb9, 0x8448, 0x3330, 0xeffc, 0x89dc, 0x39f2, 0x1, 0x1);
        gbc.writeMem(0xbb9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x8448, gbc.sp());
        EXPECT(0xbbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 039B
        gbc.setState(0x3862, 0x2d5a, 0xd3d0, 0x38e1, 0x8754, 0xac90, 0x1, 0x0);
        gbc.writeMem(0x3862, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2d5a, gbc.sp());
        EXPECT(0x3864, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 039C
        gbc.setState(0xe68f, 0x3d75, 0x220, 0x7518, 0xa84f, 0xf3ec, 0x0, 0x1);
        gbc.writeMem(0xe68f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x3d75, gbc.sp());
        EXPECT(0xe691, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe68f));
        EXPECT(0x5b, gbc.readMem(0xe690));
        // CB 5B 039F
        gbc.setState(0x2bd7, 0xc622, 0xb4e0, 0x8c08, 0x455, 0x7e52, 0x1, 0x0);
        gbc.writeMem(0x2bd7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xc622, gbc.sp());
        EXPECT(0x2bd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03A0
        gbc.setState(0x716c, 0xff3f, 0xbb20, 0xe9c6, 0x530e, 0x7dcf, 0x0, 0x0);
        gbc.writeMem(0x716c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xff3f, gbc.sp());
        EXPECT(0x716e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03A1
        gbc.setState(0x7c8f, 0x14, 0x3700, 0xe2b7, 0x2, 0xbbca, 0x0, 0x1);
        gbc.writeMem(0x7c8f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x14, gbc.sp());
        EXPECT(0x7c91, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03A2
        gbc.setState(0x6120, 0x116a, 0x1ff0, 0x3703, 0xec15, 0x2f94, 0x1, 0x0);
        gbc.writeMem(0x6120, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x116a, gbc.sp());
        EXPECT(0x6122, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03A3
        gbc.setState(0x59e, 0xc195, 0x82f0, 0xee3, 0xc755, 0x2e0a, 0x0, 0x0);
        gbc.writeMem(0x59e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xc195, gbc.sp());
        EXPECT(0x5a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03A4
        gbc.setState(0x498f, 0x731a, 0x5a60, 0x3245, 0x135d, 0x29ce, 0x1, 0x1);
        gbc.writeMem(0x498f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x731a, gbc.sp());
        EXPECT(0x4991, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03A5
        gbc.setState(0x588f, 0xb48a, 0x8170, 0x60ed, 0x13c1, 0x981, 0x0, 0x0);
        gbc.writeMem(0x588f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xb48a, gbc.sp());
        EXPECT(0x5891, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03A6
        gbc.setState(0xa819, 0x3d48, 0xce90, 0xc81f, 0x4359, 0xc798, 0x0, 0x1);
        gbc.writeMem(0xa819, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x3d48, gbc.sp());
        EXPECT(0xa81b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa819));
        EXPECT(0x5b, gbc.readMem(0xa81a));
        // CB 5B 03A7
        gbc.setState(0x2757, 0x3bb9, 0x77b0, 0x3b0f, 0x2c46, 0xc88f, 0x0, 0x0);
        gbc.writeMem(0x2757, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x3bb9, gbc.sp());
        EXPECT(0x2759, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03A8
        gbc.setState(0x808d, 0x8e9f, 0x94a0, 0xbac8, 0x8db3, 0xbd5, 0x1, 0x0);
        gbc.writeMem(0x808d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x8e9f, gbc.sp());
        EXPECT(0x808f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x808d));
        EXPECT(0x5b, gbc.readMem(0x808e));
        // CB 5B 03A9
        gbc.setState(0xe4c5, 0x636b, 0xd210, 0x73f7, 0x5f08, 0x727a, 0x0, 0x1);
        gbc.writeMem(0xe4c5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x636b, gbc.sp());
        EXPECT(0xe4c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4c5));
        EXPECT(0x5b, gbc.readMem(0xe4c6));
        // CB 5B 03AA
        gbc.setState(0x6833, 0xc78d, 0x6e30, 0x6e9c, 0xa696, 0x4471, 0x0, 0x1);
        gbc.writeMem(0x6833, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xc78d, gbc.sp());
        EXPECT(0x6835, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03AB
        gbc.setState(0x14e2, 0x5c8f, 0x2dc0, 0xbee6, 0x5d4a, 0x1122, 0x1, 0x1);
        gbc.writeMem(0x14e2, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x5c8f, gbc.sp());
        EXPECT(0x14e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03AC
        gbc.setState(0xb2bb, 0xeb99, 0xe260, 0xaadf, 0x4d22, 0x6ca8, 0x0, 0x1);
        gbc.writeMem(0xb2bb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xeb99, gbc.sp());
        EXPECT(0xb2bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2bb));
        EXPECT(0x5b, gbc.readMem(0xb2bc));
        // CB 5B 03AD
        gbc.setState(0xb5ba, 0xdcdb, 0x69b0, 0xf97a, 0xe585, 0x624e, 0x0, 0x0);
        gbc.writeMem(0xb5ba, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xdcdb, gbc.sp());
        EXPECT(0xb5bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5ba));
        EXPECT(0x5b, gbc.readMem(0xb5bb));
        // CB 5B 03AE
        gbc.setState(0x90cb, 0xa5b6, 0x42b0, 0xa277, 0xa661, 0x475, 0x0, 0x1);
        gbc.writeMem(0x90cb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xa5b6, gbc.sp());
        EXPECT(0x90cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90cb));
        EXPECT(0x5b, gbc.readMem(0x90cc));
        // CB 5B 03B0
        gbc.setState(0x519c, 0xd5c8, 0x4460, 0x92c7, 0x3ea6, 0x9774, 0x0, 0x1);
        gbc.writeMem(0x519c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xd5c8, gbc.sp());
        EXPECT(0x519e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03B1
        gbc.setState(0x7bca, 0xfd19, 0xdb70, 0xb1bc, 0x3d0d, 0x19a1, 0x0, 0x0);
        gbc.writeMem(0x7bca, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xfd19, gbc.sp());
        EXPECT(0x7bcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03B2
        gbc.setState(0x69ee, 0xaa34, 0xd980, 0x7b7b, 0x4f93, 0x29a5, 0x1, 0x1);
        gbc.writeMem(0x69ee, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xaa34, gbc.sp());
        EXPECT(0x69f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03B3
        gbc.setState(0x7bdc, 0xe6d0, 0xa280, 0x9767, 0x824d, 0x356a, 0x1, 0x0);
        gbc.writeMem(0x7bdc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xe6d0, gbc.sp());
        EXPECT(0x7bde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03B4
        gbc.setState(0xa271, 0xc605, 0xe450, 0x5a2a, 0xd0fe, 0xe877, 0x0, 0x0);
        gbc.writeMem(0xa271, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xc605, gbc.sp());
        EXPECT(0xa273, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa271));
        EXPECT(0x5b, gbc.readMem(0xa272));
        // CB 5B 03B5
        gbc.setState(0xa795, 0x3b82, 0x7370, 0x1d7b, 0x26e4, 0x2369, 0x0, 0x1);
        gbc.writeMem(0xa795, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x3b82, gbc.sp());
        EXPECT(0xa797, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa795));
        EXPECT(0x5b, gbc.readMem(0xa796));
        // CB 5B 03B6
        gbc.setState(0x9727, 0xa2e9, 0x8a90, 0x9b01, 0x72cc, 0xe10f, 0x0, 0x1);
        gbc.writeMem(0x9727, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xa2e9, gbc.sp());
        EXPECT(0x9729, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9727));
        EXPECT(0x5b, gbc.readMem(0x9728));
        // CB 5B 03B7
        gbc.setState(0xd7fc, 0x63fc, 0xb150, 0xfd01, 0xae11, 0xf293, 0x0, 0x1);
        gbc.writeMem(0xd7fc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x63fc, gbc.sp());
        EXPECT(0xd7fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7fc));
        EXPECT(0x5b, gbc.readMem(0xd7fd));
        // CB 5B 03B8
        gbc.setState(0x84c7, 0xe730, 0x97d0, 0xbc10, 0xf456, 0x9e8f, 0x0, 0x1);
        gbc.writeMem(0x84c7, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xe730, gbc.sp());
        EXPECT(0x84c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84c7));
        EXPECT(0x5b, gbc.readMem(0x84c8));
        // CB 5B 03B9
        gbc.setState(0x9d29, 0xdc8e, 0xb170, 0xb2fd, 0xfd7c, 0x53a2, 0x1, 0x0);
        gbc.writeMem(0x9d29, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xdc8e, gbc.sp());
        EXPECT(0x9d2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d29));
        EXPECT(0x5b, gbc.readMem(0x9d2a));
        // CB 5B 03BA
        gbc.setState(0xafcf, 0x7ccc, 0x5ca0, 0xda60, 0x87a8, 0x42ff, 0x0, 0x1);
        gbc.writeMem(0xafcf, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x7ccc, gbc.sp());
        EXPECT(0xafd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafcf));
        EXPECT(0x5b, gbc.readMem(0xafd0));
        // CB 5B 03BB
        gbc.setState(0xb25a, 0x219f, 0x45b0, 0x19d0, 0xcfc5, 0x1f3d, 0x1, 0x1);
        gbc.writeMem(0xb25a, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x219f, gbc.sp());
        EXPECT(0xb25c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb25a));
        EXPECT(0x5b, gbc.readMem(0xb25b));
        // CB 5B 03BC
        gbc.setState(0xed68, 0xbf7e, 0x28f0, 0x6881, 0x375, 0x2931, 0x1, 0x0);
        gbc.writeMem(0xed68, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xbf7e, gbc.sp());
        EXPECT(0xed6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed68));
        EXPECT(0x5b, gbc.readMem(0xed69));
        // CB 5B 03BD
        gbc.setState(0x2342, 0xea09, 0x8940, 0xa6fd, 0x83a, 0xf55c, 0x0, 0x1);
        gbc.writeMem(0x2342, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xea09, gbc.sp());
        EXPECT(0x2344, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03BE
        gbc.setState(0x896b, 0x6872, 0x4c40, 0xb1e4, 0xd948, 0x22f, 0x1, 0x0);
        gbc.writeMem(0x896b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x6872, gbc.sp());
        EXPECT(0x896d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x896b));
        EXPECT(0x5b, gbc.readMem(0x896c));
        // CB 5B 03BF
        gbc.setState(0xcf3, 0xf335, 0x5780, 0x4151, 0x14b9, 0x5b0f, 0x0, 0x0);
        gbc.writeMem(0xcf3, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xf335, gbc.sp());
        EXPECT(0xcf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03C0
        gbc.setState(0x6a88, 0x63cc, 0x3de0, 0xacf5, 0xecdc, 0xab10, 0x0, 0x0);
        gbc.writeMem(0x6a88, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x63cc, gbc.sp());
        EXPECT(0x6a8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03C1
        gbc.setState(0x3326, 0x7a4c, 0x8900, 0xcb1b, 0xed9, 0x9ce, 0x0, 0x1);
        gbc.writeMem(0x3326, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x7a4c, gbc.sp());
        EXPECT(0x3328, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03C2
        gbc.setState(0xa1b1, 0x96cf, 0x5590, 0x8b00, 0xfdc9, 0x2660, 0x0, 0x1);
        gbc.writeMem(0xa1b1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x96cf, gbc.sp());
        EXPECT(0xa1b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1b1));
        EXPECT(0x5b, gbc.readMem(0xa1b2));
        // CB 5B 03C3
        gbc.setState(0xebda, 0x2b29, 0xf410, 0x9d3e, 0xfdfd, 0xbaaf, 0x0, 0x1);
        gbc.writeMem(0xebda, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x2b29, gbc.sp());
        EXPECT(0xebdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebda));
        EXPECT(0x5b, gbc.readMem(0xebdb));
        // CB 5B 03C4
        gbc.setState(0xa2d9, 0x34a1, 0x2870, 0xd904, 0x7b14, 0x3d5d, 0x0, 0x0);
        gbc.writeMem(0xa2d9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x34a1, gbc.sp());
        EXPECT(0xa2db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2d9));
        EXPECT(0x5b, gbc.readMem(0xa2da));
        // CB 5B 03C5
        gbc.setState(0x67d4, 0x6d63, 0xf8a0, 0x19e1, 0xcfa6, 0x7a38, 0x0, 0x0);
        gbc.writeMem(0x67d4, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x6d63, gbc.sp());
        EXPECT(0x67d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03C6
        gbc.setState(0x4d5b, 0x5472, 0xebc0, 0xc50f, 0xed83, 0xe035, 0x0, 0x1);
        gbc.writeMem(0x4d5b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x5472, gbc.sp());
        EXPECT(0x4d5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03C7
        gbc.setState(0x6e7d, 0x696b, 0x4260, 0x5084, 0x1d1e, 0x4f5b, 0x0, 0x0);
        gbc.writeMem(0x6e7d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x696b, gbc.sp());
        EXPECT(0x6e7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03C8
        gbc.setState(0x1d34, 0xa73e, 0x8a0, 0x922d, 0x605f, 0xc2c7, 0x1, 0x0);
        gbc.writeMem(0x1d34, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xa73e, gbc.sp());
        EXPECT(0x1d36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03C9
        gbc.setState(0x9ad6, 0x1db3, 0x7bb0, 0x7ecf, 0xf732, 0x74f6, 0x1, 0x0);
        gbc.writeMem(0x9ad6, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x1db3, gbc.sp());
        EXPECT(0x9ad8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ad6));
        EXPECT(0x5b, gbc.readMem(0x9ad7));
        // CB 5B 03CA
        gbc.setState(0x52f0, 0x8dcb, 0x86f0, 0x13db, 0xdaf2, 0xf79f, 0x1, 0x0);
        gbc.writeMem(0x52f0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x8dcb, gbc.sp());
        EXPECT(0x52f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03CB
        gbc.setState(0x1b1e, 0x6ec4, 0x4e40, 0x1249, 0x9cf5, 0xd2e3, 0x1, 0x1);
        gbc.writeMem(0x1b1e, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x6ec4, gbc.sp());
        EXPECT(0x1b20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03CC
        gbc.setState(0x8fb9, 0xa432, 0xfe60, 0x467a, 0xe914, 0x455b, 0x0, 0x1);
        gbc.writeMem(0x8fb9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xa432, gbc.sp());
        EXPECT(0x8fbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fb9));
        EXPECT(0x5b, gbc.readMem(0x8fba));
        // CB 5B 03CD
        gbc.setState(0x1f02, 0x3b8d, 0xe980, 0x1fa9, 0x39e2, 0xaf1d, 0x0, 0x1);
        gbc.writeMem(0x1f02, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x3b8d, gbc.sp());
        EXPECT(0x1f04, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03CE
        gbc.setState(0xa994, 0xe681, 0x9900, 0x91b6, 0xa561, 0xbdda, 0x0, 0x0);
        gbc.writeMem(0xa994, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xe681, gbc.sp());
        EXPECT(0xa996, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa994));
        EXPECT(0x5b, gbc.readMem(0xa995));
        // CB 5B 03CF
        gbc.setState(0xb44d, 0x527c, 0xecf0, 0xf029, 0x8e77, 0x1374, 0x0, 0x1);
        gbc.writeMem(0xb44d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x527c, gbc.sp());
        EXPECT(0xb44f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb44d));
        EXPECT(0x5b, gbc.readMem(0xb44e));
        // CB 5B 03D0
        gbc.setState(0x7d8d, 0x5ba7, 0x7d70, 0xb484, 0x7657, 0xac33, 0x0, 0x0);
        gbc.writeMem(0x7d8d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x5ba7, gbc.sp());
        EXPECT(0x7d8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03D1
        gbc.setState(0xfde, 0x19b0, 0xb350, 0xff34, 0xcc59, 0x21d6, 0x1, 0x1);
        gbc.writeMem(0xfde, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x19b0, gbc.sp());
        EXPECT(0xfe0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03D2
        gbc.setState(0x68df, 0x8a7f, 0x3680, 0x243c, 0xc198, 0x8fcf, 0x0, 0x0);
        gbc.writeMem(0x68df, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x8a7f, gbc.sp());
        EXPECT(0x68e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03D3
        gbc.setState(0xcd06, 0xfac4, 0xb2d0, 0x66b1, 0xb506, 0x9f67, 0x0, 0x1);
        gbc.writeMem(0xcd06, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xfac4, gbc.sp());
        EXPECT(0xcd08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd06));
        EXPECT(0x5b, gbc.readMem(0xcd07));
        // CB 5B 03D4
        gbc.setState(0x68b, 0xaebc, 0x78e0, 0xedd3, 0x2976, 0x4549, 0x0, 0x1);
        gbc.writeMem(0x68b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xaebc, gbc.sp());
        EXPECT(0x68d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03D5
        gbc.setState(0xe52b, 0xeb60, 0x84d0, 0xf908, 0xe96e, 0x7bc7, 0x0, 0x1);
        gbc.writeMem(0xe52b, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xeb60, gbc.sp());
        EXPECT(0xe52d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe52b));
        EXPECT(0x5b, gbc.readMem(0xe52c));
        // CB 5B 03D6
        gbc.setState(0x5a55, 0xba7f, 0xda20, 0xda7b, 0x8945, 0x3dcb, 0x0, 0x0);
        gbc.writeMem(0x5a55, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xba7f, gbc.sp());
        EXPECT(0x5a57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03D7
        gbc.setState(0x866d, 0x8da, 0xffd0, 0xbec3, 0x66d6, 0x312a, 0x0, 0x0);
        gbc.writeMem(0x866d, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x8da, gbc.sp());
        EXPECT(0x866f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x866d));
        EXPECT(0x5b, gbc.readMem(0x866e));
        // CB 5B 03D8
        gbc.setState(0x5ddb, 0xfae9, 0xa790, 0x98b0, 0x7006, 0xbcf1, 0x1, 0x1);
        gbc.writeMem(0x5ddb, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xfae9, gbc.sp());
        EXPECT(0x5ddd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03DA
        gbc.setState(0xafd, 0x7d6c, 0x7b50, 0xd911, 0xe253, 0x1455, 0x1, 0x0);
        gbc.writeMem(0xafd, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x7d6c, gbc.sp());
        EXPECT(0xaff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03DB
        gbc.setState(0xe2c9, 0x8551, 0xe760, 0x6699, 0x3850, 0x79ad, 0x0, 0x1);
        gbc.writeMem(0xe2c9, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x8551, gbc.sp());
        EXPECT(0xe2cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2c9));
        EXPECT(0x5b, gbc.readMem(0xe2ca));
        // CB 5B 03DC
        gbc.setState(0x5d3c, 0xdd99, 0xbe80, 0x4b71, 0xd02e, 0x2503, 0x1, 0x1);
        gbc.writeMem(0x5d3c, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xdd99, gbc.sp());
        EXPECT(0x5d3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03DD
        gbc.setState(0x9226, 0xa28b, 0x9000, 0x176f, 0x5d97, 0xc49b, 0x0, 0x0);
        gbc.writeMem(0x9226, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xa28b, gbc.sp());
        EXPECT(0x9228, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9226));
        EXPECT(0x5b, gbc.readMem(0x9227));
        // CB 5B 03DE
        gbc.setState(0x417f, 0x2760, 0xd860, 0x77f2, 0x8a03, 0xd0c5, 0x1, 0x0);
        gbc.writeMem(0x417f, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x2760, gbc.sp());
        EXPECT(0x4181, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03DF
        gbc.setState(0x2279, 0x4670, 0x47c0, 0x554d, 0xe37b, 0x21bd, 0x0, 0x0);
        gbc.writeMem(0x2279, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x4670, gbc.sp());
        EXPECT(0x227b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03E0
        gbc.setState(0x3ba1, 0xcd92, 0x61a0, 0x4f7b, 0x83b1, 0x5495, 0x1, 0x0);
        gbc.writeMem(0x3ba1, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xcd92, gbc.sp());
        EXPECT(0x3ba3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03E1
        gbc.setState(0x8ff5, 0x27d0, 0xdb30, 0xafed, 0x8766, 0x91b0, 0x0, 0x0);
        gbc.writeMem(0x8ff5, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x27d0, gbc.sp());
        EXPECT(0x8ff7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ff5));
        EXPECT(0x5b, gbc.readMem(0x8ff6));
        // CB 5B 03E2
        gbc.setState(0x1f60, 0x5f29, 0x8fb0, 0x51d8, 0xc532, 0x5c99, 0x1, 0x0);
        gbc.writeMem(0x1f60, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x5f29, gbc.sp());
        EXPECT(0x1f62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03E3
        gbc.setState(0x39bc, 0x69c2, 0x8e50, 0xafde, 0xd84d, 0xfe26, 0x0, 0x1);
        gbc.writeMem(0x39bc, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x69c2, gbc.sp());
        EXPECT(0x39be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 5B 03E4
        gbc.setState(0xa0d0, 0xa065, 0xf600, 0x514b, 0xcf57, 0x4f79, 0x0, 0x0);
        gbc.writeMem(0xa0d0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xa065, gbc.sp());
        EXPECT(0xa0d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0d0));
        EXPECT(0x5b, gbc.readMem(0xa0d1));
        // CB 5B 03E5
        gbc.setState(0xbce0, 0x77f2, 0x9660, 0x1bd7, 0xf6a1, 0x444, 0x1, 0x0);
        gbc.writeMem(0xbce0, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x77f2, gbc.sp());
        EXPECT(0xbce2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbce0));
        EXPECT(0x5b, gbc.readMem(0xbce1));
        // CB 5B 03E6
        gbc.setState(0x1bab, 0x2bd2, 0x4860, 0xa0a9, 0x92ac, 0xef30, 0x1, 0x0);
        gbc.writeMem(0x1bab, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x2bd2, gbc.sp());
        EXPECT(0x1bad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 5B 03E7
        gbc.setState(0x6173, 0xf4ad, 0x9d00, 0xcd9c, 0x1cf, 0x1ad9, 0x0, 0x1);
        gbc.writeMem(0x6173, { 0xcb, 0x5b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xf4ad, gbc.sp());
        EXPECT(0x6175, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
    }
