    TEST(gbcemu, opcode_cb_4d) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 4D 0000
        gbc.setState(0x40a6, 0xef12, 0xa5f0, 0xdc3f, 0x3c7b, 0x39af, 0x1, 0x1);
        gbc.writeMem(0x40a6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xef12, gbc.sp());
        EXPECT(0x40a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0001
        gbc.setState(0x9d59, 0x230, 0xa320, 0xd92c, 0xbd17, 0x8afb, 0x0, 0x0);
        gbc.writeMem(0x9d59, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x230, gbc.sp());
        EXPECT(0x9d5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d59));
        EXPECT(0x4d, gbc.readMem(0x9d5a));
        // CB 4D 0002
        gbc.setState(0x59e, 0xf8c9, 0x9d60, 0x738a, 0x2aa9, 0xc0be, 0x0, 0x1);
        gbc.writeMem(0x59e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xf8c9, gbc.sp());
        EXPECT(0x5a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0003
        gbc.setState(0x961e, 0xac2e, 0x77f0, 0xcba9, 0xc2fa, 0xbc2e, 0x1, 0x0);
        gbc.writeMem(0x961e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xac2e, gbc.sp());
        EXPECT(0x9620, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x961e));
        EXPECT(0x4d, gbc.readMem(0x961f));
        // CB 4D 0004
        gbc.setState(0x8649, 0x9c50, 0x2b50, 0x4c31, 0x3d6a, 0x88d2, 0x0, 0x1);
        gbc.writeMem(0x8649, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x9c50, gbc.sp());
        EXPECT(0x864b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8649));
        EXPECT(0x4d, gbc.readMem(0x864a));
        // CB 4D 0005
        gbc.setState(0x1b33, 0x41bc, 0xc520, 0x718e, 0x3523, 0xce8e, 0x0, 0x1);
        gbc.writeMem(0x1b33, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x41bc, gbc.sp());
        EXPECT(0x1b35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0006
        gbc.setState(0x434b, 0xbc83, 0x7ed0, 0x8f48, 0xd7c6, 0x1381, 0x1, 0x1);
        gbc.writeMem(0x434b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xbc83, gbc.sp());
        EXPECT(0x434d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0007
        gbc.setState(0x4e14, 0xbe0d, 0x6ab0, 0xa91, 0x4e49, 0xd809, 0x0, 0x0);
        gbc.writeMem(0x4e14, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xbe0d, gbc.sp());
        EXPECT(0x4e16, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0008
        gbc.setState(0x2d67, 0x2b80, 0x45b0, 0x71b9, 0x4ee9, 0xe6c, 0x1, 0x1);
        gbc.writeMem(0x2d67, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x2b80, gbc.sp());
        EXPECT(0x2d69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0009
        gbc.setState(0xc6ab, 0xb0a4, 0xc9e0, 0x57c4, 0x865f, 0x3b15, 0x1, 0x0);
        gbc.writeMem(0xc6ab, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xb0a4, gbc.sp());
        EXPECT(0xc6ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6ab));
        EXPECT(0x4d, gbc.readMem(0xc6ac));
        // CB 4D 000A
        gbc.setState(0x82de, 0x7697, 0x6fe0, 0x9761, 0xe6f2, 0xb0ea, 0x0, 0x0);
        gbc.writeMem(0x82de, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x7697, gbc.sp());
        EXPECT(0x82e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82de));
        EXPECT(0x4d, gbc.readMem(0x82df));
        // CB 4D 000B
        gbc.setState(0x6882, 0x5cdd, 0x6ef0, 0x3d, 0xb146, 0x7e63, 0x1, 0x1);
        gbc.writeMem(0x6882, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x5cdd, gbc.sp());
        EXPECT(0x6884, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 000C
        gbc.setState(0x32dd, 0x10d0, 0x980, 0x1463, 0xd58a, 0x6b39, 0x1, 0x1);
        gbc.writeMem(0x32dd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x10d0, gbc.sp());
        EXPECT(0x32df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 000D
        gbc.setState(0x4a65, 0xb5ad, 0x43c0, 0x420d, 0xd683, 0x77ab, 0x1, 0x1);
        gbc.writeMem(0x4a65, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xb5ad, gbc.sp());
        EXPECT(0x4a67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 000E
        gbc.setState(0xd470, 0x9c7e, 0x1f40, 0xbbec, 0x1901, 0x1551, 0x1, 0x0);
        gbc.writeMem(0xd470, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x9c7e, gbc.sp());
        EXPECT(0xd472, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd470));
        EXPECT(0x4d, gbc.readMem(0xd471));
        // CB 4D 000F
        gbc.setState(0xcca5, 0xd2a4, 0xf310, 0x2d50, 0x2793, 0x5918, 0x0, 0x1);
        gbc.writeMem(0xcca5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xd2a4, gbc.sp());
        EXPECT(0xcca7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcca5));
        EXPECT(0x4d, gbc.readMem(0xcca6));
        // CB 4D 0010
        gbc.setState(0xb230, 0x454, 0x2db0, 0xc02e, 0x1191, 0x8cc3, 0x0, 0x0);
        gbc.writeMem(0xb230, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x454, gbc.sp());
        EXPECT(0xb232, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb230));
        EXPECT(0x4d, gbc.readMem(0xb231));
        // CB 4D 0011
        gbc.setState(0xcf5a, 0xcf6f, 0xc380, 0x7498, 0xd1a2, 0xeb17, 0x0, 0x0);
        gbc.writeMem(0xcf5a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xcf6f, gbc.sp());
        EXPECT(0xcf5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf5a));
        EXPECT(0x4d, gbc.readMem(0xcf5b));
        // CB 4D 0012
        gbc.setState(0x9852, 0xc111, 0xab50, 0xdb67, 0x1787, 0x176a, 0x1, 0x0);
        gbc.writeMem(0x9852, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xc111, gbc.sp());
        EXPECT(0x9854, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9852));
        EXPECT(0x4d, gbc.readMem(0x9853));
        // CB 4D 0013
        gbc.setState(0x6abe, 0x569d, 0x1d80, 0x73cb, 0xd2bb, 0xb7a2, 0x0, 0x0);
        gbc.writeMem(0x6abe, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x569d, gbc.sp());
        EXPECT(0x6ac0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0014
        gbc.setState(0xc27a, 0xde5e, 0xc2a0, 0x20b6, 0x949a, 0x906b, 0x1, 0x1);
        gbc.writeMem(0xc27a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xde5e, gbc.sp());
        EXPECT(0xc27c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc27a));
        EXPECT(0x4d, gbc.readMem(0xc27b));
        // CB 4D 0015
        gbc.setState(0xd82d, 0x659f, 0x300, 0x789b, 0xe06, 0x2124, 0x0, 0x0);
        gbc.writeMem(0xd82d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x659f, gbc.sp());
        EXPECT(0xd82f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd82d));
        EXPECT(0x4d, gbc.readMem(0xd82e));
        // CB 4D 0016
        gbc.setState(0x684c, 0xb4ba, 0xc500, 0xf69d, 0x37d4, 0xb006, 0x0, 0x0);
        gbc.writeMem(0x684c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xb4ba, gbc.sp());
        EXPECT(0x684e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0017
        gbc.setState(0xe8cb, 0x724e, 0xc430, 0x6a2, 0x1bb8, 0xfde7, 0x1, 0x1);
        gbc.writeMem(0xe8cb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x724e, gbc.sp());
        EXPECT(0xe8cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8cb));
        EXPECT(0x4d, gbc.readMem(0xe8cc));
        // CB 4D 0018
        gbc.setState(0x395, 0x2eeb, 0x4840, 0xc13e, 0xd8d, 0x673c, 0x0, 0x1);
        gbc.writeMem(0x395, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x2eeb, gbc.sp());
        EXPECT(0x397, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0019
        gbc.setState(0xb1d9, 0xcec5, 0x4f00, 0x8a78, 0x5a3a, 0x2308, 0x1, 0x1);
        gbc.writeMem(0xb1d9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xcec5, gbc.sp());
        EXPECT(0xb1db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1d9));
        EXPECT(0x4d, gbc.readMem(0xb1da));
        // CB 4D 001A
        gbc.setState(0x7070, 0x38af, 0xaf30, 0x45d7, 0x2d52, 0x62ce, 0x0, 0x1);
        gbc.writeMem(0x7070, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x38af, gbc.sp());
        EXPECT(0x7072, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 001B
        gbc.setState(0x5aae, 0x8226, 0x9a80, 0x7a09, 0x7dd1, 0x559b, 0x0, 0x1);
        gbc.writeMem(0x5aae, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x8226, gbc.sp());
        EXPECT(0x5ab0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 001C
        gbc.setState(0xd33a, 0xc91e, 0x6460, 0x31a7, 0x796f, 0x3228, 0x1, 0x1);
        gbc.writeMem(0xd33a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xc91e, gbc.sp());
        EXPECT(0xd33c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd33a));
        EXPECT(0x4d, gbc.readMem(0xd33b));
        // CB 4D 001D
        gbc.setState(0xa6da, 0x3c01, 0xa240, 0x6464, 0x6cf7, 0x7988, 0x1, 0x0);
        gbc.writeMem(0xa6da, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x3c01, gbc.sp());
        EXPECT(0xa6dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6da));
        EXPECT(0x4d, gbc.readMem(0xa6db));
        // CB 4D 001E
        gbc.setState(0xd61b, 0x645c, 0x9790, 0x598, 0xf507, 0x902b, 0x0, 0x1);
        gbc.writeMem(0xd61b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x645c, gbc.sp());
        EXPECT(0xd61d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd61b));
        EXPECT(0x4d, gbc.readMem(0xd61c));
        // CB 4D 001F
        gbc.setState(0x884c, 0xee58, 0xefa0, 0x11b3, 0x7d93, 0x92ad, 0x0, 0x1);
        gbc.writeMem(0x884c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xee58, gbc.sp());
        EXPECT(0x884e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x884c));
        EXPECT(0x4d, gbc.readMem(0x884d));
        // CB 4D 0020
        gbc.setState(0x2b01, 0x8d38, 0x7e50, 0xd893, 0xb36d, 0xf5fe, 0x0, 0x0);
        gbc.writeMem(0x2b01, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x8d38, gbc.sp());
        EXPECT(0x2b03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0022
        gbc.setState(0xca31, 0x9811, 0x19f0, 0x999b, 0x20f2, 0x4475, 0x1, 0x0);
        gbc.writeMem(0xca31, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x9811, gbc.sp());
        EXPECT(0xca33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca31));
        EXPECT(0x4d, gbc.readMem(0xca32));
        // CB 4D 0023
        gbc.setState(0x98b6, 0x41, 0x7bc0, 0xc757, 0x6ac4, 0xe7fc, 0x1, 0x0);
        gbc.writeMem(0x98b6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x41, gbc.sp());
        EXPECT(0x98b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98b6));
        EXPECT(0x4d, gbc.readMem(0x98b7));
        // CB 4D 0025
        gbc.setState(0xc48d, 0xfdb, 0xabb0, 0xb138, 0xdfe6, 0x6a2, 0x0, 0x0);
        gbc.writeMem(0xc48d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xfdb, gbc.sp());
        EXPECT(0xc48f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc48d));
        EXPECT(0x4d, gbc.readMem(0xc48e));
        // CB 4D 0026
        gbc.setState(0xaad7, 0x55a6, 0x5c00, 0xb0a0, 0x3048, 0x5f1, 0x1, 0x1);
        gbc.writeMem(0xaad7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x55a6, gbc.sp());
        EXPECT(0xaad9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaad7));
        EXPECT(0x4d, gbc.readMem(0xaad8));
        // CB 4D 0027
        gbc.setState(0x566, 0x590d, 0xe900, 0xd489, 0xdedd, 0x30ea, 0x1, 0x0);
        gbc.writeMem(0x566, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x590d, gbc.sp());
        EXPECT(0x568, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0028
        gbc.setState(0x69dc, 0x6ef5, 0x1d20, 0x9223, 0xab7a, 0x613d, 0x1, 0x0);
        gbc.writeMem(0x69dc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x6ef5, gbc.sp());
        EXPECT(0x69de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0029
        gbc.setState(0xdf91, 0x236f, 0x3ad0, 0xcbdc, 0x58a5, 0xa273, 0x0, 0x0);
        gbc.writeMem(0xdf91, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x236f, gbc.sp());
        EXPECT(0xdf93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf91));
        EXPECT(0x4d, gbc.readMem(0xdf92));
        // CB 4D 002A
        gbc.setState(0xe6d7, 0x16f9, 0x4190, 0xf325, 0x7332, 0xf9dc, 0x1, 0x1);
        gbc.writeMem(0xe6d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x16f9, gbc.sp());
        EXPECT(0xe6d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6d7));
        EXPECT(0x4d, gbc.readMem(0xe6d8));
        // CB 4D 002B
        gbc.setState(0xacdb, 0x660f, 0x550, 0xeb42, 0xce2a, 0x1103, 0x1, 0x0);
        gbc.writeMem(0xacdb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x660f, gbc.sp());
        EXPECT(0xacdd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacdb));
        EXPECT(0x4d, gbc.readMem(0xacdc));
        // CB 4D 002C
        gbc.setState(0x49dd, 0xcbee, 0x1ad0, 0xe3b0, 0x47af, 0x3bcc, 0x0, 0x1);
        gbc.writeMem(0x49dd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xcbee, gbc.sp());
        EXPECT(0x49df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 002D
        gbc.setState(0xac0d, 0x719c, 0x7a20, 0xe050, 0xb92e, 0xb68b, 0x0, 0x0);
        gbc.writeMem(0xac0d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x719c, gbc.sp());
        EXPECT(0xac0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac0d));
        EXPECT(0x4d, gbc.readMem(0xac0e));
        // CB 4D 002E
        gbc.setState(0x2f0, 0xa896, 0xeeb0, 0x3e05, 0x6afc, 0x6b23, 0x1, 0x0);
        gbc.writeMem(0x2f0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xa896, gbc.sp());
        EXPECT(0x2f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 002F
        gbc.setState(0x82ea, 0x4949, 0xd3d0, 0x8df3, 0xc5ff, 0xd151, 0x0, 0x1);
        gbc.writeMem(0x82ea, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x4949, gbc.sp());
        EXPECT(0x82ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82ea));
        EXPECT(0x4d, gbc.readMem(0x82eb));
        // CB 4D 0030
        gbc.setState(0x3e01, 0x6012, 0xfa40, 0x3a59, 0x7f4f, 0x68a6, 0x1, 0x0);
        gbc.writeMem(0x3e01, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x6012, gbc.sp());
        EXPECT(0x3e03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0031
        gbc.setState(0xe38, 0x1f9d, 0xef40, 0xd553, 0x4209, 0x5365, 0x0, 0x0);
        gbc.writeMem(0xe38, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x1f9d, gbc.sp());
        EXPECT(0xe3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0032
        gbc.setState(0x835b, 0xfc48, 0xb740, 0x72b9, 0x587e, 0x1bd5, 0x1, 0x0);
        gbc.writeMem(0x835b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xfc48, gbc.sp());
        EXPECT(0x835d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x835b));
        EXPECT(0x4d, gbc.readMem(0x835c));
        // CB 4D 0033
        gbc.setState(0xee0, 0x94b1, 0xad20, 0x7eef, 0xd08c, 0x2091, 0x0, 0x0);
        gbc.writeMem(0xee0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x94b1, gbc.sp());
        EXPECT(0xee2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0034
        gbc.setState(0x823, 0x4d7e, 0x45a0, 0xb03c, 0xc90a, 0xe254, 0x1, 0x1);
        gbc.writeMem(0x823, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x4d7e, gbc.sp());
        EXPECT(0x825, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0035
        gbc.setState(0x1c51, 0x5740, 0x45a0, 0x2330, 0xe9f, 0x926f, 0x1, 0x1);
        gbc.writeMem(0x1c51, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x5740, gbc.sp());
        EXPECT(0x1c53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0036
        gbc.setState(0x7eb2, 0xfcaf, 0x7010, 0xa13, 0xb1dd, 0x33, 0x0, 0x0);
        gbc.writeMem(0x7eb2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xfcaf, gbc.sp());
        EXPECT(0x7eb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0037
        gbc.setState(0xc551, 0x4a7b, 0x1b10, 0xf3b1, 0xebc9, 0xdc9e, 0x0, 0x1);
        gbc.writeMem(0xc551, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x4a7b, gbc.sp());
        EXPECT(0xc553, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc551));
        EXPECT(0x4d, gbc.readMem(0xc552));
        // CB 4D 0038
        gbc.setState(0x39fe, 0xc162, 0x62e0, 0x50f6, 0xfe47, 0x57ae, 0x0, 0x0);
        gbc.writeMem(0x39fe, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xc162, gbc.sp());
        EXPECT(0x3a00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0039
        gbc.setState(0xae47, 0x245c, 0x4870, 0x5c46, 0xfee6, 0x48bd, 0x1, 0x0);
        gbc.writeMem(0xae47, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x245c, gbc.sp());
        EXPECT(0xae49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae47));
        EXPECT(0x4d, gbc.readMem(0xae48));
        // CB 4D 003A
        gbc.setState(0x4c7b, 0x73da, 0x1470, 0x5bf5, 0x9eeb, 0x9abe, 0x0, 0x1);
        gbc.writeMem(0x4c7b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x73da, gbc.sp());
        EXPECT(0x4c7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 003B
        gbc.setState(0x7525, 0x742b, 0xec20, 0x29ec, 0x9e3e, 0xa0ae, 0x0, 0x1);
        gbc.writeMem(0x7525, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x742b, gbc.sp());
        EXPECT(0x7527, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 003C
        gbc.setState(0x6404, 0xee09, 0x7930, 0x11ea, 0xdf0f, 0xb8c0, 0x0, 0x0);
        gbc.writeMem(0x6404, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xee09, gbc.sp());
        EXPECT(0x6406, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 003D
        gbc.setState(0x29ee, 0x506a, 0x7800, 0x93e6, 0xf7e0, 0x8237, 0x1, 0x1);
        gbc.writeMem(0x29ee, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x506a, gbc.sp());
        EXPECT(0x29f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 003E
        gbc.setState(0x4ff3, 0xca2a, 0x9050, 0x6ed2, 0xec3d, 0xb1c5, 0x1, 0x1);
        gbc.writeMem(0x4ff3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xca2a, gbc.sp());
        EXPECT(0x4ff5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 003F
        gbc.setState(0xa09b, 0x6ab3, 0x2e60, 0xf4c3, 0xc654, 0x2e5e, 0x1, 0x0);
        gbc.writeMem(0xa09b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x6ab3, gbc.sp());
        EXPECT(0xa09d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa09b));
        EXPECT(0x4d, gbc.readMem(0xa09c));
        // CB 4D 0040
        gbc.setState(0x9709, 0x99b2, 0x6550, 0x6ae8, 0xe907, 0xd93, 0x1, 0x0);
        gbc.writeMem(0x9709, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x99b2, gbc.sp());
        EXPECT(0x970b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9709));
        EXPECT(0x4d, gbc.readMem(0x970a));
        // CB 4D 0041
        gbc.setState(0x7996, 0x46ea, 0x8a20, 0x3d1a, 0xdfbc, 0x85b, 0x0, 0x1);
        gbc.writeMem(0x7996, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x46ea, gbc.sp());
        EXPECT(0x7998, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0042
        gbc.setState(0xbe31, 0xee53, 0x8030, 0x1c63, 0xe2b, 0xf60, 0x1, 0x1);
        gbc.writeMem(0xbe31, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xee53, gbc.sp());
        EXPECT(0xbe33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe31));
        EXPECT(0x4d, gbc.readMem(0xbe32));
        // CB 4D 0043
        gbc.setState(0xbda7, 0x6fc4, 0xa8d0, 0x3269, 0xf506, 0xeb0c, 0x0, 0x0);
        gbc.writeMem(0xbda7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x6fc4, gbc.sp());
        EXPECT(0xbda9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbda7));
        EXPECT(0x4d, gbc.readMem(0xbda8));
        // CB 4D 0044
        gbc.setState(0x86d0, 0xa167, 0xf670, 0xbbc5, 0x3167, 0xefac, 0x1, 0x1);
        gbc.writeMem(0x86d0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xa167, gbc.sp());
        EXPECT(0x86d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86d0));
        EXPECT(0x4d, gbc.readMem(0x86d1));
        // CB 4D 0045
        gbc.setState(0x3982, 0xd21f, 0xad10, 0x9463, 0x1e15, 0xd40b, 0x1, 0x0);
        gbc.writeMem(0x3982, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xd21f, gbc.sp());
        EXPECT(0x3984, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0046
        gbc.setState(0x9854, 0x9096, 0x82c0, 0x344, 0x35d1, 0xc7f5, 0x1, 0x0);
        gbc.writeMem(0x9854, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x9096, gbc.sp());
        EXPECT(0x9856, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9854));
        EXPECT(0x4d, gbc.readMem(0x9855));
        // CB 4D 0047
        gbc.setState(0x9359, 0xc113, 0x20b0, 0x2779, 0x8ed, 0xc2d2, 0x0, 0x1);
        gbc.writeMem(0x9359, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xc113, gbc.sp());
        EXPECT(0x935b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9359));
        EXPECT(0x4d, gbc.readMem(0x935a));
        // CB 4D 0048
        gbc.setState(0x4935, 0x4569, 0xda70, 0xa693, 0x78a9, 0x3f9f, 0x1, 0x0);
        gbc.writeMem(0x4935, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x4569, gbc.sp());
        EXPECT(0x4937, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0049
        gbc.setState(0xa8e4, 0x30ad, 0x12f0, 0xde39, 0x32ea, 0xfc0e, 0x0, 0x1);
        gbc.writeMem(0xa8e4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x30ad, gbc.sp());
        EXPECT(0xa8e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8e4));
        EXPECT(0x4d, gbc.readMem(0xa8e5));
        // CB 4D 004A
        gbc.setState(0x1f1, 0x871d, 0x64e0, 0x31ce, 0x5343, 0x3eb6, 0x1, 0x0);
        gbc.writeMem(0x1f1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x871d, gbc.sp());
        EXPECT(0x1f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 004C
        gbc.setState(0x14b9, 0x853e, 0x4a20, 0xf65e, 0x7f85, 0xe6e4, 0x1, 0x1);
        gbc.writeMem(0x14b9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x853e, gbc.sp());
        EXPECT(0x14bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 004D
        gbc.setState(0x2980, 0x8b6f, 0x5f60, 0xf435, 0xcf03, 0x91fa, 0x1, 0x1);
        gbc.writeMem(0x2980, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x8b6f, gbc.sp());
        EXPECT(0x2982, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 004E
        gbc.setState(0x2b6, 0x8337, 0x20b0, 0xbf12, 0x9662, 0x70c7, 0x1, 0x0);
        gbc.writeMem(0x2b6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x8337, gbc.sp());
        EXPECT(0x2b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 004F
        gbc.setState(0xd537, 0xe90a, 0x2330, 0xb79, 0x42d1, 0x2fdf, 0x0, 0x1);
        gbc.writeMem(0xd537, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xe90a, gbc.sp());
        EXPECT(0xd539, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd537));
        EXPECT(0x4d, gbc.readMem(0xd538));
        // CB 4D 0050
        gbc.setState(0x5544, 0x2b1e, 0x9fd0, 0xb73b, 0x59d5, 0xe3af, 0x1, 0x1);
        gbc.writeMem(0x5544, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x2b1e, gbc.sp());
        EXPECT(0x5546, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0051
        gbc.setState(0x1d1d, 0x87f3, 0xfde0, 0xc389, 0x1657, 0x10a5, 0x1, 0x1);
        gbc.writeMem(0x1d1d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x87f3, gbc.sp());
        EXPECT(0x1d1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0052
        gbc.setState(0xeb36, 0xdc3c, 0x5510, 0x5df8, 0xaf1a, 0xc4bc, 0x0, 0x1);
        gbc.writeMem(0xeb36, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xdc3c, gbc.sp());
        EXPECT(0xeb38, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb36));
        EXPECT(0x4d, gbc.readMem(0xeb37));
        // CB 4D 0053
        gbc.setState(0x1710, 0x30c8, 0x3120, 0x1066, 0x9e85, 0xf48e, 0x0, 0x1);
        gbc.writeMem(0x1710, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x30c8, gbc.sp());
        EXPECT(0x1712, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0054
        gbc.setState(0xe32, 0xe00, 0x82b0, 0xc922, 0xe3bc, 0xfeb0, 0x1, 0x0);
        gbc.writeMem(0xe32, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xe00, gbc.sp());
        EXPECT(0xe34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0055
        gbc.setState(0x1ac8, 0xdc4, 0xd970, 0x11ef, 0x2ee4, 0x5ac9, 0x1, 0x0);
        gbc.writeMem(0x1ac8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xdc4, gbc.sp());
        EXPECT(0x1aca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0056
        gbc.setState(0x56ee, 0xc6ec, 0x6310, 0x9a6e, 0x7ddf, 0x97e0, 0x1, 0x0);
        gbc.writeMem(0x56ee, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xc6ec, gbc.sp());
        EXPECT(0x56f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0057
        gbc.setState(0x3885, 0x6bbf, 0x7e00, 0xc013, 0x7fe1, 0xca22, 0x1, 0x0);
        gbc.writeMem(0x3885, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x6bbf, gbc.sp());
        EXPECT(0x3887, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0058
        gbc.setState(0x78f6, 0xc857, 0x6c60, 0x6da1, 0x270c, 0x6a26, 0x0, 0x0);
        gbc.writeMem(0x78f6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xc857, gbc.sp());
        EXPECT(0x78f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0059
        gbc.setState(0x1045, 0x94b8, 0xfe0, 0x8e00, 0xa659, 0x17ba, 0x1, 0x0);
        gbc.writeMem(0x1045, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x94b8, gbc.sp());
        EXPECT(0x1047, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 005A
        gbc.setState(0x35c3, 0x37cd, 0x1a70, 0x1b6b, 0x165c, 0xa13f, 0x1, 0x1);
        gbc.writeMem(0x35c3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x37cd, gbc.sp());
        EXPECT(0x35c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 005B
        gbc.setState(0xdc47, 0x28a2, 0xb2c0, 0x27e8, 0xcb22, 0x43a2, 0x1, 0x1);
        gbc.writeMem(0xdc47, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x28a2, gbc.sp());
        EXPECT(0xdc49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc47));
        EXPECT(0x4d, gbc.readMem(0xdc48));
        // CB 4D 005C
        gbc.setState(0x806e, 0x1382, 0x6940, 0xf555, 0xbdc4, 0xdcb0, 0x0, 0x1);
        gbc.writeMem(0x806e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x1382, gbc.sp());
        EXPECT(0x8070, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x806e));
        EXPECT(0x4d, gbc.readMem(0x806f));
        // CB 4D 005D
        gbc.setState(0xc6d7, 0xa41e, 0x8220, 0xe3d4, 0x2b17, 0x9282, 0x0, 0x0);
        gbc.writeMem(0xc6d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xa41e, gbc.sp());
        EXPECT(0xc6d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6d7));
        EXPECT(0x4d, gbc.readMem(0xc6d8));
        // CB 4D 005E
        gbc.setState(0xa9a2, 0x1f58, 0xd9f0, 0x23bc, 0x1dee, 0xbc5b, 0x1, 0x0);
        gbc.writeMem(0xa9a2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x1f58, gbc.sp());
        EXPECT(0xa9a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9a2));
        EXPECT(0x4d, gbc.readMem(0xa9a3));
        // CB 4D 005F
        gbc.setState(0x5028, 0xb917, 0x9850, 0xe6a4, 0xbfd6, 0xc5e2, 0x1, 0x1);
        gbc.writeMem(0x5028, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xb917, gbc.sp());
        EXPECT(0x502a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0060
        gbc.setState(0x3ca7, 0x394a, 0xb9f0, 0xf59d, 0x201, 0xca1b, 0x1, 0x1);
        gbc.writeMem(0x3ca7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x394a, gbc.sp());
        EXPECT(0x3ca9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0061
        gbc.setState(0xd88e, 0x8a91, 0x6700, 0x3adb, 0xec0f, 0xfd79, 0x0, 0x1);
        gbc.writeMem(0xd88e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x8a91, gbc.sp());
        EXPECT(0xd890, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd88e));
        EXPECT(0x4d, gbc.readMem(0xd88f));
        // CB 4D 0062
        gbc.setState(0xa466, 0xc97b, 0x9800, 0x4ce7, 0x22b2, 0x2695, 0x1, 0x1);
        gbc.writeMem(0xa466, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xc97b, gbc.sp());
        EXPECT(0xa468, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa466));
        EXPECT(0x4d, gbc.readMem(0xa467));
        // CB 4D 0063
        gbc.setState(0x15d7, 0xfd3b, 0xad50, 0x7827, 0x8ac4, 0xfda3, 0x1, 0x0);
        gbc.writeMem(0x15d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xfd3b, gbc.sp());
        EXPECT(0x15d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0064
        gbc.setState(0x18d6, 0x1260, 0xf070, 0x107, 0x4995, 0x2d02, 0x1, 0x1);
        gbc.writeMem(0x18d6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x1260, gbc.sp());
        EXPECT(0x18d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0065
        gbc.setState(0xd9da, 0xfeb3, 0xf320, 0x2430, 0x17f4, 0x31f4, 0x0, 0x1);
        gbc.writeMem(0xd9da, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xfeb3, gbc.sp());
        EXPECT(0xd9dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9da));
        EXPECT(0x4d, gbc.readMem(0xd9db));
        // CB 4D 0066
        gbc.setState(0xd514, 0xd2ce, 0x17e0, 0x4c6b, 0x8cdf, 0x2d39, 0x0, 0x1);
        gbc.writeMem(0xd514, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xd2ce, gbc.sp());
        EXPECT(0xd516, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd514));
        EXPECT(0x4d, gbc.readMem(0xd515));
        // CB 4D 0067
        gbc.setState(0x738c, 0xdb7, 0x8f50, 0xfbe2, 0x5e46, 0xbe2b, 0x0, 0x0);
        gbc.writeMem(0x738c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xdb7, gbc.sp());
        EXPECT(0x738e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0068
        gbc.setState(0x16ed, 0x1947, 0xdb90, 0xb184, 0x90e2, 0xa89a, 0x0, 0x0);
        gbc.writeMem(0x16ed, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x1947, gbc.sp());
        EXPECT(0x16ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0069
        gbc.setState(0x176a, 0x3b06, 0xca80, 0x9db, 0x4af3, 0xd078, 0x0, 0x0);
        gbc.writeMem(0x176a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x3b06, gbc.sp());
        EXPECT(0x176c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 006A
        gbc.setState(0x2f46, 0xb369, 0x55c0, 0xb9c9, 0x85b2, 0xe6a5, 0x1, 0x0);
        gbc.writeMem(0x2f46, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xb369, gbc.sp());
        EXPECT(0x2f48, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 006B
        gbc.setState(0x8f92, 0xe08a, 0x7a0, 0x4f09, 0x22f5, 0x20dc, 0x0, 0x0);
        gbc.writeMem(0x8f92, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xe08a, gbc.sp());
        EXPECT(0x8f94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f92));
        EXPECT(0x4d, gbc.readMem(0x8f93));
        // CB 4D 006C
        gbc.setState(0xd7b8, 0x214b, 0x50f0, 0xc161, 0xfcaf, 0x4f17, 0x1, 0x0);
        gbc.writeMem(0xd7b8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x214b, gbc.sp());
        EXPECT(0xd7ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7b8));
        EXPECT(0x4d, gbc.readMem(0xd7b9));
        // CB 4D 006D
        gbc.setState(0xa70, 0xa803, 0x8e20, 0xabb5, 0xb03d, 0x47e5, 0x1, 0x0);
        gbc.writeMem(0xa70, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xa803, gbc.sp());
        EXPECT(0xa72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 006E
        gbc.setState(0xa3ad, 0x9d5c, 0xf350, 0x86b8, 0x6701, 0xfa47, 0x0, 0x1);
        gbc.writeMem(0xa3ad, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x9d5c, gbc.sp());
        EXPECT(0xa3af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3ad));
        EXPECT(0x4d, gbc.readMem(0xa3ae));
        // CB 4D 006F
        gbc.setState(0x125c, 0x7def, 0x2480, 0x8df3, 0xe057, 0x5344, 0x1, 0x1);
        gbc.writeMem(0x125c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x7def, gbc.sp());
        EXPECT(0x125e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0070
        gbc.setState(0x25c6, 0xcd70, 0xad30, 0x670c, 0xbb06, 0x4b02, 0x0, 0x0);
        gbc.writeMem(0x25c6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xcd70, gbc.sp());
        EXPECT(0x25c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0071
        gbc.setState(0x38ed, 0xc640, 0x32e0, 0x3a65, 0x6ee8, 0x899f, 0x0, 0x1);
        gbc.writeMem(0x38ed, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xc640, gbc.sp());
        EXPECT(0x38ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0072
        gbc.setState(0x254c, 0xab9d, 0x2020, 0x74dc, 0x1a4c, 0x3401, 0x1, 0x1);
        gbc.writeMem(0x254c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xab9d, gbc.sp());
        EXPECT(0x254e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0073
        gbc.setState(0xaa5d, 0xe210, 0x8bf0, 0x5be2, 0x2b43, 0x8b7, 0x1, 0x0);
        gbc.writeMem(0xaa5d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xe210, gbc.sp());
        EXPECT(0xaa5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa5d));
        EXPECT(0x4d, gbc.readMem(0xaa5e));
        // CB 4D 0074
        gbc.setState(0x6c30, 0x1d4e, 0x9850, 0xcdf5, 0x8daf, 0xdaac, 0x0, 0x1);
        gbc.writeMem(0x6c30, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x1d4e, gbc.sp());
        EXPECT(0x6c32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0075
        gbc.setState(0x7e7e, 0xc8b5, 0x5630, 0x3564, 0x2058, 0x506e, 0x0, 0x0);
        gbc.writeMem(0x7e7e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xc8b5, gbc.sp());
        EXPECT(0x7e80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0076
        gbc.setState(0x2b6a, 0x65ae, 0xa160, 0x8593, 0xf9f8, 0x5239, 0x1, 0x1);
        gbc.writeMem(0x2b6a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x65ae, gbc.sp());
        EXPECT(0x2b6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0078
        gbc.setState(0x3516, 0xff90, 0x8080, 0xc8f0, 0x4528, 0x246c, 0x0, 0x0);
        gbc.writeMem(0x3516, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xff90, gbc.sp());
        EXPECT(0x3518, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0079
        gbc.setState(0x718f, 0xf1d8, 0xd4f0, 0x7d0, 0xf7c4, 0x4c1b, 0x1, 0x0);
        gbc.writeMem(0x718f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xf1d8, gbc.sp());
        EXPECT(0x7191, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 007A
        gbc.setState(0x5dd7, 0xdc4a, 0x9860, 0xb71a, 0xa9f8, 0x21b7, 0x1, 0x0);
        gbc.writeMem(0x5dd7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xdc4a, gbc.sp());
        EXPECT(0x5dd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 007B
        gbc.setState(0x6cab, 0xb1ca, 0xfff0, 0x22fb, 0x6e14, 0x2367, 0x1, 0x0);
        gbc.writeMem(0x6cab, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xb1ca, gbc.sp());
        EXPECT(0x6cad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 007C
        gbc.setState(0x88a1, 0xe71b, 0x6b00, 0xf14b, 0x2ac4, 0x167b, 0x0, 0x1);
        gbc.writeMem(0x88a1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xe71b, gbc.sp());
        EXPECT(0x88a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88a1));
        EXPECT(0x4d, gbc.readMem(0x88a2));
        // CB 4D 007D
        gbc.setState(0xbc50, 0xbafd, 0xe040, 0x8f72, 0x46e9, 0x86d3, 0x0, 0x0);
        gbc.writeMem(0xbc50, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xbafd, gbc.sp());
        EXPECT(0xbc52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc50));
        EXPECT(0x4d, gbc.readMem(0xbc51));
        // CB 4D 007E
        gbc.setState(0xa2b3, 0x5a6a, 0x2d30, 0x76fb, 0x808f, 0x3dc6, 0x0, 0x1);
        gbc.writeMem(0xa2b3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x5a6a, gbc.sp());
        EXPECT(0xa2b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2b3));
        EXPECT(0x4d, gbc.readMem(0xa2b4));
        // CB 4D 007F
        gbc.setState(0x3b0d, 0x5131, 0x70d0, 0x93f6, 0xc7aa, 0xfd03, 0x1, 0x0);
        gbc.writeMem(0x3b0d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x5131, gbc.sp());
        EXPECT(0x3b0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0080
        gbc.setState(0xaa0c, 0xf317, 0xc140, 0x2025, 0xbfde, 0x6719, 0x0, 0x1);
        gbc.writeMem(0xaa0c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xf317, gbc.sp());
        EXPECT(0xaa0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa0c));
        EXPECT(0x4d, gbc.readMem(0xaa0d));
        // CB 4D 0081
        gbc.setState(0xbb49, 0x143d, 0x3fb0, 0x616f, 0x242d, 0x2bf2, 0x1, 0x0);
        gbc.writeMem(0xbb49, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x143d, gbc.sp());
        EXPECT(0xbb4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb49));
        EXPECT(0x4d, gbc.readMem(0xbb4a));
        // CB 4D 0082
        gbc.setState(0x6f76, 0x13ef, 0xbcb0, 0xa3b2, 0xa5e5, 0x957b, 0x0, 0x0);
        gbc.writeMem(0x6f76, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x13ef, gbc.sp());
        EXPECT(0x6f78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0083
        gbc.setState(0x1d25, 0x1587, 0x6aa0, 0x98b4, 0x31a6, 0x79ec, 0x0, 0x0);
        gbc.writeMem(0x1d25, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x1587, gbc.sp());
        EXPECT(0x1d27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0085
        gbc.setState(0x6997, 0x6cdf, 0xb960, 0xe4fb, 0xe935, 0x8586, 0x1, 0x0);
        gbc.writeMem(0x6997, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x6cdf, gbc.sp());
        EXPECT(0x6999, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0086
        gbc.setState(0xbab6, 0x4378, 0xc0b0, 0x5e3f, 0x5b8a, 0x99ad, 0x0, 0x0);
        gbc.writeMem(0xbab6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x4378, gbc.sp());
        EXPECT(0xbab8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbab6));
        EXPECT(0x4d, gbc.readMem(0xbab7));
        // CB 4D 0088
        gbc.setState(0x4988, 0xf780, 0x1580, 0x6ecf, 0x76e0, 0xa357, 0x0, 0x1);
        gbc.writeMem(0x4988, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xf780, gbc.sp());
        EXPECT(0x498a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0089
        gbc.setState(0x46bb, 0x20e6, 0xf6c0, 0x1dde, 0xc23f, 0x2aa6, 0x1, 0x0);
        gbc.writeMem(0x46bb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x20e6, gbc.sp());
        EXPECT(0x46bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 008A
        gbc.setState(0x6ec4, 0xb406, 0x53b0, 0x80a6, 0x8e6e, 0x9e77, 0x1, 0x0);
        gbc.writeMem(0x6ec4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xb406, gbc.sp());
        EXPECT(0x6ec6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 008B
        gbc.setState(0xdc0b, 0xb4f5, 0xa0f0, 0x1f28, 0x2e9d, 0x44, 0x0, 0x0);
        gbc.writeMem(0xdc0b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xb4f5, gbc.sp());
        EXPECT(0xdc0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc0b));
        EXPECT(0x4d, gbc.readMem(0xdc0c));
        // CB 4D 008C
        gbc.setState(0x4547, 0x1c10, 0x1cc0, 0x5d19, 0xc7f0, 0x38e4, 0x0, 0x0);
        gbc.writeMem(0x4547, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x1c10, gbc.sp());
        EXPECT(0x4549, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 008D
        gbc.setState(0x50d2, 0x151e, 0xd50, 0x5c30, 0x95c7, 0x6c5e, 0x1, 0x1);
        gbc.writeMem(0x50d2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x151e, gbc.sp());
        EXPECT(0x50d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 008E
        gbc.setState(0x309c, 0xfff9, 0xfb50, 0x270, 0xfd01, 0x1c1e, 0x0, 0x0);
        gbc.writeMem(0x309c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xfff9, gbc.sp());
        EXPECT(0x309e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 008F
        gbc.setState(0xec6c, 0x7d48, 0x1c50, 0xdeec, 0x1f0a, 0x868a, 0x1, 0x1);
        gbc.writeMem(0xec6c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x7d48, gbc.sp());
        EXPECT(0xec6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec6c));
        EXPECT(0x4d, gbc.readMem(0xec6d));
        // CB 4D 0090
        gbc.setState(0xeed, 0x960b, 0xc350, 0x4d90, 0x49c6, 0x2346, 0x0, 0x0);
        gbc.writeMem(0xeed, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x960b, gbc.sp());
        EXPECT(0xeef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0091
        gbc.setState(0x4eee, 0x9efb, 0x54b0, 0x4555, 0xfcd4, 0x257, 0x1, 0x0);
        gbc.writeMem(0x4eee, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x9efb, gbc.sp());
        EXPECT(0x4ef0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0092
        gbc.setState(0xbfd4, 0x2dea, 0x10e0, 0xa52d, 0x9b58, 0x64a, 0x0, 0x1);
        gbc.writeMem(0xbfd4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x2dea, gbc.sp());
        EXPECT(0xbfd6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfd4));
        EXPECT(0x4d, gbc.readMem(0xbfd5));
        // CB 4D 0093
        gbc.setState(0x9bc9, 0xcead, 0x3840, 0x18fd, 0x672f, 0xb78, 0x0, 0x0);
        gbc.writeMem(0x9bc9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xcead, gbc.sp());
        EXPECT(0x9bcb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bc9));
        EXPECT(0x4d, gbc.readMem(0x9bca));
        // CB 4D 0094
        gbc.setState(0xd69f, 0xf60f, 0x8300, 0x384f, 0xd65b, 0x3658, 0x1, 0x0);
        gbc.writeMem(0xd69f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xf60f, gbc.sp());
        EXPECT(0xd6a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd69f));
        EXPECT(0x4d, gbc.readMem(0xd6a0));
        // CB 4D 0095
        gbc.setState(0x98b9, 0xc35, 0xea00, 0x137a, 0xb3d1, 0x95e1, 0x1, 0x0);
        gbc.writeMem(0x98b9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xc35, gbc.sp());
        EXPECT(0x98bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98b9));
        EXPECT(0x4d, gbc.readMem(0x98ba));
        // CB 4D 0096
        gbc.setState(0x13f7, 0x80a5, 0x42f0, 0xf21c, 0xb243, 0x912c, 0x1, 0x1);
        gbc.writeMem(0x13f7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x80a5, gbc.sp());
        EXPECT(0x13f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0097
        gbc.setState(0x9341, 0x1c93, 0xe100, 0xec98, 0xd55b, 0x1a4a, 0x1, 0x0);
        gbc.writeMem(0x9341, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x1c93, gbc.sp());
        EXPECT(0x9343, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9341));
        EXPECT(0x4d, gbc.readMem(0x9342));
        // CB 4D 0098
        gbc.setState(0x9c7c, 0xa42c, 0xd260, 0x9577, 0xef9b, 0x51c1, 0x1, 0x1);
        gbc.writeMem(0x9c7c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xa42c, gbc.sp());
        EXPECT(0x9c7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c7c));
        EXPECT(0x4d, gbc.readMem(0x9c7d));
        // CB 4D 0099
        gbc.setState(0x517a, 0x3c9c, 0xe640, 0x73b4, 0xcfa4, 0x57b, 0x1, 0x0);
        gbc.writeMem(0x517a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x3c9c, gbc.sp());
        EXPECT(0x517c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 009A
        gbc.setState(0xffe, 0x4b66, 0x8190, 0x8b66, 0x99fd, 0xbc94, 0x0, 0x1);
        gbc.writeMem(0xffe, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x4b66, gbc.sp());
        EXPECT(0x1000, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 009B
        gbc.setState(0x430e, 0x92c3, 0x3880, 0x8b02, 0x632e, 0xcaf, 0x0, 0x0);
        gbc.writeMem(0x430e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x92c3, gbc.sp());
        EXPECT(0x4310, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 009C
        gbc.setState(0x1821, 0x2838, 0xc920, 0xc56c, 0xad5d, 0xdab4, 0x1, 0x0);
        gbc.writeMem(0x1821, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x2838, gbc.sp());
        EXPECT(0x1823, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 009D
        gbc.setState(0x51bf, 0xb4ef, 0x2c00, 0x244a, 0xb9ec, 0x4388, 0x0, 0x1);
        gbc.writeMem(0x51bf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xb4ef, gbc.sp());
        EXPECT(0x51c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 009E
        gbc.setState(0x5a96, 0xcc59, 0xa670, 0x72c4, 0x3c49, 0x45ef, 0x1, 0x1);
        gbc.writeMem(0x5a96, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xcc59, gbc.sp());
        EXPECT(0x5a98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 009F
        gbc.setState(0xb4ad, 0x3fcf, 0xde80, 0xff21, 0xb86, 0xba69, 0x0, 0x0);
        gbc.writeMem(0xb4ad, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x3fcf, gbc.sp());
        EXPECT(0xb4af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4ad));
        EXPECT(0x4d, gbc.readMem(0xb4ae));
        // CB 4D 00A0
        gbc.setState(0x456f, 0x7bd7, 0x250, 0x4b8c, 0x5e91, 0xdec2, 0x1, 0x0);
        gbc.writeMem(0x456f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x7bd7, gbc.sp());
        EXPECT(0x4571, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00A1
        gbc.setState(0x8c4e, 0x1153, 0xf830, 0x27c3, 0x6826, 0x48c7, 0x1, 0x1);
        gbc.writeMem(0x8c4e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x1153, gbc.sp());
        EXPECT(0x8c50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c4e));
        EXPECT(0x4d, gbc.readMem(0x8c4f));
        // CB 4D 00A2
        gbc.setState(0xbb8d, 0xdbce, 0xa5f0, 0xa4d8, 0xc6d9, 0xb87a, 0x0, 0x0);
        gbc.writeMem(0xbb8d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xdbce, gbc.sp());
        EXPECT(0xbb8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb8d));
        EXPECT(0x4d, gbc.readMem(0xbb8e));
        // CB 4D 00A3
        gbc.setState(0x44aa, 0x5674, 0x9e0, 0xb82a, 0x4c7f, 0xdacf, 0x1, 0x1);
        gbc.writeMem(0x44aa, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x5674, gbc.sp());
        EXPECT(0x44ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00A4
        gbc.setState(0x99e6, 0xcfcb, 0x24c0, 0x480b, 0x8d83, 0x53b3, 0x0, 0x1);
        gbc.writeMem(0x99e6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xcfcb, gbc.sp());
        EXPECT(0x99e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99e6));
        EXPECT(0x4d, gbc.readMem(0x99e7));
        // CB 4D 00A5
        gbc.setState(0x9ad, 0x3a88, 0x6af0, 0xb817, 0xb057, 0x8b6b, 0x1, 0x1);
        gbc.writeMem(0x9ad, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x3a88, gbc.sp());
        EXPECT(0x9af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00A6
        gbc.setState(0xd0b4, 0xf7f8, 0xe5b0, 0x95aa, 0x4bc6, 0x7f1c, 0x1, 0x1);
        gbc.writeMem(0xd0b4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xf7f8, gbc.sp());
        EXPECT(0xd0b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0b4));
        EXPECT(0x4d, gbc.readMem(0xd0b5));
        // CB 4D 00A7
        gbc.setState(0xdc8e, 0xba59, 0xbfb0, 0x39ad, 0x78e7, 0xce7f, 0x0, 0x1);
        gbc.writeMem(0xdc8e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xba59, gbc.sp());
        EXPECT(0xdc90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc8e));
        EXPECT(0x4d, gbc.readMem(0xdc8f));
        // CB 4D 00A8
        gbc.setState(0xbe2, 0x7097, 0xf530, 0xa005, 0x53f1, 0xdc90, 0x0, 0x1);
        gbc.writeMem(0xbe2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x7097, gbc.sp());
        EXPECT(0xbe4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00A9
        gbc.setState(0x3c55, 0xa70f, 0x8510, 0xa4b5, 0x463d, 0xb6e2, 0x1, 0x1);
        gbc.writeMem(0x3c55, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xa70f, gbc.sp());
        EXPECT(0x3c57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00AA
        gbc.setState(0x5355, 0xbd4c, 0xc6b0, 0xdb2a, 0xb501, 0x9bed, 0x1, 0x1);
        gbc.writeMem(0x5355, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xbd4c, gbc.sp());
        EXPECT(0x5357, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00AB
        gbc.setState(0x6b6e, 0x8348, 0xd3c0, 0x1c45, 0x7c6f, 0x25fc, 0x1, 0x1);
        gbc.writeMem(0x6b6e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x8348, gbc.sp());
        EXPECT(0x6b70, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00AC
        gbc.setState(0x79e8, 0x1056, 0xfb40, 0xd8f6, 0x2a8a, 0x29a6, 0x0, 0x1);
        gbc.writeMem(0x79e8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x1056, gbc.sp());
        EXPECT(0x79ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00AD
        gbc.setState(0x3c2e, 0xc0cd, 0x29c0, 0x400, 0x3bb0, 0xf100, 0x1, 0x0);
        gbc.writeMem(0x3c2e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xc0cd, gbc.sp());
        EXPECT(0x3c30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00AE
        gbc.setState(0x4cf5, 0x7095, 0xfab0, 0x44b0, 0xe217, 0x5fa4, 0x0, 0x0);
        gbc.writeMem(0x4cf5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x7095, gbc.sp());
        EXPECT(0x4cf7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00AF
        gbc.setState(0x79e7, 0x4534, 0x540, 0xc13, 0xe4a4, 0x5420, 0x1, 0x0);
        gbc.writeMem(0x79e7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x4534, gbc.sp());
        EXPECT(0x79e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00B0
        gbc.setState(0x6a81, 0xd90f, 0xfd70, 0x1d35, 0x5d75, 0xbe2e, 0x0, 0x0);
        gbc.writeMem(0x6a81, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xd90f, gbc.sp());
        EXPECT(0x6a83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00B1
        gbc.setState(0x3cf8, 0x1db4, 0x9730, 0xbc73, 0x28dc, 0x6979, 0x0, 0x1);
        gbc.writeMem(0x3cf8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x1db4, gbc.sp());
        EXPECT(0x3cfa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00B2
        gbc.setState(0x5d8, 0x5d30, 0x6d20, 0x76e1, 0xd03d, 0x73ed, 0x1, 0x0);
        gbc.writeMem(0x5d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x5d30, gbc.sp());
        EXPECT(0x5da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00B3
        gbc.setState(0xc6e3, 0x7f46, 0x14c0, 0x6dee, 0x95ba, 0x32e1, 0x0, 0x0);
        gbc.writeMem(0xc6e3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x7f46, gbc.sp());
        EXPECT(0xc6e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6e3));
        EXPECT(0x4d, gbc.readMem(0xc6e4));
        // CB 4D 00B4
        gbc.setState(0xe07b, 0xc71, 0xb380, 0x9103, 0xa42f, 0x2fda, 0x0, 0x0);
        gbc.writeMem(0xe07b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xc71, gbc.sp());
        EXPECT(0xe07d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe07b));
        EXPECT(0x4d, gbc.readMem(0xe07c));
        // CB 4D 00B5
        gbc.setState(0x75cc, 0x9525, 0xe0c0, 0x6752, 0x78de, 0xce1f, 0x1, 0x0);
        gbc.writeMem(0x75cc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x9525, gbc.sp());
        EXPECT(0x75ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00B6
        gbc.setState(0x2ffd, 0xc78, 0x2780, 0x3b77, 0x3869, 0xb399, 0x0, 0x0);
        gbc.writeMem(0x2ffd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xc78, gbc.sp());
        EXPECT(0x2fff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00B7
        gbc.setState(0x73cd, 0x6615, 0x8800, 0x2ad1, 0xe33a, 0xe9ef, 0x0, 0x1);
        gbc.writeMem(0x73cd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x6615, gbc.sp());
        EXPECT(0x73cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00B8
        gbc.setState(0x9557, 0xb769, 0xc9f0, 0x8764, 0x55b2, 0x305d, 0x0, 0x1);
        gbc.writeMem(0x9557, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xb769, gbc.sp());
        EXPECT(0x9559, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9557));
        EXPECT(0x4d, gbc.readMem(0x9558));
        // CB 4D 00B9
        gbc.setState(0x224, 0x97f3, 0x1100, 0xa874, 0x780c, 0x8175, 0x1, 0x0);
        gbc.writeMem(0x224, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x97f3, gbc.sp());
        EXPECT(0x226, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00BA
        gbc.setState(0x2d40, 0x7446, 0xf790, 0x4726, 0x8381, 0x6559, 0x1, 0x0);
        gbc.writeMem(0x2d40, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x7446, gbc.sp());
        EXPECT(0x2d42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00BB
        gbc.setState(0x49, 0x4a83, 0xbb40, 0xec42, 0x8f7, 0x24a5, 0x1, 0x0);
        gbc.writeMem(0x49, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x4a83, gbc.sp());
        EXPECT(0x4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00BC
        gbc.setState(0xacc9, 0x9ae2, 0x9cc0, 0x423f, 0xc1af, 0x7386, 0x1, 0x0);
        gbc.writeMem(0xacc9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x9ae2, gbc.sp());
        EXPECT(0xaccb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacc9));
        EXPECT(0x4d, gbc.readMem(0xacca));
        // CB 4D 00BD
        gbc.setState(0xcefd, 0x5227, 0xd1e0, 0x4826, 0x8d6b, 0xd2d, 0x0, 0x1);
        gbc.writeMem(0xcefd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x5227, gbc.sp());
        EXPECT(0xceff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcefd));
        EXPECT(0x4d, gbc.readMem(0xcefe));
        // CB 4D 00BE
        gbc.setState(0xc05b, 0x8981, 0x56f0, 0xa444, 0xa015, 0x1860, 0x0, 0x0);
        gbc.writeMem(0xc05b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x8981, gbc.sp());
        EXPECT(0xc05d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc05b));
        EXPECT(0x4d, gbc.readMem(0xc05c));
        // CB 4D 00BF
        gbc.setState(0xbf96, 0xb073, 0xfcb0, 0x44e0, 0x4d7b, 0x700c, 0x1, 0x0);
        gbc.writeMem(0xbf96, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xb073, gbc.sp());
        EXPECT(0xbf98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf96));
        EXPECT(0x4d, gbc.readMem(0xbf97));
        // CB 4D 00C0
        gbc.setState(0x122f, 0xe4a0, 0xa0, 0xa0cf, 0x35a5, 0xe598, 0x1, 0x0);
        gbc.writeMem(0x122f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe4a0, gbc.sp());
        EXPECT(0x1231, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00C2
        gbc.setState(0x7401, 0x7a7d, 0xfe60, 0x5430, 0x7a37, 0x31fb, 0x0, 0x1);
        gbc.writeMem(0x7401, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x7a7d, gbc.sp());
        EXPECT(0x7403, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00C3
        gbc.setState(0x3a59, 0x6c48, 0x4fd0, 0xe083, 0x93a1, 0x7401, 0x0, 0x1);
        gbc.writeMem(0x3a59, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x6c48, gbc.sp());
        EXPECT(0x3a5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00C4
        gbc.setState(0x25d0, 0xd055, 0x2a90, 0x7d2b, 0xe109, 0x3b64, 0x1, 0x0);
        gbc.writeMem(0x25d0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xd055, gbc.sp());
        EXPECT(0x25d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00C5
        gbc.setState(0x6bef, 0xc57a, 0x9eb0, 0xfe39, 0x26d5, 0xabdf, 0x1, 0x0);
        gbc.writeMem(0x6bef, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xc57a, gbc.sp());
        EXPECT(0x6bf1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00C6
        gbc.setState(0xea2f, 0x5417, 0xcc0, 0x5c6f, 0x4554, 0x5c6a, 0x1, 0x0);
        gbc.writeMem(0xea2f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x5417, gbc.sp());
        EXPECT(0xea31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea2f));
        EXPECT(0x4d, gbc.readMem(0xea30));
        // CB 4D 00C8
        gbc.setState(0xbc2c, 0xa71c, 0x4770, 0x8719, 0x53ae, 0xd6f9, 0x0, 0x0);
        gbc.writeMem(0xbc2c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xa71c, gbc.sp());
        EXPECT(0xbc2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc2c));
        EXPECT(0x4d, gbc.readMem(0xbc2d));
        // CB 4D 00C9
        gbc.setState(0x8c4c, 0xcf3, 0x1ab0, 0xb66a, 0x2ecb, 0x7d5a, 0x1, 0x0);
        gbc.writeMem(0x8c4c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xcf3, gbc.sp());
        EXPECT(0x8c4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c4c));
        EXPECT(0x4d, gbc.readMem(0x8c4d));
        // CB 4D 00CA
        gbc.setState(0x53ff, 0x7fd4, 0xb180, 0x766d, 0x2707, 0x2cb1, 0x0, 0x1);
        gbc.writeMem(0x53ff, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x7fd4, gbc.sp());
        EXPECT(0x5401, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00CB
        gbc.setState(0xd775, 0x7313, 0x6720, 0x213a, 0xc9e1, 0xed6, 0x1, 0x1);
        gbc.writeMem(0xd775, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x7313, gbc.sp());
        EXPECT(0xd777, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd775));
        EXPECT(0x4d, gbc.readMem(0xd776));
        // CB 4D 00CC
        gbc.setState(0x515f, 0x75c0, 0x2e60, 0xc4da, 0x1281, 0xc4b8, 0x0, 0x1);
        gbc.writeMem(0x515f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x75c0, gbc.sp());
        EXPECT(0x5161, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00CD
        gbc.setState(0xd84, 0xdc13, 0x1a40, 0xe325, 0x38c3, 0xbcbd, 0x0, 0x0);
        gbc.writeMem(0xd84, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xdc13, gbc.sp());
        EXPECT(0xd86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00CE
        gbc.setState(0xd27f, 0xe9db, 0x1460, 0xde5f, 0xdb94, 0x94f, 0x1, 0x1);
        gbc.writeMem(0xd27f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xe9db, gbc.sp());
        EXPECT(0xd281, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd27f));
        EXPECT(0x4d, gbc.readMem(0xd280));
        // CB 4D 00CF
        gbc.setState(0x4e96, 0x5d1f, 0xcde0, 0x3310, 0x9b5d, 0x3a19, 0x1, 0x1);
        gbc.writeMem(0x4e96, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x5d1f, gbc.sp());
        EXPECT(0x4e98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00D0
        gbc.setState(0xaa7e, 0xf37c, 0xa350, 0x145b, 0x713d, 0xbb3, 0x1, 0x0);
        gbc.writeMem(0xaa7e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xf37c, gbc.sp());
        EXPECT(0xaa80, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa7e));
        EXPECT(0x4d, gbc.readMem(0xaa7f));
        // CB 4D 00D1
        gbc.setState(0x20b0, 0xf1b4, 0xea70, 0x220a, 0x7ad2, 0x2edc, 0x1, 0x0);
        gbc.writeMem(0x20b0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xf1b4, gbc.sp());
        EXPECT(0x20b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00D2
        gbc.setState(0xb8dc, 0x6ef0, 0x3a00, 0x94a4, 0xd7f4, 0x4fa2, 0x1, 0x1);
        gbc.writeMem(0xb8dc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x6ef0, gbc.sp());
        EXPECT(0xb8de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8dc));
        EXPECT(0x4d, gbc.readMem(0xb8dd));
        // CB 4D 00D3
        gbc.setState(0xaee, 0xb660, 0x55b0, 0x85e1, 0x83b8, 0xd461, 0x1, 0x1);
        gbc.writeMem(0xaee, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb660, gbc.sp());
        EXPECT(0xaf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00D6
        gbc.setState(0xdf5c, 0x3126, 0xb300, 0x8b02, 0x58a0, 0xa3c8, 0x1, 0x0);
        gbc.writeMem(0xdf5c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x3126, gbc.sp());
        EXPECT(0xdf5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf5c));
        EXPECT(0x4d, gbc.readMem(0xdf5d));
        // CB 4D 00D7
        gbc.setState(0x272f, 0x933e, 0x9b00, 0x850f, 0xdd15, 0x479e, 0x1, 0x0);
        gbc.writeMem(0x272f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x933e, gbc.sp());
        EXPECT(0x2731, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00D8
        gbc.setState(0x1031, 0xc075, 0x4100, 0x5950, 0xbb76, 0x8a6, 0x1, 0x0);
        gbc.writeMem(0x1031, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xc075, gbc.sp());
        EXPECT(0x1033, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00D9
        gbc.setState(0x6976, 0xf164, 0xd6a0, 0x7ea4, 0x2077, 0x3fa, 0x0, 0x1);
        gbc.writeMem(0x6976, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xf164, gbc.sp());
        EXPECT(0x6978, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00DA
        gbc.setState(0xbdae, 0xa952, 0x7b40, 0xe8e, 0x6bc5, 0xb92e, 0x1, 0x0);
        gbc.writeMem(0xbdae, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xa952, gbc.sp());
        EXPECT(0xbdb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdae));
        EXPECT(0x4d, gbc.readMem(0xbdaf));
        // CB 4D 00DB
        gbc.setState(0x16c1, 0x80d0, 0x1c0, 0x29b4, 0x2448, 0xa374, 0x1, 0x1);
        gbc.writeMem(0x16c1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x80d0, gbc.sp());
        EXPECT(0x16c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00DC
        gbc.setState(0xd0bf, 0x785f, 0xe380, 0x4d77, 0x59b8, 0x7306, 0x1, 0x0);
        gbc.writeMem(0xd0bf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x785f, gbc.sp());
        EXPECT(0xd0c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0bf));
        EXPECT(0x4d, gbc.readMem(0xd0c0));
        // CB 4D 00DD
        gbc.setState(0x5067, 0xaaaa, 0x6b40, 0xcc46, 0xae11, 0x2eab, 0x1, 0x1);
        gbc.writeMem(0x5067, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xaaaa, gbc.sp());
        EXPECT(0x5069, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00DE
        gbc.setState(0x10bb, 0x8949, 0x33c0, 0xcedc, 0xdc6d, 0x118d, 0x1, 0x1);
        gbc.writeMem(0x10bb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x8949, gbc.sp());
        EXPECT(0x10bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00DF
        gbc.setState(0x976b, 0x677a, 0x970, 0x7c11, 0x2f03, 0xe09, 0x0, 0x0);
        gbc.writeMem(0x976b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x677a, gbc.sp());
        EXPECT(0x976d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x976b));
        EXPECT(0x4d, gbc.readMem(0x976c));
        // CB 4D 00E0
        gbc.setState(0x45ca, 0xe99, 0xb190, 0x6982, 0xd7f3, 0x6cbb, 0x1, 0x1);
        gbc.writeMem(0x45ca, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xe99, gbc.sp());
        EXPECT(0x45cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00E1
        gbc.setState(0x1950, 0x5ef, 0xe350, 0x3028, 0x2732, 0xc5bd, 0x0, 0x0);
        gbc.writeMem(0x1950, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x5ef, gbc.sp());
        EXPECT(0x1952, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00E2
        gbc.setState(0x11de, 0x9c8, 0x8bd0, 0x587f, 0x3ae3, 0x7717, 0x1, 0x0);
        gbc.writeMem(0x11de, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x9c8, gbc.sp());
        EXPECT(0x11e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00E3
        gbc.setState(0x7815, 0x64d6, 0x8260, 0x55f5, 0xf222, 0xe405, 0x0, 0x0);
        gbc.writeMem(0x7815, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x64d6, gbc.sp());
        EXPECT(0x7817, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00E4
        gbc.setState(0x57b4, 0xe797, 0xcfc0, 0x6e72, 0xbf8, 0x47d5, 0x1, 0x0);
        gbc.writeMem(0x57b4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xe797, gbc.sp());
        EXPECT(0x57b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00E5
        gbc.setState(0x28d1, 0x85aa, 0xfe30, 0x43ca, 0x91d, 0x65b1, 0x1, 0x0);
        gbc.writeMem(0x28d1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x85aa, gbc.sp());
        EXPECT(0x28d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00E6
        gbc.setState(0x2fa3, 0x1bde, 0xf1d0, 0xed8, 0x6512, 0xb3a5, 0x0, 0x1);
        gbc.writeMem(0x2fa3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x1bde, gbc.sp());
        EXPECT(0x2fa5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00E7
        gbc.setState(0x98e9, 0x8fa6, 0x6fc0, 0xc228, 0x9943, 0xf68d, 0x0, 0x1);
        gbc.writeMem(0x98e9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x8fa6, gbc.sp());
        EXPECT(0x98eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98e9));
        EXPECT(0x4d, gbc.readMem(0x98ea));
        // CB 4D 00E8
        gbc.setState(0x6826, 0x2235, 0xa810, 0xad0, 0x9443, 0x75b9, 0x1, 0x0);
        gbc.writeMem(0x6826, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x2235, gbc.sp());
        EXPECT(0x6828, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00E9
        gbc.setState(0xda07, 0x7017, 0x5e30, 0x536b, 0x7bdb, 0x6ecb, 0x0, 0x1);
        gbc.writeMem(0xda07, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x7017, gbc.sp());
        EXPECT(0xda09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda07));
        EXPECT(0x4d, gbc.readMem(0xda08));
        // CB 4D 00EA
        gbc.setState(0x5b40, 0x4c45, 0xe360, 0x5378, 0xec0d, 0x50ac, 0x1, 0x1);
        gbc.writeMem(0x5b40, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x4c45, gbc.sp());
        EXPECT(0x5b42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00EB
        gbc.setState(0xc982, 0x4b45, 0x6f00, 0xea59, 0x8eb, 0x7e89, 0x1, 0x1);
        gbc.writeMem(0xc982, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x4b45, gbc.sp());
        EXPECT(0xc984, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc982));
        EXPECT(0x4d, gbc.readMem(0xc983));
        // CB 4D 00EC
        gbc.setState(0x8e0a, 0x8274, 0xbb0, 0xa390, 0x73dc, 0x24d7, 0x1, 0x1);
        gbc.writeMem(0x8e0a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x8274, gbc.sp());
        EXPECT(0x8e0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e0a));
        EXPECT(0x4d, gbc.readMem(0x8e0b));
        // CB 4D 00ED
        gbc.setState(0xea6a, 0xa163, 0xb090, 0x5396, 0x72ef, 0x6b3f, 0x1, 0x1);
        gbc.writeMem(0xea6a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa163, gbc.sp());
        EXPECT(0xea6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea6a));
        EXPECT(0x4d, gbc.readMem(0xea6b));
        // CB 4D 00EE
        gbc.setState(0x881c, 0x1966, 0xd540, 0xebe9, 0x9738, 0x5296, 0x1, 0x1);
        gbc.writeMem(0x881c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x1966, gbc.sp());
        EXPECT(0x881e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x881c));
        EXPECT(0x4d, gbc.readMem(0x881d));
        // CB 4D 00EF
        gbc.setState(0xda93, 0xc97f, 0xdd80, 0x9e0f, 0x7d36, 0xd80a, 0x1, 0x1);
        gbc.writeMem(0xda93, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xc97f, gbc.sp());
        EXPECT(0xda95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda93));
        EXPECT(0x4d, gbc.readMem(0xda94));
        // CB 4D 00F0
        gbc.setState(0xd692, 0x3045, 0xf290, 0x802e, 0xddbb, 0xd, 0x0, 0x0);
        gbc.writeMem(0xd692, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x3045, gbc.sp());
        EXPECT(0xd694, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd692));
        EXPECT(0x4d, gbc.readMem(0xd693));
        // CB 4D 00F1
        gbc.setState(0x23fd, 0x4fbf, 0x2740, 0xbeeb, 0x1e96, 0x5d41, 0x1, 0x0);
        gbc.writeMem(0x23fd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x4fbf, gbc.sp());
        EXPECT(0x23ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00F2
        gbc.setState(0xd235, 0xa09, 0xfe90, 0xa73c, 0xdf4f, 0x64a2, 0x1, 0x1);
        gbc.writeMem(0xd235, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xa09, gbc.sp());
        EXPECT(0xd237, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd235));
        EXPECT(0x4d, gbc.readMem(0xd236));
        // CB 4D 00F3
        gbc.setState(0xe6c, 0x4491, 0x8710, 0x304d, 0x14d8, 0x4d65, 0x1, 0x1);
        gbc.writeMem(0xe6c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x4491, gbc.sp());
        EXPECT(0xe6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00F4
        gbc.setState(0x33ed, 0xa7da, 0x6b20, 0x83ae, 0x17c6, 0x82ee, 0x0, 0x1);
        gbc.writeMem(0x33ed, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xa7da, gbc.sp());
        EXPECT(0x33ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 00F6
        gbc.setState(0x9185, 0x9d62, 0x6060, 0x351a, 0xbbdf, 0xf8a3, 0x1, 0x1);
        gbc.writeMem(0x9185, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x9d62, gbc.sp());
        EXPECT(0x9187, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9185));
        EXPECT(0x4d, gbc.readMem(0x9186));
        // CB 4D 00F7
        gbc.setState(0xde2f, 0x4e49, 0x3620, 0x5cd2, 0xc7cc, 0xe11e, 0x1, 0x1);
        gbc.writeMem(0xde2f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x4e49, gbc.sp());
        EXPECT(0xde31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde2f));
        EXPECT(0x4d, gbc.readMem(0xde30));
        // CB 4D 00F8
        gbc.setState(0x9d5b, 0x9c8d, 0x6b70, 0x10a5, 0x62c9, 0x59d7, 0x0, 0x1);
        gbc.writeMem(0x9d5b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x9c8d, gbc.sp());
        EXPECT(0x9d5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d5b));
        EXPECT(0x4d, gbc.readMem(0x9d5c));
        // CB 4D 00F9
        gbc.setState(0x2c4e, 0xc444, 0xfc50, 0x1977, 0xab2, 0x1a3c, 0x0, 0x0);
        gbc.writeMem(0x2c4e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xc444, gbc.sp());
        EXPECT(0x2c50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00FA
        gbc.setState(0x1fb2, 0x2da7, 0x5550, 0x3db8, 0x92f6, 0x30ec, 0x0, 0x0);
        gbc.writeMem(0x1fb2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x2da7, gbc.sp());
        EXPECT(0x1fb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00FB
        gbc.setState(0x8b64, 0x8825, 0x9350, 0x8f83, 0x42ab, 0x391, 0x1, 0x0);
        gbc.writeMem(0x8b64, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x8825, gbc.sp());
        EXPECT(0x8b66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b64));
        EXPECT(0x4d, gbc.readMem(0x8b65));
        // CB 4D 00FC
        gbc.setState(0xe620, 0xe197, 0xcea0, 0x3aea, 0xa17f, 0x2281, 0x0, 0x1);
        gbc.writeMem(0xe620, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xe197, gbc.sp());
        EXPECT(0xe622, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe620));
        EXPECT(0x4d, gbc.readMem(0xe621));
        // CB 4D 00FD
        gbc.setState(0x11c1, 0x3a9e, 0x7870, 0x92da, 0xc666, 0x19e7, 0x0, 0x0);
        gbc.writeMem(0x11c1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x3a9e, gbc.sp());
        EXPECT(0x11c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 00FE
        gbc.setState(0x815d, 0x1885, 0x690, 0x19eb, 0xbb4e, 0x473a, 0x1, 0x1);
        gbc.writeMem(0x815d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x1885, gbc.sp());
        EXPECT(0x815f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x815d));
        EXPECT(0x4d, gbc.readMem(0x815e));
        // CB 4D 00FF
        gbc.setState(0xdcea, 0xa213, 0x34f0, 0x5c15, 0x9649, 0xf0af, 0x1, 0x0);
        gbc.writeMem(0xdcea, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xa213, gbc.sp());
        EXPECT(0xdcec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcea));
        EXPECT(0x4d, gbc.readMem(0xdceb));
        // CB 4D 0100
        gbc.setState(0xbec3, 0x549f, 0x1eb0, 0x4451, 0x7971, 0x9386, 0x1, 0x1);
        gbc.writeMem(0xbec3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x549f, gbc.sp());
        EXPECT(0xbec5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbec3));
        EXPECT(0x4d, gbc.readMem(0xbec4));
        // CB 4D 0101
        gbc.setState(0x33a7, 0x64d6, 0x61d0, 0xef43, 0x8ee0, 0x53bb, 0x1, 0x0);
        gbc.writeMem(0x33a7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x64d6, gbc.sp());
        EXPECT(0x33a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0102
        gbc.setState(0x283f, 0x2b66, 0xb5e0, 0x45be, 0x5d65, 0xc1b5, 0x1, 0x1);
        gbc.writeMem(0x283f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x2b66, gbc.sp());
        EXPECT(0x2841, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0103
        gbc.setState(0x8b59, 0x4e87, 0x9490, 0xcdff, 0x17ef, 0xb93, 0x1, 0x1);
        gbc.writeMem(0x8b59, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x4e87, gbc.sp());
        EXPECT(0x8b5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b59));
        EXPECT(0x4d, gbc.readMem(0x8b5a));
        // CB 4D 0104
        gbc.setState(0xc3a5, 0xfd81, 0x2800, 0x98e1, 0x11e7, 0x890c, 0x1, 0x1);
        gbc.writeMem(0xc3a5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xfd81, gbc.sp());
        EXPECT(0xc3a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3a5));
        EXPECT(0x4d, gbc.readMem(0xc3a6));
        // CB 4D 0105
        gbc.setState(0xb0d5, 0xb788, 0x9390, 0x251c, 0x4176, 0x3597, 0x0, 0x1);
        gbc.writeMem(0xb0d5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xb788, gbc.sp());
        EXPECT(0xb0d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0d5));
        EXPECT(0x4d, gbc.readMem(0xb0d6));
        // CB 4D 0106
        gbc.setState(0xd424, 0xf29b, 0x59f0, 0xbf80, 0x7b6f, 0x293c, 0x0, 0x1);
        gbc.writeMem(0xd424, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xf29b, gbc.sp());
        EXPECT(0xd426, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd424));
        EXPECT(0x4d, gbc.readMem(0xd425));
        // CB 4D 0107
        gbc.setState(0x5fdb, 0x994d, 0x3460, 0x2319, 0x6ea4, 0x5ebc, 0x1, 0x1);
        gbc.writeMem(0x5fdb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x994d, gbc.sp());
        EXPECT(0x5fdd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0108
        gbc.setState(0x9393, 0x70df, 0x8380, 0x8b96, 0x116, 0x16a, 0x0, 0x0);
        gbc.writeMem(0x9393, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x70df, gbc.sp());
        EXPECT(0x9395, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9393));
        EXPECT(0x4d, gbc.readMem(0x9394));
        // CB 4D 0109
        gbc.setState(0x59e4, 0xf2c5, 0x12c0, 0xb380, 0xc573, 0x98e2, 0x0, 0x0);
        gbc.writeMem(0x59e4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xf2c5, gbc.sp());
        EXPECT(0x59e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 010A
        gbc.setState(0xead8, 0x50d5, 0x84c0, 0xffe1, 0x34d8, 0x29a5, 0x0, 0x0);
        gbc.writeMem(0xead8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x50d5, gbc.sp());
        EXPECT(0xeada, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xead8));
        EXPECT(0x4d, gbc.readMem(0xead9));
        // CB 4D 010B
        gbc.setState(0xcd35, 0xf652, 0x640, 0x985f, 0xc1b0, 0xc510, 0x1, 0x0);
        gbc.writeMem(0xcd35, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xf652, gbc.sp());
        EXPECT(0xcd37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd35));
        EXPECT(0x4d, gbc.readMem(0xcd36));
        // CB 4D 010C
        gbc.setState(0x1e, 0xe4cc, 0xecd0, 0xcf45, 0x14d7, 0xabc1, 0x0, 0x1);
        gbc.writeMem(0x1e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xe4cc, gbc.sp());
        EXPECT(0x20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 010D
        gbc.setState(0x1c1b, 0xee5c, 0xbd40, 0x7186, 0x2d68, 0xa4e3, 0x0, 0x1);
        gbc.writeMem(0x1c1b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xee5c, gbc.sp());
        EXPECT(0x1c1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 010E
        gbc.setState(0x328a, 0x4b08, 0x9800, 0x33ac, 0x81ad, 0xa7dc, 0x0, 0x0);
        gbc.writeMem(0x328a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x4b08, gbc.sp());
        EXPECT(0x328c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 010F
        gbc.setState(0x93be, 0xf4c, 0x5740, 0x39d9, 0xae1d, 0x7c56, 0x0, 0x0);
        gbc.writeMem(0x93be, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xf4c, gbc.sp());
        EXPECT(0x93c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93be));
        EXPECT(0x4d, gbc.readMem(0x93bf));
        // CB 4D 0110
        gbc.setState(0xb36b, 0xa903, 0x7f40, 0x6a37, 0x421f, 0xf5c, 0x1, 0x0);
        gbc.writeMem(0xb36b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xa903, gbc.sp());
        EXPECT(0xb36d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb36b));
        EXPECT(0x4d, gbc.readMem(0xb36c));
        // CB 4D 0111
        gbc.setState(0xc08f, 0x2c8b, 0x9d90, 0xf88f, 0x9f47, 0x6678, 0x0, 0x0);
        gbc.writeMem(0xc08f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x2c8b, gbc.sp());
        EXPECT(0xc091, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc08f));
        EXPECT(0x4d, gbc.readMem(0xc090));
        // CB 4D 0112
        gbc.setState(0x4e1d, 0x1473, 0x4ed0, 0x9f8c, 0xab39, 0x7122, 0x1, 0x0);
        gbc.writeMem(0x4e1d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x1473, gbc.sp());
        EXPECT(0x4e1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0113
        gbc.setState(0xee1b, 0x8b55, 0x8ec0, 0x8af2, 0x216b, 0x522d, 0x1, 0x1);
        gbc.writeMem(0xee1b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x8b55, gbc.sp());
        EXPECT(0xee1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee1b));
        EXPECT(0x4d, gbc.readMem(0xee1c));
        // CB 4D 0114
        gbc.setState(0xaf23, 0x5549, 0x8140, 0xf9ba, 0x5d33, 0x1fe3, 0x0, 0x0);
        gbc.writeMem(0xaf23, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x5549, gbc.sp());
        EXPECT(0xaf25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf23));
        EXPECT(0x4d, gbc.readMem(0xaf24));
        // CB 4D 0115
        gbc.setState(0xaa7c, 0x8380, 0x9fb0, 0x25ca, 0x17ae, 0x1003, 0x1, 0x1);
        gbc.writeMem(0xaa7c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x8380, gbc.sp());
        EXPECT(0xaa7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa7c));
        EXPECT(0x4d, gbc.readMem(0xaa7d));
        // CB 4D 0116
        gbc.setState(0x45e4, 0x2f7b, 0x50a0, 0x8355, 0xf4c, 0x5c5e, 0x0, 0x1);
        gbc.writeMem(0x45e4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x2f7b, gbc.sp());
        EXPECT(0x45e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0117
        gbc.setState(0x8b69, 0xd8e1, 0xcaf0, 0x6675, 0xbc3, 0xfef5, 0x0, 0x0);
        gbc.writeMem(0x8b69, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xd8e1, gbc.sp());
        EXPECT(0x8b6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b69));
        EXPECT(0x4d, gbc.readMem(0x8b6a));
        // CB 4D 0118
        gbc.setState(0x11bb, 0x8dc1, 0x3640, 0x8a9f, 0xee0e, 0x9722, 0x0, 0x0);
        gbc.writeMem(0x11bb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x8dc1, gbc.sp());
        EXPECT(0x11bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0119
        gbc.setState(0xb620, 0x9a46, 0xd1a0, 0x1987, 0xac67, 0xe295, 0x0, 0x1);
        gbc.writeMem(0xb620, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x9a46, gbc.sp());
        EXPECT(0xb622, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb620));
        EXPECT(0x4d, gbc.readMem(0xb621));
        // CB 4D 011A
        gbc.setState(0x3207, 0xdc67, 0xefe0, 0xc777, 0x2c18, 0x72d5, 0x1, 0x0);
        gbc.writeMem(0x3207, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xdc67, gbc.sp());
        EXPECT(0x3209, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 011B
        gbc.setState(0xb043, 0xf4cb, 0xae40, 0x32cd, 0x2931, 0x279b, 0x1, 0x0);
        gbc.writeMem(0xb043, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xf4cb, gbc.sp());
        EXPECT(0xb045, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb043));
        EXPECT(0x4d, gbc.readMem(0xb044));
        // CB 4D 011C
        gbc.setState(0xeca9, 0x6200, 0x1f0, 0x7a13, 0xe522, 0x816d, 0x1, 0x0);
        gbc.writeMem(0xeca9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x6200, gbc.sp());
        EXPECT(0xecab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeca9));
        EXPECT(0x4d, gbc.readMem(0xecaa));
        // CB 4D 011D
        gbc.setState(0x9162, 0xefb0, 0xfb10, 0x172e, 0x1506, 0x9aa5, 0x1, 0x1);
        gbc.writeMem(0x9162, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xefb0, gbc.sp());
        EXPECT(0x9164, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9162));
        EXPECT(0x4d, gbc.readMem(0x9163));
        // CB 4D 011E
        gbc.setState(0x851d, 0x84e7, 0x30, 0x7722, 0x519d, 0x8d9e, 0x0, 0x1);
        gbc.writeMem(0x851d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x84e7, gbc.sp());
        EXPECT(0x851f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x851d));
        EXPECT(0x4d, gbc.readMem(0x851e));
        // CB 4D 011F
        gbc.setState(0xce6f, 0x6afb, 0x62e0, 0xac06, 0x6259, 0xc2f0, 0x1, 0x1);
        gbc.writeMem(0xce6f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x6afb, gbc.sp());
        EXPECT(0xce71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce6f));
        EXPECT(0x4d, gbc.readMem(0xce70));
        // CB 4D 0120
        gbc.setState(0xa760, 0xf782, 0x5060, 0xad47, 0x8e63, 0x6210, 0x0, 0x1);
        gbc.writeMem(0xa760, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xf782, gbc.sp());
        EXPECT(0xa762, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa760));
        EXPECT(0x4d, gbc.readMem(0xa761));
        // CB 4D 0121
        gbc.setState(0xde4, 0xbc38, 0xcf60, 0x43, 0xa113, 0xfd76, 0x1, 0x0);
        gbc.writeMem(0xde4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xbc38, gbc.sp());
        EXPECT(0xde6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0122
        gbc.setState(0xb26e, 0x969e, 0x1890, 0x7b8b, 0xe534, 0x946f, 0x0, 0x0);
        gbc.writeMem(0xb26e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x969e, gbc.sp());
        EXPECT(0xb270, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb26e));
        EXPECT(0x4d, gbc.readMem(0xb26f));
        // CB 4D 0123
        gbc.setState(0x80c2, 0x8f, 0xf120, 0x8cfc, 0xa0c5, 0xb192, 0x0, 0x0);
        gbc.writeMem(0x80c2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x8f, gbc.sp());
        EXPECT(0x80c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80c2));
        EXPECT(0x4d, gbc.readMem(0x80c3));
        // CB 4D 0124
        gbc.setState(0x3c80, 0x7828, 0xce60, 0xf659, 0x41ec, 0x8c2d, 0x1, 0x1);
        gbc.writeMem(0x3c80, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x7828, gbc.sp());
        EXPECT(0x3c82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0125
        gbc.setState(0xe14e, 0x4066, 0xd1e0, 0x77e, 0x50ba, 0xb7d1, 0x0, 0x0);
        gbc.writeMem(0xe14e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x4066, gbc.sp());
        EXPECT(0xe150, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe14e));
        EXPECT(0x4d, gbc.readMem(0xe14f));
        // CB 4D 0126
        gbc.setState(0x7354, 0x9d50, 0x40c0, 0xd932, 0x867b, 0xd22c, 0x1, 0x1);
        gbc.writeMem(0x7354, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x9d50, gbc.sp());
        EXPECT(0x7356, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0127
        gbc.setState(0xec8e, 0x5997, 0x8ee0, 0x72b2, 0xbf97, 0xfce4, 0x0, 0x0);
        gbc.writeMem(0xec8e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x5997, gbc.sp());
        EXPECT(0xec90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec8e));
        EXPECT(0x4d, gbc.readMem(0xec8f));
        // CB 4D 0129
        gbc.setState(0x47e9, 0x12c9, 0x2490, 0x1cd2, 0x9ff9, 0x8ef4, 0x1, 0x0);
        gbc.writeMem(0x47e9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x12c9, gbc.sp());
        EXPECT(0x47eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 012A
        gbc.setState(0x4e49, 0xc287, 0x7e0, 0x8bcf, 0x6c0a, 0x9606, 0x0, 0x1);
        gbc.writeMem(0x4e49, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xc287, gbc.sp());
        EXPECT(0x4e4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 012B
        gbc.setState(0x5342, 0xae63, 0xbf80, 0x79f6, 0xf567, 0xc228, 0x1, 0x1);
        gbc.writeMem(0x5342, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xae63, gbc.sp());
        EXPECT(0x5344, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 012C
        gbc.setState(0x5289, 0x9de0, 0x2ea0, 0x7042, 0x4a6b, 0xff18, 0x1, 0x0);
        gbc.writeMem(0x5289, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x9de0, gbc.sp());
        EXPECT(0x528b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 012D
        gbc.setState(0x8420, 0xfb22, 0x5c50, 0x5c01, 0xe501, 0x3615, 0x1, 0x1);
        gbc.writeMem(0x8420, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xfb22, gbc.sp());
        EXPECT(0x8422, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8420));
        EXPECT(0x4d, gbc.readMem(0x8421));
        // CB 4D 012E
        gbc.setState(0xa190, 0xab22, 0xd600, 0x51ad, 0x14ce, 0x7aee, 0x0, 0x0);
        gbc.writeMem(0xa190, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xab22, gbc.sp());
        EXPECT(0xa192, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa190));
        EXPECT(0x4d, gbc.readMem(0xa191));
        // CB 4D 012F
        gbc.setState(0xe1da, 0xc56e, 0xdfe0, 0xee67, 0x214c, 0xaaae, 0x1, 0x0);
        gbc.writeMem(0xe1da, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xc56e, gbc.sp());
        EXPECT(0xe1dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1da));
        EXPECT(0x4d, gbc.readMem(0xe1db));
        // CB 4D 0130
        gbc.setState(0x7864, 0x2a15, 0x8a10, 0x8e5e, 0xcbb4, 0xd408, 0x1, 0x0);
        gbc.writeMem(0x7864, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x2a15, gbc.sp());
        EXPECT(0x7866, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0132
        gbc.setState(0x8621, 0xbfe5, 0xbb10, 0x4a09, 0x57a6, 0xec93, 0x0, 0x0);
        gbc.writeMem(0x8621, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xbfe5, gbc.sp());
        EXPECT(0x8623, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8621));
        EXPECT(0x4d, gbc.readMem(0x8622));
        // CB 4D 0133
        gbc.setState(0x640e, 0xc64f, 0xd4a0, 0x3752, 0x4d36, 0x7f3c, 0x0, 0x0);
        gbc.writeMem(0x640e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xc64f, gbc.sp());
        EXPECT(0x6410, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0134
        gbc.setState(0x41c5, 0x187f, 0xb940, 0x9c08, 0x9b91, 0xc580, 0x1, 0x1);
        gbc.writeMem(0x41c5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x187f, gbc.sp());
        EXPECT(0x41c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0135
        gbc.setState(0xa5e1, 0x3a8a, 0xe6f0, 0xfb26, 0xd03d, 0x8752, 0x1, 0x1);
        gbc.writeMem(0xa5e1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x3a8a, gbc.sp());
        EXPECT(0xa5e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa5e1));
        EXPECT(0x4d, gbc.readMem(0xa5e2));
        // CB 4D 0136
        gbc.setState(0x90ab, 0xbb47, 0x6360, 0x2b22, 0xdc99, 0x224e, 0x1, 0x0);
        gbc.writeMem(0x90ab, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xbb47, gbc.sp());
        EXPECT(0x90ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90ab));
        EXPECT(0x4d, gbc.readMem(0x90ac));
        // CB 4D 0137
        gbc.setState(0x13b3, 0x3432, 0x6250, 0x44c7, 0xd596, 0xdc93, 0x1, 0x1);
        gbc.writeMem(0x13b3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x3432, gbc.sp());
        EXPECT(0x13b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0138
        gbc.setState(0x7a20, 0x1518, 0x3950, 0x82e, 0xe476, 0x5193, 0x0, 0x0);
        gbc.writeMem(0x7a20, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x1518, gbc.sp());
        EXPECT(0x7a22, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 013A
        gbc.setState(0x2a06, 0x2462, 0xa0d0, 0xc4ec, 0x4558, 0xd327, 0x0, 0x0);
        gbc.writeMem(0x2a06, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x2462, gbc.sp());
        EXPECT(0x2a08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 013B
        gbc.setState(0x2c9a, 0xc0b3, 0x22f0, 0x41a9, 0x3967, 0xb688, 0x1, 0x1);
        gbc.writeMem(0x2c9a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xc0b3, gbc.sp());
        EXPECT(0x2c9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 013E
        gbc.setState(0x814f, 0x36da, 0xc150, 0x3788, 0xf65, 0x9943, 0x0, 0x1);
        gbc.writeMem(0x814f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x36da, gbc.sp());
        EXPECT(0x8151, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x814f));
        EXPECT(0x4d, gbc.readMem(0x8150));
        // CB 4D 013F
        gbc.setState(0x3e40, 0xc677, 0x4470, 0x82a0, 0xeecd, 0x3656, 0x1, 0x1);
        gbc.writeMem(0x3e40, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xc677, gbc.sp());
        EXPECT(0x3e42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0140
        gbc.setState(0xc82, 0xf759, 0xb380, 0x382f, 0x195c, 0xaa93, 0x0, 0x0);
        gbc.writeMem(0xc82, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xf759, gbc.sp());
        EXPECT(0xc84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0141
        gbc.setState(0xb5a6, 0x5675, 0x2dc0, 0x85a8, 0x4907, 0x78b6, 0x1, 0x0);
        gbc.writeMem(0xb5a6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x5675, gbc.sp());
        EXPECT(0xb5a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5a6));
        EXPECT(0x4d, gbc.readMem(0xb5a7));
        // CB 4D 0142
        gbc.setState(0x6a6d, 0xccd4, 0xda80, 0x4e09, 0xc56, 0xc42a, 0x1, 0x1);
        gbc.writeMem(0x6a6d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xccd4, gbc.sp());
        EXPECT(0x6a6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0143
        gbc.setState(0x3264, 0xeb00, 0xb640, 0x741, 0xd116, 0x7468, 0x1, 0x1);
        gbc.writeMem(0x3264, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xeb00, gbc.sp());
        EXPECT(0x3266, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0144
        gbc.setState(0x3025, 0x2373, 0x3740, 0x2126, 0x58ad, 0x540b, 0x1, 0x0);
        gbc.writeMem(0x3025, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x2373, gbc.sp());
        EXPECT(0x3027, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0146
        gbc.setState(0x9447, 0x75ed, 0xfd90, 0x1860, 0x3108, 0x56c3, 0x1, 0x1);
        gbc.writeMem(0x9447, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x75ed, gbc.sp());
        EXPECT(0x9449, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9447));
        EXPECT(0x4d, gbc.readMem(0x9448));
        // CB 4D 0147
        gbc.setState(0xa2d7, 0x700b, 0x60b0, 0x13a3, 0x9591, 0x6d02, 0x1, 0x0);
        gbc.writeMem(0xa2d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x700b, gbc.sp());
        EXPECT(0xa2d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2d7));
        EXPECT(0x4d, gbc.readMem(0xa2d8));
        // CB 4D 0148
        gbc.setState(0x6ac9, 0x3954, 0x4c60, 0xe1a1, 0x7a03, 0xe2eb, 0x0, 0x0);
        gbc.writeMem(0x6ac9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x3954, gbc.sp());
        EXPECT(0x6acb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0149
        gbc.setState(0x45ff, 0x7a20, 0x76e0, 0x9423, 0xaba0, 0xb2e4, 0x0, 0x0);
        gbc.writeMem(0x45ff, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x7a20, gbc.sp());
        EXPECT(0x4601, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 014A
        gbc.setState(0x2d48, 0xe7cb, 0xcc90, 0xf7db, 0xfdd1, 0x92d8, 0x0, 0x1);
        gbc.writeMem(0x2d48, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xe7cb, gbc.sp());
        EXPECT(0x2d4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 014D
        gbc.setState(0x8b78, 0x13a2, 0x9520, 0xc7d8, 0x7b20, 0x707d, 0x1, 0x1);
        gbc.writeMem(0x8b78, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x13a2, gbc.sp());
        EXPECT(0x8b7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b78));
        EXPECT(0x4d, gbc.readMem(0x8b79));
        // CB 4D 014E
        gbc.setState(0xbb48, 0xdc49, 0x6800, 0x14bf, 0x93b, 0xefcf, 0x1, 0x0);
        gbc.writeMem(0xbb48, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xdc49, gbc.sp());
        EXPECT(0xbb4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb48));
        EXPECT(0x4d, gbc.readMem(0xbb49));
        // CB 4D 0150
        gbc.setState(0xe69, 0x104f, 0x9cd0, 0x208a, 0xea5f, 0xb4cf, 0x0, 0x0);
        gbc.writeMem(0xe69, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x104f, gbc.sp());
        EXPECT(0xe6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0151
        gbc.setState(0x97ea, 0xdc0e, 0xd0a0, 0xcb65, 0x572c, 0xf116, 0x1, 0x1);
        gbc.writeMem(0x97ea, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xdc0e, gbc.sp());
        EXPECT(0x97ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97ea));
        EXPECT(0x4d, gbc.readMem(0x97eb));
        // CB 4D 0152
        gbc.setState(0x8c3a, 0x1fa7, 0x47a0, 0x881b, 0x1f86, 0x175f, 0x0, 0x0);
        gbc.writeMem(0x8c3a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x1fa7, gbc.sp());
        EXPECT(0x8c3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c3a));
        EXPECT(0x4d, gbc.readMem(0x8c3b));
        // CB 4D 0153
        gbc.setState(0x23c1, 0x25bf, 0x3050, 0xe6de, 0xa6c7, 0xb335, 0x0, 0x0);
        gbc.writeMem(0x23c1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x25bf, gbc.sp());
        EXPECT(0x23c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0154
        gbc.setState(0x4001, 0xb102, 0xcc60, 0x6eda, 0xc99, 0x46a8, 0x1, 0x0);
        gbc.writeMem(0x4001, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xb102, gbc.sp());
        EXPECT(0x4003, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0155
        gbc.setState(0x3b0a, 0xb919, 0x92d0, 0xc0bb, 0x7260, 0xeea4, 0x1, 0x1);
        gbc.writeMem(0x3b0a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xb919, gbc.sp());
        EXPECT(0x3b0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0156
        gbc.setState(0xb08f, 0xe37c, 0x3920, 0x2392, 0x470b, 0xb0e, 0x1, 0x0);
        gbc.writeMem(0xb08f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xe37c, gbc.sp());
        EXPECT(0xb091, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb08f));
        EXPECT(0x4d, gbc.readMem(0xb090));
        // CB 4D 0157
        gbc.setState(0x8ece, 0xbdd6, 0x8350, 0x88a2, 0xc44f, 0x2544, 0x1, 0x1);
        gbc.writeMem(0x8ece, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xbdd6, gbc.sp());
        EXPECT(0x8ed0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ece));
        EXPECT(0x4d, gbc.readMem(0x8ecf));
        // CB 4D 0158
        gbc.setState(0x8e3e, 0x46, 0xa30, 0x5e83, 0x1cbb, 0x1f79, 0x1, 0x1);
        gbc.writeMem(0x8e3e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x46, gbc.sp());
        EXPECT(0x8e40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e3e));
        EXPECT(0x4d, gbc.readMem(0x8e3f));
        // CB 4D 0159
        gbc.setState(0x685e, 0xf920, 0x3240, 0xdd3e, 0x536b, 0xdfd4, 0x0, 0x0);
        gbc.writeMem(0x685e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xf920, gbc.sp());
        EXPECT(0x6860, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 015A
        gbc.setState(0x1d0b, 0xa27f, 0xc640, 0xa7db, 0xb5f2, 0xfcb7, 0x1, 0x1);
        gbc.writeMem(0x1d0b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xa27f, gbc.sp());
        EXPECT(0x1d0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 015B
        gbc.setState(0x5add, 0xfda3, 0xeba0, 0x74c4, 0x4186, 0x6c16, 0x0, 0x0);
        gbc.writeMem(0x5add, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xfda3, gbc.sp());
        EXPECT(0x5adf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 015C
        gbc.setState(0xac90, 0x85c4, 0x7350, 0x492d, 0xf018, 0x3e9a, 0x0, 0x0);
        gbc.writeMem(0xac90, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x85c4, gbc.sp());
        EXPECT(0xac92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac90));
        EXPECT(0x4d, gbc.readMem(0xac91));
        // CB 4D 015D
        gbc.setState(0xa5d6, 0xde02, 0x51a0, 0x9439, 0x2d96, 0xfd91, 0x0, 0x1);
        gbc.writeMem(0xa5d6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xde02, gbc.sp());
        EXPECT(0xa5d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa5d6));
        EXPECT(0x4d, gbc.readMem(0xa5d7));
        // CB 4D 015E
        gbc.setState(0x2d7a, 0xb695, 0x2380, 0xb3c8, 0x8a9f, 0x5f82, 0x0, 0x0);
        gbc.writeMem(0x2d7a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xb695, gbc.sp());
        EXPECT(0x2d7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 015F
        gbc.setState(0x7b8b, 0xfcc4, 0x5560, 0xfbdb, 0xe96c, 0x777d, 0x0, 0x1);
        gbc.writeMem(0x7b8b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xfcc4, gbc.sp());
        EXPECT(0x7b8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0160
        gbc.setState(0xc665, 0x74be, 0x5e0, 0x429d, 0xdfa6, 0x5cd3, 0x1, 0x0);
        gbc.writeMem(0xc665, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x74be, gbc.sp());
        EXPECT(0xc667, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc665));
        EXPECT(0x4d, gbc.readMem(0xc666));
        // CB 4D 0161
        gbc.setState(0x8884, 0x1a70, 0x1390, 0x3103, 0x9fa1, 0xa14f, 0x1, 0x0);
        gbc.writeMem(0x8884, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x1a70, gbc.sp());
        EXPECT(0x8886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8884));
        EXPECT(0x4d, gbc.readMem(0x8885));
        // CB 4D 0162
        gbc.setState(0xb337, 0xee2f, 0x28e0, 0xdd04, 0x8971, 0x47e8, 0x1, 0x0);
        gbc.writeMem(0xb337, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xee2f, gbc.sp());
        EXPECT(0xb339, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb337));
        EXPECT(0x4d, gbc.readMem(0xb338));
        // CB 4D 0163
        gbc.setState(0x386e, 0x58d, 0x3bf0, 0x997d, 0x1065, 0x5e40, 0x1, 0x0);
        gbc.writeMem(0x386e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x58d, gbc.sp());
        EXPECT(0x3870, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0164
        gbc.setState(0xe078, 0x5546, 0xdf70, 0x1334, 0x949d, 0x9896, 0x1, 0x0);
        gbc.writeMem(0xe078, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x5546, gbc.sp());
        EXPECT(0xe07a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe078));
        EXPECT(0x4d, gbc.readMem(0xe079));
        // CB 4D 0165
        gbc.setState(0xc9b, 0x362f, 0x2170, 0x71ad, 0x7cd4, 0xd2, 0x1, 0x1);
        gbc.writeMem(0xc9b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x362f, gbc.sp());
        EXPECT(0xc9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0166
        gbc.setState(0x922d, 0x8bd3, 0x3c90, 0x58f0, 0x87e2, 0xdc0d, 0x0, 0x0);
        gbc.writeMem(0x922d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x8bd3, gbc.sp());
        EXPECT(0x922f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x922d));
        EXPECT(0x4d, gbc.readMem(0x922e));
        // CB 4D 0167
        gbc.setState(0x9490, 0x4a8b, 0x55a0, 0x6dde, 0x71cd, 0xebf, 0x1, 0x1);
        gbc.writeMem(0x9490, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x4a8b, gbc.sp());
        EXPECT(0x9492, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9490));
        EXPECT(0x4d, gbc.readMem(0x9491));
        // CB 4D 0168
        gbc.setState(0x3fad, 0xc77d, 0xa540, 0x45b0, 0x3a42, 0x6333, 0x1, 0x0);
        gbc.writeMem(0x3fad, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xc77d, gbc.sp());
        EXPECT(0x3faf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0169
        gbc.setState(0x1e1f, 0xa2d2, 0x610, 0x413c, 0xe4b4, 0xae1, 0x0, 0x1);
        gbc.writeMem(0x1e1f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xa2d2, gbc.sp());
        EXPECT(0x1e21, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 016A
        gbc.setState(0xc426, 0x39f7, 0x68c0, 0x1639, 0xabd8, 0xf1f0, 0x1, 0x0);
        gbc.writeMem(0xc426, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x39f7, gbc.sp());
        EXPECT(0xc428, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc426));
        EXPECT(0x4d, gbc.readMem(0xc427));
        // CB 4D 016C
        gbc.setState(0x6030, 0x8b4c, 0xbb30, 0xf629, 0x2342, 0xe7c, 0x1, 0x1);
        gbc.writeMem(0x6030, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x8b4c, gbc.sp());
        EXPECT(0x6032, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 016D
        gbc.setState(0x351e, 0x2cde, 0xc940, 0x59b7, 0x9c6a, 0x9d95, 0x1, 0x0);
        gbc.writeMem(0x351e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x2cde, gbc.sp());
        EXPECT(0x3520, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 016F
        gbc.setState(0x5b13, 0xd102, 0x66b0, 0xa747, 0x5216, 0x1def, 0x0, 0x0);
        gbc.writeMem(0x5b13, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xd102, gbc.sp());
        EXPECT(0x5b15, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0170
        gbc.setState(0x22c6, 0xd49f, 0x46f0, 0xdcef, 0x5b7d, 0x48c, 0x1, 0x1);
        gbc.writeMem(0x22c6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xd49f, gbc.sp());
        EXPECT(0x22c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0171
        gbc.setState(0x4bde, 0x3452, 0x9150, 0x962f, 0x45f3, 0x6db0, 0x1, 0x1);
        gbc.writeMem(0x4bde, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x3452, gbc.sp());
        EXPECT(0x4be0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0172
        gbc.setState(0x645b, 0x6bab, 0x8530, 0x9688, 0xb1d2, 0xb6ed, 0x0, 0x0);
        gbc.writeMem(0x645b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x6bab, gbc.sp());
        EXPECT(0x645d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0173
        gbc.setState(0x18e4, 0x2db2, 0x15c0, 0xd9f7, 0x2e4d, 0x70ac, 0x1, 0x0);
        gbc.writeMem(0x18e4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x2db2, gbc.sp());
        EXPECT(0x18e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0174
        gbc.setState(0xd653, 0x3b7f, 0x4720, 0x13d5, 0x6432, 0x9771, 0x1, 0x1);
        gbc.writeMem(0xd653, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x3b7f, gbc.sp());
        EXPECT(0xd655, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd653));
        EXPECT(0x4d, gbc.readMem(0xd654));
        // CB 4D 0175
        gbc.setState(0xa738, 0x9a4f, 0xc060, 0x6a5, 0xaba2, 0xf275, 0x0, 0x0);
        gbc.writeMem(0xa738, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x9a4f, gbc.sp());
        EXPECT(0xa73a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa738));
        EXPECT(0x4d, gbc.readMem(0xa739));
        // CB 4D 0176
        gbc.setState(0x9fae, 0xe6dc, 0x2530, 0xeb08, 0xdb70, 0xb834, 0x0, 0x0);
        gbc.writeMem(0x9fae, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xe6dc, gbc.sp());
        EXPECT(0x9fb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fae));
        EXPECT(0x4d, gbc.readMem(0x9faf));
        // CB 4D 0177
        gbc.setState(0xd245, 0xff45, 0x6410, 0x8516, 0xfb8e, 0x43ec, 0x0, 0x1);
        gbc.writeMem(0xd245, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xff45, gbc.sp());
        EXPECT(0xd247, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd245));
        EXPECT(0x4d, gbc.readMem(0xd246));
        // CB 4D 0178
        gbc.setState(0x6fb4, 0xca1b, 0x9c40, 0x347a, 0xcf3f, 0x5db3, 0x0, 0x0);
        gbc.writeMem(0x6fb4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xca1b, gbc.sp());
        EXPECT(0x6fb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0179
        gbc.setState(0x18e5, 0xe3af, 0xf870, 0x1e71, 0xb9e7, 0x87af, 0x1, 0x0);
        gbc.writeMem(0x18e5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xe3af, gbc.sp());
        EXPECT(0x18e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 017A
        gbc.setState(0x45ec, 0x50d, 0x67e0, 0xe630, 0xd8d6, 0x769d, 0x0, 0x0);
        gbc.writeMem(0x45ec, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x50d, gbc.sp());
        EXPECT(0x45ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 017B
        gbc.setState(0xdacc, 0x872f, 0x5c60, 0x8b41, 0xdd4c, 0xd356, 0x0, 0x0);
        gbc.writeMem(0xdacc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x872f, gbc.sp());
        EXPECT(0xdace, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdacc));
        EXPECT(0x4d, gbc.readMem(0xdacd));
        // CB 4D 017C
        gbc.setState(0xcd0f, 0x8676, 0x4ef0, 0x8957, 0xf75b, 0xe193, 0x1, 0x0);
        gbc.writeMem(0xcd0f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x8676, gbc.sp());
        EXPECT(0xcd11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd0f));
        EXPECT(0x4d, gbc.readMem(0xcd10));
        // CB 4D 017D
        gbc.setState(0xd649, 0x3f07, 0xb660, 0xd055, 0x2906, 0x7240, 0x1, 0x1);
        gbc.writeMem(0xd649, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x3f07, gbc.sp());
        EXPECT(0xd64b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd649));
        EXPECT(0x4d, gbc.readMem(0xd64a));
        // CB 4D 017E
        gbc.setState(0xebb, 0x2f1, 0x9ad0, 0x6820, 0x3f4a, 0x6e89, 0x0, 0x1);
        gbc.writeMem(0xebb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x2f1, gbc.sp());
        EXPECT(0xebd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 017F
        gbc.setState(0x6fee, 0xc0a4, 0x1190, 0x3c40, 0x7b84, 0xe8c1, 0x0, 0x1);
        gbc.writeMem(0x6fee, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xc0a4, gbc.sp());
        EXPECT(0x6ff0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0180
        gbc.setState(0x6030, 0xf3ee, 0xe2a0, 0x2d54, 0x6bee, 0x54ea, 0x0, 0x0);
        gbc.writeMem(0x6030, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xf3ee, gbc.sp());
        EXPECT(0x6032, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0181
        gbc.setState(0x7230, 0xd5e5, 0x61f0, 0x4195, 0x86dc, 0x595e, 0x0, 0x1);
        gbc.writeMem(0x7230, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xd5e5, gbc.sp());
        EXPECT(0x7232, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0182
        gbc.setState(0x98c0, 0x5d0e, 0xbc60, 0xc55d, 0xe079, 0x5dc3, 0x0, 0x1);
        gbc.writeMem(0x98c0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x5d0e, gbc.sp());
        EXPECT(0x98c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98c0));
        EXPECT(0x4d, gbc.readMem(0x98c1));
        // CB 4D 0183
        gbc.setState(0x8a5d, 0x9a12, 0xadb0, 0x4484, 0x7a92, 0x435e, 0x0, 0x1);
        gbc.writeMem(0x8a5d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x9a12, gbc.sp());
        EXPECT(0x8a5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a5d));
        EXPECT(0x4d, gbc.readMem(0x8a5e));
        // CB 4D 0184
        gbc.setState(0x7fe0, 0x7ce3, 0x3c10, 0x526f, 0xa495, 0x5260, 0x0, 0x1);
        gbc.writeMem(0x7fe0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x7ce3, gbc.sp());
        EXPECT(0x7fe2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0185
        gbc.setState(0xb3f2, 0xdc56, 0x5540, 0xd4fd, 0x62fc, 0xc2db, 0x1, 0x0);
        gbc.writeMem(0xb3f2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xdc56, gbc.sp());
        EXPECT(0xb3f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3f2));
        EXPECT(0x4d, gbc.readMem(0xb3f3));
        // CB 4D 0186
        gbc.setState(0x38c2, 0xa9, 0x4ca0, 0x1bd4, 0x5814, 0x9606, 0x1, 0x1);
        gbc.writeMem(0x38c2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xa9, gbc.sp());
        EXPECT(0x38c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0187
        gbc.setState(0x3e05, 0x421d, 0x8180, 0x2a07, 0x4be8, 0xcf66, 0x1, 0x0);
        gbc.writeMem(0x3e05, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x421d, gbc.sp());
        EXPECT(0x3e07, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0188
        gbc.setState(0x41df, 0xb9fa, 0x6a30, 0x712, 0xe583, 0xd39f, 0x1, 0x1);
        gbc.writeMem(0x41df, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xb9fa, gbc.sp());
        EXPECT(0x41e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0189
        gbc.setState(0x2b49, 0xd569, 0xebe0, 0x4e60, 0x8e80, 0x2536, 0x1, 0x1);
        gbc.writeMem(0x2b49, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xd569, gbc.sp());
        EXPECT(0x2b4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 018A
        gbc.setState(0xe03c, 0xac8, 0xf450, 0x8132, 0x4305, 0xa3b3, 0x0, 0x0);
        gbc.writeMem(0xe03c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xac8, gbc.sp());
        EXPECT(0xe03e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe03c));
        EXPECT(0x4d, gbc.readMem(0xe03d));
        // CB 4D 018B
        gbc.setState(0x5229, 0xa749, 0xb090, 0xb41c, 0x2c78, 0xdab9, 0x1, 0x0);
        gbc.writeMem(0x5229, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xa749, gbc.sp());
        EXPECT(0x522b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 018C
        gbc.setState(0x1852, 0x7ff2, 0x2e0, 0x9d61, 0x6cd0, 0x242f, 0x1, 0x0);
        gbc.writeMem(0x1852, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x7ff2, gbc.sp());
        EXPECT(0x1854, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 018D
        gbc.setState(0x7bfb, 0x368f, 0x95d0, 0xefb8, 0xdf93, 0xec13, 0x0, 0x1);
        gbc.writeMem(0x7bfb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x368f, gbc.sp());
        EXPECT(0x7bfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 018E
        gbc.setState(0x6064, 0xc35, 0x8240, 0xa291, 0xf07f, 0xa691, 0x1, 0x0);
        gbc.writeMem(0x6064, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xc35, gbc.sp());
        EXPECT(0x6066, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 018F
        gbc.setState(0xb242, 0x1fd, 0x1c20, 0x865d, 0x20e5, 0xc2f6, 0x0, 0x1);
        gbc.writeMem(0xb242, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x1fd, gbc.sp());
        EXPECT(0xb244, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb242));
        EXPECT(0x4d, gbc.readMem(0xb243));
        // CB 4D 0190
        gbc.setState(0x8992, 0xc081, 0x8550, 0x409e, 0xf6e1, 0xfc1f, 0x1, 0x1);
        gbc.writeMem(0x8992, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xc081, gbc.sp());
        EXPECT(0x8994, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8992));
        EXPECT(0x4d, gbc.readMem(0x8993));
        // CB 4D 0191
        gbc.setState(0x7de2, 0xf226, 0xb590, 0xb49a, 0xffb7, 0x76fc, 0x1, 0x0);
        gbc.writeMem(0x7de2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xf226, gbc.sp());
        EXPECT(0x7de4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0192
        gbc.setState(0x3765, 0xbcb2, 0xef40, 0xb0fd, 0xb957, 0xcb53, 0x0, 0x0);
        gbc.writeMem(0x3765, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xbcb2, gbc.sp());
        EXPECT(0x3767, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0193
        gbc.setState(0xe49e, 0x3100, 0x2b00, 0xb810, 0x7ffa, 0x5146, 0x0, 0x1);
        gbc.writeMem(0xe49e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x3100, gbc.sp());
        EXPECT(0xe4a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe49e));
        EXPECT(0x4d, gbc.readMem(0xe49f));
        // CB 4D 0194
        gbc.setState(0x316d, 0x858a, 0xc010, 0xdd0c, 0xb71d, 0x39ba, 0x0, 0x1);
        gbc.writeMem(0x316d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x858a, gbc.sp());
        EXPECT(0x316f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0195
        gbc.setState(0x1d04, 0xc12b, 0xea50, 0xf23e, 0x20f2, 0x1a80, 0x1, 0x0);
        gbc.writeMem(0x1d04, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xc12b, gbc.sp());
        EXPECT(0x1d06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0196
        gbc.setState(0x79cb, 0x5a91, 0x63d0, 0x60f6, 0x94f3, 0xe896, 0x0, 0x0);
        gbc.writeMem(0x79cb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x5a91, gbc.sp());
        EXPECT(0x79cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0197
        gbc.setState(0xa4b, 0xf359, 0xd730, 0x9f1b, 0x1de5, 0x5870, 0x1, 0x0);
        gbc.writeMem(0xa4b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xf359, gbc.sp());
        EXPECT(0xa4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0198
        gbc.setState(0x1bef, 0xd96, 0x4ba0, 0x62fb, 0x1db2, 0xcd77, 0x1, 0x1);
        gbc.writeMem(0x1bef, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xd96, gbc.sp());
        EXPECT(0x1bf1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0199
        gbc.setState(0x7108, 0xb359, 0x9ff0, 0x59b3, 0xbb15, 0x9710, 0x1, 0x1);
        gbc.writeMem(0x7108, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xb359, gbc.sp());
        EXPECT(0x710a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 019B
        gbc.setState(0x26d4, 0x8863, 0xe130, 0x6460, 0x3429, 0xd378, 0x0, 0x0);
        gbc.writeMem(0x26d4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x8863, gbc.sp());
        EXPECT(0x26d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 019C
        gbc.setState(0x6f92, 0x2e3a, 0x8a00, 0x58a3, 0x87fc, 0x2d83, 0x1, 0x0);
        gbc.writeMem(0x6f92, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x2e3a, gbc.sp());
        EXPECT(0x6f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 019D
        gbc.setState(0xc60c, 0x9b86, 0xd6e0, 0xf07b, 0xaba7, 0xff12, 0x0, 0x0);
        gbc.writeMem(0xc60c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x9b86, gbc.sp());
        EXPECT(0xc60e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc60c));
        EXPECT(0x4d, gbc.readMem(0xc60d));
        // CB 4D 019E
        gbc.setState(0xd90, 0x37ec, 0x37f0, 0x345, 0xa359, 0x3264, 0x1, 0x0);
        gbc.writeMem(0xd90, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x37ec, gbc.sp());
        EXPECT(0xd92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 019F
        gbc.setState(0xda72, 0xc428, 0x6000, 0x3737, 0x3902, 0xe404, 0x0, 0x0);
        gbc.writeMem(0xda72, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xc428, gbc.sp());
        EXPECT(0xda74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda72));
        EXPECT(0x4d, gbc.readMem(0xda73));
        // CB 4D 01A0
        gbc.setState(0xac5e, 0x8be6, 0x8710, 0x8b7c, 0x4344, 0x1ba6, 0x1, 0x0);
        gbc.writeMem(0xac5e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x8be6, gbc.sp());
        EXPECT(0xac60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac5e));
        EXPECT(0x4d, gbc.readMem(0xac5f));
        // CB 4D 01A1
        gbc.setState(0xa466, 0x8aa, 0xb260, 0xb57, 0x1fe6, 0xf2f5, 0x1, 0x0);
        gbc.writeMem(0xa466, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x8aa, gbc.sp());
        EXPECT(0xa468, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa466));
        EXPECT(0x4d, gbc.readMem(0xa467));
        // CB 4D 01A2
        gbc.setState(0xeb41, 0x10ee, 0xa020, 0x3036, 0x40f7, 0x5278, 0x1, 0x0);
        gbc.writeMem(0xeb41, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x10ee, gbc.sp());
        EXPECT(0xeb43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb41));
        EXPECT(0x4d, gbc.readMem(0xeb42));
        // CB 4D 01A3
        gbc.setState(0x123e, 0x8f5c, 0x4640, 0x27b1, 0x42aa, 0x79e5, 0x0, 0x0);
        gbc.writeMem(0x123e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x8f5c, gbc.sp());
        EXPECT(0x1240, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01A4
        gbc.setState(0xe5e4, 0x982b, 0xdb70, 0x24fa, 0xc58e, 0x7358, 0x1, 0x0);
        gbc.writeMem(0xe5e4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x982b, gbc.sp());
        EXPECT(0xe5e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5e4));
        EXPECT(0x4d, gbc.readMem(0xe5e5));
        // CB 4D 01A5
        gbc.setState(0x3bdc, 0x50a9, 0x4660, 0xb6c5, 0x2c7f, 0xfddc, 0x0, 0x0);
        gbc.writeMem(0x3bdc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x50a9, gbc.sp());
        EXPECT(0x3bde, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01A6
        gbc.setState(0x6275, 0x614b, 0x18f0, 0xc6bc, 0x8573, 0xa406, 0x1, 0x0);
        gbc.writeMem(0x6275, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x614b, gbc.sp());
        EXPECT(0x6277, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01A7
        gbc.setState(0x8319, 0xd027, 0x92d0, 0xf53a, 0x2b9b, 0x83e6, 0x1, 0x1);
        gbc.writeMem(0x8319, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xd027, gbc.sp());
        EXPECT(0x831b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8319));
        EXPECT(0x4d, gbc.readMem(0x831a));
        // CB 4D 01A9
        gbc.setState(0x1d72, 0x2eb8, 0x59a0, 0xa5ab, 0xbc30, 0xe036, 0x1, 0x1);
        gbc.writeMem(0x1d72, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x2eb8, gbc.sp());
        EXPECT(0x1d74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01AA
        gbc.setState(0x9a95, 0x9f6a, 0x1c20, 0x374f, 0x4289, 0xe4f0, 0x1, 0x0);
        gbc.writeMem(0x9a95, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9f6a, gbc.sp());
        EXPECT(0x9a97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a95));
        EXPECT(0x4d, gbc.readMem(0x9a96));
        // CB 4D 01AB
        gbc.setState(0xc171, 0x922d, 0x3930, 0xa1ca, 0xb19c, 0xc215, 0x0, 0x0);
        gbc.writeMem(0xc171, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x922d, gbc.sp());
        EXPECT(0xc173, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc171));
        EXPECT(0x4d, gbc.readMem(0xc172));
        // CB 4D 01AC
        gbc.setState(0x6008, 0xc375, 0x7a10, 0x751d, 0x9685, 0x59b3, 0x1, 0x1);
        gbc.writeMem(0x6008, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xc375, gbc.sp());
        EXPECT(0x600a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01AD
        gbc.setState(0x77ac, 0x26ff, 0x5570, 0x1809, 0xb7c4, 0x46ac, 0x1, 0x0);
        gbc.writeMem(0x77ac, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x26ff, gbc.sp());
        EXPECT(0x77ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01AE
        gbc.setState(0xa97b, 0xda5b, 0xf590, 0xec5, 0x5789, 0xb6e3, 0x0, 0x0);
        gbc.writeMem(0xa97b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xda5b, gbc.sp());
        EXPECT(0xa97d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa97b));
        EXPECT(0x4d, gbc.readMem(0xa97c));
        // CB 4D 01AF
        gbc.setState(0xe669, 0xb7dc, 0xd4e0, 0xd03c, 0x276c, 0x4361, 0x0, 0x0);
        gbc.writeMem(0xe669, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb7dc, gbc.sp());
        EXPECT(0xe66b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe669));
        EXPECT(0x4d, gbc.readMem(0xe66a));
        // CB 4D 01B0
        gbc.setState(0x986d, 0xb0ac, 0x480, 0x1880, 0x589c, 0xc76b, 0x0, 0x1);
        gbc.writeMem(0x986d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xb0ac, gbc.sp());
        EXPECT(0x986f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x986d));
        EXPECT(0x4d, gbc.readMem(0x986e));
        // CB 4D 01B2
        gbc.setState(0x93eb, 0xf8e8, 0xac60, 0xdaa0, 0xda02, 0xa3, 0x1, 0x1);
        gbc.writeMem(0x93eb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xf8e8, gbc.sp());
        EXPECT(0x93ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93eb));
        EXPECT(0x4d, gbc.readMem(0x93ec));
        // CB 4D 01B3
        gbc.setState(0x2780, 0x1b66, 0x8cb0, 0x1069, 0x673c, 0x6433, 0x1, 0x0);
        gbc.writeMem(0x2780, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x1b66, gbc.sp());
        EXPECT(0x2782, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01B4
        gbc.setState(0x2264, 0x2917, 0x9840, 0xe6cc, 0xddbe, 0xfd1e, 0x1, 0x0);
        gbc.writeMem(0x2264, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x2917, gbc.sp());
        EXPECT(0x2266, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01B5
        gbc.setState(0x4cf0, 0x67c5, 0xb730, 0x5234, 0xb7b0, 0x750e, 0x0, 0x0);
        gbc.writeMem(0x4cf0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x67c5, gbc.sp());
        EXPECT(0x4cf2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01B6
        gbc.setState(0x59f7, 0xcf7a, 0x3dc0, 0x5495, 0x63f, 0xddf, 0x0, 0x1);
        gbc.writeMem(0x59f7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xcf7a, gbc.sp());
        EXPECT(0x59f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01B7
        gbc.setState(0xe9fb, 0xa13e, 0xe550, 0x5bbc, 0x9b4c, 0x3d84, 0x0, 0x1);
        gbc.writeMem(0xe9fb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xa13e, gbc.sp());
        EXPECT(0xe9fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9fb));
        EXPECT(0x4d, gbc.readMem(0xe9fc));
        // CB 4D 01B8
        gbc.setState(0xda94, 0x6cb0, 0x6980, 0x4566, 0xaed9, 0x1281, 0x0, 0x0);
        gbc.writeMem(0xda94, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x6cb0, gbc.sp());
        EXPECT(0xda96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda94));
        EXPECT(0x4d, gbc.readMem(0xda95));
        // CB 4D 01B9
        gbc.setState(0x58da, 0x3e90, 0x1cf0, 0x58a6, 0x1caa, 0x24d2, 0x1, 0x0);
        gbc.writeMem(0x58da, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x3e90, gbc.sp());
        EXPECT(0x58dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01BA
        gbc.setState(0x2e41, 0x262e, 0x7b40, 0xe380, 0x31f6, 0x73b4, 0x0, 0x0);
        gbc.writeMem(0x2e41, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x262e, gbc.sp());
        EXPECT(0x2e43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01BB
        gbc.setState(0x5fd3, 0x5cd1, 0x8f30, 0x7545, 0xe82, 0x7623, 0x0, 0x1);
        gbc.writeMem(0x5fd3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x5cd1, gbc.sp());
        EXPECT(0x5fd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01BC
        gbc.setState(0x9f0b, 0xa989, 0x5f20, 0x306b, 0x2850, 0x303f, 0x1, 0x1);
        gbc.writeMem(0x9f0b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa989, gbc.sp());
        EXPECT(0x9f0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f0b));
        EXPECT(0x4d, gbc.readMem(0x9f0c));
        // CB 4D 01BD
        gbc.setState(0x8460, 0x9735, 0x63d0, 0xd6fe, 0x904, 0x23d0, 0x0, 0x0);
        gbc.writeMem(0x8460, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x9735, gbc.sp());
        EXPECT(0x8462, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8460));
        EXPECT(0x4d, gbc.readMem(0x8461));
        // CB 4D 01BE
        gbc.setState(0xc828, 0x9e26, 0xeaf0, 0x3a8c, 0xca07, 0xb402, 0x1, 0x0);
        gbc.writeMem(0xc828, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x9e26, gbc.sp());
        EXPECT(0xc82a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc828));
        EXPECT(0x4d, gbc.readMem(0xc829));
        // CB 4D 01BF
        gbc.setState(0xed3a, 0xe133, 0x9db0, 0xc756, 0x19f0, 0x9ad4, 0x1, 0x1);
        gbc.writeMem(0xed3a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xe133, gbc.sp());
        EXPECT(0xed3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed3a));
        EXPECT(0x4d, gbc.readMem(0xed3b));
        // CB 4D 01C0
        gbc.setState(0x4aa0, 0x2d57, 0x4260, 0xf7b1, 0x62ca, 0xe59, 0x0, 0x0);
        gbc.writeMem(0x4aa0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x2d57, gbc.sp());
        EXPECT(0x4aa2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01C1
        gbc.setState(0xe36e, 0x79b6, 0xe930, 0xd337, 0xa743, 0x2b8d, 0x0, 0x0);
        gbc.writeMem(0xe36e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x79b6, gbc.sp());
        EXPECT(0xe370, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe36e));
        EXPECT(0x4d, gbc.readMem(0xe36f));
        // CB 4D 01C2
        gbc.setState(0x30f6, 0x71c, 0x7a80, 0x878b, 0x42cb, 0x8dca, 0x0, 0x1);
        gbc.writeMem(0x30f6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x71c, gbc.sp());
        EXPECT(0x30f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01C3
        gbc.setState(0xeb68, 0x601, 0x6190, 0x37c, 0xee80, 0x7589, 0x1, 0x1);
        gbc.writeMem(0xeb68, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x601, gbc.sp());
        EXPECT(0xeb6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb68));
        EXPECT(0x4d, gbc.readMem(0xeb69));
        // CB 4D 01C4
        gbc.setState(0xdb50, 0x3d8a, 0x78a0, 0x8cf2, 0xb5f4, 0xdec0, 0x1, 0x1);
        gbc.writeMem(0xdb50, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x3d8a, gbc.sp());
        EXPECT(0xdb52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb50));
        EXPECT(0x4d, gbc.readMem(0xdb51));
        // CB 4D 01C5
        gbc.setState(0x8109, 0xc2ea, 0xffd0, 0xfae6, 0x9c9c, 0xbfd0, 0x1, 0x1);
        gbc.writeMem(0x8109, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xc2ea, gbc.sp());
        EXPECT(0x810b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8109));
        EXPECT(0x4d, gbc.readMem(0x810a));
        // CB 4D 01C6
        gbc.setState(0xe9b7, 0x5071, 0x4500, 0xa4ad, 0x2626, 0x8a69, 0x1, 0x1);
        gbc.writeMem(0xe9b7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x5071, gbc.sp());
        EXPECT(0xe9b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9b7));
        EXPECT(0x4d, gbc.readMem(0xe9b8));
        // CB 4D 01C7
        gbc.setState(0x7c, 0xfaa3, 0xca0, 0x6712, 0x7a70, 0x8424, 0x0, 0x1);
        gbc.writeMem(0x7c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xfaa3, gbc.sp());
        EXPECT(0x7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01C8
        gbc.setState(0x9d54, 0x1c0b, 0x14e0, 0x69eb, 0xc722, 0xedb6, 0x0, 0x1);
        gbc.writeMem(0x9d54, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x1c0b, gbc.sp());
        EXPECT(0x9d56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d54));
        EXPECT(0x4d, gbc.readMem(0x9d55));
        // CB 4D 01CA
        gbc.setState(0x5e26, 0x3365, 0x63a0, 0x97ca, 0x5d0b, 0x581c, 0x0, 0x1);
        gbc.writeMem(0x5e26, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x3365, gbc.sp());
        EXPECT(0x5e28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01CB
        gbc.setState(0x8b17, 0x5dae, 0xc130, 0x6c0c, 0x154c, 0x43db, 0x0, 0x1);
        gbc.writeMem(0x8b17, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x5dae, gbc.sp());
        EXPECT(0x8b19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b17));
        EXPECT(0x4d, gbc.readMem(0x8b18));
        // CB 4D 01CC
        gbc.setState(0xe813, 0x1c55, 0x2470, 0xd0b, 0x13b0, 0xc8d8, 0x1, 0x0);
        gbc.writeMem(0xe813, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x1c55, gbc.sp());
        EXPECT(0xe815, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe813));
        EXPECT(0x4d, gbc.readMem(0xe814));
        // CB 4D 01CD
        gbc.setState(0xe5f0, 0x1ca5, 0xcd40, 0x848a, 0xb054, 0xb2a7, 0x0, 0x0);
        gbc.writeMem(0xe5f0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x1ca5, gbc.sp());
        EXPECT(0xe5f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5f0));
        EXPECT(0x4d, gbc.readMem(0xe5f1));
        // CB 4D 01CE
        gbc.setState(0x982f, 0xa9b1, 0x1f60, 0xbb9d, 0xa318, 0x69df, 0x1, 0x0);
        gbc.writeMem(0x982f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xa9b1, gbc.sp());
        EXPECT(0x9831, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x982f));
        EXPECT(0x4d, gbc.readMem(0x9830));
        // CB 4D 01CF
        gbc.setState(0x7b79, 0x6898, 0xcd10, 0x8c99, 0x4452, 0x9f90, 0x0, 0x0);
        gbc.writeMem(0x7b79, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x6898, gbc.sp());
        EXPECT(0x7b7b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01D0
        gbc.setState(0xcca, 0x3966, 0x1cb0, 0x42b1, 0x946a, 0xf5f0, 0x0, 0x0);
        gbc.writeMem(0xcca, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x3966, gbc.sp());
        EXPECT(0xccc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01D2
        gbc.setState(0x2310, 0xa748, 0xffd0, 0xd785, 0xde29, 0xa2e3, 0x1, 0x0);
        gbc.writeMem(0x2310, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xa748, gbc.sp());
        EXPECT(0x2312, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01D3
        gbc.setState(0x563d, 0xd7e4, 0x6480, 0x40c4, 0xe319, 0x8750, 0x0, 0x0);
        gbc.writeMem(0x563d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xd7e4, gbc.sp());
        EXPECT(0x563f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01D5
        gbc.setState(0xe862, 0xc1ac, 0xd030, 0x128d, 0xb6f1, 0xe134, 0x1, 0x0);
        gbc.writeMem(0xe862, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xc1ac, gbc.sp());
        EXPECT(0xe864, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe862));
        EXPECT(0x4d, gbc.readMem(0xe863));
        // CB 4D 01D6
        gbc.setState(0xb71a, 0xd63b, 0xc9c0, 0x9309, 0xae50, 0xa155, 0x0, 0x0);
        gbc.writeMem(0xb71a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xd63b, gbc.sp());
        EXPECT(0xb71c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb71a));
        EXPECT(0x4d, gbc.readMem(0xb71b));
        // CB 4D 01D7
        gbc.setState(0x660d, 0xbc0c, 0xcfe0, 0xe4ee, 0xf79e, 0x22fd, 0x0, 0x0);
        gbc.writeMem(0x660d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xbc0c, gbc.sp());
        EXPECT(0x660f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01D8
        gbc.setState(0x91d8, 0x6165, 0x1360, 0xc544, 0xd3e8, 0x396, 0x1, 0x1);
        gbc.writeMem(0x91d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x6165, gbc.sp());
        EXPECT(0x91da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91d8));
        EXPECT(0x4d, gbc.readMem(0x91d9));
        // CB 4D 01D9
        gbc.setState(0xa238, 0xdc10, 0x8680, 0x22d6, 0xf5b6, 0xb7b0, 0x1, 0x0);
        gbc.writeMem(0xa238, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xdc10, gbc.sp());
        EXPECT(0xa23a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa238));
        EXPECT(0x4d, gbc.readMem(0xa239));
        // CB 4D 01DA
        gbc.setState(0x1e0e, 0xcc7b, 0x5c60, 0x3bf1, 0x7cb9, 0x1f57, 0x1, 0x1);
        gbc.writeMem(0x1e0e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xcc7b, gbc.sp());
        EXPECT(0x1e10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01DB
        gbc.setState(0x398, 0xdb88, 0xe7a0, 0xa503, 0xa5d1, 0xdc67, 0x1, 0x1);
        gbc.writeMem(0x398, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xdb88, gbc.sp());
        EXPECT(0x39a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01DC
        gbc.setState(0x861f, 0x184e, 0xffe0, 0x8ff5, 0x4169, 0xff47, 0x0, 0x1);
        gbc.writeMem(0x861f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x184e, gbc.sp());
        EXPECT(0x8621, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x861f));
        EXPECT(0x4d, gbc.readMem(0x8620));
        // CB 4D 01DE
        gbc.setState(0x7890, 0x1140, 0x330, 0x6a5f, 0xa8a6, 0x79e5, 0x1, 0x1);
        gbc.writeMem(0x7890, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x1140, gbc.sp());
        EXPECT(0x7892, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01DF
        gbc.setState(0x6c9e, 0x1c76, 0x5bb0, 0x1ff7, 0xab10, 0xcad8, 0x0, 0x0);
        gbc.writeMem(0x6c9e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x1c76, gbc.sp());
        EXPECT(0x6ca0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01E0
        gbc.setState(0x9e6e, 0xe593, 0x5520, 0xeec6, 0xb7df, 0x2558, 0x1, 0x0);
        gbc.writeMem(0x9e6e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xe593, gbc.sp());
        EXPECT(0x9e70, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e6e));
        EXPECT(0x4d, gbc.readMem(0x9e6f));
        // CB 4D 01E1
        gbc.setState(0x9986, 0x71a2, 0xee50, 0x142, 0x633f, 0x1f37, 0x1, 0x0);
        gbc.writeMem(0x9986, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x71a2, gbc.sp());
        EXPECT(0x9988, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9986));
        EXPECT(0x4d, gbc.readMem(0x9987));
        // CB 4D 01E2
        gbc.setState(0xac35, 0xe13d, 0x5b60, 0x304d, 0xd99, 0x217c, 0x1, 0x0);
        gbc.writeMem(0xac35, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xe13d, gbc.sp());
        EXPECT(0xac37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac35));
        EXPECT(0x4d, gbc.readMem(0xac36));
        // CB 4D 01E3
        gbc.setState(0xcdb, 0xc5cc, 0x8b40, 0xeae, 0x6e52, 0x706c, 0x1, 0x1);
        gbc.writeMem(0xcdb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xc5cc, gbc.sp());
        EXPECT(0xcdd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01E5
        gbc.setState(0x4015, 0x416b, 0x8010, 0x8bba, 0xab2, 0x18d6, 0x1, 0x1);
        gbc.writeMem(0x4015, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x416b, gbc.sp());
        EXPECT(0x4017, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01E7
        gbc.setState(0x1424, 0x52d4, 0x3d70, 0xf800, 0x93d3, 0xbefc, 0x0, 0x0);
        gbc.writeMem(0x1424, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x52d4, gbc.sp());
        EXPECT(0x1426, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01E8
        gbc.setState(0x9e9d, 0xe8c0, 0xe390, 0x9240, 0xffa8, 0x1557, 0x1, 0x1);
        gbc.writeMem(0x9e9d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xe8c0, gbc.sp());
        EXPECT(0x9e9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e9d));
        EXPECT(0x4d, gbc.readMem(0x9e9e));
        // CB 4D 01E9
        gbc.setState(0xe717, 0x4034, 0x8d30, 0xded6, 0xdb9b, 0x52f9, 0x1, 0x0);
        gbc.writeMem(0xe717, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x4034, gbc.sp());
        EXPECT(0xe719, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe717));
        EXPECT(0x4d, gbc.readMem(0xe718));
        // CB 4D 01EA
        gbc.setState(0x8be, 0xb1f1, 0xa6c0, 0x8bf7, 0xebfe, 0xa6e6, 0x1, 0x1);
        gbc.writeMem(0x8be, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xb1f1, gbc.sp());
        EXPECT(0x8c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01EB
        gbc.setState(0x1397, 0xc61b, 0x6c10, 0x63d3, 0x3eb0, 0x5f84, 0x1, 0x0);
        gbc.writeMem(0x1397, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xc61b, gbc.sp());
        EXPECT(0x1399, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01EC
        gbc.setState(0xbec9, 0x1caa, 0x5300, 0xd506, 0xe63f, 0x2670, 0x1, 0x1);
        gbc.writeMem(0xbec9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x1caa, gbc.sp());
        EXPECT(0xbecb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbec9));
        EXPECT(0x4d, gbc.readMem(0xbeca));
        // CB 4D 01ED
        gbc.setState(0x66cf, 0x7dc4, 0x8810, 0x1369, 0xed2d, 0xbbb8, 0x0, 0x0);
        gbc.writeMem(0x66cf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x7dc4, gbc.sp());
        EXPECT(0x66d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01EE
        gbc.setState(0xdb2c, 0x7e67, 0x2b60, 0xce0c, 0x2325, 0xdd16, 0x0, 0x1);
        gbc.writeMem(0xdb2c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x7e67, gbc.sp());
        EXPECT(0xdb2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb2c));
        EXPECT(0x4d, gbc.readMem(0xdb2d));
        // CB 4D 01EF
        gbc.setState(0x1396, 0xf275, 0xb250, 0x11c6, 0x3515, 0xedee, 0x1, 0x1);
        gbc.writeMem(0x1396, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xf275, gbc.sp());
        EXPECT(0x1398, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01F1
        gbc.setState(0xba1e, 0xe1b, 0x7f40, 0xbfc0, 0xdd5c, 0xb193, 0x1, 0x0);
        gbc.writeMem(0xba1e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xe1b, gbc.sp());
        EXPECT(0xba20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba1e));
        EXPECT(0x4d, gbc.readMem(0xba1f));
        // CB 4D 01F2
        gbc.setState(0x2582, 0x806, 0xb390, 0xe164, 0x9e61, 0x1997, 0x1, 0x1);
        gbc.writeMem(0x2582, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x806, gbc.sp());
        EXPECT(0x2584, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01F4
        gbc.setState(0xbbcb, 0x93b2, 0x45d0, 0xaa67, 0xfd43, 0xd869, 0x0, 0x0);
        gbc.writeMem(0xbbcb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x93b2, gbc.sp());
        EXPECT(0xbbcd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbcb));
        EXPECT(0x4d, gbc.readMem(0xbbcc));
        // CB 4D 01F5
        gbc.setState(0x7e49, 0x83a3, 0x3b10, 0xe20f, 0xcd5e, 0x1a53, 0x1, 0x0);
        gbc.writeMem(0x7e49, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x83a3, gbc.sp());
        EXPECT(0x7e4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01F6
        gbc.setState(0x8518, 0x36a, 0x4e00, 0x122a, 0x6138, 0xad8, 0x0, 0x0);
        gbc.writeMem(0x8518, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x36a, gbc.sp());
        EXPECT(0x851a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8518));
        EXPECT(0x4d, gbc.readMem(0x8519));
        // CB 4D 01F7
        gbc.setState(0xc00b, 0x34f6, 0x7f30, 0x61ff, 0xfbef, 0x46fa, 0x0, 0x1);
        gbc.writeMem(0xc00b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x34f6, gbc.sp());
        EXPECT(0xc00d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc00b));
        EXPECT(0x4d, gbc.readMem(0xc00c));
        // CB 4D 01F8
        gbc.setState(0xd97d, 0xfe11, 0xde0, 0xa513, 0xf607, 0xeed6, 0x0, 0x0);
        gbc.writeMem(0xd97d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xfe11, gbc.sp());
        EXPECT(0xd97f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd97d));
        EXPECT(0x4d, gbc.readMem(0xd97e));
        // CB 4D 01F9
        gbc.setState(0x302c, 0x8109, 0xe630, 0x683a, 0xe29a, 0xfbed, 0x0, 0x0);
        gbc.writeMem(0x302c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x8109, gbc.sp());
        EXPECT(0x302e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01FA
        gbc.setState(0x421f, 0x4702, 0x7870, 0x6d62, 0xe54f, 0x1124, 0x0, 0x1);
        gbc.writeMem(0x421f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x4702, gbc.sp());
        EXPECT(0x4221, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01FB
        gbc.setState(0x5916, 0x106e, 0xe230, 0x38bf, 0x5f06, 0x22ce, 0x1, 0x0);
        gbc.writeMem(0x5916, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x106e, gbc.sp());
        EXPECT(0x5918, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 01FC
        gbc.setState(0x64f2, 0xa990, 0x3540, 0x85c6, 0xe5b0, 0xa3af, 0x0, 0x1);
        gbc.writeMem(0x64f2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xa990, gbc.sp());
        EXPECT(0x64f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 01FD
        gbc.setState(0xeb8b, 0x7c7c, 0x6770, 0x76f1, 0x78b4, 0x9d78, 0x0, 0x0);
        gbc.writeMem(0xeb8b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x7c7c, gbc.sp());
        EXPECT(0xeb8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb8b));
        EXPECT(0x4d, gbc.readMem(0xeb8c));
        // CB 4D 01FE
        gbc.setState(0x8c4d, 0x68b7, 0xdc50, 0x6357, 0xffe8, 0xdf3b, 0x1, 0x1);
        gbc.writeMem(0x8c4d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x68b7, gbc.sp());
        EXPECT(0x8c4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c4d));
        EXPECT(0x4d, gbc.readMem(0x8c4e));
        // CB 4D 01FF
        gbc.setState(0xec73, 0x6c8d, 0x6990, 0xb221, 0xd415, 0xc488, 0x0, 0x0);
        gbc.writeMem(0xec73, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x6c8d, gbc.sp());
        EXPECT(0xec75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec73));
        EXPECT(0x4d, gbc.readMem(0xec74));
        // CB 4D 0200
        gbc.setState(0xf98, 0x39e, 0x8270, 0xece3, 0xb289, 0x6b21, 0x0, 0x0);
        gbc.writeMem(0xf98, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x39e, gbc.sp());
        EXPECT(0xf9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0201
        gbc.setState(0xa959, 0xd459, 0xc670, 0xc777, 0x4826, 0xe44b, 0x1, 0x1);
        gbc.writeMem(0xa959, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xd459, gbc.sp());
        EXPECT(0xa95b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa959));
        EXPECT(0x4d, gbc.readMem(0xa95a));
        // CB 4D 0202
        gbc.setState(0x8294, 0x60d4, 0x5c30, 0x5b4d, 0xb9c2, 0x29f9, 0x0, 0x1);
        gbc.writeMem(0x8294, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x60d4, gbc.sp());
        EXPECT(0x8296, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8294));
        EXPECT(0x4d, gbc.readMem(0x8295));
        // CB 4D 0203
        gbc.setState(0x4d20, 0x1197, 0xf3a0, 0x80f1, 0x55b9, 0x41bd, 0x1, 0x1);
        gbc.writeMem(0x4d20, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x1197, gbc.sp());
        EXPECT(0x4d22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0205
        gbc.setState(0x78fe, 0x3b10, 0xc550, 0xc1fb, 0xd753, 0x6f5a, 0x1, 0x0);
        gbc.writeMem(0x78fe, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x3b10, gbc.sp());
        EXPECT(0x7900, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0206
        gbc.setState(0x4cfb, 0x34b7, 0xf0e0, 0x652b, 0x5e2d, 0x8573, 0x0, 0x0);
        gbc.writeMem(0x4cfb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x34b7, gbc.sp());
        EXPECT(0x4cfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0207
        gbc.setState(0xbb65, 0xcbcf, 0xe060, 0x66f7, 0xd4ec, 0xffd2, 0x1, 0x1);
        gbc.writeMem(0xbb65, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xcbcf, gbc.sp());
        EXPECT(0xbb67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb65));
        EXPECT(0x4d, gbc.readMem(0xbb66));
        // CB 4D 0208
        gbc.setState(0xa603, 0x2215, 0xe060, 0x55a0, 0x3f43, 0x85d8, 0x1, 0x1);
        gbc.writeMem(0xa603, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x2215, gbc.sp());
        EXPECT(0xa605, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa603));
        EXPECT(0x4d, gbc.readMem(0xa604));
        // CB 4D 0209
        gbc.setState(0xe2bf, 0xea7, 0x86e0, 0x3dea, 0x175e, 0x673f, 0x0, 0x0);
        gbc.writeMem(0xe2bf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xea7, gbc.sp());
        EXPECT(0xe2c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2bf));
        EXPECT(0x4d, gbc.readMem(0xe2c0));
        // CB 4D 020A
        gbc.setState(0xe270, 0xb03a, 0x7830, 0x9c5, 0xa2, 0x1bfd, 0x1, 0x1);
        gbc.writeMem(0xe270, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xb03a, gbc.sp());
        EXPECT(0xe272, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe270));
        EXPECT(0x4d, gbc.readMem(0xe271));
        // CB 4D 020B
        gbc.setState(0x2ff9, 0x6e0a, 0x650, 0x105e, 0x155d, 0x8fff, 0x0, 0x0);
        gbc.writeMem(0x2ff9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x6e0a, gbc.sp());
        EXPECT(0x2ffb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 020C
        gbc.setState(0x506b, 0xc9d, 0x3cc0, 0xb3b2, 0x6602, 0xd544, 0x1, 0x1);
        gbc.writeMem(0x506b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xc9d, gbc.sp());
        EXPECT(0x506d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 020D
        gbc.setState(0x4f67, 0xabb3, 0xd400, 0xe110, 0xb3e3, 0x1c18, 0x1, 0x0);
        gbc.writeMem(0x4f67, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xabb3, gbc.sp());
        EXPECT(0x4f69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 020F
        gbc.setState(0x5fc9, 0x1d8d, 0xe670, 0x54f, 0x7f6d, 0xab3f, 0x1, 0x1);
        gbc.writeMem(0x5fc9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x1d8d, gbc.sp());
        EXPECT(0x5fcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0210
        gbc.setState(0x329d, 0x2367, 0x2fa0, 0x7d0e, 0x282e, 0xfa3a, 0x1, 0x1);
        gbc.writeMem(0x329d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x2367, gbc.sp());
        EXPECT(0x329f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0211
        gbc.setState(0xb76f, 0x36e4, 0x3690, 0xd807, 0x9497, 0xbc77, 0x1, 0x0);
        gbc.writeMem(0xb76f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x36e4, gbc.sp());
        EXPECT(0xb771, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb76f));
        EXPECT(0x4d, gbc.readMem(0xb770));
        // CB 4D 0212
        gbc.setState(0xcc94, 0xde7d, 0xd0d0, 0xab6a, 0x4391, 0x90f4, 0x1, 0x1);
        gbc.writeMem(0xcc94, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xde7d, gbc.sp());
        EXPECT(0xcc96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc94));
        EXPECT(0x4d, gbc.readMem(0xcc95));
        // CB 4D 0213
        gbc.setState(0xb49, 0x5c3d, 0xa60, 0xb1d6, 0x7a76, 0x2cb7, 0x0, 0x0);
        gbc.writeMem(0xb49, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x5c3d, gbc.sp());
        EXPECT(0xb4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0215
        gbc.setState(0x2194, 0x1a29, 0x8c40, 0x7558, 0x3b8, 0xf230, 0x1, 0x0);
        gbc.writeMem(0x2194, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x1a29, gbc.sp());
        EXPECT(0x2196, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0216
        gbc.setState(0x674d, 0x3203, 0xefa0, 0x9e04, 0xe4fc, 0x41a3, 0x0, 0x0);
        gbc.writeMem(0x674d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x3203, gbc.sp());
        EXPECT(0x674f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0217
        gbc.setState(0x116d, 0xbb0c, 0xbb80, 0xbbe2, 0x911a, 0x7223, 0x0, 0x1);
        gbc.writeMem(0x116d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xbb0c, gbc.sp());
        EXPECT(0x116f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 021A
        gbc.setState(0x7116, 0x1fe1, 0x8ab0, 0xd312, 0x5606, 0xcdb1, 0x1, 0x0);
        gbc.writeMem(0x7116, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x1fe1, gbc.sp());
        EXPECT(0x7118, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 021B
        gbc.setState(0xaba7, 0x4dd5, 0x6ab0, 0xa418, 0xa06d, 0x955, 0x0, 0x1);
        gbc.writeMem(0xaba7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x4dd5, gbc.sp());
        EXPECT(0xaba9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaba7));
        EXPECT(0x4d, gbc.readMem(0xaba8));
        // CB 4D 021C
        gbc.setState(0xc0e9, 0x26c9, 0x1730, 0x5b37, 0x267c, 0xa56e, 0x1, 0x0);
        gbc.writeMem(0xc0e9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x26c9, gbc.sp());
        EXPECT(0xc0eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0e9));
        EXPECT(0x4d, gbc.readMem(0xc0ea));
        // CB 4D 021D
        gbc.setState(0xd2c, 0x7c30, 0xaeb0, 0xaa54, 0x68a3, 0x3a19, 0x0, 0x1);
        gbc.writeMem(0xd2c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x7c30, gbc.sp());
        EXPECT(0xd2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 021F
        gbc.setState(0x48a5, 0x9354, 0xd60, 0x9c7d, 0x6b5f, 0x1faf, 0x0, 0x0);
        gbc.writeMem(0x48a5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x9354, gbc.sp());
        EXPECT(0x48a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0220
        gbc.setState(0x7831, 0x1a31, 0x670, 0xdcf, 0x527e, 0xfffd, 0x0, 0x0);
        gbc.writeMem(0x7831, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x1a31, gbc.sp());
        EXPECT(0x7833, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0221
        gbc.setState(0x510a, 0x460f, 0x3230, 0x9e84, 0xadd4, 0x49cc, 0x1, 0x1);
        gbc.writeMem(0x510a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x460f, gbc.sp());
        EXPECT(0x510c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0222
        gbc.setState(0xb5b1, 0x5266, 0xd5e0, 0xbb59, 0x4f4d, 0xc370, 0x1, 0x0);
        gbc.writeMem(0xb5b1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x5266, gbc.sp());
        EXPECT(0xb5b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5b1));
        EXPECT(0x4d, gbc.readMem(0xb5b2));
        // CB 4D 0223
        gbc.setState(0x615f, 0x5c09, 0x90a0, 0x497e, 0x544, 0xa8b3, 0x0, 0x0);
        gbc.writeMem(0x615f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x5c09, gbc.sp());
        EXPECT(0x6161, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0224
        gbc.setState(0x171a, 0xed55, 0x7f40, 0xbd8c, 0x7e99, 0x6cd9, 0x0, 0x1);
        gbc.writeMem(0x171a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xed55, gbc.sp());
        EXPECT(0x171c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0225
        gbc.setState(0x9056, 0x2dbe, 0x5940, 0xb5c5, 0x9939, 0x7c39, 0x0, 0x0);
        gbc.writeMem(0x9056, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x2dbe, gbc.sp());
        EXPECT(0x9058, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9056));
        EXPECT(0x4d, gbc.readMem(0x9057));
        // CB 4D 0226
        gbc.setState(0xa304, 0x3173, 0x4220, 0x386c, 0x8c3a, 0x4b41, 0x0, 0x1);
        gbc.writeMem(0xa304, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x3173, gbc.sp());
        EXPECT(0xa306, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa304));
        EXPECT(0x4d, gbc.readMem(0xa305));
        // CB 4D 0227
        gbc.setState(0x3e9b, 0xa42c, 0xad0, 0xd6cf, 0xae78, 0xfc7a, 0x0, 0x1);
        gbc.writeMem(0x3e9b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xa42c, gbc.sp());
        EXPECT(0x3e9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0228
        gbc.setState(0x7cb6, 0x4d4d, 0xb800, 0xd7e2, 0xadd, 0x315d, 0x1, 0x1);
        gbc.writeMem(0x7cb6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x4d4d, gbc.sp());
        EXPECT(0x7cb8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0229
        gbc.setState(0xade8, 0xf523, 0x1d0, 0x1bf, 0xd78a, 0x126c, 0x1, 0x0);
        gbc.writeMem(0xade8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xf523, gbc.sp());
        EXPECT(0xadea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xade8));
        EXPECT(0x4d, gbc.readMem(0xade9));
        // CB 4D 022A
        gbc.setState(0xe91, 0x49e2, 0xecb0, 0x3e, 0xb223, 0x2bfd, 0x1, 0x0);
        gbc.writeMem(0xe91, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x49e2, gbc.sp());
        EXPECT(0xe93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 022B
        gbc.setState(0x6dd4, 0x4bd6, 0xd930, 0x3d71, 0xd5f6, 0xc028, 0x1, 0x0);
        gbc.writeMem(0x6dd4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x4bd6, gbc.sp());
        EXPECT(0x6dd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 022C
        gbc.setState(0x4906, 0xd738, 0x5070, 0x59a0, 0xffa0, 0xcd9e, 0x1, 0x0);
        gbc.writeMem(0x4906, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xd738, gbc.sp());
        EXPECT(0x4908, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 022D
        gbc.setState(0x56, 0x1858, 0xbb70, 0x6a72, 0xe6b6, 0x449b, 0x1, 0x1);
        gbc.writeMem(0x56, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x1858, gbc.sp());
        EXPECT(0x58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 022E
        gbc.setState(0x25fe, 0xae5c, 0x70c0, 0xf59a, 0x594f, 0x9348, 0x0, 0x0);
        gbc.writeMem(0x25fe, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xae5c, gbc.sp());
        EXPECT(0x2600, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 022F
        gbc.setState(0x63f6, 0x634a, 0x46c0, 0x444b, 0x53db, 0xb528, 0x0, 0x0);
        gbc.writeMem(0x63f6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x634a, gbc.sp());
        EXPECT(0x63f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0230
        gbc.setState(0x3c1e, 0x202c, 0xa2c0, 0x6da3, 0x5270, 0x4d30, 0x0, 0x0);
        gbc.writeMem(0x3c1e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x202c, gbc.sp());
        EXPECT(0x3c20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0231
        gbc.setState(0x6dd5, 0xbc1a, 0x1000, 0x514c, 0xb010, 0x4dca, 0x1, 0x0);
        gbc.writeMem(0x6dd5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xbc1a, gbc.sp());
        EXPECT(0x6dd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0232
        gbc.setState(0x1ba0, 0xd948, 0xc8a0, 0xdf30, 0x6a1f, 0xbea0, 0x1, 0x1);
        gbc.writeMem(0x1ba0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xd948, gbc.sp());
        EXPECT(0x1ba2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0233
        gbc.setState(0x5ac6, 0x2a4c, 0x7ea0, 0xb411, 0xc7f9, 0x9337, 0x1, 0x1);
        gbc.writeMem(0x5ac6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x2a4c, gbc.sp());
        EXPECT(0x5ac8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0234
        gbc.setState(0x9574, 0x91c6, 0x2d60, 0x4b2a, 0x4a42, 0xdc99, 0x0, 0x1);
        gbc.writeMem(0x9574, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x91c6, gbc.sp());
        EXPECT(0x9576, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9574));
        EXPECT(0x4d, gbc.readMem(0x9575));
        // CB 4D 0235
        gbc.setState(0xd15b, 0xd547, 0x69e0, 0xff23, 0x988b, 0xb6c5, 0x0, 0x1);
        gbc.writeMem(0xd15b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xd547, gbc.sp());
        EXPECT(0xd15d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd15b));
        EXPECT(0x4d, gbc.readMem(0xd15c));
        // CB 4D 0236
        gbc.setState(0x62fc, 0x3278, 0xd810, 0xe974, 0xed4a, 0xa161, 0x1, 0x0);
        gbc.writeMem(0x62fc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x3278, gbc.sp());
        EXPECT(0x62fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0237
        gbc.setState(0x149c, 0xf42d, 0xcbf0, 0xc0c, 0xcc87, 0x2f5b, 0x0, 0x0);
        gbc.writeMem(0x149c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xf42d, gbc.sp());
        EXPECT(0x149e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0238
        gbc.setState(0x2b83, 0xe14f, 0xd10, 0x54a8, 0xe17, 0x3102, 0x1, 0x1);
        gbc.writeMem(0x2b83, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xe14f, gbc.sp());
        EXPECT(0x2b85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0239
        gbc.setState(0x6997, 0x18c4, 0x58e0, 0x6649, 0x395a, 0xc913, 0x0, 0x1);
        gbc.writeMem(0x6997, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x18c4, gbc.sp());
        EXPECT(0x6999, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 023A
        gbc.setState(0x90c5, 0x57db, 0xab30, 0xa0af, 0x7866, 0xc270, 0x0, 0x1);
        gbc.writeMem(0x90c5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x57db, gbc.sp());
        EXPECT(0x90c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90c5));
        EXPECT(0x4d, gbc.readMem(0x90c6));
        // CB 4D 023B
        gbc.setState(0xdd92, 0x46c6, 0x2e20, 0xed53, 0x72ff, 0x3823, 0x1, 0x0);
        gbc.writeMem(0xdd92, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x46c6, gbc.sp());
        EXPECT(0xdd94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd92));
        EXPECT(0x4d, gbc.readMem(0xdd93));
        // CB 4D 023C
        gbc.setState(0x5f54, 0x885b, 0xe230, 0xfaa3, 0xf7a1, 0x7bb7, 0x0, 0x1);
        gbc.writeMem(0x5f54, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x885b, gbc.sp());
        EXPECT(0x5f56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 023D
        gbc.setState(0x773e, 0xaf45, 0xcb0, 0xa6c, 0xf603, 0xba1a, 0x1, 0x1);
        gbc.writeMem(0x773e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xaf45, gbc.sp());
        EXPECT(0x7740, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 023E
        gbc.setState(0xc651, 0xa1cd, 0x6b50, 0x9388, 0x23e7, 0xdd95, 0x1, 0x1);
        gbc.writeMem(0xc651, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xa1cd, gbc.sp());
        EXPECT(0xc653, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc651));
        EXPECT(0x4d, gbc.readMem(0xc652));
        // CB 4D 023F
        gbc.setState(0x27e8, 0x475d, 0x3600, 0xdf18, 0x812f, 0x71e, 0x1, 0x1);
        gbc.writeMem(0x27e8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x475d, gbc.sp());
        EXPECT(0x27ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0240
        gbc.setState(0xcb93, 0x3958, 0xf610, 0xa4d4, 0x7709, 0x2352, 0x1, 0x1);
        gbc.writeMem(0xcb93, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x3958, gbc.sp());
        EXPECT(0xcb95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb93));
        EXPECT(0x4d, gbc.readMem(0xcb94));
        // CB 4D 0241
        gbc.setState(0x13a1, 0x1d34, 0x9870, 0xcd89, 0x1e, 0xd448, 0x0, 0x0);
        gbc.writeMem(0x13a1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x1d34, gbc.sp());
        EXPECT(0x13a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0242
        gbc.setState(0x1b87, 0xab9f, 0xef90, 0x9f92, 0x919f, 0x2f3f, 0x1, 0x0);
        gbc.writeMem(0x1b87, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xab9f, gbc.sp());
        EXPECT(0x1b89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0243
        gbc.setState(0x4dae, 0xf840, 0xa20, 0xfe19, 0x8b67, 0xb8b5, 0x0, 0x1);
        gbc.writeMem(0x4dae, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xf840, gbc.sp());
        EXPECT(0x4db0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0244
        gbc.setState(0x81d6, 0x9324, 0x7670, 0xd285, 0x1dc9, 0x4f25, 0x0, 0x0);
        gbc.writeMem(0x81d6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x9324, gbc.sp());
        EXPECT(0x81d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81d6));
        EXPECT(0x4d, gbc.readMem(0x81d7));
        // CB 4D 0245
        gbc.setState(0xc58, 0x280d, 0xe420, 0x2858, 0x315e, 0x4a24, 0x0, 0x1);
        gbc.writeMem(0xc58, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x280d, gbc.sp());
        EXPECT(0xc5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0246
        gbc.setState(0xeb6c, 0x72a9, 0x5550, 0x3ee1, 0xdb16, 0x97ea, 0x0, 0x1);
        gbc.writeMem(0xeb6c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x72a9, gbc.sp());
        EXPECT(0xeb6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb6c));
        EXPECT(0x4d, gbc.readMem(0xeb6d));
        // CB 4D 0247
        gbc.setState(0x75c8, 0x8e2a, 0xfb60, 0xd2ef, 0xe4a7, 0xe20b, 0x1, 0x0);
        gbc.writeMem(0x75c8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x8e2a, gbc.sp());
        EXPECT(0x75ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0248
        gbc.setState(0xb508, 0x62f7, 0xbeb0, 0x3ae6, 0x71f2, 0x88bc, 0x1, 0x1);
        gbc.writeMem(0xb508, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x62f7, gbc.sp());
        EXPECT(0xb50a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb508));
        EXPECT(0x4d, gbc.readMem(0xb509));
        // CB 4D 0249
        gbc.setState(0xa6cd, 0xa384, 0xdd90, 0x9d72, 0xdc69, 0x450, 0x0, 0x1);
        gbc.writeMem(0xa6cd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xa384, gbc.sp());
        EXPECT(0xa6cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6cd));
        EXPECT(0x4d, gbc.readMem(0xa6ce));
        // CB 4D 024A
        gbc.setState(0x69b6, 0xb6ac, 0x4150, 0xa704, 0x66ee, 0x6b38, 0x0, 0x1);
        gbc.writeMem(0x69b6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xb6ac, gbc.sp());
        EXPECT(0x69b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 024B
        gbc.setState(0x2053, 0x89aa, 0x79c0, 0x20c2, 0xe4a0, 0xa0aa, 0x0, 0x0);
        gbc.writeMem(0x2053, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x89aa, gbc.sp());
        EXPECT(0x2055, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 024C
        gbc.setState(0x9c7b, 0xe864, 0x4cf0, 0x2be1, 0x8bcc, 0xb0d9, 0x0, 0x1);
        gbc.writeMem(0x9c7b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xe864, gbc.sp());
        EXPECT(0x9c7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c7b));
        EXPECT(0x4d, gbc.readMem(0x9c7c));
        // CB 4D 024D
        gbc.setState(0xcb18, 0xdc7, 0x2f10, 0x4575, 0x1d5f, 0x24a, 0x1, 0x1);
        gbc.writeMem(0xcb18, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xdc7, gbc.sp());
        EXPECT(0xcb1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb18));
        EXPECT(0x4d, gbc.readMem(0xcb19));
        // CB 4D 024E
        gbc.setState(0x10da, 0xc04c, 0x85f0, 0x6205, 0x8d63, 0xbe64, 0x1, 0x1);
        gbc.writeMem(0x10da, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xc04c, gbc.sp());
        EXPECT(0x10dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 024F
        gbc.setState(0xa786, 0xa985, 0x2b30, 0x3118, 0x532a, 0x40ec, 0x0, 0x1);
        gbc.writeMem(0xa786, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xa985, gbc.sp());
        EXPECT(0xa788, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa786));
        EXPECT(0x4d, gbc.readMem(0xa787));
        // CB 4D 0250
        gbc.setState(0x8e18, 0x77e1, 0xfd00, 0x26f2, 0x1f3a, 0x2f08, 0x0, 0x1);
        gbc.writeMem(0x8e18, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x77e1, gbc.sp());
        EXPECT(0x8e1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e18));
        EXPECT(0x4d, gbc.readMem(0x8e19));
        // CB 4D 0251
        gbc.setState(0xeeb4, 0x2975, 0xe650, 0xc729, 0x69bd, 0xfef6, 0x1, 0x1);
        gbc.writeMem(0xeeb4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x2975, gbc.sp());
        EXPECT(0xeeb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeeb4));
        EXPECT(0x4d, gbc.readMem(0xeeb5));
        // CB 4D 0252
        gbc.setState(0xe25a, 0x84b6, 0x4b0, 0x4fbc, 0xe1fe, 0xa6cf, 0x1, 0x1);
        gbc.writeMem(0xe25a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x84b6, gbc.sp());
        EXPECT(0xe25c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe25a));
        EXPECT(0x4d, gbc.readMem(0xe25b));
        // CB 4D 0253
        gbc.setState(0x603e, 0x88ce, 0xea80, 0xb667, 0xf46b, 0xed1e, 0x0, 0x1);
        gbc.writeMem(0x603e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x88ce, gbc.sp());
        EXPECT(0x6040, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0254
        gbc.setState(0x8c35, 0x1244, 0xe50, 0x1001, 0xc0b4, 0xed33, 0x0, 0x0);
        gbc.writeMem(0x8c35, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x1244, gbc.sp());
        EXPECT(0x8c37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c35));
        EXPECT(0x4d, gbc.readMem(0x8c36));
        // CB 4D 0255
        gbc.setState(0x8761, 0xb478, 0x20d0, 0xabf3, 0xa448, 0x19a, 0x0, 0x0);
        gbc.writeMem(0x8761, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xb478, gbc.sp());
        EXPECT(0x8763, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8761));
        EXPECT(0x4d, gbc.readMem(0x8762));
        // CB 4D 0256
        gbc.setState(0x9e64, 0x261e, 0xd760, 0xd9ae, 0x8cd0, 0xd87c, 0x1, 0x0);
        gbc.writeMem(0x9e64, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x261e, gbc.sp());
        EXPECT(0x9e66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e64));
        EXPECT(0x4d, gbc.readMem(0x9e65));
        // CB 4D 0257
        gbc.setState(0x55cd, 0x58e7, 0x4a20, 0xb5a6, 0x1c7f, 0x4987, 0x1, 0x0);
        gbc.writeMem(0x55cd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x58e7, gbc.sp());
        EXPECT(0x55cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0258
        gbc.setState(0x7781, 0x924b, 0x4f30, 0x753d, 0x9c2, 0x499, 0x0, 0x1);
        gbc.writeMem(0x7781, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x924b, gbc.sp());
        EXPECT(0x7783, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0259
        gbc.setState(0x9a8c, 0x8a91, 0xc730, 0x47df, 0x3908, 0x19fb, 0x0, 0x0);
        gbc.writeMem(0x9a8c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x8a91, gbc.sp());
        EXPECT(0x9a8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a8c));
        EXPECT(0x4d, gbc.readMem(0x9a8d));
        // CB 4D 025A
        gbc.setState(0xd23d, 0x50b4, 0x1210, 0xbc3, 0xf466, 0x26ec, 0x1, 0x0);
        gbc.writeMem(0xd23d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x50b4, gbc.sp());
        EXPECT(0xd23f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd23d));
        EXPECT(0x4d, gbc.readMem(0xd23e));
        // CB 4D 025B
        gbc.setState(0xeff2, 0x6f6e, 0xda70, 0xc2b3, 0x30a2, 0xdf5c, 0x0, 0x0);
        gbc.writeMem(0xeff2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x6f6e, gbc.sp());
        EXPECT(0xeff4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeff2));
        EXPECT(0x4d, gbc.readMem(0xeff3));
        // CB 4D 025C
        gbc.setState(0x37f3, 0x274c, 0x7300, 0x80b9, 0x831a, 0x88d, 0x0, 0x1);
        gbc.writeMem(0x37f3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x274c, gbc.sp());
        EXPECT(0x37f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 025D
        gbc.setState(0x8db, 0xfeaf, 0x93a0, 0xc1f6, 0xdadc, 0x9c8b, 0x1, 0x0);
        gbc.writeMem(0x8db, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xfeaf, gbc.sp());
        EXPECT(0x8dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 025E
        gbc.setState(0x44c7, 0xd46b, 0x42a0, 0xe84e, 0x84ff, 0xe7cc, 0x0, 0x0);
        gbc.writeMem(0x44c7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xd46b, gbc.sp());
        EXPECT(0x44c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 025F
        gbc.setState(0x2945, 0x9db7, 0x440, 0x537, 0x11ba, 0xc3c2, 0x1, 0x1);
        gbc.writeMem(0x2945, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x9db7, gbc.sp());
        EXPECT(0x2947, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0260
        gbc.setState(0x5419, 0x8cfe, 0x9b00, 0x2bbf, 0x3af, 0xa4a9, 0x0, 0x0);
        gbc.writeMem(0x5419, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x8cfe, gbc.sp());
        EXPECT(0x541b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0261
        gbc.setState(0x53dd, 0x440d, 0x51f0, 0xe689, 0x6d98, 0x382b, 0x0, 0x1);
        gbc.writeMem(0x53dd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x440d, gbc.sp());
        EXPECT(0x53df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0262
        gbc.setState(0x2986, 0x7ed4, 0xe640, 0x4ffc, 0xb11a, 0x7dcf, 0x1, 0x1);
        gbc.writeMem(0x2986, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x7ed4, gbc.sp());
        EXPECT(0x2988, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0263
        gbc.setState(0x56fd, 0x9fcb, 0x79a0, 0xeca8, 0xfbfc, 0xed21, 0x0, 0x1);
        gbc.writeMem(0x56fd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x9fcb, gbc.sp());
        EXPECT(0x56ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0264
        gbc.setState(0x2a74, 0xac6, 0x7df0, 0x4397, 0x6d1d, 0x2543, 0x0, 0x1);
        gbc.writeMem(0x2a74, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xac6, gbc.sp());
        EXPECT(0x2a76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0265
        gbc.setState(0x4d27, 0x8383, 0x5820, 0xc384, 0xd601, 0x5bd3, 0x1, 0x1);
        gbc.writeMem(0x4d27, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x8383, gbc.sp());
        EXPECT(0x4d29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0266
        gbc.setState(0x3bbc, 0x8654, 0x5ce0, 0xeb4, 0x50d4, 0x604b, 0x1, 0x0);
        gbc.writeMem(0x3bbc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x8654, gbc.sp());
        EXPECT(0x3bbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0267
        gbc.setState(0x57d, 0x3fc6, 0xc360, 0xd4df, 0xad93, 0x1eaa, 0x1, 0x0);
        gbc.writeMem(0x57d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x3fc6, gbc.sp());
        EXPECT(0x57f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0268
        gbc.setState(0x40e3, 0x4d73, 0x9d00, 0x5a70, 0x428f, 0xa825, 0x1, 0x0);
        gbc.writeMem(0x40e3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x4d73, gbc.sp());
        EXPECT(0x40e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0269
        gbc.setState(0x14e2, 0x694, 0xfaa0, 0x2a7a, 0x13d9, 0xf461, 0x0, 0x0);
        gbc.writeMem(0x14e2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x694, gbc.sp());
        EXPECT(0x14e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 026A
        gbc.setState(0x3b2, 0xfc78, 0x7280, 0x1ed9, 0xdc82, 0x53c1, 0x1, 0x1);
        gbc.writeMem(0x3b2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xfc78, gbc.sp());
        EXPECT(0x3b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 026B
        gbc.setState(0x2f80, 0x4f5a, 0x2cf0, 0x5b0c, 0x8ad6, 0x559f, 0x1, 0x0);
        gbc.writeMem(0x2f80, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x4f5a, gbc.sp());
        EXPECT(0x2f82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 026C
        gbc.setState(0xc191, 0x69f2, 0x3bd0, 0x6c75, 0xd3bf, 0xcde8, 0x1, 0x1);
        gbc.writeMem(0xc191, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x69f2, gbc.sp());
        EXPECT(0xc193, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc191));
        EXPECT(0x4d, gbc.readMem(0xc192));
        // CB 4D 026D
        gbc.setState(0xf93, 0xa817, 0x6a90, 0x5da9, 0xd14b, 0xfc2c, 0x0, 0x0);
        gbc.writeMem(0xf93, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xa817, gbc.sp());
        EXPECT(0xf95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 026E
        gbc.setState(0xeca1, 0xec48, 0xffe0, 0x527f, 0xdfca, 0xba09, 0x0, 0x1);
        gbc.writeMem(0xeca1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xec48, gbc.sp());
        EXPECT(0xeca3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeca1));
        EXPECT(0x4d, gbc.readMem(0xeca2));
        // CB 4D 026F
        gbc.setState(0x52e0, 0xf3f5, 0x83b0, 0x89e, 0xe40, 0xf0c6, 0x0, 0x0);
        gbc.writeMem(0x52e0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xf3f5, gbc.sp());
        EXPECT(0x52e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0270
        gbc.setState(0x4ad, 0x2b2b, 0xc240, 0x4be0, 0x2596, 0x1255, 0x1, 0x1);
        gbc.writeMem(0x4ad, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x2b2b, gbc.sp());
        EXPECT(0x4af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0272
        gbc.setState(0xbd2d, 0x87d7, 0x73e0, 0x94e, 0x6523, 0x93c9, 0x0, 0x1);
        gbc.writeMem(0xbd2d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x87d7, gbc.sp());
        EXPECT(0xbd2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd2d));
        EXPECT(0x4d, gbc.readMem(0xbd2e));
        // CB 4D 0273
        gbc.setState(0x59, 0xae16, 0x7700, 0x7b0, 0xa135, 0x967, 0x1, 0x0);
        gbc.writeMem(0x59, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xae16, gbc.sp());
        EXPECT(0x5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0274
        gbc.setState(0xd3c1, 0xcae7, 0x37f0, 0xa89, 0xc1c7, 0x2d0a, 0x0, 0x0);
        gbc.writeMem(0xd3c1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xcae7, gbc.sp());
        EXPECT(0xd3c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3c1));
        EXPECT(0x4d, gbc.readMem(0xd3c2));
        // CB 4D 0275
        gbc.setState(0x3bb0, 0xc24a, 0x86f0, 0xb847, 0x2a88, 0xb24d, 0x1, 0x1);
        gbc.writeMem(0x3bb0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xc24a, gbc.sp());
        EXPECT(0x3bb2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0276
        gbc.setState(0xb533, 0x3638, 0x11e0, 0x616, 0x48a5, 0x10aa, 0x1, 0x1);
        gbc.writeMem(0xb533, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x3638, gbc.sp());
        EXPECT(0xb535, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb533));
        EXPECT(0x4d, gbc.readMem(0xb534));
        // CB 4D 0277
        gbc.setState(0xada, 0x55a7, 0xfb60, 0xad2b, 0xc17c, 0x326a, 0x0, 0x0);
        gbc.writeMem(0xada, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x55a7, gbc.sp());
        EXPECT(0xadc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0278
        gbc.setState(0x3348, 0xd48d, 0x5a50, 0x7d0d, 0xfe07, 0x4f35, 0x1, 0x1);
        gbc.writeMem(0x3348, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xd48d, gbc.sp());
        EXPECT(0x334a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0279
        gbc.setState(0xde86, 0x6696, 0x210, 0xc609, 0xf048, 0x4152, 0x0, 0x1);
        gbc.writeMem(0xde86, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x6696, gbc.sp());
        EXPECT(0xde88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde86));
        EXPECT(0x4d, gbc.readMem(0xde87));
        // CB 4D 027A
        gbc.setState(0x1646, 0xf504, 0xc450, 0xc17d, 0xdd32, 0xe1d, 0x1, 0x1);
        gbc.writeMem(0x1646, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xf504, gbc.sp());
        EXPECT(0x1648, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 027B
        gbc.setState(0x9e3f, 0x8522, 0x2f10, 0x446b, 0x9519, 0x467e, 0x0, 0x0);
        gbc.writeMem(0x9e3f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x8522, gbc.sp());
        EXPECT(0x9e41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e3f));
        EXPECT(0x4d, gbc.readMem(0x9e40));
        // CB 4D 027C
        gbc.setState(0x6f2a, 0xbb4f, 0x2380, 0x181b, 0x5043, 0xd78c, 0x1, 0x0);
        gbc.writeMem(0x6f2a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xbb4f, gbc.sp());
        EXPECT(0x6f2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 027D
        gbc.setState(0x31a1, 0x6cda, 0xe860, 0x53fc, 0x50f0, 0xe0d2, 0x1, 0x0);
        gbc.writeMem(0x31a1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x6cda, gbc.sp());
        EXPECT(0x31a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 027E
        gbc.setState(0x3647, 0xc7bf, 0xb090, 0xae0a, 0xb55d, 0x31a0, 0x0, 0x0);
        gbc.writeMem(0x3647, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xc7bf, gbc.sp());
        EXPECT(0x3649, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 027F
        gbc.setState(0xe334, 0xbd8f, 0x8f70, 0x6f0d, 0x230f, 0xa31b, 0x1, 0x1);
        gbc.writeMem(0xe334, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xbd8f, gbc.sp());
        EXPECT(0xe336, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe334));
        EXPECT(0x4d, gbc.readMem(0xe335));
        // CB 4D 0280
        gbc.setState(0x9047, 0x8c31, 0x5110, 0xc964, 0x83a3, 0xb5a7, 0x0, 0x0);
        gbc.writeMem(0x9047, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x8c31, gbc.sp());
        EXPECT(0x9049, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9047));
        EXPECT(0x4d, gbc.readMem(0x9048));
        // CB 4D 0281
        gbc.setState(0x6498, 0x5b75, 0x2ac0, 0xc3b, 0x426c, 0x22b, 0x0, 0x0);
        gbc.writeMem(0x6498, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x5b75, gbc.sp());
        EXPECT(0x649a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0282
        gbc.setState(0xdeda, 0x8e74, 0x15a0, 0xa371, 0x47d1, 0x61be, 0x0, 0x1);
        gbc.writeMem(0xdeda, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x8e74, gbc.sp());
        EXPECT(0xdedc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdeda));
        EXPECT(0x4d, gbc.readMem(0xdedb));
        // CB 4D 0283
        gbc.setState(0x360d, 0xf953, 0x8360, 0x4e99, 0x24c1, 0xa3c9, 0x0, 0x1);
        gbc.writeMem(0x360d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xf953, gbc.sp());
        EXPECT(0x360f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0284
        gbc.setState(0xa904, 0x3f01, 0x8bc0, 0x9a5, 0x435f, 0x2074, 0x0, 0x0);
        gbc.writeMem(0xa904, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x3f01, gbc.sp());
        EXPECT(0xa906, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa904));
        EXPECT(0x4d, gbc.readMem(0xa905));
        // CB 4D 0285
        gbc.setState(0x131, 0x8478, 0x9e70, 0xbe3a, 0x9881, 0x61ff, 0x0, 0x0);
        gbc.writeMem(0x131, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x8478, gbc.sp());
        EXPECT(0x133, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0286
        gbc.setState(0xa69b, 0x1d7a, 0xadd0, 0x5af2, 0x629, 0xeeca, 0x0, 0x0);
        gbc.writeMem(0xa69b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x1d7a, gbc.sp());
        EXPECT(0xa69d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa69b));
        EXPECT(0x4d, gbc.readMem(0xa69c));
        // CB 4D 0287
        gbc.setState(0xbcce, 0x711a, 0x64e0, 0x90c9, 0xaf7f, 0xd52e, 0x0, 0x1);
        gbc.writeMem(0xbcce, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x711a, gbc.sp());
        EXPECT(0xbcd0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcce));
        EXPECT(0x4d, gbc.readMem(0xbccf));
        // CB 4D 0288
        gbc.setState(0x9f73, 0x1d3c, 0x1050, 0xc0d, 0x7cc3, 0xcea4, 0x1, 0x0);
        gbc.writeMem(0x9f73, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x1d3c, gbc.sp());
        EXPECT(0x9f75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f73));
        EXPECT(0x4d, gbc.readMem(0x9f74));
        // CB 4D 0289
        gbc.setState(0x175b, 0xe5e9, 0xe9f0, 0xddc8, 0x9125, 0xff1, 0x1, 0x0);
        gbc.writeMem(0x175b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xe5e9, gbc.sp());
        EXPECT(0x175d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 028A
        gbc.setState(0x43d7, 0x9673, 0x5380, 0x4b9c, 0x5b71, 0xfdac, 0x0, 0x0);
        gbc.writeMem(0x43d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x9673, gbc.sp());
        EXPECT(0x43d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 028B
        gbc.setState(0x59f8, 0x8453, 0x3f0, 0x334f, 0x8108, 0x1c87, 0x1, 0x0);
        gbc.writeMem(0x59f8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x8453, gbc.sp());
        EXPECT(0x59fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 028C
        gbc.setState(0xa2d8, 0x6936, 0x76a0, 0x7450, 0x6e34, 0x4785, 0x0, 0x1);
        gbc.writeMem(0xa2d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x6936, gbc.sp());
        EXPECT(0xa2da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2d8));
        EXPECT(0x4d, gbc.readMem(0xa2d9));
        // CB 4D 028D
        gbc.setState(0x53ae, 0xa485, 0x2200, 0x3075, 0x9f49, 0x4ec2, 0x0, 0x1);
        gbc.writeMem(0x53ae, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xa485, gbc.sp());
        EXPECT(0x53b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 028E
        gbc.setState(0x2686, 0x36f1, 0x1dc0, 0x6496, 0xc9c8, 0xef11, 0x1, 0x1);
        gbc.writeMem(0x2686, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x36f1, gbc.sp());
        EXPECT(0x2688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 028F
        gbc.setState(0x1daa, 0xc410, 0x2670, 0x9577, 0x4d36, 0x773f, 0x0, 0x0);
        gbc.writeMem(0x1daa, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xc410, gbc.sp());
        EXPECT(0x1dac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0290
        gbc.setState(0x74cb, 0xcf8f, 0x49b0, 0xa5a2, 0xfc54, 0xff4, 0x1, 0x1);
        gbc.writeMem(0x74cb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xcf8f, gbc.sp());
        EXPECT(0x74cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0291
        gbc.setState(0xbaf1, 0xd9f7, 0x8f00, 0xe4ac, 0xee89, 0xfbec, 0x1, 0x1);
        gbc.writeMem(0xbaf1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xd9f7, gbc.sp());
        EXPECT(0xbaf3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaf1));
        EXPECT(0x4d, gbc.readMem(0xbaf2));
        // CB 4D 0292
        gbc.setState(0xdef9, 0x6188, 0xdf50, 0x710c, 0xd234, 0x9042, 0x1, 0x0);
        gbc.writeMem(0xdef9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x6188, gbc.sp());
        EXPECT(0xdefb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdef9));
        EXPECT(0x4d, gbc.readMem(0xdefa));
        // CB 4D 0293
        gbc.setState(0x48c0, 0x91f5, 0xfe90, 0x1c37, 0xa94f, 0x1598, 0x0, 0x0);
        gbc.writeMem(0x48c0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x91f5, gbc.sp());
        EXPECT(0x48c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0295
        gbc.setState(0x85c2, 0xb560, 0xea20, 0xcd06, 0x65a5, 0x927c, 0x0, 0x1);
        gbc.writeMem(0x85c2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xb560, gbc.sp());
        EXPECT(0x85c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85c2));
        EXPECT(0x4d, gbc.readMem(0x85c3));
        // CB 4D 0296
        gbc.setState(0xc8d8, 0x30ae, 0x9960, 0x33e, 0x11b0, 0x5bfe, 0x0, 0x0);
        gbc.writeMem(0xc8d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x30ae, gbc.sp());
        EXPECT(0xc8da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8d8));
        EXPECT(0x4d, gbc.readMem(0xc8d9));
        // CB 4D 0297
        gbc.setState(0x2b7f, 0xdb60, 0x5ec0, 0xbd0a, 0x551f, 0xdb6, 0x0, 0x1);
        gbc.writeMem(0x2b7f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xdb60, gbc.sp());
        EXPECT(0x2b81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0298
        gbc.setState(0x4437, 0xbfca, 0x1080, 0x87fc, 0xf9f7, 0xab80, 0x1, 0x0);
        gbc.writeMem(0x4437, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xbfca, gbc.sp());
        EXPECT(0x4439, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0299
        gbc.setState(0x1de, 0xccf6, 0x2610, 0xf7c2, 0x1e0d, 0xa6ce, 0x1, 0x1);
        gbc.writeMem(0x1de, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xccf6, gbc.sp());
        EXPECT(0x1e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 029A
        gbc.setState(0x3ad7, 0xdacb, 0xcbf0, 0x784, 0x65dd, 0xdfe6, 0x0, 0x1);
        gbc.writeMem(0x3ad7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xdacb, gbc.sp());
        EXPECT(0x3ad9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 029B
        gbc.setState(0x186a, 0x9e52, 0xf990, 0x8cd5, 0x82ed, 0x669d, 0x1, 0x0);
        gbc.writeMem(0x186a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x9e52, gbc.sp());
        EXPECT(0x186c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 029C
        gbc.setState(0x1215, 0xd961, 0x590, 0xd8cd, 0x2ac0, 0xb2ad, 0x0, 0x1);
        gbc.writeMem(0x1215, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xd961, gbc.sp());
        EXPECT(0x1217, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 029D
        gbc.setState(0xb05c, 0x3dc0, 0x42c0, 0x2a4f, 0xc93c, 0x7966, 0x0, 0x0);
        gbc.writeMem(0xb05c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x3dc0, gbc.sp());
        EXPECT(0xb05e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb05c));
        EXPECT(0x4d, gbc.readMem(0xb05d));
        // CB 4D 029E
        gbc.setState(0xee26, 0x41b6, 0xf710, 0xe330, 0x709, 0x9525, 0x0, 0x1);
        gbc.writeMem(0xee26, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x41b6, gbc.sp());
        EXPECT(0xee28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee26));
        EXPECT(0x4d, gbc.readMem(0xee27));
        // CB 4D 029F
        gbc.setState(0x10e0, 0xdfec, 0x7360, 0xf31, 0xf823, 0x428c, 0x1, 0x1);
        gbc.writeMem(0x10e0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xdfec, gbc.sp());
        EXPECT(0x10e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02A0
        gbc.setState(0x1ba0, 0x4e4d, 0x4f70, 0x8ffc, 0x18ea, 0xbf5a, 0x1, 0x0);
        gbc.writeMem(0x1ba0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x4e4d, gbc.sp());
        EXPECT(0x1ba2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02A1
        gbc.setState(0xb07c, 0xe95f, 0xaf60, 0xc8c8, 0x7b5b, 0xb9ef, 0x0, 0x0);
        gbc.writeMem(0xb07c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xe95f, gbc.sp());
        EXPECT(0xb07e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb07c));
        EXPECT(0x4d, gbc.readMem(0xb07d));
        // CB 4D 02A2
        gbc.setState(0x8ac4, 0xaf58, 0xbdd0, 0x6ca0, 0x782c, 0x7c30, 0x1, 0x1);
        gbc.writeMem(0x8ac4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xaf58, gbc.sp());
        EXPECT(0x8ac6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ac4));
        EXPECT(0x4d, gbc.readMem(0x8ac5));
        // CB 4D 02A3
        gbc.setState(0x72a8, 0xf52, 0xfca0, 0x5b5d, 0x45bb, 0xbf83, 0x1, 0x0);
        gbc.writeMem(0x72a8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xf52, gbc.sp());
        EXPECT(0x72aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02A4
        gbc.setState(0x73c9, 0xb018, 0xeb20, 0xd9cf, 0xa73b, 0xcb4a, 0x1, 0x0);
        gbc.writeMem(0x73c9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xb018, gbc.sp());
        EXPECT(0x73cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02A5
        gbc.setState(0xabd6, 0x7b12, 0xd890, 0x5747, 0x2a40, 0x132d, 0x0, 0x0);
        gbc.writeMem(0xabd6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x7b12, gbc.sp());
        EXPECT(0xabd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabd6));
        EXPECT(0x4d, gbc.readMem(0xabd7));
        // CB 4D 02A6
        gbc.setState(0x53a5, 0x615e, 0x9e80, 0xf58c, 0xd20d, 0xed73, 0x1, 0x1);
        gbc.writeMem(0x53a5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x615e, gbc.sp());
        EXPECT(0x53a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02A7
        gbc.setState(0x6f76, 0xdacf, 0x4140, 0xb579, 0xa845, 0x4be4, 0x0, 0x1);
        gbc.writeMem(0x6f76, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xdacf, gbc.sp());
        EXPECT(0x6f78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02A8
        gbc.setState(0x274d, 0xd138, 0x65b0, 0xe912, 0xba74, 0x684b, 0x0, 0x1);
        gbc.writeMem(0x274d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xd138, gbc.sp());
        EXPECT(0x274f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02A9
        gbc.setState(0x96b2, 0xb1, 0xe9d0, 0x5045, 0xfe43, 0xb0c6, 0x1, 0x0);
        gbc.writeMem(0x96b2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xb1, gbc.sp());
        EXPECT(0x96b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96b2));
        EXPECT(0x4d, gbc.readMem(0x96b3));
        // CB 4D 02AA
        gbc.setState(0x6c0, 0x7d96, 0xaff0, 0xb6f8, 0x6fe2, 0x263a, 0x1, 0x1);
        gbc.writeMem(0x6c0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x7d96, gbc.sp());
        EXPECT(0x6c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02AB
        gbc.setState(0xcf8c, 0x1cab, 0x1380, 0xbf0c, 0x140, 0xcdd6, 0x0, 0x0);
        gbc.writeMem(0xcf8c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x1cab, gbc.sp());
        EXPECT(0xcf8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf8c));
        EXPECT(0x4d, gbc.readMem(0xcf8d));
        // CB 4D 02AC
        gbc.setState(0x8b84, 0xc2ea, 0xd9e0, 0x6742, 0x1ca8, 0xcef0, 0x0, 0x0);
        gbc.writeMem(0x8b84, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc2ea, gbc.sp());
        EXPECT(0x8b86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b84));
        EXPECT(0x4d, gbc.readMem(0x8b85));
        // CB 4D 02AD
        gbc.setState(0xb34f, 0x1f7f, 0x20e0, 0xbb2c, 0x698b, 0x1806, 0x1, 0x0);
        gbc.writeMem(0xb34f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x1f7f, gbc.sp());
        EXPECT(0xb351, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb34f));
        EXPECT(0x4d, gbc.readMem(0xb350));
        // CB 4D 02AE
        gbc.setState(0xaefc, 0x713b, 0x3110, 0xe2ea, 0xae07, 0x94d9, 0x0, 0x0);
        gbc.writeMem(0xaefc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x713b, gbc.sp());
        EXPECT(0xaefe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaefc));
        EXPECT(0x4d, gbc.readMem(0xaefd));
        // CB 4D 02AF
        gbc.setState(0xbe80, 0x777d, 0x4030, 0xe4f4, 0x28e1, 0xdcd9, 0x1, 0x0);
        gbc.writeMem(0xbe80, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x777d, gbc.sp());
        EXPECT(0xbe82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe80));
        EXPECT(0x4d, gbc.readMem(0xbe81));
        // CB 4D 02B0
        gbc.setState(0xdaae, 0x2ad2, 0xd910, 0xd2e1, 0x2878, 0x2f06, 0x1, 0x0);
        gbc.writeMem(0xdaae, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x2ad2, gbc.sp());
        EXPECT(0xdab0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaae));
        EXPECT(0x4d, gbc.readMem(0xdaaf));
        // CB 4D 02B1
        gbc.setState(0xbee3, 0x8fc9, 0xd7d0, 0x99ff, 0x9409, 0x6db2, 0x0, 0x1);
        gbc.writeMem(0xbee3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x8fc9, gbc.sp());
        EXPECT(0xbee5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbee3));
        EXPECT(0x4d, gbc.readMem(0xbee4));
        // CB 4D 02B2
        gbc.setState(0x3a1, 0xbac4, 0x5310, 0x9cb9, 0x6b2b, 0x1a7f, 0x1, 0x0);
        gbc.writeMem(0x3a1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xbac4, gbc.sp());
        EXPECT(0x3a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02B3
        gbc.setState(0xe49b, 0x1cec, 0xbf80, 0xf941, 0xa03d, 0x2e6c, 0x0, 0x0);
        gbc.writeMem(0xe49b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x1cec, gbc.sp());
        EXPECT(0xe49d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe49b));
        EXPECT(0x4d, gbc.readMem(0xe49c));
        // CB 4D 02B4
        gbc.setState(0xef55, 0x2e02, 0x3770, 0x12c3, 0xa8dd, 0xd9dc, 0x0, 0x1);
        gbc.writeMem(0xef55, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x2e02, gbc.sp());
        EXPECT(0xef57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef55));
        EXPECT(0x4d, gbc.readMem(0xef56));
        // CB 4D 02B5
        gbc.setState(0x8bc1, 0x93d5, 0x1820, 0x7b34, 0x339d, 0x7123, 0x0, 0x1);
        gbc.writeMem(0x8bc1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x93d5, gbc.sp());
        EXPECT(0x8bc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bc1));
        EXPECT(0x4d, gbc.readMem(0x8bc2));
        // CB 4D 02B6
        gbc.setState(0x6940, 0xeabf, 0xf5c0, 0xd779, 0x329d, 0xf208, 0x1, 0x0);
        gbc.writeMem(0x6940, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xeabf, gbc.sp());
        EXPECT(0x6942, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02B7
        gbc.setState(0x9f89, 0xdb64, 0x9570, 0x25ff, 0x57bd, 0x511a, 0x0, 0x0);
        gbc.writeMem(0x9f89, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xdb64, gbc.sp());
        EXPECT(0x9f8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f89));
        EXPECT(0x4d, gbc.readMem(0x9f8a));
        // CB 4D 02B8
        gbc.setState(0x1a48, 0x8a42, 0xb940, 0x645d, 0x4226, 0x419a, 0x1, 0x0);
        gbc.writeMem(0x1a48, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x8a42, gbc.sp());
        EXPECT(0x1a4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02B9
        gbc.setState(0x850c, 0xb1f5, 0x8220, 0x6c03, 0x8387, 0xc931, 0x1, 0x0);
        gbc.writeMem(0x850c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xb1f5, gbc.sp());
        EXPECT(0x850e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x850c));
        EXPECT(0x4d, gbc.readMem(0x850d));
        // CB 4D 02BA
        gbc.setState(0xce49, 0x52a4, 0x9a00, 0x6c3, 0xec48, 0x3094, 0x0, 0x1);
        gbc.writeMem(0xce49, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x52a4, gbc.sp());
        EXPECT(0xce4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce49));
        EXPECT(0x4d, gbc.readMem(0xce4a));
        // CB 4D 02BB
        gbc.setState(0xb94, 0xd548, 0x7b60, 0x9ae, 0xb5be, 0xd33f, 0x1, 0x0);
        gbc.writeMem(0xb94, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xd548, gbc.sp());
        EXPECT(0xb96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02BC
        gbc.setState(0x17d1, 0xe539, 0x8ef0, 0xfb74, 0x7cf9, 0x54cc, 0x1, 0x1);
        gbc.writeMem(0x17d1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xe539, gbc.sp());
        EXPECT(0x17d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02BD
        gbc.setState(0xe2da, 0x452f, 0xc920, 0xe9aa, 0x9db3, 0xa0b4, 0x1, 0x0);
        gbc.writeMem(0xe2da, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x452f, gbc.sp());
        EXPECT(0xe2dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2da));
        EXPECT(0x4d, gbc.readMem(0xe2db));
        // CB 4D 02BE
        gbc.setState(0x2538, 0xd222, 0x9350, 0xa6aa, 0xad78, 0xf002, 0x1, 0x0);
        gbc.writeMem(0x2538, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xd222, gbc.sp());
        EXPECT(0x253a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02BF
        gbc.setState(0x97a1, 0x9d86, 0x2420, 0x5df3, 0x94a0, 0xf7ff, 0x0, 0x1);
        gbc.writeMem(0x97a1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x9d86, gbc.sp());
        EXPECT(0x97a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97a1));
        EXPECT(0x4d, gbc.readMem(0x97a2));
        // CB 4D 02C0
        gbc.setState(0x40dc, 0x211b, 0x3f40, 0x2620, 0x76cc, 0xd947, 0x0, 0x1);
        gbc.writeMem(0x40dc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x211b, gbc.sp());
        EXPECT(0x40de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02C1
        gbc.setState(0x7122, 0x4d6, 0xac50, 0x76f7, 0xe963, 0xb622, 0x1, 0x1);
        gbc.writeMem(0x7122, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x4d6, gbc.sp());
        EXPECT(0x7124, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02C2
        gbc.setState(0xc351, 0x8efd, 0x55c0, 0x8776, 0xe9a0, 0x31b4, 0x1, 0x0);
        gbc.writeMem(0xc351, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x8efd, gbc.sp());
        EXPECT(0xc353, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc351));
        EXPECT(0x4d, gbc.readMem(0xc352));
        // CB 4D 02C3
        gbc.setState(0x139d, 0xdf1d, 0x7e90, 0x3792, 0x3922, 0xa79e, 0x0, 0x0);
        gbc.writeMem(0x139d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xdf1d, gbc.sp());
        EXPECT(0x139f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02C4
        gbc.setState(0x64aa, 0x87e6, 0xac00, 0x2f5f, 0xb9f1, 0xecad, 0x1, 0x0);
        gbc.writeMem(0x64aa, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x87e6, gbc.sp());
        EXPECT(0x64ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02C5
        gbc.setState(0x689c, 0x6fbd, 0x3640, 0x8644, 0x573e, 0x6eb1, 0x1, 0x0);
        gbc.writeMem(0x689c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x6fbd, gbc.sp());
        EXPECT(0x689e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02C6
        gbc.setState(0x96db, 0xf5a6, 0xfb60, 0x3f6b, 0x7fe9, 0xae11, 0x0, 0x0);
        gbc.writeMem(0x96db, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xf5a6, gbc.sp());
        EXPECT(0x96dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96db));
        EXPECT(0x4d, gbc.readMem(0x96dc));
        // CB 4D 02C7
        gbc.setState(0xca81, 0x718e, 0x94e0, 0xb67c, 0xd8d0, 0x4c80, 0x1, 0x1);
        gbc.writeMem(0xca81, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x718e, gbc.sp());
        EXPECT(0xca83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca81));
        EXPECT(0x4d, gbc.readMem(0xca82));
        // CB 4D 02C9
        gbc.setState(0x51a2, 0xd6c1, 0x4b80, 0x462d, 0xc4c4, 0x650b, 0x1, 0x0);
        gbc.writeMem(0x51a2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xd6c1, gbc.sp());
        EXPECT(0x51a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02CA
        gbc.setState(0x65e6, 0xe4d6, 0x8360, 0x6885, 0x3582, 0xd255, 0x1, 0x0);
        gbc.writeMem(0x65e6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xe4d6, gbc.sp());
        EXPECT(0x65e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02CB
        gbc.setState(0xa109, 0x9c18, 0xd480, 0xd248, 0x88f, 0xca46, 0x0, 0x1);
        gbc.writeMem(0xa109, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x9c18, gbc.sp());
        EXPECT(0xa10b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa109));
        EXPECT(0x4d, gbc.readMem(0xa10a));
        // CB 4D 02CC
        gbc.setState(0x21cf, 0x855b, 0x7080, 0xffff, 0xa28c, 0x481b, 0x0, 0x0);
        gbc.writeMem(0x21cf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x855b, gbc.sp());
        EXPECT(0x21d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02CD
        gbc.setState(0x46f7, 0x4c91, 0x5bb0, 0x70ac, 0x7f5d, 0xb74f, 0x0, 0x1);
        gbc.writeMem(0x46f7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x4c91, gbc.sp());
        EXPECT(0x46f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02CE
        gbc.setState(0x38f0, 0x91e3, 0x32a0, 0xddfc, 0xc214, 0x3ef7, 0x1, 0x1);
        gbc.writeMem(0x38f0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x91e3, gbc.sp());
        EXPECT(0x38f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02CF
        gbc.setState(0x822a, 0x4625, 0xd5e0, 0x13fb, 0xc001, 0x6f28, 0x0, 0x1);
        gbc.writeMem(0x822a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x4625, gbc.sp());
        EXPECT(0x822c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x822a));
        EXPECT(0x4d, gbc.readMem(0x822b));
        // CB 4D 02D0
        gbc.setState(0xeff0, 0xd2ce, 0x4050, 0xe1bd, 0xed2d, 0x6035, 0x0, 0x1);
        gbc.writeMem(0xeff0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xd2ce, gbc.sp());
        EXPECT(0xeff2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeff0));
        EXPECT(0x4d, gbc.readMem(0xeff1));
        // CB 4D 02D1
        gbc.setState(0x9164, 0x6f4d, 0xe660, 0x71a1, 0x9028, 0x8f21, 0x1, 0x1);
        gbc.writeMem(0x9164, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x6f4d, gbc.sp());
        EXPECT(0x9166, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9164));
        EXPECT(0x4d, gbc.readMem(0x9165));
        // CB 4D 02D2
        gbc.setState(0xbddb, 0xed15, 0xf790, 0xcf0e, 0x1e70, 0x87e4, 0x1, 0x1);
        gbc.writeMem(0xbddb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xed15, gbc.sp());
        EXPECT(0xbddd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbddb));
        EXPECT(0x4d, gbc.readMem(0xbddc));
        // CB 4D 02D3
        gbc.setState(0x1788, 0x1c54, 0x1780, 0xe187, 0x31a8, 0x8444, 0x1, 0x0);
        gbc.writeMem(0x1788, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x1c54, gbc.sp());
        EXPECT(0x178a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02D4
        gbc.setState(0xa749, 0x8847, 0xa3d0, 0xdc1c, 0x32a3, 0x325e, 0x1, 0x0);
        gbc.writeMem(0xa749, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x8847, gbc.sp());
        EXPECT(0xa74b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa749));
        EXPECT(0x4d, gbc.readMem(0xa74a));
        // CB 4D 02D5
        gbc.setState(0x1f6b, 0xedd5, 0xf60, 0x8394, 0x9717, 0xa20, 0x0, 0x1);
        gbc.writeMem(0x1f6b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xedd5, gbc.sp());
        EXPECT(0x1f6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02D6
        gbc.setState(0xc524, 0x4eee, 0x2e10, 0x4677, 0xc82b, 0xbb7b, 0x1, 0x0);
        gbc.writeMem(0xc524, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x4eee, gbc.sp());
        EXPECT(0xc526, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc524));
        EXPECT(0x4d, gbc.readMem(0xc525));
        // CB 4D 02D7
        gbc.setState(0xc6eb, 0x17a0, 0xb330, 0xf42a, 0x5122, 0x7cd4, 0x1, 0x0);
        gbc.writeMem(0xc6eb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x17a0, gbc.sp());
        EXPECT(0xc6ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6eb));
        EXPECT(0x4d, gbc.readMem(0xc6ec));
        // CB 4D 02D8
        gbc.setState(0x53d6, 0x70d3, 0xe300, 0xcf6a, 0x5def, 0xd99a, 0x0, 0x0);
        gbc.writeMem(0x53d6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x70d3, gbc.sp());
        EXPECT(0x53d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02D9
        gbc.setState(0x59a, 0xa4d2, 0xb660, 0xb488, 0x8ebb, 0x38a4, 0x1, 0x0);
        gbc.writeMem(0x59a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xa4d2, gbc.sp());
        EXPECT(0x59c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02DA
        gbc.setState(0xdaf3, 0x6e39, 0xa9f0, 0xca0a, 0x9daa, 0xd11, 0x0, 0x1);
        gbc.writeMem(0xdaf3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x6e39, gbc.sp());
        EXPECT(0xdaf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaf3));
        EXPECT(0x4d, gbc.readMem(0xdaf4));
        // CB 4D 02DB
        gbc.setState(0xdf2d, 0xb6d5, 0xfd40, 0x19fc, 0x1cd5, 0xb239, 0x1, 0x0);
        gbc.writeMem(0xdf2d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xb6d5, gbc.sp());
        EXPECT(0xdf2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf2d));
        EXPECT(0x4d, gbc.readMem(0xdf2e));
        // CB 4D 02DC
        gbc.setState(0x3900, 0x4e58, 0x94f0, 0x1986, 0x57dd, 0x2884, 0x0, 0x1);
        gbc.writeMem(0x3900, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x4e58, gbc.sp());
        EXPECT(0x3902, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02DD
        gbc.setState(0x3759, 0xc730, 0x3400, 0x926, 0x8678, 0x806d, 0x1, 0x0);
        gbc.writeMem(0x3759, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xc730, gbc.sp());
        EXPECT(0x375b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02DE
        gbc.setState(0xe454, 0xd809, 0x4b50, 0x3949, 0xb5c5, 0xf98e, 0x0, 0x1);
        gbc.writeMem(0xe454, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xd809, gbc.sp());
        EXPECT(0xe456, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe454));
        EXPECT(0x4d, gbc.readMem(0xe455));
        // CB 4D 02DF
        gbc.setState(0x9d6a, 0xbffe, 0x9960, 0x60ae, 0x1fda, 0x90a9, 0x0, 0x0);
        gbc.writeMem(0x9d6a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xbffe, gbc.sp());
        EXPECT(0x9d6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d6a));
        EXPECT(0x4d, gbc.readMem(0x9d6b));
        // CB 4D 02E0
        gbc.setState(0x33a, 0x3945, 0x3db0, 0xbfbc, 0x565, 0x5bb4, 0x0, 0x1);
        gbc.writeMem(0x33a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x3945, gbc.sp());
        EXPECT(0x33c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02E1
        gbc.setState(0x9ea0, 0x68a5, 0x7050, 0x60a5, 0x873b, 0x1635, 0x1, 0x0);
        gbc.writeMem(0x9ea0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x68a5, gbc.sp());
        EXPECT(0x9ea2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ea0));
        EXPECT(0x4d, gbc.readMem(0x9ea1));
        // CB 4D 02E2
        gbc.setState(0x85e5, 0x847a, 0xdfa0, 0x724a, 0x49f8, 0x493f, 0x0, 0x0);
        gbc.writeMem(0x85e5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x847a, gbc.sp());
        EXPECT(0x85e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85e5));
        EXPECT(0x4d, gbc.readMem(0x85e6));
        // CB 4D 02E3
        gbc.setState(0x1f73, 0x6ddc, 0x5860, 0x8671, 0xca96, 0x98f3, 0x1, 0x0);
        gbc.writeMem(0x1f73, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x6ddc, gbc.sp());
        EXPECT(0x1f75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02E4
        gbc.setState(0xc30, 0x7d2a, 0x2fe0, 0xcc93, 0x24dc, 0x5ef5, 0x0, 0x0);
        gbc.writeMem(0xc30, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x7d2a, gbc.sp());
        EXPECT(0xc32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02E5
        gbc.setState(0x77ab, 0x8e84, 0xcdf0, 0x83a5, 0x2bba, 0x6616, 0x0, 0x1);
        gbc.writeMem(0x77ab, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x8e84, gbc.sp());
        EXPECT(0x77ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02E6
        gbc.setState(0x9724, 0x197, 0x7e60, 0x32f3, 0xec43, 0x6c0f, 0x0, 0x1);
        gbc.writeMem(0x9724, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x197, gbc.sp());
        EXPECT(0x9726, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9724));
        EXPECT(0x4d, gbc.readMem(0x9725));
        // CB 4D 02E7
        gbc.setState(0x32b0, 0x706c, 0x11a0, 0x4a15, 0x8114, 0xcaa3, 0x0, 0x1);
        gbc.writeMem(0x32b0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x706c, gbc.sp());
        EXPECT(0x32b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02E8
        gbc.setState(0x948e, 0x9e32, 0x9450, 0x6298, 0xde71, 0x11ec, 0x0, 0x0);
        gbc.writeMem(0x948e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x9e32, gbc.sp());
        EXPECT(0x9490, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x948e));
        EXPECT(0x4d, gbc.readMem(0x948f));
        // CB 4D 02E9
        gbc.setState(0xd75, 0x4ef7, 0xbd40, 0xe996, 0x89ba, 0x2c88, 0x0, 0x0);
        gbc.writeMem(0xd75, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x4ef7, gbc.sp());
        EXPECT(0xd77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02EA
        gbc.setState(0xae41, 0xfada, 0xc020, 0x9bda, 0x1488, 0x58be, 0x0, 0x1);
        gbc.writeMem(0xae41, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xfada, gbc.sp());
        EXPECT(0xae43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae41));
        EXPECT(0x4d, gbc.readMem(0xae42));
        // CB 4D 02EB
        gbc.setState(0x14b3, 0xf27c, 0x2640, 0x9109, 0x170, 0xac17, 0x1, 0x0);
        gbc.writeMem(0x14b3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xf27c, gbc.sp());
        EXPECT(0x14b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02EC
        gbc.setState(0xd327, 0x658c, 0xaf90, 0x9337, 0xad4f, 0x6a93, 0x0, 0x0);
        gbc.writeMem(0xd327, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x658c, gbc.sp());
        EXPECT(0xd329, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd327));
        EXPECT(0x4d, gbc.readMem(0xd328));
        // CB 4D 02ED
        gbc.setState(0x7bde, 0xa4c2, 0xe110, 0x4ded, 0x6c02, 0xe28d, 0x0, 0x1);
        gbc.writeMem(0x7bde, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xa4c2, gbc.sp());
        EXPECT(0x7be0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02F0
        gbc.setState(0x6c0f, 0x5221, 0x9190, 0xc978, 0x97b, 0x4b50, 0x0, 0x0);
        gbc.writeMem(0x6c0f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x5221, gbc.sp());
        EXPECT(0x6c11, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02F1
        gbc.setState(0xe268, 0x868e, 0x2460, 0xf4d5, 0xf3f1, 0x252e, 0x0, 0x0);
        gbc.writeMem(0xe268, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x868e, gbc.sp());
        EXPECT(0xe26a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe268));
        EXPECT(0x4d, gbc.readMem(0xe269));
        // CB 4D 02F3
        gbc.setState(0x40e9, 0x484f, 0xc210, 0x2966, 0xc9f2, 0x6c97, 0x1, 0x0);
        gbc.writeMem(0x40e9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x484f, gbc.sp());
        EXPECT(0x40eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02F4
        gbc.setState(0xb525, 0xa7d6, 0x9c0, 0x87cd, 0xe375, 0x3e8, 0x1, 0x1);
        gbc.writeMem(0xb525, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xa7d6, gbc.sp());
        EXPECT(0xb527, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb525));
        EXPECT(0x4d, gbc.readMem(0xb526));
        // CB 4D 02F5
        gbc.setState(0xe256, 0xc933, 0x1e40, 0x8188, 0x51ac, 0x3686, 0x1, 0x1);
        gbc.writeMem(0xe256, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xc933, gbc.sp());
        EXPECT(0xe258, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe256));
        EXPECT(0x4d, gbc.readMem(0xe257));
        // CB 4D 02F6
        gbc.setState(0xd9cd, 0x1835, 0x6f50, 0x814f, 0xacff, 0xaad0, 0x1, 0x0);
        gbc.writeMem(0xd9cd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1835, gbc.sp());
        EXPECT(0xd9cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9cd));
        EXPECT(0x4d, gbc.readMem(0xd9ce));
        // CB 4D 02F7
        gbc.setState(0x6926, 0xe5a3, 0x9ef0, 0xd10d, 0x312a, 0x9c4, 0x1, 0x1);
        gbc.writeMem(0x6926, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xe5a3, gbc.sp());
        EXPECT(0x6928, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02F8
        gbc.setState(0xd66, 0x54f2, 0x9c30, 0x516b, 0x4176, 0xe92f, 0x1, 0x0);
        gbc.writeMem(0xd66, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x54f2, gbc.sp());
        EXPECT(0xd68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02F9
        gbc.setState(0x330e, 0xc65, 0x2210, 0x72c2, 0x28f2, 0x7892, 0x1, 0x1);
        gbc.writeMem(0x330e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xc65, gbc.sp());
        EXPECT(0x3310, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02FA
        gbc.setState(0x661b, 0x6e29, 0x8350, 0xe4e3, 0xf491, 0x9b39, 0x0, 0x0);
        gbc.writeMem(0x661b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x6e29, gbc.sp());
        EXPECT(0x661d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02FB
        gbc.setState(0x4176, 0x57d1, 0x6530, 0x8511, 0x6ff6, 0x7066, 0x0, 0x0);
        gbc.writeMem(0x4176, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x57d1, gbc.sp());
        EXPECT(0x4178, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02FC
        gbc.setState(0x7684, 0xda3, 0xabe0, 0x2fb3, 0x4f2f, 0xf8ad, 0x1, 0x1);
        gbc.writeMem(0x7684, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xda3, gbc.sp());
        EXPECT(0x7686, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 02FD
        gbc.setState(0xc7e0, 0x8c78, 0x7ed0, 0xc0, 0xa82e, 0xecd6, 0x1, 0x0);
        gbc.writeMem(0xc7e0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x8c78, gbc.sp());
        EXPECT(0xc7e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7e0));
        EXPECT(0x4d, gbc.readMem(0xc7e1));
        // CB 4D 02FE
        gbc.setState(0xe88, 0x20e6, 0xd5d0, 0x398c, 0xf4df, 0xfd91, 0x1, 0x1);
        gbc.writeMem(0xe88, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x20e6, gbc.sp());
        EXPECT(0xe8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 02FF
        gbc.setState(0x7529, 0x8b7f, 0x2b60, 0x48aa, 0xad7f, 0xd46, 0x1, 0x0);
        gbc.writeMem(0x7529, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x8b7f, gbc.sp());
        EXPECT(0x752b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0300
        gbc.setState(0x54e, 0x5624, 0xe800, 0x6223, 0x3047, 0xabbb, 0x1, 0x0);
        gbc.writeMem(0x54e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x5624, gbc.sp());
        EXPECT(0x550, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0302
        gbc.setState(0x2063, 0xacb2, 0xc020, 0xa213, 0xb6e8, 0x855, 0x0, 0x0);
        gbc.writeMem(0x2063, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xacb2, gbc.sp());
        EXPECT(0x2065, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0303
        gbc.setState(0xe471, 0xc364, 0xb800, 0xdf86, 0xec80, 0x92f0, 0x1, 0x1);
        gbc.writeMem(0xe471, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc364, gbc.sp());
        EXPECT(0xe473, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe471));
        EXPECT(0x4d, gbc.readMem(0xe472));
        // CB 4D 0304
        gbc.setState(0xf5e, 0xd1c, 0x7cb0, 0x8dc7, 0xce02, 0x9f62, 0x1, 0x0);
        gbc.writeMem(0xf5e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xd1c, gbc.sp());
        EXPECT(0xf60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0305
        gbc.setState(0x4cee, 0x718, 0xe730, 0x4ae6, 0xfe2c, 0x4989, 0x0, 0x1);
        gbc.writeMem(0x4cee, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x718, gbc.sp());
        EXPECT(0x4cf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0306
        gbc.setState(0x630b, 0x8a5d, 0x1c30, 0xe33e, 0x2639, 0x3111, 0x1, 0x1);
        gbc.writeMem(0x630b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x8a5d, gbc.sp());
        EXPECT(0x630d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0307
        gbc.setState(0x78e1, 0x9a0a, 0x2b20, 0xedfc, 0x1868, 0x5efa, 0x1, 0x1);
        gbc.writeMem(0x78e1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x9a0a, gbc.sp());
        EXPECT(0x78e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0308
        gbc.setState(0x9efd, 0x74a3, 0x8860, 0x585e, 0xced3, 0x4ab0, 0x0, 0x1);
        gbc.writeMem(0x9efd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x74a3, gbc.sp());
        EXPECT(0x9eff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9efd));
        EXPECT(0x4d, gbc.readMem(0x9efe));
        // CB 4D 0309
        gbc.setState(0x5e5e, 0xa7a0, 0x2480, 0xe537, 0xe61c, 0xeaa8, 0x1, 0x1);
        gbc.writeMem(0x5e5e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xa7a0, gbc.sp());
        EXPECT(0x5e60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 030A
        gbc.setState(0x18a2, 0xeef6, 0x3770, 0x68bc, 0xe268, 0x8397, 0x1, 0x0);
        gbc.writeMem(0x18a2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xeef6, gbc.sp());
        EXPECT(0x18a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 030C
        gbc.setState(0x8f34, 0x986e, 0x7d20, 0x6fab, 0x6164, 0x5a0e, 0x0, 0x1);
        gbc.writeMem(0x8f34, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x986e, gbc.sp());
        EXPECT(0x8f36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f34));
        EXPECT(0x4d, gbc.readMem(0x8f35));
        // CB 4D 030D
        gbc.setState(0xb747, 0x883a, 0x9850, 0xe392, 0x5680, 0x768d, 0x1, 0x0);
        gbc.writeMem(0xb747, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x883a, gbc.sp());
        EXPECT(0xb749, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb747));
        EXPECT(0x4d, gbc.readMem(0xb748));
        // CB 4D 030E
        gbc.setState(0x8ee7, 0x9c4c, 0xd0f0, 0x558e, 0x4d7c, 0x92a6, 0x1, 0x0);
        gbc.writeMem(0x8ee7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x9c4c, gbc.sp());
        EXPECT(0x8ee9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ee7));
        EXPECT(0x4d, gbc.readMem(0x8ee8));
        // CB 4D 030F
        gbc.setState(0xd5f3, 0xaae2, 0xace0, 0x17bb, 0x8c0a, 0x31c9, 0x1, 0x1);
        gbc.writeMem(0xd5f3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xaae2, gbc.sp());
        EXPECT(0xd5f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5f3));
        EXPECT(0x4d, gbc.readMem(0xd5f4));
        // CB 4D 0310
        gbc.setState(0x7212, 0x16c6, 0x80f0, 0x716e, 0xd15a, 0xbe2b, 0x1, 0x1);
        gbc.writeMem(0x7212, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x16c6, gbc.sp());
        EXPECT(0x7214, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0311
        gbc.setState(0x5ac7, 0x231c, 0x2f50, 0x4c74, 0x238d, 0x53a0, 0x0, 0x1);
        gbc.writeMem(0x5ac7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x231c, gbc.sp());
        EXPECT(0x5ac9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0312
        gbc.setState(0xb221, 0x6f3f, 0xd300, 0x5e78, 0x6c96, 0xd68e, 0x1, 0x1);
        gbc.writeMem(0xb221, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x6f3f, gbc.sp());
        EXPECT(0xb223, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb221));
        EXPECT(0x4d, gbc.readMem(0xb222));
        // CB 4D 0313
        gbc.setState(0x3dc7, 0xfbef, 0x9800, 0xa7f3, 0x4deb, 0x2e63, 0x1, 0x0);
        gbc.writeMem(0x3dc7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xfbef, gbc.sp());
        EXPECT(0x3dc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0314
        gbc.setState(0x5687, 0x9c98, 0x74f0, 0x2201, 0x416f, 0x1502, 0x1, 0x0);
        gbc.writeMem(0x5687, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x9c98, gbc.sp());
        EXPECT(0x5689, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0315
        gbc.setState(0xc6f6, 0x9563, 0x75e0, 0x23b8, 0x421e, 0xf056, 0x1, 0x1);
        gbc.writeMem(0xc6f6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x9563, gbc.sp());
        EXPECT(0xc6f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6f6));
        EXPECT(0x4d, gbc.readMem(0xc6f7));
        // CB 4D 0316
        gbc.setState(0x53a1, 0xe169, 0xbc10, 0x842a, 0xa2e0, 0x47b9, 0x1, 0x0);
        gbc.writeMem(0x53a1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xe169, gbc.sp());
        EXPECT(0x53a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0317
        gbc.setState(0xb4eb, 0x5f88, 0xf00, 0xd44e, 0x9b35, 0xf4b9, 0x0, 0x1);
        gbc.writeMem(0xb4eb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x5f88, gbc.sp());
        EXPECT(0xb4ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4eb));
        EXPECT(0x4d, gbc.readMem(0xb4ec));
        // CB 4D 0318
        gbc.setState(0xd4dd, 0xa65a, 0x8930, 0x2c03, 0x5ce4, 0x5e6c, 0x1, 0x1);
        gbc.writeMem(0xd4dd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xa65a, gbc.sp());
        EXPECT(0xd4df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4dd));
        EXPECT(0x4d, gbc.readMem(0xd4de));
        // CB 4D 0319
        gbc.setState(0x4f5b, 0xd11a, 0xd510, 0x9bd4, 0xd580, 0x8f3a, 0x0, 0x1);
        gbc.writeMem(0x4f5b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xd11a, gbc.sp());
        EXPECT(0x4f5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 031A
        gbc.setState(0x2fa3, 0xb6e9, 0x570, 0xd213, 0x54b0, 0xef85, 0x1, 0x1);
        gbc.writeMem(0x2fa3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xb6e9, gbc.sp());
        EXPECT(0x2fa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 031B
        gbc.setState(0x5bdb, 0xcf0a, 0x50a0, 0x77fe, 0x2f9, 0xba97, 0x1, 0x1);
        gbc.writeMem(0x5bdb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xcf0a, gbc.sp());
        EXPECT(0x5bdd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 031C
        gbc.setState(0x8d2d, 0x7e4f, 0x8230, 0xbc3e, 0xed8d, 0x8b6, 0x0, 0x0);
        gbc.writeMem(0x8d2d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x7e4f, gbc.sp());
        EXPECT(0x8d2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d2d));
        EXPECT(0x4d, gbc.readMem(0x8d2e));
        // CB 4D 031D
        gbc.setState(0x98e1, 0x5703, 0xe220, 0xb113, 0xb776, 0xca19, 0x1, 0x0);
        gbc.writeMem(0x98e1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x5703, gbc.sp());
        EXPECT(0x98e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98e1));
        EXPECT(0x4d, gbc.readMem(0x98e2));
        // CB 4D 031E
        gbc.setState(0x2234, 0x2468, 0xdad0, 0xa230, 0x2f27, 0x7c7f, 0x1, 0x0);
        gbc.writeMem(0x2234, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x2468, gbc.sp());
        EXPECT(0x2236, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 031F
        gbc.setState(0xdd0, 0x56d6, 0x17d0, 0x473d, 0x169c, 0xb4e5, 0x1, 0x1);
        gbc.writeMem(0xdd0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x56d6, gbc.sp());
        EXPECT(0xdd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0320
        gbc.setState(0x1d8, 0x9fc6, 0xa370, 0xb4b, 0x995f, 0xf01e, 0x1, 0x1);
        gbc.writeMem(0x1d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x9fc6, gbc.sp());
        EXPECT(0x1da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0321
        gbc.setState(0x7d3e, 0xc42d, 0x8cf0, 0x2cf1, 0x8110, 0xf7eb, 0x0, 0x1);
        gbc.writeMem(0x7d3e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xc42d, gbc.sp());
        EXPECT(0x7d40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0322
        gbc.setState(0x6429, 0x1073, 0xfbd0, 0x7f1a, 0x1fe2, 0xac18, 0x0, 0x1);
        gbc.writeMem(0x6429, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x1073, gbc.sp());
        EXPECT(0x642b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0323
        gbc.setState(0xc800, 0xec81, 0xd070, 0x6bc7, 0xb9c9, 0x8491, 0x0, 0x0);
        gbc.writeMem(0xc800, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xec81, gbc.sp());
        EXPECT(0xc802, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc800));
        EXPECT(0x4d, gbc.readMem(0xc801));
        // CB 4D 0324
        gbc.setState(0x219f, 0x40e8, 0xd400, 0x833a, 0x9c3c, 0xddd2, 0x0, 0x0);
        gbc.writeMem(0x219f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x40e8, gbc.sp());
        EXPECT(0x21a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0325
        gbc.setState(0xdeb1, 0x2cce, 0x6980, 0x2a24, 0xf539, 0x17c4, 0x1, 0x1);
        gbc.writeMem(0xdeb1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x2cce, gbc.sp());
        EXPECT(0xdeb3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdeb1));
        EXPECT(0x4d, gbc.readMem(0xdeb2));
        // CB 4D 0326
        gbc.setState(0x4aef, 0x1264, 0x9410, 0x13a1, 0x764c, 0x7c17, 0x0, 0x1);
        gbc.writeMem(0x4aef, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x1264, gbc.sp());
        EXPECT(0x4af1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0327
        gbc.setState(0x9980, 0x50fc, 0x35a0, 0x7230, 0xacd7, 0xe394, 0x1, 0x1);
        gbc.writeMem(0x9980, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x50fc, gbc.sp());
        EXPECT(0x9982, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9980));
        EXPECT(0x4d, gbc.readMem(0x9981));
        // CB 4D 0328
        gbc.setState(0x5c0d, 0x478c, 0x2530, 0x28c, 0x125, 0xf12c, 0x1, 0x1);
        gbc.writeMem(0x5c0d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x478c, gbc.sp());
        EXPECT(0x5c0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 032A
        gbc.setState(0x3889, 0xb69, 0x8580, 0x50d9, 0x5f32, 0xbd4b, 0x1, 0x1);
        gbc.writeMem(0x3889, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xb69, gbc.sp());
        EXPECT(0x388b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 032B
        gbc.setState(0x6eaf, 0xd226, 0xfdd0, 0xe5f4, 0xdec2, 0xd2fa, 0x1, 0x1);
        gbc.writeMem(0x6eaf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xd226, gbc.sp());
        EXPECT(0x6eb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 032D
        gbc.setState(0xc374, 0xd7d1, 0xa3e0, 0x757d, 0x58bb, 0x3b18, 0x1, 0x1);
        gbc.writeMem(0xc374, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xd7d1, gbc.sp());
        EXPECT(0xc376, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc374));
        EXPECT(0x4d, gbc.readMem(0xc375));
        // CB 4D 032E
        gbc.setState(0x9d0a, 0xa85a, 0x20c0, 0x2d1, 0x9f4f, 0x12d4, 0x0, 0x0);
        gbc.writeMem(0x9d0a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xa85a, gbc.sp());
        EXPECT(0x9d0c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d0a));
        EXPECT(0x4d, gbc.readMem(0x9d0b));
        // CB 4D 032F
        gbc.setState(0x42d7, 0x3e5a, 0x4010, 0xb305, 0x37af, 0xab1d, 0x0, 0x1);
        gbc.writeMem(0x42d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x3e5a, gbc.sp());
        EXPECT(0x42d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0331
        gbc.setState(0x87dd, 0x4ff2, 0x5510, 0xd858, 0x1c2e, 0xbc59, 0x1, 0x0);
        gbc.writeMem(0x87dd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x4ff2, gbc.sp());
        EXPECT(0x87df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87dd));
        EXPECT(0x4d, gbc.readMem(0x87de));
        // CB 4D 0332
        gbc.setState(0xe4f0, 0x79db, 0x4a50, 0x5833, 0x389e, 0x15aa, 0x1, 0x0);
        gbc.writeMem(0xe4f0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x79db, gbc.sp());
        EXPECT(0xe4f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4f0));
        EXPECT(0x4d, gbc.readMem(0xe4f1));
        // CB 4D 0333
        gbc.setState(0x397b, 0x1e0d, 0xdc70, 0xeda2, 0xabe5, 0x2e6b, 0x0, 0x0);
        gbc.writeMem(0x397b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x1e0d, gbc.sp());
        EXPECT(0x397d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0334
        gbc.setState(0xe243, 0x608a, 0x1350, 0x9e30, 0x462d, 0x3d6e, 0x0, 0x0);
        gbc.writeMem(0xe243, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x608a, gbc.sp());
        EXPECT(0xe245, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe243));
        EXPECT(0x4d, gbc.readMem(0xe244));
        // CB 4D 0335
        gbc.setState(0xd357, 0x74c1, 0x1690, 0xc741, 0x90f5, 0x388e, 0x0, 0x0);
        gbc.writeMem(0xd357, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x74c1, gbc.sp());
        EXPECT(0xd359, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd357));
        EXPECT(0x4d, gbc.readMem(0xd358));
        // CB 4D 0337
        gbc.setState(0x3192, 0xbac5, 0x8a90, 0x36b0, 0x94c2, 0x7c68, 0x1, 0x0);
        gbc.writeMem(0x3192, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xbac5, gbc.sp());
        EXPECT(0x3194, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0338
        gbc.setState(0xc704, 0x6fa5, 0xe060, 0x284c, 0xf136, 0x1104, 0x1, 0x0);
        gbc.writeMem(0xc704, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x6fa5, gbc.sp());
        EXPECT(0xc706, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc704));
        EXPECT(0x4d, gbc.readMem(0xc705));
        // CB 4D 0339
        gbc.setState(0x15b2, 0xfcba, 0xb1e0, 0x79e, 0x66e1, 0xdbde, 0x1, 0x0);
        gbc.writeMem(0x15b2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xfcba, gbc.sp());
        EXPECT(0x15b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 033A
        gbc.setState(0x7509, 0xb531, 0xfe80, 0x26b2, 0xbc82, 0xc33c, 0x1, 0x0);
        gbc.writeMem(0x7509, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xb531, gbc.sp());
        EXPECT(0x750b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 033B
        gbc.setState(0xb397, 0xa4ee, 0x7600, 0x81a2, 0xf91d, 0xaf1c, 0x0, 0x1);
        gbc.writeMem(0xb397, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xa4ee, gbc.sp());
        EXPECT(0xb399, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb397));
        EXPECT(0x4d, gbc.readMem(0xb398));
        // CB 4D 033C
        gbc.setState(0x9f19, 0x8c41, 0x2be0, 0x18d0, 0x9dc7, 0xca9f, 0x1, 0x1);
        gbc.writeMem(0x9f19, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x8c41, gbc.sp());
        EXPECT(0x9f1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f19));
        EXPECT(0x4d, gbc.readMem(0x9f1a));
        // CB 4D 033D
        gbc.setState(0x4d62, 0xce58, 0x5630, 0x35ee, 0xa18d, 0x4799, 0x0, 0x0);
        gbc.writeMem(0x4d62, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xce58, gbc.sp());
        EXPECT(0x4d64, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 033F
        gbc.setState(0x6e5, 0xfb94, 0xe5e0, 0x8a8b, 0xb913, 0x8f3d, 0x1, 0x1);
        gbc.writeMem(0x6e5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xfb94, gbc.sp());
        EXPECT(0x6e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0340
        gbc.setState(0xde19, 0xe091, 0x2290, 0x4b89, 0x7dfb, 0xff3a, 0x0, 0x1);
        gbc.writeMem(0xde19, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xe091, gbc.sp());
        EXPECT(0xde1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde19));
        EXPECT(0x4d, gbc.readMem(0xde1a));
        // CB 4D 0341
        gbc.setState(0x3ca1, 0x2ef9, 0xbed0, 0x2c00, 0x3827, 0x65b9, 0x1, 0x0);
        gbc.writeMem(0x3ca1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x2ef9, gbc.sp());
        EXPECT(0x3ca3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0342
        gbc.setState(0xb855, 0x4616, 0x48e0, 0x78d9, 0xb478, 0x417, 0x1, 0x1);
        gbc.writeMem(0xb855, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x4616, gbc.sp());
        EXPECT(0xb857, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb855));
        EXPECT(0x4d, gbc.readMem(0xb856));
        // CB 4D 0343
        gbc.setState(0xa4aa, 0x3e9b, 0xab60, 0x15ab, 0x5ba8, 0x449b, 0x1, 0x1);
        gbc.writeMem(0xa4aa, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x3e9b, gbc.sp());
        EXPECT(0xa4ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4aa));
        EXPECT(0x4d, gbc.readMem(0xa4ab));
        // CB 4D 0344
        gbc.setState(0xa80d, 0xd4e6, 0x2b80, 0xa884, 0x9b44, 0x2201, 0x1, 0x1);
        gbc.writeMem(0xa80d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xd4e6, gbc.sp());
        EXPECT(0xa80f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa80d));
        EXPECT(0x4d, gbc.readMem(0xa80e));
        // CB 4D 0345
        gbc.setState(0x8dea, 0xecdd, 0x1bb0, 0xe26b, 0x6cfa, 0x6796, 0x0, 0x0);
        gbc.writeMem(0x8dea, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xecdd, gbc.sp());
        EXPECT(0x8dec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dea));
        EXPECT(0x4d, gbc.readMem(0x8deb));
        // CB 4D 0346
        gbc.setState(0xa2d7, 0x3f1, 0xf190, 0xf053, 0x3936, 0xded2, 0x0, 0x1);
        gbc.writeMem(0xa2d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x3f1, gbc.sp());
        EXPECT(0xa2d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2d7));
        EXPECT(0x4d, gbc.readMem(0xa2d8));
        // CB 4D 0347
        gbc.setState(0x6040, 0xac5a, 0xf860, 0xe08d, 0x6c37, 0x3250, 0x0, 0x0);
        gbc.writeMem(0x6040, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xac5a, gbc.sp());
        EXPECT(0x6042, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0348
        gbc.setState(0x21fa, 0x909c, 0x5520, 0x3170, 0xe66f, 0x6cbb, 0x0, 0x1);
        gbc.writeMem(0x21fa, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x909c, gbc.sp());
        EXPECT(0x21fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0349
        gbc.setState(0x2da0, 0x60ef, 0xfa50, 0xd0b2, 0xabdc, 0x4c0f, 0x0, 0x0);
        gbc.writeMem(0x2da0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x60ef, gbc.sp());
        EXPECT(0x2da2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 034A
        gbc.setState(0xec7, 0x7b53, 0xdc60, 0xd1a6, 0x650e, 0x212c, 0x1, 0x0);
        gbc.writeMem(0xec7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x7b53, gbc.sp());
        EXPECT(0xec9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 034B
        gbc.setState(0xba2d, 0xc6e9, 0x4180, 0x17a8, 0x211e, 0x805f, 0x0, 0x1);
        gbc.writeMem(0xba2d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xc6e9, gbc.sp());
        EXPECT(0xba2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba2d));
        EXPECT(0x4d, gbc.readMem(0xba2e));
        // CB 4D 034C
        gbc.setState(0xe793, 0xc135, 0xb620, 0xa991, 0x335a, 0xf10, 0x0, 0x1);
        gbc.writeMem(0xe793, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xc135, gbc.sp());
        EXPECT(0xe795, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe793));
        EXPECT(0x4d, gbc.readMem(0xe794));
        // CB 4D 034D
        gbc.setState(0x80c3, 0xc952, 0xf530, 0xcc86, 0x2153, 0x7ff, 0x1, 0x1);
        gbc.writeMem(0x80c3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xc952, gbc.sp());
        EXPECT(0x80c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80c3));
        EXPECT(0x4d, gbc.readMem(0x80c4));
        // CB 4D 034E
        gbc.setState(0xeea2, 0x13c5, 0x1e40, 0xf7e7, 0x258f, 0x6cac, 0x1, 0x0);
        gbc.writeMem(0xeea2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x13c5, gbc.sp());
        EXPECT(0xeea4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeea2));
        EXPECT(0x4d, gbc.readMem(0xeea3));
        // CB 4D 034F
        gbc.setState(0xd7e9, 0x29eb, 0xf00, 0x87bc, 0x620b, 0x5293, 0x1, 0x0);
        gbc.writeMem(0xd7e9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x29eb, gbc.sp());
        EXPECT(0xd7eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7e9));
        EXPECT(0x4d, gbc.readMem(0xd7ea));
        // CB 4D 0350
        gbc.setState(0x5e3d, 0x7df9, 0xa4f0, 0x14f7, 0x5beb, 0xb75d, 0x0, 0x0);
        gbc.writeMem(0x5e3d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x7df9, gbc.sp());
        EXPECT(0x5e3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0351
        gbc.setState(0xed93, 0x2ce4, 0x60d0, 0x6d67, 0x6ac0, 0xf98a, 0x1, 0x1);
        gbc.writeMem(0xed93, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x2ce4, gbc.sp());
        EXPECT(0xed95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed93));
        EXPECT(0x4d, gbc.readMem(0xed94));
        // CB 4D 0352
        gbc.setState(0x84cc, 0x580d, 0x1b10, 0x4f5, 0x6ca4, 0xe118, 0x1, 0x0);
        gbc.writeMem(0x84cc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x580d, gbc.sp());
        EXPECT(0x84ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84cc));
        EXPECT(0x4d, gbc.readMem(0x84cd));
        // CB 4D 0353
        gbc.setState(0x7eaa, 0x82bc, 0xe180, 0x5de3, 0xd5b2, 0xa74c, 0x0, 0x0);
        gbc.writeMem(0x7eaa, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x82bc, gbc.sp());
        EXPECT(0x7eac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0354
        gbc.setState(0x2309, 0x8bd9, 0x7c10, 0x46ec, 0x2eb7, 0x13eb, 0x0, 0x1);
        gbc.writeMem(0x2309, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x8bd9, gbc.sp());
        EXPECT(0x230b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0355
        gbc.setState(0x6cd1, 0xf615, 0x61c0, 0x2d26, 0x6592, 0xbda7, 0x0, 0x0);
        gbc.writeMem(0x6cd1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xf615, gbc.sp());
        EXPECT(0x6cd3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0356
        gbc.setState(0x2009, 0x2b63, 0x7bc0, 0x52c3, 0x3a8a, 0xc8af, 0x0, 0x1);
        gbc.writeMem(0x2009, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x2b63, gbc.sp());
        EXPECT(0x200b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0357
        gbc.setState(0x4a16, 0xa204, 0xa350, 0x130c, 0x5c25, 0xe6c8, 0x0, 0x0);
        gbc.writeMem(0x4a16, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xa204, gbc.sp());
        EXPECT(0x4a18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0359
        gbc.setState(0xb186, 0x1282, 0x9fd0, 0x9d5f, 0x5732, 0x504c, 0x1, 0x0);
        gbc.writeMem(0xb186, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x1282, gbc.sp());
        EXPECT(0xb188, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb186));
        EXPECT(0x4d, gbc.readMem(0xb187));
        // CB 4D 035A
        gbc.setState(0x2a0b, 0x1eaa, 0x5e70, 0x5d24, 0xbbf7, 0x1a09, 0x1, 0x1);
        gbc.writeMem(0x2a0b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x1eaa, gbc.sp());
        EXPECT(0x2a0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 035B
        gbc.setState(0xdc98, 0x7142, 0x8670, 0x4840, 0x1b8e, 0xe589, 0x1, 0x0);
        gbc.writeMem(0xdc98, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x7142, gbc.sp());
        EXPECT(0xdc9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc98));
        EXPECT(0x4d, gbc.readMem(0xdc99));
        // CB 4D 035C
        gbc.setState(0xc938, 0x5fdb, 0x3650, 0x364c, 0x77a6, 0x9538, 0x1, 0x0);
        gbc.writeMem(0xc938, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x5fdb, gbc.sp());
        EXPECT(0xc93a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc938));
        EXPECT(0x4d, gbc.readMem(0xc939));
        // CB 4D 035D
        gbc.setState(0x92a5, 0x7dfa, 0xc890, 0x5bf3, 0xe167, 0xf787, 0x0, 0x0);
        gbc.writeMem(0x92a5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x7dfa, gbc.sp());
        EXPECT(0x92a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92a5));
        EXPECT(0x4d, gbc.readMem(0x92a6));
        // CB 4D 035E
        gbc.setState(0x35e6, 0x27c3, 0x6300, 0x9db, 0xfcec, 0x1b02, 0x0, 0x1);
        gbc.writeMem(0x35e6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x27c3, gbc.sp());
        EXPECT(0x35e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 035F
        gbc.setState(0xb1f5, 0xd238, 0x9520, 0xa84d, 0x747a, 0xf91f, 0x1, 0x1);
        gbc.writeMem(0xb1f5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xd238, gbc.sp());
        EXPECT(0xb1f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1f5));
        EXPECT(0x4d, gbc.readMem(0xb1f6));
        // CB 4D 0360
        gbc.setState(0xdaa1, 0xbb91, 0x59c0, 0x9c1a, 0xf514, 0x7b9e, 0x1, 0x1);
        gbc.writeMem(0xdaa1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xbb91, gbc.sp());
        EXPECT(0xdaa3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaa1));
        EXPECT(0x4d, gbc.readMem(0xdaa2));
        // CB 4D 0361
        gbc.setState(0x9e6c, 0x3a43, 0x4730, 0xc3cc, 0x7175, 0x3f1a, 0x0, 0x1);
        gbc.writeMem(0x9e6c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x3a43, gbc.sp());
        EXPECT(0x9e6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e6c));
        EXPECT(0x4d, gbc.readMem(0x9e6d));
        // CB 4D 0362
        gbc.setState(0x8495, 0xa729, 0x6b50, 0x30a6, 0xdd84, 0x7f0c, 0x1, 0x1);
        gbc.writeMem(0x8495, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xa729, gbc.sp());
        EXPECT(0x8497, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8495));
        EXPECT(0x4d, gbc.readMem(0x8496));
        // CB 4D 0363
        gbc.setState(0x5a72, 0xf41e, 0xe6b0, 0xbe19, 0x4763, 0xdc4b, 0x0, 0x0);
        gbc.writeMem(0x5a72, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xf41e, gbc.sp());
        EXPECT(0x5a74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0364
        gbc.setState(0x9cd7, 0x6e4, 0x7370, 0x311b, 0x14fa, 0xc4dd, 0x1, 0x1);
        gbc.writeMem(0x9cd7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x6e4, gbc.sp());
        EXPECT(0x9cd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cd7));
        EXPECT(0x4d, gbc.readMem(0x9cd8));
        // CB 4D 0365
        gbc.setState(0x6da8, 0xe6a2, 0x190, 0x757, 0x37e6, 0xca0c, 0x1, 0x1);
        gbc.writeMem(0x6da8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xe6a2, gbc.sp());
        EXPECT(0x6daa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0366
        gbc.setState(0x99b6, 0xd12e, 0x57c0, 0x7fb9, 0xea79, 0x1305, 0x1, 0x1);
        gbc.writeMem(0x99b6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xd12e, gbc.sp());
        EXPECT(0x99b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99b6));
        EXPECT(0x4d, gbc.readMem(0x99b7));
        // CB 4D 0367
        gbc.setState(0xd5ed, 0xfd23, 0x9720, 0xb054, 0x744b, 0x7e64, 0x1, 0x0);
        gbc.writeMem(0xd5ed, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xfd23, gbc.sp());
        EXPECT(0xd5ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5ed));
        EXPECT(0x4d, gbc.readMem(0xd5ee));
        // CB 4D 0368
        gbc.setState(0x434a, 0x21dd, 0x6650, 0x1204, 0x5431, 0x7775, 0x1, 0x0);
        gbc.writeMem(0x434a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x21dd, gbc.sp());
        EXPECT(0x434c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0369
        gbc.setState(0x8428, 0x1ec, 0x9900, 0x2c7c, 0x67bc, 0xe016, 0x0, 0x0);
        gbc.writeMem(0x8428, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x1ec, gbc.sp());
        EXPECT(0x842a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8428));
        EXPECT(0x4d, gbc.readMem(0x8429));
        // CB 4D 036A
        gbc.setState(0x1ed5, 0xeb52, 0x8ee0, 0x793d, 0x8dc4, 0x1070, 0x1, 0x0);
        gbc.writeMem(0x1ed5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xeb52, gbc.sp());
        EXPECT(0x1ed7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 036B
        gbc.setState(0xb307, 0x2f82, 0x2710, 0x1339, 0x18e, 0xcb8a, 0x1, 0x0);
        gbc.writeMem(0xb307, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x2f82, gbc.sp());
        EXPECT(0xb309, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb307));
        EXPECT(0x4d, gbc.readMem(0xb308));
        // CB 4D 036D
        gbc.setState(0x9330, 0x2081, 0x6e10, 0xd39a, 0xbdbf, 0x7b01, 0x0, 0x0);
        gbc.writeMem(0x9330, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x2081, gbc.sp());
        EXPECT(0x9332, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9330));
        EXPECT(0x4d, gbc.readMem(0x9331));
        // CB 4D 036E
        gbc.setState(0xb069, 0x1b99, 0xc0, 0x933f, 0x37b7, 0xf97d, 0x1, 0x1);
        gbc.writeMem(0xb069, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x1b99, gbc.sp());
        EXPECT(0xb06b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb069));
        EXPECT(0x4d, gbc.readMem(0xb06a));
        // CB 4D 036F
        gbc.setState(0x8cc9, 0x2f8a, 0xf7e0, 0x5395, 0xd388, 0xf11a, 0x1, 0x0);
        gbc.writeMem(0x8cc9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x2f8a, gbc.sp());
        EXPECT(0x8ccb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cc9));
        EXPECT(0x4d, gbc.readMem(0x8cca));
        // CB 4D 0370
        gbc.setState(0x934e, 0x7d9f, 0xdf70, 0x8cd6, 0xc44, 0xf7b9, 0x1, 0x1);
        gbc.writeMem(0x934e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x7d9f, gbc.sp());
        EXPECT(0x9350, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x934e));
        EXPECT(0x4d, gbc.readMem(0x934f));
        // CB 4D 0371
        gbc.setState(0x29e2, 0x1a95, 0xdc0, 0x9571, 0xeca3, 0xf984, 0x1, 0x1);
        gbc.writeMem(0x29e2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x1a95, gbc.sp());
        EXPECT(0x29e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0372
        gbc.setState(0xc6ea, 0x7c03, 0x7030, 0xcdee, 0x88f0, 0xd01c, 0x1, 0x1);
        gbc.writeMem(0xc6ea, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x7c03, gbc.sp());
        EXPECT(0xc6ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6ea));
        EXPECT(0x4d, gbc.readMem(0xc6eb));
        // CB 4D 0373
        gbc.setState(0xdbae, 0xe34d, 0x900, 0xa438, 0xbbd7, 0x3cb6, 0x1, 0x1);
        gbc.writeMem(0xdbae, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xe34d, gbc.sp());
        EXPECT(0xdbb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbae));
        EXPECT(0x4d, gbc.readMem(0xdbaf));
        // CB 4D 0374
        gbc.setState(0x6dbb, 0x7e35, 0x8d80, 0x5a6d, 0xa1f3, 0x1f0b, 0x0, 0x1);
        gbc.writeMem(0x6dbb, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x7e35, gbc.sp());
        EXPECT(0x6dbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0375
        gbc.setState(0xbbff, 0x3740, 0x670, 0x431d, 0x1006, 0x73b2, 0x0, 0x0);
        gbc.writeMem(0xbbff, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x3740, gbc.sp());
        EXPECT(0xbc01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbff));
        EXPECT(0x4d, gbc.readMem(0xbc00));
        // CB 4D 0376
        gbc.setState(0xd631, 0xb2ec, 0x710, 0x5158, 0x6034, 0xeb34, 0x0, 0x1);
        gbc.writeMem(0xd631, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xb2ec, gbc.sp());
        EXPECT(0xd633, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd631));
        EXPECT(0x4d, gbc.readMem(0xd632));
        // CB 4D 0377
        gbc.setState(0x8978, 0xa368, 0xf530, 0x1e35, 0x3ca7, 0xee0a, 0x0, 0x0);
        gbc.writeMem(0x8978, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xa368, gbc.sp());
        EXPECT(0x897a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8978));
        EXPECT(0x4d, gbc.readMem(0x8979));
        // CB 4D 0378
        gbc.setState(0x6a18, 0x3d20, 0xbdd0, 0xa986, 0x429d, 0x1ccf, 0x1, 0x0);
        gbc.writeMem(0x6a18, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x3d20, gbc.sp());
        EXPECT(0x6a1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0379
        gbc.setState(0x2787, 0x3cc4, 0x8b00, 0x6002, 0x1486, 0x3c08, 0x0, 0x1);
        gbc.writeMem(0x2787, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x3cc4, gbc.sp());
        EXPECT(0x2789, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 037A
        gbc.setState(0x7105, 0xb27f, 0xbdf0, 0x7cfe, 0xf85a, 0x94bd, 0x1, 0x0);
        gbc.writeMem(0x7105, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xb27f, gbc.sp());
        EXPECT(0x7107, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 037B
        gbc.setState(0xb8ed, 0x16a1, 0x9890, 0x7872, 0xe565, 0xb366, 0x0, 0x1);
        gbc.writeMem(0xb8ed, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x16a1, gbc.sp());
        EXPECT(0xb8ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8ed));
        EXPECT(0x4d, gbc.readMem(0xb8ee));
        // CB 4D 037C
        gbc.setState(0xf34, 0x8658, 0x6270, 0xa9ef, 0x594f, 0x5871, 0x0, 0x1);
        gbc.writeMem(0xf34, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x8658, gbc.sp());
        EXPECT(0xf36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 037D
        gbc.setState(0x5218, 0x8c03, 0x2aa0, 0x3146, 0x77f7, 0x37de, 0x1, 0x1);
        gbc.writeMem(0x5218, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x8c03, gbc.sp());
        EXPECT(0x521a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 037E
        gbc.setState(0x1773, 0x38ee, 0x4ee0, 0x4fe4, 0x70b7, 0x1e1, 0x0, 0x1);
        gbc.writeMem(0x1773, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x38ee, gbc.sp());
        EXPECT(0x1775, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 037F
        gbc.setState(0x3e5, 0x912b, 0xd230, 0x2794, 0xab4e, 0xe0e2, 0x1, 0x0);
        gbc.writeMem(0x3e5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x912b, gbc.sp());
        EXPECT(0x3e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0380
        gbc.setState(0x5d06, 0x9291, 0x7ec0, 0x8a82, 0xcb72, 0x3213, 0x0, 0x0);
        gbc.writeMem(0x5d06, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x9291, gbc.sp());
        EXPECT(0x5d08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0381
        gbc.setState(0x36a3, 0xda43, 0xd6b0, 0xa3e7, 0xcd6d, 0x378e, 0x0, 0x0);
        gbc.writeMem(0x36a3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xda43, gbc.sp());
        EXPECT(0x36a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0382
        gbc.setState(0x5b88, 0xc4f2, 0xa2a0, 0x5eed, 0xc13b, 0x319f, 0x0, 0x0);
        gbc.writeMem(0x5b88, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xc4f2, gbc.sp());
        EXPECT(0x5b8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0383
        gbc.setState(0xdb79, 0xe821, 0xbf10, 0xfa79, 0xb563, 0x49f8, 0x1, 0x0);
        gbc.writeMem(0xdb79, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xe821, gbc.sp());
        EXPECT(0xdb7b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb79));
        EXPECT(0x4d, gbc.readMem(0xdb7a));
        // CB 4D 0384
        gbc.setState(0xb707, 0xf1d7, 0x3de0, 0x3e8f, 0x4e8f, 0xce57, 0x0, 0x1);
        gbc.writeMem(0xb707, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xf1d7, gbc.sp());
        EXPECT(0xb709, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb707));
        EXPECT(0x4d, gbc.readMem(0xb708));
        // CB 4D 0385
        gbc.setState(0x2c95, 0x150f, 0xe270, 0xfab2, 0x6cfa, 0x2939, 0x1, 0x0);
        gbc.writeMem(0x2c95, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x150f, gbc.sp());
        EXPECT(0x2c97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0386
        gbc.setState(0x584c, 0xcee3, 0xb890, 0x4f5e, 0x4c6e, 0x1876, 0x0, 0x0);
        gbc.writeMem(0x584c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xcee3, gbc.sp());
        EXPECT(0x584e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0387
        gbc.setState(0x383b, 0xb051, 0x87e0, 0x8eab, 0xda94, 0xf10e, 0x1, 0x1);
        gbc.writeMem(0x383b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xb051, gbc.sp());
        EXPECT(0x383d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0388
        gbc.setState(0x589b, 0xba99, 0x89d0, 0xbbb8, 0x87c5, 0x5570, 0x1, 0x0);
        gbc.writeMem(0x589b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xba99, gbc.sp());
        EXPECT(0x589d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0389
        gbc.setState(0xdf55, 0x8c81, 0xd6c0, 0x1c8f, 0xa950, 0x9a55, 0x1, 0x0);
        gbc.writeMem(0xdf55, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x8c81, gbc.sp());
        EXPECT(0xdf57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf55));
        EXPECT(0x4d, gbc.readMem(0xdf56));
        // CB 4D 038B
        gbc.setState(0x82cf, 0xbb1e, 0x8270, 0xe1bc, 0xbbad, 0x3ab9, 0x1, 0x1);
        gbc.writeMem(0x82cf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xbb1e, gbc.sp());
        EXPECT(0x82d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82cf));
        EXPECT(0x4d, gbc.readMem(0x82d0));
        // CB 4D 038C
        gbc.setState(0xd3b4, 0x20bc, 0xe2c0, 0x2d12, 0x1ad8, 0x7c5e, 0x1, 0x0);
        gbc.writeMem(0xd3b4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x20bc, gbc.sp());
        EXPECT(0xd3b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3b4));
        EXPECT(0x4d, gbc.readMem(0xd3b5));
        // CB 4D 038D
        gbc.setState(0xc553, 0xee65, 0x57c0, 0x1ce2, 0x6752, 0x3704, 0x0, 0x0);
        gbc.writeMem(0xc553, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xee65, gbc.sp());
        EXPECT(0xc555, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc553));
        EXPECT(0x4d, gbc.readMem(0xc554));
        // CB 4D 038E
        gbc.setState(0xed5, 0x5243, 0x4340, 0x661c, 0xa722, 0xb79, 0x0, 0x0);
        gbc.writeMem(0xed5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x5243, gbc.sp());
        EXPECT(0xed7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 038F
        gbc.setState(0xb48, 0xf115, 0x8ca0, 0x1804, 0xc360, 0x7d2, 0x0, 0x1);
        gbc.writeMem(0xb48, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xf115, gbc.sp());
        EXPECT(0xb4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0390
        gbc.setState(0x71e5, 0x3f6a, 0xde10, 0xfab3, 0x532f, 0x778b, 0x0, 0x1);
        gbc.writeMem(0x71e5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x3f6a, gbc.sp());
        EXPECT(0x71e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0391
        gbc.setState(0x4430, 0x18df, 0x2b50, 0x8b6d, 0x5dd2, 0xd8dd, 0x1, 0x0);
        gbc.writeMem(0x4430, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x18df, gbc.sp());
        EXPECT(0x4432, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0392
        gbc.setState(0x7660, 0xa0c6, 0xffc0, 0xb645, 0xcff9, 0x45e1, 0x1, 0x1);
        gbc.writeMem(0x7660, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xa0c6, gbc.sp());
        EXPECT(0x7662, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0393
        gbc.setState(0x8c3b, 0xf51e, 0x6160, 0xe620, 0x1ed, 0x4b9d, 0x1, 0x0);
        gbc.writeMem(0x8c3b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xf51e, gbc.sp());
        EXPECT(0x8c3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c3b));
        EXPECT(0x4d, gbc.readMem(0x8c3c));
        // CB 4D 0394
        gbc.setState(0xc21c, 0x22f, 0x61a0, 0x45c6, 0x96b9, 0x1c8c, 0x1, 0x1);
        gbc.writeMem(0xc21c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x22f, gbc.sp());
        EXPECT(0xc21e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc21c));
        EXPECT(0x4d, gbc.readMem(0xc21d));
        // CB 4D 0395
        gbc.setState(0x4fa0, 0x858a, 0x6d20, 0xc859, 0xd627, 0x3a00, 0x1, 0x1);
        gbc.writeMem(0x4fa0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x858a, gbc.sp());
        EXPECT(0x4fa2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0396
        gbc.setState(0x3c7c, 0x5a41, 0xef50, 0xecea, 0xd9b7, 0xb3d0, 0x0, 0x0);
        gbc.writeMem(0x3c7c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x5a41, gbc.sp());
        EXPECT(0x3c7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0397
        gbc.setState(0x7d28, 0xae67, 0xc650, 0x748, 0x7734, 0xe96c, 0x1, 0x1);
        gbc.writeMem(0x7d28, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xae67, gbc.sp());
        EXPECT(0x7d2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 0398
        gbc.setState(0x39f5, 0xcba8, 0x3680, 0xa245, 0xaa18, 0xb218, 0x0, 0x0);
        gbc.writeMem(0x39f5, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xcba8, gbc.sp());
        EXPECT(0x39f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 0399
        gbc.setState(0x4424, 0xa841, 0x99e0, 0x9215, 0x9160, 0x2559, 0x1, 0x0);
        gbc.writeMem(0x4424, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xa841, gbc.sp());
        EXPECT(0x4426, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 039A
        gbc.setState(0x659c, 0x1e15, 0xa390, 0xc73, 0xdd4f, 0x4e18, 0x1, 0x0);
        gbc.writeMem(0x659c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x1e15, gbc.sp());
        EXPECT(0x659e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 039C
        gbc.setState(0x759e, 0x2b71, 0xba80, 0x3434, 0xfbf3, 0xbf96, 0x1, 0x0);
        gbc.writeMem(0x759e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x2b71, gbc.sp());
        EXPECT(0x75a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 039D
        gbc.setState(0x9c9a, 0xc0d7, 0x6fc0, 0x815e, 0x2fde, 0x76d8, 0x0, 0x0);
        gbc.writeMem(0x9c9a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xc0d7, gbc.sp());
        EXPECT(0x9c9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c9a));
        EXPECT(0x4d, gbc.readMem(0x9c9b));
        // CB 4D 039E
        gbc.setState(0xe1a, 0x4d6c, 0xc260, 0x2661, 0x1c1, 0x3f4, 0x0, 0x0);
        gbc.writeMem(0xe1a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x4d6c, gbc.sp());
        EXPECT(0xe1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 039F
        gbc.setState(0xa97c, 0xdd01, 0xecc0, 0x387c, 0x4e65, 0x3e4a, 0x1, 0x0);
        gbc.writeMem(0xa97c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xdd01, gbc.sp());
        EXPECT(0xa97e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa97c));
        EXPECT(0x4d, gbc.readMem(0xa97d));
        // CB 4D 03A0
        gbc.setState(0xc3e3, 0xaa00, 0x9820, 0x85ce, 0x9db, 0x991d, 0x1, 0x1);
        gbc.writeMem(0xc3e3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xaa00, gbc.sp());
        EXPECT(0xc3e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3e3));
        EXPECT(0x4d, gbc.readMem(0xc3e4));
        // CB 4D 03A2
        gbc.setState(0xbb88, 0x20f8, 0x3800, 0xd58d, 0x1e39, 0xfaf3, 0x1, 0x1);
        gbc.writeMem(0xbb88, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x20f8, gbc.sp());
        EXPECT(0xbb8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb88));
        EXPECT(0x4d, gbc.readMem(0xbb89));
        // CB 4D 03A3
        gbc.setState(0xd6a1, 0x5d42, 0xdfc0, 0x6195, 0x8a6d, 0x2acb, 0x0, 0x1);
        gbc.writeMem(0xd6a1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x5d42, gbc.sp());
        EXPECT(0xd6a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6a1));
        EXPECT(0x4d, gbc.readMem(0xd6a2));
        // CB 4D 03A4
        gbc.setState(0xbdc4, 0x51e0, 0x63a0, 0xb537, 0xb553, 0x35e5, 0x1, 0x1);
        gbc.writeMem(0xbdc4, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x51e0, gbc.sp());
        EXPECT(0xbdc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdc4));
        EXPECT(0x4d, gbc.readMem(0xbdc5));
        // CB 4D 03A5
        gbc.setState(0xb42e, 0x89ac, 0x33b0, 0x72ea, 0x27b9, 0x35ac, 0x0, 0x1);
        gbc.writeMem(0xb42e, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x89ac, gbc.sp());
        EXPECT(0xb430, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb42e));
        EXPECT(0x4d, gbc.readMem(0xb42f));
        // CB 4D 03A6
        gbc.setState(0x3ecd, 0xef04, 0xec40, 0xfe23, 0x31cd, 0x50ff, 0x0, 0x1);
        gbc.writeMem(0x3ecd, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xef04, gbc.sp());
        EXPECT(0x3ecf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03A7
        gbc.setState(0x598d, 0xa650, 0x49c0, 0xfd75, 0xd1eb, 0xa946, 0x0, 0x1);
        gbc.writeMem(0x598d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xa650, gbc.sp());
        EXPECT(0x598f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03A8
        gbc.setState(0x73d8, 0x6f48, 0xe920, 0x35bd, 0xcdb, 0x12af, 0x1, 0x0);
        gbc.writeMem(0x73d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x6f48, gbc.sp());
        EXPECT(0x73da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03A9
        gbc.setState(0x241a, 0x24a1, 0xf520, 0xfe2f, 0x1709, 0xfc60, 0x1, 0x0);
        gbc.writeMem(0x241a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x24a1, gbc.sp());
        EXPECT(0x241c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03AA
        gbc.setState(0x3515, 0x4df6, 0x2b0, 0x691d, 0x8c65, 0xeaa4, 0x1, 0x1);
        gbc.writeMem(0x3515, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x4df6, gbc.sp());
        EXPECT(0x3517, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03AB
        gbc.setState(0x52d7, 0x72c0, 0x8e0, 0x9db, 0x45f3, 0x3733, 0x0, 0x1);
        gbc.writeMem(0x52d7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x72c0, gbc.sp());
        EXPECT(0x52d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03AC
        gbc.setState(0x11fc, 0xea12, 0x6f0, 0x4d67, 0x5cf1, 0xba99, 0x1, 0x0);
        gbc.writeMem(0x11fc, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xea12, gbc.sp());
        EXPECT(0x11fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03AD
        gbc.setState(0xd8f0, 0x82fc, 0xeee0, 0xc9c6, 0xae68, 0xb88f, 0x1, 0x0);
        gbc.writeMem(0xd8f0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x82fc, gbc.sp());
        EXPECT(0xd8f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8f0));
        EXPECT(0x4d, gbc.readMem(0xd8f1));
        // CB 4D 03AF
        gbc.setState(0x2851, 0x35cd, 0x7550, 0xe6cf, 0xe390, 0x65d9, 0x1, 0x1);
        gbc.writeMem(0x2851, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x35cd, gbc.sp());
        EXPECT(0x2853, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03B0
        gbc.setState(0xc74, 0x8e8c, 0x7910, 0x8f19, 0x64, 0xc40b, 0x1, 0x0);
        gbc.writeMem(0xc74, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x8e8c, gbc.sp());
        EXPECT(0xc76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03B1
        gbc.setState(0x26e7, 0x18b, 0xed60, 0x2fd6, 0xc09, 0x1a48, 0x1, 0x0);
        gbc.writeMem(0x26e7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x18b, gbc.sp());
        EXPECT(0x26e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03B2
        gbc.setState(0xc61f, 0x906d, 0x3610, 0x6d1a, 0x8120, 0x77b1, 0x0, 0x1);
        gbc.writeMem(0xc61f, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x906d, gbc.sp());
        EXPECT(0xc621, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc61f));
        EXPECT(0x4d, gbc.readMem(0xc620));
        // CB 4D 03B3
        gbc.setState(0x672d, 0x329e, 0x9300, 0x2d49, 0x380c, 0xd338, 0x1, 0x1);
        gbc.writeMem(0x672d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x329e, gbc.sp());
        EXPECT(0x672f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03B4
        gbc.setState(0x10b, 0x4801, 0x31b0, 0x158b, 0x14dd, 0xa8db, 0x0, 0x0);
        gbc.writeMem(0x10b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x4801, gbc.sp());
        EXPECT(0x10d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03B6
        gbc.setState(0x8c99, 0xc11d, 0xd600, 0x6431, 0xe2af, 0x39b0, 0x0, 0x1);
        gbc.writeMem(0x8c99, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xc11d, gbc.sp());
        EXPECT(0x8c9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c99));
        EXPECT(0x4d, gbc.readMem(0x8c9a));
        // CB 4D 03B7
        gbc.setState(0xdbf, 0x705c, 0x5de0, 0x8126, 0x847c, 0x5f73, 0x0, 0x0);
        gbc.writeMem(0xdbf, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x705c, gbc.sp());
        EXPECT(0xdc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03B8
        gbc.setState(0x3be0, 0x9b6e, 0xdb80, 0x7079, 0xed94, 0x7ea3, 0x1, 0x0);
        gbc.writeMem(0x3be0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x9b6e, gbc.sp());
        EXPECT(0x3be2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03B9
        gbc.setState(0x7d83, 0x53a, 0xcd80, 0x3715, 0xa5a3, 0x9db1, 0x1, 0x0);
        gbc.writeMem(0x7d83, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x53a, gbc.sp());
        EXPECT(0x7d85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03BA
        gbc.setState(0xcb67, 0xc244, 0x6830, 0xe9e8, 0x3ce, 0xad42, 0x0, 0x0);
        gbc.writeMem(0xcb67, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xc244, gbc.sp());
        EXPECT(0xcb69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb67));
        EXPECT(0x4d, gbc.readMem(0xcb68));
        // CB 4D 03BB
        gbc.setState(0xb27a, 0xf236, 0x20a0, 0x41d5, 0x67f3, 0x7138, 0x0, 0x0);
        gbc.writeMem(0xb27a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xf236, gbc.sp());
        EXPECT(0xb27c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb27a));
        EXPECT(0x4d, gbc.readMem(0xb27b));
        // CB 4D 03BC
        gbc.setState(0x80e2, 0x46a5, 0xb590, 0xa67b, 0x1349, 0x2a0a, 0x1, 0x1);
        gbc.writeMem(0x80e2, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x46a5, gbc.sp());
        EXPECT(0x80e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80e2));
        EXPECT(0x4d, gbc.readMem(0x80e3));
        // CB 4D 03BD
        gbc.setState(0xd972, 0x69e7, 0x8030, 0x7d51, 0x7bbf, 0xcb2d, 0x1, 0x0);
        gbc.writeMem(0xd972, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x69e7, gbc.sp());
        EXPECT(0xd974, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd972));
        EXPECT(0x4d, gbc.readMem(0xd973));
        // CB 4D 03BE
        gbc.setState(0x3880, 0xaf63, 0x8b0, 0x5775, 0x6e93, 0x2a0f, 0x1, 0x0);
        gbc.writeMem(0x3880, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xaf63, gbc.sp());
        EXPECT(0x3882, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03BF
        gbc.setState(0x1020, 0x76a, 0x9390, 0xb4ce, 0xc9f9, 0xd2e1, 0x1, 0x1);
        gbc.writeMem(0x1020, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x76a, gbc.sp());
        EXPECT(0x1022, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03C0
        gbc.setState(0x742a, 0xbd6c, 0x6190, 0xcf4e, 0xb436, 0xca3f, 0x1, 0x0);
        gbc.writeMem(0x742a, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xbd6c, gbc.sp());
        EXPECT(0x742c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03C1
        gbc.setState(0x228b, 0xca9e, 0xf240, 0x3ad7, 0x903e, 0xba46, 0x0, 0x0);
        gbc.writeMem(0x228b, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xca9e, gbc.sp());
        EXPECT(0x228d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03C2
        gbc.setState(0x3698, 0x78ee, 0x1470, 0x7387, 0x73ea, 0xa60, 0x0, 0x0);
        gbc.writeMem(0x3698, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x78ee, gbc.sp());
        EXPECT(0x369a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03C4
        gbc.setState(0xedd7, 0x876b, 0x23c0, 0x5886, 0xdf96, 0x8bed, 0x1, 0x0);
        gbc.writeMem(0xedd7, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x876b, gbc.sp());
        EXPECT(0xedd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedd7));
        EXPECT(0x4d, gbc.readMem(0xedd8));
        // CB 4D 03C5
        gbc.setState(0x7c20, 0xeb77, 0x740, 0xad4a, 0xc7da, 0xa201, 0x1, 0x1);
        gbc.writeMem(0x7c20, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xeb77, gbc.sp());
        EXPECT(0x7c22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03C6
        gbc.setState(0x7d32, 0x73ee, 0xbd30, 0x44a8, 0x7566, 0x4484, 0x1, 0x0);
        gbc.writeMem(0x7d32, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x73ee, gbc.sp());
        EXPECT(0x7d34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03C7
        gbc.setState(0x24af, 0xfe0, 0xe5e0, 0xeb08, 0xac2f, 0x84e7, 0x1, 0x0);
        gbc.writeMem(0x24af, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xfe0, gbc.sp());
        EXPECT(0x24b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03C8
        gbc.setState(0xc190, 0xcbf0, 0x270, 0x4a54, 0xd094, 0x42fb, 0x0, 0x0);
        gbc.writeMem(0xc190, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xcbf0, gbc.sp());
        EXPECT(0xc192, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc190));
        EXPECT(0x4d, gbc.readMem(0xc191));
        // CB 4D 03C9
        gbc.setState(0xba13, 0xf778, 0x2080, 0xb95d, 0xeb33, 0x5614, 0x1, 0x0);
        gbc.writeMem(0xba13, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xf778, gbc.sp());
        EXPECT(0xba15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba13));
        EXPECT(0x4d, gbc.readMem(0xba14));
        // CB 4D 03CA
        gbc.setState(0x92d8, 0x8e2b, 0x7330, 0x213e, 0xf85d, 0x6ed2, 0x1, 0x0);
        gbc.writeMem(0x92d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x8e2b, gbc.sp());
        EXPECT(0x92da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92d8));
        EXPECT(0x4d, gbc.readMem(0x92d9));
        // CB 4D 03CB
        gbc.setState(0x5dd0, 0x2f5a, 0x890, 0x1b93, 0x54d4, 0x7ca0, 0x0, 0x1);
        gbc.writeMem(0x5dd0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x2f5a, gbc.sp());
        EXPECT(0x5dd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03CC
        gbc.setState(0x436d, 0xb80c, 0x3b90, 0x96a8, 0xc30a, 0xc517, 0x1, 0x1);
        gbc.writeMem(0x436d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xb80c, gbc.sp());
        EXPECT(0x436f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03CD
        gbc.setState(0x660, 0xe063, 0xd10, 0x723f, 0xe49c, 0x7e0b, 0x1, 0x0);
        gbc.writeMem(0x660, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xe063, gbc.sp());
        EXPECT(0x662, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03CE
        gbc.setState(0xeaa0, 0x3694, 0xa5d0, 0x43e3, 0xa66e, 0x5927, 0x0, 0x0);
        gbc.writeMem(0xeaa0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x3694, gbc.sp());
        EXPECT(0xeaa2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaa0));
        EXPECT(0x4d, gbc.readMem(0xeaa1));
        // CB 4D 03CF
        gbc.setState(0x4464, 0xd1bb, 0xa910, 0x360c, 0xcb43, 0x2570, 0x1, 0x1);
        gbc.writeMem(0x4464, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xd1bb, gbc.sp());
        EXPECT(0x4466, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03D0
        gbc.setState(0x877c, 0x3267, 0x63e0, 0xd442, 0x7203, 0xacbd, 0x0, 0x1);
        gbc.writeMem(0x877c, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x3267, gbc.sp());
        EXPECT(0x877e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x877c));
        EXPECT(0x4d, gbc.readMem(0x877d));
        // CB 4D 03D1
        gbc.setState(0x7f61, 0x77b4, 0x2680, 0x87e4, 0x8157, 0xce1c, 0x0, 0x0);
        gbc.writeMem(0x7f61, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x77b4, gbc.sp());
        EXPECT(0x7f63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03D2
        gbc.setState(0x4851, 0x62d1, 0x1020, 0x9293, 0x4225, 0x7511, 0x1, 0x0);
        gbc.writeMem(0x4851, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x62d1, gbc.sp());
        EXPECT(0x4853, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03D3
        gbc.setState(0xc2e9, 0x50d9, 0xa5c0, 0x2540, 0x64c7, 0xfc6c, 0x0, 0x0);
        gbc.writeMem(0xc2e9, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x50d9, gbc.sp());
        EXPECT(0xc2eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2e9));
        EXPECT(0x4d, gbc.readMem(0xc2ea));
        // CB 4D 03D4
        gbc.setState(0xc2a8, 0x805a, 0x55c0, 0x2775, 0x9fb3, 0x30b7, 0x0, 0x0);
        gbc.writeMem(0xc2a8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x805a, gbc.sp());
        EXPECT(0xc2aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2a8));
        EXPECT(0x4d, gbc.readMem(0xc2a9));
        // CB 4D 03D5
        gbc.setState(0xbd71, 0xfe99, 0x5160, 0xf23a, 0xd262, 0x5125, 0x1, 0x0);
        gbc.writeMem(0xbd71, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xfe99, gbc.sp());
        EXPECT(0xbd73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd71));
        EXPECT(0x4d, gbc.readMem(0xbd72));
        // CB 4D 03D6
        gbc.setState(0xc9e1, 0xb222, 0x5390, 0x979c, 0x767b, 0xf1dc, 0x1, 0x1);
        gbc.writeMem(0xc9e1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xb222, gbc.sp());
        EXPECT(0xc9e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9e1));
        EXPECT(0x4d, gbc.readMem(0xc9e2));
        // CB 4D 03D7
        gbc.setState(0x3e74, 0xe1fb, 0x6a00, 0x59ea, 0x4291, 0x58f4, 0x0, 0x1);
        gbc.writeMem(0x3e74, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xe1fb, gbc.sp());
        EXPECT(0x3e76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03D8
        gbc.setState(0x283d, 0x5402, 0x1b60, 0x9d78, 0x4e1b, 0xf5e5, 0x1, 0x0);
        gbc.writeMem(0x283d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x5402, gbc.sp());
        EXPECT(0x283f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03D9
        gbc.setState(0xc6d0, 0xb93c, 0x9540, 0x8eee, 0x5270, 0x39c2, 0x1, 0x1);
        gbc.writeMem(0xc6d0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xb93c, gbc.sp());
        EXPECT(0xc6d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6d0));
        EXPECT(0x4d, gbc.readMem(0xc6d1));
        // CB 4D 03DA
        gbc.setState(0x12d8, 0x514a, 0xfc0, 0x965, 0xf036, 0x87b3, 0x1, 0x1);
        gbc.writeMem(0x12d8, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x514a, gbc.sp());
        EXPECT(0x12da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03DB
        gbc.setState(0x5308, 0xead5, 0x5620, 0x458, 0xf6d, 0x8d51, 0x0, 0x0);
        gbc.writeMem(0x5308, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xead5, gbc.sp());
        EXPECT(0x530a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03DC
        gbc.setState(0xaee1, 0x6744, 0xfac0, 0x9d22, 0xdfa2, 0x655c, 0x0, 0x0);
        gbc.writeMem(0xaee1, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x6744, gbc.sp());
        EXPECT(0xaee3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaee1));
        EXPECT(0x4d, gbc.readMem(0xaee2));
        // CB 4D 03DD
        gbc.setState(0xcd29, 0xb45f, 0x6f60, 0xa5ac, 0xbb28, 0x9b01, 0x0, 0x0);
        gbc.writeMem(0xcd29, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xb45f, gbc.sp());
        EXPECT(0xcd2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd29));
        EXPECT(0x4d, gbc.readMem(0xcd2a));
        // CB 4D 03DE
        gbc.setState(0x3703, 0x57c5, 0x78b0, 0x16ad, 0xcd4a, 0x284c, 0x1, 0x0);
        gbc.writeMem(0x3703, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x57c5, gbc.sp());
        EXPECT(0x3705, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03DF
        gbc.setState(0x7ca6, 0x44a8, 0xf820, 0xe525, 0xb069, 0xbbce, 0x1, 0x0);
        gbc.writeMem(0x7ca6, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x44a8, gbc.sp());
        EXPECT(0x7ca8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 4D 03E0
        gbc.setState(0x2266, 0x6d09, 0x27d0, 0x5dc2, 0x3d28, 0x1718, 0x0, 0x1);
        gbc.writeMem(0x2266, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x6d09, gbc.sp());
        EXPECT(0x2268, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03E1
        gbc.setState(0x82c3, 0x57f9, 0x2f0, 0x7b10, 0x8c7, 0x5c5b, 0x0, 0x0);
        gbc.writeMem(0x82c3, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x57f9, gbc.sp());
        EXPECT(0x82c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82c3));
        EXPECT(0x4d, gbc.readMem(0x82c4));
        // CB 4D 03E2
        gbc.setState(0x396d, 0xe67c, 0x7210, 0xee75, 0x7fa7, 0x3262, 0x0, 0x1);
        gbc.writeMem(0x396d, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xe67c, gbc.sp());
        EXPECT(0x396f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03E3
        gbc.setState(0x58a0, 0x3640, 0x7db0, 0x2655, 0x93e1, 0xed14, 0x0, 0x1);
        gbc.writeMem(0x58a0, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x3640, gbc.sp());
        EXPECT(0x58a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03E5
        gbc.setState(0x1e09, 0x1c89, 0x6cb0, 0x54b7, 0xabfb, 0xfc9d, 0x0, 0x0);
        gbc.writeMem(0x1e09, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x1c89, gbc.sp());
        EXPECT(0x1e0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 4D 03E6
        gbc.setState(0xca31, 0x9bee, 0xda60, 0x5cc5, 0x22e2, 0x5029, 0x1, 0x1);
        gbc.writeMem(0xca31, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x9bee, gbc.sp());
        EXPECT(0xca33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca31));
        EXPECT(0x4d, gbc.readMem(0xca32));
        // CB 4D 03E7
        gbc.setState(0x83ea, 0xf61e, 0xe0, 0xbf37, 0x553d, 0xf80f, 0x0, 0x1);
        gbc.writeMem(0x83ea, { 0xcb, 0x4d });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xf61e, gbc.sp());
        EXPECT(0x83ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83ea));
        EXPECT(0x4d, gbc.readMem(0x83eb));
    }
