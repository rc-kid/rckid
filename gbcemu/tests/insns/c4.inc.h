    TEST(gbcemu, opcode_c4) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // C4 0001
        gbc.setState(0x98ce, 0x9084, 0x78f0, 0x4cf6, 0x7587, 0x3892, 0x0, 0x0);
        gbc.writeMem(0x98ce, { 0xc4, 0x8b, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9084);
        EXPECT(gbc.pc(), 0x98d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98ce), 0xc4);
        EXPECT(gbc.readMem(0x98cf), 0x8b);
        EXPECT(gbc.readMem(0x98d0), 0xaf);
        // C4 0002
        gbc.setState(0xd0af, 0x31e7, 0x31d0, 0xc7d7, 0x59e5, 0x9acb, 0x0, 0x0);
        gbc.writeMem(0xd0af, { 0xc4, 0x6d, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x31e7);
        EXPECT(gbc.pc(), 0xd0b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0af), 0xc4);
        EXPECT(gbc.readMem(0xd0b0), 0x6d);
        EXPECT(gbc.readMem(0xd0b1), 0xdc);
        // C4 0003
        gbc.setState(0x6621, 0x4f79, 0xea90, 0x5b54, 0x42d8, 0x4e68, 0x0, 0x0);
        gbc.writeMem(0x6621, { 0xc4, 0x49, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4f79);
        EXPECT(gbc.pc(), 0x6624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0004
        gbc.setState(0x91a5, 0xbc86, 0x7680, 0xd2c1, 0x2358, 0xb0c2, 0x1, 0x0);
        gbc.writeMem(0x91a5, { 0xc4, 0x10, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xbc86);
        EXPECT(gbc.pc(), 0x91a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a5), 0xc4);
        EXPECT(gbc.readMem(0x91a6), 0x10);
        EXPECT(gbc.readMem(0x91a7), 0x34);
        // C4 0005
        gbc.setState(0x3a81, 0xf4df, 0x8800, 0x64a2, 0x2ba3, 0x71bf, 0x1, 0x0);
        gbc.writeMem(0x3a81, { 0xc4, 0x8f, 0x58 });
        gbc.writeMem(0xf4dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf4dd);
        EXPECT(gbc.pc(), 0x588f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4dd), 0x84);
        EXPECT(gbc.readMem(0xf4de), 0x3a);
        // C4 0006
        gbc.setState(0x8d92, 0x95f7, 0x3cf0, 0xbe57, 0x97f9, 0x4e9, 0x1, 0x1);
        gbc.writeMem(0x8d92, { 0xc4, 0x14, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x95f7);
        EXPECT(gbc.pc(), 0x8d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d92), 0xc4);
        EXPECT(gbc.readMem(0x8d93), 0x14);
        EXPECT(gbc.readMem(0x8d94), 0xb3);
        // C4 0007
        gbc.setState(0x40e9, 0x790, 0xa480, 0x4e51, 0xdd92, 0x5a85, 0x1, 0x0);
        gbc.writeMem(0x40e9, { 0xc4, 0xac, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x790);
        EXPECT(gbc.pc(), 0x40ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0008
        gbc.setState(0x9584, 0xe1b3, 0xe80, 0x5f49, 0xfe6b, 0x9748, 0x0, 0x1);
        gbc.writeMem(0x9584, { 0xc4, 0x3e, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe1b3);
        EXPECT(gbc.pc(), 0x9587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9584), 0xc4);
        EXPECT(gbc.readMem(0x9585), 0x3e);
        EXPECT(gbc.readMem(0x9586), 0x4a);
        // C4 0009
        gbc.setState(0xdc05, 0xcf54, 0x11c0, 0xa91b, 0x8dd2, 0x409c, 0x0, 0x0);
        gbc.writeMem(0xdc05, { 0xc4, 0xb7, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcf54);
        EXPECT(gbc.pc(), 0xdc08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc05), 0xc4);
        EXPECT(gbc.readMem(0xdc06), 0xb7);
        EXPECT(gbc.readMem(0xdc07), 0x8f);
        // C4 000A
        gbc.setState(0xb8e4, 0xb0cd, 0x3b40, 0x7faa, 0x97df, 0x5186, 0x1, 0x0);
        gbc.writeMem(0xb0cb, { 0x0, 0x0 });
        gbc.writeMem(0xb8e4, { 0xc4, 0xd6, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb0cb);
        EXPECT(gbc.pc(), 0xebd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0cb), 0xe7);
        EXPECT(gbc.readMem(0xb0cc), 0xb8);
        EXPECT(gbc.readMem(0xb8e4), 0xc4);
        EXPECT(gbc.readMem(0xb8e5), 0xd6);
        EXPECT(gbc.readMem(0xb8e6), 0xeb);
        // C4 000B
        gbc.setState(0x9f11, 0x86c5, 0x2aa0, 0x97ab, 0x6300, 0xf6a0, 0x1, 0x0);
        gbc.writeMem(0x9f11, { 0xc4, 0x60, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x86c5);
        EXPECT(gbc.pc(), 0x9f14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f11), 0xc4);
        EXPECT(gbc.readMem(0x9f12), 0x60);
        EXPECT(gbc.readMem(0x9f13), 0xa9);
        // C4 000C
        gbc.setState(0x991a, 0x5fe8, 0xe6c0, 0x9776, 0x66b, 0xabd8, 0x1, 0x1);
        gbc.writeMem(0x991a, { 0xc4, 0xa8, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5fe8);
        EXPECT(gbc.pc(), 0x991d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991a), 0xc4);
        EXPECT(gbc.readMem(0x991b), 0xa8);
        EXPECT(gbc.readMem(0x991c), 0x15);
        // C4 000D
        gbc.setState(0x164c, 0x8e50, 0xa6b0, 0xb7bb, 0x986f, 0x6c56, 0x1, 0x0);
        gbc.writeMem(0x164c, { 0xc4, 0x8e, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8e50);
        EXPECT(gbc.pc(), 0x164f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 000F
        gbc.setState(0xa7e7, 0x86e0, 0x42c0, 0x2bfc, 0xaa13, 0x5c26, 0x1, 0x1);
        gbc.writeMem(0xa7e7, { 0xc4, 0xa8, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x86e0);
        EXPECT(gbc.pc(), 0xa7ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e7), 0xc4);
        EXPECT(gbc.readMem(0xa7e8), 0xa8);
        EXPECT(gbc.readMem(0xa7e9), 0x3);
        // C4 0010
        gbc.setState(0x2f1a, 0xfdda, 0x5be0, 0xe43f, 0xc372, 0x85d4, 0x0, 0x1);
        gbc.writeMem(0x2f1a, { 0xc4, 0x96, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xfdda);
        EXPECT(gbc.pc(), 0x2f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0011
        gbc.setState(0x6728, 0xc5a3, 0x320, 0x585d, 0xeaf4, 0x91e2, 0x1, 0x0);
        gbc.writeMem(0x6728, { 0xc4, 0xd4, 0x10 });
        gbc.writeMem(0xc5a1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc5a1);
        EXPECT(gbc.pc(), 0x10d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5a1), 0x2b);
        EXPECT(gbc.readMem(0xc5a2), 0x67);
        // C4 0012
        gbc.setState(0x4efd, 0x1506, 0x7280, 0x4cb2, 0x7444, 0x5ef2, 0x0, 0x0);
        gbc.writeMem(0x4efd, { 0xc4, 0x97, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1506);
        EXPECT(gbc.pc(), 0x4f00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0013
        gbc.setState(0x9450, 0xafe9, 0x4cb0, 0xc18d, 0xb7d5, 0x9de6, 0x1, 0x0);
        gbc.writeMem(0x9450, { 0xc4, 0x5e, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xafe9);
        EXPECT(gbc.pc(), 0x9453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9450), 0xc4);
        EXPECT(gbc.readMem(0x9451), 0x5e);
        EXPECT(gbc.readMem(0x9452), 0xf);
        // C4 0014
        gbc.setState(0xa9fe, 0x1e03, 0x5af0, 0x54d2, 0xe42c, 0x5e27, 0x0, 0x0);
        gbc.writeMem(0xa9fe, { 0xc4, 0x19, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1e03);
        EXPECT(gbc.pc(), 0xaa01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9fe), 0xc4);
        EXPECT(gbc.readMem(0xa9ff), 0x19);
        EXPECT(gbc.readMem(0xaa00), 0x50);
        // C4 0015
        gbc.setState(0xd16a, 0xd9e5, 0x6620, 0xb2bf, 0x5873, 0xda90, 0x1, 0x1);
        gbc.writeMem(0xd16a, { 0xc4, 0x3c, 0x3f });
        gbc.writeMem(0xd9e3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd9e3);
        EXPECT(gbc.pc(), 0x3f3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd16a), 0xc4);
        EXPECT(gbc.readMem(0xd16b), 0x3c);
        EXPECT(gbc.readMem(0xd16c), 0x3f);
        EXPECT(gbc.readMem(0xd9e3), 0x6d);
        EXPECT(gbc.readMem(0xd9e4), 0xd1);
        // C4 0017
        gbc.setState(0xbc5, 0xf47d, 0xe3c0, 0xcd12, 0xdd0e, 0xc9b9, 0x0, 0x0);
        gbc.writeMem(0xbc5, { 0xc4, 0x24, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf47d);
        EXPECT(gbc.pc(), 0xbc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0018
        gbc.setState(0xe9b0, 0xe140, 0x2800, 0xd0e1, 0xa19f, 0x52a3, 0x1, 0x1);
        gbc.writeMem(0xe13e, { 0x0, 0x0 });
        gbc.writeMem(0xe9b0, { 0xc4, 0x81, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe13e);
        EXPECT(gbc.pc(), 0xa981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe13e), 0xb3);
        EXPECT(gbc.readMem(0xe13f), 0xe9);
        EXPECT(gbc.readMem(0xe9b0), 0xc4);
        EXPECT(gbc.readMem(0xe9b1), 0x81);
        EXPECT(gbc.readMem(0xe9b2), 0xa9);
        // C4 001A
        gbc.setState(0xac9a, 0x41f7, 0xef0, 0xbc1c, 0xa17d, 0x4253, 0x1, 0x0);
        gbc.writeMem(0xac9a, { 0xc4, 0x29, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x41f7);
        EXPECT(gbc.pc(), 0xac9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9a), 0xc4);
        EXPECT(gbc.readMem(0xac9b), 0x29);
        EXPECT(gbc.readMem(0xac9c), 0xed);
        // C4 001B
        gbc.setState(0xb40f, 0x22bd, 0x7490, 0xa5b5, 0x112d, 0x70c6, 0x0, 0x1);
        gbc.writeMem(0xb40f, { 0xc4, 0xb3, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x22bd);
        EXPECT(gbc.pc(), 0xb412);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb40f), 0xc4);
        EXPECT(gbc.readMem(0xb410), 0xb3);
        EXPECT(gbc.readMem(0xb411), 0x8c);
        // C4 001C
        gbc.setState(0xb7c3, 0xdcff, 0xe750, 0x3e75, 0xf1d6, 0x5d86, 0x0, 0x1);
        gbc.writeMem(0xb7c3, { 0xc4, 0xf1, 0xf });
        gbc.writeMem(0xdcfd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdcfd);
        EXPECT(gbc.pc(), 0xff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7c3), 0xc4);
        EXPECT(gbc.readMem(0xb7c4), 0xf1);
        EXPECT(gbc.readMem(0xb7c5), 0xf);
        EXPECT(gbc.readMem(0xdcfd), 0xc6);
        EXPECT(gbc.readMem(0xdcfe), 0xb7);
        // C4 001D
        gbc.setState(0xa553, 0xf970, 0x3f80, 0x1c7, 0x5cac, 0xa88e, 0x0, 0x1);
        gbc.writeMem(0xa553, { 0xc4, 0x3f, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf970);
        EXPECT(gbc.pc(), 0xa556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa553), 0xc4);
        EXPECT(gbc.readMem(0xa554), 0x3f);
        EXPECT(gbc.readMem(0xa555), 0xce);
        // C4 001E
        gbc.setState(0x457, 0xb457, 0x34b0, 0x6e1f, 0x9bcc, 0xf3ea, 0x0, 0x0);
        gbc.writeMem(0x457, { 0xc4, 0xc1, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb457);
        EXPECT(gbc.pc(), 0x45a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 001F
        gbc.setState(0xeb90, 0x207a, 0xe490, 0x810e, 0x6006, 0x9763, 0x1, 0x1);
        gbc.writeMem(0xeb90, { 0xc4, 0xce, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x207a);
        EXPECT(gbc.pc(), 0xeb93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb90), 0xc4);
        EXPECT(gbc.readMem(0xeb91), 0xce);
        EXPECT(gbc.readMem(0xeb92), 0xab);
        // C4 0021
        gbc.setState(0x9745, 0x9621, 0xb530, 0xdca2, 0x818e, 0x2409, 0x0, 0x0);
        gbc.writeMem(0x961f, { 0x0, 0x0 });
        gbc.writeMem(0x9745, { 0xc4, 0xcf, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x961f);
        EXPECT(gbc.pc(), 0x65cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x961f), 0x48);
        EXPECT(gbc.readMem(0x9620), 0x97);
        EXPECT(gbc.readMem(0x9745), 0xc4);
        EXPECT(gbc.readMem(0x9746), 0xcf);
        EXPECT(gbc.readMem(0x9747), 0x65);
        // C4 0022
        gbc.setState(0xf03, 0x3812, 0x2190, 0x5f9e, 0x711a, 0xe21b, 0x1, 0x1);
        gbc.writeMem(0xf03, { 0xc4, 0xb6, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3812);
        EXPECT(gbc.pc(), 0xf06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0024
        gbc.setState(0xb105, 0xbbd5, 0xdc80, 0x6e2c, 0xa4f, 0xf1ca, 0x1, 0x0);
        gbc.writeMem(0xb105, { 0xc4, 0xc4, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbbd5);
        EXPECT(gbc.pc(), 0xb108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb105), 0xc4);
        EXPECT(gbc.readMem(0xb106), 0xc4);
        EXPECT(gbc.readMem(0xb107), 0xa5);
        // C4 0025
        gbc.setState(0xa40c, 0xb4d0, 0x95f0, 0xf0c8, 0xd9f6, 0x77db, 0x1, 0x0);
        gbc.writeMem(0xa40c, { 0xc4, 0x6f, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb4d0);
        EXPECT(gbc.pc(), 0xa40f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa40c), 0xc4);
        EXPECT(gbc.readMem(0xa40d), 0x6f);
        EXPECT(gbc.readMem(0xa40e), 0x0);
        // C4 0026
        gbc.setState(0xc1d, 0xcbcb, 0xe4a0, 0x6e60, 0xcc21, 0x9392, 0x1, 0x1);
        gbc.writeMem(0xc1d, { 0xc4, 0x55, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xcbcb);
        EXPECT(gbc.pc(), 0xc20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0027
        gbc.setState(0x9cea, 0x8b62, 0xe8b0, 0x1ecc, 0x79d0, 0xbd9f, 0x1, 0x0);
        gbc.writeMem(0x9cea, { 0xc4, 0xf5, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8b62);
        EXPECT(gbc.pc(), 0x9ced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cea), 0xc4);
        EXPECT(gbc.readMem(0x9ceb), 0xf5);
        EXPECT(gbc.readMem(0x9cec), 0xb2);
        // C4 0028
        gbc.setState(0x69d3, 0x1187, 0xfaf0, 0x82ed, 0x3901, 0x9d15, 0x1, 0x0);
        gbc.writeMem(0x69d3, { 0xc4, 0x92, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1187);
        EXPECT(gbc.pc(), 0x69d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 002B
        gbc.setState(0x16d8, 0x5bac, 0x36e0, 0x67ac, 0x176c, 0xced9, 0x1, 0x0);
        gbc.writeMem(0x16d8, { 0xc4, 0xde, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5bac);
        EXPECT(gbc.pc(), 0x16db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 002D
        gbc.setState(0x4201, 0xe106, 0x1750, 0x84d5, 0x81b1, 0x8b57, 0x0, 0x1);
        gbc.writeMem(0x4201, { 0xc4, 0x77, 0xa6 });
        gbc.writeMem(0xe104, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe104);
        EXPECT(gbc.pc(), 0xa677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe104), 0x4);
        EXPECT(gbc.readMem(0xe105), 0x42);
        // C4 0030
        gbc.setState(0x375d, 0xe148, 0x3050, 0x39cd, 0x1eaa, 0x33b5, 0x1, 0x1);
        gbc.writeMem(0x375d, { 0xc4, 0x90, 0x94 });
        gbc.writeMem(0xe146, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe146);
        EXPECT(gbc.pc(), 0x9490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe146), 0x60);
        EXPECT(gbc.readMem(0xe147), 0x37);
        // C4 0031
        gbc.setState(0x1043, 0xf426, 0xb380, 0xcb7, 0xbddd, 0x35ef, 0x1, 0x0);
        gbc.writeMem(0x1043, { 0xc4, 0xfc, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf426);
        EXPECT(gbc.pc(), 0x1046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0034
        gbc.setState(0x3657, 0xbc6b, 0xcd10, 0x7150, 0x666b, 0x491d, 0x1, 0x1);
        gbc.writeMem(0x3657, { 0xc4, 0xcd, 0xd7 });
        gbc.writeMem(0xbc69, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xbc69);
        EXPECT(gbc.pc(), 0xd7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc69), 0x5a);
        EXPECT(gbc.readMem(0xbc6a), 0x36);
        // C4 0035
        gbc.setState(0x81d2, 0xa4f, 0x1990, 0x8bd0, 0x4f43, 0xc29a, 0x0, 0x0);
        gbc.writeMem(0x81d2, { 0xc4, 0x99, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa4f);
        EXPECT(gbc.pc(), 0x81d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d2), 0xc4);
        EXPECT(gbc.readMem(0x81d3), 0x99);
        EXPECT(gbc.readMem(0x81d4), 0x6a);
        // C4 0036
        gbc.setState(0x8ea, 0x6ce6, 0xbbe0, 0x715b, 0xf727, 0x18f8, 0x0, 0x0);
        gbc.writeMem(0x8ea, { 0xc4, 0xf9, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6ce6);
        EXPECT(gbc.pc(), 0x8ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0037
        gbc.setState(0x112a, 0x7eef, 0x53c0, 0x6689, 0xc662, 0x7d5f, 0x0, 0x0);
        gbc.writeMem(0x112a, { 0xc4, 0xa5, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7eef);
        EXPECT(gbc.pc(), 0x112d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0038
        gbc.setState(0x77e1, 0xae44, 0x21c0, 0x35ce, 0xe6bf, 0x4f95, 0x1, 0x0);
        gbc.writeMem(0x77e1, { 0xc4, 0xfd, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xae44);
        EXPECT(gbc.pc(), 0x77e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 003A
        gbc.setState(0x42b9, 0xd336, 0xa9d0, 0xd82e, 0x2165, 0xd446, 0x1, 0x1);
        gbc.writeMem(0x42b9, { 0xc4, 0xf8, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd336);
        EXPECT(gbc.pc(), 0x42bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 003B
        gbc.setState(0x54cd, 0xdc8, 0xfac0, 0x16f3, 0xf8f4, 0x277c, 0x1, 0x1);
        gbc.writeMem(0x54cd, { 0xc4, 0x28, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xdc8);
        EXPECT(gbc.pc(), 0x54d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 003C
        gbc.setState(0xe5d8, 0xba58, 0xcc30, 0x3c78, 0x1b78, 0x5fbb, 0x1, 0x1);
        gbc.writeMem(0xba56, { 0x0, 0x0 });
        gbc.writeMem(0xe5d8, { 0xc4, 0xcc, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xba56);
        EXPECT(gbc.pc(), 0xfcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba56), 0xdb);
        EXPECT(gbc.readMem(0xba57), 0xe5);
        EXPECT(gbc.readMem(0xe5d8), 0xc4);
        EXPECT(gbc.readMem(0xe5d9), 0xcc);
        EXPECT(gbc.readMem(0xe5da), 0xf);
        // C4 003D
        gbc.setState(0x2d97, 0xd7b8, 0xcf10, 0xffdd, 0xc635, 0x5acc, 0x1, 0x0);
        gbc.writeMem(0x2d97, { 0xc4, 0x85, 0x2b });
        gbc.writeMem(0xd7b6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd7b6);
        EXPECT(gbc.pc(), 0x2b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7b6), 0x9a);
        EXPECT(gbc.readMem(0xd7b7), 0x2d);
        // C4 003E
        gbc.setState(0x3323, 0x6b02, 0x180, 0x9f81, 0x351f, 0x3a8, 0x0, 0x1);
        gbc.writeMem(0x3323, { 0xc4, 0xde, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6b02);
        EXPECT(gbc.pc(), 0x3326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 003F
        gbc.setState(0xa6a6, 0x4ef3, 0xefb0, 0x1c15, 0xadcc, 0xbdfc, 0x0, 0x1);
        gbc.writeMem(0xa6a6, { 0xc4, 0x39, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4ef3);
        EXPECT(gbc.pc(), 0xa6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a6), 0xc4);
        EXPECT(gbc.readMem(0xa6a7), 0x39);
        EXPECT(gbc.readMem(0xa6a8), 0xd);
        // C4 0041
        gbc.setState(0x8c2c, 0x99c3, 0xb550, 0x263b, 0x6279, 0xadc5, 0x0, 0x1);
        gbc.writeMem(0x8c2c, { 0xc4, 0xcc, 0x8d });
        gbc.writeMem(0x99c1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x99c1);
        EXPECT(gbc.pc(), 0x8dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c2c), 0xc4);
        EXPECT(gbc.readMem(0x8c2d), 0xcc);
        EXPECT(gbc.readMem(0x8c2e), 0x8d);
        EXPECT(gbc.readMem(0x99c1), 0x2f);
        EXPECT(gbc.readMem(0x99c2), 0x8c);
        // C4 0043
        gbc.setState(0x5429, 0x6301, 0x14f0, 0x6, 0x2b16, 0x5991, 0x0, 0x1);
        gbc.writeMem(0x5429, { 0xc4, 0xd, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6301);
        EXPECT(gbc.pc(), 0x542c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0044
        gbc.setState(0xbc5f, 0x25ea, 0x34e0, 0xd8e8, 0x5419, 0xabf3, 0x1, 0x0);
        gbc.writeMem(0xbc5f, { 0xc4, 0x5b, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x25ea);
        EXPECT(gbc.pc(), 0xbc62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5f), 0xc4);
        EXPECT(gbc.readMem(0xbc60), 0x5b);
        EXPECT(gbc.readMem(0xbc61), 0x32);
        // C4 0045
        gbc.setState(0xc1d8, 0x8858, 0x9a60, 0x58df, 0x8fd4, 0x71e2, 0x1, 0x1);
        gbc.writeMem(0x8856, { 0x0, 0x0 });
        gbc.writeMem(0xc1d8, { 0xc4, 0x4d, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8856);
        EXPECT(gbc.pc(), 0x7c4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8856), 0xdb);
        EXPECT(gbc.readMem(0x8857), 0xc1);
        EXPECT(gbc.readMem(0xc1d8), 0xc4);
        EXPECT(gbc.readMem(0xc1d9), 0x4d);
        EXPECT(gbc.readMem(0xc1da), 0x7c);
        // C4 0046
        gbc.setState(0xe962, 0xcf8a, 0xb350, 0x438d, 0x46f0, 0x15d2, 0x0, 0x0);
        gbc.writeMem(0xcf88, { 0x0, 0x0 });
        gbc.writeMem(0xe962, { 0xc4, 0xa, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xcf88);
        EXPECT(gbc.pc(), 0x510a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf88), 0x65);
        EXPECT(gbc.readMem(0xcf89), 0xe9);
        EXPECT(gbc.readMem(0xe962), 0xc4);
        EXPECT(gbc.readMem(0xe963), 0xa);
        EXPECT(gbc.readMem(0xe964), 0x51);
        // C4 0047
        gbc.setState(0xab06, 0xc014, 0xdb0, 0xc6d4, 0x81b4, 0x6227, 0x1, 0x1);
        gbc.writeMem(0xab06, { 0xc4, 0x7, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc014);
        EXPECT(gbc.pc(), 0xab09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab06), 0xc4);
        EXPECT(gbc.readMem(0xab07), 0x7);
        EXPECT(gbc.readMem(0xab08), 0x65);
        // C4 0048
        gbc.setState(0x8e34, 0x8a4a, 0x18d0, 0x9a5e, 0x2ba5, 0x17cb, 0x1, 0x0);
        gbc.writeMem(0x8e34, { 0xc4, 0x82, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8a4a);
        EXPECT(gbc.pc(), 0x8e37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e34), 0xc4);
        EXPECT(gbc.readMem(0x8e35), 0x82);
        EXPECT(gbc.readMem(0x8e36), 0x9c);
        // C4 0049
        gbc.setState(0xbb0e, 0x9e67, 0x930, 0x843b, 0xde31, 0x150d, 0x0, 0x0);
        gbc.writeMem(0x9e65, { 0x0, 0x0 });
        gbc.writeMem(0xbb0e, { 0xc4, 0x7c, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9e65);
        EXPECT(gbc.pc(), 0x627c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e65), 0x11);
        EXPECT(gbc.readMem(0x9e66), 0xbb);
        EXPECT(gbc.readMem(0xbb0e), 0xc4);
        EXPECT(gbc.readMem(0xbb0f), 0x7c);
        EXPECT(gbc.readMem(0xbb10), 0x62);
        // C4 004A
        gbc.setState(0xc617, 0x356d, 0x7dc0, 0x46ab, 0x6750, 0x27f0, 0x0, 0x1);
        gbc.writeMem(0xc617, { 0xc4, 0x3a, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x356d);
        EXPECT(gbc.pc(), 0xc61a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc617), 0xc4);
        EXPECT(gbc.readMem(0xc618), 0x3a);
        EXPECT(gbc.readMem(0xc619), 0x7);
        // C4 004B
        gbc.setState(0x75e0, 0xbe36, 0xf640, 0xe9ae, 0xc058, 0x9afa, 0x0, 0x1);
        gbc.writeMem(0x75e0, { 0xc4, 0xd2, 0xcf });
        gbc.writeMem(0xbe34, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbe34);
        EXPECT(gbc.pc(), 0xcfd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe34), 0xe3);
        EXPECT(gbc.readMem(0xbe35), 0x75);
        // C4 004C
        gbc.setState(0x1ab3, 0xb405, 0x50, 0x1ee1, 0x7d25, 0x989b, 0x1, 0x1);
        gbc.writeMem(0x1ab3, { 0xc4, 0x39, 0x4 });
        gbc.writeMem(0xb403, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb403);
        EXPECT(gbc.pc(), 0x439);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb403), 0xb6);
        EXPECT(gbc.readMem(0xb404), 0x1a);
        // C4 004E
        gbc.setState(0xc66f, 0xd701, 0x390, 0x3da7, 0xa1ac, 0x57be, 0x1, 0x0);
        gbc.writeMem(0xc66f, { 0xc4, 0x22, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd701);
        EXPECT(gbc.pc(), 0xc672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc66f), 0xc4);
        EXPECT(gbc.readMem(0xc670), 0x22);
        EXPECT(gbc.readMem(0xc671), 0x72);
        // C4 0051
        gbc.setState(0x58f5, 0xed2c, 0xc600, 0xd00a, 0x613e, 0x6f6c, 0x1, 0x0);
        gbc.writeMem(0x58f5, { 0xc4, 0x27, 0x1f });
        gbc.writeMem(0xed2a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xed2a);
        EXPECT(gbc.pc(), 0x1f27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed2a), 0xf8);
        EXPECT(gbc.readMem(0xed2b), 0x58);
        // C4 0052
        gbc.setState(0x50ba, 0x95a1, 0x2b60, 0xbfa9, 0x6415, 0xc924, 0x0, 0x0);
        gbc.writeMem(0x50ba, { 0xc4, 0x1a, 0xb4 });
        gbc.writeMem(0x959f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x959f);
        EXPECT(gbc.pc(), 0xb41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x959f), 0xbd);
        EXPECT(gbc.readMem(0x95a0), 0x50);
        // C4 0053
        gbc.setState(0x7edb, 0xef78, 0x2b30, 0xc58d, 0xe8ce, 0xe97f, 0x0, 0x0);
        gbc.writeMem(0x7edb, { 0xc4, 0x27, 0xd6 });
        gbc.writeMem(0xef76, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xef76);
        EXPECT(gbc.pc(), 0xd627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef76), 0xde);
        EXPECT(gbc.readMem(0xef77), 0x7e);
        // C4 0054
        gbc.setState(0x8615, 0xafad, 0x3e60, 0x2c8d, 0x14b8, 0x5d42, 0x0, 0x1);
        gbc.writeMem(0x8615, { 0xc4, 0xb6, 0xd7 });
        gbc.writeMem(0xafab, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xafab);
        EXPECT(gbc.pc(), 0xd7b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8615), 0xc4);
        EXPECT(gbc.readMem(0x8616), 0xb6);
        EXPECT(gbc.readMem(0x8617), 0xd7);
        EXPECT(gbc.readMem(0xafab), 0x18);
        EXPECT(gbc.readMem(0xafac), 0x86);
        // C4 0059
        gbc.setState(0x5733, 0x7e65, 0xfd0, 0xd564, 0x276e, 0x1bd1, 0x0, 0x0);
        gbc.writeMem(0x5733, { 0xc4, 0x85, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7e65);
        EXPECT(gbc.pc(), 0x5736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 005A
        gbc.setState(0xbff6, 0x8096, 0x7d10, 0xa87b, 0x247c, 0x9ed3, 0x1, 0x0);
        gbc.writeMem(0x8094, { 0x0, 0x0 });
        gbc.writeMem(0xbff6, { 0xc4, 0x5c, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8094);
        EXPECT(gbc.pc(), 0xb65c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8094), 0xf9);
        EXPECT(gbc.readMem(0x8095), 0xbf);
        EXPECT(gbc.readMem(0xbff6), 0xc4);
        EXPECT(gbc.readMem(0xbff7), 0x5c);
        EXPECT(gbc.readMem(0xbff8), 0xb6);
        // C4 005B
        gbc.setState(0xbdc6, 0xadbc, 0x45b0, 0x2a14, 0x2b73, 0x8cef, 0x1, 0x0);
        gbc.writeMem(0xbdc6, { 0xc4, 0xe2, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xadbc);
        EXPECT(gbc.pc(), 0xbdc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdc6), 0xc4);
        EXPECT(gbc.readMem(0xbdc7), 0xe2);
        EXPECT(gbc.readMem(0xbdc8), 0xb6);
        // C4 005C
        gbc.setState(0xe279, 0xbdbf, 0x7660, 0xf7c9, 0x4424, 0xe49, 0x1, 0x0);
        gbc.writeMem(0xbdbd, { 0x0, 0x0 });
        gbc.writeMem(0xe279, { 0xc4, 0x6b, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbdbd);
        EXPECT(gbc.pc(), 0x9c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdbd), 0x7c);
        EXPECT(gbc.readMem(0xbdbe), 0xe2);
        EXPECT(gbc.readMem(0xe279), 0xc4);
        EXPECT(gbc.readMem(0xe27a), 0x6b);
        EXPECT(gbc.readMem(0xe27b), 0x9c);
        // C4 0060
        gbc.setState(0x7c1a, 0xa19b, 0x2250, 0x5d3b, 0x31f0, 0x89f, 0x0, 0x1);
        gbc.writeMem(0x7c1a, { 0xc4, 0x42, 0x19 });
        gbc.writeMem(0xa199, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa199);
        EXPECT(gbc.pc(), 0x1942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa199), 0x1d);
        EXPECT(gbc.readMem(0xa19a), 0x7c);
        // C4 0064
        gbc.setState(0x2699, 0xdc9a, 0xd200, 0xd6c9, 0x6cfb, 0x2319, 0x1, 0x0);
        gbc.writeMem(0x2699, { 0xc4, 0xae, 0x2b });
        gbc.writeMem(0xdc98, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdc98);
        EXPECT(gbc.pc(), 0x2bae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc98), 0x9c);
        EXPECT(gbc.readMem(0xdc99), 0x26);
        // C4 0065
        gbc.setState(0x2192, 0xd8f1, 0x6a60, 0x773, 0x99b, 0x4866, 0x0, 0x0);
        gbc.writeMem(0x2192, { 0xc4, 0x55, 0x3d });
        gbc.writeMem(0xd8ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd8ef);
        EXPECT(gbc.pc(), 0x3d55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ef), 0x95);
        EXPECT(gbc.readMem(0xd8f0), 0x21);
        // C4 0066
        gbc.setState(0x5692, 0xc83c, 0x7fe0, 0xbee8, 0x82d6, 0x1b80, 0x0, 0x0);
        gbc.writeMem(0x5692, { 0xc4, 0x58, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc83c);
        EXPECT(gbc.pc(), 0x5695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0067
        gbc.setState(0xd652, 0x1c4, 0xcbf0, 0x43a0, 0x1d9a, 0x46f2, 0x1, 0x1);
        gbc.writeMem(0xd652, { 0xc4, 0x23, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1c4);
        EXPECT(gbc.pc(), 0xd655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd652), 0xc4);
        EXPECT(gbc.readMem(0xd653), 0x23);
        EXPECT(gbc.readMem(0xd654), 0x66);
        // C4 0068
        gbc.setState(0x1dde, 0xb74f, 0xd7d0, 0x963d, 0x7112, 0x1337, 0x1, 0x1);
        gbc.writeMem(0x1dde, { 0xc4, 0x50, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb74f);
        EXPECT(gbc.pc(), 0x1de1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0069
        gbc.setState(0x9ff0, 0xfc24, 0x4020, 0x6495, 0x23f9, 0xb95, 0x0, 0x1);
        gbc.writeMem(0x9ff0, { 0xc4, 0xc2, 0x65 });
        gbc.writeMem(0xfc22, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xfc22);
        EXPECT(gbc.pc(), 0x65c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff0), 0xc4);
        EXPECT(gbc.readMem(0x9ff1), 0xc2);
        EXPECT(gbc.readMem(0x9ff2), 0x65);
        EXPECT(gbc.readMem(0xfc22), 0xf3);
        EXPECT(gbc.readMem(0xfc23), 0x9f);
        // C4 006A
        gbc.setState(0x314b, 0x9b95, 0x6270, 0x5a0f, 0xf6d8, 0x7237, 0x1, 0x1);
        gbc.writeMem(0x314b, { 0xc4, 0xed, 0xf6 });
        gbc.writeMem(0x9b93, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9b93);
        EXPECT(gbc.pc(), 0xf6ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b93), 0x4e);
        EXPECT(gbc.readMem(0x9b94), 0x31);
        // C4 006C
        gbc.setState(0xd3c0, 0xe572, 0xc080, 0x9df1, 0x8667, 0xe97f, 0x1, 0x1);
        gbc.writeMem(0xd3c0, { 0xc4, 0xd0, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe572);
        EXPECT(gbc.pc(), 0xd3c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c0), 0xc4);
        EXPECT(gbc.readMem(0xd3c1), 0xd0);
        EXPECT(gbc.readMem(0xd3c2), 0xea);
        // C4 006D
        gbc.setState(0x691, 0xc04e, 0xa750, 0xb985, 0x87cc, 0x325b, 0x0, 0x1);
        gbc.writeMem(0x691, { 0xc4, 0xa5, 0xe6 });
        gbc.writeMem(0xc04c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc04c);
        EXPECT(gbc.pc(), 0xe6a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc04c), 0x94);
        EXPECT(gbc.readMem(0xc04d), 0x6);
        // C4 0070
        gbc.setState(0x1fa, 0xe0f1, 0xd780, 0x693b, 0x9de, 0x3f2d, 0x1, 0x1);
        gbc.writeMem(0x1fa, { 0xc4, 0x7b, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe0f1);
        EXPECT(gbc.pc(), 0x1fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0072
        gbc.setState(0xc79a, 0x493e, 0x94c0, 0xe452, 0xf753, 0xf916, 0x0, 0x0);
        gbc.writeMem(0xc79a, { 0xc4, 0x8c, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x493e);
        EXPECT(gbc.pc(), 0xc79d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc79a), 0xc4);
        EXPECT(gbc.readMem(0xc79b), 0x8c);
        EXPECT(gbc.readMem(0xc79c), 0x62);
        // C4 0074
        gbc.setState(0xa9a4, 0x8957, 0x9da0, 0x2557, 0x6d91, 0x6829, 0x0, 0x0);
        gbc.writeMem(0xa9a4, { 0xc4, 0xeb, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8957);
        EXPECT(gbc.pc(), 0xa9a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a4), 0xc4);
        EXPECT(gbc.readMem(0xa9a5), 0xeb);
        EXPECT(gbc.readMem(0xa9a6), 0xe);
        // C4 0075
        gbc.setState(0xd0c4, 0xb04c, 0xad20, 0x58bc, 0x7b4a, 0xb8ed, 0x1, 0x0);
        gbc.writeMem(0xb04a, { 0x0, 0x0 });
        gbc.writeMem(0xd0c4, { 0xc4, 0x3c, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb04a);
        EXPECT(gbc.pc(), 0x6e3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb04a), 0xc7);
        EXPECT(gbc.readMem(0xb04b), 0xd0);
        EXPECT(gbc.readMem(0xd0c4), 0xc4);
        EXPECT(gbc.readMem(0xd0c5), 0x3c);
        EXPECT(gbc.readMem(0xd0c6), 0x6e);
        // C4 0076
        gbc.setState(0x7c25, 0x94a2, 0x9270, 0x73b5, 0x54d8, 0xb76b, 0x0, 0x0);
        gbc.writeMem(0x7c25, { 0xc4, 0x64, 0x6c });
        gbc.writeMem(0x94a0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x94a0);
        EXPECT(gbc.pc(), 0x6c64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94a0), 0x28);
        EXPECT(gbc.readMem(0x94a1), 0x7c);
        // C4 0079
        gbc.setState(0x994a, 0xab42, 0x9aa0, 0x49f9, 0x2a6, 0x7e4c, 0x1, 0x1);
        gbc.writeMem(0x994a, { 0xc4, 0xe9, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xab42);
        EXPECT(gbc.pc(), 0x994d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x994a), 0xc4);
        EXPECT(gbc.readMem(0x994b), 0xe9);
        EXPECT(gbc.readMem(0x994c), 0x80);
        // C4 007A
        gbc.setState(0x9e2e, 0xe20, 0xc5c0, 0x5aa2, 0x5f55, 0x1e03, 0x0, 0x0);
        gbc.writeMem(0x9e2e, { 0xc4, 0xf7, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xe20);
        EXPECT(gbc.pc(), 0x9e31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e2e), 0xc4);
        EXPECT(gbc.readMem(0x9e2f), 0xf7);
        EXPECT(gbc.readMem(0x9e30), 0xd7);
        // C4 007B
        gbc.setState(0xb80f, 0xfebb, 0x8150, 0x4a50, 0xa37f, 0x722a, 0x0, 0x0);
        gbc.writeMem(0xb80f, { 0xc4, 0x73, 0x70 });
        gbc.writeMem(0xfeb9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xfeb9);
        EXPECT(gbc.pc(), 0x7073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80f), 0xc4);
        EXPECT(gbc.readMem(0xb810), 0x73);
        EXPECT(gbc.readMem(0xb811), 0x70);
        EXPECT(gbc.readMem(0xfeb9), 0x12);
        EXPECT(gbc.readMem(0xfeba), 0xb8);
        // C4 007D
        gbc.setState(0xb5c1, 0x91be, 0xda00, 0xc0ec, 0x9978, 0x695b, 0x1, 0x1);
        gbc.writeMem(0x91bc, { 0x0, 0x0 });
        gbc.writeMem(0xb5c1, { 0xc4, 0x0, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x91bc);
        EXPECT(gbc.pc(), 0x8000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91bc), 0xc4);
        EXPECT(gbc.readMem(0x91bd), 0xb5);
        EXPECT(gbc.readMem(0xb5c1), 0xc4);
        EXPECT(gbc.readMem(0xb5c2), 0x0);
        EXPECT(gbc.readMem(0xb5c3), 0x80);
        // C4 007E
        gbc.setState(0x661b, 0xaade, 0x5ca0, 0x84b7, 0x599d, 0x8ac6, 0x1, 0x0);
        gbc.writeMem(0x661b, { 0xc4, 0x71, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xaade);
        EXPECT(gbc.pc(), 0x661e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 007F
        gbc.setState(0x4644, 0x14a4, 0xecc0, 0xa4e3, 0xf19, 0xd680, 0x1, 0x1);
        gbc.writeMem(0x4644, { 0xc4, 0xad, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x14a4);
        EXPECT(gbc.pc(), 0x4647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0080
        gbc.setState(0xd5a7, 0x1503, 0x94e0, 0x3b59, 0x3a4c, 0x65c6, 0x0, 0x1);
        gbc.writeMem(0xd5a7, { 0xc4, 0x30, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1503);
        EXPECT(gbc.pc(), 0xd5aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a7), 0xc4);
        EXPECT(gbc.readMem(0xd5a8), 0x30);
        EXPECT(gbc.readMem(0xd5a9), 0xf6);
        // C4 0081
        gbc.setState(0x3eab, 0xa4bb, 0x3bc0, 0x49fc, 0x160e, 0x264b, 0x0, 0x1);
        gbc.writeMem(0x3eab, { 0xc4, 0x96, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa4bb);
        EXPECT(gbc.pc(), 0x3eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0082
        gbc.setState(0x263c, 0xb2f6, 0xdf90, 0xb05d, 0x7d8e, 0x92c0, 0x0, 0x1);
        gbc.writeMem(0x263c, { 0xc4, 0x3, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb2f6);
        EXPECT(gbc.pc(), 0x263f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0086
        gbc.setState(0xdb97, 0xb9fa, 0x91c0, 0x8c0d, 0x3bb0, 0xe34d, 0x1, 0x0);
        gbc.writeMem(0xdb97, { 0xc4, 0x9f, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb9fa);
        EXPECT(gbc.pc(), 0xdb9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb97), 0xc4);
        EXPECT(gbc.readMem(0xdb98), 0x9f);
        EXPECT(gbc.readMem(0xdb99), 0xa);
        // C4 0088
        gbc.setState(0xb71b, 0xa6b8, 0x67d0, 0xe85, 0x61a8, 0x662f, 0x1, 0x0);
        gbc.writeMem(0xb71b, { 0xc4, 0x9b, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa6b8);
        EXPECT(gbc.pc(), 0xb71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb71b), 0xc4);
        EXPECT(gbc.readMem(0xb71c), 0x9b);
        EXPECT(gbc.readMem(0xb71d), 0x24);
        // C4 008A
        gbc.setState(0x5cb2, 0xc33e, 0xc870, 0xcedc, 0xcbc0, 0xdfd7, 0x1, 0x1);
        gbc.writeMem(0x5cb2, { 0xc4, 0x1a, 0xc4 });
        gbc.writeMem(0xc33c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc33c);
        EXPECT(gbc.pc(), 0xc41a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33c), 0xb5);
        EXPECT(gbc.readMem(0xc33d), 0x5c);
        // C4 008B
        gbc.setState(0x60c0, 0xe727, 0xdc30, 0x4dc, 0x458e, 0x704b, 0x1, 0x1);
        gbc.writeMem(0x60c0, { 0xc4, 0xd1, 0x90 });
        gbc.writeMem(0xe725, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe725);
        EXPECT(gbc.pc(), 0x90d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe725), 0xc3);
        EXPECT(gbc.readMem(0xe726), 0x60);
        // C4 008E
        gbc.setState(0x17ac, 0xfdc1, 0x16b0, 0x1537, 0x5a11, 0x53d3, 0x1, 0x0);
        gbc.writeMem(0x17ac, { 0xc4, 0xf, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfdc1);
        EXPECT(gbc.pc(), 0x17af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 008F
        gbc.setState(0xe367, 0x81c7, 0xd060, 0x936f, 0xd072, 0x80c0, 0x1, 0x1);
        gbc.writeMem(0x81c5, { 0x0, 0x0 });
        gbc.writeMem(0xe367, { 0xc4, 0xc9, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x81c5);
        EXPECT(gbc.pc(), 0x61c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c5), 0x6a);
        EXPECT(gbc.readMem(0x81c6), 0xe3);
        EXPECT(gbc.readMem(0xe367), 0xc4);
        EXPECT(gbc.readMem(0xe368), 0xc9);
        EXPECT(gbc.readMem(0xe369), 0x61);
        // C4 0090
        gbc.setState(0xcd46, 0x9231, 0x6280, 0x762e, 0x6619, 0x8dc7, 0x0, 0x1);
        gbc.writeMem(0xcd46, { 0xc4, 0xdc, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9231);
        EXPECT(gbc.pc(), 0xcd49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd46), 0xc4);
        EXPECT(gbc.readMem(0xcd47), 0xdc);
        EXPECT(gbc.readMem(0xcd48), 0xb1);
        // C4 0091
        gbc.setState(0xdae8, 0xf3bf, 0x1090, 0x3995, 0x4863, 0xeb1e, 0x1, 0x1);
        gbc.writeMem(0xdae8, { 0xc4, 0x6c, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf3bf);
        EXPECT(gbc.pc(), 0xdaeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae8), 0xc4);
        EXPECT(gbc.readMem(0xdae9), 0x6c);
        EXPECT(gbc.readMem(0xdaea), 0xa1);
        // C4 0092
        gbc.setState(0x1134, 0x5bf6, 0xb80, 0x9c69, 0x32a4, 0x5782, 0x1, 0x0);
        gbc.writeMem(0x1134, { 0xc4, 0xc0, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5bf6);
        EXPECT(gbc.pc(), 0x1137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0094
        gbc.setState(0x8655, 0xa4bb, 0xfda0, 0x34b3, 0x9810, 0xe0ba, 0x1, 0x1);
        gbc.writeMem(0x8655, { 0xc4, 0xae, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa4bb);
        EXPECT(gbc.pc(), 0x8658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8655), 0xc4);
        EXPECT(gbc.readMem(0x8656), 0xae);
        EXPECT(gbc.readMem(0x8657), 0xfe);
        // C4 0095
        gbc.setState(0x1be0, 0xbfdf, 0xc460, 0xa459, 0x1a99, 0xdbb0, 0x1, 0x1);
        gbc.writeMem(0x1be0, { 0xc4, 0x31, 0x21 });
        gbc.writeMem(0xbfdd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xbfdd);
        EXPECT(gbc.pc(), 0x2131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfdd), 0xe3);
        EXPECT(gbc.readMem(0xbfde), 0x1b);
        // C4 0097
        gbc.setState(0x47f6, 0xc489, 0x2410, 0x9972, 0x9b5d, 0x64e9, 0x1, 0x0);
        gbc.writeMem(0x47f6, { 0xc4, 0xb7, 0xaf });
        gbc.writeMem(0xc487, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc487);
        EXPECT(gbc.pc(), 0xafb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc487), 0xf9);
        EXPECT(gbc.readMem(0xc488), 0x47);
        // C4 0098
        gbc.setState(0xecc9, 0x4a26, 0xdee0, 0x6ff3, 0xc183, 0xd538, 0x1, 0x0);
        gbc.writeMem(0xecc9, { 0xc4, 0xf9, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4a26);
        EXPECT(gbc.pc(), 0xeccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecc9), 0xc4);
        EXPECT(gbc.readMem(0xecca), 0xf9);
        EXPECT(gbc.readMem(0xeccb), 0xf0);
        // C4 0099
        gbc.setState(0x96cf, 0x85a7, 0xbd40, 0xd57f, 0x1297, 0x8d0f, 0x0, 0x1);
        gbc.writeMem(0x85a5, { 0x0, 0x0 });
        gbc.writeMem(0x96cf, { 0xc4, 0xa2, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x85a5);
        EXPECT(gbc.pc(), 0x4aa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a5), 0xd2);
        EXPECT(gbc.readMem(0x85a6), 0x96);
        EXPECT(gbc.readMem(0x96cf), 0xc4);
        EXPECT(gbc.readMem(0x96d0), 0xa2);
        EXPECT(gbc.readMem(0x96d1), 0x4a);
        // C4 009B
        gbc.setState(0x6ec8, 0xe82e, 0x5cb0, 0x8e9e, 0x31b4, 0xa6cc, 0x1, 0x1);
        gbc.writeMem(0x6ec8, { 0xc4, 0x49, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe82e);
        EXPECT(gbc.pc(), 0x6ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 009D
        gbc.setState(0xe7ec, 0xb36b, 0x63c0, 0xb7eb, 0xaf55, 0x3e56, 0x0, 0x0);
        gbc.writeMem(0xe7ec, { 0xc4, 0x5b, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb36b);
        EXPECT(gbc.pc(), 0xe7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ec), 0xc4);
        EXPECT(gbc.readMem(0xe7ed), 0x5b);
        EXPECT(gbc.readMem(0xe7ee), 0xec);
        // C4 009E
        gbc.setState(0x3c05, 0x3192, 0x77d0, 0x6149, 0xddee, 0x106b, 0x1, 0x1);
        gbc.writeMem(0x3c05, { 0xc4, 0x6c, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3192);
        EXPECT(gbc.pc(), 0x3c08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 009F
        gbc.setState(0xc526, 0x12d4, 0x17a0, 0x6f9c, 0x717c, 0x3eed, 0x0, 0x0);
        gbc.writeMem(0xc526, { 0xc4, 0xaf, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x12d4);
        EXPECT(gbc.pc(), 0xc529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc526), 0xc4);
        EXPECT(gbc.readMem(0xc527), 0xaf);
        EXPECT(gbc.readMem(0xc528), 0x6f);
        // C4 00A0
        gbc.setState(0x6f89, 0x532e, 0x5da0, 0x4388, 0xe0d8, 0x7965, 0x1, 0x1);
        gbc.writeMem(0x6f89, { 0xc4, 0x6a, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x532e);
        EXPECT(gbc.pc(), 0x6f8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 00A1
        gbc.setState(0xb0a2, 0x6e2e, 0xbf80, 0xbab5, 0x174e, 0x1ca5, 0x0, 0x0);
        gbc.writeMem(0xb0a2, { 0xc4, 0xc, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6e2e);
        EXPECT(gbc.pc(), 0xb0a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a2), 0xc4);
        EXPECT(gbc.readMem(0xb0a3), 0xc);
        EXPECT(gbc.readMem(0xb0a4), 0xc3);
        // C4 00A2
        gbc.setState(0x4b7b, 0x8b87, 0x490, 0x1d9d, 0xfc7d, 0xfb28, 0x1, 0x1);
        gbc.writeMem(0x4b7b, { 0xc4, 0xd0, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8b87);
        EXPECT(gbc.pc(), 0x4b7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 00A5
        gbc.setState(0x1f94, 0x6faa, 0xa580, 0x63db, 0x76fe, 0x1b26, 0x0, 0x0);
        gbc.writeMem(0x1f94, { 0xc4, 0x9a, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6faa);
        EXPECT(gbc.pc(), 0x1f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00A7
        gbc.setState(0xd96e, 0xf24f, 0xf440, 0xb3a1, 0x1dbe, 0x6a56, 0x0, 0x0);
        gbc.writeMem(0xd96e, { 0xc4, 0x40, 0x6c });
        gbc.writeMem(0xf24d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf24d);
        EXPECT(gbc.pc(), 0x6c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96e), 0xc4);
        EXPECT(gbc.readMem(0xd96f), 0x40);
        EXPECT(gbc.readMem(0xd970), 0x6c);
        EXPECT(gbc.readMem(0xf24d), 0x71);
        EXPECT(gbc.readMem(0xf24e), 0xd9);
        // C4 00A8
        gbc.setState(0x1de5, 0xaeb8, 0x2de0, 0xde86, 0xe4c3, 0x2c87, 0x0, 0x0);
        gbc.writeMem(0x1de5, { 0xc4, 0xcd, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xaeb8);
        EXPECT(gbc.pc(), 0x1de8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 00AA
        gbc.setState(0x690d, 0x1c9b, 0xc4c0, 0x37fc, 0x2217, 0xa464, 0x0, 0x1);
        gbc.writeMem(0x690d, { 0xc4, 0x38, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1c9b);
        EXPECT(gbc.pc(), 0x6910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00AB
        gbc.setState(0xd892, 0x294d, 0x81f0, 0xb736, 0x8033, 0x193f, 0x0, 0x0);
        gbc.writeMem(0xd892, { 0xc4, 0x5e, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x294d);
        EXPECT(gbc.pc(), 0xd895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd892), 0xc4);
        EXPECT(gbc.readMem(0xd893), 0x5e);
        EXPECT(gbc.readMem(0xd894), 0xa4);
        // C4 00AC
        gbc.setState(0xcac4, 0xecfd, 0xa710, 0x933b, 0xa7aa, 0x6222, 0x0, 0x0);
        gbc.writeMem(0xcac4, { 0xc4, 0x9b, 0xd6 });
        gbc.writeMem(0xecfb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xecfb);
        EXPECT(gbc.pc(), 0xd69b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcac4), 0xc4);
        EXPECT(gbc.readMem(0xcac5), 0x9b);
        EXPECT(gbc.readMem(0xcac6), 0xd6);
        EXPECT(gbc.readMem(0xecfb), 0xc7);
        EXPECT(gbc.readMem(0xecfc), 0xca);
        // C4 00AD
        gbc.setState(0xab66, 0xc314, 0x70c0, 0x1827, 0xc5bd, 0x5107, 0x1, 0x1);
        gbc.writeMem(0xab66, { 0xc4, 0x2e, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc314);
        EXPECT(gbc.pc(), 0xab69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab66), 0xc4);
        EXPECT(gbc.readMem(0xab67), 0x2e);
        EXPECT(gbc.readMem(0xab68), 0xbc);
        // C4 00AE
        gbc.setState(0xc7e3, 0xda73, 0x86d0, 0x3641, 0x740d, 0x223c, 0x0, 0x1);
        gbc.writeMem(0xc7e3, { 0xc4, 0x3, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xda73);
        EXPECT(gbc.pc(), 0xc7e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7e3), 0xc4);
        EXPECT(gbc.readMem(0xc7e4), 0x3);
        EXPECT(gbc.readMem(0xc7e5), 0x80);
        // C4 00AF
        gbc.setState(0x1a32, 0xee94, 0x7a50, 0xdc27, 0x3410, 0x4d8d, 0x1, 0x1);
        gbc.writeMem(0x1a32, { 0xc4, 0xdd, 0xd9 });
        gbc.writeMem(0xee92, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xee92);
        EXPECT(gbc.pc(), 0xd9dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee92), 0x35);
        EXPECT(gbc.readMem(0xee93), 0x1a);
        // C4 00B0
        gbc.setState(0x9da4, 0xf678, 0x1190, 0x5ed8, 0xf746, 0x4c58, 0x1, 0x0);
        gbc.writeMem(0x9da4, { 0xc4, 0x41, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf678);
        EXPECT(gbc.pc(), 0x9da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9da4), 0xc4);
        EXPECT(gbc.readMem(0x9da5), 0x41);
        EXPECT(gbc.readMem(0x9da6), 0x3a);
        // C4 00B1
        gbc.setState(0xe93a, 0xc26, 0x2ad0, 0xd8da, 0x6e5, 0xd229, 0x1, 0x0);
        gbc.writeMem(0xe93a, { 0xc4, 0xf8, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc26);
        EXPECT(gbc.pc(), 0xe93d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe93a), 0xc4);
        EXPECT(gbc.readMem(0xe93b), 0xf8);
        EXPECT(gbc.readMem(0xe93c), 0x5b);
        // C4 00B2
        gbc.setState(0x34dd, 0x9c06, 0x67c0, 0x61cf, 0x75a3, 0xc9cc, 0x0, 0x1);
        gbc.writeMem(0x34dd, { 0xc4, 0x7, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9c06);
        EXPECT(gbc.pc(), 0x34e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00B4
        gbc.setState(0x2a86, 0x75e6, 0xa4b0, 0x4b3c, 0xd1ec, 0x5bfd, 0x1, 0x1);
        gbc.writeMem(0x2a86, { 0xc4, 0xa8, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x75e6);
        EXPECT(gbc.pc(), 0x2a89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 00B5
        gbc.setState(0xdfec, 0xabe1, 0x2e0, 0xaaa8, 0xff1e, 0x5cdd, 0x1, 0x1);
        gbc.writeMem(0xdfec, { 0xc4, 0x98, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xabe1);
        EXPECT(gbc.pc(), 0xdfef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfec), 0xc4);
        EXPECT(gbc.readMem(0xdfed), 0x98);
        EXPECT(gbc.readMem(0xdfee), 0x2d);
        // C4 00B7
        gbc.setState(0xb743, 0x8e48, 0xc1b0, 0x6547, 0xed11, 0x3268, 0x0, 0x0);
        gbc.writeMem(0xb743, { 0xc4, 0xdb, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8e48);
        EXPECT(gbc.pc(), 0xb746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb743), 0xc4);
        EXPECT(gbc.readMem(0xb744), 0xdb);
        EXPECT(gbc.readMem(0xb745), 0xd5);
        // C4 00B8
        gbc.setState(0xe5e5, 0x95ff, 0x3b40, 0xac13, 0x142f, 0x938e, 0x1, 0x0);
        gbc.writeMem(0x95fd, { 0x0, 0x0 });
        gbc.writeMem(0xe5e5, { 0xc4, 0x12, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x95fd);
        EXPECT(gbc.pc(), 0x7d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fd), 0xe8);
        EXPECT(gbc.readMem(0x95fe), 0xe5);
        EXPECT(gbc.readMem(0xe5e5), 0xc4);
        EXPECT(gbc.readMem(0xe5e6), 0x12);
        EXPECT(gbc.readMem(0xe5e7), 0x7d);
        // C4 00B9
        gbc.setState(0x1e48, 0xac28, 0xc970, 0x4c96, 0xc6e4, 0x658d, 0x1, 0x1);
        gbc.writeMem(0x1e48, { 0xc4, 0x0, 0xf8 });
        gbc.writeMem(0xac26, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xac26);
        EXPECT(gbc.pc(), 0xf800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac26), 0x4b);
        EXPECT(gbc.readMem(0xac27), 0x1e);
        // C4 00BA
        gbc.setState(0x2066, 0x84c0, 0xb200, 0xae83, 0x668a, 0x2a9c, 0x1, 0x1);
        gbc.writeMem(0x2066, { 0xc4, 0x44, 0x20 });
        gbc.writeMem(0x84be, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x84be);
        EXPECT(gbc.pc(), 0x2044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84be), 0x69);
        EXPECT(gbc.readMem(0x84bf), 0x20);
        // C4 00BC
        gbc.setState(0x7946, 0xd6ef, 0x5f30, 0x6eb, 0x7a1f, 0xa35d, 0x0, 0x1);
        gbc.writeMem(0x7946, { 0xc4, 0x3a, 0x67 });
        gbc.writeMem(0xd6ed, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd6ed);
        EXPECT(gbc.pc(), 0x673a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ed), 0x49);
        EXPECT(gbc.readMem(0xd6ee), 0x79);
        // C4 00BD
        gbc.setState(0x2974, 0x13a4, 0x94f0, 0xea71, 0x68c1, 0x99d8, 0x1, 0x1);
        gbc.writeMem(0x2974, { 0xc4, 0x2, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x13a4);
        EXPECT(gbc.pc(), 0x2977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 00BE
        gbc.setState(0xda36, 0x6716, 0x92e0, 0x3513, 0x468c, 0xbf59, 0x1, 0x0);
        gbc.writeMem(0xda36, { 0xc4, 0x3d, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6716);
        EXPECT(gbc.pc(), 0xda39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda36), 0xc4);
        EXPECT(gbc.readMem(0xda37), 0x3d);
        EXPECT(gbc.readMem(0xda38), 0x6b);
        // C4 00BF
        gbc.setState(0xac29, 0xed65, 0x5b50, 0x118c, 0xd9e1, 0x679, 0x1, 0x1);
        gbc.writeMem(0xac29, { 0xc4, 0xf4, 0x91 });
        gbc.writeMem(0xed63, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xed63);
        EXPECT(gbc.pc(), 0x91f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac29), 0xc4);
        EXPECT(gbc.readMem(0xac2a), 0xf4);
        EXPECT(gbc.readMem(0xac2b), 0x91);
        EXPECT(gbc.readMem(0xed63), 0x2c);
        EXPECT(gbc.readMem(0xed64), 0xac);
        // C4 00C0
        gbc.setState(0x195a, 0xde94, 0x73c0, 0x4302, 0x5741, 0xa34a, 0x1, 0x1);
        gbc.writeMem(0x195a, { 0xc4, 0x28, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xde94);
        EXPECT(gbc.pc(), 0x195d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00C1
        gbc.setState(0x32c, 0x6a20, 0xdad0, 0xa1b3, 0xda6e, 0xe824, 0x0, 0x1);
        gbc.writeMem(0x32c, { 0xc4, 0x10, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6a20);
        EXPECT(gbc.pc(), 0x32f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 00C2
        gbc.setState(0x9286, 0xa4d5, 0xa5b0, 0x1907, 0x5b9f, 0xe946, 0x0, 0x1);
        gbc.writeMem(0x9286, { 0xc4, 0x30, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa4d5);
        EXPECT(gbc.pc(), 0x9289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9286), 0xc4);
        EXPECT(gbc.readMem(0x9287), 0x30);
        EXPECT(gbc.readMem(0x9288), 0x5a);
        // C4 00C6
        gbc.setState(0x1ff8, 0x7cb4, 0xb6a0, 0xf0bf, 0x2e84, 0x1f4d, 0x0, 0x0);
        gbc.writeMem(0x1ff8, { 0xc4, 0x92, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7cb4);
        EXPECT(gbc.pc(), 0x1ffb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 00C7
        gbc.setState(0x6cd8, 0x84e, 0xf980, 0x58f0, 0x9fc9, 0xb8, 0x0, 0x1);
        gbc.writeMem(0x6cd8, { 0xc4, 0x3d, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x84e);
        EXPECT(gbc.pc(), 0x6cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00C9
        gbc.setState(0x7013, 0x456e, 0xf0f0, 0x1654, 0xed88, 0x25ae, 0x1, 0x1);
        gbc.writeMem(0x7013, { 0xc4, 0xfc, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x456e);
        EXPECT(gbc.pc(), 0x7016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 00CA
        gbc.setState(0x1aa8, 0x476f, 0x31c0, 0xbfa, 0x9651, 0x96c0, 0x0, 0x1);
        gbc.writeMem(0x1aa8, { 0xc4, 0xd7, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x476f);
        EXPECT(gbc.pc(), 0x1aab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00CE
        gbc.setState(0x8cf5, 0xf34a, 0xa4c0, 0x969f, 0x89ba, 0xd743, 0x0, 0x0);
        gbc.writeMem(0x8cf5, { 0xc4, 0x6b, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf34a);
        EXPECT(gbc.pc(), 0x8cf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf5), 0xc4);
        EXPECT(gbc.readMem(0x8cf6), 0x6b);
        EXPECT(gbc.readMem(0x8cf7), 0x38);
        // C4 00CF
        gbc.setState(0xd428, 0xd76, 0x1da0, 0x68d1, 0xe3fb, 0x23a, 0x0, 0x1);
        gbc.writeMem(0xd428, { 0xc4, 0x27, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd76);
        EXPECT(gbc.pc(), 0xd42b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd428), 0xc4);
        EXPECT(gbc.readMem(0xd429), 0x27);
        EXPECT(gbc.readMem(0xd42a), 0x97);
        // C4 00D0
        gbc.setState(0x7178, 0x7453, 0x5480, 0x7576, 0xc7b8, 0x12a5, 0x1, 0x1);
        gbc.writeMem(0x7178, { 0xc4, 0xd5, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7453);
        EXPECT(gbc.pc(), 0x717b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00D1
        gbc.setState(0xa957, 0xddce, 0xdd70, 0x212a, 0x3ec, 0xbcb9, 0x1, 0x0);
        gbc.writeMem(0xa957, { 0xc4, 0xc0, 0xd });
        gbc.writeMem(0xddcc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xddcc);
        EXPECT(gbc.pc(), 0xdc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa957), 0xc4);
        EXPECT(gbc.readMem(0xa958), 0xc0);
        EXPECT(gbc.readMem(0xa959), 0xd);
        EXPECT(gbc.readMem(0xddcc), 0x5a);
        EXPECT(gbc.readMem(0xddcd), 0xa9);
        // C4 00D2
        gbc.setState(0x3cda, 0x887b, 0x6780, 0x701f, 0x82e0, 0x94b0, 0x1, 0x0);
        gbc.writeMem(0x3cda, { 0xc4, 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x887b);
        EXPECT(gbc.pc(), 0x3cdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00D3
        gbc.setState(0x1b6d, 0x928a, 0xde30, 0x15a1, 0xe9f2, 0x66c2, 0x0, 0x0);
        gbc.writeMem(0x1b6d, { 0xc4, 0x78, 0x36 });
        gbc.writeMem(0x9288, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9288);
        EXPECT(gbc.pc(), 0x3678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9288), 0x70);
        EXPECT(gbc.readMem(0x9289), 0x1b);
        // C4 00D4
        gbc.setState(0x21f, 0xadc5, 0x4660, 0xfa53, 0xbebf, 0x2d9a, 0x0, 0x0);
        gbc.writeMem(0x21f, { 0xc4, 0xec, 0xad });
        gbc.writeMem(0xadc3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xadc3);
        EXPECT(gbc.pc(), 0xadec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc3), 0x22);
        EXPECT(gbc.readMem(0xadc4), 0x2);
        // C4 00D5
        gbc.setState(0x2dcd, 0xe6b5, 0xf220, 0x58ad, 0xc701, 0xf918, 0x1, 0x0);
        gbc.writeMem(0x2dcd, { 0xc4, 0xbd, 0xe1 });
        gbc.writeMem(0xe6b3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe6b3);
        EXPECT(gbc.pc(), 0xe1bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6b3), 0xd0);
        EXPECT(gbc.readMem(0xe6b4), 0x2d);
        // C4 00D6
        gbc.setState(0x1bf3, 0x2343, 0xdca0, 0xda2f, 0xcab4, 0xc0d2, 0x0, 0x1);
        gbc.writeMem(0x1bf3, { 0xc4, 0x10, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2343);
        EXPECT(gbc.pc(), 0x1bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 00D7
        gbc.setState(0x1516, 0x7f6e, 0xaeb0, 0xc9ca, 0x1c17, 0xf18d, 0x0, 0x0);
        gbc.writeMem(0x1516, { 0xc4, 0xea, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7f6e);
        EXPECT(gbc.pc(), 0x1519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 00D8
        gbc.setState(0x2e4b, 0x92c5, 0xf010, 0x3e4, 0xac4b, 0x62a8, 0x0, 0x1);
        gbc.writeMem(0x2e4b, { 0xc4, 0xfc, 0xa9 });
        gbc.writeMem(0x92c3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x92c3);
        EXPECT(gbc.pc(), 0xa9fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c3), 0x4e);
        EXPECT(gbc.readMem(0x92c4), 0x2e);
        // C4 00DC
        gbc.setState(0x10b8, 0xa26e, 0xf5a0, 0xe0cd, 0xf6b1, 0x489a, 0x0, 0x0);
        gbc.writeMem(0x10b8, { 0xc4, 0x72, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa26e);
        EXPECT(gbc.pc(), 0x10bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 00DD
        gbc.setState(0x4dff, 0x426d, 0x5bc0, 0xaa2f, 0x3c19, 0xf941, 0x0, 0x0);
        gbc.writeMem(0x4dff, { 0xc4, 0x7f, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x426d);
        EXPECT(gbc.pc(), 0x4e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00DE
        gbc.setState(0xd9ce, 0x3129, 0x1bb0, 0x1d58, 0xc5e0, 0x749b, 0x1, 0x0);
        gbc.writeMem(0xd9ce, { 0xc4, 0x8f, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3129);
        EXPECT(gbc.pc(), 0xd9d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ce), 0xc4);
        EXPECT(gbc.readMem(0xd9cf), 0x8f);
        EXPECT(gbc.readMem(0xd9d0), 0xe9);
        // C4 00DF
        gbc.setState(0x549, 0x75a8, 0x39e0, 0x59d0, 0xc0d9, 0x5227, 0x0, 0x0);
        gbc.writeMem(0x549, { 0xc4, 0xdf, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x75a8);
        EXPECT(gbc.pc(), 0x54c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 00E1
        gbc.setState(0xed4f, 0x882f, 0xad90, 0x51b3, 0x5e3, 0xba5f, 0x0, 0x0);
        gbc.writeMem(0xed4f, { 0xc4, 0xa5, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x882f);
        EXPECT(gbc.pc(), 0xed52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed4f), 0xc4);
        EXPECT(gbc.readMem(0xed50), 0xa5);
        EXPECT(gbc.readMem(0xed51), 0x6c);
        // C4 00E2
        gbc.setState(0x2061, 0xa70b, 0x7e70, 0x2a17, 0xa77d, 0x231c, 0x0, 0x1);
        gbc.writeMem(0x2061, { 0xc4, 0x6e, 0xa0 });
        gbc.writeMem(0xa709, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa709);
        EXPECT(gbc.pc(), 0xa06e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa709), 0x64);
        EXPECT(gbc.readMem(0xa70a), 0x20);
        // C4 00E3
        gbc.setState(0x80bc, 0x8b86, 0xdaa0, 0xb31b, 0xa16b, 0x7fe3, 0x1, 0x0);
        gbc.writeMem(0x80bc, { 0xc4, 0x37, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8b86);
        EXPECT(gbc.pc(), 0x80bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80bc), 0xc4);
        EXPECT(gbc.readMem(0x80bd), 0x37);
        EXPECT(gbc.readMem(0x80be), 0xe5);
        // C4 00E7
        gbc.setState(0x5a64, 0xfd56, 0xb8d0, 0xb48a, 0x3ac2, 0xbf7e, 0x1, 0x0);
        gbc.writeMem(0x5a64, { 0xc4, 0xd1, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xfd56);
        EXPECT(gbc.pc(), 0x5a67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 00EA
        gbc.setState(0x4116, 0x9793, 0x8a20, 0xf26f, 0x2800, 0x2228, 0x0, 0x1);
        gbc.writeMem(0x4116, { 0xc4, 0x82, 0xe8 });
        gbc.writeMem(0x9791, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9791);
        EXPECT(gbc.pc(), 0xe882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9791), 0x19);
        EXPECT(gbc.readMem(0x9792), 0x41);
        // C4 00EB
        gbc.setState(0x98ce, 0x447b, 0xace0, 0xe6c2, 0x661c, 0x3869, 0x0, 0x0);
        gbc.writeMem(0x98ce, { 0xc4, 0x8b, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x447b);
        EXPECT(gbc.pc(), 0x98d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ce), 0xc4);
        EXPECT(gbc.readMem(0x98cf), 0x8b);
        EXPECT(gbc.readMem(0x98d0), 0xaf);
        // C4 00EC
        gbc.setState(0xe01a, 0xc3ed, 0xfda0, 0x6aea, 0x2693, 0x2edc, 0x1, 0x0);
        gbc.writeMem(0xe01a, { 0xc4, 0x8d, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc3ed);
        EXPECT(gbc.pc(), 0xe01d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe01a), 0xc4);
        EXPECT(gbc.readMem(0xe01b), 0x8d);
        EXPECT(gbc.readMem(0xe01c), 0xd4);
        // C4 00ED
        gbc.setState(0x4b3f, 0x1f1c, 0x1dd0, 0xdd7e, 0x5329, 0xbc21, 0x1, 0x0);
        gbc.writeMem(0x4b3f, { 0xc4, 0xae, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1f1c);
        EXPECT(gbc.pc(), 0x4b42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 00EE
        gbc.setState(0x2a16, 0x6fb4, 0xd580, 0x63fb, 0xade1, 0x2321, 0x0, 0x1);
        gbc.writeMem(0x2a16, { 0xc4, 0xdd, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6fb4);
        EXPECT(gbc.pc(), 0x2a19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00F0
        gbc.setState(0xb829, 0xe3d7, 0x91e0, 0x75da, 0x3ea7, 0x195e, 0x1, 0x0);
        gbc.writeMem(0xb829, { 0xc4, 0x82, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe3d7);
        EXPECT(gbc.pc(), 0xb82c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb829), 0xc4);
        EXPECT(gbc.readMem(0xb82a), 0x82);
        EXPECT(gbc.readMem(0xb82b), 0xb0);
        // C4 00F1
        gbc.setState(0x3952, 0x95e6, 0x7880, 0xabf2, 0x7872, 0xf627, 0x0, 0x0);
        gbc.writeMem(0x3952, { 0xc4, 0xa5, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x95e6);
        EXPECT(gbc.pc(), 0x3955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00F2
        gbc.setState(0xc6d7, 0xc6bf, 0xd210, 0xebee, 0xce0, 0xb356, 0x1, 0x1);
        gbc.writeMem(0xc6bd, { 0x0, 0x0 });
        gbc.writeMem(0xc6d7, { 0xc4, 0xb5, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc6bd);
        EXPECT(gbc.pc(), 0xf3b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6bd), 0xda);
        EXPECT(gbc.readMem(0xc6be), 0xc6);
        EXPECT(gbc.readMem(0xc6d7), 0xc4);
        EXPECT(gbc.readMem(0xc6d8), 0xb5);
        EXPECT(gbc.readMem(0xc6d9), 0xf3);
        // C4 00F3
        gbc.setState(0x88c, 0xef5b, 0x8db0, 0x7564, 0x1feb, 0x9306, 0x0, 0x0);
        gbc.writeMem(0x88c, { 0xc4, 0x80, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xef5b);
        EXPECT(gbc.pc(), 0x88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 00F5
        gbc.setState(0x9617, 0x7c98, 0x75c0, 0x6307, 0x3a8b, 0xae36, 0x0, 0x0);
        gbc.writeMem(0x9617, { 0xc4, 0x73, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7c98);
        EXPECT(gbc.pc(), 0x961a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9617), 0xc4);
        EXPECT(gbc.readMem(0x9618), 0x73);
        EXPECT(gbc.readMem(0x9619), 0x23);
        // C4 00F6
        gbc.setState(0x81ff, 0x162, 0xd5c0, 0xf4be, 0x57c3, 0x253e, 0x1, 0x0);
        gbc.writeMem(0x81ff, { 0xc4, 0xdc, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x162);
        EXPECT(gbc.pc(), 0x8202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ff), 0xc4);
        EXPECT(gbc.readMem(0x8200), 0xdc);
        EXPECT(gbc.readMem(0x8201), 0x93);
        // C4 00F8
        gbc.setState(0x64bc, 0x920b, 0xd740, 0x2207, 0x7433, 0x8f9c, 0x0, 0x1);
        gbc.writeMem(0x64bc, { 0xc4, 0x6b, 0x7a });
        gbc.writeMem(0x9209, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9209);
        EXPECT(gbc.pc(), 0x7a6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9209), 0xbf);
        EXPECT(gbc.readMem(0x920a), 0x64);
        // C4 00F9
        gbc.setState(0xa262, 0xd22b, 0x8720, 0x9118, 0x284f, 0x9703, 0x1, 0x0);
        gbc.writeMem(0xa262, { 0xc4, 0xd7, 0x75 });
        gbc.writeMem(0xd229, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd229);
        EXPECT(gbc.pc(), 0x75d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa262), 0xc4);
        EXPECT(gbc.readMem(0xa263), 0xd7);
        EXPECT(gbc.readMem(0xa264), 0x75);
        EXPECT(gbc.readMem(0xd229), 0x65);
        EXPECT(gbc.readMem(0xd22a), 0xa2);
        // C4 00FA
        gbc.setState(0xde2a, 0x6c5c, 0x6ab0, 0xf93c, 0x17c5, 0xff15, 0x0, 0x0);
        gbc.writeMem(0xde2a, { 0xc4, 0x58, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6c5c);
        EXPECT(gbc.pc(), 0xde2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde2a), 0xc4);
        EXPECT(gbc.readMem(0xde2b), 0x58);
        EXPECT(gbc.readMem(0xde2c), 0xc5);
        // C4 00FB
        gbc.setState(0x1da1, 0x87e0, 0x91a0, 0xb51d, 0x476a, 0xc2fa, 0x0, 0x1);
        gbc.writeMem(0x1da1, { 0xc4, 0x4a, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x87e0);
        EXPECT(gbc.pc(), 0x1da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 00FC
        gbc.setState(0x1b4d, 0xa4ed, 0x2980, 0xe5d2, 0x182e, 0x46ce, 0x0, 0x0);
        gbc.writeMem(0x1b4d, { 0xc4, 0xb7, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa4ed);
        EXPECT(gbc.pc(), 0x1b50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 00FD
        gbc.setState(0xa6e, 0x3388, 0xbff0, 0xa1c8, 0x49dc, 0x4beb, 0x0, 0x1);
        gbc.writeMem(0xa6e, { 0xc4, 0xda, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3388);
        EXPECT(gbc.pc(), 0xa71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 00FF
        gbc.setState(0xbebb, 0x36be, 0xabc0, 0x9200, 0x66dc, 0x820, 0x1, 0x1);
        gbc.writeMem(0xbebb, { 0xc4, 0xda, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x36be);
        EXPECT(gbc.pc(), 0xbebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbebb), 0xc4);
        EXPECT(gbc.readMem(0xbebc), 0xda);
        EXPECT(gbc.readMem(0xbebd), 0x54);
        // C4 0100
        gbc.setState(0x3f2, 0x231d, 0x7f0, 0x47be, 0x1016, 0x66e9, 0x1, 0x0);
        gbc.writeMem(0x3f2, { 0xc4, 0x18, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x231d);
        EXPECT(gbc.pc(), 0x3f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0102
        gbc.setState(0xcd22, 0x873d, 0x8760, 0x4eca, 0x4c09, 0xd88, 0x1, 0x1);
        gbc.writeMem(0x873b, { 0x0, 0x0 });
        gbc.writeMem(0xcd22, { 0xc4, 0x17, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x873b);
        EXPECT(gbc.pc(), 0x6017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x873b), 0x25);
        EXPECT(gbc.readMem(0x873c), 0xcd);
        EXPECT(gbc.readMem(0xcd22), 0xc4);
        EXPECT(gbc.readMem(0xcd23), 0x17);
        EXPECT(gbc.readMem(0xcd24), 0x60);
        // C4 0103
        gbc.setState(0x2b13, 0x63fc, 0x5fc0, 0x8a9e, 0xaf6a, 0x2faf, 0x0, 0x1);
        gbc.writeMem(0x2b13, { 0xc4, 0xd5, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x63fc);
        EXPECT(gbc.pc(), 0x2b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0104
        gbc.setState(0xaa2e, 0xabf0, 0xe430, 0x494c, 0xe1b6, 0x5520, 0x1, 0x1);
        gbc.writeMem(0xaa2e, { 0xc4, 0xdb, 0x79 });
        gbc.writeMem(0xabee, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xabee);
        EXPECT(gbc.pc(), 0x79db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa2e), 0xc4);
        EXPECT(gbc.readMem(0xaa2f), 0xdb);
        EXPECT(gbc.readMem(0xaa30), 0x79);
        EXPECT(gbc.readMem(0xabee), 0x31);
        EXPECT(gbc.readMem(0xabef), 0xaa);
        // C4 0105
        gbc.setState(0x9487, 0xb6c9, 0xb920, 0x2138, 0x72, 0xa847, 0x0, 0x0);
        gbc.writeMem(0x9487, { 0xc4, 0xba, 0xf4 });
        gbc.writeMem(0xb6c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb6c7);
        EXPECT(gbc.pc(), 0xf4ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9487), 0xc4);
        EXPECT(gbc.readMem(0x9488), 0xba);
        EXPECT(gbc.readMem(0x9489), 0xf4);
        EXPECT(gbc.readMem(0xb6c7), 0x8a);
        EXPECT(gbc.readMem(0xb6c8), 0x94);
        // C4 0106
        gbc.setState(0xa47f, 0xb28b, 0x23a0, 0x26df, 0x4279, 0x7dfc, 0x1, 0x1);
        gbc.writeMem(0xa47f, { 0xc4, 0x91, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb28b);
        EXPECT(gbc.pc(), 0xa482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa47f), 0xc4);
        EXPECT(gbc.readMem(0xa480), 0x91);
        EXPECT(gbc.readMem(0xa481), 0xb);
        // C4 0107
        gbc.setState(0x30ac, 0xe957, 0x4140, 0x134f, 0xe11, 0x517f, 0x0, 0x1);
        gbc.writeMem(0x30ac, { 0xc4, 0xdf, 0x8b });
        gbc.writeMem(0xe955, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe955);
        EXPECT(gbc.pc(), 0x8bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe955), 0xaf);
        EXPECT(gbc.readMem(0xe956), 0x30);
        // C4 0108
        gbc.setState(0xc52, 0xee7, 0x86e0, 0x38dc, 0xc78d, 0xdd97, 0x0, 0x1);
        gbc.writeMem(0xc52, { 0xc4, 0xf9, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xee7);
        EXPECT(gbc.pc(), 0xc55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 010A
        gbc.setState(0x62d7, 0x80ee, 0x3000, 0xf9c9, 0x585e, 0x74, 0x0, 0x0);
        gbc.writeMem(0x62d7, { 0xc4, 0xff, 0x9c });
        gbc.writeMem(0x80ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x80ec);
        EXPECT(gbc.pc(), 0x9cff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ec), 0xda);
        EXPECT(gbc.readMem(0x80ed), 0x62);
        // C4 010B
        gbc.setState(0x38c8, 0x8103, 0x8890, 0x2f59, 0xc005, 0xdd47, 0x1, 0x0);
        gbc.writeMem(0x38c8, { 0xc4, 0xa6, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8103);
        EXPECT(gbc.pc(), 0x38cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 010C
        gbc.setState(0x7a30, 0x8170, 0xf120, 0xb666, 0x8bbc, 0x4700, 0x0, 0x1);
        gbc.writeMem(0x7a30, { 0xc4, 0x51, 0xd2 });
        gbc.writeMem(0x816e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x816e);
        EXPECT(gbc.pc(), 0xd251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816e), 0x33);
        EXPECT(gbc.readMem(0x816f), 0x7a);
        // C4 0110
        gbc.setState(0xa50b, 0x67de, 0x49d0, 0x9a95, 0x7665, 0x3fbe, 0x1, 0x1);
        gbc.writeMem(0xa50b, { 0xc4, 0x8b, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x67de);
        EXPECT(gbc.pc(), 0xa50e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50b), 0xc4);
        EXPECT(gbc.readMem(0xa50c), 0x8b);
        EXPECT(gbc.readMem(0xa50d), 0x83);
        // C4 0111
        gbc.setState(0x48e1, 0x8424, 0x3560, 0xf1ac, 0xb447, 0xf21, 0x0, 0x1);
        gbc.writeMem(0x48e1, { 0xc4, 0x28, 0xa5 });
        gbc.writeMem(0x8422, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8422);
        EXPECT(gbc.pc(), 0xa528);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8422), 0xe4);
        EXPECT(gbc.readMem(0x8423), 0x48);
        // C4 0112
        gbc.setState(0x2c2d, 0xe44c, 0xa2a0, 0x4713, 0xcd34, 0xe769, 0x1, 0x1);
        gbc.writeMem(0x2c2d, { 0xc4, 0x41, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe44c);
        EXPECT(gbc.pc(), 0x2c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0114
        gbc.setState(0xec69, 0x6a91, 0x2180, 0x9372, 0x41a5, 0xeb4d, 0x0, 0x0);
        gbc.writeMem(0xec69, { 0xc4, 0x6e, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6a91);
        EXPECT(gbc.pc(), 0xec6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec69), 0xc4);
        EXPECT(gbc.readMem(0xec6a), 0x6e);
        EXPECT(gbc.readMem(0xec6b), 0x68);
        // C4 0115
        gbc.setState(0x3f17, 0xfb10, 0x2ea0, 0xccc0, 0x5ecf, 0xd435, 0x1, 0x1);
        gbc.writeMem(0x3f17, { 0xc4, 0x4a, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfb10);
        EXPECT(gbc.pc(), 0x3f1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0116
        gbc.setState(0x455b, 0x298f, 0x37f0, 0x7885, 0x69d9, 0x9dac, 0x0, 0x1);
        gbc.writeMem(0x455b, { 0xc4, 0xfc, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x298f);
        EXPECT(gbc.pc(), 0x455e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0117
        gbc.setState(0x1d17, 0x356, 0x71b0, 0x6e11, 0x5244, 0x444f, 0x1, 0x0);
        gbc.writeMem(0x1d17, { 0xc4, 0x2f, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x356);
        EXPECT(gbc.pc(), 0x1d1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0119
        gbc.setState(0xd763, 0xec8b, 0x6770, 0xfc30, 0xaf50, 0xaf0d, 0x0, 0x0);
        gbc.writeMem(0xd763, { 0xc4, 0xd3, 0x8b });
        gbc.writeMem(0xec89, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xec89);
        EXPECT(gbc.pc(), 0x8bd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd763), 0xc4);
        EXPECT(gbc.readMem(0xd764), 0xd3);
        EXPECT(gbc.readMem(0xd765), 0x8b);
        EXPECT(gbc.readMem(0xec89), 0x66);
        EXPECT(gbc.readMem(0xec8a), 0xd7);
        // C4 011C
        gbc.setState(0xc7d1, 0x8310, 0x6be0, 0xc2f2, 0x305a, 0x1a24, 0x0, 0x0);
        gbc.writeMem(0xc7d1, { 0xc4, 0x7a, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8310);
        EXPECT(gbc.pc(), 0xc7d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d1), 0xc4);
        EXPECT(gbc.readMem(0xc7d2), 0x7a);
        EXPECT(gbc.readMem(0xc7d3), 0xc);
        // C4 011D
        gbc.setState(0xb154, 0xd0c1, 0x58a0, 0xd92a, 0xe359, 0x33d4, 0x1, 0x1);
        gbc.writeMem(0xb154, { 0xc4, 0x8a, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd0c1);
        EXPECT(gbc.pc(), 0xb157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb154), 0xc4);
        EXPECT(gbc.readMem(0xb155), 0x8a);
        EXPECT(gbc.readMem(0xb156), 0xdd);
        // C4 011E
        gbc.setState(0x9619, 0x3afd, 0x5680, 0x492d, 0x1138, 0x67d5, 0x1, 0x1);
        gbc.writeMem(0x9619, { 0xc4, 0xe7, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3afd);
        EXPECT(gbc.pc(), 0x961c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9619), 0xc4);
        EXPECT(gbc.readMem(0x961a), 0xe7);
        EXPECT(gbc.readMem(0x961b), 0xe1);
        // C4 011F
        gbc.setState(0x9f84, 0xafc8, 0xb990, 0x2402, 0x7f44, 0x69d9, 0x0, 0x1);
        gbc.writeMem(0x9f84, { 0xc4, 0x75, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xafc8);
        EXPECT(gbc.pc(), 0x9f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f84), 0xc4);
        EXPECT(gbc.readMem(0x9f85), 0x75);
        EXPECT(gbc.readMem(0x9f86), 0x10);
        // C4 0121
        gbc.setState(0x2411, 0xdd76, 0xa5c0, 0xfd4, 0xba00, 0xae2f, 0x0, 0x0);
        gbc.writeMem(0x2411, { 0xc4, 0x7b, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xdd76);
        EXPECT(gbc.pc(), 0x2414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0122
        gbc.setState(0x5d4e, 0xd2ab, 0x70a0, 0xd837, 0xad4c, 0x3b44, 0x0, 0x0);
        gbc.writeMem(0x5d4e, { 0xc4, 0x8d, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd2ab);
        EXPECT(gbc.pc(), 0x5d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0124
        gbc.setState(0x2ebd, 0xb335, 0x68e0, 0x61dd, 0x89e7, 0xf722, 0x0, 0x0);
        gbc.writeMem(0x2ebd, { 0xc4, 0x5e, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb335);
        EXPECT(gbc.pc(), 0x2ec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0127
        gbc.setState(0x1325, 0x5aeb, 0x7eb0, 0xba1f, 0x58a5, 0xa80, 0x0, 0x1);
        gbc.writeMem(0x1325, { 0xc4, 0xa1, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5aeb);
        EXPECT(gbc.pc(), 0x1328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0128
        gbc.setState(0x1151, 0x4476, 0xf5a0, 0x9034, 0xcecc, 0xccc9, 0x0, 0x1);
        gbc.writeMem(0x1151, { 0xc4, 0xf, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4476);
        EXPECT(gbc.pc(), 0x1154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 012C
        gbc.setState(0xd52e, 0x222, 0x6ad0, 0x58ed, 0x2135, 0x9c98, 0x1, 0x1);
        gbc.writeMem(0xd52e, { 0xc4, 0xfe, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x222);
        EXPECT(gbc.pc(), 0xd531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd52e), 0xc4);
        EXPECT(gbc.readMem(0xd52f), 0xfe);
        EXPECT(gbc.readMem(0xd530), 0xe7);
        // C4 012D
        gbc.setState(0x8dcf, 0x3f0e, 0x3a90, 0x81e0, 0xfd44, 0xdf79, 0x1, 0x0);
        gbc.writeMem(0x8dcf, { 0xc4, 0x13, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3f0e);
        EXPECT(gbc.pc(), 0x8dd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dcf), 0xc4);
        EXPECT(gbc.readMem(0x8dd0), 0x13);
        EXPECT(gbc.readMem(0x8dd1), 0x3b);
        // C4 012E
        gbc.setState(0x6238, 0xa089, 0xf1a0, 0xc585, 0x1002, 0x515d, 0x0, 0x1);
        gbc.writeMem(0x6238, { 0xc4, 0xc7, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa089);
        EXPECT(gbc.pc(), 0x623b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0130
        gbc.setState(0x56b3, 0xb64d, 0x3da0, 0xf519, 0x35e2, 0xe70c, 0x0, 0x1);
        gbc.writeMem(0x56b3, { 0xc4, 0xcc, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb64d);
        EXPECT(gbc.pc(), 0x56b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0131
        gbc.setState(0xbe0d, 0x6c51, 0x47e0, 0x8b03, 0x7070, 0xa008, 0x0, 0x0);
        gbc.writeMem(0xbe0d, { 0xc4, 0xca, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6c51);
        EXPECT(gbc.pc(), 0xbe10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe0d), 0xc4);
        EXPECT(gbc.readMem(0xbe0e), 0xca);
        EXPECT(gbc.readMem(0xbe0f), 0xeb);
        // C4 0132
        gbc.setState(0x558c, 0xc22d, 0x9b0, 0x20fe, 0x15d, 0x6194, 0x1, 0x0);
        gbc.writeMem(0x558c, { 0xc4, 0x2c, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc22d);
        EXPECT(gbc.pc(), 0x558f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0133
        gbc.setState(0x9b4f, 0x1312, 0x36d0, 0xaf3a, 0xf609, 0x12c, 0x1, 0x1);
        gbc.writeMem(0x9b4f, { 0xc4, 0x6e, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1312);
        EXPECT(gbc.pc(), 0x9b52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b4f), 0xc4);
        EXPECT(gbc.readMem(0x9b50), 0x6e);
        EXPECT(gbc.readMem(0x9b51), 0x72);
        // C4 0134
        gbc.setState(0xef4c, 0xfdc4, 0x6f40, 0x6e33, 0xed8a, 0x1e9b, 0x1, 0x1);
        gbc.writeMem(0xef4c, { 0xc4, 0xce, 0x47 });
        gbc.writeMem(0xfdc2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfdc2);
        EXPECT(gbc.pc(), 0x47ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4c), 0xc4);
        EXPECT(gbc.readMem(0xef4d), 0xce);
        EXPECT(gbc.readMem(0xef4e), 0x47);
        EXPECT(gbc.readMem(0xfdc2), 0x4f);
        EXPECT(gbc.readMem(0xfdc3), 0xef);
        // C4 0136
        gbc.setState(0x74d2, 0xb21a, 0xcaa0, 0x8023, 0x5b8e, 0x25da, 0x0, 0x0);
        gbc.writeMem(0x74d2, { 0xc4, 0xb5, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb21a);
        EXPECT(gbc.pc(), 0x74d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0137
        gbc.setState(0xde72, 0x85c2, 0x2130, 0x32c1, 0x2a2a, 0x1629, 0x0, 0x0);
        gbc.writeMem(0x85c0, { 0x0, 0x0 });
        gbc.writeMem(0xde72, { 0xc4, 0x59, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x85c0);
        EXPECT(gbc.pc(), 0x8e59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c0), 0x75);
        EXPECT(gbc.readMem(0x85c1), 0xde);
        EXPECT(gbc.readMem(0xde72), 0xc4);
        EXPECT(gbc.readMem(0xde73), 0x59);
        EXPECT(gbc.readMem(0xde74), 0x8e);
        // C4 0138
        gbc.setState(0xd9de, 0x117a, 0xc8a0, 0xc4e3, 0x5e4c, 0xc414, 0x1, 0x0);
        gbc.writeMem(0xd9de, { 0xc4, 0xb9, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x117a);
        EXPECT(gbc.pc(), 0xd9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9de), 0xc4);
        EXPECT(gbc.readMem(0xd9df), 0xb9);
        EXPECT(gbc.readMem(0xd9e0), 0x47);
        // C4 013A
        gbc.setState(0x7e8d, 0x2d42, 0x7bd0, 0x2e9c, 0x6e37, 0x4a0, 0x0, 0x0);
        gbc.writeMem(0x7e8d, { 0xc4, 0x11, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2d42);
        EXPECT(gbc.pc(), 0x7e90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 013B
        gbc.setState(0x28e4, 0x6800, 0x7cf0, 0xcbe8, 0x5bc, 0x9f7f, 0x0, 0x0);
        gbc.writeMem(0x28e4, { 0xc4, 0xa8, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x6800);
        EXPECT(gbc.pc(), 0x28e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 013C
        gbc.setState(0x757e, 0x7916, 0x15d0, 0xe2a3, 0x761, 0x70a7, 0x0, 0x0);
        gbc.writeMem(0x757e, { 0xc4, 0x7c, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7916);
        EXPECT(gbc.pc(), 0x7581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 013E
        gbc.setState(0x125f, 0xedc9, 0x600, 0xb39, 0x5cc4, 0x1253, 0x1, 0x1);
        gbc.writeMem(0x125f, { 0xc4, 0x52, 0xd });
        gbc.writeMem(0xedc7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xedc7);
        EXPECT(gbc.pc(), 0xd52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc7), 0x62);
        EXPECT(gbc.readMem(0xedc8), 0x12);
        // C4 013F
        gbc.setState(0xbc5c, 0xa6c8, 0x92e0, 0x8f1b, 0x27df, 0x5c10, 0x0, 0x1);
        gbc.writeMem(0xbc5c, { 0xc4, 0x9c, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa6c8);
        EXPECT(gbc.pc(), 0xbc5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5c), 0xc4);
        EXPECT(gbc.readMem(0xbc5d), 0x9c);
        EXPECT(gbc.readMem(0xbc5e), 0xb);
        // C4 0140
        gbc.setState(0xca33, 0x598e, 0x7bf0, 0x9cb2, 0x8263, 0x64dc, 0x0, 0x0);
        gbc.writeMem(0xca33, { 0xc4, 0xf4, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x598e);
        EXPECT(gbc.pc(), 0xca36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca33), 0xc4);
        EXPECT(gbc.readMem(0xca34), 0xf4);
        EXPECT(gbc.readMem(0xca35), 0xff);
        // C4 0141
        gbc.setState(0xca9b, 0x227c, 0x3ae0, 0x4cfd, 0x1d09, 0x858e, 0x1, 0x1);
        gbc.writeMem(0xca9b, { 0xc4, 0x61, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x227c);
        EXPECT(gbc.pc(), 0xca9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca9b), 0xc4);
        EXPECT(gbc.readMem(0xca9c), 0x61);
        EXPECT(gbc.readMem(0xca9d), 0xbb);
        // C4 0142
        gbc.setState(0x637b, 0xde99, 0x9050, 0x20f4, 0x70bb, 0xa7aa, 0x0, 0x0);
        gbc.writeMem(0x637b, { 0xc4, 0x16, 0xe5 });
        gbc.writeMem(0xde97, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xde97);
        EXPECT(gbc.pc(), 0xe516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde97), 0x7e);
        EXPECT(gbc.readMem(0xde98), 0x63);
        // C4 0143
        gbc.setState(0x964, 0xca61, 0x36a0, 0x5f64, 0xaf4a, 0x8283, 0x1, 0x1);
        gbc.writeMem(0x964, { 0xc4, 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xca61);
        EXPECT(gbc.pc(), 0x967);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0144
        gbc.setState(0xac4f, 0xd28e, 0x12a0, 0xe6b0, 0xfedc, 0x1a47, 0x1, 0x0);
        gbc.writeMem(0xac4f, { 0xc4, 0x9c, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd28e);
        EXPECT(gbc.pc(), 0xac52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac4f), 0xc4);
        EXPECT(gbc.readMem(0xac50), 0x9c);
        EXPECT(gbc.readMem(0xac51), 0xff);
        // C4 0145
        gbc.setState(0x2ec8, 0xdf07, 0xb180, 0xb50e, 0xec91, 0xf201, 0x1, 0x1);
        gbc.writeMem(0x2ec8, { 0xc4, 0x1d, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdf07);
        EXPECT(gbc.pc(), 0x2ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0146
        gbc.setState(0xa2de, 0x7d05, 0x4df0, 0x3ed7, 0xe2e9, 0xf9de, 0x1, 0x1);
        gbc.writeMem(0xa2de, { 0xc4, 0x58, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7d05);
        EXPECT(gbc.pc(), 0xa2e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2de), 0xc4);
        EXPECT(gbc.readMem(0xa2df), 0x58);
        EXPECT(gbc.readMem(0xa2e0), 0x1c);
        // C4 0147
        gbc.setState(0x22de, 0xbd09, 0xdef0, 0x8729, 0x43be, 0xb0cc, 0x1, 0x0);
        gbc.writeMem(0x22de, { 0xc4, 0x8, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbd09);
        EXPECT(gbc.pc(), 0x22e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0148
        gbc.setState(0x9868, 0x3827, 0xf4e0, 0xf9ec, 0x7752, 0x6529, 0x0, 0x1);
        gbc.writeMem(0x9868, { 0xc4, 0xe2, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3827);
        EXPECT(gbc.pc(), 0x986b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9868), 0xc4);
        EXPECT(gbc.readMem(0x9869), 0xe2);
        EXPECT(gbc.readMem(0x986a), 0xe0);
        // C4 0149
        gbc.setState(0x2daa, 0xbb9a, 0xe5d0, 0xb6b7, 0x2f8b, 0xfe97, 0x0, 0x1);
        gbc.writeMem(0x2daa, { 0xc4, 0xa4, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbb9a);
        EXPECT(gbc.pc(), 0x2dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 014B
        gbc.setState(0x2948, 0x2e8e, 0x12c0, 0xdc2d, 0x6926, 0x7fd5, 0x1, 0x0);
        gbc.writeMem(0x2948, { 0xc4, 0xb5, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2e8e);
        EXPECT(gbc.pc(), 0x294b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 014C
        gbc.setState(0x78c5, 0xaa46, 0x1640, 0x5392, 0x6ad1, 0x7c5, 0x0, 0x0);
        gbc.writeMem(0x78c5, { 0xc4, 0xd1, 0x8f });
        gbc.writeMem(0xaa44, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xaa44);
        EXPECT(gbc.pc(), 0x8fd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa44), 0xc8);
        EXPECT(gbc.readMem(0xaa45), 0x78);
        // C4 014D
        gbc.setState(0xd44a, 0x4059, 0x20b0, 0x62f7, 0x7290, 0x5e43, 0x1, 0x0);
        gbc.writeMem(0xd44a, { 0xc4, 0x23, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4059);
        EXPECT(gbc.pc(), 0xd44d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd44a), 0xc4);
        EXPECT(gbc.readMem(0xd44b), 0x23);
        EXPECT(gbc.readMem(0xd44c), 0x56);
        // C4 014F
        gbc.setState(0x74ec, 0x9651, 0xd3a0, 0xcf31, 0x4007, 0xda76, 0x1, 0x0);
        gbc.writeMem(0x74ec, { 0xc4, 0xe5, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9651);
        EXPECT(gbc.pc(), 0x74ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0150
        gbc.setState(0x66a0, 0xcd0b, 0x7080, 0x4d4, 0x58f4, 0x7de0, 0x0, 0x1);
        gbc.writeMem(0x66a0, { 0xc4, 0xe1, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xcd0b);
        EXPECT(gbc.pc(), 0x66a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0151
        gbc.setState(0x958, 0xc4ec, 0xfeb0, 0x4aed, 0xcbac, 0xe6ee, 0x1, 0x1);
        gbc.writeMem(0x958, { 0xc4, 0x69, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc4ec);
        EXPECT(gbc.pc(), 0x95b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0152
        gbc.setState(0x9591, 0x2885, 0x6d80, 0xcb1, 0xe7ea, 0x87ed, 0x1, 0x1);
        gbc.writeMem(0x9591, { 0xc4, 0x8c, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2885);
        EXPECT(gbc.pc(), 0x9594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9591), 0xc4);
        EXPECT(gbc.readMem(0x9592), 0x8c);
        EXPECT(gbc.readMem(0x9593), 0xda);
        // C4 0154
        gbc.setState(0x3adb, 0x85f3, 0x22b0, 0xfc05, 0x6be6, 0xa166, 0x1, 0x1);
        gbc.writeMem(0x3adb, { 0xc4, 0x2d, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x85f3);
        EXPECT(gbc.pc(), 0x3ade);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0157
        gbc.setState(0x4d8b, 0x8b88, 0x9c90, 0xe48d, 0x36ee, 0xe60f, 0x0, 0x0);
        gbc.writeMem(0x4d8b, { 0xc4, 0x38, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8b88);
        EXPECT(gbc.pc(), 0x4d8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0158
        gbc.setState(0x768, 0xe749, 0x2810, 0xc447, 0x2ab3, 0xdb56, 0x1, 0x1);
        gbc.writeMem(0x768, { 0xc4, 0x79, 0xf });
        gbc.writeMem(0xe747, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe747);
        EXPECT(gbc.pc(), 0xf79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe747), 0x6b);
        EXPECT(gbc.readMem(0xe748), 0x7);
        // C4 0159
        gbc.setState(0xa22f, 0x1a1, 0xf0c0, 0xd41d, 0xfd18, 0x2ec, 0x1, 0x1);
        gbc.writeMem(0xa22f, { 0xc4, 0xa7, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1a1);
        EXPECT(gbc.pc(), 0xa232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa22f), 0xc4);
        EXPECT(gbc.readMem(0xa230), 0xa7);
        EXPECT(gbc.readMem(0xa231), 0x76);
        // C4 015B
        gbc.setState(0xd94c, 0xf3b8, 0x90b0, 0xdf6c, 0x44fb, 0x6a02, 0x1, 0x1);
        gbc.writeMem(0xd94c, { 0xc4, 0xe1, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf3b8);
        EXPECT(gbc.pc(), 0xd94f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd94c), 0xc4);
        EXPECT(gbc.readMem(0xd94d), 0xe1);
        EXPECT(gbc.readMem(0xd94e), 0xef);
        // C4 015C
        gbc.setState(0xae03, 0x2ded, 0x30e0, 0xfa06, 0x5bd0, 0x4f68, 0x0, 0x0);
        gbc.writeMem(0xae03, { 0xc4, 0x5, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2ded);
        EXPECT(gbc.pc(), 0xae06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae03), 0xc4);
        EXPECT(gbc.readMem(0xae04), 0x5);
        EXPECT(gbc.readMem(0xae05), 0xfe);
        // C4 015D
        gbc.setState(0xa52b, 0xbd94, 0x37d0, 0x99e0, 0x49d0, 0x70b5, 0x1, 0x1);
        gbc.writeMem(0xa52b, { 0xc4, 0x13, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xbd94);
        EXPECT(gbc.pc(), 0xa52e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa52b), 0xc4);
        EXPECT(gbc.readMem(0xa52c), 0x13);
        EXPECT(gbc.readMem(0xa52d), 0x1);
        // C4 015E
        gbc.setState(0x3008, 0xd4c9, 0xcb40, 0xee00, 0xbfa1, 0xa6ce, 0x0, 0x0);
        gbc.writeMem(0x3008, { 0xc4, 0x74, 0xa });
        gbc.writeMem(0xd4c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd4c7);
        EXPECT(gbc.pc(), 0xa74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c7), 0xb);
        EXPECT(gbc.readMem(0xd4c8), 0x30);
        // C4 015F
        gbc.setState(0x4cfc, 0x8791, 0x77c0, 0x712f, 0xe80b, 0xfdca, 0x0, 0x0);
        gbc.writeMem(0x4cfc, { 0xc4, 0x1e, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8791);
        EXPECT(gbc.pc(), 0x4cff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0161
        gbc.setState(0xcaf5, 0x9f38, 0x53f0, 0xb729, 0xf78a, 0x5357, 0x1, 0x1);
        gbc.writeMem(0xcaf5, { 0xc4, 0x7f, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9f38);
        EXPECT(gbc.pc(), 0xcaf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaf5), 0xc4);
        EXPECT(gbc.readMem(0xcaf6), 0x7f);
        EXPECT(gbc.readMem(0xcaf7), 0x37);
        // C4 0162
        gbc.setState(0xb023, 0xbf2b, 0x24a0, 0x73b2, 0x8542, 0xd90f, 0x0, 0x1);
        gbc.writeMem(0xb023, { 0xc4, 0x6c, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbf2b);
        EXPECT(gbc.pc(), 0xb026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb023), 0xc4);
        EXPECT(gbc.readMem(0xb024), 0x6c);
        EXPECT(gbc.readMem(0xb025), 0x9e);
        // C4 0163
        gbc.setState(0xd65d, 0x84f6, 0x9960, 0xdc5e, 0x1213, 0xc4e7, 0x0, 0x1);
        gbc.writeMem(0x84f4, { 0x0, 0x0 });
        gbc.writeMem(0xd65d, { 0xc4, 0x8c, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x84f4);
        EXPECT(gbc.pc(), 0xc98c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f4), 0x60);
        EXPECT(gbc.readMem(0x84f5), 0xd6);
        EXPECT(gbc.readMem(0xd65d), 0xc4);
        EXPECT(gbc.readMem(0xd65e), 0x8c);
        EXPECT(gbc.readMem(0xd65f), 0xc9);
        // C4 0164
        gbc.setState(0x4ea0, 0x7752, 0x7480, 0xf949, 0xde33, 0xb785, 0x0, 0x0);
        gbc.writeMem(0x4ea0, { 0xc4, 0xd0, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7752);
        EXPECT(gbc.pc(), 0x4ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0165
        gbc.setState(0xed0f, 0x8a70, 0x58c0, 0xdea, 0xec46, 0x10d8, 0x0, 0x1);
        gbc.writeMem(0xed0f, { 0xc4, 0x2c, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x8a70);
        EXPECT(gbc.pc(), 0xed12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed0f), 0xc4);
        EXPECT(gbc.readMem(0xed10), 0x2c);
        EXPECT(gbc.readMem(0xed11), 0x89);
        // C4 0168
        gbc.setState(0x9c11, 0x11c8, 0x64d0, 0x6b56, 0x18ef, 0xccce, 0x0, 0x0);
        gbc.writeMem(0x9c11, { 0xc4, 0x20, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x11c8);
        EXPECT(gbc.pc(), 0x9c14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c11), 0xc4);
        EXPECT(gbc.readMem(0x9c12), 0x20);
        EXPECT(gbc.readMem(0x9c13), 0x9);
        // C4 016A
        gbc.setState(0x26d6, 0x8b00, 0x4b90, 0xea9d, 0x7cc3, 0x8390, 0x0, 0x1);
        gbc.writeMem(0x26d6, { 0xc4, 0x90, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8b00);
        EXPECT(gbc.pc(), 0x26d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 016B
        gbc.setState(0xc91d, 0xcc0c, 0x1a60, 0xd955, 0x2453, 0xf134, 0x0, 0x0);
        gbc.writeMem(0xc91d, { 0xc4, 0xdd, 0x4b });
        gbc.writeMem(0xcc0a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xcc0a);
        EXPECT(gbc.pc(), 0x4bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc91d), 0xc4);
        EXPECT(gbc.readMem(0xc91e), 0xdd);
        EXPECT(gbc.readMem(0xc91f), 0x4b);
        EXPECT(gbc.readMem(0xcc0a), 0x20);
        EXPECT(gbc.readMem(0xcc0b), 0xc9);
        // C4 016C
        gbc.setState(0x1e7e, 0xd0a3, 0x1f70, 0xbcc0, 0x23d0, 0x7b97, 0x0, 0x1);
        gbc.writeMem(0x1e7e, { 0xc4, 0x7b, 0x12 });
        gbc.writeMem(0xd0a1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd0a1);
        EXPECT(gbc.pc(), 0x127b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0a1), 0x81);
        EXPECT(gbc.readMem(0xd0a2), 0x1e);
        // C4 016E
        gbc.setState(0x6ee9, 0xe769, 0xb2a0, 0xe6f4, 0x45fe, 0xb6d2, 0x1, 0x1);
        gbc.writeMem(0x6ee9, { 0xc4, 0x23, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe769);
        EXPECT(gbc.pc(), 0x6eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 016F
        gbc.setState(0xb36a, 0xe01c, 0x4d90, 0xc792, 0xb293, 0xadad, 0x1, 0x1);
        gbc.writeMem(0xb36a, { 0xc4, 0x71, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe01c);
        EXPECT(gbc.pc(), 0xb36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36a), 0xc4);
        EXPECT(gbc.readMem(0xb36b), 0x71);
        EXPECT(gbc.readMem(0xb36c), 0x79);
        // C4 0171
        gbc.setState(0xea12, 0x59c0, 0xd690, 0xaa53, 0x63f9, 0x676e, 0x1, 0x1);
        gbc.writeMem(0xea12, { 0xc4, 0xde, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x59c0);
        EXPECT(gbc.pc(), 0xea15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea12), 0xc4);
        EXPECT(gbc.readMem(0xea13), 0xde);
        EXPECT(gbc.readMem(0xea14), 0x43);
        // C4 0172
        gbc.setState(0x7b00, 0xb889, 0x2880, 0xec99, 0xd62, 0x1d67, 0x0, 0x0);
        gbc.writeMem(0x7b00, { 0xc4, 0x8, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb889);
        EXPECT(gbc.pc(), 0x7b03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0173
        gbc.setState(0xeb34, 0xf613, 0xba80, 0xdd13, 0x1933, 0x34f0, 0x0, 0x1);
        gbc.writeMem(0xeb34, { 0xc4, 0x90, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf613);
        EXPECT(gbc.pc(), 0xeb37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb34), 0xc4);
        EXPECT(gbc.readMem(0xeb35), 0x90);
        EXPECT(gbc.readMem(0xeb36), 0x38);
        // C4 0175
        gbc.setState(0x8268, 0x1c31, 0xea0, 0x7b33, 0xaac4, 0xa0a6, 0x0, 0x0);
        gbc.writeMem(0x8268, { 0xc4, 0x5, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1c31);
        EXPECT(gbc.pc(), 0x826b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8268), 0xc4);
        EXPECT(gbc.readMem(0x8269), 0x5);
        EXPECT(gbc.readMem(0x826a), 0x8b);
        // C4 0176
        gbc.setState(0xd3b, 0xb6ce, 0xda0, 0xd7ef, 0xf0ed, 0x98b3, 0x1, 0x1);
        gbc.writeMem(0xd3b, { 0xc4, 0x2d, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb6ce);
        EXPECT(gbc.pc(), 0xd3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0177
        gbc.setState(0xee3a, 0xb1be, 0x1980, 0x668a, 0xa564, 0x2849, 0x1, 0x0);
        gbc.writeMem(0xee3a, { 0xc4, 0xd7, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb1be);
        EXPECT(gbc.pc(), 0xee3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee3a), 0xc4);
        EXPECT(gbc.readMem(0xee3b), 0xd7);
        EXPECT(gbc.readMem(0xee3c), 0x7b);
        // C4 0178
        gbc.setState(0xcc5b, 0xe22c, 0xf6a0, 0xd48, 0xaca6, 0xf768, 0x1, 0x1);
        gbc.writeMem(0xcc5b, { 0xc4, 0x21, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe22c);
        EXPECT(gbc.pc(), 0xcc5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc5b), 0xc4);
        EXPECT(gbc.readMem(0xcc5c), 0x21);
        EXPECT(gbc.readMem(0xcc5d), 0xed);
        // C4 0179
        gbc.setState(0xa603, 0xb9ca, 0x7350, 0xe569, 0x7bcb, 0x4931, 0x1, 0x1);
        gbc.writeMem(0xa603, { 0xc4, 0x8f, 0x15 });
        gbc.writeMem(0xb9c8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb9c8);
        EXPECT(gbc.pc(), 0x158f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa603), 0xc4);
        EXPECT(gbc.readMem(0xa604), 0x8f);
        EXPECT(gbc.readMem(0xa605), 0x15);
        EXPECT(gbc.readMem(0xb9c8), 0x6);
        EXPECT(gbc.readMem(0xb9c9), 0xa6);
        // C4 017A
        gbc.setState(0x1e92, 0xcdab, 0xdab0, 0xad00, 0x73c2, 0xa7d8, 0x1, 0x0);
        gbc.writeMem(0x1e92, { 0xc4, 0x7d, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcdab);
        EXPECT(gbc.pc(), 0x1e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 017B
        gbc.setState(0x5b6c, 0x6826, 0x43b0, 0x121e, 0x6082, 0x335, 0x1, 0x1);
        gbc.writeMem(0x5b6c, { 0xc4, 0x1a, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x6826);
        EXPECT(gbc.pc(), 0x5b6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 017D
        gbc.setState(0x9d2e, 0x8384, 0x1a10, 0x177b, 0x22cd, 0x106e, 0x0, 0x1);
        gbc.writeMem(0x8382, { 0x0, 0x0 });
        gbc.writeMem(0x9d2e, { 0xc4, 0x3, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8382);
        EXPECT(gbc.pc(), 0xfd03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8382), 0x31);
        EXPECT(gbc.readMem(0x8383), 0x9d);
        EXPECT(gbc.readMem(0x9d2e), 0xc4);
        EXPECT(gbc.readMem(0x9d2f), 0x3);
        EXPECT(gbc.readMem(0x9d30), 0xfd);
        // C4 017E
        gbc.setState(0x247f, 0xb48, 0x6ab0, 0x99fc, 0x8be0, 0x56c, 0x1, 0x0);
        gbc.writeMem(0x247f, { 0xc4, 0xb9, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb48);
        EXPECT(gbc.pc(), 0x2482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 017F
        gbc.setState(0xebfa, 0xf936, 0xb7a0, 0x9fd8, 0xcf0f, 0x3973, 0x0, 0x0);
        gbc.writeMem(0xebfa, { 0xc4, 0xd8, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf936);
        EXPECT(gbc.pc(), 0xebfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebfa), 0xc4);
        EXPECT(gbc.readMem(0xebfb), 0xd8);
        EXPECT(gbc.readMem(0xebfc), 0xb7);
        // C4 0180
        gbc.setState(0xcb60, 0x145, 0x5dd0, 0x53e4, 0x9230, 0x2c82, 0x0, 0x0);
        gbc.writeMem(0xcb60, { 0xc4, 0xae, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x145);
        EXPECT(gbc.pc(), 0xcb63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb60), 0xc4);
        EXPECT(gbc.readMem(0xcb61), 0xae);
        EXPECT(gbc.readMem(0xcb62), 0xb1);
        // C4 0181
        gbc.setState(0xa9f6, 0x2005, 0x51d0, 0xcdee, 0x725b, 0x59c, 0x1, 0x0);
        gbc.writeMem(0xa9f6, { 0xc4, 0x52, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2005);
        EXPECT(gbc.pc(), 0xa9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f6), 0xc4);
        EXPECT(gbc.readMem(0xa9f7), 0x52);
        EXPECT(gbc.readMem(0xa9f8), 0x18);
        // C4 0182
        gbc.setState(0x5179, 0x261e, 0x1fb0, 0xb700, 0xaf79, 0xdad9, 0x0, 0x1);
        gbc.writeMem(0x5179, { 0xc4, 0x12, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x261e);
        EXPECT(gbc.pc(), 0x517c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0183
        gbc.setState(0x9d61, 0x575b, 0x2bd0, 0xf9f9, 0xc513, 0x6d9c, 0x1, 0x1);
        gbc.writeMem(0x9d61, { 0xc4, 0x23, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x575b);
        EXPECT(gbc.pc(), 0x9d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d61), 0xc4);
        EXPECT(gbc.readMem(0x9d62), 0x23);
        EXPECT(gbc.readMem(0x9d63), 0x21);
        // C4 0186
        gbc.setState(0x3bcc, 0xc928, 0x3e30, 0xf0ff, 0x4e25, 0x3dca, 0x1, 0x0);
        gbc.writeMem(0x3bcc, { 0xc4, 0xc1, 0xbf });
        gbc.writeMem(0xc926, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc926);
        EXPECT(gbc.pc(), 0xbfc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc926), 0xcf);
        EXPECT(gbc.readMem(0xc927), 0x3b);
        // C4 0187
        gbc.setState(0x6bec, 0xaf36, 0x4cb0, 0xab49, 0x614b, 0xc784, 0x0, 0x0);
        gbc.writeMem(0x6bec, { 0xc4, 0xec, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xaf36);
        EXPECT(gbc.pc(), 0x6bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0188
        gbc.setState(0xfeb, 0x7a7c, 0x76d0, 0x5388, 0x4128, 0x3d19, 0x0, 0x1);
        gbc.writeMem(0xfeb, { 0xc4, 0xe2, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7a7c);
        EXPECT(gbc.pc(), 0xfee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 018A
        gbc.setState(0x7312, 0x1107, 0x24e0, 0x9399, 0xbf06, 0xe56f, 0x1, 0x1);
        gbc.writeMem(0x7312, { 0xc4, 0x6a, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1107);
        EXPECT(gbc.pc(), 0x7315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 018B
        gbc.setState(0xe8f9, 0x36cf, 0xaba0, 0x7f31, 0x3d3c, 0x7671, 0x1, 0x1);
        gbc.writeMem(0xe8f9, { 0xc4, 0xe0, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x36cf);
        EXPECT(gbc.pc(), 0xe8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f9), 0xc4);
        EXPECT(gbc.readMem(0xe8fa), 0xe0);
        EXPECT(gbc.readMem(0xe8fb), 0x49);
        // C4 018C
        gbc.setState(0xdd60, 0xd09e, 0xca10, 0x77fc, 0x987d, 0x6ca, 0x0, 0x0);
        gbc.writeMem(0xd09c, { 0x0, 0x0 });
        gbc.writeMem(0xdd60, { 0xc4, 0xc7, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd09c);
        EXPECT(gbc.pc(), 0x2bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd09c), 0x63);
        EXPECT(gbc.readMem(0xd09d), 0xdd);
        EXPECT(gbc.readMem(0xdd60), 0xc4);
        EXPECT(gbc.readMem(0xdd61), 0xc7);
        EXPECT(gbc.readMem(0xdd62), 0x2b);
        // C4 018D
        gbc.setState(0x9104, 0x5efc, 0x95f0, 0x2a3d, 0xcfe9, 0x1a1, 0x1, 0x1);
        gbc.writeMem(0x9104, { 0xc4, 0xc7, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5efc);
        EXPECT(gbc.pc(), 0x9107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9104), 0xc4);
        EXPECT(gbc.readMem(0x9105), 0xc7);
        EXPECT(gbc.readMem(0x9106), 0x45);
        // C4 018E
        gbc.setState(0xa737, 0x372e, 0x77b0, 0xbafa, 0xb847, 0x9db6, 0x0, 0x1);
        gbc.writeMem(0xa737, { 0xc4, 0x72, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x372e);
        EXPECT(gbc.pc(), 0xa73a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa737), 0xc4);
        EXPECT(gbc.readMem(0xa738), 0x72);
        EXPECT(gbc.readMem(0xa739), 0xd1);
        // C4 018F
        gbc.setState(0xc1bf, 0xd479, 0xb4e0, 0x2229, 0xa25f, 0x8b9c, 0x1, 0x0);
        gbc.writeMem(0xc1bf, { 0xc4, 0x67, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd479);
        EXPECT(gbc.pc(), 0xc1c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1bf), 0xc4);
        EXPECT(gbc.readMem(0xc1c0), 0x67);
        EXPECT(gbc.readMem(0xc1c1), 0xc7);
        // C4 0191
        gbc.setState(0x76cc, 0xb421, 0x1440, 0x97a9, 0x838d, 0xe021, 0x1, 0x0);
        gbc.writeMem(0x76cc, { 0xc4, 0xcc, 0x80 });
        gbc.writeMem(0xb41f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb41f);
        EXPECT(gbc.pc(), 0x80cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41f), 0xcf);
        EXPECT(gbc.readMem(0xb420), 0x76);
        // C4 0192
        gbc.setState(0xe427, 0x2771, 0x5480, 0xe70e, 0x63bf, 0xb2e6, 0x1, 0x1);
        gbc.writeMem(0xe427, { 0xc4, 0x4c, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2771);
        EXPECT(gbc.pc(), 0xe42a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe427), 0xc4);
        EXPECT(gbc.readMem(0xe428), 0x4c);
        EXPECT(gbc.readMem(0xe429), 0xf);
        // C4 0193
        gbc.setState(0x2752, 0xe831, 0x6540, 0xea1f, 0xe889, 0x69b6, 0x1, 0x1);
        gbc.writeMem(0x2752, { 0xc4, 0x46, 0x77 });
        gbc.writeMem(0xe82f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe82f);
        EXPECT(gbc.pc(), 0x7746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82f), 0x55);
        EXPECT(gbc.readMem(0xe830), 0x27);
        // C4 0194
        gbc.setState(0x5bf9, 0xd3cd, 0xd0b0, 0xd011, 0x7e03, 0x958b, 0x0, 0x1);
        gbc.writeMem(0x5bf9, { 0xc4, 0x6e, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd3cd);
        EXPECT(gbc.pc(), 0x5bfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0197
        gbc.setState(0xc3d5, 0x6a09, 0x75e0, 0xa3cd, 0x9740, 0x6b9e, 0x1, 0x1);
        gbc.writeMem(0xc3d5, { 0xc4, 0xff, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6a09);
        EXPECT(gbc.pc(), 0xc3d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d5), 0xc4);
        EXPECT(gbc.readMem(0xc3d6), 0xff);
        EXPECT(gbc.readMem(0xc3d7), 0xdd);
        // C4 0198
        gbc.setState(0xe653, 0x1c83, 0x3090, 0x9a99, 0x9234, 0x3924, 0x1, 0x0);
        gbc.writeMem(0xe653, { 0xc4, 0x28, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1c83);
        EXPECT(gbc.pc(), 0xe656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe653), 0xc4);
        EXPECT(gbc.readMem(0xe654), 0x28);
        EXPECT(gbc.readMem(0xe655), 0x4b);
        // C4 0199
        gbc.setState(0x2426, 0xb43f, 0x53b0, 0xe255, 0xfadd, 0xef54, 0x1, 0x0);
        gbc.writeMem(0x2426, { 0xc4, 0xf1, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb43f);
        EXPECT(gbc.pc(), 0x2429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 019B
        gbc.setState(0x4c5b, 0x98e9, 0x90b0, 0x6f3b, 0x9f56, 0xf87d, 0x0, 0x0);
        gbc.writeMem(0x4c5b, { 0xc4, 0x57, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x98e9);
        EXPECT(gbc.pc(), 0x4c5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 019C
        gbc.setState(0x324e, 0xfdcf, 0x4800, 0x91ea, 0x9995, 0x78ee, 0x0, 0x1);
        gbc.writeMem(0x324e, { 0xc4, 0x85, 0x77 });
        gbc.writeMem(0xfdcd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfdcd);
        EXPECT(gbc.pc(), 0x7785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdcd), 0x51);
        EXPECT(gbc.readMem(0xfdce), 0x32);
        // C4 019D
        gbc.setState(0xac1, 0x82ab, 0xffb0, 0x8751, 0xdddb, 0xaaa4, 0x1, 0x0);
        gbc.writeMem(0xac1, { 0xc4, 0xf1, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x82ab);
        EXPECT(gbc.pc(), 0xac4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 019F
        gbc.setState(0x8bd1, 0xcb24, 0xe6c0, 0xb063, 0x717e, 0x45f3, 0x1, 0x1);
        gbc.writeMem(0x8bd1, { 0xc4, 0xb0, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xcb24);
        EXPECT(gbc.pc(), 0x8bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd1), 0xc4);
        EXPECT(gbc.readMem(0x8bd2), 0xb0);
        EXPECT(gbc.readMem(0x8bd3), 0x74);
        // C4 01A0
        gbc.setState(0x6ac2, 0xcb8f, 0xcf90, 0xa8e8, 0x9257, 0x65ed, 0x0, 0x1);
        gbc.writeMem(0x6ac2, { 0xc4, 0xea, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcb8f);
        EXPECT(gbc.pc(), 0x6ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01A1
        gbc.setState(0x1a64, 0xe84c, 0x5da0, 0x937f, 0x959b, 0xfce2, 0x1, 0x1);
        gbc.writeMem(0x1a64, { 0xc4, 0x57, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe84c);
        EXPECT(gbc.pc(), 0x1a67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 01A2
        gbc.setState(0x4e13, 0x9896, 0xe990, 0x5c1b, 0xe8a, 0x3fd2, 0x0, 0x0);
        gbc.writeMem(0x4e13, { 0xc4, 0xad, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9896);
        EXPECT(gbc.pc(), 0x4e16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01A3
        gbc.setState(0x1dcd, 0x3668, 0xf580, 0xd71c, 0x578b, 0xb6fc, 0x0, 0x0);
        gbc.writeMem(0x1dcd, { 0xc4, 0xcd, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3668);
        EXPECT(gbc.pc(), 0x1dd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01A5
        gbc.setState(0xc15c, 0xed0e, 0x5da0, 0x7176, 0x16a7, 0xb768, 0x1, 0x0);
        gbc.writeMem(0xc15c, { 0xc4, 0x17, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xed0e);
        EXPECT(gbc.pc(), 0xc15f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc15c), 0xc4);
        EXPECT(gbc.readMem(0xc15d), 0x17);
        EXPECT(gbc.readMem(0xc15e), 0x8e);
        // C4 01A7
        gbc.setState(0x6fc4, 0xcbef, 0xd020, 0xa56c, 0xe33a, 0x21cf, 0x1, 0x1);
        gbc.writeMem(0x6fc4, { 0xc4, 0xaf, 0xa9 });
        gbc.writeMem(0xcbed, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcbed);
        EXPECT(gbc.pc(), 0xa9af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbed), 0xc7);
        EXPECT(gbc.readMem(0xcbee), 0x6f);
        // C4 01A8
        gbc.setState(0xac21, 0xd534, 0xfb70, 0x6130, 0x1738, 0xeb3f, 0x0, 0x0);
        gbc.writeMem(0xac21, { 0xc4, 0x6f, 0xbd });
        gbc.writeMem(0xd532, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd532);
        EXPECT(gbc.pc(), 0xbd6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac21), 0xc4);
        EXPECT(gbc.readMem(0xac22), 0x6f);
        EXPECT(gbc.readMem(0xac23), 0xbd);
        EXPECT(gbc.readMem(0xd532), 0x24);
        EXPECT(gbc.readMem(0xd533), 0xac);
        // C4 01A9
        gbc.setState(0xe0d8, 0xfc62, 0x9ea0, 0x150e, 0x392a, 0x505e, 0x0, 0x1);
        gbc.writeMem(0xe0d8, { 0xc4, 0x97, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfc62);
        EXPECT(gbc.pc(), 0xe0db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d8), 0xc4);
        EXPECT(gbc.readMem(0xe0d9), 0x97);
        EXPECT(gbc.readMem(0xe0da), 0xae);
        // C4 01AA
        gbc.setState(0xad3, 0x1736, 0x7bd0, 0x55dc, 0x26c2, 0x9121, 0x0, 0x0);
        gbc.writeMem(0xad3, { 0xc4, 0x7c, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1736);
        EXPECT(gbc.pc(), 0xad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01AB
        gbc.setState(0xb36d, 0xd91, 0xe90, 0x2d82, 0x79e0, 0xc828, 0x0, 0x1);
        gbc.writeMem(0xb36d, { 0xc4, 0x57, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd91);
        EXPECT(gbc.pc(), 0xb370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36d), 0xc4);
        EXPECT(gbc.readMem(0xb36e), 0x57);
        EXPECT(gbc.readMem(0xb36f), 0xb);
        // C4 01AD
        gbc.setState(0xadc1, 0xab41, 0xcfe0, 0x32da, 0xfd44, 0xc16b, 0x0, 0x0);
        gbc.writeMem(0xadc1, { 0xc4, 0xd9, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xab41);
        EXPECT(gbc.pc(), 0xadc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc1), 0xc4);
        EXPECT(gbc.readMem(0xadc2), 0xd9);
        EXPECT(gbc.readMem(0xadc3), 0xd4);
        // C4 01B3
        gbc.setState(0x6e0e, 0x9532, 0x81e0, 0xc430, 0x135f, 0x7443, 0x1, 0x0);
        gbc.writeMem(0x6e0e, { 0xc4, 0xfe, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9532);
        EXPECT(gbc.pc(), 0x6e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 01B6
        gbc.setState(0xa7b, 0xf301, 0x64e0, 0xc573, 0x7bbb, 0xd861, 0x1, 0x0);
        gbc.writeMem(0xa7b, { 0xc4, 0x58, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf301);
        EXPECT(gbc.pc(), 0xa7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 01BA
        gbc.setState(0x3ff6, 0xd35d, 0x8c80, 0xf663, 0xeae3, 0x8a6e, 0x0, 0x1);
        gbc.writeMem(0x3ff6, { 0xc4, 0xc0, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd35d);
        EXPECT(gbc.pc(), 0x3ff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01BB
        gbc.setState(0x75c3, 0x35c5, 0x2780, 0x67b, 0xe1ce, 0x14d2, 0x1, 0x1);
        gbc.writeMem(0x75c3, { 0xc4, 0x6, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x35c5);
        EXPECT(gbc.pc(), 0x75c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01BC
        gbc.setState(0xd20a, 0x3fba, 0xaee0, 0xed6, 0xed56, 0x8e5, 0x1, 0x1);
        gbc.writeMem(0xd20a, { 0xc4, 0x23, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3fba);
        EXPECT(gbc.pc(), 0xd20d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd20a), 0xc4);
        EXPECT(gbc.readMem(0xd20b), 0x23);
        EXPECT(gbc.readMem(0xd20c), 0xc);
        // C4 01C0
        gbc.setState(0xe689, 0xd87a, 0x84a0, 0x32dc, 0x2e5d, 0x1ac1, 0x0, 0x1);
        gbc.writeMem(0xe689, { 0xc4, 0xda, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd87a);
        EXPECT(gbc.pc(), 0xe68c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe689), 0xc4);
        EXPECT(gbc.readMem(0xe68a), 0xda);
        EXPECT(gbc.readMem(0xe68b), 0xf9);
        // C4 01C1
        gbc.setState(0xc340, 0xa3a4, 0x6170, 0x4c3, 0x4ad0, 0x50e7, 0x0, 0x0);
        gbc.writeMem(0xa3a2, { 0x0, 0x0 });
        gbc.writeMem(0xc340, { 0xc4, 0x72, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa3a2);
        EXPECT(gbc.pc(), 0x5972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3a2), 0x43);
        EXPECT(gbc.readMem(0xa3a3), 0xc3);
        EXPECT(gbc.readMem(0xc340), 0xc4);
        EXPECT(gbc.readMem(0xc341), 0x72);
        EXPECT(gbc.readMem(0xc342), 0x59);
        // C4 01C2
        gbc.setState(0x788f, 0x7d0c, 0x1790, 0xb17a, 0xc3b9, 0x8aac, 0x1, 0x1);
        gbc.writeMem(0x788f, { 0xc4, 0x41, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7d0c);
        EXPECT(gbc.pc(), 0x7892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01C3
        gbc.setState(0x7634, 0x51cf, 0xc690, 0x6c43, 0xc3ae, 0x7b66, 0x1, 0x1);
        gbc.writeMem(0x7634, { 0xc4, 0xe0, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x51cf);
        EXPECT(gbc.pc(), 0x7637);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01C4
        gbc.setState(0x9be6, 0x721c, 0x6ee0, 0x5907, 0x4947, 0xf31e, 0x0, 0x1);
        gbc.writeMem(0x9be6, { 0xc4, 0xa7, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x721c);
        EXPECT(gbc.pc(), 0x9be9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be6), 0xc4);
        EXPECT(gbc.readMem(0x9be7), 0xa7);
        EXPECT(gbc.readMem(0x9be8), 0x14);
        // C4 01C5
        gbc.setState(0x2f0e, 0xe456, 0x5690, 0x8fcb, 0xf7c9, 0x6a0b, 0x1, 0x1);
        gbc.writeMem(0x2f0e, { 0xc4, 0x2d, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe456);
        EXPECT(gbc.pc(), 0x2f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01C6
        gbc.setState(0x7ade, 0xe6a3, 0x73b0, 0x9ad9, 0x50aa, 0x6906, 0x1, 0x1);
        gbc.writeMem(0x7ade, { 0xc4, 0xb6, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe6a3);
        EXPECT(gbc.pc(), 0x7ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 01C7
        gbc.setState(0xb508, 0xc3e0, 0x74c0, 0x99c5, 0x8184, 0x9647, 0x0, 0x0);
        gbc.writeMem(0xb508, { 0xc4, 0xea, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc3e0);
        EXPECT(gbc.pc(), 0xb50b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb508), 0xc4);
        EXPECT(gbc.readMem(0xb509), 0xea);
        EXPECT(gbc.readMem(0xb50a), 0x0);
        // C4 01C8
        gbc.setState(0xa636, 0x2d29, 0x22d0, 0x6988, 0x9319, 0x7bdc, 0x0, 0x0);
        gbc.writeMem(0xa636, { 0xc4, 0x2, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2d29);
        EXPECT(gbc.pc(), 0xa639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa636), 0xc4);
        EXPECT(gbc.readMem(0xa637), 0x2);
        EXPECT(gbc.readMem(0xa638), 0xa0);
        // C4 01CA
        gbc.setState(0x2038, 0xdd31, 0x1bd0, 0x9688, 0x539e, 0x268, 0x0, 0x0);
        gbc.writeMem(0x2038, { 0xc4, 0x9, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xdd31);
        EXPECT(gbc.pc(), 0x203b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01CC
        gbc.setState(0x3817, 0xac51, 0xe970, 0xe837, 0x295e, 0xca59, 0x1, 0x0);
        gbc.writeMem(0x3817, { 0xc4, 0x14, 0x1b });
        gbc.writeMem(0xac4f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xac4f);
        EXPECT(gbc.pc(), 0x1b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac4f), 0x1a);
        EXPECT(gbc.readMem(0xac50), 0x38);
        // C4 01CD
        gbc.setState(0x9f9, 0xcfbe, 0xbdc0, 0xca3, 0x4, 0x3930, 0x1, 0x1);
        gbc.writeMem(0x9f9, { 0xc4, 0xc3, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xcfbe);
        EXPECT(gbc.pc(), 0x9fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01CF
        gbc.setState(0x8e5f, 0xc014, 0xd8f0, 0x9746, 0x38d5, 0xc9be, 0x1, 0x1);
        gbc.writeMem(0x8e5f, { 0xc4, 0x50, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc014);
        EXPECT(gbc.pc(), 0x8e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e5f), 0xc4);
        EXPECT(gbc.readMem(0x8e60), 0x50);
        EXPECT(gbc.readMem(0x8e61), 0xd4);
        // C4 01D0
        gbc.setState(0xc2d8, 0xff94, 0xfeb0, 0x4da7, 0xbb60, 0xbd0a, 0x1, 0x0);
        gbc.writeMem(0xc2d8, { 0xc4, 0xdc, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xff94);
        EXPECT(gbc.pc(), 0xc2db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d8), 0xc4);
        EXPECT(gbc.readMem(0xc2d9), 0xdc);
        EXPECT(gbc.readMem(0xc2da), 0x25);
        // C4 01D1
        gbc.setState(0x6b4d, 0xd074, 0x5300, 0x91fc, 0x7880, 0xd33, 0x0, 0x1);
        gbc.writeMem(0x6b4d, { 0xc4, 0x65, 0xb4 });
        gbc.writeMem(0xd072, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd072);
        EXPECT(gbc.pc(), 0xb465);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd072), 0x50);
        EXPECT(gbc.readMem(0xd073), 0x6b);
        // C4 01D2
        gbc.setState(0xb9af, 0xe806, 0xb7f0, 0xcb04, 0x1bce, 0xb3bd, 0x1, 0x0);
        gbc.writeMem(0xb9af, { 0xc4, 0xef, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe806);
        EXPECT(gbc.pc(), 0xb9b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9af), 0xc4);
        EXPECT(gbc.readMem(0xb9b0), 0xef);
        EXPECT(gbc.readMem(0xb9b1), 0xed);
        // C4 01D3
        gbc.setState(0x1741, 0x42c2, 0x1180, 0x81e1, 0x7503, 0x7e48, 0x0, 0x0);
        gbc.writeMem(0x1741, { 0xc4, 0x21, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x42c2);
        EXPECT(gbc.pc(), 0x1744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01D4
        gbc.setState(0x4562, 0x499b, 0x3d80, 0x63d3, 0xa6ab, 0xa512, 0x1, 0x1);
        gbc.writeMem(0x4562, { 0xc4, 0x51, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x499b);
        EXPECT(gbc.pc(), 0x4565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01D5
        gbc.setState(0xbd80, 0xb519, 0xf280, 0x2884, 0x9121, 0x1a8f, 0x1, 0x0);
        gbc.writeMem(0xbd80, { 0xc4, 0xe6, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb519);
        EXPECT(gbc.pc(), 0xbd83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd80), 0xc4);
        EXPECT(gbc.readMem(0xbd81), 0xe6);
        EXPECT(gbc.readMem(0xbd82), 0x3b);
        // C4 01D6
        gbc.setState(0x8dd, 0xb5d5, 0x9ff0, 0x41ac, 0x9a41, 0x7e2, 0x1, 0x1);
        gbc.writeMem(0x8dd, { 0xc4, 0x24, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb5d5);
        EXPECT(gbc.pc(), 0x8e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 01D8
        gbc.setState(0xdc7e, 0xbeaa, 0x91b0, 0x2ca5, 0x29b8, 0xbbfd, 0x1, 0x0);
        gbc.writeMem(0xdc7e, { 0xc4, 0x42, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbeaa);
        EXPECT(gbc.pc(), 0xdc81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc7e), 0xc4);
        EXPECT(gbc.readMem(0xdc7f), 0x42);
        EXPECT(gbc.readMem(0xdc80), 0x26);
        // C4 01D9
        gbc.setState(0x4d35, 0x9d5f, 0x77a0, 0xe11f, 0xd9c8, 0xdd4f, 0x0, 0x0);
        gbc.writeMem(0x4d35, { 0xc4, 0x6c, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9d5f);
        EXPECT(gbc.pc(), 0x4d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 01DB
        gbc.setState(0x9f1b, 0xfd9d, 0x3270, 0xe18c, 0x5cab, 0x9699, 0x0, 0x0);
        gbc.writeMem(0x9f1b, { 0xc4, 0x89, 0x21 });
        gbc.writeMem(0xfd9b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xfd9b);
        EXPECT(gbc.pc(), 0x2189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f1b), 0xc4);
        EXPECT(gbc.readMem(0x9f1c), 0x89);
        EXPECT(gbc.readMem(0x9f1d), 0x21);
        EXPECT(gbc.readMem(0xfd9b), 0x1e);
        EXPECT(gbc.readMem(0xfd9c), 0x9f);
        // C4 01DD
        gbc.setState(0xa34e, 0x9c10, 0x4a0, 0xb5b4, 0x2bcc, 0x3353, 0x0, 0x0);
        gbc.writeMem(0xa34e, { 0xc4, 0x11, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9c10);
        EXPECT(gbc.pc(), 0xa351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34e), 0xc4);
        EXPECT(gbc.readMem(0xa34f), 0x11);
        EXPECT(gbc.readMem(0xa350), 0x68);
        // C4 01DE
        gbc.setState(0x91de, 0xdbef, 0xbce0, 0xcb05, 0x38ae, 0x7d07, 0x0, 0x0);
        gbc.writeMem(0x91de, { 0xc4, 0xa1, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdbef);
        EXPECT(gbc.pc(), 0x91e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91de), 0xc4);
        EXPECT(gbc.readMem(0x91df), 0xa1);
        EXPECT(gbc.readMem(0x91e0), 0xae);
        // C4 01DF
        gbc.setState(0x62b0, 0xf1c, 0x2bf0, 0xad6a, 0x9b00, 0xb798, 0x0, 0x0);
        gbc.writeMem(0x62b0, { 0xc4, 0x98, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf1c);
        EXPECT(gbc.pc(), 0x62b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 01E0
        gbc.setState(0x8add, 0xc0c, 0x5c90, 0x5979, 0xe809, 0xea9a, 0x0, 0x0);
        gbc.writeMem(0x8add, { 0xc4, 0x46, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc0c);
        EXPECT(gbc.pc(), 0x8ae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8add), 0xc4);
        EXPECT(gbc.readMem(0x8ade), 0x46);
        EXPECT(gbc.readMem(0x8adf), 0x89);
        // C4 01E1
        gbc.setState(0xde52, 0xa03b, 0x8220, 0xa9d3, 0x4ddf, 0x4a7f, 0x0, 0x1);
        gbc.writeMem(0xa039, { 0x0, 0x0 });
        gbc.writeMem(0xde52, { 0xc4, 0xa4, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa039);
        EXPECT(gbc.pc(), 0x47a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa039), 0x55);
        EXPECT(gbc.readMem(0xa03a), 0xde);
        EXPECT(gbc.readMem(0xde52), 0xc4);
        EXPECT(gbc.readMem(0xde53), 0xa4);
        EXPECT(gbc.readMem(0xde54), 0x47);
        // C4 01E4
        gbc.setState(0x233, 0x67cb, 0x9b80, 0x5090, 0xa748, 0x23db, 0x0, 0x0);
        gbc.writeMem(0x233, { 0xc4, 0x1f, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x67cb);
        EXPECT(gbc.pc(), 0x236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01E5
        gbc.setState(0x66c3, 0xc50f, 0x44c0, 0x8b95, 0x67bb, 0xc490, 0x0, 0x0);
        gbc.writeMem(0x66c3, { 0xc4, 0xed, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc50f);
        EXPECT(gbc.pc(), 0x66c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01E6
        gbc.setState(0x1c6a, 0x5d75, 0xcde0, 0xfec6, 0x6551, 0xe4b6, 0x1, 0x1);
        gbc.writeMem(0x1c6a, { 0xc4, 0x70, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5d75);
        EXPECT(gbc.pc(), 0x1c6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 01E7
        gbc.setState(0xdb8a, 0x9cab, 0xc3b0, 0x36fc, 0xd919, 0xef04, 0x0, 0x1);
        gbc.writeMem(0xdb8a, { 0xc4, 0xdd, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9cab);
        EXPECT(gbc.pc(), 0xdb8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb8a), 0xc4);
        EXPECT(gbc.readMem(0xdb8b), 0xdd);
        EXPECT(gbc.readMem(0xdb8c), 0x42);
        // C4 01EC
        gbc.setState(0xa2c0, 0x5abf, 0x6d90, 0xe14a, 0xb3bc, 0x6dd2, 0x1, 0x0);
        gbc.writeMem(0xa2c0, { 0xc4, 0x7d, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5abf);
        EXPECT(gbc.pc(), 0xa2c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c0), 0xc4);
        EXPECT(gbc.readMem(0xa2c1), 0x7d);
        EXPECT(gbc.readMem(0xa2c2), 0x67);
        // C4 01ED
        gbc.setState(0xe4df, 0xad33, 0x200, 0x7256, 0xc8bb, 0xd65, 0x1, 0x1);
        gbc.writeMem(0xad31, { 0x0, 0x0 });
        gbc.writeMem(0xe4df, { 0xc4, 0xf8, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xad31);
        EXPECT(gbc.pc(), 0x7f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad31), 0xe2);
        EXPECT(gbc.readMem(0xad32), 0xe4);
        EXPECT(gbc.readMem(0xe4df), 0xc4);
        EXPECT(gbc.readMem(0xe4e0), 0xf8);
        EXPECT(gbc.readMem(0xe4e1), 0x7);
        // C4 01EF
        gbc.setState(0xc9a, 0xf935, 0xdb00, 0xc224, 0x54be, 0xd39, 0x0, 0x1);
        gbc.writeMem(0xc9a, { 0xc4, 0xcf, 0x54 });
        gbc.writeMem(0xf933, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf933);
        EXPECT(gbc.pc(), 0x54cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf933), 0x9d);
        EXPECT(gbc.readMem(0xf934), 0xc);
        // C4 01F2
        gbc.setState(0xb8be, 0x89b8, 0x2720, 0xb70f, 0x4bb1, 0xe493, 0x1, 0x0);
        gbc.writeMem(0x89b6, { 0x0, 0x0 });
        gbc.writeMem(0xb8be, { 0xc4, 0xbd, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x89b6);
        EXPECT(gbc.pc(), 0x5dbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89b6), 0xc1);
        EXPECT(gbc.readMem(0x89b7), 0xb8);
        EXPECT(gbc.readMem(0xb8be), 0xc4);
        EXPECT(gbc.readMem(0xb8bf), 0xbd);
        EXPECT(gbc.readMem(0xb8c0), 0x5d);
        // C4 01F3
        gbc.setState(0x129, 0xbb92, 0x3600, 0x7ee9, 0xa689, 0x1510, 0x1, 0x1);
        gbc.writeMem(0x129, { 0xc4, 0xec, 0x3b });
        gbc.writeMem(0xbb90, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbb90);
        EXPECT(gbc.pc(), 0x3bec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb90), 0x2c);
        EXPECT(gbc.readMem(0xbb91), 0x1);
        // C4 01F4
        gbc.setState(0xa307, 0x5b89, 0xf390, 0x7a81, 0xf948, 0x8047, 0x0, 0x1);
        gbc.writeMem(0xa307, { 0xc4, 0x65, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5b89);
        EXPECT(gbc.pc(), 0xa30a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa307), 0xc4);
        EXPECT(gbc.readMem(0xa308), 0x65);
        EXPECT(gbc.readMem(0xa309), 0xe);
        // C4 01F5
        gbc.setState(0x4722, 0x5557, 0xf590, 0xb189, 0x10af, 0xa8f2, 0x0, 0x0);
        gbc.writeMem(0x4722, { 0xc4, 0x8c, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5557);
        EXPECT(gbc.pc(), 0x4725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 01F6
        gbc.setState(0x4ede, 0xd326, 0xcff0, 0xf9be, 0x8b6f, 0x5d3f, 0x0, 0x0);
        gbc.writeMem(0x4ede, { 0xc4, 0x3c, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd326);
        EXPECT(gbc.pc(), 0x4ee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 01F7
        gbc.setState(0x6a27, 0x7d68, 0x33c0, 0x7a78, 0x8067, 0xcd9e, 0x0, 0x0);
        gbc.writeMem(0x6a27, { 0xc4, 0xc5, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7d68);
        EXPECT(gbc.pc(), 0x6a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01F9
        gbc.setState(0x184b, 0x64a4, 0x5d80, 0x56f9, 0x1e41, 0xaf90, 0x0, 0x0);
        gbc.writeMem(0x184b, { 0xc4, 0xe8, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x64a4);
        EXPECT(gbc.pc(), 0x184e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 01FA
        gbc.setState(0xab3b, 0x2986, 0x36f0, 0x39ec, 0xaa8d, 0x128f, 0x1, 0x1);
        gbc.writeMem(0xab3b, { 0xc4, 0xce, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2986);
        EXPECT(gbc.pc(), 0xab3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab3b), 0xc4);
        EXPECT(gbc.readMem(0xab3c), 0xce);
        EXPECT(gbc.readMem(0xab3d), 0x33);
        // C4 01FB
        gbc.setState(0xc5d0, 0x857b, 0xba40, 0xcb27, 0xfd28, 0xf157, 0x1, 0x1);
        gbc.writeMem(0x8579, { 0x0, 0x0 });
        gbc.writeMem(0xc5d0, { 0xc4, 0xf4, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8579);
        EXPECT(gbc.pc(), 0x98f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8579), 0xd3);
        EXPECT(gbc.readMem(0x857a), 0xc5);
        EXPECT(gbc.readMem(0xc5d0), 0xc4);
        EXPECT(gbc.readMem(0xc5d1), 0xf4);
        EXPECT(gbc.readMem(0xc5d2), 0x98);
        // C4 01FC
        gbc.setState(0x1cb4, 0xb11, 0x5cb0, 0xae0f, 0xb60e, 0xed5e, 0x1, 0x0);
        gbc.writeMem(0x1cb4, { 0xc4, 0x61, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb11);
        EXPECT(gbc.pc(), 0x1cb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 01FD
        gbc.setState(0xe481, 0xe2b9, 0xb80, 0x9639, 0x8d84, 0xd5bc, 0x1, 0x1);
        gbc.writeMem(0xe481, { 0xc4, 0x2d, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe2b9);
        EXPECT(gbc.pc(), 0xe484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe481), 0xc4);
        EXPECT(gbc.readMem(0xe482), 0x2d);
        EXPECT(gbc.readMem(0xe483), 0xde);
        // C4 01FF
        gbc.setState(0x8f60, 0x29ca, 0x3290, 0xf509, 0x8ced, 0x83ce, 0x1, 0x1);
        gbc.writeMem(0x8f60, { 0xc4, 0x5f, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x29ca);
        EXPECT(gbc.pc(), 0x8f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f60), 0xc4);
        EXPECT(gbc.readMem(0x8f61), 0x5f);
        EXPECT(gbc.readMem(0x8f62), 0x7e);
        // C4 0200
        gbc.setState(0xaf98, 0x9e8f, 0xe6b0, 0xbce1, 0xfd1b, 0x7c44, 0x0, 0x1);
        gbc.writeMem(0xaf98, { 0xc4, 0x26, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9e8f);
        EXPECT(gbc.pc(), 0xaf9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf98), 0xc4);
        EXPECT(gbc.readMem(0xaf99), 0x26);
        EXPECT(gbc.readMem(0xaf9a), 0x12);
        // C4 0201
        gbc.setState(0x7873, 0x469d, 0x21f0, 0x7d87, 0x3cb0, 0x7228, 0x0, 0x0);
        gbc.writeMem(0x7873, { 0xc4, 0x76, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x469d);
        EXPECT(gbc.pc(), 0x7876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0203
        gbc.setState(0xe2c5, 0x911b, 0xdbf0, 0xbf1c, 0x1562, 0x7ac9, 0x1, 0x1);
        gbc.writeMem(0xe2c5, { 0xc4, 0xd6, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x911b);
        EXPECT(gbc.pc(), 0xe2c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c5), 0xc4);
        EXPECT(gbc.readMem(0xe2c6), 0xd6);
        EXPECT(gbc.readMem(0xe2c7), 0xd3);
        // C4 0204
        gbc.setState(0x843f, 0x8384, 0x8f20, 0x39bc, 0x315e, 0xb944, 0x0, 0x1);
        gbc.writeMem(0x8382, { 0x0, 0x0 });
        gbc.writeMem(0x843f, { 0xc4, 0xdb, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8382);
        EXPECT(gbc.pc(), 0x45db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8382), 0x42);
        EXPECT(gbc.readMem(0x8383), 0x84);
        EXPECT(gbc.readMem(0x843f), 0xc4);
        EXPECT(gbc.readMem(0x8440), 0xdb);
        EXPECT(gbc.readMem(0x8441), 0x45);
        // C4 0205
        gbc.setState(0xbbe6, 0xde94, 0x25d0, 0x6e92, 0x7adc, 0xed44, 0x1, 0x0);
        gbc.writeMem(0xbbe6, { 0xc4, 0xff, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xde94);
        EXPECT(gbc.pc(), 0xbbe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe6), 0xc4);
        EXPECT(gbc.readMem(0xbbe7), 0xff);
        EXPECT(gbc.readMem(0xbbe8), 0x9);
        // C4 0207
        gbc.setState(0x5684, 0xd576, 0xf010, 0xf000, 0x91d, 0xaffe, 0x0, 0x1);
        gbc.writeMem(0x5684, { 0xc4, 0xeb, 0xf1 });
        gbc.writeMem(0xd574, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd574);
        EXPECT(gbc.pc(), 0xf1eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd574), 0x87);
        EXPECT(gbc.readMem(0xd575), 0x56);
        // C4 0208
        gbc.setState(0xab4b, 0x38f3, 0x8090, 0x765c, 0xde30, 0x845d, 0x1, 0x1);
        gbc.writeMem(0xab4b, { 0xc4, 0x31, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x38f3);
        EXPECT(gbc.pc(), 0xab4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab4b), 0xc4);
        EXPECT(gbc.readMem(0xab4c), 0x31);
        EXPECT(gbc.readMem(0xab4d), 0x5);
        // C4 0209
        gbc.setState(0x3193, 0x9808, 0x1590, 0x226e, 0xc9a9, 0xba3e, 0x1, 0x0);
        gbc.writeMem(0x3193, { 0xc4, 0x8e, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9808);
        EXPECT(gbc.pc(), 0x3196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 020A
        gbc.setState(0x6ba4, 0xb6e7, 0x8bc0, 0x16eb, 0x54d1, 0xeeff, 0x1, 0x0);
        gbc.writeMem(0x6ba4, { 0xc4, 0x69, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb6e7);
        EXPECT(gbc.pc(), 0x6ba7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 020E
        gbc.setState(0x5146, 0xe3b, 0x82f0, 0x31c4, 0x5e92, 0x992, 0x0, 0x1);
        gbc.writeMem(0x5146, { 0xc4, 0xb, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe3b);
        EXPECT(gbc.pc(), 0x5149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 020F
        gbc.setState(0x1eee, 0x904f, 0xc5d0, 0xd8cf, 0xc008, 0x91ae, 0x1, 0x0);
        gbc.writeMem(0x1eee, { 0xc4, 0x58, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x904f);
        EXPECT(gbc.pc(), 0x1ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0210
        gbc.setState(0xed6e, 0xc005, 0xd5c0, 0x236c, 0xa747, 0xa166, 0x0, 0x0);
        gbc.writeMem(0xed6e, { 0xc4, 0x9a, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc005);
        EXPECT(gbc.pc(), 0xed71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed6e), 0xc4);
        EXPECT(gbc.readMem(0xed6f), 0x9a);
        EXPECT(gbc.readMem(0xed70), 0x51);
        // C4 0211
        gbc.setState(0xdb07, 0xba3b, 0xc240, 0x8f50, 0x591, 0x2025, 0x0, 0x1);
        gbc.writeMem(0xba39, { 0x0, 0x0 });
        gbc.writeMem(0xdb07, { 0xc4, 0xbb, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xba39);
        EXPECT(gbc.pc(), 0x4bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba39), 0xa);
        EXPECT(gbc.readMem(0xba3a), 0xdb);
        EXPECT(gbc.readMem(0xdb07), 0xc4);
        EXPECT(gbc.readMem(0xdb08), 0xbb);
        EXPECT(gbc.readMem(0xdb09), 0x4);
        // C4 0212
        gbc.setState(0x8bb6, 0xa598, 0x4210, 0x620e, 0xb64b, 0x2e52, 0x1, 0x0);
        gbc.writeMem(0x8bb6, { 0xc4, 0x4b, 0xb3 });
        gbc.writeMem(0xa596, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa596);
        EXPECT(gbc.pc(), 0xb34b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb6), 0xc4);
        EXPECT(gbc.readMem(0x8bb7), 0x4b);
        EXPECT(gbc.readMem(0x8bb8), 0xb3);
        EXPECT(gbc.readMem(0xa596), 0xb9);
        EXPECT(gbc.readMem(0xa597), 0x8b);
        // C4 0214
        gbc.setState(0x7d92, 0xd350, 0x43c0, 0x3644, 0x688a, 0x4589, 0x1, 0x1);
        gbc.writeMem(0x7d92, { 0xc4, 0x98, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd350);
        EXPECT(gbc.pc(), 0x7d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0215
        gbc.setState(0xa99b, 0x8c7d, 0x6500, 0x3b23, 0xf873, 0x15eb, 0x1, 0x0);
        gbc.writeMem(0x8c7b, { 0x0, 0x0 });
        gbc.writeMem(0xa99b, { 0xc4, 0xe5, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8c7b);
        EXPECT(gbc.pc(), 0x7fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c7b), 0x9e);
        EXPECT(gbc.readMem(0x8c7c), 0xa9);
        EXPECT(gbc.readMem(0xa99b), 0xc4);
        EXPECT(gbc.readMem(0xa99c), 0xe5);
        EXPECT(gbc.readMem(0xa99d), 0x7f);
        // C4 0216
        gbc.setState(0x584, 0xf9c0, 0xe580, 0x28f4, 0xfca0, 0xc7d4, 0x0, 0x0);
        gbc.writeMem(0x584, { 0xc4, 0x7b, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf9c0);
        EXPECT(gbc.pc(), 0x587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0217
        gbc.setState(0x5dab, 0xfb53, 0x6d20, 0xd555, 0xb6db, 0x2db9, 0x0, 0x0);
        gbc.writeMem(0x5dab, { 0xc4, 0x14, 0x64 });
        gbc.writeMem(0xfb51, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfb51);
        EXPECT(gbc.pc(), 0x6414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb51), 0xae);
        EXPECT(gbc.readMem(0xfb52), 0x5d);
        // C4 0218
        gbc.setState(0x3e38, 0xbd1f, 0x62a0, 0x5269, 0x7b9b, 0xd285, 0x1, 0x1);
        gbc.writeMem(0x3e38, { 0xc4, 0x9e, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbd1f);
        EXPECT(gbc.pc(), 0x3e3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 021A
        gbc.setState(0x6761, 0xdfcf, 0x6820, 0x1471, 0xc081, 0xcf7, 0x0, 0x0);
        gbc.writeMem(0x6761, { 0xc4, 0x93, 0x77 });
        gbc.writeMem(0xdfcd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xdfcd);
        EXPECT(gbc.pc(), 0x7793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfcd), 0x64);
        EXPECT(gbc.readMem(0xdfce), 0x67);
        // C4 021C
        gbc.setState(0x638d, 0xe356, 0x94a0, 0x2667, 0xbe91, 0xdef0, 0x1, 0x1);
        gbc.writeMem(0x638d, { 0xc4, 0x92, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe356);
        EXPECT(gbc.pc(), 0x6390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 021D
        gbc.setState(0xc31b, 0xcd25, 0x2480, 0x67a, 0x4af9, 0x80cb, 0x1, 0x1);
        gbc.writeMem(0xc31b, { 0xc4, 0x60, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcd25);
        EXPECT(gbc.pc(), 0xc31e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31b), 0xc4);
        EXPECT(gbc.readMem(0xc31c), 0x60);
        EXPECT(gbc.readMem(0xc31d), 0x37);
        // C4 021E
        gbc.setState(0xbdb4, 0x35be, 0xf3f0, 0x516, 0xb38d, 0x3db, 0x0, 0x1);
        gbc.writeMem(0xbdb4, { 0xc4, 0x39, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x35be);
        EXPECT(gbc.pc(), 0xbdb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb4), 0xc4);
        EXPECT(gbc.readMem(0xbdb5), 0x39);
        EXPECT(gbc.readMem(0xbdb6), 0x12);
        // C4 021F
        gbc.setState(0xc6fd, 0x47a3, 0xe980, 0xbf5d, 0xf41e, 0x8711, 0x1, 0x0);
        gbc.writeMem(0xc6fd, { 0xc4, 0x80, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x47a3);
        EXPECT(gbc.pc(), 0xc700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6fd), 0xc4);
        EXPECT(gbc.readMem(0xc6fe), 0x80);
        EXPECT(gbc.readMem(0xc6ff), 0xf2);
        // C4 0220
        gbc.setState(0x707c, 0x5ad, 0x8180, 0xd417, 0xf6bb, 0xcf77, 0x1, 0x0);
        gbc.writeMem(0x707c, { 0xc4, 0x14, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5ad);
        EXPECT(gbc.pc(), 0x707f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0221
        gbc.setState(0x50e, 0x9eff, 0xcdd0, 0xad, 0x196f, 0xd212, 0x0, 0x1);
        gbc.writeMem(0x50e, { 0xc4, 0xd2, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9eff);
        EXPECT(gbc.pc(), 0x511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0223
        gbc.setState(0x18ef, 0x4f1, 0xcfd0, 0x995, 0x441d, 0xbc7b, 0x0, 0x0);
        gbc.writeMem(0x18ef, { 0xc4, 0x6f, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4f1);
        EXPECT(gbc.pc(), 0x18f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0224
        gbc.setState(0x80c, 0xf701, 0x7800, 0x3801, 0x6b26, 0x84aa, 0x0, 0x1);
        gbc.writeMem(0x80c, { 0xc4, 0xf6, 0x7a });
        gbc.writeMem(0xf6ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf6ff);
        EXPECT(gbc.pc(), 0x7af6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6ff), 0xf);
        EXPECT(gbc.readMem(0xf700), 0x8);
        // C4 0225
        gbc.setState(0x3d46, 0x6096, 0xe980, 0x384d, 0x3f23, 0xffda, 0x1, 0x0);
        gbc.writeMem(0x3d46, { 0xc4, 0x21, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6096);
        EXPECT(gbc.pc(), 0x3d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0226
        gbc.setState(0x1156, 0xf553, 0xa660, 0x4b04, 0x7d77, 0x8292, 0x0, 0x1);
        gbc.writeMem(0x1156, { 0xc4, 0x90, 0xda });
        gbc.writeMem(0xf551, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf551);
        EXPECT(gbc.pc(), 0xda90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf551), 0x59);
        EXPECT(gbc.readMem(0xf552), 0x11);
        // C4 0227
        gbc.setState(0x8034, 0xb89b, 0x7270, 0x9ef1, 0x6f85, 0x5197, 0x1, 0x1);
        gbc.writeMem(0x8034, { 0xc4, 0x8a, 0x40 });
        gbc.writeMem(0xb899, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb899);
        EXPECT(gbc.pc(), 0x408a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8034), 0xc4);
        EXPECT(gbc.readMem(0x8035), 0x8a);
        EXPECT(gbc.readMem(0x8036), 0x40);
        EXPECT(gbc.readMem(0xb899), 0x37);
        EXPECT(gbc.readMem(0xb89a), 0x80);
        // C4 0228
        gbc.setState(0xa254, 0xf022, 0x4740, 0xca11, 0x28e8, 0xaef, 0x1, 0x0);
        gbc.writeMem(0xa254, { 0xc4, 0x92, 0xa6 });
        gbc.writeMem(0xf020, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf020);
        EXPECT(gbc.pc(), 0xa692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa254), 0xc4);
        EXPECT(gbc.readMem(0xa255), 0x92);
        EXPECT(gbc.readMem(0xa256), 0xa6);
        EXPECT(gbc.readMem(0xf020), 0x57);
        EXPECT(gbc.readMem(0xf021), 0xa2);
        // C4 0229
        gbc.setState(0x9ac, 0x9b1c, 0x3540, 0xc2ed, 0x5dbc, 0xc97e, 0x0, 0x0);
        gbc.writeMem(0x9ac, { 0xc4, 0x44, 0xc9 });
        gbc.writeMem(0x9b1a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9b1a);
        EXPECT(gbc.pc(), 0xc944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1a), 0xaf);
        EXPECT(gbc.readMem(0x9b1b), 0x9);
        // C4 022A
        gbc.setState(0xe149, 0x4984, 0x1cb0, 0x1c3f, 0x6307, 0x6ea6, 0x0, 0x0);
        gbc.writeMem(0xe149, { 0xc4, 0x1e, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4984);
        EXPECT(gbc.pc(), 0xe14c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe149), 0xc4);
        EXPECT(gbc.readMem(0xe14a), 0x1e);
        EXPECT(gbc.readMem(0xe14b), 0x4);
        // C4 022B
        gbc.setState(0x9f6a, 0x5fc7, 0x64a0, 0xf57c, 0x9325, 0x5b24, 0x0, 0x0);
        gbc.writeMem(0x9f6a, { 0xc4, 0xa, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5fc7);
        EXPECT(gbc.pc(), 0x9f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6a), 0xc4);
        EXPECT(gbc.readMem(0x9f6b), 0xa);
        EXPECT(gbc.readMem(0x9f6c), 0xb4);
        // C4 022D
        gbc.setState(0x43e9, 0x131, 0xdcb0, 0x4769, 0x43c5, 0xc99, 0x0, 0x1);
        gbc.writeMem(0x43e9, { 0xc4, 0xd8, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x131);
        EXPECT(gbc.pc(), 0x43ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0230
        gbc.setState(0x9087, 0xe567, 0x1840, 0x1c22, 0x78fe, 0xdab6, 0x1, 0x1);
        gbc.writeMem(0x9087, { 0xc4, 0xdb, 0xb7 });
        gbc.writeMem(0xe565, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe565);
        EXPECT(gbc.pc(), 0xb7db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9087), 0xc4);
        EXPECT(gbc.readMem(0x9088), 0xdb);
        EXPECT(gbc.readMem(0x9089), 0xb7);
        EXPECT(gbc.readMem(0xe565), 0x8a);
        EXPECT(gbc.readMem(0xe566), 0x90);
        // C4 0231
        gbc.setState(0x2f93, 0x2e40, 0xe5e0, 0x9f54, 0x158b, 0x3926, 0x1, 0x0);
        gbc.writeMem(0x2f93, { 0xc4, 0xe2, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2e40);
        EXPECT(gbc.pc(), 0x2f96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0232
        gbc.setState(0x1c9d, 0xe03f, 0xe990, 0xf3d5, 0xc3f8, 0x3abf, 0x0, 0x0);
        gbc.writeMem(0x1c9d, { 0xc4, 0x77, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe03f);
        EXPECT(gbc.pc(), 0x1ca0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0233
        gbc.setState(0xeaad, 0xfc04, 0x9dc0, 0xf815, 0xf909, 0x4a3d, 0x0, 0x0);
        gbc.writeMem(0xeaad, { 0xc4, 0xd, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfc04);
        EXPECT(gbc.pc(), 0xeab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaad), 0xc4);
        EXPECT(gbc.readMem(0xeaae), 0xd);
        EXPECT(gbc.readMem(0xeaaf), 0x4b);
        // C4 0236
        gbc.setState(0xee0c, 0x88d6, 0x9a80, 0xae48, 0xcbad, 0xbb96, 0x1, 0x1);
        gbc.writeMem(0xee0c, { 0xc4, 0xb4, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x88d6);
        EXPECT(gbc.pc(), 0xee0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee0c), 0xc4);
        EXPECT(gbc.readMem(0xee0d), 0xb4);
        EXPECT(gbc.readMem(0xee0e), 0x2a);
        // C4 0237
        gbc.setState(0xc9ee, 0x1ddb, 0xf9f0, 0x429f, 0x4a01, 0x8a84, 0x1, 0x0);
        gbc.writeMem(0xc9ee, { 0xc4, 0x9a, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1ddb);
        EXPECT(gbc.pc(), 0xc9f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9ee), 0xc4);
        EXPECT(gbc.readMem(0xc9ef), 0x9a);
        EXPECT(gbc.readMem(0xc9f0), 0x7b);
        // C4 0238
        gbc.setState(0xdb69, 0xc8a5, 0xc4c0, 0xe200, 0xc576, 0x422d, 0x1, 0x0);
        gbc.writeMem(0xdb69, { 0xc4, 0x7b, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc8a5);
        EXPECT(gbc.pc(), 0xdb6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb69), 0xc4);
        EXPECT(gbc.readMem(0xdb6a), 0x7b);
        EXPECT(gbc.readMem(0xdb6b), 0xcc);
        // C4 023A
        gbc.setState(0x7544, 0xcfc8, 0xdd70, 0xa835, 0x55b3, 0x5841, 0x0, 0x1);
        gbc.writeMem(0x7544, { 0xc4, 0xde, 0x52 });
        gbc.writeMem(0xcfc6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcfc6);
        EXPECT(gbc.pc(), 0x52de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc6), 0x47);
        EXPECT(gbc.readMem(0xcfc7), 0x75);
        // C4 023B
        gbc.setState(0xa8a8, 0xe45b, 0x8fc0, 0x494, 0x6d2a, 0x34ec, 0x0, 0x0);
        gbc.writeMem(0xa8a8, { 0xc4, 0x2f, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe45b);
        EXPECT(gbc.pc(), 0xa8ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a8), 0xc4);
        EXPECT(gbc.readMem(0xa8a9), 0x2f);
        EXPECT(gbc.readMem(0xa8aa), 0x21);
        // C4 023D
        gbc.setState(0x1150, 0xcdf6, 0xad80, 0xf9df, 0x1ef0, 0x9b48, 0x0, 0x1);
        gbc.writeMem(0x1150, { 0xc4, 0xc9, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xcdf6);
        EXPECT(gbc.pc(), 0x1153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 023F
        gbc.setState(0x9a01, 0x60a1, 0x2ad0, 0xbb7b, 0xb952, 0x9986, 0x0, 0x1);
        gbc.writeMem(0x9a01, { 0xc4, 0x2c, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x60a1);
        EXPECT(gbc.pc(), 0x9a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a01), 0xc4);
        EXPECT(gbc.readMem(0x9a02), 0x2c);
        EXPECT(gbc.readMem(0x9a03), 0x7f);
        // C4 0241
        gbc.setState(0x6187, 0x616, 0x95e0, 0xca49, 0xa793, 0x462e, 0x1, 0x1);
        gbc.writeMem(0x6187, { 0xc4, 0x3, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x616);
        EXPECT(gbc.pc(), 0x618a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0242
        gbc.setState(0xdc2f, 0x6321, 0x66f0, 0xe802, 0xadc9, 0x7144, 0x0, 0x0);
        gbc.writeMem(0xdc2f, { 0xc4, 0x7d, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6321);
        EXPECT(gbc.pc(), 0xdc32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2f), 0xc4);
        EXPECT(gbc.readMem(0xdc30), 0x7d);
        EXPECT(gbc.readMem(0xdc31), 0x94);
        // C4 0243
        gbc.setState(0x9937, 0xa35c, 0xae70, 0x13f1, 0x3fd5, 0x3d7f, 0x0, 0x0);
        gbc.writeMem(0x9937, { 0xc4, 0x41, 0x43 });
        gbc.writeMem(0xa35a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa35a);
        EXPECT(gbc.pc(), 0x4341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9937), 0xc4);
        EXPECT(gbc.readMem(0x9938), 0x41);
        EXPECT(gbc.readMem(0x9939), 0x43);
        EXPECT(gbc.readMem(0xa35a), 0x3a);
        EXPECT(gbc.readMem(0xa35b), 0x99);
        // C4 0244
        gbc.setState(0xcc74, 0xa90f, 0x5f00, 0xb382, 0x7a7e, 0x10d1, 0x1, 0x1);
        gbc.writeMem(0xa90d, { 0x0, 0x0 });
        gbc.writeMem(0xcc74, { 0xc4, 0x41, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa90d);
        EXPECT(gbc.pc(), 0x8141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa90d), 0x77);
        EXPECT(gbc.readMem(0xa90e), 0xcc);
        EXPECT(gbc.readMem(0xcc74), 0xc4);
        EXPECT(gbc.readMem(0xcc75), 0x41);
        EXPECT(gbc.readMem(0xcc76), 0x81);
        // C4 0247
        gbc.setState(0x9108, 0x616d, 0xecf0, 0x727, 0xb9a7, 0xda63, 0x1, 0x0);
        gbc.writeMem(0x9108, { 0xc4, 0xc4, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x616d);
        EXPECT(gbc.pc(), 0x910b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9108), 0xc4);
        EXPECT(gbc.readMem(0x9109), 0xc4);
        EXPECT(gbc.readMem(0x910a), 0x5);
        // C4 0249
        gbc.setState(0x4df6, 0xd2bf, 0xc380, 0xaea9, 0xae4a, 0x2aa0, 0x1, 0x1);
        gbc.writeMem(0x4df6, { 0xc4, 0xe6, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd2bf);
        EXPECT(gbc.pc(), 0x4df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 024A
        gbc.setState(0x1335, 0x24d0, 0xa4b0, 0x7f6d, 0x6acb, 0xbc60, 0x0, 0x0);
        gbc.writeMem(0x1335, { 0xc4, 0x1a, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x24d0);
        EXPECT(gbc.pc(), 0x1338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 024B
        gbc.setState(0xb96b, 0xdb71, 0x6760, 0xdd27, 0x61ff, 0x9ec8, 0x0, 0x1);
        gbc.writeMem(0xb96b, { 0xc4, 0xa5, 0x8a });
        gbc.writeMem(0xdb6f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdb6f);
        EXPECT(gbc.pc(), 0x8aa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb96b), 0xc4);
        EXPECT(gbc.readMem(0xb96c), 0xa5);
        EXPECT(gbc.readMem(0xb96d), 0x8a);
        EXPECT(gbc.readMem(0xdb6f), 0x6e);
        EXPECT(gbc.readMem(0xdb70), 0xb9);
        // C4 024C
        gbc.setState(0xea2a, 0x6ab3, 0xc4b0, 0x8ace, 0x543f, 0x4253, 0x0, 0x1);
        gbc.writeMem(0xea2a, { 0xc4, 0x10, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6ab3);
        EXPECT(gbc.pc(), 0xea2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea2a), 0xc4);
        EXPECT(gbc.readMem(0xea2b), 0x10);
        EXPECT(gbc.readMem(0xea2c), 0xa2);
        // C4 024D
        gbc.setState(0xa498, 0x988d, 0x9ae0, 0x2b82, 0xbfe9, 0xa908, 0x0, 0x0);
        gbc.writeMem(0xa498, { 0xc4, 0x68, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x988d);
        EXPECT(gbc.pc(), 0xa49b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa498), 0xc4);
        EXPECT(gbc.readMem(0xa499), 0x68);
        EXPECT(gbc.readMem(0xa49a), 0x64);
        // C4 024E
        gbc.setState(0x5579, 0x7f12, 0x39b0, 0x1ca1, 0xec0f, 0xa586, 0x1, 0x0);
        gbc.writeMem(0x5579, { 0xc4, 0xb8, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7f12);
        EXPECT(gbc.pc(), 0x557c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 024F
        gbc.setState(0xe4e, 0xbbe4, 0xf900, 0x3da6, 0x2923, 0x557, 0x0, 0x0);
        gbc.writeMem(0xe4e, { 0xc4, 0xca, 0x11 });
        gbc.writeMem(0xbbe2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xbbe2);
        EXPECT(gbc.pc(), 0x11ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe2), 0x51);
        EXPECT(gbc.readMem(0xbbe3), 0xe);
        // C4 0250
        gbc.setState(0xa25e, 0x6996, 0xce90, 0x5a70, 0x312b, 0x3bf3, 0x1, 0x1);
        gbc.writeMem(0xa25e, { 0xc4, 0x57, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6996);
        EXPECT(gbc.pc(), 0xa261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa25e), 0xc4);
        EXPECT(gbc.readMem(0xa25f), 0x57);
        EXPECT(gbc.readMem(0xa260), 0xcb);
        // C4 0251
        gbc.setState(0x358c, 0x2a21, 0xa3c0, 0xe218, 0xb2ab, 0x1d94, 0x1, 0x1);
        gbc.writeMem(0x358c, { 0xc4, 0xd6, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2a21);
        EXPECT(gbc.pc(), 0x358f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0252
        gbc.setState(0xe4e8, 0x80f2, 0x4cb0, 0xbc6, 0xf9c0, 0xc2aa, 0x0, 0x0);
        gbc.writeMem(0xe4e8, { 0xc4, 0x24, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x80f2);
        EXPECT(gbc.pc(), 0xe4eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e8), 0xc4);
        EXPECT(gbc.readMem(0xe4e9), 0x24);
        EXPECT(gbc.readMem(0xe4ea), 0xbf);
        // C4 0254
        gbc.setState(0x6d3d, 0x140c, 0x27b0, 0x73c2, 0xb87c, 0x4bf, 0x0, 0x0);
        gbc.writeMem(0x6d3d, { 0xc4, 0xc2, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x140c);
        EXPECT(gbc.pc(), 0x6d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0256
        gbc.setState(0x1d35, 0xa903, 0x5360, 0xc232, 0x5c36, 0x4d82, 0x0, 0x0);
        gbc.writeMem(0x1d35, { 0xc4, 0x55, 0x1b });
        gbc.writeMem(0xa901, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa901);
        EXPECT(gbc.pc(), 0x1b55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa901), 0x38);
        EXPECT(gbc.readMem(0xa902), 0x1d);
        // C4 0257
        gbc.setState(0xaab4, 0xa9c6, 0x1640, 0x508f, 0x1437, 0x5d1, 0x0, 0x1);
        gbc.writeMem(0xa9c4, { 0x0, 0x0 });
        gbc.writeMem(0xaab4, { 0xc4, 0xa9, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa9c4);
        EXPECT(gbc.pc(), 0x56a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c4), 0xb7);
        EXPECT(gbc.readMem(0xa9c5), 0xaa);
        EXPECT(gbc.readMem(0xaab4), 0xc4);
        EXPECT(gbc.readMem(0xaab5), 0xa9);
        EXPECT(gbc.readMem(0xaab6), 0x56);
        // C4 0258
        gbc.setState(0x6a6, 0xf442, 0xc090, 0xa4f6, 0xbaa1, 0xdbbe, 0x0, 0x1);
        gbc.writeMem(0x6a6, { 0xc4, 0x2f, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf442);
        EXPECT(gbc.pc(), 0x6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0259
        gbc.setState(0x3b0f, 0x94c6, 0x2dd0, 0x8220, 0x781f, 0xb0f7, 0x0, 0x0);
        gbc.writeMem(0x3b0f, { 0xc4, 0x82, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x94c6);
        EXPECT(gbc.pc(), 0x3b12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 025A
        gbc.setState(0x22dc, 0xd248, 0xb6e0, 0xf30c, 0x9513, 0x216a, 0x0, 0x1);
        gbc.writeMem(0x22dc, { 0xc4, 0x7c, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd248);
        EXPECT(gbc.pc(), 0x22df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 025B
        gbc.setState(0xcd99, 0x2ca1, 0xed80, 0x3f7b, 0x1018, 0x6979, 0x1, 0x1);
        gbc.writeMem(0xcd99, { 0xc4, 0x3, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2ca1);
        EXPECT(gbc.pc(), 0xcd9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd99), 0xc4);
        EXPECT(gbc.readMem(0xcd9a), 0x3);
        EXPECT(gbc.readMem(0xcd9b), 0xc6);
        // C4 025D
        gbc.setState(0x9cc2, 0xb508, 0xc810, 0x723b, 0x1755, 0x14bf, 0x0, 0x1);
        gbc.writeMem(0x9cc2, { 0xc4, 0xc9, 0xc });
        gbc.writeMem(0xb506, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb506);
        EXPECT(gbc.pc(), 0xcc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cc2), 0xc4);
        EXPECT(gbc.readMem(0x9cc3), 0xc9);
        EXPECT(gbc.readMem(0x9cc4), 0xc);
        EXPECT(gbc.readMem(0xb506), 0xc5);
        EXPECT(gbc.readMem(0xb507), 0x9c);
        // C4 025E
        gbc.setState(0x789e, 0xa280, 0xe0, 0x54b1, 0x6bff, 0x93e, 0x1, 0x1);
        gbc.writeMem(0x789e, { 0xc4, 0x2c, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa280);
        EXPECT(gbc.pc(), 0x78a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0260
        gbc.setState(0xe8e, 0xe427, 0x1600, 0x9c4f, 0xc16e, 0xa101, 0x0, 0x1);
        gbc.writeMem(0xe8e, { 0xc4, 0xaa, 0x49 });
        gbc.writeMem(0xe425, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe425);
        EXPECT(gbc.pc(), 0x49aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe425), 0x91);
        EXPECT(gbc.readMem(0xe426), 0xe);
        // C4 0261
        gbc.setState(0x252b, 0x89d3, 0x9fe0, 0xaf1c, 0xd0c8, 0x1f6, 0x1, 0x0);
        gbc.writeMem(0x252b, { 0xc4, 0xb7, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x89d3);
        EXPECT(gbc.pc(), 0x252e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0262
        gbc.setState(0x4563, 0xedd3, 0xebc0, 0x2b6b, 0xbcd7, 0xbe35, 0x0, 0x1);
        gbc.writeMem(0x4563, { 0xc4, 0x3c, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xedd3);
        EXPECT(gbc.pc(), 0x4566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0264
        gbc.setState(0xd7d5, 0xbe9e, 0xdf90, 0x71cf, 0x7259, 0x83e9, 0x1, 0x1);
        gbc.writeMem(0xd7d5, { 0xc4, 0xdc, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbe9e);
        EXPECT(gbc.pc(), 0xd7d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7d5), 0xc4);
        EXPECT(gbc.readMem(0xd7d6), 0xdc);
        EXPECT(gbc.readMem(0xd7d7), 0xc0);
        // C4 0265
        gbc.setState(0xbd6d, 0xed5e, 0xede0, 0x3c4d, 0x173b, 0x8c60, 0x1, 0x0);
        gbc.writeMem(0xbd6d, { 0xc4, 0xf9, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xed5e);
        EXPECT(gbc.pc(), 0xbd70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6d), 0xc4);
        EXPECT(gbc.readMem(0xbd6e), 0xf9);
        EXPECT(gbc.readMem(0xbd6f), 0xeb);
        // C4 0266
        gbc.setState(0x2ec2, 0xc732, 0xcee0, 0x4076, 0x69dd, 0x4ec6, 0x0, 0x1);
        gbc.writeMem(0x2ec2, { 0xc4, 0x1d, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc732);
        EXPECT(gbc.pc(), 0x2ec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0268
        gbc.setState(0x4271, 0x928, 0xf2f0, 0x6639, 0x9672, 0x3635, 0x0, 0x0);
        gbc.writeMem(0x4271, { 0xc4, 0x12, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x928);
        EXPECT(gbc.pc(), 0x4274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0269
        gbc.setState(0xc9b5, 0x3e63, 0xbec0, 0xa0fc, 0x5f8d, 0x11a5, 0x0, 0x1);
        gbc.writeMem(0xc9b5, { 0xc4, 0xb9, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3e63);
        EXPECT(gbc.pc(), 0xc9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b5), 0xc4);
        EXPECT(gbc.readMem(0xc9b6), 0xb9);
        EXPECT(gbc.readMem(0xc9b7), 0x65);
        // C4 026A
        gbc.setState(0xb610, 0xed43, 0xb8b0, 0x2273, 0x482, 0xe1c9, 0x1, 0x0);
        gbc.writeMem(0xb610, { 0xc4, 0xe4, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xed43);
        EXPECT(gbc.pc(), 0xb613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb610), 0xc4);
        EXPECT(gbc.readMem(0xb611), 0xe4);
        EXPECT(gbc.readMem(0xb612), 0xe7);
        // C4 026C
        gbc.setState(0xd325, 0xd975, 0xe580, 0x5efe, 0xb5f5, 0xdc7f, 0x0, 0x0);
        gbc.writeMem(0xd325, { 0xc4, 0xad, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd975);
        EXPECT(gbc.pc(), 0xd328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd325), 0xc4);
        EXPECT(gbc.readMem(0xd326), 0xad);
        EXPECT(gbc.readMem(0xd327), 0xd6);
        // C4 026D
        gbc.setState(0x1cbc, 0x3924, 0x64a0, 0x961b, 0xbacf, 0x9991, 0x0, 0x0);
        gbc.writeMem(0x1cbc, { 0xc4, 0xc6, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3924);
        EXPECT(gbc.pc(), 0x1cbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 026E
        gbc.setState(0x5fcb, 0x6ede, 0x92a0, 0xa6d, 0x4c82, 0x801e, 0x0, 0x1);
        gbc.writeMem(0x5fcb, { 0xc4, 0x3b, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6ede);
        EXPECT(gbc.pc(), 0x5fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0270
        gbc.setState(0xb1f9, 0x8364, 0x6a50, 0x2c2f, 0xe03, 0xa4e8, 0x0, 0x0);
        gbc.writeMem(0x8362, { 0x0, 0x0 });
        gbc.writeMem(0xb1f9, { 0xc4, 0x49, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8362);
        EXPECT(gbc.pc(), 0x3049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8362), 0xfc);
        EXPECT(gbc.readMem(0x8363), 0xb1);
        EXPECT(gbc.readMem(0xb1f9), 0xc4);
        EXPECT(gbc.readMem(0xb1fa), 0x49);
        EXPECT(gbc.readMem(0xb1fb), 0x30);
        // C4 0271
        gbc.setState(0xe785, 0x4d4d, 0xa7e0, 0x5bea, 0xd2ca, 0xa260, 0x0, 0x0);
        gbc.writeMem(0xe785, { 0xc4, 0x30, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4d4d);
        EXPECT(gbc.pc(), 0xe788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe785), 0xc4);
        EXPECT(gbc.readMem(0xe786), 0x30);
        EXPECT(gbc.readMem(0xe787), 0x8e);
        // C4 0273
        gbc.setState(0x4554, 0xbf65, 0x7300, 0xbad5, 0xee01, 0xc7e2, 0x1, 0x0);
        gbc.writeMem(0x4554, { 0xc4, 0x55, 0xcf });
        gbc.writeMem(0xbf63, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xbf63);
        EXPECT(gbc.pc(), 0xcf55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf63), 0x57);
        EXPECT(gbc.readMem(0xbf64), 0x45);
        // C4 0274
        gbc.setState(0xc6c5, 0xd144, 0x96f0, 0xf110, 0x2132, 0x7633, 0x1, 0x1);
        gbc.writeMem(0xc6c5, { 0xc4, 0x35, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd144);
        EXPECT(gbc.pc(), 0xc6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6c5), 0xc4);
        EXPECT(gbc.readMem(0xc6c6), 0x35);
        EXPECT(gbc.readMem(0xc6c7), 0x14);
        // C4 0276
        gbc.setState(0x94fd, 0x1ced, 0x36c0, 0xc018, 0x9058, 0x3c9d, 0x1, 0x0);
        gbc.writeMem(0x94fd, { 0xc4, 0xe3, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1ced);
        EXPECT(gbc.pc(), 0x9500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94fd), 0xc4);
        EXPECT(gbc.readMem(0x94fe), 0xe3);
        EXPECT(gbc.readMem(0x94ff), 0x8);
        // C4 0277
        gbc.setState(0xb9e, 0xd68c, 0xbc20, 0x9838, 0xfee, 0xc926, 0x0, 0x0);
        gbc.writeMem(0xb9e, { 0xc4, 0x71, 0x72 });
        gbc.writeMem(0xd68a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd68a);
        EXPECT(gbc.pc(), 0x7271);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd68a), 0xa1);
        EXPECT(gbc.readMem(0xd68b), 0xb);
        // C4 0278
        gbc.setState(0x9523, 0xd255, 0x6360, 0x2591, 0x51d2, 0x6dbc, 0x0, 0x1);
        gbc.writeMem(0x9523, { 0xc4, 0xeb, 0x43 });
        gbc.writeMem(0xd253, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd253);
        EXPECT(gbc.pc(), 0x43eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9523), 0xc4);
        EXPECT(gbc.readMem(0x9524), 0xeb);
        EXPECT(gbc.readMem(0x9525), 0x43);
        EXPECT(gbc.readMem(0xd253), 0x26);
        EXPECT(gbc.readMem(0xd254), 0x95);
        // C4 027A
        gbc.setState(0x9b77, 0xbffd, 0x130, 0x5e32, 0x9007, 0xccd, 0x0, 0x1);
        gbc.writeMem(0x9b77, { 0xc4, 0x1e, 0x26 });
        gbc.writeMem(0xbffb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbffb);
        EXPECT(gbc.pc(), 0x261e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b77), 0xc4);
        EXPECT(gbc.readMem(0x9b78), 0x1e);
        EXPECT(gbc.readMem(0x9b79), 0x26);
        EXPECT(gbc.readMem(0xbffb), 0x7a);
        EXPECT(gbc.readMem(0xbffc), 0x9b);
        // C4 027B
        gbc.setState(0x2815, 0xb665, 0xc170, 0xadcf, 0xd5cd, 0x3d30, 0x1, 0x1);
        gbc.writeMem(0x2815, { 0xc4, 0x4c, 0xe8 });
        gbc.writeMem(0xb663, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb663);
        EXPECT(gbc.pc(), 0xe84c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb663), 0x18);
        EXPECT(gbc.readMem(0xb664), 0x28);
        // C4 027D
        gbc.setState(0xec09, 0x9607, 0xae90, 0xa8c5, 0x1f09, 0xf2e9, 0x1, 0x0);
        gbc.writeMem(0xec09, { 0xc4, 0x10, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9607);
        EXPECT(gbc.pc(), 0xec0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec09), 0xc4);
        EXPECT(gbc.readMem(0xec0a), 0x10);
        EXPECT(gbc.readMem(0xec0b), 0xd2);
        // C4 027F
        gbc.setState(0x777d, 0x541f, 0x40e0, 0x4c21, 0x7a76, 0x3489, 0x0, 0x1);
        gbc.writeMem(0x777d, { 0xc4, 0x57, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x541f);
        EXPECT(gbc.pc(), 0x7780);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0280
        gbc.setState(0x5ae6, 0x8ba2, 0xd6a0, 0x2c47, 0xb37b, 0xe50e, 0x1, 0x1);
        gbc.writeMem(0x5ae6, { 0xc4, 0xb0, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8ba2);
        EXPECT(gbc.pc(), 0x5ae9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0281
        gbc.setState(0x539a, 0x658c, 0xacf0, 0x5638, 0xdf0, 0x2633, 0x0, 0x1);
        gbc.writeMem(0x539a, { 0xc4, 0x6a, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x658c);
        EXPECT(gbc.pc(), 0x539d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0282
        gbc.setState(0x8d8f, 0xb97e, 0xae30, 0x62f7, 0x4f25, 0x8ca4, 0x0, 0x0);
        gbc.writeMem(0x8d8f, { 0xc4, 0xd7, 0x21 });
        gbc.writeMem(0xb97c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb97c);
        EXPECT(gbc.pc(), 0x21d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d8f), 0xc4);
        EXPECT(gbc.readMem(0x8d90), 0xd7);
        EXPECT(gbc.readMem(0x8d91), 0x21);
        EXPECT(gbc.readMem(0xb97c), 0x92);
        EXPECT(gbc.readMem(0xb97d), 0x8d);
        // C4 0284
        gbc.setState(0xdac0, 0xa750, 0xe300, 0xd94e, 0xaeec, 0xcf45, 0x1, 0x0);
        gbc.writeMem(0xa74e, { 0x0, 0x0 });
        gbc.writeMem(0xdac0, { 0xc4, 0x73, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa74e);
        EXPECT(gbc.pc(), 0x1d73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa74e), 0xc3);
        EXPECT(gbc.readMem(0xa74f), 0xda);
        EXPECT(gbc.readMem(0xdac0), 0xc4);
        EXPECT(gbc.readMem(0xdac1), 0x73);
        EXPECT(gbc.readMem(0xdac2), 0x1d);
        // C4 0285
        gbc.setState(0xd377, 0xac9b, 0x65c0, 0xd11c, 0x6445, 0x7f09, 0x0, 0x1);
        gbc.writeMem(0xd377, { 0xc4, 0x16, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xac9b);
        EXPECT(gbc.pc(), 0xd37a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd377), 0xc4);
        EXPECT(gbc.readMem(0xd378), 0x16);
        EXPECT(gbc.readMem(0xd379), 0x20);
        // C4 0286
        gbc.setState(0x2e7, 0x15bf, 0x3a80, 0x55cf, 0x8b3c, 0x83f4, 0x0, 0x1);
        gbc.writeMem(0x2e7, { 0xc4, 0x81, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x15bf);
        EXPECT(gbc.pc(), 0x2ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 028A
        gbc.setState(0xb4f8, 0xf3bd, 0x6930, 0xec50, 0x5ac2, 0x2f0a, 0x0, 0x0);
        gbc.writeMem(0xb4f8, { 0xc4, 0xa8, 0x3a });
        gbc.writeMem(0xf3bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf3bb);
        EXPECT(gbc.pc(), 0x3aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4f8), 0xc4);
        EXPECT(gbc.readMem(0xb4f9), 0xa8);
        EXPECT(gbc.readMem(0xb4fa), 0x3a);
        EXPECT(gbc.readMem(0xf3bb), 0xfb);
        EXPECT(gbc.readMem(0xf3bc), 0xb4);
        // C4 028B
        gbc.setState(0xe160, 0x5d59, 0x71b0, 0x2eea, 0x42b5, 0x8ce0, 0x0, 0x1);
        gbc.writeMem(0xe160, { 0xc4, 0xb7, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5d59);
        EXPECT(gbc.pc(), 0xe163);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe160), 0xc4);
        EXPECT(gbc.readMem(0xe161), 0xb7);
        EXPECT(gbc.readMem(0xe162), 0x2c);
        // C4 028C
        gbc.setState(0x57cf, 0xcc79, 0x9350, 0xfbfd, 0xfc16, 0xc833, 0x1, 0x1);
        gbc.writeMem(0x57cf, { 0xc4, 0x31, 0x67 });
        gbc.writeMem(0xcc77, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcc77);
        EXPECT(gbc.pc(), 0x6731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc77), 0xd2);
        EXPECT(gbc.readMem(0xcc78), 0x57);
        // C4 028D
        gbc.setState(0xc2e9, 0xe062, 0x1230, 0x5fae, 0xa5e9, 0xf4ff, 0x0, 0x0);
        gbc.writeMem(0xc2e9, { 0xc4, 0x52, 0xe7 });
        gbc.writeMem(0xe060, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe060);
        EXPECT(gbc.pc(), 0xe752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e9), 0xc4);
        EXPECT(gbc.readMem(0xc2ea), 0x52);
        EXPECT(gbc.readMem(0xc2eb), 0xe7);
        EXPECT(gbc.readMem(0xe060), 0xec);
        EXPECT(gbc.readMem(0xe061), 0xc2);
        // C4 028E
        gbc.setState(0x127b, 0x58ac, 0x26d0, 0x81f2, 0xcc58, 0x5789, 0x1, 0x1);
        gbc.writeMem(0x127b, { 0xc4, 0xa1, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x58ac);
        EXPECT(gbc.pc(), 0x127e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0290
        gbc.setState(0x949f, 0xa909, 0xf410, 0x589d, 0x880d, 0x8517, 0x0, 0x0);
        gbc.writeMem(0x949f, { 0xc4, 0x37, 0xe8 });
        gbc.writeMem(0xa907, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa907);
        EXPECT(gbc.pc(), 0xe837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949f), 0xc4);
        EXPECT(gbc.readMem(0x94a0), 0x37);
        EXPECT(gbc.readMem(0x94a1), 0xe8);
        EXPECT(gbc.readMem(0xa907), 0xa2);
        EXPECT(gbc.readMem(0xa908), 0x94);
        // C4 0291
        gbc.setState(0x831c, 0x1359, 0xd8f0, 0xd47f, 0x5477, 0x3138, 0x1, 0x0);
        gbc.writeMem(0x831c, { 0xc4, 0x21, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1359);
        EXPECT(gbc.pc(), 0x831f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x831c), 0xc4);
        EXPECT(gbc.readMem(0x831d), 0x21);
        EXPECT(gbc.readMem(0x831e), 0xd5);
        // C4 0292
        gbc.setState(0x399c, 0xdda3, 0x18d0, 0xee27, 0xb647, 0x2258, 0x1, 0x0);
        gbc.writeMem(0x399c, { 0xc4, 0x9e, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xdda3);
        EXPECT(gbc.pc(), 0x399f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0295
        gbc.setState(0x5cc4, 0xb089, 0x8d80, 0x1eed, 0x2dd4, 0x546a, 0x0, 0x0);
        gbc.writeMem(0x5cc4, { 0xc4, 0x77, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb089);
        EXPECT(gbc.pc(), 0x5cc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0297
        gbc.setState(0x4f5e, 0x4c34, 0xcab0, 0x9175, 0x18ff, 0x1203, 0x1, 0x1);
        gbc.writeMem(0x4f5e, { 0xc4, 0xc9, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4c34);
        EXPECT(gbc.pc(), 0x4f61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0298
        gbc.setState(0x1d1e, 0x975a, 0xdb20, 0x5650, 0x5902, 0x6f5a, 0x1, 0x0);
        gbc.writeMem(0x1d1e, { 0xc4, 0x6, 0xe0 });
        gbc.writeMem(0x9758, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9758);
        EXPECT(gbc.pc(), 0xe006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9758), 0x21);
        EXPECT(gbc.readMem(0x9759), 0x1d);
        // C4 0299
        gbc.setState(0x9bab, 0xd23a, 0x5de0, 0x9e16, 0x5c78, 0xfebd, 0x0, 0x0);
        gbc.writeMem(0x9bab, { 0xc4, 0xbe, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd23a);
        EXPECT(gbc.pc(), 0x9bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bab), 0xc4);
        EXPECT(gbc.readMem(0x9bac), 0xbe);
        EXPECT(gbc.readMem(0x9bad), 0x4a);
        // C4 029B
        gbc.setState(0xa027, 0x57eb, 0x31b0, 0xfcfd, 0xa2f5, 0xc15f, 0x0, 0x1);
        gbc.writeMem(0xa027, { 0xc4, 0xca, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x57eb);
        EXPECT(gbc.pc(), 0xa02a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa027), 0xc4);
        EXPECT(gbc.readMem(0xa028), 0xca);
        EXPECT(gbc.readMem(0xa029), 0xca);
        // C4 029D
        gbc.setState(0xc2b0, 0x883c, 0x2520, 0x1a, 0xe883, 0xce96, 0x1, 0x1);
        gbc.writeMem(0x883a, { 0x0, 0x0 });
        gbc.writeMem(0xc2b0, { 0xc4, 0xff, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x883a);
        EXPECT(gbc.pc(), 0x45ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x883a), 0xb3);
        EXPECT(gbc.readMem(0x883b), 0xc2);
        EXPECT(gbc.readMem(0xc2b0), 0xc4);
        EXPECT(gbc.readMem(0xc2b1), 0xff);
        EXPECT(gbc.readMem(0xc2b2), 0x45);
        // C4 029E
        gbc.setState(0x45ef, 0xd1ee, 0xe200, 0xce2e, 0x9f08, 0xee89, 0x1, 0x0);
        gbc.writeMem(0x45ef, { 0xc4, 0x0, 0x5a });
        gbc.writeMem(0xd1ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd1ec);
        EXPECT(gbc.pc(), 0x5a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ec), 0xf2);
        EXPECT(gbc.readMem(0xd1ed), 0x45);
        // C4 02A0
        gbc.setState(0xdd2c, 0xe4a5, 0xf530, 0x3aeb, 0x6ef4, 0x9bfc, 0x0, 0x1);
        gbc.writeMem(0xdd2c, { 0xc4, 0x35, 0x6a });
        gbc.writeMem(0xe4a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe4a3);
        EXPECT(gbc.pc(), 0x6a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd2c), 0xc4);
        EXPECT(gbc.readMem(0xdd2d), 0x35);
        EXPECT(gbc.readMem(0xdd2e), 0x6a);
        EXPECT(gbc.readMem(0xe4a3), 0x2f);
        EXPECT(gbc.readMem(0xe4a4), 0xdd);
        // C4 02A1
        gbc.setState(0x3eaa, 0xd0a7, 0x89d0, 0xebf0, 0xf424, 0xe2af, 0x1, 0x0);
        gbc.writeMem(0x3eaa, { 0xc4, 0x13, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd0a7);
        EXPECT(gbc.pc(), 0x3ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 02A2
        gbc.setState(0x598f, 0xb01b, 0x6d80, 0x7dd2, 0x9568, 0x992c, 0x0, 0x0);
        gbc.writeMem(0x598f, { 0xc4, 0x9f, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb01b);
        EXPECT(gbc.pc(), 0x5992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 02A5
        gbc.setState(0x561f, 0x7c71, 0xe9f0, 0x4b32, 0x6aa5, 0x8ed9, 0x0, 0x1);
        gbc.writeMem(0x561f, { 0xc4, 0x6b, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7c71);
        EXPECT(gbc.pc(), 0x5622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02A6
        gbc.setState(0x158b, 0x5b40, 0x3eb0, 0xc0c8, 0xe8e4, 0xad80, 0x1, 0x1);
        gbc.writeMem(0x158b, { 0xc4, 0xb8, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5b40);
        EXPECT(gbc.pc(), 0x158e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02A8
        gbc.setState(0x5860, 0x9816, 0x3ba0, 0x55d1, 0x1b31, 0xb020, 0x0, 0x1);
        gbc.writeMem(0x5860, { 0xc4, 0x78, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9816);
        EXPECT(gbc.pc(), 0x5863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02A9
        gbc.setState(0x6802, 0xc534, 0x2ee0, 0x7d25, 0x8efd, 0x12dd, 0x0, 0x1);
        gbc.writeMem(0x6802, { 0xc4, 0xce, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc534);
        EXPECT(gbc.pc(), 0x6805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02AA
        gbc.setState(0x612b, 0x9828, 0x6af0, 0x1642, 0x68fe, 0x2989, 0x0, 0x1);
        gbc.writeMem(0x612b, { 0xc4, 0xc5, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9828);
        EXPECT(gbc.pc(), 0x612e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02AB
        gbc.setState(0x3f5d, 0x9259, 0xd220, 0x5405, 0x1f28, 0x1dec, 0x0, 0x0);
        gbc.writeMem(0x3f5d, { 0xc4, 0xcc, 0x7d });
        gbc.writeMem(0x9257, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9257);
        EXPECT(gbc.pc(), 0x7dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9257), 0x60);
        EXPECT(gbc.readMem(0x9258), 0x3f);
        // C4 02AC
        gbc.setState(0xee0, 0x9936, 0x30c0, 0x979d, 0x532d, 0xd970, 0x1, 0x1);
        gbc.writeMem(0xee0, { 0xc4, 0xd5, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9936);
        EXPECT(gbc.pc(), 0xee3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 02AD
        gbc.setState(0x8784, 0x56f5, 0x73a0, 0x91e5, 0x9ab6, 0x4e00, 0x1, 0x0);
        gbc.writeMem(0x8784, { 0xc4, 0x42, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x56f5);
        EXPECT(gbc.pc(), 0x8787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8784), 0xc4);
        EXPECT(gbc.readMem(0x8785), 0x42);
        EXPECT(gbc.readMem(0x8786), 0x6e);
        // C4 02AE
        gbc.setState(0x35e5, 0x7424, 0xbc0, 0xa5b7, 0x1cd1, 0x44b, 0x1, 0x0);
        gbc.writeMem(0x35e5, { 0xc4, 0xc0, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7424);
        EXPECT(gbc.pc(), 0x35e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 02B0
        gbc.setState(0xea25, 0xe12f, 0xb420, 0xc510, 0x41bf, 0x32b4, 0x0, 0x1);
        gbc.writeMem(0xe12d, { 0x0, 0x0 });
        gbc.writeMem(0xea25, { 0xc4, 0x81, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe12d);
        EXPECT(gbc.pc(), 0x4381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe12d), 0x28);
        EXPECT(gbc.readMem(0xe12e), 0xea);
        EXPECT(gbc.readMem(0xea25), 0xc4);
        EXPECT(gbc.readMem(0xea26), 0x81);
        EXPECT(gbc.readMem(0xea27), 0x43);
        // C4 02B1
        gbc.setState(0x94bf, 0xfe5e, 0x66d0, 0xc73, 0xfb3e, 0xcaee, 0x0, 0x1);
        gbc.writeMem(0x94bf, { 0xc4, 0x20, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfe5e);
        EXPECT(gbc.pc(), 0x94c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94bf), 0xc4);
        EXPECT(gbc.readMem(0x94c0), 0x20);
        EXPECT(gbc.readMem(0x94c1), 0xfd);
        // C4 02B2
        gbc.setState(0x6fbe, 0x1f6e, 0xcab0, 0x2e9a, 0x6c93, 0xe2ab, 0x0, 0x0);
        gbc.writeMem(0x6fbe, { 0xc4, 0x3b, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1f6e);
        EXPECT(gbc.pc(), 0x6fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02B3
        gbc.setState(0x2159, 0x84fc, 0x43f0, 0x917e, 0xdabb, 0xf2cf, 0x1, 0x0);
        gbc.writeMem(0x2159, { 0xc4, 0x3c, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x84fc);
        EXPECT(gbc.pc(), 0x215c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02B5
        gbc.setState(0xcf85, 0xbd95, 0xe2b0, 0x620d, 0x7ef, 0x984b, 0x1, 0x1);
        gbc.writeMem(0xcf85, { 0xc4, 0x2f, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbd95);
        EXPECT(gbc.pc(), 0xcf88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf85), 0xc4);
        EXPECT(gbc.readMem(0xcf86), 0x2f);
        EXPECT(gbc.readMem(0xcf87), 0x58);
        // C4 02B6
        gbc.setState(0x2778, 0x6770, 0xe580, 0x2f2a, 0xaa11, 0xa31a, 0x0, 0x1);
        gbc.writeMem(0x2778, { 0xc4, 0x80, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6770);
        EXPECT(gbc.pc(), 0x277b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 02B7
        gbc.setState(0x28a3, 0xe65, 0x60a0, 0x6918, 0xb50e, 0x394b, 0x1, 0x1);
        gbc.writeMem(0x28a3, { 0xc4, 0x54, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe65);
        EXPECT(gbc.pc(), 0x28a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02B8
        gbc.setState(0xafca, 0xe323, 0x9c40, 0xd204, 0x660, 0x985f, 0x0, 0x1);
        gbc.writeMem(0xafca, { 0xc4, 0x1b, 0x67 });
        gbc.writeMem(0xe321, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe321);
        EXPECT(gbc.pc(), 0x671b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafca), 0xc4);
        EXPECT(gbc.readMem(0xafcb), 0x1b);
        EXPECT(gbc.readMem(0xafcc), 0x67);
        EXPECT(gbc.readMem(0xe321), 0xcd);
        EXPECT(gbc.readMem(0xe322), 0xaf);
        // C4 02B9
        gbc.setState(0xcb84, 0xd0bc, 0x1f40, 0xc546, 0x8444, 0x78, 0x0, 0x1);
        gbc.writeMem(0xcb84, { 0xc4, 0xf0, 0x59 });
        gbc.writeMem(0xd0ba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd0ba);
        EXPECT(gbc.pc(), 0x59f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb84), 0xc4);
        EXPECT(gbc.readMem(0xcb85), 0xf0);
        EXPECT(gbc.readMem(0xcb86), 0x59);
        EXPECT(gbc.readMem(0xd0ba), 0x87);
        EXPECT(gbc.readMem(0xd0bb), 0xcb);
        // C4 02BA
        gbc.setState(0xe299, 0x9bef, 0xe3f0, 0xd9db, 0x865, 0x5342, 0x0, 0x0);
        gbc.writeMem(0xe299, { 0xc4, 0xc6, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9bef);
        EXPECT(gbc.pc(), 0xe29c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe299), 0xc4);
        EXPECT(gbc.readMem(0xe29a), 0xc6);
        EXPECT(gbc.readMem(0xe29b), 0x77);
        // C4 02BD
        gbc.setState(0x19fb, 0x372, 0x5dc0, 0x68ce, 0x2cfc, 0x7680, 0x0, 0x1);
        gbc.writeMem(0x19fb, { 0xc4, 0x87, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x372);
        EXPECT(gbc.pc(), 0x19fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 02BF
        gbc.setState(0x9c9, 0xa904, 0x82d0, 0xe21, 0xada9, 0xb6fc, 0x1, 0x0);
        gbc.writeMem(0x9c9, { 0xc4, 0xff, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa904);
        EXPECT(gbc.pc(), 0x9cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 02C0
        gbc.setState(0xf2a, 0x6a39, 0x45d0, 0xba9b, 0x4deb, 0x75b5, 0x0, 0x0);
        gbc.writeMem(0xf2a, { 0xc4, 0x9c, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6a39);
        EXPECT(gbc.pc(), 0xf2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 02C1
        gbc.setState(0x386b, 0xdd0f, 0x8370, 0xedf3, 0xd239, 0xf6e9, 0x1, 0x0);
        gbc.writeMem(0x386b, { 0xc4, 0x8e, 0xaf });
        gbc.writeMem(0xdd0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xdd0d);
        EXPECT(gbc.pc(), 0xaf8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd0d), 0x6e);
        EXPECT(gbc.readMem(0xdd0e), 0x38);
        // C4 02C2
        gbc.setState(0xa468, 0xdaa2, 0xd4f0, 0xd215, 0x7e9, 0xfb2f, 0x1, 0x0);
        gbc.writeMem(0xa468, { 0xc4, 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xdaa2);
        EXPECT(gbc.pc(), 0xa46b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa468), 0xc4);
        EXPECT(gbc.readMem(0xa469), 0x18);
        EXPECT(gbc.readMem(0xa46a), 0x70);
        // C4 02C7
        gbc.setState(0x5629, 0xb598, 0x2580, 0x4dd6, 0xe03e, 0xaa80, 0x1, 0x1);
        gbc.writeMem(0x5629, { 0xc4, 0x4a, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb598);
        EXPECT(gbc.pc(), 0x562c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 02C8
        gbc.setState(0xa88c, 0x5b63, 0xb3f0, 0x8e7, 0x2a49, 0x44d2, 0x0, 0x1);
        gbc.writeMem(0xa88c, { 0xc4, 0xbd, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5b63);
        EXPECT(gbc.pc(), 0xa88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa88c), 0xc4);
        EXPECT(gbc.readMem(0xa88d), 0xbd);
        EXPECT(gbc.readMem(0xa88e), 0x46);
        // C4 02C9
        gbc.setState(0x8354, 0xdabb, 0xc7d0, 0x9e0e, 0x56df, 0xd590, 0x1, 0x0);
        gbc.writeMem(0x8354, { 0xc4, 0x89, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdabb);
        EXPECT(gbc.pc(), 0x8357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8354), 0xc4);
        EXPECT(gbc.readMem(0x8355), 0x89);
        EXPECT(gbc.readMem(0x8356), 0x12);
        // C4 02CA
        gbc.setState(0x8869, 0x7124, 0xe8a0, 0x6a34, 0x625f, 0xcee1, 0x0, 0x1);
        gbc.writeMem(0x8869, { 0xc4, 0xe9, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7124);
        EXPECT(gbc.pc(), 0x886c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8869), 0xc4);
        EXPECT(gbc.readMem(0x886a), 0xe9);
        EXPECT(gbc.readMem(0x886b), 0xcd);
        // C4 02CB
        gbc.setState(0xefa1, 0x3457, 0xed90, 0x41d2, 0xe6a1, 0xbb1d, 0x0, 0x0);
        gbc.writeMem(0xefa1, { 0xc4, 0xbe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3457);
        EXPECT(gbc.pc(), 0xefa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefa1), 0xc4);
        EXPECT(gbc.readMem(0xefa2), 0xbe);
        EXPECT(gbc.readMem(0xefa3), 0x38);
        // C4 02CF
        gbc.setState(0x90bc, 0xba41, 0xc570, 0x9479, 0xc4ed, 0xcca6, 0x0, 0x1);
        gbc.writeMem(0x90bc, { 0xc4, 0xa, 0xa8 });
        gbc.writeMem(0xba3f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xba3f);
        EXPECT(gbc.pc(), 0xa80a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90bc), 0xc4);
        EXPECT(gbc.readMem(0x90bd), 0xa);
        EXPECT(gbc.readMem(0x90be), 0xa8);
        EXPECT(gbc.readMem(0xba3f), 0xbf);
        EXPECT(gbc.readMem(0xba40), 0x90);
        // C4 02D0
        gbc.setState(0x3944, 0x8e96, 0x1240, 0xf85f, 0xd4f8, 0x5460, 0x1, 0x1);
        gbc.writeMem(0x3944, { 0xc4, 0x9f, 0x47 });
        gbc.writeMem(0x8e94, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8e94);
        EXPECT(gbc.pc(), 0x479f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e94), 0x47);
        EXPECT(gbc.readMem(0x8e95), 0x39);
        // C4 02D1
        gbc.setState(0x5079, 0x6ce2, 0x21f0, 0x6112, 0xa41b, 0xd3bd, 0x1, 0x1);
        gbc.writeMem(0x5079, { 0xc4, 0xa4, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6ce2);
        EXPECT(gbc.pc(), 0x507c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02D2
        gbc.setState(0xe191, 0x169a, 0xd3d0, 0xda9a, 0x57e0, 0xe905, 0x1, 0x1);
        gbc.writeMem(0xe191, { 0xc4, 0x0, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x169a);
        EXPECT(gbc.pc(), 0xe194);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe191), 0xc4);
        EXPECT(gbc.readMem(0xe192), 0x0);
        EXPECT(gbc.readMem(0xe193), 0x48);
        // C4 02D3
        gbc.setState(0x3b0c, 0xae06, 0x7e50, 0x8500, 0xfa23, 0x344d, 0x1, 0x0);
        gbc.writeMem(0x3b0c, { 0xc4, 0xbc, 0x70 });
        gbc.writeMem(0xae04, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xae04);
        EXPECT(gbc.pc(), 0x70bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae04), 0xf);
        EXPECT(gbc.readMem(0xae05), 0x3b);
        // C4 02D4
        gbc.setState(0x8bed, 0xad39, 0x8970, 0x5fbb, 0x80ed, 0xe3d1, 0x1, 0x0);
        gbc.writeMem(0x8bed, { 0xc4, 0x26, 0x9f });
        gbc.writeMem(0xad37, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xad37);
        EXPECT(gbc.pc(), 0x9f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bed), 0xc4);
        EXPECT(gbc.readMem(0x8bee), 0x26);
        EXPECT(gbc.readMem(0x8bef), 0x9f);
        EXPECT(gbc.readMem(0xad37), 0xf0);
        EXPECT(gbc.readMem(0xad38), 0x8b);
        // C4 02D5
        gbc.setState(0x43be, 0xbbc4, 0x4a0, 0x35b, 0xd8d, 0x78b6, 0x0, 0x1);
        gbc.writeMem(0x43be, { 0xc4, 0x39, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbbc4);
        EXPECT(gbc.pc(), 0x43c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02D6
        gbc.setState(0x7623, 0xa6aa, 0x3970, 0x6c2a, 0xece7, 0xb261, 0x1, 0x0);
        gbc.writeMem(0x7623, { 0xc4, 0x5a, 0x39 });
        gbc.writeMem(0xa6a8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa6a8);
        EXPECT(gbc.pc(), 0x395a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a8), 0x26);
        EXPECT(gbc.readMem(0xa6a9), 0x76);
        // C4 02D7
        gbc.setState(0xbc3, 0xa86a, 0x5fe0, 0xe99f, 0x2364, 0xc936, 0x1, 0x0);
        gbc.writeMem(0xbc3, { 0xc4, 0xe6, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa86a);
        EXPECT(gbc.pc(), 0xbc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02D8
        gbc.setState(0x9ade, 0x8b04, 0x6960, 0xdf08, 0x9e4d, 0x7497, 0x1, 0x1);
        gbc.writeMem(0x8b02, { 0x0, 0x0 });
        gbc.writeMem(0x9ade, { 0xc4, 0xc9, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x8b02);
        EXPECT(gbc.pc(), 0x9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b02), 0xe1);
        EXPECT(gbc.readMem(0x8b03), 0x9a);
        EXPECT(gbc.readMem(0x9ade), 0xc4);
        EXPECT(gbc.readMem(0x9adf), 0xc9);
        EXPECT(gbc.readMem(0x9ae0), 0x9);
        // C4 02DA
        gbc.setState(0x4098, 0xef5c, 0xf800, 0x4977, 0x8674, 0x263a, 0x1, 0x1);
        gbc.writeMem(0x4098, { 0xc4, 0xf6, 0x78 });
        gbc.writeMem(0xef5a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xef5a);
        EXPECT(gbc.pc(), 0x78f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef5a), 0x9b);
        EXPECT(gbc.readMem(0xef5b), 0x40);
        // C4 02DE
        gbc.setState(0x7a71, 0xc639, 0xf9e0, 0x40f7, 0xa7b5, 0xe9c0, 0x1, 0x0);
        gbc.writeMem(0x7a71, { 0xc4, 0x54, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc639);
        EXPECT(gbc.pc(), 0x7a74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02DF
        gbc.setState(0x6750, 0x8a55, 0xd4f0, 0xa9f, 0xed3, 0x862d, 0x0, 0x1);
        gbc.writeMem(0x6750, { 0xc4, 0xd2, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8a55);
        EXPECT(gbc.pc(), 0x6753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02E1
        gbc.setState(0xc40e, 0x6294, 0xe8d0, 0xb1b3, 0xfa4e, 0x940f, 0x1, 0x0);
        gbc.writeMem(0xc40e, { 0xc4, 0x71, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6294);
        EXPECT(gbc.pc(), 0xc411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc40e), 0xc4);
        EXPECT(gbc.readMem(0xc40f), 0x71);
        EXPECT(gbc.readMem(0xc410), 0xf0);
        // C4 02E2
        gbc.setState(0x575e, 0xb6ce, 0xe750, 0xdb5f, 0x8352, 0x4b75, 0x1, 0x1);
        gbc.writeMem(0x575e, { 0xc4, 0xd0, 0xa6 });
        gbc.writeMem(0xb6cc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb6cc);
        EXPECT(gbc.pc(), 0xa6d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6cc), 0x61);
        EXPECT(gbc.readMem(0xb6cd), 0x57);
        // C4 02E3
        gbc.setState(0x98e5, 0xf93f, 0xe9f0, 0xb8a, 0xdb16, 0xad4, 0x1, 0x0);
        gbc.writeMem(0x98e5, { 0xc4, 0x77, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf93f);
        EXPECT(gbc.pc(), 0x98e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e5), 0xc4);
        EXPECT(gbc.readMem(0x98e6), 0x77);
        EXPECT(gbc.readMem(0x98e7), 0xbd);
        // C4 02E6
        gbc.setState(0xc5d6, 0x12f0, 0xcb90, 0x1bc6, 0xaa4c, 0x2c6d, 0x0, 0x0);
        gbc.writeMem(0xc5d6, { 0xc4, 0x18, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x12f0);
        EXPECT(gbc.pc(), 0xc5d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d6), 0xc4);
        EXPECT(gbc.readMem(0xc5d7), 0x18);
        EXPECT(gbc.readMem(0xc5d8), 0xdb);
        // C4 02E7
        gbc.setState(0x5c33, 0x323a, 0x1080, 0x2bfe, 0x6af5, 0x58c9, 0x1, 0x0);
        gbc.writeMem(0x5c33, { 0xc4, 0x54, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x323a);
        EXPECT(gbc.pc(), 0x5c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 02E8
        gbc.setState(0x4c56, 0xf832, 0x8dd0, 0xf939, 0x70d1, 0x294c, 0x0, 0x0);
        gbc.writeMem(0x4c56, { 0xc4, 0x2f, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf832);
        EXPECT(gbc.pc(), 0x4c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 02E9
        gbc.setState(0x8df4, 0xeafe, 0x5530, 0xc823, 0xcaaf, 0x9d8d, 0x0, 0x0);
        gbc.writeMem(0x8df4, { 0xc4, 0xa6, 0xec });
        gbc.writeMem(0xeafc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xeafc);
        EXPECT(gbc.pc(), 0xeca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df4), 0xc4);
        EXPECT(gbc.readMem(0x8df5), 0xa6);
        EXPECT(gbc.readMem(0x8df6), 0xec);
        EXPECT(gbc.readMem(0xeafc), 0xf7);
        EXPECT(gbc.readMem(0xeafd), 0x8d);
        // C4 02EA
        gbc.setState(0xa2f0, 0xcb5d, 0xe950, 0xb8c0, 0xf809, 0xce80, 0x1, 0x1);
        gbc.writeMem(0xa2f0, { 0xc4, 0xd6, 0x42 });
        gbc.writeMem(0xcb5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xcb5b);
        EXPECT(gbc.pc(), 0x42d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f0), 0xc4);
        EXPECT(gbc.readMem(0xa2f1), 0xd6);
        EXPECT(gbc.readMem(0xa2f2), 0x42);
        EXPECT(gbc.readMem(0xcb5b), 0xf3);
        EXPECT(gbc.readMem(0xcb5c), 0xa2);
        // C4 02EB
        gbc.setState(0xc440, 0x8cb9, 0x4d40, 0xaf78, 0xaa24, 0xb87e, 0x1, 0x1);
        gbc.writeMem(0x8cb7, { 0x0, 0x0 });
        gbc.writeMem(0xc440, { 0xc4, 0xe8, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8cb7);
        EXPECT(gbc.pc(), 0xdae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cb7), 0x43);
        EXPECT(gbc.readMem(0x8cb8), 0xc4);
        EXPECT(gbc.readMem(0xc440), 0xc4);
        EXPECT(gbc.readMem(0xc441), 0xe8);
        EXPECT(gbc.readMem(0xc442), 0xda);
        // C4 02EC
        gbc.setState(0x53fc, 0x6dea, 0x85b0, 0x4d68, 0x39cb, 0xc168, 0x0, 0x1);
        gbc.writeMem(0x53fc, { 0xc4, 0x23, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6dea);
        EXPECT(gbc.pc(), 0x53ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02ED
        gbc.setState(0x919a, 0xd5aa, 0xf480, 0x75cd, 0x463, 0x475, 0x0, 0x0);
        gbc.writeMem(0x919a, { 0xc4, 0x5d, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd5aa);
        EXPECT(gbc.pc(), 0x919d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x919a), 0xc4);
        EXPECT(gbc.readMem(0x919b), 0x5d);
        EXPECT(gbc.readMem(0x919c), 0x52);
        // C4 02EE
        gbc.setState(0x5246, 0xcf20, 0x2ed0, 0xde97, 0xcf7, 0xb7da, 0x0, 0x1);
        gbc.writeMem(0x5246, { 0xc4, 0x99, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xcf20);
        EXPECT(gbc.pc(), 0x5249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 02F1
        gbc.setState(0x5cd8, 0xd5f, 0x24f0, 0xfa54, 0x4873, 0x46aa, 0x1, 0x1);
        gbc.writeMem(0x5cd8, { 0xc4, 0xd0, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd5f);
        EXPECT(gbc.pc(), 0x5cdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 02F3
        gbc.setState(0x72aa, 0xa751, 0xcf50, 0x561c, 0xf1fd, 0x12bd, 0x0, 0x0);
        gbc.writeMem(0x72aa, { 0xc4, 0x95, 0x2d });
        gbc.writeMem(0xa74f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa74f);
        EXPECT(gbc.pc(), 0x2d95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa74f), 0xad);
        EXPECT(gbc.readMem(0xa750), 0x72);
        // C4 02F4
        gbc.setState(0x2691, 0x12b8, 0x42e0, 0x67a9, 0xcfc3, 0x8597, 0x0, 0x0);
        gbc.writeMem(0x2691, { 0xc4, 0xa2, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x12b8);
        EXPECT(gbc.pc(), 0x2694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02F5
        gbc.setState(0xa242, 0xaa42, 0xa9e0, 0x2de9, 0x2af2, 0xd639, 0x0, 0x0);
        gbc.writeMem(0xa242, { 0xc4, 0xee, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xaa42);
        EXPECT(gbc.pc(), 0xa245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa242), 0xc4);
        EXPECT(gbc.readMem(0xa243), 0xee);
        EXPECT(gbc.readMem(0xa244), 0xf9);
        // C4 02F6
        gbc.setState(0x842c, 0x688a, 0xf7f0, 0xefa9, 0x1d2d, 0x3ff4, 0x0, 0x0);
        gbc.writeMem(0x842c, { 0xc4, 0xa, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x688a);
        EXPECT(gbc.pc(), 0x842f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x842c), 0xc4);
        EXPECT(gbc.readMem(0x842d), 0xa);
        EXPECT(gbc.readMem(0x842e), 0xd4);
        // C4 02F7
        gbc.setState(0x7e1e, 0x91fd, 0x1b30, 0x4a72, 0x3236, 0xd558, 0x1, 0x1);
        gbc.writeMem(0x7e1e, { 0xc4, 0xf7, 0xbf });
        gbc.writeMem(0x91fb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x91fb);
        EXPECT(gbc.pc(), 0xbff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91fb), 0x21);
        EXPECT(gbc.readMem(0x91fc), 0x7e);
        // C4 02F8
        gbc.setState(0xa322, 0xf5a0, 0xac00, 0x7cf3, 0x4aff, 0x600d, 0x1, 0x1);
        gbc.writeMem(0xa322, { 0xc4, 0x57, 0x2f });
        gbc.writeMem(0xf59e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf59e);
        EXPECT(gbc.pc(), 0x2f57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa322), 0xc4);
        EXPECT(gbc.readMem(0xa323), 0x57);
        EXPECT(gbc.readMem(0xa324), 0x2f);
        EXPECT(gbc.readMem(0xf59e), 0x25);
        EXPECT(gbc.readMem(0xf59f), 0xa3);
        // C4 02F9
        gbc.setState(0xba78, 0xcd60, 0x5e70, 0x9a6d, 0x4501, 0x8fc3, 0x0, 0x1);
        gbc.writeMem(0xba78, { 0xc4, 0x4c, 0xe0 });
        gbc.writeMem(0xcd5e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xcd5e);
        EXPECT(gbc.pc(), 0xe04c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba78), 0xc4);
        EXPECT(gbc.readMem(0xba79), 0x4c);
        EXPECT(gbc.readMem(0xba7a), 0xe0);
        EXPECT(gbc.readMem(0xcd5e), 0x7b);
        EXPECT(gbc.readMem(0xcd5f), 0xba);
        // C4 02FB
        gbc.setState(0x308a, 0xa74d, 0xc330, 0x45d4, 0x3e17, 0xf395, 0x0, 0x0);
        gbc.writeMem(0x308a, { 0xc4, 0x39, 0xbf });
        gbc.writeMem(0xa74b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa74b);
        EXPECT(gbc.pc(), 0xbf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa74b), 0x8d);
        EXPECT(gbc.readMem(0xa74c), 0x30);
        // C4 02FC
        gbc.setState(0x8f05, 0xcaed, 0x60c0, 0x152c, 0xae07, 0xfafe, 0x1, 0x0);
        gbc.writeMem(0x8f05, { 0xc4, 0xb4, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xcaed);
        EXPECT(gbc.pc(), 0x8f08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f05), 0xc4);
        EXPECT(gbc.readMem(0x8f06), 0xb4);
        EXPECT(gbc.readMem(0x8f07), 0xc1);
        // C4 02FD
        gbc.setState(0xd9ab, 0xb6a8, 0x3f80, 0xdba4, 0xaa15, 0xa00f, 0x1, 0x0);
        gbc.writeMem(0xd9ab, { 0xc4, 0x4a, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb6a8);
        EXPECT(gbc.pc(), 0xd9ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9ab), 0xc4);
        EXPECT(gbc.readMem(0xd9ac), 0x4a);
        EXPECT(gbc.readMem(0xd9ad), 0x8);
        // C4 02FE
        gbc.setState(0x4453, 0x7f15, 0x75e0, 0xf0be, 0x16c4, 0xbd08, 0x1, 0x0);
        gbc.writeMem(0x4453, { 0xc4, 0x3b, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7f15);
        EXPECT(gbc.pc(), 0x4456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 02FF
        gbc.setState(0x5c70, 0x79b7, 0x81e0, 0x2171, 0xb2c1, 0x905e, 0x0, 0x1);
        gbc.writeMem(0x5c70, { 0xc4, 0xc2, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x79b7);
        EXPECT(gbc.pc(), 0x5c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0300
        gbc.setState(0x1c7c, 0xf506, 0x2b0, 0xf7f9, 0xdf88, 0xfc65, 0x1, 0x1);
        gbc.writeMem(0x1c7c, { 0xc4, 0x22, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf506);
        EXPECT(gbc.pc(), 0x1c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0302
        gbc.setState(0x9139, 0x4bb, 0xac80, 0x279c, 0x5c5e, 0xf5f, 0x1, 0x0);
        gbc.writeMem(0x9139, { 0xc4, 0xf1, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4bb);
        EXPECT(gbc.pc(), 0x913c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9139), 0xc4);
        EXPECT(gbc.readMem(0x913a), 0xf1);
        EXPECT(gbc.readMem(0x913b), 0xee);
        // C4 0303
        gbc.setState(0x5de0, 0x49c8, 0xaaa0, 0x8706, 0x8aaa, 0xa6c7, 0x0, 0x0);
        gbc.writeMem(0x5de0, { 0xc4, 0x7b, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x49c8);
        EXPECT(gbc.pc(), 0x5de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0304
        gbc.setState(0x6c1f, 0xf819, 0x6360, 0x3530, 0xa286, 0xc5e6, 0x1, 0x1);
        gbc.writeMem(0x6c1f, { 0xc4, 0x9c, 0x1c });
        gbc.writeMem(0xf817, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf817);
        EXPECT(gbc.pc(), 0x1c9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf817), 0x22);
        EXPECT(gbc.readMem(0xf818), 0x6c);
        // C4 0306
        gbc.setState(0x3554, 0xaca2, 0xd740, 0xff03, 0xc44c, 0x5ba, 0x0, 0x0);
        gbc.writeMem(0x3554, { 0xc4, 0xc5, 0xab });
        gbc.writeMem(0xaca0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xaca0);
        EXPECT(gbc.pc(), 0xabc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca0), 0x57);
        EXPECT(gbc.readMem(0xaca1), 0x35);
        // C4 0307
        gbc.setState(0xf62, 0x2d42, 0x86c0, 0xc80b, 0x1c3, 0xe15d, 0x1, 0x1);
        gbc.writeMem(0xf62, { 0xc4, 0xc2, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2d42);
        EXPECT(gbc.pc(), 0xf65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 030A
        gbc.setState(0x99ef, 0xef35, 0xc930, 0x404e, 0xce3, 0xb79d, 0x0, 0x1);
        gbc.writeMem(0x99ef, { 0xc4, 0x90, 0x74 });
        gbc.writeMem(0xef33, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xef33);
        EXPECT(gbc.pc(), 0x7490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99ef), 0xc4);
        EXPECT(gbc.readMem(0x99f0), 0x90);
        EXPECT(gbc.readMem(0x99f1), 0x74);
        EXPECT(gbc.readMem(0xef33), 0xf2);
        EXPECT(gbc.readMem(0xef34), 0x99);
        // C4 030B
        gbc.setState(0xe9f1, 0xa614, 0x22c0, 0x6998, 0x7bbd, 0x67ca, 0x1, 0x1);
        gbc.writeMem(0xe9f1, { 0xc4, 0x97, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa614);
        EXPECT(gbc.pc(), 0xe9f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f1), 0xc4);
        EXPECT(gbc.readMem(0xe9f2), 0x97);
        EXPECT(gbc.readMem(0xe9f3), 0x8f);
        // C4 030C
        gbc.setState(0x662c, 0x1d24, 0xbda0, 0x4149, 0xb43c, 0xf8a6, 0x1, 0x1);
        gbc.writeMem(0x662c, { 0xc4, 0xa, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1d24);
        EXPECT(gbc.pc(), 0x662f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 030E
        gbc.setState(0x9b80, 0x234, 0xb090, 0xd140, 0x5bdc, 0x2cd8, 0x0, 0x1);
        gbc.writeMem(0x9b80, { 0xc4, 0x96, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x234);
        EXPECT(gbc.pc(), 0x9b83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b80), 0xc4);
        EXPECT(gbc.readMem(0x9b81), 0x96);
        EXPECT(gbc.readMem(0x9b82), 0xe5);
        // C4 030F
        gbc.setState(0x4c39, 0x8299, 0xd680, 0xbed7, 0xc7d2, 0xce19, 0x0, 0x1);
        gbc.writeMem(0x4c39, { 0xc4, 0x53, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8299);
        EXPECT(gbc.pc(), 0x4c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0311
        gbc.setState(0xd840, 0xb4c9, 0x8da0, 0xda3b, 0x8296, 0x192b, 0x1, 0x1);
        gbc.writeMem(0xd840, { 0xc4, 0xc1, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb4c9);
        EXPECT(gbc.pc(), 0xd843);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd840), 0xc4);
        EXPECT(gbc.readMem(0xd841), 0xc1);
        EXPECT(gbc.readMem(0xd842), 0xc5);
        // C4 0312
        gbc.setState(0x9dff, 0x9899, 0x73c0, 0x5267, 0x420a, 0xe11c, 0x0, 0x0);
        gbc.writeMem(0x9dff, { 0xc4, 0x11, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9899);
        EXPECT(gbc.pc(), 0x9e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dff), 0xc4);
        EXPECT(gbc.readMem(0x9e00), 0x11);
        EXPECT(gbc.readMem(0x9e01), 0xd);
        // C4 0314
        gbc.setState(0x2a52, 0xcd48, 0x1d60, 0x1731, 0x4182, 0x4d69, 0x1, 0x0);
        gbc.writeMem(0x2a52, { 0xc4, 0x1c, 0x35 });
        gbc.writeMem(0xcd46, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcd46);
        EXPECT(gbc.pc(), 0x351c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd46), 0x55);
        EXPECT(gbc.readMem(0xcd47), 0x2a);
        // C4 0315
        gbc.setState(0x6a23, 0xc6af, 0x91c0, 0x2104, 0x11b1, 0xecbe, 0x1, 0x0);
        gbc.writeMem(0x6a23, { 0xc4, 0x66, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc6af);
        EXPECT(gbc.pc(), 0x6a26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0316
        gbc.setState(0x637f, 0xb7b4, 0xee00, 0x3139, 0xb1cb, 0xea78, 0x1, 0x0);
        gbc.writeMem(0x637f, { 0xc4, 0xb8, 0x7e });
        gbc.writeMem(0xb7b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb7b2);
        EXPECT(gbc.pc(), 0x7eb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b2), 0x82);
        EXPECT(gbc.readMem(0xb7b3), 0x63);
        // C4 0317
        gbc.setState(0xdd2a, 0xc779, 0x7e80, 0xf70b, 0x892, 0x116, 0x0, 0x0);
        gbc.writeMem(0xdd2a, { 0xc4, 0x82, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc779);
        EXPECT(gbc.pc(), 0xdd2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd2a), 0xc4);
        EXPECT(gbc.readMem(0xdd2b), 0x82);
        EXPECT(gbc.readMem(0xdd2c), 0xda);
        // C4 0319
        gbc.setState(0xb330, 0xd833, 0x8700, 0x5197, 0xda71, 0xaf14, 0x1, 0x0);
        gbc.writeMem(0xb330, { 0xc4, 0x9c, 0xad });
        gbc.writeMem(0xd831, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd831);
        EXPECT(gbc.pc(), 0xad9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb330), 0xc4);
        EXPECT(gbc.readMem(0xb331), 0x9c);
        EXPECT(gbc.readMem(0xb332), 0xad);
        EXPECT(gbc.readMem(0xd831), 0x33);
        EXPECT(gbc.readMem(0xd832), 0xb3);
        // C4 031A
        gbc.setState(0xa419, 0x4614, 0x5ab0, 0xbde1, 0x6165, 0x5f63, 0x0, 0x0);
        gbc.writeMem(0xa419, { 0xc4, 0xc0, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4614);
        EXPECT(gbc.pc(), 0xa41c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa419), 0xc4);
        EXPECT(gbc.readMem(0xa41a), 0xc0);
        EXPECT(gbc.readMem(0xa41b), 0x86);
        // C4 031B
        gbc.setState(0x254f, 0xd3f, 0x1a80, 0xe366, 0x915b, 0x51d0, 0x0, 0x1);
        gbc.writeMem(0x254f, { 0xc4, 0x6a, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd3f);
        EXPECT(gbc.pc(), 0x2552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 031C
        gbc.setState(0x68cb, 0xbbc7, 0xd470, 0xf0fb, 0x534e, 0xa0a6, 0x1, 0x0);
        gbc.writeMem(0x68cb, { 0xc4, 0x67, 0xf1 });
        gbc.writeMem(0xbbc5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xbbc5);
        EXPECT(gbc.pc(), 0xf167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc5), 0xce);
        EXPECT(gbc.readMem(0xbbc6), 0x68);
        // C4 031D
        gbc.setState(0xd249, 0x13b6, 0xfac0, 0x9654, 0xf5ff, 0xf43f, 0x1, 0x0);
        gbc.writeMem(0xd249, { 0xc4, 0x2, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x13b6);
        EXPECT(gbc.pc(), 0xd24c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd249), 0xc4);
        EXPECT(gbc.readMem(0xd24a), 0x2);
        EXPECT(gbc.readMem(0xd24b), 0x26);
        // C4 031E
        gbc.setState(0xbbed, 0x9bc4, 0xbac0, 0x79d5, 0x2819, 0xaa06, 0x0, 0x1);
        gbc.writeMem(0xbbed, { 0xc4, 0x61, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9bc4);
        EXPECT(gbc.pc(), 0xbbf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbed), 0xc4);
        EXPECT(gbc.readMem(0xbbee), 0x61);
        EXPECT(gbc.readMem(0xbbef), 0x6);
        // C4 031F
        gbc.setState(0x1d70, 0xdc70, 0xf960, 0xbb3e, 0xecd8, 0x13b3, 0x1, 0x1);
        gbc.writeMem(0x1d70, { 0xc4, 0x50, 0x4a });
        gbc.writeMem(0xdc6e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdc6e);
        EXPECT(gbc.pc(), 0x4a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6e), 0x73);
        EXPECT(gbc.readMem(0xdc6f), 0x1d);
        // C4 0320
        gbc.setState(0x6793, 0x53f4, 0xe690, 0xf76a, 0xf66c, 0x1a83, 0x0, 0x0);
        gbc.writeMem(0x6793, { 0xc4, 0x19, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x53f4);
        EXPECT(gbc.pc(), 0x6796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0321
        gbc.setState(0xac74, 0xabe1, 0x3d40, 0xcc86, 0x8437, 0x85e8, 0x0, 0x1);
        gbc.writeMem(0xabdf, { 0x0, 0x0 });
        gbc.writeMem(0xac74, { 0xc4, 0x85, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xabdf);
        EXPECT(gbc.pc(), 0x185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabdf), 0x77);
        EXPECT(gbc.readMem(0xabe0), 0xac);
        EXPECT(gbc.readMem(0xac74), 0xc4);
        EXPECT(gbc.readMem(0xac75), 0x85);
        EXPECT(gbc.readMem(0xac76), 0x1);
        // C4 0322
        gbc.setState(0xda1a, 0x841d, 0x2b10, 0x441, 0xbf92, 0x5f03, 0x0, 0x1);
        gbc.writeMem(0x841b, { 0x0, 0x0 });
        gbc.writeMem(0xda1a, { 0xc4, 0xde, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x841b);
        EXPECT(gbc.pc(), 0xdfde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x841b), 0x1d);
        EXPECT(gbc.readMem(0x841c), 0xda);
        EXPECT(gbc.readMem(0xda1a), 0xc4);
        EXPECT(gbc.readMem(0xda1b), 0xde);
        EXPECT(gbc.readMem(0xda1c), 0xdf);
        // C4 0323
        gbc.setState(0x9440, 0xd4f3, 0x2290, 0xcfc8, 0xe1eb, 0x53e1, 0x1, 0x1);
        gbc.writeMem(0x9440, { 0xc4, 0xf, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd4f3);
        EXPECT(gbc.pc(), 0x9443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9440), 0xc4);
        EXPECT(gbc.readMem(0x9441), 0xf);
        EXPECT(gbc.readMem(0x9442), 0xbc);
        // C4 0325
        gbc.setState(0x245, 0x1f9f, 0x54b0, 0x6a53, 0xad66, 0x7be3, 0x1, 0x1);
        gbc.writeMem(0x245, { 0xc4, 0x86, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1f9f);
        EXPECT(gbc.pc(), 0x248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0327
        gbc.setState(0xcfc1, 0xb1d4, 0x6cd0, 0xe127, 0x3d3, 0x20ec, 0x1, 0x1);
        gbc.writeMem(0xcfc1, { 0xc4, 0x4c, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb1d4);
        EXPECT(gbc.pc(), 0xcfc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc1), 0xc4);
        EXPECT(gbc.readMem(0xcfc2), 0x4c);
        EXPECT(gbc.readMem(0xcfc3), 0x1d);
        // C4 0328
        gbc.setState(0x23a4, 0x5066, 0xa180, 0xf4fc, 0x1e27, 0xb2fd, 0x0, 0x0);
        gbc.writeMem(0x23a4, { 0xc4, 0x8c, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5066);
        EXPECT(gbc.pc(), 0x23a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0329
        gbc.setState(0xa2a2, 0xbd55, 0xa230, 0x8cf5, 0x6dfd, 0x5487, 0x0, 0x1);
        gbc.writeMem(0xa2a2, { 0xc4, 0x87, 0xb8 });
        gbc.writeMem(0xbd53, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbd53);
        EXPECT(gbc.pc(), 0xb887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a2), 0xc4);
        EXPECT(gbc.readMem(0xa2a3), 0x87);
        EXPECT(gbc.readMem(0xa2a4), 0xb8);
        EXPECT(gbc.readMem(0xbd53), 0xa5);
        EXPECT(gbc.readMem(0xbd54), 0xa2);
        // C4 032A
        gbc.setState(0x4a6e, 0x3892, 0x5bc0, 0x3d9c, 0x5022, 0xf7f9, 0x1, 0x1);
        gbc.writeMem(0x4a6e, { 0xc4, 0x90, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3892);
        EXPECT(gbc.pc(), 0x4a71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 032B
        gbc.setState(0x4059, 0x2cdd, 0x90b0, 0x8308, 0x8c2c, 0xb31f, 0x0, 0x0);
        gbc.writeMem(0x4059, { 0xc4, 0x75, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2cdd);
        EXPECT(gbc.pc(), 0x405c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 032C
        gbc.setState(0x6f0d, 0x8ccf, 0x7d70, 0x2b7f, 0x9c43, 0x8613, 0x1, 0x1);
        gbc.writeMem(0x6f0d, { 0xc4, 0x3, 0x64 });
        gbc.writeMem(0x8ccd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8ccd);
        EXPECT(gbc.pc(), 0x6403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ccd), 0x10);
        EXPECT(gbc.readMem(0x8cce), 0x6f);
        // C4 032D
        gbc.setState(0x3207, 0xa64c, 0x2d80, 0x4b41, 0x24f9, 0x990b, 0x1, 0x1);
        gbc.writeMem(0x3207, { 0xc4, 0x17, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa64c);
        EXPECT(gbc.pc(), 0x320a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 032E
        gbc.setState(0x49c6, 0x8703, 0x6850, 0xcd92, 0x445, 0x2198, 0x0, 0x0);
        gbc.writeMem(0x49c6, { 0xc4, 0x53, 0x70 });
        gbc.writeMem(0x8701, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8701);
        EXPECT(gbc.pc(), 0x7053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8701), 0xc9);
        EXPECT(gbc.readMem(0x8702), 0x49);
        // C4 032F
        gbc.setState(0x34c2, 0xdd6b, 0x4140, 0xaaad, 0xf1e3, 0xf160, 0x1, 0x0);
        gbc.writeMem(0x34c2, { 0xc4, 0x3e, 0xa6 });
        gbc.writeMem(0xdd69, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xdd69);
        EXPECT(gbc.pc(), 0xa63e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd69), 0xc5);
        EXPECT(gbc.readMem(0xdd6a), 0x34);
        // C4 0332
        gbc.setState(0x3c5c, 0xe391, 0x51f0, 0xcc2d, 0xed28, 0xc8d3, 0x1, 0x0);
        gbc.writeMem(0x3c5c, { 0xc4, 0xde, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe391);
        EXPECT(gbc.pc(), 0x3c5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0334
        gbc.setState(0x74a1, 0xcc69, 0xb510, 0x6e16, 0x149e, 0x3311, 0x1, 0x1);
        gbc.writeMem(0x74a1, { 0xc4, 0x40, 0xe9 });
        gbc.writeMem(0xcc67, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xcc67);
        EXPECT(gbc.pc(), 0xe940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc67), 0xa4);
        EXPECT(gbc.readMem(0xcc68), 0x74);
        // C4 0335
        gbc.setState(0x7624, 0xc417, 0x74a0, 0xa4b3, 0xa33c, 0x9c0c, 0x1, 0x0);
        gbc.writeMem(0x7624, { 0xc4, 0x39, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc417);
        EXPECT(gbc.pc(), 0x7627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0337
        gbc.setState(0xc6b2, 0x4c06, 0x8eb0, 0x1257, 0x4456, 0xa9af, 0x0, 0x0);
        gbc.writeMem(0xc6b2, { 0xc4, 0x14, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4c06);
        EXPECT(gbc.pc(), 0xc6b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b2), 0xc4);
        EXPECT(gbc.readMem(0xc6b3), 0x14);
        EXPECT(gbc.readMem(0xc6b4), 0x27);
        // C4 0338
        gbc.setState(0xa70, 0x9a30, 0xbab0, 0xa393, 0xd059, 0xbc1f, 0x0, 0x1);
        gbc.writeMem(0xa70, { 0xc4, 0x45, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9a30);
        EXPECT(gbc.pc(), 0xa73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0339
        gbc.setState(0x345e, 0x6963, 0xccb0, 0xa1b7, 0x3ecf, 0x6658, 0x1, 0x0);
        gbc.writeMem(0x345e, { 0xc4, 0x4d, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6963);
        EXPECT(gbc.pc(), 0x3461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 033A
        gbc.setState(0xa100, 0x2c1b, 0x3fc0, 0xa415, 0xec93, 0x1d7c, 0x0, 0x0);
        gbc.writeMem(0xa100, { 0xc4, 0x8c, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x2c1b);
        EXPECT(gbc.pc(), 0xa103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa100), 0xc4);
        EXPECT(gbc.readMem(0xa101), 0x8c);
        EXPECT(gbc.readMem(0xa102), 0x8d);
        // C4 033B
        gbc.setState(0x2255, 0x856c, 0xba10, 0x3a9b, 0xbeae, 0x868c, 0x1, 0x0);
        gbc.writeMem(0x2255, { 0xc4, 0x99, 0x7e });
        gbc.writeMem(0x856a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x856a);
        EXPECT(gbc.pc(), 0x7e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856a), 0x58);
        EXPECT(gbc.readMem(0x856b), 0x22);
        // C4 033D
        gbc.setState(0x7fca, 0x2009, 0x1bb0, 0x1a31, 0x7ce1, 0x449a, 0x1, 0x1);
        gbc.writeMem(0x7fca, { 0xc4, 0xac, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2009);
        EXPECT(gbc.pc(), 0x7fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 033E
        gbc.setState(0xb258, 0xcbf2, 0x4120, 0x221, 0x8d2e, 0xf0c0, 0x0, 0x0);
        gbc.writeMem(0xb258, { 0xc4, 0xad, 0xda });
        gbc.writeMem(0xcbf0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xcbf0);
        EXPECT(gbc.pc(), 0xdaad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb258), 0xc4);
        EXPECT(gbc.readMem(0xb259), 0xad);
        EXPECT(gbc.readMem(0xb25a), 0xda);
        EXPECT(gbc.readMem(0xcbf0), 0x5b);
        EXPECT(gbc.readMem(0xcbf1), 0xb2);
        // C4 033F
        gbc.setState(0xc343, 0x51dd, 0xb9f0, 0x835c, 0x14cc, 0x1bb0, 0x1, 0x0);
        gbc.writeMem(0xc343, { 0xc4, 0xd5, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x51dd);
        EXPECT(gbc.pc(), 0xc346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc343), 0xc4);
        EXPECT(gbc.readMem(0xc344), 0xd5);
        EXPECT(gbc.readMem(0xc345), 0x99);
        // C4 0341
        gbc.setState(0xb512, 0xf844, 0x8120, 0xfbaa, 0xa92, 0xd210, 0x0, 0x1);
        gbc.writeMem(0xb512, { 0xc4, 0x34, 0x7 });
        gbc.writeMem(0xf842, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf842);
        EXPECT(gbc.pc(), 0x734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb512), 0xc4);
        EXPECT(gbc.readMem(0xb513), 0x34);
        EXPECT(gbc.readMem(0xb514), 0x7);
        EXPECT(gbc.readMem(0xf842), 0x15);
        EXPECT(gbc.readMem(0xf843), 0xb5);
        // C4 0342
        gbc.setState(0xcec9, 0xba9f, 0xedf0, 0xfb2a, 0xb79a, 0x1496, 0x0, 0x1);
        gbc.writeMem(0xcec9, { 0xc4, 0x35, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xba9f);
        EXPECT(gbc.pc(), 0xcecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec9), 0xc4);
        EXPECT(gbc.readMem(0xceca), 0x35);
        EXPECT(gbc.readMem(0xcecb), 0x69);
        // C4 0344
        gbc.setState(0xbef6, 0xc536, 0xcf50, 0xfd11, 0x25e2, 0x7d0b, 0x1, 0x0);
        gbc.writeMem(0xbef6, { 0xc4, 0xc7, 0x58 });
        gbc.writeMem(0xc534, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc534);
        EXPECT(gbc.pc(), 0x58c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef6), 0xc4);
        EXPECT(gbc.readMem(0xbef7), 0xc7);
        EXPECT(gbc.readMem(0xbef8), 0x58);
        EXPECT(gbc.readMem(0xc534), 0xf9);
        EXPECT(gbc.readMem(0xc535), 0xbe);
        // C4 0345
        gbc.setState(0x4af7, 0x1d13, 0x65f0, 0x3f02, 0x6a95, 0xbb40, 0x1, 0x0);
        gbc.writeMem(0x4af7, { 0xc4, 0x59, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1d13);
        EXPECT(gbc.pc(), 0x4afa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0346
        gbc.setState(0x7d62, 0xecdd, 0xafb0, 0x2006, 0xf479, 0xfce6, 0x1, 0x0);
        gbc.writeMem(0x7d62, { 0xc4, 0x94, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xecdd);
        EXPECT(gbc.pc(), 0x7d65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0347
        gbc.setState(0x4065, 0xe5e4, 0x8010, 0xb060, 0x95fd, 0xeac3, 0x1, 0x0);
        gbc.writeMem(0x4065, { 0xc4, 0x1f, 0x31 });
        gbc.writeMem(0xe5e2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe5e2);
        EXPECT(gbc.pc(), 0x311f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5e2), 0x68);
        EXPECT(gbc.readMem(0xe5e3), 0x40);
        // C4 0348
        gbc.setState(0x9725, 0xbf36, 0xb430, 0xce4b, 0x6711, 0x2459, 0x0, 0x1);
        gbc.writeMem(0x9725, { 0xc4, 0x6e, 0xad });
        gbc.writeMem(0xbf34, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbf34);
        EXPECT(gbc.pc(), 0xad6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9725), 0xc4);
        EXPECT(gbc.readMem(0x9726), 0x6e);
        EXPECT(gbc.readMem(0x9727), 0xad);
        EXPECT(gbc.readMem(0xbf34), 0x28);
        EXPECT(gbc.readMem(0xbf35), 0x97);
        // C4 0349
        gbc.setState(0x47fa, 0x392c, 0xbae0, 0x7c0a, 0xceea, 0xe84d, 0x1, 0x1);
        gbc.writeMem(0x47fa, { 0xc4, 0xf9, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x392c);
        EXPECT(gbc.pc(), 0x47fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 034A
        gbc.setState(0x6f55, 0xb135, 0x7090, 0xaa15, 0xb20a, 0x9fc2, 0x1, 0x0);
        gbc.writeMem(0x6f55, { 0xc4, 0xb9, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb135);
        EXPECT(gbc.pc(), 0x6f58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 034B
        gbc.setState(0x4894, 0x646, 0xebf0, 0x5bea, 0x86c0, 0x868c, 0x1, 0x1);
        gbc.writeMem(0x4894, { 0xc4, 0xa2, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x646);
        EXPECT(gbc.pc(), 0x4897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 034C
        gbc.setState(0x23be, 0xb777, 0x2160, 0xc9f1, 0xd0d5, 0x8f39, 0x0, 0x1);
        gbc.writeMem(0x23be, { 0xc4, 0x64, 0xde });
        gbc.writeMem(0xb775, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb775);
        EXPECT(gbc.pc(), 0xde64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb775), 0xc1);
        EXPECT(gbc.readMem(0xb776), 0x23);
        // C4 034D
        gbc.setState(0x12e5, 0xc3ac, 0xd30, 0x503f, 0x4382, 0xf98c, 0x1, 0x0);
        gbc.writeMem(0x12e5, { 0xc4, 0x17, 0x23 });
        gbc.writeMem(0xc3aa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xc3aa);
        EXPECT(gbc.pc(), 0x2317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3aa), 0xe8);
        EXPECT(gbc.readMem(0xc3ab), 0x12);
        // C4 034E
        gbc.setState(0x2e98, 0xe9d6, 0x6a50, 0x5e1a, 0xff50, 0x2cbc, 0x0, 0x1);
        gbc.writeMem(0x2e98, { 0xc4, 0x92, 0xc3 });
        gbc.writeMem(0xe9d4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe9d4);
        EXPECT(gbc.pc(), 0xc392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9d4), 0x9b);
        EXPECT(gbc.readMem(0xe9d5), 0x2e);
        // C4 0350
        gbc.setState(0xb800, 0x800e, 0x3730, 0x6fd, 0xe1c8, 0x1609, 0x1, 0x0);
        gbc.writeMem(0x800c, { 0x0, 0x0 });
        gbc.writeMem(0xb800, { 0xc4, 0x79, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x800c);
        EXPECT(gbc.pc(), 0xf779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x800c), 0x3);
        EXPECT(gbc.readMem(0x800d), 0xb8);
        EXPECT(gbc.readMem(0xb800), 0xc4);
        EXPECT(gbc.readMem(0xb801), 0x79);
        EXPECT(gbc.readMem(0xb802), 0xf7);
        // C4 0351
        gbc.setState(0x7b04, 0xaa47, 0xb70, 0x7945, 0x282a, 0xa4, 0x1, 0x0);
        gbc.writeMem(0x7b04, { 0xc4, 0xd, 0x5a });
        gbc.writeMem(0xaa45, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xaa45);
        EXPECT(gbc.pc(), 0x5a0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa45), 0x7);
        EXPECT(gbc.readMem(0xaa46), 0x7b);
        // C4 0353
        gbc.setState(0x729d, 0x3cd6, 0xeec0, 0x89ed, 0xa0c5, 0xdf15, 0x0, 0x0);
        gbc.writeMem(0x729d, { 0xc4, 0xd9, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3cd6);
        EXPECT(gbc.pc(), 0x72a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0355
        gbc.setState(0x618a, 0xca68, 0xf0a0, 0xb01b, 0xcc24, 0xf15b, 0x0, 0x0);
        gbc.writeMem(0x618a, { 0xc4, 0xb, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xca68);
        EXPECT(gbc.pc(), 0x618d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 0357
        gbc.setState(0x500d, 0x9a47, 0x3980, 0xcb26, 0x90ff, 0x5a9a, 0x1, 0x1);
        gbc.writeMem(0x500d, { 0xc4, 0x72, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9a47);
        EXPECT(gbc.pc(), 0x5010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0358
        gbc.setState(0xb9cc, 0x921a, 0x1dd0, 0x673d, 0xe70d, 0x3121, 0x0, 0x1);
        gbc.writeMem(0xb9cc, { 0xc4, 0xd, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x921a);
        EXPECT(gbc.pc(), 0xb9cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9cc), 0xc4);
        EXPECT(gbc.readMem(0xb9cd), 0xd);
        EXPECT(gbc.readMem(0xb9ce), 0xc3);
        // C4 0359
        gbc.setState(0x8af0, 0x8ba9, 0x72c0, 0x103a, 0x97c5, 0xc0ca, 0x0, 0x1);
        gbc.writeMem(0x8af0, { 0xc4, 0x7c, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8ba9);
        EXPECT(gbc.pc(), 0x8af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af0), 0xc4);
        EXPECT(gbc.readMem(0x8af1), 0x7c);
        EXPECT(gbc.readMem(0x8af2), 0x6d);
        // C4 035A
        gbc.setState(0xacce, 0xc076, 0x310, 0x5930, 0xe21f, 0xe47d, 0x1, 0x1);
        gbc.writeMem(0xacce, { 0xc4, 0x6c, 0x88 });
        gbc.writeMem(0xc074, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc074);
        EXPECT(gbc.pc(), 0x886c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacce), 0xc4);
        EXPECT(gbc.readMem(0xaccf), 0x6c);
        EXPECT(gbc.readMem(0xacd0), 0x88);
        EXPECT(gbc.readMem(0xc074), 0xd1);
        EXPECT(gbc.readMem(0xc075), 0xac);
        // C4 035B
        gbc.setState(0xe7c, 0x819c, 0x7fd0, 0x2fcc, 0xd04b, 0xbb7f, 0x0, 0x1);
        gbc.writeMem(0xe7c, { 0xc4, 0x39, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x819c);
        EXPECT(gbc.pc(), 0xe7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 035C
        gbc.setState(0xa12, 0xe7ab, 0xc8a0, 0x27ca, 0x92da, 0x277d, 0x1, 0x0);
        gbc.writeMem(0xa12, { 0xc4, 0xbf, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe7ab);
        EXPECT(gbc.pc(), 0xa15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 035D
        gbc.setState(0xb5b8, 0xc7a9, 0x430, 0xc8e0, 0xb3ae, 0x797f, 0x0, 0x0);
        gbc.writeMem(0xb5b8, { 0xc4, 0x5c, 0xb9 });
        gbc.writeMem(0xc7a7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc7a7);
        EXPECT(gbc.pc(), 0xb95c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b8), 0xc4);
        EXPECT(gbc.readMem(0xb5b9), 0x5c);
        EXPECT(gbc.readMem(0xb5ba), 0xb9);
        EXPECT(gbc.readMem(0xc7a7), 0xbb);
        EXPECT(gbc.readMem(0xc7a8), 0xb5);
        // C4 035E
        gbc.setState(0x7919, 0xce81, 0xaec0, 0x7833, 0xdd4a, 0x5863, 0x0, 0x1);
        gbc.writeMem(0x7919, { 0xc4, 0xfd, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xce81);
        EXPECT(gbc.pc(), 0x791c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 035F
        gbc.setState(0xba93, 0xd722, 0x86d0, 0xdbd3, 0x4238, 0xd865, 0x0, 0x1);
        gbc.writeMem(0xba93, { 0xc4, 0x3a, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd722);
        EXPECT(gbc.pc(), 0xba96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba93), 0xc4);
        EXPECT(gbc.readMem(0xba94), 0x3a);
        EXPECT(gbc.readMem(0xba95), 0xc);
        // C4 0360
        gbc.setState(0x6a75, 0xb0e7, 0xa230, 0x62cc, 0xdc08, 0xb3bf, 0x0, 0x1);
        gbc.writeMem(0x6a75, { 0xc4, 0x38, 0xdd });
        gbc.writeMem(0xb0e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb0e5);
        EXPECT(gbc.pc(), 0xdd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e5), 0x78);
        EXPECT(gbc.readMem(0xb0e6), 0x6a);
        // C4 0361
        gbc.setState(0x7154, 0x80b8, 0xf140, 0xa9ee, 0x302c, 0x6d6a, 0x1, 0x1);
        gbc.writeMem(0x7154, { 0xc4, 0x4c, 0x77 });
        gbc.writeMem(0x80b6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x80b6);
        EXPECT(gbc.pc(), 0x774c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b6), 0x57);
        EXPECT(gbc.readMem(0x80b7), 0x71);
        // C4 0362
        gbc.setState(0x8065, 0xdbea, 0x1690, 0xb497, 0x3fcc, 0x5831, 0x1, 0x0);
        gbc.writeMem(0x8065, { 0xc4, 0xa, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xdbea);
        EXPECT(gbc.pc(), 0x8068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8065), 0xc4);
        EXPECT(gbc.readMem(0x8066), 0xa);
        EXPECT(gbc.readMem(0x8067), 0xfb);
        // C4 0363
        gbc.setState(0x86db, 0x60a1, 0x1ea0, 0x4776, 0xa4ce, 0x301f, 0x1, 0x1);
        gbc.writeMem(0x86db, { 0xc4, 0x1c, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x60a1);
        EXPECT(gbc.pc(), 0x86de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86db), 0xc4);
        EXPECT(gbc.readMem(0x86dc), 0x1c);
        EXPECT(gbc.readMem(0x86dd), 0x93);
        // C4 0365
        gbc.setState(0xef1a, 0x77a7, 0x5ff0, 0x6e0c, 0x23f6, 0xc7af, 0x0, 0x1);
        gbc.writeMem(0xef1a, { 0xc4, 0xc2, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x77a7);
        EXPECT(gbc.pc(), 0xef1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef1a), 0xc4);
        EXPECT(gbc.readMem(0xef1b), 0xc2);
        EXPECT(gbc.readMem(0xef1c), 0x79);
        // C4 0366
        gbc.setState(0xc56, 0x4a3f, 0xef90, 0x64a7, 0x37d0, 0x73a7, 0x0, 0x1);
        gbc.writeMem(0xc56, { 0xc4, 0x26, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4a3f);
        EXPECT(gbc.pc(), 0xc59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0369
        gbc.setState(0x71b9, 0x9dbc, 0xb590, 0x3f3a, 0x370f, 0x5f5e, 0x1, 0x0);
        gbc.writeMem(0x71b9, { 0xc4, 0xf8, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9dbc);
        EXPECT(gbc.pc(), 0x71bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 036A
        gbc.setState(0x864a, 0xb8ff, 0xbec0, 0x45c2, 0xaecb, 0x590f, 0x1, 0x1);
        gbc.writeMem(0x864a, { 0xc4, 0xe3, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb8ff);
        EXPECT(gbc.pc(), 0x864d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x864a), 0xc4);
        EXPECT(gbc.readMem(0x864b), 0xe3);
        EXPECT(gbc.readMem(0x864c), 0xea);
        // C4 036C
        gbc.setState(0x9ca, 0xae76, 0xf1f0, 0x5788, 0x353d, 0x63df, 0x0, 0x0);
        gbc.writeMem(0x9ca, { 0xc4, 0x2, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xae76);
        EXPECT(gbc.pc(), 0x9cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 036D
        gbc.setState(0x907f, 0xfdbc, 0x2680, 0xecb9, 0x12d3, 0x6922, 0x1, 0x1);
        gbc.writeMem(0x907f, { 0xc4, 0xab, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xfdbc);
        EXPECT(gbc.pc(), 0x9082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x907f), 0xc4);
        EXPECT(gbc.readMem(0x9080), 0xab);
        EXPECT(gbc.readMem(0x9081), 0x27);
        // C4 036E
        gbc.setState(0x7dfe, 0xac11, 0xcc10, 0x3741, 0x58ea, 0xc0ba, 0x1, 0x1);
        gbc.writeMem(0x7dfe, { 0xc4, 0xd3, 0x8b });
        gbc.writeMem(0xac0f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xac0f);
        EXPECT(gbc.pc(), 0x8bd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac0f), 0x1);
        EXPECT(gbc.readMem(0xac10), 0x7e);
        // C4 0370
        gbc.setState(0xeb74, 0xeee0, 0xa7e0, 0xca4, 0xf578, 0x1d1c, 0x0, 0x0);
        gbc.writeMem(0xeb74, { 0xc4, 0x2d, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xeee0);
        EXPECT(gbc.pc(), 0xeb77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb74), 0xc4);
        EXPECT(gbc.readMem(0xeb75), 0x2d);
        EXPECT(gbc.readMem(0xeb76), 0x2f);
        // C4 0372
        gbc.setState(0x2f56, 0xfaa3, 0xf520, 0xe5c3, 0x1a1b, 0xdd8d, 0x1, 0x0);
        gbc.writeMem(0x2f56, { 0xc4, 0xe, 0x9a });
        gbc.writeMem(0xfaa1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xfaa1);
        EXPECT(gbc.pc(), 0x9a0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfaa1), 0x59);
        EXPECT(gbc.readMem(0xfaa2), 0x2f);
        // C4 0374
        gbc.setState(0x6a97, 0xd3f1, 0xd890, 0xdddc, 0x47cf, 0xed4f, 0x0, 0x0);
        gbc.writeMem(0x6a97, { 0xc4, 0x66, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd3f1);
        EXPECT(gbc.pc(), 0x6a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 0375
        gbc.setState(0x59d8, 0xf749, 0x7d10, 0xf8fb, 0x22a3, 0xc624, 0x0, 0x0);
        gbc.writeMem(0x59d8, { 0xc4, 0xe0, 0x2b });
        gbc.writeMem(0xf747, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf747);
        EXPECT(gbc.pc(), 0x2be0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf747), 0xdb);
        EXPECT(gbc.readMem(0xf748), 0x59);
        // C4 0376
        gbc.setState(0xd52, 0x5029, 0x5db0, 0x9e9c, 0x2721, 0x30e8, 0x1, 0x1);
        gbc.writeMem(0xd52, { 0xc4, 0xc3, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5029);
        EXPECT(gbc.pc(), 0xd55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0377
        gbc.setState(0x3b6c, 0xb203, 0x7d40, 0x62a4, 0x352d, 0xd2a0, 0x0, 0x1);
        gbc.writeMem(0x3b6c, { 0xc4, 0xd5, 0x4b });
        gbc.writeMem(0xb201, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb201);
        EXPECT(gbc.pc(), 0x4bd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb201), 0x6f);
        EXPECT(gbc.readMem(0xb202), 0x3b);
        // C4 0378
        gbc.setState(0x4d37, 0xbccf, 0xed80, 0x357a, 0x9b1c, 0x45c8, 0x1, 0x1);
        gbc.writeMem(0x4d37, { 0xc4, 0x6b, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xbccf);
        EXPECT(gbc.pc(), 0x4d3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0379
        gbc.setState(0xa47, 0x37ea, 0xa590, 0x8728, 0x3b1a, 0xc28f, 0x0, 0x1);
        gbc.writeMem(0xa47, { 0xc4, 0xf1, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x37ea);
        EXPECT(gbc.pc(), 0xa4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 037A
        gbc.setState(0x689a, 0x6c66, 0xc9d0, 0xe79b, 0x6920, 0x2af7, 0x1, 0x0);
        gbc.writeMem(0x689a, { 0xc4, 0x39, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6c66);
        EXPECT(gbc.pc(), 0x689d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 037B
        gbc.setState(0x73fe, 0xb6c2, 0x8bb0, 0x8af3, 0x1bb3, 0x4c2, 0x0, 0x1);
        gbc.writeMem(0x73fe, { 0xc4, 0x13, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb6c2);
        EXPECT(gbc.pc(), 0x7401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 037D
        gbc.setState(0x8b05, 0xb73a, 0x2710, 0x102e, 0x72da, 0xfdcf, 0x0, 0x0);
        gbc.writeMem(0x8b05, { 0xc4, 0x32, 0x9b });
        gbc.writeMem(0xb738, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb738);
        EXPECT(gbc.pc(), 0x9b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b05), 0xc4);
        EXPECT(gbc.readMem(0x8b06), 0x32);
        EXPECT(gbc.readMem(0x8b07), 0x9b);
        EXPECT(gbc.readMem(0xb738), 0x8);
        EXPECT(gbc.readMem(0xb739), 0x8b);
        // C4 037E
        gbc.setState(0x88c7, 0x4f9a, 0x9390, 0xf7a4, 0x3aae, 0x2815, 0x1, 0x0);
        gbc.writeMem(0x88c7, { 0xc4, 0xc3, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4f9a);
        EXPECT(gbc.pc(), 0x88ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88c7), 0xc4);
        EXPECT(gbc.readMem(0x88c8), 0xc3);
        EXPECT(gbc.readMem(0x88c9), 0x11);
        // C4 037F
        gbc.setState(0xb21b, 0xb0d7, 0xc80, 0xe1cd, 0x650a, 0x6598, 0x1, 0x0);
        gbc.writeMem(0xb21b, { 0xc4, 0x43, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xb0d7);
        EXPECT(gbc.pc(), 0xb21e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb21b), 0xc4);
        EXPECT(gbc.readMem(0xb21c), 0x43);
        EXPECT(gbc.readMem(0xb21d), 0xb8);
        // C4 0380
        gbc.setState(0xe981, 0xb5c5, 0xd050, 0x67e, 0xeceb, 0x24d3, 0x0, 0x0);
        gbc.writeMem(0xb5c3, { 0x0, 0x0 });
        gbc.writeMem(0xe981, { 0xc4, 0xf6, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb5c3);
        EXPECT(gbc.pc(), 0x60f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c3), 0x84);
        EXPECT(gbc.readMem(0xb5c4), 0xe9);
        EXPECT(gbc.readMem(0xe981), 0xc4);
        EXPECT(gbc.readMem(0xe982), 0xf6);
        EXPECT(gbc.readMem(0xe983), 0x60);
        // C4 0381
        gbc.setState(0x294a, 0xeec0, 0x5570, 0x6ca5, 0x396, 0xdd94, 0x1, 0x0);
        gbc.writeMem(0x294a, { 0xc4, 0xf9, 0xc6 });
        gbc.writeMem(0xeebe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xeebe);
        EXPECT(gbc.pc(), 0xc6f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeebe), 0x4d);
        EXPECT(gbc.readMem(0xeebf), 0x29);
        // C4 0382
        gbc.setState(0x3e26, 0x9181, 0x85c0, 0x3d50, 0xf19a, 0xb900, 0x0, 0x1);
        gbc.writeMem(0x3e26, { 0xc4, 0x54, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9181);
        EXPECT(gbc.pc(), 0x3e29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 0383
        gbc.setState(0x8d61, 0x5054, 0x47f0, 0xb8c9, 0x95d7, 0xe334, 0x1, 0x0);
        gbc.writeMem(0x8d61, { 0xc4, 0x1d, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5054);
        EXPECT(gbc.pc(), 0x8d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d61), 0xc4);
        EXPECT(gbc.readMem(0x8d62), 0x1d);
        EXPECT(gbc.readMem(0x8d63), 0xc7);
        // C4 0384
        gbc.setState(0xc41a, 0xc595, 0xff80, 0x8492, 0x6af7, 0x4784, 0x0, 0x1);
        gbc.writeMem(0xc41a, { 0xc4, 0xc1, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc595);
        EXPECT(gbc.pc(), 0xc41d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc41a), 0xc4);
        EXPECT(gbc.readMem(0xc41b), 0xc1);
        EXPECT(gbc.readMem(0xc41c), 0xf3);
        // C4 0385
        gbc.setState(0x4964, 0x8894, 0xe9f0, 0x43f5, 0xa18b, 0x7af, 0x0, 0x0);
        gbc.writeMem(0x4964, { 0xc4, 0xe1, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8894);
        EXPECT(gbc.pc(), 0x4967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0386
        gbc.setState(0x75f8, 0xbe60, 0x24b0, 0x8989, 0xb392, 0x4b89, 0x0, 0x1);
        gbc.writeMem(0x75f8, { 0xc4, 0xcb, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbe60);
        EXPECT(gbc.pc(), 0x75fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 0389
        gbc.setState(0xdfd7, 0x6dae, 0x8780, 0xbb7e, 0x8e95, 0xb923, 0x0, 0x1);
        gbc.writeMem(0xdfd7, { 0xc4, 0xd3, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6dae);
        EXPECT(gbc.pc(), 0xdfda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfd7), 0xc4);
        EXPECT(gbc.readMem(0xdfd8), 0xd3);
        EXPECT(gbc.readMem(0xdfd9), 0x4a);
        // C4 038A
        gbc.setState(0x1c96, 0xc454, 0x9e50, 0x475d, 0x4f78, 0x6af6, 0x1, 0x1);
        gbc.writeMem(0x1c96, { 0xc4, 0x4b, 0xa6 });
        gbc.writeMem(0xc452, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc452);
        EXPECT(gbc.pc(), 0xa64b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc452), 0x99);
        EXPECT(gbc.readMem(0xc453), 0x1c);
        // C4 038C
        gbc.setState(0x37d8, 0xf2e2, 0x5300, 0x59a9, 0x4136, 0xed6d, 0x1, 0x0);
        gbc.writeMem(0x37d8, { 0xc4, 0x59, 0xf3 });
        gbc.writeMem(0xf2e0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf2e0);
        EXPECT(gbc.pc(), 0xf359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2e0), 0xdb);
        EXPECT(gbc.readMem(0xf2e1), 0x37);
        // C4 038D
        gbc.setState(0x5860, 0xa472, 0xb9a0, 0x416c, 0x1dce, 0x585b, 0x1, 0x1);
        gbc.writeMem(0x5860, { 0xc4, 0x78, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa472);
        EXPECT(gbc.pc(), 0x5863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 038E
        gbc.setState(0xa203, 0xe5b1, 0xe70, 0xede4, 0x9a84, 0xf258, 0x0, 0x0);
        gbc.writeMem(0xa203, { 0xc4, 0x53, 0x59 });
        gbc.writeMem(0xe5af, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe5af);
        EXPECT(gbc.pc(), 0x5953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa203), 0xc4);
        EXPECT(gbc.readMem(0xa204), 0x53);
        EXPECT(gbc.readMem(0xa205), 0x59);
        EXPECT(gbc.readMem(0xe5af), 0x6);
        EXPECT(gbc.readMem(0xe5b0), 0xa2);
        // C4 0390
        gbc.setState(0xbcb8, 0x8628, 0xce40, 0x253d, 0x29bc, 0x9124, 0x1, 0x1);
        gbc.writeMem(0x8626, { 0x0, 0x0 });
        gbc.writeMem(0xbcb8, { 0xc4, 0x14, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8626);
        EXPECT(gbc.pc(), 0x8014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8626), 0xbb);
        EXPECT(gbc.readMem(0x8627), 0xbc);
        EXPECT(gbc.readMem(0xbcb8), 0xc4);
        EXPECT(gbc.readMem(0xbcb9), 0x14);
        EXPECT(gbc.readMem(0xbcba), 0x80);
        // C4 0391
        gbc.setState(0x2767, 0x9ccc, 0x6970, 0x3842, 0xe64e, 0x1b3e, 0x1, 0x1);
        gbc.writeMem(0x2767, { 0xc4, 0x6f, 0x83 });
        gbc.writeMem(0x9cca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9cca);
        EXPECT(gbc.pc(), 0x836f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cca), 0x6a);
        EXPECT(gbc.readMem(0x9ccb), 0x27);
        // C4 0393
        gbc.setState(0xd90e, 0x686a, 0x7380, 0x1930, 0x89e1, 0x3b50, 0x0, 0x0);
        gbc.writeMem(0xd90e, { 0xc4, 0x43, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x686a);
        EXPECT(gbc.pc(), 0xd911);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90e), 0xc4);
        EXPECT(gbc.readMem(0xd90f), 0x43);
        EXPECT(gbc.readMem(0xd910), 0xbc);
        // C4 0394
        gbc.setState(0xd5f8, 0xdf5b, 0xc850, 0x83b1, 0x815a, 0x8907, 0x0, 0x1);
        gbc.writeMem(0xd5f8, { 0xc4, 0x42, 0x30 });
        gbc.writeMem(0xdf59, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdf59);
        EXPECT(gbc.pc(), 0x3042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5f8), 0xc4);
        EXPECT(gbc.readMem(0xd5f9), 0x42);
        EXPECT(gbc.readMem(0xd5fa), 0x30);
        EXPECT(gbc.readMem(0xdf59), 0xfb);
        EXPECT(gbc.readMem(0xdf5a), 0xd5);
        // C4 0395
        gbc.setState(0x4fa7, 0x9f30, 0x5e10, 0x1c8d, 0x184c, 0x6dd3, 0x1, 0x0);
        gbc.writeMem(0x4fa7, { 0xc4, 0xaa, 0x40 });
        gbc.writeMem(0x9f2e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9f2e);
        EXPECT(gbc.pc(), 0x40aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f2e), 0xaa);
        EXPECT(gbc.readMem(0x9f2f), 0x4f);
        // C4 0396
        gbc.setState(0x8d4a, 0xd446, 0xeea0, 0xa767, 0x4d96, 0x4a3b, 0x0, 0x1);
        gbc.writeMem(0x8d4a, { 0xc4, 0xf8, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd446);
        EXPECT(gbc.pc(), 0x8d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d4a), 0xc4);
        EXPECT(gbc.readMem(0x8d4b), 0xf8);
        EXPECT(gbc.readMem(0x8d4c), 0x99);
        // C4 0398
        gbc.setState(0x7ce8, 0x8c51, 0x92f0, 0x5866, 0xe660, 0x1c77, 0x1, 0x1);
        gbc.writeMem(0x7ce8, { 0xc4, 0xe9, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8c51);
        EXPECT(gbc.pc(), 0x7ceb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 039A
        gbc.setState(0x76d5, 0x7a1f, 0x91e0, 0x6818, 0xca6a, 0xcedf, 0x0, 0x0);
        gbc.writeMem(0x76d5, { 0xc4, 0xb3, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7a1f);
        EXPECT(gbc.pc(), 0x76d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 039B
        gbc.setState(0x154d, 0x9de2, 0xd500, 0x5dc1, 0xe295, 0x46d, 0x1, 0x1);
        gbc.writeMem(0x154d, { 0xc4, 0x37, 0xf9 });
        gbc.writeMem(0x9de0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9de0);
        EXPECT(gbc.pc(), 0xf937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9de0), 0x50);
        EXPECT(gbc.readMem(0x9de1), 0x15);
        // C4 039D
        gbc.setState(0x2997, 0xace6, 0x6e80, 0xefc4, 0x3079, 0x9906, 0x1, 0x1);
        gbc.writeMem(0x2997, { 0xc4, 0x45, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xace6);
        EXPECT(gbc.pc(), 0x299a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 039E
        gbc.setState(0xd7ec, 0x5295, 0xf5c0, 0xd199, 0xfc3a, 0xfe0d, 0x1, 0x1);
        gbc.writeMem(0xd7ec, { 0xc4, 0xb0, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5295);
        EXPECT(gbc.pc(), 0xd7ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ec), 0xc4);
        EXPECT(gbc.readMem(0xd7ed), 0xb0);
        EXPECT(gbc.readMem(0xd7ee), 0x68);
        // C4 039F
        gbc.setState(0xee00, 0x8503, 0xa4c0, 0xcd9, 0x95a0, 0x49cd, 0x0, 0x0);
        gbc.writeMem(0xee00, { 0xc4, 0x7b, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8503);
        EXPECT(gbc.pc(), 0xee03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee00), 0xc4);
        EXPECT(gbc.readMem(0xee01), 0x7b);
        EXPECT(gbc.readMem(0xee02), 0x60);
        // C4 03A1
        gbc.setState(0x9184, 0xc75d, 0x72d0, 0x4e14, 0xa516, 0x233a, 0x0, 0x1);
        gbc.writeMem(0x9184, { 0xc4, 0xf7, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc75d);
        EXPECT(gbc.pc(), 0x9187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9184), 0xc4);
        EXPECT(gbc.readMem(0x9185), 0xf7);
        EXPECT(gbc.readMem(0x9186), 0x82);
        // C4 03A2
        gbc.setState(0xa55b, 0x3f0f, 0xb4a0, 0xbc58, 0xfd4, 0x5e27, 0x1, 0x0);
        gbc.writeMem(0xa55b, { 0xc4, 0xb1, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3f0f);
        EXPECT(gbc.pc(), 0xa55e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa55b), 0xc4);
        EXPECT(gbc.readMem(0xa55c), 0xb1);
        EXPECT(gbc.readMem(0xa55d), 0xf0);
        // C4 03A3
        gbc.setState(0x432b, 0xd1d8, 0x8b10, 0xe87e, 0xda83, 0xc550, 0x1, 0x0);
        gbc.writeMem(0x432b, { 0xc4, 0x11, 0x29 });
        gbc.writeMem(0xd1d6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd1d6);
        EXPECT(gbc.pc(), 0x2911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d6), 0x2e);
        EXPECT(gbc.readMem(0xd1d7), 0x43);
        // C4 03A4
        gbc.setState(0x37fc, 0xc2d2, 0x37d0, 0x813a, 0xd461, 0x3a12, 0x1, 0x1);
        gbc.writeMem(0x37fc, { 0xc4, 0x20, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc2d2);
        EXPECT(gbc.pc(), 0x37ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 03A6
        gbc.setState(0x336c, 0x1378, 0xf8a0, 0xa848, 0xbccc, 0xe603, 0x0, 0x0);
        gbc.writeMem(0x336c, { 0xc4, 0x48, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1378);
        EXPECT(gbc.pc(), 0x336f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 03A8
        gbc.setState(0xd76f, 0x5147, 0x2890, 0x739e, 0xc914, 0xfdb7, 0x0, 0x0);
        gbc.writeMem(0xd76f, { 0xc4, 0x1a, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5147);
        EXPECT(gbc.pc(), 0xd772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd76f), 0xc4);
        EXPECT(gbc.readMem(0xd770), 0x1a);
        EXPECT(gbc.readMem(0xd771), 0x29);
        // C4 03A9
        gbc.setState(0x409f, 0xb639, 0x2050, 0xfd5d, 0xfa99, 0xfe45, 0x1, 0x0);
        gbc.writeMem(0x409f, { 0xc4, 0xed, 0xc1 });
        gbc.writeMem(0xb637, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xb637);
        EXPECT(gbc.pc(), 0xc1ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb637), 0xa2);
        EXPECT(gbc.readMem(0xb638), 0x40);
        // C4 03AA
        gbc.setState(0xc89d, 0x3240, 0x74b0, 0xaba, 0x3ada, 0xb9a4, 0x0, 0x1);
        gbc.writeMem(0xc89d, { 0xc4, 0x5a, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3240);
        EXPECT(gbc.pc(), 0xc8a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc89d), 0xc4);
        EXPECT(gbc.readMem(0xc89e), 0x5a);
        EXPECT(gbc.readMem(0xc89f), 0x75);
        // C4 03AB
        gbc.setState(0x4791, 0xcc65, 0x6f70, 0xb886, 0x952d, 0x7951, 0x0, 0x1);
        gbc.writeMem(0x4791, { 0xc4, 0xf7, 0x1a });
        gbc.writeMem(0xcc63, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xcc63);
        EXPECT(gbc.pc(), 0x1af7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc63), 0x94);
        EXPECT(gbc.readMem(0xcc64), 0x47);
        // C4 03AD
        gbc.setState(0x7ef9, 0x1e13, 0x76c0, 0x45cd, 0xba26, 0xd9e3, 0x0, 0x0);
        gbc.writeMem(0x7ef9, { 0xc4, 0x83, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1e13);
        EXPECT(gbc.pc(), 0x7efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 03AE
        gbc.setState(0x6957, 0x3025, 0x69b0, 0x66be, 0x1439, 0xd6eb, 0x1, 0x0);
        gbc.writeMem(0x6957, { 0xc4, 0xcd, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3025);
        EXPECT(gbc.pc(), 0x695a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 03AF
        gbc.setState(0x71f7, 0x948f, 0xe2e0, 0xcac0, 0x4a95, 0x1c32, 0x0, 0x0);
        gbc.writeMem(0x71f7, { 0xc4, 0xfb, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x948f);
        EXPECT(gbc.pc(), 0x71fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 03B0
        gbc.setState(0x808c, 0xc587, 0xbd20, 0xfa78, 0x454, 0x81e4, 0x1, 0x1);
        gbc.writeMem(0x808c, { 0xc4, 0x3f, 0x5c });
        gbc.writeMem(0xc585, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc585);
        EXPECT(gbc.pc(), 0x5c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808c), 0xc4);
        EXPECT(gbc.readMem(0x808d), 0x3f);
        EXPECT(gbc.readMem(0x808e), 0x5c);
        EXPECT(gbc.readMem(0xc585), 0x8f);
        EXPECT(gbc.readMem(0xc586), 0x80);
        // C4 03B2
        gbc.setState(0x581a, 0x783b, 0x8790, 0x8573, 0xcc, 0x1c4e, 0x1, 0x0);
        gbc.writeMem(0x581a, { 0xc4, 0xa4, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x783b);
        EXPECT(gbc.pc(), 0x581d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 03B3
        gbc.setState(0x8939, 0x67a, 0x2bd0, 0xa918, 0x1cb4, 0xb63e, 0x1, 0x0);
        gbc.writeMem(0x8939, { 0xc4, 0x1, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x67a);
        EXPECT(gbc.pc(), 0x893c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8939), 0xc4);
        EXPECT(gbc.readMem(0x893a), 0x1);
        EXPECT(gbc.readMem(0x893b), 0xef);
        // C4 03B6
        gbc.setState(0x9412, 0xda45, 0xb560, 0x1fd6, 0x59e0, 0xc82, 0x0, 0x0);
        gbc.writeMem(0x9412, { 0xc4, 0xbd, 0x40 });
        gbc.writeMem(0xda43, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xda43);
        EXPECT(gbc.pc(), 0x40bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9412), 0xc4);
        EXPECT(gbc.readMem(0x9413), 0xbd);
        EXPECT(gbc.readMem(0x9414), 0x40);
        EXPECT(gbc.readMem(0xda43), 0x15);
        EXPECT(gbc.readMem(0xda44), 0x94);
        // C4 03B7
        gbc.setState(0x6391, 0xa29d, 0x5050, 0x4a9d, 0xf356, 0xd3e9, 0x1, 0x0);
        gbc.writeMem(0x6391, { 0xc4, 0x1f, 0xe });
        gbc.writeMem(0xa29b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa29b);
        EXPECT(gbc.pc(), 0xe1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29b), 0x94);
        EXPECT(gbc.readMem(0xa29c), 0x63);
        // C4 03B8
        gbc.setState(0x3709, 0xec7d, 0xa320, 0xb641, 0x7919, 0x2b34, 0x1, 0x1);
        gbc.writeMem(0x3709, { 0xc4, 0x2f, 0x42 });
        gbc.writeMem(0xec7b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xec7b);
        EXPECT(gbc.pc(), 0x422f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7b), 0xc);
        EXPECT(gbc.readMem(0xec7c), 0x37);
        // C4 03B9
        gbc.setState(0xbf4e, 0x8da3, 0xc850, 0x96aa, 0xc7c6, 0xba67, 0x0, 0x0);
        gbc.writeMem(0x8da1, { 0x0, 0x0 });
        gbc.writeMem(0xbf4e, { 0xc4, 0xa9, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8da1);
        EXPECT(gbc.pc(), 0xd0a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da1), 0x51);
        EXPECT(gbc.readMem(0x8da2), 0xbf);
        EXPECT(gbc.readMem(0xbf4e), 0xc4);
        EXPECT(gbc.readMem(0xbf4f), 0xa9);
        EXPECT(gbc.readMem(0xbf50), 0xd0);
        // C4 03BA
        gbc.setState(0xa2d, 0xc690, 0x59a0, 0x1dd1, 0xbeb2, 0x1a1d, 0x0, 0x0);
        gbc.writeMem(0xa2d, { 0xc4, 0x4f, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc690);
        EXPECT(gbc.pc(), 0xa30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 03BB
        gbc.setState(0x9d8a, 0xe5c4, 0x49e0, 0xdbec, 0xb4c5, 0x1322, 0x0, 0x1);
        gbc.writeMem(0x9d8a, { 0xc4, 0xfa, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe5c4);
        EXPECT(gbc.pc(), 0x9d8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d8a), 0xc4);
        EXPECT(gbc.readMem(0x9d8b), 0xfa);
        EXPECT(gbc.readMem(0x9d8c), 0x5b);
        // C4 03BC
        gbc.setState(0x54a3, 0x7580, 0x81c0, 0xb12, 0xbfa1, 0x7564, 0x1, 0x1);
        gbc.writeMem(0x54a3, { 0xc4, 0x52, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7580);
        EXPECT(gbc.pc(), 0x54a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 03BD
        gbc.setState(0x1751, 0xd6f0, 0x31d0, 0xf373, 0xa10c, 0x91a7, 0x1, 0x1);
        gbc.writeMem(0x1751, { 0xc4, 0x23, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd6f0);
        EXPECT(gbc.pc(), 0x1754);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C4 03BE
        gbc.setState(0xbdf2, 0xdc51, 0xa440, 0x12a6, 0xd5df, 0xb4b3, 0x1, 0x1);
        gbc.writeMem(0xbdf2, { 0xc4, 0x93, 0x57 });
        gbc.writeMem(0xdc4f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdc4f);
        EXPECT(gbc.pc(), 0x5793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf2), 0xc4);
        EXPECT(gbc.readMem(0xbdf3), 0x93);
        EXPECT(gbc.readMem(0xbdf4), 0x57);
        EXPECT(gbc.readMem(0xdc4f), 0xf5);
        EXPECT(gbc.readMem(0xdc50), 0xbd);
        // C4 03C0
        gbc.setState(0x70dd, 0x13b6, 0x94c0, 0x81db, 0x9f25, 0x5e54, 0x0, 0x0);
        gbc.writeMem(0x70dd, { 0xc4, 0xb9, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x13b6);
        EXPECT(gbc.pc(), 0x70e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 03C1
        gbc.setState(0x24f, 0x8c93, 0xe960, 0x16a0, 0xcfcf, 0xd213, 0x0, 0x0);
        gbc.writeMem(0x24f, { 0xc4, 0xf6, 0x9f });
        gbc.writeMem(0x8c91, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8c91);
        EXPECT(gbc.pc(), 0x9ff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c91), 0x52);
        EXPECT(gbc.readMem(0x8c92), 0x2);
        // C4 03C2
        gbc.setState(0x6108, 0xbb67, 0xa000, 0x1199, 0xb39c, 0x31ca, 0x0, 0x0);
        gbc.writeMem(0x6108, { 0xc4, 0x9a, 0xc3 });
        gbc.writeMem(0xbb65, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbb65);
        EXPECT(gbc.pc(), 0xc39a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb65), 0xb);
        EXPECT(gbc.readMem(0xbb66), 0x61);
        // C4 03C3
        gbc.setState(0x4a45, 0x2523, 0x8bf0, 0xd5eb, 0x32ed, 0xd1f, 0x0, 0x1);
        gbc.writeMem(0x4a45, { 0xc4, 0x10, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2523);
        EXPECT(gbc.pc(), 0x4a48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C4 03C4
        gbc.setState(0xd93d, 0xe6c7, 0xb510, 0x1b60, 0xed35, 0xe863, 0x1, 0x1);
        gbc.writeMem(0xd93d, { 0xc4, 0x13, 0xae });
        gbc.writeMem(0xe6c5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe6c5);
        EXPECT(gbc.pc(), 0xae13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd93d), 0xc4);
        EXPECT(gbc.readMem(0xd93e), 0x13);
        EXPECT(gbc.readMem(0xd93f), 0xae);
        EXPECT(gbc.readMem(0xe6c5), 0x40);
        EXPECT(gbc.readMem(0xe6c6), 0xd9);
        // C4 03C5
        gbc.setState(0x9ae9, 0xb1d4, 0x9fb0, 0xcacd, 0xfb06, 0x8754, 0x0, 0x0);
        gbc.writeMem(0x9ae9, { 0xc4, 0x13, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb1d4);
        EXPECT(gbc.pc(), 0x9aec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae9), 0xc4);
        EXPECT(gbc.readMem(0x9aea), 0x13);
        EXPECT(gbc.readMem(0x9aeb), 0x91);
        // C4 03C6
        gbc.setState(0xa731, 0xdee5, 0x5340, 0x8bcb, 0xa0a3, 0xa369, 0x1, 0x0);
        gbc.writeMem(0xa731, { 0xc4, 0xed, 0x2d });
        gbc.writeMem(0xdee3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xdee3);
        EXPECT(gbc.pc(), 0x2ded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa731), 0xc4);
        EXPECT(gbc.readMem(0xa732), 0xed);
        EXPECT(gbc.readMem(0xa733), 0x2d);
        EXPECT(gbc.readMem(0xdee3), 0x34);
        EXPECT(gbc.readMem(0xdee4), 0xa7);
        // C4 03C7
        gbc.setState(0xd983, 0xc9e6, 0x280, 0x9f42, 0xcc28, 0xe13, 0x1, 0x0);
        gbc.writeMem(0xd983, { 0xc4, 0x42, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc9e6);
        EXPECT(gbc.pc(), 0xd986);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd983), 0xc4);
        EXPECT(gbc.readMem(0xd984), 0x42);
        EXPECT(gbc.readMem(0xd985), 0x55);
        // C4 03C8
        gbc.setState(0x7d1b, 0xcd39, 0x1b40, 0x2f61, 0xcb4b, 0x8a18, 0x1, 0x0);
        gbc.writeMem(0x7d1b, { 0xc4, 0x24, 0x26 });
        gbc.writeMem(0xcd37, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xcd37);
        EXPECT(gbc.pc(), 0x2624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd37), 0x1e);
        EXPECT(gbc.readMem(0xcd38), 0x7d);
        // C4 03C9
        gbc.setState(0x6a93, 0xcbf2, 0x610, 0x6c20, 0xec35, 0x34e4, 0x1, 0x1);
        gbc.writeMem(0x6a93, { 0xc4, 0x76, 0x4b });
        gbc.writeMem(0xcbf0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcbf0);
        EXPECT(gbc.pc(), 0x4b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf0), 0x96);
        EXPECT(gbc.readMem(0xcbf1), 0x6a);
        // C4 03CA
        gbc.setState(0xcf57, 0xc6b2, 0x91e0, 0x36cb, 0xdd5d, 0x9a3e, 0x1, 0x0);
        gbc.writeMem(0xcf57, { 0xc4, 0xa1, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc6b2);
        EXPECT(gbc.pc(), 0xcf5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf57), 0xc4);
        EXPECT(gbc.readMem(0xcf58), 0xa1);
        EXPECT(gbc.readMem(0xcf59), 0x6e);
        // C4 03CB
        gbc.setState(0x389c, 0xbf1d, 0xeca0, 0xa525, 0xe32a, 0x5d87, 0x0, 0x1);
        gbc.writeMem(0x389c, { 0xc4, 0xe4, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbf1d);
        EXPECT(gbc.pc(), 0x389f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 03CF
        gbc.setState(0x4099, 0xec69, 0x9250, 0xf3ce, 0xb86, 0x4db, 0x1, 0x0);
        gbc.writeMem(0x4099, { 0xc4, 0x78, 0x28 });
        gbc.writeMem(0xec67, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xec67);
        EXPECT(gbc.pc(), 0x2878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec67), 0x9c);
        EXPECT(gbc.readMem(0xec68), 0x40);
        // C4 03D1
        gbc.setState(0x7c48, 0xaa0d, 0xf0c0, 0x2614, 0xa5e5, 0xe126, 0x1, 0x1);
        gbc.writeMem(0x7c48, { 0xc4, 0x8f, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xaa0d);
        EXPECT(gbc.pc(), 0x7c4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 03D2
        gbc.setState(0xc485, 0xf009, 0x5a0, 0x9a5f, 0xb813, 0x16d9, 0x1, 0x0);
        gbc.writeMem(0xc485, { 0xc4, 0x9e, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf009);
        EXPECT(gbc.pc(), 0xc488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc485), 0xc4);
        EXPECT(gbc.readMem(0xc486), 0x9e);
        EXPECT(gbc.readMem(0xc487), 0xa0);
        // C4 03D5
        gbc.setState(0x5101, 0x89b9, 0x1170, 0x7614, 0x5c1c, 0x4ff1, 0x0, 0x0);
        gbc.writeMem(0x5101, { 0xc4, 0xec, 0xbf });
        gbc.writeMem(0x89b7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x89b7);
        EXPECT(gbc.pc(), 0xbfec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b7), 0x4);
        EXPECT(gbc.readMem(0x89b8), 0x51);
        // C4 03D6
        gbc.setState(0xd246, 0xb796, 0xb210, 0xfcdc, 0xedce, 0x77f2, 0x0, 0x0);
        gbc.writeMem(0xb794, { 0x0, 0x0 });
        gbc.writeMem(0xd246, { 0xc4, 0xdd, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb794);
        EXPECT(gbc.pc(), 0xebdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb794), 0x49);
        EXPECT(gbc.readMem(0xb795), 0xd2);
        EXPECT(gbc.readMem(0xd246), 0xc4);
        EXPECT(gbc.readMem(0xd247), 0xdd);
        EXPECT(gbc.readMem(0xd248), 0xeb);
        // C4 03D7
        gbc.setState(0xc164, 0xef31, 0xb240, 0x4841, 0x63e4, 0x5730, 0x0, 0x0);
        gbc.writeMem(0xc164, { 0xc4, 0x69, 0x5c });
        gbc.writeMem(0xef2f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xef2f);
        EXPECT(gbc.pc(), 0x5c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc164), 0xc4);
        EXPECT(gbc.readMem(0xc165), 0x69);
        EXPECT(gbc.readMem(0xc166), 0x5c);
        EXPECT(gbc.readMem(0xef2f), 0x67);
        EXPECT(gbc.readMem(0xef30), 0xc1);
        // C4 03D8
        gbc.setState(0xec38, 0xf590, 0x12b0, 0x5489, 0x4077, 0x4a3a, 0x1, 0x0);
        gbc.writeMem(0xec38, { 0xc4, 0xe0, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf590);
        EXPECT(gbc.pc(), 0xec3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec38), 0xc4);
        EXPECT(gbc.readMem(0xec39), 0xe0);
        EXPECT(gbc.readMem(0xec3a), 0x2b);
        // C4 03DB
        gbc.setState(0x371, 0xe075, 0xa730, 0x9fed, 0xd820, 0xe13b, 0x1, 0x1);
        gbc.writeMem(0x371, { 0xc4, 0xf3, 0x7 });
        gbc.writeMem(0xe073, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe073);
        EXPECT(gbc.pc(), 0x7f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe073), 0x74);
        EXPECT(gbc.readMem(0xe074), 0x3);
        // C4 03DD
        gbc.setState(0x6a72, 0xf773, 0x2ca0, 0x7b8, 0x9f0d, 0x9f89, 0x0, 0x1);
        gbc.writeMem(0x6a72, { 0xc4, 0x64, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf773);
        EXPECT(gbc.pc(), 0x6a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C4 03DE
        gbc.setState(0xcc16, 0x90b1, 0x72d0, 0xc822, 0xea11, 0xe20e, 0x0, 0x0);
        gbc.writeMem(0xcc16, { 0xc4, 0x4f, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x90b1);
        EXPECT(gbc.pc(), 0xcc19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc16), 0xc4);
        EXPECT(gbc.readMem(0xcc17), 0x4f);
        EXPECT(gbc.readMem(0xcc18), 0xbb);
        // C4 03DF
        gbc.setState(0xd26b, 0x5216, 0x73c0, 0xe54d, 0x36b6, 0xd992, 0x0, 0x0);
        gbc.writeMem(0xd26b, { 0xc4, 0xd0, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5216);
        EXPECT(gbc.pc(), 0xd26e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26b), 0xc4);
        EXPECT(gbc.readMem(0xd26c), 0xd0);
        EXPECT(gbc.readMem(0xd26d), 0xe7);
        // C4 03E0
        gbc.setState(0x468e, 0x4c20, 0x880, 0x4895, 0x3e23, 0x70b6, 0x0, 0x0);
        gbc.writeMem(0x468e, { 0xc4, 0x2f, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4c20);
        EXPECT(gbc.pc(), 0x4691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 03E2
        gbc.setState(0x78ea, 0xd513, 0x5750, 0x1ca5, 0x8bf1, 0xac91, 0x0, 0x0);
        gbc.writeMem(0x78ea, { 0xc4, 0xc1, 0xfc });
        gbc.writeMem(0xd511, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd511);
        EXPECT(gbc.pc(), 0xfcc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd511), 0xed);
        EXPECT(gbc.readMem(0xd512), 0x78);
        // C4 03E3
        gbc.setState(0xe035, 0xb91e, 0x5480, 0xab76, 0xc6a4, 0x888b, 0x0, 0x0);
        gbc.writeMem(0xe035, { 0xc4, 0xd6, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb91e);
        EXPECT(gbc.pc(), 0xe038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe035), 0xc4);
        EXPECT(gbc.readMem(0xe036), 0xd6);
        EXPECT(gbc.readMem(0xe037), 0x5c);
        // C4 03E4
        gbc.setState(0xd7d8, 0xc80a, 0x8250, 0xf80b, 0x5c5d, 0x5ef5, 0x0, 0x1);
        gbc.writeMem(0xc808, { 0x0, 0x0 });
        gbc.writeMem(0xd7d8, { 0xc4, 0xdf, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc808);
        EXPECT(gbc.pc(), 0xb0df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc808), 0xdb);
        EXPECT(gbc.readMem(0xc809), 0xd7);
        EXPECT(gbc.readMem(0xd7d8), 0xc4);
        EXPECT(gbc.readMem(0xd7d9), 0xdf);
        EXPECT(gbc.readMem(0xd7da), 0xb0);
        // C4 03E5
        gbc.setState(0xb5e6, 0xa2f2, 0xa8f0, 0x432b, 0xae7b, 0x5e47, 0x1, 0x0);
        gbc.writeMem(0xb5e6, { 0xc4, 0x35, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa2f2);
        EXPECT(gbc.pc(), 0xb5e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5e6), 0xc4);
        EXPECT(gbc.readMem(0xb5e7), 0x35);
        EXPECT(gbc.readMem(0xb5e8), 0x27);
        // C4 03E6
        gbc.setState(0xeb, 0x2844, 0xefc0, 0xbfa1, 0xd9d5, 0x2bf8, 0x1, 0x1);
        gbc.writeMem(0xeb, { 0xc4, 0x97, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2844);
        EXPECT(gbc.pc(), 0xee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C4 03E7
        gbc.setState(0xd0b8, 0xe671, 0xaa40, 0x6fff, 0x76f6, 0x5433, 0x0, 0x1);
        gbc.writeMem(0xd0b8, { 0xc4, 0xa6, 0xdb });
        gbc.writeMem(0xe66f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe66f);
        EXPECT(gbc.pc(), 0xdba6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b8), 0xc4);
        EXPECT(gbc.readMem(0xd0b9), 0xa6);
        EXPECT(gbc.readMem(0xd0ba), 0xdb);
        EXPECT(gbc.readMem(0xe66f), 0xbb);
        EXPECT(gbc.readMem(0xe670), 0xd0);
    }
