#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_5a)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_5a) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 5A 0000
        gbc.setState(0x9f88, 0x3f38, 0x910, 0x4315, 0xcd74, 0x3aa7, 0x1, 0x0);
        gbc.writeMem(0x9f88, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3f38);
        EXPECT(gbc.pc(), 0x9f8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f88), 0xcb);
        EXPECT(gbc.readMem(0x9f89), 0x5a);
        // CB 5A 0001
        gbc.setState(0x3918, 0x895e, 0x1fc0, 0x71e2, 0xc1e5, 0xc654, 0x1, 0x0);
        gbc.writeMem(0x3918, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x895e);
        EXPECT(gbc.pc(), 0x391a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0002
        gbc.setState(0xeec0, 0xd3f, 0xacd0, 0x5e0e, 0x386c, 0xb06d, 0x1, 0x1);
        gbc.writeMem(0xeec0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd3f);
        EXPECT(gbc.pc(), 0xeec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeec0), 0xcb);
        EXPECT(gbc.readMem(0xeec1), 0x5a);
        // CB 5A 0003
        gbc.setState(0xb67f, 0xd6ba, 0xdf40, 0xacd1, 0xf296, 0xc1db, 0x0, 0x0);
        gbc.writeMem(0xb67f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xd6ba);
        EXPECT(gbc.pc(), 0xb681);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb67f), 0xcb);
        EXPECT(gbc.readMem(0xb680), 0x5a);
        // CB 5A 0004
        gbc.setState(0x5bd4, 0xa07d, 0x6880, 0x4d99, 0xa3d7, 0xd96c, 0x1, 0x0);
        gbc.writeMem(0x5bd4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa07d);
        EXPECT(gbc.pc(), 0x5bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0005
        gbc.setState(0x3351, 0xdeca, 0x790, 0x86c1, 0x2c6f, 0xf056, 0x1, 0x0);
        gbc.writeMem(0x3351, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdeca);
        EXPECT(gbc.pc(), 0x3353);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0007
        gbc.setState(0xa25f, 0x8dca, 0x82e0, 0xde60, 0x9dbb, 0xe0f8, 0x1, 0x1);
        gbc.writeMem(0xa25f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8dca);
        EXPECT(gbc.pc(), 0xa261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa25f), 0xcb);
        EXPECT(gbc.readMem(0xa260), 0x5a);
        // CB 5A 0008
        gbc.setState(0x8d99, 0x34f4, 0x4170, 0x38dc, 0x7bf2, 0x6e02, 0x0, 0x1);
        gbc.writeMem(0x8d99, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x34f4);
        EXPECT(gbc.pc(), 0x8d9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d99), 0xcb);
        EXPECT(gbc.readMem(0x8d9a), 0x5a);
        // CB 5A 0009
        gbc.setState(0xcdb8, 0xe8aa, 0x92f0, 0x9691, 0x1282, 0x1639, 0x0, 0x0);
        gbc.writeMem(0xcdb8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe8aa);
        EXPECT(gbc.pc(), 0xcdba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdb8), 0xcb);
        EXPECT(gbc.readMem(0xcdb9), 0x5a);
        // CB 5A 000A
        gbc.setState(0x2c4e, 0xc8cb, 0xc7f0, 0x5ffd, 0xd7a2, 0x2d4d, 0x1, 0x0);
        gbc.writeMem(0x2c4e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc8cb);
        EXPECT(gbc.pc(), 0x2c50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 000B
        gbc.setState(0xab36, 0xc649, 0x8350, 0xcae4, 0x715c, 0x1d50, 0x1, 0x0);
        gbc.writeMem(0xab36, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc649);
        EXPECT(gbc.pc(), 0xab38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab36), 0xcb);
        EXPECT(gbc.readMem(0xab37), 0x5a);
        // CB 5A 000C
        gbc.setState(0x4323, 0x3a7c, 0x8b00, 0x1605, 0xd181, 0x8a99, 0x0, 0x0);
        gbc.writeMem(0x4323, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3a7c);
        EXPECT(gbc.pc(), 0x4325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 000D
        gbc.setState(0xa1a7, 0xf20f, 0x4400, 0x8cf5, 0xd1fe, 0xe4e2, 0x1, 0x0);
        gbc.writeMem(0xa1a7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf20f);
        EXPECT(gbc.pc(), 0xa1a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a7), 0xcb);
        EXPECT(gbc.readMem(0xa1a8), 0x5a);
        // CB 5A 000E
        gbc.setState(0x169d, 0x22, 0xaa10, 0xb246, 0xa028, 0xd51a, 0x0, 0x1);
        gbc.writeMem(0x169d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x22);
        EXPECT(gbc.pc(), 0x169f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 000F
        gbc.setState(0x1c25, 0x5389, 0xade0, 0x155d, 0x8615, 0xdf7e, 0x1, 0x0);
        gbc.writeMem(0x1c25, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5389);
        EXPECT(gbc.pc(), 0x1c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0010
        gbc.setState(0x62a7, 0xb453, 0x5d0, 0xbbe2, 0x2f06, 0xcbb3, 0x0, 0x1);
        gbc.writeMem(0x62a7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb453);
        EXPECT(gbc.pc(), 0x62a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0011
        gbc.setState(0xd312, 0x7e85, 0xd7d0, 0xcd08, 0x777b, 0x399c, 0x0, 0x0);
        gbc.writeMem(0xd312, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7e85);
        EXPECT(gbc.pc(), 0xd314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd312), 0xcb);
        EXPECT(gbc.readMem(0xd313), 0x5a);
        // CB 5A 0012
        gbc.setState(0xac9d, 0x60da, 0x30e0, 0x4769, 0x9979, 0x5b91, 0x1, 0x0);
        gbc.writeMem(0xac9d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x60da);
        EXPECT(gbc.pc(), 0xac9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac9d), 0xcb);
        EXPECT(gbc.readMem(0xac9e), 0x5a);
        // CB 5A 0013
        gbc.setState(0x860d, 0x282a, 0x3390, 0x249a, 0xfc3, 0x3de3, 0x0, 0x0);
        gbc.writeMem(0x860d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x282a);
        EXPECT(gbc.pc(), 0x860f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x860d), 0xcb);
        EXPECT(gbc.readMem(0x860e), 0x5a);
        // CB 5A 0014
        gbc.setState(0xabbc, 0x11ec, 0x8c80, 0x4f97, 0xd63a, 0x75c2, 0x1, 0x0);
        gbc.writeMem(0xabbc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x11ec);
        EXPECT(gbc.pc(), 0xabbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbc), 0xcb);
        EXPECT(gbc.readMem(0xabbd), 0x5a);
        // CB 5A 0015
        gbc.setState(0x465c, 0xa045, 0xc810, 0x2fcb, 0x95b7, 0xaac4, 0x0, 0x1);
        gbc.writeMem(0x465c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa045);
        EXPECT(gbc.pc(), 0x465e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0016
        gbc.setState(0x93bc, 0x2627, 0xea50, 0x6943, 0x4a4a, 0xdd41, 0x0, 0x0);
        gbc.writeMem(0x93bc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2627);
        EXPECT(gbc.pc(), 0x93be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93bc), 0xcb);
        EXPECT(gbc.readMem(0x93bd), 0x5a);
        // CB 5A 0017
        gbc.setState(0x2d80, 0xeab8, 0xc540, 0xc6a3, 0x9f9f, 0x44b1, 0x0, 0x0);
        gbc.writeMem(0x2d80, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xeab8);
        EXPECT(gbc.pc(), 0x2d82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0018
        gbc.setState(0x79ef, 0xa73d, 0x2f00, 0x2290, 0xc882, 0x13d9, 0x0, 0x1);
        gbc.writeMem(0x79ef, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa73d);
        EXPECT(gbc.pc(), 0x79f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0019
        gbc.setState(0xab0a, 0xd76a, 0x8e0, 0x831d, 0xd4ca, 0xbbfb, 0x1, 0x1);
        gbc.writeMem(0xab0a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xd76a);
        EXPECT(gbc.pc(), 0xab0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab0a), 0xcb);
        EXPECT(gbc.readMem(0xab0b), 0x5a);
        // CB 5A 001A
        gbc.setState(0x43ed, 0x62ee, 0xaab0, 0x2248, 0xfc81, 0x4603, 0x1, 0x0);
        gbc.writeMem(0x43ed, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x62ee);
        EXPECT(gbc.pc(), 0x43ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 001B
        gbc.setState(0xe7db, 0x4f2, 0xba90, 0xbcfa, 0xea9f, 0x8cf, 0x0, 0x1);
        gbc.writeMem(0xe7db, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4f2);
        EXPECT(gbc.pc(), 0xe7dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7db), 0xcb);
        EXPECT(gbc.readMem(0xe7dc), 0x5a);
        // CB 5A 001C
        gbc.setState(0x63d5, 0x302f, 0x760, 0x28f, 0x2e0f, 0xf184, 0x0, 0x1);
        gbc.writeMem(0x63d5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x302f);
        EXPECT(gbc.pc(), 0x63d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 001D
        gbc.setState(0xad8e, 0xcfb7, 0x3520, 0x5b37, 0xa5b4, 0x46c6, 0x0, 0x1);
        gbc.writeMem(0xad8e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xcfb7);
        EXPECT(gbc.pc(), 0xad90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8e), 0xcb);
        EXPECT(gbc.readMem(0xad8f), 0x5a);
        // CB 5A 001E
        gbc.setState(0x3cf8, 0x1f5e, 0xbc70, 0x57d5, 0x2b23, 0x19b0, 0x0, 0x1);
        gbc.writeMem(0x3cf8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1f5e);
        EXPECT(gbc.pc(), 0x3cfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 001F
        gbc.setState(0xab1c, 0x902d, 0x7a20, 0x9a23, 0x93, 0xbd00, 0x1, 0x0);
        gbc.writeMem(0xab1c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x902d);
        EXPECT(gbc.pc(), 0xab1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab1c), 0xcb);
        EXPECT(gbc.readMem(0xab1d), 0x5a);
        // CB 5A 0020
        gbc.setState(0xa867, 0x8aa7, 0x6ec0, 0xa1ab, 0xd7e6, 0x320c, 0x0, 0x1);
        gbc.writeMem(0xa867, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8aa7);
        EXPECT(gbc.pc(), 0xa869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa867), 0xcb);
        EXPECT(gbc.readMem(0xa868), 0x5a);
        // CB 5A 0021
        gbc.setState(0xe176, 0xf1c9, 0x62d0, 0x1349, 0xac22, 0x4f0, 0x1, 0x1);
        gbc.writeMem(0xe176, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf1c9);
        EXPECT(gbc.pc(), 0xe178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe176), 0xcb);
        EXPECT(gbc.readMem(0xe177), 0x5a);
        // CB 5A 0022
        gbc.setState(0xff2, 0x8ce7, 0x7a00, 0xa1cd, 0x533e, 0xba76, 0x0, 0x1);
        gbc.writeMem(0xff2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8ce7);
        EXPECT(gbc.pc(), 0xff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0023
        gbc.setState(0xef0d, 0xc82f, 0xee80, 0x5b6f, 0x7800, 0x3a64, 0x0, 0x1);
        gbc.writeMem(0xef0d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc82f);
        EXPECT(gbc.pc(), 0xef0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef0d), 0xcb);
        EXPECT(gbc.readMem(0xef0e), 0x5a);
        // CB 5A 0024
        gbc.setState(0x19e8, 0xa2db, 0xa390, 0xf809, 0x1b79, 0xaf2c, 0x1, 0x0);
        gbc.writeMem(0x19e8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa2db);
        EXPECT(gbc.pc(), 0x19ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0026
        gbc.setState(0xc0b3, 0xdd27, 0xe090, 0x2f74, 0x2bd2, 0x2646, 0x0, 0x1);
        gbc.writeMem(0xc0b3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdd27);
        EXPECT(gbc.pc(), 0xc0b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b3), 0xcb);
        EXPECT(gbc.readMem(0xc0b4), 0x5a);
        // CB 5A 0027
        gbc.setState(0x65c7, 0x2009, 0x63a0, 0x23d2, 0xb072, 0x34c4, 0x0, 0x0);
        gbc.writeMem(0x65c7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2009);
        EXPECT(gbc.pc(), 0x65c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0028
        gbc.setState(0x9c6f, 0x121d, 0xa3a0, 0xb98e, 0x77e8, 0x6116, 0x0, 0x0);
        gbc.writeMem(0x9c6f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x121d);
        EXPECT(gbc.pc(), 0x9c71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c6f), 0xcb);
        EXPECT(gbc.readMem(0x9c70), 0x5a);
        // CB 5A 0029
        gbc.setState(0x5a00, 0x63a0, 0x2a10, 0x3284, 0xdd2a, 0xeab7, 0x1, 0x1);
        gbc.writeMem(0x5a00, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x63a0);
        EXPECT(gbc.pc(), 0x5a02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 002A
        gbc.setState(0x735f, 0xbcf5, 0x590, 0xdd60, 0x7ce0, 0x52dd, 0x0, 0x0);
        gbc.writeMem(0x735f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbcf5);
        EXPECT(gbc.pc(), 0x7361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 002B
        gbc.setState(0x8a4f, 0x4e3d, 0xac70, 0x915f, 0x6fdb, 0x6bdc, 0x0, 0x0);
        gbc.writeMem(0x8a4f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4e3d);
        EXPECT(gbc.pc(), 0x8a51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a4f), 0xcb);
        EXPECT(gbc.readMem(0x8a50), 0x5a);
        // CB 5A 002C
        gbc.setState(0x7c60, 0xdeea, 0x55c0, 0x365f, 0x9dee, 0xfe0b, 0x1, 0x1);
        gbc.writeMem(0x7c60, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdeea);
        EXPECT(gbc.pc(), 0x7c62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 002D
        gbc.setState(0x5db2, 0x21b0, 0x5220, 0xa12a, 0xd151, 0x1d21, 0x1, 0x0);
        gbc.writeMem(0x5db2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x21b0);
        EXPECT(gbc.pc(), 0x5db4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 002E
        gbc.setState(0xe6, 0x592e, 0x6b00, 0x1ba5, 0x62bb, 0x2d38, 0x0, 0x1);
        gbc.writeMem(0xe6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x592e);
        EXPECT(gbc.pc(), 0xe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 002F
        gbc.setState(0x1b70, 0xef2d, 0xd9a0, 0xea22, 0xd908, 0xebfc, 0x1, 0x1);
        gbc.writeMem(0x1b70, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xef2d);
        EXPECT(gbc.pc(), 0x1b72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0030
        gbc.setState(0xc3cc, 0x87b9, 0x970, 0x5fc4, 0xc6cc, 0x9e43, 0x0, 0x1);
        gbc.writeMem(0xc3cc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x87b9);
        EXPECT(gbc.pc(), 0xc3ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3cc), 0xcb);
        EXPECT(gbc.readMem(0xc3cd), 0x5a);
        // CB 5A 0031
        gbc.setState(0x93a5, 0xa2e5, 0x2f30, 0x5449, 0x1fa0, 0x27f5, 0x0, 0x1);
        gbc.writeMem(0x93a5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa2e5);
        EXPECT(gbc.pc(), 0x93a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93a5), 0xcb);
        EXPECT(gbc.readMem(0x93a6), 0x5a);
        // CB 5A 0032
        gbc.setState(0xe629, 0xd8f1, 0x5740, 0x4136, 0xb21d, 0x15b0, 0x0, 0x0);
        gbc.writeMem(0xe629, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd8f1);
        EXPECT(gbc.pc(), 0xe62b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe629), 0xcb);
        EXPECT(gbc.readMem(0xe62a), 0x5a);
        // CB 5A 0033
        gbc.setState(0xcc, 0x68b3, 0xf550, 0xe947, 0x7d9a, 0x7787, 0x1, 0x0);
        gbc.writeMem(0xcc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x68b3);
        EXPECT(gbc.pc(), 0xce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0034
        gbc.setState(0x6895, 0x2141, 0x6c60, 0x5e10, 0xdc80, 0x2385, 0x1, 0x0);
        gbc.writeMem(0x6895, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2141);
        EXPECT(gbc.pc(), 0x6897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0035
        gbc.setState(0xcbf9, 0xe38e, 0x110, 0xb9bf, 0xe145, 0x2235, 0x0, 0x1);
        gbc.writeMem(0xcbf9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe38e);
        EXPECT(gbc.pc(), 0xcbfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf9), 0xcb);
        EXPECT(gbc.readMem(0xcbfa), 0x5a);
        // CB 5A 0036
        gbc.setState(0x3bc7, 0x33c6, 0xfcd0, 0x5b49, 0x4d32, 0xcf1e, 0x1, 0x1);
        gbc.writeMem(0x3bc7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x33c6);
        EXPECT(gbc.pc(), 0x3bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0037
        gbc.setState(0x2473, 0x73fa, 0xd140, 0x1d26, 0xaf4a, 0xea38, 0x0, 0x0);
        gbc.writeMem(0x2473, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x73fa);
        EXPECT(gbc.pc(), 0x2475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0038
        gbc.setState(0x44aa, 0x69bf, 0xaab0, 0xafdb, 0x8a14, 0x3b77, 0x1, 0x1);
        gbc.writeMem(0x44aa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x69bf);
        EXPECT(gbc.pc(), 0x44ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0039
        gbc.setState(0x74ae, 0x65e8, 0xe110, 0x43e7, 0x3582, 0xa2db, 0x0, 0x0);
        gbc.writeMem(0x74ae, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x65e8);
        EXPECT(gbc.pc(), 0x74b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 003A
        gbc.setState(0x2e09, 0x79f6, 0xfe60, 0x1b83, 0x1374, 0x5222, 0x0, 0x0);
        gbc.writeMem(0x2e09, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x79f6);
        EXPECT(gbc.pc(), 0x2e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 003B
        gbc.setState(0x8f32, 0xdc73, 0x7d60, 0x1b40, 0xddda, 0x87c1, 0x1, 0x1);
        gbc.writeMem(0x8f32, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdc73);
        EXPECT(gbc.pc(), 0x8f34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f32), 0xcb);
        EXPECT(gbc.readMem(0x8f33), 0x5a);
        // CB 5A 003C
        gbc.setState(0x991a, 0x2360, 0x4ae0, 0xeba1, 0x52a7, 0x893e, 0x1, 0x0);
        gbc.writeMem(0x991a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2360);
        EXPECT(gbc.pc(), 0x991c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991a), 0xcb);
        EXPECT(gbc.readMem(0x991b), 0x5a);
        // CB 5A 003D
        gbc.setState(0xa3d5, 0xe1e4, 0x7810, 0x14ad, 0x38c3, 0x6bf, 0x1, 0x1);
        gbc.writeMem(0xa3d5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe1e4);
        EXPECT(gbc.pc(), 0xa3d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3d5), 0xcb);
        EXPECT(gbc.readMem(0xa3d6), 0x5a);
        // CB 5A 003E
        gbc.setState(0x64df, 0x3db9, 0x1090, 0xf70d, 0xe513, 0xb35f, 0x0, 0x1);
        gbc.writeMem(0x64df, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3db9);
        EXPECT(gbc.pc(), 0x64e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 003F
        gbc.setState(0x9161, 0x88a6, 0xf370, 0xb2ca, 0xf2c0, 0xa4e6, 0x1, 0x1);
        gbc.writeMem(0x9161, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x88a6);
        EXPECT(gbc.pc(), 0x9163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9161), 0xcb);
        EXPECT(gbc.readMem(0x9162), 0x5a);
        // CB 5A 0040
        gbc.setState(0xcffb, 0xec3e, 0x85a0, 0xa5a5, 0x5b00, 0xce04, 0x1, 0x0);
        gbc.writeMem(0xcffb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xec3e);
        EXPECT(gbc.pc(), 0xcffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffb), 0xcb);
        EXPECT(gbc.readMem(0xcffc), 0x5a);
        // CB 5A 0041
        gbc.setState(0xbacd, 0xea41, 0x7bc0, 0xd4a, 0x46e9, 0xcba7, 0x1, 0x1);
        gbc.writeMem(0xbacd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xea41);
        EXPECT(gbc.pc(), 0xbacf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbacd), 0xcb);
        EXPECT(gbc.readMem(0xbace), 0x5a);
        // CB 5A 0042
        gbc.setState(0x87e0, 0xc878, 0xf370, 0xaa1d, 0x4749, 0x4a88, 0x0, 0x0);
        gbc.writeMem(0x87e0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc878);
        EXPECT(gbc.pc(), 0x87e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e0), 0xcb);
        EXPECT(gbc.readMem(0x87e1), 0x5a);
        // CB 5A 0043
        gbc.setState(0xdcab, 0x975, 0x9710, 0x711e, 0xd2f3, 0x6c6a, 0x1, 0x1);
        gbc.writeMem(0xdcab, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x975);
        EXPECT(gbc.pc(), 0xdcad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcab), 0xcb);
        EXPECT(gbc.readMem(0xdcac), 0x5a);
        // CB 5A 0044
        gbc.setState(0x7b3, 0xabb1, 0x6b80, 0xbc8b, 0x2f1a, 0xc5ba, 0x0, 0x1);
        gbc.writeMem(0x7b3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xabb1);
        EXPECT(gbc.pc(), 0x7b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0045
        gbc.setState(0x5bf2, 0xc6d0, 0x2b20, 0x888d, 0x21a9, 0x3d41, 0x0, 0x0);
        gbc.writeMem(0x5bf2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc6d0);
        EXPECT(gbc.pc(), 0x5bf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0046
        gbc.setState(0x99bc, 0x4bb6, 0xaa90, 0xb309, 0x15df, 0xc316, 0x1, 0x1);
        gbc.writeMem(0x99bc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4bb6);
        EXPECT(gbc.pc(), 0x99be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99bc), 0xcb);
        EXPECT(gbc.readMem(0x99bd), 0x5a);
        // CB 5A 0047
        gbc.setState(0x5ea8, 0x7e84, 0xacd0, 0x45a8, 0xb55f, 0x5577, 0x0, 0x0);
        gbc.writeMem(0x5ea8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7e84);
        EXPECT(gbc.pc(), 0x5eaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0048
        gbc.setState(0xd6e7, 0x2f1b, 0xc000, 0x7641, 0xca19, 0x72f7, 0x1, 0x0);
        gbc.writeMem(0xd6e7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2f1b);
        EXPECT(gbc.pc(), 0xd6e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e7), 0xcb);
        EXPECT(gbc.readMem(0xd6e8), 0x5a);
        // CB 5A 0049
        gbc.setState(0x7d75, 0x8252, 0x2f00, 0x4f44, 0xc023, 0x276d, 0x0, 0x0);
        gbc.writeMem(0x7d75, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8252);
        EXPECT(gbc.pc(), 0x7d77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 004A
        gbc.setState(0x282d, 0x1b22, 0x8b0, 0x965d, 0x198f, 0x6391, 0x1, 0x1);
        gbc.writeMem(0x282d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1b22);
        EXPECT(gbc.pc(), 0x282f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 004B
        gbc.setState(0xef07, 0x7496, 0x3c80, 0xbef9, 0x72ae, 0xde2d, 0x0, 0x1);
        gbc.writeMem(0xef07, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7496);
        EXPECT(gbc.pc(), 0xef09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef07), 0xcb);
        EXPECT(gbc.readMem(0xef08), 0x5a);
        // CB 5A 004C
        gbc.setState(0xd2e, 0x1dd9, 0xa600, 0xf980, 0xd685, 0x846a, 0x1, 0x0);
        gbc.writeMem(0xd2e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1dd9);
        EXPECT(gbc.pc(), 0xd30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 004E
        gbc.setState(0x98e4, 0xd853, 0x77f0, 0x83d7, 0x320b, 0x7d0e, 0x1, 0x0);
        gbc.writeMem(0x98e4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd853);
        EXPECT(gbc.pc(), 0x98e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e4), 0xcb);
        EXPECT(gbc.readMem(0x98e5), 0x5a);
        // CB 5A 004F
        gbc.setState(0xf19, 0x6852, 0x6ee0, 0xf8e1, 0x79e4, 0x50a7, 0x0, 0x1);
        gbc.writeMem(0xf19, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6852);
        EXPECT(gbc.pc(), 0xf1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0050
        gbc.setState(0x9c0, 0x7df3, 0x9550, 0x9608, 0x3e75, 0x3e4f, 0x1, 0x1);
        gbc.writeMem(0x9c0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7df3);
        EXPECT(gbc.pc(), 0x9c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0051
        gbc.setState(0xdb6e, 0x58c6, 0xe4d0, 0xd2e3, 0xae65, 0x6beb, 0x0, 0x1);
        gbc.writeMem(0xdb6e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x58c6);
        EXPECT(gbc.pc(), 0xdb70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb6e), 0xcb);
        EXPECT(gbc.readMem(0xdb6f), 0x5a);
        // CB 5A 0052
        gbc.setState(0x650f, 0xb01, 0x1b50, 0x288f, 0x822c, 0x3fbc, 0x0, 0x0);
        gbc.writeMem(0x650f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb01);
        EXPECT(gbc.pc(), 0x6511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0053
        gbc.setState(0x7333, 0xd71b, 0x4210, 0xbb5c, 0xe8b1, 0x2c2c, 0x1, 0x1);
        gbc.writeMem(0x7333, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd71b);
        EXPECT(gbc.pc(), 0x7335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0054
        gbc.setState(0x7c46, 0x4a6c, 0xc9e0, 0xb096, 0x9844, 0xf2cf, 0x0, 0x1);
        gbc.writeMem(0x7c46, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4a6c);
        EXPECT(gbc.pc(), 0x7c48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0055
        gbc.setState(0xc69b, 0x19c, 0xe340, 0x6d96, 0x3fb, 0x4de0, 0x0, 0x1);
        gbc.writeMem(0xc69b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x19c);
        EXPECT(gbc.pc(), 0xc69d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc69b), 0xcb);
        EXPECT(gbc.readMem(0xc69c), 0x5a);
        // CB 5A 0056
        gbc.setState(0x14bc, 0x4dec, 0xac90, 0xb70d, 0x937a, 0xe126, 0x1, 0x1);
        gbc.writeMem(0x14bc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4dec);
        EXPECT(gbc.pc(), 0x14be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0057
        gbc.setState(0x5b82, 0x3c9b, 0xabf0, 0x53fa, 0x4011, 0x7761, 0x0, 0x0);
        gbc.writeMem(0x5b82, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3c9b);
        EXPECT(gbc.pc(), 0x5b84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0058
        gbc.setState(0x935, 0x6986, 0x44f0, 0xb7ba, 0x24b1, 0xd244, 0x1, 0x1);
        gbc.writeMem(0x935, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6986);
        EXPECT(gbc.pc(), 0x937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0059
        gbc.setState(0x756e, 0x71be, 0x2ac0, 0xef1d, 0x8628, 0xe6fb, 0x1, 0x1);
        gbc.writeMem(0x756e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x71be);
        EXPECT(gbc.pc(), 0x7570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 005A
        gbc.setState(0x227a, 0xede3, 0x42f0, 0x9088, 0x9591, 0x58de, 0x0, 0x1);
        gbc.writeMem(0x227a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xede3);
        EXPECT(gbc.pc(), 0x227c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 005B
        gbc.setState(0x5e9e, 0x925f, 0xd320, 0x91e, 0x28c4, 0xb2c4, 0x0, 0x1);
        gbc.writeMem(0x5e9e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x925f);
        EXPECT(gbc.pc(), 0x5ea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 005C
        gbc.setState(0x56c5, 0x617, 0x41b0, 0xaeae, 0x2d9b, 0x6719, 0x0, 0x0);
        gbc.writeMem(0x56c5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x617);
        EXPECT(gbc.pc(), 0x56c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 005D
        gbc.setState(0x3327, 0x7a7d, 0x3250, 0x898f, 0x482e, 0x1971, 0x0, 0x0);
        gbc.writeMem(0x3327, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7a7d);
        EXPECT(gbc.pc(), 0x3329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 005E
        gbc.setState(0xc9da, 0x9986, 0x6c30, 0x2d08, 0x998e, 0x8c85, 0x1, 0x1);
        gbc.writeMem(0xc9da, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9986);
        EXPECT(gbc.pc(), 0xc9dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9da), 0xcb);
        EXPECT(gbc.readMem(0xc9db), 0x5a);
        // CB 5A 005F
        gbc.setState(0x815a, 0x8a0e, 0xd340, 0xb859, 0xb787, 0x2ae6, 0x1, 0x0);
        gbc.writeMem(0x815a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8a0e);
        EXPECT(gbc.pc(), 0x815c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x815a), 0xcb);
        EXPECT(gbc.readMem(0x815b), 0x5a);
        // CB 5A 0060
        gbc.setState(0xd85d, 0xcf49, 0x7680, 0xbe1b, 0xe899, 0x2741, 0x0, 0x1);
        gbc.writeMem(0xd85d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcf49);
        EXPECT(gbc.pc(), 0xd85f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85d), 0xcb);
        EXPECT(gbc.readMem(0xd85e), 0x5a);
        // CB 5A 0061
        gbc.setState(0x5ece, 0xf79a, 0x43d0, 0x7d35, 0x97, 0x7baf, 0x0, 0x0);
        gbc.writeMem(0x5ece, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf79a);
        EXPECT(gbc.pc(), 0x5ed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0062
        gbc.setState(0x35ac, 0x6f8c, 0xa000, 0x8353, 0x95bf, 0x67ba, 0x0, 0x0);
        gbc.writeMem(0x35ac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6f8c);
        EXPECT(gbc.pc(), 0x35ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0063
        gbc.setState(0x917f, 0x6020, 0x2100, 0x75f8, 0x59ad, 0x305, 0x1, 0x0);
        gbc.writeMem(0x917f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6020);
        EXPECT(gbc.pc(), 0x9181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x917f), 0xcb);
        EXPECT(gbc.readMem(0x9180), 0x5a);
        // CB 5A 0066
        gbc.setState(0xbd21, 0xa474, 0xa820, 0xcb33, 0xc1bf, 0x2538, 0x0, 0x1);
        gbc.writeMem(0xbd21, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa474);
        EXPECT(gbc.pc(), 0xbd23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd21), 0xcb);
        EXPECT(gbc.readMem(0xbd22), 0x5a);
        // CB 5A 0067
        gbc.setState(0x1d89, 0x1d27, 0xd6a0, 0xc489, 0x59d6, 0xd92a, 0x1, 0x1);
        gbc.writeMem(0x1d89, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1d27);
        EXPECT(gbc.pc(), 0x1d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0068
        gbc.setState(0x350d, 0x3311, 0x7580, 0x48fe, 0xf481, 0x79e6, 0x0, 0x1);
        gbc.writeMem(0x350d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3311);
        EXPECT(gbc.pc(), 0x350f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0069
        gbc.setState(0x6ddd, 0xb930, 0xf920, 0xef99, 0x110f, 0x5ce1, 0x0, 0x1);
        gbc.writeMem(0x6ddd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb930);
        EXPECT(gbc.pc(), 0x6ddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 006A
        gbc.setState(0x7a2d, 0x63fe, 0x3730, 0x6c67, 0x3b4d, 0x50d2, 0x0, 0x0);
        gbc.writeMem(0x7a2d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x63fe);
        EXPECT(gbc.pc(), 0x7a2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 006B
        gbc.setState(0xba84, 0xfb36, 0x76c0, 0x7d09, 0x2cf1, 0xf76d, 0x1, 0x0);
        gbc.writeMem(0xba84, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfb36);
        EXPECT(gbc.pc(), 0xba86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba84), 0xcb);
        EXPECT(gbc.readMem(0xba85), 0x5a);
        // CB 5A 006C
        gbc.setState(0x84bb, 0xc603, 0x4020, 0x1e47, 0xf5df, 0x9b8, 0x1, 0x0);
        gbc.writeMem(0x84bb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc603);
        EXPECT(gbc.pc(), 0x84bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84bb), 0xcb);
        EXPECT(gbc.readMem(0x84bc), 0x5a);
        // CB 5A 006D
        gbc.setState(0x16ca, 0xd840, 0xda20, 0x6960, 0x86c4, 0x7c75, 0x1, 0x0);
        gbc.writeMem(0x16ca, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd840);
        EXPECT(gbc.pc(), 0x16cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 006E
        gbc.setState(0xb4b0, 0xa69a, 0x4110, 0x60b6, 0x6a39, 0x11ae, 0x1, 0x0);
        gbc.writeMem(0xb4b0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa69a);
        EXPECT(gbc.pc(), 0xb4b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4b0), 0xcb);
        EXPECT(gbc.readMem(0xb4b1), 0x5a);
        // CB 5A 006F
        gbc.setState(0x8ca3, 0xdc6a, 0xddd0, 0x1931, 0x1f66, 0xad3d, 0x0, 0x1);
        gbc.writeMem(0x8ca3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xdc6a);
        EXPECT(gbc.pc(), 0x8ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ca3), 0xcb);
        EXPECT(gbc.readMem(0x8ca4), 0x5a);
        // CB 5A 0071
        gbc.setState(0xa577, 0xf1c4, 0x4970, 0x3f4a, 0xd986, 0xabe5, 0x1, 0x1);
        gbc.writeMem(0xa577, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf1c4);
        EXPECT(gbc.pc(), 0xa579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa577), 0xcb);
        EXPECT(gbc.readMem(0xa578), 0x5a);
        // CB 5A 0072
        gbc.setState(0x8d8a, 0x7676, 0x92a0, 0x7299, 0x9b97, 0xb598, 0x1, 0x1);
        gbc.writeMem(0x8d8a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7676);
        EXPECT(gbc.pc(), 0x8d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d8a), 0xcb);
        EXPECT(gbc.readMem(0x8d8b), 0x5a);
        // CB 5A 0073
        gbc.setState(0xd820, 0xecca, 0x3ea0, 0xd35, 0x14e2, 0xd0c5, 0x1, 0x0);
        gbc.writeMem(0xd820, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xecca);
        EXPECT(gbc.pc(), 0xd822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd820), 0xcb);
        EXPECT(gbc.readMem(0xd821), 0x5a);
        // CB 5A 0074
        gbc.setState(0x3b08, 0x7c83, 0x1760, 0x8c59, 0x7df, 0xf3e5, 0x0, 0x0);
        gbc.writeMem(0x3b08, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7c83);
        EXPECT(gbc.pc(), 0x3b0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0075
        gbc.setState(0x26f6, 0xcafe, 0x79a0, 0x5955, 0x6d04, 0x5ded, 0x1, 0x0);
        gbc.writeMem(0x26f6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcafe);
        EXPECT(gbc.pc(), 0x26f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0076
        gbc.setState(0xd34, 0x1650, 0xdd00, 0xa286, 0x817e, 0xebfc, 0x0, 0x0);
        gbc.writeMem(0xd34, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1650);
        EXPECT(gbc.pc(), 0xd36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0077
        gbc.setState(0x8cbf, 0xc3ab, 0x5950, 0x8abb, 0x7c90, 0x9f89, 0x0, 0x1);
        gbc.writeMem(0x8cbf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc3ab);
        EXPECT(gbc.pc(), 0x8cc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cbf), 0xcb);
        EXPECT(gbc.readMem(0x8cc0), 0x5a);
        // CB 5A 0078
        gbc.setState(0xb737, 0xb6f4, 0x580, 0x84e4, 0xe1f8, 0x264b, 0x1, 0x1);
        gbc.writeMem(0xb737, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb6f4);
        EXPECT(gbc.pc(), 0xb739);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb737), 0xcb);
        EXPECT(gbc.readMem(0xb738), 0x5a);
        // CB 5A 0079
        gbc.setState(0x84b9, 0x5186, 0x8db0, 0x309c, 0x3c78, 0xd6c3, 0x0, 0x1);
        gbc.writeMem(0x84b9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5186);
        EXPECT(gbc.pc(), 0x84bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b9), 0xcb);
        EXPECT(gbc.readMem(0x84ba), 0x5a);
        // CB 5A 007A
        gbc.setState(0xe4, 0x1d65, 0x6dd0, 0x9a8, 0xb63b, 0xb7f7, 0x1, 0x1);
        gbc.writeMem(0xe4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1d65);
        EXPECT(gbc.pc(), 0xe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 007B
        gbc.setState(0x93c0, 0xfa29, 0xe7f0, 0xf3f0, 0xf5ed, 0x35f0, 0x1, 0x1);
        gbc.writeMem(0x93c0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xfa29);
        EXPECT(gbc.pc(), 0x93c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c0), 0xcb);
        EXPECT(gbc.readMem(0x93c1), 0x5a);
        // CB 5A 007C
        gbc.setState(0x3252, 0x6502, 0xe5a0, 0x2064, 0xd8e1, 0xccfb, 0x0, 0x0);
        gbc.writeMem(0x3252, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6502);
        EXPECT(gbc.pc(), 0x3254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 007D
        gbc.setState(0x5468, 0x2e35, 0x80f0, 0x37f0, 0x80f3, 0x2715, 0x1, 0x1);
        gbc.writeMem(0x5468, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2e35);
        EXPECT(gbc.pc(), 0x546a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 007F
        gbc.setState(0xc083, 0xea70, 0x8140, 0x3964, 0xd9cf, 0x68cf, 0x0, 0x0);
        gbc.writeMem(0xc083, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xea70);
        EXPECT(gbc.pc(), 0xc085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc083), 0xcb);
        EXPECT(gbc.readMem(0xc084), 0x5a);
        // CB 5A 0080
        gbc.setState(0xc96c, 0xbaf2, 0x33f0, 0xcfee, 0xaac, 0xadbe, 0x1, 0x0);
        gbc.writeMem(0xc96c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xbaf2);
        EXPECT(gbc.pc(), 0xc96e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc96c), 0xcb);
        EXPECT(gbc.readMem(0xc96d), 0x5a);
        // CB 5A 0081
        gbc.setState(0xa3ac, 0xe6cb, 0x3730, 0x3aa8, 0xabbd, 0xb840, 0x0, 0x0);
        gbc.writeMem(0xa3ac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe6cb);
        EXPECT(gbc.pc(), 0xa3ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ac), 0xcb);
        EXPECT(gbc.readMem(0xa3ad), 0x5a);
        // CB 5A 0083
        gbc.setState(0xa0c8, 0x3eef, 0x8410, 0xda09, 0x78b5, 0xd33b, 0x1, 0x0);
        gbc.writeMem(0xa0c8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3eef);
        EXPECT(gbc.pc(), 0xa0ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0c8), 0xcb);
        EXPECT(gbc.readMem(0xa0c9), 0x5a);
        // CB 5A 0084
        gbc.setState(0x8b52, 0x6c26, 0x1a20, 0x3272, 0xd460, 0x7ec0, 0x1, 0x0);
        gbc.writeMem(0x8b52, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6c26);
        EXPECT(gbc.pc(), 0x8b54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b52), 0xcb);
        EXPECT(gbc.readMem(0x8b53), 0x5a);
        // CB 5A 0085
        gbc.setState(0x548d, 0x8c1b, 0xb790, 0x6405, 0x2ace, 0x914, 0x1, 0x0);
        gbc.writeMem(0x548d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8c1b);
        EXPECT(gbc.pc(), 0x548f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0086
        gbc.setState(0x9faf, 0xb084, 0x48e0, 0x4b67, 0x4d41, 0x4a9, 0x0, 0x0);
        gbc.writeMem(0x9faf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb084);
        EXPECT(gbc.pc(), 0x9fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9faf), 0xcb);
        EXPECT(gbc.readMem(0x9fb0), 0x5a);
        // CB 5A 0087
        gbc.setState(0xb880, 0xb28e, 0xb4c0, 0x96b, 0x85e3, 0xbd9e, 0x0, 0x1);
        gbc.writeMem(0xb880, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb28e);
        EXPECT(gbc.pc(), 0xb882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb880), 0xcb);
        EXPECT(gbc.readMem(0xb881), 0x5a);
        // CB 5A 0088
        gbc.setState(0x3300, 0xa570, 0xbdb0, 0x5e8b, 0x6a0f, 0xd92, 0x1, 0x0);
        gbc.writeMem(0x3300, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa570);
        EXPECT(gbc.pc(), 0x3302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0089
        gbc.setState(0x41c4, 0x7d41, 0xa0a0, 0x4d6c, 0xd85a, 0x194f, 0x1, 0x0);
        gbc.writeMem(0x41c4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7d41);
        EXPECT(gbc.pc(), 0x41c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 008A
        gbc.setState(0x140b, 0xaa60, 0x71c0, 0xc9a4, 0x108b, 0x255d, 0x0, 0x0);
        gbc.writeMem(0x140b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xaa60);
        EXPECT(gbc.pc(), 0x140d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 008B
        gbc.setState(0xc88, 0xb86f, 0x3980, 0xeb3b, 0xc21d, 0x517b, 0x1, 0x1);
        gbc.writeMem(0xc88, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb86f);
        EXPECT(gbc.pc(), 0xc8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 008C
        gbc.setState(0x5894, 0x73a9, 0x4530, 0xee5a, 0xa9b8, 0x439b, 0x0, 0x0);
        gbc.writeMem(0x5894, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x73a9);
        EXPECT(gbc.pc(), 0x5896);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 008D
        gbc.setState(0x7c99, 0xf736, 0x9bc0, 0x133c, 0xb78e, 0x8edb, 0x1, 0x1);
        gbc.writeMem(0x7c99, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf736);
        EXPECT(gbc.pc(), 0x7c9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 008E
        gbc.setState(0x723d, 0x3185, 0x31e0, 0xe3e8, 0x3181, 0x1238, 0x0, 0x1);
        gbc.writeMem(0x723d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3185);
        EXPECT(gbc.pc(), 0x723f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 008F
        gbc.setState(0x78e, 0xd2c3, 0xc790, 0xe2e0, 0xfac2, 0x8135, 0x1, 0x0);
        gbc.writeMem(0x78e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd2c3);
        EXPECT(gbc.pc(), 0x790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0090
        gbc.setState(0xa911, 0x1fce, 0x4d20, 0x5ea3, 0x6923, 0x85b8, 0x0, 0x0);
        gbc.writeMem(0xa911, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1fce);
        EXPECT(gbc.pc(), 0xa913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa911), 0xcb);
        EXPECT(gbc.readMem(0xa912), 0x5a);
        // CB 5A 0091
        gbc.setState(0x10a1, 0xe266, 0x8150, 0x20a8, 0x3fa1, 0xe0af, 0x0, 0x0);
        gbc.writeMem(0x10a1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe266);
        EXPECT(gbc.pc(), 0x10a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0092
        gbc.setState(0xaa07, 0x7422, 0x9260, 0xbff4, 0x76a3, 0x9f59, 0x1, 0x0);
        gbc.writeMem(0xaa07, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7422);
        EXPECT(gbc.pc(), 0xaa09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa07), 0xcb);
        EXPECT(gbc.readMem(0xaa08), 0x5a);
        // CB 5A 0093
        gbc.setState(0xcd58, 0xb3a4, 0xd1d0, 0xa8d7, 0xb66e, 0x9e3f, 0x1, 0x1);
        gbc.writeMem(0xcd58, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb3a4);
        EXPECT(gbc.pc(), 0xcd5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd58), 0xcb);
        EXPECT(gbc.readMem(0xcd59), 0x5a);
        // CB 5A 0094
        gbc.setState(0xb95f, 0x4b95, 0x3a30, 0xe83b, 0x4e20, 0xcaba, 0x0, 0x0);
        gbc.writeMem(0xb95f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4b95);
        EXPECT(gbc.pc(), 0xb961);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb95f), 0xcb);
        EXPECT(gbc.readMem(0xb960), 0x5a);
        // CB 5A 0095
        gbc.setState(0xb837, 0xbb5, 0x9d50, 0x1d8b, 0x85be, 0x8036, 0x0, 0x1);
        gbc.writeMem(0xb837, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbb5);
        EXPECT(gbc.pc(), 0xb839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb837), 0xcb);
        EXPECT(gbc.readMem(0xb838), 0x5a);
        // CB 5A 0096
        gbc.setState(0x390f, 0x31e7, 0xa210, 0x7c7f, 0xec74, 0x7507, 0x1, 0x0);
        gbc.writeMem(0x390f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x31e7);
        EXPECT(gbc.pc(), 0x3911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0097
        gbc.setState(0x9ca9, 0x22a, 0x96a0, 0x752c, 0x5314, 0xdade, 0x0, 0x1);
        gbc.writeMem(0x9ca9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x22a);
        EXPECT(gbc.pc(), 0x9cab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca9), 0xcb);
        EXPECT(gbc.readMem(0x9caa), 0x5a);
        // CB 5A 0098
        gbc.setState(0x7905, 0x1419, 0x6840, 0x78a9, 0x1cfe, 0x78a9, 0x0, 0x1);
        gbc.writeMem(0x7905, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1419);
        EXPECT(gbc.pc(), 0x7907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0099
        gbc.setState(0x7808, 0x700b, 0x8590, 0x53d7, 0x5d47, 0x7499, 0x1, 0x1);
        gbc.writeMem(0x7808, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x700b);
        EXPECT(gbc.pc(), 0x780a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 009A
        gbc.setState(0x553, 0x3e0b, 0x1260, 0xa05b, 0xd3f5, 0x5e06, 0x1, 0x1);
        gbc.writeMem(0x553, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3e0b);
        EXPECT(gbc.pc(), 0x555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 009B
        gbc.setState(0x8644, 0x96a5, 0x4550, 0x17ff, 0x8b56, 0xd6c2, 0x0, 0x0);
        gbc.writeMem(0x8644, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x96a5);
        EXPECT(gbc.pc(), 0x8646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8644), 0xcb);
        EXPECT(gbc.readMem(0x8645), 0x5a);
        // CB 5A 009C
        gbc.setState(0x244f, 0x2c7f, 0x1f40, 0x9c47, 0xc7df, 0xbce6, 0x0, 0x0);
        gbc.writeMem(0x244f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2c7f);
        EXPECT(gbc.pc(), 0x2451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 009D
        gbc.setState(0x3f10, 0x821, 0x9650, 0xddb0, 0xe847, 0xb797, 0x0, 0x0);
        gbc.writeMem(0x3f10, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x821);
        EXPECT(gbc.pc(), 0x3f12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 009E
        gbc.setState(0xaa83, 0x5670, 0x63a0, 0x4249, 0xe56a, 0xcf50, 0x1, 0x0);
        gbc.writeMem(0xaa83, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5670);
        EXPECT(gbc.pc(), 0xaa85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa83), 0xcb);
        EXPECT(gbc.readMem(0xaa84), 0x5a);
        // CB 5A 009F
        gbc.setState(0xa919, 0x1fcc, 0xb430, 0x3746, 0x602d, 0xb45a, 0x1, 0x1);
        gbc.writeMem(0xa919, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1fcc);
        EXPECT(gbc.pc(), 0xa91b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa919), 0xcb);
        EXPECT(gbc.readMem(0xa91a), 0x5a);
        // CB 5A 00A0
        gbc.setState(0x37f3, 0xcfea, 0xc8b0, 0x2a8e, 0x60a0, 0x9994, 0x1, 0x1);
        gbc.writeMem(0x37f3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xcfea);
        EXPECT(gbc.pc(), 0x37f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00A1
        gbc.setState(0x307, 0x87c, 0x5990, 0x879a, 0x6b02, 0x43b7, 0x1, 0x0);
        gbc.writeMem(0x307, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x87c);
        EXPECT(gbc.pc(), 0x309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00A2
        gbc.setState(0x7f79, 0xf51, 0xc7c0, 0xbd5b, 0x3b67, 0xa4f8, 0x0, 0x0);
        gbc.writeMem(0x7f79, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf51);
        EXPECT(gbc.pc(), 0x7f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00A3
        gbc.setState(0x2e14, 0xe112, 0x6e40, 0x39ad, 0x3c0, 0xef23, 0x0, 0x1);
        gbc.writeMem(0x2e14, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe112);
        EXPECT(gbc.pc(), 0x2e16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00A4
        gbc.setState(0x36bd, 0x1105, 0x9130, 0xb678, 0x66f2, 0x66b5, 0x0, 0x0);
        gbc.writeMem(0x36bd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1105);
        EXPECT(gbc.pc(), 0x36bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00A5
        gbc.setState(0x92bf, 0x8ee1, 0x4bc0, 0xcd49, 0xbed7, 0xc4a4, 0x0, 0x1);
        gbc.writeMem(0x92bf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8ee1);
        EXPECT(gbc.pc(), 0x92c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92bf), 0xcb);
        EXPECT(gbc.readMem(0x92c0), 0x5a);
        // CB 5A 00A7
        gbc.setState(0xb875, 0xd4c5, 0x9410, 0x7ca, 0x5af1, 0x96e4, 0x1, 0x0);
        gbc.writeMem(0xb875, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd4c5);
        EXPECT(gbc.pc(), 0xb877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb875), 0xcb);
        EXPECT(gbc.readMem(0xb876), 0x5a);
        // CB 5A 00A8
        gbc.setState(0x33d, 0x7073, 0xbee0, 0xa11, 0xccf1, 0xf446, 0x0, 0x1);
        gbc.writeMem(0x33d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7073);
        EXPECT(gbc.pc(), 0x33f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00A9
        gbc.setState(0x26a4, 0x4033, 0xd00, 0xe1e2, 0x9450, 0x564d, 0x0, 0x1);
        gbc.writeMem(0x26a4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4033);
        EXPECT(gbc.pc(), 0x26a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00AA
        gbc.setState(0xe42d, 0xd056, 0xae0, 0xdfb8, 0x7275, 0x2cf4, 0x1, 0x1);
        gbc.writeMem(0xe42d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd056);
        EXPECT(gbc.pc(), 0xe42f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe42d), 0xcb);
        EXPECT(gbc.readMem(0xe42e), 0x5a);
        // CB 5A 00AB
        gbc.setState(0xd599, 0x857d, 0x6b00, 0xad67, 0x6047, 0x30db, 0x1, 0x1);
        gbc.writeMem(0xd599, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x857d);
        EXPECT(gbc.pc(), 0xd59b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd599), 0xcb);
        EXPECT(gbc.readMem(0xd59a), 0x5a);
        // CB 5A 00AC
        gbc.setState(0xe90c, 0x9b80, 0xc160, 0xb778, 0x200c, 0xccd0, 0x1, 0x0);
        gbc.writeMem(0xe90c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9b80);
        EXPECT(gbc.pc(), 0xe90e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe90c), 0xcb);
        EXPECT(gbc.readMem(0xe90d), 0x5a);
        // CB 5A 00AD
        gbc.setState(0xd346, 0x73d2, 0xc530, 0x7dee, 0xa43a, 0xaa77, 0x1, 0x0);
        gbc.writeMem(0xd346, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x73d2);
        EXPECT(gbc.pc(), 0xd348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd346), 0xcb);
        EXPECT(gbc.readMem(0xd347), 0x5a);
        // CB 5A 00AE
        gbc.setState(0xc42c, 0x925a, 0x1be0, 0xba4f, 0xa6fd, 0x5e57, 0x1, 0x1);
        gbc.writeMem(0xc42c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x925a);
        EXPECT(gbc.pc(), 0xc42e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42c), 0xcb);
        EXPECT(gbc.readMem(0xc42d), 0x5a);
        // CB 5A 00AF
        gbc.setState(0x7bdc, 0xe576, 0x38a0, 0xc9d, 0xfa07, 0x79b2, 0x0, 0x0);
        gbc.writeMem(0x7bdc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe576);
        EXPECT(gbc.pc(), 0x7bde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00B0
        gbc.setState(0x7de, 0x95e9, 0x11b0, 0xfcbc, 0x875d, 0xe11a, 0x0, 0x1);
        gbc.writeMem(0x7de, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x95e9);
        EXPECT(gbc.pc(), 0x7e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00B1
        gbc.setState(0x688b, 0x9186, 0x77e0, 0xe171, 0x19ef, 0x8fc9, 0x1, 0x1);
        gbc.writeMem(0x688b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9186);
        EXPECT(gbc.pc(), 0x688d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00B2
        gbc.setState(0xbe85, 0x7be2, 0xa270, 0x43fc, 0xe5b6, 0xfcf5, 0x1, 0x0);
        gbc.writeMem(0xbe85, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7be2);
        EXPECT(gbc.pc(), 0xbe87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe85), 0xcb);
        EXPECT(gbc.readMem(0xbe86), 0x5a);
        // CB 5A 00B3
        gbc.setState(0xbb18, 0xa264, 0xa480, 0xa265, 0x9d66, 0xa0ec, 0x1, 0x1);
        gbc.writeMem(0xbb18, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa264);
        EXPECT(gbc.pc(), 0xbb1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb18), 0xcb);
        EXPECT(gbc.readMem(0xbb19), 0x5a);
        // CB 5A 00B4
        gbc.setState(0x130e, 0xa081, 0xc2a0, 0x4104, 0xa51d, 0x52dd, 0x1, 0x1);
        gbc.writeMem(0x130e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa081);
        EXPECT(gbc.pc(), 0x1310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00B5
        gbc.setState(0xcfec, 0xcc28, 0x4cb0, 0xc831, 0xa982, 0x3232, 0x1, 0x0);
        gbc.writeMem(0xcfec, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xcc28);
        EXPECT(gbc.pc(), 0xcfee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfec), 0xcb);
        EXPECT(gbc.readMem(0xcfed), 0x5a);
        // CB 5A 00B6
        gbc.setState(0x520d, 0x45e5, 0x2500, 0xbc73, 0xfe89, 0x5969, 0x1, 0x1);
        gbc.writeMem(0x520d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x45e5);
        EXPECT(gbc.pc(), 0x520f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00B7
        gbc.setState(0x774a, 0xa4fc, 0xa2d0, 0xbb20, 0x1c0e, 0x2e0b, 0x0, 0x0);
        gbc.writeMem(0x774a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa4fc);
        EXPECT(gbc.pc(), 0x774c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00B8
        gbc.setState(0x82b6, 0x4768, 0xe260, 0x195e, 0x870d, 0x92e8, 0x1, 0x1);
        gbc.writeMem(0x82b6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x4768);
        EXPECT(gbc.pc(), 0x82b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b6), 0xcb);
        EXPECT(gbc.readMem(0x82b7), 0x5a);
        // CB 5A 00B9
        gbc.setState(0xe0b1, 0xd0c1, 0x5350, 0x7c88, 0x616, 0xffb9, 0x1, 0x0);
        gbc.writeMem(0xe0b1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd0c1);
        EXPECT(gbc.pc(), 0xe0b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0b1), 0xcb);
        EXPECT(gbc.readMem(0xe0b2), 0x5a);
        // CB 5A 00BA
        gbc.setState(0xe1c1, 0x2527, 0x1bd0, 0xc80a, 0x1d26, 0x8fab, 0x0, 0x0);
        gbc.writeMem(0xe1c1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2527);
        EXPECT(gbc.pc(), 0xe1c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c1), 0xcb);
        EXPECT(gbc.readMem(0xe1c2), 0x5a);
        // CB 5A 00BB
        gbc.setState(0x9b6a, 0xf44a, 0x9a00, 0x8152, 0x442d, 0xdae1, 0x1, 0x0);
        gbc.writeMem(0x9b6a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf44a);
        EXPECT(gbc.pc(), 0x9b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b6a), 0xcb);
        EXPECT(gbc.readMem(0x9b6b), 0x5a);
        // CB 5A 00BC
        gbc.setState(0xca8f, 0x5bb8, 0x42e0, 0xaa36, 0xe983, 0x2aa9, 0x1, 0x1);
        gbc.writeMem(0xca8f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5bb8);
        EXPECT(gbc.pc(), 0xca91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8f), 0xcb);
        EXPECT(gbc.readMem(0xca90), 0x5a);
        // CB 5A 00BD
        gbc.setState(0x1c8a, 0x363c, 0x1a40, 0x9456, 0x5ec1, 0x9b89, 0x1, 0x1);
        gbc.writeMem(0x1c8a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x363c);
        EXPECT(gbc.pc(), 0x1c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00BE
        gbc.setState(0xbd25, 0x38ea, 0xe2f0, 0xe397, 0x3459, 0x82ce, 0x1, 0x1);
        gbc.writeMem(0xbd25, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x38ea);
        EXPECT(gbc.pc(), 0xbd27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd25), 0xcb);
        EXPECT(gbc.readMem(0xbd26), 0x5a);
        // CB 5A 00BF
        gbc.setState(0x4290, 0xe49e, 0xf230, 0xcd2a, 0xbd15, 0x6441, 0x1, 0x0);
        gbc.writeMem(0x4290, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe49e);
        EXPECT(gbc.pc(), 0x4292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00C0
        gbc.setState(0xb031, 0x665d, 0x82d0, 0x2f02, 0xddc5, 0x917b, 0x0, 0x0);
        gbc.writeMem(0xb031, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x665d);
        EXPECT(gbc.pc(), 0xb033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb031), 0xcb);
        EXPECT(gbc.readMem(0xb032), 0x5a);
        // CB 5A 00C1
        gbc.setState(0xbdb5, 0x612b, 0x2bd0, 0xfea0, 0xc322, 0x64cd, 0x1, 0x0);
        gbc.writeMem(0xbdb5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x612b);
        EXPECT(gbc.pc(), 0xbdb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb5), 0xcb);
        EXPECT(gbc.readMem(0xbdb6), 0x5a);
        // CB 5A 00C2
        gbc.setState(0x8281, 0x499d, 0xfa60, 0x8715, 0xba0d, 0x8c1b, 0x1, 0x1);
        gbc.writeMem(0x8281, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x499d);
        EXPECT(gbc.pc(), 0x8283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8281), 0xcb);
        EXPECT(gbc.readMem(0x8282), 0x5a);
        // CB 5A 00C3
        gbc.setState(0x1328, 0x2cc0, 0x8a80, 0xec35, 0xab60, 0xfbc0, 0x0, 0x0);
        gbc.writeMem(0x1328, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2cc0);
        EXPECT(gbc.pc(), 0x132a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00C4
        gbc.setState(0x3081, 0x2d77, 0xcbd0, 0x77bd, 0x52e5, 0xe27a, 0x1, 0x0);
        gbc.writeMem(0x3081, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2d77);
        EXPECT(gbc.pc(), 0x3083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00C5
        gbc.setState(0x6f27, 0x42f5, 0xc380, 0xdbf, 0xaf67, 0x346f, 0x1, 0x0);
        gbc.writeMem(0x6f27, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x42f5);
        EXPECT(gbc.pc(), 0x6f29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00C6
        gbc.setState(0xb4b3, 0x2217, 0x9640, 0x1eae, 0x8291, 0x842f, 0x0, 0x1);
        gbc.writeMem(0xb4b3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2217);
        EXPECT(gbc.pc(), 0xb4b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b3), 0xcb);
        EXPECT(gbc.readMem(0xb4b4), 0x5a);
        // CB 5A 00C7
        gbc.setState(0x5944, 0xf0be, 0x9900, 0x6481, 0xdccc, 0x262a, 0x1, 0x0);
        gbc.writeMem(0x5944, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf0be);
        EXPECT(gbc.pc(), 0x5946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00C8
        gbc.setState(0x7808, 0x4f6e, 0xfdd0, 0xfea, 0xf4e3, 0x9666, 0x1, 0x0);
        gbc.writeMem(0x7808, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4f6e);
        EXPECT(gbc.pc(), 0x780a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00C9
        gbc.setState(0x371b, 0x3554, 0x3cc0, 0xa1cb, 0x2e03, 0x8bed, 0x1, 0x1);
        gbc.writeMem(0x371b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3554);
        EXPECT(gbc.pc(), 0x371d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00CA
        gbc.setState(0xa03f, 0xeb3c, 0x4b40, 0x9cf8, 0x1416, 0xab32, 0x0, 0x0);
        gbc.writeMem(0xa03f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xeb3c);
        EXPECT(gbc.pc(), 0xa041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03f), 0xcb);
        EXPECT(gbc.readMem(0xa040), 0x5a);
        // CB 5A 00CB
        gbc.setState(0x7db4, 0x4e04, 0x3b70, 0x9b2c, 0xd185, 0xa717, 0x1, 0x1);
        gbc.writeMem(0x7db4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4e04);
        EXPECT(gbc.pc(), 0x7db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00CC
        gbc.setState(0xb8dc, 0x77de, 0x2700, 0xa21c, 0xcb3a, 0x33f3, 0x1, 0x1);
        gbc.writeMem(0xb8dc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x77de);
        EXPECT(gbc.pc(), 0xb8de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8dc), 0xcb);
        EXPECT(gbc.readMem(0xb8dd), 0x5a);
        // CB 5A 00CD
        gbc.setState(0x1163, 0x3466, 0xef50, 0x28c8, 0x92c6, 0x193, 0x1, 0x1);
        gbc.writeMem(0x1163, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3466);
        EXPECT(gbc.pc(), 0x1165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00CE
        gbc.setState(0xbd79, 0xa19d, 0xd630, 0x6b9c, 0x38f6, 0x6f62, 0x1, 0x0);
        gbc.writeMem(0xbd79, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa19d);
        EXPECT(gbc.pc(), 0xbd7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd79), 0xcb);
        EXPECT(gbc.readMem(0xbd7a), 0x5a);
        // CB 5A 00CF
        gbc.setState(0x57c3, 0xc4ab, 0xb9f0, 0x500b, 0xfc44, 0x50a2, 0x1, 0x0);
        gbc.writeMem(0x57c3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc4ab);
        EXPECT(gbc.pc(), 0x57c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00D0
        gbc.setState(0x6d37, 0xfa40, 0xaa50, 0x27ae, 0xa86b, 0xeb73, 0x0, 0x0);
        gbc.writeMem(0x6d37, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xfa40);
        EXPECT(gbc.pc(), 0x6d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00D1
        gbc.setState(0xe97d, 0xd860, 0x5970, 0xccba, 0xf95d, 0xa8b2, 0x1, 0x0);
        gbc.writeMem(0xe97d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd860);
        EXPECT(gbc.pc(), 0xe97f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe97d), 0xcb);
        EXPECT(gbc.readMem(0xe97e), 0x5a);
        // CB 5A 00D2
        gbc.setState(0x156d, 0x1264, 0xff50, 0x1fe9, 0xf62, 0xa643, 0x1, 0x0);
        gbc.writeMem(0x156d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1264);
        EXPECT(gbc.pc(), 0x156f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00D3
        gbc.setState(0x4eb6, 0x5b1a, 0x870, 0x4451, 0x60c4, 0x46b6, 0x0, 0x1);
        gbc.writeMem(0x4eb6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5b1a);
        EXPECT(gbc.pc(), 0x4eb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00D4
        gbc.setState(0x4d9b, 0x62d1, 0x7690, 0xeb1b, 0x18f5, 0xe5fc, 0x1, 0x0);
        gbc.writeMem(0x4d9b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x62d1);
        EXPECT(gbc.pc(), 0x4d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00D6
        gbc.setState(0xaaf0, 0x510, 0x7750, 0xec19, 0xca, 0x2dbd, 0x0, 0x1);
        gbc.writeMem(0xaaf0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x510);
        EXPECT(gbc.pc(), 0xaaf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaf0), 0xcb);
        EXPECT(gbc.readMem(0xaaf1), 0x5a);
        // CB 5A 00D7
        gbc.setState(0x65f6, 0xffa2, 0x37f0, 0xd040, 0xec16, 0xefc7, 0x0, 0x0);
        gbc.writeMem(0x65f6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xffa2);
        EXPECT(gbc.pc(), 0x65f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00D8
        gbc.setState(0x3c25, 0x396a, 0x42d0, 0x6cb2, 0xe271, 0xd1d5, 0x1, 0x1);
        gbc.writeMem(0x3c25, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x396a);
        EXPECT(gbc.pc(), 0x3c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00D9
        gbc.setState(0x1b28, 0x535, 0x1110, 0x7d00, 0x3ff2, 0x3ee8, 0x0, 0x0);
        gbc.writeMem(0x1b28, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x535);
        EXPECT(gbc.pc(), 0x1b2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00DA
        gbc.setState(0x4f1b, 0x150b, 0xa9c0, 0xe798, 0x76a8, 0xe5d0, 0x0, 0x1);
        gbc.writeMem(0x4f1b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x150b);
        EXPECT(gbc.pc(), 0x4f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00DB
        gbc.setState(0xac4e, 0x373e, 0xdd20, 0x8544, 0x85bc, 0x552a, 0x1, 0x0);
        gbc.writeMem(0xac4e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x373e);
        EXPECT(gbc.pc(), 0xac50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac4e), 0xcb);
        EXPECT(gbc.readMem(0xac4f), 0x5a);
        // CB 5A 00DC
        gbc.setState(0x4419, 0xb858, 0x490, 0xd2d6, 0xeb70, 0x85a7, 0x0, 0x1);
        gbc.writeMem(0x4419, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb858);
        EXPECT(gbc.pc(), 0x441b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00DD
        gbc.setState(0x2dda, 0xfc90, 0x1660, 0x7bef, 0x55f7, 0x31d0, 0x1, 0x0);
        gbc.writeMem(0x2dda, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfc90);
        EXPECT(gbc.pc(), 0x2ddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00DE
        gbc.setState(0xa1f3, 0x7ebc, 0xb370, 0xc3, 0x4dc1, 0xad25, 0x1, 0x0);
        gbc.writeMem(0xa1f3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7ebc);
        EXPECT(gbc.pc(), 0xa1f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f3), 0xcb);
        EXPECT(gbc.readMem(0xa1f4), 0x5a);
        // CB 5A 00DF
        gbc.setState(0xa0a0, 0xc57d, 0xfc40, 0xf740, 0xdfe9, 0xa546, 0x0, 0x0);
        gbc.writeMem(0xa0a0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc57d);
        EXPECT(gbc.pc(), 0xa0a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0a0), 0xcb);
        EXPECT(gbc.readMem(0xa0a1), 0x5a);
        // CB 5A 00E0
        gbc.setState(0xcd1d, 0xe899, 0xb930, 0x4810, 0xfae0, 0xa625, 0x0, 0x1);
        gbc.writeMem(0xcd1d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe899);
        EXPECT(gbc.pc(), 0xcd1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd1d), 0xcb);
        EXPECT(gbc.readMem(0xcd1e), 0x5a);
        // CB 5A 00E1
        gbc.setState(0x7586, 0x6e6e, 0x6d80, 0xcb76, 0x52e8, 0x5f03, 0x1, 0x0);
        gbc.writeMem(0x7586, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6e6e);
        EXPECT(gbc.pc(), 0x7588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00E2
        gbc.setState(0x3310, 0x25cf, 0xca90, 0xfa89, 0xe63, 0x3ab1, 0x0, 0x1);
        gbc.writeMem(0x3310, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x25cf);
        EXPECT(gbc.pc(), 0x3312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00E3
        gbc.setState(0x8824, 0xd3c1, 0xe250, 0x5fa6, 0x6c4, 0x8e32, 0x1, 0x0);
        gbc.writeMem(0x8824, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd3c1);
        EXPECT(gbc.pc(), 0x8826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8824), 0xcb);
        EXPECT(gbc.readMem(0x8825), 0x5a);
        // CB 5A 00E4
        gbc.setState(0x9623, 0x9026, 0x39c0, 0x83f9, 0x6b01, 0x93be, 0x1, 0x1);
        gbc.writeMem(0x9623, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9026);
        EXPECT(gbc.pc(), 0x9625);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9623), 0xcb);
        EXPECT(gbc.readMem(0x9624), 0x5a);
        // CB 5A 00E5
        gbc.setState(0x687a, 0x8861, 0x3400, 0x4d6a, 0x34f8, 0x4bcd, 0x1, 0x0);
        gbc.writeMem(0x687a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8861);
        EXPECT(gbc.pc(), 0x687c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00E6
        gbc.setState(0x2cb6, 0x203f, 0x26b0, 0x2c96, 0x4c07, 0xb399, 0x0, 0x0);
        gbc.writeMem(0x2cb6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x203f);
        EXPECT(gbc.pc(), 0x2cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00E7
        gbc.setState(0x9b79, 0x94ae, 0x8ab0, 0xd59d, 0x53ce, 0xc67f, 0x1, 0x0);
        gbc.writeMem(0x9b79, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x94ae);
        EXPECT(gbc.pc(), 0x9b7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b79), 0xcb);
        EXPECT(gbc.readMem(0x9b7a), 0x5a);
        // CB 5A 00E8
        gbc.setState(0xb5be, 0xed1, 0x9dd0, 0xf8f3, 0xde0e, 0x2414, 0x0, 0x0);
        gbc.writeMem(0xb5be, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xed1);
        EXPECT(gbc.pc(), 0xb5c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5be), 0xcb);
        EXPECT(gbc.readMem(0xb5bf), 0x5a);
        // CB 5A 00E9
        gbc.setState(0x3321, 0x1303, 0xba30, 0xde61, 0x26f8, 0x2285, 0x1, 0x0);
        gbc.writeMem(0x3321, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1303);
        EXPECT(gbc.pc(), 0x3323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00EA
        gbc.setState(0xda00, 0x5937, 0x1df0, 0xa422, 0xa785, 0xbdeb, 0x1, 0x1);
        gbc.writeMem(0xda00, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5937);
        EXPECT(gbc.pc(), 0xda02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda00), 0xcb);
        EXPECT(gbc.readMem(0xda01), 0x5a);
        // CB 5A 00EB
        gbc.setState(0xc522, 0xb70e, 0xd620, 0x6da9, 0x9349, 0x489b, 0x1, 0x1);
        gbc.writeMem(0xc522, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb70e);
        EXPECT(gbc.pc(), 0xc524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc522), 0xcb);
        EXPECT(gbc.readMem(0xc523), 0x5a);
        // CB 5A 00EC
        gbc.setState(0x80d3, 0xf89e, 0x8990, 0x3208, 0x3b32, 0x3d44, 0x1, 0x0);
        gbc.writeMem(0x80d3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf89e);
        EXPECT(gbc.pc(), 0x80d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d3), 0xcb);
        EXPECT(gbc.readMem(0x80d4), 0x5a);
        // CB 5A 00ED
        gbc.setState(0xbaa9, 0xce3c, 0x8040, 0x8f76, 0x299b, 0x1f7a, 0x1, 0x0);
        gbc.writeMem(0xbaa9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xce3c);
        EXPECT(gbc.pc(), 0xbaab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa9), 0xcb);
        EXPECT(gbc.readMem(0xbaaa), 0x5a);
        // CB 5A 00EE
        gbc.setState(0xdb68, 0x9099, 0xce20, 0x7eaa, 0xf115, 0xc6cb, 0x1, 0x1);
        gbc.writeMem(0xdb68, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9099);
        EXPECT(gbc.pc(), 0xdb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb68), 0xcb);
        EXPECT(gbc.readMem(0xdb69), 0x5a);
        // CB 5A 00EF
        gbc.setState(0x36b6, 0x33a7, 0x5440, 0x832f, 0x11cc, 0x9b54, 0x1, 0x1);
        gbc.writeMem(0x36b6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x33a7);
        EXPECT(gbc.pc(), 0x36b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00F0
        gbc.setState(0xbb77, 0xbd9a, 0xe260, 0x164, 0x1190, 0x4e58, 0x0, 0x1);
        gbc.writeMem(0xbb77, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbd9a);
        EXPECT(gbc.pc(), 0xbb79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb77), 0xcb);
        EXPECT(gbc.readMem(0xbb78), 0x5a);
        // CB 5A 00F1
        gbc.setState(0x6903, 0xd413, 0xfa10, 0xf092, 0xdddc, 0x22d5, 0x1, 0x0);
        gbc.writeMem(0x6903, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd413);
        EXPECT(gbc.pc(), 0x6905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00F2
        gbc.setState(0xd18b, 0x8675, 0x2a00, 0x2e90, 0x8452, 0x15eb, 0x0, 0x0);
        gbc.writeMem(0xd18b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8675);
        EXPECT(gbc.pc(), 0xd18d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd18b), 0xcb);
        EXPECT(gbc.readMem(0xd18c), 0x5a);
        // CB 5A 00F3
        gbc.setState(0x5750, 0x4311, 0x10, 0xe2ad, 0x48a1, 0x3cab, 0x1, 0x0);
        gbc.writeMem(0x5750, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4311);
        EXPECT(gbc.pc(), 0x5752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00F4
        gbc.setState(0xcf97, 0x42, 0x7940, 0xfec5, 0xa363, 0x293a, 0x0, 0x1);
        gbc.writeMem(0xcf97, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x42);
        EXPECT(gbc.pc(), 0xcf99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf97), 0xcb);
        EXPECT(gbc.readMem(0xcf98), 0x5a);
        // CB 5A 00F5
        gbc.setState(0xd4b9, 0x415f, 0x9820, 0xda08, 0xb0ad, 0x552b, 0x0, 0x0);
        gbc.writeMem(0xd4b9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x415f);
        EXPECT(gbc.pc(), 0xd4bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4b9), 0xcb);
        EXPECT(gbc.readMem(0xd4ba), 0x5a);
        // CB 5A 00F6
        gbc.setState(0x49b4, 0x3e8, 0x4a70, 0x9dfe, 0x1f15, 0xcdd5, 0x0, 0x0);
        gbc.writeMem(0x49b4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3e8);
        EXPECT(gbc.pc(), 0x49b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00F7
        gbc.setState(0x4228, 0xcb2a, 0x74c0, 0xc868, 0x474d, 0xfe14, 0x0, 0x1);
        gbc.writeMem(0x4228, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xcb2a);
        EXPECT(gbc.pc(), 0x422a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 00F8
        gbc.setState(0x223e, 0xe012, 0xcf50, 0x37e5, 0x70a2, 0x31cb, 0x1, 0x0);
        gbc.writeMem(0x223e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe012);
        EXPECT(gbc.pc(), 0x2240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00F9
        gbc.setState(0x4a3d, 0xe850, 0x16f0, 0xa36e, 0xe1cd, 0x141, 0x0, 0x0);
        gbc.writeMem(0x4a3d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe850);
        EXPECT(gbc.pc(), 0x4a3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00FA
        gbc.setState(0xbe60, 0xf60c, 0xab70, 0xbb27, 0x4508, 0x7f59, 0x1, 0x0);
        gbc.writeMem(0xbe60, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf60c);
        EXPECT(gbc.pc(), 0xbe62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe60), 0xcb);
        EXPECT(gbc.readMem(0xbe61), 0x5a);
        // CB 5A 00FC
        gbc.setState(0xbba7, 0xbecb, 0x6e50, 0x5050, 0x8cca, 0x7fe2, 0x0, 0x0);
        gbc.writeMem(0xbba7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xbecb);
        EXPECT(gbc.pc(), 0xbba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbba7), 0xcb);
        EXPECT(gbc.readMem(0xbba8), 0x5a);
        // CB 5A 00FD
        gbc.setState(0x6751, 0xa266, 0x93f0, 0x3816, 0xd745, 0x5f49, 0x0, 0x1);
        gbc.writeMem(0x6751, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa266);
        EXPECT(gbc.pc(), 0x6753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00FE
        gbc.setState(0x4e03, 0x2598, 0xb3d0, 0x2d52, 0x37f6, 0x2767, 0x1, 0x0);
        gbc.writeMem(0x4e03, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2598);
        EXPECT(gbc.pc(), 0x4e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 00FF
        gbc.setState(0x2654, 0x363e, 0x8040, 0x8ecf, 0xe38, 0x245, 0x1, 0x0);
        gbc.writeMem(0x2654, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x363e);
        EXPECT(gbc.pc(), 0x2656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0100
        gbc.setState(0x9544, 0x2d6b, 0x45d0, 0x7e2a, 0xc519, 0x76a2, 0x1, 0x1);
        gbc.writeMem(0x9544, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2d6b);
        EXPECT(gbc.pc(), 0x9546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9544), 0xcb);
        EXPECT(gbc.readMem(0x9545), 0x5a);
        // CB 5A 0101
        gbc.setState(0xb955, 0x157f, 0x9730, 0x124, 0x9274, 0xa439, 0x1, 0x0);
        gbc.writeMem(0xb955, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x157f);
        EXPECT(gbc.pc(), 0xb957);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb955), 0xcb);
        EXPECT(gbc.readMem(0xb956), 0x5a);
        // CB 5A 0102
        gbc.setState(0x9b80, 0x1701, 0x6f70, 0xb118, 0xfcc3, 0xb30, 0x1, 0x1);
        gbc.writeMem(0x9b80, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1701);
        EXPECT(gbc.pc(), 0x9b82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b80), 0xcb);
        EXPECT(gbc.readMem(0x9b81), 0x5a);
        // CB 5A 0103
        gbc.setState(0x4488, 0x51fe, 0xe0, 0xf7a4, 0x4d16, 0x6743, 0x0, 0x0);
        gbc.writeMem(0x4488, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x51fe);
        EXPECT(gbc.pc(), 0x448a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0104
        gbc.setState(0x69b9, 0x267b, 0x4060, 0xe862, 0x15fe, 0x2ce, 0x1, 0x1);
        gbc.writeMem(0x69b9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x267b);
        EXPECT(gbc.pc(), 0x69bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0105
        gbc.setState(0xba41, 0xe6eb, 0x9460, 0x629c, 0xc363, 0xdc48, 0x1, 0x0);
        gbc.writeMem(0xba41, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe6eb);
        EXPECT(gbc.pc(), 0xba43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba41), 0xcb);
        EXPECT(gbc.readMem(0xba42), 0x5a);
        // CB 5A 0106
        gbc.setState(0x7ef9, 0xa28, 0x6370, 0xb1d8, 0x916a, 0xc146, 0x0, 0x0);
        gbc.writeMem(0x7ef9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa28);
        EXPECT(gbc.pc(), 0x7efb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0107
        gbc.setState(0x3f08, 0xc585, 0x1390, 0x4dd4, 0x266b, 0x4ede, 0x1, 0x0);
        gbc.writeMem(0x3f08, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc585);
        EXPECT(gbc.pc(), 0x3f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0108
        gbc.setState(0xbc71, 0xbb53, 0x5870, 0x4915, 0xa86b, 0xe064, 0x0, 0x0);
        gbc.writeMem(0xbc71, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbb53);
        EXPECT(gbc.pc(), 0xbc73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc71), 0xcb);
        EXPECT(gbc.readMem(0xbc72), 0x5a);
        // CB 5A 0109
        gbc.setState(0x7123, 0x120, 0xa30, 0x3305, 0xd06d, 0x5353, 0x0, 0x1);
        gbc.writeMem(0x7123, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x120);
        EXPECT(gbc.pc(), 0x7125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 010A
        gbc.setState(0x9c4f, 0x5861, 0xb910, 0xbc27, 0xef96, 0x510f, 0x1, 0x1);
        gbc.writeMem(0x9c4f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5861);
        EXPECT(gbc.pc(), 0x9c51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c4f), 0xcb);
        EXPECT(gbc.readMem(0x9c50), 0x5a);
        // CB 5A 010B
        gbc.setState(0x8cac, 0xfbd7, 0x9410, 0xb5a5, 0xbb91, 0xdd4c, 0x1, 0x0);
        gbc.writeMem(0x8cac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfbd7);
        EXPECT(gbc.pc(), 0x8cae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cac), 0xcb);
        EXPECT(gbc.readMem(0x8cad), 0x5a);
        // CB 5A 010C
        gbc.setState(0x2a29, 0x8335, 0x7eb0, 0xef42, 0x23ee, 0xb008, 0x0, 0x1);
        gbc.writeMem(0x2a29, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8335);
        EXPECT(gbc.pc(), 0x2a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 010D
        gbc.setState(0x5bc4, 0xeda6, 0xffd0, 0x558, 0xa153, 0x87a9, 0x0, 0x1);
        gbc.writeMem(0x5bc4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xeda6);
        EXPECT(gbc.pc(), 0x5bc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 010E
        gbc.setState(0xb9a1, 0xcdae, 0x1d70, 0x29f1, 0x145b, 0xbeca, 0x0, 0x0);
        gbc.writeMem(0xb9a1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcdae);
        EXPECT(gbc.pc(), 0xb9a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a1), 0xcb);
        EXPECT(gbc.readMem(0xb9a2), 0x5a);
        // CB 5A 010F
        gbc.setState(0xce24, 0x3a71, 0x3650, 0x6096, 0x5f0e, 0x7d93, 0x1, 0x0);
        gbc.writeMem(0xce24, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3a71);
        EXPECT(gbc.pc(), 0xce26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce24), 0xcb);
        EXPECT(gbc.readMem(0xce25), 0x5a);
        // CB 5A 0110
        gbc.setState(0xb984, 0xec5f, 0xc0f0, 0x38cd, 0x960e, 0x1f21, 0x0, 0x1);
        gbc.writeMem(0xb984, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xec5f);
        EXPECT(gbc.pc(), 0xb986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb984), 0xcb);
        EXPECT(gbc.readMem(0xb985), 0x5a);
        // CB 5A 0111
        gbc.setState(0xc5d5, 0x6cd7, 0xfe10, 0x775c, 0xb0be, 0x5654, 0x1, 0x1);
        gbc.writeMem(0xc5d5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6cd7);
        EXPECT(gbc.pc(), 0xc5d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d5), 0xcb);
        EXPECT(gbc.readMem(0xc5d6), 0x5a);
        // CB 5A 0112
        gbc.setState(0xc28, 0xf011, 0x23f0, 0x346e, 0x4ed9, 0x3796, 0x1, 0x0);
        gbc.writeMem(0xc28, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf011);
        EXPECT(gbc.pc(), 0xc2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0113
        gbc.setState(0xd2c3, 0x9305, 0xe890, 0x1eea, 0xa9e6, 0xe402, 0x1, 0x1);
        gbc.writeMem(0xd2c3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9305);
        EXPECT(gbc.pc(), 0xd2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2c3), 0xcb);
        EXPECT(gbc.readMem(0xd2c4), 0x5a);
        // CB 5A 0114
        gbc.setState(0xc25d, 0x937d, 0xf840, 0x63c2, 0x4b3, 0xf6cd, 0x1, 0x0);
        gbc.writeMem(0xc25d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x937d);
        EXPECT(gbc.pc(), 0xc25f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25d), 0xcb);
        EXPECT(gbc.readMem(0xc25e), 0x5a);
        // CB 5A 0115
        gbc.setState(0x92c7, 0x70cc, 0x6670, 0x5c8a, 0xa0c5, 0xed93, 0x0, 0x1);
        gbc.writeMem(0x92c7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x70cc);
        EXPECT(gbc.pc(), 0x92c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c7), 0xcb);
        EXPECT(gbc.readMem(0x92c8), 0x5a);
        // CB 5A 0116
        gbc.setState(0x16cf, 0x4163, 0x27a0, 0x68b6, 0x4dc3, 0x6a06, 0x0, 0x0);
        gbc.writeMem(0x16cf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4163);
        EXPECT(gbc.pc(), 0x16d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0117
        gbc.setState(0x2f9d, 0x6a3, 0x7c0, 0x2b86, 0xb417, 0x5cde, 0x0, 0x1);
        gbc.writeMem(0x2f9d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6a3);
        EXPECT(gbc.pc(), 0x2f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0118
        gbc.setState(0x4f00, 0x8a1a, 0x1e80, 0x57c, 0x9c44, 0x259b, 0x1, 0x1);
        gbc.writeMem(0x4f00, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8a1a);
        EXPECT(gbc.pc(), 0x4f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0119
        gbc.setState(0xe6e7, 0xc2d8, 0x9000, 0x8087, 0x805d, 0x2865, 0x0, 0x0);
        gbc.writeMem(0xe6e7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc2d8);
        EXPECT(gbc.pc(), 0xe6e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e7), 0xcb);
        EXPECT(gbc.readMem(0xe6e8), 0x5a);
        // CB 5A 011B
        gbc.setState(0x706a, 0xac36, 0x46f0, 0xc783, 0xbbaf, 0x26b9, 0x1, 0x0);
        gbc.writeMem(0x706a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xac36);
        EXPECT(gbc.pc(), 0x706c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 011C
        gbc.setState(0x8bb8, 0x8879, 0x84f0, 0x47fa, 0xf418, 0x376a, 0x1, 0x1);
        gbc.writeMem(0x8bb8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8879);
        EXPECT(gbc.pc(), 0x8bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb8), 0xcb);
        EXPECT(gbc.readMem(0x8bb9), 0x5a);
        // CB 5A 011D
        gbc.setState(0xc15f, 0x7036, 0xc40, 0xfa61, 0x60b2, 0x3ca8, 0x1, 0x1);
        gbc.writeMem(0xc15f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7036);
        EXPECT(gbc.pc(), 0xc161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc15f), 0xcb);
        EXPECT(gbc.readMem(0xc160), 0x5a);
        // CB 5A 011E
        gbc.setState(0x453f, 0x65fe, 0x25f0, 0x4de7, 0x1073, 0xa149, 0x0, 0x1);
        gbc.writeMem(0x453f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x65fe);
        EXPECT(gbc.pc(), 0x4541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 011F
        gbc.setState(0x288d, 0x5310, 0x2b0, 0xfbd6, 0x447a, 0xbcb1, 0x0, 0x0);
        gbc.writeMem(0x288d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5310);
        EXPECT(gbc.pc(), 0x288f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0120
        gbc.setState(0xbdbf, 0x14fe, 0x1d0, 0x83bc, 0xc900, 0x56, 0x0, 0x1);
        gbc.writeMem(0xbdbf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x14fe);
        EXPECT(gbc.pc(), 0xbdc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdbf), 0xcb);
        EXPECT(gbc.readMem(0xbdc0), 0x5a);
        // CB 5A 0121
        gbc.setState(0xa8c0, 0x3c44, 0xb1f0, 0x1d4a, 0x9155, 0x9a83, 0x0, 0x1);
        gbc.writeMem(0xa8c0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3c44);
        EXPECT(gbc.pc(), 0xa8c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8c0), 0xcb);
        EXPECT(gbc.readMem(0xa8c1), 0x5a);
        // CB 5A 0122
        gbc.setState(0xc8e9, 0xa56d, 0xf0d0, 0x3c7b, 0xaed9, 0xc244, 0x0, 0x0);
        gbc.writeMem(0xc8e9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa56d);
        EXPECT(gbc.pc(), 0xc8eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8e9), 0xcb);
        EXPECT(gbc.readMem(0xc8ea), 0x5a);
        // CB 5A 0123
        gbc.setState(0xf12, 0x32b, 0x7060, 0x8e2a, 0x7b49, 0xf3cd, 0x1, 0x1);
        gbc.writeMem(0xf12, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x32b);
        EXPECT(gbc.pc(), 0xf14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0124
        gbc.setState(0x1378, 0xba65, 0x93e0, 0x44e6, 0xec37, 0xf8bf, 0x0, 0x1);
        gbc.writeMem(0x1378, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xba65);
        EXPECT(gbc.pc(), 0x137a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0125
        gbc.setState(0xea10, 0xb85b, 0x99d0, 0x48a, 0xdb95, 0xc0ea, 0x1, 0x1);
        gbc.writeMem(0xea10, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb85b);
        EXPECT(gbc.pc(), 0xea12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea10), 0xcb);
        EXPECT(gbc.readMem(0xea11), 0x5a);
        // CB 5A 0126
        gbc.setState(0xb443, 0x9035, 0x1c60, 0xaffe, 0x9847, 0xfce2, 0x1, 0x0);
        gbc.writeMem(0xb443, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9035);
        EXPECT(gbc.pc(), 0xb445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb443), 0xcb);
        EXPECT(gbc.readMem(0xb444), 0x5a);
        // CB 5A 0127
        gbc.setState(0x9f77, 0x6bcb, 0x5e40, 0x8568, 0x3214, 0x70b7, 0x1, 0x1);
        gbc.writeMem(0x9f77, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6bcb);
        EXPECT(gbc.pc(), 0x9f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f77), 0xcb);
        EXPECT(gbc.readMem(0x9f78), 0x5a);
        // CB 5A 0128
        gbc.setState(0xedf8, 0x632e, 0xde70, 0x13db, 0x4491, 0x75ba, 0x1, 0x0);
        gbc.writeMem(0xedf8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x632e);
        EXPECT(gbc.pc(), 0xedfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedf8), 0xcb);
        EXPECT(gbc.readMem(0xedf9), 0x5a);
        // CB 5A 0129
        gbc.setState(0xb7f3, 0xb60f, 0x8f30, 0xc1fe, 0x81e6, 0xdc4d, 0x1, 0x1);
        gbc.writeMem(0xb7f3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb60f);
        EXPECT(gbc.pc(), 0xb7f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7f3), 0xcb);
        EXPECT(gbc.readMem(0xb7f4), 0x5a);
        // CB 5A 012A
        gbc.setState(0x85d, 0x5aa0, 0xcdf0, 0xb7e2, 0x92ff, 0x51f4, 0x1, 0x1);
        gbc.writeMem(0x85d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5aa0);
        EXPECT(gbc.pc(), 0x85f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 012B
        gbc.setState(0xd636, 0x65e7, 0x9d60, 0x9806, 0xe6d7, 0x2f3d, 0x1, 0x0);
        gbc.writeMem(0xd636, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x65e7);
        EXPECT(gbc.pc(), 0xd638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd636), 0xcb);
        EXPECT(gbc.readMem(0xd637), 0x5a);
        // CB 5A 012C
        gbc.setState(0xd216, 0x5d04, 0x8670, 0xd46b, 0xea1, 0x6b2e, 0x1, 0x1);
        gbc.writeMem(0xd216, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5d04);
        EXPECT(gbc.pc(), 0xd218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd216), 0xcb);
        EXPECT(gbc.readMem(0xd217), 0x5a);
        // CB 5A 012D
        gbc.setState(0xb557, 0xd834, 0xbf70, 0x4b81, 0xd144, 0x6cca, 0x1, 0x1);
        gbc.writeMem(0xb557, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd834);
        EXPECT(gbc.pc(), 0xb559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb557), 0xcb);
        EXPECT(gbc.readMem(0xb558), 0x5a);
        // CB 5A 012E
        gbc.setState(0x7b7, 0xc9d2, 0x8a60, 0x82e9, 0x43e2, 0x2cf1, 0x0, 0x0);
        gbc.writeMem(0x7b7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc9d2);
        EXPECT(gbc.pc(), 0x7b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 012F
        gbc.setState(0xe418, 0x6831, 0x5fe0, 0x7fd5, 0xab11, 0x9b18, 0x0, 0x1);
        gbc.writeMem(0xe418, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6831);
        EXPECT(gbc.pc(), 0xe41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe418), 0xcb);
        EXPECT(gbc.readMem(0xe419), 0x5a);
        // CB 5A 0130
        gbc.setState(0xd5a3, 0xa6c8, 0xfa90, 0xb375, 0xa92f, 0x8b82, 0x1, 0x1);
        gbc.writeMem(0xd5a3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa6c8);
        EXPECT(gbc.pc(), 0xd5a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5a3), 0xcb);
        EXPECT(gbc.readMem(0xd5a4), 0x5a);
        // CB 5A 0131
        gbc.setState(0x92fc, 0x3469, 0x490, 0x3380, 0x6842, 0x482b, 0x0, 0x1);
        gbc.writeMem(0x92fc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3469);
        EXPECT(gbc.pc(), 0x92fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92fc), 0xcb);
        EXPECT(gbc.readMem(0x92fd), 0x5a);
        // CB 5A 0132
        gbc.setState(0xb861, 0x6fc6, 0x67a0, 0xcf46, 0x3ff2, 0xb12c, 0x1, 0x0);
        gbc.writeMem(0xb861, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6fc6);
        EXPECT(gbc.pc(), 0xb863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb861), 0xcb);
        EXPECT(gbc.readMem(0xb862), 0x5a);
        // CB 5A 0133
        gbc.setState(0x28d2, 0xf9d0, 0xf240, 0x560d, 0x9281, 0x7330, 0x0, 0x1);
        gbc.writeMem(0x28d2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf9d0);
        EXPECT(gbc.pc(), 0x28d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0134
        gbc.setState(0xbe2b, 0x513c, 0xc3c0, 0xfca4, 0x1176, 0x9f1b, 0x0, 0x0);
        gbc.writeMem(0xbe2b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x513c);
        EXPECT(gbc.pc(), 0xbe2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe2b), 0xcb);
        EXPECT(gbc.readMem(0xbe2c), 0x5a);
        // CB 5A 0135
        gbc.setState(0x8f51, 0x8133, 0xd510, 0xedd4, 0x2193, 0x873d, 0x0, 0x0);
        gbc.writeMem(0x8f51, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8133);
        EXPECT(gbc.pc(), 0x8f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f51), 0xcb);
        EXPECT(gbc.readMem(0x8f52), 0x5a);
        // CB 5A 0136
        gbc.setState(0x1bd4, 0x808b, 0x5590, 0x610, 0x2fd, 0x9c75, 0x0, 0x0);
        gbc.writeMem(0x1bd4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x808b);
        EXPECT(gbc.pc(), 0x1bd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0137
        gbc.setState(0x14f4, 0x2cb6, 0xca50, 0x531c, 0xf1a3, 0xe332, 0x0, 0x0);
        gbc.writeMem(0x14f4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2cb6);
        EXPECT(gbc.pc(), 0x14f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0138
        gbc.setState(0x9c5c, 0xb2c0, 0x1330, 0x281b, 0x8bcf, 0x690b, 0x1, 0x1);
        gbc.writeMem(0x9c5c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb2c0);
        EXPECT(gbc.pc(), 0x9c5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c5c), 0xcb);
        EXPECT(gbc.readMem(0x9c5d), 0x5a);
        // CB 5A 0139
        gbc.setState(0x2a0f, 0xd818, 0xa2a0, 0x363f, 0x97d0, 0xc46e, 0x0, 0x1);
        gbc.writeMem(0x2a0f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd818);
        EXPECT(gbc.pc(), 0x2a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 013A
        gbc.setState(0x5712, 0xd213, 0x2f20, 0x2954, 0x8998, 0x32c2, 0x1, 0x1);
        gbc.writeMem(0x5712, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd213);
        EXPECT(gbc.pc(), 0x5714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 013B
        gbc.setState(0x7e19, 0xb5ab, 0xc920, 0x664d, 0x86a3, 0xddc6, 0x0, 0x1);
        gbc.writeMem(0x7e19, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb5ab);
        EXPECT(gbc.pc(), 0x7e1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 013C
        gbc.setState(0xac00, 0xf271, 0xac70, 0x9e77, 0x579d, 0x7fe8, 0x1, 0x0);
        gbc.writeMem(0xac00, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf271);
        EXPECT(gbc.pc(), 0xac02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac00), 0xcb);
        EXPECT(gbc.readMem(0xac01), 0x5a);
        // CB 5A 013D
        gbc.setState(0x7bf1, 0xb505, 0x11d0, 0x29bd, 0xa51d, 0xdcac, 0x1, 0x0);
        gbc.writeMem(0x7bf1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb505);
        EXPECT(gbc.pc(), 0x7bf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 013E
        gbc.setState(0xb5bf, 0xfac9, 0xcfd0, 0x43e0, 0x4f70, 0xe234, 0x0, 0x0);
        gbc.writeMem(0xb5bf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xfac9);
        EXPECT(gbc.pc(), 0xb5c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5bf), 0xcb);
        EXPECT(gbc.readMem(0xb5c0), 0x5a);
        // CB 5A 013F
        gbc.setState(0xc70a, 0x48b2, 0x3870, 0x76d2, 0x8970, 0x1b6d, 0x0, 0x1);
        gbc.writeMem(0xc70a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x48b2);
        EXPECT(gbc.pc(), 0xc70c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc70a), 0xcb);
        EXPECT(gbc.readMem(0xc70b), 0x5a);
        // CB 5A 0140
        gbc.setState(0xb045, 0xb410, 0xb2c0, 0xaa33, 0x9cef, 0x5f91, 0x1, 0x1);
        gbc.writeMem(0xb045, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb410);
        EXPECT(gbc.pc(), 0xb047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb045), 0xcb);
        EXPECT(gbc.readMem(0xb046), 0x5a);
        // CB 5A 0142
        gbc.setState(0xdac, 0xf659, 0x3480, 0xbadf, 0xb79d, 0x8bf, 0x1, 0x0);
        gbc.writeMem(0xdac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf659);
        EXPECT(gbc.pc(), 0xdae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0143
        gbc.setState(0x4156, 0x9ea5, 0xaa90, 0x143, 0xb91f, 0xa518, 0x1, 0x0);
        gbc.writeMem(0x4156, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9ea5);
        EXPECT(gbc.pc(), 0x4158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0144
        gbc.setState(0x1cf3, 0x13ba, 0x4130, 0x6b71, 0xe4b7, 0x9a3d, 0x1, 0x1);
        gbc.writeMem(0x1cf3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x13ba);
        EXPECT(gbc.pc(), 0x1cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0145
        gbc.setState(0x2238, 0x8c71, 0x9a70, 0x542a, 0xb943, 0x4bfe, 0x0, 0x0);
        gbc.writeMem(0x2238, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8c71);
        EXPECT(gbc.pc(), 0x223a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0146
        gbc.setState(0xa9b1, 0x6cf9, 0xbfb0, 0xaf0d, 0xa483, 0xa111, 0x0, 0x1);
        gbc.writeMem(0xa9b1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6cf9);
        EXPECT(gbc.pc(), 0xa9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b1), 0xcb);
        EXPECT(gbc.readMem(0xa9b2), 0x5a);
        // CB 5A 0147
        gbc.setState(0x263a, 0x37e4, 0x7380, 0x10d, 0x32de, 0xf3d4, 0x1, 0x1);
        gbc.writeMem(0x263a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x37e4);
        EXPECT(gbc.pc(), 0x263c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0148
        gbc.setState(0x2d06, 0x7070, 0xfee0, 0xb352, 0x1d0e, 0xac97, 0x1, 0x0);
        gbc.writeMem(0x2d06, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7070);
        EXPECT(gbc.pc(), 0x2d08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0149
        gbc.setState(0xad4b, 0x69bf, 0x7830, 0xdf20, 0xc88c, 0xc99e, 0x1, 0x1);
        gbc.writeMem(0xad4b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x69bf);
        EXPECT(gbc.pc(), 0xad4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4b), 0xcb);
        EXPECT(gbc.readMem(0xad4c), 0x5a);
        // CB 5A 014A
        gbc.setState(0x8a77, 0xb74d, 0xbd40, 0xf978, 0xeb2f, 0xd173, 0x1, 0x0);
        gbc.writeMem(0x8a77, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb74d);
        EXPECT(gbc.pc(), 0x8a79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a77), 0xcb);
        EXPECT(gbc.readMem(0x8a78), 0x5a);
        // CB 5A 014B
        gbc.setState(0x50fe, 0x7645, 0x4e70, 0x14e2, 0xd7f6, 0x86dc, 0x1, 0x1);
        gbc.writeMem(0x50fe, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x7645);
        EXPECT(gbc.pc(), 0x5100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 014C
        gbc.setState(0x4b7e, 0x901f, 0xaa30, 0x31e4, 0x3ec7, 0x4ef, 0x0, 0x1);
        gbc.writeMem(0x4b7e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x901f);
        EXPECT(gbc.pc(), 0x4b80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 014D
        gbc.setState(0x76e4, 0x4871, 0xd040, 0xc118, 0xa814, 0x4e08, 0x0, 0x1);
        gbc.writeMem(0x76e4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4871);
        EXPECT(gbc.pc(), 0x76e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 014E
        gbc.setState(0x7f47, 0xfab6, 0x2df0, 0xe89f, 0xa736, 0x9b32, 0x0, 0x1);
        gbc.writeMem(0x7f47, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xfab6);
        EXPECT(gbc.pc(), 0x7f49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0150
        gbc.setState(0xb2d4, 0xd514, 0xcb80, 0x4dda, 0xf7fe, 0x345e, 0x1, 0x1);
        gbc.writeMem(0xb2d4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd514);
        EXPECT(gbc.pc(), 0xb2d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d4), 0xcb);
        EXPECT(gbc.readMem(0xb2d5), 0x5a);
        // CB 5A 0151
        gbc.setState(0x7fb2, 0x6dac, 0x3410, 0x4874, 0xd441, 0x2d31, 0x1, 0x0);
        gbc.writeMem(0x7fb2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6dac);
        EXPECT(gbc.pc(), 0x7fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0152
        gbc.setState(0x2276, 0x9662, 0x7c80, 0x8403, 0x6a35, 0xae81, 0x1, 0x1);
        gbc.writeMem(0x2276, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9662);
        EXPECT(gbc.pc(), 0x2278);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0153
        gbc.setState(0x32e4, 0xeeaa, 0x4d50, 0x89de, 0x659, 0x388f, 0x0, 0x1);
        gbc.writeMem(0x32e4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xeeaa);
        EXPECT(gbc.pc(), 0x32e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0154
        gbc.setState(0x8c02, 0x62b9, 0xfed0, 0x690d, 0xf4ea, 0xcbda, 0x0, 0x1);
        gbc.writeMem(0x8c02, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x62b9);
        EXPECT(gbc.pc(), 0x8c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c02), 0xcb);
        EXPECT(gbc.readMem(0x8c03), 0x5a);
        // CB 5A 0155
        gbc.setState(0xcd12, 0x5618, 0x69c0, 0x123, 0x3b9e, 0x1ae, 0x1, 0x0);
        gbc.writeMem(0xcd12, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5618);
        EXPECT(gbc.pc(), 0xcd14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd12), 0xcb);
        EXPECT(gbc.readMem(0xcd13), 0x5a);
        // CB 5A 0156
        gbc.setState(0x6e1f, 0x5098, 0xdc20, 0x958c, 0x3e98, 0x25f6, 0x0, 0x0);
        gbc.writeMem(0x6e1f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5098);
        EXPECT(gbc.pc(), 0x6e21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0157
        gbc.setState(0xf25, 0x46bd, 0x2f70, 0x827c, 0x33d4, 0x8d4a, 0x1, 0x0);
        gbc.writeMem(0xf25, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x46bd);
        EXPECT(gbc.pc(), 0xf27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0158
        gbc.setState(0x5751, 0x5cc8, 0xe5e0, 0xdf86, 0xa1c0, 0xaddd, 0x0, 0x0);
        gbc.writeMem(0x5751, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5cc8);
        EXPECT(gbc.pc(), 0x5753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0159
        gbc.setState(0x3fec, 0xa279, 0x7590, 0xee12, 0xe3fa, 0xf628, 0x1, 0x0);
        gbc.writeMem(0x3fec, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa279);
        EXPECT(gbc.pc(), 0x3fee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 015A
        gbc.setState(0xbc31, 0xf23e, 0xc340, 0xf4e9, 0x81f1, 0xef4d, 0x1, 0x1);
        gbc.writeMem(0xbc31, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf23e);
        EXPECT(gbc.pc(), 0xbc33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc31), 0xcb);
        EXPECT(gbc.readMem(0xbc32), 0x5a);
        // CB 5A 015B
        gbc.setState(0x1bcb, 0x85b5, 0xb300, 0x888a, 0xdfd, 0xb340, 0x1, 0x0);
        gbc.writeMem(0x1bcb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x85b5);
        EXPECT(gbc.pc(), 0x1bcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 015C
        gbc.setState(0xb517, 0x5ce1, 0x2490, 0xe999, 0x1ab7, 0xab1f, 0x1, 0x0);
        gbc.writeMem(0xb517, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5ce1);
        EXPECT(gbc.pc(), 0xb519);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb517), 0xcb);
        EXPECT(gbc.readMem(0xb518), 0x5a);
        // CB 5A 015D
        gbc.setState(0xc09c, 0x55be, 0xadc0, 0xc95e, 0x45cd, 0x8ee5, 0x0, 0x1);
        gbc.writeMem(0xc09c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x55be);
        EXPECT(gbc.pc(), 0xc09e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc09c), 0xcb);
        EXPECT(gbc.readMem(0xc09d), 0x5a);
        // CB 5A 015E
        gbc.setState(0x42c1, 0x139b, 0x4820, 0x8bb2, 0x58c4, 0xbdd3, 0x1, 0x1);
        gbc.writeMem(0x42c1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x139b);
        EXPECT(gbc.pc(), 0x42c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 015F
        gbc.setState(0x8c50, 0xb595, 0xa910, 0x75e7, 0x2535, 0x97, 0x1, 0x0);
        gbc.writeMem(0x8c50, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb595);
        EXPECT(gbc.pc(), 0x8c52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c50), 0xcb);
        EXPECT(gbc.readMem(0x8c51), 0x5a);
        // CB 5A 0160
        gbc.setState(0xa995, 0x60ec, 0x64c0, 0x362d, 0x27b8, 0xa62c, 0x1, 0x0);
        gbc.writeMem(0xa995, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x60ec);
        EXPECT(gbc.pc(), 0xa997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa995), 0xcb);
        EXPECT(gbc.readMem(0xa996), 0x5a);
        // CB 5A 0161
        gbc.setState(0x7949, 0xe369, 0x78c0, 0xb4ed, 0x94ff, 0xdc89, 0x1, 0x1);
        gbc.writeMem(0x7949, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe369);
        EXPECT(gbc.pc(), 0x794b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0162
        gbc.setState(0x441b, 0xffc5, 0xad80, 0x8eae, 0x73c5, 0x930d, 0x1, 0x1);
        gbc.writeMem(0x441b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xffc5);
        EXPECT(gbc.pc(), 0x441d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0163
        gbc.setState(0x6810, 0xf53e, 0x1950, 0xf5cc, 0x97c7, 0x75a1, 0x1, 0x0);
        gbc.writeMem(0x6810, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf53e);
        EXPECT(gbc.pc(), 0x6812);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0164
        gbc.setState(0x48ce, 0x2ab9, 0x1d80, 0xba5a, 0x1c8c, 0x9d2e, 0x0, 0x1);
        gbc.writeMem(0x48ce, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2ab9);
        EXPECT(gbc.pc(), 0x48d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0165
        gbc.setState(0x9f4e, 0x7918, 0x6f80, 0xad61, 0x5238, 0x432b, 0x1, 0x1);
        gbc.writeMem(0x9f4e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7918);
        EXPECT(gbc.pc(), 0x9f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f4e), 0xcb);
        EXPECT(gbc.readMem(0x9f4f), 0x5a);
        // CB 5A 0166
        gbc.setState(0x28ac, 0x9901, 0x2b10, 0x7f91, 0x5bbc, 0xd980, 0x1, 0x1);
        gbc.writeMem(0x28ac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9901);
        EXPECT(gbc.pc(), 0x28ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0167
        gbc.setState(0x99e6, 0xe41a, 0xa560, 0xd7a6, 0xe488, 0xc62a, 0x1, 0x0);
        gbc.writeMem(0x99e6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe41a);
        EXPECT(gbc.pc(), 0x99e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e6), 0xcb);
        EXPECT(gbc.readMem(0x99e7), 0x5a);
        // CB 5A 0168
        gbc.setState(0xd982, 0x2a9e, 0x9c00, 0xaf51, 0x4b1a, 0xa834, 0x0, 0x0);
        gbc.writeMem(0xd982, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2a9e);
        EXPECT(gbc.pc(), 0xd984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd982), 0xcb);
        EXPECT(gbc.readMem(0xd983), 0x5a);
        // CB 5A 0169
        gbc.setState(0x585, 0xc367, 0xc530, 0xc394, 0x3e1e, 0x4262, 0x1, 0x1);
        gbc.writeMem(0x585, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc367);
        EXPECT(gbc.pc(), 0x587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 016A
        gbc.setState(0xd250, 0xea8e, 0x9040, 0x7088, 0x22b7, 0x971, 0x1, 0x0);
        gbc.writeMem(0xd250, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xea8e);
        EXPECT(gbc.pc(), 0xd252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd250), 0xcb);
        EXPECT(gbc.readMem(0xd251), 0x5a);
        // CB 5A 016B
        gbc.setState(0x3cf5, 0x73e2, 0x9cf0, 0x6aa2, 0x46c5, 0x90ff, 0x1, 0x0);
        gbc.writeMem(0x3cf5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x73e2);
        EXPECT(gbc.pc(), 0x3cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 016C
        gbc.setState(0xc8a6, 0xef95, 0x22b0, 0x5f5a, 0x87cb, 0xdc61, 0x0, 0x0);
        gbc.writeMem(0xc8a6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xef95);
        EXPECT(gbc.pc(), 0xc8a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a6), 0xcb);
        EXPECT(gbc.readMem(0xc8a7), 0x5a);
        // CB 5A 016D
        gbc.setState(0xc62c, 0x15d6, 0xa8c0, 0x1b60, 0xd624, 0xbfe6, 0x1, 0x1);
        gbc.writeMem(0xc62c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x15d6);
        EXPECT(gbc.pc(), 0xc62e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62c), 0xcb);
        EXPECT(gbc.readMem(0xc62d), 0x5a);
        // CB 5A 016E
        gbc.setState(0x6637, 0xab25, 0xa40, 0xa8f, 0x6328, 0x4989, 0x0, 0x0);
        gbc.writeMem(0x6637, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xab25);
        EXPECT(gbc.pc(), 0x6639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 016F
        gbc.setState(0x7276, 0xe014, 0xc230, 0xa9ce, 0x4a5d, 0x576c, 0x0, 0x1);
        gbc.writeMem(0x7276, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe014);
        EXPECT(gbc.pc(), 0x7278);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0171
        gbc.setState(0x5dc1, 0xf9a8, 0x6ac0, 0xdc02, 0xd1af, 0xde00, 0x0, 0x0);
        gbc.writeMem(0x5dc1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf9a8);
        EXPECT(gbc.pc(), 0x5dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0172
        gbc.setState(0x3df, 0xae3f, 0xa800, 0x6521, 0x4a8c, 0x9bc, 0x0, 0x0);
        gbc.writeMem(0x3df, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xae3f);
        EXPECT(gbc.pc(), 0x3e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0173
        gbc.setState(0x63bc, 0xca4d, 0x65a0, 0xcd71, 0x9faf, 0x80fb, 0x1, 0x0);
        gbc.writeMem(0x63bc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xca4d);
        EXPECT(gbc.pc(), 0x63be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0174
        gbc.setState(0xdcf3, 0xcaed, 0xf40, 0xcc77, 0x6664, 0x31ec, 0x0, 0x1);
        gbc.writeMem(0xdcf3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xcaed);
        EXPECT(gbc.pc(), 0xdcf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf3), 0xcb);
        EXPECT(gbc.readMem(0xdcf4), 0x5a);
        // CB 5A 0175
        gbc.setState(0x9e49, 0x31fc, 0x5450, 0x733b, 0xdf53, 0x7b5e, 0x0, 0x1);
        gbc.writeMem(0x9e49, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x31fc);
        EXPECT(gbc.pc(), 0x9e4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e49), 0xcb);
        EXPECT(gbc.readMem(0x9e4a), 0x5a);
        // CB 5A 0176
        gbc.setState(0x27f6, 0xec58, 0xfd00, 0x8ee, 0xe6ac, 0xaf17, 0x0, 0x0);
        gbc.writeMem(0x27f6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xec58);
        EXPECT(gbc.pc(), 0x27f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0177
        gbc.setState(0x9308, 0xe572, 0xc8c0, 0x3f35, 0x59c2, 0x821e, 0x0, 0x1);
        gbc.writeMem(0x9308, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe572);
        EXPECT(gbc.pc(), 0x930a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9308), 0xcb);
        EXPECT(gbc.readMem(0x9309), 0x5a);
        // CB 5A 0178
        gbc.setState(0xb60e, 0xc13b, 0x9340, 0x834, 0x8285, 0x57ae, 0x0, 0x1);
        gbc.writeMem(0xb60e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc13b);
        EXPECT(gbc.pc(), 0xb610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb60e), 0xcb);
        EXPECT(gbc.readMem(0xb60f), 0x5a);
        // CB 5A 0179
        gbc.setState(0x247f, 0x943a, 0xb9a0, 0xfa01, 0x28a1, 0xd579, 0x0, 0x1);
        gbc.writeMem(0x247f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x943a);
        EXPECT(gbc.pc(), 0x2481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 017A
        gbc.setState(0x679e, 0xd051, 0xe480, 0xb6b0, 0x9819, 0xcd2f, 0x0, 0x0);
        gbc.writeMem(0x679e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd051);
        EXPECT(gbc.pc(), 0x67a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 017B
        gbc.setState(0xce11, 0x50dd, 0x8900, 0x718a, 0xf265, 0x1976, 0x0, 0x0);
        gbc.writeMem(0xce11, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x50dd);
        EXPECT(gbc.pc(), 0xce13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce11), 0xcb);
        EXPECT(gbc.readMem(0xce12), 0x5a);
        // CB 5A 017C
        gbc.setState(0xa08b, 0xf08b, 0x73e0, 0xd5b7, 0x7a76, 0xfff, 0x1, 0x0);
        gbc.writeMem(0xa08b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf08b);
        EXPECT(gbc.pc(), 0xa08d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08b), 0xcb);
        EXPECT(gbc.readMem(0xa08c), 0x5a);
        // CB 5A 017D
        gbc.setState(0x258f, 0x8a56, 0xcc10, 0x4bf1, 0x39af, 0x3bfa, 0x1, 0x0);
        gbc.writeMem(0x258f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8a56);
        EXPECT(gbc.pc(), 0x2591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 017E
        gbc.setState(0x5925, 0x5021, 0xa4d0, 0x19f1, 0xb872, 0x314d, 0x0, 0x0);
        gbc.writeMem(0x5925, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5021);
        EXPECT(gbc.pc(), 0x5927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 017F
        gbc.setState(0x4605, 0x7d73, 0x79b0, 0xd4fe, 0x44b7, 0x408b, 0x1, 0x1);
        gbc.writeMem(0x4605, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7d73);
        EXPECT(gbc.pc(), 0x4607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0180
        gbc.setState(0x75bc, 0xde46, 0xaf30, 0x5a0e, 0xd663, 0x941e, 0x0, 0x1);
        gbc.writeMem(0x75bc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xde46);
        EXPECT(gbc.pc(), 0x75be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0181
        gbc.setState(0x81c, 0x1e56, 0x6290, 0xfc84, 0xd591, 0xddf2, 0x0, 0x1);
        gbc.writeMem(0x81c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1e56);
        EXPECT(gbc.pc(), 0x81e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0183
        gbc.setState(0x63df, 0x5fb8, 0x9280, 0x2a9b, 0xe4b7, 0x2feb, 0x1, 0x0);
        gbc.writeMem(0x63df, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5fb8);
        EXPECT(gbc.pc(), 0x63e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0184
        gbc.setState(0x3bfe, 0x46af, 0x68f0, 0x3218, 0x987d, 0x9b61, 0x1, 0x1);
        gbc.writeMem(0x3bfe, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x46af);
        EXPECT(gbc.pc(), 0x3c00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0185
        gbc.setState(0x5b41, 0xce7e, 0x8ca0, 0x6e8d, 0xd1fb, 0x52c9, 0x0, 0x0);
        gbc.writeMem(0x5b41, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xce7e);
        EXPECT(gbc.pc(), 0x5b43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0186
        gbc.setState(0xdf16, 0x2985, 0xb340, 0x7d63, 0xd97f, 0xc5d2, 0x1, 0x1);
        gbc.writeMem(0xdf16, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2985);
        EXPECT(gbc.pc(), 0xdf18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf16), 0xcb);
        EXPECT(gbc.readMem(0xdf17), 0x5a);
        // CB 5A 0187
        gbc.setState(0x5519, 0xe479, 0x1300, 0x3385, 0xac75, 0xc530, 0x1, 0x1);
        gbc.writeMem(0x5519, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe479);
        EXPECT(gbc.pc(), 0x551b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0188
        gbc.setState(0x977a, 0xf9f, 0x6a10, 0x4121, 0xb8a6, 0x6076, 0x1, 0x1);
        gbc.writeMem(0x977a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf9f);
        EXPECT(gbc.pc(), 0x977c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x977a), 0xcb);
        EXPECT(gbc.readMem(0x977b), 0x5a);
        // CB 5A 0189
        gbc.setState(0x8a00, 0x7536, 0x1980, 0x64fd, 0x88e2, 0x44e6, 0x1, 0x0);
        gbc.writeMem(0x8a00, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7536);
        EXPECT(gbc.pc(), 0x8a02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a00), 0xcb);
        EXPECT(gbc.readMem(0x8a01), 0x5a);
        // CB 5A 018A
        gbc.setState(0x8a3, 0x7626, 0x9b80, 0xa879, 0xa816, 0x6f47, 0x0, 0x1);
        gbc.writeMem(0x8a3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7626);
        EXPECT(gbc.pc(), 0x8a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 018B
        gbc.setState(0x97bd, 0x7042, 0x81b0, 0x9497, 0x7368, 0x5cc9, 0x0, 0x1);
        gbc.writeMem(0x97bd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7042);
        EXPECT(gbc.pc(), 0x97bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97bd), 0xcb);
        EXPECT(gbc.readMem(0x97be), 0x5a);
        // CB 5A 018D
        gbc.setState(0x4ca2, 0xb2c4, 0x100, 0x180d, 0x6ef3, 0x95d6, 0x0, 0x1);
        gbc.writeMem(0x4ca2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb2c4);
        EXPECT(gbc.pc(), 0x4ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 018E
        gbc.setState(0x37e6, 0x1ad5, 0x5550, 0x1e5, 0x9a67, 0xebec, 0x1, 0x1);
        gbc.writeMem(0x37e6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1ad5);
        EXPECT(gbc.pc(), 0x37e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 018F
        gbc.setState(0xcb64, 0xf45a, 0x9ba0, 0x6527, 0xa11f, 0x4aad, 0x0, 0x0);
        gbc.writeMem(0xcb64, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf45a);
        EXPECT(gbc.pc(), 0xcb66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb64), 0xcb);
        EXPECT(gbc.readMem(0xcb65), 0x5a);
        // CB 5A 0190
        gbc.setState(0xd60b, 0x81c, 0x8d80, 0xaa46, 0x319c, 0x9df6, 0x1, 0x1);
        gbc.writeMem(0xd60b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x81c);
        EXPECT(gbc.pc(), 0xd60d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd60b), 0xcb);
        EXPECT(gbc.readMem(0xd60c), 0x5a);
        // CB 5A 0191
        gbc.setState(0x19cd, 0xb48e, 0xa6c0, 0x8a4c, 0x668, 0x2215, 0x0, 0x0);
        gbc.writeMem(0x19cd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb48e);
        EXPECT(gbc.pc(), 0x19cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0192
        gbc.setState(0x551b, 0xb645, 0x4ab0, 0x3199, 0x8bf9, 0xfbe7, 0x1, 0x1);
        gbc.writeMem(0x551b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb645);
        EXPECT(gbc.pc(), 0x551d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0193
        gbc.setState(0x89c, 0x1447, 0x82f0, 0x3cf1, 0xd310, 0xce3a, 0x0, 0x1);
        gbc.writeMem(0x89c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1447);
        EXPECT(gbc.pc(), 0x89e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0194
        gbc.setState(0xa4cc, 0x4274, 0x6d60, 0xb492, 0xa3cd, 0xb4a5, 0x1, 0x1);
        gbc.writeMem(0xa4cc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4274);
        EXPECT(gbc.pc(), 0xa4ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4cc), 0xcb);
        EXPECT(gbc.readMem(0xa4cd), 0x5a);
        // CB 5A 0195
        gbc.setState(0xaa23, 0x26dc, 0x7d30, 0x314f, 0x1b5f, 0x7e4, 0x0, 0x1);
        gbc.writeMem(0xaa23, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x26dc);
        EXPECT(gbc.pc(), 0xaa25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa23), 0xcb);
        EXPECT(gbc.readMem(0xaa24), 0x5a);
        // CB 5A 0196
        gbc.setState(0x6a23, 0x6a9e, 0xa9d0, 0xb65e, 0x17e0, 0xd04f, 0x1, 0x0);
        gbc.writeMem(0x6a23, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6a9e);
        EXPECT(gbc.pc(), 0x6a25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0197
        gbc.setState(0xe4ae, 0x90b8, 0x1db0, 0x8516, 0xeaa8, 0x74d2, 0x0, 0x1);
        gbc.writeMem(0xe4ae, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x90b8);
        EXPECT(gbc.pc(), 0xe4b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ae), 0xcb);
        EXPECT(gbc.readMem(0xe4af), 0x5a);
        // CB 5A 0198
        gbc.setState(0xd3c4, 0x12bd, 0xb6b0, 0x791b, 0xab3e, 0x76c9, 0x0, 0x0);
        gbc.writeMem(0xd3c4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x12bd);
        EXPECT(gbc.pc(), 0xd3c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3c4), 0xcb);
        EXPECT(gbc.readMem(0xd3c5), 0x5a);
        // CB 5A 019A
        gbc.setState(0x4f7a, 0x8ee0, 0x2d50, 0xfc1f, 0x1339, 0x40d2, 0x0, 0x1);
        gbc.writeMem(0x4f7a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8ee0);
        EXPECT(gbc.pc(), 0x4f7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 019C
        gbc.setState(0xe88, 0xffc2, 0x3450, 0xc3d4, 0x46a6, 0x95b0, 0x0, 0x1);
        gbc.writeMem(0xe88, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xffc2);
        EXPECT(gbc.pc(), 0xe8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 019D
        gbc.setState(0xaee, 0x41bc, 0x62e0, 0xa651, 0x1b96, 0xea22, 0x1, 0x1);
        gbc.writeMem(0xaee, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x41bc);
        EXPECT(gbc.pc(), 0xaf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 019E
        gbc.setState(0xae78, 0xc239, 0xdb0, 0x57ee, 0xe624, 0xb35d, 0x0, 0x1);
        gbc.writeMem(0xae78, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc239);
        EXPECT(gbc.pc(), 0xae7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae78), 0xcb);
        EXPECT(gbc.readMem(0xae79), 0x5a);
        // CB 5A 019F
        gbc.setState(0xa9db, 0x132, 0x4240, 0xb4ab, 0x4708, 0x966a, 0x1, 0x1);
        gbc.writeMem(0xa9db, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x132);
        EXPECT(gbc.pc(), 0xa9dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9db), 0xcb);
        EXPECT(gbc.readMem(0xa9dc), 0x5a);
        // CB 5A 01A0
        gbc.setState(0xbee6, 0xe574, 0xb9d0, 0x1ed1, 0x5660, 0x415, 0x1, 0x1);
        gbc.writeMem(0xbee6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe574);
        EXPECT(gbc.pc(), 0xbee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbee6), 0xcb);
        EXPECT(gbc.readMem(0xbee7), 0x5a);
        // CB 5A 01A1
        gbc.setState(0x82db, 0x60c8, 0xa0a0, 0x5f63, 0x1697, 0x6994, 0x0, 0x1);
        gbc.writeMem(0x82db, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x60c8);
        EXPECT(gbc.pc(), 0x82dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82db), 0xcb);
        EXPECT(gbc.readMem(0x82dc), 0x5a);
        // CB 5A 01A2
        gbc.setState(0xe680, 0xe843, 0x29e0, 0xb34e, 0xe754, 0x678, 0x1, 0x1);
        gbc.writeMem(0xe680, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe843);
        EXPECT(gbc.pc(), 0xe682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe680), 0xcb);
        EXPECT(gbc.readMem(0xe681), 0x5a);
        // CB 5A 01A3
        gbc.setState(0x3e22, 0x91a5, 0xa9a0, 0xc546, 0xafd2, 0x422, 0x1, 0x0);
        gbc.writeMem(0x3e22, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x91a5);
        EXPECT(gbc.pc(), 0x3e24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01A4
        gbc.setState(0x5216, 0x80ad, 0x7380, 0x5f3b, 0xb2d0, 0x93f7, 0x0, 0x1);
        gbc.writeMem(0x5216, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x80ad);
        EXPECT(gbc.pc(), 0x5218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01A5
        gbc.setState(0x9ae9, 0x6543, 0x69e0, 0xb280, 0x26e0, 0xd65e, 0x1, 0x1);
        gbc.writeMem(0x9ae9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6543);
        EXPECT(gbc.pc(), 0x9aeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae9), 0xcb);
        EXPECT(gbc.readMem(0x9aea), 0x5a);
        // CB 5A 01A6
        gbc.setState(0x91ef, 0xd7d9, 0x7ba0, 0x4cc9, 0x7b68, 0x7121, 0x0, 0x0);
        gbc.writeMem(0x91ef, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd7d9);
        EXPECT(gbc.pc(), 0x91f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ef), 0xcb);
        EXPECT(gbc.readMem(0x91f0), 0x5a);
        // CB 5A 01A8
        gbc.setState(0x3186, 0xccec, 0x3240, 0xdc45, 0xa4b4, 0xcb76, 0x0, 0x0);
        gbc.writeMem(0x3186, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xccec);
        EXPECT(gbc.pc(), 0x3188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01A9
        gbc.setState(0x4747, 0xc2d, 0xab40, 0x87d3, 0x594b, 0x245, 0x1, 0x0);
        gbc.writeMem(0x4747, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc2d);
        EXPECT(gbc.pc(), 0x4749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01AA
        gbc.setState(0x363e, 0xa6b7, 0x9d80, 0x2680, 0x215a, 0x35c9, 0x0, 0x0);
        gbc.writeMem(0x363e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa6b7);
        EXPECT(gbc.pc(), 0x3640);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01AB
        gbc.setState(0xbd9b, 0x3a72, 0xb750, 0xa93e, 0x7731, 0x8ba7, 0x0, 0x0);
        gbc.writeMem(0xbd9b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3a72);
        EXPECT(gbc.pc(), 0xbd9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd9b), 0xcb);
        EXPECT(gbc.readMem(0xbd9c), 0x5a);
        // CB 5A 01AC
        gbc.setState(0x78d9, 0xeaed, 0xd620, 0xe12d, 0xdc30, 0x38a3, 0x0, 0x1);
        gbc.writeMem(0x78d9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xeaed);
        EXPECT(gbc.pc(), 0x78db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01AD
        gbc.setState(0xa411, 0x9804, 0x1b00, 0x86bd, 0xee5c, 0x2262, 0x1, 0x0);
        gbc.writeMem(0xa411, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9804);
        EXPECT(gbc.pc(), 0xa413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa411), 0xcb);
        EXPECT(gbc.readMem(0xa412), 0x5a);
        // CB 5A 01AE
        gbc.setState(0x37a4, 0x61bf, 0xd080, 0xf4f4, 0x4878, 0x1382, 0x1, 0x0);
        gbc.writeMem(0x37a4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x61bf);
        EXPECT(gbc.pc(), 0x37a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01AF
        gbc.setState(0x432f, 0xc5a1, 0xa90, 0x17d6, 0x2f0d, 0xe315, 0x1, 0x0);
        gbc.writeMem(0x432f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc5a1);
        EXPECT(gbc.pc(), 0x4331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01B0
        gbc.setState(0x5eea, 0x9300, 0x3e80, 0xa199, 0xd98a, 0xaf75, 0x1, 0x0);
        gbc.writeMem(0x5eea, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9300);
        EXPECT(gbc.pc(), 0x5eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01B1
        gbc.setState(0xdbe9, 0xe81e, 0x1230, 0xf378, 0x1886, 0xf1e7, 0x1, 0x0);
        gbc.writeMem(0xdbe9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe81e);
        EXPECT(gbc.pc(), 0xdbeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe9), 0xcb);
        EXPECT(gbc.readMem(0xdbea), 0x5a);
        // CB 5A 01B2
        gbc.setState(0xcb8d, 0xdcd3, 0x5d10, 0x933d, 0xf4fc, 0xc2bc, 0x0, 0x0);
        gbc.writeMem(0xcb8d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdcd3);
        EXPECT(gbc.pc(), 0xcb8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb8d), 0xcb);
        EXPECT(gbc.readMem(0xcb8e), 0x5a);
        // CB 5A 01B3
        gbc.setState(0x7da2, 0xf553, 0x7970, 0x4a59, 0x236c, 0x75f, 0x0, 0x0);
        gbc.writeMem(0x7da2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf553);
        EXPECT(gbc.pc(), 0x7da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01B4
        gbc.setState(0x7cdc, 0xb95b, 0x3810, 0x25d5, 0x1667, 0x91d0, 0x0, 0x0);
        gbc.writeMem(0x7cdc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb95b);
        EXPECT(gbc.pc(), 0x7cde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01B5
        gbc.setState(0xab8e, 0xaf70, 0x4a90, 0x5a5c, 0x1b10, 0x4a6, 0x0, 0x0);
        gbc.writeMem(0xab8e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xaf70);
        EXPECT(gbc.pc(), 0xab90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab8e), 0xcb);
        EXPECT(gbc.readMem(0xab8f), 0x5a);
        // CB 5A 01B7
        gbc.setState(0x92d8, 0xf7b1, 0xae50, 0x4576, 0xca43, 0x3496, 0x0, 0x1);
        gbc.writeMem(0x92d8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf7b1);
        EXPECT(gbc.pc(), 0x92da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92d8), 0xcb);
        EXPECT(gbc.readMem(0x92d9), 0x5a);
        // CB 5A 01B9
        gbc.setState(0xc747, 0xfa60, 0xde00, 0xb28f, 0x2bc3, 0x6657, 0x0, 0x0);
        gbc.writeMem(0xc747, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xfa60);
        EXPECT(gbc.pc(), 0xc749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc747), 0xcb);
        EXPECT(gbc.readMem(0xc748), 0x5a);
        // CB 5A 01BA
        gbc.setState(0x23a4, 0x5ff1, 0xe440, 0xee99, 0xb6af, 0xf6fd, 0x0, 0x0);
        gbc.writeMem(0x23a4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5ff1);
        EXPECT(gbc.pc(), 0x23a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01BC
        gbc.setState(0xe1ef, 0x7f64, 0xdac0, 0xcc90, 0x6cd, 0xf4e6, 0x1, 0x0);
        gbc.writeMem(0xe1ef, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7f64);
        EXPECT(gbc.pc(), 0xe1f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1ef), 0xcb);
        EXPECT(gbc.readMem(0xe1f0), 0x5a);
        // CB 5A 01BD
        gbc.setState(0x577e, 0x68f5, 0x5f40, 0x1f2b, 0x6875, 0x66da, 0x0, 0x0);
        gbc.writeMem(0x577e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x68f5);
        EXPECT(gbc.pc(), 0x5780);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01BF
        gbc.setState(0x4de4, 0x83c8, 0x1c20, 0x56b7, 0x6786, 0x9203, 0x1, 0x0);
        gbc.writeMem(0x4de4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x83c8);
        EXPECT(gbc.pc(), 0x4de6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01C0
        gbc.setState(0x1418, 0x8f4e, 0x44c0, 0x3fc1, 0xbd64, 0xb9fe, 0x0, 0x1);
        gbc.writeMem(0x1418, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8f4e);
        EXPECT(gbc.pc(), 0x141a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01C1
        gbc.setState(0xaf1e, 0x75dc, 0x4e10, 0x209b, 0x5fc9, 0x108b, 0x1, 0x0);
        gbc.writeMem(0xaf1e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x75dc);
        EXPECT(gbc.pc(), 0xaf20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf1e), 0xcb);
        EXPECT(gbc.readMem(0xaf1f), 0x5a);
        // CB 5A 01C3
        gbc.setState(0x601f, 0x875c, 0xda20, 0x608c, 0x579c, 0x494f, 0x0, 0x0);
        gbc.writeMem(0x601f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x875c);
        EXPECT(gbc.pc(), 0x6021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01C4
        gbc.setState(0xf8e, 0xfda0, 0xa0c0, 0x89f4, 0x1613, 0x416e, 0x0, 0x0);
        gbc.writeMem(0xf8e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfda0);
        EXPECT(gbc.pc(), 0xf90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01C5
        gbc.setState(0x1901, 0x8730, 0xded0, 0xa74, 0x5fff, 0x3b66, 0x1, 0x0);
        gbc.writeMem(0x1901, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8730);
        EXPECT(gbc.pc(), 0x1903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01C6
        gbc.setState(0x8381, 0x4626, 0xf190, 0xd3bb, 0xdd1, 0x1fd8, 0x1, 0x0);
        gbc.writeMem(0x8381, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4626);
        EXPECT(gbc.pc(), 0x8383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8381), 0xcb);
        EXPECT(gbc.readMem(0x8382), 0x5a);
        // CB 5A 01C7
        gbc.setState(0xba10, 0xf464, 0x68d0, 0x3ec3, 0xc88d, 0x5f2b, 0x1, 0x1);
        gbc.writeMem(0xba10, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf464);
        EXPECT(gbc.pc(), 0xba12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba10), 0xcb);
        EXPECT(gbc.readMem(0xba11), 0x5a);
        // CB 5A 01C9
        gbc.setState(0x3603, 0xadd3, 0xc5f0, 0xb40, 0x465f, 0xc053, 0x0, 0x0);
        gbc.writeMem(0x3603, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xadd3);
        EXPECT(gbc.pc(), 0x3605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01CA
        gbc.setState(0x54b6, 0xc0a6, 0x1670, 0x4877, 0xa40c, 0x167f, 0x0, 0x1);
        gbc.writeMem(0x54b6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc0a6);
        EXPECT(gbc.pc(), 0x54b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01CB
        gbc.setState(0xd60, 0xad78, 0x3410, 0xb1ea, 0x137c, 0x5edf, 0x0, 0x1);
        gbc.writeMem(0xd60, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xad78);
        EXPECT(gbc.pc(), 0xd62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01CC
        gbc.setState(0x59a0, 0x68ad, 0xfc60, 0x9fc7, 0x284f, 0x82fa, 0x1, 0x0);
        gbc.writeMem(0x59a0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x68ad);
        EXPECT(gbc.pc(), 0x59a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01CD
        gbc.setState(0x68a2, 0x6856, 0xf340, 0xe80b, 0xba8c, 0xf05, 0x1, 0x1);
        gbc.writeMem(0x68a2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6856);
        EXPECT(gbc.pc(), 0x68a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01CE
        gbc.setState(0xb370, 0x8546, 0xd120, 0x8db3, 0xfec5, 0xb64b, 0x0, 0x1);
        gbc.writeMem(0xb370, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8546);
        EXPECT(gbc.pc(), 0xb372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb370), 0xcb);
        EXPECT(gbc.readMem(0xb371), 0x5a);
        // CB 5A 01CF
        gbc.setState(0x6977, 0x5ddd, 0x590, 0x3010, 0x382, 0xb46c, 0x0, 0x1);
        gbc.writeMem(0x6977, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5ddd);
        EXPECT(gbc.pc(), 0x6979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01D0
        gbc.setState(0xa849, 0x981d, 0x5ac0, 0xfb42, 0xa8fe, 0xe4fa, 0x0, 0x0);
        gbc.writeMem(0xa849, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x981d);
        EXPECT(gbc.pc(), 0xa84b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa849), 0xcb);
        EXPECT(gbc.readMem(0xa84a), 0x5a);
        // CB 5A 01D1
        gbc.setState(0x2b32, 0x286d, 0xa120, 0xdbe0, 0x5f45, 0x1000, 0x0, 0x0);
        gbc.writeMem(0x2b32, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x286d);
        EXPECT(gbc.pc(), 0x2b34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01D2
        gbc.setState(0xcb61, 0x3148, 0xa80, 0x4982, 0x6b5a, 0x40eb, 0x0, 0x1);
        gbc.writeMem(0xcb61, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3148);
        EXPECT(gbc.pc(), 0xcb63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb61), 0xcb);
        EXPECT(gbc.readMem(0xcb62), 0x5a);
        // CB 5A 01D3
        gbc.setState(0x63d4, 0xea73, 0xf7c0, 0xff14, 0xd1b6, 0x326e, 0x0, 0x0);
        gbc.writeMem(0x63d4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xea73);
        EXPECT(gbc.pc(), 0x63d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01D4
        gbc.setState(0xd4ca, 0x910a, 0x9800, 0x585d, 0x3580, 0x433a, 0x0, 0x0);
        gbc.writeMem(0xd4ca, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x910a);
        EXPECT(gbc.pc(), 0xd4cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ca), 0xcb);
        EXPECT(gbc.readMem(0xd4cb), 0x5a);
        // CB 5A 01D5
        gbc.setState(0xc931, 0x9583, 0xa980, 0x5927, 0x5b8, 0x58d7, 0x1, 0x1);
        gbc.writeMem(0xc931, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9583);
        EXPECT(gbc.pc(), 0xc933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc931), 0xcb);
        EXPECT(gbc.readMem(0xc932), 0x5a);
        // CB 5A 01D6
        gbc.setState(0x28c3, 0x84b5, 0xef30, 0x475e, 0x571f, 0xd5d2, 0x0, 0x1);
        gbc.writeMem(0x28c3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x84b5);
        EXPECT(gbc.pc(), 0x28c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01D7
        gbc.setState(0x274c, 0xd126, 0xaae0, 0x46d4, 0xfd08, 0x8e4c, 0x1, 0x0);
        gbc.writeMem(0x274c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd126);
        EXPECT(gbc.pc(), 0x274e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01D8
        gbc.setState(0x6262, 0xd265, 0xe7a0, 0x12cb, 0xaea3, 0xde90, 0x1, 0x0);
        gbc.writeMem(0x6262, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd265);
        EXPECT(gbc.pc(), 0x6264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01D9
        gbc.setState(0x2ff7, 0x5aed, 0x3d90, 0x3885, 0x4909, 0xef3d, 0x1, 0x0);
        gbc.writeMem(0x2ff7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5aed);
        EXPECT(gbc.pc(), 0x2ff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01DA
        gbc.setState(0x4250, 0x25d2, 0xa370, 0x5af9, 0x8a9, 0xee81, 0x1, 0x1);
        gbc.writeMem(0x4250, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x25d2);
        EXPECT(gbc.pc(), 0x4252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01DB
        gbc.setState(0x64ca, 0xf65, 0xb220, 0xb800, 0x9cc7, 0xb9ee, 0x1, 0x1);
        gbc.writeMem(0x64ca, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf65);
        EXPECT(gbc.pc(), 0x64cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01DC
        gbc.setState(0x638c, 0x5dbd, 0xf970, 0xba34, 0x23f6, 0x768f, 0x1, 0x1);
        gbc.writeMem(0x638c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5dbd);
        EXPECT(gbc.pc(), 0x638e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01DD
        gbc.setState(0x7c30, 0x2682, 0x5840, 0x7c87, 0xfa83, 0xa518, 0x0, 0x0);
        gbc.writeMem(0x7c30, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2682);
        EXPECT(gbc.pc(), 0x7c32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01DE
        gbc.setState(0x82aa, 0x2161, 0xfad0, 0x376, 0x2bdc, 0x1698, 0x1, 0x0);
        gbc.writeMem(0x82aa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2161);
        EXPECT(gbc.pc(), 0x82ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82aa), 0xcb);
        EXPECT(gbc.readMem(0x82ab), 0x5a);
        // CB 5A 01DF
        gbc.setState(0xddb, 0x8dff, 0x55e0, 0x6730, 0xa56c, 0xd215, 0x0, 0x0);
        gbc.writeMem(0xddb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8dff);
        EXPECT(gbc.pc(), 0xddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01E0
        gbc.setState(0x63ec, 0x1253, 0xfbd0, 0x968d, 0x96be, 0xf8f8, 0x0, 0x0);
        gbc.writeMem(0x63ec, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1253);
        EXPECT(gbc.pc(), 0x63ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01E1
        gbc.setState(0xa3fa, 0xc436, 0x7c00, 0xb57b, 0x2b3e, 0x42a, 0x0, 0x1);
        gbc.writeMem(0xa3fa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc436);
        EXPECT(gbc.pc(), 0xa3fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3fa), 0xcb);
        EXPECT(gbc.readMem(0xa3fb), 0x5a);
        // CB 5A 01E2
        gbc.setState(0x3a98, 0x810a, 0x3910, 0x8c7f, 0xce17, 0x6aef, 0x1, 0x1);
        gbc.writeMem(0x3a98, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x810a);
        EXPECT(gbc.pc(), 0x3a9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01E3
        gbc.setState(0x9ba, 0x9002, 0x6d20, 0x83e5, 0x937b, 0xcc25, 0x0, 0x0);
        gbc.writeMem(0x9ba, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9002);
        EXPECT(gbc.pc(), 0x9bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01E4
        gbc.setState(0x5550, 0x4ab, 0xf3e0, 0xd1e5, 0xed2d, 0xa5e2, 0x1, 0x0);
        gbc.writeMem(0x5550, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4ab);
        EXPECT(gbc.pc(), 0x5552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01E5
        gbc.setState(0x8835, 0x12e0, 0xc2a0, 0x6c54, 0x60e8, 0xed5a, 0x0, 0x0);
        gbc.writeMem(0x8835, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x12e0);
        EXPECT(gbc.pc(), 0x8837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8835), 0xcb);
        EXPECT(gbc.readMem(0x8836), 0x5a);
        // CB 5A 01E6
        gbc.setState(0x59dc, 0xe201, 0x7130, 0xed42, 0x5f8f, 0x3539, 0x0, 0x1);
        gbc.writeMem(0x59dc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe201);
        EXPECT(gbc.pc(), 0x59de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01E7
        gbc.setState(0x3fd7, 0x3ef9, 0x340, 0x506a, 0x2391, 0x995c, 0x1, 0x1);
        gbc.writeMem(0x3fd7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3ef9);
        EXPECT(gbc.pc(), 0x3fd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01E8
        gbc.setState(0x9c14, 0xacff, 0xedd0, 0xfc67, 0x7f38, 0x1e86, 0x1, 0x1);
        gbc.writeMem(0x9c14, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xacff);
        EXPECT(gbc.pc(), 0x9c16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c14), 0xcb);
        EXPECT(gbc.readMem(0x9c15), 0x5a);
        // CB 5A 01E9
        gbc.setState(0x2be7, 0x1913, 0xb80, 0x670f, 0xd7b8, 0x9084, 0x1, 0x1);
        gbc.writeMem(0x2be7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1913);
        EXPECT(gbc.pc(), 0x2be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01EA
        gbc.setState(0x7d49, 0x7ca5, 0x5f20, 0xb3c3, 0xd7ff, 0x23e9, 0x0, 0x0);
        gbc.writeMem(0x7d49, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7ca5);
        EXPECT(gbc.pc(), 0x7d4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01EB
        gbc.setState(0xb976, 0x9560, 0xbd20, 0xf3f5, 0x9ba4, 0xca10, 0x0, 0x0);
        gbc.writeMem(0xb976, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9560);
        EXPECT(gbc.pc(), 0xb978);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb976), 0xcb);
        EXPECT(gbc.readMem(0xb977), 0x5a);
        // CB 5A 01EC
        gbc.setState(0xbb17, 0xb8aa, 0x1680, 0x14f8, 0x8df2, 0xaef8, 0x1, 0x0);
        gbc.writeMem(0xbb17, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb8aa);
        EXPECT(gbc.pc(), 0xbb19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb17), 0xcb);
        EXPECT(gbc.readMem(0xbb18), 0x5a);
        // CB 5A 01ED
        gbc.setState(0xc0cf, 0xfe2e, 0x33f0, 0xa269, 0x638a, 0xfaee, 0x1, 0x0);
        gbc.writeMem(0xc0cf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfe2e);
        EXPECT(gbc.pc(), 0xc0d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0cf), 0xcb);
        EXPECT(gbc.readMem(0xc0d0), 0x5a);
        // CB 5A 01EE
        gbc.setState(0x3809, 0x2aa2, 0x6a80, 0x3f75, 0x1535, 0x35bc, 0x0, 0x0);
        gbc.writeMem(0x3809, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2aa2);
        EXPECT(gbc.pc(), 0x380b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01EF
        gbc.setState(0xd7bc, 0x1092, 0xaf50, 0x9352, 0x4cb0, 0x6c28, 0x1, 0x0);
        gbc.writeMem(0xd7bc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1092);
        EXPECT(gbc.pc(), 0xd7be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7bc), 0xcb);
        EXPECT(gbc.readMem(0xd7bd), 0x5a);
        // CB 5A 01F0
        gbc.setState(0xc338, 0xa0b, 0xec90, 0xb8f9, 0x1e6e, 0x9448, 0x1, 0x1);
        gbc.writeMem(0xc338, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa0b);
        EXPECT(gbc.pc(), 0xc33a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc338), 0xcb);
        EXPECT(gbc.readMem(0xc339), 0x5a);
        // CB 5A 01F2
        gbc.setState(0xb659, 0x5537, 0xa520, 0x2997, 0x81cd, 0x6efb, 0x0, 0x1);
        gbc.writeMem(0xb659, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5537);
        EXPECT(gbc.pc(), 0xb65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb659), 0xcb);
        EXPECT(gbc.readMem(0xb65a), 0x5a);
        // CB 5A 01F3
        gbc.setState(0xeb08, 0x2d1b, 0x56c0, 0x71e9, 0x91cc, 0xee8d, 0x0, 0x0);
        gbc.writeMem(0xeb08, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2d1b);
        EXPECT(gbc.pc(), 0xeb0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb08), 0xcb);
        EXPECT(gbc.readMem(0xeb09), 0x5a);
        // CB 5A 01F4
        gbc.setState(0x67c2, 0xa2f7, 0x7a0, 0x335c, 0xfa96, 0x61c8, 0x1, 0x0);
        gbc.writeMem(0x67c2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa2f7);
        EXPECT(gbc.pc(), 0x67c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 01F5
        gbc.setState(0xba36, 0x5dc9, 0xa430, 0xf42a, 0xff6f, 0x3493, 0x0, 0x0);
        gbc.writeMem(0xba36, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5dc9);
        EXPECT(gbc.pc(), 0xba38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba36), 0xcb);
        EXPECT(gbc.readMem(0xba37), 0x5a);
        // CB 5A 01F6
        gbc.setState(0xa05b, 0xe411, 0xa860, 0x92cd, 0x8fdd, 0x94e0, 0x0, 0x0);
        gbc.writeMem(0xa05b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe411);
        EXPECT(gbc.pc(), 0xa05d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa05b), 0xcb);
        EXPECT(gbc.readMem(0xa05c), 0x5a);
        // CB 5A 01F7
        gbc.setState(0xd107, 0xe88e, 0xf530, 0xb116, 0x6cfe, 0xe082, 0x1, 0x0);
        gbc.writeMem(0xd107, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe88e);
        EXPECT(gbc.pc(), 0xd109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd107), 0xcb);
        EXPECT(gbc.readMem(0xd108), 0x5a);
        // CB 5A 01F8
        gbc.setState(0x899d, 0x9706, 0x5160, 0xb16, 0x6fe6, 0xc2ef, 0x1, 0x0);
        gbc.writeMem(0x899d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9706);
        EXPECT(gbc.pc(), 0x899f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899d), 0xcb);
        EXPECT(gbc.readMem(0x899e), 0x5a);
        // CB 5A 01F9
        gbc.setState(0x748a, 0x386, 0x9070, 0xe758, 0x8dd8, 0x4b7f, 0x1, 0x0);
        gbc.writeMem(0x748a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x386);
        EXPECT(gbc.pc(), 0x748c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01FB
        gbc.setState(0x3ecc, 0xacae, 0x11f0, 0xc5c6, 0xbe95, 0x73, 0x1, 0x1);
        gbc.writeMem(0x3ecc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xacae);
        EXPECT(gbc.pc(), 0x3ece);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01FC
        gbc.setState(0xbe5c, 0x3b1f, 0x8240, 0x6297, 0x21, 0x2fa8, 0x1, 0x1);
        gbc.writeMem(0xbe5c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3b1f);
        EXPECT(gbc.pc(), 0xbe5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe5c), 0xcb);
        EXPECT(gbc.readMem(0xbe5d), 0x5a);
        // CB 5A 01FE
        gbc.setState(0x6b77, 0xa3ef, 0xa9f0, 0x8ef4, 0xf6f5, 0x7e96, 0x0, 0x1);
        gbc.writeMem(0x6b77, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa3ef);
        EXPECT(gbc.pc(), 0x6b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 01FF
        gbc.setState(0x72fd, 0xa614, 0x8540, 0x52f7, 0x8ee5, 0x80d1, 0x0, 0x1);
        gbc.writeMem(0x72fd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa614);
        EXPECT(gbc.pc(), 0x72ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0200
        gbc.setState(0x35cb, 0xe04d, 0xc230, 0x2b1, 0x557a, 0xdf23, 0x0, 0x1);
        gbc.writeMem(0x35cb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe04d);
        EXPECT(gbc.pc(), 0x35cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0201
        gbc.setState(0x5ea3, 0xe775, 0x4930, 0xf035, 0x18a, 0x47e2, 0x0, 0x1);
        gbc.writeMem(0x5ea3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe775);
        EXPECT(gbc.pc(), 0x5ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0202
        gbc.setState(0xa499, 0xfac7, 0x4ac0, 0x9ad5, 0xe2a8, 0xbce2, 0x1, 0x0);
        gbc.writeMem(0xa499, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfac7);
        EXPECT(gbc.pc(), 0xa49b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa499), 0xcb);
        EXPECT(gbc.readMem(0xa49a), 0x5a);
        // CB 5A 0203
        gbc.setState(0xe54a, 0xcf08, 0xe600, 0x5982, 0xd5ad, 0x1896, 0x1, 0x1);
        gbc.writeMem(0xe54a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xcf08);
        EXPECT(gbc.pc(), 0xe54c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54a), 0xcb);
        EXPECT(gbc.readMem(0xe54b), 0x5a);
        // CB 5A 0204
        gbc.setState(0x71af, 0x463f, 0x3220, 0xcb95, 0xc945, 0x2915, 0x1, 0x0);
        gbc.writeMem(0x71af, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x463f);
        EXPECT(gbc.pc(), 0x71b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0205
        gbc.setState(0xd861, 0x61f, 0x7530, 0x7ba5, 0x3fb0, 0xb018, 0x0, 0x0);
        gbc.writeMem(0xd861, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x61f);
        EXPECT(gbc.pc(), 0xd863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd861), 0xcb);
        EXPECT(gbc.readMem(0xd862), 0x5a);
        // CB 5A 0206
        gbc.setState(0x9f4d, 0xf5c6, 0x7220, 0xd08, 0x5b40, 0x3e04, 0x0, 0x1);
        gbc.writeMem(0x9f4d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf5c6);
        EXPECT(gbc.pc(), 0x9f4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f4d), 0xcb);
        EXPECT(gbc.readMem(0x9f4e), 0x5a);
        // CB 5A 0207
        gbc.setState(0x8437, 0xc15a, 0xa3f0, 0x3e02, 0xb0f6, 0x70b2, 0x1, 0x0);
        gbc.writeMem(0x8437, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc15a);
        EXPECT(gbc.pc(), 0x8439);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8437), 0xcb);
        EXPECT(gbc.readMem(0x8438), 0x5a);
        // CB 5A 0208
        gbc.setState(0x2bf9, 0xaf4f, 0x96c0, 0x6569, 0x224d, 0xf80f, 0x0, 0x1);
        gbc.writeMem(0x2bf9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xaf4f);
        EXPECT(gbc.pc(), 0x2bfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0209
        gbc.setState(0xbf07, 0x6813, 0xc120, 0x9ec, 0x627d, 0x815e, 0x0, 0x0);
        gbc.writeMem(0xbf07, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6813);
        EXPECT(gbc.pc(), 0xbf09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf07), 0xcb);
        EXPECT(gbc.readMem(0xbf08), 0x5a);
        // CB 5A 020A
        gbc.setState(0x5c30, 0xe7a8, 0xcf0, 0x1ab4, 0x6818, 0x83ee, 0x0, 0x1);
        gbc.writeMem(0x5c30, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe7a8);
        EXPECT(gbc.pc(), 0x5c32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 020B
        gbc.setState(0xe7e5, 0x3c25, 0xcbd0, 0x99b7, 0x3f1e, 0x99ef, 0x1, 0x1);
        gbc.writeMem(0xe7e5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3c25);
        EXPECT(gbc.pc(), 0xe7e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7e5), 0xcb);
        EXPECT(gbc.readMem(0xe7e6), 0x5a);
        // CB 5A 020C
        gbc.setState(0xcbac, 0x3c66, 0xa310, 0x8905, 0x7f75, 0x9785, 0x0, 0x1);
        gbc.writeMem(0xcbac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3c66);
        EXPECT(gbc.pc(), 0xcbae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbac), 0xcb);
        EXPECT(gbc.readMem(0xcbad), 0x5a);
        // CB 5A 020D
        gbc.setState(0xd3b9, 0x99e9, 0xf20, 0xb43b, 0xa479, 0x1bb5, 0x0, 0x1);
        gbc.writeMem(0xd3b9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x99e9);
        EXPECT(gbc.pc(), 0xd3bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b9), 0xcb);
        EXPECT(gbc.readMem(0xd3ba), 0x5a);
        // CB 5A 020E
        gbc.setState(0x34e0, 0xbb8a, 0x8310, 0x9848, 0x66c6, 0x58e9, 0x0, 0x1);
        gbc.writeMem(0x34e0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbb8a);
        EXPECT(gbc.pc(), 0x34e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 020F
        gbc.setState(0xd91, 0x64ae, 0xc010, 0xc4e8, 0xcbb2, 0x142b, 0x1, 0x0);
        gbc.writeMem(0xd91, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x64ae);
        EXPECT(gbc.pc(), 0xd93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0210
        gbc.setState(0xa668, 0x29c4, 0x7580, 0x22dd, 0x8f65, 0xdb0b, 0x1, 0x0);
        gbc.writeMem(0xa668, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x29c4);
        EXPECT(gbc.pc(), 0xa66a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa668), 0xcb);
        EXPECT(gbc.readMem(0xa669), 0x5a);
        // CB 5A 0211
        gbc.setState(0x7a97, 0x18b0, 0x1e10, 0xf0ce, 0x12d9, 0xaf5a, 0x1, 0x0);
        gbc.writeMem(0x7a97, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x18b0);
        EXPECT(gbc.pc(), 0x7a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0212
        gbc.setState(0x7936, 0xab, 0xaec0, 0xd90a, 0xfb30, 0x878e, 0x0, 0x1);
        gbc.writeMem(0x7936, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xab);
        EXPECT(gbc.pc(), 0x7938);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0213
        gbc.setState(0x7580, 0xc7f9, 0xa070, 0xdc9f, 0xaf19, 0x135a, 0x0, 0x1);
        gbc.writeMem(0x7580, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc7f9);
        EXPECT(gbc.pc(), 0x7582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0215
        gbc.setState(0x80d1, 0x9914, 0x2020, 0x3f32, 0x75d2, 0x3581, 0x0, 0x0);
        gbc.writeMem(0x80d1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9914);
        EXPECT(gbc.pc(), 0x80d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80d1), 0xcb);
        EXPECT(gbc.readMem(0x80d2), 0x5a);
        // CB 5A 0216
        gbc.setState(0xe38a, 0xbe63, 0x9d10, 0xec4d, 0xca97, 0x7a5b, 0x0, 0x1);
        gbc.writeMem(0xe38a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbe63);
        EXPECT(gbc.pc(), 0xe38c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe38a), 0xcb);
        EXPECT(gbc.readMem(0xe38b), 0x5a);
        // CB 5A 0217
        gbc.setState(0xa28d, 0xde6c, 0x7390, 0x3f6c, 0xdc60, 0x3001, 0x1, 0x0);
        gbc.writeMem(0xa28d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xde6c);
        EXPECT(gbc.pc(), 0xa28f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa28d), 0xcb);
        EXPECT(gbc.readMem(0xa28e), 0x5a);
        // CB 5A 0218
        gbc.setState(0xb559, 0x6aff, 0xf730, 0x6c17, 0x7c41, 0x14c9, 0x0, 0x0);
        gbc.writeMem(0xb559, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6aff);
        EXPECT(gbc.pc(), 0xb55b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb559), 0xcb);
        EXPECT(gbc.readMem(0xb55a), 0x5a);
        // CB 5A 0219
        gbc.setState(0xd885, 0xfdd2, 0x4ac0, 0x28cd, 0xb7d6, 0x10d6, 0x0, 0x0);
        gbc.writeMem(0xd885, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xfdd2);
        EXPECT(gbc.pc(), 0xd887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd885), 0xcb);
        EXPECT(gbc.readMem(0xd886), 0x5a);
        // CB 5A 021A
        gbc.setState(0x2f86, 0x7f02, 0xa6a0, 0x30de, 0x739b, 0x5eb3, 0x1, 0x1);
        gbc.writeMem(0x2f86, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7f02);
        EXPECT(gbc.pc(), 0x2f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 021B
        gbc.setState(0x764, 0x7f4d, 0x5160, 0x975a, 0x9af3, 0x2cfa, 0x1, 0x0);
        gbc.writeMem(0x764, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7f4d);
        EXPECT(gbc.pc(), 0x766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 021C
        gbc.setState(0xcb9e, 0xcd00, 0x9e00, 0x26f0, 0x4531, 0xb256, 0x1, 0x1);
        gbc.writeMem(0xcb9e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcd00);
        EXPECT(gbc.pc(), 0xcba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9e), 0xcb);
        EXPECT(gbc.readMem(0xcb9f), 0x5a);
        // CB 5A 021D
        gbc.setState(0x7393, 0x4f5d, 0x13b0, 0xab88, 0x580, 0xb146, 0x0, 0x1);
        gbc.writeMem(0x7393, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4f5d);
        EXPECT(gbc.pc(), 0x7395);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 021E
        gbc.setState(0x70df, 0xda4, 0xe680, 0x8e88, 0x1086, 0x3d73, 0x0, 0x1);
        gbc.writeMem(0x70df, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xda4);
        EXPECT(gbc.pc(), 0x70e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 021F
        gbc.setState(0x420c, 0xe74a, 0x4520, 0xdfe3, 0x372a, 0x5a51, 0x0, 0x1);
        gbc.writeMem(0x420c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe74a);
        EXPECT(gbc.pc(), 0x420e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0220
        gbc.setState(0xcabd, 0x5b1c, 0x8bb0, 0x934e, 0xf24e, 0x7efe, 0x1, 0x0);
        gbc.writeMem(0xcabd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5b1c);
        EXPECT(gbc.pc(), 0xcabf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcabd), 0xcb);
        EXPECT(gbc.readMem(0xcabe), 0x5a);
        // CB 5A 0221
        gbc.setState(0x258f, 0xbd8e, 0x5a50, 0xfe9a, 0x9086, 0xcf42, 0x1, 0x1);
        gbc.writeMem(0x258f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbd8e);
        EXPECT(gbc.pc(), 0x2591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0222
        gbc.setState(0xd40e, 0x53ab, 0x4a50, 0xfb60, 0x6fdc, 0x302c, 0x1, 0x0);
        gbc.writeMem(0xd40e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x53ab);
        EXPECT(gbc.pc(), 0xd410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd40e), 0xcb);
        EXPECT(gbc.readMem(0xd40f), 0x5a);
        // CB 5A 0223
        gbc.setState(0x448b, 0x7009, 0xbd30, 0x77a6, 0x9f67, 0xfd7d, 0x1, 0x1);
        gbc.writeMem(0x448b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7009);
        EXPECT(gbc.pc(), 0x448d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0224
        gbc.setState(0x1eef, 0xd3d0, 0x55f0, 0xa03c, 0x9c2, 0x26ed, 0x1, 0x1);
        gbc.writeMem(0x1eef, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd3d0);
        EXPECT(gbc.pc(), 0x1ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0225
        gbc.setState(0xd590, 0x1d89, 0xdcb0, 0xbd7f, 0x3494, 0xc36, 0x1, 0x0);
        gbc.writeMem(0xd590, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1d89);
        EXPECT(gbc.pc(), 0xd592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd590), 0xcb);
        EXPECT(gbc.readMem(0xd591), 0x5a);
        // CB 5A 0226
        gbc.setState(0x412c, 0xf949, 0xe7e0, 0xa73, 0x87d5, 0x6771, 0x1, 0x0);
        gbc.writeMem(0x412c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf949);
        EXPECT(gbc.pc(), 0x412e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0227
        gbc.setState(0x524, 0x19c5, 0xf820, 0xcb68, 0xc7ef, 0x9440, 0x1, 0x0);
        gbc.writeMem(0x524, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x19c5);
        EXPECT(gbc.pc(), 0x526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0228
        gbc.setState(0x62ff, 0x60ae, 0xe1d0, 0xc5c7, 0x3527, 0xa3dc, 0x1, 0x1);
        gbc.writeMem(0x62ff, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x60ae);
        EXPECT(gbc.pc(), 0x6301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0229
        gbc.setState(0x5ec, 0x3ddd, 0xb7f0, 0x47b3, 0x70dc, 0xe090, 0x1, 0x1);
        gbc.writeMem(0x5ec, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3ddd);
        EXPECT(gbc.pc(), 0x5ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 022A
        gbc.setState(0x40f7, 0x8f28, 0x5b40, 0x6b48, 0x9943, 0xe041, 0x0, 0x1);
        gbc.writeMem(0x40f7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8f28);
        EXPECT(gbc.pc(), 0x40f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 022B
        gbc.setState(0x7e32, 0x6366, 0x9150, 0xb6a4, 0xf249, 0xed6d, 0x1, 0x1);
        gbc.writeMem(0x7e32, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6366);
        EXPECT(gbc.pc(), 0x7e34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 022C
        gbc.setState(0x8690, 0xb93e, 0x31d0, 0x1136, 0xd66a, 0x88b4, 0x1, 0x1);
        gbc.writeMem(0x8690, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb93e);
        EXPECT(gbc.pc(), 0x8692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8690), 0xcb);
        EXPECT(gbc.readMem(0x8691), 0x5a);
        // CB 5A 022E
        gbc.setState(0x41b9, 0x9ff2, 0x3d20, 0x51ec, 0x94b, 0xabcb, 0x1, 0x1);
        gbc.writeMem(0x41b9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9ff2);
        EXPECT(gbc.pc(), 0x41bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 022F
        gbc.setState(0x7ba3, 0x188e, 0xbb00, 0x5030, 0x6ed6, 0x594f, 0x1, 0x0);
        gbc.writeMem(0x7ba3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x188e);
        EXPECT(gbc.pc(), 0x7ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0230
        gbc.setState(0x28dd, 0xc4e8, 0xcaa0, 0x805d, 0xa310, 0x59c9, 0x0, 0x0);
        gbc.writeMem(0x28dd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc4e8);
        EXPECT(gbc.pc(), 0x28df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0231
        gbc.setState(0x9014, 0x43f1, 0x1780, 0x6ed2, 0x4495, 0xb281, 0x0, 0x1);
        gbc.writeMem(0x9014, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x43f1);
        EXPECT(gbc.pc(), 0x9016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9014), 0xcb);
        EXPECT(gbc.readMem(0x9015), 0x5a);
        // CB 5A 0232
        gbc.setState(0x5a9d, 0xce6c, 0xf140, 0x7110, 0x8521, 0x8d0b, 0x1, 0x1);
        gbc.writeMem(0x5a9d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xce6c);
        EXPECT(gbc.pc(), 0x5a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0233
        gbc.setState(0xd3b7, 0x9ba0, 0x5120, 0xbbd8, 0xb23c, 0xb671, 0x1, 0x1);
        gbc.writeMem(0xd3b7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9ba0);
        EXPECT(gbc.pc(), 0xd3b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b7), 0xcb);
        EXPECT(gbc.readMem(0xd3b8), 0x5a);
        // CB 5A 0234
        gbc.setState(0x12bd, 0xb3, 0xae10, 0xf45c, 0xa0e6, 0x6c3c, 0x1, 0x0);
        gbc.writeMem(0x12bd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb3);
        EXPECT(gbc.pc(), 0x12bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0235
        gbc.setState(0x87fe, 0xd99c, 0xd830, 0xc594, 0x58ed, 0x1dea, 0x1, 0x0);
        gbc.writeMem(0x87fe, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd99c);
        EXPECT(gbc.pc(), 0x8800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fe), 0xcb);
        EXPECT(gbc.readMem(0x87ff), 0x5a);
        // CB 5A 0236
        gbc.setState(0xce28, 0xe330, 0x89a0, 0x5c1f, 0xfae0, 0x7ef1, 0x1, 0x0);
        gbc.writeMem(0xce28, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe330);
        EXPECT(gbc.pc(), 0xce2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce28), 0xcb);
        EXPECT(gbc.readMem(0xce29), 0x5a);
        // CB 5A 0237
        gbc.setState(0x5f9f, 0x77c5, 0xe260, 0x4766, 0x66e9, 0x283a, 0x0, 0x0);
        gbc.writeMem(0x5f9f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x77c5);
        EXPECT(gbc.pc(), 0x5fa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0238
        gbc.setState(0x6827, 0xae79, 0xc3a0, 0x2706, 0x521e, 0xa31f, 0x0, 0x1);
        gbc.writeMem(0x6827, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xae79);
        EXPECT(gbc.pc(), 0x6829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0239
        gbc.setState(0x7dd1, 0xb9d8, 0x31d0, 0x7f33, 0x5cb1, 0xfb9e, 0x1, 0x1);
        gbc.writeMem(0x7dd1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb9d8);
        EXPECT(gbc.pc(), 0x7dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 023A
        gbc.setState(0x836, 0x7817, 0xdbb0, 0xf2cc, 0x7ecd, 0xdce2, 0x0, 0x0);
        gbc.writeMem(0x836, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7817);
        EXPECT(gbc.pc(), 0x838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 023B
        gbc.setState(0x6813, 0x69e9, 0xede0, 0x4b70, 0x995e, 0x9eba, 0x0, 0x0);
        gbc.writeMem(0x6813, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x69e9);
        EXPECT(gbc.pc(), 0x6815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 023C
        gbc.setState(0x2b6, 0x15bf, 0x1210, 0x7b89, 0xc649, 0x743c, 0x0, 0x0);
        gbc.writeMem(0x2b6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x15bf);
        EXPECT(gbc.pc(), 0x2b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 023D
        gbc.setState(0x8903, 0xc341, 0x4290, 0x8f0, 0xff2, 0xa039, 0x0, 0x0);
        gbc.writeMem(0x8903, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc341);
        EXPECT(gbc.pc(), 0x8905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8903), 0xcb);
        EXPECT(gbc.readMem(0x8904), 0x5a);
        // CB 5A 023E
        gbc.setState(0x4d54, 0x2e22, 0xaa00, 0x3f32, 0xb855, 0x1b02, 0x1, 0x1);
        gbc.writeMem(0x4d54, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2e22);
        EXPECT(gbc.pc(), 0x4d56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0240
        gbc.setState(0xa7e4, 0xd23d, 0x3d20, 0xdf6c, 0x6d6c, 0xe075, 0x1, 0x1);
        gbc.writeMem(0xa7e4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd23d);
        EXPECT(gbc.pc(), 0xa7e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e4), 0xcb);
        EXPECT(gbc.readMem(0xa7e5), 0x5a);
        // CB 5A 0241
        gbc.setState(0x57a5, 0x366b, 0xe8b0, 0x1252, 0x6f9c, 0xffba, 0x1, 0x1);
        gbc.writeMem(0x57a5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x366b);
        EXPECT(gbc.pc(), 0x57a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0242
        gbc.setState(0xd4eb, 0x519c, 0x7370, 0xdf3a, 0xa00e, 0xc365, 0x1, 0x0);
        gbc.writeMem(0xd4eb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x519c);
        EXPECT(gbc.pc(), 0xd4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4eb), 0xcb);
        EXPECT(gbc.readMem(0xd4ec), 0x5a);
        // CB 5A 0243
        gbc.setState(0xd373, 0xe06c, 0x9e20, 0x8a4, 0xeb8e, 0xf7e9, 0x1, 0x0);
        gbc.writeMem(0xd373, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe06c);
        EXPECT(gbc.pc(), 0xd375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd373), 0xcb);
        EXPECT(gbc.readMem(0xd374), 0x5a);
        // CB 5A 0244
        gbc.setState(0xa7e5, 0xa6d6, 0xd820, 0x54ae, 0x973d, 0x5c61, 0x0, 0x1);
        gbc.writeMem(0xa7e5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa6d6);
        EXPECT(gbc.pc(), 0xa7e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e5), 0xcb);
        EXPECT(gbc.readMem(0xa7e6), 0x5a);
        // CB 5A 0245
        gbc.setState(0x3507, 0x470e, 0xa3d0, 0x9f25, 0x8f96, 0x9647, 0x1, 0x1);
        gbc.writeMem(0x3507, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x470e);
        EXPECT(gbc.pc(), 0x3509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0246
        gbc.setState(0xa5da, 0x6a7d, 0x1a40, 0xa7c7, 0x91ef, 0xe740, 0x1, 0x1);
        gbc.writeMem(0xa5da, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6a7d);
        EXPECT(gbc.pc(), 0xa5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5da), 0xcb);
        EXPECT(gbc.readMem(0xa5db), 0x5a);
        // CB 5A 0248
        gbc.setState(0x240b, 0x3728, 0x4af0, 0x9bd2, 0x6908, 0x3eb4, 0x1, 0x1);
        gbc.writeMem(0x240b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3728);
        EXPECT(gbc.pc(), 0x240d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0249
        gbc.setState(0xa4cb, 0x9f24, 0x2ca0, 0x1bfa, 0x7f78, 0x7913, 0x0, 0x0);
        gbc.writeMem(0xa4cb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9f24);
        EXPECT(gbc.pc(), 0xa4cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4cb), 0xcb);
        EXPECT(gbc.readMem(0xa4cc), 0x5a);
        // CB 5A 024A
        gbc.setState(0x3ee1, 0xdc8, 0x7ee0, 0x38fb, 0x5596, 0xa3a0, 0x0, 0x0);
        gbc.writeMem(0x3ee1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdc8);
        EXPECT(gbc.pc(), 0x3ee3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 024B
        gbc.setState(0x61a6, 0x4ee1, 0x2f20, 0x6ddf, 0x6fe3, 0x2db9, 0x0, 0x0);
        gbc.writeMem(0x61a6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4ee1);
        EXPECT(gbc.pc(), 0x61a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 024C
        gbc.setState(0x466e, 0x23c5, 0xca20, 0x3845, 0x541d, 0x4fd9, 0x0, 0x1);
        gbc.writeMem(0x466e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x23c5);
        EXPECT(gbc.pc(), 0x4670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 024E
        gbc.setState(0x8a18, 0x215e, 0x9cd0, 0x950b, 0x7ead, 0x70d0, 0x0, 0x1);
        gbc.writeMem(0x8a18, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x215e);
        EXPECT(gbc.pc(), 0x8a1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a18), 0xcb);
        EXPECT(gbc.readMem(0x8a19), 0x5a);
        // CB 5A 024F
        gbc.setState(0x25e4, 0x7362, 0xbb90, 0x36bf, 0x1b6e, 0x27d6, 0x1, 0x1);
        gbc.writeMem(0x25e4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7362);
        EXPECT(gbc.pc(), 0x25e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0250
        gbc.setState(0x4fde, 0xdb2a, 0x8cf0, 0xf7e9, 0x93f9, 0xf0dd, 0x1, 0x0);
        gbc.writeMem(0x4fde, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xdb2a);
        EXPECT(gbc.pc(), 0x4fe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0251
        gbc.setState(0x7c15, 0x6f16, 0x7130, 0x3524, 0x8802, 0x60e7, 0x0, 0x1);
        gbc.writeMem(0x7c15, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6f16);
        EXPECT(gbc.pc(), 0x7c17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0252
        gbc.setState(0x4082, 0xe2c6, 0x7290, 0x4fb5, 0x3613, 0xb25e, 0x0, 0x1);
        gbc.writeMem(0x4082, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe2c6);
        EXPECT(gbc.pc(), 0x4084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0253
        gbc.setState(0x4098, 0xd736, 0xc090, 0x1c8e, 0x12b5, 0x4bf5, 0x1, 0x1);
        gbc.writeMem(0x4098, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd736);
        EXPECT(gbc.pc(), 0x409a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0254
        gbc.setState(0x2b9f, 0xdb7f, 0xf0b0, 0x7659, 0xc597, 0xffc1, 0x1, 0x0);
        gbc.writeMem(0x2b9f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdb7f);
        EXPECT(gbc.pc(), 0x2ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0255
        gbc.setState(0x59dc, 0x6b02, 0x1820, 0x2f0e, 0xa81d, 0x7b26, 0x1, 0x1);
        gbc.writeMem(0x59dc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6b02);
        EXPECT(gbc.pc(), 0x59de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0256
        gbc.setState(0x1b96, 0x2c83, 0x9ff0, 0xfdd1, 0x42d5, 0x8a4a, 0x0, 0x1);
        gbc.writeMem(0x1b96, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2c83);
        EXPECT(gbc.pc(), 0x1b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0258
        gbc.setState(0xaf81, 0x3ec4, 0x6220, 0x4dab, 0xe255, 0x8dbf, 0x0, 0x0);
        gbc.writeMem(0xaf81, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3ec4);
        EXPECT(gbc.pc(), 0xaf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf81), 0xcb);
        EXPECT(gbc.readMem(0xaf82), 0x5a);
        // CB 5A 025A
        gbc.setState(0x2e3e, 0x1393, 0x450, 0xfd79, 0xb9c3, 0x8d82, 0x0, 0x1);
        gbc.writeMem(0x2e3e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1393);
        EXPECT(gbc.pc(), 0x2e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 025B
        gbc.setState(0xc009, 0xfde0, 0x9fe0, 0xfad6, 0xa9ef, 0xf2e4, 0x1, 0x1);
        gbc.writeMem(0xc009, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfde0);
        EXPECT(gbc.pc(), 0xc00b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc009), 0xcb);
        EXPECT(gbc.readMem(0xc00a), 0x5a);
        // CB 5A 025C
        gbc.setState(0x8f2e, 0x86f, 0x6670, 0xcad9, 0x4003, 0x45ac, 0x0, 0x1);
        gbc.writeMem(0x8f2e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x86f);
        EXPECT(gbc.pc(), 0x8f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f2e), 0xcb);
        EXPECT(gbc.readMem(0x8f2f), 0x5a);
        // CB 5A 025D
        gbc.setState(0x5240, 0x5c25, 0xe1a0, 0xa197, 0x3b26, 0x7142, 0x1, 0x1);
        gbc.writeMem(0x5240, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5c25);
        EXPECT(gbc.pc(), 0x5242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 025E
        gbc.setState(0x4bfb, 0xb751, 0x42c0, 0x8ac7, 0x14c5, 0xdaf0, 0x0, 0x0);
        gbc.writeMem(0x4bfb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb751);
        EXPECT(gbc.pc(), 0x4bfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 025F
        gbc.setState(0x64b7, 0xb98a, 0x95f0, 0x1bbc, 0x8e7e, 0x2478, 0x0, 0x1);
        gbc.writeMem(0x64b7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb98a);
        EXPECT(gbc.pc(), 0x64b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0260
        gbc.setState(0x525b, 0x56f3, 0x95a0, 0xf142, 0xdcd3, 0xc3c7, 0x0, 0x0);
        gbc.writeMem(0x525b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x56f3);
        EXPECT(gbc.pc(), 0x525d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0261
        gbc.setState(0x5a32, 0x1cbb, 0x2790, 0x8cbc, 0x33e3, 0xd4e2, 0x1, 0x0);
        gbc.writeMem(0x5a32, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1cbb);
        EXPECT(gbc.pc(), 0x5a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0262
        gbc.setState(0x93cf, 0xdeb, 0x1040, 0x2a2c, 0x7742, 0xb6d5, 0x1, 0x0);
        gbc.writeMem(0x93cf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdeb);
        EXPECT(gbc.pc(), 0x93d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93cf), 0xcb);
        EXPECT(gbc.readMem(0x93d0), 0x5a);
        // CB 5A 0263
        gbc.setState(0x6cad, 0xfa82, 0xe980, 0x87ff, 0xd015, 0x1513, 0x1, 0x0);
        gbc.writeMem(0x6cad, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xfa82);
        EXPECT(gbc.pc(), 0x6caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0264
        gbc.setState(0xd57d, 0x7bc9, 0x7fe0, 0xbac7, 0x8556, 0xd491, 0x1, 0x1);
        gbc.writeMem(0xd57d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7bc9);
        EXPECT(gbc.pc(), 0xd57f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd57d), 0xcb);
        EXPECT(gbc.readMem(0xd57e), 0x5a);
        // CB 5A 0265
        gbc.setState(0x68ad, 0x8e5e, 0xcd50, 0x9984, 0xac4f, 0x7185, 0x1, 0x0);
        gbc.writeMem(0x68ad, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8e5e);
        EXPECT(gbc.pc(), 0x68af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0266
        gbc.setState(0x83de, 0xb38a, 0xb120, 0x8ce0, 0x5d4e, 0xba18, 0x0, 0x0);
        gbc.writeMem(0x83de, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb38a);
        EXPECT(gbc.pc(), 0x83e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83de), 0xcb);
        EXPECT(gbc.readMem(0x83df), 0x5a);
        // CB 5A 0267
        gbc.setState(0x419, 0xc67d, 0x62a0, 0x2c09, 0xe61c, 0x2993, 0x1, 0x1);
        gbc.writeMem(0x419, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc67d);
        EXPECT(gbc.pc(), 0x41b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0268
        gbc.setState(0x88b6, 0xf57, 0x4f70, 0x4455, 0x98d4, 0x2c1f, 0x1, 0x0);
        gbc.writeMem(0x88b6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf57);
        EXPECT(gbc.pc(), 0x88b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88b6), 0xcb);
        EXPECT(gbc.readMem(0x88b7), 0x5a);
        // CB 5A 0269
        gbc.setState(0xa726, 0x3c94, 0x8f70, 0xfd9e, 0xbc66, 0xa75a, 0x0, 0x1);
        gbc.writeMem(0xa726, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3c94);
        EXPECT(gbc.pc(), 0xa728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa726), 0xcb);
        EXPECT(gbc.readMem(0xa727), 0x5a);
        // CB 5A 026A
        gbc.setState(0x89d6, 0xa47f, 0x93e0, 0xf7c5, 0xb2ca, 0x9875, 0x1, 0x1);
        gbc.writeMem(0x89d6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa47f);
        EXPECT(gbc.pc(), 0x89d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d6), 0xcb);
        EXPECT(gbc.readMem(0x89d7), 0x5a);
        // CB 5A 026B
        gbc.setState(0x234c, 0xd260, 0x2100, 0x2e42, 0xb95a, 0xe5b6, 0x0, 0x0);
        gbc.writeMem(0x234c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd260);
        EXPECT(gbc.pc(), 0x234e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 026C
        gbc.setState(0x546f, 0xddb4, 0xf9f0, 0x19a7, 0x1c07, 0x9ddf, 0x0, 0x0);
        gbc.writeMem(0x546f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xddb4);
        EXPECT(gbc.pc(), 0x5471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 026D
        gbc.setState(0xb661, 0x7915, 0xe5b0, 0x8e31, 0x83b9, 0xdcd1, 0x0, 0x1);
        gbc.writeMem(0xb661, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7915);
        EXPECT(gbc.pc(), 0xb663);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb661), 0xcb);
        EXPECT(gbc.readMem(0xb662), 0x5a);
        // CB 5A 026E
        gbc.setState(0xab61, 0x191d, 0x1870, 0x58ba, 0x9aee, 0xd259, 0x1, 0x0);
        gbc.writeMem(0xab61, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x191d);
        EXPECT(gbc.pc(), 0xab63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab61), 0xcb);
        EXPECT(gbc.readMem(0xab62), 0x5a);
        // CB 5A 026F
        gbc.setState(0x9b43, 0xf3c1, 0xb6a0, 0x55bc, 0x32cc, 0x2f10, 0x1, 0x1);
        gbc.writeMem(0x9b43, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf3c1);
        EXPECT(gbc.pc(), 0x9b45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b43), 0xcb);
        EXPECT(gbc.readMem(0x9b44), 0x5a);
        // CB 5A 0270
        gbc.setState(0xe898, 0x9580, 0x9570, 0x4bae, 0x9f81, 0x7902, 0x1, 0x0);
        gbc.writeMem(0xe898, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9580);
        EXPECT(gbc.pc(), 0xe89a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe898), 0xcb);
        EXPECT(gbc.readMem(0xe899), 0x5a);
        // CB 5A 0271
        gbc.setState(0x32bd, 0x75ab, 0xf170, 0xabb5, 0xb39a, 0x26b4, 0x1, 0x1);
        gbc.writeMem(0x32bd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x75ab);
        EXPECT(gbc.pc(), 0x32bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0273
        gbc.setState(0x3140, 0xb77c, 0xea00, 0x3be0, 0x45a9, 0x4b15, 0x1, 0x1);
        gbc.writeMem(0x3140, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb77c);
        EXPECT(gbc.pc(), 0x3142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0274
        gbc.setState(0x79a3, 0x9edc, 0x5890, 0x9f87, 0x759a, 0xb0dc, 0x1, 0x0);
        gbc.writeMem(0x79a3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9edc);
        EXPECT(gbc.pc(), 0x79a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0276
        gbc.setState(0x1a97, 0x374b, 0xb1c0, 0x5a7b, 0xa50f, 0xe738, 0x1, 0x1);
        gbc.writeMem(0x1a97, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x374b);
        EXPECT(gbc.pc(), 0x1a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0277
        gbc.setState(0x24d1, 0xe357, 0x270, 0xc47b, 0xad0b, 0x4e67, 0x0, 0x0);
        gbc.writeMem(0x24d1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe357);
        EXPECT(gbc.pc(), 0x24d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0278
        gbc.setState(0x8bbb, 0x6d64, 0x20f0, 0xf5b8, 0xe24b, 0x76b8, 0x0, 0x1);
        gbc.writeMem(0x8bbb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6d64);
        EXPECT(gbc.pc(), 0x8bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bbb), 0xcb);
        EXPECT(gbc.readMem(0x8bbc), 0x5a);
        // CB 5A 0279
        gbc.setState(0x39d3, 0x7c2b, 0x9af0, 0x59df, 0x2dfd, 0xd0fe, 0x1, 0x1);
        gbc.writeMem(0x39d3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7c2b);
        EXPECT(gbc.pc(), 0x39d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 027A
        gbc.setState(0xb052, 0x22ca, 0x6b70, 0xeebf, 0xdf8, 0x6fe3, 0x0, 0x1);
        gbc.writeMem(0xb052, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x22ca);
        EXPECT(gbc.pc(), 0xb054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb052), 0xcb);
        EXPECT(gbc.readMem(0xb053), 0x5a);
        // CB 5A 027B
        gbc.setState(0x456, 0x168, 0x7950, 0x5c8a, 0xf737, 0x9165, 0x1, 0x1);
        gbc.writeMem(0x456, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x168);
        EXPECT(gbc.pc(), 0x458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 027C
        gbc.setState(0xf4e, 0x2bf, 0xf7f0, 0x76da, 0x5d75, 0x5d65, 0x1, 0x0);
        gbc.writeMem(0xf4e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2bf);
        EXPECT(gbc.pc(), 0xf50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 027D
        gbc.setState(0xdaa3, 0xd751, 0x2de0, 0xe1f5, 0xb0e5, 0x292d, 0x1, 0x0);
        gbc.writeMem(0xdaa3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd751);
        EXPECT(gbc.pc(), 0xdaa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaa3), 0xcb);
        EXPECT(gbc.readMem(0xdaa4), 0x5a);
        // CB 5A 027E
        gbc.setState(0xcb27, 0x3de3, 0xc8f0, 0xcefd, 0xb490, 0xc438, 0x1, 0x1);
        gbc.writeMem(0xcb27, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3de3);
        EXPECT(gbc.pc(), 0xcb29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb27), 0xcb);
        EXPECT(gbc.readMem(0xcb28), 0x5a);
        // CB 5A 027F
        gbc.setState(0x489d, 0xf0ca, 0x3890, 0x1649, 0x3684, 0xf9df, 0x0, 0x0);
        gbc.writeMem(0x489d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf0ca);
        EXPECT(gbc.pc(), 0x489f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0280
        gbc.setState(0xe51, 0xef04, 0x3690, 0x65f2, 0xf03, 0xba28, 0x0, 0x1);
        gbc.writeMem(0xe51, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xef04);
        EXPECT(gbc.pc(), 0xe53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0281
        gbc.setState(0xedea, 0xc4e8, 0xa210, 0xf39, 0xe531, 0xb7cf, 0x1, 0x0);
        gbc.writeMem(0xedea, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc4e8);
        EXPECT(gbc.pc(), 0xedec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedea), 0xcb);
        EXPECT(gbc.readMem(0xedeb), 0x5a);
        // CB 5A 0282
        gbc.setState(0x3df1, 0xc88b, 0x2800, 0x2e6e, 0x3e63, 0x51cd, 0x1, 0x1);
        gbc.writeMem(0x3df1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc88b);
        EXPECT(gbc.pc(), 0x3df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0284
        gbc.setState(0x3299, 0xbf0e, 0x6b20, 0x3f35, 0xe094, 0x827e, 0x0, 0x1);
        gbc.writeMem(0x3299, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xbf0e);
        EXPECT(gbc.pc(), 0x329b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0285
        gbc.setState(0x5074, 0x453a, 0xd7d0, 0xc6b1, 0x2a70, 0x56f5, 0x1, 0x0);
        gbc.writeMem(0x5074, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x453a);
        EXPECT(gbc.pc(), 0x5076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0286
        gbc.setState(0x432d, 0x66b7, 0xce50, 0x7ec0, 0xfdca, 0x837e, 0x1, 0x1);
        gbc.writeMem(0x432d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x66b7);
        EXPECT(gbc.pc(), 0x432f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0287
        gbc.setState(0x7228, 0xe433, 0xd9e0, 0x1411, 0x401e, 0x9158, 0x0, 0x0);
        gbc.writeMem(0x7228, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe433);
        EXPECT(gbc.pc(), 0x722a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0288
        gbc.setState(0x5f0f, 0x8963, 0x7900, 0xaaed, 0x7985, 0xf3ec, 0x1, 0x1);
        gbc.writeMem(0x5f0f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8963);
        EXPECT(gbc.pc(), 0x5f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0289
        gbc.setState(0xbb7a, 0xfa8, 0x60f0, 0xfdaf, 0xe492, 0x54db, 0x1, 0x1);
        gbc.writeMem(0xbb7a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xfa8);
        EXPECT(gbc.pc(), 0xbb7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb7a), 0xcb);
        EXPECT(gbc.readMem(0xbb7b), 0x5a);
        // CB 5A 028A
        gbc.setState(0xe8c7, 0x1f8b, 0xd0d0, 0xa9f2, 0x88b2, 0xd6ca, 0x1, 0x1);
        gbc.writeMem(0xe8c7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1f8b);
        EXPECT(gbc.pc(), 0xe8c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8c7), 0xcb);
        EXPECT(gbc.readMem(0xe8c8), 0x5a);
        // CB 5A 028B
        gbc.setState(0x3279, 0xa2d1, 0x54a0, 0x1955, 0xaf7c, 0xe7dc, 0x0, 0x1);
        gbc.writeMem(0x3279, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa2d1);
        EXPECT(gbc.pc(), 0x327b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 028C
        gbc.setState(0x43c8, 0x70b7, 0xf630, 0xc4af, 0x7eb5, 0x15a4, 0x0, 0x0);
        gbc.writeMem(0x43c8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x70b7);
        EXPECT(gbc.pc(), 0x43ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 028D
        gbc.setState(0x6a5d, 0x40be, 0x6360, 0xb869, 0xfdda, 0xc159, 0x0, 0x0);
        gbc.writeMem(0x6a5d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x40be);
        EXPECT(gbc.pc(), 0x6a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 028E
        gbc.setState(0x1233, 0x7f9, 0x7f80, 0x6ef5, 0xa647, 0x4ce7, 0x0, 0x0);
        gbc.writeMem(0x1233, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7f9);
        EXPECT(gbc.pc(), 0x1235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 028F
        gbc.setState(0xa39, 0x17a4, 0xa510, 0x5ea8, 0xd7ce, 0xefaa, 0x1, 0x0);
        gbc.writeMem(0xa39, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x17a4);
        EXPECT(gbc.pc(), 0xa3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0290
        gbc.setState(0x6f75, 0x4c26, 0x15c0, 0x5b08, 0x1de6, 0xc82b, 0x0, 0x1);
        gbc.writeMem(0x6f75, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x4c26);
        EXPECT(gbc.pc(), 0x6f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0292
        gbc.setState(0x2377, 0x9863, 0xff10, 0xd95d, 0x5fb7, 0xbf9c, 0x1, 0x1);
        gbc.writeMem(0x2377, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9863);
        EXPECT(gbc.pc(), 0x2379);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0293
        gbc.setState(0x576f, 0xd6e6, 0x1670, 0x2c7f, 0xd26d, 0x7f56, 0x0, 0x1);
        gbc.writeMem(0x576f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd6e6);
        EXPECT(gbc.pc(), 0x5771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0294
        gbc.setState(0xa2d4, 0x97d4, 0x9700, 0x65c5, 0x8eb4, 0x435f, 0x1, 0x0);
        gbc.writeMem(0xa2d4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x97d4);
        EXPECT(gbc.pc(), 0xa2d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d4), 0xcb);
        EXPECT(gbc.readMem(0xa2d5), 0x5a);
        // CB 5A 0295
        gbc.setState(0x2b30, 0x6c22, 0x3ab0, 0x831f, 0x7e8, 0xc2c7, 0x0, 0x1);
        gbc.writeMem(0x2b30, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6c22);
        EXPECT(gbc.pc(), 0x2b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0296
        gbc.setState(0x3e38, 0xaf2, 0x2b10, 0x43f4, 0xbb83, 0xe2e3, 0x0, 0x0);
        gbc.writeMem(0x3e38, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xaf2);
        EXPECT(gbc.pc(), 0x3e3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0297
        gbc.setState(0x135b, 0x5905, 0x6290, 0x5100, 0x3c38, 0xe460, 0x1, 0x0);
        gbc.writeMem(0x135b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5905);
        EXPECT(gbc.pc(), 0x135d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0298
        gbc.setState(0xaf2c, 0x5dae, 0x5a00, 0xdccc, 0xf280, 0x3e3a, 0x1, 0x1);
        gbc.writeMem(0xaf2c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5dae);
        EXPECT(gbc.pc(), 0xaf2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf2c), 0xcb);
        EXPECT(gbc.readMem(0xaf2d), 0x5a);
        // CB 5A 0299
        gbc.setState(0xa8b6, 0x364e, 0x28f0, 0xf4df, 0x3c0a, 0x46a0, 0x1, 0x1);
        gbc.writeMem(0xa8b6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x364e);
        EXPECT(gbc.pc(), 0xa8b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8b6), 0xcb);
        EXPECT(gbc.readMem(0xa8b7), 0x5a);
        // CB 5A 029A
        gbc.setState(0x229b, 0x580d, 0xe5a0, 0x252b, 0x6a29, 0xdffe, 0x0, 0x1);
        gbc.writeMem(0x229b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x580d);
        EXPECT(gbc.pc(), 0x229d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 029B
        gbc.setState(0x40a6, 0xcfa5, 0x1950, 0xafd4, 0x4a21, 0x50cf, 0x0, 0x1);
        gbc.writeMem(0x40a6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcfa5);
        EXPECT(gbc.pc(), 0x40a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 029C
        gbc.setState(0x489f, 0x601, 0x40f0, 0xaca2, 0x2213, 0xc4e8, 0x1, 0x0);
        gbc.writeMem(0x489f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x601);
        EXPECT(gbc.pc(), 0x48a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 029D
        gbc.setState(0x1e34, 0xc35d, 0x7f30, 0x6df2, 0x1951, 0x6a1a, 0x0, 0x0);
        gbc.writeMem(0x1e34, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc35d);
        EXPECT(gbc.pc(), 0x1e36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 029E
        gbc.setState(0x6c6b, 0x2e3c, 0xe7d0, 0xda58, 0x941f, 0x46d1, 0x0, 0x1);
        gbc.writeMem(0x6c6b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2e3c);
        EXPECT(gbc.pc(), 0x6c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 029F
        gbc.setState(0x414, 0xe613, 0xb5b0, 0xbf6d, 0x1965, 0x33bb, 0x0, 0x0);
        gbc.writeMem(0x414, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe613);
        EXPECT(gbc.pc(), 0x416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02A0
        gbc.setState(0xc214, 0x5cce, 0x6c90, 0xc4af, 0x2817, 0xf5fb, 0x1, 0x0);
        gbc.writeMem(0xc214, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5cce);
        EXPECT(gbc.pc(), 0xc216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc214), 0xcb);
        EXPECT(gbc.readMem(0xc215), 0x5a);
        // CB 5A 02A1
        gbc.setState(0x318a, 0x6658, 0x5820, 0x30c5, 0xe29, 0x2444, 0x1, 0x0);
        gbc.writeMem(0x318a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6658);
        EXPECT(gbc.pc(), 0x318c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02A2
        gbc.setState(0x6703, 0xf6d2, 0xac20, 0xcd1f, 0x6a9e, 0x15e7, 0x1, 0x0);
        gbc.writeMem(0x6703, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf6d2);
        EXPECT(gbc.pc(), 0x6705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02A3
        gbc.setState(0x2953, 0x7d4a, 0x4d10, 0x51b, 0x787b, 0x9e18, 0x0, 0x1);
        gbc.writeMem(0x2953, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7d4a);
        EXPECT(gbc.pc(), 0x2955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02A4
        gbc.setState(0x408f, 0x29a5, 0x1710, 0xd7fd, 0x55f2, 0xb05b, 0x1, 0x0);
        gbc.writeMem(0x408f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x29a5);
        EXPECT(gbc.pc(), 0x4091);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02A5
        gbc.setState(0x9649, 0xe6e8, 0x4420, 0x6a03, 0x27c2, 0xc2cc, 0x0, 0x0);
        gbc.writeMem(0x9649, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe6e8);
        EXPECT(gbc.pc(), 0x964b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9649), 0xcb);
        EXPECT(gbc.readMem(0x964a), 0x5a);
        // CB 5A 02A6
        gbc.setState(0x7f4c, 0x811, 0x1ac0, 0x3bed, 0x150f, 0x3b1a, 0x0, 0x1);
        gbc.writeMem(0x7f4c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x811);
        EXPECT(gbc.pc(), 0x7f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02A7
        gbc.setState(0x9913, 0x4d91, 0xe760, 0xe350, 0xa1fa, 0x8e26, 0x0, 0x1);
        gbc.writeMem(0x9913, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4d91);
        EXPECT(gbc.pc(), 0x9915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9913), 0xcb);
        EXPECT(gbc.readMem(0x9914), 0x5a);
        // CB 5A 02A8
        gbc.setState(0xda2d, 0x6555, 0xb020, 0x3a97, 0x1407, 0x3b23, 0x1, 0x0);
        gbc.writeMem(0xda2d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6555);
        EXPECT(gbc.pc(), 0xda2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda2d), 0xcb);
        EXPECT(gbc.readMem(0xda2e), 0x5a);
        // CB 5A 02A9
        gbc.setState(0x713b, 0x514f, 0x6c20, 0xb69d, 0xcf14, 0xeb5b, 0x1, 0x0);
        gbc.writeMem(0x713b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x514f);
        EXPECT(gbc.pc(), 0x713d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02AA
        gbc.setState(0x2a5, 0x9518, 0x6db0, 0xc698, 0xa831, 0x3c43, 0x0, 0x0);
        gbc.writeMem(0x2a5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9518);
        EXPECT(gbc.pc(), 0x2a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02AB
        gbc.setState(0x4384, 0xd94a, 0x38a0, 0xbd47, 0x2980, 0x819f, 0x1, 0x1);
        gbc.writeMem(0x4384, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd94a);
        EXPECT(gbc.pc(), 0x4386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02AC
        gbc.setState(0xcd8, 0x591f, 0x6e50, 0x8f2c, 0x1027, 0xa069, 0x1, 0x1);
        gbc.writeMem(0xcd8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x591f);
        EXPECT(gbc.pc(), 0xcda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02AD
        gbc.setState(0x7aa, 0x86b2, 0xf1a0, 0xb45a, 0x23cf, 0x632, 0x1, 0x0);
        gbc.writeMem(0x7aa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x86b2);
        EXPECT(gbc.pc(), 0x7ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02AE
        gbc.setState(0x6e8d, 0x8ea9, 0x9af0, 0xd82b, 0x7a22, 0x18d, 0x0, 0x1);
        gbc.writeMem(0x6e8d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8ea9);
        EXPECT(gbc.pc(), 0x6e8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02AF
        gbc.setState(0xc910, 0xd461, 0x9f50, 0x7aed, 0xacb7, 0x3464, 0x0, 0x1);
        gbc.writeMem(0xc910, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd461);
        EXPECT(gbc.pc(), 0xc912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc910), 0xcb);
        EXPECT(gbc.readMem(0xc911), 0x5a);
        // CB 5A 02B0
        gbc.setState(0x2b1b, 0x3190, 0xcbd0, 0x1156, 0x9db9, 0x7253, 0x1, 0x1);
        gbc.writeMem(0x2b1b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3190);
        EXPECT(gbc.pc(), 0x2b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02B1
        gbc.setState(0x3c6d, 0x1d3, 0xff00, 0x9417, 0xd57c, 0x8d5a, 0x0, 0x1);
        gbc.writeMem(0x3c6d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1d3);
        EXPECT(gbc.pc(), 0x3c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02B2
        gbc.setState(0x9909, 0x8014, 0xe790, 0x7b02, 0xe39b, 0x2ac0, 0x1, 0x1);
        gbc.writeMem(0x9909, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8014);
        EXPECT(gbc.pc(), 0x990b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9909), 0xcb);
        EXPECT(gbc.readMem(0x990a), 0x5a);
        // CB 5A 02B3
        gbc.setState(0x8250, 0x2326, 0x1d60, 0xc756, 0xd071, 0xae6a, 0x0, 0x0);
        gbc.writeMem(0x8250, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2326);
        EXPECT(gbc.pc(), 0x8252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8250), 0xcb);
        EXPECT(gbc.readMem(0x8251), 0x5a);
        // CB 5A 02B4
        gbc.setState(0x9778, 0x1fcb, 0xf50, 0x1f9c, 0x1f73, 0x1ef3, 0x0, 0x0);
        gbc.writeMem(0x9778, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1fcb);
        EXPECT(gbc.pc(), 0x977a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9778), 0xcb);
        EXPECT(gbc.readMem(0x9779), 0x5a);
        // CB 5A 02B5
        gbc.setState(0xc7d6, 0x3ea2, 0x5610, 0xa247, 0xf209, 0x2c9d, 0x0, 0x0);
        gbc.writeMem(0xc7d6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3ea2);
        EXPECT(gbc.pc(), 0xc7d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7d6), 0xcb);
        EXPECT(gbc.readMem(0xc7d7), 0x5a);
        // CB 5A 02B6
        gbc.setState(0x16ee, 0xb960, 0xef0, 0x14e0, 0x91f1, 0xaf4, 0x0, 0x0);
        gbc.writeMem(0x16ee, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb960);
        EXPECT(gbc.pc(), 0x16f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02B7
        gbc.setState(0xac1e, 0x793d, 0x9020, 0xba8, 0x250a, 0x2b8d, 0x1, 0x0);
        gbc.writeMem(0xac1e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x793d);
        EXPECT(gbc.pc(), 0xac20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac1e), 0xcb);
        EXPECT(gbc.readMem(0xac1f), 0x5a);
        // CB 5A 02B8
        gbc.setState(0x8c64, 0xbe6, 0x2ae0, 0x267, 0xc154, 0xbcd2, 0x0, 0x1);
        gbc.writeMem(0x8c64, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbe6);
        EXPECT(gbc.pc(), 0x8c66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c64), 0xcb);
        EXPECT(gbc.readMem(0x8c65), 0x5a);
        // CB 5A 02B9
        gbc.setState(0xe1aa, 0x764f, 0x60a0, 0x3f29, 0xc212, 0x4428, 0x0, 0x1);
        gbc.writeMem(0xe1aa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x764f);
        EXPECT(gbc.pc(), 0xe1ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1aa), 0xcb);
        EXPECT(gbc.readMem(0xe1ab), 0x5a);
        // CB 5A 02BA
        gbc.setState(0xde05, 0xf19d, 0xcad0, 0xe342, 0xa033, 0x8549, 0x0, 0x0);
        gbc.writeMem(0xde05, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf19d);
        EXPECT(gbc.pc(), 0xde07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde05), 0xcb);
        EXPECT(gbc.readMem(0xde06), 0x5a);
        // CB 5A 02BB
        gbc.setState(0x6201, 0xa88b, 0x3ce0, 0x59ed, 0xb117, 0xbbe5, 0x0, 0x0);
        gbc.writeMem(0x6201, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa88b);
        EXPECT(gbc.pc(), 0x6203);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02BC
        gbc.setState(0x980e, 0x9b19, 0xbec0, 0x52d6, 0x2f4d, 0xdc8b, 0x1, 0x0);
        gbc.writeMem(0x980e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9b19);
        EXPECT(gbc.pc(), 0x9810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980e), 0xcb);
        EXPECT(gbc.readMem(0x980f), 0x5a);
        // CB 5A 02BD
        gbc.setState(0x6856, 0xed3d, 0xbfe0, 0xf86c, 0xae4d, 0x9cbf, 0x0, 0x1);
        gbc.writeMem(0x6856, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xed3d);
        EXPECT(gbc.pc(), 0x6858);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02BE
        gbc.setState(0x8a8b, 0x35ac, 0x3bd0, 0x3cbb, 0x41aa, 0xf62, 0x0, 0x1);
        gbc.writeMem(0x8a8b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x35ac);
        EXPECT(gbc.pc(), 0x8a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a8b), 0xcb);
        EXPECT(gbc.readMem(0x8a8c), 0x5a);
        // CB 5A 02BF
        gbc.setState(0xd9b9, 0xfebb, 0x8890, 0x2c16, 0x3d2, 0xef35, 0x1, 0x1);
        gbc.writeMem(0xd9b9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfebb);
        EXPECT(gbc.pc(), 0xd9bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b9), 0xcb);
        EXPECT(gbc.readMem(0xd9ba), 0x5a);
        // CB 5A 02C0
        gbc.setState(0xc692, 0x1246, 0x91d0, 0xbf1f, 0xb868, 0x59df, 0x0, 0x0);
        gbc.writeMem(0xc692, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1246);
        EXPECT(gbc.pc(), 0xc694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc692), 0xcb);
        EXPECT(gbc.readMem(0xc693), 0x5a);
        // CB 5A 02C2
        gbc.setState(0x4b17, 0xca22, 0x3a40, 0xd258, 0x82b4, 0xdf96, 0x0, 0x1);
        gbc.writeMem(0x4b17, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xca22);
        EXPECT(gbc.pc(), 0x4b19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02C3
        gbc.setState(0x2728, 0x2f8b, 0x9f50, 0xd07a, 0xa30a, 0x8190, 0x0, 0x1);
        gbc.writeMem(0x2728, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2f8b);
        EXPECT(gbc.pc(), 0x272a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02C4
        gbc.setState(0xebc6, 0xf5a2, 0xc820, 0x72ac, 0xec78, 0x6599, 0x1, 0x1);
        gbc.writeMem(0xebc6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf5a2);
        EXPECT(gbc.pc(), 0xebc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebc6), 0xcb);
        EXPECT(gbc.readMem(0xebc7), 0x5a);
        // CB 5A 02C5
        gbc.setState(0x39c0, 0xe110, 0xc30, 0x6359, 0x71ae, 0x2a14, 0x1, 0x0);
        gbc.writeMem(0x39c0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe110);
        EXPECT(gbc.pc(), 0x39c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02C6
        gbc.setState(0xc75b, 0xc783, 0xc030, 0x7ba5, 0x777d, 0x4337, 0x1, 0x1);
        gbc.writeMem(0xc75b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc783);
        EXPECT(gbc.pc(), 0xc75d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc75b), 0xcb);
        EXPECT(gbc.readMem(0xc75c), 0x5a);
        // CB 5A 02C8
        gbc.setState(0x96bc, 0xcf24, 0xdb20, 0x900, 0x5d56, 0xe2d8, 0x1, 0x0);
        gbc.writeMem(0x96bc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcf24);
        EXPECT(gbc.pc(), 0x96be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96bc), 0xcb);
        EXPECT(gbc.readMem(0x96bd), 0x5a);
        // CB 5A 02C9
        gbc.setState(0x79e7, 0x362a, 0xa3a0, 0x171e, 0xca0c, 0x87a3, 0x0, 0x1);
        gbc.writeMem(0x79e7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x362a);
        EXPECT(gbc.pc(), 0x79e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02CA
        gbc.setState(0xb61, 0xb9c4, 0x4f80, 0x14ac, 0xe987, 0xaf7b, 0x1, 0x0);
        gbc.writeMem(0xb61, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb9c4);
        EXPECT(gbc.pc(), 0xb63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02CB
        gbc.setState(0xcbb4, 0x2bc6, 0xf2e0, 0x53ff, 0x3ec1, 0x70d6, 0x0, 0x0);
        gbc.writeMem(0xcbb4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2bc6);
        EXPECT(gbc.pc(), 0xcbb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb4), 0xcb);
        EXPECT(gbc.readMem(0xcbb5), 0x5a);
        // CB 5A 02CC
        gbc.setState(0xd060, 0x48e, 0x1d20, 0x880b, 0xf9af, 0xec87, 0x1, 0x0);
        gbc.writeMem(0xd060, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x48e);
        EXPECT(gbc.pc(), 0xd062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd060), 0xcb);
        EXPECT(gbc.readMem(0xd061), 0x5a);
        // CB 5A 02CD
        gbc.setState(0x7a2c, 0x9dcf, 0x77b0, 0x9f24, 0xd116, 0xccdd, 0x1, 0x0);
        gbc.writeMem(0x7a2c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9dcf);
        EXPECT(gbc.pc(), 0x7a2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02CE
        gbc.setState(0xc371, 0x45ad, 0xd70, 0x911c, 0x8157, 0x529a, 0x1, 0x1);
        gbc.writeMem(0xc371, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x45ad);
        EXPECT(gbc.pc(), 0xc373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc371), 0xcb);
        EXPECT(gbc.readMem(0xc372), 0x5a);
        // CB 5A 02CF
        gbc.setState(0x5971, 0xeadc, 0xb1f0, 0x51e3, 0x9, 0x8baa, 0x0, 0x1);
        gbc.writeMem(0x5971, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xeadc);
        EXPECT(gbc.pc(), 0x5973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02D0
        gbc.setState(0x59d7, 0xfb89, 0x9ba0, 0x7fe5, 0xaa9b, 0x27b9, 0x1, 0x0);
        gbc.writeMem(0x59d7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfb89);
        EXPECT(gbc.pc(), 0x59d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02D1
        gbc.setState(0x93ac, 0x15b8, 0x8780, 0x9752, 0x55ce, 0x5bae, 0x0, 0x0);
        gbc.writeMem(0x93ac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x15b8);
        EXPECT(gbc.pc(), 0x93ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ac), 0xcb);
        EXPECT(gbc.readMem(0x93ad), 0x5a);
        // CB 5A 02D2
        gbc.setState(0xaa87, 0xf926, 0x6580, 0xbb65, 0x7580, 0x1f25, 0x1, 0x0);
        gbc.writeMem(0xaa87, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf926);
        EXPECT(gbc.pc(), 0xaa89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa87), 0xcb);
        EXPECT(gbc.readMem(0xaa88), 0x5a);
        // CB 5A 02D3
        gbc.setState(0x7d85, 0x62a8, 0x8ec0, 0x238, 0x404e, 0x5591, 0x1, 0x1);
        gbc.writeMem(0x7d85, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x62a8);
        EXPECT(gbc.pc(), 0x7d87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02D4
        gbc.setState(0xb7ea, 0xf8d, 0x9ba0, 0x3c62, 0xc256, 0xb043, 0x0, 0x0);
        gbc.writeMem(0xb7ea, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf8d);
        EXPECT(gbc.pc(), 0xb7ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ea), 0xcb);
        EXPECT(gbc.readMem(0xb7eb), 0x5a);
        // CB 5A 02D5
        gbc.setState(0xb489, 0xa739, 0xa660, 0x456d, 0x8ea2, 0x954d, 0x1, 0x1);
        gbc.writeMem(0xb489, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa739);
        EXPECT(gbc.pc(), 0xb48b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb489), 0xcb);
        EXPECT(gbc.readMem(0xb48a), 0x5a);
        // CB 5A 02D6
        gbc.setState(0x6814, 0x2374, 0xab80, 0xe2e, 0xc28c, 0x8e9, 0x1, 0x0);
        gbc.writeMem(0x6814, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2374);
        EXPECT(gbc.pc(), 0x6816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02D7
        gbc.setState(0x5dee, 0xaabc, 0xfa60, 0xa127, 0x5cc7, 0xa046, 0x1, 0x0);
        gbc.writeMem(0x5dee, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xaabc);
        EXPECT(gbc.pc(), 0x5df0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02D8
        gbc.setState(0x198d, 0x6d6, 0xf8b0, 0x7c19, 0x481c, 0xfd04, 0x0, 0x1);
        gbc.writeMem(0x198d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6d6);
        EXPECT(gbc.pc(), 0x198f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02D9
        gbc.setState(0x8490, 0x6b39, 0xaac0, 0x9e7f, 0x2414, 0xc824, 0x1, 0x0);
        gbc.writeMem(0x8490, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6b39);
        EXPECT(gbc.pc(), 0x8492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8490), 0xcb);
        EXPECT(gbc.readMem(0x8491), 0x5a);
        // CB 5A 02DA
        gbc.setState(0xede0, 0x21f3, 0x2c30, 0xdbd9, 0xd861, 0xbfc0, 0x1, 0x0);
        gbc.writeMem(0xede0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x21f3);
        EXPECT(gbc.pc(), 0xede2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede0), 0xcb);
        EXPECT(gbc.readMem(0xede1), 0x5a);
        // CB 5A 02DB
        gbc.setState(0x77c9, 0x3066, 0x6480, 0xcf61, 0x866, 0x3076, 0x1, 0x1);
        gbc.writeMem(0x77c9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3066);
        EXPECT(gbc.pc(), 0x77cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02DC
        gbc.setState(0xab10, 0x1ba7, 0xd900, 0xcc42, 0x2718, 0x2a1b, 0x1, 0x1);
        gbc.writeMem(0xab10, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1ba7);
        EXPECT(gbc.pc(), 0xab12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab10), 0xcb);
        EXPECT(gbc.readMem(0xab11), 0x5a);
        // CB 5A 02DD
        gbc.setState(0x138, 0x2e00, 0x4630, 0xce80, 0x9810, 0x632f, 0x0, 0x0);
        gbc.writeMem(0x138, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2e00);
        EXPECT(gbc.pc(), 0x13a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02DE
        gbc.setState(0x4847, 0xecd3, 0xeb40, 0x136c, 0xd551, 0x9d59, 0x0, 0x1);
        gbc.writeMem(0x4847, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xecd3);
        EXPECT(gbc.pc(), 0x4849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02DF
        gbc.setState(0x2074, 0x30f7, 0x4660, 0x1525, 0x9951, 0xfe60, 0x1, 0x1);
        gbc.writeMem(0x2074, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x30f7);
        EXPECT(gbc.pc(), 0x2076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02E0
        gbc.setState(0x6240, 0xc5f8, 0x36d0, 0x86ee, 0xf1c3, 0xbc64, 0x1, 0x1);
        gbc.writeMem(0x6240, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc5f8);
        EXPECT(gbc.pc(), 0x6242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02E1
        gbc.setState(0xca9a, 0x13e1, 0xd50, 0xc013, 0xe1f7, 0x6ec9, 0x0, 0x1);
        gbc.writeMem(0xca9a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x13e1);
        EXPECT(gbc.pc(), 0xca9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca9a), 0xcb);
        EXPECT(gbc.readMem(0xca9b), 0x5a);
        // CB 5A 02E2
        gbc.setState(0xb61b, 0xf160, 0x1750, 0x767d, 0x1d2f, 0xac0d, 0x1, 0x0);
        gbc.writeMem(0xb61b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf160);
        EXPECT(gbc.pc(), 0xb61d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb61b), 0xcb);
        EXPECT(gbc.readMem(0xb61c), 0x5a);
        // CB 5A 02E3
        gbc.setState(0x5c84, 0x5fca, 0xa10, 0x1e68, 0xc67c, 0xe04a, 0x1, 0x0);
        gbc.writeMem(0x5c84, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5fca);
        EXPECT(gbc.pc(), 0x5c86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02E4
        gbc.setState(0xe2b, 0x5790, 0xd7a0, 0x90c6, 0xab00, 0x8088, 0x0, 0x0);
        gbc.writeMem(0xe2b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5790);
        EXPECT(gbc.pc(), 0xe2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02E5
        gbc.setState(0x80ef, 0x2fd8, 0xdcc0, 0xccf3, 0x49a9, 0x8a4b, 0x0, 0x0);
        gbc.writeMem(0x80ef, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2fd8);
        EXPECT(gbc.pc(), 0x80f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ef), 0xcb);
        EXPECT(gbc.readMem(0x80f0), 0x5a);
        // CB 5A 02E6
        gbc.setState(0xcc38, 0xb9f1, 0xf410, 0x7d1a, 0x6cf1, 0x51a9, 0x0, 0x1);
        gbc.writeMem(0xcc38, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb9f1);
        EXPECT(gbc.pc(), 0xcc3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc38), 0xcb);
        EXPECT(gbc.readMem(0xcc39), 0x5a);
        // CB 5A 02E7
        gbc.setState(0x9a64, 0x2ca6, 0x19f0, 0x6cf7, 0x81b, 0x7ec8, 0x1, 0x0);
        gbc.writeMem(0x9a64, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2ca6);
        EXPECT(gbc.pc(), 0x9a66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a64), 0xcb);
        EXPECT(gbc.readMem(0x9a65), 0x5a);
        // CB 5A 02E8
        gbc.setState(0x924e, 0xa746, 0x3470, 0x71b0, 0xdf0c, 0xbba8, 0x1, 0x0);
        gbc.writeMem(0x924e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa746);
        EXPECT(gbc.pc(), 0x9250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x924e), 0xcb);
        EXPECT(gbc.readMem(0x924f), 0x5a);
        // CB 5A 02E9
        gbc.setState(0x7f62, 0x1ba8, 0x6960, 0x3563, 0xa290, 0x4f14, 0x0, 0x0);
        gbc.writeMem(0x7f62, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1ba8);
        EXPECT(gbc.pc(), 0x7f64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02EA
        gbc.setState(0x340b, 0x8c7f, 0x1de0, 0x4c45, 0x2d41, 0xb3b2, 0x0, 0x1);
        gbc.writeMem(0x340b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8c7f);
        EXPECT(gbc.pc(), 0x340d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02EB
        gbc.setState(0xc577, 0xa655, 0xee90, 0x7e87, 0x47ec, 0xb06d, 0x1, 0x1);
        gbc.writeMem(0xc577, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa655);
        EXPECT(gbc.pc(), 0xc579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc577), 0xcb);
        EXPECT(gbc.readMem(0xc578), 0x5a);
        // CB 5A 02EC
        gbc.setState(0x5640, 0x58dc, 0x8b20, 0xe4dc, 0xdcda, 0x942f, 0x1, 0x1);
        gbc.writeMem(0x5640, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x58dc);
        EXPECT(gbc.pc(), 0x5642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02ED
        gbc.setState(0x6f46, 0xa999, 0xed70, 0xc691, 0xf265, 0xb620, 0x1, 0x0);
        gbc.writeMem(0x6f46, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa999);
        EXPECT(gbc.pc(), 0x6f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02EE
        gbc.setState(0x6c01, 0xa372, 0xdd70, 0x359, 0x86f2, 0xa73e, 0x1, 0x1);
        gbc.writeMem(0x6c01, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa372);
        EXPECT(gbc.pc(), 0x6c03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02EF
        gbc.setState(0xb91f, 0xb7cf, 0x67a0, 0x828a, 0xd6a, 0x1a6a, 0x0, 0x0);
        gbc.writeMem(0xb91f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb7cf);
        EXPECT(gbc.pc(), 0xb921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb91f), 0xcb);
        EXPECT(gbc.readMem(0xb920), 0x5a);
        // CB 5A 02F0
        gbc.setState(0x1229, 0x68c1, 0xa50, 0x10d1, 0x238d, 0xe0d8, 0x1, 0x0);
        gbc.writeMem(0x1229, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x68c1);
        EXPECT(gbc.pc(), 0x122b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02F1
        gbc.setState(0x93c9, 0x10c1, 0x4ae0, 0x9757, 0xa9dd, 0xd6cd, 0x1, 0x1);
        gbc.writeMem(0x93c9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x10c1);
        EXPECT(gbc.pc(), 0x93cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c9), 0xcb);
        EXPECT(gbc.readMem(0x93ca), 0x5a);
        // CB 5A 02F2
        gbc.setState(0xb818, 0xc67, 0xfc0, 0x813d, 0xbd75, 0xa8c4, 0x1, 0x1);
        gbc.writeMem(0xb818, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc67);
        EXPECT(gbc.pc(), 0xb81a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb818), 0xcb);
        EXPECT(gbc.readMem(0xb819), 0x5a);
        // CB 5A 02F3
        gbc.setState(0x34e3, 0xab1a, 0xe130, 0x9258, 0x6f3, 0xef5b, 0x0, 0x1);
        gbc.writeMem(0x34e3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xab1a);
        EXPECT(gbc.pc(), 0x34e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02F4
        gbc.setState(0x9aee, 0xe3fe, 0x92b0, 0x3bf6, 0x5279, 0x1693, 0x0, 0x1);
        gbc.writeMem(0x9aee, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe3fe);
        EXPECT(gbc.pc(), 0x9af0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aee), 0xcb);
        EXPECT(gbc.readMem(0x9aef), 0x5a);
        // CB 5A 02F5
        gbc.setState(0x4d36, 0xc9c3, 0xfba0, 0xa3ec, 0xa6c4, 0xeebb, 0x1, 0x1);
        gbc.writeMem(0x4d36, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc9c3);
        EXPECT(gbc.pc(), 0x4d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02F6
        gbc.setState(0xbfe3, 0x85d4, 0x1960, 0xdb32, 0x9a02, 0x74ff, 0x0, 0x1);
        gbc.writeMem(0xbfe3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x85d4);
        EXPECT(gbc.pc(), 0xbfe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe3), 0xcb);
        EXPECT(gbc.readMem(0xbfe4), 0x5a);
        // CB 5A 02F7
        gbc.setState(0x7412, 0x92b7, 0xb500, 0xdb2c, 0x52a, 0x5815, 0x0, 0x1);
        gbc.writeMem(0x7412, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x92b7);
        EXPECT(gbc.pc(), 0x7414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 02F8
        gbc.setState(0xec18, 0x5d63, 0x8250, 0xe791, 0xb5ad, 0xcf6e, 0x0, 0x0);
        gbc.writeMem(0xec18, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5d63);
        EXPECT(gbc.pc(), 0xec1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec18), 0xcb);
        EXPECT(gbc.readMem(0xec19), 0x5a);
        // CB 5A 02F9
        gbc.setState(0x9093, 0x7032, 0x25f0, 0x5834, 0x7672, 0xbd27, 0x0, 0x0);
        gbc.writeMem(0x9093, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7032);
        EXPECT(gbc.pc(), 0x9095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9093), 0xcb);
        EXPECT(gbc.readMem(0x9094), 0x5a);
        // CB 5A 02FA
        gbc.setState(0xf1c, 0x6ab, 0x5650, 0x420f, 0xee00, 0x9bed, 0x1, 0x0);
        gbc.writeMem(0xf1c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6ab);
        EXPECT(gbc.pc(), 0xf1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02FB
        gbc.setState(0xe733, 0x3722, 0x35d0, 0xacb0, 0xcc2b, 0x9e2, 0x0, 0x1);
        gbc.writeMem(0xe733, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3722);
        EXPECT(gbc.pc(), 0xe735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe733), 0xcb);
        EXPECT(gbc.readMem(0xe734), 0x5a);
        // CB 5A 02FC
        gbc.setState(0xd2d9, 0x845a, 0x1ca0, 0x99c9, 0xb801, 0xea87, 0x0, 0x1);
        gbc.writeMem(0xd2d9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x845a);
        EXPECT(gbc.pc(), 0xd2db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d9), 0xcb);
        EXPECT(gbc.readMem(0xd2da), 0x5a);
        // CB 5A 02FD
        gbc.setState(0x8d56, 0x5bd8, 0x25a0, 0xc86a, 0x89cd, 0xf2af, 0x1, 0x0);
        gbc.writeMem(0x8d56, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5bd8);
        EXPECT(gbc.pc(), 0x8d58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d56), 0xcb);
        EXPECT(gbc.readMem(0x8d57), 0x5a);
        // CB 5A 02FE
        gbc.setState(0x22f5, 0xc03f, 0xd830, 0xe60c, 0xd6af, 0xe907, 0x0, 0x1);
        gbc.writeMem(0x22f5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc03f);
        EXPECT(gbc.pc(), 0x22f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 02FF
        gbc.setState(0x5795, 0x7c92, 0x2930, 0x5337, 0xbdbf, 0xd320, 0x1, 0x1);
        gbc.writeMem(0x5795, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7c92);
        EXPECT(gbc.pc(), 0x5797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0300
        gbc.setState(0x9070, 0xec50, 0x7c40, 0x3828, 0x91d6, 0x7c8f, 0x0, 0x0);
        gbc.writeMem(0x9070, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xec50);
        EXPECT(gbc.pc(), 0x9072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9070), 0xcb);
        EXPECT(gbc.readMem(0x9071), 0x5a);
        // CB 5A 0301
        gbc.setState(0x31dc, 0xe54b, 0xe830, 0xe586, 0xfa62, 0x1f4, 0x0, 0x0);
        gbc.writeMem(0x31dc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe54b);
        EXPECT(gbc.pc(), 0x31de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0302
        gbc.setState(0x5ba1, 0xa441, 0xef30, 0x3d8, 0x6826, 0xd45a, 0x1, 0x1);
        gbc.writeMem(0x5ba1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa441);
        EXPECT(gbc.pc(), 0x5ba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0303
        gbc.setState(0x2792, 0x6e9f, 0x42c0, 0x3893, 0x511e, 0xcd6f, 0x0, 0x1);
        gbc.writeMem(0x2792, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6e9f);
        EXPECT(gbc.pc(), 0x2794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0304
        gbc.setState(0x7e45, 0x62af, 0x39f0, 0x85f6, 0xdf5d, 0x8bb2, 0x0, 0x0);
        gbc.writeMem(0x7e45, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x62af);
        EXPECT(gbc.pc(), 0x7e47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0307
        gbc.setState(0xe551, 0xe86c, 0x500, 0xc821, 0x6b5f, 0xb5e5, 0x1, 0x0);
        gbc.writeMem(0xe551, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe86c);
        EXPECT(gbc.pc(), 0xe553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe551), 0xcb);
        EXPECT(gbc.readMem(0xe552), 0x5a);
        // CB 5A 0308
        gbc.setState(0x7f44, 0xe8ae, 0xb7c0, 0x27a0, 0x3ac4, 0x3319, 0x0, 0x0);
        gbc.writeMem(0x7f44, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe8ae);
        EXPECT(gbc.pc(), 0x7f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0309
        gbc.setState(0xed76, 0xca7f, 0x5be0, 0xb773, 0xee87, 0xde6c, 0x0, 0x0);
        gbc.writeMem(0xed76, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xca7f);
        EXPECT(gbc.pc(), 0xed78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed76), 0xcb);
        EXPECT(gbc.readMem(0xed77), 0x5a);
        // CB 5A 030A
        gbc.setState(0x2add, 0x16a5, 0x4e90, 0x207b, 0x94bb, 0xdd81, 0x1, 0x0);
        gbc.writeMem(0x2add, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x16a5);
        EXPECT(gbc.pc(), 0x2adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 030B
        gbc.setState(0x7a35, 0x303f, 0x75e0, 0xfcf3, 0x4bd8, 0xc6d3, 0x0, 0x1);
        gbc.writeMem(0x7a35, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x303f);
        EXPECT(gbc.pc(), 0x7a37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 030C
        gbc.setState(0xe082, 0x6e65, 0xd280, 0x3944, 0x55f8, 0xf870, 0x0, 0x1);
        gbc.writeMem(0xe082, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6e65);
        EXPECT(gbc.pc(), 0xe084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe082), 0xcb);
        EXPECT(gbc.readMem(0xe083), 0x5a);
        // CB 5A 030D
        gbc.setState(0xc68b, 0x4ca2, 0x50d0, 0xa178, 0x692f, 0x74b1, 0x0, 0x1);
        gbc.writeMem(0xc68b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4ca2);
        EXPECT(gbc.pc(), 0xc68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc68b), 0xcb);
        EXPECT(gbc.readMem(0xc68c), 0x5a);
        // CB 5A 030E
        gbc.setState(0x6dc3, 0x8767, 0x7b60, 0x638b, 0x3f3d, 0xb28d, 0x0, 0x0);
        gbc.writeMem(0x6dc3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8767);
        EXPECT(gbc.pc(), 0x6dc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 030F
        gbc.setState(0xc279, 0xfd2, 0x3fd0, 0xfff2, 0x9ba2, 0xecf3, 0x0, 0x1);
        gbc.writeMem(0xc279, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfd2);
        EXPECT(gbc.pc(), 0xc27b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc279), 0xcb);
        EXPECT(gbc.readMem(0xc27a), 0x5a);
        // CB 5A 0310
        gbc.setState(0x58d9, 0xf0f8, 0x4a90, 0x682d, 0x287e, 0x1ea4, 0x1, 0x0);
        gbc.writeMem(0x58d9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf0f8);
        EXPECT(gbc.pc(), 0x58db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0311
        gbc.setState(0x38cd, 0xed22, 0xaff0, 0x2cdc, 0xeb01, 0xda63, 0x0, 0x0);
        gbc.writeMem(0x38cd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xed22);
        EXPECT(gbc.pc(), 0x38cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0312
        gbc.setState(0xa7de, 0x7426, 0xa760, 0x2489, 0xd604, 0xa82a, 0x0, 0x1);
        gbc.writeMem(0xa7de, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7426);
        EXPECT(gbc.pc(), 0xa7e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7de), 0xcb);
        EXPECT(gbc.readMem(0xa7df), 0x5a);
        // CB 5A 0313
        gbc.setState(0x6415, 0x4fb8, 0xace0, 0xec05, 0xdcea, 0x9075, 0x1, 0x1);
        gbc.writeMem(0x6415, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4fb8);
        EXPECT(gbc.pc(), 0x6417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0314
        gbc.setState(0x656, 0x5a32, 0xa80, 0x6036, 0xaa8b, 0x3585, 0x0, 0x1);
        gbc.writeMem(0x656, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5a32);
        EXPECT(gbc.pc(), 0x658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0315
        gbc.setState(0xa992, 0xcb96, 0x5a40, 0x9437, 0x1a1, 0xd51, 0x0, 0x1);
        gbc.writeMem(0xa992, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xcb96);
        EXPECT(gbc.pc(), 0xa994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa992), 0xcb);
        EXPECT(gbc.readMem(0xa993), 0x5a);
        // CB 5A 0316
        gbc.setState(0x8827, 0xfe3d, 0x91b0, 0x2883, 0xf62c, 0x5a4c, 0x0, 0x0);
        gbc.writeMem(0x8827, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfe3d);
        EXPECT(gbc.pc(), 0x8829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8827), 0xcb);
        EXPECT(gbc.readMem(0x8828), 0x5a);
        // CB 5A 0317
        gbc.setState(0xc17d, 0x8952, 0x3c40, 0xa0d6, 0x9b85, 0xdf3a, 0x0, 0x1);
        gbc.writeMem(0xc17d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8952);
        EXPECT(gbc.pc(), 0xc17f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc17d), 0xcb);
        EXPECT(gbc.readMem(0xc17e), 0x5a);
        // CB 5A 0318
        gbc.setState(0xbdd5, 0xbdad, 0x6670, 0x99be, 0x8adf, 0x179, 0x0, 0x1);
        gbc.writeMem(0xbdd5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbdad);
        EXPECT(gbc.pc(), 0xbdd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdd5), 0xcb);
        EXPECT(gbc.readMem(0xbdd6), 0x5a);
        // CB 5A 0319
        gbc.setState(0x33b1, 0x5157, 0x17e0, 0x4cde, 0x8f, 0xe882, 0x1, 0x1);
        gbc.writeMem(0x33b1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5157);
        EXPECT(gbc.pc(), 0x33b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 031A
        gbc.setState(0xcc97, 0xb66c, 0x6870, 0x392e, 0x811d, 0x65d3, 0x1, 0x0);
        gbc.writeMem(0xcc97, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb66c);
        EXPECT(gbc.pc(), 0xcc99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc97), 0xcb);
        EXPECT(gbc.readMem(0xcc98), 0x5a);
        // CB 5A 031B
        gbc.setState(0x4703, 0x46f4, 0x3eb0, 0x63e9, 0x2946, 0x1c8, 0x0, 0x0);
        gbc.writeMem(0x4703, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x46f4);
        EXPECT(gbc.pc(), 0x4705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 031C
        gbc.setState(0xe758, 0xb1e6, 0x780, 0xb88, 0xea09, 0xf102, 0x0, 0x1);
        gbc.writeMem(0xe758, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb1e6);
        EXPECT(gbc.pc(), 0xe75a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe758), 0xcb);
        EXPECT(gbc.readMem(0xe759), 0x5a);
        // CB 5A 031D
        gbc.setState(0x5d00, 0xd845, 0x5980, 0x21da, 0x2a10, 0x53cd, 0x0, 0x1);
        gbc.writeMem(0x5d00, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd845);
        EXPECT(gbc.pc(), 0x5d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 031E
        gbc.setState(0x33b, 0xbdb8, 0x80f0, 0xce4a, 0x75f2, 0x7c48, 0x1, 0x0);
        gbc.writeMem(0x33b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbdb8);
        EXPECT(gbc.pc(), 0x33d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 031F
        gbc.setState(0x3d84, 0xb33b, 0x6650, 0xb6b2, 0x6f3b, 0x1a2d, 0x0, 0x1);
        gbc.writeMem(0x3d84, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb33b);
        EXPECT(gbc.pc(), 0x3d86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0320
        gbc.setState(0x90f6, 0xf943, 0xa960, 0xd2b1, 0x2ff1, 0xa330, 0x1, 0x1);
        gbc.writeMem(0x90f6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf943);
        EXPECT(gbc.pc(), 0x90f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f6), 0xcb);
        EXPECT(gbc.readMem(0x90f7), 0x5a);
        // CB 5A 0321
        gbc.setState(0xa5e5, 0xdccd, 0x6950, 0x2f79, 0x9e20, 0x83, 0x1, 0x0);
        gbc.writeMem(0xa5e5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdccd);
        EXPECT(gbc.pc(), 0xa5e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5e5), 0xcb);
        EXPECT(gbc.readMem(0xa5e6), 0x5a);
        // CB 5A 0322
        gbc.setState(0x8656, 0x801b, 0xe890, 0x74f9, 0xa06e, 0x47e4, 0x0, 0x1);
        gbc.writeMem(0x8656, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x801b);
        EXPECT(gbc.pc(), 0x8658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8656), 0xcb);
        EXPECT(gbc.readMem(0x8657), 0x5a);
        // CB 5A 0323
        gbc.setState(0x3554, 0xdb87, 0x3750, 0xcca5, 0xed43, 0xe814, 0x0, 0x1);
        gbc.writeMem(0x3554, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdb87);
        EXPECT(gbc.pc(), 0x3556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0324
        gbc.setState(0x9cc7, 0x523e, 0x26c0, 0x16c7, 0xe4fb, 0x19c0, 0x1, 0x1);
        gbc.writeMem(0x9cc7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x523e);
        EXPECT(gbc.pc(), 0x9cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cc7), 0xcb);
        EXPECT(gbc.readMem(0x9cc8), 0x5a);
        // CB 5A 0325
        gbc.setState(0x4882, 0x5f1a, 0xba50, 0x1e15, 0x75f1, 0x211d, 0x0, 0x0);
        gbc.writeMem(0x4882, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5f1a);
        EXPECT(gbc.pc(), 0x4884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0326
        gbc.setState(0x552a, 0xb42c, 0x9470, 0x7846, 0xadb0, 0xf1d3, 0x1, 0x0);
        gbc.writeMem(0x552a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb42c);
        EXPECT(gbc.pc(), 0x552c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0327
        gbc.setState(0x5e33, 0xd4f2, 0x11c0, 0xdf6d, 0x8c60, 0xc458, 0x1, 0x0);
        gbc.writeMem(0x5e33, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd4f2);
        EXPECT(gbc.pc(), 0x5e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0328
        gbc.setState(0x38a4, 0x3e4, 0x8b50, 0x7ef5, 0x991c, 0xc195, 0x1, 0x0);
        gbc.writeMem(0x38a4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3e4);
        EXPECT(gbc.pc(), 0x38a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 032A
        gbc.setState(0x5db, 0x1abe, 0xf960, 0x93, 0x33b8, 0x72fc, 0x1, 0x1);
        gbc.writeMem(0x5db, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1abe);
        EXPECT(gbc.pc(), 0x5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 032B
        gbc.setState(0x4869, 0xa91f, 0x3e40, 0x63ca, 0x87e1, 0x1307, 0x0, 0x0);
        gbc.writeMem(0x4869, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa91f);
        EXPECT(gbc.pc(), 0x486b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 032C
        gbc.setState(0x1110, 0x3165, 0x19b0, 0xa1f4, 0x12e6, 0xa35e, 0x0, 0x0);
        gbc.writeMem(0x1110, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3165);
        EXPECT(gbc.pc(), 0x1112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 032D
        gbc.setState(0x2738, 0xb108, 0x5f0, 0x64aa, 0x11ea, 0xffdd, 0x1, 0x1);
        gbc.writeMem(0x2738, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb108);
        EXPECT(gbc.pc(), 0x273a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 032E
        gbc.setState(0xaf21, 0x30c9, 0x93c0, 0xbb32, 0x8eb8, 0x4e17, 0x1, 0x0);
        gbc.writeMem(0xaf21, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x30c9);
        EXPECT(gbc.pc(), 0xaf23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf21), 0xcb);
        EXPECT(gbc.readMem(0xaf22), 0x5a);
        // CB 5A 032F
        gbc.setState(0x7be8, 0x3dd, 0x4190, 0xce4c, 0xca0, 0x6ec0, 0x0, 0x0);
        gbc.writeMem(0x7be8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3dd);
        EXPECT(gbc.pc(), 0x7bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0330
        gbc.setState(0xaee2, 0x23f2, 0x18c0, 0x7948, 0xe7e1, 0x4f45, 0x1, 0x1);
        gbc.writeMem(0xaee2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x23f2);
        EXPECT(gbc.pc(), 0xaee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee2), 0xcb);
        EXPECT(gbc.readMem(0xaee3), 0x5a);
        // CB 5A 0331
        gbc.setState(0x6a7a, 0x8c2f, 0xe390, 0x353d, 0xb755, 0x857a, 0x0, 0x0);
        gbc.writeMem(0x6a7a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8c2f);
        EXPECT(gbc.pc(), 0x6a7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0332
        gbc.setState(0x5972, 0x6be0, 0x40d0, 0x6970, 0x35dd, 0x6955, 0x0, 0x0);
        gbc.writeMem(0x5972, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6be0);
        EXPECT(gbc.pc(), 0x5974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0333
        gbc.setState(0x3f89, 0x54ca, 0x2a30, 0xdf86, 0x20ee, 0xf9c, 0x0, 0x1);
        gbc.writeMem(0x3f89, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x54ca);
        EXPECT(gbc.pc(), 0x3f8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0334
        gbc.setState(0x6b4d, 0x3112, 0xe170, 0xbbf7, 0x3be2, 0x8593, 0x1, 0x1);
        gbc.writeMem(0x6b4d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3112);
        EXPECT(gbc.pc(), 0x6b4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0335
        gbc.setState(0xe4f0, 0x83c2, 0x9ea0, 0x35cd, 0xf9e7, 0x86ee, 0x0, 0x1);
        gbc.writeMem(0xe4f0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x83c2);
        EXPECT(gbc.pc(), 0xe4f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f0), 0xcb);
        EXPECT(gbc.readMem(0xe4f1), 0x5a);
        // CB 5A 0336
        gbc.setState(0x4369, 0xa0ce, 0x8a10, 0x9eb4, 0xd731, 0x10b9, 0x0, 0x0);
        gbc.writeMem(0x4369, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa0ce);
        EXPECT(gbc.pc(), 0x436b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0337
        gbc.setState(0xd2dd, 0xce6c, 0xc9d0, 0xf4ae, 0x9350, 0x10c4, 0x0, 0x0);
        gbc.writeMem(0xd2dd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xce6c);
        EXPECT(gbc.pc(), 0xd2df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2dd), 0xcb);
        EXPECT(gbc.readMem(0xd2de), 0x5a);
        // CB 5A 0338
        gbc.setState(0xae9f, 0xbc43, 0x6160, 0x9749, 0x27f1, 0x73e5, 0x0, 0x1);
        gbc.writeMem(0xae9f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xbc43);
        EXPECT(gbc.pc(), 0xaea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9f), 0xcb);
        EXPECT(gbc.readMem(0xaea0), 0x5a);
        // CB 5A 0339
        gbc.setState(0x1513, 0x8aa3, 0xec20, 0x969a, 0xf0ba, 0xe7b0, 0x0, 0x0);
        gbc.writeMem(0x1513, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8aa3);
        EXPECT(gbc.pc(), 0x1515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 033A
        gbc.setState(0x1421, 0x9c13, 0x6ac0, 0x243d, 0xd867, 0x3e2c, 0x0, 0x1);
        gbc.writeMem(0x1421, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9c13);
        EXPECT(gbc.pc(), 0x1423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 033B
        gbc.setState(0x1d7a, 0xe2ba, 0x54a0, 0xd3d8, 0x312b, 0xd8d5, 0x1, 0x1);
        gbc.writeMem(0x1d7a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe2ba);
        EXPECT(gbc.pc(), 0x1d7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 033D
        gbc.setState(0x8871, 0xc94f, 0xfc60, 0xfd0, 0xc0fa, 0x1ef6, 0x1, 0x1);
        gbc.writeMem(0x8871, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc94f);
        EXPECT(gbc.pc(), 0x8873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8871), 0xcb);
        EXPECT(gbc.readMem(0x8872), 0x5a);
        // CB 5A 033E
        gbc.setState(0x1eb9, 0xee84, 0x1a50, 0xc565, 0x20cb, 0x7ef3, 0x1, 0x1);
        gbc.writeMem(0x1eb9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xee84);
        EXPECT(gbc.pc(), 0x1ebb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 033F
        gbc.setState(0x5dfa, 0x8b2e, 0x40d0, 0x2bb9, 0x2a5a, 0xa227, 0x1, 0x0);
        gbc.writeMem(0x5dfa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8b2e);
        EXPECT(gbc.pc(), 0x5dfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0340
        gbc.setState(0x2df1, 0xbc5b, 0x650, 0xd293, 0x7d52, 0xb311, 0x1, 0x0);
        gbc.writeMem(0x2df1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbc5b);
        EXPECT(gbc.pc(), 0x2df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0341
        gbc.setState(0x3406, 0x218, 0xffb0, 0xbbb6, 0x8ed5, 0x8601, 0x0, 0x1);
        gbc.writeMem(0x3406, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x218);
        EXPECT(gbc.pc(), 0x3408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0342
        gbc.setState(0x6e50, 0x808d, 0x3a20, 0x416c, 0x2518, 0xc466, 0x0, 0x0);
        gbc.writeMem(0x6e50, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x808d);
        EXPECT(gbc.pc(), 0x6e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0343
        gbc.setState(0xd14f, 0x9e4d, 0xafa0, 0xf9c1, 0xc0c, 0x2663, 0x0, 0x0);
        gbc.writeMem(0xd14f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9e4d);
        EXPECT(gbc.pc(), 0xd151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd14f), 0xcb);
        EXPECT(gbc.readMem(0xd150), 0x5a);
        // CB 5A 0344
        gbc.setState(0xd8b8, 0x3818, 0x2650, 0x5028, 0x5e2d, 0x29c3, 0x0, 0x1);
        gbc.writeMem(0xd8b8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3818);
        EXPECT(gbc.pc(), 0xd8ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8b8), 0xcb);
        EXPECT(gbc.readMem(0xd8b9), 0x5a);
        // CB 5A 0345
        gbc.setState(0x2246, 0xd39e, 0xfb00, 0x3fc, 0xbbc1, 0x843f, 0x0, 0x0);
        gbc.writeMem(0x2246, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd39e);
        EXPECT(gbc.pc(), 0x2248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0346
        gbc.setState(0xbd76, 0x4ee2, 0xb5a0, 0xa0ac, 0x4634, 0xa927, 0x0, 0x1);
        gbc.writeMem(0xbd76, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4ee2);
        EXPECT(gbc.pc(), 0xbd78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd76), 0xcb);
        EXPECT(gbc.readMem(0xbd77), 0x5a);
        // CB 5A 0348
        gbc.setState(0xa54b, 0x7d97, 0x7fa0, 0x32e1, 0x71d8, 0x5124, 0x1, 0x0);
        gbc.writeMem(0xa54b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7d97);
        EXPECT(gbc.pc(), 0xa54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa54b), 0xcb);
        EXPECT(gbc.readMem(0xa54c), 0x5a);
        // CB 5A 0349
        gbc.setState(0x7bea, 0xe140, 0xc860, 0xd3ad, 0xc22a, 0x1b15, 0x0, 0x1);
        gbc.writeMem(0x7bea, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe140);
        EXPECT(gbc.pc(), 0x7bec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 034A
        gbc.setState(0x2a7c, 0x973f, 0x4e50, 0x2fc9, 0xf692, 0xf6a1, 0x1, 0x0);
        gbc.writeMem(0x2a7c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x973f);
        EXPECT(gbc.pc(), 0x2a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 034C
        gbc.setState(0x1570, 0xffa5, 0x1350, 0xb0bb, 0xb602, 0x3eed, 0x1, 0x1);
        gbc.writeMem(0x1570, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xffa5);
        EXPECT(gbc.pc(), 0x1572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 034D
        gbc.setState(0x5c9e, 0x4cf8, 0x6cc0, 0x29b5, 0x2295, 0xa1d, 0x1, 0x0);
        gbc.writeMem(0x5c9e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4cf8);
        EXPECT(gbc.pc(), 0x5ca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 034E
        gbc.setState(0xa97a, 0xef86, 0xc630, 0xfdfc, 0x7c92, 0xdab, 0x1, 0x0);
        gbc.writeMem(0xa97a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xef86);
        EXPECT(gbc.pc(), 0xa97c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa97a), 0xcb);
        EXPECT(gbc.readMem(0xa97b), 0x5a);
        // CB 5A 0351
        gbc.setState(0x8cda, 0x3994, 0x1010, 0xb757, 0x1818, 0x2415, 0x0, 0x0);
        gbc.writeMem(0x8cda, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3994);
        EXPECT(gbc.pc(), 0x8cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cda), 0xcb);
        EXPECT(gbc.readMem(0x8cdb), 0x5a);
        // CB 5A 0352
        gbc.setState(0xcb78, 0x7504, 0xf70, 0x3d2f, 0x7738, 0xcd7b, 0x1, 0x1);
        gbc.writeMem(0xcb78, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7504);
        EXPECT(gbc.pc(), 0xcb7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb78), 0xcb);
        EXPECT(gbc.readMem(0xcb79), 0x5a);
        // CB 5A 0353
        gbc.setState(0x7cc3, 0xc1b0, 0xd140, 0x6abb, 0x46c2, 0xb534, 0x0, 0x0);
        gbc.writeMem(0x7cc3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc1b0);
        EXPECT(gbc.pc(), 0x7cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0354
        gbc.setState(0x7fad, 0xf8fb, 0xaad0, 0xe444, 0x5fde, 0x758b, 0x0, 0x0);
        gbc.writeMem(0x7fad, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf8fb);
        EXPECT(gbc.pc(), 0x7faf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0355
        gbc.setState(0xe7cd, 0xaa19, 0xde70, 0x9422, 0xc81b, 0x935b, 0x1, 0x0);
        gbc.writeMem(0xe7cd, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xaa19);
        EXPECT(gbc.pc(), 0xe7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7cd), 0xcb);
        EXPECT(gbc.readMem(0xe7ce), 0x5a);
        // CB 5A 0356
        gbc.setState(0xb0e9, 0xb5cf, 0x70f0, 0xa860, 0x6d2c, 0xccb8, 0x1, 0x1);
        gbc.writeMem(0xb0e9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb5cf);
        EXPECT(gbc.pc(), 0xb0eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e9), 0xcb);
        EXPECT(gbc.readMem(0xb0ea), 0x5a);
        // CB 5A 0357
        gbc.setState(0x36ab, 0xc4e5, 0x3df0, 0xfb56, 0x5bf7, 0x94a2, 0x1, 0x1);
        gbc.writeMem(0x36ab, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc4e5);
        EXPECT(gbc.pc(), 0x36ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0358
        gbc.setState(0x957c, 0xb1a1, 0xadf0, 0xee32, 0xfcde, 0x356f, 0x1, 0x0);
        gbc.writeMem(0x957c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb1a1);
        EXPECT(gbc.pc(), 0x957e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x957c), 0xcb);
        EXPECT(gbc.readMem(0x957d), 0x5a);
        // CB 5A 0359
        gbc.setState(0x34f5, 0x8d7b, 0xde70, 0xab32, 0x4f04, 0x9f36, 0x0, 0x0);
        gbc.writeMem(0x34f5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8d7b);
        EXPECT(gbc.pc(), 0x34f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 035A
        gbc.setState(0xa94a, 0xb792, 0x1320, 0x18f2, 0xcb97, 0x9335, 0x1, 0x0);
        gbc.writeMem(0xa94a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb792);
        EXPECT(gbc.pc(), 0xa94c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94a), 0xcb);
        EXPECT(gbc.readMem(0xa94b), 0x5a);
        // CB 5A 035B
        gbc.setState(0x33cc, 0x366f, 0x3880, 0x86d5, 0xeb2d, 0xb96, 0x1, 0x1);
        gbc.writeMem(0x33cc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x366f);
        EXPECT(gbc.pc(), 0x33ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 035C
        gbc.setState(0x110, 0xed90, 0xc490, 0x5d5f, 0x1996, 0x67e4, 0x1, 0x0);
        gbc.writeMem(0x110, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xed90);
        EXPECT(gbc.pc(), 0x112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 035E
        gbc.setState(0xaa49, 0x4556, 0x5f70, 0xdd82, 0xc456, 0x3c1a, 0x0, 0x0);
        gbc.writeMem(0xaa49, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4556);
        EXPECT(gbc.pc(), 0xaa4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa49), 0xcb);
        EXPECT(gbc.readMem(0xaa4a), 0x5a);
        // CB 5A 035F
        gbc.setState(0x9fc9, 0xfd4, 0x8cc0, 0x94a4, 0xb980, 0x2ee, 0x1, 0x0);
        gbc.writeMem(0x9fc9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfd4);
        EXPECT(gbc.pc(), 0x9fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fc9), 0xcb);
        EXPECT(gbc.readMem(0x9fca), 0x5a);
        // CB 5A 0360
        gbc.setState(0x1d69, 0xf822, 0x6980, 0x88fe, 0x7821, 0x5343, 0x0, 0x0);
        gbc.writeMem(0x1d69, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf822);
        EXPECT(gbc.pc(), 0x1d6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0361
        gbc.setState(0xd425, 0xda8, 0x9840, 0xb5b8, 0x69bd, 0x89e8, 0x0, 0x0);
        gbc.writeMem(0xd425, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xda8);
        EXPECT(gbc.pc(), 0xd427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd425), 0xcb);
        EXPECT(gbc.readMem(0xd426), 0x5a);
        // CB 5A 0362
        gbc.setState(0x56a7, 0x149d, 0xab70, 0x87c, 0xd141, 0x2248, 0x0, 0x0);
        gbc.writeMem(0x56a7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x149d);
        EXPECT(gbc.pc(), 0x56a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0363
        gbc.setState(0x699f, 0xa56a, 0xee60, 0x577f, 0x5b11, 0x2171, 0x0, 0x1);
        gbc.writeMem(0x699f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa56a);
        EXPECT(gbc.pc(), 0x69a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0364
        gbc.setState(0x485a, 0xceb0, 0xf0b0, 0xb17b, 0x3959, 0x3f34, 0x1, 0x1);
        gbc.writeMem(0x485a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xceb0);
        EXPECT(gbc.pc(), 0x485c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0365
        gbc.setState(0x1afa, 0xff1d, 0xef70, 0xcde0, 0x7955, 0xd24b, 0x0, 0x1);
        gbc.writeMem(0x1afa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xff1d);
        EXPECT(gbc.pc(), 0x1afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0366
        gbc.setState(0x4673, 0x3578, 0x8020, 0xf304, 0x74df, 0x3514, 0x0, 0x0);
        gbc.writeMem(0x4673, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x3578);
        EXPECT(gbc.pc(), 0x4675);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0367
        gbc.setState(0x63f2, 0x7e9a, 0x690, 0x5eb6, 0xceae, 0x425a, 0x1, 0x1);
        gbc.writeMem(0x63f2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7e9a);
        EXPECT(gbc.pc(), 0x63f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0368
        gbc.setState(0x3777, 0x7ce3, 0xf790, 0x6f63, 0x4216, 0x71bc, 0x1, 0x0);
        gbc.writeMem(0x3777, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7ce3);
        EXPECT(gbc.pc(), 0x3779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0369
        gbc.setState(0x1e0c, 0x9612, 0x30f0, 0x76e7, 0x4ada, 0xef3f, 0x0, 0x1);
        gbc.writeMem(0x1e0c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9612);
        EXPECT(gbc.pc(), 0x1e0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 036A
        gbc.setState(0x1c40, 0x3cc0, 0x8b60, 0xc2c5, 0xa9e7, 0xf29e, 0x1, 0x0);
        gbc.writeMem(0x1c40, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3cc0);
        EXPECT(gbc.pc(), 0x1c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 036B
        gbc.setState(0xa870, 0x7281, 0x6ba0, 0x4ddc, 0x199f, 0x541a, 0x1, 0x1);
        gbc.writeMem(0xa870, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7281);
        EXPECT(gbc.pc(), 0xa872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa870), 0xcb);
        EXPECT(gbc.readMem(0xa871), 0x5a);
        // CB 5A 036D
        gbc.setState(0xa0e0, 0x758d, 0x4d40, 0xc10b, 0x47c9, 0x497b, 0x1, 0x0);
        gbc.writeMem(0xa0e0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x758d);
        EXPECT(gbc.pc(), 0xa0e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0e0), 0xcb);
        EXPECT(gbc.readMem(0xa0e1), 0x5a);
        // CB 5A 036E
        gbc.setState(0x1676, 0x302b, 0x50e0, 0x8c3a, 0x83e0, 0xbaf1, 0x1, 0x1);
        gbc.writeMem(0x1676, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x302b);
        EXPECT(gbc.pc(), 0x1678);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 036F
        gbc.setState(0x97da, 0x1c5c, 0xebf0, 0x9ee1, 0x3f4f, 0xeeed, 0x0, 0x1);
        gbc.writeMem(0x97da, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1c5c);
        EXPECT(gbc.pc(), 0x97dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97da), 0xcb);
        EXPECT(gbc.readMem(0x97db), 0x5a);
        // CB 5A 0370
        gbc.setState(0x8c69, 0x3ebe, 0x7d90, 0x39d4, 0x39ca, 0xfafd, 0x0, 0x1);
        gbc.writeMem(0x8c69, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3ebe);
        EXPECT(gbc.pc(), 0x8c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c69), 0xcb);
        EXPECT(gbc.readMem(0x8c6a), 0x5a);
        // CB 5A 0371
        gbc.setState(0xcaf1, 0x88e3, 0xd750, 0x9d79, 0x67a8, 0xe1b2, 0x1, 0x0);
        gbc.writeMem(0xcaf1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x88e3);
        EXPECT(gbc.pc(), 0xcaf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaf1), 0xcb);
        EXPECT(gbc.readMem(0xcaf2), 0x5a);
        // CB 5A 0372
        gbc.setState(0x3c60, 0xca90, 0x9540, 0x5e72, 0x59a6, 0x44db, 0x0, 0x0);
        gbc.writeMem(0x3c60, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xca90);
        EXPECT(gbc.pc(), 0x3c62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0373
        gbc.setState(0x223, 0x3da0, 0x43b0, 0x7b8e, 0xc277, 0xd531, 0x1, 0x1);
        gbc.writeMem(0x223, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3da0);
        EXPECT(gbc.pc(), 0x225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0374
        gbc.setState(0x8f79, 0xb969, 0x9e60, 0x1884, 0x5bcf, 0xf869, 0x0, 0x0);
        gbc.writeMem(0x8f79, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb969);
        EXPECT(gbc.pc(), 0x8f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f79), 0xcb);
        EXPECT(gbc.readMem(0x8f7a), 0x5a);
        // CB 5A 0375
        gbc.setState(0xee01, 0xd9cb, 0x2e20, 0x99a8, 0x26f8, 0x6966, 0x0, 0x0);
        gbc.writeMem(0xee01, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd9cb);
        EXPECT(gbc.pc(), 0xee03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee01), 0xcb);
        EXPECT(gbc.readMem(0xee02), 0x5a);
        // CB 5A 0376
        gbc.setState(0x8297, 0x186f, 0x1650, 0xd105, 0xfcb9, 0xafab, 0x1, 0x0);
        gbc.writeMem(0x8297, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x186f);
        EXPECT(gbc.pc(), 0x8299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8297), 0xcb);
        EXPECT(gbc.readMem(0x8298), 0x5a);
        // CB 5A 0377
        gbc.setState(0x8042, 0x344c, 0xf970, 0x73c9, 0xb60e, 0xa532, 0x0, 0x1);
        gbc.writeMem(0x8042, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x344c);
        EXPECT(gbc.pc(), 0x8044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8042), 0xcb);
        EXPECT(gbc.readMem(0x8043), 0x5a);
        // CB 5A 0378
        gbc.setState(0x5287, 0x78c4, 0xb030, 0x3d7, 0xc49c, 0x3ed5, 0x0, 0x0);
        gbc.writeMem(0x5287, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x78c4);
        EXPECT(gbc.pc(), 0x5289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0379
        gbc.setState(0xe79d, 0x51f3, 0xdf00, 0x53c3, 0x8c38, 0xcbd7, 0x1, 0x1);
        gbc.writeMem(0xe79d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x51f3);
        EXPECT(gbc.pc(), 0xe79f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe79d), 0xcb);
        EXPECT(gbc.readMem(0xe79e), 0x5a);
        // CB 5A 037A
        gbc.setState(0x3ae0, 0xb30a, 0xe650, 0xe9e7, 0x8e41, 0xc25e, 0x0, 0x1);
        gbc.writeMem(0x3ae0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb30a);
        EXPECT(gbc.pc(), 0x3ae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 037B
        gbc.setState(0xe3eb, 0xc7f1, 0x28a0, 0xeecf, 0x4665, 0x7141, 0x0, 0x0);
        gbc.writeMem(0xe3eb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc7f1);
        EXPECT(gbc.pc(), 0xe3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3eb), 0xcb);
        EXPECT(gbc.readMem(0xe3ec), 0x5a);
        // CB 5A 037D
        gbc.setState(0x46d2, 0x6d4d, 0x94d0, 0x838b, 0xaeff, 0x46bc, 0x1, 0x1);
        gbc.writeMem(0x46d2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6d4d);
        EXPECT(gbc.pc(), 0x46d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 037E
        gbc.setState(0x5238, 0x470e, 0x17a0, 0x891c, 0xdc93, 0x3b19, 0x0, 0x1);
        gbc.writeMem(0x5238, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x470e);
        EXPECT(gbc.pc(), 0x523a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 037F
        gbc.setState(0x9197, 0x7e2f, 0x5bb0, 0xd013, 0x1a55, 0x1eda, 0x1, 0x1);
        gbc.writeMem(0x9197, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7e2f);
        EXPECT(gbc.pc(), 0x9199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9197), 0xcb);
        EXPECT(gbc.readMem(0x9198), 0x5a);
        // CB 5A 0380
        gbc.setState(0x60da, 0x9bef, 0x67f0, 0x5e81, 0xc5c7, 0x22f3, 0x0, 0x1);
        gbc.writeMem(0x60da, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9bef);
        EXPECT(gbc.pc(), 0x60dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0381
        gbc.setState(0x22e2, 0x948b, 0x92a0, 0xda37, 0x5510, 0xe37d, 0x0, 0x1);
        gbc.writeMem(0x22e2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x948b);
        EXPECT(gbc.pc(), 0x22e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0382
        gbc.setState(0x16a0, 0xad2, 0x3090, 0x308b, 0x6d76, 0x8dab, 0x0, 0x1);
        gbc.writeMem(0x16a0, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xad2);
        EXPECT(gbc.pc(), 0x16a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0384
        gbc.setState(0x48cf, 0x9d74, 0x50e0, 0x9bdd, 0x6d05, 0x6629, 0x0, 0x0);
        gbc.writeMem(0x48cf, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9d74);
        EXPECT(gbc.pc(), 0x48d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0385
        gbc.setState(0xabde, 0x5ef2, 0x94f0, 0x9d8, 0xced5, 0x86cd, 0x1, 0x0);
        gbc.writeMem(0xabde, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5ef2);
        EXPECT(gbc.pc(), 0xabe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabde), 0xcb);
        EXPECT(gbc.readMem(0xabdf), 0x5a);
        // CB 5A 0386
        gbc.setState(0xb41d, 0xc51e, 0x9620, 0xb511, 0xee17, 0xd7bf, 0x1, 0x0);
        gbc.writeMem(0xb41d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc51e);
        EXPECT(gbc.pc(), 0xb41f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41d), 0xcb);
        EXPECT(gbc.readMem(0xb41e), 0x5a);
        // CB 5A 0387
        gbc.setState(0x691d, 0x4b10, 0x8940, 0xc9b3, 0x6043, 0x241, 0x1, 0x1);
        gbc.writeMem(0x691d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4b10);
        EXPECT(gbc.pc(), 0x691f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0388
        gbc.setState(0xa7d5, 0x4831, 0xea40, 0x5c02, 0x2fed, 0x9982, 0x1, 0x1);
        gbc.writeMem(0xa7d5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4831);
        EXPECT(gbc.pc(), 0xa7d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d5), 0xcb);
        EXPECT(gbc.readMem(0xa7d6), 0x5a);
        // CB 5A 0389
        gbc.setState(0x258b, 0x2778, 0xcd70, 0x2e14, 0xcd89, 0xf7a2, 0x1, 0x0);
        gbc.writeMem(0x258b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2778);
        EXPECT(gbc.pc(), 0x258d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 038A
        gbc.setState(0x8e9f, 0xab70, 0xd930, 0x576c, 0xa57f, 0x178e, 0x0, 0x0);
        gbc.writeMem(0x8e9f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xab70);
        EXPECT(gbc.pc(), 0x8ea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e9f), 0xcb);
        EXPECT(gbc.readMem(0x8ea0), 0x5a);
        // CB 5A 038B
        gbc.setState(0x136b, 0x3650, 0x2430, 0x64a2, 0xd9e7, 0x708f, 0x0, 0x0);
        gbc.writeMem(0x136b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3650);
        EXPECT(gbc.pc(), 0x136d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 038C
        gbc.setState(0xe92f, 0xc1d, 0x2c10, 0xd50, 0x672e, 0xf87b, 0x1, 0x0);
        gbc.writeMem(0xe92f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc1d);
        EXPECT(gbc.pc(), 0xe931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe92f), 0xcb);
        EXPECT(gbc.readMem(0xe930), 0x5a);
        // CB 5A 038D
        gbc.setState(0xb478, 0x275d, 0x94a0, 0xa7de, 0xbfbe, 0x7271, 0x0, 0x0);
        gbc.writeMem(0xb478, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x275d);
        EXPECT(gbc.pc(), 0xb47a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb478), 0xcb);
        EXPECT(gbc.readMem(0xb479), 0x5a);
        // CB 5A 038E
        gbc.setState(0x225a, 0xd1e, 0x75a0, 0x65f0, 0x96ae, 0xa148, 0x1, 0x0);
        gbc.writeMem(0x225a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd1e);
        EXPECT(gbc.pc(), 0x225c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 038F
        gbc.setState(0x5702, 0x79bf, 0x4a40, 0x2eab, 0xd388, 0x3bdc, 0x0, 0x0);
        gbc.writeMem(0x5702, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x79bf);
        EXPECT(gbc.pc(), 0x5704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0390
        gbc.setState(0xac9d, 0x8a67, 0xc2d0, 0x55f5, 0x3328, 0xacf8, 0x0, 0x1);
        gbc.writeMem(0xac9d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8a67);
        EXPECT(gbc.pc(), 0xac9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9d), 0xcb);
        EXPECT(gbc.readMem(0xac9e), 0x5a);
        // CB 5A 0391
        gbc.setState(0x3ff7, 0xcee, 0x7e40, 0x6ed4, 0x7617, 0xc62c, 0x0, 0x0);
        gbc.writeMem(0x3ff7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xcee);
        EXPECT(gbc.pc(), 0x3ff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0392
        gbc.setState(0x50e1, 0xcedb, 0xc1f0, 0xdc0, 0xcec8, 0x7023, 0x0, 0x1);
        gbc.writeMem(0x50e1, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xcedb);
        EXPECT(gbc.pc(), 0x50e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0393
        gbc.setState(0xefa3, 0x9379, 0xbee0, 0x350f, 0x4bae, 0x6478, 0x1, 0x0);
        gbc.writeMem(0xefa3, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9379);
        EXPECT(gbc.pc(), 0xefa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefa3), 0xcb);
        EXPECT(gbc.readMem(0xefa4), 0x5a);
        // CB 5A 0394
        gbc.setState(0x24ab, 0xd3de, 0xa6d0, 0xcda2, 0x7e04, 0xd0b1, 0x1, 0x1);
        gbc.writeMem(0x24ab, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd3de);
        EXPECT(gbc.pc(), 0x24ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0395
        gbc.setState(0xd0c2, 0xee0f, 0x4bd0, 0x4b0b, 0xe79f, 0xe844, 0x1, 0x1);
        gbc.writeMem(0xd0c2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xee0f);
        EXPECT(gbc.pc(), 0xd0c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0c2), 0xcb);
        EXPECT(gbc.readMem(0xd0c3), 0x5a);
        // CB 5A 0396
        gbc.setState(0x8181, 0x966b, 0x8040, 0xcfdf, 0x3ef4, 0x603b, 0x0, 0x1);
        gbc.writeMem(0x8181, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x966b);
        EXPECT(gbc.pc(), 0x8183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8181), 0xcb);
        EXPECT(gbc.readMem(0x8182), 0x5a);
        // CB 5A 0397
        gbc.setState(0x592c, 0xc3b7, 0x57d0, 0x906e, 0xcd42, 0xc95e, 0x1, 0x1);
        gbc.writeMem(0x592c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc3b7);
        EXPECT(gbc.pc(), 0x592e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 0398
        gbc.setState(0x2324, 0x6775, 0x1f80, 0x34f3, 0xee8, 0x64ef, 0x1, 0x1);
        gbc.writeMem(0x2324, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6775);
        EXPECT(gbc.pc(), 0x2326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 0399
        gbc.setState(0xd345, 0x65b, 0x7340, 0xabd6, 0xd281, 0xeae3, 0x0, 0x0);
        gbc.writeMem(0xd345, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x65b);
        EXPECT(gbc.pc(), 0xd347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd345), 0xcb);
        EXPECT(gbc.readMem(0xd346), 0x5a);
        // CB 5A 039A
        gbc.setState(0xb861, 0x935e, 0xf710, 0x43bf, 0x346f, 0x25bc, 0x0, 0x1);
        gbc.writeMem(0xb861, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x935e);
        EXPECT(gbc.pc(), 0xb863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb861), 0xcb);
        EXPECT(gbc.readMem(0xb862), 0x5a);
        // CB 5A 039B
        gbc.setState(0xd426, 0x9bf8, 0xb330, 0x63ce, 0x3f3f, 0x8d7d, 0x0, 0x1);
        gbc.writeMem(0xd426, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9bf8);
        EXPECT(gbc.pc(), 0xd428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd426), 0xcb);
        EXPECT(gbc.readMem(0xd427), 0x5a);
        // CB 5A 039C
        gbc.setState(0x699, 0x58ad, 0x9900, 0x4ad, 0xa5d2, 0xccdf, 0x0, 0x1);
        gbc.writeMem(0x699, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x58ad);
        EXPECT(gbc.pc(), 0x69b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 039D
        gbc.setState(0xa149, 0xe44c, 0x6b90, 0xddfd, 0x7c03, 0x5b5b, 0x0, 0x0);
        gbc.writeMem(0xa149, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe44c);
        EXPECT(gbc.pc(), 0xa14b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa149), 0xcb);
        EXPECT(gbc.readMem(0xa14a), 0x5a);
        // CB 5A 039E
        gbc.setState(0x753, 0x2845, 0x9160, 0x4ecf, 0xfb76, 0x45b5, 0x0, 0x1);
        gbc.writeMem(0x753, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2845);
        EXPECT(gbc.pc(), 0x755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 039F
        gbc.setState(0xb954, 0x6f3a, 0x830, 0x9be9, 0x72a3, 0x894, 0x0, 0x1);
        gbc.writeMem(0xb954, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6f3a);
        EXPECT(gbc.pc(), 0xb956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb954), 0xcb);
        EXPECT(gbc.readMem(0xb955), 0x5a);
        // CB 5A 03A0
        gbc.setState(0xba08, 0xf2e, 0xdb60, 0xcf66, 0xc86c, 0xc69d, 0x0, 0x0);
        gbc.writeMem(0xba08, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf2e);
        EXPECT(gbc.pc(), 0xba0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba08), 0xcb);
        EXPECT(gbc.readMem(0xba09), 0x5a);
        // CB 5A 03A1
        gbc.setState(0xbe18, 0x5851, 0x2b30, 0x69e7, 0xca97, 0x466c, 0x0, 0x1);
        gbc.writeMem(0xbe18, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5851);
        EXPECT(gbc.pc(), 0xbe1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe18), 0xcb);
        EXPECT(gbc.readMem(0xbe19), 0x5a);
        // CB 5A 03A2
        gbc.setState(0x737e, 0x9743, 0x7440, 0x456e, 0x1224, 0x4cf5, 0x0, 0x0);
        gbc.writeMem(0x737e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9743);
        EXPECT(gbc.pc(), 0x7380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03A3
        gbc.setState(0x5c10, 0xb36f, 0xe370, 0xc186, 0x9bd4, 0x171f, 0x0, 0x1);
        gbc.writeMem(0x5c10, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb36f);
        EXPECT(gbc.pc(), 0x5c12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03A4
        gbc.setState(0x505e, 0x87fa, 0x6a70, 0x7c92, 0x8c03, 0xf17e, 0x0, 0x0);
        gbc.writeMem(0x505e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x87fa);
        EXPECT(gbc.pc(), 0x5060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03A5
        gbc.setState(0xea5a, 0x52cf, 0xe260, 0x5499, 0xd7bb, 0xaf2f, 0x1, 0x0);
        gbc.writeMem(0xea5a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x52cf);
        EXPECT(gbc.pc(), 0xea5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea5a), 0xcb);
        EXPECT(gbc.readMem(0xea5b), 0x5a);
        // CB 5A 03A6
        gbc.setState(0x56c7, 0xee65, 0x6520, 0x7d8f, 0x765e, 0x10f4, 0x0, 0x1);
        gbc.writeMem(0x56c7, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xee65);
        EXPECT(gbc.pc(), 0x56c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03A7
        gbc.setState(0xaba2, 0x7b39, 0x4fd0, 0x2376, 0x438f, 0x4dc8, 0x1, 0x0);
        gbc.writeMem(0xaba2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7b39);
        EXPECT(gbc.pc(), 0xaba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaba2), 0xcb);
        EXPECT(gbc.readMem(0xaba3), 0x5a);
        // CB 5A 03A8
        gbc.setState(0x6d12, 0x7fa4, 0x8ce0, 0x2b83, 0x6f90, 0x3a75, 0x0, 0x1);
        gbc.writeMem(0x6d12, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7fa4);
        EXPECT(gbc.pc(), 0x6d14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03A9
        gbc.setState(0x8dd5, 0x26a2, 0xade0, 0x2ef5, 0x2d86, 0xbc7a, 0x0, 0x0);
        gbc.writeMem(0x8dd5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x26a2);
        EXPECT(gbc.pc(), 0x8dd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd5), 0xcb);
        EXPECT(gbc.readMem(0x8dd6), 0x5a);
        // CB 5A 03AA
        gbc.setState(0xb51e, 0x29e4, 0x1bc0, 0x38f3, 0x7185, 0xe470, 0x1, 0x0);
        gbc.writeMem(0xb51e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x29e4);
        EXPECT(gbc.pc(), 0xb520);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb51e), 0xcb);
        EXPECT(gbc.readMem(0xb51f), 0x5a);
        // CB 5A 03AB
        gbc.setState(0x7602, 0x2b85, 0xf0, 0x80bf, 0x3cb4, 0x5f18, 0x0, 0x0);
        gbc.writeMem(0x7602, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2b85);
        EXPECT(gbc.pc(), 0x7604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03AC
        gbc.setState(0x8fa8, 0xb7b4, 0x58c0, 0xeee6, 0x8621, 0x2ae, 0x0, 0x1);
        gbc.writeMem(0x8fa8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb7b4);
        EXPECT(gbc.pc(), 0x8faa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa8), 0xcb);
        EXPECT(gbc.readMem(0x8fa9), 0x5a);
        // CB 5A 03AD
        gbc.setState(0x1f8c, 0x91cb, 0xd900, 0x3dfb, 0xc91f, 0x90d6, 0x1, 0x0);
        gbc.writeMem(0x1f8c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x91cb);
        EXPECT(gbc.pc(), 0x1f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03AE
        gbc.setState(0xab91, 0xc09f, 0xe780, 0x2c4e, 0x7aab, 0x7f15, 0x0, 0x1);
        gbc.writeMem(0xab91, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc09f);
        EXPECT(gbc.pc(), 0xab93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab91), 0xcb);
        EXPECT(gbc.readMem(0xab92), 0x5a);
        // CB 5A 03AF
        gbc.setState(0x952d, 0x2b8, 0xfb40, 0x66b4, 0x7d02, 0x76e3, 0x1, 0x0);
        gbc.writeMem(0x952d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2b8);
        EXPECT(gbc.pc(), 0x952f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952d), 0xcb);
        EXPECT(gbc.readMem(0x952e), 0x5a);
        // CB 5A 03B0
        gbc.setState(0x7612, 0x89d4, 0x4910, 0x1e97, 0x125b, 0x5e1b, 0x1, 0x1);
        gbc.writeMem(0x7612, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x89d4);
        EXPECT(gbc.pc(), 0x7614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03B1
        gbc.setState(0x2a2f, 0x4259, 0x4520, 0x5d3c, 0x4c89, 0x7bd5, 0x1, 0x0);
        gbc.writeMem(0x2a2f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4259);
        EXPECT(gbc.pc(), 0x2a31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03B2
        gbc.setState(0x135, 0x2d3f, 0xd880, 0xc87e, 0xc051, 0x4fe7, 0x1, 0x0);
        gbc.writeMem(0x135, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2d3f);
        EXPECT(gbc.pc(), 0x137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03B3
        gbc.setState(0xa864, 0x634f, 0x59b0, 0xd98c, 0x854f, 0x9628, 0x0, 0x1);
        gbc.writeMem(0xa864, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x634f);
        EXPECT(gbc.pc(), 0xa866);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa864), 0xcb);
        EXPECT(gbc.readMem(0xa865), 0x5a);
        // CB 5A 03B4
        gbc.setState(0x58c9, 0xe327, 0xd990, 0x3957, 0xb9f, 0x69de, 0x1, 0x1);
        gbc.writeMem(0x58c9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe327);
        EXPECT(gbc.pc(), 0x58cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03B5
        gbc.setState(0xeab6, 0x52fa, 0x1520, 0x2f3c, 0x4a11, 0x92da, 0x1, 0x0);
        gbc.writeMem(0xeab6, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x52fa);
        EXPECT(gbc.pc(), 0xeab8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab6), 0xcb);
        EXPECT(gbc.readMem(0xeab7), 0x5a);
        // CB 5A 03B6
        gbc.setState(0xc586, 0x2e8d, 0x38e0, 0x7f8b, 0x5497, 0x5faf, 0x1, 0x0);
        gbc.writeMem(0xc586, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2e8d);
        EXPECT(gbc.pc(), 0xc588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc586), 0xcb);
        EXPECT(gbc.readMem(0xc587), 0x5a);
        // CB 5A 03B7
        gbc.setState(0x6efa, 0x89da, 0xeb50, 0xd66a, 0xbc86, 0x38a, 0x0, 0x0);
        gbc.writeMem(0x6efa, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x89da);
        EXPECT(gbc.pc(), 0x6efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03B8
        gbc.setState(0xeaf4, 0xd1b6, 0xcd10, 0xf5f6, 0x32a0, 0x25f7, 0x0, 0x1);
        gbc.writeMem(0xeaf4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd1b6);
        EXPECT(gbc.pc(), 0xeaf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf4), 0xcb);
        EXPECT(gbc.readMem(0xeaf5), 0x5a);
        // CB 5A 03B9
        gbc.setState(0xd258, 0xfe36, 0x600, 0xe246, 0x2e9, 0xf32f, 0x0, 0x1);
        gbc.writeMem(0xd258, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfe36);
        EXPECT(gbc.pc(), 0xd25a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd258), 0xcb);
        EXPECT(gbc.readMem(0xd259), 0x5a);
        // CB 5A 03BA
        gbc.setState(0xa77, 0x80bb, 0x900, 0xb366, 0xc393, 0xfeb1, 0x0, 0x1);
        gbc.writeMem(0xa77, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x80bb);
        EXPECT(gbc.pc(), 0xa79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03BB
        gbc.setState(0x7da, 0x6619, 0xf0e0, 0x51b9, 0x7703, 0xc8b7, 0x0, 0x0);
        gbc.writeMem(0x7da, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6619);
        EXPECT(gbc.pc(), 0x7dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03BC
        gbc.setState(0x97ac, 0x5cc7, 0x65d0, 0xfbae, 0x1ec0, 0x3228, 0x1, 0x0);
        gbc.writeMem(0x97ac, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5cc7);
        EXPECT(gbc.pc(), 0x97ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97ac), 0xcb);
        EXPECT(gbc.readMem(0x97ad), 0x5a);
        // CB 5A 03BD
        gbc.setState(0x399b, 0x9ba8, 0xf920, 0x7aa1, 0xe97f, 0xb339, 0x0, 0x1);
        gbc.writeMem(0x399b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9ba8);
        EXPECT(gbc.pc(), 0x399d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03BE
        gbc.setState(0x82f4, 0x52d, 0x43d0, 0x3088, 0x1ea5, 0xed0c, 0x0, 0x1);
        gbc.writeMem(0x82f4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x52d);
        EXPECT(gbc.pc(), 0x82f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82f4), 0xcb);
        EXPECT(gbc.readMem(0x82f5), 0x5a);
        // CB 5A 03BF
        gbc.setState(0xe6fe, 0x4d5d, 0xbd60, 0xd9f4, 0xbb6, 0x1370, 0x1, 0x1);
        gbc.writeMem(0xe6fe, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4d5d);
        EXPECT(gbc.pc(), 0xe700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6fe), 0xcb);
        EXPECT(gbc.readMem(0xe6ff), 0x5a);
        // CB 5A 03C0
        gbc.setState(0xec2a, 0x1965, 0x9e0, 0x2334, 0xf5d4, 0x50e6, 0x0, 0x0);
        gbc.writeMem(0xec2a, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1965);
        EXPECT(gbc.pc(), 0xec2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec2a), 0xcb);
        EXPECT(gbc.readMem(0xec2b), 0x5a);
        // CB 5A 03C1
        gbc.setState(0xa01c, 0x3166, 0xcd90, 0xb57d, 0xb43a, 0x357c, 0x1, 0x1);
        gbc.writeMem(0xa01c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3166);
        EXPECT(gbc.pc(), 0xa01e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa01c), 0xcb);
        EXPECT(gbc.readMem(0xa01d), 0x5a);
        // CB 5A 03C2
        gbc.setState(0x9df5, 0x70e8, 0x5ae0, 0xefbb, 0xf08a, 0x91f9, 0x0, 0x0);
        gbc.writeMem(0x9df5, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x70e8);
        EXPECT(gbc.pc(), 0x9df7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df5), 0xcb);
        EXPECT(gbc.readMem(0x9df6), 0x5a);
        // CB 5A 03C3
        gbc.setState(0xbb93, 0x4b00, 0xf0e0, 0xcec9, 0xd72a, 0x1804, 0x1, 0x1);
        gbc.writeMem(0xbb93, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4b00);
        EXPECT(gbc.pc(), 0xbb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb93), 0xcb);
        EXPECT(gbc.readMem(0xbb94), 0x5a);
        // CB 5A 03C4
        gbc.setState(0x1cba, 0xb66d, 0x8140, 0x5c5a, 0xb4ad, 0x19c6, 0x1, 0x1);
        gbc.writeMem(0x1cba, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb66d);
        EXPECT(gbc.pc(), 0x1cbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03C5
        gbc.setState(0x142c, 0xfaa, 0x8620, 0x8315, 0x2d84, 0x5025, 0x0, 0x1);
        gbc.writeMem(0x142c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfaa);
        EXPECT(gbc.pc(), 0x142e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03C6
        gbc.setState(0x2cf4, 0xdae3, 0xfab0, 0x4489, 0x3db0, 0xd868, 0x0, 0x1);
        gbc.writeMem(0x2cf4, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xdae3);
        EXPECT(gbc.pc(), 0x2cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03C7
        gbc.setState(0xe0bb, 0x6c9c, 0x6640, 0x7463, 0xcdf8, 0x3473, 0x0, 0x0);
        gbc.writeMem(0xe0bb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6c9c);
        EXPECT(gbc.pc(), 0xe0bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0bb), 0xcb);
        EXPECT(gbc.readMem(0xe0bc), 0x5a);
        // CB 5A 03C8
        gbc.setState(0x17e, 0xeb81, 0x3260, 0x69f8, 0xd776, 0xf05c, 0x0, 0x0);
        gbc.writeMem(0x17e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xeb81);
        EXPECT(gbc.pc(), 0x180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03C9
        gbc.setState(0x877c, 0xd6ea, 0xd990, 0x322, 0xf696, 0x3db9, 0x0, 0x0);
        gbc.writeMem(0x877c, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd6ea);
        EXPECT(gbc.pc(), 0x877e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877c), 0xcb);
        EXPECT(gbc.readMem(0x877d), 0x5a);
        // CB 5A 03CA
        gbc.setState(0x3c1f, 0xb19e, 0xc420, 0x39b8, 0xcefb, 0x5687, 0x1, 0x1);
        gbc.writeMem(0x3c1f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb19e);
        EXPECT(gbc.pc(), 0x3c21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03CB
        gbc.setState(0x1830, 0x895f, 0x3740, 0x9b97, 0x67d7, 0x1ec0, 0x0, 0x1);
        gbc.writeMem(0x1830, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x895f);
        EXPECT(gbc.pc(), 0x1832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03CD
        gbc.setState(0x99ab, 0xd7e0, 0x17a0, 0x79be, 0x4f5f, 0x1fdf, 0x1, 0x0);
        gbc.writeMem(0x99ab, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd7e0);
        EXPECT(gbc.pc(), 0x99ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ab), 0xcb);
        EXPECT(gbc.readMem(0x99ac), 0x5a);
        // CB 5A 03CE
        gbc.setState(0x9b8, 0xfc4, 0x2650, 0x5014, 0xcd74, 0x6740, 0x1, 0x1);
        gbc.writeMem(0x9b8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfc4);
        EXPECT(gbc.pc(), 0x9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03CF
        gbc.setState(0x43f8, 0x38cd, 0xf550, 0xd4fc, 0xeddf, 0x4feb, 0x1, 0x0);
        gbc.writeMem(0x43f8, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x38cd);
        EXPECT(gbc.pc(), 0x43fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03D0
        gbc.setState(0x254f, 0xe8d3, 0x7200, 0x6b9, 0x97fe, 0xe538, 0x1, 0x0);
        gbc.writeMem(0x254f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe8d3);
        EXPECT(gbc.pc(), 0x2551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03D1
        gbc.setState(0xabca, 0x21e7, 0x9c0, 0x914e, 0x6a0e, 0x288f, 0x1, 0x0);
        gbc.writeMem(0xabca, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x21e7);
        EXPECT(gbc.pc(), 0xabcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabca), 0xcb);
        EXPECT(gbc.readMem(0xabcb), 0x5a);
        // CB 5A 03D3
        gbc.setState(0x1e33, 0x16ad, 0xafd0, 0xd5f9, 0x8cb8, 0x7b14, 0x1, 0x0);
        gbc.writeMem(0x1e33, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x16ad);
        EXPECT(gbc.pc(), 0x1e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03D4
        gbc.setState(0xdd20, 0xe6be, 0x39b0, 0xd1a7, 0xd2fe, 0x22f0, 0x0, 0x1);
        gbc.writeMem(0xdd20, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe6be);
        EXPECT(gbc.pc(), 0xdd22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd20), 0xcb);
        EXPECT(gbc.readMem(0xdd21), 0x5a);
        // CB 5A 03D5
        gbc.setState(0x63db, 0x11ba, 0x5840, 0x8f8, 0x8015, 0x248, 0x1, 0x1);
        gbc.writeMem(0x63db, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x11ba);
        EXPECT(gbc.pc(), 0x63dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03D6
        gbc.setState(0x31c2, 0x349d, 0xaf10, 0x82e6, 0xa9f3, 0x35a3, 0x0, 0x1);
        gbc.writeMem(0x31c2, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x349d);
        EXPECT(gbc.pc(), 0x31c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03D7
        gbc.setState(0x5a1f, 0x179f, 0xca70, 0xc5b9, 0xb9c3, 0xc74b, 0x1, 0x0);
        gbc.writeMem(0x5a1f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x179f);
        EXPECT(gbc.pc(), 0x5a21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03D8
        gbc.setState(0x42fc, 0xb757, 0x6d60, 0x4b16, 0x4631, 0xf704, 0x0, 0x1);
        gbc.writeMem(0x42fc, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb757);
        EXPECT(gbc.pc(), 0x42fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03D9
        gbc.setState(0x195, 0xd6b5, 0x6a00, 0x6dad, 0x4aea, 0xa6e0, 0x1, 0x0);
        gbc.writeMem(0x195, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd6b5);
        EXPECT(gbc.pc(), 0x197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03DA
        gbc.setState(0x92ab, 0x5a74, 0x6700, 0xb503, 0xd5c2, 0xd45b, 0x1, 0x0);
        gbc.writeMem(0x92ab, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5a74);
        EXPECT(gbc.pc(), 0x92ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ab), 0xcb);
        EXPECT(gbc.readMem(0x92ac), 0x5a);
        // CB 5A 03DB
        gbc.setState(0x18af, 0x3888, 0x7b90, 0x5344, 0x288c, 0x9576, 0x0, 0x0);
        gbc.writeMem(0x18af, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3888);
        EXPECT(gbc.pc(), 0x18b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03DC
        gbc.setState(0xb011, 0x74ed, 0xe8c0, 0x5cc2, 0x3e9c, 0x26ec, 0x1, 0x1);
        gbc.writeMem(0xb011, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x74ed);
        EXPECT(gbc.pc(), 0xb013);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb011), 0xcb);
        EXPECT(gbc.readMem(0xb012), 0x5a);
        // CB 5A 03DD
        gbc.setState(0x2a54, 0x10be, 0xca70, 0x18bb, 0x5ef5, 0x7fa5, 0x1, 0x1);
        gbc.writeMem(0x2a54, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x10be);
        EXPECT(gbc.pc(), 0x2a56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03DE
        gbc.setState(0xbe39, 0x5dc6, 0xe330, 0x8fc7, 0x844c, 0x669a, 0x0, 0x1);
        gbc.writeMem(0xbe39, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5dc6);
        EXPECT(gbc.pc(), 0xbe3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe39), 0xcb);
        EXPECT(gbc.readMem(0xbe3a), 0x5a);
        // CB 5A 03DF
        gbc.setState(0x42ca, 0x9cd5, 0x3b0, 0xb35f, 0x4762, 0x53fc, 0x1, 0x1);
        gbc.writeMem(0x42ca, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9cd5);
        EXPECT(gbc.pc(), 0x42cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03E0
        gbc.setState(0x267b, 0xdc18, 0xb4f0, 0x6008, 0x2978, 0x6258, 0x1, 0x0);
        gbc.writeMem(0x267b, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xdc18);
        EXPECT(gbc.pc(), 0x267d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03E2
        gbc.setState(0x968e, 0xc6f0, 0x7000, 0xa587, 0xb75e, 0xf399, 0x0, 0x1);
        gbc.writeMem(0x968e, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc6f0);
        EXPECT(gbc.pc(), 0x9690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x968e), 0xcb);
        EXPECT(gbc.readMem(0x968f), 0x5a);
        // CB 5A 03E3
        gbc.setState(0x7f8f, 0x338a, 0xdff0, 0x6b99, 0x4863, 0xabe0, 0x0, 0x0);
        gbc.writeMem(0x7f8f, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x338a);
        EXPECT(gbc.pc(), 0x7f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5A 03E4
        gbc.setState(0x928d, 0xac39, 0x1e20, 0x24ce, 0x1a7, 0x9946, 0x0, 0x1);
        gbc.writeMem(0x928d, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xac39);
        EXPECT(gbc.pc(), 0x928f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x928d), 0xcb);
        EXPECT(gbc.readMem(0x928e), 0x5a);
        // CB 5A 03E5
        gbc.setState(0x1cb, 0xd13b, 0x9680, 0xbef, 0xb132, 0x6e6c, 0x1, 0x1);
        gbc.writeMem(0x1cb, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd13b);
        EXPECT(gbc.pc(), 0x1cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5A 03E6
        gbc.setState(0xbf84, 0x5a94, 0xa990, 0x8fc, 0x1a55, 0x4a9e, 0x1, 0x0);
        gbc.writeMem(0xbf84, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5a94);
        EXPECT(gbc.pc(), 0xbf86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf84), 0xcb);
        EXPECT(gbc.readMem(0xbf85), 0x5a);
        // CB 5A 03E7
        gbc.setState(0x4b9, 0x9021, 0x36a0, 0xd10f, 0x4929, 0xb0d, 0x1, 0x1);
        gbc.writeMem(0x4b9, { 0xcb, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9021);
        EXPECT(gbc.pc(), 0x4bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
