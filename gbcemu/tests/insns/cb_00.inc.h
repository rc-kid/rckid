    TEST(gbcemu, opcode_cb_00) {
        GBCEmu gbc{"", nullptr};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 00 0000
        gbc.setState(0xc817, 0xe460, 0x21e0, 0xbd27, 0x376d, 0x50a3, 0x1, 0x0);
        gbc.writeMem(0xc817, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xe460, gbc.sp());
        EXPECT(0xc819, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc817));
        EXPECT(0x0, gbc.readMem(0xc818));
        // CB 00 0001
        gbc.setState(0x576d, 0xc239, 0x8480, 0x7d86, 0xac60, 0x810c, 0x0, 0x1);
        gbc.writeMem(0x576d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xc239, gbc.sp());
        EXPECT(0x576f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0002
        gbc.setState(0x5b76, 0xbb16, 0xaf30, 0x31fd, 0xf793, 0xd1f9, 0x0, 0x1);
        gbc.writeMem(0x5b76, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xbb16, gbc.sp());
        EXPECT(0x5b78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0003
        gbc.setState(0xa2ea, 0x5b0c, 0xb7a0, 0x36ca, 0x1fe3, 0x713c, 0x1, 0x1);
        gbc.writeMem(0xa2ea, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x5b0c, gbc.sp());
        EXPECT(0xa2ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2ea));
        EXPECT(0x0, gbc.readMem(0xa2eb));
        // CB 00 0004
        gbc.setState(0x54e9, 0xbc33, 0xdab0, 0xe299, 0x9aab, 0x7328, 0x0, 0x1);
        gbc.writeMem(0x54e9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xbc33, gbc.sp());
        EXPECT(0x54eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0005
        gbc.setState(0x48d, 0x59d, 0xb6c0, 0x64d5, 0xb6fc, 0x1410, 0x1, 0x0);
        gbc.writeMem(0x48d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x59d, gbc.sp());
        EXPECT(0x48f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0006
        gbc.setState(0x9455, 0x460, 0xb030, 0x853a, 0x63c6, 0xe6ad, 0x1, 0x0);
        gbc.writeMem(0x9455, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x460, gbc.sp());
        EXPECT(0x9457, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9455));
        EXPECT(0x0, gbc.readMem(0x9456));
        // CB 00 0008
        gbc.setState(0x7365, 0x4d9c, 0x8700, 0x15c0, 0x5dbc, 0x6433, 0x1, 0x0);
        gbc.writeMem(0x7365, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x4d9c, gbc.sp());
        EXPECT(0x7367, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0009
        gbc.setState(0x2762, 0x9f2f, 0xab0, 0x6878, 0xccc5, 0xcc51, 0x0, 0x0);
        gbc.writeMem(0x2762, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x9f2f, gbc.sp());
        EXPECT(0x2764, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 000A
        gbc.setState(0x1af6, 0x2012, 0xfdf0, 0xcae9, 0x3e27, 0xc590, 0x0, 0x1);
        gbc.writeMem(0x1af6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2012, gbc.sp());
        EXPECT(0x1af8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 000B
        gbc.setState(0xa2b7, 0x7e1f, 0x6ed0, 0x57c8, 0xb561, 0x1dfa, 0x1, 0x0);
        gbc.writeMem(0xa2b7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x7e1f, gbc.sp());
        EXPECT(0xa2b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2b7));
        EXPECT(0x0, gbc.readMem(0xa2b8));
        // CB 00 000C
        gbc.setState(0x550a, 0x669c, 0xdbf0, 0x3e8f, 0xe6e8, 0xb659, 0x0, 0x1);
        gbc.writeMem(0x550a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x669c, gbc.sp());
        EXPECT(0x550c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 000D
        gbc.setState(0x2028, 0xf6f8, 0xe160, 0x85c0, 0x1649, 0xcb61, 0x0, 0x0);
        gbc.writeMem(0x2028, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xf6f8, gbc.sp());
        EXPECT(0x202a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 000E
        gbc.setState(0x4816, 0xdf9e, 0xca70, 0xe9ad, 0xf811, 0xb96e, 0x0, 0x0);
        gbc.writeMem(0x4816, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xdf9e, gbc.sp());
        EXPECT(0x4818, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 000F
        gbc.setState(0x5e2a, 0x7f66, 0x9fd0, 0x2544, 0xd67b, 0x2c9c, 0x1, 0x0);
        gbc.writeMem(0x5e2a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x7f66, gbc.sp());
        EXPECT(0x5e2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0010
        gbc.setState(0x6ab4, 0x1160, 0xcc90, 0xbe02, 0xef62, 0x1ead, 0x1, 0x0);
        gbc.writeMem(0x6ab4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x1160, gbc.sp());
        EXPECT(0x6ab6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0011
        gbc.setState(0xbe70, 0x7529, 0xcc20, 0x6d94, 0x1826, 0xae98, 0x1, 0x1);
        gbc.writeMem(0xbe70, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x7529, gbc.sp());
        EXPECT(0xbe72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe70));
        EXPECT(0x0, gbc.readMem(0xbe71));
        // CB 00 0012
        gbc.setState(0x50e, 0xba02, 0xea10, 0xa50b, 0xf6e2, 0xb392, 0x1, 0x0);
        gbc.writeMem(0x50e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xba02, gbc.sp());
        EXPECT(0x510, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0013
        gbc.setState(0xe233, 0xfcb0, 0x1bc0, 0xc90, 0x4c3f, 0xa096, 0x1, 0x1);
        gbc.writeMem(0xe233, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xfcb0, gbc.sp());
        EXPECT(0xe235, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe233));
        EXPECT(0x0, gbc.readMem(0xe234));
        // CB 00 0014
        gbc.setState(0x3047, 0x38d6, 0x4fd0, 0xc19c, 0xb4d9, 0xaa06, 0x0, 0x0);
        gbc.writeMem(0x3047, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x38d6, gbc.sp());
        EXPECT(0x3049, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0015
        gbc.setState(0x2d6c, 0xdae6, 0x83a0, 0x5b10, 0x56b9, 0x72f4, 0x0, 0x1);
        gbc.writeMem(0x2d6c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xdae6, gbc.sp());
        EXPECT(0x2d6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0016
        gbc.setState(0x43f, 0xeabe, 0xe1a0, 0x2b74, 0x9a26, 0x54df, 0x1, 0x0);
        gbc.writeMem(0x43f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xeabe, gbc.sp());
        EXPECT(0x441, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0017
        gbc.setState(0xb851, 0x93d6, 0xbd40, 0x316e, 0x65d5, 0xe6e9, 0x1, 0x0);
        gbc.writeMem(0xb851, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x93d6, gbc.sp());
        EXPECT(0xb853, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb851));
        EXPECT(0x0, gbc.readMem(0xb852));
        // CB 00 0018
        gbc.setState(0x60e7, 0xac24, 0x780, 0xa54d, 0x92f4, 0x1321, 0x1, 0x0);
        gbc.writeMem(0x60e7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xac24, gbc.sp());
        EXPECT(0x60e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0019
        gbc.setState(0x3eea, 0x61b7, 0x4630, 0x7f7c, 0xde60, 0x236c, 0x0, 0x0);
        gbc.writeMem(0x3eea, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x61b7, gbc.sp());
        EXPECT(0x3eec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 001A
        gbc.setState(0x53be, 0x83ce, 0x4cd0, 0x8f52, 0x36ea, 0x949d, 0x0, 0x0);
        gbc.writeMem(0x53be, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x83ce, gbc.sp());
        EXPECT(0x53c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 001B
        gbc.setState(0xb1a8, 0x181c, 0x65a0, 0x1976, 0x826, 0x5dc2, 0x0, 0x1);
        gbc.writeMem(0xb1a8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x181c, gbc.sp());
        EXPECT(0xb1aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1a8));
        EXPECT(0x0, gbc.readMem(0xb1a9));
        // CB 00 001C
        gbc.setState(0xccf8, 0x57ba, 0x4b30, 0x6c53, 0xd6c7, 0x93ee, 0x0, 0x0);
        gbc.writeMem(0xccf8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x57ba, gbc.sp());
        EXPECT(0xccfa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccf8));
        EXPECT(0x0, gbc.readMem(0xccf9));
        // CB 00 001D
        gbc.setState(0x61a5, 0x10a8, 0x3830, 0x12e1, 0x2e68, 0x9a23, 0x1, 0x0);
        gbc.writeMem(0x61a5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x10a8, gbc.sp());
        EXPECT(0x61a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 001E
        gbc.setState(0x7188, 0xa7ba, 0x3690, 0xf8f3, 0x9eae, 0x2417, 0x0, 0x1);
        gbc.writeMem(0x7188, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xa7ba, gbc.sp());
        EXPECT(0x718a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 001F
        gbc.setState(0x33c9, 0xc24b, 0xbfb0, 0x8661, 0x6a7c, 0x1129, 0x1, 0x0);
        gbc.writeMem(0x33c9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xc24b, gbc.sp());
        EXPECT(0x33cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0020
        gbc.setState(0x8c6f, 0x6f78, 0x5510, 0xd50, 0x9144, 0x1cab, 0x1, 0x0);
        gbc.writeMem(0x8c6f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x6f78, gbc.sp());
        EXPECT(0x8c71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c6f));
        EXPECT(0x0, gbc.readMem(0x8c70));
        // CB 00 0021
        gbc.setState(0x494c, 0x2904, 0xc560, 0xc866, 0x5015, 0x3fc5, 0x1, 0x1);
        gbc.writeMem(0x494c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x2904, gbc.sp());
        EXPECT(0x494e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0022
        gbc.setState(0x5693, 0x191b, 0x86a0, 0x8b7b, 0xce3c, 0x3878, 0x0, 0x1);
        gbc.writeMem(0x5693, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x191b, gbc.sp());
        EXPECT(0x5695, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0023
        gbc.setState(0x6ad1, 0xef63, 0x5cc0, 0x98c5, 0x6d76, 0xc596, 0x0, 0x0);
        gbc.writeMem(0x6ad1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xef63, gbc.sp());
        EXPECT(0x6ad3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0024
        gbc.setState(0xed24, 0x3594, 0x8cd0, 0x8bf4, 0xdec4, 0x7e5d, 0x1, 0x1);
        gbc.writeMem(0xed24, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x3594, gbc.sp());
        EXPECT(0xed26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed24));
        EXPECT(0x0, gbc.readMem(0xed25));
        // CB 00 0027
        gbc.setState(0x69a4, 0x14d6, 0x1c40, 0xac0f, 0x3a56, 0xe4a8, 0x0, 0x1);
        gbc.writeMem(0x69a4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x14d6, gbc.sp());
        EXPECT(0x69a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0028
        gbc.setState(0x57c9, 0xc0c5, 0xf590, 0xf323, 0xf9f1, 0xbefa, 0x1, 0x0);
        gbc.writeMem(0x57c9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xc0c5, gbc.sp());
        EXPECT(0x57cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0029
        gbc.setState(0x9836, 0xcf39, 0x970, 0x27d4, 0xaf74, 0x8a9c, 0x1, 0x0);
        gbc.writeMem(0x9836, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xcf39, gbc.sp());
        EXPECT(0x9838, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9836));
        EXPECT(0x0, gbc.readMem(0x9837));
        // CB 00 002A
        gbc.setState(0x10af, 0x665a, 0x30e0, 0xf20d, 0xc5df, 0x2342, 0x1, 0x0);
        gbc.writeMem(0x10af, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x665a, gbc.sp());
        EXPECT(0x10b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 002B
        gbc.setState(0x564c, 0x5c80, 0xa560, 0xe5a5, 0xc556, 0xd13d, 0x1, 0x1);
        gbc.writeMem(0x564c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x5c80, gbc.sp());
        EXPECT(0x564e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 002C
        gbc.setState(0x1bb, 0x609e, 0x59e0, 0xe615, 0xc1a, 0xde58, 0x0, 0x1);
        gbc.writeMem(0x1bb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x609e, gbc.sp());
        EXPECT(0x1bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 002D
        gbc.setState(0x9987, 0xe635, 0x7340, 0x88d9, 0x8ce4, 0x8cb1, 0x1, 0x1);
        gbc.writeMem(0x9987, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xe635, gbc.sp());
        EXPECT(0x9989, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9987));
        EXPECT(0x0, gbc.readMem(0x9988));
        // CB 00 002E
        gbc.setState(0x72da, 0x2db6, 0xb8f0, 0xdeac, 0x9f02, 0xb96e, 0x0, 0x0);
        gbc.writeMem(0x72da, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x2db6, gbc.sp());
        EXPECT(0x72dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0030
        gbc.setState(0xc166, 0x1d40, 0x8ec0, 0x3c62, 0x9164, 0x41d4, 0x0, 0x0);
        gbc.writeMem(0xc166, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x1d40, gbc.sp());
        EXPECT(0xc168, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc166));
        EXPECT(0x0, gbc.readMem(0xc167));
        // CB 00 0031
        gbc.setState(0x26eb, 0xc200, 0x1b10, 0x42e7, 0x4909, 0xf44e, 0x1, 0x1);
        gbc.writeMem(0x26eb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xc200, gbc.sp());
        EXPECT(0x26ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0032
        gbc.setState(0x13bb, 0x9e81, 0x6f00, 0xb3f5, 0x76fd, 0xe297, 0x0, 0x1);
        gbc.writeMem(0x13bb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x9e81, gbc.sp());
        EXPECT(0x13bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0033
        gbc.setState(0xc8b8, 0xb79d, 0xf540, 0xd8d, 0xdedd, 0x7e09, 0x0, 0x1);
        gbc.writeMem(0xc8b8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xb79d, gbc.sp());
        EXPECT(0xc8ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8b8));
        EXPECT(0x0, gbc.readMem(0xc8b9));
        // CB 00 0035
        gbc.setState(0x232b, 0xc03b, 0x5970, 0x20c7, 0xb97e, 0x88c9, 0x0, 0x0);
        gbc.writeMem(0x232b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xc03b, gbc.sp());
        EXPECT(0x232d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0036
        gbc.setState(0xe781, 0x279c, 0x8c80, 0x87d0, 0x30e3, 0x2384, 0x1, 0x1);
        gbc.writeMem(0xe781, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x279c, gbc.sp());
        EXPECT(0xe783, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe781));
        EXPECT(0x0, gbc.readMem(0xe782));
        // CB 00 0037
        gbc.setState(0xbe02, 0x6638, 0x2280, 0xcbb5, 0xd279, 0xd79, 0x0, 0x0);
        gbc.writeMem(0xbe02, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x6638, gbc.sp());
        EXPECT(0xbe04, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe02));
        EXPECT(0x0, gbc.readMem(0xbe03));
        // CB 00 0038
        gbc.setState(0x9d70, 0xf697, 0xa0c0, 0x7796, 0x88f5, 0x3ea4, 0x1, 0x1);
        gbc.writeMem(0x9d70, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xf697, gbc.sp());
        EXPECT(0x9d72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d70));
        EXPECT(0x0, gbc.readMem(0x9d71));
        // CB 00 0039
        gbc.setState(0x14ec, 0x5509, 0x800, 0xda0f, 0x1941, 0x8ec8, 0x0, 0x0);
        gbc.writeMem(0x14ec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x5509, gbc.sp());
        EXPECT(0x14ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 003A
        gbc.setState(0xef28, 0xcee2, 0x10b0, 0xfaaa, 0x6c9a, 0x1c5f, 0x1, 0x0);
        gbc.writeMem(0xef28, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xcee2, gbc.sp());
        EXPECT(0xef2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef28));
        EXPECT(0x0, gbc.readMem(0xef29));
        // CB 00 003B
        gbc.setState(0x906f, 0x3a7, 0x26c0, 0xd5f8, 0x717b, 0x2fe5, 0x1, 0x0);
        gbc.writeMem(0x906f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x3a7, gbc.sp());
        EXPECT(0x9071, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x906f));
        EXPECT(0x0, gbc.readMem(0x9070));
        // CB 00 003C
        gbc.setState(0x4a7e, 0x3179, 0x2ce0, 0xbe6f, 0x7f06, 0x28d4, 0x0, 0x0);
        gbc.writeMem(0x4a7e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x3179, gbc.sp());
        EXPECT(0x4a80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 003D
        gbc.setState(0x7986, 0xb0, 0xc900, 0xd070, 0x6ff5, 0xff56, 0x0, 0x0);
        gbc.writeMem(0x7986, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xb0, gbc.sp());
        EXPECT(0x7988, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 003E
        gbc.setState(0x3619, 0x88cd, 0x9540, 0x2f0e, 0x3e05, 0xa703, 0x1, 0x1);
        gbc.writeMem(0x3619, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x88cd, gbc.sp());
        EXPECT(0x361b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 003F
        gbc.setState(0xcbc3, 0xbff7, 0xead0, 0xa0fc, 0xebbe, 0xc851, 0x1, 0x0);
        gbc.writeMem(0xcbc3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xbff7, gbc.sp());
        EXPECT(0xcbc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbc3));
        EXPECT(0x0, gbc.readMem(0xcbc4));
        // CB 00 0040
        gbc.setState(0x60d0, 0xa5f5, 0x8ee0, 0x26e1, 0x1022, 0x78df, 0x1, 0x1);
        gbc.writeMem(0x60d0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xa5f5, gbc.sp());
        EXPECT(0x60d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0042
        gbc.setState(0x3f76, 0xacf6, 0x590, 0x3249, 0x4c17, 0xde8, 0x1, 0x0);
        gbc.writeMem(0x3f76, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xacf6, gbc.sp());
        EXPECT(0x3f78, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0043
        gbc.setState(0x5e3f, 0xb74b, 0x830, 0x5358, 0x144d, 0xdd62, 0x0, 0x1);
        gbc.writeMem(0x5e3f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xb74b, gbc.sp());
        EXPECT(0x5e41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0044
        gbc.setState(0xc4a2, 0xaa2, 0x6ff0, 0x4f60, 0x681a, 0xac36, 0x0, 0x1);
        gbc.writeMem(0xc4a2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xaa2, gbc.sp());
        EXPECT(0xc4a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4a2));
        EXPECT(0x0, gbc.readMem(0xc4a3));
        // CB 00 0045
        gbc.setState(0x5746, 0xfff, 0xc3d0, 0xcac8, 0xeb1c, 0x2feb, 0x1, 0x1);
        gbc.writeMem(0x5746, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xfff, gbc.sp());
        EXPECT(0x5748, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0046
        gbc.setState(0xb106, 0x4f14, 0xd4e0, 0x770d, 0xf75c, 0x5e2c, 0x0, 0x1);
        gbc.writeMem(0xb106, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x4f14, gbc.sp());
        EXPECT(0xb108, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb106));
        EXPECT(0x0, gbc.readMem(0xb107));
        // CB 00 0047
        gbc.setState(0xc10d, 0xcd68, 0xfa70, 0x3aee, 0x8456, 0x9ac6, 0x0, 0x1);
        gbc.writeMem(0xc10d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xcd68, gbc.sp());
        EXPECT(0xc10f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc10d));
        EXPECT(0x0, gbc.readMem(0xc10e));
        // CB 00 0049
        gbc.setState(0x4f92, 0x8471, 0x40b0, 0x4f14, 0x91b2, 0xe3ce, 0x1, 0x1);
        gbc.writeMem(0x4f92, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x8471, gbc.sp());
        EXPECT(0x4f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 004A
        gbc.setState(0x4198, 0x5b7c, 0xf310, 0x4a20, 0x7177, 0xa9f5, 0x0, 0x1);
        gbc.writeMem(0x4198, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x5b7c, gbc.sp());
        EXPECT(0x419a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 004B
        gbc.setState(0xeead, 0xf25d, 0x6710, 0x5379, 0x58bd, 0xa14d, 0x0, 0x1);
        gbc.writeMem(0xeead, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xf25d, gbc.sp());
        EXPECT(0xeeaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeead));
        EXPECT(0x0, gbc.readMem(0xeeae));
        // CB 00 004C
        gbc.setState(0x1939, 0x681f, 0xd180, 0x27dd, 0x9bc1, 0x223e, 0x1, 0x0);
        gbc.writeMem(0x1939, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x681f, gbc.sp());
        EXPECT(0x193b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 004D
        gbc.setState(0x27d9, 0xd920, 0x59c0, 0x5e66, 0x832c, 0x3e96, 0x1, 0x0);
        gbc.writeMem(0x27d9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xd920, gbc.sp());
        EXPECT(0x27db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 004E
        gbc.setState(0x243, 0x2e46, 0x92a0, 0xd00d, 0x2243, 0xad8e, 0x1, 0x0);
        gbc.writeMem(0x243, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x2e46, gbc.sp());
        EXPECT(0x245, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 004F
        gbc.setState(0x9617, 0x14b0, 0xe6c0, 0xfe4b, 0xa112, 0xa4c2, 0x1, 0x1);
        gbc.writeMem(0x9617, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x14b0, gbc.sp());
        EXPECT(0x9619, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9617));
        EXPECT(0x0, gbc.readMem(0x9618));
        // CB 00 0050
        gbc.setState(0x460f, 0xdfb, 0x4420, 0xe721, 0xcfac, 0xd6b0, 0x1, 0x0);
        gbc.writeMem(0x460f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xdfb, gbc.sp());
        EXPECT(0x4611, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0051
        gbc.setState(0x59a2, 0xff1c, 0x1f70, 0xb42e, 0xf652, 0x5e94, 0x0, 0x0);
        gbc.writeMem(0x59a2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xff1c, gbc.sp());
        EXPECT(0x59a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0052
        gbc.setState(0x127b, 0x6ce9, 0x5ed0, 0x56a8, 0x1f10, 0x5061, 0x1, 0x1);
        gbc.writeMem(0x127b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x6ce9, gbc.sp());
        EXPECT(0x127d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0053
        gbc.setState(0xbd17, 0x2684, 0x31d0, 0x57df, 0x7da8, 0x4a42, 0x0, 0x0);
        gbc.writeMem(0xbd17, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x2684, gbc.sp());
        EXPECT(0xbd19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd17));
        EXPECT(0x0, gbc.readMem(0xbd18));
        // CB 00 0054
        gbc.setState(0x9594, 0x449b, 0x8570, 0x778c, 0x9c5c, 0x839b, 0x1, 0x1);
        gbc.writeMem(0x9594, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x449b, gbc.sp());
        EXPECT(0x9596, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9594));
        EXPECT(0x0, gbc.readMem(0x9595));
        // CB 00 0055
        gbc.setState(0xeb5b, 0x959, 0xb420, 0x393e, 0x773e, 0x43c3, 0x0, 0x0);
        gbc.writeMem(0xeb5b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x959, gbc.sp());
        EXPECT(0xeb5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb5b));
        EXPECT(0x0, gbc.readMem(0xeb5c));
        // CB 00 0056
        gbc.setState(0x140f, 0x3d3a, 0x82e0, 0xaddf, 0x363e, 0xbb7b, 0x1, 0x0);
        gbc.writeMem(0x140f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x3d3a, gbc.sp());
        EXPECT(0x1411, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0057
        gbc.setState(0x5e32, 0x9def, 0x8c40, 0xf4b2, 0xbd11, 0x5cae, 0x1, 0x0);
        gbc.writeMem(0x5e32, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x9def, gbc.sp());
        EXPECT(0x5e34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0058
        gbc.setState(0x73fb, 0x9cc7, 0x96c0, 0xc57d, 0xe90c, 0x2fc6, 0x1, 0x1);
        gbc.writeMem(0x73fb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x9cc7, gbc.sp());
        EXPECT(0x73fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0059
        gbc.setState(0x8cc, 0x1970, 0x9af0, 0xa245, 0x661d, 0xc84, 0x0, 0x0);
        gbc.writeMem(0x8cc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x1970, gbc.sp());
        EXPECT(0x8ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 005A
        gbc.setState(0xcfd6, 0x38f6, 0x5690, 0x87a9, 0xee8a, 0x6a7f, 0x1, 0x1);
        gbc.writeMem(0xcfd6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x38f6, gbc.sp());
        EXPECT(0xcfd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfd6));
        EXPECT(0x0, gbc.readMem(0xcfd7));
        // CB 00 005B
        gbc.setState(0xccdd, 0xa430, 0x3d10, 0x75b0, 0x167c, 0x8693, 0x1, 0x0);
        gbc.writeMem(0xccdd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xa430, gbc.sp());
        EXPECT(0xccdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccdd));
        EXPECT(0x0, gbc.readMem(0xccde));
        // CB 00 005C
        gbc.setState(0xc8a3, 0x3f61, 0xaf20, 0x9291, 0x356f, 0x78dd, 0x1, 0x0);
        gbc.writeMem(0xc8a3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x3f61, gbc.sp());
        EXPECT(0xc8a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8a3));
        EXPECT(0x0, gbc.readMem(0xc8a4));
        // CB 00 005D
        gbc.setState(0xd68f, 0xc6bb, 0x830, 0xcce0, 0xedd4, 0xecf0, 0x0, 0x1);
        gbc.writeMem(0xd68f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc6bb, gbc.sp());
        EXPECT(0xd691, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd68f));
        EXPECT(0x0, gbc.readMem(0xd690));
        // CB 00 005F
        gbc.setState(0xfe1, 0xd8a, 0xd7a0, 0x737b, 0xc8e8, 0x229c, 0x1, 0x0);
        gbc.writeMem(0xfe1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xd8a, gbc.sp());
        EXPECT(0xfe3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0061
        gbc.setState(0x4bf4, 0xefe2, 0x1de0, 0x720d, 0x517e, 0x532d, 0x0, 0x1);
        gbc.writeMem(0x4bf4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xefe2, gbc.sp());
        EXPECT(0x4bf6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0062
        gbc.setState(0x3e6d, 0xa6c4, 0xc940, 0xcb2a, 0xecf5, 0xb2ed, 0x0, 0x0);
        gbc.writeMem(0x3e6d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xa6c4, gbc.sp());
        EXPECT(0x3e6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0063
        gbc.setState(0x25d, 0xaaa, 0x8da0, 0x3384, 0x6e01, 0xa4aa, 0x0, 0x1);
        gbc.writeMem(0x25d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xaaa, gbc.sp());
        EXPECT(0x25f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0064
        gbc.setState(0x5eb8, 0xc3e9, 0x150, 0x2e4d, 0xe769, 0x508b, 0x0, 0x0);
        gbc.writeMem(0x5eb8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xc3e9, gbc.sp());
        EXPECT(0x5eba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0065
        gbc.setState(0x1f3c, 0xeee5, 0xc9d0, 0xced5, 0xb7b0, 0x5070, 0x1, 0x0);
        gbc.writeMem(0x1f3c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xeee5, gbc.sp());
        EXPECT(0x1f3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0066
        gbc.setState(0xd797, 0x2b08, 0xc140, 0x2979, 0x6dfc, 0xb60c, 0x1, 0x1);
        gbc.writeMem(0xd797, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x2b08, gbc.sp());
        EXPECT(0xd799, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd797));
        EXPECT(0x0, gbc.readMem(0xd798));
        // CB 00 0067
        gbc.setState(0x5dfa, 0xbfdc, 0xc870, 0x99ee, 0xd1fa, 0x7281, 0x1, 0x0);
        gbc.writeMem(0x5dfa, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xbfdc, gbc.sp());
        EXPECT(0x5dfc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0068
        gbc.setState(0xb3db, 0x487a, 0x6820, 0x9c8c, 0x69ac, 0xd2b8, 0x1, 0x1);
        gbc.writeMem(0xb3db, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x487a, gbc.sp());
        EXPECT(0xb3dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3db));
        EXPECT(0x0, gbc.readMem(0xb3dc));
        // CB 00 0069
        gbc.setState(0x739b, 0x1782, 0x2930, 0xda65, 0xe9c6, 0xbc72, 0x0, 0x0);
        gbc.writeMem(0x739b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x1782, gbc.sp());
        EXPECT(0x739d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 006A
        gbc.setState(0x4c5b, 0xbd4b, 0x52e0, 0x565c, 0x7a1e, 0x2e4c, 0x1, 0x0);
        gbc.writeMem(0x4c5b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xbd4b, gbc.sp());
        EXPECT(0x4c5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 006B
        gbc.setState(0xdbaf, 0x7166, 0x6b10, 0x4b5a, 0x1b42, 0x8ad2, 0x0, 0x1);
        gbc.writeMem(0xdbaf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x7166, gbc.sp());
        EXPECT(0xdbb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbaf));
        EXPECT(0x0, gbc.readMem(0xdbb0));
        // CB 00 006C
        gbc.setState(0x3d01, 0xc986, 0x6e30, 0x1286, 0x54c9, 0xfbe3, 0x1, 0x1);
        gbc.writeMem(0x3d01, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xc986, gbc.sp());
        EXPECT(0x3d03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 006D
        gbc.setState(0x8190, 0x1b73, 0x1020, 0x2fcf, 0xdfda, 0x3ebb, 0x0, 0x1);
        gbc.writeMem(0x8190, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x1b73, gbc.sp());
        EXPECT(0x8192, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8190));
        EXPECT(0x0, gbc.readMem(0x8191));
        // CB 00 006E
        gbc.setState(0x97af, 0x53e7, 0x5300, 0x8259, 0x2b43, 0xf09b, 0x1, 0x0);
        gbc.writeMem(0x97af, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x53e7, gbc.sp());
        EXPECT(0x97b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97af));
        EXPECT(0x0, gbc.readMem(0x97b0));
        // CB 00 006F
        gbc.setState(0xa884, 0xefa6, 0x110, 0xeef3, 0x431, 0x6418, 0x1, 0x0);
        gbc.writeMem(0xa884, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xefa6, gbc.sp());
        EXPECT(0xa886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa884));
        EXPECT(0x0, gbc.readMem(0xa885));
        // CB 00 0070
        gbc.setState(0xc265, 0x3f65, 0x5660, 0x2370, 0xcdfa, 0x517, 0x1, 0x0);
        gbc.writeMem(0xc265, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x3f65, gbc.sp());
        EXPECT(0xc267, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc265));
        EXPECT(0x0, gbc.readMem(0xc266));
        // CB 00 0071
        gbc.setState(0xb776, 0x29a4, 0xb960, 0xc448, 0x68fc, 0x4701, 0x1, 0x1);
        gbc.writeMem(0xb776, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x29a4, gbc.sp());
        EXPECT(0xb778, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb776));
        EXPECT(0x0, gbc.readMem(0xb777));
        // CB 00 0072
        gbc.setState(0xa345, 0x61e3, 0x9c20, 0x38ed, 0x8361, 0x25a9, 0x1, 0x0);
        gbc.writeMem(0xa345, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x61e3, gbc.sp());
        EXPECT(0xa347, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa345));
        EXPECT(0x0, gbc.readMem(0xa346));
        // CB 00 0074
        gbc.setState(0x968a, 0xbb91, 0xf0c0, 0x9c5, 0x1151, 0xcd53, 0x0, 0x1);
        gbc.writeMem(0x968a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xbb91, gbc.sp());
        EXPECT(0x968c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x968a));
        EXPECT(0x0, gbc.readMem(0x968b));
        // CB 00 0075
        gbc.setState(0x9833, 0x4df7, 0x3b10, 0x346, 0xcbf5, 0x457e, 0x0, 0x0);
        gbc.writeMem(0x9833, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x4df7, gbc.sp());
        EXPECT(0x9835, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9833));
        EXPECT(0x0, gbc.readMem(0x9834));
        // CB 00 0076
        gbc.setState(0x8e91, 0x3490, 0xe5c0, 0x3731, 0x51ab, 0x48f1, 0x1, 0x1);
        gbc.writeMem(0x8e91, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x3490, gbc.sp());
        EXPECT(0x8e93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e91));
        EXPECT(0x0, gbc.readMem(0x8e92));
        // CB 00 0077
        gbc.setState(0x76a3, 0x7b9, 0x6470, 0xfaa5, 0xe4ce, 0x751a, 0x0, 0x1);
        gbc.writeMem(0x76a3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x7b9, gbc.sp());
        EXPECT(0x76a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0078
        gbc.setState(0x9509, 0x6dc2, 0xecd0, 0x379c, 0xe39b, 0x7d5, 0x0, 0x1);
        gbc.writeMem(0x9509, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x6dc2, gbc.sp());
        EXPECT(0x950b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9509));
        EXPECT(0x0, gbc.readMem(0x950a));
        // CB 00 007A
        gbc.setState(0x77a6, 0x4c29, 0x6e30, 0xd0ce, 0x25be, 0x5c2a, 0x1, 0x0);
        gbc.writeMem(0x77a6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x4c29, gbc.sp());
        EXPECT(0x77a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 007B
        gbc.setState(0x6440, 0x1bc4, 0x3d80, 0x665, 0xa1b2, 0x9217, 0x1, 0x0);
        gbc.writeMem(0x6440, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x1bc4, gbc.sp());
        EXPECT(0x6442, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 007C
        gbc.setState(0xc3db, 0x4627, 0x2650, 0x5b5f, 0xe2e, 0x4db2, 0x0, 0x0);
        gbc.writeMem(0xc3db, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x4627, gbc.sp());
        EXPECT(0xc3dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3db));
        EXPECT(0x0, gbc.readMem(0xc3dc));
        // CB 00 007D
        gbc.setState(0x9dc2, 0x1cea, 0x6460, 0xdc33, 0x586, 0xd23e, 0x1, 0x1);
        gbc.writeMem(0x9dc2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x1cea, gbc.sp());
        EXPECT(0x9dc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dc2));
        EXPECT(0x0, gbc.readMem(0x9dc3));
        // CB 00 007E
        gbc.setState(0x251d, 0xcb26, 0xc3d0, 0xe0cd, 0xa18c, 0x956e, 0x0, 0x1);
        gbc.writeMem(0x251d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xcb26, gbc.sp());
        EXPECT(0x251f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 007F
        gbc.setState(0xe39b, 0x8228, 0x42b0, 0x5304, 0x494b, 0x73f7, 0x0, 0x0);
        gbc.writeMem(0xe39b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x8228, gbc.sp());
        EXPECT(0xe39d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe39b));
        EXPECT(0x0, gbc.readMem(0xe39c));
        // CB 00 0080
        gbc.setState(0x2e24, 0xaf97, 0x5220, 0x2e11, 0xd403, 0x2bbe, 0x1, 0x1);
        gbc.writeMem(0x2e24, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xaf97, gbc.sp());
        EXPECT(0x2e26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0081
        gbc.setState(0x2548, 0x447f, 0x7040, 0x7bd5, 0x906, 0xbfb8, 0x0, 0x0);
        gbc.writeMem(0x2548, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x447f, gbc.sp());
        EXPECT(0x254a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0082
        gbc.setState(0x4cd6, 0x912a, 0x7a60, 0x6041, 0xf121, 0xf8a3, 0x1, 0x0);
        gbc.writeMem(0x4cd6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x912a, gbc.sp());
        EXPECT(0x4cd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0083
        gbc.setState(0xa6f0, 0x2462, 0x4a00, 0x9fbd, 0x1577, 0x2f28, 0x0, 0x1);
        gbc.writeMem(0xa6f0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x2462, gbc.sp());
        EXPECT(0xa6f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6f0));
        EXPECT(0x0, gbc.readMem(0xa6f1));
        // CB 00 0084
        gbc.setState(0xa974, 0x70e6, 0x1790, 0x5ba, 0x20e6, 0x3d6d, 0x0, 0x1);
        gbc.writeMem(0xa974, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x70e6, gbc.sp());
        EXPECT(0xa976, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa974));
        EXPECT(0x0, gbc.readMem(0xa975));
        // CB 00 0085
        gbc.setState(0x4227, 0x64a0, 0xc6d0, 0xf7b3, 0xe2eb, 0xa0e3, 0x1, 0x1);
        gbc.writeMem(0x4227, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x64a0, gbc.sp());
        EXPECT(0x4229, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0086
        gbc.setState(0xed2f, 0x8300, 0x27b0, 0xdca3, 0x25af, 0x107b, 0x1, 0x0);
        gbc.writeMem(0xed2f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x8300, gbc.sp());
        EXPECT(0xed31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed2f));
        EXPECT(0x0, gbc.readMem(0xed30));
        // CB 00 0087
        gbc.setState(0x1367, 0x551f, 0x6600, 0x1dd8, 0x3c27, 0x557c, 0x1, 0x1);
        gbc.writeMem(0x1367, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x551f, gbc.sp());
        EXPECT(0x1369, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0088
        gbc.setState(0xa563, 0x740a, 0xdbd0, 0x4b29, 0xbb28, 0x8c16, 0x0, 0x0);
        gbc.writeMem(0xa563, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x740a, gbc.sp());
        EXPECT(0xa565, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa563));
        EXPECT(0x0, gbc.readMem(0xa564));
        // CB 00 0089
        gbc.setState(0xb32d, 0xb9e1, 0xa330, 0x5d64, 0x31f9, 0xf8bd, 0x0, 0x0);
        gbc.writeMem(0xb32d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xb9e1, gbc.sp());
        EXPECT(0xb32f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb32d));
        EXPECT(0x0, gbc.readMem(0xb32e));
        // CB 00 008A
        gbc.setState(0xe4aa, 0x25ae, 0xdeb0, 0x738f, 0x3997, 0x5d67, 0x1, 0x0);
        gbc.writeMem(0xe4aa, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x25ae, gbc.sp());
        EXPECT(0xe4ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4aa));
        EXPECT(0x0, gbc.readMem(0xe4ab));
        // CB 00 008B
        gbc.setState(0xb15f, 0x657b, 0x8290, 0x980a, 0xd3c8, 0xd4, 0x0, 0x1);
        gbc.writeMem(0xb15f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x657b, gbc.sp());
        EXPECT(0xb161, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb15f));
        EXPECT(0x0, gbc.readMem(0xb160));
        // CB 00 008C
        gbc.setState(0xe714, 0xcb13, 0x10e0, 0xec53, 0xfc21, 0xb3f5, 0x1, 0x1);
        gbc.writeMem(0xe714, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xcb13, gbc.sp());
        EXPECT(0xe716, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe714));
        EXPECT(0x0, gbc.readMem(0xe715));
        // CB 00 008D
        gbc.setState(0x968e, 0xda5a, 0xce0, 0x7165, 0xfbb4, 0xab81, 0x0, 0x1);
        gbc.writeMem(0x968e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xda5a, gbc.sp());
        EXPECT(0x9690, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x968e));
        EXPECT(0x0, gbc.readMem(0x968f));
        // CB 00 008E
        gbc.setState(0xa220, 0xe0c2, 0xe590, 0x48a6, 0x6b57, 0x8255, 0x1, 0x0);
        gbc.writeMem(0xa220, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xe0c2, gbc.sp());
        EXPECT(0xa222, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa220));
        EXPECT(0x0, gbc.readMem(0xa221));
        // CB 00 008F
        gbc.setState(0xaee5, 0x8395, 0xa3d0, 0xbdb3, 0x71e5, 0x5f93, 0x0, 0x0);
        gbc.writeMem(0xaee5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x8395, gbc.sp());
        EXPECT(0xaee7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaee5));
        EXPECT(0x0, gbc.readMem(0xaee6));
        // CB 00 0090
        gbc.setState(0xb87e, 0x622, 0x2090, 0xe9c0, 0x45c, 0xb765, 0x1, 0x1);
        gbc.writeMem(0xb87e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x622, gbc.sp());
        EXPECT(0xb880, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb87e));
        EXPECT(0x0, gbc.readMem(0xb87f));
        // CB 00 0091
        gbc.setState(0xa125, 0x1980, 0x8dd0, 0x3c48, 0x6def, 0x4532, 0x1, 0x0);
        gbc.writeMem(0xa125, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x1980, gbc.sp());
        EXPECT(0xa127, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa125));
        EXPECT(0x0, gbc.readMem(0xa126));
        // CB 00 0092
        gbc.setState(0xb49, 0xf62f, 0xaa0, 0x5add, 0x294e, 0xd83a, 0x1, 0x1);
        gbc.writeMem(0xb49, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xf62f, gbc.sp());
        EXPECT(0xb4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0093
        gbc.setState(0x5759, 0xecd4, 0xa9f0, 0x9f62, 0xb55f, 0xe548, 0x1, 0x1);
        gbc.writeMem(0x5759, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xecd4, gbc.sp());
        EXPECT(0x575b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0095
        gbc.setState(0x5408, 0x8546, 0x4eb0, 0x8ca2, 0xbef7, 0x61f0, 0x1, 0x0);
        gbc.writeMem(0x5408, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x8546, gbc.sp());
        EXPECT(0x540a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0096
        gbc.setState(0x21a5, 0x284c, 0xa790, 0xfee3, 0xa63b, 0x3a0, 0x0, 0x1);
        gbc.writeMem(0x21a5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x284c, gbc.sp());
        EXPECT(0x21a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0097
        gbc.setState(0x34fd, 0xc503, 0xeec0, 0x64c8, 0x30ac, 0xda11, 0x1, 0x1);
        gbc.writeMem(0x34fd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xc503, gbc.sp());
        EXPECT(0x34ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0098
        gbc.setState(0xef51, 0xeb12, 0xb540, 0xe042, 0x86c, 0x6cd0, 0x1, 0x1);
        gbc.writeMem(0xef51, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xeb12, gbc.sp());
        EXPECT(0xef53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef51));
        EXPECT(0x0, gbc.readMem(0xef52));
        // CB 00 0099
        gbc.setState(0x9d2a, 0x44ea, 0x2d60, 0x5e94, 0x595a, 0x29a8, 0x0, 0x1);
        gbc.writeMem(0x9d2a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x44ea, gbc.sp());
        EXPECT(0x9d2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d2a));
        EXPECT(0x0, gbc.readMem(0x9d2b));
        // CB 00 009A
        gbc.setState(0x53f, 0x400d, 0xbd50, 0x55f4, 0xd7e3, 0x91fb, 0x0, 0x0);
        gbc.writeMem(0x53f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x400d, gbc.sp());
        EXPECT(0x541, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 009B
        gbc.setState(0x1e28, 0x6a03, 0x34a0, 0xeee, 0x5c5a, 0x3cb0, 0x0, 0x1);
        gbc.writeMem(0x1e28, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x6a03, gbc.sp());
        EXPECT(0x1e2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 009C
        gbc.setState(0x4649, 0x68d2, 0x6db0, 0xd205, 0x21e8, 0x9a0b, 0x1, 0x1);
        gbc.writeMem(0x4649, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x68d2, gbc.sp());
        EXPECT(0x464b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 009E
        gbc.setState(0xd189, 0x7490, 0x5070, 0x49f3, 0xbb1b, 0x85d8, 0x0, 0x1);
        gbc.writeMem(0xd189, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x7490, gbc.sp());
        EXPECT(0xd18b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd189));
        EXPECT(0x0, gbc.readMem(0xd18a));
        // CB 00 009F
        gbc.setState(0x1c92, 0x8b64, 0x4f50, 0x1f9a, 0x4f9e, 0x2b4, 0x0, 0x0);
        gbc.writeMem(0x1c92, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x8b64, gbc.sp());
        EXPECT(0x1c94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00A0
        gbc.setState(0x1a24, 0x7fc9, 0x6190, 0x9b55, 0xfed2, 0x9ac4, 0x1, 0x1);
        gbc.writeMem(0x1a24, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x7fc9, gbc.sp());
        EXPECT(0x1a26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00A1
        gbc.setState(0x648, 0x189f, 0x6430, 0xe0ca, 0x65f2, 0x80c7, 0x1, 0x1);
        gbc.writeMem(0x648, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x189f, gbc.sp());
        EXPECT(0x64a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00A2
        gbc.setState(0x9800, 0x7217, 0xe930, 0x395d, 0x2e8f, 0x7707, 0x1, 0x0);
        gbc.writeMem(0x9800, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x7217, gbc.sp());
        EXPECT(0x9802, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9800));
        EXPECT(0x0, gbc.readMem(0x9801));
        // CB 00 00A3
        gbc.setState(0xaba0, 0xa5cb, 0xbcc0, 0x844e, 0x8f1c, 0xf95e, 0x1, 0x1);
        gbc.writeMem(0xaba0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xa5cb, gbc.sp());
        EXPECT(0xaba2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaba0));
        EXPECT(0x0, gbc.readMem(0xaba1));
        // CB 00 00A4
        gbc.setState(0xa4c9, 0x6cbe, 0x5800, 0xe104, 0xef99, 0x6f40, 0x0, 0x1);
        gbc.writeMem(0xa4c9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x6cbe, gbc.sp());
        EXPECT(0xa4cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4c9));
        EXPECT(0x0, gbc.readMem(0xa4ca));
        // CB 00 00A5
        gbc.setState(0x7be1, 0xcf2d, 0xdee0, 0xb767, 0x4efc, 0x8645, 0x0, 0x0);
        gbc.writeMem(0x7be1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xcf2d, gbc.sp());
        EXPECT(0x7be3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00A6
        gbc.setState(0x8b1b, 0xe695, 0x5e20, 0xd573, 0x1189, 0x52fb, 0x1, 0x1);
        gbc.writeMem(0x8b1b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xe695, gbc.sp());
        EXPECT(0x8b1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b1b));
        EXPECT(0x0, gbc.readMem(0x8b1c));
        // CB 00 00A7
        gbc.setState(0x4b9a, 0xa9c, 0xef80, 0x12cd, 0xcb92, 0x58fa, 0x0, 0x0);
        gbc.writeMem(0x4b9a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xa9c, gbc.sp());
        EXPECT(0x4b9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00A8
        gbc.setState(0x5c40, 0x17cf, 0x8e10, 0xf835, 0x2fe8, 0x4d5e, 0x0, 0x0);
        gbc.writeMem(0x5c40, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x17cf, gbc.sp());
        EXPECT(0x5c42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00A9
        gbc.setState(0x473, 0x7fb4, 0xb2a0, 0x79fd, 0xd03, 0x5c94, 0x1, 0x1);
        gbc.writeMem(0x473, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x7fb4, gbc.sp());
        EXPECT(0x475, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00AA
        gbc.setState(0x66a2, 0x1600, 0x9110, 0x32f8, 0xb99b, 0x58d0, 0x1, 0x1);
        gbc.writeMem(0x66a2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1600, gbc.sp());
        EXPECT(0x66a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00AB
        gbc.setState(0x1adc, 0xc095, 0x5010, 0x9187, 0x26ff, 0xc604, 0x0, 0x1);
        gbc.writeMem(0x1adc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xc095, gbc.sp());
        EXPECT(0x1ade, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00AC
        gbc.setState(0x3045, 0xd9b7, 0x3410, 0xffb0, 0x5d0b, 0x1aef, 0x0, 0x0);
        gbc.writeMem(0x3045, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xd9b7, gbc.sp());
        EXPECT(0x3047, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00AD
        gbc.setState(0x416a, 0xbd43, 0x4d0, 0x1f38, 0xbf90, 0x427b, 0x1, 0x0);
        gbc.writeMem(0x416a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xbd43, gbc.sp());
        EXPECT(0x416c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00AE
        gbc.setState(0xddb8, 0x6c20, 0x300, 0x6d7f, 0xf262, 0x2d61, 0x0, 0x0);
        gbc.writeMem(0xddb8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x6c20, gbc.sp());
        EXPECT(0xddba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddb8));
        EXPECT(0x0, gbc.readMem(0xddb9));
        // CB 00 00AF
        gbc.setState(0x4cd, 0x37cd, 0x96f0, 0x1f96, 0x21f5, 0xffd0, 0x1, 0x1);
        gbc.writeMem(0x4cd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x37cd, gbc.sp());
        EXPECT(0x4cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00B0
        gbc.setState(0xb72f, 0x942c, 0xcde0, 0xcc12, 0x17, 0x6bc4, 0x1, 0x1);
        gbc.writeMem(0xb72f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x942c, gbc.sp());
        EXPECT(0xb731, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb72f));
        EXPECT(0x0, gbc.readMem(0xb730));
        // CB 00 00B1
        gbc.setState(0x59ca, 0x5456, 0xd210, 0x7896, 0x4e1e, 0x7984, 0x1, 0x0);
        gbc.writeMem(0x59ca, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x5456, gbc.sp());
        EXPECT(0x59cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00B2
        gbc.setState(0x6724, 0x4a95, 0xae00, 0x4c2c, 0x62f9, 0x79db, 0x1, 0x1);
        gbc.writeMem(0x6724, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x4a95, gbc.sp());
        EXPECT(0x6726, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00B3
        gbc.setState(0x99d4, 0x3ccd, 0x8c10, 0x3bed, 0x3ed7, 0x1f07, 0x1, 0x0);
        gbc.writeMem(0x99d4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x3ccd, gbc.sp());
        EXPECT(0x99d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99d4));
        EXPECT(0x0, gbc.readMem(0x99d5));
        // CB 00 00B4
        gbc.setState(0xbed7, 0xa51a, 0x1010, 0xc182, 0xcf4b, 0xc6cf, 0x0, 0x1);
        gbc.writeMem(0xbed7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xa51a, gbc.sp());
        EXPECT(0xbed9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbed7));
        EXPECT(0x0, gbc.readMem(0xbed8));
        // CB 00 00B5
        gbc.setState(0xa8fd, 0x8811, 0x90c0, 0x7310, 0x87fb, 0xac7c, 0x1, 0x1);
        gbc.writeMem(0xa8fd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x8811, gbc.sp());
        EXPECT(0xa8ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8fd));
        EXPECT(0x0, gbc.readMem(0xa8fe));
        // CB 00 00B6
        gbc.setState(0xe1fd, 0x7cfe, 0x9e30, 0xd162, 0xff45, 0x525a, 0x0, 0x0);
        gbc.writeMem(0xe1fd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x7cfe, gbc.sp());
        EXPECT(0xe1ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1fd));
        EXPECT(0x0, gbc.readMem(0xe1fe));
        // CB 00 00B7
        gbc.setState(0xd329, 0x93, 0xdf70, 0xed35, 0x2502, 0x7ff3, 0x0, 0x1);
        gbc.writeMem(0xd329, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x93, gbc.sp());
        EXPECT(0xd32b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd329));
        EXPECT(0x0, gbc.readMem(0xd32a));
        // CB 00 00B8
        gbc.setState(0xd5b4, 0x2853, 0xd120, 0xa1f1, 0x89b0, 0x4b53, 0x0, 0x0);
        gbc.writeMem(0xd5b4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x2853, gbc.sp());
        EXPECT(0xd5b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5b4));
        EXPECT(0x0, gbc.readMem(0xd5b5));
        // CB 00 00B9
        gbc.setState(0x426e, 0xa26d, 0x9ca0, 0xd25f, 0x1385, 0xd09c, 0x1, 0x0);
        gbc.writeMem(0x426e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xa26d, gbc.sp());
        EXPECT(0x4270, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00BA
        gbc.setState(0xd26e, 0x2ca0, 0x6060, 0xe8ad, 0x59f4, 0x78fd, 0x1, 0x0);
        gbc.writeMem(0xd26e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x2ca0, gbc.sp());
        EXPECT(0xd270, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd26e));
        EXPECT(0x0, gbc.readMem(0xd26f));
        // CB 00 00BB
        gbc.setState(0xcd5b, 0x1107, 0xb6f0, 0x1d7f, 0xc1dd, 0xf1b9, 0x0, 0x0);
        gbc.writeMem(0xcd5b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x1107, gbc.sp());
        EXPECT(0xcd5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd5b));
        EXPECT(0x0, gbc.readMem(0xcd5c));
        // CB 00 00BC
        gbc.setState(0x2bb5, 0x87fe, 0x85f0, 0x979d, 0xda8e, 0x6180, 0x1, 0x0);
        gbc.writeMem(0x2bb5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x87fe, gbc.sp());
        EXPECT(0x2bb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00BD
        gbc.setState(0x2254, 0x164f, 0x8010, 0x87eb, 0xf915, 0x9e74, 0x1, 0x1);
        gbc.writeMem(0x2254, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x164f, gbc.sp());
        EXPECT(0x2256, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00BE
        gbc.setState(0xc7d8, 0x2a4c, 0x7700, 0x41f1, 0xa212, 0x2450, 0x0, 0x1);
        gbc.writeMem(0xc7d8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x2a4c, gbc.sp());
        EXPECT(0xc7da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7d8));
        EXPECT(0x0, gbc.readMem(0xc7d9));
        // CB 00 00BF
        gbc.setState(0xb47c, 0x4a82, 0x27b0, 0x3529, 0x16b5, 0x3abe, 0x0, 0x0);
        gbc.writeMem(0xb47c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x4a82, gbc.sp());
        EXPECT(0xb47e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb47c));
        EXPECT(0x0, gbc.readMem(0xb47d));
        // CB 00 00C0
        gbc.setState(0x608c, 0x5ba0, 0xc040, 0xa36f, 0x8527, 0x721d, 0x1, 0x0);
        gbc.writeMem(0x608c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x5ba0, gbc.sp());
        EXPECT(0x608e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00C1
        gbc.setState(0x958f, 0xafcb, 0xb210, 0xcaf8, 0x79c7, 0x8c07, 0x0, 0x1);
        gbc.writeMem(0x958f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xafcb, gbc.sp());
        EXPECT(0x9591, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x958f));
        EXPECT(0x0, gbc.readMem(0x9590));
        // CB 00 00C2
        gbc.setState(0x35e, 0x8a, 0x64e0, 0x9617, 0x18b5, 0x6984, 0x0, 0x1);
        gbc.writeMem(0x35e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x8a, gbc.sp());
        EXPECT(0x360, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00C3
        gbc.setState(0xdc5, 0xb09b, 0x17d0, 0xc8a9, 0xadf, 0x769c, 0x1, 0x1);
        gbc.writeMem(0xdc5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xb09b, gbc.sp());
        EXPECT(0xdc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00C4
        gbc.setState(0xb64f, 0x1024, 0xb310, 0x22e6, 0xb6b6, 0xf95f, 0x1, 0x1);
        gbc.writeMem(0xb64f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x1024, gbc.sp());
        EXPECT(0xb651, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb64f));
        EXPECT(0x0, gbc.readMem(0xb650));
        // CB 00 00C5
        gbc.setState(0xc0d, 0x8e3d, 0x6460, 0x865b, 0x62c4, 0x7a3c, 0x1, 0x1);
        gbc.writeMem(0xc0d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x8e3d, gbc.sp());
        EXPECT(0xc0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00C6
        gbc.setState(0x4e8f, 0xeb3e, 0x4380, 0x18f0, 0x6442, 0xe1f8, 0x1, 0x0);
        gbc.writeMem(0x4e8f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xeb3e, gbc.sp());
        EXPECT(0x4e91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00C7
        gbc.setState(0xa104, 0x2636, 0x5b50, 0x7b9b, 0x3d6f, 0xc831, 0x1, 0x1);
        gbc.writeMem(0xa104, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x2636, gbc.sp());
        EXPECT(0xa106, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa104));
        EXPECT(0x0, gbc.readMem(0xa105));
        // CB 00 00C8
        gbc.setState(0x41fd, 0xab3a, 0x83d0, 0x3035, 0x22af, 0x91b0, 0x1, 0x0);
        gbc.writeMem(0x41fd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xab3a, gbc.sp());
        EXPECT(0x41ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00C9
        gbc.setState(0x7724, 0x26a3, 0xb530, 0x4153, 0x3364, 0x73a4, 0x0, 0x1);
        gbc.writeMem(0x7724, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x26a3, gbc.sp());
        EXPECT(0x7726, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00CA
        gbc.setState(0xb533, 0x7b26, 0xa950, 0xd906, 0xf83e, 0xba75, 0x1, 0x0);
        gbc.writeMem(0xb533, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x7b26, gbc.sp());
        EXPECT(0xb535, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb533));
        EXPECT(0x0, gbc.readMem(0xb534));
        // CB 00 00CB
        gbc.setState(0x35ba, 0x1bb2, 0x64a0, 0xe2e3, 0x4276, 0x87c2, 0x0, 0x0);
        gbc.writeMem(0x35ba, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x1bb2, gbc.sp());
        EXPECT(0x35bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00CC
        gbc.setState(0x4547, 0x3706, 0x3b0, 0x150e, 0xffd8, 0x9df8, 0x1, 0x0);
        gbc.writeMem(0x4547, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x3706, gbc.sp());
        EXPECT(0x4549, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00CD
        gbc.setState(0xc6b1, 0x61fe, 0x67e0, 0x72cb, 0x9289, 0x47bb, 0x0, 0x0);
        gbc.writeMem(0xc6b1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x61fe, gbc.sp());
        EXPECT(0xc6b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6b1));
        EXPECT(0x0, gbc.readMem(0xc6b2));
        // CB 00 00CE
        gbc.setState(0x4aec, 0x6e4, 0xe870, 0xafd9, 0x4ac7, 0x66ad, 0x0, 0x1);
        gbc.writeMem(0x4aec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x6e4, gbc.sp());
        EXPECT(0x4aee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00CF
        gbc.setState(0xdf2e, 0xf629, 0xa670, 0x23b5, 0x5a68, 0xce03, 0x1, 0x1);
        gbc.writeMem(0xdf2e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xf629, gbc.sp());
        EXPECT(0xdf30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf2e));
        EXPECT(0x0, gbc.readMem(0xdf2f));
        // CB 00 00D1
        gbc.setState(0xc73, 0x551d, 0x7170, 0x880b, 0x8d44, 0x5659, 0x0, 0x1);
        gbc.writeMem(0xc73, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x551d, gbc.sp());
        EXPECT(0xc75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00D2
        gbc.setState(0xb5ac, 0x867f, 0xd6d0, 0x8b1, 0xdf4a, 0x9780, 0x1, 0x0);
        gbc.writeMem(0xb5ac, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x867f, gbc.sp());
        EXPECT(0xb5ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5ac));
        EXPECT(0x0, gbc.readMem(0xb5ad));
        // CB 00 00D3
        gbc.setState(0x5ad2, 0xc665, 0x55d0, 0x6aa4, 0x9ba8, 0x40e5, 0x0, 0x0);
        gbc.writeMem(0x5ad2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xc665, gbc.sp());
        EXPECT(0x5ad4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00D4
        gbc.setState(0x626d, 0x3968, 0xb00, 0xd5df, 0x8ce8, 0x63c0, 0x0, 0x1);
        gbc.writeMem(0x626d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x3968, gbc.sp());
        EXPECT(0x626f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00D5
        gbc.setState(0x4f73, 0xc35e, 0x6150, 0x368a, 0x676d, 0x7178, 0x0, 0x0);
        gbc.writeMem(0x4f73, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xc35e, gbc.sp());
        EXPECT(0x4f75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00D6
        gbc.setState(0x4f3a, 0x3cb0, 0xfc80, 0x3af9, 0x8fe8, 0x4f5e, 0x1, 0x1);
        gbc.writeMem(0x4f3a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x3cb0, gbc.sp());
        EXPECT(0x4f3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00D7
        gbc.setState(0x7e69, 0x84bb, 0xb3e0, 0xeabe, 0x3c85, 0xeeac, 0x1, 0x0);
        gbc.writeMem(0x7e69, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x84bb, gbc.sp());
        EXPECT(0x7e6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00D8
        gbc.setState(0x5c37, 0xad0a, 0xae30, 0x5a3f, 0x5295, 0xe7bb, 0x0, 0x1);
        gbc.writeMem(0x5c37, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xad0a, gbc.sp());
        EXPECT(0x5c39, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00D9
        gbc.setState(0xaba7, 0x464f, 0x9ab0, 0x46d, 0x76ce, 0x1cde, 0x1, 0x0);
        gbc.writeMem(0xaba7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x464f, gbc.sp());
        EXPECT(0xaba9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaba7));
        EXPECT(0x0, gbc.readMem(0xaba8));
        // CB 00 00DA
        gbc.setState(0x895, 0x74b7, 0x4e20, 0x44f4, 0x3516, 0x7629, 0x0, 0x0);
        gbc.writeMem(0x895, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x74b7, gbc.sp());
        EXPECT(0x897, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00DC
        gbc.setState(0x8e60, 0x9577, 0x2c50, 0x5ff4, 0xb5aa, 0xee33, 0x0, 0x1);
        gbc.writeMem(0x8e60, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x9577, gbc.sp());
        EXPECT(0x8e62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e60));
        EXPECT(0x0, gbc.readMem(0x8e61));
        // CB 00 00DD
        gbc.setState(0x6312, 0xe63e, 0x3720, 0xa7db, 0xfa84, 0x90e6, 0x0, 0x1);
        gbc.writeMem(0x6312, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xe63e, gbc.sp());
        EXPECT(0x6314, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00DE
        gbc.setState(0x80a4, 0xcdd8, 0xc5a0, 0x638b, 0x655e, 0xbf94, 0x0, 0x1);
        gbc.writeMem(0x80a4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xcdd8, gbc.sp());
        EXPECT(0x80a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80a4));
        EXPECT(0x0, gbc.readMem(0x80a5));
        // CB 00 00DF
        gbc.setState(0x1f43, 0x2f56, 0x5a50, 0x51c1, 0x7bf0, 0x18ab, 0x1, 0x0);
        gbc.writeMem(0x1f43, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2f56, gbc.sp());
        EXPECT(0x1f45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00E0
        gbc.setState(0x35d6, 0x6623, 0xeb00, 0x2c05, 0xd105, 0x7274, 0x1, 0x1);
        gbc.writeMem(0x35d6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x6623, gbc.sp());
        EXPECT(0x35d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00E1
        gbc.setState(0x215c, 0x352f, 0x8870, 0x7e66, 0x9301, 0xf142, 0x1, 0x0);
        gbc.writeMem(0x215c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x352f, gbc.sp());
        EXPECT(0x215e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00E2
        gbc.setState(0x42c6, 0x8a2d, 0x8b0, 0x9373, 0xdf22, 0xb92f, 0x1, 0x0);
        gbc.writeMem(0x42c6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x8a2d, gbc.sp());
        EXPECT(0x42c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00E3
        gbc.setState(0x2177, 0xd557, 0xb40, 0x7c82, 0x11bd, 0xa6f, 0x0, 0x0);
        gbc.writeMem(0x2177, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xd557, gbc.sp());
        EXPECT(0x2179, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00E4
        gbc.setState(0x2738, 0xeadc, 0xfab0, 0xb86d, 0xe1e5, 0x8cf, 0x1, 0x0);
        gbc.writeMem(0x2738, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xeadc, gbc.sp());
        EXPECT(0x273a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00E5
        gbc.setState(0x62e4, 0x38d0, 0x10b0, 0x364f, 0xdce5, 0x4a52, 0x1, 0x1);
        gbc.writeMem(0x62e4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x38d0, gbc.sp());
        EXPECT(0x62e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00E6
        gbc.setState(0xce8d, 0xed5a, 0x1e30, 0x4e7e, 0xd922, 0xf9ee, 0x0, 0x1);
        gbc.writeMem(0xce8d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xed5a, gbc.sp());
        EXPECT(0xce8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce8d));
        EXPECT(0x0, gbc.readMem(0xce8e));
        // CB 00 00E7
        gbc.setState(0xe315, 0x2bf0, 0x3190, 0xda0d, 0x265, 0x503f, 0x0, 0x1);
        gbc.writeMem(0xe315, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x2bf0, gbc.sp());
        EXPECT(0xe317, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe315));
        EXPECT(0x0, gbc.readMem(0xe316));
        // CB 00 00E8
        gbc.setState(0xb100, 0xf416, 0x4b50, 0x1acb, 0xf92, 0x3c8e, 0x0, 0x0);
        gbc.writeMem(0xb100, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xf416, gbc.sp());
        EXPECT(0xb102, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb100));
        EXPECT(0x0, gbc.readMem(0xb101));
        // CB 00 00E9
        gbc.setState(0x7448, 0xf9c7, 0xe220, 0x982b, 0xd388, 0x4ba3, 0x0, 0x1);
        gbc.writeMem(0x7448, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xf9c7, gbc.sp());
        EXPECT(0x744a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00EA
        gbc.setState(0xbc6b, 0x3721, 0xcf50, 0xfbf9, 0x1f1c, 0xf0c0, 0x0, 0x0);
        gbc.writeMem(0xbc6b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x3721, gbc.sp());
        EXPECT(0xbc6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc6b));
        EXPECT(0x0, gbc.readMem(0xbc6c));
        // CB 00 00EB
        gbc.setState(0xbe92, 0x6922, 0xe20, 0xd7e3, 0x96b1, 0x9a9e, 0x1, 0x0);
        gbc.writeMem(0xbe92, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x6922, gbc.sp());
        EXPECT(0xbe94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe92));
        EXPECT(0x0, gbc.readMem(0xbe93));
        // CB 00 00EC
        gbc.setState(0xae58, 0x9a74, 0x2b90, 0xb84e, 0x3bd5, 0xd1d, 0x1, 0x1);
        gbc.writeMem(0xae58, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x9a74, gbc.sp());
        EXPECT(0xae5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae58));
        EXPECT(0x0, gbc.readMem(0xae59));
        // CB 00 00ED
        gbc.setState(0xecd7, 0x3396, 0xe090, 0xeb, 0xf97d, 0xab40, 0x1, 0x1);
        gbc.writeMem(0xecd7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x3396, gbc.sp());
        EXPECT(0xecd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecd7));
        EXPECT(0x0, gbc.readMem(0xecd8));
        // CB 00 00EE
        gbc.setState(0xa96, 0x1210, 0xa770, 0x7ccc, 0x240, 0xbef2, 0x0, 0x1);
        gbc.writeMem(0xa96, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x1210, gbc.sp());
        EXPECT(0xa98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00EF
        gbc.setState(0x4ff6, 0xa124, 0x8b10, 0xc18c, 0x8fa5, 0xe8cd, 0x1, 0x1);
        gbc.writeMem(0x4ff6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xa124, gbc.sp());
        EXPECT(0x4ff8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00F0
        gbc.setState(0x2b7, 0x12e9, 0x34f0, 0x9910, 0xa383, 0x713a, 0x1, 0x0);
        gbc.writeMem(0x2b7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x12e9, gbc.sp());
        EXPECT(0x2b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00F1
        gbc.setState(0x694d, 0x98c1, 0x82f0, 0x969c, 0x88dc, 0xb626, 0x0, 0x1);
        gbc.writeMem(0x694d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x98c1, gbc.sp());
        EXPECT(0x694f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00F2
        gbc.setState(0x6c41, 0xa542, 0xfef0, 0x620d, 0xff5c, 0xeab1, 0x1, 0x0);
        gbc.writeMem(0x6c41, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xa542, gbc.sp());
        EXPECT(0x6c43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00F3
        gbc.setState(0xcc77, 0x1568, 0x4130, 0xce91, 0x7904, 0xc2f5, 0x1, 0x0);
        gbc.writeMem(0xcc77, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x1568, gbc.sp());
        EXPECT(0xcc79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc77));
        EXPECT(0x0, gbc.readMem(0xcc78));
        // CB 00 00F4
        gbc.setState(0x9197, 0x2651, 0x92a0, 0x62c0, 0x9a30, 0x55a3, 0x0, 0x0);
        gbc.writeMem(0x9197, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x2651, gbc.sp());
        EXPECT(0x9199, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9197));
        EXPECT(0x0, gbc.readMem(0x9198));
        // CB 00 00F5
        gbc.setState(0x83b8, 0x9e48, 0x4ba0, 0x32e6, 0x5def, 0xa278, 0x0, 0x0);
        gbc.writeMem(0x83b8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x9e48, gbc.sp());
        EXPECT(0x83ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83b8));
        EXPECT(0x0, gbc.readMem(0x83b9));
        // CB 00 00F6
        gbc.setState(0xe596, 0x3756, 0x8cc0, 0x3b23, 0xe2b1, 0x8053, 0x0, 0x0);
        gbc.writeMem(0xe596, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x3756, gbc.sp());
        EXPECT(0xe598, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe596));
        EXPECT(0x0, gbc.readMem(0xe597));
        // CB 00 00F8
        gbc.setState(0x269b, 0xe6cb, 0x3490, 0xa22c, 0x3035, 0xf5c7, 0x1, 0x0);
        gbc.writeMem(0x269b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xe6cb, gbc.sp());
        EXPECT(0x269d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00F9
        gbc.setState(0x68c9, 0x105f, 0x3630, 0x206f, 0xd177, 0x2a5d, 0x0, 0x1);
        gbc.writeMem(0x68c9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x105f, gbc.sp());
        EXPECT(0x68cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 00FA
        gbc.setState(0xb397, 0xbdf5, 0x8f0, 0x22dc, 0xc80, 0xb17b, 0x0, 0x1);
        gbc.writeMem(0xb397, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xbdf5, gbc.sp());
        EXPECT(0xb399, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb397));
        EXPECT(0x0, gbc.readMem(0xb398));
        // CB 00 00FB
        gbc.setState(0x9d2, 0x4c5a, 0xe4f0, 0xd6f2, 0xdc62, 0x196f, 0x1, 0x1);
        gbc.writeMem(0x9d2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x4c5a, gbc.sp());
        EXPECT(0x9d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 00FC
        gbc.setState(0xbd53, 0x104f, 0xb830, 0x3565, 0xd63d, 0xc9d9, 0x1, 0x0);
        gbc.writeMem(0xbd53, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x104f, gbc.sp());
        EXPECT(0xbd55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd53));
        EXPECT(0x0, gbc.readMem(0xbd54));
        // CB 00 00FD
        gbc.setState(0xeb49, 0x2295, 0x79a0, 0x7054, 0x5857, 0x166e, 0x0, 0x0);
        gbc.writeMem(0xeb49, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x2295, gbc.sp());
        EXPECT(0xeb4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb49));
        EXPECT(0x0, gbc.readMem(0xeb4a));
        // CB 00 00FF
        gbc.setState(0x151c, 0xe5a, 0x67b0, 0x8736, 0x66d4, 0xd4bf, 0x0, 0x0);
        gbc.writeMem(0x151c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xe5a, gbc.sp());
        EXPECT(0x151e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0100
        gbc.setState(0xbfa5, 0x69b6, 0xa080, 0xcd31, 0x308b, 0x81b4, 0x1, 0x0);
        gbc.writeMem(0xbfa5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x69b6, gbc.sp());
        EXPECT(0xbfa7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfa5));
        EXPECT(0x0, gbc.readMem(0xbfa6));
        // CB 00 0101
        gbc.setState(0x2395, 0xa82a, 0x9c0, 0x9978, 0x79c0, 0xce7f, 0x0, 0x0);
        gbc.writeMem(0x2395, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xa82a, gbc.sp());
        EXPECT(0x2397, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0102
        gbc.setState(0x94ad, 0x636e, 0xc0a0, 0x161d, 0xb1fb, 0x7859, 0x1, 0x1);
        gbc.writeMem(0x94ad, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x636e, gbc.sp());
        EXPECT(0x94af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94ad));
        EXPECT(0x0, gbc.readMem(0x94ae));
        // CB 00 0103
        gbc.setState(0x4ba8, 0xc2f5, 0xfb20, 0x764f, 0xf456, 0x5b40, 0x0, 0x0);
        gbc.writeMem(0x4ba8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xc2f5, gbc.sp());
        EXPECT(0x4baa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0104
        gbc.setState(0x3345, 0x4ea9, 0xd110, 0xb6b4, 0x7121, 0xf25e, 0x0, 0x0);
        gbc.writeMem(0x3345, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x4ea9, gbc.sp());
        EXPECT(0x3347, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0105
        gbc.setState(0x88a1, 0xbd32, 0x8f30, 0xd0f3, 0xcd3b, 0x7853, 0x1, 0x1);
        gbc.writeMem(0x88a1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xbd32, gbc.sp());
        EXPECT(0x88a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88a1));
        EXPECT(0x0, gbc.readMem(0x88a2));
        // CB 00 0106
        gbc.setState(0x2a81, 0x982e, 0xd2c0, 0x2d81, 0x1974, 0xc70, 0x0, 0x0);
        gbc.writeMem(0x2a81, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x982e, gbc.sp());
        EXPECT(0x2a83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0107
        gbc.setState(0x5814, 0x1c86, 0x4fa0, 0x2acc, 0x84ea, 0x3032, 0x1, 0x1);
        gbc.writeMem(0x5814, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x1c86, gbc.sp());
        EXPECT(0x5816, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0108
        gbc.setState(0x1543, 0xd967, 0xa210, 0xaad5, 0x315f, 0xb133, 0x1, 0x0);
        gbc.writeMem(0x1543, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xd967, gbc.sp());
        EXPECT(0x1545, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0109
        gbc.setState(0x7798, 0x5448, 0x79d0, 0x74d1, 0x9518, 0xdc98, 0x1, 0x1);
        gbc.writeMem(0x7798, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x5448, gbc.sp());
        EXPECT(0x779a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 010A
        gbc.setState(0xbdd5, 0x2b59, 0x6090, 0x473a, 0x2b44, 0xe710, 0x1, 0x1);
        gbc.writeMem(0xbdd5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x2b59, gbc.sp());
        EXPECT(0xbdd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdd5));
        EXPECT(0x0, gbc.readMem(0xbdd6));
        // CB 00 010B
        gbc.setState(0x9356, 0x1b00, 0x7830, 0x7500, 0x9406, 0xb69d, 0x0, 0x1);
        gbc.writeMem(0x9356, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x1b00, gbc.sp());
        EXPECT(0x9358, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9356));
        EXPECT(0x0, gbc.readMem(0x9357));
        // CB 00 010C
        gbc.setState(0x46c0, 0xe330, 0xb960, 0x6bf2, 0x6416, 0xedd5, 0x0, 0x1);
        gbc.writeMem(0x46c0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xe330, gbc.sp());
        EXPECT(0x46c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 010D
        gbc.setState(0xbd46, 0x950d, 0xe170, 0x3abd, 0x5b40, 0xde1, 0x0, 0x0);
        gbc.writeMem(0xbd46, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x950d, gbc.sp());
        EXPECT(0xbd48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd46));
        EXPECT(0x0, gbc.readMem(0xbd47));
        // CB 00 010E
        gbc.setState(0xa375, 0x2d47, 0x3190, 0x8f36, 0xc499, 0x7f0b, 0x1, 0x0);
        gbc.writeMem(0xa375, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x2d47, gbc.sp());
        EXPECT(0xa377, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa375));
        EXPECT(0x0, gbc.readMem(0xa376));
        // CB 00 010F
        gbc.setState(0x95de, 0xdfab, 0x69a0, 0x1b83, 0x28fc, 0xb884, 0x0, 0x1);
        gbc.writeMem(0x95de, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xdfab, gbc.sp());
        EXPECT(0x95e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95de));
        EXPECT(0x0, gbc.readMem(0x95df));
        // CB 00 0110
        gbc.setState(0x9479, 0x9f17, 0xcd60, 0x7238, 0x7110, 0x48b0, 0x1, 0x0);
        gbc.writeMem(0x9479, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x9f17, gbc.sp());
        EXPECT(0x947b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9479));
        EXPECT(0x0, gbc.readMem(0x947a));
        // CB 00 0111
        gbc.setState(0x3e0b, 0x4556, 0x7ec0, 0x2fb8, 0xe948, 0x7ae9, 0x0, 0x1);
        gbc.writeMem(0x3e0b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x4556, gbc.sp());
        EXPECT(0x3e0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0112
        gbc.setState(0x97be, 0xf412, 0xaf90, 0xcfb0, 0x3c86, 0x3ac9, 0x1, 0x1);
        gbc.writeMem(0x97be, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xf412, gbc.sp());
        EXPECT(0x97c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97be));
        EXPECT(0x0, gbc.readMem(0x97bf));
        // CB 00 0113
        gbc.setState(0xb3f7, 0xdaa2, 0x26f0, 0x31b2, 0x88d3, 0x46d2, 0x1, 0x0);
        gbc.writeMem(0xb3f7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xdaa2, gbc.sp());
        EXPECT(0xb3f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3f7));
        EXPECT(0x0, gbc.readMem(0xb3f8));
        // CB 00 0114
        gbc.setState(0x78fe, 0x70eb, 0x5590, 0x1015, 0x5918, 0x45c7, 0x0, 0x1);
        gbc.writeMem(0x78fe, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x70eb, gbc.sp());
        EXPECT(0x7900, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0115
        gbc.setState(0x8e47, 0xf223, 0x5ed0, 0x6ba6, 0x3411, 0x2c81, 0x1, 0x1);
        gbc.writeMem(0x8e47, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xf223, gbc.sp());
        EXPECT(0x8e49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e47));
        EXPECT(0x0, gbc.readMem(0x8e48));
        // CB 00 0116
        gbc.setState(0x567e, 0x2687, 0x8920, 0x2f2a, 0xae4b, 0xadf9, 0x1, 0x0);
        gbc.writeMem(0x567e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x2687, gbc.sp());
        EXPECT(0x5680, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0117
        gbc.setState(0x3268, 0xd65d, 0x3d30, 0x473d, 0x2b49, 0x235a, 0x1, 0x0);
        gbc.writeMem(0x3268, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xd65d, gbc.sp());
        EXPECT(0x326a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0118
        gbc.setState(0x193a, 0xda73, 0xaf00, 0x11ed, 0x4b0e, 0xac6d, 0x0, 0x1);
        gbc.writeMem(0x193a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xda73, gbc.sp());
        EXPECT(0x193c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0119
        gbc.setState(0xe336, 0x18fd, 0x8120, 0xe325, 0x2a40, 0xc23f, 0x1, 0x1);
        gbc.writeMem(0xe336, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x18fd, gbc.sp());
        EXPECT(0xe338, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe336));
        EXPECT(0x0, gbc.readMem(0xe337));
        // CB 00 011A
        gbc.setState(0x840c, 0x68ef, 0x5980, 0x8f0c, 0xfd96, 0x7ba1, 0x1, 0x1);
        gbc.writeMem(0x840c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x68ef, gbc.sp());
        EXPECT(0x840e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x840c));
        EXPECT(0x0, gbc.readMem(0x840d));
        // CB 00 011B
        gbc.setState(0xa64c, 0x9094, 0xd420, 0x6bf4, 0x6044, 0x9e31, 0x0, 0x0);
        gbc.writeMem(0xa64c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x9094, gbc.sp());
        EXPECT(0xa64e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa64c));
        EXPECT(0x0, gbc.readMem(0xa64d));
        // CB 00 011C
        gbc.setState(0x1a03, 0x8ccc, 0x16d0, 0x747a, 0xeb56, 0xcace, 0x1, 0x1);
        gbc.writeMem(0x1a03, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x8ccc, gbc.sp());
        EXPECT(0x1a05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 011D
        gbc.setState(0x5611, 0x284b, 0x6500, 0x50b6, 0x29f, 0x99da, 0x0, 0x1);
        gbc.writeMem(0x5611, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x284b, gbc.sp());
        EXPECT(0x5613, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 011E
        gbc.setState(0x38a5, 0x4975, 0x66f0, 0x6a7, 0xf141, 0xc7d4, 0x0, 0x0);
        gbc.writeMem(0x38a5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x4975, gbc.sp());
        EXPECT(0x38a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 011F
        gbc.setState(0x7e46, 0x90dc, 0x4d50, 0x999a, 0x9e3e, 0xe577, 0x0, 0x0);
        gbc.writeMem(0x7e46, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x90dc, gbc.sp());
        EXPECT(0x7e48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0120
        gbc.setState(0x56e2, 0x831d, 0x6910, 0x130d, 0x6aac, 0x6c9e, 0x0, 0x0);
        gbc.writeMem(0x56e2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x831d, gbc.sp());
        EXPECT(0x56e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0121
        gbc.setState(0xe954, 0xdcab, 0x3980, 0xc4c5, 0x9759, 0x9d44, 0x1, 0x1);
        gbc.writeMem(0xe954, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xdcab, gbc.sp());
        EXPECT(0xe956, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe954));
        EXPECT(0x0, gbc.readMem(0xe955));
        // CB 00 0122
        gbc.setState(0x1b67, 0xafc7, 0x80, 0xfcce, 0xff03, 0xcff0, 0x1, 0x1);
        gbc.writeMem(0x1b67, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xafc7, gbc.sp());
        EXPECT(0x1b69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0123
        gbc.setState(0xbda3, 0xba2d, 0x1510, 0x8d0d, 0xe72a, 0x4a27, 0x0, 0x0);
        gbc.writeMem(0xbda3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xba2d, gbc.sp());
        EXPECT(0xbda5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbda3));
        EXPECT(0x0, gbc.readMem(0xbda4));
        // CB 00 0124
        gbc.setState(0x9113, 0xe1ff, 0x3530, 0xc07c, 0x4a, 0xb1c0, 0x0, 0x0);
        gbc.writeMem(0x9113, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xe1ff, gbc.sp());
        EXPECT(0x9115, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9113));
        EXPECT(0x0, gbc.readMem(0x9114));
        // CB 00 0125
        gbc.setState(0x9e3, 0xf235, 0x7070, 0x4d66, 0xb4f, 0xc049, 0x0, 0x1);
        gbc.writeMem(0x9e3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xf235, gbc.sp());
        EXPECT(0x9e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0126
        gbc.setState(0x76bb, 0xd314, 0x3570, 0x39af, 0x18f5, 0x90fd, 0x1, 0x0);
        gbc.writeMem(0x76bb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xd314, gbc.sp());
        EXPECT(0x76bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0127
        gbc.setState(0x57f7, 0xec5, 0x8d80, 0x6e33, 0xa396, 0xb546, 0x0, 0x1);
        gbc.writeMem(0x57f7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xec5, gbc.sp());
        EXPECT(0x57f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0128
        gbc.setState(0x2bd, 0x3146, 0xb8c0, 0x9ab6, 0x3fea, 0x5903, 0x0, 0x1);
        gbc.writeMem(0x2bd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x3146, gbc.sp());
        EXPECT(0x2bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0129
        gbc.setState(0x6bdc, 0x44c7, 0x1820, 0x26b2, 0x4e8f, 0x5d42, 0x1, 0x0);
        gbc.writeMem(0x6bdc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x44c7, gbc.sp());
        EXPECT(0x6bde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 012A
        gbc.setState(0xb1d1, 0x83d4, 0x3a70, 0xa817, 0xec58, 0x54b7, 0x0, 0x1);
        gbc.writeMem(0xb1d1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x83d4, gbc.sp());
        EXPECT(0xb1d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1d1));
        EXPECT(0x0, gbc.readMem(0xb1d2));
        // CB 00 012B
        gbc.setState(0xa0c3, 0x47a0, 0xf430, 0x52e1, 0xf4d, 0x5495, 0x0, 0x1);
        gbc.writeMem(0xa0c3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x47a0, gbc.sp());
        EXPECT(0xa0c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0c3));
        EXPECT(0x0, gbc.readMem(0xa0c4));
        // CB 00 012C
        gbc.setState(0x62c3, 0x1ed6, 0xfd10, 0xdb86, 0x4e92, 0x61ff, 0x0, 0x1);
        gbc.writeMem(0x62c3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x1ed6, gbc.sp());
        EXPECT(0x62c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 012D
        gbc.setState(0xd6cb, 0x2f62, 0xab90, 0xc1b, 0x6956, 0x520f, 0x1, 0x0);
        gbc.writeMem(0xd6cb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x2f62, gbc.sp());
        EXPECT(0xd6cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6cb));
        EXPECT(0x0, gbc.readMem(0xd6cc));
        // CB 00 012E
        gbc.setState(0x18d1, 0x4ca9, 0x2310, 0x87c8, 0x20fa, 0xbb39, 0x0, 0x0);
        gbc.writeMem(0x18d1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x4ca9, gbc.sp());
        EXPECT(0x18d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 012F
        gbc.setState(0xe23a, 0x2a1b, 0x33c0, 0x1d70, 0xd710, 0xc22a, 0x0, 0x1);
        gbc.writeMem(0xe23a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x2a1b, gbc.sp());
        EXPECT(0xe23c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe23a));
        EXPECT(0x0, gbc.readMem(0xe23b));
        // CB 00 0130
        gbc.setState(0x2fcd, 0x5537, 0x3e50, 0x9272, 0x40c5, 0xa1a9, 0x0, 0x0);
        gbc.writeMem(0x2fcd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x5537, gbc.sp());
        EXPECT(0x2fcf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0131
        gbc.setState(0xcd7c, 0xafb3, 0x3aa0, 0xa5af, 0xec25, 0xe369, 0x0, 0x0);
        gbc.writeMem(0xcd7c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xafb3, gbc.sp());
        EXPECT(0xcd7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd7c));
        EXPECT(0x0, gbc.readMem(0xcd7d));
        // CB 00 0132
        gbc.setState(0xabc7, 0x54ea, 0xde80, 0xa342, 0x662, 0xc365, 0x1, 0x1);
        gbc.writeMem(0xabc7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x54ea, gbc.sp());
        EXPECT(0xabc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabc7));
        EXPECT(0x0, gbc.readMem(0xabc8));
        // CB 00 0133
        gbc.setState(0x42a8, 0x2bb0, 0x6b70, 0xbe9c, 0x8ea7, 0xce6e, 0x1, 0x1);
        gbc.writeMem(0x42a8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x2bb0, gbc.sp());
        EXPECT(0x42aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0134
        gbc.setState(0xd6c3, 0x740c, 0xbf90, 0x8fe4, 0xa257, 0xdd8f, 0x0, 0x0);
        gbc.writeMem(0xd6c3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x740c, gbc.sp());
        EXPECT(0xd6c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6c3));
        EXPECT(0x0, gbc.readMem(0xd6c4));
        // CB 00 0135
        gbc.setState(0x12a4, 0xba2a, 0x1450, 0x2ed6, 0x57ee, 0x6cdb, 0x1, 0x0);
        gbc.writeMem(0x12a4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xba2a, gbc.sp());
        EXPECT(0x12a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0136
        gbc.setState(0x80da, 0x2339, 0x8890, 0x6384, 0x74ae, 0x3961, 0x0, 0x0);
        gbc.writeMem(0x80da, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x2339, gbc.sp());
        EXPECT(0x80dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80da));
        EXPECT(0x0, gbc.readMem(0x80db));
        // CB 00 0137
        gbc.setState(0x14f7, 0xae79, 0xac30, 0xe979, 0x1b88, 0xe5cb, 0x1, 0x1);
        gbc.writeMem(0x14f7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xae79, gbc.sp());
        EXPECT(0x14f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0138
        gbc.setState(0xd260, 0x3425, 0xd110, 0x541a, 0xaeb3, 0x1f6b, 0x1, 0x0);
        gbc.writeMem(0xd260, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x3425, gbc.sp());
        EXPECT(0xd262, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd260));
        EXPECT(0x0, gbc.readMem(0xd261));
        // CB 00 0139
        gbc.setState(0x17ca, 0x6244, 0x58a0, 0xddcb, 0xb6c4, 0xedba, 0x0, 0x0);
        gbc.writeMem(0x17ca, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x6244, gbc.sp());
        EXPECT(0x17cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 013A
        gbc.setState(0xee87, 0xd3d1, 0x3250, 0x890e, 0xdb18, 0xd44c, 0x1, 0x0);
        gbc.writeMem(0xee87, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xd3d1, gbc.sp());
        EXPECT(0xee89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee87));
        EXPECT(0x0, gbc.readMem(0xee88));
        // CB 00 013D
        gbc.setState(0x7a65, 0xca25, 0x11d0, 0xdc52, 0x788a, 0x1271, 0x1, 0x0);
        gbc.writeMem(0x7a65, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xca25, gbc.sp());
        EXPECT(0x7a67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 013E
        gbc.setState(0x9102, 0x1c30, 0x3b0, 0xaf9b, 0x27b, 0xec09, 0x0, 0x1);
        gbc.writeMem(0x9102, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x1c30, gbc.sp());
        EXPECT(0x9104, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9102));
        EXPECT(0x0, gbc.readMem(0x9103));
        // CB 00 013F
        gbc.setState(0x3e0e, 0x3e4f, 0xb7a0, 0x63c7, 0xeb6, 0xe9b0, 0x1, 0x0);
        gbc.writeMem(0x3e0e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x3e4f, gbc.sp());
        EXPECT(0x3e10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0140
        gbc.setState(0xb327, 0x50c1, 0x56c0, 0xbc93, 0x7400, 0x30c0, 0x1, 0x1);
        gbc.writeMem(0xb327, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x50c1, gbc.sp());
        EXPECT(0xb329, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb327));
        EXPECT(0x0, gbc.readMem(0xb328));
        // CB 00 0141
        gbc.setState(0x407a, 0xef88, 0xaa0, 0xb942, 0xd165, 0x1c7e, 0x1, 0x0);
        gbc.writeMem(0x407a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xef88, gbc.sp());
        EXPECT(0x407c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0142
        gbc.setState(0xe792, 0x198a, 0x26e0, 0x2946, 0xb8f8, 0xfc5b, 0x1, 0x1);
        gbc.writeMem(0xe792, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x198a, gbc.sp());
        EXPECT(0xe794, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe792));
        EXPECT(0x0, gbc.readMem(0xe793));
        // CB 00 0143
        gbc.setState(0x7e5c, 0x113d, 0x78a0, 0x7b0b, 0xa6d6, 0x492d, 0x0, 0x1);
        gbc.writeMem(0x7e5c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x113d, gbc.sp());
        EXPECT(0x7e5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0144
        gbc.setState(0x394b, 0xacf4, 0xa1a0, 0xc34d, 0xd7ab, 0xe423, 0x1, 0x0);
        gbc.writeMem(0x394b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xacf4, gbc.sp());
        EXPECT(0x394d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0145
        gbc.setState(0xd4e5, 0xff0a, 0xf0b0, 0x5324, 0x8d05, 0x642a, 0x1, 0x1);
        gbc.writeMem(0xd4e5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xff0a, gbc.sp());
        EXPECT(0xd4e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4e5));
        EXPECT(0x0, gbc.readMem(0xd4e6));
        // CB 00 0146
        gbc.setState(0xbfe9, 0xcbe0, 0x6580, 0x903c, 0xac03, 0xd8c3, 0x1, 0x0);
        gbc.writeMem(0xbfe9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xcbe0, gbc.sp());
        EXPECT(0xbfeb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfe9));
        EXPECT(0x0, gbc.readMem(0xbfea));
        // CB 00 0147
        gbc.setState(0x4fef, 0x5bd7, 0x59d0, 0xe880, 0x62b, 0xe649, 0x1, 0x0);
        gbc.writeMem(0x4fef, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x5bd7, gbc.sp());
        EXPECT(0x4ff1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0148
        gbc.setState(0x7eb, 0xa085, 0xe350, 0xd40e, 0x9843, 0xb7b1, 0x0, 0x0);
        gbc.writeMem(0x7eb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xa085, gbc.sp());
        EXPECT(0x7ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0149
        gbc.setState(0x8a1e, 0x3449, 0x5190, 0xc7f7, 0x17a, 0xdb5d, 0x1, 0x1);
        gbc.writeMem(0x8a1e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x3449, gbc.sp());
        EXPECT(0x8a20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a1e));
        EXPECT(0x0, gbc.readMem(0x8a1f));
        // CB 00 014A
        gbc.setState(0x2fd8, 0x2ab8, 0xaa0, 0x36e3, 0xec53, 0xd8fb, 0x0, 0x0);
        gbc.writeMem(0x2fd8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x2ab8, gbc.sp());
        EXPECT(0x2fda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 014B
        gbc.setState(0xdf57, 0xea3a, 0x9db0, 0xe00b, 0x798c, 0x38bc, 0x0, 0x1);
        gbc.writeMem(0xdf57, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xea3a, gbc.sp());
        EXPECT(0xdf59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf57));
        EXPECT(0x0, gbc.readMem(0xdf58));
        // CB 00 014C
        gbc.setState(0x3193, 0xdeeb, 0x7b40, 0x3f3, 0x79a0, 0x85b2, 0x1, 0x1);
        gbc.writeMem(0x3193, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xdeeb, gbc.sp());
        EXPECT(0x3195, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 014D
        gbc.setState(0xa752, 0x6935, 0x7880, 0x61b6, 0x85b5, 0x411d, 0x0, 0x1);
        gbc.writeMem(0xa752, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x6935, gbc.sp());
        EXPECT(0xa754, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa752));
        EXPECT(0x0, gbc.readMem(0xa753));
        // CB 00 014E
        gbc.setState(0x4157, 0xc619, 0x56e0, 0x53cb, 0xee11, 0xdb82, 0x0, 0x1);
        gbc.writeMem(0x4157, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xc619, gbc.sp());
        EXPECT(0x4159, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 014F
        gbc.setState(0x4448, 0xebfd, 0x50b0, 0x3815, 0x70bc, 0xf335, 0x1, 0x0);
        gbc.writeMem(0x4448, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xebfd, gbc.sp());
        EXPECT(0x444a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0150
        gbc.setState(0xef15, 0xb2c7, 0xdfe0, 0x3ba1, 0x75c6, 0x2f26, 0x1, 0x1);
        gbc.writeMem(0xef15, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xb2c7, gbc.sp());
        EXPECT(0xef17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef15));
        EXPECT(0x0, gbc.readMem(0xef16));
        // CB 00 0151
        gbc.setState(0x1673, 0xb029, 0xede0, 0x35a6, 0xf866, 0x2206, 0x0, 0x1);
        gbc.writeMem(0x1673, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xb029, gbc.sp());
        EXPECT(0x1675, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0152
        gbc.setState(0xea36, 0x3200, 0xe660, 0xa834, 0xaf5, 0xb079, 0x0, 0x0);
        gbc.writeMem(0xea36, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x3200, gbc.sp());
        EXPECT(0xea38, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea36));
        EXPECT(0x0, gbc.readMem(0xea37));
        // CB 00 0153
        gbc.setState(0xdb94, 0x6e05, 0x5ed0, 0x24f1, 0xd659, 0xe7b, 0x1, 0x0);
        gbc.writeMem(0xdb94, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x6e05, gbc.sp());
        EXPECT(0xdb96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb94));
        EXPECT(0x0, gbc.readMem(0xdb95));
        // CB 00 0154
        gbc.setState(0xd4f1, 0x4069, 0xd30, 0x491d, 0x3c68, 0x9f7b, 0x0, 0x1);
        gbc.writeMem(0xd4f1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x4069, gbc.sp());
        EXPECT(0xd4f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4f1));
        EXPECT(0x0, gbc.readMem(0xd4f2));
        // CB 00 0155
        gbc.setState(0x547c, 0x5e56, 0xd0f0, 0x9b3c, 0xfbc3, 0xeb12, 0x1, 0x1);
        gbc.writeMem(0x547c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x5e56, gbc.sp());
        EXPECT(0x547e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0156
        gbc.setState(0x37a4, 0x84f5, 0x9320, 0x6f11, 0xab16, 0x8061, 0x1, 0x0);
        gbc.writeMem(0x37a4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x84f5, gbc.sp());
        EXPECT(0x37a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0157
        gbc.setState(0x2b1c, 0x47a4, 0xc6d0, 0x5757, 0x5de5, 0x80db, 0x1, 0x0);
        gbc.writeMem(0x2b1c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x47a4, gbc.sp());
        EXPECT(0x2b1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0158
        gbc.setState(0x9bb3, 0x896f, 0xa890, 0xc70a, 0xa84f, 0xe62a, 0x1, 0x1);
        gbc.writeMem(0x9bb3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x896f, gbc.sp());
        EXPECT(0x9bb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bb3));
        EXPECT(0x0, gbc.readMem(0x9bb4));
        // CB 00 0159
        gbc.setState(0x4c31, 0x9099, 0x3f70, 0x70e9, 0x71e7, 0x5ec4, 0x1, 0x0);
        gbc.writeMem(0x4c31, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x9099, gbc.sp());
        EXPECT(0x4c33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 015A
        gbc.setState(0x8e97, 0x8e4a, 0x100, 0x82b9, 0xcf06, 0xb9c9, 0x0, 0x1);
        gbc.writeMem(0x8e97, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x8e4a, gbc.sp());
        EXPECT(0x8e99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e97));
        EXPECT(0x0, gbc.readMem(0x8e98));
        // CB 00 015B
        gbc.setState(0x8f1, 0xf4d8, 0xdf30, 0x3cfd, 0x359b, 0xcf9, 0x1, 0x0);
        gbc.writeMem(0x8f1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xf4d8, gbc.sp());
        EXPECT(0x8f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 015C
        gbc.setState(0xe79d, 0x1eab, 0x1fe0, 0xf846, 0x9f7d, 0xb9a2, 0x1, 0x1);
        gbc.writeMem(0xe79d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x1eab, gbc.sp());
        EXPECT(0xe79f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe79d));
        EXPECT(0x0, gbc.readMem(0xe79e));
        // CB 00 015D
        gbc.setState(0x5fa7, 0xd12b, 0x9da0, 0x2892, 0xd7fb, 0xd819, 0x0, 0x1);
        gbc.writeMem(0x5fa7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xd12b, gbc.sp());
        EXPECT(0x5fa9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 015E
        gbc.setState(0x95cb, 0x69d3, 0x29d0, 0x29d4, 0xece5, 0xca56, 0x1, 0x0);
        gbc.writeMem(0x95cb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x69d3, gbc.sp());
        EXPECT(0x95cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95cb));
        EXPECT(0x0, gbc.readMem(0x95cc));
        // CB 00 015F
        gbc.setState(0x6b6b, 0xa485, 0x1950, 0x94b1, 0x80cd, 0x2be6, 0x0, 0x1);
        gbc.writeMem(0x6b6b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xa485, gbc.sp());
        EXPECT(0x6b6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0160
        gbc.setState(0x42ec, 0x2ff0, 0x3e70, 0x334d, 0x648f, 0xc7a5, 0x0, 0x0);
        gbc.writeMem(0x42ec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x2ff0, gbc.sp());
        EXPECT(0x42ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0161
        gbc.setState(0x60b5, 0x8fbe, 0xa490, 0xfb23, 0x52aa, 0x7e47, 0x0, 0x1);
        gbc.writeMem(0x60b5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x8fbe, gbc.sp());
        EXPECT(0x60b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0162
        gbc.setState(0x2a67, 0x60bf, 0xfc60, 0x74f4, 0xf75, 0x4943, 0x1, 0x0);
        gbc.writeMem(0x2a67, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x60bf, gbc.sp());
        EXPECT(0x2a69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0163
        gbc.setState(0xc21c, 0x8a0b, 0x1200, 0x4474, 0x784, 0xf984, 0x1, 0x1);
        gbc.writeMem(0xc21c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x8a0b, gbc.sp());
        EXPECT(0xc21e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc21c));
        EXPECT(0x0, gbc.readMem(0xc21d));
        // CB 00 0164
        gbc.setState(0x31e7, 0x1750, 0x6140, 0x5871, 0x531c, 0x514d, 0x1, 0x0);
        gbc.writeMem(0x31e7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x1750, gbc.sp());
        EXPECT(0x31e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0165
        gbc.setState(0xcd71, 0x302c, 0x59f0, 0x1729, 0x1165, 0xcdd3, 0x0, 0x1);
        gbc.writeMem(0xcd71, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x302c, gbc.sp());
        EXPECT(0xcd73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd71));
        EXPECT(0x0, gbc.readMem(0xcd72));
        // CB 00 0166
        gbc.setState(0xcbad, 0xa606, 0xa790, 0xb0a7, 0x4f13, 0x742c, 0x0, 0x0);
        gbc.writeMem(0xcbad, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xa606, gbc.sp());
        EXPECT(0xcbaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbad));
        EXPECT(0x0, gbc.readMem(0xcbae));
        // CB 00 0167
        gbc.setState(0xbcf6, 0xca59, 0x5dd0, 0xcb5, 0xc66b, 0xb0af, 0x0, 0x0);
        gbc.writeMem(0xbcf6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xca59, gbc.sp());
        EXPECT(0xbcf8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcf6));
        EXPECT(0x0, gbc.readMem(0xbcf7));
        // CB 00 0168
        gbc.setState(0x5a60, 0xd067, 0x7830, 0x9141, 0x2e5a, 0x6907, 0x0, 0x1);
        gbc.writeMem(0x5a60, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xd067, gbc.sp());
        EXPECT(0x5a62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0169
        gbc.setState(0x8f0c, 0x7848, 0x94e0, 0x9256, 0xdfe2, 0x4cb8, 0x1, 0x1);
        gbc.writeMem(0x8f0c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x7848, gbc.sp());
        EXPECT(0x8f0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f0c));
        EXPECT(0x0, gbc.readMem(0x8f0d));
        // CB 00 016A
        gbc.setState(0x15aa, 0x38c3, 0x3ab0, 0x3ab5, 0x1a8b, 0x8960, 0x1, 0x1);
        gbc.writeMem(0x15aa, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x38c3, gbc.sp());
        EXPECT(0x15ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 016B
        gbc.setState(0x7860, 0x3aae, 0x87c0, 0xc667, 0x2ea9, 0x8655, 0x1, 0x0);
        gbc.writeMem(0x7860, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x3aae, gbc.sp());
        EXPECT(0x7862, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 016C
        gbc.setState(0xc9a9, 0x232e, 0x5090, 0x8bc7, 0xd912, 0x1a3c, 0x0, 0x1);
        gbc.writeMem(0xc9a9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x232e, gbc.sp());
        EXPECT(0xc9ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9a9));
        EXPECT(0x0, gbc.readMem(0xc9aa));
        // CB 00 016D
        gbc.setState(0x1365, 0x80a0, 0x7070, 0xbff2, 0x5ed, 0x189, 0x0, 0x1);
        gbc.writeMem(0x1365, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x80a0, gbc.sp());
        EXPECT(0x1367, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 016E
        gbc.setState(0xe770, 0xa4bd, 0x5240, 0xa12a, 0x8fcc, 0xdfb2, 0x0, 0x1);
        gbc.writeMem(0xe770, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xa4bd, gbc.sp());
        EXPECT(0xe772, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe770));
        EXPECT(0x0, gbc.readMem(0xe771));
        // CB 00 016F
        gbc.setState(0xd7ae, 0x18b7, 0xa100, 0xe311, 0x3b4d, 0x3e5d, 0x1, 0x0);
        gbc.writeMem(0xd7ae, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x18b7, gbc.sp());
        EXPECT(0xd7b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7ae));
        EXPECT(0x0, gbc.readMem(0xd7af));
        // CB 00 0170
        gbc.setState(0x1b8c, 0xf9f3, 0x5cd0, 0xf315, 0xc937, 0xe444, 0x0, 0x0);
        gbc.writeMem(0x1b8c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xf9f3, gbc.sp());
        EXPECT(0x1b8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0171
        gbc.setState(0xc3d1, 0xfec7, 0xc950, 0x75d9, 0x4833, 0xea70, 0x0, 0x1);
        gbc.writeMem(0xc3d1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xfec7, gbc.sp());
        EXPECT(0xc3d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3d1));
        EXPECT(0x0, gbc.readMem(0xc3d2));
        // CB 00 0172
        gbc.setState(0x9fc1, 0xb73e, 0xa030, 0xe772, 0x2765, 0x41be, 0x0, 0x1);
        gbc.writeMem(0x9fc1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xb73e, gbc.sp());
        EXPECT(0x9fc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fc1));
        EXPECT(0x0, gbc.readMem(0x9fc2));
        // CB 00 0173
        gbc.setState(0x6b68, 0x55c8, 0xf90, 0xf9e8, 0x793f, 0xf6ce, 0x0, 0x0);
        gbc.writeMem(0x6b68, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x55c8, gbc.sp());
        EXPECT(0x6b6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0174
        gbc.setState(0x2750, 0x10a8, 0x17e0, 0x9941, 0x9307, 0x36c4, 0x1, 0x1);
        gbc.writeMem(0x2750, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x10a8, gbc.sp());
        EXPECT(0x2752, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0175
        gbc.setState(0x2d68, 0xda53, 0xda0, 0xa9d6, 0x842d, 0x5f07, 0x0, 0x1);
        gbc.writeMem(0x2d68, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xda53, gbc.sp());
        EXPECT(0x2d6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0176
        gbc.setState(0xb54a, 0x5355, 0xe80, 0x248, 0xa850, 0x834e, 0x0, 0x0);
        gbc.writeMem(0xb54a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x5355, gbc.sp());
        EXPECT(0xb54c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb54a));
        EXPECT(0x0, gbc.readMem(0xb54b));
        // CB 00 0177
        gbc.setState(0x4e35, 0xdbe8, 0xc290, 0xf46e, 0xa539, 0xe22f, 0x1, 0x1);
        gbc.writeMem(0x4e35, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xdbe8, gbc.sp());
        EXPECT(0x4e37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0178
        gbc.setState(0x2fec, 0x2907, 0x2370, 0xbf32, 0x8d1, 0xb3ad, 0x0, 0x0);
        gbc.writeMem(0x2fec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x2907, gbc.sp());
        EXPECT(0x2fee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0179
        gbc.setState(0x52c0, 0x5f9e, 0xadf0, 0x1c74, 0x72d8, 0xc778, 0x0, 0x0);
        gbc.writeMem(0x52c0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x5f9e, gbc.sp());
        EXPECT(0x52c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 017A
        gbc.setState(0x9b16, 0x5a22, 0x6e90, 0x5cd3, 0x746f, 0x6ab2, 0x1, 0x0);
        gbc.writeMem(0x9b16, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x5a22, gbc.sp());
        EXPECT(0x9b18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b16));
        EXPECT(0x0, gbc.readMem(0x9b17));
        // CB 00 017B
        gbc.setState(0xbd10, 0x6c3d, 0x400, 0x6c15, 0xcb70, 0x9ed6, 0x1, 0x1);
        gbc.writeMem(0xbd10, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x6c3d, gbc.sp());
        EXPECT(0xbd12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd10));
        EXPECT(0x0, gbc.readMem(0xbd11));
        // CB 00 017C
        gbc.setState(0x2435, 0xe474, 0xe780, 0xc8b5, 0x9d6b, 0xec82, 0x0, 0x0);
        gbc.writeMem(0x2435, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xe474, gbc.sp());
        EXPECT(0x2437, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 017D
        gbc.setState(0xaa39, 0xbf00, 0x60a0, 0xe365, 0x79b8, 0xa597, 0x0, 0x0);
        gbc.writeMem(0xaa39, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xbf00, gbc.sp());
        EXPECT(0xaa3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa39));
        EXPECT(0x0, gbc.readMem(0xaa3a));
        // CB 00 017E
        gbc.setState(0xb7db, 0x314d, 0x1b40, 0x29c1, 0xadf1, 0x77ab, 0x1, 0x1);
        gbc.writeMem(0xb7db, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x314d, gbc.sp());
        EXPECT(0xb7dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7db));
        EXPECT(0x0, gbc.readMem(0xb7dc));
        // CB 00 017F
        gbc.setState(0xcd34, 0xcb45, 0x4930, 0xdea5, 0x3ff5, 0xd8d, 0x1, 0x1);
        gbc.writeMem(0xcd34, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xcb45, gbc.sp());
        EXPECT(0xcd36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd34));
        EXPECT(0x0, gbc.readMem(0xcd35));
        // CB 00 0180
        gbc.setState(0x9d1a, 0x2426, 0xd450, 0x1f50, 0xe08d, 0xa167, 0x0, 0x1);
        gbc.writeMem(0x9d1a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x2426, gbc.sp());
        EXPECT(0x9d1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d1a));
        EXPECT(0x0, gbc.readMem(0x9d1b));
        // CB 00 0181
        gbc.setState(0x5835, 0xd744, 0x2370, 0x18f4, 0xb032, 0x1eaf, 0x0, 0x0);
        gbc.writeMem(0x5835, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xd744, gbc.sp());
        EXPECT(0x5837, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0182
        gbc.setState(0xc476, 0xd46d, 0xb320, 0x9e75, 0xcca9, 0x3511, 0x0, 0x1);
        gbc.writeMem(0xc476, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xd46d, gbc.sp());
        EXPECT(0xc478, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc476));
        EXPECT(0x0, gbc.readMem(0xc477));
        // CB 00 0183
        gbc.setState(0x911, 0xdb37, 0x4eb0, 0x2535, 0xadfa, 0xb90a, 0x0, 0x1);
        gbc.writeMem(0x911, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xdb37, gbc.sp());
        EXPECT(0x913, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0184
        gbc.setState(0xaade, 0x2e02, 0xcfa0, 0xc479, 0xf79d, 0xafd7, 0x0, 0x0);
        gbc.writeMem(0xaade, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x2e02, gbc.sp());
        EXPECT(0xaae0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaade));
        EXPECT(0x0, gbc.readMem(0xaadf));
        // CB 00 0185
        gbc.setState(0xdd84, 0xce0f, 0xb210, 0xfe35, 0xc14, 0x41c7, 0x1, 0x1);
        gbc.writeMem(0xdd84, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xce0f, gbc.sp());
        EXPECT(0xdd86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd84));
        EXPECT(0x0, gbc.readMem(0xdd85));
        // CB 00 0186
        gbc.setState(0xc088, 0xc511, 0x5510, 0x4d69, 0xf3c8, 0x8290, 0x0, 0x0);
        gbc.writeMem(0xc088, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xc511, gbc.sp());
        EXPECT(0xc08a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc088));
        EXPECT(0x0, gbc.readMem(0xc089));
        // CB 00 0187
        gbc.setState(0x369c, 0x1448, 0x3560, 0x32ca, 0x7212, 0x676d, 0x1, 0x1);
        gbc.writeMem(0x369c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x1448, gbc.sp());
        EXPECT(0x369e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0188
        gbc.setState(0x8260, 0xbc1c, 0xf920, 0xbf5d, 0x3dd6, 0xa543, 0x0, 0x1);
        gbc.writeMem(0x8260, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xbc1c, gbc.sp());
        EXPECT(0x8262, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8260));
        EXPECT(0x0, gbc.readMem(0x8261));
        // CB 00 018A
        gbc.setState(0xbcea, 0x26db, 0x2d10, 0xdbbb, 0x29e2, 0xe9f6, 0x0, 0x0);
        gbc.writeMem(0xbcea, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x26db, gbc.sp());
        EXPECT(0xbcec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcea));
        EXPECT(0x0, gbc.readMem(0xbceb));
        // CB 00 018B
        gbc.setState(0x5cf2, 0xf992, 0xece0, 0xe7f, 0x251, 0x413d, 0x1, 0x1);
        gbc.writeMem(0x5cf2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xf992, gbc.sp());
        EXPECT(0x5cf4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 018C
        gbc.setState(0x7dff, 0x4546, 0x5b0, 0x3134, 0x5641, 0x52eb, 0x1, 0x0);
        gbc.writeMem(0x7dff, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x4546, gbc.sp());
        EXPECT(0x7e01, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 018D
        gbc.setState(0x785f, 0x5cfb, 0x7500, 0x59, 0x61dc, 0xc0df, 0x0, 0x0);
        gbc.writeMem(0x785f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x5cfb, gbc.sp());
        EXPECT(0x7861, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 018E
        gbc.setState(0x42d9, 0x72d1, 0xca70, 0x568a, 0x9b03, 0x1e33, 0x0, 0x0);
        gbc.writeMem(0x42d9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x72d1, gbc.sp());
        EXPECT(0x42db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 018F
        gbc.setState(0x77e8, 0x8022, 0x81d0, 0x3297, 0xbcb2, 0x32ce, 0x0, 0x0);
        gbc.writeMem(0x77e8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x8022, gbc.sp());
        EXPECT(0x77ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0190
        gbc.setState(0x2234, 0xbc80, 0xe20, 0x877, 0x3cbb, 0xfe1e, 0x1, 0x0);
        gbc.writeMem(0x2234, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xbc80, gbc.sp());
        EXPECT(0x2236, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0191
        gbc.setState(0xcfcb, 0x8c32, 0x8cd0, 0x8ba, 0x309e, 0x4a2f, 0x1, 0x1);
        gbc.writeMem(0xcfcb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x8c32, gbc.sp());
        EXPECT(0xcfcd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfcb));
        EXPECT(0x0, gbc.readMem(0xcfcc));
        // CB 00 0192
        gbc.setState(0xc7cb, 0x8705, 0x5170, 0xc5ec, 0x58ad, 0xdec7, 0x0, 0x1);
        gbc.writeMem(0xc7cb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x8705, gbc.sp());
        EXPECT(0xc7cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7cb));
        EXPECT(0x0, gbc.readMem(0xc7cc));
        // CB 00 0193
        gbc.setState(0x4494, 0x4be2, 0x2a80, 0xd7e9, 0x7e6e, 0x8194, 0x0, 0x0);
        gbc.writeMem(0x4494, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x4be2, gbc.sp());
        EXPECT(0x4496, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0194
        gbc.setState(0x32f4, 0x1af3, 0x21a0, 0xe892, 0xb0c2, 0x9689, 0x1, 0x0);
        gbc.writeMem(0x32f4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x1af3, gbc.sp());
        EXPECT(0x32f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0195
        gbc.setState(0xace6, 0x20cb, 0x5990, 0x1b02, 0xd193, 0x6f44, 0x1, 0x1);
        gbc.writeMem(0xace6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x20cb, gbc.sp());
        EXPECT(0xace8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xace6));
        EXPECT(0x0, gbc.readMem(0xace7));
        // CB 00 0196
        gbc.setState(0x9dbf, 0x3778, 0xd780, 0x673e, 0xbb04, 0x73c, 0x1, 0x1);
        gbc.writeMem(0x9dbf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x3778, gbc.sp());
        EXPECT(0x9dc1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dbf));
        EXPECT(0x0, gbc.readMem(0x9dc0));
        // CB 00 0197
        gbc.setState(0x88e4, 0x8b95, 0xec90, 0x25a8, 0xcc45, 0xd0b6, 0x0, 0x1);
        gbc.writeMem(0x88e4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x8b95, gbc.sp());
        EXPECT(0x88e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88e4));
        EXPECT(0x0, gbc.readMem(0x88e5));
        // CB 00 0198
        gbc.setState(0xdcad, 0x5732, 0x1220, 0x6dbc, 0x3a18, 0x98d1, 0x0, 0x0);
        gbc.writeMem(0xdcad, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x5732, gbc.sp());
        EXPECT(0xdcaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcad));
        EXPECT(0x0, gbc.readMem(0xdcae));
        // CB 00 0199
        gbc.setState(0x778c, 0x3726, 0x1c50, 0x116, 0x651, 0xb8dd, 0x0, 0x1);
        gbc.writeMem(0x778c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x3726, gbc.sp());
        EXPECT(0x778e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 019A
        gbc.setState(0xb403, 0x6c85, 0x8e70, 0x2f4b, 0x8d9d, 0x3aed, 0x0, 0x0);
        gbc.writeMem(0xb403, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x6c85, gbc.sp());
        EXPECT(0xb405, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb403));
        EXPECT(0x0, gbc.readMem(0xb404));
        // CB 00 019B
        gbc.setState(0x4045, 0x4fe3, 0xd630, 0x5202, 0xf744, 0xce68, 0x1, 0x1);
        gbc.writeMem(0x4045, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x4fe3, gbc.sp());
        EXPECT(0x4047, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 019C
        gbc.setState(0x4dc4, 0x128a, 0x40b0, 0x1052, 0x2f3d, 0x7d5f, 0x0, 0x0);
        gbc.writeMem(0x4dc4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x128a, gbc.sp());
        EXPECT(0x4dc6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 019D
        gbc.setState(0x3a04, 0x417a, 0x20c0, 0x67d7, 0xd015, 0x187c, 0x0, 0x0);
        gbc.writeMem(0x3a04, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x417a, gbc.sp());
        EXPECT(0x3a06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 019E
        gbc.setState(0x8138, 0x48aa, 0x1260, 0x132, 0x42cf, 0xd0b4, 0x1, 0x0);
        gbc.writeMem(0x8138, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x48aa, gbc.sp());
        EXPECT(0x813a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8138));
        EXPECT(0x0, gbc.readMem(0x8139));
        // CB 00 019F
        gbc.setState(0x8502, 0x34e6, 0xdb40, 0x7d3b, 0x9a79, 0xc598, 0x1, 0x1);
        gbc.writeMem(0x8502, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x34e6, gbc.sp());
        EXPECT(0x8504, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8502));
        EXPECT(0x0, gbc.readMem(0x8503));
        // CB 00 01A0
        gbc.setState(0x7971, 0x831f, 0x6c0, 0x5e26, 0xe176, 0x9b70, 0x0, 0x0);
        gbc.writeMem(0x7971, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x831f, gbc.sp());
        EXPECT(0x7973, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01A1
        gbc.setState(0x5fae, 0x24c0, 0x8e00, 0x1f88, 0x8ba8, 0xd245, 0x0, 0x0);
        gbc.writeMem(0x5fae, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x24c0, gbc.sp());
        EXPECT(0x5fb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01A2
        gbc.setState(0x725d, 0xfdc2, 0x9ca0, 0x6292, 0xcc20, 0xe645, 0x1, 0x0);
        gbc.writeMem(0x725d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xfdc2, gbc.sp());
        EXPECT(0x725f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01A3
        gbc.setState(0x2dd6, 0x833b, 0x94e0, 0xafb2, 0xec98, 0xe45a, 0x0, 0x0);
        gbc.writeMem(0x2dd6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x833b, gbc.sp());
        EXPECT(0x2dd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01A4
        gbc.setState(0x5dee, 0x19f8, 0xa3e0, 0x5ac7, 0xa006, 0x66f4, 0x1, 0x1);
        gbc.writeMem(0x5dee, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x19f8, gbc.sp());
        EXPECT(0x5df0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01A5
        gbc.setState(0xa149, 0x72cb, 0xfb20, 0xe5e4, 0x2114, 0x5978, 0x1, 0x0);
        gbc.writeMem(0xa149, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x72cb, gbc.sp());
        EXPECT(0xa14b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa149));
        EXPECT(0x0, gbc.readMem(0xa14a));
        // CB 00 01A6
        gbc.setState(0x6238, 0x6e63, 0xa3e0, 0x5383, 0x8d7, 0x8db7, 0x1, 0x1);
        gbc.writeMem(0x6238, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x6e63, gbc.sp());
        EXPECT(0x623a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01A7
        gbc.setState(0x2987, 0xfb0f, 0x3c10, 0xee5c, 0xaf81, 0x9945, 0x0, 0x1);
        gbc.writeMem(0x2987, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xfb0f, gbc.sp());
        EXPECT(0x2989, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01A8
        gbc.setState(0x84a1, 0xd986, 0x6f70, 0x635c, 0x572d, 0x575e, 0x1, 0x0);
        gbc.writeMem(0x84a1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xd986, gbc.sp());
        EXPECT(0x84a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84a1));
        EXPECT(0x0, gbc.readMem(0x84a2));
        // CB 00 01A9
        gbc.setState(0x76e6, 0xd279, 0xe970, 0xe34c, 0xa003, 0x37dd, 0x0, 0x1);
        gbc.writeMem(0x76e6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xd279, gbc.sp());
        EXPECT(0x76e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01AA
        gbc.setState(0xdfd4, 0xb07b, 0x650, 0x47b, 0x9a36, 0x5d4f, 0x1, 0x0);
        gbc.writeMem(0xdfd4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xb07b, gbc.sp());
        EXPECT(0xdfd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfd4));
        EXPECT(0x0, gbc.readMem(0xdfd5));
        // CB 00 01AB
        gbc.setState(0x64d9, 0xfd31, 0x8080, 0xf850, 0x54e, 0xaa74, 0x0, 0x0);
        gbc.writeMem(0x64d9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xfd31, gbc.sp());
        EXPECT(0x64db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01AC
        gbc.setState(0x37cf, 0xac15, 0x87d0, 0x7ac9, 0x5c5d, 0x94cf, 0x0, 0x0);
        gbc.writeMem(0x37cf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xac15, gbc.sp());
        EXPECT(0x37d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01AD
        gbc.setState(0xa134, 0xd382, 0x5d00, 0xdbd1, 0x74d0, 0xbd67, 0x0, 0x0);
        gbc.writeMem(0xa134, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xd382, gbc.sp());
        EXPECT(0xa136, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa134));
        EXPECT(0x0, gbc.readMem(0xa135));
        // CB 00 01AE
        gbc.setState(0x904b, 0x45c6, 0xc1d0, 0x4ccf, 0xd3c7, 0xf4c7, 0x0, 0x1);
        gbc.writeMem(0x904b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x45c6, gbc.sp());
        EXPECT(0x904d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x904b));
        EXPECT(0x0, gbc.readMem(0x904c));
        // CB 00 01AF
        gbc.setState(0x21cb, 0x6867, 0x1280, 0x3dca, 0xe79c, 0xd41e, 0x0, 0x0);
        gbc.writeMem(0x21cb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x6867, gbc.sp());
        EXPECT(0x21cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01B0
        gbc.setState(0xa8b1, 0xcb4b, 0x7c20, 0x9964, 0x5ed8, 0x2354, 0x0, 0x1);
        gbc.writeMem(0xa8b1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xcb4b, gbc.sp());
        EXPECT(0xa8b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8b1));
        EXPECT(0x0, gbc.readMem(0xa8b2));
        // CB 00 01B1
        gbc.setState(0x1604, 0x12f4, 0x2600, 0x9d30, 0xde7b, 0xf5a, 0x0, 0x1);
        gbc.writeMem(0x1604, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x12f4, gbc.sp());
        EXPECT(0x1606, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01B2
        gbc.setState(0xdf38, 0xecb3, 0xfd60, 0x1467, 0x7508, 0xf557, 0x1, 0x0);
        gbc.writeMem(0xdf38, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xecb3, gbc.sp());
        EXPECT(0xdf3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf38));
        EXPECT(0x0, gbc.readMem(0xdf39));
        // CB 00 01B3
        gbc.setState(0xb811, 0x5fe5, 0xcdb0, 0xb890, 0xd326, 0xf796, 0x1, 0x1);
        gbc.writeMem(0xb811, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x5fe5, gbc.sp());
        EXPECT(0xb813, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb811));
        EXPECT(0x0, gbc.readMem(0xb812));
        // CB 00 01B5
        gbc.setState(0xccdc, 0x9a56, 0xa100, 0x8c38, 0x44e9, 0xe5dc, 0x1, 0x1);
        gbc.writeMem(0xccdc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x9a56, gbc.sp());
        EXPECT(0xccde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccdc));
        EXPECT(0x0, gbc.readMem(0xccdd));
        // CB 00 01B6
        gbc.setState(0xbae5, 0x82e8, 0x4220, 0x423a, 0x13c1, 0xefd3, 0x1, 0x1);
        gbc.writeMem(0xbae5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x82e8, gbc.sp());
        EXPECT(0xbae7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbae5));
        EXPECT(0x0, gbc.readMem(0xbae6));
        // CB 00 01B7
        gbc.setState(0xe1e0, 0x4d15, 0x6c10, 0x860b, 0x35bc, 0xe5a5, 0x1, 0x0);
        gbc.writeMem(0xe1e0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x4d15, gbc.sp());
        EXPECT(0xe1e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1e0));
        EXPECT(0x0, gbc.readMem(0xe1e1));
        // CB 00 01B8
        gbc.setState(0x19a9, 0xbbae, 0xfa10, 0x3251, 0xd31d, 0x1da1, 0x1, 0x1);
        gbc.writeMem(0x19a9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xbbae, gbc.sp());
        EXPECT(0x19ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01B9
        gbc.setState(0x6909, 0x60b4, 0xe250, 0x32f1, 0x7389, 0xf8ea, 0x1, 0x1);
        gbc.writeMem(0x6909, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x60b4, gbc.sp());
        EXPECT(0x690b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01BA
        gbc.setState(0xe909, 0xdef4, 0xfb10, 0x1b8, 0x8c2c, 0x52c, 0x1, 0x0);
        gbc.writeMem(0xe909, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xdef4, gbc.sp());
        EXPECT(0xe90b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe909));
        EXPECT(0x0, gbc.readMem(0xe90a));
        // CB 00 01BB
        gbc.setState(0xe2fd, 0xf011, 0x22f0, 0xdf54, 0xa427, 0x6213, 0x1, 0x1);
        gbc.writeMem(0xe2fd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xf011, gbc.sp());
        EXPECT(0xe2ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2fd));
        EXPECT(0x0, gbc.readMem(0xe2fe));
        // CB 00 01BC
        gbc.setState(0x6a47, 0x7ec7, 0xaa90, 0x3cab, 0xf616, 0xee4c, 0x1, 0x1);
        gbc.writeMem(0x6a47, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x7ec7, gbc.sp());
        EXPECT(0x6a49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01BD
        gbc.setState(0x513e, 0x9ba5, 0xf7b0, 0x59a0, 0x2e68, 0xccc6, 0x1, 0x1);
        gbc.writeMem(0x513e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x9ba5, gbc.sp());
        EXPECT(0x5140, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01BF
        gbc.setState(0x4f7b, 0x5c1f, 0x390, 0x6293, 0xb00f, 0x42f, 0x0, 0x0);
        gbc.writeMem(0x4f7b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x5c1f, gbc.sp());
        EXPECT(0x4f7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01C0
        gbc.setState(0xbdde, 0x8f84, 0x95b0, 0x10, 0x7765, 0x28e0, 0x1, 0x1);
        gbc.writeMem(0xbdde, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x8f84, gbc.sp());
        EXPECT(0xbde0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdde));
        EXPECT(0x0, gbc.readMem(0xbddf));
        // CB 00 01C1
        gbc.setState(0xd3f6, 0xa62e, 0xa030, 0xfa8c, 0xf47, 0x6390, 0x0, 0x1);
        gbc.writeMem(0xd3f6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xa62e, gbc.sp());
        EXPECT(0xd3f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3f6));
        EXPECT(0x0, gbc.readMem(0xd3f7));
        // CB 00 01C2
        gbc.setState(0xd062, 0x7766, 0xd640, 0x4dab, 0x2b4d, 0x1c49, 0x1, 0x0);
        gbc.writeMem(0xd062, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x7766, gbc.sp());
        EXPECT(0xd064, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd062));
        EXPECT(0x0, gbc.readMem(0xd063));
        // CB 00 01C3
        gbc.setState(0x112d, 0x75c6, 0x67b0, 0x35c2, 0x3477, 0x8237, 0x1, 0x1);
        gbc.writeMem(0x112d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x75c6, gbc.sp());
        EXPECT(0x112f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01C4
        gbc.setState(0x657a, 0x24a8, 0x6690, 0x55fc, 0xc836, 0x5058, 0x0, 0x0);
        gbc.writeMem(0x657a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x24a8, gbc.sp());
        EXPECT(0x657c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01C5
        gbc.setState(0x3da2, 0xeaa2, 0x8ff0, 0xb4ef, 0x3867, 0xc2af, 0x0, 0x0);
        gbc.writeMem(0x3da2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xeaa2, gbc.sp());
        EXPECT(0x3da4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01C6
        gbc.setState(0x8785, 0xf5f1, 0x3be0, 0x33d7, 0x5a5a, 0x531e, 0x0, 0x0);
        gbc.writeMem(0x8785, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xf5f1, gbc.sp());
        EXPECT(0x8787, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8785));
        EXPECT(0x0, gbc.readMem(0x8786));
        // CB 00 01C8
        gbc.setState(0xbd88, 0xd049, 0x4e00, 0xa200, 0x69dc, 0x6e76, 0x0, 0x1);
        gbc.writeMem(0xbd88, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xd049, gbc.sp());
        EXPECT(0xbd8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd88));
        EXPECT(0x0, gbc.readMem(0xbd89));
        // CB 00 01C9
        gbc.setState(0x2fa1, 0x2e59, 0x7e90, 0x4e, 0x96dc, 0xc647, 0x0, 0x0);
        gbc.writeMem(0x2fa1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x2e59, gbc.sp());
        EXPECT(0x2fa3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01CA
        gbc.setState(0xa066, 0xd469, 0x8870, 0xf934, 0xaa51, 0x7752, 0x1, 0x0);
        gbc.writeMem(0xa066, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xd469, gbc.sp());
        EXPECT(0xa068, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa066));
        EXPECT(0x0, gbc.readMem(0xa067));
        // CB 00 01CB
        gbc.setState(0x223a, 0xf4db, 0xd1e0, 0x2b32, 0x374a, 0xa27b, 0x0, 0x0);
        gbc.writeMem(0x223a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xf4db, gbc.sp());
        EXPECT(0x223c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01CC
        gbc.setState(0xe733, 0xf502, 0x5c00, 0x8456, 0xa1cc, 0x1558, 0x1, 0x1);
        gbc.writeMem(0xe733, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xf502, gbc.sp());
        EXPECT(0xe735, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe733));
        EXPECT(0x0, gbc.readMem(0xe734));
        // CB 00 01CD
        gbc.setState(0xd505, 0xaaf8, 0x2b20, 0x4896, 0x7e9b, 0xb77f, 0x1, 0x0);
        gbc.writeMem(0xd505, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xaaf8, gbc.sp());
        EXPECT(0xd507, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd505));
        EXPECT(0x0, gbc.readMem(0xd506));
        // CB 00 01CE
        gbc.setState(0xd46e, 0xd472, 0x2b20, 0x7d59, 0xac7, 0x583c, 0x1, 0x1);
        gbc.writeMem(0xd46e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xd472, gbc.sp());
        EXPECT(0xd470, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd46e));
        EXPECT(0x0, gbc.readMem(0xd46f));
        // CB 00 01CF
        gbc.setState(0x1e69, 0x8e81, 0x9960, 0x5fdf, 0xe122, 0x5e00, 0x1, 0x1);
        gbc.writeMem(0x1e69, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x8e81, gbc.sp());
        EXPECT(0x1e6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01D0
        gbc.setState(0xaf5f, 0x3320, 0x4290, 0x3b45, 0xac, 0xc77a, 0x1, 0x1);
        gbc.writeMem(0xaf5f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x3320, gbc.sp());
        EXPECT(0xaf61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf5f));
        EXPECT(0x0, gbc.readMem(0xaf60));
        // CB 00 01D1
        gbc.setState(0xa851, 0x1bb4, 0xf5c0, 0x1f8d, 0xfb6, 0xe9e8, 0x0, 0x1);
        gbc.writeMem(0xa851, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x1bb4, gbc.sp());
        EXPECT(0xa853, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa851));
        EXPECT(0x0, gbc.readMem(0xa852));
        // CB 00 01D3
        gbc.setState(0x217b, 0xec11, 0x3080, 0x58e8, 0xdd73, 0xb0db, 0x1, 0x0);
        gbc.writeMem(0x217b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xec11, gbc.sp());
        EXPECT(0x217d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01D4
        gbc.setState(0x6869, 0xeed, 0xd9a0, 0xef9e, 0x93b5, 0x99ce, 0x0, 0x0);
        gbc.writeMem(0x6869, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xeed, gbc.sp());
        EXPECT(0x686b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01D5
        gbc.setState(0x4622, 0xe02d, 0xdb60, 0x89cf, 0x1430, 0x91d3, 0x1, 0x1);
        gbc.writeMem(0x4622, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xe02d, gbc.sp());
        EXPECT(0x4624, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01D6
        gbc.setState(0xbee3, 0xb605, 0xc40, 0xba28, 0x1fb3, 0x771a, 0x0, 0x0);
        gbc.writeMem(0xbee3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xb605, gbc.sp());
        EXPECT(0xbee5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbee3));
        EXPECT(0x0, gbc.readMem(0xbee4));
        // CB 00 01D7
        gbc.setState(0xb7fe, 0x625a, 0xc20, 0xa44a, 0x95a, 0x8469, 0x0, 0x1);
        gbc.writeMem(0xb7fe, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x625a, gbc.sp());
        EXPECT(0xb800, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7fe));
        EXPECT(0x0, gbc.readMem(0xb7ff));
        // CB 00 01D8
        gbc.setState(0x709, 0xbac9, 0xce30, 0xf024, 0xddd3, 0x63b5, 0x1, 0x1);
        gbc.writeMem(0x709, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xbac9, gbc.sp());
        EXPECT(0x70b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01D9
        gbc.setState(0x3d86, 0xf376, 0xe960, 0x8ac9, 0x8c48, 0x9588, 0x0, 0x1);
        gbc.writeMem(0x3d86, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xf376, gbc.sp());
        EXPECT(0x3d88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01DA
        gbc.setState(0x7db1, 0x8c00, 0x8620, 0xc2c0, 0x74be, 0x29a9, 0x0, 0x1);
        gbc.writeMem(0x7db1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x8c00, gbc.sp());
        EXPECT(0x7db3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01DB
        gbc.setState(0xb012, 0xae1d, 0xced0, 0xa743, 0x81ad, 0xa9e8, 0x1, 0x1);
        gbc.writeMem(0xb012, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xae1d, gbc.sp());
        EXPECT(0xb014, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb012));
        EXPECT(0x0, gbc.readMem(0xb013));
        // CB 00 01DC
        gbc.setState(0x4986, 0x8189, 0x2310, 0x24bd, 0x1752, 0x8ae, 0x1, 0x0);
        gbc.writeMem(0x4986, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x8189, gbc.sp());
        EXPECT(0x4988, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01DD
        gbc.setState(0x2cd, 0x5e2d, 0xc7a0, 0xa2c3, 0x1203, 0x49e0, 0x1, 0x0);
        gbc.writeMem(0x2cd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x5e2d, gbc.sp());
        EXPECT(0x2cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01DE
        gbc.setState(0x9086, 0x3eeb, 0x41c0, 0xdaed, 0xa559, 0x2304, 0x0, 0x1);
        gbc.writeMem(0x9086, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x3eeb, gbc.sp());
        EXPECT(0x9088, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9086));
        EXPECT(0x0, gbc.readMem(0x9087));
        // CB 00 01DF
        gbc.setState(0xb0ee, 0x48d8, 0x67d0, 0xee2, 0x694c, 0x311c, 0x0, 0x0);
        gbc.writeMem(0xb0ee, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x48d8, gbc.sp());
        EXPECT(0xb0f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0ee));
        EXPECT(0x0, gbc.readMem(0xb0ef));
        // CB 00 01E0
        gbc.setState(0x8b73, 0x5be4, 0x7d90, 0x1b10, 0xd537, 0x3d9d, 0x1, 0x0);
        gbc.writeMem(0x8b73, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x5be4, gbc.sp());
        EXPECT(0x8b75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b73));
        EXPECT(0x0, gbc.readMem(0x8b74));
        // CB 00 01E1
        gbc.setState(0xd295, 0xc559, 0x4a10, 0x62f2, 0x8ed6, 0x50e9, 0x0, 0x1);
        gbc.writeMem(0xd295, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xc559, gbc.sp());
        EXPECT(0xd297, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd295));
        EXPECT(0x0, gbc.readMem(0xd296));
        // CB 00 01E2
        gbc.setState(0xeb7, 0x556d, 0xfd00, 0x6583, 0xe6b3, 0x3d4, 0x0, 0x0);
        gbc.writeMem(0xeb7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x556d, gbc.sp());
        EXPECT(0xeb9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01E3
        gbc.setState(0xb948, 0x6107, 0xeaf0, 0x2797, 0xd31f, 0x3f, 0x0, 0x1);
        gbc.writeMem(0xb948, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x6107, gbc.sp());
        EXPECT(0xb94a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb948));
        EXPECT(0x0, gbc.readMem(0xb949));
        // CB 00 01E4
        gbc.setState(0xccd9, 0x7cdd, 0xb1e0, 0xfdf6, 0x73d4, 0xdf72, 0x1, 0x0);
        gbc.writeMem(0xccd9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x7cdd, gbc.sp());
        EXPECT(0xccdb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccd9));
        EXPECT(0x0, gbc.readMem(0xccda));
        // CB 00 01E5
        gbc.setState(0x76f3, 0x286b, 0xe410, 0xf, 0x82fe, 0xf669, 0x0, 0x0);
        gbc.writeMem(0x76f3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x286b, gbc.sp());
        EXPECT(0x76f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01E6
        gbc.setState(0x86a7, 0x6e52, 0x7050, 0x1b30, 0xfd89, 0x2ecf, 0x0, 0x1);
        gbc.writeMem(0x86a7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x6e52, gbc.sp());
        EXPECT(0x86a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86a7));
        EXPECT(0x0, gbc.readMem(0x86a8));
        // CB 00 01E7
        gbc.setState(0x5c0b, 0xea83, 0x1db0, 0x6988, 0x1a60, 0xa8c2, 0x1, 0x0);
        gbc.writeMem(0x5c0b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xea83, gbc.sp());
        EXPECT(0x5c0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01E8
        gbc.setState(0x186c, 0x213, 0x20a0, 0x27e1, 0x5928, 0x9261, 0x0, 0x0);
        gbc.writeMem(0x186c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x213, gbc.sp());
        EXPECT(0x186e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01E9
        gbc.setState(0xc7c0, 0xc75c, 0x9e20, 0x2cbd, 0xe2e7, 0x276, 0x0, 0x1);
        gbc.writeMem(0xc7c0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xc75c, gbc.sp());
        EXPECT(0xc7c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7c0));
        EXPECT(0x0, gbc.readMem(0xc7c1));
        // CB 00 01EA
        gbc.setState(0xddb, 0x279b, 0x5a60, 0x9133, 0x964a, 0x1476, 0x0, 0x1);
        gbc.writeMem(0xddb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x279b, gbc.sp());
        EXPECT(0xddd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01EB
        gbc.setState(0xef09, 0x54, 0x5a30, 0x4581, 0x89ad, 0x3b26, 0x0, 0x0);
        gbc.writeMem(0xef09, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x54, gbc.sp());
        EXPECT(0xef0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef09));
        EXPECT(0x0, gbc.readMem(0xef0a));
        // CB 00 01EC
        gbc.setState(0x99cf, 0x47b5, 0xa740, 0x8394, 0x6ad9, 0xaba0, 0x1, 0x0);
        gbc.writeMem(0x99cf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x47b5, gbc.sp());
        EXPECT(0x99d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99cf));
        EXPECT(0x0, gbc.readMem(0x99d0));
        // CB 00 01ED
        gbc.setState(0x2af6, 0x1249, 0x34d0, 0x36f3, 0xcb5e, 0x5aa3, 0x0, 0x1);
        gbc.writeMem(0x2af6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x1249, gbc.sp());
        EXPECT(0x2af8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01EE
        gbc.setState(0xc33f, 0x37fe, 0x36f0, 0x79aa, 0xb880, 0x39ad, 0x0, 0x0);
        gbc.writeMem(0xc33f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x37fe, gbc.sp());
        EXPECT(0xc341, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc33f));
        EXPECT(0x0, gbc.readMem(0xc340));
        // CB 00 01EF
        gbc.setState(0xe1ac, 0x74cc, 0x4600, 0xf479, 0x6c3d, 0x820a, 0x1, 0x0);
        gbc.writeMem(0xe1ac, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x74cc, gbc.sp());
        EXPECT(0xe1ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1ac));
        EXPECT(0x0, gbc.readMem(0xe1ad));
        // CB 00 01F0
        gbc.setState(0x9e46, 0xaa07, 0x53b0, 0x43fe, 0x9525, 0x734b, 0x1, 0x0);
        gbc.writeMem(0x9e46, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xaa07, gbc.sp());
        EXPECT(0x9e48, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e46));
        EXPECT(0x0, gbc.readMem(0x9e47));
        // CB 00 01F1
        gbc.setState(0xc91f, 0x8aa5, 0x7e50, 0x4cfd, 0x1cec, 0xe54a, 0x0, 0x0);
        gbc.writeMem(0xc91f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x8aa5, gbc.sp());
        EXPECT(0xc921, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc91f));
        EXPECT(0x0, gbc.readMem(0xc920));
        // CB 00 01F2
        gbc.setState(0x72f5, 0xf2b5, 0x2830, 0x1b5b, 0x6a52, 0x285c, 0x0, 0x1);
        gbc.writeMem(0x72f5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xf2b5, gbc.sp());
        EXPECT(0x72f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01F3
        gbc.setState(0x6fe9, 0xe53, 0xb50, 0x7d2c, 0xff7, 0xbd33, 0x1, 0x0);
        gbc.writeMem(0x6fe9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xe53, gbc.sp());
        EXPECT(0x6feb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01F4
        gbc.setState(0x9706, 0x499d, 0x1550, 0x247d, 0x4560, 0x3a41, 0x1, 0x0);
        gbc.writeMem(0x9706, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x499d, gbc.sp());
        EXPECT(0x9708, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9706));
        EXPECT(0x0, gbc.readMem(0x9707));
        // CB 00 01F5
        gbc.setState(0xa3b5, 0xd1cd, 0xf160, 0x3933, 0x6101, 0x412a, 0x0, 0x1);
        gbc.writeMem(0xa3b5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xd1cd, gbc.sp());
        EXPECT(0xa3b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3b5));
        EXPECT(0x0, gbc.readMem(0xa3b6));
        // CB 00 01F6
        gbc.setState(0xbf1c, 0xa99a, 0x8710, 0x9c1, 0x8917, 0x959d, 0x1, 0x0);
        gbc.writeMem(0xbf1c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xa99a, gbc.sp());
        EXPECT(0xbf1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf1c));
        EXPECT(0x0, gbc.readMem(0xbf1d));
        // CB 00 01F7
        gbc.setState(0x57e, 0xc3f6, 0xf980, 0x74f2, 0xf549, 0x8ffe, 0x0, 0x0);
        gbc.writeMem(0x57e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xc3f6, gbc.sp());
        EXPECT(0x580, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01F8
        gbc.setState(0x502c, 0x8ee1, 0xf5b0, 0x4af4, 0x9125, 0x1625, 0x0, 0x0);
        gbc.writeMem(0x502c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x8ee1, gbc.sp());
        EXPECT(0x502e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 01F9
        gbc.setState(0xa27b, 0x3913, 0x2f70, 0x403f, 0x3aaf, 0xbcf6, 0x0, 0x1);
        gbc.writeMem(0xa27b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x3913, gbc.sp());
        EXPECT(0xa27d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa27b));
        EXPECT(0x0, gbc.readMem(0xa27c));
        // CB 00 01FA
        gbc.setState(0x324e, 0xc058, 0xefa0, 0xb51a, 0x12d8, 0x1646, 0x1, 0x1);
        gbc.writeMem(0x324e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xc058, gbc.sp());
        EXPECT(0x3250, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01FB
        gbc.setState(0xb235, 0x2090, 0x3190, 0xbb70, 0x7613, 0xf295, 0x0, 0x0);
        gbc.writeMem(0xb235, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x2090, gbc.sp());
        EXPECT(0xb237, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb235));
        EXPECT(0x0, gbc.readMem(0xb236));
        // CB 00 01FC
        gbc.setState(0x3449, 0xc805, 0xa0e0, 0xfc24, 0x4182, 0xd71a, 0x0, 0x0);
        gbc.writeMem(0x3449, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xc805, gbc.sp());
        EXPECT(0x344b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 01FD
        gbc.setState(0x8a72, 0x7f32, 0xeb60, 0x45d1, 0x2c41, 0x508a, 0x0, 0x1);
        gbc.writeMem(0x8a72, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x7f32, gbc.sp());
        EXPECT(0x8a74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a72));
        EXPECT(0x0, gbc.readMem(0x8a73));
        // CB 00 01FE
        gbc.setState(0xec91, 0x7c12, 0xb80, 0xac8c, 0xd674, 0xc758, 0x0, 0x1);
        gbc.writeMem(0xec91, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x7c12, gbc.sp());
        EXPECT(0xec93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec91));
        EXPECT(0x0, gbc.readMem(0xec92));
        // CB 00 01FF
        gbc.setState(0x655f, 0x3d0a, 0xf250, 0x4175, 0x29f4, 0x590c, 0x1, 0x1);
        gbc.writeMem(0x655f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x3d0a, gbc.sp());
        EXPECT(0x6561, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0200
        gbc.setState(0x9268, 0x1c8, 0xc0c0, 0x2ff0, 0xa9f9, 0x4b10, 0x0, 0x1);
        gbc.writeMem(0x9268, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x1c8, gbc.sp());
        EXPECT(0x926a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9268));
        EXPECT(0x0, gbc.readMem(0x9269));
        // CB 00 0201
        gbc.setState(0x9275, 0xe9d, 0x1510, 0x92c3, 0x5f0d, 0xd8a0, 0x0, 0x0);
        gbc.writeMem(0x9275, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xe9d, gbc.sp());
        EXPECT(0x9277, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9275));
        EXPECT(0x0, gbc.readMem(0x9276));
        // CB 00 0202
        gbc.setState(0xd9f3, 0xfb39, 0xd590, 0x3e38, 0x54fe, 0x214c, 0x0, 0x0);
        gbc.writeMem(0xd9f3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xfb39, gbc.sp());
        EXPECT(0xd9f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9f3));
        EXPECT(0x0, gbc.readMem(0xd9f4));
        // CB 00 0203
        gbc.setState(0x337, 0x36, 0xc420, 0x3e7d, 0x1577, 0xe031, 0x1, 0x0);
        gbc.writeMem(0x337, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x36, gbc.sp());
        EXPECT(0x339, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0204
        gbc.setState(0x5783, 0xa07f, 0xb7a0, 0x92f7, 0x2170, 0xa3f1, 0x0, 0x1);
        gbc.writeMem(0x5783, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xa07f, gbc.sp());
        EXPECT(0x5785, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0205
        gbc.setState(0x80d9, 0xe714, 0x8f00, 0x59bf, 0x97fa, 0x88e1, 0x0, 0x1);
        gbc.writeMem(0x80d9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xe714, gbc.sp());
        EXPECT(0x80db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80d9));
        EXPECT(0x0, gbc.readMem(0x80da));
        // CB 00 0206
        gbc.setState(0x6d49, 0x11c9, 0xa6b0, 0x728f, 0xd345, 0x2724, 0x1, 0x1);
        gbc.writeMem(0x6d49, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x11c9, gbc.sp());
        EXPECT(0x6d4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0207
        gbc.setState(0x4754, 0x6340, 0x6940, 0x39f9, 0x278a, 0x70d3, 0x0, 0x1);
        gbc.writeMem(0x4754, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x6340, gbc.sp());
        EXPECT(0x4756, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0208
        gbc.setState(0x4b65, 0xaf1a, 0x2d40, 0x67f3, 0x99ad, 0x9c9e, 0x1, 0x1);
        gbc.writeMem(0x4b65, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xaf1a, gbc.sp());
        EXPECT(0x4b67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0209
        gbc.setState(0x61d3, 0x60c, 0x9100, 0x16, 0xfcb, 0x4e1, 0x1, 0x0);
        gbc.writeMem(0x61d3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x60c, gbc.sp());
        EXPECT(0x61d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 020A
        gbc.setState(0xadd8, 0xd880, 0xc660, 0x9d3d, 0xa94c, 0x95bc, 0x1, 0x1);
        gbc.writeMem(0xadd8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xd880, gbc.sp());
        EXPECT(0xadda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadd8));
        EXPECT(0x0, gbc.readMem(0xadd9));
        // CB 00 020B
        gbc.setState(0x4d0d, 0x9ee9, 0xe0f0, 0xfcfd, 0xf12e, 0xc88e, 0x1, 0x1);
        gbc.writeMem(0x4d0d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x9ee9, gbc.sp());
        EXPECT(0x4d0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 020C
        gbc.setState(0x4af, 0xa474, 0xa1b0, 0x4ab4, 0x5970, 0x6f7, 0x1, 0x1);
        gbc.writeMem(0x4af, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xa474, gbc.sp());
        EXPECT(0x4b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 020D
        gbc.setState(0x26ad, 0xa665, 0xda60, 0x3cec, 0xb25d, 0xa581, 0x0, 0x0);
        gbc.writeMem(0x26ad, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xa665, gbc.sp());
        EXPECT(0x26af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 020E
        gbc.setState(0xa05e, 0x7eee, 0x39c0, 0xcb2, 0x975d, 0x248, 0x0, 0x0);
        gbc.writeMem(0xa05e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x7eee, gbc.sp());
        EXPECT(0xa060, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa05e));
        EXPECT(0x0, gbc.readMem(0xa05f));
        // CB 00 020F
        gbc.setState(0xc300, 0x4fc, 0x1210, 0x5b5f, 0xf852, 0xd982, 0x1, 0x0);
        gbc.writeMem(0xc300, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x4fc, gbc.sp());
        EXPECT(0xc302, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc300));
        EXPECT(0x0, gbc.readMem(0xc301));
        // CB 00 0210
        gbc.setState(0xe327, 0x50b5, 0xf8c0, 0x81aa, 0xe934, 0x2530, 0x0, 0x0);
        gbc.writeMem(0xe327, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x50b5, gbc.sp());
        EXPECT(0xe329, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe327));
        EXPECT(0x0, gbc.readMem(0xe328));
        // CB 00 0211
        gbc.setState(0xd607, 0x88af, 0xd3d0, 0xfeed, 0x48db, 0xd358, 0x1, 0x1);
        gbc.writeMem(0xd607, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x88af, gbc.sp());
        EXPECT(0xd609, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd607));
        EXPECT(0x0, gbc.readMem(0xd608));
        // CB 00 0212
        gbc.setState(0xcdd4, 0xf679, 0x5bf0, 0x5667, 0x62e4, 0x1197, 0x1, 0x1);
        gbc.writeMem(0xcdd4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xf679, gbc.sp());
        EXPECT(0xcdd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdd4));
        EXPECT(0x0, gbc.readMem(0xcdd5));
        // CB 00 0213
        gbc.setState(0xd47, 0x3229, 0x5670, 0xc03a, 0xd090, 0xdf8b, 0x1, 0x0);
        gbc.writeMem(0xd47, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x3229, gbc.sp());
        EXPECT(0xd49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0214
        gbc.setState(0xdd9a, 0xa74e, 0x9350, 0xc8eb, 0x5d68, 0x8bfd, 0x1, 0x0);
        gbc.writeMem(0xdd9a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xa74e, gbc.sp());
        EXPECT(0xdd9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd9a));
        EXPECT(0x0, gbc.readMem(0xdd9b));
        // CB 00 0215
        gbc.setState(0x733e, 0xd11b, 0x19e0, 0xf18a, 0x63e2, 0xdd18, 0x0, 0x1);
        gbc.writeMem(0x733e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xd11b, gbc.sp());
        EXPECT(0x7340, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0216
        gbc.setState(0x8a32, 0xa76c, 0xf20, 0xfa8d, 0xddb5, 0xaee0, 0x0, 0x0);
        gbc.writeMem(0x8a32, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xa76c, gbc.sp());
        EXPECT(0x8a34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a32));
        EXPECT(0x0, gbc.readMem(0x8a33));
        // CB 00 0218
        gbc.setState(0x2715, 0x54e0, 0x13f0, 0xe44f, 0xcedc, 0xb08, 0x0, 0x1);
        gbc.writeMem(0x2715, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x54e0, gbc.sp());
        EXPECT(0x2717, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0219
        gbc.setState(0xeb9f, 0x9899, 0xf710, 0x2b7a, 0x8e33, 0xe1b1, 0x0, 0x1);
        gbc.writeMem(0xeb9f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x9899, gbc.sp());
        EXPECT(0xeba1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb9f));
        EXPECT(0x0, gbc.readMem(0xeba0));
        // CB 00 021A
        gbc.setState(0xb21, 0x766b, 0xa000, 0xb7fc, 0xde6f, 0xab28, 0x0, 0x1);
        gbc.writeMem(0xb21, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x766b, gbc.sp());
        EXPECT(0xb23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 021B
        gbc.setState(0x44c, 0xa846, 0xb010, 0x39b9, 0x9ecb, 0xd8bf, 0x1, 0x0);
        gbc.writeMem(0x44c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xa846, gbc.sp());
        EXPECT(0x44e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 021C
        gbc.setState(0x7ab5, 0xa20b, 0x45a0, 0xb249, 0x967f, 0x6e3b, 0x1, 0x1);
        gbc.writeMem(0x7ab5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xa20b, gbc.sp());
        EXPECT(0x7ab7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 021D
        gbc.setState(0x2154, 0x67b8, 0xbdd0, 0xff95, 0x62bb, 0x804e, 0x1, 0x1);
        gbc.writeMem(0x2154, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x67b8, gbc.sp());
        EXPECT(0x2156, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 021E
        gbc.setState(0x395a, 0x7fe6, 0x20e0, 0x14e1, 0xc3c2, 0x794a, 0x1, 0x1);
        gbc.writeMem(0x395a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x7fe6, gbc.sp());
        EXPECT(0x395c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 021F
        gbc.setState(0x68a6, 0xa506, 0x10a0, 0x1532, 0xd13, 0x5ca8, 0x1, 0x1);
        gbc.writeMem(0x68a6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xa506, gbc.sp());
        EXPECT(0x68a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0220
        gbc.setState(0x1420, 0xdc31, 0xa40, 0x9e7a, 0x6060, 0x936c, 0x0, 0x0);
        gbc.writeMem(0x1420, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xdc31, gbc.sp());
        EXPECT(0x1422, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0221
        gbc.setState(0x4373, 0xe21c, 0x3150, 0x61bc, 0xb4e7, 0x9322, 0x1, 0x0);
        gbc.writeMem(0x4373, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xe21c, gbc.sp());
        EXPECT(0x4375, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0222
        gbc.setState(0x6200, 0x4a2a, 0xc080, 0x7e69, 0x18ea, 0x4aaf, 0x1, 0x1);
        gbc.writeMem(0x6200, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x4a2a, gbc.sp());
        EXPECT(0x6202, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0223
        gbc.setState(0xc06f, 0xa78, 0x4a80, 0x5027, 0xf079, 0xe10, 0x0, 0x1);
        gbc.writeMem(0xc06f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xa78, gbc.sp());
        EXPECT(0xc071, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc06f));
        EXPECT(0x0, gbc.readMem(0xc070));
        // CB 00 0224
        gbc.setState(0x2220, 0x6871, 0xcae0, 0x869b, 0xba7, 0x1146, 0x0, 0x1);
        gbc.writeMem(0x2220, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x6871, gbc.sp());
        EXPECT(0x2222, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0225
        gbc.setState(0x5ecf, 0x9c7c, 0x9560, 0x3a8a, 0x29e2, 0xc8e1, 0x0, 0x0);
        gbc.writeMem(0x5ecf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x9c7c, gbc.sp());
        EXPECT(0x5ed1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0226
        gbc.setState(0x48c0, 0xbc2b, 0x22a0, 0x7fca, 0x1927, 0x5c72, 0x1, 0x1);
        gbc.writeMem(0x48c0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xbc2b, gbc.sp());
        EXPECT(0x48c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0227
        gbc.setState(0xc09b, 0x9815, 0x25c0, 0xbb8b, 0x64f4, 0xbc60, 0x1, 0x0);
        gbc.writeMem(0xc09b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x9815, gbc.sp());
        EXPECT(0xc09d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc09b));
        EXPECT(0x0, gbc.readMem(0xc09c));
        // CB 00 0228
        gbc.setState(0x2b26, 0x6cb6, 0xaef0, 0xa071, 0xf096, 0x191e, 0x0, 0x1);
        gbc.writeMem(0x2b26, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x6cb6, gbc.sp());
        EXPECT(0x2b28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0229
        gbc.setState(0x9dc2, 0xa9b5, 0xfeb0, 0x9294, 0x914a, 0x64fd, 0x1, 0x0);
        gbc.writeMem(0x9dc2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xa9b5, gbc.sp());
        EXPECT(0x9dc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dc2));
        EXPECT(0x0, gbc.readMem(0x9dc3));
        // CB 00 022A
        gbc.setState(0x7d34, 0xb452, 0xe080, 0x1dd7, 0x176e, 0x798f, 0x1, 0x0);
        gbc.writeMem(0x7d34, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xb452, gbc.sp());
        EXPECT(0x7d36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 022B
        gbc.setState(0x645f, 0xbebe, 0xb0d0, 0x55a1, 0x14a1, 0x3033, 0x0, 0x1);
        gbc.writeMem(0x645f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xbebe, gbc.sp());
        EXPECT(0x6461, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 022C
        gbc.setState(0x1a43, 0xee00, 0x6020, 0x1a7c, 0x513e, 0x861d, 0x0, 0x0);
        gbc.writeMem(0x1a43, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xee00, gbc.sp());
        EXPECT(0x1a45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 022D
        gbc.setState(0x92f5, 0xae05, 0xdcf0, 0xf029, 0x36c2, 0x5f62, 0x1, 0x0);
        gbc.writeMem(0x92f5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xae05, gbc.sp());
        EXPECT(0x92f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92f5));
        EXPECT(0x0, gbc.readMem(0x92f6));
        // CB 00 022E
        gbc.setState(0x38cd, 0x4948, 0xbc00, 0xf491, 0x7b23, 0x62b2, 0x0, 0x0);
        gbc.writeMem(0x38cd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x4948, gbc.sp());
        EXPECT(0x38cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 022F
        gbc.setState(0x417e, 0x8ab3, 0x5ad0, 0xb02, 0x52e2, 0x7626, 0x1, 0x1);
        gbc.writeMem(0x417e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x8ab3, gbc.sp());
        EXPECT(0x4180, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0230
        gbc.setState(0xa948, 0x8a9, 0xfe10, 0x4b6e, 0x8147, 0x32d7, 0x1, 0x1);
        gbc.writeMem(0xa948, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x8a9, gbc.sp());
        EXPECT(0xa94a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa948));
        EXPECT(0x0, gbc.readMem(0xa949));
        // CB 00 0232
        gbc.setState(0x300a, 0x10c7, 0x5b30, 0x2422, 0x2dbb, 0xc0f8, 0x0, 0x1);
        gbc.writeMem(0x300a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x10c7, gbc.sp());
        EXPECT(0x300c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0233
        gbc.setState(0xa362, 0xfba1, 0xb710, 0xabf6, 0x5c78, 0x129f, 0x0, 0x1);
        gbc.writeMem(0xa362, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xfba1, gbc.sp());
        EXPECT(0xa364, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa362));
        EXPECT(0x0, gbc.readMem(0xa363));
        // CB 00 0234
        gbc.setState(0xe68b, 0xab57, 0xf820, 0xb2a4, 0xc7f1, 0x19e0, 0x1, 0x1);
        gbc.writeMem(0xe68b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xab57, gbc.sp());
        EXPECT(0xe68d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe68b));
        EXPECT(0x0, gbc.readMem(0xe68c));
        // CB 00 0235
        gbc.setState(0x40c4, 0x51f5, 0x3b60, 0xe64a, 0xab05, 0xb902, 0x0, 0x1);
        gbc.writeMem(0x40c4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x51f5, gbc.sp());
        EXPECT(0x40c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0236
        gbc.setState(0x9fec, 0xdb20, 0x71d0, 0xfb5b, 0x2683, 0x1793, 0x0, 0x1);
        gbc.writeMem(0x9fec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xdb20, gbc.sp());
        EXPECT(0x9fee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fec));
        EXPECT(0x0, gbc.readMem(0x9fed));
        // CB 00 0237
        gbc.setState(0xd5df, 0xdc61, 0x1da0, 0x9445, 0x5a9a, 0x57ad, 0x1, 0x1);
        gbc.writeMem(0xd5df, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xdc61, gbc.sp());
        EXPECT(0xd5e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5df));
        EXPECT(0x0, gbc.readMem(0xd5e0));
        // CB 00 0238
        gbc.setState(0x5daf, 0x57de, 0x3d60, 0x36d1, 0x123f, 0xb4ce, 0x0, 0x0);
        gbc.writeMem(0x5daf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x57de, gbc.sp());
        EXPECT(0x5db1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0239
        gbc.setState(0x5a6a, 0xccc7, 0xeb50, 0x5a10, 0xf453, 0x8dba, 0x0, 0x1);
        gbc.writeMem(0x5a6a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xccc7, gbc.sp());
        EXPECT(0x5a6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 023A
        gbc.setState(0x544c, 0xb417, 0x7d50, 0xe15d, 0xe712, 0x6fee, 0x0, 0x0);
        gbc.writeMem(0x544c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xb417, gbc.sp());
        EXPECT(0x544e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 023B
        gbc.setState(0xc4c7, 0x6626, 0x6380, 0x4509, 0x640, 0xbd45, 0x0, 0x0);
        gbc.writeMem(0xc4c7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x6626, gbc.sp());
        EXPECT(0xc4c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4c7));
        EXPECT(0x0, gbc.readMem(0xc4c8));
        // CB 00 023C
        gbc.setState(0xa128, 0x4da1, 0xa2c0, 0x7445, 0xd8ae, 0xa49, 0x1, 0x0);
        gbc.writeMem(0xa128, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x4da1, gbc.sp());
        EXPECT(0xa12a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa128));
        EXPECT(0x0, gbc.readMem(0xa129));
        // CB 00 023D
        gbc.setState(0xc7bc, 0xfea9, 0x9380, 0x1060, 0x438, 0xe352, 0x0, 0x1);
        gbc.writeMem(0xc7bc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xfea9, gbc.sp());
        EXPECT(0xc7be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7bc));
        EXPECT(0x0, gbc.readMem(0xc7bd));
        // CB 00 023E
        gbc.setState(0x1240, 0xc974, 0x2f10, 0x35b1, 0x94a1, 0x5978, 0x1, 0x1);
        gbc.writeMem(0x1240, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xc974, gbc.sp());
        EXPECT(0x1242, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 023F
        gbc.setState(0x2f30, 0x2713, 0xad90, 0xde94, 0xb4dd, 0xd8c, 0x1, 0x0);
        gbc.writeMem(0x2f30, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x2713, gbc.sp());
        EXPECT(0x2f32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0240
        gbc.setState(0xb1f7, 0xc4fd, 0x2320, 0x83e, 0x5be3, 0xcda1, 0x1, 0x1);
        gbc.writeMem(0xb1f7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xc4fd, gbc.sp());
        EXPECT(0xb1f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1f7));
        EXPECT(0x0, gbc.readMem(0xb1f8));
        // CB 00 0241
        gbc.setState(0x83d7, 0x49c4, 0xbeb0, 0xa606, 0xcfcc, 0x8ea7, 0x1, 0x0);
        gbc.writeMem(0x83d7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x49c4, gbc.sp());
        EXPECT(0x83d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83d7));
        EXPECT(0x0, gbc.readMem(0x83d8));
        // CB 00 0243
        gbc.setState(0x22e6, 0xdf88, 0x45e0, 0x591c, 0xa76f, 0x698f, 0x1, 0x1);
        gbc.writeMem(0x22e6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xdf88, gbc.sp());
        EXPECT(0x22e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0244
        gbc.setState(0xee82, 0x8cea, 0x1fc0, 0xa42c, 0xe057, 0x3efb, 0x1, 0x0);
        gbc.writeMem(0xee82, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x8cea, gbc.sp());
        EXPECT(0xee84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee82));
        EXPECT(0x0, gbc.readMem(0xee83));
        // CB 00 0245
        gbc.setState(0xd685, 0x66b5, 0x8960, 0xbb20, 0xee77, 0x9102, 0x1, 0x0);
        gbc.writeMem(0xd685, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x66b5, gbc.sp());
        EXPECT(0xd687, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd685));
        EXPECT(0x0, gbc.readMem(0xd686));
        // CB 00 0246
        gbc.setState(0x2c04, 0x5b42, 0x2310, 0xf34e, 0xcb9e, 0x4282, 0x0, 0x0);
        gbc.writeMem(0x2c04, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x5b42, gbc.sp());
        EXPECT(0x2c06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0247
        gbc.setState(0xd416, 0x937, 0xa0a0, 0xdf44, 0xba05, 0x128a, 0x1, 0x0);
        gbc.writeMem(0xd416, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x937, gbc.sp());
        EXPECT(0xd418, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd416));
        EXPECT(0x0, gbc.readMem(0xd417));
        // CB 00 0248
        gbc.setState(0x7873, 0x750c, 0x71d0, 0xf0a1, 0x77e8, 0xc730, 0x1, 0x0);
        gbc.writeMem(0x7873, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x750c, gbc.sp());
        EXPECT(0x7875, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0249
        gbc.setState(0x2a08, 0x4cf6, 0xd260, 0x137b, 0xdefc, 0x8f5f, 0x1, 0x0);
        gbc.writeMem(0x2a08, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x4cf6, gbc.sp());
        EXPECT(0x2a0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 024A
        gbc.setState(0x46b8, 0xc5c7, 0x1810, 0x7003, 0x120e, 0x1473, 0x0, 0x0);
        gbc.writeMem(0x46b8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xc5c7, gbc.sp());
        EXPECT(0x46ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 024B
        gbc.setState(0x81d9, 0x658e, 0x98e0, 0xba88, 0x356b, 0x4998, 0x0, 0x1);
        gbc.writeMem(0x81d9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x658e, gbc.sp());
        EXPECT(0x81db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81d9));
        EXPECT(0x0, gbc.readMem(0x81da));
        // CB 00 024C
        gbc.setState(0x7b28, 0xe968, 0x6fc0, 0x2171, 0xe0a1, 0x9614, 0x1, 0x0);
        gbc.writeMem(0x7b28, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xe968, gbc.sp());
        EXPECT(0x7b2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 024D
        gbc.setState(0x96c3, 0xd8d, 0xfa20, 0x8e73, 0xfd0d, 0x5f16, 0x1, 0x0);
        gbc.writeMem(0x96c3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xd8d, gbc.sp());
        EXPECT(0x96c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96c3));
        EXPECT(0x0, gbc.readMem(0x96c4));
        // CB 00 024E
        gbc.setState(0xc606, 0x93bb, 0x7d40, 0xa44d, 0x87c5, 0x84d, 0x1, 0x1);
        gbc.writeMem(0xc606, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x93bb, gbc.sp());
        EXPECT(0xc608, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc606));
        EXPECT(0x0, gbc.readMem(0xc607));
        // CB 00 024F
        gbc.setState(0xd2b5, 0xe4e4, 0x5b30, 0x3d1a, 0xfb4e, 0xabb9, 0x1, 0x1);
        gbc.writeMem(0xd2b5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xe4e4, gbc.sp());
        EXPECT(0xd2b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2b5));
        EXPECT(0x0, gbc.readMem(0xd2b6));
        // CB 00 0250
        gbc.setState(0x23cb, 0x29e9, 0x2470, 0x3954, 0xbf02, 0x255b, 0x1, 0x1);
        gbc.writeMem(0x23cb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x29e9, gbc.sp());
        EXPECT(0x23cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0251
        gbc.setState(0xe994, 0xba4b, 0x10e0, 0x1ca7, 0x6272, 0x3cdb, 0x1, 0x1);
        gbc.writeMem(0xe994, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xba4b, gbc.sp());
        EXPECT(0xe996, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe994));
        EXPECT(0x0, gbc.readMem(0xe995));
        // CB 00 0252
        gbc.setState(0x1d2d, 0x7e17, 0xa4f0, 0x9e5, 0x91f8, 0x1d18, 0x0, 0x1);
        gbc.writeMem(0x1d2d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x7e17, gbc.sp());
        EXPECT(0x1d2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0254
        gbc.setState(0x5dfb, 0xb5d4, 0x2730, 0xa0f8, 0x8344, 0x1300, 0x0, 0x1);
        gbc.writeMem(0x5dfb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xb5d4, gbc.sp());
        EXPECT(0x5dfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0256
        gbc.setState(0x834a, 0x58cf, 0x1e40, 0x4700, 0x88d1, 0x9584, 0x1, 0x1);
        gbc.writeMem(0x834a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x58cf, gbc.sp());
        EXPECT(0x834c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x834a));
        EXPECT(0x0, gbc.readMem(0x834b));
        // CB 00 0257
        gbc.setState(0x81df, 0xc7d8, 0x6340, 0xb64d, 0x999f, 0x8cf9, 0x0, 0x0);
        gbc.writeMem(0x81df, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xc7d8, gbc.sp());
        EXPECT(0x81e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81df));
        EXPECT(0x0, gbc.readMem(0x81e0));
        // CB 00 0258
        gbc.setState(0x65b7, 0x76df, 0x70c0, 0xb5c6, 0xda1d, 0x5f2b, 0x0, 0x0);
        gbc.writeMem(0x65b7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x76df, gbc.sp());
        EXPECT(0x65b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0259
        gbc.setState(0x8f80, 0xd3a5, 0x7f80, 0xef32, 0x5cac, 0x11c, 0x0, 0x1);
        gbc.writeMem(0x8f80, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xd3a5, gbc.sp());
        EXPECT(0x8f82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f80));
        EXPECT(0x0, gbc.readMem(0x8f81));
        // CB 00 025A
        gbc.setState(0x93f0, 0xb4e3, 0x2cf0, 0x137b, 0x505c, 0xbdb0, 0x1, 0x1);
        gbc.writeMem(0x93f0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xb4e3, gbc.sp());
        EXPECT(0x93f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93f0));
        EXPECT(0x0, gbc.readMem(0x93f1));
        // CB 00 025B
        gbc.setState(0xbe8e, 0x5b14, 0xf3e0, 0x9d32, 0x8dc, 0xafff, 0x1, 0x1);
        gbc.writeMem(0xbe8e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x5b14, gbc.sp());
        EXPECT(0xbe90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe8e));
        EXPECT(0x0, gbc.readMem(0xbe8f));
        // CB 00 025C
        gbc.setState(0x45cc, 0x496a, 0x4710, 0xff5a, 0x4a75, 0xb3a7, 0x0, 0x1);
        gbc.writeMem(0x45cc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x496a, gbc.sp());
        EXPECT(0x45ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 025D
        gbc.setState(0x1e60, 0x8c0e, 0xcca0, 0x1f54, 0x92a5, 0xa21, 0x1, 0x1);
        gbc.writeMem(0x1e60, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x8c0e, gbc.sp());
        EXPECT(0x1e62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 025E
        gbc.setState(0x53c8, 0x2a0d, 0x6dc0, 0xd85a, 0xc46d, 0xbdc7, 0x0, 0x1);
        gbc.writeMem(0x53c8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x2a0d, gbc.sp());
        EXPECT(0x53ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 025F
        gbc.setState(0xcc22, 0x66b1, 0x1020, 0xe25e, 0xfc37, 0x9d4f, 0x1, 0x0);
        gbc.writeMem(0xcc22, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x66b1, gbc.sp());
        EXPECT(0xcc24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc22));
        EXPECT(0x0, gbc.readMem(0xcc23));
        // CB 00 0260
        gbc.setState(0x30b, 0x4134, 0x9fb0, 0x595c, 0xc545, 0x10cf, 0x0, 0x1);
        gbc.writeMem(0x30b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x4134, gbc.sp());
        EXPECT(0x30d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0261
        gbc.setState(0x8209, 0xa425, 0xe850, 0x6eaf, 0xa24f, 0x44c6, 0x0, 0x0);
        gbc.writeMem(0x8209, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xa425, gbc.sp());
        EXPECT(0x820b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8209));
        EXPECT(0x0, gbc.readMem(0x820a));
        // CB 00 0262
        gbc.setState(0x14c9, 0xaa10, 0x2680, 0x163b, 0x174e, 0x9880, 0x1, 0x0);
        gbc.writeMem(0x14c9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xaa10, gbc.sp());
        EXPECT(0x14cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0263
        gbc.setState(0x252a, 0x7b07, 0xb6c0, 0xc396, 0xe020, 0x61f3, 0x1, 0x1);
        gbc.writeMem(0x252a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x7b07, gbc.sp());
        EXPECT(0x252c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0264
        gbc.setState(0xd99d, 0xbc7b, 0xe580, 0xe0f7, 0xbaa3, 0xbb2a, 0x1, 0x1);
        gbc.writeMem(0xd99d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xbc7b, gbc.sp());
        EXPECT(0xd99f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd99d));
        EXPECT(0x0, gbc.readMem(0xd99e));
        // CB 00 0265
        gbc.setState(0x1081, 0x5dd3, 0xe480, 0x278e, 0xafa7, 0x4d0, 0x1, 0x0);
        gbc.writeMem(0x1081, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x5dd3, gbc.sp());
        EXPECT(0x1083, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0266
        gbc.setState(0xb583, 0x2adf, 0x17b0, 0x6251, 0xebc3, 0x7c9e, 0x0, 0x0);
        gbc.writeMem(0xb583, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x2adf, gbc.sp());
        EXPECT(0xb585, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb583));
        EXPECT(0x0, gbc.readMem(0xb584));
        // CB 00 0267
        gbc.setState(0xacb5, 0x11aa, 0xe140, 0x8e48, 0x5213, 0x6b1e, 0x1, 0x1);
        gbc.writeMem(0xacb5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x11aa, gbc.sp());
        EXPECT(0xacb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacb5));
        EXPECT(0x0, gbc.readMem(0xacb6));
        // CB 00 0268
        gbc.setState(0x27e7, 0x213a, 0x9e00, 0xc862, 0x7001, 0x6ad0, 0x1, 0x1);
        gbc.writeMem(0x27e7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x213a, gbc.sp());
        EXPECT(0x27e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0269
        gbc.setState(0xdc7d, 0xfdc2, 0x4eb0, 0xea52, 0xb834, 0x3f2f, 0x1, 0x0);
        gbc.writeMem(0xdc7d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xfdc2, gbc.sp());
        EXPECT(0xdc7f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc7d));
        EXPECT(0x0, gbc.readMem(0xdc7e));
        // CB 00 026A
        gbc.setState(0x9cc5, 0xfd70, 0xa6f0, 0xd4ef, 0x7645, 0xf1ad, 0x0, 0x1);
        gbc.writeMem(0x9cc5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xfd70, gbc.sp());
        EXPECT(0x9cc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cc5));
        EXPECT(0x0, gbc.readMem(0x9cc6));
        // CB 00 026B
        gbc.setState(0x867f, 0xfee2, 0x1890, 0x592e, 0x289f, 0x7cc1, 0x0, 0x0);
        gbc.writeMem(0x867f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xfee2, gbc.sp());
        EXPECT(0x8681, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x867f));
        EXPECT(0x0, gbc.readMem(0x8680));
        // CB 00 026C
        gbc.setState(0xb100, 0x8399, 0xe6c0, 0x1ea7, 0x194a, 0xb43d, 0x1, 0x1);
        gbc.writeMem(0xb100, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x8399, gbc.sp());
        EXPECT(0xb102, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb100));
        EXPECT(0x0, gbc.readMem(0xb101));
        // CB 00 026D
        gbc.setState(0x26c, 0x1c87, 0xa490, 0x7150, 0xf398, 0xb269, 0x1, 0x0);
        gbc.writeMem(0x26c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x1c87, gbc.sp());
        EXPECT(0x26e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 026E
        gbc.setState(0xc240, 0x7987, 0x2350, 0xc212, 0x2265, 0x9e36, 0x0, 0x1);
        gbc.writeMem(0xc240, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x7987, gbc.sp());
        EXPECT(0xc242, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc240));
        EXPECT(0x0, gbc.readMem(0xc241));
        // CB 00 026F
        gbc.setState(0x84cb, 0x6a64, 0x740, 0x8a82, 0x5c06, 0x570e, 0x0, 0x0);
        gbc.writeMem(0x84cb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x6a64, gbc.sp());
        EXPECT(0x84cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84cb));
        EXPECT(0x0, gbc.readMem(0x84cc));
        // CB 00 0270
        gbc.setState(0xacf0, 0xb424, 0x760, 0x7a1, 0xa7a2, 0xec0f, 0x1, 0x1);
        gbc.writeMem(0xacf0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xb424, gbc.sp());
        EXPECT(0xacf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacf0));
        EXPECT(0x0, gbc.readMem(0xacf1));
        // CB 00 0271
        gbc.setState(0x119a, 0x4759, 0xf930, 0xc466, 0x4e1e, 0x88ce, 0x1, 0x0);
        gbc.writeMem(0x119a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x4759, gbc.sp());
        EXPECT(0x119c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0272
        gbc.setState(0xde93, 0xb1c4, 0x6700, 0xad33, 0xe6ea, 0x8bdd, 0x1, 0x1);
        gbc.writeMem(0xde93, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xb1c4, gbc.sp());
        EXPECT(0xde95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde93));
        EXPECT(0x0, gbc.readMem(0xde94));
        // CB 00 0273
        gbc.setState(0x847f, 0x85b, 0xa00, 0x234a, 0x83ea, 0x680f, 0x1, 0x0);
        gbc.writeMem(0x847f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x85b, gbc.sp());
        EXPECT(0x8481, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x847f));
        EXPECT(0x0, gbc.readMem(0x8480));
        // CB 00 0274
        gbc.setState(0x35ee, 0xadb8, 0x110, 0xdd93, 0x1749, 0xd5cc, 0x0, 0x1);
        gbc.writeMem(0x35ee, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xadb8, gbc.sp());
        EXPECT(0x35f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0275
        gbc.setState(0x5b24, 0x7e9a, 0x4450, 0xfba3, 0x3093, 0x847f, 0x1, 0x1);
        gbc.writeMem(0x5b24, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x7e9a, gbc.sp());
        EXPECT(0x5b26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0276
        gbc.setState(0xe177, 0xcca, 0x4e60, 0x8bf, 0x36f8, 0xad1d, 0x0, 0x0);
        gbc.writeMem(0xe177, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xcca, gbc.sp());
        EXPECT(0xe179, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe177));
        EXPECT(0x0, gbc.readMem(0xe178));
        // CB 00 0277
        gbc.setState(0x779e, 0xb30f, 0x7950, 0xb41a, 0x4d2d, 0xf208, 0x0, 0x1);
        gbc.writeMem(0x779e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xb30f, gbc.sp());
        EXPECT(0x77a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0278
        gbc.setState(0x4e64, 0xbeed, 0xa6f0, 0xc10b, 0x9743, 0xf7a5, 0x0, 0x1);
        gbc.writeMem(0x4e64, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xbeed, gbc.sp());
        EXPECT(0x4e66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0279
        gbc.setState(0x24b6, 0x4e2b, 0x95c0, 0x602f, 0x7000, 0xb77, 0x0, 0x1);
        gbc.writeMem(0x24b6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x4e2b, gbc.sp());
        EXPECT(0x24b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 027A
        gbc.setState(0x5842, 0x5d35, 0x6810, 0xb56a, 0x5053, 0xce7f, 0x1, 0x1);
        gbc.writeMem(0x5842, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x5d35, gbc.sp());
        EXPECT(0x5844, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 027C
        gbc.setState(0x9c92, 0xc567, 0x4450, 0x6a3f, 0x70d, 0x8c8c, 0x0, 0x1);
        gbc.writeMem(0x9c92, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xc567, gbc.sp());
        EXPECT(0x9c94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c92));
        EXPECT(0x0, gbc.readMem(0x9c93));
        // CB 00 027D
        gbc.setState(0xd25d, 0xf4b9, 0xafa0, 0x219d, 0xebd5, 0xab3d, 0x0, 0x0);
        gbc.writeMem(0xd25d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xf4b9, gbc.sp());
        EXPECT(0xd25f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd25d));
        EXPECT(0x0, gbc.readMem(0xd25e));
        // CB 00 027E
        gbc.setState(0xe9c4, 0xb43a, 0x1d70, 0xde1a, 0x542a, 0x6c8, 0x1, 0x1);
        gbc.writeMem(0xe9c4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xb43a, gbc.sp());
        EXPECT(0xe9c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9c4));
        EXPECT(0x0, gbc.readMem(0xe9c5));
        // CB 00 027F
        gbc.setState(0x1cb2, 0xc103, 0xb400, 0x4637, 0x9dc6, 0xf8b6, 0x0, 0x1);
        gbc.writeMem(0x1cb2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xc103, gbc.sp());
        EXPECT(0x1cb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0280
        gbc.setState(0xee7d, 0x475, 0x32d0, 0xf15c, 0xbc78, 0xcc09, 0x0, 0x1);
        gbc.writeMem(0xee7d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x475, gbc.sp());
        EXPECT(0xee7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee7d));
        EXPECT(0x0, gbc.readMem(0xee7e));
        // CB 00 0281
        gbc.setState(0x2367, 0xe7d4, 0x2930, 0x9054, 0x227b, 0xb187, 0x1, 0x0);
        gbc.writeMem(0x2367, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xe7d4, gbc.sp());
        EXPECT(0x2369, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0282
        gbc.setState(0x13c9, 0x5b4d, 0x260, 0xd99c, 0xb3d, 0xd61f, 0x1, 0x0);
        gbc.writeMem(0x13c9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x5b4d, gbc.sp());
        EXPECT(0x13cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0283
        gbc.setState(0x9433, 0x2910, 0x9d40, 0xcfa5, 0x8e76, 0xd6be, 0x0, 0x0);
        gbc.writeMem(0x9433, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x2910, gbc.sp());
        EXPECT(0x9435, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9433));
        EXPECT(0x0, gbc.readMem(0x9434));
        // CB 00 0284
        gbc.setState(0x8291, 0xcc20, 0xece0, 0xc2e4, 0xc0a6, 0x5160, 0x0, 0x0);
        gbc.writeMem(0x8291, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xcc20, gbc.sp());
        EXPECT(0x8293, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8291));
        EXPECT(0x0, gbc.readMem(0x8292));
        // CB 00 0285
        gbc.setState(0x21c1, 0x9e00, 0x4c80, 0x6bc9, 0x487d, 0x513a, 0x1, 0x0);
        gbc.writeMem(0x21c1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x9e00, gbc.sp());
        EXPECT(0x21c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0286
        gbc.setState(0x8e28, 0x83a0, 0x1b40, 0x5d40, 0xf79b, 0x9653, 0x0, 0x0);
        gbc.writeMem(0x8e28, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x83a0, gbc.sp());
        EXPECT(0x8e2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e28));
        EXPECT(0x0, gbc.readMem(0x8e29));
        // CB 00 0288
        gbc.setState(0xd58e, 0x677a, 0xf0e0, 0x7c20, 0xf233, 0x2339, 0x1, 0x1);
        gbc.writeMem(0xd58e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x677a, gbc.sp());
        EXPECT(0xd590, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd58e));
        EXPECT(0x0, gbc.readMem(0xd58f));
        // CB 00 0289
        gbc.setState(0xcaeb, 0x263b, 0xa940, 0xc483, 0xbda3, 0x4354, 0x0, 0x1);
        gbc.writeMem(0xcaeb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x263b, gbc.sp());
        EXPECT(0xcaed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaeb));
        EXPECT(0x0, gbc.readMem(0xcaec));
        // CB 00 028A
        gbc.setState(0x20a5, 0x12c5, 0x240, 0xd885, 0xe453, 0xe35d, 0x1, 0x0);
        gbc.writeMem(0x20a5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x12c5, gbc.sp());
        EXPECT(0x20a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 028B
        gbc.setState(0xe7bc, 0xda35, 0x98d0, 0x4cd, 0xbbd3, 0x7ecd, 0x0, 0x1);
        gbc.writeMem(0xe7bc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xda35, gbc.sp());
        EXPECT(0xe7be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7bc));
        EXPECT(0x0, gbc.readMem(0xe7bd));
        // CB 00 028C
        gbc.setState(0x49f8, 0xb7a9, 0x9e20, 0x77bb, 0x4282, 0x7fde, 0x1, 0x1);
        gbc.writeMem(0x49f8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xb7a9, gbc.sp());
        EXPECT(0x49fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 028D
        gbc.setState(0x7b63, 0x8c08, 0x6220, 0x5dca, 0x54af, 0x5b38, 0x1, 0x1);
        gbc.writeMem(0x7b63, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x8c08, gbc.sp());
        EXPECT(0x7b65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 028E
        gbc.setState(0x9774, 0x1ec8, 0xf780, 0xc48e, 0x116f, 0xa763, 0x0, 0x0);
        gbc.writeMem(0x9774, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x1ec8, gbc.sp());
        EXPECT(0x9776, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9774));
        EXPECT(0x0, gbc.readMem(0x9775));
        // CB 00 028F
        gbc.setState(0xe852, 0xefb5, 0x2ac0, 0x9284, 0xb046, 0x118a, 0x0, 0x0);
        gbc.writeMem(0xe852, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xefb5, gbc.sp());
        EXPECT(0xe854, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe852));
        EXPECT(0x0, gbc.readMem(0xe853));
        // CB 00 0290
        gbc.setState(0x9e34, 0xe7f7, 0x44e0, 0x1656, 0xf853, 0x9531, 0x0, 0x0);
        gbc.writeMem(0x9e34, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xe7f7, gbc.sp());
        EXPECT(0x9e36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e34));
        EXPECT(0x0, gbc.readMem(0x9e35));
        // CB 00 0291
        gbc.setState(0x8bf6, 0x9775, 0x2820, 0x9f14, 0x18bb, 0xfa71, 0x0, 0x0);
        gbc.writeMem(0x8bf6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x9775, gbc.sp());
        EXPECT(0x8bf8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bf6));
        EXPECT(0x0, gbc.readMem(0x8bf7));
        // CB 00 0292
        gbc.setState(0x60a5, 0x5a3f, 0x5ab0, 0x9c4a, 0x9fd8, 0xd88d, 0x1, 0x0);
        gbc.writeMem(0x60a5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x5a3f, gbc.sp());
        EXPECT(0x60a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0293
        gbc.setState(0xbe33, 0xadb4, 0x5c20, 0x1b0d, 0x62a, 0xde79, 0x1, 0x1);
        gbc.writeMem(0xbe33, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xadb4, gbc.sp());
        EXPECT(0xbe35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe33));
        EXPECT(0x0, gbc.readMem(0xbe34));
        // CB 00 0294
        gbc.setState(0x5102, 0x7c87, 0xd9d0, 0xfd7, 0xda55, 0x50fc, 0x1, 0x1);
        gbc.writeMem(0x5102, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x7c87, gbc.sp());
        EXPECT(0x5104, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0295
        gbc.setState(0x6dd1, 0x58b5, 0x58c0, 0xbd40, 0x7764, 0x497, 0x1, 0x1);
        gbc.writeMem(0x6dd1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x58b5, gbc.sp());
        EXPECT(0x6dd3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0296
        gbc.setState(0xe93b, 0x7505, 0xd740, 0x94a9, 0x20b6, 0x3b93, 0x0, 0x1);
        gbc.writeMem(0xe93b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x7505, gbc.sp());
        EXPECT(0xe93d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe93b));
        EXPECT(0x0, gbc.readMem(0xe93c));
        // CB 00 0297
        gbc.setState(0x467a, 0x19, 0x1de0, 0x97b9, 0x6bc1, 0x3397, 0x0, 0x1);
        gbc.writeMem(0x467a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x19, gbc.sp());
        EXPECT(0x467c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0298
        gbc.setState(0x79be, 0x604d, 0x7950, 0x9b98, 0x3006, 0xcc91, 0x0, 0x1);
        gbc.writeMem(0x79be, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x604d, gbc.sp());
        EXPECT(0x79c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0299
        gbc.setState(0x7313, 0x3832, 0xb5e0, 0xebc4, 0xc39c, 0x4781, 0x1, 0x1);
        gbc.writeMem(0x7313, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x3832, gbc.sp());
        EXPECT(0x7315, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 029A
        gbc.setState(0x9b2c, 0x2a65, 0x65b0, 0x7488, 0x6ada, 0xc2ff, 0x0, 0x0);
        gbc.writeMem(0x9b2c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x2a65, gbc.sp());
        EXPECT(0x9b2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b2c));
        EXPECT(0x0, gbc.readMem(0x9b2d));
        // CB 00 029B
        gbc.setState(0x8be3, 0xc781, 0xbc70, 0xb9b1, 0x710, 0xcc11, 0x0, 0x1);
        gbc.writeMem(0x8be3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xc781, gbc.sp());
        EXPECT(0x8be5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8be3));
        EXPECT(0x0, gbc.readMem(0x8be4));
        // CB 00 029C
        gbc.setState(0xeb4d, 0xcaa6, 0x2ab0, 0x3c52, 0x3e51, 0x2c13, 0x0, 0x1);
        gbc.writeMem(0xeb4d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xcaa6, gbc.sp());
        EXPECT(0xeb4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb4d));
        EXPECT(0x0, gbc.readMem(0xeb4e));
        // CB 00 029D
        gbc.setState(0xec2f, 0xcec1, 0xb760, 0x38b8, 0x5e25, 0xdba6, 0x1, 0x0);
        gbc.writeMem(0xec2f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xcec1, gbc.sp());
        EXPECT(0xec31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec2f));
        EXPECT(0x0, gbc.readMem(0xec30));
        // CB 00 029E
        gbc.setState(0x150b, 0xa7a9, 0x8e20, 0xcf91, 0x207f, 0xc398, 0x0, 0x1);
        gbc.writeMem(0x150b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xa7a9, gbc.sp());
        EXPECT(0x150d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 029F
        gbc.setState(0xb03c, 0x9103, 0x3580, 0x378c, 0xd61f, 0x2dc9, 0x1, 0x1);
        gbc.writeMem(0xb03c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x9103, gbc.sp());
        EXPECT(0xb03e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb03c));
        EXPECT(0x0, gbc.readMem(0xb03d));
        // CB 00 02A0
        gbc.setState(0xbf99, 0x47e7, 0xb500, 0x8f71, 0x43ba, 0x32c4, 0x1, 0x0);
        gbc.writeMem(0xbf99, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x47e7, gbc.sp());
        EXPECT(0xbf9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf99));
        EXPECT(0x0, gbc.readMem(0xbf9a));
        // CB 00 02A2
        gbc.setState(0x9098, 0x587e, 0x8410, 0x1029, 0x7831, 0xf009, 0x0, 0x1);
        gbc.writeMem(0x9098, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x587e, gbc.sp());
        EXPECT(0x909a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9098));
        EXPECT(0x0, gbc.readMem(0x9099));
        // CB 00 02A3
        gbc.setState(0xabec, 0x1ff8, 0xd8e0, 0x17d7, 0x5a88, 0xb434, 0x0, 0x1);
        gbc.writeMem(0xabec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x1ff8, gbc.sp());
        EXPECT(0xabee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabec));
        EXPECT(0x0, gbc.readMem(0xabed));
        // CB 00 02A5
        gbc.setState(0xb01b, 0x4c3b, 0x3e20, 0xba80, 0x5876, 0xfaa, 0x0, 0x1);
        gbc.writeMem(0xb01b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x4c3b, gbc.sp());
        EXPECT(0xb01d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb01b));
        EXPECT(0x0, gbc.readMem(0xb01c));
        // CB 00 02A6
        gbc.setState(0x8948, 0xdfd8, 0x95c0, 0x1803, 0x7ee6, 0x77c7, 0x1, 0x0);
        gbc.writeMem(0x8948, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xdfd8, gbc.sp());
        EXPECT(0x894a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8948));
        EXPECT(0x0, gbc.readMem(0x8949));
        // CB 00 02A7
        gbc.setState(0x4749, 0xd325, 0xb1f0, 0x31b9, 0x7513, 0xc0fc, 0x0, 0x1);
        gbc.writeMem(0x4749, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xd325, gbc.sp());
        EXPECT(0x474b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02A8
        gbc.setState(0xc1ad, 0xdc88, 0x9710, 0xbeaa, 0x3086, 0x228d, 0x1, 0x1);
        gbc.writeMem(0xc1ad, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xdc88, gbc.sp());
        EXPECT(0xc1af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1ad));
        EXPECT(0x0, gbc.readMem(0xc1ae));
        // CB 00 02A9
        gbc.setState(0x1af2, 0xa7e3, 0x35f0, 0xcd4c, 0xde44, 0x4280, 0x0, 0x1);
        gbc.writeMem(0x1af2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xa7e3, gbc.sp());
        EXPECT(0x1af4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02AA
        gbc.setState(0x6831, 0x6188, 0x3270, 0x2ca7, 0x3e16, 0x8da5, 0x1, 0x1);
        gbc.writeMem(0x6831, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x6188, gbc.sp());
        EXPECT(0x6833, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02AB
        gbc.setState(0x5557, 0xf05a, 0xfd80, 0xe64b, 0xdf6a, 0xc1f1, 0x0, 0x0);
        gbc.writeMem(0x5557, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xf05a, gbc.sp());
        EXPECT(0x5559, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02AC
        gbc.setState(0xa892, 0x8b9c, 0x5b10, 0xd99d, 0xec17, 0x36ad, 0x0, 0x0);
        gbc.writeMem(0xa892, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x8b9c, gbc.sp());
        EXPECT(0xa894, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa892));
        EXPECT(0x0, gbc.readMem(0xa893));
        // CB 00 02AD
        gbc.setState(0x1004, 0x6454, 0x5c40, 0xe5ad, 0x9659, 0x55b2, 0x0, 0x0);
        gbc.writeMem(0x1004, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x6454, gbc.sp());
        EXPECT(0x1006, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02AE
        gbc.setState(0x69a2, 0x2848, 0xcf90, 0xf0ac, 0x4f48, 0xf550, 0x0, 0x1);
        gbc.writeMem(0x69a2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x2848, gbc.sp());
        EXPECT(0x69a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02AF
        gbc.setState(0x4358, 0xbc7d, 0x7bd0, 0x2c2, 0x4b97, 0xe5ea, 0x0, 0x1);
        gbc.writeMem(0x4358, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xbc7d, gbc.sp());
        EXPECT(0x435a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02B0
        gbc.setState(0x4a3e, 0xd50a, 0xbd0, 0xce26, 0x4005, 0x724b, 0x1, 0x0);
        gbc.writeMem(0x4a3e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xd50a, gbc.sp());
        EXPECT(0x4a40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02B1
        gbc.setState(0x38b9, 0xaeea, 0xcfa0, 0x275a, 0x2dfc, 0x4f2, 0x1, 0x0);
        gbc.writeMem(0x38b9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xaeea, gbc.sp());
        EXPECT(0x38bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02B2
        gbc.setState(0x946, 0xe3c0, 0x5bb0, 0x155a, 0xbc95, 0xd534, 0x0, 0x1);
        gbc.writeMem(0x946, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xe3c0, gbc.sp());
        EXPECT(0x948, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02B3
        gbc.setState(0x7251, 0x6b8b, 0xf3a0, 0x49f3, 0x7506, 0x836f, 0x0, 0x0);
        gbc.writeMem(0x7251, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x6b8b, gbc.sp());
        EXPECT(0x7253, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02B4
        gbc.setState(0x32ba, 0xd3b2, 0x8ca0, 0x6195, 0x4b8d, 0xd139, 0x0, 0x0);
        gbc.writeMem(0x32ba, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xd3b2, gbc.sp());
        EXPECT(0x32bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02B5
        gbc.setState(0xbc15, 0x9bd7, 0xc970, 0xa810, 0xe236, 0xefdf, 0x0, 0x1);
        gbc.writeMem(0xbc15, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x9bd7, gbc.sp());
        EXPECT(0xbc17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc15));
        EXPECT(0x0, gbc.readMem(0xbc16));
        // CB 00 02B6
        gbc.setState(0xc986, 0x1e7d, 0x9a70, 0xef26, 0xfb66, 0x4b96, 0x0, 0x0);
        gbc.writeMem(0xc986, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x1e7d, gbc.sp());
        EXPECT(0xc988, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc986));
        EXPECT(0x0, gbc.readMem(0xc987));
        // CB 00 02B7
        gbc.setState(0xe777, 0x1fca, 0x5160, 0xff85, 0xc8f4, 0x5289, 0x0, 0x1);
        gbc.writeMem(0xe777, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x1fca, gbc.sp());
        EXPECT(0xe779, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe777));
        EXPECT(0x0, gbc.readMem(0xe778));
        // CB 00 02B8
        gbc.setState(0xe655, 0xecde, 0x7670, 0xf0eb, 0x205d, 0x4832, 0x0, 0x1);
        gbc.writeMem(0xe655, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xecde, gbc.sp());
        EXPECT(0xe657, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe655));
        EXPECT(0x0, gbc.readMem(0xe656));
        // CB 00 02B9
        gbc.setState(0xe205, 0x71e2, 0xdba0, 0x8c9, 0x24ac, 0x2438, 0x0, 0x1);
        gbc.writeMem(0xe205, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x71e2, gbc.sp());
        EXPECT(0xe207, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe205));
        EXPECT(0x0, gbc.readMem(0xe206));
        // CB 00 02BA
        gbc.setState(0xa09a, 0xc419, 0x2d0, 0xf014, 0xfbfb, 0x89a, 0x0, 0x0);
        gbc.writeMem(0xa09a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xc419, gbc.sp());
        EXPECT(0xa09c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa09a));
        EXPECT(0x0, gbc.readMem(0xa09b));
        // CB 00 02BB
        gbc.setState(0x4573, 0x5a2a, 0xa0f0, 0x3225, 0x9afc, 0xc5f9, 0x0, 0x1);
        gbc.writeMem(0x4573, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x5a2a, gbc.sp());
        EXPECT(0x4575, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02BC
        gbc.setState(0xe929, 0x9d7e, 0x7d40, 0x9e7c, 0xe0d2, 0xc0f, 0x1, 0x1);
        gbc.writeMem(0xe929, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x9d7e, gbc.sp());
        EXPECT(0xe92b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe929));
        EXPECT(0x0, gbc.readMem(0xe92a));
        // CB 00 02BD
        gbc.setState(0xe794, 0xed6e, 0xd280, 0x34e4, 0x36ae, 0x8358, 0x0, 0x0);
        gbc.writeMem(0xe794, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xed6e, gbc.sp());
        EXPECT(0xe796, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe794));
        EXPECT(0x0, gbc.readMem(0xe795));
        // CB 00 02BE
        gbc.setState(0x2ee4, 0xd9fc, 0x1b00, 0x7e04, 0x1867, 0x8007, 0x1, 0x1);
        gbc.writeMem(0x2ee4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xd9fc, gbc.sp());
        EXPECT(0x2ee6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02BF
        gbc.setState(0x5705, 0x21b6, 0x2c50, 0xf7ab, 0x2303, 0x46f7, 0x0, 0x0);
        gbc.writeMem(0x5705, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x21b6, gbc.sp());
        EXPECT(0x5707, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02C0
        gbc.setState(0xe4c3, 0x3a68, 0x7e10, 0x1774, 0x106d, 0x737e, 0x0, 0x0);
        gbc.writeMem(0xe4c3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x3a68, gbc.sp());
        EXPECT(0xe4c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4c3));
        EXPECT(0x0, gbc.readMem(0xe4c4));
        // CB 00 02C1
        gbc.setState(0xc986, 0x4ff1, 0x63b0, 0x8688, 0x7f2e, 0x77a0, 0x0, 0x1);
        gbc.writeMem(0xc986, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x4ff1, gbc.sp());
        EXPECT(0xc988, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc986));
        EXPECT(0x0, gbc.readMem(0xc987));
        // CB 00 02C2
        gbc.setState(0x1069, 0x547a, 0xda60, 0xaf8b, 0x1f7c, 0x91d8, 0x1, 0x0);
        gbc.writeMem(0x1069, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x547a, gbc.sp());
        EXPECT(0x106b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02C3
        gbc.setState(0xe49, 0x8ce, 0x57a0, 0x247f, 0x1de2, 0xff24, 0x1, 0x1);
        gbc.writeMem(0xe49, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x8ce, gbc.sp());
        EXPECT(0xe4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02C4
        gbc.setState(0xadad, 0x6930, 0xf080, 0x4ff4, 0x33eb, 0xddf6, 0x0, 0x1);
        gbc.writeMem(0xadad, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x6930, gbc.sp());
        EXPECT(0xadaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadad));
        EXPECT(0x0, gbc.readMem(0xadae));
        // CB 00 02C5
        gbc.setState(0x8c16, 0x83e7, 0x2da0, 0x339b, 0x176a, 0x5f47, 0x0, 0x1);
        gbc.writeMem(0x8c16, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x83e7, gbc.sp());
        EXPECT(0x8c18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c16));
        EXPECT(0x0, gbc.readMem(0x8c17));
        // CB 00 02C6
        gbc.setState(0x2457, 0xff5d, 0xa8f0, 0xc569, 0xb696, 0x5ddd, 0x1, 0x0);
        gbc.writeMem(0x2457, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xff5d, gbc.sp());
        EXPECT(0x2459, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02C7
        gbc.setState(0xbeb7, 0x4f13, 0x280, 0x62dc, 0xf2fb, 0x57cd, 0x1, 0x0);
        gbc.writeMem(0xbeb7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x4f13, gbc.sp());
        EXPECT(0xbeb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbeb7));
        EXPECT(0x0, gbc.readMem(0xbeb8));
        // CB 00 02C8
        gbc.setState(0xecb, 0x579a, 0x5040, 0x6cd9, 0x87d4, 0x2774, 0x0, 0x1);
        gbc.writeMem(0xecb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x579a, gbc.sp());
        EXPECT(0xecd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02C9
        gbc.setState(0x43b4, 0xd968, 0x8cc0, 0x2fd5, 0x2c8, 0xe40c, 0x0, 0x0);
        gbc.writeMem(0x43b4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xd968, gbc.sp());
        EXPECT(0x43b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02CA
        gbc.setState(0xb54a, 0xca54, 0xe430, 0x1911, 0xcdb3, 0xe0a8, 0x1, 0x0);
        gbc.writeMem(0xb54a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xca54, gbc.sp());
        EXPECT(0xb54c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb54a));
        EXPECT(0x0, gbc.readMem(0xb54b));
        // CB 00 02CB
        gbc.setState(0xc605, 0x4841, 0xb860, 0xe325, 0x1241, 0x6374, 0x1, 0x0);
        gbc.writeMem(0xc605, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x4841, gbc.sp());
        EXPECT(0xc607, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc605));
        EXPECT(0x0, gbc.readMem(0xc606));
        // CB 00 02CE
        gbc.setState(0x9c34, 0x674b, 0x9380, 0x5d0, 0x4355, 0xb7ac, 0x0, 0x1);
        gbc.writeMem(0x9c34, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x674b, gbc.sp());
        EXPECT(0x9c36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c34));
        EXPECT(0x0, gbc.readMem(0x9c35));
        // CB 00 02CF
        gbc.setState(0xa6e3, 0x3db, 0x2de0, 0xbc1c, 0xfc10, 0x661c, 0x1, 0x1);
        gbc.writeMem(0xa6e3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x3db, gbc.sp());
        EXPECT(0xa6e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6e3));
        EXPECT(0x0, gbc.readMem(0xa6e4));
        // CB 00 02D0
        gbc.setState(0x28a, 0x8fb6, 0x720, 0xca78, 0x8eff, 0xf803, 0x0, 0x1);
        gbc.writeMem(0x28a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x8fb6, gbc.sp());
        EXPECT(0x28c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02D1
        gbc.setState(0xdd31, 0x5cb5, 0xe790, 0x8d70, 0xf9c, 0x80af, 0x1, 0x0);
        gbc.writeMem(0xdd31, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x5cb5, gbc.sp());
        EXPECT(0xdd33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd31));
        EXPECT(0x0, gbc.readMem(0xdd32));
        // CB 00 02D2
        gbc.setState(0x9c2e, 0xe93, 0xd0d0, 0x206e, 0x9809, 0x79fe, 0x1, 0x0);
        gbc.writeMem(0x9c2e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xe93, gbc.sp());
        EXPECT(0x9c30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c2e));
        EXPECT(0x0, gbc.readMem(0x9c2f));
        // CB 00 02D3
        gbc.setState(0x6da7, 0x42dd, 0x4aa0, 0xe1d1, 0x87c9, 0x53aa, 0x0, 0x1);
        gbc.writeMem(0x6da7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x42dd, gbc.sp());
        EXPECT(0x6da9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02D5
        gbc.setState(0xd987, 0x85ac, 0x4de0, 0x7a9c, 0x8919, 0xb4f3, 0x1, 0x0);
        gbc.writeMem(0xd987, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x85ac, gbc.sp());
        EXPECT(0xd989, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd987));
        EXPECT(0x0, gbc.readMem(0xd988));
        // CB 00 02D6
        gbc.setState(0x5728, 0x78da, 0xa40, 0xfc16, 0x190a, 0x1136, 0x1, 0x1);
        gbc.writeMem(0x5728, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x78da, gbc.sp());
        EXPECT(0x572a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02D7
        gbc.setState(0x5249, 0xaeb4, 0xfcc0, 0x13e9, 0xb380, 0xb9e3, 0x1, 0x1);
        gbc.writeMem(0x5249, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xaeb4, gbc.sp());
        EXPECT(0x524b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02D8
        gbc.setState(0x9707, 0x32eb, 0xd2c0, 0x635a, 0xa607, 0x7f77, 0x1, 0x0);
        gbc.writeMem(0x9707, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x32eb, gbc.sp());
        EXPECT(0x9709, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9707));
        EXPECT(0x0, gbc.readMem(0x9708));
        // CB 00 02D9
        gbc.setState(0x6b8b, 0x1ba7, 0x7290, 0x3613, 0xa709, 0xf95d, 0x1, 0x0);
        gbc.writeMem(0x6b8b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x1ba7, gbc.sp());
        EXPECT(0x6b8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02DA
        gbc.setState(0x28ea, 0x1855, 0xd880, 0x4654, 0x7431, 0xc48d, 0x1, 0x1);
        gbc.writeMem(0x28ea, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x1855, gbc.sp());
        EXPECT(0x28ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02DB
        gbc.setState(0x2c75, 0x90e9, 0x42a0, 0x3af5, 0x962a, 0x8a3b, 0x0, 0x1);
        gbc.writeMem(0x2c75, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x90e9, gbc.sp());
        EXPECT(0x2c77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02DC
        gbc.setState(0x3045, 0xc615, 0x57d0, 0xe906, 0x7d9a, 0x49ca, 0x1, 0x1);
        gbc.writeMem(0x3045, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xc615, gbc.sp());
        EXPECT(0x3047, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02DD
        gbc.setState(0x730b, 0xffaf, 0xf590, 0x8b01, 0x53f0, 0x236d, 0x1, 0x0);
        gbc.writeMem(0x730b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xffaf, gbc.sp());
        EXPECT(0x730d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02DE
        gbc.setState(0x37e6, 0x4437, 0xc350, 0x6311, 0x3ebb, 0x4b3e, 0x1, 0x0);
        gbc.writeMem(0x37e6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x4437, gbc.sp());
        EXPECT(0x37e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02DF
        gbc.setState(0xd31f, 0x963f, 0x8310, 0x7c75, 0xf564, 0x2a38, 0x0, 0x1);
        gbc.writeMem(0xd31f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x963f, gbc.sp());
        EXPECT(0xd321, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd31f));
        EXPECT(0x0, gbc.readMem(0xd320));
        // CB 00 02E0
        gbc.setState(0x2f0, 0x9222, 0xef40, 0xcde, 0xf57b, 0x40f, 0x1, 0x0);
        gbc.writeMem(0x2f0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x9222, gbc.sp());
        EXPECT(0x2f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02E1
        gbc.setState(0x8369, 0xfcb1, 0x91a0, 0x81d2, 0x8ff6, 0x3a47, 0x0, 0x1);
        gbc.writeMem(0x8369, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xfcb1, gbc.sp());
        EXPECT(0x836b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8369));
        EXPECT(0x0, gbc.readMem(0x836a));
        // CB 00 02E2
        gbc.setState(0x2e09, 0x262f, 0x7f40, 0xc010, 0x8159, 0xbafc, 0x0, 0x1);
        gbc.writeMem(0x2e09, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x262f, gbc.sp());
        EXPECT(0x2e0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02E3
        gbc.setState(0x2b1b, 0x3801, 0x1c70, 0x9206, 0xfa44, 0xc00a, 0x1, 0x1);
        gbc.writeMem(0x2b1b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x3801, gbc.sp());
        EXPECT(0x2b1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02E5
        gbc.setState(0x69f9, 0xb1c9, 0xbc0, 0x7e66, 0x225d, 0x75b6, 0x1, 0x0);
        gbc.writeMem(0x69f9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xb1c9, gbc.sp());
        EXPECT(0x69fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02E6
        gbc.setState(0x9cd6, 0xebfc, 0x6320, 0x4446, 0x6ce4, 0xc282, 0x0, 0x0);
        gbc.writeMem(0x9cd6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xebfc, gbc.sp());
        EXPECT(0x9cd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cd6));
        EXPECT(0x0, gbc.readMem(0x9cd7));
        // CB 00 02E7
        gbc.setState(0x3f2f, 0xa7da, 0xdb50, 0xfdd5, 0x2630, 0xf3a6, 0x1, 0x1);
        gbc.writeMem(0x3f2f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xa7da, gbc.sp());
        EXPECT(0x3f31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02E8
        gbc.setState(0xda45, 0x7700, 0xc2e0, 0xf8f0, 0x4acc, 0x19a4, 0x0, 0x0);
        gbc.writeMem(0xda45, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x7700, gbc.sp());
        EXPECT(0xda47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda45));
        EXPECT(0x0, gbc.readMem(0xda46));
        // CB 00 02E9
        gbc.setState(0x5498, 0x2148, 0x5160, 0xfa42, 0x1d23, 0xdd15, 0x1, 0x1);
        gbc.writeMem(0x5498, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x2148, gbc.sp());
        EXPECT(0x549a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02EA
        gbc.setState(0x632e, 0x59e0, 0xaa20, 0x7d50, 0xcef, 0xe53d, 0x0, 0x1);
        gbc.writeMem(0x632e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x59e0, gbc.sp());
        EXPECT(0x6330, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02EB
        gbc.setState(0xa3a3, 0x9305, 0x5ad0, 0x5144, 0xf875, 0xbd7c, 0x0, 0x1);
        gbc.writeMem(0xa3a3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x9305, gbc.sp());
        EXPECT(0xa3a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3a3));
        EXPECT(0x0, gbc.readMem(0xa3a4));
        // CB 00 02EC
        gbc.setState(0x67d4, 0x1fab, 0x9420, 0x9481, 0x4265, 0xb129, 0x1, 0x0);
        gbc.writeMem(0x67d4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x1fab, gbc.sp());
        EXPECT(0x67d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02ED
        gbc.setState(0xc073, 0x3b9a, 0xf640, 0x8877, 0x61b7, 0x1bf0, 0x0, 0x0);
        gbc.writeMem(0xc073, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x3b9a, gbc.sp());
        EXPECT(0xc075, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc073));
        EXPECT(0x0, gbc.readMem(0xc074));
        // CB 00 02EE
        gbc.setState(0xbeca, 0xb94f, 0xd4e0, 0xd8f3, 0x43b5, 0x8725, 0x1, 0x0);
        gbc.writeMem(0xbeca, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xb94f, gbc.sp());
        EXPECT(0xbecc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbeca));
        EXPECT(0x0, gbc.readMem(0xbecb));
        // CB 00 02EF
        gbc.setState(0x8be9, 0xa54b, 0x6730, 0x7726, 0x2673, 0x941f, 0x1, 0x0);
        gbc.writeMem(0x8be9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xa54b, gbc.sp());
        EXPECT(0x8beb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8be9));
        EXPECT(0x0, gbc.readMem(0x8bea));
        // CB 00 02F0
        gbc.setState(0x6895, 0x2c8c, 0xcb00, 0x4102, 0x5263, 0x540, 0x1, 0x0);
        gbc.writeMem(0x6895, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x2c8c, gbc.sp());
        EXPECT(0x6897, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02F1
        gbc.setState(0x9682, 0x19b3, 0x3b90, 0xc2b2, 0x201a, 0xe49b, 0x0, 0x1);
        gbc.writeMem(0x9682, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x19b3, gbc.sp());
        EXPECT(0x9684, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9682));
        EXPECT(0x0, gbc.readMem(0x9683));
        // CB 00 02F2
        gbc.setState(0xac08, 0xc0b1, 0x5070, 0x72f8, 0x8f71, 0x93e2, 0x0, 0x0);
        gbc.writeMem(0xac08, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xc0b1, gbc.sp());
        EXPECT(0xac0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac08));
        EXPECT(0x0, gbc.readMem(0xac09));
        // CB 00 02F3
        gbc.setState(0x5bf, 0x6e7d, 0x3fe0, 0x9fd9, 0xdce4, 0x1d2e, 0x0, 0x1);
        gbc.writeMem(0x5bf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x6e7d, gbc.sp());
        EXPECT(0x5c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02F4
        gbc.setState(0xdb91, 0xf9ca, 0x4430, 0x74e5, 0xaf58, 0x425e, 0x1, 0x1);
        gbc.writeMem(0xdb91, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xf9ca, gbc.sp());
        EXPECT(0xdb93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb91));
        EXPECT(0x0, gbc.readMem(0xdb92));
        // CB 00 02F5
        gbc.setState(0x18bf, 0x2cfc, 0x4bd0, 0x1144, 0x384, 0x52f2, 0x0, 0x0);
        gbc.writeMem(0x18bf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x2cfc, gbc.sp());
        EXPECT(0x18c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02F6
        gbc.setState(0xcf5f, 0x949c, 0x2650, 0xe52c, 0xf32, 0x1b6, 0x1, 0x1);
        gbc.writeMem(0xcf5f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x949c, gbc.sp());
        EXPECT(0xcf61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf5f));
        EXPECT(0x0, gbc.readMem(0xcf60));
        // CB 00 02F7
        gbc.setState(0x238c, 0x6b3f, 0xf350, 0x576f, 0x32e, 0x86ea, 0x1, 0x1);
        gbc.writeMem(0x238c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x6b3f, gbc.sp());
        EXPECT(0x238e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02F8
        gbc.setState(0x4b3c, 0x22f4, 0x79b0, 0x6b6c, 0x9bd, 0x11cc, 0x0, 0x1);
        gbc.writeMem(0x4b3c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x22f4, gbc.sp());
        EXPECT(0x4b3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02F9
        gbc.setState(0x3c50, 0x27db, 0x5720, 0xb971, 0x3620, 0xa243, 0x0, 0x0);
        gbc.writeMem(0x3c50, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x27db, gbc.sp());
        EXPECT(0x3c52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02FA
        gbc.setState(0x27c6, 0x586b, 0xd3f0, 0x4efe, 0xd65c, 0x136e, 0x1, 0x0);
        gbc.writeMem(0x27c6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x586b, gbc.sp());
        EXPECT(0x27c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02FB
        gbc.setState(0x213f, 0x82df, 0x8770, 0x1e60, 0x9047, 0xd6b5, 0x0, 0x1);
        gbc.writeMem(0x213f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x82df, gbc.sp());
        EXPECT(0x2141, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02FC
        gbc.setState(0x3748, 0x49ad, 0xf320, 0x20ee, 0xe515, 0xac58, 0x0, 0x1);
        gbc.writeMem(0x3748, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x49ad, gbc.sp());
        EXPECT(0x374a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 02FD
        gbc.setState(0x7a7c, 0xa35, 0xaa0, 0xb5d7, 0x895, 0x8439, 0x1, 0x1);
        gbc.writeMem(0x7a7c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xa35, gbc.sp());
        EXPECT(0x7a7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 02FE
        gbc.setState(0xb93a, 0xe365, 0xe440, 0xc625, 0xb3d2, 0xa944, 0x1, 0x0);
        gbc.writeMem(0xb93a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xe365, gbc.sp());
        EXPECT(0xb93c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb93a));
        EXPECT(0x0, gbc.readMem(0xb93b));
        // CB 00 02FF
        gbc.setState(0x3677, 0x92b3, 0x7d0, 0x3356, 0xb46e, 0x2aaa, 0x0, 0x1);
        gbc.writeMem(0x3677, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x92b3, gbc.sp());
        EXPECT(0x3679, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0300
        gbc.setState(0xbd8b, 0x5e81, 0x2a80, 0x94aa, 0xa8c1, 0x60ba, 0x1, 0x0);
        gbc.writeMem(0xbd8b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x5e81, gbc.sp());
        EXPECT(0xbd8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd8b));
        EXPECT(0x0, gbc.readMem(0xbd8c));
        // CB 00 0301
        gbc.setState(0x88fc, 0x97e1, 0xf890, 0x7d2b, 0x9adb, 0x9446, 0x1, 0x1);
        gbc.writeMem(0x88fc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x97e1, gbc.sp());
        EXPECT(0x88fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88fc));
        EXPECT(0x0, gbc.readMem(0x88fd));
        // CB 00 0302
        gbc.setState(0x56e5, 0xf06c, 0x5de0, 0xa316, 0x847d, 0x4982, 0x0, 0x1);
        gbc.writeMem(0x56e5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xf06c, gbc.sp());
        EXPECT(0x56e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0303
        gbc.setState(0xa7ff, 0xb002, 0x5bc0, 0xfe64, 0xf2b6, 0x2085, 0x1, 0x1);
        gbc.writeMem(0xa7ff, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xb002, gbc.sp());
        EXPECT(0xa801, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7ff));
        EXPECT(0x0, gbc.readMem(0xa800));
        // CB 00 0304
        gbc.setState(0x63eb, 0x276c, 0xf1c0, 0xd006, 0x3d06, 0x4aa7, 0x0, 0x1);
        gbc.writeMem(0x63eb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x276c, gbc.sp());
        EXPECT(0x63ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0305
        gbc.setState(0x86c3, 0xe565, 0x2040, 0x3c6b, 0x3598, 0xfb4d, 0x0, 0x1);
        gbc.writeMem(0x86c3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xe565, gbc.sp());
        EXPECT(0x86c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86c3));
        EXPECT(0x0, gbc.readMem(0x86c4));
        // CB 00 0306
        gbc.setState(0xbdc5, 0x1218, 0xb7d0, 0xc5e2, 0x7f67, 0xd3e2, 0x1, 0x0);
        gbc.writeMem(0xbdc5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x1218, gbc.sp());
        EXPECT(0xbdc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdc5));
        EXPECT(0x0, gbc.readMem(0xbdc6));
        // CB 00 0308
        gbc.setState(0xb68d, 0xc13c, 0xe460, 0x7e8e, 0x1296, 0x342a, 0x1, 0x0);
        gbc.writeMem(0xb68d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xc13c, gbc.sp());
        EXPECT(0xb68f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb68d));
        EXPECT(0x0, gbc.readMem(0xb68e));
        // CB 00 0309
        gbc.setState(0x185e, 0x3609, 0x4330, 0xeea1, 0xfa35, 0x3a2e, 0x0, 0x1);
        gbc.writeMem(0x185e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x3609, gbc.sp());
        EXPECT(0x1860, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 030A
        gbc.setState(0xc3cd, 0xb5df, 0x6da0, 0x3cf5, 0x4b6d, 0x6925, 0x0, 0x0);
        gbc.writeMem(0xc3cd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xb5df, gbc.sp());
        EXPECT(0xc3cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3cd));
        EXPECT(0x0, gbc.readMem(0xc3ce));
        // CB 00 030B
        gbc.setState(0x42a9, 0x794d, 0x1940, 0x7af9, 0x9d00, 0xa5ae, 0x1, 0x0);
        gbc.writeMem(0x42a9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x794d, gbc.sp());
        EXPECT(0x42ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 030C
        gbc.setState(0x3e94, 0xb4de, 0x33a0, 0x6be7, 0xbde6, 0x7c09, 0x0, 0x1);
        gbc.writeMem(0x3e94, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xb4de, gbc.sp());
        EXPECT(0x3e96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 030D
        gbc.setState(0x1016, 0xde58, 0xb450, 0x9322, 0xf654, 0x7d44, 0x1, 0x0);
        gbc.writeMem(0x1016, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xde58, gbc.sp());
        EXPECT(0x1018, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 030E
        gbc.setState(0x3b55, 0x1c8b, 0x79f0, 0xf209, 0x566b, 0x5412, 0x1, 0x0);
        gbc.writeMem(0x3b55, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x1c8b, gbc.sp());
        EXPECT(0x3b57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 030F
        gbc.setState(0xa327, 0x3a84, 0xa530, 0x13ae, 0x90fe, 0xfaed, 0x1, 0x1);
        gbc.writeMem(0xa327, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x3a84, gbc.sp());
        EXPECT(0xa329, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa327));
        EXPECT(0x0, gbc.readMem(0xa328));
        // CB 00 0310
        gbc.setState(0x4b1, 0xff17, 0xa8b0, 0xbec4, 0xc766, 0x507e, 0x1, 0x1);
        gbc.writeMem(0x4b1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xff17, gbc.sp());
        EXPECT(0x4b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0311
        gbc.setState(0x3a00, 0xe954, 0x6500, 0xa1f5, 0xd1e2, 0x4e4, 0x0, 0x1);
        gbc.writeMem(0x3a00, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xe954, gbc.sp());
        EXPECT(0x3a02, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0312
        gbc.setState(0x4daf, 0x4465, 0x6f0, 0x2d96, 0x9907, 0xcf47, 0x1, 0x0);
        gbc.writeMem(0x4daf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x4465, gbc.sp());
        EXPECT(0x4db1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0313
        gbc.setState(0xd9b0, 0x4ad2, 0x42d0, 0x73c, 0x427c, 0xefac, 0x0, 0x1);
        gbc.writeMem(0xd9b0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x4ad2, gbc.sp());
        EXPECT(0xd9b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9b0));
        EXPECT(0x0, gbc.readMem(0xd9b1));
        // CB 00 0314
        gbc.setState(0x3b4c, 0x4935, 0x15e0, 0x6182, 0x9e47, 0x4d6f, 0x0, 0x1);
        gbc.writeMem(0x3b4c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x4935, gbc.sp());
        EXPECT(0x3b4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0315
        gbc.setState(0x5a12, 0x3b82, 0x1e40, 0x4bc9, 0xa14d, 0xde13, 0x0, 0x0);
        gbc.writeMem(0x5a12, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x3b82, gbc.sp());
        EXPECT(0x5a14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0317
        gbc.setState(0x66ec, 0x8c89, 0xc5f0, 0x1b3a, 0x8808, 0x959f, 0x1, 0x0);
        gbc.writeMem(0x66ec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x8c89, gbc.sp());
        EXPECT(0x66ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0319
        gbc.setState(0xc153, 0xa348, 0x9bd0, 0xd1b6, 0x3cb8, 0x34ab, 0x0, 0x1);
        gbc.writeMem(0xc153, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xa348, gbc.sp());
        EXPECT(0xc155, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc153));
        EXPECT(0x0, gbc.readMem(0xc154));
        // CB 00 031A
        gbc.setState(0xadcf, 0x3065, 0x4890, 0x2d12, 0xfb3b, 0x6345, 0x0, 0x1);
        gbc.writeMem(0xadcf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x3065, gbc.sp());
        EXPECT(0xadd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadcf));
        EXPECT(0x0, gbc.readMem(0xadd0));
        // CB 00 031B
        gbc.setState(0x7258, 0xb423, 0xebc0, 0x99d2, 0x379d, 0x8d9a, 0x1, 0x1);
        gbc.writeMem(0x7258, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xb423, gbc.sp());
        EXPECT(0x725a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 031C
        gbc.setState(0xa1a1, 0x517, 0xe9f0, 0x5025, 0x75f0, 0xd415, 0x1, 0x1);
        gbc.writeMem(0xa1a1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x517, gbc.sp());
        EXPECT(0xa1a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1a1));
        EXPECT(0x0, gbc.readMem(0xa1a2));
        // CB 00 031D
        gbc.setState(0xb938, 0x82bf, 0xf1c0, 0x3e16, 0xd74b, 0xd4c4, 0x1, 0x1);
        gbc.writeMem(0xb938, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x82bf, gbc.sp());
        EXPECT(0xb93a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb938));
        EXPECT(0x0, gbc.readMem(0xb939));
        // CB 00 031E
        gbc.setState(0x87bd, 0xd279, 0x9830, 0x6f10, 0xfa78, 0x2182, 0x1, 0x1);
        gbc.writeMem(0x87bd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xd279, gbc.sp());
        EXPECT(0x87bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87bd));
        EXPECT(0x0, gbc.readMem(0x87be));
        // CB 00 031F
        gbc.setState(0x3746, 0xcf1c, 0x1890, 0x53f7, 0x6f0f, 0x7de0, 0x1, 0x1);
        gbc.writeMem(0x3746, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xcf1c, gbc.sp());
        EXPECT(0x3748, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0320
        gbc.setState(0x3ceb, 0x937d, 0x8030, 0xd82b, 0xffbb, 0xba2e, 0x1, 0x0);
        gbc.writeMem(0x3ceb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x937d, gbc.sp());
        EXPECT(0x3ced, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0321
        gbc.setState(0xd372, 0xc500, 0xcbe0, 0xd224, 0x2fb1, 0x4f14, 0x1, 0x0);
        gbc.writeMem(0xd372, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xc500, gbc.sp());
        EXPECT(0xd374, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd372));
        EXPECT(0x0, gbc.readMem(0xd373));
        // CB 00 0322
        gbc.setState(0x58a4, 0xa94b, 0x6980, 0xeb33, 0x96bb, 0x9945, 0x1, 0x0);
        gbc.writeMem(0x58a4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xa94b, gbc.sp());
        EXPECT(0x58a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0323
        gbc.setState(0xa60a, 0xadc7, 0x8940, 0x264d, 0x9c06, 0x22aa, 0x1, 0x0);
        gbc.writeMem(0xa60a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xadc7, gbc.sp());
        EXPECT(0xa60c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa60a));
        EXPECT(0x0, gbc.readMem(0xa60b));
        // CB 00 0324
        gbc.setState(0xa1b, 0xb683, 0xb9a0, 0x2137, 0xb5c5, 0x57ed, 0x0, 0x1);
        gbc.writeMem(0xa1b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xb683, gbc.sp());
        EXPECT(0xa1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0325
        gbc.setState(0x5e30, 0x2d49, 0x1070, 0x40d3, 0x1d09, 0x1bbb, 0x1, 0x0);
        gbc.writeMem(0x5e30, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x2d49, gbc.sp());
        EXPECT(0x5e32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0326
        gbc.setState(0x1049, 0xb3ad, 0xce10, 0x23ae, 0x204d, 0xae4a, 0x0, 0x1);
        gbc.writeMem(0x1049, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xb3ad, gbc.sp());
        EXPECT(0x104b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0328
        gbc.setState(0x71a3, 0xd00e, 0x36e0, 0xedef, 0x6e9e, 0xcefa, 0x0, 0x0);
        gbc.writeMem(0x71a3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xd00e, gbc.sp());
        EXPECT(0x71a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0329
        gbc.setState(0x64f8, 0x847d, 0xdaf0, 0xbea9, 0x48cb, 0x7319, 0x0, 0x0);
        gbc.writeMem(0x64f8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x847d, gbc.sp());
        EXPECT(0x64fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 032A
        gbc.setState(0x3fc8, 0x5483, 0x8200, 0x165c, 0xa4ef, 0x342f, 0x1, 0x1);
        gbc.writeMem(0x3fc8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x5483, gbc.sp());
        EXPECT(0x3fca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 032B
        gbc.setState(0xe017, 0xd0f7, 0xf7c0, 0x3b89, 0xeb54, 0x847c, 0x0, 0x1);
        gbc.writeMem(0xe017, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xd0f7, gbc.sp());
        EXPECT(0xe019, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe017));
        EXPECT(0x0, gbc.readMem(0xe018));
        // CB 00 032C
        gbc.setState(0x82ad, 0x9fb0, 0xb090, 0x5e3a, 0x4340, 0x251b, 0x1, 0x1);
        gbc.writeMem(0x82ad, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x9fb0, gbc.sp());
        EXPECT(0x82af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82ad));
        EXPECT(0x0, gbc.readMem(0x82ae));
        // CB 00 032D
        gbc.setState(0x1c9e, 0x62f, 0xc2e0, 0x1e61, 0x88ba, 0x17df, 0x0, 0x1);
        gbc.writeMem(0x1c9e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x62f, gbc.sp());
        EXPECT(0x1ca0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 032E
        gbc.setState(0x5e08, 0x59cc, 0xc1d0, 0xace5, 0xd836, 0xa1e8, 0x0, 0x1);
        gbc.writeMem(0x5e08, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x59cc, gbc.sp());
        EXPECT(0x5e0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0330
        gbc.setState(0x7cce, 0x83bf, 0x2690, 0x7267, 0x6cd8, 0xda78, 0x1, 0x0);
        gbc.writeMem(0x7cce, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x83bf, gbc.sp());
        EXPECT(0x7cd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0331
        gbc.setState(0xb41f, 0xdbed, 0x8130, 0x52c8, 0xac2f, 0xe81a, 0x1, 0x1);
        gbc.writeMem(0xb41f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xdbed, gbc.sp());
        EXPECT(0xb421, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb41f));
        EXPECT(0x0, gbc.readMem(0xb420));
        // CB 00 0332
        gbc.setState(0x547d, 0x42c1, 0x7a50, 0x2c7f, 0xee3a, 0xca37, 0x1, 0x0);
        gbc.writeMem(0x547d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x42c1, gbc.sp());
        EXPECT(0x547f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0333
        gbc.setState(0x81b0, 0x5859, 0x32b0, 0x7bd, 0xe24c, 0x8168, 0x0, 0x1);
        gbc.writeMem(0x81b0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x5859, gbc.sp());
        EXPECT(0x81b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81b0));
        EXPECT(0x0, gbc.readMem(0x81b1));
        // CB 00 0334
        gbc.setState(0xc0d9, 0x6dd8, 0xae50, 0xac2a, 0x25b7, 0x6d8e, 0x0, 0x0);
        gbc.writeMem(0xc0d9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x6dd8, gbc.sp());
        EXPECT(0xc0db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0d9));
        EXPECT(0x0, gbc.readMem(0xc0da));
        // CB 00 0335
        gbc.setState(0x9e9e, 0x53d4, 0xd220, 0xc14f, 0x6f62, 0xd0c9, 0x1, 0x0);
        gbc.writeMem(0x9e9e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x53d4, gbc.sp());
        EXPECT(0x9ea0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e9e));
        EXPECT(0x0, gbc.readMem(0x9e9f));
        // CB 00 0336
        gbc.setState(0x67e6, 0xdad8, 0xd0a0, 0xbaa2, 0xe50e, 0x6132, 0x0, 0x1);
        gbc.writeMem(0x67e6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xdad8, gbc.sp());
        EXPECT(0x67e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0337
        gbc.setState(0xe764, 0x795b, 0xb680, 0x866f, 0x1540, 0x329a, 0x1, 0x1);
        gbc.writeMem(0xe764, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x795b, gbc.sp());
        EXPECT(0xe766, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe764));
        EXPECT(0x0, gbc.readMem(0xe765));
        // CB 00 0338
        gbc.setState(0x99c7, 0x3e72, 0xeb60, 0x784b, 0x4de7, 0xeb69, 0x1, 0x0);
        gbc.writeMem(0x99c7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x3e72, gbc.sp());
        EXPECT(0x99c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99c7));
        EXPECT(0x0, gbc.readMem(0x99c8));
        // CB 00 0339
        gbc.setState(0xe1d1, 0xb8a, 0xd8a0, 0xa5b4, 0xe4c2, 0xbf50, 0x0, 0x0);
        gbc.writeMem(0xe1d1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xb8a, gbc.sp());
        EXPECT(0xe1d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1d1));
        EXPECT(0x0, gbc.readMem(0xe1d2));
        // CB 00 033B
        gbc.setState(0x83d3, 0xb9b9, 0x6290, 0xba82, 0x580c, 0x7ffb, 0x1, 0x1);
        gbc.writeMem(0x83d3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xb9b9, gbc.sp());
        EXPECT(0x83d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83d3));
        EXPECT(0x0, gbc.readMem(0x83d4));
        // CB 00 033C
        gbc.setState(0x591e, 0xd859, 0x6360, 0x27a5, 0x778a, 0x5751, 0x1, 0x1);
        gbc.writeMem(0x591e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xd859, gbc.sp());
        EXPECT(0x5920, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 033D
        gbc.setState(0x671d, 0x5416, 0x6050, 0x6fef, 0x99e8, 0xc204, 0x1, 0x1);
        gbc.writeMem(0x671d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x5416, gbc.sp());
        EXPECT(0x671f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 033E
        gbc.setState(0x566d, 0x7d06, 0x580, 0x51ab, 0xcfa9, 0xda28, 0x1, 0x1);
        gbc.writeMem(0x566d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x7d06, gbc.sp());
        EXPECT(0x566f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 033F
        gbc.setState(0x19e5, 0xa39f, 0x53d0, 0x70d0, 0x544d, 0x6894, 0x1, 0x0);
        gbc.writeMem(0x19e5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xa39f, gbc.sp());
        EXPECT(0x19e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0340
        gbc.setState(0x3771, 0x9d3a, 0x56a0, 0x9ca6, 0x2869, 0xf84e, 0x0, 0x0);
        gbc.writeMem(0x3771, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x9d3a, gbc.sp());
        EXPECT(0x3773, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0341
        gbc.setState(0x51cc, 0x86da, 0xec90, 0x57d6, 0x1f7c, 0x3639, 0x1, 0x0);
        gbc.writeMem(0x51cc, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x86da, gbc.sp());
        EXPECT(0x51ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0342
        gbc.setState(0xa66, 0x6314, 0x7b20, 0xa92d, 0xd86f, 0x4be, 0x0, 0x0);
        gbc.writeMem(0xa66, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x6314, gbc.sp());
        EXPECT(0xa68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0343
        gbc.setState(0x4d66, 0x39a, 0x1010, 0x4818, 0xbb8c, 0x942f, 0x0, 0x0);
        gbc.writeMem(0x4d66, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x39a, gbc.sp());
        EXPECT(0x4d68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0344
        gbc.setState(0x7ac7, 0xcb8f, 0x9d70, 0x608c, 0x39d, 0xde19, 0x1, 0x0);
        gbc.writeMem(0x7ac7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xcb8f, gbc.sp());
        EXPECT(0x7ac9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0345
        gbc.setState(0x7a4d, 0x1785, 0xef70, 0x5be5, 0x7bad, 0xa4f8, 0x1, 0x0);
        gbc.writeMem(0x7a4d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x1785, gbc.sp());
        EXPECT(0x7a4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0346
        gbc.setState(0xc3eb, 0x3b3e, 0x5790, 0x8124, 0x1c6b, 0x1689, 0x1, 0x0);
        gbc.writeMem(0xc3eb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x3b3e, gbc.sp());
        EXPECT(0xc3ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3eb));
        EXPECT(0x0, gbc.readMem(0xc3ec));
        // CB 00 0347
        gbc.setState(0x8cf3, 0xc0c7, 0xc660, 0x631a, 0x4abb, 0xd989, 0x1, 0x1);
        gbc.writeMem(0x8cf3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xc0c7, gbc.sp());
        EXPECT(0x8cf5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cf3));
        EXPECT(0x0, gbc.readMem(0x8cf4));
        // CB 00 0348
        gbc.setState(0xbcb2, 0x4f6, 0xcd60, 0xab4e, 0x2483, 0x499f, 0x0, 0x1);
        gbc.writeMem(0xbcb2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x4f6, gbc.sp());
        EXPECT(0xbcb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcb2));
        EXPECT(0x0, gbc.readMem(0xbcb3));
        // CB 00 0349
        gbc.setState(0x6685, 0xe2ff, 0xfec0, 0xed0, 0x998d, 0xee0f, 0x0, 0x0);
        gbc.writeMem(0x6685, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xe2ff, gbc.sp());
        EXPECT(0x6687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 034A
        gbc.setState(0xd81, 0xfd1b, 0x5b20, 0xfb74, 0xa1db, 0xb735, 0x0, 0x0);
        gbc.writeMem(0xd81, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xfd1b, gbc.sp());
        EXPECT(0xd83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 034B
        gbc.setState(0x22bb, 0x4663, 0xbc90, 0xe3c9, 0xf065, 0x5999, 0x0, 0x0);
        gbc.writeMem(0x22bb, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x4663, gbc.sp());
        EXPECT(0x22bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 034C
        gbc.setState(0x94d4, 0x594a, 0x3210, 0x85d4, 0x19e0, 0x5380, 0x1, 0x1);
        gbc.writeMem(0x94d4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x594a, gbc.sp());
        EXPECT(0x94d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94d4));
        EXPECT(0x0, gbc.readMem(0x94d5));
        // CB 00 034D
        gbc.setState(0x4915, 0xa874, 0x6230, 0x6abe, 0xae13, 0x3dd9, 0x1, 0x0);
        gbc.writeMem(0x4915, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xa874, gbc.sp());
        EXPECT(0x4917, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 034E
        gbc.setState(0x9b74, 0x20ad, 0x3900, 0xc666, 0x6214, 0x10f4, 0x1, 0x0);
        gbc.writeMem(0x9b74, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x20ad, gbc.sp());
        EXPECT(0x9b76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b74));
        EXPECT(0x0, gbc.readMem(0x9b75));
        // CB 00 034F
        gbc.setState(0x84a3, 0xef05, 0xb610, 0xcc14, 0xd804, 0xe1d7, 0x0, 0x1);
        gbc.writeMem(0x84a3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xef05, gbc.sp());
        EXPECT(0x84a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84a3));
        EXPECT(0x0, gbc.readMem(0x84a4));
        // CB 00 0350
        gbc.setState(0xacc3, 0xb911, 0xdb50, 0xd639, 0x1d61, 0xba53, 0x0, 0x0);
        gbc.writeMem(0xacc3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xb911, gbc.sp());
        EXPECT(0xacc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacc3));
        EXPECT(0x0, gbc.readMem(0xacc4));
        // CB 00 0351
        gbc.setState(0x6885, 0x6019, 0xf300, 0x9f4a, 0x39e9, 0x9d49, 0x0, 0x1);
        gbc.writeMem(0x6885, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x6019, gbc.sp());
        EXPECT(0x6887, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0352
        gbc.setState(0x81ef, 0xfa4b, 0x4350, 0x1cb1, 0x60ce, 0x58fb, 0x1, 0x0);
        gbc.writeMem(0x81ef, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xfa4b, gbc.sp());
        EXPECT(0x81f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81ef));
        EXPECT(0x0, gbc.readMem(0x81f0));
        // CB 00 0353
        gbc.setState(0x810a, 0xa5d7, 0xdd10, 0x57c3, 0x9473, 0xb293, 0x0, 0x0);
        gbc.writeMem(0x810a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xa5d7, gbc.sp());
        EXPECT(0x810c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x810a));
        EXPECT(0x0, gbc.readMem(0x810b));
        // CB 00 0354
        gbc.setState(0x366f, 0xe5dd, 0x1710, 0x7c4a, 0x9c71, 0x4c08, 0x1, 0x0);
        gbc.writeMem(0x366f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xe5dd, gbc.sp());
        EXPECT(0x3671, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0355
        gbc.setState(0xac9b, 0xe450, 0x9d40, 0x24b, 0x8a40, 0xb99e, 0x0, 0x0);
        gbc.writeMem(0xac9b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xe450, gbc.sp());
        EXPECT(0xac9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac9b));
        EXPECT(0x0, gbc.readMem(0xac9c));
        // CB 00 0356
        gbc.setState(0x9422, 0x4059, 0x95f0, 0x6c0a, 0x1f90, 0x6581, 0x1, 0x1);
        gbc.writeMem(0x9422, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x4059, gbc.sp());
        EXPECT(0x9424, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9422));
        EXPECT(0x0, gbc.readMem(0x9423));
        // CB 00 0357
        gbc.setState(0x9056, 0x51cb, 0xa190, 0x5df5, 0x772a, 0x38b7, 0x1, 0x1);
        gbc.writeMem(0x9056, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x51cb, gbc.sp());
        EXPECT(0x9058, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9056));
        EXPECT(0x0, gbc.readMem(0x9057));
        // CB 00 0358
        gbc.setState(0x7e8b, 0x7e89, 0xc610, 0x39e3, 0x4947, 0xe7bf, 0x0, 0x1);
        gbc.writeMem(0x7e8b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x7e89, gbc.sp());
        EXPECT(0x7e8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0359
        gbc.setState(0x1c9c, 0x76a7, 0xb490, 0x561, 0xe3d8, 0x6366, 0x0, 0x1);
        gbc.writeMem(0x1c9c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x76a7, gbc.sp());
        EXPECT(0x1c9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 035A
        gbc.setState(0x9d50, 0x68d3, 0xf70, 0x52db, 0xa75c, 0xa15e, 0x0, 0x1);
        gbc.writeMem(0x9d50, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x68d3, gbc.sp());
        EXPECT(0x9d52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d50));
        EXPECT(0x0, gbc.readMem(0x9d51));
        // CB 00 035B
        gbc.setState(0x418, 0x522d, 0xd50, 0x3cfa, 0x6bc1, 0xc105, 0x1, 0x1);
        gbc.writeMem(0x418, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x522d, gbc.sp());
        EXPECT(0x41a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 035C
        gbc.setState(0x2fe8, 0x21f2, 0x5430, 0xc9be, 0x74d7, 0x9c28, 0x0, 0x0);
        gbc.writeMem(0x2fe8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x21f2, gbc.sp());
        EXPECT(0x2fea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 035D
        gbc.setState(0x69a0, 0xe979, 0x4900, 0xc6e, 0xbffc, 0xede1, 0x0, 0x1);
        gbc.writeMem(0x69a0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xe979, gbc.sp());
        EXPECT(0x69a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 035E
        gbc.setState(0x5307, 0xcfcb, 0x6b80, 0xb39c, 0x1896, 0x5024, 0x0, 0x0);
        gbc.writeMem(0x5307, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xcfcb, gbc.sp());
        EXPECT(0x5309, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 035F
        gbc.setState(0x29c1, 0x8fc3, 0xaca0, 0x1acc, 0xbe03, 0xb5cc, 0x1, 0x0);
        gbc.writeMem(0x29c1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x8fc3, gbc.sp());
        EXPECT(0x29c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0360
        gbc.setState(0xb2e9, 0xc757, 0x5f40, 0x78f8, 0x7bcf, 0xeedc, 0x0, 0x1);
        gbc.writeMem(0xb2e9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xc757, gbc.sp());
        EXPECT(0xb2eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2e9));
        EXPECT(0x0, gbc.readMem(0xb2ea));
        // CB 00 0361
        gbc.setState(0x663a, 0xd4f8, 0x3ec0, 0xc57d, 0xe0ad, 0x8d56, 0x0, 0x0);
        gbc.writeMem(0x663a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xd4f8, gbc.sp());
        EXPECT(0x663c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0362
        gbc.setState(0x7a4e, 0x240f, 0x4310, 0xccc9, 0xda57, 0xc6db, 0x0, 0x0);
        gbc.writeMem(0x7a4e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x240f, gbc.sp());
        EXPECT(0x7a50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0363
        gbc.setState(0xd740, 0xfe08, 0x3820, 0x2e38, 0xa969, 0x78e, 0x0, 0x1);
        gbc.writeMem(0xd740, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xfe08, gbc.sp());
        EXPECT(0xd742, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd740));
        EXPECT(0x0, gbc.readMem(0xd741));
        // CB 00 0364
        gbc.setState(0x4c8d, 0x1b07, 0x510, 0xbbb9, 0x7124, 0x31d0, 0x1, 0x1);
        gbc.writeMem(0x4c8d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1b07, gbc.sp());
        EXPECT(0x4c8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0365
        gbc.setState(0xe5f0, 0xf263, 0xd5c0, 0xd237, 0xf9c1, 0xe5b2, 0x0, 0x1);
        gbc.writeMem(0xe5f0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xf263, gbc.sp());
        EXPECT(0xe5f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5f0));
        EXPECT(0x0, gbc.readMem(0xe5f1));
        // CB 00 0367
        gbc.setState(0x6664, 0x1856, 0x4b30, 0xf11e, 0x5b30, 0xa246, 0x1, 0x1);
        gbc.writeMem(0x6664, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x1856, gbc.sp());
        EXPECT(0x6666, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0368
        gbc.setState(0xb42b, 0xce9b, 0xb340, 0xb20a, 0x384a, 0xeb02, 0x1, 0x0);
        gbc.writeMem(0xb42b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xce9b, gbc.sp());
        EXPECT(0xb42d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb42b));
        EXPECT(0x0, gbc.readMem(0xb42c));
        // CB 00 0369
        gbc.setState(0x12ab, 0xf20d, 0xd580, 0x8109, 0x3aee, 0x37d6, 0x0, 0x0);
        gbc.writeMem(0x12ab, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xf20d, gbc.sp());
        EXPECT(0x12ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 036A
        gbc.setState(0x40be, 0x4e0, 0x5d20, 0x5e97, 0xa95f, 0x9a02, 0x0, 0x0);
        gbc.writeMem(0x40be, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x4e0, gbc.sp());
        EXPECT(0x40c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 036B
        gbc.setState(0xa49d, 0xd279, 0xc060, 0xc6ed, 0x510a, 0xd79d, 0x1, 0x1);
        gbc.writeMem(0xa49d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xd279, gbc.sp());
        EXPECT(0xa49f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa49d));
        EXPECT(0x0, gbc.readMem(0xa49e));
        // CB 00 036C
        gbc.setState(0x5fa2, 0x7943, 0x4500, 0x5826, 0xfa4b, 0xa8af, 0x1, 0x0);
        gbc.writeMem(0x5fa2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x7943, gbc.sp());
        EXPECT(0x5fa4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 036D
        gbc.setState(0xa7fa, 0xffff, 0x290, 0xdc5, 0x3197, 0xe1e2, 0x1, 0x1);
        gbc.writeMem(0xa7fa, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xffff, gbc.sp());
        EXPECT(0xa7fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7fa));
        EXPECT(0x0, gbc.readMem(0xa7fb));
        // CB 00 036E
        gbc.setState(0x9fb9, 0x19a4, 0x44b0, 0xb24c, 0x6a6d, 0x1586, 0x0, 0x1);
        gbc.writeMem(0x9fb9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x19a4, gbc.sp());
        EXPECT(0x9fbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fb9));
        EXPECT(0x0, gbc.readMem(0x9fba));
        // CB 00 036F
        gbc.setState(0xbc80, 0xd130, 0xc570, 0x5c55, 0xcc44, 0xe08e, 0x0, 0x0);
        gbc.writeMem(0xbc80, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xd130, gbc.sp());
        EXPECT(0xbc82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc80));
        EXPECT(0x0, gbc.readMem(0xbc81));
        // CB 00 0370
        gbc.setState(0xab5d, 0x567d, 0xa30, 0x9c94, 0xff24, 0xc71a, 0x1, 0x1);
        gbc.writeMem(0xab5d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x567d, gbc.sp());
        EXPECT(0xab5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab5d));
        EXPECT(0x0, gbc.readMem(0xab5e));
        // CB 00 0371
        gbc.setState(0xeab0, 0xf4ef, 0x31f0, 0xd99f, 0x308c, 0xf5d7, 0x0, 0x1);
        gbc.writeMem(0xeab0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xf4ef, gbc.sp());
        EXPECT(0xeab2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeab0));
        EXPECT(0x0, gbc.readMem(0xeab1));
        // CB 00 0372
        gbc.setState(0xd563, 0x362d, 0x3e30, 0xbf9a, 0x1650, 0x99a3, 0x1, 0x0);
        gbc.writeMem(0xd563, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x362d, gbc.sp());
        EXPECT(0xd565, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd563));
        EXPECT(0x0, gbc.readMem(0xd564));
        // CB 00 0373
        gbc.setState(0x9cb8, 0xbd2f, 0x41f0, 0x158b, 0xd29b, 0xc91d, 0x1, 0x0);
        gbc.writeMem(0x9cb8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xbd2f, gbc.sp());
        EXPECT(0x9cba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cb8));
        EXPECT(0x0, gbc.readMem(0x9cb9));
        // CB 00 0374
        gbc.setState(0x1aaf, 0x4616, 0x3db0, 0x23e2, 0xa7f9, 0xb99, 0x0, 0x0);
        gbc.writeMem(0x1aaf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x4616, gbc.sp());
        EXPECT(0x1ab1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0375
        gbc.setState(0xcab1, 0x6784, 0x97c0, 0x9ada, 0xb24d, 0x717, 0x1, 0x0);
        gbc.writeMem(0xcab1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x6784, gbc.sp());
        EXPECT(0xcab3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcab1));
        EXPECT(0x0, gbc.readMem(0xcab2));
        // CB 00 0376
        gbc.setState(0x868f, 0x166b, 0x9970, 0xac96, 0xf2b0, 0x293d, 0x0, 0x0);
        gbc.writeMem(0x868f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x166b, gbc.sp());
        EXPECT(0x8691, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x868f));
        EXPECT(0x0, gbc.readMem(0x8690));
        // CB 00 0377
        gbc.setState(0x3c4b, 0xac15, 0x3040, 0xc167, 0x2d59, 0xa19a, 0x0, 0x0);
        gbc.writeMem(0x3c4b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xac15, gbc.sp());
        EXPECT(0x3c4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0378
        gbc.setState(0xe55c, 0x601d, 0xde80, 0x54ec, 0xfbf2, 0xe3f1, 0x0, 0x1);
        gbc.writeMem(0xe55c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x601d, gbc.sp());
        EXPECT(0xe55e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe55c));
        EXPECT(0x0, gbc.readMem(0xe55d));
        // CB 00 0379
        gbc.setState(0xd83f, 0xdd3c, 0x6520, 0x26ad, 0x7c73, 0xacac, 0x0, 0x1);
        gbc.writeMem(0xd83f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xdd3c, gbc.sp());
        EXPECT(0xd841, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd83f));
        EXPECT(0x0, gbc.readMem(0xd840));
        // CB 00 037A
        gbc.setState(0x8efd, 0xd52d, 0xd140, 0x889f, 0xc224, 0x6e3a, 0x0, 0x1);
        gbc.writeMem(0x8efd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xd52d, gbc.sp());
        EXPECT(0x8eff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8efd));
        EXPECT(0x0, gbc.readMem(0x8efe));
        // CB 00 037B
        gbc.setState(0x6e0a, 0x7b37, 0xd2c0, 0x9b31, 0xefa7, 0x3b3c, 0x1, 0x0);
        gbc.writeMem(0x6e0a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x7b37, gbc.sp());
        EXPECT(0x6e0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 037D
        gbc.setState(0x33c5, 0xd36a, 0x960, 0x6a67, 0x44f0, 0xda9f, 0x1, 0x1);
        gbc.writeMem(0x33c5, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xd36a, gbc.sp());
        EXPECT(0x33c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 037E
        gbc.setState(0x7ee9, 0x45ce, 0x94c0, 0xeb03, 0x522, 0x69b6, 0x0, 0x0);
        gbc.writeMem(0x7ee9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x45ce, gbc.sp());
        EXPECT(0x7eeb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 037F
        gbc.setState(0xd487, 0xca70, 0xb880, 0xb6c1, 0x9056, 0xfce0, 0x1, 0x1);
        gbc.writeMem(0xd487, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xca70, gbc.sp());
        EXPECT(0xd489, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd487));
        EXPECT(0x0, gbc.readMem(0xd488));
        // CB 00 0380
        gbc.setState(0xa45, 0x7d50, 0x650, 0xaa7d, 0xa40e, 0x7658, 0x0, 0x0);
        gbc.writeMem(0xa45, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x7d50, gbc.sp());
        EXPECT(0xa47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0381
        gbc.setState(0xc923, 0x7a1, 0x67a0, 0x571b, 0xf99a, 0x2db, 0x0, 0x0);
        gbc.writeMem(0xc923, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x7a1, gbc.sp());
        EXPECT(0xc925, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc923));
        EXPECT(0x0, gbc.readMem(0xc924));
        // CB 00 0382
        gbc.setState(0xb3a7, 0xb614, 0xc190, 0x8f22, 0xcdc5, 0x2385, 0x1, 0x0);
        gbc.writeMem(0xb3a7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xb614, gbc.sp());
        EXPECT(0xb3a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3a7));
        EXPECT(0x0, gbc.readMem(0xb3a8));
        // CB 00 0383
        gbc.setState(0x457, 0xff4f, 0x5400, 0xa2a0, 0x4dd7, 0x1628, 0x1, 0x1);
        gbc.writeMem(0x457, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xff4f, gbc.sp());
        EXPECT(0x459, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0384
        gbc.setState(0x6d0c, 0x3227, 0x6b50, 0x7e8c, 0xf4d8, 0xfe9c, 0x1, 0x0);
        gbc.writeMem(0x6d0c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x3227, gbc.sp());
        EXPECT(0x6d0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0386
        gbc.setState(0xb36b, 0xc3c5, 0x6290, 0xe87c, 0xe34a, 0xf346, 0x1, 0x0);
        gbc.writeMem(0xb36b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xc3c5, gbc.sp());
        EXPECT(0xb36d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb36b));
        EXPECT(0x0, gbc.readMem(0xb36c));
        // CB 00 0387
        gbc.setState(0xaf02, 0xd9b, 0x9240, 0x35c6, 0x9cec, 0x918b, 0x1, 0x1);
        gbc.writeMem(0xaf02, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xd9b, gbc.sp());
        EXPECT(0xaf04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf02));
        EXPECT(0x0, gbc.readMem(0xaf03));
        // CB 00 0389
        gbc.setState(0xc9e9, 0x36f3, 0x5100, 0x5802, 0x5d8b, 0x3552, 0x1, 0x1);
        gbc.writeMem(0xc9e9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x36f3, gbc.sp());
        EXPECT(0xc9eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9e9));
        EXPECT(0x0, gbc.readMem(0xc9ea));
        // CB 00 038A
        gbc.setState(0x4ce3, 0xdc71, 0xa910, 0x44e8, 0x98ad, 0x6798, 0x0, 0x0);
        gbc.writeMem(0x4ce3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xdc71, gbc.sp());
        EXPECT(0x4ce5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 038B
        gbc.setState(0x2e7e, 0xa66a, 0xcf70, 0x4880, 0xb486, 0x895d, 0x0, 0x1);
        gbc.writeMem(0x2e7e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xa66a, gbc.sp());
        EXPECT(0x2e80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 038C
        gbc.setState(0xa90, 0x4b0d, 0xb9a0, 0x724a, 0x92a, 0xdf3e, 0x0, 0x1);
        gbc.writeMem(0xa90, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x4b0d, gbc.sp());
        EXPECT(0xa92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 038D
        gbc.setState(0x40b6, 0x2e9a, 0xd340, 0xaabf, 0x10f3, 0x18bc, 0x1, 0x1);
        gbc.writeMem(0x40b6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x2e9a, gbc.sp());
        EXPECT(0x40b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 038E
        gbc.setState(0x2c5b, 0x109a, 0x3060, 0xf8a, 0xa900, 0xdd3b, 0x0, 0x1);
        gbc.writeMem(0x2c5b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x109a, gbc.sp());
        EXPECT(0x2c5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 038F
        gbc.setState(0x44e1, 0x38a6, 0xf7e0, 0x9e29, 0x1648, 0xb0e5, 0x0, 0x1);
        gbc.writeMem(0x44e1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x38a6, gbc.sp());
        EXPECT(0x44e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0390
        gbc.setState(0x3c6d, 0x6b4e, 0xd120, 0xcee, 0x7366, 0x7792, 0x1, 0x0);
        gbc.writeMem(0x3c6d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x6b4e, gbc.sp());
        EXPECT(0x3c6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0391
        gbc.setState(0x64ed, 0xe602, 0xa8e0, 0x8e7d, 0xf8f9, 0x402d, 0x0, 0x1);
        gbc.writeMem(0x64ed, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xe602, gbc.sp());
        EXPECT(0x64ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0392
        gbc.setState(0x584c, 0xd2a2, 0x2510, 0x9223, 0x1a8f, 0x2b56, 0x1, 0x0);
        gbc.writeMem(0x584c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xd2a2, gbc.sp());
        EXPECT(0x584e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0393
        gbc.setState(0xab76, 0x60f6, 0xa230, 0x9113, 0x2d83, 0x82a, 0x1, 0x0);
        gbc.writeMem(0xab76, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x60f6, gbc.sp());
        EXPECT(0xab78, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab76));
        EXPECT(0x0, gbc.readMem(0xab77));
        // CB 00 0394
        gbc.setState(0x6db1, 0x193a, 0xe0, 0x5149, 0xfa25, 0xadf8, 0x0, 0x0);
        gbc.writeMem(0x6db1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x193a, gbc.sp());
        EXPECT(0x6db3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0395
        gbc.setState(0x2ff0, 0x97e, 0x69e0, 0x6b41, 0x52f6, 0x84a7, 0x1, 0x0);
        gbc.writeMem(0x2ff0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x97e, gbc.sp());
        EXPECT(0x2ff2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 0396
        gbc.setState(0x1544, 0x9f00, 0x1ce0, 0xdee5, 0xbcb8, 0x48a0, 0x1, 0x0);
        gbc.writeMem(0x1544, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x9f00, gbc.sp());
        EXPECT(0x1546, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 0398
        gbc.setState(0xc749, 0xaf51, 0x8ce0, 0x5b24, 0xcaa7, 0xf956, 0x1, 0x1);
        gbc.writeMem(0xc749, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xaf51, gbc.sp());
        EXPECT(0xc74b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc749));
        EXPECT(0x0, gbc.readMem(0xc74a));
        // CB 00 0399
        gbc.setState(0xbe0d, 0x7f0c, 0xa9e0, 0xb415, 0xe7f9, 0x7b8c, 0x0, 0x1);
        gbc.writeMem(0xbe0d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x7f0c, gbc.sp());
        EXPECT(0xbe0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe0d));
        EXPECT(0x0, gbc.readMem(0xbe0e));
        // CB 00 039A
        gbc.setState(0x3232, 0xe9ca, 0x8900, 0xc335, 0x353e, 0x2242, 0x1, 0x0);
        gbc.writeMem(0x3232, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xe9ca, gbc.sp());
        EXPECT(0x3234, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 039B
        gbc.setState(0x9a70, 0xf631, 0x88c0, 0x185d, 0xafe0, 0xbe96, 0x0, 0x1);
        gbc.writeMem(0x9a70, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xf631, gbc.sp());
        EXPECT(0x9a72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a70));
        EXPECT(0x0, gbc.readMem(0x9a71));
        // CB 00 039C
        gbc.setState(0x8d71, 0x6dfd, 0xba0, 0x21e3, 0xc30a, 0x198d, 0x1, 0x0);
        gbc.writeMem(0x8d71, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x6dfd, gbc.sp());
        EXPECT(0x8d73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d71));
        EXPECT(0x0, gbc.readMem(0x8d72));
        // CB 00 039D
        gbc.setState(0xc64c, 0x7963, 0xcdb0, 0xbcf0, 0x4dac, 0x5bc6, 0x1, 0x1);
        gbc.writeMem(0xc64c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x7963, gbc.sp());
        EXPECT(0xc64e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc64c));
        EXPECT(0x0, gbc.readMem(0xc64d));
        // CB 00 039E
        gbc.setState(0x9453, 0x34c8, 0x6060, 0x656a, 0x828d, 0x3d1a, 0x0, 0x1);
        gbc.writeMem(0x9453, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x34c8, gbc.sp());
        EXPECT(0x9455, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9453));
        EXPECT(0x0, gbc.readMem(0x9454));
        // CB 00 039F
        gbc.setState(0xc2fa, 0x4047, 0xa180, 0x723, 0x2dfc, 0x3e1b, 0x1, 0x1);
        gbc.writeMem(0xc2fa, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x4047, gbc.sp());
        EXPECT(0xc2fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2fa));
        EXPECT(0x0, gbc.readMem(0xc2fb));
        // CB 00 03A0
        gbc.setState(0x5ea3, 0x6c2a, 0x1a80, 0xe587, 0xc7b3, 0xf40b, 0x0, 0x1);
        gbc.writeMem(0x5ea3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x6c2a, gbc.sp());
        EXPECT(0x5ea5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03A1
        gbc.setState(0xbfdf, 0x631c, 0x2c40, 0xefdd, 0xdb2d, 0xca4e, 0x0, 0x1);
        gbc.writeMem(0xbfdf, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x631c, gbc.sp());
        EXPECT(0xbfe1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfdf));
        EXPECT(0x0, gbc.readMem(0xbfe0));
        // CB 00 03A2
        gbc.setState(0x775d, 0xc868, 0x43e0, 0xa54c, 0x58f7, 0x9900, 0x1, 0x0);
        gbc.writeMem(0x775d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xc868, gbc.sp());
        EXPECT(0x775f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03A3
        gbc.setState(0x7cd0, 0xeb08, 0x7fd0, 0xea09, 0xb0e8, 0x5888, 0x0, 0x1);
        gbc.writeMem(0x7cd0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xeb08, gbc.sp());
        EXPECT(0x7cd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03A4
        gbc.setState(0x3256, 0xecc3, 0xf190, 0x6456, 0xa731, 0x1c3b, 0x1, 0x1);
        gbc.writeMem(0x3256, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xecc3, gbc.sp());
        EXPECT(0x3258, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03A6
        gbc.setState(0x91e3, 0x5b0b, 0xa230, 0xa391, 0xaeea, 0x4f26, 0x0, 0x0);
        gbc.writeMem(0x91e3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x5b0b, gbc.sp());
        EXPECT(0x91e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91e3));
        EXPECT(0x0, gbc.readMem(0x91e4));
        // CB 00 03A7
        gbc.setState(0x1a6b, 0x1f72, 0x10b0, 0x6b6f, 0x3423, 0x7cc5, 0x1, 0x0);
        gbc.writeMem(0x1a6b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x1f72, gbc.sp());
        EXPECT(0x1a6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03A8
        gbc.setState(0xbd78, 0x85c4, 0x58f0, 0x76ce, 0x4cd, 0xa1dc, 0x1, 0x0);
        gbc.writeMem(0xbd78, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x85c4, gbc.sp());
        EXPECT(0xbd7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd78));
        EXPECT(0x0, gbc.readMem(0xbd79));
        // CB 00 03A9
        gbc.setState(0x1fa0, 0x7dcc, 0xef0, 0xe2ca, 0x1791, 0xd023, 0x1, 0x0);
        gbc.writeMem(0x1fa0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x7dcc, gbc.sp());
        EXPECT(0x1fa2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03AA
        gbc.setState(0x611, 0x4df0, 0x4510, 0x1228, 0x1d8d, 0x159c, 0x0, 0x1);
        gbc.writeMem(0x611, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x4df0, gbc.sp());
        EXPECT(0x613, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03AB
        gbc.setState(0xa19a, 0xe462, 0xb690, 0x3bb3, 0xc4a8, 0xa90b, 0x0, 0x0);
        gbc.writeMem(0xa19a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xe462, gbc.sp());
        EXPECT(0xa19c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa19a));
        EXPECT(0x0, gbc.readMem(0xa19b));
        // CB 00 03AC
        gbc.setState(0xb480, 0x8ee6, 0x1e60, 0x3989, 0xf825, 0xbfc0, 0x1, 0x1);
        gbc.writeMem(0xb480, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x8ee6, gbc.sp());
        EXPECT(0xb482, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb480));
        EXPECT(0x0, gbc.readMem(0xb481));
        // CB 00 03AD
        gbc.setState(0xe711, 0x87fe, 0x9690, 0xfc1d, 0x8dd5, 0xb89d, 0x0, 0x0);
        gbc.writeMem(0xe711, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x87fe, gbc.sp());
        EXPECT(0xe713, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe711));
        EXPECT(0x0, gbc.readMem(0xe712));
        // CB 00 03AE
        gbc.setState(0xd34c, 0xad8b, 0x550, 0xe5d, 0xfadf, 0x2e97, 0x1, 0x0);
        gbc.writeMem(0xd34c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xad8b, gbc.sp());
        EXPECT(0xd34e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd34c));
        EXPECT(0x0, gbc.readMem(0xd34d));
        // CB 00 03AF
        gbc.setState(0x29f9, 0xd616, 0xbc70, 0x94e5, 0x4aa0, 0xbdaf, 0x1, 0x1);
        gbc.writeMem(0x29f9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xd616, gbc.sp());
        EXPECT(0x29fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03B0
        gbc.setState(0x1ea8, 0x98a7, 0xc140, 0x10eb, 0x3ad4, 0x59ad, 0x0, 0x0);
        gbc.writeMem(0x1ea8, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x98a7, gbc.sp());
        EXPECT(0x1eaa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03B1
        gbc.setState(0xc437, 0xe1e8, 0xbad0, 0x783, 0xfa41, 0x15a4, 0x0, 0x0);
        gbc.writeMem(0xc437, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xe1e8, gbc.sp());
        EXPECT(0xc439, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc437));
        EXPECT(0x0, gbc.readMem(0xc438));
        // CB 00 03B2
        gbc.setState(0xdc41, 0x567, 0x6890, 0xca5e, 0x665c, 0x9954, 0x1, 0x1);
        gbc.writeMem(0xdc41, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x567, gbc.sp());
        EXPECT(0xdc43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc41));
        EXPECT(0x0, gbc.readMem(0xdc42));
        // CB 00 03B3
        gbc.setState(0xb654, 0xfe79, 0xd220, 0x765a, 0xb953, 0xe5cc, 0x0, 0x0);
        gbc.writeMem(0xb654, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xfe79, gbc.sp());
        EXPECT(0xb656, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb654));
        EXPECT(0x0, gbc.readMem(0xb655));
        // CB 00 03B4
        gbc.setState(0x72df, 0x79b2, 0x7760, 0xb94, 0xa415, 0x6dc0, 0x0, 0x1);
        gbc.writeMem(0x72df, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x79b2, gbc.sp());
        EXPECT(0x72e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03B5
        gbc.setState(0x28ec, 0xa49f, 0xa440, 0x98d3, 0xe45a, 0x55a2, 0x1, 0x1);
        gbc.writeMem(0x28ec, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xa49f, gbc.sp());
        EXPECT(0x28ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03B6
        gbc.setState(0x8b80, 0x1c1f, 0x6ec0, 0x34b7, 0x5eab, 0x2e4a, 0x0, 0x0);
        gbc.writeMem(0x8b80, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x1c1f, gbc.sp());
        EXPECT(0x8b82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b80));
        EXPECT(0x0, gbc.readMem(0x8b81));
        // CB 00 03B7
        gbc.setState(0x1fd9, 0x41d, 0x8db0, 0x30a3, 0xd67b, 0x9924, 0x1, 0x1);
        gbc.writeMem(0x1fd9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x41d, gbc.sp());
        EXPECT(0x1fdb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03B8
        gbc.setState(0xeff9, 0xe11b, 0xf200, 0x64b8, 0xf7df, 0x6007, 0x1, 0x0);
        gbc.writeMem(0xeff9, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xe11b, gbc.sp());
        EXPECT(0xeffb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeff9));
        EXPECT(0x0, gbc.readMem(0xeffa));
        // CB 00 03B9
        gbc.setState(0x2d4e, 0xe5a4, 0x2460, 0xbc08, 0xcd01, 0xecc5, 0x1, 0x0);
        gbc.writeMem(0x2d4e, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xe5a4, gbc.sp());
        EXPECT(0x2d50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03BA
        gbc.setState(0x3e57, 0xa14b, 0x5b50, 0x3011, 0x4313, 0xe7e3, 0x1, 0x1);
        gbc.writeMem(0x3e57, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xa14b, gbc.sp());
        EXPECT(0x3e59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03BB
        gbc.setState(0x6599, 0xc41b, 0x5140, 0x658f, 0x74bc, 0xe3c0, 0x1, 0x0);
        gbc.writeMem(0x6599, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xc41b, gbc.sp());
        EXPECT(0x659b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03BC
        gbc.setState(0x29a0, 0x82df, 0x2c10, 0x140d, 0x31f9, 0x22ba, 0x0, 0x0);
        gbc.writeMem(0x29a0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x82df, gbc.sp());
        EXPECT(0x29a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03BD
        gbc.setState(0xe9ca, 0x1ac5, 0x92d0, 0x2847, 0x418e, 0x1972, 0x0, 0x1);
        gbc.writeMem(0xe9ca, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x1ac5, gbc.sp());
        EXPECT(0xe9cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9ca));
        EXPECT(0x0, gbc.readMem(0xe9cb));
        // CB 00 03BE
        gbc.setState(0x6864, 0xafca, 0xd300, 0x291c, 0xca7d, 0x47de, 0x1, 0x1);
        gbc.writeMem(0x6864, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xafca, gbc.sp());
        EXPECT(0x6866, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03C0
        gbc.setState(0xd979, 0xe6af, 0xfa40, 0xa40, 0x909d, 0x4c44, 0x1, 0x0);
        gbc.writeMem(0xd979, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xe6af, gbc.sp());
        EXPECT(0xd97b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd979));
        EXPECT(0x0, gbc.readMem(0xd97a));
        // CB 00 03C1
        gbc.setState(0x8ad7, 0x1032, 0x6950, 0x86ff, 0x8458, 0xc00b, 0x1, 0x1);
        gbc.writeMem(0x8ad7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x1032, gbc.sp());
        EXPECT(0x8ad9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ad7));
        EXPECT(0x0, gbc.readMem(0x8ad8));
        // CB 00 03C2
        gbc.setState(0x98f4, 0xad3d, 0x32b0, 0x9ab4, 0x1a6c, 0x100, 0x1, 0x0);
        gbc.writeMem(0x98f4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xad3d, gbc.sp());
        EXPECT(0x98f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98f4));
        EXPECT(0x0, gbc.readMem(0x98f5));
        // CB 00 03C3
        gbc.setState(0xb8db, 0xa41a, 0x7010, 0x35eb, 0x2399, 0x52f, 0x0, 0x0);
        gbc.writeMem(0xb8db, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xa41a, gbc.sp());
        EXPECT(0xb8dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8db));
        EXPECT(0x0, gbc.readMem(0xb8dc));
        // CB 00 03C4
        gbc.setState(0x3ef7, 0x7cce, 0x3810, 0x2b07, 0x11ab, 0xa930, 0x1, 0x0);
        gbc.writeMem(0x3ef7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x7cce, gbc.sp());
        EXPECT(0x3ef9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03C5
        gbc.setState(0xe44a, 0x4ffe, 0x1d50, 0xbd3, 0x1b77, 0x347, 0x1, 0x0);
        gbc.writeMem(0xe44a, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x4ffe, gbc.sp());
        EXPECT(0xe44c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe44a));
        EXPECT(0x0, gbc.readMem(0xe44b));
        // CB 00 03C6
        gbc.setState(0x6ec6, 0x6c77, 0x2a30, 0x447d, 0x89cf, 0x3e87, 0x0, 0x1);
        gbc.writeMem(0x6ec6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x6c77, gbc.sp());
        EXPECT(0x6ec8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03C7
        gbc.setState(0xdda1, 0xa36b, 0x8e90, 0x9c14, 0xe092, 0xa3aa, 0x0, 0x1);
        gbc.writeMem(0xdda1, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xa36b, gbc.sp());
        EXPECT(0xdda3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdda1));
        EXPECT(0x0, gbc.readMem(0xdda2));
        // CB 00 03C8
        gbc.setState(0xdb26, 0xdb14, 0xe2d0, 0x9e6b, 0x4a63, 0x5b84, 0x1, 0x0);
        gbc.writeMem(0xdb26, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xdb14, gbc.sp());
        EXPECT(0xdb28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb26));
        EXPECT(0x0, gbc.readMem(0xdb27));
        // CB 00 03C9
        gbc.setState(0x2cc2, 0xa3bb, 0xa9e0, 0x4cab, 0x3b9e, 0x5e65, 0x1, 0x0);
        gbc.writeMem(0x2cc2, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xa3bb, gbc.sp());
        EXPECT(0x2cc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03CA
        gbc.setState(0x1aac, 0x934c, 0x3aa0, 0xc4d6, 0xd010, 0xb05d, 0x0, 0x1);
        gbc.writeMem(0x1aac, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x934c, gbc.sp());
        EXPECT(0x1aae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03CB
        gbc.setState(0xac6c, 0x3608, 0x5a40, 0x8e53, 0x3bfc, 0xdb27, 0x0, 0x0);
        gbc.writeMem(0xac6c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x3608, gbc.sp());
        EXPECT(0xac6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac6c));
        EXPECT(0x0, gbc.readMem(0xac6d));
        // CB 00 03CC
        gbc.setState(0x3234, 0xa351, 0x8c70, 0xec90, 0x7022, 0xcb45, 0x1, 0x0);
        gbc.writeMem(0x3234, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xa351, gbc.sp());
        EXPECT(0x3236, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03CD
        gbc.setState(0x96e3, 0x4463, 0x6c80, 0x13, 0xb20, 0xee36, 0x1, 0x1);
        gbc.writeMem(0x96e3, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x4463, gbc.sp());
        EXPECT(0x96e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96e3));
        EXPECT(0x0, gbc.readMem(0x96e4));
        // CB 00 03CE
        gbc.setState(0xa452, 0x855b, 0x5970, 0x200c, 0x488e, 0xd8d3, 0x0, 0x1);
        gbc.writeMem(0xa452, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x855b, gbc.sp());
        EXPECT(0xa454, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa452));
        EXPECT(0x0, gbc.readMem(0xa453));
        // CB 00 03CF
        gbc.setState(0x35b7, 0x8edd, 0xee20, 0xd827, 0xb08b, 0x20cf, 0x1, 0x0);
        gbc.writeMem(0x35b7, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x8edd, gbc.sp());
        EXPECT(0x35b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03D0
        gbc.setState(0x7cdd, 0x2fdd, 0x37d0, 0x71c0, 0xd5d1, 0xb8e1, 0x1, 0x1);
        gbc.writeMem(0x7cdd, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x2fdd, gbc.sp());
        EXPECT(0x7cdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03D1
        gbc.setState(0x439f, 0xd545, 0x5930, 0x5df6, 0xeedc, 0x4f4f, 0x1, 0x0);
        gbc.writeMem(0x439f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xd545, gbc.sp());
        EXPECT(0x43a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03D2
        gbc.setState(0x1d85, 0x7fc2, 0xb2b0, 0xa553, 0xe48c, 0x84de, 0x0, 0x1);
        gbc.writeMem(0x1d85, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x7fc2, gbc.sp());
        EXPECT(0x1d87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03D3
        gbc.setState(0x4138, 0x9b99, 0x61f0, 0x1996, 0x3823, 0x9331, 0x0, 0x1);
        gbc.writeMem(0x4138, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x9b99, gbc.sp());
        EXPECT(0x413a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03D4
        gbc.setState(0x7b27, 0xb0e, 0x3a00, 0xc8a2, 0x292e, 0xfe82, 0x0, 0x1);
        gbc.writeMem(0x7b27, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xb0e, gbc.sp());
        EXPECT(0x7b29, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03D5
        gbc.setState(0x638, 0x89c7, 0xf170, 0x9f32, 0xdbb, 0x7913, 0x1, 0x1);
        gbc.writeMem(0x638, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x89c7, gbc.sp());
        EXPECT(0x63a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03D6
        gbc.setState(0x3bef, 0xd06f, 0x5970, 0x7fc7, 0x34fd, 0x670e, 0x0, 0x0);
        gbc.writeMem(0x3bef, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xd06f, gbc.sp());
        EXPECT(0x3bf1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03D7
        gbc.setState(0xd57b, 0xa68b, 0xbdd0, 0xa47b, 0xf054, 0x948d, 0x1, 0x1);
        gbc.writeMem(0xd57b, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xa68b, gbc.sp());
        EXPECT(0xd57d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd57b));
        EXPECT(0x0, gbc.readMem(0xd57c));
        // CB 00 03D8
        gbc.setState(0x420d, 0x384, 0xe450, 0x384e, 0xecd, 0x83ac, 0x1, 0x0);
        gbc.writeMem(0x420d, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x384, gbc.sp());
        EXPECT(0x420f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03D9
        gbc.setState(0xd655, 0x70cb, 0xdf40, 0xdf26, 0x9079, 0x72d8, 0x1, 0x0);
        gbc.writeMem(0xd655, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x70cb, gbc.sp());
        EXPECT(0xd657, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd655));
        EXPECT(0x0, gbc.readMem(0xd656));
        // CB 00 03DA
        gbc.setState(0x3d49, 0x94e9, 0xb680, 0xbb4a, 0xc51f, 0x3c41, 0x1, 0x1);
        gbc.writeMem(0x3d49, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x94e9, gbc.sp());
        EXPECT(0x3d4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03DB
        gbc.setState(0xdbd0, 0x5c7d, 0xe560, 0x4e63, 0xe415, 0x8c1e, 0x0, 0x0);
        gbc.writeMem(0xdbd0, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x5c7d, gbc.sp());
        EXPECT(0xdbd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbd0));
        EXPECT(0x0, gbc.readMem(0xdbd1));
        // CB 00 03DC
        gbc.setState(0x9608, 0xccbd, 0xa5a0, 0x1904, 0x5a10, 0x74a9, 0x1, 0x1);
        gbc.writeMem(0x9608, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xccbd, gbc.sp());
        EXPECT(0x960a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9608));
        EXPECT(0x0, gbc.readMem(0x9609));
        // CB 00 03DD
        gbc.setState(0x33c, 0x7ae1, 0x6490, 0xaefb, 0x8d77, 0x61a8, 0x0, 0x0);
        gbc.writeMem(0x33c, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x7ae1, gbc.sp());
        EXPECT(0x33e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03DE
        gbc.setState(0xd5d6, 0x83c1, 0xd4c0, 0x52ae, 0x9a76, 0xf51a, 0x1, 0x1);
        gbc.writeMem(0xd5d6, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x83c1, gbc.sp());
        EXPECT(0xd5d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5d6));
        EXPECT(0x0, gbc.readMem(0xd5d7));
        // CB 00 03DF
        gbc.setState(0x186, 0x2d9d, 0x6ef0, 0x3a70, 0xc1f5, 0x2b07, 0x1, 0x0);
        gbc.writeMem(0x186, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x2d9d, gbc.sp());
        EXPECT(0x188, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03E0
        gbc.setState(0xed97, 0xd4ce, 0xf7a0, 0xc105, 0xa172, 0xe2c4, 0x1, 0x1);
        gbc.writeMem(0xed97, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xd4ce, gbc.sp());
        EXPECT(0xed99, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed97));
        EXPECT(0x0, gbc.readMem(0xed98));
        // CB 00 03E1
        gbc.setState(0xe012, 0xe7c8, 0x29a0, 0x2e21, 0xe7cb, 0x89d4, 0x1, 0x1);
        gbc.writeMem(0xe012, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xe7c8, gbc.sp());
        EXPECT(0xe014, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe012));
        EXPECT(0x0, gbc.readMem(0xe013));
        // CB 00 03E2
        gbc.setState(0x6e6f, 0xa86f, 0x12e0, 0xebf8, 0x9a27, 0xc7de, 0x0, 0x0);
        gbc.writeMem(0x6e6f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xa86f, gbc.sp());
        EXPECT(0x6e71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 00 03E3
        gbc.setState(0xa17f, 0x60d1, 0xf670, 0x1baa, 0x7f6b, 0xbf77, 0x1, 0x1);
        gbc.writeMem(0xa17f, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x60d1, gbc.sp());
        EXPECT(0xa181, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa17f));
        EXPECT(0x0, gbc.readMem(0xa180));
        // CB 00 03E4
        gbc.setState(0x6ed4, 0xf7f4, 0x2760, 0x1506, 0x97b5, 0xbfb6, 0x0, 0x1);
        gbc.writeMem(0x6ed4, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xf7f4, gbc.sp());
        EXPECT(0x6ed6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 00 03E5
        gbc.setState(0xadaa, 0xb2be, 0xa70, 0x628e, 0x4aed, 0xbca6, 0x0, 0x0);
        gbc.writeMem(0xadaa, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xb2be, gbc.sp());
        EXPECT(0xadac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadaa));
        EXPECT(0x0, gbc.readMem(0xadab));
        // CB 00 03E6
        gbc.setState(0x86ae, 0x6e32, 0xfda0, 0xf44e, 0x7789, 0x5e5e, 0x0, 0x1);
        gbc.writeMem(0x86ae, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x6e32, gbc.sp());
        EXPECT(0x86b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86ae));
        EXPECT(0x0, gbc.readMem(0x86af));
        // CB 00 03E7
        gbc.setState(0x9dfe, 0x79ff, 0x4730, 0x2440, 0x4287, 0xb026, 0x1, 0x0);
        gbc.writeMem(0x9dfe, { 0xcb, 0x0 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x79ff, gbc.sp());
        EXPECT(0x9e00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dfe));
        EXPECT(0x0, gbc.readMem(0x9dff));
    }
