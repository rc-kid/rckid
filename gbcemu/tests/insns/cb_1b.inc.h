    TEST(gbcemu, opcode_cb_1b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 1B 0001
        gbc.setState(0xa954, 0xe143, 0x8bd0, 0x30a0, 0xd083, 0xbdda, 0x0, 0x1);
        gbc.writeMem(0xa954, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xe143, gbc.sp());
        EXPECT(0xa956, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa954));
        EXPECT(0x1b, gbc.readMem(0xa955));
        // CB 1B 0002
        gbc.setState(0x158, 0xd6b2, 0xa3d0, 0x185c, 0xf33b, 0xd2b1, 0x0, 0x1);
        gbc.writeMem(0x158, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xd6b2, gbc.sp());
        EXPECT(0x15a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0003
        gbc.setState(0xb0f2, 0x64aa, 0xa0d0, 0x86a2, 0x421d, 0xb7c5, 0x1, 0x0);
        gbc.writeMem(0xb0f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x64aa, gbc.sp());
        EXPECT(0xb0f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0f2));
        EXPECT(0x1b, gbc.readMem(0xb0f3));
        // CB 1B 0005
        gbc.setState(0x25fa, 0x9458, 0x4930, 0x3cbd, 0x815b, 0x46e0, 0x0, 0x0);
        gbc.writeMem(0x25fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x9458, gbc.sp());
        EXPECT(0x25fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0006
        gbc.setState(0x974, 0x46b5, 0x5840, 0x457f, 0x2755, 0x62b1, 0x0, 0x0);
        gbc.writeMem(0x974, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x46b5, gbc.sp());
        EXPECT(0x976, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0007
        gbc.setState(0x1b2f, 0xd2cd, 0x3710, 0x7b3a, 0xcb56, 0xe78f, 0x0, 0x1);
        gbc.writeMem(0x1b2f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xd2cd, gbc.sp());
        EXPECT(0x1b31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0008
        gbc.setState(0x65f3, 0x468d, 0xd0, 0x6416, 0x2441, 0xfdd9, 0x0, 0x0);
        gbc.writeMem(0x65f3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x468d, gbc.sp());
        EXPECT(0x65f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0009
        gbc.setState(0x42c9, 0x8cde, 0x2180, 0x1078, 0xbe71, 0x5cc2, 0x1, 0x1);
        gbc.writeMem(0x42c9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x8cde, gbc.sp());
        EXPECT(0x42cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 000A
        gbc.setState(0xae3d, 0xc9c, 0x7570, 0x39a5, 0xd39d, 0x271d, 0x1, 0x1);
        gbc.writeMem(0xae3d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xc9c, gbc.sp());
        EXPECT(0xae3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae3d));
        EXPECT(0x1b, gbc.readMem(0xae3e));
        // CB 1B 000B
        gbc.setState(0xeb89, 0x7172, 0x60d0, 0xa067, 0xdd0e, 0xb914, 0x0, 0x0);
        gbc.writeMem(0xeb89, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x7172, gbc.sp());
        EXPECT(0xeb8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb89));
        EXPECT(0x1b, gbc.readMem(0xeb8a));
        // CB 1B 000C
        gbc.setState(0x313f, 0xd911, 0x6360, 0x447f, 0xd69a, 0xc968, 0x0, 0x0);
        gbc.writeMem(0x313f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xd911, gbc.sp());
        EXPECT(0x3141, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 000D
        gbc.setState(0x4474, 0x8613, 0x8d00, 0x5f29, 0xba52, 0x77bc, 0x1, 0x0);
        gbc.writeMem(0x4474, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x8613, gbc.sp());
        EXPECT(0x4476, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 000E
        gbc.setState(0x24b8, 0xc415, 0x9750, 0x9f4a, 0x3464, 0x3dd, 0x1, 0x1);
        gbc.writeMem(0x24b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xc415, gbc.sp());
        EXPECT(0x24ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 000F
        gbc.setState(0xbbf2, 0x3133, 0xb8c0, 0xc075, 0x3578, 0x19bc, 0x1, 0x0);
        gbc.writeMem(0xbbf2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x3133, gbc.sp());
        EXPECT(0xbbf4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbf2));
        EXPECT(0x1b, gbc.readMem(0xbbf3));
        // CB 1B 0010
        gbc.setState(0xd1fe, 0x99d7, 0xca70, 0x8575, 0x1cf4, 0x5a49, 0x0, 0x1);
        gbc.writeMem(0xd1fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x99d7, gbc.sp());
        EXPECT(0xd200, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1fe));
        EXPECT(0x1b, gbc.readMem(0xd1ff));
        // CB 1B 0011
        gbc.setState(0xebf9, 0x64cf, 0x31f0, 0xeea2, 0x4b9f, 0xfda3, 0x1, 0x1);
        gbc.writeMem(0xebf9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x64cf, gbc.sp());
        EXPECT(0xebfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebf9));
        EXPECT(0x1b, gbc.readMem(0xebfa));
        // CB 1B 0014
        gbc.setState(0x80a8, 0x116a, 0xc0, 0xb5a2, 0x9df4, 0x359a, 0x1, 0x1);
        gbc.writeMem(0x80a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x116a, gbc.sp());
        EXPECT(0x80aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80a8));
        EXPECT(0x1b, gbc.readMem(0x80a9));
        // CB 1B 0015
        gbc.setState(0xd3a1, 0x9746, 0x6350, 0x65f1, 0x3a7, 0x11b1, 0x1, 0x0);
        gbc.writeMem(0xd3a1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x9746, gbc.sp());
        EXPECT(0xd3a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3a1));
        EXPECT(0x1b, gbc.readMem(0xd3a2));
        // CB 1B 0016
        gbc.setState(0x254d, 0xbdfb, 0x9fb0, 0x6920, 0x6136, 0x3f62, 0x1, 0x0);
        gbc.writeMem(0x254d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xbdfb, gbc.sp());
        EXPECT(0x254f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0017
        gbc.setState(0x58ad, 0x4f2d, 0xd0d0, 0x2a21, 0x9dfd, 0x8d6b, 0x1, 0x1);
        gbc.writeMem(0x58ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x4f2d, gbc.sp());
        EXPECT(0x58af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0018
        gbc.setState(0x2c43, 0xebb3, 0x88d0, 0xb3a5, 0xbd1e, 0xefd7, 0x0, 0x0);
        gbc.writeMem(0x2c43, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xebb3, gbc.sp());
        EXPECT(0x2c45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0019
        gbc.setState(0x205a, 0x9753, 0xb40, 0x2576, 0x6eef, 0xa349, 0x0, 0x1);
        gbc.writeMem(0x205a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x9753, gbc.sp());
        EXPECT(0x205c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 001A
        gbc.setState(0x561f, 0xf917, 0x5230, 0xe5f6, 0xbaf3, 0x9ae9, 0x1, 0x0);
        gbc.writeMem(0x561f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xf917, gbc.sp());
        EXPECT(0x5621, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 001B
        gbc.setState(0x5c73, 0x2558, 0x5730, 0xdaba, 0xebaf, 0xf588, 0x1, 0x1);
        gbc.writeMem(0x5c73, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x2558, gbc.sp());
        EXPECT(0x5c75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 001C
        gbc.setState(0x454d, 0x196b, 0x99f0, 0xd40e, 0xa708, 0xc3b2, 0x0, 0x0);
        gbc.writeMem(0x454d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x196b, gbc.sp());
        EXPECT(0x454f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 001D
        gbc.setState(0x62c2, 0x6786, 0xa700, 0x2b5a, 0xf6c6, 0x35ad, 0x1, 0x1);
        gbc.writeMem(0x62c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x6786, gbc.sp());
        EXPECT(0x62c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 001E
        gbc.setState(0xc6b9, 0xce9e, 0xcf60, 0x9113, 0xc6f1, 0x160b, 0x1, 0x0);
        gbc.writeMem(0xc6b9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xce9e, gbc.sp());
        EXPECT(0xc6bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6b9));
        EXPECT(0x1b, gbc.readMem(0xc6ba));
        // CB 1B 001F
        gbc.setState(0x22e5, 0x6d16, 0xa650, 0x4da, 0x2fe7, 0x91a8, 0x1, 0x1);
        gbc.writeMem(0x22e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x6d16, gbc.sp());
        EXPECT(0x22e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0021
        gbc.setState(0x7b47, 0xd177, 0xeb40, 0xd050, 0xcea3, 0xc5bb, 0x1, 0x1);
        gbc.writeMem(0x7b47, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xd177, gbc.sp());
        EXPECT(0x7b49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0022
        gbc.setState(0x4657, 0xfdfe, 0xfa10, 0xd9c5, 0x515a, 0xdeb4, 0x0, 0x1);
        gbc.writeMem(0x4657, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xfdfe, gbc.sp());
        EXPECT(0x4659, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0023
        gbc.setState(0xb218, 0xa181, 0x8030, 0xbedb, 0x6e9e, 0xec25, 0x1, 0x1);
        gbc.writeMem(0xb218, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xa181, gbc.sp());
        EXPECT(0xb21a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb218));
        EXPECT(0x1b, gbc.readMem(0xb219));
        // CB 1B 0025
        gbc.setState(0xc99b, 0x1712, 0xfa80, 0x7dec, 0x264f, 0xcc47, 0x1, 0x0);
        gbc.writeMem(0xc99b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x1712, gbc.sp());
        EXPECT(0xc99d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc99b));
        EXPECT(0x1b, gbc.readMem(0xc99c));
        // CB 1B 0026
        gbc.setState(0xdc59, 0xc794, 0x8550, 0x7db9, 0xe9ef, 0xd634, 0x0, 0x1);
        gbc.writeMem(0xdc59, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xc794, gbc.sp());
        EXPECT(0xdc5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc59));
        EXPECT(0x1b, gbc.readMem(0xdc5a));
        // CB 1B 0027
        gbc.setState(0x3b94, 0x32a, 0x46e0, 0x3891, 0x149, 0x27be, 0x0, 0x0);
        gbc.writeMem(0x3b94, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x32a, gbc.sp());
        EXPECT(0x3b96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0028
        gbc.setState(0xdb04, 0x2fa3, 0x9c30, 0x7c3a, 0x3a2e, 0x21a1, 0x1, 0x0);
        gbc.writeMem(0xdb04, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x2fa3, gbc.sp());
        EXPECT(0xdb06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb04));
        EXPECT(0x1b, gbc.readMem(0xdb05));
        // CB 1B 0029
        gbc.setState(0x75c3, 0x260e, 0xbf10, 0xaac7, 0x6a4, 0xb13e, 0x1, 0x1);
        gbc.writeMem(0x75c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x260e, gbc.sp());
        EXPECT(0x75c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 002A
        gbc.setState(0x52ba, 0x2b7c, 0xa0e0, 0x7e30, 0x902e, 0xed6c, 0x1, 0x0);
        gbc.writeMem(0x52ba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x2b7c, gbc.sp());
        EXPECT(0x52bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 002B
        gbc.setState(0x47b1, 0x1bf1, 0xafb0, 0x5978, 0x7b1f, 0xda77, 0x1, 0x1);
        gbc.writeMem(0x47b1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x1bf1, gbc.sp());
        EXPECT(0x47b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 002C
        gbc.setState(0x223d, 0xa7c6, 0xad30, 0x4e4c, 0xfa84, 0x88f5, 0x0, 0x0);
        gbc.writeMem(0x223d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xa7c6, gbc.sp());
        EXPECT(0x223f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 002D
        gbc.setState(0xbeef, 0x358d, 0xcc40, 0xdad2, 0xd3e1, 0x5c79, 0x1, 0x1);
        gbc.writeMem(0xbeef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x358d, gbc.sp());
        EXPECT(0xbef1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbeef));
        EXPECT(0x1b, gbc.readMem(0xbef0));
        // CB 1B 002E
        gbc.setState(0xc0c9, 0x4b77, 0x39b0, 0x1bb4, 0xa982, 0x6e4b, 0x0, 0x0);
        gbc.writeMem(0xc0c9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x4b77, gbc.sp());
        EXPECT(0xc0cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0c9));
        EXPECT(0x1b, gbc.readMem(0xc0ca));
        // CB 1B 002F
        gbc.setState(0xcfe7, 0x59a0, 0x9310, 0x1854, 0x2229, 0xca32, 0x0, 0x1);
        gbc.writeMem(0xcfe7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x59a0, gbc.sp());
        EXPECT(0xcfe9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfe7));
        EXPECT(0x1b, gbc.readMem(0xcfe8));
        // CB 1B 0030
        gbc.setState(0xb23f, 0x4fba, 0x6610, 0xfc69, 0x7b91, 0x19b6, 0x1, 0x1);
        gbc.writeMem(0xb23f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x4fba, gbc.sp());
        EXPECT(0xb241, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb23f));
        EXPECT(0x1b, gbc.readMem(0xb240));
        // CB 1B 0031
        gbc.setState(0xbad5, 0xb6d6, 0xd860, 0x6db7, 0x6f6e, 0x63f2, 0x1, 0x1);
        gbc.writeMem(0xbad5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xb6d6, gbc.sp());
        EXPECT(0xbad7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbad5));
        EXPECT(0x1b, gbc.readMem(0xbad6));
        // CB 1B 0032
        gbc.setState(0xd60e, 0x869f, 0x2f60, 0xe3dc, 0xdec1, 0x79e4, 0x1, 0x1);
        gbc.writeMem(0xd60e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x869f, gbc.sp());
        EXPECT(0xd610, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd60e));
        EXPECT(0x1b, gbc.readMem(0xd60f));
        // CB 1B 0033
        gbc.setState(0x373b, 0x87e6, 0x93b0, 0xd14f, 0x5d4d, 0x4cfd, 0x0, 0x0);
        gbc.writeMem(0x373b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x87e6, gbc.sp());
        EXPECT(0x373d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0034
        gbc.setState(0xb693, 0xd84, 0x9f50, 0x977c, 0x7f31, 0xf9f2, 0x1, 0x0);
        gbc.writeMem(0xb693, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xd84, gbc.sp());
        EXPECT(0xb695, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb693));
        EXPECT(0x1b, gbc.readMem(0xb694));
        // CB 1B 0035
        gbc.setState(0x45b2, 0x19de, 0xc8e0, 0xf05a, 0xdb3f, 0x708, 0x0, 0x0);
        gbc.writeMem(0x45b2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x19de, gbc.sp());
        EXPECT(0x45b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0036
        gbc.setState(0x813c, 0x7f2e, 0xa200, 0x8476, 0xdcc6, 0xf51e, 0x1, 0x1);
        gbc.writeMem(0x813c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x7f2e, gbc.sp());
        EXPECT(0x813e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x813c));
        EXPECT(0x1b, gbc.readMem(0x813d));
        // CB 1B 0037
        gbc.setState(0xa92, 0x9a21, 0x66e0, 0x8c0e, 0x3259, 0x3c84, 0x1, 0x0);
        gbc.writeMem(0xa92, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x9a21, gbc.sp());
        EXPECT(0xa94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0038
        gbc.setState(0x17cf, 0x79e8, 0x4620, 0x69b9, 0x8bb5, 0xb652, 0x0, 0x1);
        gbc.writeMem(0x17cf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x79e8, gbc.sp());
        EXPECT(0x17d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0039
        gbc.setState(0x8383, 0x9ab4, 0x1f20, 0x5056, 0x8ad1, 0xb6c3, 0x1, 0x0);
        gbc.writeMem(0x8383, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x9ab4, gbc.sp());
        EXPECT(0x8385, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8383));
        EXPECT(0x1b, gbc.readMem(0x8384));
        // CB 1B 003A
        gbc.setState(0x52b6, 0x5ec8, 0xfca0, 0x725c, 0x4172, 0x846f, 0x1, 0x0);
        gbc.writeMem(0x52b6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x5ec8, gbc.sp());
        EXPECT(0x52b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 003B
        gbc.setState(0xe82, 0xd0af, 0x7340, 0xb818, 0x3148, 0xc2d6, 0x0, 0x1);
        gbc.writeMem(0xe82, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xd0af, gbc.sp());
        EXPECT(0xe84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 003C
        gbc.setState(0x20e9, 0xe25d, 0x420, 0xff07, 0x5f91, 0x3851, 0x1, 0x0);
        gbc.writeMem(0x20e9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xe25d, gbc.sp());
        EXPECT(0x20eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 003D
        gbc.setState(0x6382, 0x38a3, 0x1690, 0xe272, 0x3b42, 0xe6e8, 0x0, 0x1);
        gbc.writeMem(0x6382, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x38a3, gbc.sp());
        EXPECT(0x6384, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 003E
        gbc.setState(0xc65e, 0xf558, 0x4960, 0xd166, 0xe95a, 0x10f9, 0x0, 0x1);
        gbc.writeMem(0xc65e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xf558, gbc.sp());
        EXPECT(0xc660, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc65e));
        EXPECT(0x1b, gbc.readMem(0xc65f));
        // CB 1B 003F
        gbc.setState(0x9af6, 0x8968, 0x45e0, 0xbb98, 0x6e11, 0xc7cd, 0x0, 0x1);
        gbc.writeMem(0x9af6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x8968, gbc.sp());
        EXPECT(0x9af8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9af6));
        EXPECT(0x1b, gbc.readMem(0x9af7));
        // CB 1B 0040
        gbc.setState(0x2487, 0xa643, 0x6ef0, 0xb429, 0xa5ef, 0x78a7, 0x0, 0x1);
        gbc.writeMem(0x2487, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xa643, gbc.sp());
        EXPECT(0x2489, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0041
        gbc.setState(0xdb41, 0x9e93, 0xd0f0, 0x6d2a, 0x3fab, 0xd064, 0x0, 0x0);
        gbc.writeMem(0xdb41, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x9e93, gbc.sp());
        EXPECT(0xdb43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb41));
        EXPECT(0x1b, gbc.readMem(0xdb42));
        // CB 1B 0042
        gbc.setState(0xbda9, 0xb36e, 0x53d0, 0x2e69, 0x4eb4, 0x96df, 0x1, 0x1);
        gbc.writeMem(0xbda9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xb36e, gbc.sp());
        EXPECT(0xbdab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbda9));
        EXPECT(0x1b, gbc.readMem(0xbdaa));
        // CB 1B 0043
        gbc.setState(0x661f, 0xfb3, 0x6460, 0xc0f0, 0xae4c, 0xccb2, 0x0, 0x0);
        gbc.writeMem(0x661f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xfb3, gbc.sp());
        EXPECT(0x6621, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0044
        gbc.setState(0xd7f0, 0x1148, 0xdc10, 0xfd47, 0x2ace, 0x6b0, 0x0, 0x1);
        gbc.writeMem(0xd7f0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x1148, gbc.sp());
        EXPECT(0xd7f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7f0));
        EXPECT(0x1b, gbc.readMem(0xd7f1));
        // CB 1B 0045
        gbc.setState(0xcb8, 0x73aa, 0x2660, 0x8bd8, 0xa757, 0x7b66, 0x0, 0x0);
        gbc.writeMem(0xcb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x73aa, gbc.sp());
        EXPECT(0xcba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0046
        gbc.setState(0xe0de, 0xcae8, 0x8d60, 0x3477, 0xd97, 0xf82f, 0x1, 0x0);
        gbc.writeMem(0xe0de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xcae8, gbc.sp());
        EXPECT(0xe0e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0de));
        EXPECT(0x1b, gbc.readMem(0xe0df));
        // CB 1B 0047
        gbc.setState(0xe9f6, 0x8a2c, 0xb9c0, 0x7ce3, 0x38c1, 0xf343, 0x0, 0x0);
        gbc.writeMem(0xe9f6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x8a2c, gbc.sp());
        EXPECT(0xe9f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9f6));
        EXPECT(0x1b, gbc.readMem(0xe9f7));
        // CB 1B 0048
        gbc.setState(0x84d3, 0xf365, 0xf950, 0xb28d, 0x16fb, 0xf96a, 0x1, 0x0);
        gbc.writeMem(0x84d3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf365, gbc.sp());
        EXPECT(0x84d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84d3));
        EXPECT(0x1b, gbc.readMem(0x84d4));
        // CB 1B 0049
        gbc.setState(0x4781, 0x898a, 0x8d0, 0xa748, 0xc9ea, 0x529e, 0x0, 0x1);
        gbc.writeMem(0x4781, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x898a, gbc.sp());
        EXPECT(0x4783, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 004A
        gbc.setState(0x8613, 0xf82b, 0xd310, 0x47d8, 0x2e9, 0x3ca0, 0x0, 0x1);
        gbc.writeMem(0x8613, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xf82b, gbc.sp());
        EXPECT(0x8615, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8613));
        EXPECT(0x1b, gbc.readMem(0x8614));
        // CB 1B 004C
        gbc.setState(0xea6, 0x84f, 0x9350, 0xe6da, 0x328c, 0x9ef3, 0x1, 0x1);
        gbc.writeMem(0xea6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x84f, gbc.sp());
        EXPECT(0xea8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 004D
        gbc.setState(0xb348, 0x6cc9, 0x6750, 0x3f74, 0x5942, 0xddd8, 0x0, 0x0);
        gbc.writeMem(0xb348, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x6cc9, gbc.sp());
        EXPECT(0xb34a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb348));
        EXPECT(0x1b, gbc.readMem(0xb349));
        // CB 1B 004E
        gbc.setState(0x79ff, 0xe1bf, 0xe030, 0x7655, 0x68d, 0xa73e, 0x1, 0x1);
        gbc.writeMem(0x79ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xe1bf, gbc.sp());
        EXPECT(0x7a01, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 004F
        gbc.setState(0x7736, 0x9320, 0x2b80, 0xb92e, 0xcbac, 0x43b3, 0x0, 0x0);
        gbc.writeMem(0x7736, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x9320, gbc.sp());
        EXPECT(0x7738, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0050
        gbc.setState(0x36fa, 0xf5a9, 0x1c70, 0x56ed, 0x1efd, 0x7996, 0x0, 0x1);
        gbc.writeMem(0x36fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xf5a9, gbc.sp());
        EXPECT(0x36fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0051
        gbc.setState(0xd679, 0xa518, 0x6b90, 0xf2ff, 0x2dcd, 0xb61a, 0x1, 0x0);
        gbc.writeMem(0xd679, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xa518, gbc.sp());
        EXPECT(0xd67b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd679));
        EXPECT(0x1b, gbc.readMem(0xd67a));
        // CB 1B 0052
        gbc.setState(0x152c, 0x93b5, 0xea30, 0x6e, 0xb267, 0xd49c, 0x0, 0x0);
        gbc.writeMem(0x152c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x93b5, gbc.sp());
        EXPECT(0x152e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0053
        gbc.setState(0xde56, 0x94dd, 0x5810, 0x1a23, 0x3ea3, 0xe86b, 0x1, 0x0);
        gbc.writeMem(0xde56, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x94dd, gbc.sp());
        EXPECT(0xde58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde56));
        EXPECT(0x1b, gbc.readMem(0xde57));
        // CB 1B 0054
        gbc.setState(0x5736, 0x3109, 0xd530, 0xdb9f, 0xd4a1, 0xd9fa, 0x1, 0x1);
        gbc.writeMem(0x5736, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x3109, gbc.sp());
        EXPECT(0x5738, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0055
        gbc.setState(0x6d0a, 0xa615, 0xc550, 0xdb4c, 0xb492, 0x6b2f, 0x1, 0x0);
        gbc.writeMem(0x6d0a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xa615, gbc.sp());
        EXPECT(0x6d0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0056
        gbc.setState(0xcf09, 0x78db, 0xd9e0, 0xa4f5, 0x13a4, 0x18f, 0x1, 0x1);
        gbc.writeMem(0xcf09, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x78db, gbc.sp());
        EXPECT(0xcf0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf09));
        EXPECT(0x1b, gbc.readMem(0xcf0a));
        // CB 1B 0057
        gbc.setState(0x8a54, 0x8903, 0x8640, 0x7e8, 0x99cb, 0x5d83, 0x0, 0x1);
        gbc.writeMem(0x8a54, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x8903, gbc.sp());
        EXPECT(0x8a56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a54));
        EXPECT(0x1b, gbc.readMem(0x8a55));
        // CB 1B 0058
        gbc.setState(0x444d, 0xc99, 0xa840, 0x3d05, 0xf3e9, 0xc7c6, 0x1, 0x1);
        gbc.writeMem(0x444d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xc99, gbc.sp());
        EXPECT(0x444f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0059
        gbc.setState(0xb676, 0x2b44, 0xca50, 0x868f, 0xc11e, 0xcef1, 0x0, 0x0);
        gbc.writeMem(0xb676, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x2b44, gbc.sp());
        EXPECT(0xb678, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb676));
        EXPECT(0x1b, gbc.readMem(0xb677));
        // CB 1B 005A
        gbc.setState(0xcf90, 0xa634, 0x46f0, 0x8dea, 0x5d04, 0xec41, 0x0, 0x1);
        gbc.writeMem(0xcf90, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xa634, gbc.sp());
        EXPECT(0xcf92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf90));
        EXPECT(0x1b, gbc.readMem(0xcf91));
        // CB 1B 005B
        gbc.setState(0xbb6f, 0x36fa, 0xc7f0, 0x7ad1, 0x6a4, 0x96b8, 0x0, 0x0);
        gbc.writeMem(0xbb6f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x36fa, gbc.sp());
        EXPECT(0xbb71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb6f));
        EXPECT(0x1b, gbc.readMem(0xbb70));
        // CB 1B 005C
        gbc.setState(0xd274, 0x2e05, 0xdf0, 0x4970, 0xa2eb, 0xe703, 0x0, 0x0);
        gbc.writeMem(0xd274, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x2e05, gbc.sp());
        EXPECT(0xd276, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd274));
        EXPECT(0x1b, gbc.readMem(0xd275));
        // CB 1B 005D
        gbc.setState(0x80b4, 0xaa70, 0xd040, 0xf82c, 0x49ab, 0x2c8e, 0x1, 0x1);
        gbc.writeMem(0x80b4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xaa70, gbc.sp());
        EXPECT(0x80b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80b4));
        EXPECT(0x1b, gbc.readMem(0x80b5));
        // CB 1B 005E
        gbc.setState(0x6dd6, 0x8ecc, 0xd5b0, 0xf541, 0xd8d0, 0xb80a, 0x0, 0x0);
        gbc.writeMem(0x6dd6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x8ecc, gbc.sp());
        EXPECT(0x6dd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 005F
        gbc.setState(0x63e3, 0x1907, 0xc370, 0x9fce, 0x526b, 0x1fb3, 0x1, 0x0);
        gbc.writeMem(0x63e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x1907, gbc.sp());
        EXPECT(0x63e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0061
        gbc.setState(0x61af, 0xefd7, 0x4b70, 0x86ac, 0x9cc9, 0x104e, 0x1, 0x1);
        gbc.writeMem(0x61af, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xefd7, gbc.sp());
        EXPECT(0x61b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0062
        gbc.setState(0x5f0d, 0x4779, 0x60c0, 0x9309, 0x2b71, 0x1770, 0x0, 0x0);
        gbc.writeMem(0x5f0d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x4779, gbc.sp());
        EXPECT(0x5f0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0063
        gbc.setState(0x7aae, 0x4176, 0x7b40, 0xc87c, 0x8bda, 0xf2d3, 0x0, 0x0);
        gbc.writeMem(0x7aae, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x4176, gbc.sp());
        EXPECT(0x7ab0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0064
        gbc.setState(0x6bc0, 0x6f34, 0x75b0, 0x61d8, 0x1772, 0x1cb2, 0x0, 0x1);
        gbc.writeMem(0x6bc0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x6f34, gbc.sp());
        EXPECT(0x6bc2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0065
        gbc.setState(0x95ba, 0xb00b, 0x8d70, 0xa20a, 0x307d, 0x4584, 0x0, 0x0);
        gbc.writeMem(0x95ba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xb00b, gbc.sp());
        EXPECT(0x95bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95ba));
        EXPECT(0x1b, gbc.readMem(0x95bb));
        // CB 1B 0066
        gbc.setState(0xc368, 0xc48b, 0xc250, 0xfe57, 0xaee, 0xe2d0, 0x1, 0x1);
        gbc.writeMem(0xc368, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xc48b, gbc.sp());
        EXPECT(0xc36a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc368));
        EXPECT(0x1b, gbc.readMem(0xc369));
        // CB 1B 0067
        gbc.setState(0x7bb1, 0xc48, 0x9760, 0x7812, 0x7b62, 0x90b0, 0x1, 0x1);
        gbc.writeMem(0x7bb1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xc48, gbc.sp());
        EXPECT(0x7bb3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0068
        gbc.setState(0xe942, 0xb8ef, 0xc50, 0x75b0, 0xdcc5, 0x9ede, 0x1, 0x1);
        gbc.writeMem(0xe942, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xb8ef, gbc.sp());
        EXPECT(0xe944, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe942));
        EXPECT(0x1b, gbc.readMem(0xe943));
        // CB 1B 0069
        gbc.setState(0xeb88, 0x8346, 0x8a10, 0xe5c6, 0x9abc, 0x7439, 0x1, 0x1);
        gbc.writeMem(0xeb88, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x8346, gbc.sp());
        EXPECT(0xeb8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb88));
        EXPECT(0x1b, gbc.readMem(0xeb89));
        // CB 1B 006A
        gbc.setState(0x990e, 0xa1d1, 0xf00, 0x590a, 0xb926, 0xd81d, 0x0, 0x1);
        gbc.writeMem(0x990e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xa1d1, gbc.sp());
        EXPECT(0x9910, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x990e));
        EXPECT(0x1b, gbc.readMem(0x990f));
        // CB 1B 006B
        gbc.setState(0x6999, 0xf6af, 0xf1a0, 0xf9c, 0xd06, 0xf445, 0x0, 0x0);
        gbc.writeMem(0x6999, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xf6af, gbc.sp());
        EXPECT(0x699b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 006C
        gbc.setState(0x222c, 0x82d8, 0xd060, 0x5200, 0x6a52, 0xe63f, 0x0, 0x1);
        gbc.writeMem(0x222c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x82d8, gbc.sp());
        EXPECT(0x222e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 006D
        gbc.setState(0xb365, 0x719b, 0xf90, 0x40b4, 0x6dbd, 0x4277, 0x0, 0x1);
        gbc.writeMem(0xb365, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x719b, gbc.sp());
        EXPECT(0xb367, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb365));
        EXPECT(0x1b, gbc.readMem(0xb366));
        // CB 1B 006E
        gbc.setState(0x85e7, 0x8480, 0xe2b0, 0x655, 0xc747, 0x70a8, 0x1, 0x0);
        gbc.writeMem(0x85e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x8480, gbc.sp());
        EXPECT(0x85e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85e7));
        EXPECT(0x1b, gbc.readMem(0x85e8));
        // CB 1B 006F
        gbc.setState(0xc283, 0xc241, 0x18f0, 0x3598, 0xae3d, 0xdcad, 0x0, 0x0);
        gbc.writeMem(0xc283, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xc241, gbc.sp());
        EXPECT(0xc285, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc283));
        EXPECT(0x1b, gbc.readMem(0xc284));
        // CB 1B 0070
        gbc.setState(0xbbd, 0x4be9, 0x54b0, 0xe874, 0x7417, 0x3334, 0x1, 0x1);
        gbc.writeMem(0xbbd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x4be9, gbc.sp());
        EXPECT(0xbbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0071
        gbc.setState(0xb471, 0xc943, 0xb440, 0xa3ef, 0x59c5, 0xc0a0, 0x0, 0x0);
        gbc.writeMem(0xb471, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xc943, gbc.sp());
        EXPECT(0xb473, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb471));
        EXPECT(0x1b, gbc.readMem(0xb472));
        // CB 1B 0072
        gbc.setState(0x1f3e, 0x6dae, 0x8400, 0x97dc, 0x9a4c, 0xe7ca, 0x0, 0x1);
        gbc.writeMem(0x1f3e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x6dae, gbc.sp());
        EXPECT(0x1f40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0073
        gbc.setState(0xd5c7, 0xeb97, 0x6820, 0x5306, 0xdc36, 0x1d3, 0x0, 0x0);
        gbc.writeMem(0xd5c7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xeb97, gbc.sp());
        EXPECT(0xd5c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5c7));
        EXPECT(0x1b, gbc.readMem(0xd5c8));
        // CB 1B 0074
        gbc.setState(0x9766, 0xa543, 0xe6d0, 0xead5, 0x18b7, 0x474a, 0x1, 0x1);
        gbc.writeMem(0x9766, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xa543, gbc.sp());
        EXPECT(0x9768, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9766));
        EXPECT(0x1b, gbc.readMem(0x9767));
        // CB 1B 0075
        gbc.setState(0xd89e, 0xfaff, 0x1710, 0x5192, 0x592a, 0xc36, 0x0, 0x1);
        gbc.writeMem(0xd89e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xfaff, gbc.sp());
        EXPECT(0xd8a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd89e));
        EXPECT(0x1b, gbc.readMem(0xd89f));
        // CB 1B 0076
        gbc.setState(0x5347, 0x97c7, 0xfe60, 0xbd59, 0xcc68, 0x35e0, 0x1, 0x0);
        gbc.writeMem(0x5347, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x97c7, gbc.sp());
        EXPECT(0x5349, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0077
        gbc.setState(0x59c0, 0xb86, 0x66f0, 0x5316, 0xd7e3, 0x23ef, 0x1, 0x1);
        gbc.writeMem(0x59c0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xb86, gbc.sp());
        EXPECT(0x59c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0078
        gbc.setState(0xb5d1, 0xac8f, 0xbd20, 0x5c74, 0x3e1f, 0xa17d, 0x1, 0x0);
        gbc.writeMem(0xb5d1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xac8f, gbc.sp());
        EXPECT(0xb5d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5d1));
        EXPECT(0x1b, gbc.readMem(0xb5d2));
        // CB 1B 0079
        gbc.setState(0x3bad, 0x54b6, 0xe0e0, 0xd2f, 0xe210, 0xb120, 0x0, 0x0);
        gbc.writeMem(0x3bad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x54b6, gbc.sp());
        EXPECT(0x3baf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 007B
        gbc.setState(0xc924, 0x3450, 0x310, 0x4c3, 0xf6cc, 0x4b66, 0x1, 0x0);
        gbc.writeMem(0xc924, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x3450, gbc.sp());
        EXPECT(0xc926, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc924));
        EXPECT(0x1b, gbc.readMem(0xc925));
        // CB 1B 007D
        gbc.setState(0xcce2, 0x55eb, 0x7750, 0xa851, 0xc94f, 0x5317, 0x0, 0x1);
        gbc.writeMem(0xcce2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x55eb, gbc.sp());
        EXPECT(0xcce4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcce2));
        EXPECT(0x1b, gbc.readMem(0xcce3));
        // CB 1B 007E
        gbc.setState(0xc61e, 0xdd71, 0xb8a0, 0x7100, 0xc46c, 0x766b, 0x0, 0x0);
        gbc.writeMem(0xc61e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xdd71, gbc.sp());
        EXPECT(0xc620, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc61e));
        EXPECT(0x1b, gbc.readMem(0xc61f));
        // CB 1B 007F
        gbc.setState(0xcf7, 0x8587, 0x8c30, 0xb3d8, 0x63f4, 0x78f, 0x0, 0x0);
        gbc.writeMem(0xcf7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x8587, gbc.sp());
        EXPECT(0xcf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0080
        gbc.setState(0x1703, 0xcf49, 0xa890, 0x3340, 0xaa89, 0x8dcb, 0x1, 0x0);
        gbc.writeMem(0x1703, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xcf49, gbc.sp());
        EXPECT(0x1705, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0081
        gbc.setState(0x661b, 0x6069, 0xa3b0, 0x3f61, 0x4c7f, 0xa793, 0x0, 0x0);
        gbc.writeMem(0x661b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x6069, gbc.sp());
        EXPECT(0x661d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0082
        gbc.setState(0x7390, 0x4f01, 0x22f0, 0x9f77, 0xa00c, 0x9dbc, 0x0, 0x0);
        gbc.writeMem(0x7390, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x4f01, gbc.sp());
        EXPECT(0x7392, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0083
        gbc.setState(0xa72, 0x4810, 0xa9c0, 0x942a, 0x5353, 0xe338, 0x1, 0x0);
        gbc.writeMem(0xa72, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x4810, gbc.sp());
        EXPECT(0xa74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0084
        gbc.setState(0xedee, 0x1be8, 0x7a10, 0xe274, 0xd630, 0xc890, 0x1, 0x1);
        gbc.writeMem(0xedee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x1be8, gbc.sp());
        EXPECT(0xedf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedee));
        EXPECT(0x1b, gbc.readMem(0xedef));
        // CB 1B 0085
        gbc.setState(0x3d1a, 0xa01d, 0xe190, 0x670e, 0x3969, 0xe97, 0x0, 0x0);
        gbc.writeMem(0x3d1a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xa01d, gbc.sp());
        EXPECT(0x3d1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0086
        gbc.setState(0x307e, 0xf7b, 0xb2e0, 0xf113, 0xf5ce, 0x8e29, 0x0, 0x1);
        gbc.writeMem(0x307e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xf7b, gbc.sp());
        EXPECT(0x3080, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0087
        gbc.setState(0x9587, 0x3004, 0xa40, 0xe574, 0x6388, 0x4247, 0x0, 0x1);
        gbc.writeMem(0x9587, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x3004, gbc.sp());
        EXPECT(0x9589, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9587));
        EXPECT(0x1b, gbc.readMem(0x9588));
        // CB 1B 0088
        gbc.setState(0xcb18, 0xcd02, 0x1bd0, 0x36ee, 0x9ef0, 0x8306, 0x1, 0x1);
        gbc.writeMem(0xcb18, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xcd02, gbc.sp());
        EXPECT(0xcb1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb18));
        EXPECT(0x1b, gbc.readMem(0xcb19));
        // CB 1B 0089
        gbc.setState(0xdc58, 0x6774, 0xd710, 0xb108, 0x3785, 0x5631, 0x0, 0x0);
        gbc.writeMem(0xdc58, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x6774, gbc.sp());
        EXPECT(0xdc5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc58));
        EXPECT(0x1b, gbc.readMem(0xdc59));
        // CB 1B 008B
        gbc.setState(0x220b, 0x6908, 0x2e80, 0xe62a, 0xeec3, 0x5637, 0x1, 0x1);
        gbc.writeMem(0x220b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x6908, gbc.sp());
        EXPECT(0x220d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 008D
        gbc.setState(0x6e9b, 0xf8d5, 0x5fd0, 0xf203, 0x60db, 0x39d7, 0x1, 0x1);
        gbc.writeMem(0x6e9b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xf8d5, gbc.sp());
        EXPECT(0x6e9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 008E
        gbc.setState(0xcb73, 0x2491, 0x310, 0x4db0, 0xed73, 0xf6dd, 0x0, 0x1);
        gbc.writeMem(0xcb73, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x2491, gbc.sp());
        EXPECT(0xcb75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb73));
        EXPECT(0x1b, gbc.readMem(0xcb74));
        // CB 1B 008F
        gbc.setState(0x70fd, 0xb674, 0x1170, 0xa466, 0xcc41, 0x4a96, 0x0, 0x0);
        gbc.writeMem(0x70fd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xb674, gbc.sp());
        EXPECT(0x70ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0090
        gbc.setState(0x9aed, 0xca7f, 0x8c60, 0x95b0, 0xb2c2, 0xb804, 0x0, 0x0);
        gbc.writeMem(0x9aed, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xca7f, gbc.sp());
        EXPECT(0x9aef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9aed));
        EXPECT(0x1b, gbc.readMem(0x9aee));
        // CB 1B 0091
        gbc.setState(0x7ee0, 0xc407, 0x6750, 0xf73c, 0x9a48, 0xd285, 0x1, 0x1);
        gbc.writeMem(0x7ee0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xc407, gbc.sp());
        EXPECT(0x7ee2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0092
        gbc.setState(0x8f1a, 0x7ac4, 0x7920, 0x3d46, 0xd8a, 0xe217, 0x0, 0x0);
        gbc.writeMem(0x8f1a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x7ac4, gbc.sp());
        EXPECT(0x8f1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f1a));
        EXPECT(0x1b, gbc.readMem(0x8f1b));
        // CB 1B 0093
        gbc.setState(0xb32f, 0xf9ec, 0x11e0, 0xf6ee, 0x4901, 0x3a99, 0x1, 0x1);
        gbc.writeMem(0xb32f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xf9ec, gbc.sp());
        EXPECT(0xb331, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb32f));
        EXPECT(0x1b, gbc.readMem(0xb330));
        // CB 1B 0094
        gbc.setState(0x15e7, 0x4c6e, 0x2fd0, 0x4a3c, 0x7082, 0x6b86, 0x0, 0x1);
        gbc.writeMem(0x15e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x4c6e, gbc.sp());
        EXPECT(0x15e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0095
        gbc.setState(0x561b, 0x5d63, 0x8860, 0xd556, 0x3975, 0x44e1, 0x0, 0x0);
        gbc.writeMem(0x561b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x5d63, gbc.sp());
        EXPECT(0x561d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0096
        gbc.setState(0x9028, 0xe0a4, 0x280, 0x5146, 0xe601, 0xb2a8, 0x0, 0x1);
        gbc.writeMem(0x9028, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xe0a4, gbc.sp());
        EXPECT(0x902a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9028));
        EXPECT(0x1b, gbc.readMem(0x9029));
        // CB 1B 0097
        gbc.setState(0x146e, 0x2513, 0x7680, 0xd7d2, 0x18bc, 0xc8f9, 0x1, 0x1);
        gbc.writeMem(0x146e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x2513, gbc.sp());
        EXPECT(0x1470, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0098
        gbc.setState(0x5890, 0xd0b, 0x7590, 0x412, 0x1ce7, 0x9bd2, 0x1, 0x0);
        gbc.writeMem(0x5890, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xd0b, gbc.sp());
        EXPECT(0x5892, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0099
        gbc.setState(0x9514, 0xecb1, 0x8bf0, 0xfce0, 0xd9d3, 0xa0b1, 0x1, 0x1);
        gbc.writeMem(0x9514, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xecb1, gbc.sp());
        EXPECT(0x9516, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9514));
        EXPECT(0x1b, gbc.readMem(0x9515));
        // CB 1B 009A
        gbc.setState(0x88dd, 0xa4f4, 0x71d0, 0x3e9b, 0xd807, 0x6ba7, 0x1, 0x1);
        gbc.writeMem(0x88dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xa4f4, gbc.sp());
        EXPECT(0x88df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88dd));
        EXPECT(0x1b, gbc.readMem(0x88de));
        // CB 1B 009B
        gbc.setState(0x9915, 0x4df7, 0x17e0, 0x1449, 0xc74f, 0x1bcb, 0x1, 0x0);
        gbc.writeMem(0x9915, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x4df7, gbc.sp());
        EXPECT(0x9917, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9915));
        EXPECT(0x1b, gbc.readMem(0x9916));
        // CB 1B 009C
        gbc.setState(0xb96d, 0xfe7e, 0x7780, 0x4191, 0x9ad6, 0xd46c, 0x1, 0x0);
        gbc.writeMem(0xb96d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xfe7e, gbc.sp());
        EXPECT(0xb96f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb96d));
        EXPECT(0x1b, gbc.readMem(0xb96e));
        // CB 1B 009E
        gbc.setState(0xc90c, 0xf9d2, 0x40c0, 0x94d8, 0x2149, 0xf2de, 0x0, 0x0);
        gbc.writeMem(0xc90c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xf9d2, gbc.sp());
        EXPECT(0xc90e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc90c));
        EXPECT(0x1b, gbc.readMem(0xc90d));
        // CB 1B 00A0
        gbc.setState(0xdd52, 0x838f, 0x6da0, 0xedc5, 0x264, 0x6b4a, 0x0, 0x0);
        gbc.writeMem(0xdd52, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x838f, gbc.sp());
        EXPECT(0xdd54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd52));
        EXPECT(0x1b, gbc.readMem(0xdd53));
        // CB 1B 00A1
        gbc.setState(0x8ae9, 0x159c, 0xc620, 0x251c, 0x770d, 0x272b, 0x0, 0x1);
        gbc.writeMem(0x8ae9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x159c, gbc.sp());
        EXPECT(0x8aeb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ae9));
        EXPECT(0x1b, gbc.readMem(0x8aea));
        // CB 1B 00A2
        gbc.setState(0x29d9, 0xf6eb, 0x5ff0, 0xd7c3, 0xe1f6, 0xceb8, 0x1, 0x0);
        gbc.writeMem(0x29d9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xf6eb, gbc.sp());
        EXPECT(0x29db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00A3
        gbc.setState(0x8d23, 0xdcbf, 0x3d80, 0x6aad, 0x16f1, 0x752b, 0x1, 0x0);
        gbc.writeMem(0x8d23, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xdcbf, gbc.sp());
        EXPECT(0x8d25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d23));
        EXPECT(0x1b, gbc.readMem(0x8d24));
        // CB 1B 00A4
        gbc.setState(0x3bf9, 0x543c, 0x2b50, 0xa441, 0x32ad, 0x5b1d, 0x0, 0x1);
        gbc.writeMem(0x3bf9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x543c, gbc.sp());
        EXPECT(0x3bfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00A5
        gbc.setState(0xd26c, 0x71c9, 0x87b0, 0xad40, 0xd791, 0x6f8d, 0x0, 0x0);
        gbc.writeMem(0xd26c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x71c9, gbc.sp());
        EXPECT(0xd26e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd26c));
        EXPECT(0x1b, gbc.readMem(0xd26d));
        // CB 1B 00A6
        gbc.setState(0xc515, 0x1ce1, 0x7a90, 0xb1d0, 0xf0e, 0xcb12, 0x1, 0x1);
        gbc.writeMem(0xc515, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x1ce1, gbc.sp());
        EXPECT(0xc517, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc515));
        EXPECT(0x1b, gbc.readMem(0xc516));
        // CB 1B 00A7
        gbc.setState(0x7a03, 0x3b45, 0xe070, 0xaeb7, 0x536e, 0xd0f5, 0x1, 0x1);
        gbc.writeMem(0x7a03, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x3b45, gbc.sp());
        EXPECT(0x7a05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00A8
        gbc.setState(0xc36b, 0xabc6, 0x9370, 0x510d, 0xbf53, 0x810b, 0x1, 0x1);
        gbc.writeMem(0xc36b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xabc6, gbc.sp());
        EXPECT(0xc36d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc36b));
        EXPECT(0x1b, gbc.readMem(0xc36c));
        // CB 1B 00A9
        gbc.setState(0xb46f, 0x5c5b, 0x7b90, 0xf392, 0xc8e6, 0x103a, 0x0, 0x1);
        gbc.writeMem(0xb46f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x5c5b, gbc.sp());
        EXPECT(0xb471, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb46f));
        EXPECT(0x1b, gbc.readMem(0xb470));
        // CB 1B 00AA
        gbc.setState(0xc28b, 0x92f6, 0xf710, 0xa0ce, 0x8de2, 0x24af, 0x0, 0x1);
        gbc.writeMem(0xc28b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x92f6, gbc.sp());
        EXPECT(0xc28d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc28b));
        EXPECT(0x1b, gbc.readMem(0xc28c));
        // CB 1B 00AB
        gbc.setState(0x78e7, 0xb7c0, 0x8210, 0x97ed, 0x7672, 0x13a3, 0x0, 0x0);
        gbc.writeMem(0x78e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xb7c0, gbc.sp());
        EXPECT(0x78e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00AC
        gbc.setState(0xd3a8, 0xa5b, 0x4430, 0x5c55, 0x52e1, 0x2a32, 0x1, 0x0);
        gbc.writeMem(0xd3a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xa5b, gbc.sp());
        EXPECT(0xd3aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3a8));
        EXPECT(0x1b, gbc.readMem(0xd3a9));
        // CB 1B 00AD
        gbc.setState(0x3044, 0x4e3b, 0x8660, 0x16e0, 0x78f0, 0x2f62, 0x1, 0x1);
        gbc.writeMem(0x3044, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x4e3b, gbc.sp());
        EXPECT(0x3046, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00AE
        gbc.setState(0x2479, 0xb16, 0xd1e0, 0xe08b, 0xacea, 0x9357, 0x0, 0x0);
        gbc.writeMem(0x2479, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xb16, gbc.sp());
        EXPECT(0x247b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00AF
        gbc.setState(0xb19a, 0x26bd, 0x6970, 0x1525, 0xc7e, 0x6df, 0x0, 0x1);
        gbc.writeMem(0xb19a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x26bd, gbc.sp());
        EXPECT(0xb19c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb19a));
        EXPECT(0x1b, gbc.readMem(0xb19b));
        // CB 1B 00B0
        gbc.setState(0x9e94, 0xc272, 0x3470, 0xb3fa, 0xcc6a, 0x32ac, 0x0, 0x0);
        gbc.writeMem(0x9e94, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xc272, gbc.sp());
        EXPECT(0x9e96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e94));
        EXPECT(0x1b, gbc.readMem(0x9e95));
        // CB 1B 00B1
        gbc.setState(0x45a4, 0x11b3, 0x1610, 0x3908, 0x3a57, 0x8dde, 0x1, 0x1);
        gbc.writeMem(0x45a4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x11b3, gbc.sp());
        EXPECT(0x45a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00B2
        gbc.setState(0xceaa, 0xed86, 0x3eb0, 0xa756, 0x96ea, 0x562f, 0x0, 0x0);
        gbc.writeMem(0xceaa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xed86, gbc.sp());
        EXPECT(0xceac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xceaa));
        EXPECT(0x1b, gbc.readMem(0xceab));
        // CB 1B 00B3
        gbc.setState(0xd6c6, 0xe4db, 0xb3e0, 0x298c, 0x5a10, 0x990e, 0x1, 0x1);
        gbc.writeMem(0xd6c6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xe4db, gbc.sp());
        EXPECT(0xd6c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6c6));
        EXPECT(0x1b, gbc.readMem(0xd6c7));
        // CB 1B 00B4
        gbc.setState(0x13c3, 0xb1fd, 0xc680, 0xebdb, 0x90a8, 0x2e61, 0x1, 0x1);
        gbc.writeMem(0x13c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb1fd, gbc.sp());
        EXPECT(0x13c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00B5
        gbc.setState(0xc2de, 0x9bb8, 0x3b70, 0x64a8, 0x885d, 0xe4cd, 0x0, 0x0);
        gbc.writeMem(0xc2de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x9bb8, gbc.sp());
        EXPECT(0xc2e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2de));
        EXPECT(0x1b, gbc.readMem(0xc2df));
        // CB 1B 00B6
        gbc.setState(0x9c96, 0xc0ea, 0x3c60, 0x969f, 0xdbeb, 0xf824, 0x0, 0x0);
        gbc.writeMem(0x9c96, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xc0ea, gbc.sp());
        EXPECT(0x9c98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c96));
        EXPECT(0x1b, gbc.readMem(0x9c97));
        // CB 1B 00B7
        gbc.setState(0x45ca, 0xc95d, 0x8280, 0x9a52, 0xbfc0, 0x6744, 0x0, 0x0);
        gbc.writeMem(0x45ca, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xc95d, gbc.sp());
        EXPECT(0x45cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00B8
        gbc.setState(0x45fe, 0xfdcd, 0x23f0, 0x454d, 0xeb82, 0x7a75, 0x1, 0x1);
        gbc.writeMem(0x45fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xfdcd, gbc.sp());
        EXPECT(0x4600, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00B9
        gbc.setState(0x21b8, 0x16ef, 0x8e50, 0x8fd6, 0xade, 0x368a, 0x1, 0x1);
        gbc.writeMem(0x21b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x16ef, gbc.sp());
        EXPECT(0x21ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00BA
        gbc.setState(0x8fe9, 0xb7e1, 0xb50, 0x2742, 0x96af, 0x602b, 0x1, 0x1);
        gbc.writeMem(0x8fe9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xb7e1, gbc.sp());
        EXPECT(0x8feb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fe9));
        EXPECT(0x1b, gbc.readMem(0x8fea));
        // CB 1B 00BB
        gbc.setState(0x7fe3, 0x7820, 0xc890, 0x9059, 0x4b14, 0x4253, 0x1, 0x0);
        gbc.writeMem(0x7fe3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x7820, gbc.sp());
        EXPECT(0x7fe5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00BC
        gbc.setState(0x3b80, 0x4d07, 0x5f30, 0x9917, 0x3595, 0x3a3a, 0x0, 0x1);
        gbc.writeMem(0x3b80, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x4d07, gbc.sp());
        EXPECT(0x3b82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00BD
        gbc.setState(0x4696, 0x8c4, 0xec40, 0x9a20, 0x8ba1, 0x388b, 0x1, 0x1);
        gbc.writeMem(0x4696, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x8c4, gbc.sp());
        EXPECT(0x4698, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00BE
        gbc.setState(0x86bd, 0xd55e, 0x1470, 0xa859, 0x2d59, 0x5abb, 0x0, 0x0);
        gbc.writeMem(0x86bd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xd55e, gbc.sp());
        EXPECT(0x86bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86bd));
        EXPECT(0x1b, gbc.readMem(0x86be));
        // CB 1B 00BF
        gbc.setState(0x99c5, 0x3d8e, 0x5e00, 0x29e5, 0x70fe, 0xdda, 0x0, 0x1);
        gbc.writeMem(0x99c5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x3d8e, gbc.sp());
        EXPECT(0x99c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99c5));
        EXPECT(0x1b, gbc.readMem(0x99c6));
        // CB 1B 00C0
        gbc.setState(0x91b1, 0xcc88, 0x6fd0, 0x6da5, 0xdb24, 0x394e, 0x0, 0x0);
        gbc.writeMem(0x91b1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xcc88, gbc.sp());
        EXPECT(0x91b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91b1));
        EXPECT(0x1b, gbc.readMem(0x91b2));
        // CB 1B 00C1
        gbc.setState(0x4454, 0xea6a, 0x79a0, 0x5080, 0x581b, 0xecb4, 0x0, 0x0);
        gbc.writeMem(0x4454, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xea6a, gbc.sp());
        EXPECT(0x4456, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00C2
        gbc.setState(0x4e40, 0xcbda, 0x74c0, 0xec69, 0xd9df, 0xb25, 0x1, 0x1);
        gbc.writeMem(0x4e40, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xcbda, gbc.sp());
        EXPECT(0x4e42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00C3
        gbc.setState(0x8bc9, 0xdb31, 0x5d40, 0x36a6, 0x91ac, 0x3818, 0x1, 0x0);
        gbc.writeMem(0x8bc9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xdb31, gbc.sp());
        EXPECT(0x8bcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bc9));
        EXPECT(0x1b, gbc.readMem(0x8bca));
        // CB 1B 00C4
        gbc.setState(0xe76f, 0xcc4c, 0x5560, 0x39a, 0x7093, 0xcd02, 0x1, 0x1);
        gbc.writeMem(0xe76f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xcc4c, gbc.sp());
        EXPECT(0xe771, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe76f));
        EXPECT(0x1b, gbc.readMem(0xe770));
        // CB 1B 00C6
        gbc.setState(0x4ba9, 0x556c, 0x94a0, 0x5d1d, 0x1ffe, 0x6fb0, 0x1, 0x1);
        gbc.writeMem(0x4ba9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x556c, gbc.sp());
        EXPECT(0x4bab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00C7
        gbc.setState(0xbb0b, 0x1538, 0x8d00, 0x852, 0x201, 0x9d7, 0x0, 0x1);
        gbc.writeMem(0xbb0b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x1538, gbc.sp());
        EXPECT(0xbb0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb0b));
        EXPECT(0x1b, gbc.readMem(0xbb0c));
        // CB 1B 00C8
        gbc.setState(0x34af, 0x513c, 0x5570, 0xddf9, 0x53da, 0x465a, 0x0, 0x1);
        gbc.writeMem(0x34af, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x513c, gbc.sp());
        EXPECT(0x34b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00C9
        gbc.setState(0x4e38, 0x3301, 0x8e30, 0x2870, 0x3a3, 0x64dd, 0x1, 0x0);
        gbc.writeMem(0x4e38, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x3301, gbc.sp());
        EXPECT(0x4e3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00CA
        gbc.setState(0x79ce, 0xb343, 0x24b0, 0x13fc, 0x7cf, 0x2b54, 0x1, 0x0);
        gbc.writeMem(0x79ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xb343, gbc.sp());
        EXPECT(0x79d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00CB
        gbc.setState(0x5bba, 0xb9e5, 0x69c0, 0xedd0, 0x94b5, 0x5433, 0x1, 0x1);
        gbc.writeMem(0x5bba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xb9e5, gbc.sp());
        EXPECT(0x5bbc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00CC
        gbc.setState(0xc95f, 0xfab1, 0xdc30, 0x48d8, 0xab77, 0x3394, 0x1, 0x1);
        gbc.writeMem(0xc95f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xfab1, gbc.sp());
        EXPECT(0xc961, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc95f));
        EXPECT(0x1b, gbc.readMem(0xc960));
        // CB 1B 00CD
        gbc.setState(0x2982, 0x2901, 0x90c0, 0xab, 0x8197, 0xc206, 0x0, 0x0);
        gbc.writeMem(0x2982, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x2901, gbc.sp());
        EXPECT(0x2984, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00CE
        gbc.setState(0x2388, 0xc0a6, 0xdc20, 0x519f, 0x6fcf, 0xe11e, 0x0, 0x0);
        gbc.writeMem(0x2388, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xc0a6, gbc.sp());
        EXPECT(0x238a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00CF
        gbc.setState(0xb208, 0x559f, 0x5eb0, 0xbbb5, 0xae03, 0x60b6, 0x0, 0x1);
        gbc.writeMem(0xb208, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x559f, gbc.sp());
        EXPECT(0xb20a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb208));
        EXPECT(0x1b, gbc.readMem(0xb209));
        // CB 1B 00D0
        gbc.setState(0x6cee, 0xe600, 0x8f10, 0x8882, 0xad21, 0xb17c, 0x0, 0x0);
        gbc.writeMem(0x6cee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xe600, gbc.sp());
        EXPECT(0x6cf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00D1
        gbc.setState(0xf55, 0x91da, 0x97c0, 0x3bff, 0xdeb, 0xe179, 0x0, 0x1);
        gbc.writeMem(0xf55, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x91da, gbc.sp());
        EXPECT(0xf57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00D2
        gbc.setState(0xeb32, 0x301d, 0x97d0, 0x6066, 0xb1f7, 0xfed3, 0x1, 0x1);
        gbc.writeMem(0xeb32, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x301d, gbc.sp());
        EXPECT(0xeb34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb32));
        EXPECT(0x1b, gbc.readMem(0xeb33));
        // CB 1B 00D3
        gbc.setState(0xbaef, 0xbfc4, 0xd3e0, 0x677a, 0xba37, 0x50ac, 0x0, 0x1);
        gbc.writeMem(0xbaef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xbfc4, gbc.sp());
        EXPECT(0xbaf1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaef));
        EXPECT(0x1b, gbc.readMem(0xbaf0));
        // CB 1B 00D4
        gbc.setState(0xd85f, 0xad69, 0x8a20, 0x4427, 0x1a1, 0x1491, 0x1, 0x1);
        gbc.writeMem(0xd85f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xad69, gbc.sp());
        EXPECT(0xd861, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd85f));
        EXPECT(0x1b, gbc.readMem(0xd860));
        // CB 1B 00D5
        gbc.setState(0x1212, 0x3a6c, 0xead0, 0x2ea3, 0xcbeb, 0xc328, 0x1, 0x0);
        gbc.writeMem(0x1212, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x3a6c, gbc.sp());
        EXPECT(0x1214, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00D6
        gbc.setState(0xe16e, 0xb5ee, 0xc6a0, 0x590e, 0x1251, 0x62b8, 0x1, 0x0);
        gbc.writeMem(0xe16e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xb5ee, gbc.sp());
        EXPECT(0xe170, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe16e));
        EXPECT(0x1b, gbc.readMem(0xe16f));
        // CB 1B 00D7
        gbc.setState(0x29c2, 0x54e7, 0xb0, 0x9b3c, 0xfcb0, 0xe4d5, 0x0, 0x1);
        gbc.writeMem(0x29c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x54e7, gbc.sp());
        EXPECT(0x29c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00D8
        gbc.setState(0x3abb, 0x5eb2, 0x6ce0, 0x5ce, 0xa511, 0x60de, 0x1, 0x0);
        gbc.writeMem(0x3abb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x5eb2, gbc.sp());
        EXPECT(0x3abd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00D9
        gbc.setState(0xec35, 0xa96d, 0xb630, 0x7cbc, 0x424a, 0x754b, 0x1, 0x0);
        gbc.writeMem(0xec35, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xa96d, gbc.sp());
        EXPECT(0xec37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec35));
        EXPECT(0x1b, gbc.readMem(0xec36));
        // CB 1B 00DB
        gbc.setState(0x4dab, 0xfae4, 0x2750, 0x72d, 0x558a, 0x9f21, 0x0, 0x1);
        gbc.writeMem(0x4dab, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xfae4, gbc.sp());
        EXPECT(0x4dad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00DC
        gbc.setState(0xe3e9, 0x7923, 0xbdc0, 0xd513, 0x7eae, 0x80c7, 0x1, 0x1);
        gbc.writeMem(0xe3e9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x7923, gbc.sp());
        EXPECT(0xe3eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3e9));
        EXPECT(0x1b, gbc.readMem(0xe3ea));
        // CB 1B 00DD
        gbc.setState(0x41d8, 0x5a81, 0xce40, 0x9190, 0x611, 0xdcd4, 0x0, 0x1);
        gbc.writeMem(0x41d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x5a81, gbc.sp());
        EXPECT(0x41da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00DE
        gbc.setState(0x32b5, 0xafdd, 0xb40, 0x62de, 0x10ab, 0xe391, 0x1, 0x0);
        gbc.writeMem(0x32b5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xafdd, gbc.sp());
        EXPECT(0x32b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00DF
        gbc.setState(0xbd3b, 0xe128, 0xf570, 0x2ff7, 0x8443, 0x20df, 0x1, 0x1);
        gbc.writeMem(0xbd3b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xe128, gbc.sp());
        EXPECT(0xbd3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd3b));
        EXPECT(0x1b, gbc.readMem(0xbd3c));
        // CB 1B 00E0
        gbc.setState(0xc8fe, 0xa4de, 0x65b0, 0x90a, 0x9ea4, 0xd055, 0x0, 0x0);
        gbc.writeMem(0xc8fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xa4de, gbc.sp());
        EXPECT(0xc900, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8fe));
        EXPECT(0x1b, gbc.readMem(0xc8ff));
        // CB 1B 00E1
        gbc.setState(0x5eb8, 0x69b8, 0xde30, 0xf7e5, 0x7f6b, 0xc73d, 0x1, 0x0);
        gbc.writeMem(0x5eb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x69b8, gbc.sp());
        EXPECT(0x5eba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00E2
        gbc.setState(0x96e2, 0x1b50, 0x4370, 0xb4e, 0x636b, 0x870f, 0x1, 0x1);
        gbc.writeMem(0x96e2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x1b50, gbc.sp());
        EXPECT(0x96e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96e2));
        EXPECT(0x1b, gbc.readMem(0x96e3));
        // CB 1B 00E3
        gbc.setState(0x55bb, 0xdb41, 0x930, 0xbc73, 0x19ba, 0xefa3, 0x1, 0x0);
        gbc.writeMem(0x55bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xdb41, gbc.sp());
        EXPECT(0x55bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00E5
        gbc.setState(0x4ea8, 0xfdb0, 0x9120, 0xc223, 0x5a29, 0xf5c1, 0x0, 0x1);
        gbc.writeMem(0x4ea8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xfdb0, gbc.sp());
        EXPECT(0x4eaa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00E6
        gbc.setState(0x853e, 0xdaae, 0x6420, 0xc045, 0x3a90, 0x2611, 0x0, 0x1);
        gbc.writeMem(0x853e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xdaae, gbc.sp());
        EXPECT(0x8540, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x853e));
        EXPECT(0x1b, gbc.readMem(0x853f));
        // CB 1B 00E7
        gbc.setState(0x252d, 0xd913, 0x7ec0, 0x8b5, 0x139f, 0xb8b6, 0x1, 0x1);
        gbc.writeMem(0x252d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xd913, gbc.sp());
        EXPECT(0x252f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00E8
        gbc.setState(0x7bf, 0xe6cb, 0x25e0, 0x1842, 0x1eaa, 0x1013, 0x0, 0x0);
        gbc.writeMem(0x7bf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xe6cb, gbc.sp());
        EXPECT(0x7c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00E9
        gbc.setState(0x4963, 0xd311, 0x96e0, 0x1ead, 0xb5e6, 0x190f, 0x1, 0x1);
        gbc.writeMem(0x4963, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xd311, gbc.sp());
        EXPECT(0x4965, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00EA
        gbc.setState(0x3302, 0x39d0, 0x9ae0, 0x32cf, 0x4394, 0x885, 0x1, 0x1);
        gbc.writeMem(0x3302, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x39d0, gbc.sp());
        EXPECT(0x3304, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00EB
        gbc.setState(0x59e6, 0xfd89, 0x5e00, 0x2640, 0x5147, 0x69ea, 0x1, 0x0);
        gbc.writeMem(0x59e6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xfd89, gbc.sp());
        EXPECT(0x59e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00EC
        gbc.setState(0x8fe3, 0xb6b7, 0xd860, 0xe0e4, 0xc0c0, 0x5a5b, 0x0, 0x0);
        gbc.writeMem(0x8fe3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xb6b7, gbc.sp());
        EXPECT(0x8fe5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fe3));
        EXPECT(0x1b, gbc.readMem(0x8fe4));
        // CB 1B 00ED
        gbc.setState(0x901d, 0xdb98, 0x81c0, 0xe975, 0x3640, 0xdad6, 0x1, 0x1);
        gbc.writeMem(0x901d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xdb98, gbc.sp());
        EXPECT(0x901f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x901d));
        EXPECT(0x1b, gbc.readMem(0x901e));
        // CB 1B 00EE
        gbc.setState(0x823f, 0x95dd, 0x7ab0, 0x3bdd, 0x7b0e, 0xcc15, 0x1, 0x0);
        gbc.writeMem(0x823f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x95dd, gbc.sp());
        EXPECT(0x8241, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x823f));
        EXPECT(0x1b, gbc.readMem(0x8240));
        // CB 1B 00EF
        gbc.setState(0x5bf7, 0x9438, 0x6630, 0xa437, 0x64bf, 0x91b0, 0x0, 0x1);
        gbc.writeMem(0x5bf7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x9438, gbc.sp());
        EXPECT(0x5bf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00F0
        gbc.setState(0x78c, 0xf8d8, 0x6cd0, 0x7be, 0x2f04, 0xfb75, 0x1, 0x0);
        gbc.writeMem(0x78c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xf8d8, gbc.sp());
        EXPECT(0x78e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00F1
        gbc.setState(0x4be6, 0xf4fb, 0xe30, 0x608e, 0x2053, 0xa75e, 0x0, 0x1);
        gbc.writeMem(0x4be6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xf4fb, gbc.sp());
        EXPECT(0x4be8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00F2
        gbc.setState(0xd183, 0x9da5, 0xdec0, 0xf588, 0xe90d, 0xb47f, 0x0, 0x0);
        gbc.writeMem(0xd183, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x9da5, gbc.sp());
        EXPECT(0xd185, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd183));
        EXPECT(0x1b, gbc.readMem(0xd184));
        // CB 1B 00F3
        gbc.setState(0x9ba6, 0x5aa4, 0x9c30, 0x7d1e, 0x89f3, 0xfc16, 0x1, 0x0);
        gbc.writeMem(0x9ba6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x5aa4, gbc.sp());
        EXPECT(0x9ba8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ba6));
        EXPECT(0x1b, gbc.readMem(0x9ba7));
        // CB 1B 00F4
        gbc.setState(0x177f, 0xa947, 0x7240, 0x5bf0, 0x2fca, 0x1318, 0x0, 0x1);
        gbc.writeMem(0x177f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xa947, gbc.sp());
        EXPECT(0x1781, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00F5
        gbc.setState(0x4c10, 0x5659, 0xaf90, 0x8481, 0xe6d6, 0x454a, 0x0, 0x1);
        gbc.writeMem(0x4c10, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x5659, gbc.sp());
        EXPECT(0x4c12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00F6
        gbc.setState(0x56fe, 0x7d80, 0xe6f0, 0xd940, 0x9c47, 0xb177, 0x0, 0x0);
        gbc.writeMem(0x56fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x7d80, gbc.sp());
        EXPECT(0x5700, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 00F7
        gbc.setState(0x9ee6, 0xc1df, 0x10e0, 0x27d2, 0x107a, 0x117a, 0x0, 0x1);
        gbc.writeMem(0x9ee6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xc1df, gbc.sp());
        EXPECT(0x9ee8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ee6));
        EXPECT(0x1b, gbc.readMem(0x9ee7));
        // CB 1B 00F8
        gbc.setState(0xb685, 0xc3c5, 0xdd30, 0xcb36, 0xdc8c, 0xa208, 0x0, 0x0);
        gbc.writeMem(0xb685, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc3c5, gbc.sp());
        EXPECT(0xb687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb685));
        EXPECT(0x1b, gbc.readMem(0xb686));
        // CB 1B 00F9
        gbc.setState(0xbe4c, 0x47d8, 0xe080, 0x9ceb, 0x7caa, 0x5bf0, 0x1, 0x1);
        gbc.writeMem(0xbe4c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x47d8, gbc.sp());
        EXPECT(0xbe4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe4c));
        EXPECT(0x1b, gbc.readMem(0xbe4d));
        // CB 1B 00FA
        gbc.setState(0x8cc3, 0xa797, 0x2ad0, 0xa2f6, 0xca3, 0x4563, 0x1, 0x0);
        gbc.writeMem(0x8cc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xa797, gbc.sp());
        EXPECT(0x8cc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cc3));
        EXPECT(0x1b, gbc.readMem(0x8cc4));
        // CB 1B 00FB
        gbc.setState(0xb068, 0xdd17, 0x6ea0, 0x65e9, 0x84df, 0xb67c, 0x0, 0x1);
        gbc.writeMem(0xb068, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xdd17, gbc.sp());
        EXPECT(0xb06a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb068));
        EXPECT(0x1b, gbc.readMem(0xb069));
        // CB 1B 00FC
        gbc.setState(0xaf66, 0xaed6, 0xc160, 0xe4d1, 0x48a5, 0x60ba, 0x1, 0x1);
        gbc.writeMem(0xaf66, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xaed6, gbc.sp());
        EXPECT(0xaf68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf66));
        EXPECT(0x1b, gbc.readMem(0xaf67));
        // CB 1B 00FD
        gbc.setState(0x253c, 0xb763, 0x78a0, 0xc790, 0xfd2a, 0x1385, 0x1, 0x0);
        gbc.writeMem(0x253c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xb763, gbc.sp());
        EXPECT(0x253e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00FE
        gbc.setState(0x34a8, 0x45e2, 0x6c80, 0xb256, 0xfd8c, 0x4256, 0x1, 0x1);
        gbc.writeMem(0x34a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x45e2, gbc.sp());
        EXPECT(0x34aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 00FF
        gbc.setState(0xebd9, 0x1e31, 0xf4c0, 0x6f33, 0xf886, 0xa594, 0x0, 0x1);
        gbc.writeMem(0xebd9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x1e31, gbc.sp());
        EXPECT(0xebdb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebd9));
        EXPECT(0x1b, gbc.readMem(0xebda));
        // CB 1B 0100
        gbc.setState(0x84de, 0xa61d, 0xdc40, 0xa687, 0x6f34, 0x64a9, 0x0, 0x0);
        gbc.writeMem(0x84de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xa61d, gbc.sp());
        EXPECT(0x84e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84de));
        EXPECT(0x1b, gbc.readMem(0x84df));
        // CB 1B 0101
        gbc.setState(0xb123, 0x73af, 0xd50, 0xc278, 0x3793, 0x2fd3, 0x0, 0x1);
        gbc.writeMem(0xb123, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x73af, gbc.sp());
        EXPECT(0xb125, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb123));
        EXPECT(0x1b, gbc.readMem(0xb124));
        // CB 1B 0102
        gbc.setState(0x6fd, 0xb7ef, 0x1e0, 0xab5, 0x7959, 0x2a9, 0x1, 0x0);
        gbc.writeMem(0x6fd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xb7ef, gbc.sp());
        EXPECT(0x6ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0103
        gbc.setState(0x9640, 0x5e8e, 0x1950, 0x8e19, 0xe815, 0xf2f1, 0x1, 0x0);
        gbc.writeMem(0x9640, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x5e8e, gbc.sp());
        EXPECT(0x9642, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9640));
        EXPECT(0x1b, gbc.readMem(0x9641));
        // CB 1B 0104
        gbc.setState(0x29a4, 0xec6b, 0x3fc0, 0x48f4, 0xbaa3, 0x4a1, 0x1, 0x0);
        gbc.writeMem(0x29a4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xec6b, gbc.sp());
        EXPECT(0x29a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0105
        gbc.setState(0x2499, 0x28b1, 0xcc60, 0x5281, 0xc73c, 0xafbe, 0x1, 0x0);
        gbc.writeMem(0x2499, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x28b1, gbc.sp());
        EXPECT(0x249b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0106
        gbc.setState(0xc59e, 0x9de7, 0x2650, 0x1146, 0xcdae, 0xf601, 0x0, 0x0);
        gbc.writeMem(0xc59e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x9de7, gbc.sp());
        EXPECT(0xc5a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc59e));
        EXPECT(0x1b, gbc.readMem(0xc59f));
        // CB 1B 0107
        gbc.setState(0x31fc, 0x64c8, 0x4da0, 0x7976, 0xec17, 0x210b, 0x0, 0x1);
        gbc.writeMem(0x31fc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x64c8, gbc.sp());
        EXPECT(0x31fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0108
        gbc.setState(0x75cb, 0x6f0a, 0xf270, 0xf05c, 0xc438, 0x8e0e, 0x1, 0x1);
        gbc.writeMem(0x75cb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x6f0a, gbc.sp());
        EXPECT(0x75cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0109
        gbc.setState(0xd169, 0x68f, 0xe4f0, 0x4f3a, 0xa21f, 0xd59d, 0x0, 0x0);
        gbc.writeMem(0xd169, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x68f, gbc.sp());
        EXPECT(0xd16b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd169));
        EXPECT(0x1b, gbc.readMem(0xd16a));
        // CB 1B 010A
        gbc.setState(0x242e, 0x14c9, 0x92b0, 0x241a, 0x4e7, 0x8def, 0x0, 0x0);
        gbc.writeMem(0x242e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x14c9, gbc.sp());
        EXPECT(0x2430, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 010B
        gbc.setState(0xbe60, 0x440c, 0x17b0, 0x8ada, 0xc564, 0x73ed, 0x1, 0x1);
        gbc.writeMem(0xbe60, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x440c, gbc.sp());
        EXPECT(0xbe62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe60));
        EXPECT(0x1b, gbc.readMem(0xbe61));
        // CB 1B 010C
        gbc.setState(0x20bb, 0x68ba, 0x26f0, 0xe0c0, 0x59c5, 0x83dc, 0x1, 0x0);
        gbc.writeMem(0x20bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x68ba, gbc.sp());
        EXPECT(0x20bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 010D
        gbc.setState(0x5c31, 0xb27e, 0x81a0, 0x4b69, 0x17a4, 0xc2f6, 0x1, 0x1);
        gbc.writeMem(0x5c31, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xb27e, gbc.sp());
        EXPECT(0x5c33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 010E
        gbc.setState(0x46b0, 0x2ea4, 0xa540, 0x1757, 0xc0bb, 0x49bc, 0x0, 0x1);
        gbc.writeMem(0x46b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x2ea4, gbc.sp());
        EXPECT(0x46b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 010F
        gbc.setState(0x813d, 0xc362, 0xadd0, 0xe6d6, 0xbe81, 0x7cce, 0x1, 0x1);
        gbc.writeMem(0x813d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xc362, gbc.sp());
        EXPECT(0x813f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x813d));
        EXPECT(0x1b, gbc.readMem(0x813e));
        // CB 1B 0110
        gbc.setState(0x67a3, 0xa43d, 0xb360, 0xb585, 0xf8fb, 0x3736, 0x1, 0x0);
        gbc.writeMem(0x67a3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xa43d, gbc.sp());
        EXPECT(0x67a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0111
        gbc.setState(0x6773, 0xce80, 0xb260, 0x6187, 0x60a1, 0x36e8, 0x1, 0x1);
        gbc.writeMem(0x6773, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xce80, gbc.sp());
        EXPECT(0x6775, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0112
        gbc.setState(0xfb4, 0xebb4, 0x8e80, 0x342d, 0x4587, 0x454f, 0x1, 0x1);
        gbc.writeMem(0xfb4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xebb4, gbc.sp());
        EXPECT(0xfb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0113
        gbc.setState(0xcb49, 0xa547, 0x6e50, 0x3a9e, 0xce88, 0x2a66, 0x1, 0x1);
        gbc.writeMem(0xcb49, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xa547, gbc.sp());
        EXPECT(0xcb4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb49));
        EXPECT(0x1b, gbc.readMem(0xcb4a));
        // CB 1B 0115
        gbc.setState(0x8679, 0xea61, 0x1290, 0x2d, 0xdada, 0x95dd, 0x1, 0x0);
        gbc.writeMem(0x8679, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xea61, gbc.sp());
        EXPECT(0x867b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8679));
        EXPECT(0x1b, gbc.readMem(0x867a));
        // CB 1B 0116
        gbc.setState(0x156d, 0x2033, 0x210, 0xe882, 0xfc99, 0x7015, 0x0, 0x0);
        gbc.writeMem(0x156d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x2033, gbc.sp());
        EXPECT(0x156f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0117
        gbc.setState(0xba60, 0xd7c9, 0xda70, 0x720f, 0x47b1, 0xae66, 0x0, 0x1);
        gbc.writeMem(0xba60, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xd7c9, gbc.sp());
        EXPECT(0xba62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba60));
        EXPECT(0x1b, gbc.readMem(0xba61));
        // CB 1B 0118
        gbc.setState(0x5dcb, 0x33c8, 0xe1f0, 0x715a, 0xa103, 0xd284, 0x0, 0x0);
        gbc.writeMem(0x5dcb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x33c8, gbc.sp());
        EXPECT(0x5dcd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0119
        gbc.setState(0xa95a, 0xbec6, 0x8510, 0x77da, 0xdf91, 0xa47c, 0x0, 0x0);
        gbc.writeMem(0xa95a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xbec6, gbc.sp());
        EXPECT(0xa95c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa95a));
        EXPECT(0x1b, gbc.readMem(0xa95b));
        // CB 1B 011A
        gbc.setState(0x92bb, 0xb3b9, 0x7300, 0x34a4, 0xa597, 0x357, 0x0, 0x0);
        gbc.writeMem(0x92bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xb3b9, gbc.sp());
        EXPECT(0x92bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92bb));
        EXPECT(0x1b, gbc.readMem(0x92bc));
        // CB 1B 011B
        gbc.setState(0x23e0, 0xb981, 0x4440, 0x9b78, 0xe6e0, 0xef9b, 0x0, 0x0);
        gbc.writeMem(0x23e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xb981, gbc.sp());
        EXPECT(0x23e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 011C
        gbc.setState(0x89e5, 0x2322, 0x9b40, 0xc3f0, 0x4259, 0x6daf, 0x0, 0x1);
        gbc.writeMem(0x89e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x2322, gbc.sp());
        EXPECT(0x89e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89e5));
        EXPECT(0x1b, gbc.readMem(0x89e6));
        // CB 1B 011D
        gbc.setState(0xb0f5, 0x5661, 0x4bd0, 0x83c6, 0xf9b3, 0xf8f0, 0x0, 0x1);
        gbc.writeMem(0xb0f5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x5661, gbc.sp());
        EXPECT(0xb0f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0f5));
        EXPECT(0x1b, gbc.readMem(0xb0f6));
        // CB 1B 011E
        gbc.setState(0xd1f3, 0x7ec5, 0xecd0, 0xe843, 0xd9cc, 0xa05d, 0x1, 0x0);
        gbc.writeMem(0xd1f3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x7ec5, gbc.sp());
        EXPECT(0xd1f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1f3));
        EXPECT(0x1b, gbc.readMem(0xd1f4));
        // CB 1B 011F
        gbc.setState(0xbe5b, 0x8cca, 0x4800, 0x20, 0xcf97, 0x45f1, 0x1, 0x0);
        gbc.writeMem(0xbe5b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x8cca, gbc.sp());
        EXPECT(0xbe5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe5b));
        EXPECT(0x1b, gbc.readMem(0xbe5c));
        // CB 1B 0120
        gbc.setState(0x2d2e, 0x1434, 0x52c0, 0xe68, 0x6c25, 0xf26b, 0x0, 0x1);
        gbc.writeMem(0x2d2e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x1434, gbc.sp());
        EXPECT(0x2d30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0121
        gbc.setState(0x1b43, 0xa623, 0xd2a0, 0xb130, 0x84fc, 0xfeae, 0x0, 0x0);
        gbc.writeMem(0x1b43, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xa623, gbc.sp());
        EXPECT(0x1b45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0122
        gbc.setState(0x2db1, 0x139, 0xb500, 0xa1f8, 0xebd9, 0x5703, 0x1, 0x1);
        gbc.writeMem(0x2db1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x139, gbc.sp());
        EXPECT(0x2db3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0123
        gbc.setState(0x7152, 0x9238, 0x29b0, 0xac21, 0x3035, 0xb043, 0x1, 0x1);
        gbc.writeMem(0x7152, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x9238, gbc.sp());
        EXPECT(0x7154, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0124
        gbc.setState(0xbb2, 0x1b9f, 0x41e0, 0x22d0, 0xfd6c, 0x34c8, 0x1, 0x1);
        gbc.writeMem(0xbb2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x1b9f, gbc.sp());
        EXPECT(0xbb4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0125
        gbc.setState(0xd77f, 0xd86f, 0xcde0, 0xbfd9, 0x9aef, 0x8e91, 0x1, 0x1);
        gbc.writeMem(0xd77f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xd86f, gbc.sp());
        EXPECT(0xd781, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd77f));
        EXPECT(0x1b, gbc.readMem(0xd780));
        // CB 1B 0126
        gbc.setState(0x96f5, 0xa8ba, 0x9520, 0x4e82, 0xb9d3, 0x2dce, 0x0, 0x0);
        gbc.writeMem(0x96f5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xa8ba, gbc.sp());
        EXPECT(0x96f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96f5));
        EXPECT(0x1b, gbc.readMem(0x96f6));
        // CB 1B 0127
        gbc.setState(0x82ab, 0x2b1b, 0xb3d0, 0x5879, 0x812f, 0xa8a0, 0x0, 0x0);
        gbc.writeMem(0x82ab, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x2b1b, gbc.sp());
        EXPECT(0x82ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82ab));
        EXPECT(0x1b, gbc.readMem(0x82ac));
        // CB 1B 0128
        gbc.setState(0x7d8d, 0xae48, 0xb6b0, 0x565a, 0xf6a5, 0x4274, 0x1, 0x1);
        gbc.writeMem(0x7d8d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xae48, gbc.sp());
        EXPECT(0x7d8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0129
        gbc.setState(0xd252, 0x3f80, 0xb460, 0xc1d7, 0xf2a5, 0x95ca, 0x1, 0x1);
        gbc.writeMem(0xd252, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x3f80, gbc.sp());
        EXPECT(0xd254, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd252));
        EXPECT(0x1b, gbc.readMem(0xd253));
        // CB 1B 012A
        gbc.setState(0x8716, 0x9565, 0x6af0, 0xc8d2, 0xc3f2, 0x208b, 0x1, 0x0);
        gbc.writeMem(0x8716, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x9565, gbc.sp());
        EXPECT(0x8718, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8716));
        EXPECT(0x1b, gbc.readMem(0x8717));
        // CB 1B 012B
        gbc.setState(0x26a9, 0x4443, 0xbc30, 0xe4be, 0x3a87, 0xcfbc, 0x0, 0x0);
        gbc.writeMem(0x26a9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x4443, gbc.sp());
        EXPECT(0x26ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 012C
        gbc.setState(0x5c89, 0xc571, 0x5ca0, 0x39ec, 0x49b6, 0x8756, 0x1, 0x0);
        gbc.writeMem(0x5c89, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xc571, gbc.sp());
        EXPECT(0x5c8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 012D
        gbc.setState(0x1a50, 0x5e72, 0xf830, 0x1a7b, 0x52d4, 0x1090, 0x0, 0x1);
        gbc.writeMem(0x1a50, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x5e72, gbc.sp());
        EXPECT(0x1a52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 012E
        gbc.setState(0x4d5b, 0xcc69, 0xb600, 0x1004, 0xfd2, 0x441b, 0x1, 0x1);
        gbc.writeMem(0x4d5b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xcc69, gbc.sp());
        EXPECT(0x4d5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 012F
        gbc.setState(0x96a7, 0xb3fd, 0x2510, 0x2136, 0xef76, 0xe8ec, 0x0, 0x0);
        gbc.writeMem(0x96a7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xb3fd, gbc.sp());
        EXPECT(0x96a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96a7));
        EXPECT(0x1b, gbc.readMem(0x96a8));
        // CB 1B 0130
        gbc.setState(0x9b9b, 0x4a4, 0xe800, 0x9f84, 0xda67, 0x7bef, 0x1, 0x1);
        gbc.writeMem(0x9b9b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x4a4, gbc.sp());
        EXPECT(0x9b9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b9b));
        EXPECT(0x1b, gbc.readMem(0x9b9c));
        // CB 1B 0131
        gbc.setState(0xecd3, 0x8b9a, 0x61c0, 0x99ea, 0x2e9f, 0x2a20, 0x1, 0x0);
        gbc.writeMem(0xecd3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x8b9a, gbc.sp());
        EXPECT(0xecd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecd3));
        EXPECT(0x1b, gbc.readMem(0xecd4));
        // CB 1B 0132
        gbc.setState(0x9350, 0xbf07, 0x1b00, 0xfcfc, 0xcbfb, 0x4a4d, 0x0, 0x1);
        gbc.writeMem(0x9350, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xbf07, gbc.sp());
        EXPECT(0x9352, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9350));
        EXPECT(0x1b, gbc.readMem(0x9351));
        // CB 1B 0133
        gbc.setState(0xcc1e, 0x2d4d, 0xcee0, 0xcce0, 0xf527, 0x8efd, 0x1, 0x1);
        gbc.writeMem(0xcc1e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x2d4d, gbc.sp());
        EXPECT(0xcc20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc1e));
        EXPECT(0x1b, gbc.readMem(0xcc1f));
        // CB 1B 0134
        gbc.setState(0x4f20, 0x24f2, 0xeca0, 0xd744, 0x241b, 0x5929, 0x0, 0x1);
        gbc.writeMem(0x4f20, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x24f2, gbc.sp());
        EXPECT(0x4f22, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0135
        gbc.setState(0xb3b7, 0x810e, 0xce30, 0x7c84, 0x8ee6, 0xbc29, 0x0, 0x1);
        gbc.writeMem(0xb3b7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x810e, gbc.sp());
        EXPECT(0xb3b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3b7));
        EXPECT(0x1b, gbc.readMem(0xb3b8));
        // CB 1B 0136
        gbc.setState(0x9fc, 0x4d3e, 0x4970, 0xc962, 0xc9e9, 0x3f9b, 0x0, 0x1);
        gbc.writeMem(0x9fc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x4d3e, gbc.sp());
        EXPECT(0x9fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0137
        gbc.setState(0x29b7, 0xa8c1, 0xc1a0, 0x51f8, 0x50c5, 0xd664, 0x1, 0x1);
        gbc.writeMem(0x29b7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xa8c1, gbc.sp());
        EXPECT(0x29b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0138
        gbc.setState(0xe777, 0x77d, 0xa480, 0xa0a, 0xc847, 0x1763, 0x1, 0x1);
        gbc.writeMem(0xe777, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x77d, gbc.sp());
        EXPECT(0xe779, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe777));
        EXPECT(0x1b, gbc.readMem(0xe778));
        // CB 1B 0139
        gbc.setState(0x7f68, 0xb679, 0x78b0, 0x53f5, 0xb52d, 0x8a2d, 0x0, 0x0);
        gbc.writeMem(0x7f68, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xb679, gbc.sp());
        EXPECT(0x7f6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 013A
        gbc.setState(0xd6c8, 0xbae7, 0x4380, 0xf4ca, 0xfa3b, 0x6dcb, 0x0, 0x1);
        gbc.writeMem(0xd6c8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xbae7, gbc.sp());
        EXPECT(0xd6ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6c8));
        EXPECT(0x1b, gbc.readMem(0xd6c9));
        // CB 1B 013B
        gbc.setState(0x9cad, 0xfd8b, 0xe4b0, 0xd32d, 0x3f50, 0xd412, 0x1, 0x1);
        gbc.writeMem(0x9cad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xfd8b, gbc.sp());
        EXPECT(0x9caf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cad));
        EXPECT(0x1b, gbc.readMem(0x9cae));
        // CB 1B 013C
        gbc.setState(0x2b8a, 0xd38a, 0xdf0, 0xe3b9, 0x56a9, 0xac89, 0x0, 0x1);
        gbc.writeMem(0x2b8a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xd38a, gbc.sp());
        EXPECT(0x2b8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 013E
        gbc.setState(0xa7b0, 0xf3cd, 0xecf0, 0x4a70, 0x296a, 0xbfc8, 0x1, 0x1);
        gbc.writeMem(0xa7b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xf3cd, gbc.sp());
        EXPECT(0xa7b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7b0));
        EXPECT(0x1b, gbc.readMem(0xa7b1));
        // CB 1B 013F
        gbc.setState(0x4f8b, 0x4c7b, 0xe0c0, 0x2c2c, 0x4e0e, 0xe443, 0x0, 0x0);
        gbc.writeMem(0x4f8b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x4c7b, gbc.sp());
        EXPECT(0x4f8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0140
        gbc.setState(0xb51e, 0xe2f1, 0x3e20, 0x59f8, 0x5f66, 0x2202, 0x0, 0x1);
        gbc.writeMem(0xb51e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xe2f1, gbc.sp());
        EXPECT(0xb520, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb51e));
        EXPECT(0x1b, gbc.readMem(0xb51f));
        // CB 1B 0141
        gbc.setState(0x2a86, 0x6022, 0xe540, 0xf532, 0xb050, 0x78d2, 0x0, 0x0);
        gbc.writeMem(0x2a86, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x6022, gbc.sp());
        EXPECT(0x2a88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0142
        gbc.setState(0x906a, 0xd5d6, 0x3e40, 0xb039, 0x9a54, 0x6414, 0x0, 0x1);
        gbc.writeMem(0x906a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xd5d6, gbc.sp());
        EXPECT(0x906c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x906a));
        EXPECT(0x1b, gbc.readMem(0x906b));
        // CB 1B 0143
        gbc.setState(0xb245, 0xa499, 0x21c0, 0x794e, 0xe01c, 0xee08, 0x0, 0x1);
        gbc.writeMem(0xb245, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xa499, gbc.sp());
        EXPECT(0xb247, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb245));
        EXPECT(0x1b, gbc.readMem(0xb246));
        // CB 1B 0144
        gbc.setState(0x7bc7, 0x61e1, 0x2720, 0xd140, 0xd643, 0x82d6, 0x0, 0x0);
        gbc.writeMem(0x7bc7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x61e1, gbc.sp());
        EXPECT(0x7bc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0145
        gbc.setState(0xc940, 0x5b8d, 0xcf30, 0xdf1e, 0x9e3, 0x6c37, 0x1, 0x0);
        gbc.writeMem(0xc940, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x5b8d, gbc.sp());
        EXPECT(0xc942, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc940));
        EXPECT(0x1b, gbc.readMem(0xc941));
        // CB 1B 0146
        gbc.setState(0xd853, 0xff8, 0xa740, 0x75b4, 0x8, 0xe9b5, 0x1, 0x0);
        gbc.writeMem(0xd853, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xff8, gbc.sp());
        EXPECT(0xd855, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd853));
        EXPECT(0x1b, gbc.readMem(0xd854));
        // CB 1B 0147
        gbc.setState(0x2658, 0xdfa7, 0x4450, 0x52ce, 0xa060, 0xc4e0, 0x0, 0x0);
        gbc.writeMem(0x2658, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xdfa7, gbc.sp());
        EXPECT(0x265a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0148
        gbc.setState(0x8c81, 0xac69, 0xa490, 0x18da, 0x6ea1, 0x582c, 0x1, 0x1);
        gbc.writeMem(0x8c81, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xac69, gbc.sp());
        EXPECT(0x8c83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c81));
        EXPECT(0x1b, gbc.readMem(0x8c82));
        // CB 1B 0149
        gbc.setState(0xcf4c, 0x7cc8, 0x3410, 0x8b64, 0x571c, 0xbb13, 0x1, 0x1);
        gbc.writeMem(0xcf4c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x7cc8, gbc.sp());
        EXPECT(0xcf4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf4c));
        EXPECT(0x1b, gbc.readMem(0xcf4d));
        // CB 1B 014A
        gbc.setState(0x6220, 0x3dd0, 0x2700, 0x828c, 0xdeb4, 0xdd55, 0x1, 0x1);
        gbc.writeMem(0x6220, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x3dd0, gbc.sp());
        EXPECT(0x6222, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 014B
        gbc.setState(0x2e17, 0x8b1, 0x98b0, 0xeaec, 0x33a2, 0x6a6b, 0x1, 0x0);
        gbc.writeMem(0x2e17, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x8b1, gbc.sp());
        EXPECT(0x2e19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 014C
        gbc.setState(0x5b97, 0x840c, 0xda60, 0x1194, 0x97e9, 0x45e6, 0x0, 0x1);
        gbc.writeMem(0x5b97, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x840c, gbc.sp());
        EXPECT(0x5b99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 014D
        gbc.setState(0x77b0, 0xee52, 0x1990, 0x5664, 0x4344, 0x5640, 0x0, 0x0);
        gbc.writeMem(0x77b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xee52, gbc.sp());
        EXPECT(0x77b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 014E
        gbc.setState(0x4a64, 0x60a9, 0x9480, 0xbb64, 0xd295, 0x4aee, 0x0, 0x1);
        gbc.writeMem(0x4a64, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x60a9, gbc.sp());
        EXPECT(0x4a66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0150
        gbc.setState(0x5d79, 0xb026, 0x8900, 0x281e, 0xf43c, 0xa300, 0x0, 0x1);
        gbc.writeMem(0x5d79, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xb026, gbc.sp());
        EXPECT(0x5d7b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0151
        gbc.setState(0xdeb5, 0x321b, 0x9980, 0x563b, 0x8380, 0xfe8a, 0x0, 0x1);
        gbc.writeMem(0xdeb5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x321b, gbc.sp());
        EXPECT(0xdeb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdeb5));
        EXPECT(0x1b, gbc.readMem(0xdeb6));
        // CB 1B 0152
        gbc.setState(0x6dac, 0x7579, 0xac00, 0x7ce, 0x6ae9, 0x5077, 0x1, 0x0);
        gbc.writeMem(0x6dac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x7579, gbc.sp());
        EXPECT(0x6dae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0153
        gbc.setState(0x24eb, 0x80cb, 0x31d0, 0x5d24, 0xcac8, 0x4925, 0x0, 0x0);
        gbc.writeMem(0x24eb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x80cb, gbc.sp());
        EXPECT(0x24ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0154
        gbc.setState(0xafe2, 0x5be0, 0xe7d0, 0xbd7e, 0x3328, 0x4f2c, 0x0, 0x0);
        gbc.writeMem(0xafe2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x5be0, gbc.sp());
        EXPECT(0xafe4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafe2));
        EXPECT(0x1b, gbc.readMem(0xafe3));
        // CB 1B 0155
        gbc.setState(0xdd05, 0xb355, 0xf510, 0x1baf, 0xc1ff, 0x3b8d, 0x0, 0x0);
        gbc.writeMem(0xdd05, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xb355, gbc.sp());
        EXPECT(0xdd07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd05));
        EXPECT(0x1b, gbc.readMem(0xdd06));
        // CB 1B 0157
        gbc.setState(0x682d, 0xabf9, 0x53b0, 0x331f, 0xb866, 0xcd92, 0x0, 0x1);
        gbc.writeMem(0x682d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xabf9, gbc.sp());
        EXPECT(0x682f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0158
        gbc.setState(0xf02, 0xd218, 0xb8e0, 0x6e30, 0xd356, 0x9f69, 0x1, 0x1);
        gbc.writeMem(0xf02, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xd218, gbc.sp());
        EXPECT(0xf04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0159
        gbc.setState(0xe246, 0xf61b, 0x2560, 0x5685, 0xa760, 0x15aa, 0x1, 0x1);
        gbc.writeMem(0xe246, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xf61b, gbc.sp());
        EXPECT(0xe248, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe246));
        EXPECT(0x1b, gbc.readMem(0xe247));
        // CB 1B 015A
        gbc.setState(0x2f61, 0xaa67, 0xc380, 0xcee3, 0xdf13, 0x71db, 0x1, 0x0);
        gbc.writeMem(0x2f61, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xaa67, gbc.sp());
        EXPECT(0x2f63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 015B
        gbc.setState(0xb6e7, 0x7d96, 0xe310, 0x77b3, 0x542e, 0x4d4a, 0x0, 0x0);
        gbc.writeMem(0xb6e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x7d96, gbc.sp());
        EXPECT(0xb6e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6e7));
        EXPECT(0x1b, gbc.readMem(0xb6e8));
        // CB 1B 015C
        gbc.setState(0x6fd3, 0x46e9, 0xfc80, 0xa1bb, 0x3d3d, 0x67d9, 0x1, 0x0);
        gbc.writeMem(0x6fd3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x46e9, gbc.sp());
        EXPECT(0x6fd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 015E
        gbc.setState(0x72d8, 0xd3e5, 0x2280, 0xfbd1, 0xf3fb, 0x775e, 0x1, 0x0);
        gbc.writeMem(0x72d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xd3e5, gbc.sp());
        EXPECT(0x72da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 015F
        gbc.setState(0x78da, 0xfbd8, 0xff90, 0x322a, 0x8e84, 0xc199, 0x1, 0x0);
        gbc.writeMem(0x78da, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xfbd8, gbc.sp());
        EXPECT(0x78dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0160
        gbc.setState(0x49b7, 0x78c3, 0x8a00, 0xcc13, 0xdf73, 0x2cec, 0x0, 0x0);
        gbc.writeMem(0x49b7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x78c3, gbc.sp());
        EXPECT(0x49b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0161
        gbc.setState(0x572b, 0x6882, 0x5e30, 0x8f2, 0xc14b, 0x9fd6, 0x1, 0x1);
        gbc.writeMem(0x572b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x6882, gbc.sp());
        EXPECT(0x572d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0162
        gbc.setState(0x931e, 0xfc38, 0x85f0, 0x15f9, 0xdc4, 0x909f, 0x1, 0x1);
        gbc.writeMem(0x931e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xfc38, gbc.sp());
        EXPECT(0x9320, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x931e));
        EXPECT(0x1b, gbc.readMem(0x931f));
        // CB 1B 0163
        gbc.setState(0xc290, 0xf2fa, 0x5800, 0x101b, 0x4da, 0x73ab, 0x0, 0x0);
        gbc.writeMem(0xc290, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xf2fa, gbc.sp());
        EXPECT(0xc292, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc290));
        EXPECT(0x1b, gbc.readMem(0xc291));
        // CB 1B 0164
        gbc.setState(0x9a9c, 0xdf62, 0xc2b0, 0xe240, 0xc95b, 0x630a, 0x1, 0x1);
        gbc.writeMem(0x9a9c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xdf62, gbc.sp());
        EXPECT(0x9a9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a9c));
        EXPECT(0x1b, gbc.readMem(0x9a9d));
        // CB 1B 0165
        gbc.setState(0x431e, 0xf8a1, 0x3d50, 0x8adc, 0x6487, 0x8da6, 0x0, 0x0);
        gbc.writeMem(0x431e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xf8a1, gbc.sp());
        EXPECT(0x4320, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0166
        gbc.setState(0x26b, 0x1322, 0x8420, 0x1071, 0x211b, 0xf65f, 0x0, 0x0);
        gbc.writeMem(0x26b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x1322, gbc.sp());
        EXPECT(0x26d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0167
        gbc.setState(0xecda, 0x40cf, 0x930, 0x2f6, 0x4d56, 0x1ceb, 0x0, 0x1);
        gbc.writeMem(0xecda, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x40cf, gbc.sp());
        EXPECT(0xecdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecda));
        EXPECT(0x1b, gbc.readMem(0xecdb));
        // CB 1B 0168
        gbc.setState(0xd125, 0xe4aa, 0x62b0, 0x54ef, 0x9834, 0x9b25, 0x0, 0x1);
        gbc.writeMem(0xd125, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xe4aa, gbc.sp());
        EXPECT(0xd127, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd125));
        EXPECT(0x1b, gbc.readMem(0xd126));
        // CB 1B 0169
        gbc.setState(0x490a, 0x6671, 0x6f40, 0xcb6, 0xe3b2, 0x1875, 0x1, 0x1);
        gbc.writeMem(0x490a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x6671, gbc.sp());
        EXPECT(0x490c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 016A
        gbc.setState(0x87e7, 0x6c28, 0x7180, 0x6e73, 0x6dcf, 0x6c63, 0x0, 0x0);
        gbc.writeMem(0x87e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x6c28, gbc.sp());
        EXPECT(0x87e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87e7));
        EXPECT(0x1b, gbc.readMem(0x87e8));
        // CB 1B 016B
        gbc.setState(0x397d, 0xaa31, 0x4d40, 0x9dd6, 0x9bd, 0x3d05, 0x1, 0x1);
        gbc.writeMem(0x397d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xaa31, gbc.sp());
        EXPECT(0x397f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 016D
        gbc.setState(0xb643, 0xea30, 0x9f60, 0xe739, 0x3521, 0xe0e0, 0x1, 0x1);
        gbc.writeMem(0xb643, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xea30, gbc.sp());
        EXPECT(0xb645, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb643));
        EXPECT(0x1b, gbc.readMem(0xb644));
        // CB 1B 016E
        gbc.setState(0x6865, 0x87f1, 0x4c0, 0x6ce2, 0xf14, 0x3bec, 0x1, 0x1);
        gbc.writeMem(0x6865, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x87f1, gbc.sp());
        EXPECT(0x6867, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 016F
        gbc.setState(0x9994, 0xaa7a, 0x90d0, 0xb9de, 0x9f8b, 0xf98, 0x1, 0x1);
        gbc.writeMem(0x9994, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xaa7a, gbc.sp());
        EXPECT(0x9996, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9994));
        EXPECT(0x1b, gbc.readMem(0x9995));
        // CB 1B 0170
        gbc.setState(0x1a48, 0xdccc, 0x9940, 0xc66f, 0x2a51, 0x680c, 0x1, 0x1);
        gbc.writeMem(0x1a48, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xdccc, gbc.sp());
        EXPECT(0x1a4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0171
        gbc.setState(0x931e, 0x94bb, 0x6720, 0x8798, 0x4e14, 0xb7bb, 0x1, 0x0);
        gbc.writeMem(0x931e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x94bb, gbc.sp());
        EXPECT(0x9320, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x931e));
        EXPECT(0x1b, gbc.readMem(0x931f));
        // CB 1B 0172
        gbc.setState(0x18fb, 0x3286, 0xe6f0, 0x50c9, 0x861, 0x33c4, 0x1, 0x1);
        gbc.writeMem(0x18fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x3286, gbc.sp());
        EXPECT(0x18fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0173
        gbc.setState(0x9271, 0x3b23, 0x9530, 0xc954, 0x5a39, 0xe0cb, 0x0, 0x0);
        gbc.writeMem(0x9271, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x3b23, gbc.sp());
        EXPECT(0x9273, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9271));
        EXPECT(0x1b, gbc.readMem(0x9272));
        // CB 1B 0175
        gbc.setState(0x92c3, 0x63a0, 0xcf0, 0xd394, 0xf584, 0x7cb5, 0x1, 0x0);
        gbc.writeMem(0x92c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x63a0, gbc.sp());
        EXPECT(0x92c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92c3));
        EXPECT(0x1b, gbc.readMem(0x92c4));
        // CB 1B 0176
        gbc.setState(0x33b2, 0x677a, 0x15a0, 0xffe7, 0x2941, 0xd1ae, 0x1, 0x1);
        gbc.writeMem(0x33b2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x677a, gbc.sp());
        EXPECT(0x33b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0177
        gbc.setState(0xcd62, 0xc12b, 0x27e0, 0xf3a3, 0x1a73, 0x3d89, 0x1, 0x0);
        gbc.writeMem(0xcd62, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xc12b, gbc.sp());
        EXPECT(0xcd64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd62));
        EXPECT(0x1b, gbc.readMem(0xcd63));
        // CB 1B 0178
        gbc.setState(0x1511, 0xcc2a, 0x1b50, 0xc40b, 0xf095, 0x6cf9, 0x1, 0x1);
        gbc.writeMem(0x1511, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xcc2a, gbc.sp());
        EXPECT(0x1513, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0179
        gbc.setState(0xb3f8, 0x4f4d, 0x4580, 0x3774, 0xc9b3, 0xa6c6, 0x0, 0x1);
        gbc.writeMem(0xb3f8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x4f4d, gbc.sp());
        EXPECT(0xb3fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3f8));
        EXPECT(0x1b, gbc.readMem(0xb3f9));
        // CB 1B 017A
        gbc.setState(0xc751, 0xa756, 0x8240, 0x9a6c, 0x50af, 0x48aa, 0x1, 0x0);
        gbc.writeMem(0xc751, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xa756, gbc.sp());
        EXPECT(0xc753, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc751));
        EXPECT(0x1b, gbc.readMem(0xc752));
        // CB 1B 017B
        gbc.setState(0x19d8, 0xdc00, 0xc130, 0xf204, 0x9b4b, 0x50a, 0x0, 0x1);
        gbc.writeMem(0x19d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xdc00, gbc.sp());
        EXPECT(0x19da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 017C
        gbc.setState(0x5ecd, 0x9afb, 0xcf20, 0xd535, 0xb4d4, 0x1148, 0x0, 0x0);
        gbc.writeMem(0x5ecd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x9afb, gbc.sp());
        EXPECT(0x5ecf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 017D
        gbc.setState(0xa2bb, 0x7a32, 0x33f0, 0x6caa, 0x97e8, 0x4fa6, 0x1, 0x1);
        gbc.writeMem(0xa2bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x7a32, gbc.sp());
        EXPECT(0xa2bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2bb));
        EXPECT(0x1b, gbc.readMem(0xa2bc));
        // CB 1B 017E
        gbc.setState(0x3c49, 0xa16a, 0x1d10, 0x96cc, 0x65df, 0xc4ae, 0x1, 0x1);
        gbc.writeMem(0x3c49, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xa16a, gbc.sp());
        EXPECT(0x3c4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 017F
        gbc.setState(0xe2fe, 0xe356, 0x1630, 0x9576, 0x38fa, 0x562, 0x0, 0x0);
        gbc.writeMem(0xe2fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xe356, gbc.sp());
        EXPECT(0xe300, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2fe));
        EXPECT(0x1b, gbc.readMem(0xe2ff));
        // CB 1B 0180
        gbc.setState(0x7618, 0x2e6e, 0xc850, 0x6ea1, 0x1aa2, 0x3161, 0x1, 0x0);
        gbc.writeMem(0x7618, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x2e6e, gbc.sp());
        EXPECT(0x761a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0182
        gbc.setState(0xeadf, 0x8092, 0x4f60, 0x6d0c, 0x3f6f, 0xd152, 0x1, 0x1);
        gbc.writeMem(0xeadf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x8092, gbc.sp());
        EXPECT(0xeae1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeadf));
        EXPECT(0x1b, gbc.readMem(0xeae0));
        // CB 1B 0183
        gbc.setState(0x73cc, 0xa50, 0x3ca0, 0x73b3, 0x8156, 0x5247, 0x1, 0x1);
        gbc.writeMem(0x73cc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xa50, gbc.sp());
        EXPECT(0x73ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0184
        gbc.setState(0x74f2, 0xd973, 0x43d0, 0x3e3f, 0xda15, 0x7fa1, 0x0, 0x1);
        gbc.writeMem(0x74f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xd973, gbc.sp());
        EXPECT(0x74f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0185
        gbc.setState(0x2370, 0x7dec, 0x3870, 0xa6e5, 0x7cb8, 0xbeae, 0x0, 0x0);
        gbc.writeMem(0x2370, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x7dec, gbc.sp());
        EXPECT(0x2372, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0186
        gbc.setState(0xafc9, 0x293b, 0x7e80, 0x82e5, 0x73e5, 0x7e6d, 0x0, 0x0);
        gbc.writeMem(0xafc9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x293b, gbc.sp());
        EXPECT(0xafcb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafc9));
        EXPECT(0x1b, gbc.readMem(0xafca));
        // CB 1B 0187
        gbc.setState(0x394d, 0x4c1c, 0xe010, 0x228, 0xd9ff, 0x2a0e, 0x0, 0x0);
        gbc.writeMem(0x394d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x4c1c, gbc.sp());
        EXPECT(0x394f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0188
        gbc.setState(0xb444, 0x544f, 0x8220, 0x9ac5, 0x313c, 0x8a81, 0x0, 0x1);
        gbc.writeMem(0xb444, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x544f, gbc.sp());
        EXPECT(0xb446, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb444));
        EXPECT(0x1b, gbc.readMem(0xb445));
        // CB 1B 0189
        gbc.setState(0x3645, 0x12f8, 0x94b0, 0xbad7, 0xa2bd, 0xf77e, 0x0, 0x0);
        gbc.writeMem(0x3645, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x12f8, gbc.sp());
        EXPECT(0x3647, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 018A
        gbc.setState(0xaa91, 0x48a8, 0x570, 0x21a2, 0xa52b, 0xf549, 0x1, 0x0);
        gbc.writeMem(0xaa91, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x48a8, gbc.sp());
        EXPECT(0xaa93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa91));
        EXPECT(0x1b, gbc.readMem(0xaa92));
        // CB 1B 018B
        gbc.setState(0x485d, 0x61ca, 0xe6b0, 0x2f52, 0xe3b0, 0x92d1, 0x0, 0x0);
        gbc.writeMem(0x485d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x61ca, gbc.sp());
        EXPECT(0x485f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 018C
        gbc.setState(0x2013, 0xb5aa, 0xc680, 0x5db5, 0xffde, 0x3ae1, 0x0, 0x0);
        gbc.writeMem(0x2013, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xb5aa, gbc.sp());
        EXPECT(0x2015, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 018D
        gbc.setState(0x732, 0x4fad, 0xf140, 0x93f5, 0x3266, 0x453c, 0x1, 0x1);
        gbc.writeMem(0x732, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x4fad, gbc.sp());
        EXPECT(0x734, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 018E
        gbc.setState(0x6d90, 0x1e04, 0x5580, 0x111e, 0x6a9d, 0xeb5a, 0x1, 0x1);
        gbc.writeMem(0x6d90, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x1e04, gbc.sp());
        EXPECT(0x6d92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 018F
        gbc.setState(0xabbd, 0x4941, 0xe130, 0x3133, 0x2620, 0x9cd0, 0x1, 0x1);
        gbc.writeMem(0xabbd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x4941, gbc.sp());
        EXPECT(0xabbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabbd));
        EXPECT(0x1b, gbc.readMem(0xabbe));
        // CB 1B 0191
        gbc.setState(0xac57, 0xa129, 0xbd60, 0xe89d, 0xa80b, 0x1ccf, 0x1, 0x1);
        gbc.writeMem(0xac57, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xa129, gbc.sp());
        EXPECT(0xac59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac57));
        EXPECT(0x1b, gbc.readMem(0xac58));
        // CB 1B 0192
        gbc.setState(0x5dbc, 0x6b67, 0x77c0, 0xaad5, 0x58fc, 0x37ba, 0x1, 0x1);
        gbc.writeMem(0x5dbc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x6b67, gbc.sp());
        EXPECT(0x5dbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0193
        gbc.setState(0x1bb6, 0x1703, 0x2b10, 0x4766, 0xba24, 0xf6f8, 0x0, 0x1);
        gbc.writeMem(0x1bb6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x1703, gbc.sp());
        EXPECT(0x1bb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0194
        gbc.setState(0x40f, 0x6750, 0xbe20, 0xb0b5, 0xb9c9, 0x5f68, 0x0, 0x1);
        gbc.writeMem(0x40f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x6750, gbc.sp());
        EXPECT(0x411, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0195
        gbc.setState(0x552d, 0x1d7c, 0xf370, 0x740b, 0x3c0c, 0x3eb1, 0x0, 0x1);
        gbc.writeMem(0x552d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x1d7c, gbc.sp());
        EXPECT(0x552f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0196
        gbc.setState(0x560c, 0x58e9, 0x2240, 0x2aab, 0x9ff2, 0x21, 0x0, 0x0);
        gbc.writeMem(0x560c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x58e9, gbc.sp());
        EXPECT(0x560e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0197
        gbc.setState(0xe9ac, 0x9441, 0xe050, 0x5cef, 0x3151, 0xe853, 0x1, 0x0);
        gbc.writeMem(0xe9ac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x9441, gbc.sp());
        EXPECT(0xe9ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9ac));
        EXPECT(0x1b, gbc.readMem(0xe9ad));
        // CB 1B 0198
        gbc.setState(0x2cf5, 0x210d, 0xd390, 0x9c18, 0x9326, 0xf1f8, 0x0, 0x0);
        gbc.writeMem(0x2cf5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x210d, gbc.sp());
        EXPECT(0x2cf7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 019C
        gbc.setState(0xd196, 0x4218, 0xdab0, 0x39e6, 0xc3e2, 0xefd2, 0x1, 0x1);
        gbc.writeMem(0xd196, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x4218, gbc.sp());
        EXPECT(0xd198, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd196));
        EXPECT(0x1b, gbc.readMem(0xd197));
        // CB 1B 019D
        gbc.setState(0x944a, 0xaa85, 0x470, 0x6a19, 0xf5ff, 0x28d9, 0x1, 0x1);
        gbc.writeMem(0x944a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xaa85, gbc.sp());
        EXPECT(0x944c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x944a));
        EXPECT(0x1b, gbc.readMem(0x944b));
        // CB 1B 019E
        gbc.setState(0xce22, 0x6c05, 0x8010, 0x5772, 0xa691, 0x7f6b, 0x1, 0x1);
        gbc.writeMem(0xce22, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x6c05, gbc.sp());
        EXPECT(0xce24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce22));
        EXPECT(0x1b, gbc.readMem(0xce23));
        // CB 1B 019F
        gbc.setState(0xe70f, 0x7c98, 0xb920, 0xb3fa, 0xaa24, 0x7497, 0x1, 0x0);
        gbc.writeMem(0xe70f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x7c98, gbc.sp());
        EXPECT(0xe711, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe70f));
        EXPECT(0x1b, gbc.readMem(0xe710));
        // CB 1B 01A0
        gbc.setState(0x43ce, 0x8269, 0xd880, 0x794d, 0x5a03, 0x6272, 0x0, 0x1);
        gbc.writeMem(0x43ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x8269, gbc.sp());
        EXPECT(0x43d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01A1
        gbc.setState(0xed2f, 0x9b10, 0xca20, 0xacaa, 0x7020, 0x908c, 0x1, 0x0);
        gbc.writeMem(0xed2f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x9b10, gbc.sp());
        EXPECT(0xed31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed2f));
        EXPECT(0x1b, gbc.readMem(0xed30));
        // CB 1B 01A2
        gbc.setState(0x5e06, 0x2895, 0xd7b0, 0xfea, 0xb4d, 0x39c6, 0x0, 0x1);
        gbc.writeMem(0x5e06, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x2895, gbc.sp());
        EXPECT(0x5e08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01A3
        gbc.setState(0x6140, 0x32e2, 0x6d0, 0xb6fa, 0x3857, 0x12fd, 0x1, 0x0);
        gbc.writeMem(0x6140, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x32e2, gbc.sp());
        EXPECT(0x6142, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01A4
        gbc.setState(0x15ce, 0x598b, 0x30a0, 0x8429, 0x8d2d, 0xf3b4, 0x1, 0x1);
        gbc.writeMem(0x15ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x598b, gbc.sp());
        EXPECT(0x15d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01A5
        gbc.setState(0x7a75, 0xc929, 0xa240, 0xe7cc, 0xa1a2, 0xec3e, 0x0, 0x0);
        gbc.writeMem(0x7a75, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xc929, gbc.sp());
        EXPECT(0x7a77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01A6
        gbc.setState(0x18f5, 0xec4f, 0xa720, 0x599a, 0x162f, 0xdcf5, 0x0, 0x0);
        gbc.writeMem(0x18f5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xec4f, gbc.sp());
        EXPECT(0x18f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01A8
        gbc.setState(0x3200, 0x163e, 0xf380, 0x5bc3, 0x52fb, 0xf868, 0x1, 0x0);
        gbc.writeMem(0x3200, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x163e, gbc.sp());
        EXPECT(0x3202, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01A9
        gbc.setState(0x11e5, 0xad54, 0xf2b0, 0xc5fc, 0x77e6, 0x5a1c, 0x1, 0x0);
        gbc.writeMem(0x11e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xad54, gbc.sp());
        EXPECT(0x11e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01AB
        gbc.setState(0x4dc2, 0x42be, 0xee00, 0xccfd, 0xa894, 0x308e, 0x1, 0x0);
        gbc.writeMem(0x4dc2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x42be, gbc.sp());
        EXPECT(0x4dc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01AC
        gbc.setState(0xa44c, 0xd109, 0x8e90, 0xeb4, 0xccb5, 0x1f2b, 0x1, 0x1);
        gbc.writeMem(0xa44c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xd109, gbc.sp());
        EXPECT(0xa44e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa44c));
        EXPECT(0x1b, gbc.readMem(0xa44d));
        // CB 1B 01AD
        gbc.setState(0xa939, 0x4800, 0xd050, 0xdf21, 0x61c4, 0xfc69, 0x1, 0x0);
        gbc.writeMem(0xa939, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x4800, gbc.sp());
        EXPECT(0xa93b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa939));
        EXPECT(0x1b, gbc.readMem(0xa93a));
        // CB 1B 01AE
        gbc.setState(0xc28e, 0x2d21, 0xc740, 0x8919, 0x9da3, 0x552a, 0x1, 0x0);
        gbc.writeMem(0xc28e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x2d21, gbc.sp());
        EXPECT(0xc290, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc28e));
        EXPECT(0x1b, gbc.readMem(0xc28f));
        // CB 1B 01AF
        gbc.setState(0x5883, 0x6e62, 0xd660, 0xa4be, 0x9fbd, 0x4000, 0x1, 0x0);
        gbc.writeMem(0x5883, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x6e62, gbc.sp());
        EXPECT(0x5885, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01B0
        gbc.setState(0x8bc7, 0x34db, 0x70c0, 0x117b, 0xc5a9, 0x1a24, 0x1, 0x1);
        gbc.writeMem(0x8bc7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x34db, gbc.sp());
        EXPECT(0x8bc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bc7));
        EXPECT(0x1b, gbc.readMem(0x8bc8));
        // CB 1B 01B1
        gbc.setState(0xadc1, 0x9f7b, 0xe860, 0xbe08, 0xe36e, 0x7164, 0x0, 0x0);
        gbc.writeMem(0xadc1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x9f7b, gbc.sp());
        EXPECT(0xadc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadc1));
        EXPECT(0x1b, gbc.readMem(0xadc2));
        // CB 1B 01B2
        gbc.setState(0xd1dc, 0x256e, 0x7470, 0xdf82, 0xbcd, 0x6c6d, 0x0, 0x1);
        gbc.writeMem(0xd1dc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x256e, gbc.sp());
        EXPECT(0xd1de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1dc));
        EXPECT(0x1b, gbc.readMem(0xd1dd));
        // CB 1B 01B3
        gbc.setState(0x4074, 0xd00a, 0x3c80, 0xfbc6, 0xe8ab, 0x2df4, 0x0, 0x1);
        gbc.writeMem(0x4074, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xd00a, gbc.sp());
        EXPECT(0x4076, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01B4
        gbc.setState(0x59d5, 0xec34, 0x2fc0, 0xc3f9, 0xec9c, 0xfede, 0x0, 0x1);
        gbc.writeMem(0x59d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xec34, gbc.sp());
        EXPECT(0x59d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01B5
        gbc.setState(0xa6e7, 0xf8ed, 0xc740, 0xba1, 0x42a4, 0x249, 0x0, 0x1);
        gbc.writeMem(0xa6e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xf8ed, gbc.sp());
        EXPECT(0xa6e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6e7));
        EXPECT(0x1b, gbc.readMem(0xa6e8));
        // CB 1B 01B6
        gbc.setState(0x5714, 0x8253, 0x9220, 0xedc4, 0x6239, 0x4ba6, 0x1, 0x0);
        gbc.writeMem(0x5714, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x8253, gbc.sp());
        EXPECT(0x5716, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01B7
        gbc.setState(0xcbde, 0x16cc, 0x6f80, 0x17d3, 0xb6c5, 0x6138, 0x1, 0x0);
        gbc.writeMem(0xcbde, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x16cc, gbc.sp());
        EXPECT(0xcbe0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbde));
        EXPECT(0x1b, gbc.readMem(0xcbdf));
        // CB 1B 01B8
        gbc.setState(0x50a6, 0xb628, 0xb110, 0x4ff5, 0x7f0, 0x7df4, 0x1, 0x1);
        gbc.writeMem(0x50a6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xb628, gbc.sp());
        EXPECT(0x50a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01B9
        gbc.setState(0x2ec6, 0x4f2d, 0xa4a0, 0x4190, 0xe37e, 0x5e94, 0x1, 0x1);
        gbc.writeMem(0x2ec6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x4f2d, gbc.sp());
        EXPECT(0x2ec8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01BA
        gbc.setState(0x2a3f, 0xfdb2, 0x7050, 0xd04, 0x32f6, 0xa122, 0x1, 0x0);
        gbc.writeMem(0x2a3f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xfdb2, gbc.sp());
        EXPECT(0x2a41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01BB
        gbc.setState(0x7e0b, 0x3261, 0x1870, 0xa9c6, 0x7f28, 0xb614, 0x1, 0x0);
        gbc.writeMem(0x7e0b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x3261, gbc.sp());
        EXPECT(0x7e0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01BC
        gbc.setState(0xd8ad, 0x4350, 0xc990, 0x2535, 0x1695, 0x35b4, 0x0, 0x0);
        gbc.writeMem(0xd8ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x4350, gbc.sp());
        EXPECT(0xd8af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8ad));
        EXPECT(0x1b, gbc.readMem(0xd8ae));
        // CB 1B 01BD
        gbc.setState(0xab1c, 0x62ec, 0x6090, 0xcbb1, 0x686e, 0x873f, 0x1, 0x1);
        gbc.writeMem(0xab1c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x62ec, gbc.sp());
        EXPECT(0xab1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab1c));
        EXPECT(0x1b, gbc.readMem(0xab1d));
        // CB 1B 01BE
        gbc.setState(0x2269, 0x2565, 0x7410, 0x262f, 0xc691, 0xa6a6, 0x0, 0x1);
        gbc.writeMem(0x2269, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x2565, gbc.sp());
        EXPECT(0x226b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01BF
        gbc.setState(0xccac, 0x7f26, 0xe5f0, 0xcacc, 0x2d84, 0x8fcc, 0x0, 0x1);
        gbc.writeMem(0xccac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x7f26, gbc.sp());
        EXPECT(0xccae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccac));
        EXPECT(0x1b, gbc.readMem(0xccad));
        // CB 1B 01C0
        gbc.setState(0xc1ee, 0x902c, 0xbdc0, 0x3c8d, 0x133c, 0x1c0e, 0x1, 0x1);
        gbc.writeMem(0xc1ee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x902c, gbc.sp());
        EXPECT(0xc1f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1ee));
        EXPECT(0x1b, gbc.readMem(0xc1ef));
        // CB 1B 01C1
        gbc.setState(0x88f7, 0x7a4e, 0xa420, 0x1c15, 0xc9dc, 0xa3fd, 0x1, 0x0);
        gbc.writeMem(0x88f7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x7a4e, gbc.sp());
        EXPECT(0x88f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88f7));
        EXPECT(0x1b, gbc.readMem(0x88f8));
        // CB 1B 01C2
        gbc.setState(0xca32, 0x888e, 0x2740, 0x92ac, 0xa915, 0x4035, 0x0, 0x0);
        gbc.writeMem(0xca32, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x888e, gbc.sp());
        EXPECT(0xca34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca32));
        EXPECT(0x1b, gbc.readMem(0xca33));
        // CB 1B 01C3
        gbc.setState(0xb5ca, 0x82e4, 0xd00, 0xa550, 0x7ed5, 0x6b3e, 0x1, 0x0);
        gbc.writeMem(0xb5ca, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x82e4, gbc.sp());
        EXPECT(0xb5cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5ca));
        EXPECT(0x1b, gbc.readMem(0xb5cb));
        // CB 1B 01C4
        gbc.setState(0x2466, 0xcd41, 0x5180, 0x8408, 0x2aa, 0xcb8f, 0x1, 0x0);
        gbc.writeMem(0x2466, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xcd41, gbc.sp());
        EXPECT(0x2468, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01C5
        gbc.setState(0x2a5d, 0xfb2b, 0xa6b0, 0x3c09, 0x667d, 0xb5e, 0x1, 0x1);
        gbc.writeMem(0x2a5d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xfb2b, gbc.sp());
        EXPECT(0x2a5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01C6
        gbc.setState(0xa316, 0x5897, 0xcb30, 0x9456, 0xa728, 0x2eed, 0x1, 0x0);
        gbc.writeMem(0xa316, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x5897, gbc.sp());
        EXPECT(0xa318, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa316));
        EXPECT(0x1b, gbc.readMem(0xa317));
        // CB 1B 01C7
        gbc.setState(0x56bd, 0x6bbc, 0x1250, 0x5598, 0xcca3, 0xb3a8, 0x0, 0x1);
        gbc.writeMem(0x56bd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x6bbc, gbc.sp());
        EXPECT(0x56bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01C8
        gbc.setState(0x952f, 0xaa83, 0x6210, 0xfa03, 0x103d, 0x1e65, 0x1, 0x0);
        gbc.writeMem(0x952f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xaa83, gbc.sp());
        EXPECT(0x9531, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x952f));
        EXPECT(0x1b, gbc.readMem(0x9530));
        // CB 1B 01C9
        gbc.setState(0x1b11, 0x8805, 0xa60, 0xdfaf, 0x802, 0x662d, 0x0, 0x1);
        gbc.writeMem(0x1b11, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x8805, gbc.sp());
        EXPECT(0x1b13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01CA
        gbc.setState(0x9c28, 0x69ac, 0x7180, 0x593b, 0xe731, 0x436, 0x1, 0x0);
        gbc.writeMem(0x9c28, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x69ac, gbc.sp());
        EXPECT(0x9c2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c28));
        EXPECT(0x1b, gbc.readMem(0x9c29));
        // CB 1B 01CB
        gbc.setState(0x79ad, 0xce73, 0x71f0, 0xbc60, 0xc9aa, 0xad2, 0x0, 0x1);
        gbc.writeMem(0x79ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xce73, gbc.sp());
        EXPECT(0x79af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01CC
        gbc.setState(0xdf4d, 0xc247, 0x7d30, 0xbbd4, 0xedb1, 0xebf, 0x0, 0x0);
        gbc.writeMem(0xdf4d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xc247, gbc.sp());
        EXPECT(0xdf4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf4d));
        EXPECT(0x1b, gbc.readMem(0xdf4e));
        // CB 1B 01CD
        gbc.setState(0x1685, 0x5ab0, 0xfbf0, 0xc5be, 0x33d9, 0x4313, 0x0, 0x0);
        gbc.writeMem(0x1685, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x5ab0, gbc.sp());
        EXPECT(0x1687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01CE
        gbc.setState(0xd2f6, 0x5de1, 0x97c0, 0x5b15, 0x2382, 0x3380, 0x1, 0x1);
        gbc.writeMem(0xd2f6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x5de1, gbc.sp());
        EXPECT(0xd2f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2f6));
        EXPECT(0x1b, gbc.readMem(0xd2f7));
        // CB 1B 01CF
        gbc.setState(0x5199, 0xfe9, 0x7c0, 0x2a0a, 0xc134, 0x482c, 0x1, 0x0);
        gbc.writeMem(0x5199, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xfe9, gbc.sp());
        EXPECT(0x519b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01D0
        gbc.setState(0xbc9b, 0x5a10, 0xef30, 0x4612, 0x8291, 0x341a, 0x1, 0x0);
        gbc.writeMem(0xbc9b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x5a10, gbc.sp());
        EXPECT(0xbc9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc9b));
        EXPECT(0x1b, gbc.readMem(0xbc9c));
        // CB 1B 01D1
        gbc.setState(0xbd09, 0x67c6, 0x7cc0, 0x8e6e, 0x7f49, 0x361b, 0x1, 0x1);
        gbc.writeMem(0xbd09, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x67c6, gbc.sp());
        EXPECT(0xbd0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd09));
        EXPECT(0x1b, gbc.readMem(0xbd0a));
        // CB 1B 01D2
        gbc.setState(0x5841, 0x839b, 0x8d60, 0xf9ce, 0xaa2a, 0x4f1b, 0x0, 0x0);
        gbc.writeMem(0x5841, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x839b, gbc.sp());
        EXPECT(0x5843, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01D4
        gbc.setState(0xcd36, 0xf0c0, 0x8b60, 0x16aa, 0xbe66, 0xa638, 0x0, 0x1);
        gbc.writeMem(0xcd36, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xf0c0, gbc.sp());
        EXPECT(0xcd38, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd36));
        EXPECT(0x1b, gbc.readMem(0xcd37));
        // CB 1B 01D5
        gbc.setState(0xd604, 0x35be, 0x3de0, 0xedfe, 0x9007, 0xed04, 0x0, 0x0);
        gbc.writeMem(0xd604, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x35be, gbc.sp());
        EXPECT(0xd606, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd604));
        EXPECT(0x1b, gbc.readMem(0xd605));
        // CB 1B 01D6
        gbc.setState(0xe7e4, 0x34a8, 0xec30, 0x577e, 0x9ade, 0xaea4, 0x0, 0x0);
        gbc.writeMem(0xe7e4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x34a8, gbc.sp());
        EXPECT(0xe7e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7e4));
        EXPECT(0x1b, gbc.readMem(0xe7e5));
        // CB 1B 01D7
        gbc.setState(0xbc25, 0x208, 0x6e10, 0xc9d6, 0x7b85, 0xdd6d, 0x0, 0x0);
        gbc.writeMem(0xbc25, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x208, gbc.sp());
        EXPECT(0xbc27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc25));
        EXPECT(0x1b, gbc.readMem(0xbc26));
        // CB 1B 01D8
        gbc.setState(0xb01d, 0x6c7b, 0x8410, 0xaed2, 0x7fda, 0x6d6a, 0x0, 0x0);
        gbc.writeMem(0xb01d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x6c7b, gbc.sp());
        EXPECT(0xb01f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb01d));
        EXPECT(0x1b, gbc.readMem(0xb01e));
        // CB 1B 01D9
        gbc.setState(0x5954, 0xaa91, 0xc590, 0xd19b, 0x8b51, 0xd176, 0x0, 0x1);
        gbc.writeMem(0x5954, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xaa91, gbc.sp());
        EXPECT(0x5956, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01DA
        gbc.setState(0x11bb, 0x3675, 0xfd0, 0xce5e, 0xb817, 0x34fc, 0x1, 0x0);
        gbc.writeMem(0x11bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x3675, gbc.sp());
        EXPECT(0x11bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01DB
        gbc.setState(0xcd9d, 0x3450, 0xac0, 0x1a2f, 0x3cf4, 0x8654, 0x1, 0x1);
        gbc.writeMem(0xcd9d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x3450, gbc.sp());
        EXPECT(0xcd9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd9d));
        EXPECT(0x1b, gbc.readMem(0xcd9e));
        // CB 1B 01DC
        gbc.setState(0xded3, 0x1ad5, 0x4760, 0x2c38, 0x90f2, 0x96b4, 0x1, 0x0);
        gbc.writeMem(0xded3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x1ad5, gbc.sp());
        EXPECT(0xded5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xded3));
        EXPECT(0x1b, gbc.readMem(0xded4));
        // CB 1B 01DD
        gbc.setState(0x8dba, 0x5b1a, 0x70c0, 0x83fd, 0xbf12, 0x6d7c, 0x1, 0x1);
        gbc.writeMem(0x8dba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x5b1a, gbc.sp());
        EXPECT(0x8dbc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dba));
        EXPECT(0x1b, gbc.readMem(0x8dbb));
        // CB 1B 01DE
        gbc.setState(0x76d5, 0xaf82, 0x3a0, 0x8286, 0x5e1d, 0x1013, 0x1, 0x0);
        gbc.writeMem(0x76d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xaf82, gbc.sp());
        EXPECT(0x76d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01DF
        gbc.setState(0xcdf7, 0xa786, 0xb2e0, 0xc979, 0x5cf0, 0x175c, 0x0, 0x0);
        gbc.writeMem(0xcdf7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xa786, gbc.sp());
        EXPECT(0xcdf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdf7));
        EXPECT(0x1b, gbc.readMem(0xcdf8));
        // CB 1B 01E0
        gbc.setState(0x36ed, 0x9441, 0xe9f0, 0x2ea9, 0x5030, 0xe2f6, 0x0, 0x0);
        gbc.writeMem(0x36ed, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x9441, gbc.sp());
        EXPECT(0x36ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01E1
        gbc.setState(0x3ead, 0x65aa, 0x11d0, 0x41a3, 0xfa8b, 0x76df, 0x0, 0x1);
        gbc.writeMem(0x3ead, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x65aa, gbc.sp());
        EXPECT(0x3eaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01E2
        gbc.setState(0x5c05, 0xeea5, 0x4cd0, 0xbce7, 0xed93, 0x551d, 0x0, 0x0);
        gbc.writeMem(0x5c05, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xeea5, gbc.sp());
        EXPECT(0x5c07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01E3
        gbc.setState(0x5046, 0x9b9c, 0xd490, 0x879b, 0xcf98, 0x26e2, 0x1, 0x1);
        gbc.writeMem(0x5046, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x9b9c, gbc.sp());
        EXPECT(0x5048, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01E4
        gbc.setState(0x6f4e, 0x9d9b, 0xab90, 0xf2ed, 0xb98d, 0xd426, 0x0, 0x0);
        gbc.writeMem(0x6f4e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x9d9b, gbc.sp());
        EXPECT(0x6f50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01E5
        gbc.setState(0x11eb, 0x636e, 0xa040, 0xff3, 0xd799, 0xb4c9, 0x0, 0x0);
        gbc.writeMem(0x11eb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x636e, gbc.sp());
        EXPECT(0x11ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01E6
        gbc.setState(0x9311, 0x8b42, 0xa810, 0xc150, 0x4870, 0xaac9, 0x0, 0x0);
        gbc.writeMem(0x9311, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x8b42, gbc.sp());
        EXPECT(0x9313, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9311));
        EXPECT(0x1b, gbc.readMem(0x9312));
        // CB 1B 01E7
        gbc.setState(0x812c, 0x37ce, 0x2f10, 0x9f09, 0x4a21, 0x949f, 0x1, 0x1);
        gbc.writeMem(0x812c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x37ce, gbc.sp());
        EXPECT(0x812e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x812c));
        EXPECT(0x1b, gbc.readMem(0x812d));
        // CB 1B 01E8
        gbc.setState(0x6874, 0xa9be, 0x8170, 0x244f, 0xfcb7, 0x6006, 0x0, 0x1);
        gbc.writeMem(0x6874, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xa9be, gbc.sp());
        EXPECT(0x6876, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01E9
        gbc.setState(0xf61, 0xb05c, 0xc050, 0x6b6c, 0x94c9, 0x89c4, 0x0, 0x0);
        gbc.writeMem(0xf61, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xb05c, gbc.sp());
        EXPECT(0xf63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01EA
        gbc.setState(0xedf4, 0xf925, 0xf290, 0x8358, 0xd668, 0x43c6, 0x1, 0x1);
        gbc.writeMem(0xedf4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xf925, gbc.sp());
        EXPECT(0xedf6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedf4));
        EXPECT(0x1b, gbc.readMem(0xedf5));
        // CB 1B 01EB
        gbc.setState(0x5cde, 0xed94, 0xefa0, 0xcbd1, 0xafc5, 0x6407, 0x0, 0x0);
        gbc.writeMem(0x5cde, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xed94, gbc.sp());
        EXPECT(0x5ce0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01EC
        gbc.setState(0x39b, 0x4001, 0xaeb0, 0xfea0, 0x5c25, 0x2, 0x1, 0x0);
        gbc.writeMem(0x39b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x4001, gbc.sp());
        EXPECT(0x39d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01ED
        gbc.setState(0xa344, 0x84ec, 0x8140, 0x2404, 0xb3f7, 0x6dab, 0x0, 0x1);
        gbc.writeMem(0xa344, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x84ec, gbc.sp());
        EXPECT(0xa346, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa344));
        EXPECT(0x1b, gbc.readMem(0xa345));
        // CB 1B 01EE
        gbc.setState(0xb65b, 0xc862, 0x1cf0, 0xb7b0, 0xd11c, 0xce85, 0x1, 0x1);
        gbc.writeMem(0xb65b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xc862, gbc.sp());
        EXPECT(0xb65d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb65b));
        EXPECT(0x1b, gbc.readMem(0xb65c));
        // CB 1B 01EF
        gbc.setState(0x2845, 0x26be, 0x83f0, 0x4b62, 0xf802, 0x11e1, 0x0, 0x1);
        gbc.writeMem(0x2845, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x26be, gbc.sp());
        EXPECT(0x2847, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01F0
        gbc.setState(0x8534, 0x862e, 0x9a80, 0xf94f, 0xf0ec, 0x3d4, 0x0, 0x0);
        gbc.writeMem(0x8534, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x862e, gbc.sp());
        EXPECT(0x8536, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8534));
        EXPECT(0x1b, gbc.readMem(0x8535));
        // CB 1B 01F1
        gbc.setState(0x979e, 0xa57b, 0xac20, 0xf123, 0xf527, 0xb40b, 0x1, 0x1);
        gbc.writeMem(0x979e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xa57b, gbc.sp());
        EXPECT(0x97a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x979e));
        EXPECT(0x1b, gbc.readMem(0x979f));
        // CB 1B 01F2
        gbc.setState(0x102a, 0xed42, 0xcfe0, 0xf437, 0x4a4d, 0x810c, 0x1, 0x1);
        gbc.writeMem(0x102a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xed42, gbc.sp());
        EXPECT(0x102c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01F3
        gbc.setState(0x1ba1, 0xcbdf, 0xc660, 0xe472, 0x91f0, 0xa20a, 0x0, 0x1);
        gbc.writeMem(0x1ba1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xcbdf, gbc.sp());
        EXPECT(0x1ba3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01F4
        gbc.setState(0x8400, 0xe44d, 0x62a0, 0xa48f, 0xb031, 0xf32e, 0x0, 0x0);
        gbc.writeMem(0x8400, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xe44d, gbc.sp());
        EXPECT(0x8402, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8400));
        EXPECT(0x1b, gbc.readMem(0x8401));
        // CB 1B 01F5
        gbc.setState(0x7dd0, 0xa779, 0x1960, 0x27de, 0x952c, 0xd988, 0x0, 0x1);
        gbc.writeMem(0x7dd0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xa779, gbc.sp());
        EXPECT(0x7dd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01F6
        gbc.setState(0x730a, 0x3acd, 0x900, 0x58a9, 0x53d2, 0xf111, 0x1, 0x1);
        gbc.writeMem(0x730a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x3acd, gbc.sp());
        EXPECT(0x730c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 01F7
        gbc.setState(0xcd36, 0x71de, 0x8cf0, 0xfed6, 0x11cc, 0x6cb8, 0x1, 0x1);
        gbc.writeMem(0xcd36, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x71de, gbc.sp());
        EXPECT(0xcd38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd36));
        EXPECT(0x1b, gbc.readMem(0xcd37));
        // CB 1B 01F8
        gbc.setState(0xe90c, 0x9c0c, 0x6dc0, 0xd0b8, 0xffb4, 0xb80b, 0x1, 0x1);
        gbc.writeMem(0xe90c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x9c0c, gbc.sp());
        EXPECT(0xe90e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe90c));
        EXPECT(0x1b, gbc.readMem(0xe90d));
        // CB 1B 01F9
        gbc.setState(0x4f1c, 0xbc8b, 0xe520, 0x7450, 0xc977, 0x9af5, 0x1, 0x1);
        gbc.writeMem(0x4f1c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xbc8b, gbc.sp());
        EXPECT(0x4f1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01FA
        gbc.setState(0xb963, 0x3d2a, 0xbf80, 0x3503, 0xb335, 0x66fc, 0x1, 0x0);
        gbc.writeMem(0xb963, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x3d2a, gbc.sp());
        EXPECT(0xb965, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb963));
        EXPECT(0x1b, gbc.readMem(0xb964));
        // CB 1B 01FB
        gbc.setState(0xb5fe, 0xdf7c, 0x2780, 0x8c5d, 0xea10, 0xa605, 0x0, 0x0);
        gbc.writeMem(0xb5fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xdf7c, gbc.sp());
        EXPECT(0xb600, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5fe));
        EXPECT(0x1b, gbc.readMem(0xb5ff));
        // CB 1B 01FC
        gbc.setState(0x7d59, 0xf873, 0x11e0, 0x25d8, 0x15a9, 0xd2de, 0x1, 0x1);
        gbc.writeMem(0x7d59, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xf873, gbc.sp());
        EXPECT(0x7d5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 01FD
        gbc.setState(0xe6a2, 0xfce4, 0x7fa0, 0xf602, 0x4772, 0xcd68, 0x0, 0x1);
        gbc.writeMem(0xe6a2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xfce4, gbc.sp());
        EXPECT(0xe6a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6a2));
        EXPECT(0x1b, gbc.readMem(0xe6a3));
        // CB 1B 01FE
        gbc.setState(0xa7d8, 0xb9e1, 0x67a0, 0xa8fa, 0x8bd0, 0x759c, 0x1, 0x0);
        gbc.writeMem(0xa7d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xb9e1, gbc.sp());
        EXPECT(0xa7da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7d8));
        EXPECT(0x1b, gbc.readMem(0xa7d9));
        // CB 1B 01FF
        gbc.setState(0x951, 0xbbe7, 0xb8f0, 0xc883, 0xe650, 0xe9c3, 0x1, 0x0);
        gbc.writeMem(0x951, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xbbe7, gbc.sp());
        EXPECT(0x953, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0200
        gbc.setState(0xb231, 0x1b4e, 0x1090, 0x1360, 0xfb4a, 0xebec, 0x0, 0x0);
        gbc.writeMem(0xb231, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x1b4e, gbc.sp());
        EXPECT(0xb233, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb231));
        EXPECT(0x1b, gbc.readMem(0xb232));
        // CB 1B 0201
        gbc.setState(0xc315, 0x8096, 0x6db0, 0x4688, 0x60ea, 0x8622, 0x1, 0x1);
        gbc.writeMem(0xc315, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x8096, gbc.sp());
        EXPECT(0xc317, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc315));
        EXPECT(0x1b, gbc.readMem(0xc316));
        // CB 1B 0202
        gbc.setState(0x84ce, 0xf52c, 0x370, 0x84f4, 0xeed9, 0xfe69, 0x1, 0x0);
        gbc.writeMem(0x84ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xf52c, gbc.sp());
        EXPECT(0x84d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84ce));
        EXPECT(0x1b, gbc.readMem(0x84cf));
        // CB 1B 0203
        gbc.setState(0x50a0, 0xfaae, 0x7260, 0xa57d, 0x69c, 0x9959, 0x0, 0x0);
        gbc.writeMem(0x50a0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xfaae, gbc.sp());
        EXPECT(0x50a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0204
        gbc.setState(0xa435, 0xd53e, 0xe5f0, 0xa9fe, 0x7aad, 0x2ced, 0x1, 0x1);
        gbc.writeMem(0xa435, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xd53e, gbc.sp());
        EXPECT(0xa437, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa435));
        EXPECT(0x1b, gbc.readMem(0xa436));
        // CB 1B 0205
        gbc.setState(0x6c46, 0xd815, 0xce90, 0xefb1, 0xbc2f, 0x39e4, 0x0, 0x0);
        gbc.writeMem(0x6c46, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xd815, gbc.sp());
        EXPECT(0x6c48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0206
        gbc.setState(0x8179, 0x733d, 0x5380, 0x2361, 0xc7c0, 0x8dcd, 0x0, 0x0);
        gbc.writeMem(0x8179, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x733d, gbc.sp());
        EXPECT(0x817b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8179));
        EXPECT(0x1b, gbc.readMem(0x817a));
        // CB 1B 0208
        gbc.setState(0x35e0, 0x35be, 0x2420, 0x8658, 0x7e33, 0x70b6, 0x0, 0x0);
        gbc.writeMem(0x35e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x35be, gbc.sp());
        EXPECT(0x35e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0209
        gbc.setState(0x6236, 0x3be3, 0xf8e0, 0xcc0d, 0xfbe2, 0x49b3, 0x0, 0x1);
        gbc.writeMem(0x6236, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x3be3, gbc.sp());
        EXPECT(0x6238, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 020A
        gbc.setState(0xbaba, 0xf86d, 0x7e70, 0x1e2a, 0xe94b, 0x6e88, 0x1, 0x0);
        gbc.writeMem(0xbaba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xf86d, gbc.sp());
        EXPECT(0xbabc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaba));
        EXPECT(0x1b, gbc.readMem(0xbabb));
        // CB 1B 020B
        gbc.setState(0xc5c2, 0xed01, 0xa2b0, 0xf85, 0x766d, 0x759d, 0x0, 0x1);
        gbc.writeMem(0xc5c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xed01, gbc.sp());
        EXPECT(0xc5c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5c2));
        EXPECT(0x1b, gbc.readMem(0xc5c3));
        // CB 1B 020C
        gbc.setState(0x27cf, 0x4867, 0x9a0, 0xf459, 0xfdcf, 0xc26e, 0x0, 0x0);
        gbc.writeMem(0x27cf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x4867, gbc.sp());
        EXPECT(0x27d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 020D
        gbc.setState(0x6703, 0x67b4, 0x61a0, 0xe00f, 0x8f3a, 0xe985, 0x1, 0x1);
        gbc.writeMem(0x6703, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x67b4, gbc.sp());
        EXPECT(0x6705, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 020F
        gbc.setState(0xa8dd, 0xb8c4, 0xfe30, 0xf96e, 0xb5c0, 0x369b, 0x1, 0x0);
        gbc.writeMem(0xa8dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xb8c4, gbc.sp());
        EXPECT(0xa8df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8dd));
        EXPECT(0x1b, gbc.readMem(0xa8de));
        // CB 1B 0210
        gbc.setState(0x7f15, 0x857c, 0xcd10, 0x3e48, 0xef02, 0x7928, 0x1, 0x1);
        gbc.writeMem(0x7f15, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x857c, gbc.sp());
        EXPECT(0x7f17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0211
        gbc.setState(0x9214, 0xc3d1, 0xc110, 0xad38, 0x28d5, 0xa908, 0x1, 0x1);
        gbc.writeMem(0x9214, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc3d1, gbc.sp());
        EXPECT(0x9216, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9214));
        EXPECT(0x1b, gbc.readMem(0x9215));
        // CB 1B 0212
        gbc.setState(0xb514, 0xaf53, 0x430, 0xf3c4, 0x6f64, 0x745f, 0x0, 0x0);
        gbc.writeMem(0xb514, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xaf53, gbc.sp());
        EXPECT(0xb516, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb514));
        EXPECT(0x1b, gbc.readMem(0xb515));
        // CB 1B 0213
        gbc.setState(0x9186, 0x4cab, 0x8da0, 0x5196, 0x9b72, 0xffb3, 0x0, 0x1);
        gbc.writeMem(0x9186, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x4cab, gbc.sp());
        EXPECT(0x9188, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9186));
        EXPECT(0x1b, gbc.readMem(0x9187));
        // CB 1B 0214
        gbc.setState(0x410f, 0xe1cd, 0x58f0, 0x5994, 0x24c, 0xf8b7, 0x0, 0x1);
        gbc.writeMem(0x410f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xe1cd, gbc.sp());
        EXPECT(0x4111, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0215
        gbc.setState(0x6351, 0x9f67, 0x6810, 0x345f, 0xbba0, 0xc08b, 0x0, 0x1);
        gbc.writeMem(0x6351, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x9f67, gbc.sp());
        EXPECT(0x6353, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0216
        gbc.setState(0xe1c2, 0x74bc, 0xf980, 0x3353, 0x5acc, 0x3797, 0x1, 0x1);
        gbc.writeMem(0xe1c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x74bc, gbc.sp());
        EXPECT(0xe1c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1c2));
        EXPECT(0x1b, gbc.readMem(0xe1c3));
        // CB 1B 0217
        gbc.setState(0xe203, 0x353c, 0xf20, 0xd2a3, 0xd4c3, 0xaa4b, 0x0, 0x1);
        gbc.writeMem(0xe203, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x353c, gbc.sp());
        EXPECT(0xe205, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe203));
        EXPECT(0x1b, gbc.readMem(0xe204));
        // CB 1B 0218
        gbc.setState(0x2abb, 0xe455, 0x42c0, 0xbe49, 0x664, 0x2280, 0x1, 0x1);
        gbc.writeMem(0x2abb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xe455, gbc.sp());
        EXPECT(0x2abd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0219
        gbc.setState(0xe00f, 0xbc9d, 0xeaf0, 0x35a4, 0x90db, 0x8fec, 0x1, 0x1);
        gbc.writeMem(0xe00f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xbc9d, gbc.sp());
        EXPECT(0xe011, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe00f));
        EXPECT(0x1b, gbc.readMem(0xe010));
        // CB 1B 021A
        gbc.setState(0x5a26, 0xc4f5, 0x5320, 0xd8e6, 0x8683, 0xe7e, 0x1, 0x0);
        gbc.writeMem(0x5a26, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xc4f5, gbc.sp());
        EXPECT(0x5a28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 021B
        gbc.setState(0xab37, 0xb16b, 0x9e30, 0x38f4, 0x26fb, 0x5d15, 0x1, 0x0);
        gbc.writeMem(0xab37, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xb16b, gbc.sp());
        EXPECT(0xab39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab37));
        EXPECT(0x1b, gbc.readMem(0xab38));
        // CB 1B 021C
        gbc.setState(0xa846, 0x4c3a, 0x9410, 0x7c78, 0x97c4, 0x2a5c, 0x0, 0x1);
        gbc.writeMem(0xa846, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x4c3a, gbc.sp());
        EXPECT(0xa848, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa846));
        EXPECT(0x1b, gbc.readMem(0xa847));
        // CB 1B 021D
        gbc.setState(0xe68e, 0xc130, 0xa150, 0xbc92, 0x76c6, 0xbe81, 0x1, 0x0);
        gbc.writeMem(0xe68e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xc130, gbc.sp());
        EXPECT(0xe690, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe68e));
        EXPECT(0x1b, gbc.readMem(0xe68f));
        // CB 1B 021E
        gbc.setState(0xe065, 0xed8a, 0x62e0, 0x3c5b, 0x3816, 0x2ddd, 0x1, 0x0);
        gbc.writeMem(0xe065, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xed8a, gbc.sp());
        EXPECT(0xe067, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe065));
        EXPECT(0x1b, gbc.readMem(0xe066));
        // CB 1B 021F
        gbc.setState(0xa2c3, 0xb7de, 0x7910, 0x7937, 0xe58b, 0xab0, 0x1, 0x0);
        gbc.writeMem(0xa2c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xb7de, gbc.sp());
        EXPECT(0xa2c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2c3));
        EXPECT(0x1b, gbc.readMem(0xa2c4));
        // CB 1B 0220
        gbc.setState(0xfbb, 0x514b, 0x4620, 0xa7fe, 0xf7ae, 0xf106, 0x0, 0x0);
        gbc.writeMem(0xfbb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x514b, gbc.sp());
        EXPECT(0xfbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0221
        gbc.setState(0xaa77, 0x4000, 0x1170, 0x3b42, 0x508e, 0xc751, 0x1, 0x0);
        gbc.writeMem(0xaa77, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x4000, gbc.sp());
        EXPECT(0xaa79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa77));
        EXPECT(0x1b, gbc.readMem(0xaa78));
        // CB 1B 0222
        gbc.setState(0x2e18, 0x7bdb, 0xedf0, 0xa613, 0xb9c0, 0xf546, 0x0, 0x1);
        gbc.writeMem(0x2e18, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x7bdb, gbc.sp());
        EXPECT(0x2e1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0223
        gbc.setState(0xc116, 0xde39, 0x2d60, 0xd27b, 0x3e9e, 0xdde5, 0x1, 0x1);
        gbc.writeMem(0xc116, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xde39, gbc.sp());
        EXPECT(0xc118, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc116));
        EXPECT(0x1b, gbc.readMem(0xc117));
        // CB 1B 0225
        gbc.setState(0xa15a, 0x3360, 0x6880, 0x6476, 0x551c, 0x8c00, 0x1, 0x1);
        gbc.writeMem(0xa15a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x3360, gbc.sp());
        EXPECT(0xa15c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa15a));
        EXPECT(0x1b, gbc.readMem(0xa15b));
        // CB 1B 0226
        gbc.setState(0x4294, 0x102, 0x8ea0, 0x4d15, 0xc8dc, 0xbc18, 0x1, 0x1);
        gbc.writeMem(0x4294, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x102, gbc.sp());
        EXPECT(0x4296, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0227
        gbc.setState(0x683f, 0xaeaa, 0xd0, 0x91b, 0xb33d, 0xc4f3, 0x0, 0x0);
        gbc.writeMem(0x683f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xaeaa, gbc.sp());
        EXPECT(0x6841, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0228
        gbc.setState(0x740a, 0x3597, 0xefe0, 0x8666, 0x3749, 0xb12d, 0x0, 0x0);
        gbc.writeMem(0x740a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x3597, gbc.sp());
        EXPECT(0x740c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0229
        gbc.setState(0x6538, 0x1dae, 0x84e0, 0x9fa5, 0xbe35, 0xf505, 0x1, 0x0);
        gbc.writeMem(0x6538, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x1dae, gbc.sp());
        EXPECT(0x653a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 022A
        gbc.setState(0x80e3, 0xec0a, 0x9fd0, 0x401a, 0x8bfb, 0xbb20, 0x0, 0x0);
        gbc.writeMem(0x80e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xec0a, gbc.sp());
        EXPECT(0x80e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80e3));
        EXPECT(0x1b, gbc.readMem(0x80e4));
        // CB 1B 022B
        gbc.setState(0x3bc3, 0x1153, 0xe1c0, 0x3cdc, 0x7a4f, 0xb0f0, 0x0, 0x0);
        gbc.writeMem(0x3bc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x1153, gbc.sp());
        EXPECT(0x3bc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 022C
        gbc.setState(0x113e, 0xc927, 0x3fd0, 0x71cf, 0xd5db, 0x1cf2, 0x0, 0x1);
        gbc.writeMem(0x113e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xc927, gbc.sp());
        EXPECT(0x1140, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 022D
        gbc.setState(0x44f, 0xdc7d, 0x2dd0, 0x3d01, 0xb021, 0x720c, 0x0, 0x1);
        gbc.writeMem(0x44f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xdc7d, gbc.sp());
        EXPECT(0x451, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 022E
        gbc.setState(0x7dfc, 0x5e3b, 0x9cb0, 0x2898, 0x69ba, 0xe80c, 0x1, 0x1);
        gbc.writeMem(0x7dfc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x5e3b, gbc.sp());
        EXPECT(0x7dfe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 022F
        gbc.setState(0x96f8, 0x2923, 0xf530, 0x3834, 0xefb2, 0xaec4, 0x0, 0x1);
        gbc.writeMem(0x96f8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x2923, gbc.sp());
        EXPECT(0x96fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96f8));
        EXPECT(0x1b, gbc.readMem(0x96f9));
        // CB 1B 0230
        gbc.setState(0xe506, 0xbadb, 0xd5f0, 0x4235, 0x3407, 0xff58, 0x1, 0x0);
        gbc.writeMem(0xe506, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xbadb, gbc.sp());
        EXPECT(0xe508, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe506));
        EXPECT(0x1b, gbc.readMem(0xe507));
        // CB 1B 0231
        gbc.setState(0x60ad, 0x6b08, 0x38c0, 0x50eb, 0x7e85, 0x7d37, 0x0, 0x1);
        gbc.writeMem(0x60ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x6b08, gbc.sp());
        EXPECT(0x60af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0232
        gbc.setState(0x9712, 0x1223, 0xa320, 0xaa91, 0x7a62, 0xa287, 0x0, 0x0);
        gbc.writeMem(0x9712, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x1223, gbc.sp());
        EXPECT(0x9714, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9712));
        EXPECT(0x1b, gbc.readMem(0x9713));
        // CB 1B 0233
        gbc.setState(0xa944, 0x99, 0xb9c0, 0x91ee, 0x6cc6, 0x2c9f, 0x0, 0x1);
        gbc.writeMem(0xa944, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x99, gbc.sp());
        EXPECT(0xa946, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa944));
        EXPECT(0x1b, gbc.readMem(0xa945));
        // CB 1B 0234
        gbc.setState(0x1437, 0x5b, 0xbfb0, 0x4150, 0x84bd, 0xa4c8, 0x0, 0x1);
        gbc.writeMem(0x1437, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x5b, gbc.sp());
        EXPECT(0x1439, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0235
        gbc.setState(0x9e66, 0x9e0c, 0xd8f0, 0x78da, 0xcaf8, 0x8513, 0x1, 0x1);
        gbc.writeMem(0x9e66, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x9e0c, gbc.sp());
        EXPECT(0x9e68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e66));
        EXPECT(0x1b, gbc.readMem(0x9e67));
        // CB 1B 0236
        gbc.setState(0xadc3, 0x8efa, 0x2450, 0x6f3, 0x1d1c, 0x638c, 0x1, 0x1);
        gbc.writeMem(0xadc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x8efa, gbc.sp());
        EXPECT(0xadc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadc3));
        EXPECT(0x1b, gbc.readMem(0xadc4));
        // CB 1B 0237
        gbc.setState(0x70f8, 0xc738, 0xa8d0, 0x6422, 0x378f, 0x56a0, 0x1, 0x1);
        gbc.writeMem(0x70f8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xc738, gbc.sp());
        EXPECT(0x70fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0238
        gbc.setState(0x98e4, 0xb2cf, 0x19c0, 0xd7a0, 0x5af5, 0xc1c5, 0x1, 0x1);
        gbc.writeMem(0x98e4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xb2cf, gbc.sp());
        EXPECT(0x98e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98e4));
        EXPECT(0x1b, gbc.readMem(0x98e5));
        // CB 1B 0239
        gbc.setState(0x16a5, 0x8ac1, 0x7670, 0xda4c, 0x4fbe, 0xc9ae, 0x1, 0x1);
        gbc.writeMem(0x16a5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x8ac1, gbc.sp());
        EXPECT(0x16a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 023A
        gbc.setState(0x725b, 0x3524, 0x14d0, 0x1fd5, 0xb6d6, 0xc551, 0x0, 0x0);
        gbc.writeMem(0x725b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x3524, gbc.sp());
        EXPECT(0x725d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 023B
        gbc.setState(0x13b, 0xe429, 0xe700, 0x98aa, 0x37d6, 0xf8ca, 0x1, 0x0);
        gbc.writeMem(0x13b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xe429, gbc.sp());
        EXPECT(0x13d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 023C
        gbc.setState(0xe762, 0x772a, 0xe570, 0x8689, 0xabaf, 0x83d, 0x0, 0x1);
        gbc.writeMem(0xe762, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x772a, gbc.sp());
        EXPECT(0xe764, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe762));
        EXPECT(0x1b, gbc.readMem(0xe763));
        // CB 1B 023D
        gbc.setState(0x328d, 0xd51d, 0x2d70, 0xf8d3, 0x1d08, 0x115, 0x0, 0x0);
        gbc.writeMem(0x328d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xd51d, gbc.sp());
        EXPECT(0x328f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 023E
        gbc.setState(0x4c56, 0x4b2b, 0x54f0, 0x68e3, 0x45fc, 0xeac8, 0x1, 0x1);
        gbc.writeMem(0x4c56, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x4b2b, gbc.sp());
        EXPECT(0x4c58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 023F
        gbc.setState(0x9a84, 0xbc60, 0xdf20, 0xa5a5, 0x213c, 0x5403, 0x1, 0x1);
        gbc.writeMem(0x9a84, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xbc60, gbc.sp());
        EXPECT(0x9a86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a84));
        EXPECT(0x1b, gbc.readMem(0x9a85));
        // CB 1B 0240
        gbc.setState(0x765a, 0xdfd4, 0x3e0, 0xe7ca, 0x7a90, 0xef71, 0x0, 0x1);
        gbc.writeMem(0x765a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xdfd4, gbc.sp());
        EXPECT(0x765c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0241
        gbc.setState(0x4901, 0x5b6b, 0x4590, 0xc7a5, 0x9160, 0x9627, 0x1, 0x1);
        gbc.writeMem(0x4901, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x5b6b, gbc.sp());
        EXPECT(0x4903, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0242
        gbc.setState(0x2a06, 0xcb8d, 0xae0, 0x40b4, 0xa6d9, 0x2309, 0x1, 0x0);
        gbc.writeMem(0x2a06, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xcb8d, gbc.sp());
        EXPECT(0x2a08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0243
        gbc.setState(0xa6ad, 0x8c71, 0xb5b0, 0x37f4, 0xb2ab, 0x3840, 0x1, 0x1);
        gbc.writeMem(0xa6ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x8c71, gbc.sp());
        EXPECT(0xa6af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6ad));
        EXPECT(0x1b, gbc.readMem(0xa6ae));
        // CB 1B 0244
        gbc.setState(0x7dcb, 0xe590, 0xdc60, 0x56f3, 0x4e75, 0x60c7, 0x0, 0x1);
        gbc.writeMem(0x7dcb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xe590, gbc.sp());
        EXPECT(0x7dcd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0245
        gbc.setState(0x101d, 0xd512, 0x1690, 0x931, 0xcf3b, 0xedc6, 0x1, 0x0);
        gbc.writeMem(0x101d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xd512, gbc.sp());
        EXPECT(0x101f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0246
        gbc.setState(0x825f, 0x2185, 0x60b0, 0x15f4, 0x5c99, 0xd8bc, 0x0, 0x0);
        gbc.writeMem(0x825f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x2185, gbc.sp());
        EXPECT(0x8261, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x825f));
        EXPECT(0x1b, gbc.readMem(0x8260));
        // CB 1B 0248
        gbc.setState(0xc0ae, 0xca05, 0x8340, 0x48c8, 0xbaf8, 0xc26a, 0x0, 0x1);
        gbc.writeMem(0xc0ae, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xca05, gbc.sp());
        EXPECT(0xc0b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0ae));
        EXPECT(0x1b, gbc.readMem(0xc0af));
        // CB 1B 0249
        gbc.setState(0xd5f, 0x5389, 0x7c60, 0xff36, 0xdc2a, 0x2c8c, 0x1, 0x1);
        gbc.writeMem(0xd5f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x5389, gbc.sp());
        EXPECT(0xd61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 024A
        gbc.setState(0x4ee4, 0x8f30, 0xd00, 0x5d13, 0x204e, 0x67dd, 0x0, 0x1);
        gbc.writeMem(0x4ee4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x8f30, gbc.sp());
        EXPECT(0x4ee6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 024B
        gbc.setState(0x3b3e, 0x709, 0x6000, 0xebd2, 0xdba4, 0x6666, 0x1, 0x1);
        gbc.writeMem(0x3b3e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x709, gbc.sp());
        EXPECT(0x3b40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 024C
        gbc.setState(0xd637, 0x846a, 0x3d90, 0x3dd8, 0x271e, 0x512d, 0x0, 0x1);
        gbc.writeMem(0xd637, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x846a, gbc.sp());
        EXPECT(0xd639, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd637));
        EXPECT(0x1b, gbc.readMem(0xd638));
        // CB 1B 024D
        gbc.setState(0x4b67, 0x9a0b, 0x3450, 0xc946, 0xd7f7, 0xd383, 0x1, 0x1);
        gbc.writeMem(0x4b67, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x9a0b, gbc.sp());
        EXPECT(0x4b69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 024E
        gbc.setState(0xe2fb, 0xb8de, 0x1c40, 0x49b, 0x2835, 0x3b85, 0x1, 0x0);
        gbc.writeMem(0xe2fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xb8de, gbc.sp());
        EXPECT(0xe2fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2fb));
        EXPECT(0x1b, gbc.readMem(0xe2fc));
        // CB 1B 024F
        gbc.setState(0x318a, 0x45f8, 0x5490, 0x2fcd, 0xe1a6, 0xbde0, 0x0, 0x1);
        gbc.writeMem(0x318a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x45f8, gbc.sp());
        EXPECT(0x318c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0250
        gbc.setState(0x18db, 0x98c1, 0x480, 0x2a9, 0x3e5e, 0x404c, 0x0, 0x0);
        gbc.writeMem(0x18db, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x98c1, gbc.sp());
        EXPECT(0x18dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0251
        gbc.setState(0x8653, 0x5f0e, 0x6080, 0xd67e, 0x2e7, 0x3ae6, 0x0, 0x1);
        gbc.writeMem(0x8653, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x5f0e, gbc.sp());
        EXPECT(0x8655, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8653));
        EXPECT(0x1b, gbc.readMem(0x8654));
        // CB 1B 0252
        gbc.setState(0x2985, 0x9ff8, 0x54d0, 0xe218, 0xc98a, 0x8d83, 0x1, 0x0);
        gbc.writeMem(0x2985, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x9ff8, gbc.sp());
        EXPECT(0x2987, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0253
        gbc.setState(0x40be, 0x31bf, 0x4930, 0xad3e, 0x4295, 0x2c5, 0x0, 0x1);
        gbc.writeMem(0x40be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x31bf, gbc.sp());
        EXPECT(0x40c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0254
        gbc.setState(0x94c1, 0xa290, 0xe370, 0xc786, 0xf231, 0x9550, 0x1, 0x1);
        gbc.writeMem(0x94c1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xa290, gbc.sp());
        EXPECT(0x94c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94c1));
        EXPECT(0x1b, gbc.readMem(0x94c2));
        // CB 1B 0255
        gbc.setState(0x2848, 0xecf6, 0x8de0, 0xb14e, 0xac49, 0x9f9a, 0x0, 0x1);
        gbc.writeMem(0x2848, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xecf6, gbc.sp());
        EXPECT(0x284a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0256
        gbc.setState(0x4368, 0x10a5, 0x2640, 0x75ea, 0xb340, 0xae20, 0x1, 0x0);
        gbc.writeMem(0x4368, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x10a5, gbc.sp());
        EXPECT(0x436a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0257
        gbc.setState(0xeaf1, 0x78bf, 0xc150, 0x8981, 0xbe0, 0xea8, 0x0, 0x1);
        gbc.writeMem(0xeaf1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x78bf, gbc.sp());
        EXPECT(0xeaf3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaf1));
        EXPECT(0x1b, gbc.readMem(0xeaf2));
        // CB 1B 0258
        gbc.setState(0x3dd0, 0x2ce2, 0x1c60, 0xe88a, 0x79bb, 0x5883, 0x1, 0x1);
        gbc.writeMem(0x3dd0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x2ce2, gbc.sp());
        EXPECT(0x3dd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0259
        gbc.setState(0xe77c, 0xd092, 0x84f0, 0x56bc, 0xa537, 0x385e, 0x0, 0x0);
        gbc.writeMem(0xe77c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xd092, gbc.sp());
        EXPECT(0xe77e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe77c));
        EXPECT(0x1b, gbc.readMem(0xe77d));
        // CB 1B 025A
        gbc.setState(0xdde6, 0xb8ae, 0x1210, 0x972c, 0x2319, 0xea32, 0x1, 0x0);
        gbc.writeMem(0xdde6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xb8ae, gbc.sp());
        EXPECT(0xdde8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdde6));
        EXPECT(0x1b, gbc.readMem(0xdde7));
        // CB 1B 025B
        gbc.setState(0xb152, 0x9471, 0x8870, 0x4a06, 0x5a03, 0xb123, 0x0, 0x1);
        gbc.writeMem(0xb152, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x9471, gbc.sp());
        EXPECT(0xb154, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb152));
        EXPECT(0x1b, gbc.readMem(0xb153));
        // CB 1B 025C
        gbc.setState(0xceea, 0x2140, 0x5b30, 0x81a6, 0x3a4d, 0x6138, 0x0, 0x1);
        gbc.writeMem(0xceea, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x2140, gbc.sp());
        EXPECT(0xceec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xceea));
        EXPECT(0x1b, gbc.readMem(0xceeb));
        // CB 1B 025D
        gbc.setState(0x3e5d, 0x52eb, 0xe3a0, 0x86cb, 0x99f1, 0x7cfc, 0x0, 0x1);
        gbc.writeMem(0x3e5d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x52eb, gbc.sp());
        EXPECT(0x3e5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 025E
        gbc.setState(0x546a, 0x62d4, 0xf130, 0x1636, 0x1d9d, 0x6d24, 0x1, 0x1);
        gbc.writeMem(0x546a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x62d4, gbc.sp());
        EXPECT(0x546c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 025F
        gbc.setState(0x2728, 0x2fa1, 0xf560, 0xb4df, 0x11a4, 0xd0b5, 0x1, 0x0);
        gbc.writeMem(0x2728, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x2fa1, gbc.sp());
        EXPECT(0x272a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0261
        gbc.setState(0xaebf, 0x2a5, 0x4d90, 0xa5b9, 0xf625, 0x71fc, 0x0, 0x0);
        gbc.writeMem(0xaebf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x2a5, gbc.sp());
        EXPECT(0xaec1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaebf));
        EXPECT(0x1b, gbc.readMem(0xaec0));
        // CB 1B 0263
        gbc.setState(0x4962, 0x11d7, 0xbee0, 0xd44d, 0x689e, 0xb6a1, 0x0, 0x0);
        gbc.writeMem(0x4962, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x11d7, gbc.sp());
        EXPECT(0x4964, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0264
        gbc.setState(0x8a01, 0x1004, 0x3770, 0xec5c, 0x8f67, 0xc247, 0x1, 0x1);
        gbc.writeMem(0x8a01, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x1004, gbc.sp());
        EXPECT(0x8a03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a01));
        EXPECT(0x1b, gbc.readMem(0x8a02));
        // CB 1B 0265
        gbc.setState(0x8eb5, 0x7fb4, 0xcf30, 0x7ed5, 0x635b, 0x29fc, 0x1, 0x0);
        gbc.writeMem(0x8eb5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x7fb4, gbc.sp());
        EXPECT(0x8eb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8eb5));
        EXPECT(0x1b, gbc.readMem(0x8eb6));
        // CB 1B 0266
        gbc.setState(0x5ce2, 0x8e8d, 0xcc00, 0x541b, 0xc193, 0x295a, 0x0, 0x0);
        gbc.writeMem(0x5ce2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x8e8d, gbc.sp());
        EXPECT(0x5ce4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0267
        gbc.setState(0xb790, 0xd32b, 0xaca0, 0xc966, 0x1dae, 0x9ffe, 0x0, 0x0);
        gbc.writeMem(0xb790, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xd32b, gbc.sp());
        EXPECT(0xb792, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb790));
        EXPECT(0x1b, gbc.readMem(0xb791));
        // CB 1B 0268
        gbc.setState(0x7116, 0xaa2a, 0xcbf0, 0x56ec, 0xd5a, 0x15ae, 0x0, 0x1);
        gbc.writeMem(0x7116, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xaa2a, gbc.sp());
        EXPECT(0x7118, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0269
        gbc.setState(0x584b, 0xf00c, 0xb3b0, 0xdd9c, 0x7be9, 0x9c22, 0x1, 0x0);
        gbc.writeMem(0x584b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xf00c, gbc.sp());
        EXPECT(0x584d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 026A
        gbc.setState(0x8913, 0xf818, 0x7360, 0x742c, 0xbde3, 0x8021, 0x0, 0x1);
        gbc.writeMem(0x8913, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xf818, gbc.sp());
        EXPECT(0x8915, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8913));
        EXPECT(0x1b, gbc.readMem(0x8914));
        // CB 1B 026C
        gbc.setState(0xa9b8, 0xe91c, 0xa2f0, 0x7d01, 0xf556, 0xa8aa, 0x1, 0x1);
        gbc.writeMem(0xa9b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xe91c, gbc.sp());
        EXPECT(0xa9ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9b8));
        EXPECT(0x1b, gbc.readMem(0xa9b9));
        // CB 1B 026D
        gbc.setState(0xbd17, 0x1702, 0xc130, 0x3548, 0xea15, 0x6cea, 0x0, 0x0);
        gbc.writeMem(0xbd17, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x1702, gbc.sp());
        EXPECT(0xbd19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd17));
        EXPECT(0x1b, gbc.readMem(0xbd18));
        // CB 1B 026E
        gbc.setState(0x906c, 0xf445, 0x7070, 0xa569, 0xab85, 0x603b, 0x0, 0x1);
        gbc.writeMem(0x906c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xf445, gbc.sp());
        EXPECT(0x906e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x906c));
        EXPECT(0x1b, gbc.readMem(0x906d));
        // CB 1B 026F
        gbc.setState(0x375d, 0xa572, 0x5540, 0xc003, 0x5a4c, 0xea17, 0x1, 0x1);
        gbc.writeMem(0x375d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xa572, gbc.sp());
        EXPECT(0x375f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0270
        gbc.setState(0xd1a6, 0x2fa3, 0xa5a0, 0xd778, 0x345a, 0xe473, 0x1, 0x1);
        gbc.writeMem(0xd1a6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x2fa3, gbc.sp());
        EXPECT(0xd1a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1a6));
        EXPECT(0x1b, gbc.readMem(0xd1a7));
        // CB 1B 0271
        gbc.setState(0xe3ce, 0xe69c, 0x2aa0, 0x6c2a, 0x4421, 0x1598, 0x0, 0x0);
        gbc.writeMem(0xe3ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe69c, gbc.sp());
        EXPECT(0xe3d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3ce));
        EXPECT(0x1b, gbc.readMem(0xe3cf));
        // CB 1B 0272
        gbc.setState(0xd320, 0x1580, 0x2160, 0x3413, 0xd44e, 0x3296, 0x1, 0x0);
        gbc.writeMem(0xd320, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x1580, gbc.sp());
        EXPECT(0xd322, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd320));
        EXPECT(0x1b, gbc.readMem(0xd321));
        // CB 1B 0273
        gbc.setState(0x7440, 0xcdaf, 0x8460, 0xfeb5, 0xe388, 0x7377, 0x0, 0x0);
        gbc.writeMem(0x7440, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xcdaf, gbc.sp());
        EXPECT(0x7442, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0274
        gbc.setState(0xd44e, 0x73b1, 0xc0c0, 0x75b, 0x3e30, 0x9031, 0x1, 0x0);
        gbc.writeMem(0xd44e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x73b1, gbc.sp());
        EXPECT(0xd450, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd44e));
        EXPECT(0x1b, gbc.readMem(0xd44f));
        // CB 1B 0275
        gbc.setState(0x21c6, 0xeefd, 0xe010, 0xa987, 0x1bb7, 0x44d7, 0x1, 0x1);
        gbc.writeMem(0x21c6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xeefd, gbc.sp());
        EXPECT(0x21c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0276
        gbc.setState(0xae1a, 0x8500, 0xf650, 0x8d63, 0xd3e2, 0x741d, 0x1, 0x0);
        gbc.writeMem(0xae1a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x8500, gbc.sp());
        EXPECT(0xae1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae1a));
        EXPECT(0x1b, gbc.readMem(0xae1b));
        // CB 1B 0278
        gbc.setState(0xaae6, 0x4b5b, 0x5510, 0xf42d, 0x4b4f, 0xa558, 0x1, 0x1);
        gbc.writeMem(0xaae6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x4b5b, gbc.sp());
        EXPECT(0xaae8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaae6));
        EXPECT(0x1b, gbc.readMem(0xaae7));
        // CB 1B 0279
        gbc.setState(0x216a, 0x2754, 0xb890, 0xf7c8, 0xa8d7, 0x2e34, 0x0, 0x1);
        gbc.writeMem(0x216a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x2754, gbc.sp());
        EXPECT(0x216c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 027A
        gbc.setState(0x56a3, 0xc257, 0xbfa0, 0xb33f, 0x8feb, 0x4751, 0x1, 0x0);
        gbc.writeMem(0x56a3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xc257, gbc.sp());
        EXPECT(0x56a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 027B
        gbc.setState(0xb494, 0x2884, 0x37a0, 0x6e89, 0x27aa, 0xe83a, 0x0, 0x1);
        gbc.writeMem(0xb494, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x2884, gbc.sp());
        EXPECT(0xb496, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb494));
        EXPECT(0x1b, gbc.readMem(0xb495));
        // CB 1B 027C
        gbc.setState(0x89f4, 0x2bd2, 0xda00, 0xa1d0, 0xd2b7, 0x28ce, 0x0, 0x0);
        gbc.writeMem(0x89f4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x2bd2, gbc.sp());
        EXPECT(0x89f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89f4));
        EXPECT(0x1b, gbc.readMem(0x89f5));
        // CB 1B 027D
        gbc.setState(0xb3e2, 0xa56b, 0x2590, 0x9804, 0x7599, 0x5d4b, 0x1, 0x1);
        gbc.writeMem(0xb3e2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xa56b, gbc.sp());
        EXPECT(0xb3e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3e2));
        EXPECT(0x1b, gbc.readMem(0xb3e3));
        // CB 1B 027E
        gbc.setState(0x466e, 0xdcd8, 0x6120, 0xdc26, 0x2e65, 0xc903, 0x0, 0x1);
        gbc.writeMem(0x466e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xdcd8, gbc.sp());
        EXPECT(0x4670, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 027F
        gbc.setState(0xa28e, 0xebbe, 0x7c00, 0xe4c9, 0xec99, 0x6f22, 0x0, 0x1);
        gbc.writeMem(0xa28e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xebbe, gbc.sp());
        EXPECT(0xa290, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa28e));
        EXPECT(0x1b, gbc.readMem(0xa28f));
        // CB 1B 0280
        gbc.setState(0xc076, 0xeca0, 0xb410, 0x8fff, 0x2bf3, 0xb2ca, 0x1, 0x1);
        gbc.writeMem(0xc076, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xeca0, gbc.sp());
        EXPECT(0xc078, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc076));
        EXPECT(0x1b, gbc.readMem(0xc077));
        // CB 1B 0281
        gbc.setState(0x71be, 0xe4a8, 0x73b0, 0x5744, 0x20ad, 0x26cc, 0x1, 0x0);
        gbc.writeMem(0x71be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xe4a8, gbc.sp());
        EXPECT(0x71c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0282
        gbc.setState(0x8e21, 0xc596, 0x2b80, 0x7be9, 0xe105, 0xbeae, 0x0, 0x1);
        gbc.writeMem(0x8e21, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xc596, gbc.sp());
        EXPECT(0x8e23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e21));
        EXPECT(0x1b, gbc.readMem(0x8e22));
        // CB 1B 0283
        gbc.setState(0x8afc, 0xb277, 0x3c40, 0xbd95, 0x24b3, 0x8d39, 0x0, 0x1);
        gbc.writeMem(0x8afc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xb277, gbc.sp());
        EXPECT(0x8afe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8afc));
        EXPECT(0x1b, gbc.readMem(0x8afd));
        // CB 1B 0284
        gbc.setState(0x65c5, 0x16d3, 0xe060, 0x851a, 0xdbfc, 0xad54, 0x1, 0x1);
        gbc.writeMem(0x65c5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x16d3, gbc.sp());
        EXPECT(0x65c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0285
        gbc.setState(0x1742, 0x233a, 0x52b0, 0xfa42, 0x3cbc, 0xb1f9, 0x1, 0x0);
        gbc.writeMem(0x1742, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x233a, gbc.sp());
        EXPECT(0x1744, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0286
        gbc.setState(0x8155, 0x2b36, 0xced0, 0xbc18, 0x66dc, 0x8cde, 0x0, 0x1);
        gbc.writeMem(0x8155, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x2b36, gbc.sp());
        EXPECT(0x8157, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8155));
        EXPECT(0x1b, gbc.readMem(0x8156));
        // CB 1B 0287
        gbc.setState(0xb2ef, 0xdc2e, 0x98e0, 0x9631, 0xd793, 0xaa3f, 0x0, 0x0);
        gbc.writeMem(0xb2ef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xdc2e, gbc.sp());
        EXPECT(0xb2f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2ef));
        EXPECT(0x1b, gbc.readMem(0xb2f0));
        // CB 1B 0288
        gbc.setState(0xb21b, 0x15ea, 0x2810, 0x931f, 0x9b68, 0xe112, 0x0, 0x1);
        gbc.writeMem(0xb21b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x15ea, gbc.sp());
        EXPECT(0xb21d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb21b));
        EXPECT(0x1b, gbc.readMem(0xb21c));
        // CB 1B 028A
        gbc.setState(0x6a6c, 0x94df, 0xd7a0, 0xe30c, 0xd96a, 0x591d, 0x1, 0x0);
        gbc.writeMem(0x6a6c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x94df, gbc.sp());
        EXPECT(0x6a6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 028B
        gbc.setState(0xa2f7, 0x49dd, 0x9c50, 0xb65d, 0x28d8, 0xff28, 0x0, 0x1);
        gbc.writeMem(0xa2f7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x49dd, gbc.sp());
        EXPECT(0xa2f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2f7));
        EXPECT(0x1b, gbc.readMem(0xa2f8));
        // CB 1B 028C
        gbc.setState(0x47b6, 0x74f7, 0x6600, 0xbe8a, 0x9d1a, 0x6de1, 0x1, 0x0);
        gbc.writeMem(0x47b6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x74f7, gbc.sp());
        EXPECT(0x47b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 028D
        gbc.setState(0x5c86, 0x27cc, 0xd7e0, 0xa1e7, 0xd7e5, 0x7bd6, 0x1, 0x0);
        gbc.writeMem(0x5c86, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x27cc, gbc.sp());
        EXPECT(0x5c88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 028F
        gbc.setState(0xac1b, 0x5e68, 0x6490, 0x940b, 0x8cdc, 0xf14b, 0x1, 0x1);
        gbc.writeMem(0xac1b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x5e68, gbc.sp());
        EXPECT(0xac1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac1b));
        EXPECT(0x1b, gbc.readMem(0xac1c));
        // CB 1B 0290
        gbc.setState(0x45fa, 0x23bf, 0x2d40, 0xdf01, 0x589a, 0xbb6a, 0x0, 0x1);
        gbc.writeMem(0x45fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x23bf, gbc.sp());
        EXPECT(0x45fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0291
        gbc.setState(0x9d44, 0x10f5, 0x7d10, 0xdc59, 0x313f, 0x8dbb, 0x1, 0x0);
        gbc.writeMem(0x9d44, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x10f5, gbc.sp());
        EXPECT(0x9d46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d44));
        EXPECT(0x1b, gbc.readMem(0x9d45));
        // CB 1B 0292
        gbc.setState(0x740, 0x2e7, 0x4ee0, 0xbb5f, 0xec19, 0x2b6c, 0x1, 0x1);
        gbc.writeMem(0x740, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x2e7, gbc.sp());
        EXPECT(0x742, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0293
        gbc.setState(0xde52, 0xb7be, 0x41f0, 0xde72, 0xfffe, 0xb5f, 0x1, 0x1);
        gbc.writeMem(0xde52, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xb7be, gbc.sp());
        EXPECT(0xde54, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde52));
        EXPECT(0x1b, gbc.readMem(0xde53));
        // CB 1B 0294
        gbc.setState(0xe316, 0x28e3, 0x2e70, 0x25b2, 0xb151, 0xca1, 0x0, 0x0);
        gbc.writeMem(0xe316, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x28e3, gbc.sp());
        EXPECT(0xe318, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe316));
        EXPECT(0x1b, gbc.readMem(0xe317));
        // CB 1B 0295
        gbc.setState(0x722, 0x531a, 0x28f0, 0x2773, 0x99ff, 0x74f9, 0x1, 0x1);
        gbc.writeMem(0x722, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x531a, gbc.sp());
        EXPECT(0x724, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0296
        gbc.setState(0x8ca1, 0xd398, 0x5670, 0x1076, 0x2962, 0xb35d, 0x1, 0x1);
        gbc.writeMem(0x8ca1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xd398, gbc.sp());
        EXPECT(0x8ca3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ca1));
        EXPECT(0x1b, gbc.readMem(0x8ca2));
        // CB 1B 0297
        gbc.setState(0x878a, 0x6029, 0xf9c0, 0xbec2, 0xa2e8, 0xf5e3, 0x0, 0x1);
        gbc.writeMem(0x878a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x6029, gbc.sp());
        EXPECT(0x878c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x878a));
        EXPECT(0x1b, gbc.readMem(0x878b));
        // CB 1B 0298
        gbc.setState(0x9186, 0xbb90, 0x6090, 0x4c91, 0xe19c, 0xc195, 0x0, 0x0);
        gbc.writeMem(0x9186, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xbb90, gbc.sp());
        EXPECT(0x9188, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9186));
        EXPECT(0x1b, gbc.readMem(0x9187));
        // CB 1B 0299
        gbc.setState(0xc3c1, 0xb962, 0x26f0, 0x7270, 0xc4aa, 0x22bb, 0x0, 0x0);
        gbc.writeMem(0xc3c1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xb962, gbc.sp());
        EXPECT(0xc3c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3c1));
        EXPECT(0x1b, gbc.readMem(0xc3c2));
        // CB 1B 029A
        gbc.setState(0x50b3, 0x86c3, 0xcd20, 0x2018, 0x71b8, 0xd661, 0x1, 0x1);
        gbc.writeMem(0x50b3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x86c3, gbc.sp());
        EXPECT(0x50b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 029B
        gbc.setState(0xd7c4, 0xdc84, 0x1a0, 0x748d, 0x9b0d, 0x8672, 0x0, 0x0);
        gbc.writeMem(0xd7c4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xdc84, gbc.sp());
        EXPECT(0xd7c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7c4));
        EXPECT(0x1b, gbc.readMem(0xd7c5));
        // CB 1B 029C
        gbc.setState(0x84df, 0x6967, 0x9070, 0x74dd, 0xd44c, 0xcbda, 0x1, 0x1);
        gbc.writeMem(0x84df, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x6967, gbc.sp());
        EXPECT(0x84e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84df));
        EXPECT(0x1b, gbc.readMem(0x84e0));
        // CB 1B 029D
        gbc.setState(0xe08b, 0x697d, 0x84d0, 0x3f2b, 0xac7e, 0xd297, 0x1, 0x0);
        gbc.writeMem(0xe08b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x697d, gbc.sp());
        EXPECT(0xe08d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe08b));
        EXPECT(0x1b, gbc.readMem(0xe08c));
        // CB 1B 029E
        gbc.setState(0x606c, 0xbc8c, 0x6af0, 0xbc58, 0xb7f3, 0xca6f, 0x0, 0x1);
        gbc.writeMem(0x606c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xbc8c, gbc.sp());
        EXPECT(0x606e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 029F
        gbc.setState(0x7230, 0xa079, 0x4d30, 0xffe9, 0xcc5e, 0xd160, 0x1, 0x1);
        gbc.writeMem(0x7230, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xa079, gbc.sp());
        EXPECT(0x7232, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02A0
        gbc.setState(0x5f27, 0xc39d, 0x60e0, 0xec7, 0xe225, 0x81ea, 0x0, 0x1);
        gbc.writeMem(0x5f27, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xc39d, gbc.sp());
        EXPECT(0x5f29, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02A1
        gbc.setState(0xe914, 0x9b5b, 0x5550, 0x23bf, 0x37b9, 0x4fd0, 0x0, 0x0);
        gbc.writeMem(0xe914, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x9b5b, gbc.sp());
        EXPECT(0xe916, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe914));
        EXPECT(0x1b, gbc.readMem(0xe915));
        // CB 1B 02A2
        gbc.setState(0x4362, 0x8b7c, 0x75c0, 0x7b2c, 0xf925, 0xa4cf, 0x1, 0x1);
        gbc.writeMem(0x4362, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x8b7c, gbc.sp());
        EXPECT(0x4364, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02A3
        gbc.setState(0x6646, 0xfd7, 0x79c0, 0xe3d8, 0xed4e, 0x4ace, 0x1, 0x1);
        gbc.writeMem(0x6646, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xfd7, gbc.sp());
        EXPECT(0x6648, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02A4
        gbc.setState(0x2452, 0x3b9, 0xcc0, 0xfc12, 0x68c0, 0x13d2, 0x1, 0x1);
        gbc.writeMem(0x2452, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x3b9, gbc.sp());
        EXPECT(0x2454, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02A5
        gbc.setState(0xe2ad, 0x5bac, 0xb8f0, 0xfb3, 0x998c, 0xe98d, 0x1, 0x1);
        gbc.writeMem(0xe2ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x5bac, gbc.sp());
        EXPECT(0xe2af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2ad));
        EXPECT(0x1b, gbc.readMem(0xe2ae));
        // CB 1B 02A6
        gbc.setState(0xbd95, 0x1cca, 0xa7f0, 0xb4f4, 0x8003, 0x9ebf, 0x0, 0x1);
        gbc.writeMem(0xbd95, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x1cca, gbc.sp());
        EXPECT(0xbd97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd95));
        EXPECT(0x1b, gbc.readMem(0xbd96));
        // CB 1B 02A7
        gbc.setState(0x3f2c, 0x8401, 0x1750, 0xb05d, 0x7010, 0x30e6, 0x0, 0x0);
        gbc.writeMem(0x3f2c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x8401, gbc.sp());
        EXPECT(0x3f2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02A8
        gbc.setState(0x77c2, 0xf32, 0x22a0, 0x9401, 0x1d53, 0xcae8, 0x1, 0x0);
        gbc.writeMem(0x77c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xf32, gbc.sp());
        EXPECT(0x77c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02A9
        gbc.setState(0x5dee, 0xee6b, 0x2e20, 0xb627, 0x11c1, 0x4b54, 0x0, 0x1);
        gbc.writeMem(0x5dee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xee6b, gbc.sp());
        EXPECT(0x5df0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02AA
        gbc.setState(0xc830, 0x625, 0xa8c0, 0x568c, 0xd5e0, 0x958b, 0x0, 0x1);
        gbc.writeMem(0xc830, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x625, gbc.sp());
        EXPECT(0xc832, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc830));
        EXPECT(0x1b, gbc.readMem(0xc831));
        // CB 1B 02AB
        gbc.setState(0x2ad4, 0x5894, 0x3640, 0xcc21, 0x14be, 0x3f84, 0x1, 0x0);
        gbc.writeMem(0x2ad4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x5894, gbc.sp());
        EXPECT(0x2ad6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02AC
        gbc.setState(0x85a3, 0x61d3, 0x1ba0, 0x1fe8, 0x8477, 0x3696, 0x1, 0x1);
        gbc.writeMem(0x85a3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x61d3, gbc.sp());
        EXPECT(0x85a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85a3));
        EXPECT(0x1b, gbc.readMem(0x85a4));
        // CB 1B 02AD
        gbc.setState(0xdfc0, 0x1395, 0x2080, 0xc78d, 0xdb45, 0xf7cb, 0x0, 0x1);
        gbc.writeMem(0xdfc0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x1395, gbc.sp());
        EXPECT(0xdfc2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfc0));
        EXPECT(0x1b, gbc.readMem(0xdfc1));
        // CB 1B 02AE
        gbc.setState(0xe0ec, 0x2153, 0x2a80, 0xcb43, 0x5f22, 0xfd3b, 0x1, 0x1);
        gbc.writeMem(0xe0ec, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x2153, gbc.sp());
        EXPECT(0xe0ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0ec));
        EXPECT(0x1b, gbc.readMem(0xe0ed));
        // CB 1B 02AF
        gbc.setState(0xbee7, 0x5c11, 0xe8b0, 0x84ce, 0xb867, 0xc1cb, 0x0, 0x1);
        gbc.writeMem(0xbee7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x5c11, gbc.sp());
        EXPECT(0xbee9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbee7));
        EXPECT(0x1b, gbc.readMem(0xbee8));
        // CB 1B 02B0
        gbc.setState(0x539e, 0x951d, 0xd640, 0x7891, 0x3196, 0xb436, 0x1, 0x1);
        gbc.writeMem(0x539e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x951d, gbc.sp());
        EXPECT(0x53a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02B2
        gbc.setState(0x8658, 0x874d, 0xb980, 0x2cea, 0xf83b, 0xe3bc, 0x1, 0x0);
        gbc.writeMem(0x8658, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x874d, gbc.sp());
        EXPECT(0x865a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8658));
        EXPECT(0x1b, gbc.readMem(0x8659));
        // CB 1B 02B3
        gbc.setState(0x9800, 0xc999, 0xef20, 0x838d, 0x7e09, 0xc842, 0x1, 0x1);
        gbc.writeMem(0x9800, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xc999, gbc.sp());
        EXPECT(0x9802, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9800));
        EXPECT(0x1b, gbc.readMem(0x9801));
        // CB 1B 02B4
        gbc.setState(0x9a69, 0xd189, 0x3b90, 0xaf1d, 0xb577, 0x33a0, 0x1, 0x0);
        gbc.writeMem(0x9a69, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xd189, gbc.sp());
        EXPECT(0x9a6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a69));
        EXPECT(0x1b, gbc.readMem(0x9a6a));
        // CB 1B 02B5
        gbc.setState(0xb289, 0xd020, 0x4320, 0x56b1, 0x33f2, 0xb584, 0x1, 0x0);
        gbc.writeMem(0xb289, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xd020, gbc.sp());
        EXPECT(0xb28b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb289));
        EXPECT(0x1b, gbc.readMem(0xb28a));
        // CB 1B 02B6
        gbc.setState(0xad4a, 0x4b0b, 0x3cd0, 0x4275, 0x6d1c, 0x3b2b, 0x0, 0x0);
        gbc.writeMem(0xad4a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x4b0b, gbc.sp());
        EXPECT(0xad4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad4a));
        EXPECT(0x1b, gbc.readMem(0xad4b));
        // CB 1B 02B7
        gbc.setState(0x8f14, 0x2d08, 0x8b40, 0x2204, 0x48bd, 0x6cd0, 0x1, 0x0);
        gbc.writeMem(0x8f14, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x2d08, gbc.sp());
        EXPECT(0x8f16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f14));
        EXPECT(0x1b, gbc.readMem(0x8f15));
        // CB 1B 02B8
        gbc.setState(0xce26, 0xf7e3, 0xd190, 0x1109, 0x3c26, 0xb8dc, 0x0, 0x0);
        gbc.writeMem(0xce26, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xf7e3, gbc.sp());
        EXPECT(0xce28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce26));
        EXPECT(0x1b, gbc.readMem(0xce27));
        // CB 1B 02B9
        gbc.setState(0x63d, 0x694c, 0xecb0, 0xe1bd, 0x9ed9, 0xba09, 0x0, 0x0);
        gbc.writeMem(0x63d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x694c, gbc.sp());
        EXPECT(0x63f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02BA
        gbc.setState(0xbc68, 0x2664, 0xc0f0, 0x511, 0xd77e, 0xd6b6, 0x1, 0x0);
        gbc.writeMem(0xbc68, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x2664, gbc.sp());
        EXPECT(0xbc6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc68));
        EXPECT(0x1b, gbc.readMem(0xbc69));
        // CB 1B 02BB
        gbc.setState(0xc046, 0x86a5, 0x8d0, 0xcf3d, 0x5b9, 0x4e58, 0x0, 0x1);
        gbc.writeMem(0xc046, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x86a5, gbc.sp());
        EXPECT(0xc048, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc046));
        EXPECT(0x1b, gbc.readMem(0xc047));
        // CB 1B 02BC
        gbc.setState(0xd719, 0xc2ec, 0x37d0, 0x3423, 0x3d6d, 0xcf0b, 0x0, 0x0);
        gbc.writeMem(0xd719, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xc2ec, gbc.sp());
        EXPECT(0xd71b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd719));
        EXPECT(0x1b, gbc.readMem(0xd71a));
        // CB 1B 02BD
        gbc.setState(0xe10c, 0xf2c, 0x5b50, 0x4725, 0x1a7, 0xe01c, 0x1, 0x1);
        gbc.writeMem(0xe10c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xf2c, gbc.sp());
        EXPECT(0xe10e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe10c));
        EXPECT(0x1b, gbc.readMem(0xe10d));
        // CB 1B 02BE
        gbc.setState(0x7685, 0x33cb, 0x9280, 0x795b, 0xf754, 0x3067, 0x1, 0x1);
        gbc.writeMem(0x7685, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x33cb, gbc.sp());
        EXPECT(0x7687, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02BF
        gbc.setState(0xd7dc, 0x9add, 0x6d0, 0xaa6, 0xf827, 0x65c9, 0x1, 0x0);
        gbc.writeMem(0xd7dc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x9add, gbc.sp());
        EXPECT(0xd7de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7dc));
        EXPECT(0x1b, gbc.readMem(0xd7dd));
        // CB 1B 02C0
        gbc.setState(0x95c9, 0x17df, 0x2070, 0x6aff, 0xa539, 0x3011, 0x0, 0x0);
        gbc.writeMem(0x95c9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x17df, gbc.sp());
        EXPECT(0x95cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95c9));
        EXPECT(0x1b, gbc.readMem(0x95ca));
        // CB 1B 02C1
        gbc.setState(0x5407, 0x6c9b, 0x1c40, 0x9c66, 0xed67, 0xbef5, 0x0, 0x1);
        gbc.writeMem(0x5407, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x6c9b, gbc.sp());
        EXPECT(0x5409, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02C2
        gbc.setState(0xe3e3, 0xdc8, 0x90f0, 0xe37, 0xa999, 0x9bd2, 0x0, 0x1);
        gbc.writeMem(0xe3e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xdc8, gbc.sp());
        EXPECT(0xe3e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3e3));
        EXPECT(0x1b, gbc.readMem(0xe3e4));
        // CB 1B 02C3
        gbc.setState(0x564c, 0x72c6, 0xa6f0, 0x9f72, 0x30, 0x5bbb, 0x0, 0x0);
        gbc.writeMem(0x564c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x72c6, gbc.sp());
        EXPECT(0x564e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02C4
        gbc.setState(0xd7c8, 0x238c, 0x1780, 0x1432, 0xc92c, 0x8b00, 0x1, 0x1);
        gbc.writeMem(0xd7c8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x238c, gbc.sp());
        EXPECT(0xd7ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7c8));
        EXPECT(0x1b, gbc.readMem(0xd7c9));
        // CB 1B 02C5
        gbc.setState(0x6de7, 0x60cc, 0xe420, 0x513b, 0x4fb8, 0xb4a1, 0x1, 0x1);
        gbc.writeMem(0x6de7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x60cc, gbc.sp());
        EXPECT(0x6de9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02C6
        gbc.setState(0xa1ad, 0x7293, 0x25a0, 0x4cc1, 0xd620, 0xf86e, 0x0, 0x0);
        gbc.writeMem(0xa1ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x7293, gbc.sp());
        EXPECT(0xa1af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1ad));
        EXPECT(0x1b, gbc.readMem(0xa1ae));
        // CB 1B 02C7
        gbc.setState(0x658e, 0x6c31, 0xb9f0, 0xd2b5, 0xc6e4, 0xcb58, 0x1, 0x1);
        gbc.writeMem(0x658e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x6c31, gbc.sp());
        EXPECT(0x6590, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02C8
        gbc.setState(0x80ef, 0xd223, 0xb590, 0x3bc6, 0x61b4, 0xc521, 0x1, 0x1);
        gbc.writeMem(0x80ef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xd223, gbc.sp());
        EXPECT(0x80f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80ef));
        EXPECT(0x1b, gbc.readMem(0x80f0));
        // CB 1B 02C9
        gbc.setState(0x606, 0xd0c7, 0x9960, 0x2252, 0x440a, 0xe72b, 0x0, 0x1);
        gbc.writeMem(0x606, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xd0c7, gbc.sp());
        EXPECT(0x608, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02CB
        gbc.setState(0xb1e5, 0xb99b, 0x9f0, 0x81a2, 0x55d6, 0x510a, 0x0, 0x0);
        gbc.writeMem(0xb1e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xb99b, gbc.sp());
        EXPECT(0xb1e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1e5));
        EXPECT(0x1b, gbc.readMem(0xb1e6));
        // CB 1B 02CC
        gbc.setState(0xc036, 0xf2fa, 0xbb60, 0x8980, 0x6727, 0x948e, 0x0, 0x1);
        gbc.writeMem(0xc036, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xf2fa, gbc.sp());
        EXPECT(0xc038, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc036));
        EXPECT(0x1b, gbc.readMem(0xc037));
        // CB 1B 02CD
        gbc.setState(0x6623, 0xc80b, 0xbf0, 0xcd52, 0x364a, 0x6ed9, 0x0, 0x1);
        gbc.writeMem(0x6623, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xc80b, gbc.sp());
        EXPECT(0x6625, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02CE
        gbc.setState(0xd8c7, 0xc190, 0x8da0, 0xf937, 0x1a92, 0x957a, 0x0, 0x1);
        gbc.writeMem(0xd8c7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xc190, gbc.sp());
        EXPECT(0xd8c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8c7));
        EXPECT(0x1b, gbc.readMem(0xd8c8));
        // CB 1B 02CF
        gbc.setState(0xeb39, 0x58a, 0x6f40, 0x94e8, 0x343c, 0xaf34, 0x1, 0x0);
        gbc.writeMem(0xeb39, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x58a, gbc.sp());
        EXPECT(0xeb3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb39));
        EXPECT(0x1b, gbc.readMem(0xeb3a));
        // CB 1B 02D0
        gbc.setState(0x1a10, 0x448d, 0x9260, 0x377, 0x1be8, 0x9ac, 0x1, 0x0);
        gbc.writeMem(0x1a10, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x448d, gbc.sp());
        EXPECT(0x1a12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02D1
        gbc.setState(0x2776, 0x99fb, 0x8fd0, 0xded1, 0x5b3d, 0x7aa8, 0x1, 0x0);
        gbc.writeMem(0x2776, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x99fb, gbc.sp());
        EXPECT(0x2778, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02D2
        gbc.setState(0xd430, 0x1915, 0x60, 0x64b6, 0xc0b0, 0xacad, 0x0, 0x0);
        gbc.writeMem(0xd430, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x1915, gbc.sp());
        EXPECT(0xd432, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd430));
        EXPECT(0x1b, gbc.readMem(0xd431));
        // CB 1B 02D3
        gbc.setState(0x78dd, 0x84fb, 0x9140, 0x86fe, 0x5bdd, 0x26ba, 0x1, 0x1);
        gbc.writeMem(0x78dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x84fb, gbc.sp());
        EXPECT(0x78df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02D4
        gbc.setState(0x20e1, 0x90bd, 0xcbc0, 0x3ec9, 0x8f2e, 0x8026, 0x0, 0x0);
        gbc.writeMem(0x20e1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x90bd, gbc.sp());
        EXPECT(0x20e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02D5
        gbc.setState(0x370b, 0xc53, 0xfe20, 0xb1c2, 0x539a, 0xe3b7, 0x1, 0x1);
        gbc.writeMem(0x370b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xc53, gbc.sp());
        EXPECT(0x370d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02D6
        gbc.setState(0xef3, 0x6753, 0x9d00, 0x6dc1, 0x80f8, 0x1972, 0x1, 0x0);
        gbc.writeMem(0xef3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x6753, gbc.sp());
        EXPECT(0xef5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02D7
        gbc.setState(0xae06, 0x7842, 0x1a80, 0x9a87, 0x747a, 0x26cd, 0x1, 0x0);
        gbc.writeMem(0xae06, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x7842, gbc.sp());
        EXPECT(0xae08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae06));
        EXPECT(0x1b, gbc.readMem(0xae07));
        // CB 1B 02D8
        gbc.setState(0xced9, 0x318d, 0xad40, 0x1077, 0x77fb, 0xfb83, 0x0, 0x0);
        gbc.writeMem(0xced9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x318d, gbc.sp());
        EXPECT(0xcedb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xced9));
        EXPECT(0x1b, gbc.readMem(0xceda));
        // CB 1B 02D9
        gbc.setState(0x261a, 0x17fb, 0xdfc0, 0xdad5, 0xdb5, 0x9861, 0x1, 0x0);
        gbc.writeMem(0x261a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x17fb, gbc.sp());
        EXPECT(0x261c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02DC
        gbc.setState(0xc783, 0x855a, 0x2d50, 0xf756, 0x53dc, 0x45b2, 0x1, 0x0);
        gbc.writeMem(0xc783, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x855a, gbc.sp());
        EXPECT(0xc785, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc783));
        EXPECT(0x1b, gbc.readMem(0xc784));
        // CB 1B 02DD
        gbc.setState(0x1a00, 0x5f90, 0xb360, 0x4d42, 0x488b, 0xd447, 0x1, 0x0);
        gbc.writeMem(0x1a00, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x5f90, gbc.sp());
        EXPECT(0x1a02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02DE
        gbc.setState(0x5385, 0xecce, 0x8c70, 0x4269, 0xb824, 0xa46c, 0x1, 0x1);
        gbc.writeMem(0x5385, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xecce, gbc.sp());
        EXPECT(0x5387, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02DF
        gbc.setState(0xb3ee, 0xab57, 0x3630, 0x72e6, 0xc45f, 0x49be, 0x0, 0x0);
        gbc.writeMem(0xb3ee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xab57, gbc.sp());
        EXPECT(0xb3f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3ee));
        EXPECT(0x1b, gbc.readMem(0xb3ef));
        // CB 1B 02E0
        gbc.setState(0x6bbb, 0x711d, 0xa200, 0x8373, 0x113b, 0x38d2, 0x0, 0x1);
        gbc.writeMem(0x6bbb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x711d, gbc.sp());
        EXPECT(0x6bbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02E1
        gbc.setState(0xaf8e, 0x937a, 0xa50, 0x3b6c, 0x3eef, 0xf607, 0x0, 0x0);
        gbc.writeMem(0xaf8e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x937a, gbc.sp());
        EXPECT(0xaf90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf8e));
        EXPECT(0x1b, gbc.readMem(0xaf8f));
        // CB 1B 02E2
        gbc.setState(0x4605, 0x134c, 0x3dc0, 0x3911, 0x65e1, 0x5255, 0x1, 0x0);
        gbc.writeMem(0x4605, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x134c, gbc.sp());
        EXPECT(0x4607, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02E3
        gbc.setState(0x12b4, 0x1078, 0x6a10, 0x997b, 0xdb62, 0x1286, 0x1, 0x1);
        gbc.writeMem(0x12b4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x1078, gbc.sp());
        EXPECT(0x12b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02E4
        gbc.setState(0xd3e0, 0x674f, 0xab30, 0x2f2f, 0x9880, 0x4265, 0x1, 0x0);
        gbc.writeMem(0xd3e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x674f, gbc.sp());
        EXPECT(0xd3e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3e0));
        EXPECT(0x1b, gbc.readMem(0xd3e1));
        // CB 1B 02E5
        gbc.setState(0x4318, 0x8aa3, 0x5420, 0x393e, 0xb478, 0x41d9, 0x1, 0x0);
        gbc.writeMem(0x4318, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x8aa3, gbc.sp());
        EXPECT(0x431a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02E6
        gbc.setState(0xf01, 0xe728, 0x5660, 0x3bd2, 0xbe28, 0x93f8, 0x0, 0x1);
        gbc.writeMem(0xf01, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xe728, gbc.sp());
        EXPECT(0xf03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02E7
        gbc.setState(0x3862, 0x2eda, 0xaec0, 0x8faa, 0x5f89, 0x1e8c, 0x0, 0x0);
        gbc.writeMem(0x3862, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x2eda, gbc.sp());
        EXPECT(0x3864, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02E8
        gbc.setState(0xd2c8, 0x644d, 0xdc40, 0x83a4, 0x1417, 0x8526, 0x0, 0x1);
        gbc.writeMem(0xd2c8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x644d, gbc.sp());
        EXPECT(0xd2ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2c8));
        EXPECT(0x1b, gbc.readMem(0xd2c9));
        // CB 1B 02E9
        gbc.setState(0xc0e5, 0x2616, 0xde0, 0x8925, 0x1936, 0xf9ed, 0x0, 0x0);
        gbc.writeMem(0xc0e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x2616, gbc.sp());
        EXPECT(0xc0e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0e5));
        EXPECT(0x1b, gbc.readMem(0xc0e6));
        // CB 1B 02EA
        gbc.setState(0x3b4c, 0x8bfb, 0x6720, 0xf3b7, 0x9fc6, 0x10cc, 0x1, 0x1);
        gbc.writeMem(0x3b4c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x8bfb, gbc.sp());
        EXPECT(0x3b4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02EB
        gbc.setState(0x550a, 0x2fda, 0xdd90, 0x1db9, 0xb352, 0x87e, 0x1, 0x1);
        gbc.writeMem(0x550a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x2fda, gbc.sp());
        EXPECT(0x550c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02EC
        gbc.setState(0x96a9, 0x738d, 0x7b80, 0xf49a, 0x4e8a, 0x5736, 0x0, 0x1);
        gbc.writeMem(0x96a9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x738d, gbc.sp());
        EXPECT(0x96ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96a9));
        EXPECT(0x1b, gbc.readMem(0x96aa));
        // CB 1B 02ED
        gbc.setState(0x722, 0x14c2, 0x7980, 0xabf8, 0xe36a, 0x1c19, 0x1, 0x0);
        gbc.writeMem(0x722, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x14c2, gbc.sp());
        EXPECT(0x724, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02EE
        gbc.setState(0xb3e1, 0xb7c4, 0x9210, 0xe3f4, 0x8703, 0xec7e, 0x0, 0x1);
        gbc.writeMem(0xb3e1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xb7c4, gbc.sp());
        EXPECT(0xb3e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3e1));
        EXPECT(0x1b, gbc.readMem(0xb3e2));
        // CB 1B 02EF
        gbc.setState(0xab74, 0x4dd6, 0x5310, 0x412, 0xb3ce, 0x81ea, 0x1, 0x0);
        gbc.writeMem(0xab74, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x4dd6, gbc.sp());
        EXPECT(0xab76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab74));
        EXPECT(0x1b, gbc.readMem(0xab75));
        // CB 1B 02F0
        gbc.setState(0xd576, 0xffa3, 0xa0, 0x3647, 0x9a68, 0x1b92, 0x0, 0x1);
        gbc.writeMem(0xd576, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xffa3, gbc.sp());
        EXPECT(0xd578, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd576));
        EXPECT(0x1b, gbc.readMem(0xd577));
        // CB 1B 02F1
        gbc.setState(0x46d5, 0x7c14, 0x7e0, 0x72ab, 0xdd31, 0x73e6, 0x0, 0x0);
        gbc.writeMem(0x46d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x7c14, gbc.sp());
        EXPECT(0x46d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02F2
        gbc.setState(0x5a7f, 0x55bd, 0x29d0, 0x99f7, 0xcfc5, 0xd58f, 0x1, 0x0);
        gbc.writeMem(0x5a7f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x55bd, gbc.sp());
        EXPECT(0x5a81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02F3
        gbc.setState(0xa391, 0x6f67, 0x3870, 0xc337, 0xdfe5, 0xba6b, 0x0, 0x1);
        gbc.writeMem(0xa391, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x6f67, gbc.sp());
        EXPECT(0xa393, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa391));
        EXPECT(0x1b, gbc.readMem(0xa392));
        // CB 1B 02F4
        gbc.setState(0x1c3b, 0xb9cd, 0xba50, 0xc99c, 0x3b22, 0xcd82, 0x0, 0x1);
        gbc.writeMem(0x1c3b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xb9cd, gbc.sp());
        EXPECT(0x1c3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 02F5
        gbc.setState(0xa311, 0x4411, 0xf480, 0x9ac4, 0x5fe4, 0x2a69, 0x0, 0x1);
        gbc.writeMem(0xa311, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x4411, gbc.sp());
        EXPECT(0xa313, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa311));
        EXPECT(0x1b, gbc.readMem(0xa312));
        // CB 1B 02F6
        gbc.setState(0xc233, 0xd464, 0xe260, 0x5380, 0x9b3d, 0x8726, 0x1, 0x0);
        gbc.writeMem(0xc233, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xd464, gbc.sp());
        EXPECT(0xc235, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc233));
        EXPECT(0x1b, gbc.readMem(0xc234));
        // CB 1B 02F7
        gbc.setState(0x5a72, 0xe37b, 0x2a50, 0x37a2, 0x9b87, 0x980, 0x0, 0x0);
        gbc.writeMem(0x5a72, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xe37b, gbc.sp());
        EXPECT(0x5a74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02F8
        gbc.setState(0x4036, 0x8530, 0x61a0, 0x4fda, 0xb405, 0x1300, 0x0, 0x0);
        gbc.writeMem(0x4036, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x8530, gbc.sp());
        EXPECT(0x4038, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 02F9
        gbc.setState(0xe06c, 0x5645, 0x390, 0x14e0, 0x4191, 0x439c, 0x1, 0x0);
        gbc.writeMem(0xe06c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x5645, gbc.sp());
        EXPECT(0xe06e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe06c));
        EXPECT(0x1b, gbc.readMem(0xe06d));
        // CB 1B 02FB
        gbc.setState(0xe5fb, 0xb2c2, 0xd040, 0xf317, 0xd788, 0x8681, 0x0, 0x0);
        gbc.writeMem(0xe5fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xb2c2, gbc.sp());
        EXPECT(0xe5fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5fb));
        EXPECT(0x1b, gbc.readMem(0xe5fc));
        // CB 1B 02FC
        gbc.setState(0xe6ce, 0x7007, 0xd370, 0x74dc, 0xa6a, 0x526e, 0x0, 0x0);
        gbc.writeMem(0xe6ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x7007, gbc.sp());
        EXPECT(0xe6d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6ce));
        EXPECT(0x1b, gbc.readMem(0xe6cf));
        // CB 1B 02FD
        gbc.setState(0xc401, 0x4818, 0x14d0, 0x8dbb, 0xc6e0, 0x4070, 0x0, 0x1);
        gbc.writeMem(0xc401, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x4818, gbc.sp());
        EXPECT(0xc403, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc401));
        EXPECT(0x1b, gbc.readMem(0xc402));
        // CB 1B 02FE
        gbc.setState(0x99aa, 0x99a7, 0xa400, 0x1811, 0xf0e2, 0xee4c, 0x1, 0x0);
        gbc.writeMem(0x99aa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x99a7, gbc.sp());
        EXPECT(0x99ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99aa));
        EXPECT(0x1b, gbc.readMem(0x99ab));
        // CB 1B 02FF
        gbc.setState(0x7197, 0x5972, 0x9ea0, 0xbadc, 0x590d, 0xf4d6, 0x1, 0x1);
        gbc.writeMem(0x7197, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x5972, gbc.sp());
        EXPECT(0x7199, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0300
        gbc.setState(0x33da, 0xbd62, 0xdcb0, 0xcc8c, 0x44bf, 0xfe26, 0x1, 0x0);
        gbc.writeMem(0x33da, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xbd62, gbc.sp());
        EXPECT(0x33dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0301
        gbc.setState(0x11b, 0x1f23, 0xd60, 0x56f1, 0x63b1, 0x6783, 0x1, 0x0);
        gbc.writeMem(0x11b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x1f23, gbc.sp());
        EXPECT(0x11d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0302
        gbc.setState(0xbcb8, 0xd778, 0x8820, 0xe8ef, 0xb7d2, 0x3fd1, 0x1, 0x0);
        gbc.writeMem(0xbcb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xd778, gbc.sp());
        EXPECT(0xbcba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcb8));
        EXPECT(0x1b, gbc.readMem(0xbcb9));
        // CB 1B 0303
        gbc.setState(0xe920, 0x9c41, 0xa600, 0x664c, 0x72da, 0xf3d3, 0x1, 0x1);
        gbc.writeMem(0xe920, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x9c41, gbc.sp());
        EXPECT(0xe922, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe920));
        EXPECT(0x1b, gbc.readMem(0xe921));
        // CB 1B 0304
        gbc.setState(0x8dbe, 0x47e8, 0xf970, 0xf8f5, 0x67, 0xf447, 0x1, 0x0);
        gbc.writeMem(0x8dbe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x47e8, gbc.sp());
        EXPECT(0x8dc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dbe));
        EXPECT(0x1b, gbc.readMem(0x8dbf));
        // CB 1B 0305
        gbc.setState(0x425e, 0x78ba, 0x9460, 0x4211, 0x74db, 0x6384, 0x1, 0x0);
        gbc.writeMem(0x425e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x78ba, gbc.sp());
        EXPECT(0x4260, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0306
        gbc.setState(0x4be, 0x8f57, 0xfdf0, 0xcf56, 0xf0dc, 0xd97c, 0x0, 0x1);
        gbc.writeMem(0x4be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x8f57, gbc.sp());
        EXPECT(0x4c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0307
        gbc.setState(0x8f, 0xfe55, 0xc830, 0x569d, 0x2679, 0x69ab, 0x1, 0x0);
        gbc.writeMem(0x8f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xfe55, gbc.sp());
        EXPECT(0x91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0308
        gbc.setState(0x3a23, 0xf357, 0x45c0, 0xe614, 0xd0a, 0x31b9, 0x0, 0x0);
        gbc.writeMem(0x3a23, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xf357, gbc.sp());
        EXPECT(0x3a25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0309
        gbc.setState(0x1c87, 0x7982, 0x1cb0, 0xc97f, 0x7156, 0x10af, 0x0, 0x1);
        gbc.writeMem(0x1c87, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x7982, gbc.sp());
        EXPECT(0x1c89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 030B
        gbc.setState(0xda64, 0xefaa, 0x7940, 0x7c7e, 0x5926, 0xeea9, 0x1, 0x1);
        gbc.writeMem(0xda64, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xefaa, gbc.sp());
        EXPECT(0xda66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda64));
        EXPECT(0x1b, gbc.readMem(0xda65));
        // CB 1B 030C
        gbc.setState(0x1706, 0xead1, 0xa670, 0x91f3, 0xefb9, 0xaa35, 0x1, 0x1);
        gbc.writeMem(0x1706, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xead1, gbc.sp());
        EXPECT(0x1708, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 030E
        gbc.setState(0x914b, 0x1277, 0xe470, 0x9de0, 0xf1f6, 0x2710, 0x0, 0x0);
        gbc.writeMem(0x914b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x1277, gbc.sp());
        EXPECT(0x914d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x914b));
        EXPECT(0x1b, gbc.readMem(0x914c));
        // CB 1B 030F
        gbc.setState(0x99f7, 0x7e34, 0x2e30, 0x8aed, 0x5490, 0x60be, 0x0, 0x1);
        gbc.writeMem(0x99f7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x7e34, gbc.sp());
        EXPECT(0x99f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99f7));
        EXPECT(0x1b, gbc.readMem(0x99f8));
        // CB 1B 0310
        gbc.setState(0x9f1d, 0x2380, 0xc5c0, 0x731c, 0xf665, 0xebc2, 0x0, 0x1);
        gbc.writeMem(0x9f1d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x2380, gbc.sp());
        EXPECT(0x9f1f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f1d));
        EXPECT(0x1b, gbc.readMem(0x9f1e));
        // CB 1B 0311
        gbc.setState(0x15a9, 0xc83e, 0x4c70, 0x5153, 0x66fb, 0x630e, 0x1, 0x1);
        gbc.writeMem(0x15a9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xc83e, gbc.sp());
        EXPECT(0x15ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0312
        gbc.setState(0x2744, 0xd89e, 0x8a80, 0xa0db, 0x5b2c, 0x621c, 0x0, 0x0);
        gbc.writeMem(0x2744, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xd89e, gbc.sp());
        EXPECT(0x2746, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0313
        gbc.setState(0x852f, 0x1580, 0x99a0, 0x480, 0xaab1, 0xea28, 0x0, 0x0);
        gbc.writeMem(0x852f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x1580, gbc.sp());
        EXPECT(0x8531, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x852f));
        EXPECT(0x1b, gbc.readMem(0x8530));
        // CB 1B 0314
        gbc.setState(0xc997, 0x3bd3, 0xdcf0, 0xc7fe, 0xcb41, 0xd812, 0x1, 0x1);
        gbc.writeMem(0xc997, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x3bd3, gbc.sp());
        EXPECT(0xc999, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc997));
        EXPECT(0x1b, gbc.readMem(0xc998));
        // CB 1B 0315
        gbc.setState(0xee58, 0x584b, 0x31f0, 0xe26f, 0xae8, 0xd481, 0x0, 0x0);
        gbc.writeMem(0xee58, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x584b, gbc.sp());
        EXPECT(0xee5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee58));
        EXPECT(0x1b, gbc.readMem(0xee59));
        // CB 1B 0316
        gbc.setState(0x57a2, 0x4124, 0xbcf0, 0xd0a7, 0x36e, 0xbde9, 0x1, 0x1);
        gbc.writeMem(0x57a2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x4124, gbc.sp());
        EXPECT(0x57a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0317
        gbc.setState(0x8395, 0x7aba, 0x4850, 0x2fe9, 0x67c, 0xd1d3, 0x0, 0x0);
        gbc.writeMem(0x8395, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7aba, gbc.sp());
        EXPECT(0x8397, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8395));
        EXPECT(0x1b, gbc.readMem(0x8396));
        // CB 1B 0318
        gbc.setState(0xb6e8, 0x6cf2, 0xe9a0, 0xa220, 0xee7b, 0x1d41, 0x1, 0x0);
        gbc.writeMem(0xb6e8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x6cf2, gbc.sp());
        EXPECT(0xb6ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6e8));
        EXPECT(0x1b, gbc.readMem(0xb6e9));
        // CB 1B 0319
        gbc.setState(0x43ef, 0x583a, 0xa2d0, 0xa3f7, 0xc6ce, 0x24e8, 0x0, 0x1);
        gbc.writeMem(0x43ef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x583a, gbc.sp());
        EXPECT(0x43f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 031A
        gbc.setState(0xe441, 0xe7a0, 0x78c0, 0x9cbe, 0x4cb1, 0x66a0, 0x0, 0x1);
        gbc.writeMem(0xe441, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xe7a0, gbc.sp());
        EXPECT(0xe443, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe441));
        EXPECT(0x1b, gbc.readMem(0xe442));
        // CB 1B 031B
        gbc.setState(0xc87a, 0x56c0, 0x5060, 0xdf6e, 0xbb71, 0xa75e, 0x1, 0x1);
        gbc.writeMem(0xc87a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x56c0, gbc.sp());
        EXPECT(0xc87c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc87a));
        EXPECT(0x1b, gbc.readMem(0xc87b));
        // CB 1B 031C
        gbc.setState(0x368d, 0x35ee, 0xf8a0, 0xb884, 0x41a, 0x7912, 0x1, 0x0);
        gbc.writeMem(0x368d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x35ee, gbc.sp());
        EXPECT(0x368f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 031D
        gbc.setState(0xec52, 0xa3b, 0xa8c0, 0x9d6e, 0x6b9, 0xdac1, 0x1, 0x0);
        gbc.writeMem(0xec52, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xa3b, gbc.sp());
        EXPECT(0xec54, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec52));
        EXPECT(0x1b, gbc.readMem(0xec53));
        // CB 1B 031E
        gbc.setState(0x4210, 0x518f, 0x7bb0, 0xd874, 0x5c3d, 0xd3e3, 0x1, 0x0);
        gbc.writeMem(0x4210, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x518f, gbc.sp());
        EXPECT(0x4212, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 031F
        gbc.setState(0x7b7a, 0x97d5, 0x7190, 0xbdb7, 0xcc45, 0xec7d, 0x0, 0x1);
        gbc.writeMem(0x7b7a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x97d5, gbc.sp());
        EXPECT(0x7b7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0320
        gbc.setState(0x64fa, 0x7923, 0x1e80, 0x13f8, 0x37d1, 0xd83c, 0x0, 0x0);
        gbc.writeMem(0x64fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x7923, gbc.sp());
        EXPECT(0x64fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0321
        gbc.setState(0x43f, 0x45de, 0x65f0, 0xa06d, 0x3968, 0x6d4d, 0x0, 0x0);
        gbc.writeMem(0x43f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x45de, gbc.sp());
        EXPECT(0x441, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0322
        gbc.setState(0x6e3d, 0xc4c5, 0x1770, 0x3a85, 0x1b03, 0x2cfc, 0x0, 0x1);
        gbc.writeMem(0x6e3d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xc4c5, gbc.sp());
        EXPECT(0x6e3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0323
        gbc.setState(0xd74a, 0x2dd5, 0x72d0, 0x9e67, 0x5a0d, 0xeb44, 0x0, 0x1);
        gbc.writeMem(0xd74a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x2dd5, gbc.sp());
        EXPECT(0xd74c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd74a));
        EXPECT(0x1b, gbc.readMem(0xd74b));
        // CB 1B 0325
        gbc.setState(0xa7de, 0x83d5, 0x7490, 0x34d, 0x55db, 0x732d, 0x0, 0x1);
        gbc.writeMem(0xa7de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x83d5, gbc.sp());
        EXPECT(0xa7e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7de));
        EXPECT(0x1b, gbc.readMem(0xa7df));
        // CB 1B 0326
        gbc.setState(0x1cdd, 0xb783, 0x93a0, 0xf998, 0xb904, 0x5b42, 0x1, 0x0);
        gbc.writeMem(0x1cdd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xb783, gbc.sp());
        EXPECT(0x1cdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0327
        gbc.setState(0x9769, 0xf98d, 0xc720, 0x46c6, 0x925c, 0x8bd, 0x1, 0x1);
        gbc.writeMem(0x9769, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xf98d, gbc.sp());
        EXPECT(0x976b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9769));
        EXPECT(0x1b, gbc.readMem(0x976a));
        // CB 1B 0328
        gbc.setState(0xad8c, 0xf2ff, 0xd690, 0x110d, 0x23f1, 0x14e5, 0x1, 0x0);
        gbc.writeMem(0xad8c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xf2ff, gbc.sp());
        EXPECT(0xad8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad8c));
        EXPECT(0x1b, gbc.readMem(0xad8d));
        // CB 1B 032A
        gbc.setState(0x2cf3, 0xf351, 0xc3e0, 0xa4, 0x1ff5, 0xde4b, 0x0, 0x1);
        gbc.writeMem(0x2cf3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xf351, gbc.sp());
        EXPECT(0x2cf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 032B
        gbc.setState(0x41dd, 0x2238, 0x2750, 0xe335, 0xd84f, 0x8d8f, 0x1, 0x0);
        gbc.writeMem(0x41dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x2238, gbc.sp());
        EXPECT(0x41df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 032C
        gbc.setState(0xddd4, 0xbeb2, 0x1990, 0xb8f5, 0xf1fb, 0x2f2c, 0x1, 0x0);
        gbc.writeMem(0xddd4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xbeb2, gbc.sp());
        EXPECT(0xddd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddd4));
        EXPECT(0x1b, gbc.readMem(0xddd5));
        // CB 1B 032D
        gbc.setState(0x8a33, 0xe8e3, 0xeaf0, 0x8bee, 0xeee9, 0x1363, 0x0, 0x0);
        gbc.writeMem(0x8a33, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xe8e3, gbc.sp());
        EXPECT(0x8a35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a33));
        EXPECT(0x1b, gbc.readMem(0x8a34));
        // CB 1B 032E
        gbc.setState(0x5e9e, 0x7db1, 0xb3a0, 0x4d63, 0xe894, 0x5a82, 0x1, 0x1);
        gbc.writeMem(0x5e9e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x7db1, gbc.sp());
        EXPECT(0x5ea0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 032F
        gbc.setState(0x87b3, 0x742f, 0x4220, 0xc238, 0x5ad1, 0x9cdc, 0x1, 0x1);
        gbc.writeMem(0x87b3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x742f, gbc.sp());
        EXPECT(0x87b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87b3));
        EXPECT(0x1b, gbc.readMem(0x87b4));
        // CB 1B 0330
        gbc.setState(0x7f35, 0x23c3, 0x63d0, 0x9493, 0x754b, 0x66d7, 0x1, 0x1);
        gbc.writeMem(0x7f35, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x23c3, gbc.sp());
        EXPECT(0x7f37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0332
        gbc.setState(0x6b9d, 0xa5dd, 0x5ba0, 0xe048, 0xdf25, 0x853, 0x0, 0x0);
        gbc.writeMem(0x6b9d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xa5dd, gbc.sp());
        EXPECT(0x6b9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0333
        gbc.setState(0x5677, 0xf548, 0x9830, 0x9d50, 0x50b0, 0x8491, 0x1, 0x1);
        gbc.writeMem(0x5677, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xf548, gbc.sp());
        EXPECT(0x5679, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0334
        gbc.setState(0xe086, 0xc5e5, 0x6a30, 0x2286, 0x6be2, 0xde27, 0x0, 0x1);
        gbc.writeMem(0xe086, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xc5e5, gbc.sp());
        EXPECT(0xe088, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe086));
        EXPECT(0x1b, gbc.readMem(0xe087));
        // CB 1B 0335
        gbc.setState(0x877c, 0x165e, 0x9cb0, 0x16a7, 0x2bdb, 0xd223, 0x0, 0x1);
        gbc.writeMem(0x877c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x165e, gbc.sp());
        EXPECT(0x877e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x877c));
        EXPECT(0x1b, gbc.readMem(0x877d));
        // CB 1B 0336
        gbc.setState(0xde6a, 0xa690, 0x97a0, 0xc959, 0x422e, 0x49d0, 0x0, 0x0);
        gbc.writeMem(0xde6a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xa690, gbc.sp());
        EXPECT(0xde6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde6a));
        EXPECT(0x1b, gbc.readMem(0xde6b));
        // CB 1B 0337
        gbc.setState(0x5c83, 0x3707, 0x5450, 0x8c56, 0xcd4b, 0x8b1, 0x0, 0x1);
        gbc.writeMem(0x5c83, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x3707, gbc.sp());
        EXPECT(0x5c85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0338
        gbc.setState(0xb00f, 0x6012, 0xf20, 0x455f, 0x1912, 0xb61e, 0x0, 0x0);
        gbc.writeMem(0xb00f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x6012, gbc.sp());
        EXPECT(0xb011, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb00f));
        EXPECT(0x1b, gbc.readMem(0xb010));
        // CB 1B 0339
        gbc.setState(0x2ec2, 0x6307, 0x2730, 0xf3fc, 0x4779, 0xf227, 0x0, 0x0);
        gbc.writeMem(0x2ec2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x6307, gbc.sp());
        EXPECT(0x2ec4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 033A
        gbc.setState(0xbd71, 0xecca, 0x6e50, 0x7b1b, 0x38cb, 0xee4b, 0x1, 0x0);
        gbc.writeMem(0xbd71, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xecca, gbc.sp());
        EXPECT(0xbd73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd71));
        EXPECT(0x1b, gbc.readMem(0xbd72));
        // CB 1B 033B
        gbc.setState(0x6bb8, 0xbb9c, 0x7d20, 0x3ec2, 0x8ace, 0x3ca, 0x1, 0x0);
        gbc.writeMem(0x6bb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xbb9c, gbc.sp());
        EXPECT(0x6bba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 033C
        gbc.setState(0x1fad, 0x98d5, 0x2910, 0xba4f, 0xe33c, 0x65b4, 0x0, 0x0);
        gbc.writeMem(0x1fad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x98d5, gbc.sp());
        EXPECT(0x1faf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 033D
        gbc.setState(0x498a, 0x869e, 0x66f0, 0x55d2, 0xef2f, 0x477, 0x1, 0x1);
        gbc.writeMem(0x498a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x869e, gbc.sp());
        EXPECT(0x498c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 033E
        gbc.setState(0x2d72, 0x2f4f, 0x6f30, 0xd78e, 0x906f, 0x3503, 0x1, 0x1);
        gbc.writeMem(0x2d72, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x2f4f, gbc.sp());
        EXPECT(0x2d74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 033F
        gbc.setState(0x4727, 0x9a6e, 0x4d50, 0x8dbd, 0xac7e, 0x5d67, 0x1, 0x1);
        gbc.writeMem(0x4727, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x9a6e, gbc.sp());
        EXPECT(0x4729, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0340
        gbc.setState(0x5261, 0x2eb7, 0xac10, 0xc6a2, 0xdb81, 0x1180, 0x0, 0x1);
        gbc.writeMem(0x5261, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x2eb7, gbc.sp());
        EXPECT(0x5263, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0341
        gbc.setState(0xb1fb, 0x43de, 0xa9b0, 0x44ad, 0x27ef, 0xf702, 0x1, 0x1);
        gbc.writeMem(0xb1fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x43de, gbc.sp());
        EXPECT(0xb1fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1fb));
        EXPECT(0x1b, gbc.readMem(0xb1fc));
        // CB 1B 0342
        gbc.setState(0x154d, 0xaed6, 0xe0c0, 0x4acb, 0xbff6, 0x97b, 0x1, 0x0);
        gbc.writeMem(0x154d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xaed6, gbc.sp());
        EXPECT(0x154f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0343
        gbc.setState(0x5236, 0x5307, 0xc2c0, 0x3975, 0x29dd, 0x9e63, 0x0, 0x0);
        gbc.writeMem(0x5236, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x5307, gbc.sp());
        EXPECT(0x5238, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0344
        gbc.setState(0x9d43, 0xc72f, 0xdd20, 0x3450, 0xd19d, 0xaa3b, 0x1, 0x1);
        gbc.writeMem(0x9d43, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xc72f, gbc.sp());
        EXPECT(0x9d45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d43));
        EXPECT(0x1b, gbc.readMem(0x9d44));
        // CB 1B 0345
        gbc.setState(0x57dc, 0x88d2, 0x91e0, 0x2efe, 0x8416, 0x9147, 0x1, 0x0);
        gbc.writeMem(0x57dc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x88d2, gbc.sp());
        EXPECT(0x57de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0346
        gbc.setState(0x20f0, 0x1594, 0x1860, 0xf66, 0x7e90, 0xe0, 0x0, 0x1);
        gbc.writeMem(0x20f0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x1594, gbc.sp());
        EXPECT(0x20f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0347
        gbc.setState(0xada0, 0x16f9, 0xdfe0, 0xe0df, 0xf866, 0xe0cf, 0x1, 0x1);
        gbc.writeMem(0xada0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x16f9, gbc.sp());
        EXPECT(0xada2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xada0));
        EXPECT(0x1b, gbc.readMem(0xada1));
        // CB 1B 0348
        gbc.setState(0x273f, 0xa3d9, 0xcde0, 0x92b, 0x1d9b, 0x32d8, 0x1, 0x1);
        gbc.writeMem(0x273f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xa3d9, gbc.sp());
        EXPECT(0x2741, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0349
        gbc.setState(0x263, 0xa2cc, 0xdd90, 0x31c, 0xac1d, 0xeba0, 0x1, 0x0);
        gbc.writeMem(0x263, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xa2cc, gbc.sp());
        EXPECT(0x265, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 034A
        gbc.setState(0x5cb9, 0x3121, 0xbf60, 0xf657, 0x5660, 0xf3ef, 0x1, 0x0);
        gbc.writeMem(0x5cb9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x3121, gbc.sp());
        EXPECT(0x5cbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 034B
        gbc.setState(0xda10, 0x20e2, 0xbf10, 0x9191, 0xa974, 0x9b52, 0x0, 0x0);
        gbc.writeMem(0xda10, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x20e2, gbc.sp());
        EXPECT(0xda12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda10));
        EXPECT(0x1b, gbc.readMem(0xda11));
        // CB 1B 034C
        gbc.setState(0x999a, 0xcf6b, 0xa6e0, 0x82bc, 0xb50, 0xc242, 0x1, 0x1);
        gbc.writeMem(0x999a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xcf6b, gbc.sp());
        EXPECT(0x999c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x999a));
        EXPECT(0x1b, gbc.readMem(0x999b));
        // CB 1B 034D
        gbc.setState(0x9ad, 0x23b9, 0xd290, 0xa9e, 0xee88, 0x2274, 0x1, 0x0);
        gbc.writeMem(0x9ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x23b9, gbc.sp());
        EXPECT(0x9af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 034E
        gbc.setState(0x239c, 0x7c4e, 0xbcc0, 0xa1a3, 0x6c63, 0x30a6, 0x0, 0x1);
        gbc.writeMem(0x239c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x7c4e, gbc.sp());
        EXPECT(0x239e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 034F
        gbc.setState(0x25e0, 0xf436, 0xf710, 0x815e, 0x5d55, 0xffe4, 0x1, 0x0);
        gbc.writeMem(0x25e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf436, gbc.sp());
        EXPECT(0x25e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0351
        gbc.setState(0x1b3c, 0x569e, 0x8d50, 0x2f90, 0x6665, 0xfbb, 0x0, 0x0);
        gbc.writeMem(0x1b3c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x569e, gbc.sp());
        EXPECT(0x1b3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0352
        gbc.setState(0xb3d6, 0x364b, 0xcd50, 0x3cf6, 0xeb24, 0xa5e9, 0x1, 0x0);
        gbc.writeMem(0xb3d6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x364b, gbc.sp());
        EXPECT(0xb3d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3d6));
        EXPECT(0x1b, gbc.readMem(0xb3d7));
        // CB 1B 0353
        gbc.setState(0xd8b0, 0x99a0, 0x100, 0xc8e, 0x511b, 0x29c3, 0x0, 0x1);
        gbc.writeMem(0xd8b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x99a0, gbc.sp());
        EXPECT(0xd8b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8b0));
        EXPECT(0x1b, gbc.readMem(0xd8b1));
        // CB 1B 0354
        gbc.setState(0xb8ff, 0xb599, 0xb360, 0x4933, 0xba12, 0x2691, 0x1, 0x1);
        gbc.writeMem(0xb8ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xb599, gbc.sp());
        EXPECT(0xb901, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8ff));
        EXPECT(0x1b, gbc.readMem(0xb900));
        // CB 1B 0355
        gbc.setState(0x47ea, 0x440a, 0xab60, 0x5b93, 0x8930, 0xae6d, 0x1, 0x1);
        gbc.writeMem(0x47ea, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x440a, gbc.sp());
        EXPECT(0x47ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0356
        gbc.setState(0xee90, 0x4328, 0x7150, 0x5f2f, 0xb074, 0xbdf1, 0x1, 0x1);
        gbc.writeMem(0xee90, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x4328, gbc.sp());
        EXPECT(0xee92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee90));
        EXPECT(0x1b, gbc.readMem(0xee91));
        // CB 1B 0357
        gbc.setState(0xc628, 0xf01f, 0x0, 0x9f3e, 0xd248, 0x1eb6, 0x1, 0x0);
        gbc.writeMem(0xc628, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xf01f, gbc.sp());
        EXPECT(0xc62a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc628));
        EXPECT(0x1b, gbc.readMem(0xc629));
        // CB 1B 0358
        gbc.setState(0x6b1d, 0x36fa, 0x970, 0x7f2d, 0x8668, 0x689b, 0x1, 0x1);
        gbc.writeMem(0x6b1d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x36fa, gbc.sp());
        EXPECT(0x6b1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0359
        gbc.setState(0x603d, 0x6bbb, 0xb3f0, 0xd9db, 0xba04, 0xc939, 0x0, 0x1);
        gbc.writeMem(0x603d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x6bbb, gbc.sp());
        EXPECT(0x603f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 035A
        gbc.setState(0x60e5, 0xbdb7, 0x24d0, 0xe1b8, 0xa72d, 0x8e65, 0x1, 0x1);
        gbc.writeMem(0x60e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xbdb7, gbc.sp());
        EXPECT(0x60e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 035B
        gbc.setState(0x65f2, 0xffca, 0x2b80, 0x5c25, 0x7f3a, 0x3e27, 0x0, 0x0);
        gbc.writeMem(0x65f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xffca, gbc.sp());
        EXPECT(0x65f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 035C
        gbc.setState(0x498f, 0xa826, 0x5700, 0x754b, 0xc3df, 0x549a, 0x0, 0x1);
        gbc.writeMem(0x498f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xa826, gbc.sp());
        EXPECT(0x4991, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 035D
        gbc.setState(0xb244, 0x258c, 0x1b00, 0x14fd, 0xbf5f, 0x6a4d, 0x0, 0x1);
        gbc.writeMem(0xb244, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x258c, gbc.sp());
        EXPECT(0xb246, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb244));
        EXPECT(0x1b, gbc.readMem(0xb245));
        // CB 1B 035E
        gbc.setState(0x9b00, 0xedfb, 0xec90, 0x2c61, 0xf3ef, 0x5d9c, 0x1, 0x1);
        gbc.writeMem(0x9b00, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xedfb, gbc.sp());
        EXPECT(0x9b02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b00));
        EXPECT(0x1b, gbc.readMem(0x9b01));
        // CB 1B 035F
        gbc.setState(0xe3b6, 0x2dc4, 0xa9e0, 0xf0c0, 0xc0f6, 0x56b0, 0x1, 0x0);
        gbc.writeMem(0xe3b6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x2dc4, gbc.sp());
        EXPECT(0xe3b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3b6));
        EXPECT(0x1b, gbc.readMem(0xe3b7));
        // CB 1B 0360
        gbc.setState(0x3f4, 0xfc06, 0xe860, 0x66e3, 0x4328, 0x2f54, 0x0, 0x1);
        gbc.writeMem(0x3f4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xfc06, gbc.sp());
        EXPECT(0x3f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0361
        gbc.setState(0xc77d, 0x22e2, 0xd7f0, 0xc55, 0xa194, 0x559c, 0x0, 0x0);
        gbc.writeMem(0xc77d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x22e2, gbc.sp());
        EXPECT(0xc77f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc77d));
        EXPECT(0x1b, gbc.readMem(0xc77e));
        // CB 1B 0362
        gbc.setState(0x6962, 0xb971, 0xa1d0, 0xa207, 0x6d2f, 0xd6b1, 0x1, 0x0);
        gbc.writeMem(0x6962, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xb971, gbc.sp());
        EXPECT(0x6964, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0363
        gbc.setState(0x6792, 0x3d58, 0xb330, 0xb7d1, 0xb76f, 0x4b2a, 0x0, 0x0);
        gbc.writeMem(0x6792, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x3d58, gbc.sp());
        EXPECT(0x6794, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0364
        gbc.setState(0xcf3f, 0x505a, 0x72b0, 0x2c33, 0x1256, 0xf4d2, 0x0, 0x1);
        gbc.writeMem(0xcf3f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x505a, gbc.sp());
        EXPECT(0xcf41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf3f));
        EXPECT(0x1b, gbc.readMem(0xcf40));
        // CB 1B 0365
        gbc.setState(0x4431, 0xa511, 0xa280, 0x689b, 0x481a, 0x8c81, 0x1, 0x0);
        gbc.writeMem(0x4431, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xa511, gbc.sp());
        EXPECT(0x4433, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0366
        gbc.setState(0x8600, 0x1411, 0x6390, 0x6a52, 0xc215, 0xd698, 0x0, 0x0);
        gbc.writeMem(0x8600, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x1411, gbc.sp());
        EXPECT(0x8602, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8600));
        EXPECT(0x1b, gbc.readMem(0x8601));
        // CB 1B 0367
        gbc.setState(0x1848, 0xb9e2, 0x5810, 0x88d4, 0x4e3e, 0xafb6, 0x0, 0x1);
        gbc.writeMem(0x1848, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xb9e2, gbc.sp());
        EXPECT(0x184a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0369
        gbc.setState(0x3efa, 0x4f9d, 0xd770, 0x5e30, 0xb94a, 0x5b95, 0x0, 0x0);
        gbc.writeMem(0x3efa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x4f9d, gbc.sp());
        EXPECT(0x3efc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 036A
        gbc.setState(0xa226, 0x478f, 0xd960, 0x43ab, 0x6fe4, 0xe084, 0x0, 0x1);
        gbc.writeMem(0xa226, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x478f, gbc.sp());
        EXPECT(0xa228, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa226));
        EXPECT(0x1b, gbc.readMem(0xa227));
        // CB 1B 036B
        gbc.setState(0x186a, 0x8dc2, 0x6390, 0xb4ca, 0x432c, 0x3e35, 0x0, 0x1);
        gbc.writeMem(0x186a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x8dc2, gbc.sp());
        EXPECT(0x186c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 036C
        gbc.setState(0xd581, 0x319, 0xc150, 0xbadf, 0xde48, 0x9919, 0x1, 0x1);
        gbc.writeMem(0xd581, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x319, gbc.sp());
        EXPECT(0xd583, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd581));
        EXPECT(0x1b, gbc.readMem(0xd582));
        // CB 1B 036D
        gbc.setState(0x5a11, 0x8066, 0x8190, 0xdd5, 0xe2c, 0x96cc, 0x1, 0x1);
        gbc.writeMem(0x5a11, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x8066, gbc.sp());
        EXPECT(0x5a13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 036E
        gbc.setState(0xebc3, 0x78ef, 0x55c0, 0xa2c2, 0x640, 0x207c, 0x1, 0x0);
        gbc.writeMem(0xebc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x78ef, gbc.sp());
        EXPECT(0xebc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebc3));
        EXPECT(0x1b, gbc.readMem(0xebc4));
        // CB 1B 036F
        gbc.setState(0x7466, 0x7f3f, 0xf560, 0xdd48, 0xd7b6, 0xc26, 0x1, 0x1);
        gbc.writeMem(0x7466, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x7f3f, gbc.sp());
        EXPECT(0x7468, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0370
        gbc.setState(0x5960, 0x1e97, 0x1230, 0x1377, 0xe4e2, 0x2e20, 0x1, 0x1);
        gbc.writeMem(0x5960, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x1e97, gbc.sp());
        EXPECT(0x5962, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0371
        gbc.setState(0x671f, 0x456f, 0x3060, 0xc6be, 0x5abc, 0x9e0d, 0x1, 0x0);
        gbc.writeMem(0x671f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x456f, gbc.sp());
        EXPECT(0x6721, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0372
        gbc.setState(0xd3db, 0xbfe7, 0x7670, 0x5a2f, 0x40c, 0x9c5d, 0x1, 0x0);
        gbc.writeMem(0xd3db, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xbfe7, gbc.sp());
        EXPECT(0xd3dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3db));
        EXPECT(0x1b, gbc.readMem(0xd3dc));
        // CB 1B 0373
        gbc.setState(0x9ed6, 0x7986, 0xfc10, 0x7782, 0xa527, 0x6bd6, 0x0, 0x1);
        gbc.writeMem(0x9ed6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x7986, gbc.sp());
        EXPECT(0x9ed8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ed6));
        EXPECT(0x1b, gbc.readMem(0x9ed7));
        // CB 1B 0374
        gbc.setState(0xb10c, 0xe05, 0x3920, 0xfda5, 0xad1, 0x257c, 0x0, 0x0);
        gbc.writeMem(0xb10c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xe05, gbc.sp());
        EXPECT(0xb10e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb10c));
        EXPECT(0x1b, gbc.readMem(0xb10d));
        // CB 1B 0375
        gbc.setState(0xedb0, 0xca6c, 0xbc90, 0x28ea, 0xc902, 0x9f77, 0x1, 0x1);
        gbc.writeMem(0xedb0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xca6c, gbc.sp());
        EXPECT(0xedb2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedb0));
        EXPECT(0x1b, gbc.readMem(0xedb1));
        // CB 1B 0377
        gbc.setState(0x97ff, 0x56fc, 0xc880, 0xac24, 0x92f6, 0xc89, 0x0, 0x0);
        gbc.writeMem(0x97ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x56fc, gbc.sp());
        EXPECT(0x9801, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97ff));
        EXPECT(0x1b, gbc.readMem(0x9800));
        // CB 1B 0378
        gbc.setState(0x4011, 0xbb95, 0x5e00, 0x5a92, 0x4e33, 0x798c, 0x0, 0x0);
        gbc.writeMem(0x4011, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xbb95, gbc.sp());
        EXPECT(0x4013, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0379
        gbc.setState(0xad60, 0xa751, 0x7a30, 0x7ce5, 0x180b, 0xcac7, 0x1, 0x1);
        gbc.writeMem(0xad60, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xa751, gbc.sp());
        EXPECT(0xad62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad60));
        EXPECT(0x1b, gbc.readMem(0xad61));
        // CB 1B 037A
        gbc.setState(0x17a, 0xc8f, 0xfe10, 0xec7d, 0x7802, 0xcf65, 0x1, 0x1);
        gbc.writeMem(0x17a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xc8f, gbc.sp());
        EXPECT(0x17c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 037B
        gbc.setState(0x59fc, 0x78, 0xdc70, 0xd97a, 0x2c33, 0x6030, 0x0, 0x1);
        gbc.writeMem(0x59fc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x78, gbc.sp());
        EXPECT(0x59fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 037C
        gbc.setState(0x3fbd, 0xed67, 0xd8e0, 0x5036, 0x8671, 0xeff0, 0x1, 0x1);
        gbc.writeMem(0x3fbd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xed67, gbc.sp());
        EXPECT(0x3fbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 037D
        gbc.setState(0xb17b, 0xb4e8, 0x9300, 0xf894, 0x9eb1, 0x46c3, 0x0, 0x0);
        gbc.writeMem(0xb17b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xb4e8, gbc.sp());
        EXPECT(0xb17d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb17b));
        EXPECT(0x1b, gbc.readMem(0xb17c));
        // CB 1B 037E
        gbc.setState(0xdd8f, 0xd300, 0x33c0, 0x7184, 0xe5a, 0xb499, 0x1, 0x0);
        gbc.writeMem(0xdd8f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xd300, gbc.sp());
        EXPECT(0xdd91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd8f));
        EXPECT(0x1b, gbc.readMem(0xdd90));
        // CB 1B 037F
        gbc.setState(0x2c29, 0x8987, 0x30d0, 0x7734, 0x683b, 0x7c63, 0x0, 0x1);
        gbc.writeMem(0x2c29, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x8987, gbc.sp());
        EXPECT(0x2c2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0381
        gbc.setState(0x970c, 0x6819, 0x35b0, 0x677f, 0x7205, 0x6bfd, 0x0, 0x0);
        gbc.writeMem(0x970c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x6819, gbc.sp());
        EXPECT(0x970e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x970c));
        EXPECT(0x1b, gbc.readMem(0x970d));
        // CB 1B 0382
        gbc.setState(0x4bef, 0xf3db, 0x9200, 0x391a, 0xe784, 0x335c, 0x1, 0x1);
        gbc.writeMem(0x4bef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xf3db, gbc.sp());
        EXPECT(0x4bf1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0383
        gbc.setState(0x8d18, 0x1cae, 0x3a80, 0x17b1, 0xa844, 0xb3f2, 0x1, 0x1);
        gbc.writeMem(0x8d18, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x1cae, gbc.sp());
        EXPECT(0x8d1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d18));
        EXPECT(0x1b, gbc.readMem(0x8d19));
        // CB 1B 0384
        gbc.setState(0xc96c, 0x6ce0, 0xc9a0, 0xbe0f, 0x749e, 0x630a, 0x1, 0x1);
        gbc.writeMem(0xc96c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x6ce0, gbc.sp());
        EXPECT(0xc96e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc96c));
        EXPECT(0x1b, gbc.readMem(0xc96d));
        // CB 1B 0385
        gbc.setState(0x58c2, 0x20a7, 0xdc00, 0x1995, 0x6c0a, 0xc6a7, 0x0, 0x1);
        gbc.writeMem(0x58c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x20a7, gbc.sp());
        EXPECT(0x58c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0386
        gbc.setState(0x2440, 0xf21b, 0xccf0, 0xa621, 0xcd33, 0x70ff, 0x1, 0x0);
        gbc.writeMem(0x2440, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xf21b, gbc.sp());
        EXPECT(0x2442, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0387
        gbc.setState(0x70b8, 0x14e2, 0xf160, 0xff41, 0xb886, 0x9582, 0x1, 0x1);
        gbc.writeMem(0x70b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x14e2, gbc.sp());
        EXPECT(0x70ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0388
        gbc.setState(0x86ec, 0x709a, 0x2eb0, 0xb788, 0x9e70, 0x949b, 0x0, 0x0);
        gbc.writeMem(0x86ec, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x709a, gbc.sp());
        EXPECT(0x86ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86ec));
        EXPECT(0x1b, gbc.readMem(0x86ed));
        // CB 1B 0389
        gbc.setState(0x48b4, 0x740a, 0xd00, 0x5ba7, 0xb4a2, 0x9825, 0x1, 0x0);
        gbc.writeMem(0x48b4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x740a, gbc.sp());
        EXPECT(0x48b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 038B
        gbc.setState(0x4d38, 0x32b8, 0x83d0, 0xc17e, 0xb5b0, 0x8080, 0x1, 0x0);
        gbc.writeMem(0x4d38, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x32b8, gbc.sp());
        EXPECT(0x4d3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 038C
        gbc.setState(0xc3b0, 0xc820, 0xb070, 0x41bb, 0xa8d, 0xc7a8, 0x1, 0x0);
        gbc.writeMem(0xc3b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xc820, gbc.sp());
        EXPECT(0xc3b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3b0));
        EXPECT(0x1b, gbc.readMem(0xc3b1));
        // CB 1B 038D
        gbc.setState(0xa49b, 0xa66d, 0x4df0, 0xd666, 0x54b7, 0xd527, 0x1, 0x1);
        gbc.writeMem(0xa49b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xa66d, gbc.sp());
        EXPECT(0xa49d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa49b));
        EXPECT(0x1b, gbc.readMem(0xa49c));
        // CB 1B 038E
        gbc.setState(0x5cf5, 0x5b61, 0xaf0, 0x7428, 0x8c9f, 0x12d0, 0x0, 0x0);
        gbc.writeMem(0x5cf5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x5b61, gbc.sp());
        EXPECT(0x5cf7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 038F
        gbc.setState(0x1781, 0xf4fa, 0x4330, 0x415, 0x9f8a, 0x3655, 0x1, 0x1);
        gbc.writeMem(0x1781, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xf4fa, gbc.sp());
        EXPECT(0x1783, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0390
        gbc.setState(0xc050, 0xe894, 0x7960, 0x1517, 0x5ca7, 0x521, 0x1, 0x1);
        gbc.writeMem(0xc050, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xe894, gbc.sp());
        EXPECT(0xc052, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc050));
        EXPECT(0x1b, gbc.readMem(0xc051));
        // CB 1B 0391
        gbc.setState(0xb3f2, 0xb49b, 0x58a0, 0x7d3b, 0xad94, 0x6b74, 0x0, 0x0);
        gbc.writeMem(0xb3f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xb49b, gbc.sp());
        EXPECT(0xb3f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3f2));
        EXPECT(0x1b, gbc.readMem(0xb3f3));
        // CB 1B 0392
        gbc.setState(0x3be5, 0x4a0e, 0x47a0, 0xe976, 0xf4fc, 0xff54, 0x0, 0x1);
        gbc.writeMem(0x3be5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x4a0e, gbc.sp());
        EXPECT(0x3be7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 0393
        gbc.setState(0xe2bf, 0x8b32, 0x9dd0, 0x5b44, 0x7866, 0x1a9b, 0x0, 0x0);
        gbc.writeMem(0xe2bf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x8b32, gbc.sp());
        EXPECT(0xe2c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2bf));
        EXPECT(0x1b, gbc.readMem(0xe2c0));
        // CB 1B 0396
        gbc.setState(0xb7f0, 0xb469, 0xa850, 0x30f1, 0x82e4, 0x7a0f, 0x0, 0x0);
        gbc.writeMem(0xb7f0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xb469, gbc.sp());
        EXPECT(0xb7f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7f0));
        EXPECT(0x1b, gbc.readMem(0xb7f1));
        // CB 1B 0397
        gbc.setState(0x7e07, 0x8874, 0x64c0, 0x136, 0xa653, 0x7b0b, 0x0, 0x1);
        gbc.writeMem(0x7e07, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x8874, gbc.sp());
        EXPECT(0x7e09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 0398
        gbc.setState(0xb45c, 0x5e22, 0xe940, 0x3df2, 0x3646, 0xa360, 0x1, 0x1);
        gbc.writeMem(0xb45c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x5e22, gbc.sp());
        EXPECT(0xb45e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb45c));
        EXPECT(0x1b, gbc.readMem(0xb45d));
        // CB 1B 0399
        gbc.setState(0xc206, 0x84ef, 0xfd70, 0x8b8c, 0x6852, 0xc6d9, 0x0, 0x1);
        gbc.writeMem(0xc206, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x84ef, gbc.sp());
        EXPECT(0xc208, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc206));
        EXPECT(0x1b, gbc.readMem(0xc207));
        // CB 1B 039A
        gbc.setState(0x5003, 0xa01f, 0x6260, 0x3ec4, 0x1eb0, 0xd01b, 0x0, 0x0);
        gbc.writeMem(0x5003, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xa01f, gbc.sp());
        EXPECT(0x5005, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 039D
        gbc.setState(0x4649, 0xf310, 0xbf30, 0xb65c, 0xa141, 0xb5ad, 0x0, 0x0);
        gbc.writeMem(0x4649, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xf310, gbc.sp());
        EXPECT(0x464b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 039E
        gbc.setState(0x53cd, 0xe67f, 0xd310, 0xa0ef, 0x9bfc, 0x8e1d, 0x1, 0x0);
        gbc.writeMem(0x53cd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xe67f, gbc.sp());
        EXPECT(0x53cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 039F
        gbc.setState(0x66d1, 0xac8c, 0x5ad0, 0xbae7, 0x5c22, 0x3fb4, 0x1, 0x1);
        gbc.writeMem(0x66d1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xac8c, gbc.sp());
        EXPECT(0x66d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03A1
        gbc.setState(0xeaf4, 0x964f, 0x90c0, 0x5d0b, 0x1fff, 0xd8bb, 0x0, 0x1);
        gbc.writeMem(0xeaf4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x964f, gbc.sp());
        EXPECT(0xeaf6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaf4));
        EXPECT(0x1b, gbc.readMem(0xeaf5));
        // CB 1B 03A2
        gbc.setState(0xc831, 0x8b49, 0x5d20, 0x144f, 0x4c4d, 0x2720, 0x0, 0x0);
        gbc.writeMem(0xc831, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x8b49, gbc.sp());
        EXPECT(0xc833, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc831));
        EXPECT(0x1b, gbc.readMem(0xc832));
        // CB 1B 03A3
        gbc.setState(0x1328, 0x90c9, 0x2970, 0x1330, 0xf4d, 0x78b7, 0x0, 0x0);
        gbc.writeMem(0x1328, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x90c9, gbc.sp());
        EXPECT(0x132a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03A4
        gbc.setState(0x438, 0x6550, 0x81b0, 0xe04d, 0xf4ed, 0x2057, 0x1, 0x0);
        gbc.writeMem(0x438, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x6550, gbc.sp());
        EXPECT(0x43a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03A5
        gbc.setState(0xdcf, 0x77e8, 0x7e70, 0x8742, 0x7b2b, 0xf903, 0x0, 0x1);
        gbc.writeMem(0xdcf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x77e8, gbc.sp());
        EXPECT(0xdd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03A6
        gbc.setState(0xd5b9, 0x86a2, 0xd6c0, 0x6c97, 0xa083, 0x9294, 0x0, 0x1);
        gbc.writeMem(0xd5b9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x86a2, gbc.sp());
        EXPECT(0xd5bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5b9));
        EXPECT(0x1b, gbc.readMem(0xd5ba));
        // CB 1B 03A7
        gbc.setState(0x38d0, 0x1671, 0x8470, 0x3ed5, 0x6eb8, 0x81d9, 0x0, 0x1);
        gbc.writeMem(0x38d0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x1671, gbc.sp());
        EXPECT(0x38d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03A8
        gbc.setState(0x4cfd, 0x8c2d, 0xa8e0, 0x3586, 0x1e16, 0x8045, 0x1, 0x1);
        gbc.writeMem(0x4cfd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x8c2d, gbc.sp());
        EXPECT(0x4cff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03A9
        gbc.setState(0x790a, 0x66a4, 0xef60, 0xbd7d, 0x90d6, 0x97ba, 0x1, 0x0);
        gbc.writeMem(0x790a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x66a4, gbc.sp());
        EXPECT(0x790c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03AA
        gbc.setState(0x66be, 0x5fd9, 0xa200, 0x4232, 0x2587, 0x295b, 0x1, 0x0);
        gbc.writeMem(0x66be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x5fd9, gbc.sp());
        EXPECT(0x66c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03AB
        gbc.setState(0xe31a, 0x62c1, 0x7c50, 0xfb1d, 0x46ad, 0x8d50, 0x1, 0x0);
        gbc.writeMem(0xe31a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x62c1, gbc.sp());
        EXPECT(0xe31c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe31a));
        EXPECT(0x1b, gbc.readMem(0xe31b));
        // CB 1B 03AC
        gbc.setState(0x5765, 0xd420, 0xa990, 0xa0b7, 0xf9ef, 0xcaf4, 0x1, 0x0);
        gbc.writeMem(0x5765, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xd420, gbc.sp());
        EXPECT(0x5767, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03AD
        gbc.setState(0x2b89, 0x3a11, 0x53f0, 0xf326, 0x8350, 0xbee6, 0x1, 0x1);
        gbc.writeMem(0x2b89, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x3a11, gbc.sp());
        EXPECT(0x2b8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03AE
        gbc.setState(0xbb9a, 0x3c44, 0x4800, 0xe549, 0xebe3, 0xd576, 0x0, 0x1);
        gbc.writeMem(0xbb9a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x3c44, gbc.sp());
        EXPECT(0xbb9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb9a));
        EXPECT(0x1b, gbc.readMem(0xbb9b));
        // CB 1B 03AF
        gbc.setState(0x16c7, 0xf823, 0x6570, 0xd8fd, 0x213d, 0x6a7d, 0x0, 0x1);
        gbc.writeMem(0x16c7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xf823, gbc.sp());
        EXPECT(0x16c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03B0
        gbc.setState(0xea0d, 0x8acb, 0xd710, 0x6b1a, 0x1379, 0xe9a4, 0x1, 0x0);
        gbc.writeMem(0xea0d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x8acb, gbc.sp());
        EXPECT(0xea0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea0d));
        EXPECT(0x1b, gbc.readMem(0xea0e));
        // CB 1B 03B1
        gbc.setState(0x3fab, 0x8991, 0x870, 0x6ede, 0x8b9, 0x71fc, 0x0, 0x0);
        gbc.writeMem(0x3fab, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x8991, gbc.sp());
        EXPECT(0x3fad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03B2
        gbc.setState(0x29ac, 0x471, 0x4b90, 0x52ac, 0xe061, 0xccf5, 0x0, 0x0);
        gbc.writeMem(0x29ac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x471, gbc.sp());
        EXPECT(0x29ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03B3
        gbc.setState(0x70a7, 0x7954, 0x2fb0, 0xb14b, 0xa59d, 0x1742, 0x1, 0x1);
        gbc.writeMem(0x70a7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x7954, gbc.sp());
        EXPECT(0x70a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03B4
        gbc.setState(0x9bce, 0xf761, 0xaf60, 0x21ee, 0xbc5b, 0x38a9, 0x0, 0x0);
        gbc.writeMem(0x9bce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xf761, gbc.sp());
        EXPECT(0x9bd0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bce));
        EXPECT(0x1b, gbc.readMem(0x9bcf));
        // CB 1B 03B6
        gbc.setState(0x56dd, 0xef68, 0x9430, 0xe025, 0xc628, 0x8cc, 0x1, 0x1);
        gbc.writeMem(0x56dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xef68, gbc.sp());
        EXPECT(0x56df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03B8
        gbc.setState(0xa7b9, 0xc1c5, 0x3f70, 0x8ade, 0x5fc2, 0x82c, 0x1, 0x0);
        gbc.writeMem(0xa7b9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xc1c5, gbc.sp());
        EXPECT(0xa7bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7b9));
        EXPECT(0x1b, gbc.readMem(0xa7ba));
        // CB 1B 03B9
        gbc.setState(0xcb11, 0x525c, 0x1e70, 0x73f8, 0x1a44, 0x5a83, 0x1, 0x0);
        gbc.writeMem(0xcb11, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x525c, gbc.sp());
        EXPECT(0xcb13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb11));
        EXPECT(0x1b, gbc.readMem(0xcb12));
        // CB 1B 03BB
        gbc.setState(0x5d78, 0x5f42, 0xb20, 0xc297, 0xf9b0, 0x8cfc, 0x1, 0x0);
        gbc.writeMem(0x5d78, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x5f42, gbc.sp());
        EXPECT(0x5d7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03BC
        gbc.setState(0x2672, 0x19f7, 0x8750, 0xf6fb, 0xee34, 0x4a34, 0x1, 0x1);
        gbc.writeMem(0x2672, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x19f7, gbc.sp());
        EXPECT(0x2674, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03BD
        gbc.setState(0xc9e3, 0x1941, 0x1650, 0x443b, 0x1cc1, 0xd797, 0x0, 0x0);
        gbc.writeMem(0xc9e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x1941, gbc.sp());
        EXPECT(0xc9e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9e3));
        EXPECT(0x1b, gbc.readMem(0xc9e4));
        // CB 1B 03BE
        gbc.setState(0xb44d, 0x8a1b, 0x450, 0x414b, 0x6a2c, 0xd56c, 0x0, 0x0);
        gbc.writeMem(0xb44d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x8a1b, gbc.sp());
        EXPECT(0xb44f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb44d));
        EXPECT(0x1b, gbc.readMem(0xb44e));
        // CB 1B 03BF
        gbc.setState(0xb1d1, 0xa7cc, 0xd210, 0xc05d, 0x6cd8, 0xb99f, 0x0, 0x1);
        gbc.writeMem(0xb1d1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xa7cc, gbc.sp());
        EXPECT(0xb1d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1d1));
        EXPECT(0x1b, gbc.readMem(0xb1d2));
        // CB 1B 03C0
        gbc.setState(0x2f92, 0x3307, 0x76d0, 0x4d1, 0xfb62, 0x5678, 0x1, 0x0);
        gbc.writeMem(0x2f92, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x3307, gbc.sp());
        EXPECT(0x2f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03C1
        gbc.setState(0x5f81, 0xe9f8, 0x6d10, 0x8bf, 0x27cf, 0xff52, 0x1, 0x1);
        gbc.writeMem(0x5f81, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xe9f8, gbc.sp());
        EXPECT(0x5f83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03C2
        gbc.setState(0xa846, 0xabd5, 0x7820, 0x15f4, 0xeb2d, 0x83bd, 0x1, 0x0);
        gbc.writeMem(0xa846, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xabd5, gbc.sp());
        EXPECT(0xa848, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa846));
        EXPECT(0x1b, gbc.readMem(0xa847));
        // CB 1B 03C3
        gbc.setState(0x2233, 0x5679, 0x6700, 0x513a, 0xbb73, 0xae6c, 0x1, 0x0);
        gbc.writeMem(0x2233, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x5679, gbc.sp());
        EXPECT(0x2235, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03C4
        gbc.setState(0xa8db, 0x4d07, 0xcb10, 0x9e18, 0x6653, 0xa933, 0x1, 0x0);
        gbc.writeMem(0xa8db, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x4d07, gbc.sp());
        EXPECT(0xa8dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8db));
        EXPECT(0x1b, gbc.readMem(0xa8dc));
        // CB 1B 03C5
        gbc.setState(0xaa26, 0x11bb, 0x6960, 0xd1f8, 0xdce7, 0x4f01, 0x1, 0x0);
        gbc.writeMem(0xaa26, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x11bb, gbc.sp());
        EXPECT(0xaa28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa26));
        EXPECT(0x1b, gbc.readMem(0xaa27));
        // CB 1B 03C6
        gbc.setState(0x16bb, 0xceb6, 0x7e0, 0x1133, 0x8bc9, 0x32b9, 0x0, 0x1);
        gbc.writeMem(0x16bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xceb6, gbc.sp());
        EXPECT(0x16bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03C7
        gbc.setState(0xd21a, 0x791e, 0x1660, 0x57e8, 0x631e, 0x881b, 0x1, 0x1);
        gbc.writeMem(0xd21a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x791e, gbc.sp());
        EXPECT(0xd21c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd21a));
        EXPECT(0x1b, gbc.readMem(0xd21b));
        // CB 1B 03C8
        gbc.setState(0xda21, 0xf3b4, 0x3360, 0xc64b, 0x94e4, 0xabcf, 0x0, 0x0);
        gbc.writeMem(0xda21, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xf3b4, gbc.sp());
        EXPECT(0xda23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda21));
        EXPECT(0x1b, gbc.readMem(0xda22));
        // CB 1B 03C9
        gbc.setState(0xa3e1, 0xc21a, 0x48c0, 0x86ef, 0x43b5, 0xc82f, 0x1, 0x0);
        gbc.writeMem(0xa3e1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xc21a, gbc.sp());
        EXPECT(0xa3e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3e1));
        EXPECT(0x1b, gbc.readMem(0xa3e2));
        // CB 1B 03CA
        gbc.setState(0xd6a1, 0x219c, 0x5b80, 0xcc76, 0x1c64, 0x40a8, 0x1, 0x1);
        gbc.writeMem(0xd6a1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x219c, gbc.sp());
        EXPECT(0xd6a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6a1));
        EXPECT(0x1b, gbc.readMem(0xd6a2));
        // CB 1B 03CB
        gbc.setState(0x6e2d, 0x95ba, 0xf650, 0xfd9e, 0xd69b, 0x3221, 0x1, 0x1);
        gbc.writeMem(0x6e2d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x95ba, gbc.sp());
        EXPECT(0x6e2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03CC
        gbc.setState(0x71af, 0xf66c, 0xa0, 0x412, 0x2241, 0xa48c, 0x1, 0x0);
        gbc.writeMem(0x71af, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xf66c, gbc.sp());
        EXPECT(0x71b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03CD
        gbc.setState(0xb4f2, 0x3c35, 0x4320, 0x80a7, 0xe6ef, 0xabc4, 0x1, 0x0);
        gbc.writeMem(0xb4f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x3c35, gbc.sp());
        EXPECT(0xb4f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4f2));
        EXPECT(0x1b, gbc.readMem(0xb4f3));
        // CB 1B 03CE
        gbc.setState(0x8faf, 0x7036, 0xaba0, 0x8056, 0xa807, 0x2d54, 0x0, 0x1);
        gbc.writeMem(0x8faf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x7036, gbc.sp());
        EXPECT(0x8fb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8faf));
        EXPECT(0x1b, gbc.readMem(0x8fb0));
        // CB 1B 03CF
        gbc.setState(0x65de, 0x820b, 0x9220, 0xada6, 0x5a01, 0x49ac, 0x1, 0x1);
        gbc.writeMem(0x65de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x820b, gbc.sp());
        EXPECT(0x65e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03D0
        gbc.setState(0x19d4, 0x50a2, 0x3d0, 0x6f7d, 0x1cd, 0x73fb, 0x0, 0x1);
        gbc.writeMem(0x19d4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x50a2, gbc.sp());
        EXPECT(0x19d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03D2
        gbc.setState(0xc1c6, 0x7ff, 0x5ed0, 0xebd1, 0x78de, 0xaddb, 0x0, 0x0);
        gbc.writeMem(0xc1c6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x7ff, gbc.sp());
        EXPECT(0xc1c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1c6));
        EXPECT(0x1b, gbc.readMem(0xc1c7));
        // CB 1B 03D3
        gbc.setState(0x446a, 0x3f64, 0x7580, 0x289f, 0xaab6, 0xd61a, 0x1, 0x0);
        gbc.writeMem(0x446a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x3f64, gbc.sp());
        EXPECT(0x446c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03D4
        gbc.setState(0x19bf, 0x35c7, 0x910, 0xa6e0, 0x3b1e, 0xcc2, 0x0, 0x0);
        gbc.writeMem(0x19bf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x35c7, gbc.sp());
        EXPECT(0x19c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03D5
        gbc.setState(0x7d5, 0x9147, 0x8ae0, 0xd3ae, 0xabb, 0x4f48, 0x0, 0x1);
        gbc.writeMem(0x7d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x9147, gbc.sp());
        EXPECT(0x7d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03D6
        gbc.setState(0xeee2, 0xbe82, 0xfd80, 0x1df0, 0xc568, 0x1c6c, 0x0, 0x1);
        gbc.writeMem(0xeee2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xbe82, gbc.sp());
        EXPECT(0xeee4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeee2));
        EXPECT(0x1b, gbc.readMem(0xeee3));
        // CB 1B 03D7
        gbc.setState(0xd77a, 0x5839, 0x6b20, 0x2ddf, 0x8ed9, 0x59dc, 0x0, 0x1);
        gbc.writeMem(0xd77a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x5839, gbc.sp());
        EXPECT(0xd77c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd77a));
        EXPECT(0x1b, gbc.readMem(0xd77b));
        // CB 1B 03D8
        gbc.setState(0x7974, 0x50a2, 0x4660, 0x67a3, 0x4be1, 0x1a8b, 0x1, 0x0);
        gbc.writeMem(0x7974, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x50a2, gbc.sp());
        EXPECT(0x7976, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03D9
        gbc.setState(0x1d3b, 0x85f9, 0xdd0, 0xff2b, 0x923f, 0xf447, 0x0, 0x1);
        gbc.writeMem(0x1d3b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x85f9, gbc.sp());
        EXPECT(0x1d3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03DA
        gbc.setState(0x4880, 0xf84e, 0xf5e0, 0xd083, 0x9271, 0x922f, 0x1, 0x0);
        gbc.writeMem(0x4880, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xf84e, gbc.sp());
        EXPECT(0x4882, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03DB
        gbc.setState(0x2918, 0xdee, 0x6620, 0x8325, 0xb622, 0x16f3, 0x0, 0x1);
        gbc.writeMem(0x2918, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xdee, gbc.sp());
        EXPECT(0x291a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03DC
        gbc.setState(0x75e9, 0x2bf8, 0x6c50, 0x62fc, 0x7c33, 0x2121, 0x1, 0x0);
        gbc.writeMem(0x75e9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x2bf8, gbc.sp());
        EXPECT(0x75eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03DD
        gbc.setState(0xd91a, 0x2a04, 0x6460, 0x4008, 0x80d4, 0xa1c7, 0x0, 0x0);
        gbc.writeMem(0xd91a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x2a04, gbc.sp());
        EXPECT(0xd91c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd91a));
        EXPECT(0x1b, gbc.readMem(0xd91b));
        // CB 1B 03DF
        gbc.setState(0x9390, 0x1f3c, 0x7220, 0x54f7, 0xffdc, 0x100e, 0x0, 0x0);
        gbc.writeMem(0x9390, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x1f3c, gbc.sp());
        EXPECT(0x9392, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9390));
        EXPECT(0x1b, gbc.readMem(0x9391));
        // CB 1B 03E0
        gbc.setState(0xe9ff, 0x2f41, 0x5850, 0x5065, 0x2556, 0x7cfd, 0x1, 0x1);
        gbc.writeMem(0xe9ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x2f41, gbc.sp());
        EXPECT(0xea01, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9ff));
        EXPECT(0x1b, gbc.readMem(0xea00));
        // CB 1B 03E1
        gbc.setState(0x7643, 0xad82, 0x6ca0, 0xc9c, 0x9ca5, 0xe147, 0x1, 0x1);
        gbc.writeMem(0x7643, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xad82, gbc.sp());
        EXPECT(0x7645, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 1B 03E2
        gbc.setState(0xbd29, 0xc4fe, 0xe270, 0xfff9, 0x8af0, 0xa84e, 0x1, 0x1);
        gbc.writeMem(0xbd29, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xc4fe, gbc.sp());
        EXPECT(0xbd2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd29));
        EXPECT(0x1b, gbc.readMem(0xbd2a));
        // CB 1B 03E3
        gbc.setState(0x7774, 0x1bed, 0x70b0, 0x6b6e, 0xf66c, 0x5d6b, 0x1, 0x1);
        gbc.writeMem(0x7774, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x1bed, gbc.sp());
        EXPECT(0x7776, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03E4
        gbc.setState(0xc8a8, 0x8260, 0xce60, 0x8c81, 0xfa4b, 0xccc0, 0x0, 0x1);
        gbc.writeMem(0xc8a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x8260, gbc.sp());
        EXPECT(0xc8aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8a8));
        EXPECT(0x1b, gbc.readMem(0xc8a9));
        // CB 1B 03E5
        gbc.setState(0xe4d9, 0x10e9, 0xbda0, 0x5588, 0x61c5, 0xbf7b, 0x0, 0x1);
        gbc.writeMem(0xe4d9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x10e9, gbc.sp());
        EXPECT(0xe4db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4d9));
        EXPECT(0x1b, gbc.readMem(0xe4da));
        // CB 1B 03E6
        gbc.setState(0x7a0b, 0xa9c2, 0x44f0, 0xf4ef, 0xa650, 0xa49, 0x1, 0x1);
        gbc.writeMem(0x7a0b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xa9c2, gbc.sp());
        EXPECT(0x7a0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 1B 03E7
        gbc.setState(0x8243, 0xdea6, 0x58c0, 0x6525, 0x2ccd, 0xa70d, 0x1, 0x0);
        gbc.writeMem(0x8243, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xdea6, gbc.sp());
        EXPECT(0x8245, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8243));
        EXPECT(0x1b, gbc.readMem(0x8244));
    }
