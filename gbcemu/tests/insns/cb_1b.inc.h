    TEST(gbcemu, opcode_cb_1b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 1B 0001
        gbc.setState(0xa954, 0xe143, 0x8bd0, 0x30a0, 0xd083, 0xbdda, 0x0, 0x1);
        gbc.writeMem(0xa954, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe143);
        EXPECT(gbc.pc(), 0xa956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa954), 0xcb);
        EXPECT(gbc.readMem(0xa955), 0x1b);
        // CB 1B 0002
        gbc.setState(0x158, 0xd6b2, 0xa3d0, 0x185c, 0xf33b, 0xd2b1, 0x0, 0x1);
        gbc.writeMem(0x158, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd6b2);
        EXPECT(gbc.pc(), 0x15a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0003
        gbc.setState(0xb0f2, 0x64aa, 0xa0d0, 0x86a2, 0x421d, 0xb7c5, 0x1, 0x0);
        gbc.writeMem(0xb0f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x64aa);
        EXPECT(gbc.pc(), 0xb0f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f2), 0xcb);
        EXPECT(gbc.readMem(0xb0f3), 0x1b);
        // CB 1B 0005
        gbc.setState(0x25fa, 0x9458, 0x4930, 0x3cbd, 0x815b, 0x46e0, 0x0, 0x0);
        gbc.writeMem(0x25fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9458);
        EXPECT(gbc.pc(), 0x25fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0006
        gbc.setState(0x974, 0x46b5, 0x5840, 0x457f, 0x2755, 0x62b1, 0x0, 0x0);
        gbc.writeMem(0x974, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x46b5);
        EXPECT(gbc.pc(), 0x976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0007
        gbc.setState(0x1b2f, 0xd2cd, 0x3710, 0x7b3a, 0xcb56, 0xe78f, 0x0, 0x1);
        gbc.writeMem(0x1b2f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd2cd);
        EXPECT(gbc.pc(), 0x1b31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0008
        gbc.setState(0x65f3, 0x468d, 0xd0, 0x6416, 0x2441, 0xfdd9, 0x0, 0x0);
        gbc.writeMem(0x65f3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x468d);
        EXPECT(gbc.pc(), 0x65f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0009
        gbc.setState(0x42c9, 0x8cde, 0x2180, 0x1078, 0xbe71, 0x5cc2, 0x1, 0x1);
        gbc.writeMem(0x42c9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8cde);
        EXPECT(gbc.pc(), 0x42cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 000A
        gbc.setState(0xae3d, 0xc9c, 0x7570, 0x39a5, 0xd39d, 0x271d, 0x1, 0x1);
        gbc.writeMem(0xae3d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc9c);
        EXPECT(gbc.pc(), 0xae3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae3d), 0xcb);
        EXPECT(gbc.readMem(0xae3e), 0x1b);
        // CB 1B 000B
        gbc.setState(0xeb89, 0x7172, 0x60d0, 0xa067, 0xdd0e, 0xb914, 0x0, 0x0);
        gbc.writeMem(0xeb89, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7172);
        EXPECT(gbc.pc(), 0xeb8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb89), 0xcb);
        EXPECT(gbc.readMem(0xeb8a), 0x1b);
        // CB 1B 000C
        gbc.setState(0x313f, 0xd911, 0x6360, 0x447f, 0xd69a, 0xc968, 0x0, 0x0);
        gbc.writeMem(0x313f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd911);
        EXPECT(gbc.pc(), 0x3141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 000D
        gbc.setState(0x4474, 0x8613, 0x8d00, 0x5f29, 0xba52, 0x77bc, 0x1, 0x0);
        gbc.writeMem(0x4474, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x8613);
        EXPECT(gbc.pc(), 0x4476);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 000E
        gbc.setState(0x24b8, 0xc415, 0x9750, 0x9f4a, 0x3464, 0x3dd, 0x1, 0x1);
        gbc.writeMem(0x24b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc415);
        EXPECT(gbc.pc(), 0x24ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 000F
        gbc.setState(0xbbf2, 0x3133, 0xb8c0, 0xc075, 0x3578, 0x19bc, 0x1, 0x0);
        gbc.writeMem(0xbbf2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3133);
        EXPECT(gbc.pc(), 0xbbf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf2), 0xcb);
        EXPECT(gbc.readMem(0xbbf3), 0x1b);
        // CB 1B 0010
        gbc.setState(0xd1fe, 0x99d7, 0xca70, 0x8575, 0x1cf4, 0x5a49, 0x0, 0x1);
        gbc.writeMem(0xd1fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x99d7);
        EXPECT(gbc.pc(), 0xd200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fe), 0xcb);
        EXPECT(gbc.readMem(0xd1ff), 0x1b);
        // CB 1B 0011
        gbc.setState(0xebf9, 0x64cf, 0x31f0, 0xeea2, 0x4b9f, 0xfda3, 0x1, 0x1);
        gbc.writeMem(0xebf9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x64cf);
        EXPECT(gbc.pc(), 0xebfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf9), 0xcb);
        EXPECT(gbc.readMem(0xebfa), 0x1b);
        // CB 1B 0014
        gbc.setState(0x80a8, 0x116a, 0xc0, 0xb5a2, 0x9df4, 0x359a, 0x1, 0x1);
        gbc.writeMem(0x80a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x116a);
        EXPECT(gbc.pc(), 0x80aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a8), 0xcb);
        EXPECT(gbc.readMem(0x80a9), 0x1b);
        // CB 1B 0015
        gbc.setState(0xd3a1, 0x9746, 0x6350, 0x65f1, 0x3a7, 0x11b1, 0x1, 0x0);
        gbc.writeMem(0xd3a1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9746);
        EXPECT(gbc.pc(), 0xd3a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3a1), 0xcb);
        EXPECT(gbc.readMem(0xd3a2), 0x1b);
        // CB 1B 0016
        gbc.setState(0x254d, 0xbdfb, 0x9fb0, 0x6920, 0x6136, 0x3f62, 0x1, 0x0);
        gbc.writeMem(0x254d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbdfb);
        EXPECT(gbc.pc(), 0x254f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0017
        gbc.setState(0x58ad, 0x4f2d, 0xd0d0, 0x2a21, 0x9dfd, 0x8d6b, 0x1, 0x1);
        gbc.writeMem(0x58ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4f2d);
        EXPECT(gbc.pc(), 0x58af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0018
        gbc.setState(0x2c43, 0xebb3, 0x88d0, 0xb3a5, 0xbd1e, 0xefd7, 0x0, 0x0);
        gbc.writeMem(0x2c43, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xebb3);
        EXPECT(gbc.pc(), 0x2c45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0019
        gbc.setState(0x205a, 0x9753, 0xb40, 0x2576, 0x6eef, 0xa349, 0x0, 0x1);
        gbc.writeMem(0x205a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9753);
        EXPECT(gbc.pc(), 0x205c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 001A
        gbc.setState(0x561f, 0xf917, 0x5230, 0xe5f6, 0xbaf3, 0x9ae9, 0x1, 0x0);
        gbc.writeMem(0x561f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf917);
        EXPECT(gbc.pc(), 0x5621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 001B
        gbc.setState(0x5c73, 0x2558, 0x5730, 0xdaba, 0xebaf, 0xf588, 0x1, 0x1);
        gbc.writeMem(0x5c73, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2558);
        EXPECT(gbc.pc(), 0x5c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 001C
        gbc.setState(0x454d, 0x196b, 0x99f0, 0xd40e, 0xa708, 0xc3b2, 0x0, 0x0);
        gbc.writeMem(0x454d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x196b);
        EXPECT(gbc.pc(), 0x454f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 001D
        gbc.setState(0x62c2, 0x6786, 0xa700, 0x2b5a, 0xf6c6, 0x35ad, 0x1, 0x1);
        gbc.writeMem(0x62c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6786);
        EXPECT(gbc.pc(), 0x62c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 001E
        gbc.setState(0xc6b9, 0xce9e, 0xcf60, 0x9113, 0xc6f1, 0x160b, 0x1, 0x0);
        gbc.writeMem(0xc6b9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xce9e);
        EXPECT(gbc.pc(), 0xc6bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b9), 0xcb);
        EXPECT(gbc.readMem(0xc6ba), 0x1b);
        // CB 1B 001F
        gbc.setState(0x22e5, 0x6d16, 0xa650, 0x4da, 0x2fe7, 0x91a8, 0x1, 0x1);
        gbc.writeMem(0x22e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6d16);
        EXPECT(gbc.pc(), 0x22e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0021
        gbc.setState(0x7b47, 0xd177, 0xeb40, 0xd050, 0xcea3, 0xc5bb, 0x1, 0x1);
        gbc.writeMem(0x7b47, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd177);
        EXPECT(gbc.pc(), 0x7b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0022
        gbc.setState(0x4657, 0xfdfe, 0xfa10, 0xd9c5, 0x515a, 0xdeb4, 0x0, 0x1);
        gbc.writeMem(0x4657, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xfdfe);
        EXPECT(gbc.pc(), 0x4659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0023
        gbc.setState(0xb218, 0xa181, 0x8030, 0xbedb, 0x6e9e, 0xec25, 0x1, 0x1);
        gbc.writeMem(0xb218, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa181);
        EXPECT(gbc.pc(), 0xb21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb218), 0xcb);
        EXPECT(gbc.readMem(0xb219), 0x1b);
        // CB 1B 0025
        gbc.setState(0xc99b, 0x1712, 0xfa80, 0x7dec, 0x264f, 0xcc47, 0x1, 0x0);
        gbc.writeMem(0xc99b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1712);
        EXPECT(gbc.pc(), 0xc99d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc99b), 0xcb);
        EXPECT(gbc.readMem(0xc99c), 0x1b);
        // CB 1B 0026
        gbc.setState(0xdc59, 0xc794, 0x8550, 0x7db9, 0xe9ef, 0xd634, 0x0, 0x1);
        gbc.writeMem(0xdc59, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc794);
        EXPECT(gbc.pc(), 0xdc5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc59), 0xcb);
        EXPECT(gbc.readMem(0xdc5a), 0x1b);
        // CB 1B 0027
        gbc.setState(0x3b94, 0x32a, 0x46e0, 0x3891, 0x149, 0x27be, 0x0, 0x0);
        gbc.writeMem(0x3b94, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x32a);
        EXPECT(gbc.pc(), 0x3b96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0028
        gbc.setState(0xdb04, 0x2fa3, 0x9c30, 0x7c3a, 0x3a2e, 0x21a1, 0x1, 0x0);
        gbc.writeMem(0xdb04, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2fa3);
        EXPECT(gbc.pc(), 0xdb06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb04), 0xcb);
        EXPECT(gbc.readMem(0xdb05), 0x1b);
        // CB 1B 0029
        gbc.setState(0x75c3, 0x260e, 0xbf10, 0xaac7, 0x6a4, 0xb13e, 0x1, 0x1);
        gbc.writeMem(0x75c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x260e);
        EXPECT(gbc.pc(), 0x75c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 002A
        gbc.setState(0x52ba, 0x2b7c, 0xa0e0, 0x7e30, 0x902e, 0xed6c, 0x1, 0x0);
        gbc.writeMem(0x52ba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2b7c);
        EXPECT(gbc.pc(), 0x52bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 002B
        gbc.setState(0x47b1, 0x1bf1, 0xafb0, 0x5978, 0x7b1f, 0xda77, 0x1, 0x1);
        gbc.writeMem(0x47b1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1bf1);
        EXPECT(gbc.pc(), 0x47b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 002C
        gbc.setState(0x223d, 0xa7c6, 0xad30, 0x4e4c, 0xfa84, 0x88f5, 0x0, 0x0);
        gbc.writeMem(0x223d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa7c6);
        EXPECT(gbc.pc(), 0x223f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 002D
        gbc.setState(0xbeef, 0x358d, 0xcc40, 0xdad2, 0xd3e1, 0x5c79, 0x1, 0x1);
        gbc.writeMem(0xbeef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x358d);
        EXPECT(gbc.pc(), 0xbef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeef), 0xcb);
        EXPECT(gbc.readMem(0xbef0), 0x1b);
        // CB 1B 002E
        gbc.setState(0xc0c9, 0x4b77, 0x39b0, 0x1bb4, 0xa982, 0x6e4b, 0x0, 0x0);
        gbc.writeMem(0xc0c9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4b77);
        EXPECT(gbc.pc(), 0xc0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0c9), 0xcb);
        EXPECT(gbc.readMem(0xc0ca), 0x1b);
        // CB 1B 002F
        gbc.setState(0xcfe7, 0x59a0, 0x9310, 0x1854, 0x2229, 0xca32, 0x0, 0x1);
        gbc.writeMem(0xcfe7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x59a0);
        EXPECT(gbc.pc(), 0xcfe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe7), 0xcb);
        EXPECT(gbc.readMem(0xcfe8), 0x1b);
        // CB 1B 0030
        gbc.setState(0xb23f, 0x4fba, 0x6610, 0xfc69, 0x7b91, 0x19b6, 0x1, 0x1);
        gbc.writeMem(0xb23f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4fba);
        EXPECT(gbc.pc(), 0xb241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb23f), 0xcb);
        EXPECT(gbc.readMem(0xb240), 0x1b);
        // CB 1B 0031
        gbc.setState(0xbad5, 0xb6d6, 0xd860, 0x6db7, 0x6f6e, 0x63f2, 0x1, 0x1);
        gbc.writeMem(0xbad5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb6d6);
        EXPECT(gbc.pc(), 0xbad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad5), 0xcb);
        EXPECT(gbc.readMem(0xbad6), 0x1b);
        // CB 1B 0032
        gbc.setState(0xd60e, 0x869f, 0x2f60, 0xe3dc, 0xdec1, 0x79e4, 0x1, 0x1);
        gbc.writeMem(0xd60e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x869f);
        EXPECT(gbc.pc(), 0xd610);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd60e), 0xcb);
        EXPECT(gbc.readMem(0xd60f), 0x1b);
        // CB 1B 0033
        gbc.setState(0x373b, 0x87e6, 0x93b0, 0xd14f, 0x5d4d, 0x4cfd, 0x0, 0x0);
        gbc.writeMem(0x373b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x87e6);
        EXPECT(gbc.pc(), 0x373d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0034
        gbc.setState(0xb693, 0xd84, 0x9f50, 0x977c, 0x7f31, 0xf9f2, 0x1, 0x0);
        gbc.writeMem(0xb693, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd84);
        EXPECT(gbc.pc(), 0xb695);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb693), 0xcb);
        EXPECT(gbc.readMem(0xb694), 0x1b);
        // CB 1B 0035
        gbc.setState(0x45b2, 0x19de, 0xc8e0, 0xf05a, 0xdb3f, 0x708, 0x0, 0x0);
        gbc.writeMem(0x45b2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x19de);
        EXPECT(gbc.pc(), 0x45b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0036
        gbc.setState(0x813c, 0x7f2e, 0xa200, 0x8476, 0xdcc6, 0xf51e, 0x1, 0x1);
        gbc.writeMem(0x813c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7f2e);
        EXPECT(gbc.pc(), 0x813e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x813c), 0xcb);
        EXPECT(gbc.readMem(0x813d), 0x1b);
        // CB 1B 0037
        gbc.setState(0xa92, 0x9a21, 0x66e0, 0x8c0e, 0x3259, 0x3c84, 0x1, 0x0);
        gbc.writeMem(0xa92, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9a21);
        EXPECT(gbc.pc(), 0xa94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0038
        gbc.setState(0x17cf, 0x79e8, 0x4620, 0x69b9, 0x8bb5, 0xb652, 0x0, 0x1);
        gbc.writeMem(0x17cf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x79e8);
        EXPECT(gbc.pc(), 0x17d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0039
        gbc.setState(0x8383, 0x9ab4, 0x1f20, 0x5056, 0x8ad1, 0xb6c3, 0x1, 0x0);
        gbc.writeMem(0x8383, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9ab4);
        EXPECT(gbc.pc(), 0x8385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8383), 0xcb);
        EXPECT(gbc.readMem(0x8384), 0x1b);
        // CB 1B 003A
        gbc.setState(0x52b6, 0x5ec8, 0xfca0, 0x725c, 0x4172, 0x846f, 0x1, 0x0);
        gbc.writeMem(0x52b6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5ec8);
        EXPECT(gbc.pc(), 0x52b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 003B
        gbc.setState(0xe82, 0xd0af, 0x7340, 0xb818, 0x3148, 0xc2d6, 0x0, 0x1);
        gbc.writeMem(0xe82, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd0af);
        EXPECT(gbc.pc(), 0xe84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 003C
        gbc.setState(0x20e9, 0xe25d, 0x420, 0xff07, 0x5f91, 0x3851, 0x1, 0x0);
        gbc.writeMem(0x20e9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe25d);
        EXPECT(gbc.pc(), 0x20eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 003D
        gbc.setState(0x6382, 0x38a3, 0x1690, 0xe272, 0x3b42, 0xe6e8, 0x0, 0x1);
        gbc.writeMem(0x6382, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x38a3);
        EXPECT(gbc.pc(), 0x6384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 003E
        gbc.setState(0xc65e, 0xf558, 0x4960, 0xd166, 0xe95a, 0x10f9, 0x0, 0x1);
        gbc.writeMem(0xc65e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf558);
        EXPECT(gbc.pc(), 0xc660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65e), 0xcb);
        EXPECT(gbc.readMem(0xc65f), 0x1b);
        // CB 1B 003F
        gbc.setState(0x9af6, 0x8968, 0x45e0, 0xbb98, 0x6e11, 0xc7cd, 0x0, 0x1);
        gbc.writeMem(0x9af6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8968);
        EXPECT(gbc.pc(), 0x9af8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af6), 0xcb);
        EXPECT(gbc.readMem(0x9af7), 0x1b);
        // CB 1B 0040
        gbc.setState(0x2487, 0xa643, 0x6ef0, 0xb429, 0xa5ef, 0x78a7, 0x0, 0x1);
        gbc.writeMem(0x2487, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa643);
        EXPECT(gbc.pc(), 0x2489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0041
        gbc.setState(0xdb41, 0x9e93, 0xd0f0, 0x6d2a, 0x3fab, 0xd064, 0x0, 0x0);
        gbc.writeMem(0xdb41, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9e93);
        EXPECT(gbc.pc(), 0xdb43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb41), 0xcb);
        EXPECT(gbc.readMem(0xdb42), 0x1b);
        // CB 1B 0042
        gbc.setState(0xbda9, 0xb36e, 0x53d0, 0x2e69, 0x4eb4, 0x96df, 0x1, 0x1);
        gbc.writeMem(0xbda9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb36e);
        EXPECT(gbc.pc(), 0xbdab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda9), 0xcb);
        EXPECT(gbc.readMem(0xbdaa), 0x1b);
        // CB 1B 0043
        gbc.setState(0x661f, 0xfb3, 0x6460, 0xc0f0, 0xae4c, 0xccb2, 0x0, 0x0);
        gbc.writeMem(0x661f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfb3);
        EXPECT(gbc.pc(), 0x6621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0044
        gbc.setState(0xd7f0, 0x1148, 0xdc10, 0xfd47, 0x2ace, 0x6b0, 0x0, 0x1);
        gbc.writeMem(0xd7f0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1148);
        EXPECT(gbc.pc(), 0xd7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7f0), 0xcb);
        EXPECT(gbc.readMem(0xd7f1), 0x1b);
        // CB 1B 0045
        gbc.setState(0xcb8, 0x73aa, 0x2660, 0x8bd8, 0xa757, 0x7b66, 0x0, 0x0);
        gbc.writeMem(0xcb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x73aa);
        EXPECT(gbc.pc(), 0xcba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0046
        gbc.setState(0xe0de, 0xcae8, 0x8d60, 0x3477, 0xd97, 0xf82f, 0x1, 0x0);
        gbc.writeMem(0xe0de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcae8);
        EXPECT(gbc.pc(), 0xe0e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0de), 0xcb);
        EXPECT(gbc.readMem(0xe0df), 0x1b);
        // CB 1B 0047
        gbc.setState(0xe9f6, 0x8a2c, 0xb9c0, 0x7ce3, 0x38c1, 0xf343, 0x0, 0x0);
        gbc.writeMem(0xe9f6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8a2c);
        EXPECT(gbc.pc(), 0xe9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f6), 0xcb);
        EXPECT(gbc.readMem(0xe9f7), 0x1b);
        // CB 1B 0048
        gbc.setState(0x84d3, 0xf365, 0xf950, 0xb28d, 0x16fb, 0xf96a, 0x1, 0x0);
        gbc.writeMem(0x84d3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf365);
        EXPECT(gbc.pc(), 0x84d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d3), 0xcb);
        EXPECT(gbc.readMem(0x84d4), 0x1b);
        // CB 1B 0049
        gbc.setState(0x4781, 0x898a, 0x8d0, 0xa748, 0xc9ea, 0x529e, 0x0, 0x1);
        gbc.writeMem(0x4781, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x898a);
        EXPECT(gbc.pc(), 0x4783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 004A
        gbc.setState(0x8613, 0xf82b, 0xd310, 0x47d8, 0x2e9, 0x3ca0, 0x0, 0x1);
        gbc.writeMem(0x8613, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf82b);
        EXPECT(gbc.pc(), 0x8615);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8613), 0xcb);
        EXPECT(gbc.readMem(0x8614), 0x1b);
        // CB 1B 004C
        gbc.setState(0xea6, 0x84f, 0x9350, 0xe6da, 0x328c, 0x9ef3, 0x1, 0x1);
        gbc.writeMem(0xea6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x84f);
        EXPECT(gbc.pc(), 0xea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 004D
        gbc.setState(0xb348, 0x6cc9, 0x6750, 0x3f74, 0x5942, 0xddd8, 0x0, 0x0);
        gbc.writeMem(0xb348, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6cc9);
        EXPECT(gbc.pc(), 0xb34a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb348), 0xcb);
        EXPECT(gbc.readMem(0xb349), 0x1b);
        // CB 1B 004E
        gbc.setState(0x79ff, 0xe1bf, 0xe030, 0x7655, 0x68d, 0xa73e, 0x1, 0x1);
        gbc.writeMem(0x79ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe1bf);
        EXPECT(gbc.pc(), 0x7a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 004F
        gbc.setState(0x7736, 0x9320, 0x2b80, 0xb92e, 0xcbac, 0x43b3, 0x0, 0x0);
        gbc.writeMem(0x7736, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9320);
        EXPECT(gbc.pc(), 0x7738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0050
        gbc.setState(0x36fa, 0xf5a9, 0x1c70, 0x56ed, 0x1efd, 0x7996, 0x0, 0x1);
        gbc.writeMem(0x36fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf5a9);
        EXPECT(gbc.pc(), 0x36fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0051
        gbc.setState(0xd679, 0xa518, 0x6b90, 0xf2ff, 0x2dcd, 0xb61a, 0x1, 0x0);
        gbc.writeMem(0xd679, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa518);
        EXPECT(gbc.pc(), 0xd67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd679), 0xcb);
        EXPECT(gbc.readMem(0xd67a), 0x1b);
        // CB 1B 0052
        gbc.setState(0x152c, 0x93b5, 0xea30, 0x6e, 0xb267, 0xd49c, 0x0, 0x0);
        gbc.writeMem(0x152c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x93b5);
        EXPECT(gbc.pc(), 0x152e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0053
        gbc.setState(0xde56, 0x94dd, 0x5810, 0x1a23, 0x3ea3, 0xe86b, 0x1, 0x0);
        gbc.writeMem(0xde56, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x94dd);
        EXPECT(gbc.pc(), 0xde58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde56), 0xcb);
        EXPECT(gbc.readMem(0xde57), 0x1b);
        // CB 1B 0054
        gbc.setState(0x5736, 0x3109, 0xd530, 0xdb9f, 0xd4a1, 0xd9fa, 0x1, 0x1);
        gbc.writeMem(0x5736, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3109);
        EXPECT(gbc.pc(), 0x5738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0055
        gbc.setState(0x6d0a, 0xa615, 0xc550, 0xdb4c, 0xb492, 0x6b2f, 0x1, 0x0);
        gbc.writeMem(0x6d0a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa615);
        EXPECT(gbc.pc(), 0x6d0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0056
        gbc.setState(0xcf09, 0x78db, 0xd9e0, 0xa4f5, 0x13a4, 0x18f, 0x1, 0x1);
        gbc.writeMem(0xcf09, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x78db);
        EXPECT(gbc.pc(), 0xcf0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf09), 0xcb);
        EXPECT(gbc.readMem(0xcf0a), 0x1b);
        // CB 1B 0057
        gbc.setState(0x8a54, 0x8903, 0x8640, 0x7e8, 0x99cb, 0x5d83, 0x0, 0x1);
        gbc.writeMem(0x8a54, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8903);
        EXPECT(gbc.pc(), 0x8a56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a54), 0xcb);
        EXPECT(gbc.readMem(0x8a55), 0x1b);
        // CB 1B 0058
        gbc.setState(0x444d, 0xc99, 0xa840, 0x3d05, 0xf3e9, 0xc7c6, 0x1, 0x1);
        gbc.writeMem(0x444d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc99);
        EXPECT(gbc.pc(), 0x444f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0059
        gbc.setState(0xb676, 0x2b44, 0xca50, 0x868f, 0xc11e, 0xcef1, 0x0, 0x0);
        gbc.writeMem(0xb676, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2b44);
        EXPECT(gbc.pc(), 0xb678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb676), 0xcb);
        EXPECT(gbc.readMem(0xb677), 0x1b);
        // CB 1B 005A
        gbc.setState(0xcf90, 0xa634, 0x46f0, 0x8dea, 0x5d04, 0xec41, 0x0, 0x1);
        gbc.writeMem(0xcf90, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa634);
        EXPECT(gbc.pc(), 0xcf92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf90), 0xcb);
        EXPECT(gbc.readMem(0xcf91), 0x1b);
        // CB 1B 005B
        gbc.setState(0xbb6f, 0x36fa, 0xc7f0, 0x7ad1, 0x6a4, 0x96b8, 0x0, 0x0);
        gbc.writeMem(0xbb6f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x36fa);
        EXPECT(gbc.pc(), 0xbb71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6f), 0xcb);
        EXPECT(gbc.readMem(0xbb70), 0x1b);
        // CB 1B 005C
        gbc.setState(0xd274, 0x2e05, 0xdf0, 0x4970, 0xa2eb, 0xe703, 0x0, 0x0);
        gbc.writeMem(0xd274, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2e05);
        EXPECT(gbc.pc(), 0xd276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd274), 0xcb);
        EXPECT(gbc.readMem(0xd275), 0x1b);
        // CB 1B 005D
        gbc.setState(0x80b4, 0xaa70, 0xd040, 0xf82c, 0x49ab, 0x2c8e, 0x1, 0x1);
        gbc.writeMem(0x80b4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xaa70);
        EXPECT(gbc.pc(), 0x80b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b4), 0xcb);
        EXPECT(gbc.readMem(0x80b5), 0x1b);
        // CB 1B 005E
        gbc.setState(0x6dd6, 0x8ecc, 0xd5b0, 0xf541, 0xd8d0, 0xb80a, 0x0, 0x0);
        gbc.writeMem(0x6dd6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8ecc);
        EXPECT(gbc.pc(), 0x6dd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 005F
        gbc.setState(0x63e3, 0x1907, 0xc370, 0x9fce, 0x526b, 0x1fb3, 0x1, 0x0);
        gbc.writeMem(0x63e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1907);
        EXPECT(gbc.pc(), 0x63e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0061
        gbc.setState(0x61af, 0xefd7, 0x4b70, 0x86ac, 0x9cc9, 0x104e, 0x1, 0x1);
        gbc.writeMem(0x61af, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xefd7);
        EXPECT(gbc.pc(), 0x61b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0062
        gbc.setState(0x5f0d, 0x4779, 0x60c0, 0x9309, 0x2b71, 0x1770, 0x0, 0x0);
        gbc.writeMem(0x5f0d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4779);
        EXPECT(gbc.pc(), 0x5f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0063
        gbc.setState(0x7aae, 0x4176, 0x7b40, 0xc87c, 0x8bda, 0xf2d3, 0x0, 0x0);
        gbc.writeMem(0x7aae, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4176);
        EXPECT(gbc.pc(), 0x7ab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0064
        gbc.setState(0x6bc0, 0x6f34, 0x75b0, 0x61d8, 0x1772, 0x1cb2, 0x0, 0x1);
        gbc.writeMem(0x6bc0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6f34);
        EXPECT(gbc.pc(), 0x6bc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0065
        gbc.setState(0x95ba, 0xb00b, 0x8d70, 0xa20a, 0x307d, 0x4584, 0x0, 0x0);
        gbc.writeMem(0x95ba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb00b);
        EXPECT(gbc.pc(), 0x95bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ba), 0xcb);
        EXPECT(gbc.readMem(0x95bb), 0x1b);
        // CB 1B 0066
        gbc.setState(0xc368, 0xc48b, 0xc250, 0xfe57, 0xaee, 0xe2d0, 0x1, 0x1);
        gbc.writeMem(0xc368, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc48b);
        EXPECT(gbc.pc(), 0xc36a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc368), 0xcb);
        EXPECT(gbc.readMem(0xc369), 0x1b);
        // CB 1B 0067
        gbc.setState(0x7bb1, 0xc48, 0x9760, 0x7812, 0x7b62, 0x90b0, 0x1, 0x1);
        gbc.writeMem(0x7bb1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc48);
        EXPECT(gbc.pc(), 0x7bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0068
        gbc.setState(0xe942, 0xb8ef, 0xc50, 0x75b0, 0xdcc5, 0x9ede, 0x1, 0x1);
        gbc.writeMem(0xe942, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb8ef);
        EXPECT(gbc.pc(), 0xe944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe942), 0xcb);
        EXPECT(gbc.readMem(0xe943), 0x1b);
        // CB 1B 0069
        gbc.setState(0xeb88, 0x8346, 0x8a10, 0xe5c6, 0x9abc, 0x7439, 0x1, 0x1);
        gbc.writeMem(0xeb88, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8346);
        EXPECT(gbc.pc(), 0xeb8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb88), 0xcb);
        EXPECT(gbc.readMem(0xeb89), 0x1b);
        // CB 1B 006A
        gbc.setState(0x990e, 0xa1d1, 0xf00, 0x590a, 0xb926, 0xd81d, 0x0, 0x1);
        gbc.writeMem(0x990e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa1d1);
        EXPECT(gbc.pc(), 0x9910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990e), 0xcb);
        EXPECT(gbc.readMem(0x990f), 0x1b);
        // CB 1B 006B
        gbc.setState(0x6999, 0xf6af, 0xf1a0, 0xf9c, 0xd06, 0xf445, 0x0, 0x0);
        gbc.writeMem(0x6999, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf6af);
        EXPECT(gbc.pc(), 0x699b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 006C
        gbc.setState(0x222c, 0x82d8, 0xd060, 0x5200, 0x6a52, 0xe63f, 0x0, 0x1);
        gbc.writeMem(0x222c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x82d8);
        EXPECT(gbc.pc(), 0x222e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 006D
        gbc.setState(0xb365, 0x719b, 0xf90, 0x40b4, 0x6dbd, 0x4277, 0x0, 0x1);
        gbc.writeMem(0xb365, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x719b);
        EXPECT(gbc.pc(), 0xb367);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb365), 0xcb);
        EXPECT(gbc.readMem(0xb366), 0x1b);
        // CB 1B 006E
        gbc.setState(0x85e7, 0x8480, 0xe2b0, 0x655, 0xc747, 0x70a8, 0x1, 0x0);
        gbc.writeMem(0x85e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8480);
        EXPECT(gbc.pc(), 0x85e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e7), 0xcb);
        EXPECT(gbc.readMem(0x85e8), 0x1b);
        // CB 1B 006F
        gbc.setState(0xc283, 0xc241, 0x18f0, 0x3598, 0xae3d, 0xdcad, 0x0, 0x0);
        gbc.writeMem(0xc283, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc241);
        EXPECT(gbc.pc(), 0xc285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc283), 0xcb);
        EXPECT(gbc.readMem(0xc284), 0x1b);
        // CB 1B 0070
        gbc.setState(0xbbd, 0x4be9, 0x54b0, 0xe874, 0x7417, 0x3334, 0x1, 0x1);
        gbc.writeMem(0xbbd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4be9);
        EXPECT(gbc.pc(), 0xbbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0071
        gbc.setState(0xb471, 0xc943, 0xb440, 0xa3ef, 0x59c5, 0xc0a0, 0x0, 0x0);
        gbc.writeMem(0xb471, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc943);
        EXPECT(gbc.pc(), 0xb473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb471), 0xcb);
        EXPECT(gbc.readMem(0xb472), 0x1b);
        // CB 1B 0072
        gbc.setState(0x1f3e, 0x6dae, 0x8400, 0x97dc, 0x9a4c, 0xe7ca, 0x0, 0x1);
        gbc.writeMem(0x1f3e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6dae);
        EXPECT(gbc.pc(), 0x1f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0073
        gbc.setState(0xd5c7, 0xeb97, 0x6820, 0x5306, 0xdc36, 0x1d3, 0x0, 0x0);
        gbc.writeMem(0xd5c7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xeb97);
        EXPECT(gbc.pc(), 0xd5c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5c7), 0xcb);
        EXPECT(gbc.readMem(0xd5c8), 0x1b);
        // CB 1B 0074
        gbc.setState(0x9766, 0xa543, 0xe6d0, 0xead5, 0x18b7, 0x474a, 0x1, 0x1);
        gbc.writeMem(0x9766, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa543);
        EXPECT(gbc.pc(), 0x9768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9766), 0xcb);
        EXPECT(gbc.readMem(0x9767), 0x1b);
        // CB 1B 0075
        gbc.setState(0xd89e, 0xfaff, 0x1710, 0x5192, 0x592a, 0xc36, 0x0, 0x1);
        gbc.writeMem(0xd89e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xfaff);
        EXPECT(gbc.pc(), 0xd8a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd89e), 0xcb);
        EXPECT(gbc.readMem(0xd89f), 0x1b);
        // CB 1B 0076
        gbc.setState(0x5347, 0x97c7, 0xfe60, 0xbd59, 0xcc68, 0x35e0, 0x1, 0x0);
        gbc.writeMem(0x5347, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x97c7);
        EXPECT(gbc.pc(), 0x5349);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0077
        gbc.setState(0x59c0, 0xb86, 0x66f0, 0x5316, 0xd7e3, 0x23ef, 0x1, 0x1);
        gbc.writeMem(0x59c0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb86);
        EXPECT(gbc.pc(), 0x59c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0078
        gbc.setState(0xb5d1, 0xac8f, 0xbd20, 0x5c74, 0x3e1f, 0xa17d, 0x1, 0x0);
        gbc.writeMem(0xb5d1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xac8f);
        EXPECT(gbc.pc(), 0xb5d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d1), 0xcb);
        EXPECT(gbc.readMem(0xb5d2), 0x1b);
        // CB 1B 0079
        gbc.setState(0x3bad, 0x54b6, 0xe0e0, 0xd2f, 0xe210, 0xb120, 0x0, 0x0);
        gbc.writeMem(0x3bad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x54b6);
        EXPECT(gbc.pc(), 0x3baf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 007B
        gbc.setState(0xc924, 0x3450, 0x310, 0x4c3, 0xf6cc, 0x4b66, 0x1, 0x0);
        gbc.writeMem(0xc924, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3450);
        EXPECT(gbc.pc(), 0xc926);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc924), 0xcb);
        EXPECT(gbc.readMem(0xc925), 0x1b);
        // CB 1B 007D
        gbc.setState(0xcce2, 0x55eb, 0x7750, 0xa851, 0xc94f, 0x5317, 0x0, 0x1);
        gbc.writeMem(0xcce2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x55eb);
        EXPECT(gbc.pc(), 0xcce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcce2), 0xcb);
        EXPECT(gbc.readMem(0xcce3), 0x1b);
        // CB 1B 007E
        gbc.setState(0xc61e, 0xdd71, 0xb8a0, 0x7100, 0xc46c, 0x766b, 0x0, 0x0);
        gbc.writeMem(0xc61e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdd71);
        EXPECT(gbc.pc(), 0xc620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61e), 0xcb);
        EXPECT(gbc.readMem(0xc61f), 0x1b);
        // CB 1B 007F
        gbc.setState(0xcf7, 0x8587, 0x8c30, 0xb3d8, 0x63f4, 0x78f, 0x0, 0x0);
        gbc.writeMem(0xcf7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8587);
        EXPECT(gbc.pc(), 0xcf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0080
        gbc.setState(0x1703, 0xcf49, 0xa890, 0x3340, 0xaa89, 0x8dcb, 0x1, 0x0);
        gbc.writeMem(0x1703, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcf49);
        EXPECT(gbc.pc(), 0x1705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0081
        gbc.setState(0x661b, 0x6069, 0xa3b0, 0x3f61, 0x4c7f, 0xa793, 0x0, 0x0);
        gbc.writeMem(0x661b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6069);
        EXPECT(gbc.pc(), 0x661d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0082
        gbc.setState(0x7390, 0x4f01, 0x22f0, 0x9f77, 0xa00c, 0x9dbc, 0x0, 0x0);
        gbc.writeMem(0x7390, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4f01);
        EXPECT(gbc.pc(), 0x7392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0083
        gbc.setState(0xa72, 0x4810, 0xa9c0, 0x942a, 0x5353, 0xe338, 0x1, 0x0);
        gbc.writeMem(0xa72, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4810);
        EXPECT(gbc.pc(), 0xa74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0084
        gbc.setState(0xedee, 0x1be8, 0x7a10, 0xe274, 0xd630, 0xc890, 0x1, 0x1);
        gbc.writeMem(0xedee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1be8);
        EXPECT(gbc.pc(), 0xedf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedee), 0xcb);
        EXPECT(gbc.readMem(0xedef), 0x1b);
        // CB 1B 0085
        gbc.setState(0x3d1a, 0xa01d, 0xe190, 0x670e, 0x3969, 0xe97, 0x0, 0x0);
        gbc.writeMem(0x3d1a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xa01d);
        EXPECT(gbc.pc(), 0x3d1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0086
        gbc.setState(0x307e, 0xf7b, 0xb2e0, 0xf113, 0xf5ce, 0x8e29, 0x0, 0x1);
        gbc.writeMem(0x307e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf7b);
        EXPECT(gbc.pc(), 0x3080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0087
        gbc.setState(0x9587, 0x3004, 0xa40, 0xe574, 0x6388, 0x4247, 0x0, 0x1);
        gbc.writeMem(0x9587, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3004);
        EXPECT(gbc.pc(), 0x9589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9587), 0xcb);
        EXPECT(gbc.readMem(0x9588), 0x1b);
        // CB 1B 0088
        gbc.setState(0xcb18, 0xcd02, 0x1bd0, 0x36ee, 0x9ef0, 0x8306, 0x1, 0x1);
        gbc.writeMem(0xcb18, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcd02);
        EXPECT(gbc.pc(), 0xcb1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb18), 0xcb);
        EXPECT(gbc.readMem(0xcb19), 0x1b);
        // CB 1B 0089
        gbc.setState(0xdc58, 0x6774, 0xd710, 0xb108, 0x3785, 0x5631, 0x0, 0x0);
        gbc.writeMem(0xdc58, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6774);
        EXPECT(gbc.pc(), 0xdc5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc58), 0xcb);
        EXPECT(gbc.readMem(0xdc59), 0x1b);
        // CB 1B 008B
        gbc.setState(0x220b, 0x6908, 0x2e80, 0xe62a, 0xeec3, 0x5637, 0x1, 0x1);
        gbc.writeMem(0x220b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6908);
        EXPECT(gbc.pc(), 0x220d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 008D
        gbc.setState(0x6e9b, 0xf8d5, 0x5fd0, 0xf203, 0x60db, 0x39d7, 0x1, 0x1);
        gbc.writeMem(0x6e9b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf8d5);
        EXPECT(gbc.pc(), 0x6e9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 008E
        gbc.setState(0xcb73, 0x2491, 0x310, 0x4db0, 0xed73, 0xf6dd, 0x0, 0x1);
        gbc.writeMem(0xcb73, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2491);
        EXPECT(gbc.pc(), 0xcb75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb73), 0xcb);
        EXPECT(gbc.readMem(0xcb74), 0x1b);
        // CB 1B 008F
        gbc.setState(0x70fd, 0xb674, 0x1170, 0xa466, 0xcc41, 0x4a96, 0x0, 0x0);
        gbc.writeMem(0x70fd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb674);
        EXPECT(gbc.pc(), 0x70ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0090
        gbc.setState(0x9aed, 0xca7f, 0x8c60, 0x95b0, 0xb2c2, 0xb804, 0x0, 0x0);
        gbc.writeMem(0x9aed, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xca7f);
        EXPECT(gbc.pc(), 0x9aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aed), 0xcb);
        EXPECT(gbc.readMem(0x9aee), 0x1b);
        // CB 1B 0091
        gbc.setState(0x7ee0, 0xc407, 0x6750, 0xf73c, 0x9a48, 0xd285, 0x1, 0x1);
        gbc.writeMem(0x7ee0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc407);
        EXPECT(gbc.pc(), 0x7ee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0092
        gbc.setState(0x8f1a, 0x7ac4, 0x7920, 0x3d46, 0xd8a, 0xe217, 0x0, 0x0);
        gbc.writeMem(0x8f1a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7ac4);
        EXPECT(gbc.pc(), 0x8f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f1a), 0xcb);
        EXPECT(gbc.readMem(0x8f1b), 0x1b);
        // CB 1B 0093
        gbc.setState(0xb32f, 0xf9ec, 0x11e0, 0xf6ee, 0x4901, 0x3a99, 0x1, 0x1);
        gbc.writeMem(0xb32f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf9ec);
        EXPECT(gbc.pc(), 0xb331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb32f), 0xcb);
        EXPECT(gbc.readMem(0xb330), 0x1b);
        // CB 1B 0094
        gbc.setState(0x15e7, 0x4c6e, 0x2fd0, 0x4a3c, 0x7082, 0x6b86, 0x0, 0x1);
        gbc.writeMem(0x15e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4c6e);
        EXPECT(gbc.pc(), 0x15e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0095
        gbc.setState(0x561b, 0x5d63, 0x8860, 0xd556, 0x3975, 0x44e1, 0x0, 0x0);
        gbc.writeMem(0x561b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5d63);
        EXPECT(gbc.pc(), 0x561d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0096
        gbc.setState(0x9028, 0xe0a4, 0x280, 0x5146, 0xe601, 0xb2a8, 0x0, 0x1);
        gbc.writeMem(0x9028, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe0a4);
        EXPECT(gbc.pc(), 0x902a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9028), 0xcb);
        EXPECT(gbc.readMem(0x9029), 0x1b);
        // CB 1B 0097
        gbc.setState(0x146e, 0x2513, 0x7680, 0xd7d2, 0x18bc, 0xc8f9, 0x1, 0x1);
        gbc.writeMem(0x146e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2513);
        EXPECT(gbc.pc(), 0x1470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0098
        gbc.setState(0x5890, 0xd0b, 0x7590, 0x412, 0x1ce7, 0x9bd2, 0x1, 0x0);
        gbc.writeMem(0x5890, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd0b);
        EXPECT(gbc.pc(), 0x5892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0099
        gbc.setState(0x9514, 0xecb1, 0x8bf0, 0xfce0, 0xd9d3, 0xa0b1, 0x1, 0x1);
        gbc.writeMem(0x9514, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xecb1);
        EXPECT(gbc.pc(), 0x9516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9514), 0xcb);
        EXPECT(gbc.readMem(0x9515), 0x1b);
        // CB 1B 009A
        gbc.setState(0x88dd, 0xa4f4, 0x71d0, 0x3e9b, 0xd807, 0x6ba7, 0x1, 0x1);
        gbc.writeMem(0x88dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa4f4);
        EXPECT(gbc.pc(), 0x88df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88dd), 0xcb);
        EXPECT(gbc.readMem(0x88de), 0x1b);
        // CB 1B 009B
        gbc.setState(0x9915, 0x4df7, 0x17e0, 0x1449, 0xc74f, 0x1bcb, 0x1, 0x0);
        gbc.writeMem(0x9915, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4df7);
        EXPECT(gbc.pc(), 0x9917);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9915), 0xcb);
        EXPECT(gbc.readMem(0x9916), 0x1b);
        // CB 1B 009C
        gbc.setState(0xb96d, 0xfe7e, 0x7780, 0x4191, 0x9ad6, 0xd46c, 0x1, 0x0);
        gbc.writeMem(0xb96d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfe7e);
        EXPECT(gbc.pc(), 0xb96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb96d), 0xcb);
        EXPECT(gbc.readMem(0xb96e), 0x1b);
        // CB 1B 009E
        gbc.setState(0xc90c, 0xf9d2, 0x40c0, 0x94d8, 0x2149, 0xf2de, 0x0, 0x0);
        gbc.writeMem(0xc90c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf9d2);
        EXPECT(gbc.pc(), 0xc90e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc90c), 0xcb);
        EXPECT(gbc.readMem(0xc90d), 0x1b);
        // CB 1B 00A0
        gbc.setState(0xdd52, 0x838f, 0x6da0, 0xedc5, 0x264, 0x6b4a, 0x0, 0x0);
        gbc.writeMem(0xdd52, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x838f);
        EXPECT(gbc.pc(), 0xdd54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd52), 0xcb);
        EXPECT(gbc.readMem(0xdd53), 0x1b);
        // CB 1B 00A1
        gbc.setState(0x8ae9, 0x159c, 0xc620, 0x251c, 0x770d, 0x272b, 0x0, 0x1);
        gbc.writeMem(0x8ae9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x159c);
        EXPECT(gbc.pc(), 0x8aeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ae9), 0xcb);
        EXPECT(gbc.readMem(0x8aea), 0x1b);
        // CB 1B 00A2
        gbc.setState(0x29d9, 0xf6eb, 0x5ff0, 0xd7c3, 0xe1f6, 0xceb8, 0x1, 0x0);
        gbc.writeMem(0x29d9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf6eb);
        EXPECT(gbc.pc(), 0x29db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00A3
        gbc.setState(0x8d23, 0xdcbf, 0x3d80, 0x6aad, 0x16f1, 0x752b, 0x1, 0x0);
        gbc.writeMem(0x8d23, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xdcbf);
        EXPECT(gbc.pc(), 0x8d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d23), 0xcb);
        EXPECT(gbc.readMem(0x8d24), 0x1b);
        // CB 1B 00A4
        gbc.setState(0x3bf9, 0x543c, 0x2b50, 0xa441, 0x32ad, 0x5b1d, 0x0, 0x1);
        gbc.writeMem(0x3bf9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x543c);
        EXPECT(gbc.pc(), 0x3bfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00A5
        gbc.setState(0xd26c, 0x71c9, 0x87b0, 0xad40, 0xd791, 0x6f8d, 0x0, 0x0);
        gbc.writeMem(0xd26c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x71c9);
        EXPECT(gbc.pc(), 0xd26e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd26c), 0xcb);
        EXPECT(gbc.readMem(0xd26d), 0x1b);
        // CB 1B 00A6
        gbc.setState(0xc515, 0x1ce1, 0x7a90, 0xb1d0, 0xf0e, 0xcb12, 0x1, 0x1);
        gbc.writeMem(0xc515, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1ce1);
        EXPECT(gbc.pc(), 0xc517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc515), 0xcb);
        EXPECT(gbc.readMem(0xc516), 0x1b);
        // CB 1B 00A7
        gbc.setState(0x7a03, 0x3b45, 0xe070, 0xaeb7, 0x536e, 0xd0f5, 0x1, 0x1);
        gbc.writeMem(0x7a03, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3b45);
        EXPECT(gbc.pc(), 0x7a05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00A8
        gbc.setState(0xc36b, 0xabc6, 0x9370, 0x510d, 0xbf53, 0x810b, 0x1, 0x1);
        gbc.writeMem(0xc36b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xabc6);
        EXPECT(gbc.pc(), 0xc36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc36b), 0xcb);
        EXPECT(gbc.readMem(0xc36c), 0x1b);
        // CB 1B 00A9
        gbc.setState(0xb46f, 0x5c5b, 0x7b90, 0xf392, 0xc8e6, 0x103a, 0x0, 0x1);
        gbc.writeMem(0xb46f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5c5b);
        EXPECT(gbc.pc(), 0xb471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb46f), 0xcb);
        EXPECT(gbc.readMem(0xb470), 0x1b);
        // CB 1B 00AA
        gbc.setState(0xc28b, 0x92f6, 0xf710, 0xa0ce, 0x8de2, 0x24af, 0x0, 0x1);
        gbc.writeMem(0xc28b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x92f6);
        EXPECT(gbc.pc(), 0xc28d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc28b), 0xcb);
        EXPECT(gbc.readMem(0xc28c), 0x1b);
        // CB 1B 00AB
        gbc.setState(0x78e7, 0xb7c0, 0x8210, 0x97ed, 0x7672, 0x13a3, 0x0, 0x0);
        gbc.writeMem(0x78e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb7c0);
        EXPECT(gbc.pc(), 0x78e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00AC
        gbc.setState(0xd3a8, 0xa5b, 0x4430, 0x5c55, 0x52e1, 0x2a32, 0x1, 0x0);
        gbc.writeMem(0xd3a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa5b);
        EXPECT(gbc.pc(), 0xd3aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3a8), 0xcb);
        EXPECT(gbc.readMem(0xd3a9), 0x1b);
        // CB 1B 00AD
        gbc.setState(0x3044, 0x4e3b, 0x8660, 0x16e0, 0x78f0, 0x2f62, 0x1, 0x1);
        gbc.writeMem(0x3044, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4e3b);
        EXPECT(gbc.pc(), 0x3046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00AE
        gbc.setState(0x2479, 0xb16, 0xd1e0, 0xe08b, 0xacea, 0x9357, 0x0, 0x0);
        gbc.writeMem(0x2479, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb16);
        EXPECT(gbc.pc(), 0x247b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00AF
        gbc.setState(0xb19a, 0x26bd, 0x6970, 0x1525, 0xc7e, 0x6df, 0x0, 0x1);
        gbc.writeMem(0xb19a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x26bd);
        EXPECT(gbc.pc(), 0xb19c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19a), 0xcb);
        EXPECT(gbc.readMem(0xb19b), 0x1b);
        // CB 1B 00B0
        gbc.setState(0x9e94, 0xc272, 0x3470, 0xb3fa, 0xcc6a, 0x32ac, 0x0, 0x0);
        gbc.writeMem(0x9e94, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc272);
        EXPECT(gbc.pc(), 0x9e96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e94), 0xcb);
        EXPECT(gbc.readMem(0x9e95), 0x1b);
        // CB 1B 00B1
        gbc.setState(0x45a4, 0x11b3, 0x1610, 0x3908, 0x3a57, 0x8dde, 0x1, 0x1);
        gbc.writeMem(0x45a4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x11b3);
        EXPECT(gbc.pc(), 0x45a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00B2
        gbc.setState(0xceaa, 0xed86, 0x3eb0, 0xa756, 0x96ea, 0x562f, 0x0, 0x0);
        gbc.writeMem(0xceaa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xed86);
        EXPECT(gbc.pc(), 0xceac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceaa), 0xcb);
        EXPECT(gbc.readMem(0xceab), 0x1b);
        // CB 1B 00B3
        gbc.setState(0xd6c6, 0xe4db, 0xb3e0, 0x298c, 0x5a10, 0x990e, 0x1, 0x1);
        gbc.writeMem(0xd6c6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe4db);
        EXPECT(gbc.pc(), 0xd6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c6), 0xcb);
        EXPECT(gbc.readMem(0xd6c7), 0x1b);
        // CB 1B 00B4
        gbc.setState(0x13c3, 0xb1fd, 0xc680, 0xebdb, 0x90a8, 0x2e61, 0x1, 0x1);
        gbc.writeMem(0x13c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb1fd);
        EXPECT(gbc.pc(), 0x13c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00B5
        gbc.setState(0xc2de, 0x9bb8, 0x3b70, 0x64a8, 0x885d, 0xe4cd, 0x0, 0x0);
        gbc.writeMem(0xc2de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9bb8);
        EXPECT(gbc.pc(), 0xc2e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2de), 0xcb);
        EXPECT(gbc.readMem(0xc2df), 0x1b);
        // CB 1B 00B6
        gbc.setState(0x9c96, 0xc0ea, 0x3c60, 0x969f, 0xdbeb, 0xf824, 0x0, 0x0);
        gbc.writeMem(0x9c96, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc0ea);
        EXPECT(gbc.pc(), 0x9c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c96), 0xcb);
        EXPECT(gbc.readMem(0x9c97), 0x1b);
        // CB 1B 00B7
        gbc.setState(0x45ca, 0xc95d, 0x8280, 0x9a52, 0xbfc0, 0x6744, 0x0, 0x0);
        gbc.writeMem(0x45ca, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc95d);
        EXPECT(gbc.pc(), 0x45cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00B8
        gbc.setState(0x45fe, 0xfdcd, 0x23f0, 0x454d, 0xeb82, 0x7a75, 0x1, 0x1);
        gbc.writeMem(0x45fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xfdcd);
        EXPECT(gbc.pc(), 0x4600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00B9
        gbc.setState(0x21b8, 0x16ef, 0x8e50, 0x8fd6, 0xade, 0x368a, 0x1, 0x1);
        gbc.writeMem(0x21b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x16ef);
        EXPECT(gbc.pc(), 0x21ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00BA
        gbc.setState(0x8fe9, 0xb7e1, 0xb50, 0x2742, 0x96af, 0x602b, 0x1, 0x1);
        gbc.writeMem(0x8fe9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb7e1);
        EXPECT(gbc.pc(), 0x8feb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fe9), 0xcb);
        EXPECT(gbc.readMem(0x8fea), 0x1b);
        // CB 1B 00BB
        gbc.setState(0x7fe3, 0x7820, 0xc890, 0x9059, 0x4b14, 0x4253, 0x1, 0x0);
        gbc.writeMem(0x7fe3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7820);
        EXPECT(gbc.pc(), 0x7fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00BC
        gbc.setState(0x3b80, 0x4d07, 0x5f30, 0x9917, 0x3595, 0x3a3a, 0x0, 0x1);
        gbc.writeMem(0x3b80, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4d07);
        EXPECT(gbc.pc(), 0x3b82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00BD
        gbc.setState(0x4696, 0x8c4, 0xec40, 0x9a20, 0x8ba1, 0x388b, 0x1, 0x1);
        gbc.writeMem(0x4696, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8c4);
        EXPECT(gbc.pc(), 0x4698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00BE
        gbc.setState(0x86bd, 0xd55e, 0x1470, 0xa859, 0x2d59, 0x5abb, 0x0, 0x0);
        gbc.writeMem(0x86bd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd55e);
        EXPECT(gbc.pc(), 0x86bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86bd), 0xcb);
        EXPECT(gbc.readMem(0x86be), 0x1b);
        // CB 1B 00BF
        gbc.setState(0x99c5, 0x3d8e, 0x5e00, 0x29e5, 0x70fe, 0xdda, 0x0, 0x1);
        gbc.writeMem(0x99c5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3d8e);
        EXPECT(gbc.pc(), 0x99c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c5), 0xcb);
        EXPECT(gbc.readMem(0x99c6), 0x1b);
        // CB 1B 00C0
        gbc.setState(0x91b1, 0xcc88, 0x6fd0, 0x6da5, 0xdb24, 0x394e, 0x0, 0x0);
        gbc.writeMem(0x91b1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xcc88);
        EXPECT(gbc.pc(), 0x91b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b1), 0xcb);
        EXPECT(gbc.readMem(0x91b2), 0x1b);
        // CB 1B 00C1
        gbc.setState(0x4454, 0xea6a, 0x79a0, 0x5080, 0x581b, 0xecb4, 0x0, 0x0);
        gbc.writeMem(0x4454, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xea6a);
        EXPECT(gbc.pc(), 0x4456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00C2
        gbc.setState(0x4e40, 0xcbda, 0x74c0, 0xec69, 0xd9df, 0xb25, 0x1, 0x1);
        gbc.writeMem(0x4e40, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcbda);
        EXPECT(gbc.pc(), 0x4e42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00C3
        gbc.setState(0x8bc9, 0xdb31, 0x5d40, 0x36a6, 0x91ac, 0x3818, 0x1, 0x0);
        gbc.writeMem(0x8bc9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdb31);
        EXPECT(gbc.pc(), 0x8bcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bc9), 0xcb);
        EXPECT(gbc.readMem(0x8bca), 0x1b);
        // CB 1B 00C4
        gbc.setState(0xe76f, 0xcc4c, 0x5560, 0x39a, 0x7093, 0xcd02, 0x1, 0x1);
        gbc.writeMem(0xe76f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcc4c);
        EXPECT(gbc.pc(), 0xe771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe76f), 0xcb);
        EXPECT(gbc.readMem(0xe770), 0x1b);
        // CB 1B 00C6
        gbc.setState(0x4ba9, 0x556c, 0x94a0, 0x5d1d, 0x1ffe, 0x6fb0, 0x1, 0x1);
        gbc.writeMem(0x4ba9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x556c);
        EXPECT(gbc.pc(), 0x4bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00C7
        gbc.setState(0xbb0b, 0x1538, 0x8d00, 0x852, 0x201, 0x9d7, 0x0, 0x1);
        gbc.writeMem(0xbb0b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1538);
        EXPECT(gbc.pc(), 0xbb0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb0b), 0xcb);
        EXPECT(gbc.readMem(0xbb0c), 0x1b);
        // CB 1B 00C8
        gbc.setState(0x34af, 0x513c, 0x5570, 0xddf9, 0x53da, 0x465a, 0x0, 0x1);
        gbc.writeMem(0x34af, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x513c);
        EXPECT(gbc.pc(), 0x34b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00C9
        gbc.setState(0x4e38, 0x3301, 0x8e30, 0x2870, 0x3a3, 0x64dd, 0x1, 0x0);
        gbc.writeMem(0x4e38, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3301);
        EXPECT(gbc.pc(), 0x4e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00CA
        gbc.setState(0x79ce, 0xb343, 0x24b0, 0x13fc, 0x7cf, 0x2b54, 0x1, 0x0);
        gbc.writeMem(0x79ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb343);
        EXPECT(gbc.pc(), 0x79d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00CB
        gbc.setState(0x5bba, 0xb9e5, 0x69c0, 0xedd0, 0x94b5, 0x5433, 0x1, 0x1);
        gbc.writeMem(0x5bba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb9e5);
        EXPECT(gbc.pc(), 0x5bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00CC
        gbc.setState(0xc95f, 0xfab1, 0xdc30, 0x48d8, 0xab77, 0x3394, 0x1, 0x1);
        gbc.writeMem(0xc95f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfab1);
        EXPECT(gbc.pc(), 0xc961);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc95f), 0xcb);
        EXPECT(gbc.readMem(0xc960), 0x1b);
        // CB 1B 00CD
        gbc.setState(0x2982, 0x2901, 0x90c0, 0xab, 0x8197, 0xc206, 0x0, 0x0);
        gbc.writeMem(0x2982, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2901);
        EXPECT(gbc.pc(), 0x2984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00CE
        gbc.setState(0x2388, 0xc0a6, 0xdc20, 0x519f, 0x6fcf, 0xe11e, 0x0, 0x0);
        gbc.writeMem(0x2388, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc0a6);
        EXPECT(gbc.pc(), 0x238a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00CF
        gbc.setState(0xb208, 0x559f, 0x5eb0, 0xbbb5, 0xae03, 0x60b6, 0x0, 0x1);
        gbc.writeMem(0xb208, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x559f);
        EXPECT(gbc.pc(), 0xb20a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb208), 0xcb);
        EXPECT(gbc.readMem(0xb209), 0x1b);
        // CB 1B 00D0
        gbc.setState(0x6cee, 0xe600, 0x8f10, 0x8882, 0xad21, 0xb17c, 0x0, 0x0);
        gbc.writeMem(0x6cee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe600);
        EXPECT(gbc.pc(), 0x6cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00D1
        gbc.setState(0xf55, 0x91da, 0x97c0, 0x3bff, 0xdeb, 0xe179, 0x0, 0x1);
        gbc.writeMem(0xf55, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x91da);
        EXPECT(gbc.pc(), 0xf57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00D2
        gbc.setState(0xeb32, 0x301d, 0x97d0, 0x6066, 0xb1f7, 0xfed3, 0x1, 0x1);
        gbc.writeMem(0xeb32, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x301d);
        EXPECT(gbc.pc(), 0xeb34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb32), 0xcb);
        EXPECT(gbc.readMem(0xeb33), 0x1b);
        // CB 1B 00D3
        gbc.setState(0xbaef, 0xbfc4, 0xd3e0, 0x677a, 0xba37, 0x50ac, 0x0, 0x1);
        gbc.writeMem(0xbaef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xbfc4);
        EXPECT(gbc.pc(), 0xbaf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaef), 0xcb);
        EXPECT(gbc.readMem(0xbaf0), 0x1b);
        // CB 1B 00D4
        gbc.setState(0xd85f, 0xad69, 0x8a20, 0x4427, 0x1a1, 0x1491, 0x1, 0x1);
        gbc.writeMem(0xd85f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xad69);
        EXPECT(gbc.pc(), 0xd861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd85f), 0xcb);
        EXPECT(gbc.readMem(0xd860), 0x1b);
        // CB 1B 00D5
        gbc.setState(0x1212, 0x3a6c, 0xead0, 0x2ea3, 0xcbeb, 0xc328, 0x1, 0x0);
        gbc.writeMem(0x1212, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3a6c);
        EXPECT(gbc.pc(), 0x1214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00D6
        gbc.setState(0xe16e, 0xb5ee, 0xc6a0, 0x590e, 0x1251, 0x62b8, 0x1, 0x0);
        gbc.writeMem(0xe16e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb5ee);
        EXPECT(gbc.pc(), 0xe170);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe16e), 0xcb);
        EXPECT(gbc.readMem(0xe16f), 0x1b);
        // CB 1B 00D7
        gbc.setState(0x29c2, 0x54e7, 0xb0, 0x9b3c, 0xfcb0, 0xe4d5, 0x0, 0x1);
        gbc.writeMem(0x29c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x54e7);
        EXPECT(gbc.pc(), 0x29c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00D8
        gbc.setState(0x3abb, 0x5eb2, 0x6ce0, 0x5ce, 0xa511, 0x60de, 0x1, 0x0);
        gbc.writeMem(0x3abb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5eb2);
        EXPECT(gbc.pc(), 0x3abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00D9
        gbc.setState(0xec35, 0xa96d, 0xb630, 0x7cbc, 0x424a, 0x754b, 0x1, 0x0);
        gbc.writeMem(0xec35, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa96d);
        EXPECT(gbc.pc(), 0xec37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec35), 0xcb);
        EXPECT(gbc.readMem(0xec36), 0x1b);
        // CB 1B 00DB
        gbc.setState(0x4dab, 0xfae4, 0x2750, 0x72d, 0x558a, 0x9f21, 0x0, 0x1);
        gbc.writeMem(0x4dab, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfae4);
        EXPECT(gbc.pc(), 0x4dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00DC
        gbc.setState(0xe3e9, 0x7923, 0xbdc0, 0xd513, 0x7eae, 0x80c7, 0x1, 0x1);
        gbc.writeMem(0xe3e9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7923);
        EXPECT(gbc.pc(), 0xe3eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3e9), 0xcb);
        EXPECT(gbc.readMem(0xe3ea), 0x1b);
        // CB 1B 00DD
        gbc.setState(0x41d8, 0x5a81, 0xce40, 0x9190, 0x611, 0xdcd4, 0x0, 0x1);
        gbc.writeMem(0x41d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5a81);
        EXPECT(gbc.pc(), 0x41da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00DE
        gbc.setState(0x32b5, 0xafdd, 0xb40, 0x62de, 0x10ab, 0xe391, 0x1, 0x0);
        gbc.writeMem(0x32b5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xafdd);
        EXPECT(gbc.pc(), 0x32b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00DF
        gbc.setState(0xbd3b, 0xe128, 0xf570, 0x2ff7, 0x8443, 0x20df, 0x1, 0x1);
        gbc.writeMem(0xbd3b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe128);
        EXPECT(gbc.pc(), 0xbd3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd3b), 0xcb);
        EXPECT(gbc.readMem(0xbd3c), 0x1b);
        // CB 1B 00E0
        gbc.setState(0xc8fe, 0xa4de, 0x65b0, 0x90a, 0x9ea4, 0xd055, 0x0, 0x0);
        gbc.writeMem(0xc8fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa4de);
        EXPECT(gbc.pc(), 0xc900);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8fe), 0xcb);
        EXPECT(gbc.readMem(0xc8ff), 0x1b);
        // CB 1B 00E1
        gbc.setState(0x5eb8, 0x69b8, 0xde30, 0xf7e5, 0x7f6b, 0xc73d, 0x1, 0x0);
        gbc.writeMem(0x5eb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x69b8);
        EXPECT(gbc.pc(), 0x5eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00E2
        gbc.setState(0x96e2, 0x1b50, 0x4370, 0xb4e, 0x636b, 0x870f, 0x1, 0x1);
        gbc.writeMem(0x96e2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1b50);
        EXPECT(gbc.pc(), 0x96e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96e2), 0xcb);
        EXPECT(gbc.readMem(0x96e3), 0x1b);
        // CB 1B 00E3
        gbc.setState(0x55bb, 0xdb41, 0x930, 0xbc73, 0x19ba, 0xefa3, 0x1, 0x0);
        gbc.writeMem(0x55bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xdb41);
        EXPECT(gbc.pc(), 0x55bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00E5
        gbc.setState(0x4ea8, 0xfdb0, 0x9120, 0xc223, 0x5a29, 0xf5c1, 0x0, 0x1);
        gbc.writeMem(0x4ea8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xfdb0);
        EXPECT(gbc.pc(), 0x4eaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00E6
        gbc.setState(0x853e, 0xdaae, 0x6420, 0xc045, 0x3a90, 0x2611, 0x0, 0x1);
        gbc.writeMem(0x853e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xdaae);
        EXPECT(gbc.pc(), 0x8540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x853e), 0xcb);
        EXPECT(gbc.readMem(0x853f), 0x1b);
        // CB 1B 00E7
        gbc.setState(0x252d, 0xd913, 0x7ec0, 0x8b5, 0x139f, 0xb8b6, 0x1, 0x1);
        gbc.writeMem(0x252d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd913);
        EXPECT(gbc.pc(), 0x252f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00E8
        gbc.setState(0x7bf, 0xe6cb, 0x25e0, 0x1842, 0x1eaa, 0x1013, 0x0, 0x0);
        gbc.writeMem(0x7bf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe6cb);
        EXPECT(gbc.pc(), 0x7c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00E9
        gbc.setState(0x4963, 0xd311, 0x96e0, 0x1ead, 0xb5e6, 0x190f, 0x1, 0x1);
        gbc.writeMem(0x4963, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd311);
        EXPECT(gbc.pc(), 0x4965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00EA
        gbc.setState(0x3302, 0x39d0, 0x9ae0, 0x32cf, 0x4394, 0x885, 0x1, 0x1);
        gbc.writeMem(0x3302, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x39d0);
        EXPECT(gbc.pc(), 0x3304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00EB
        gbc.setState(0x59e6, 0xfd89, 0x5e00, 0x2640, 0x5147, 0x69ea, 0x1, 0x0);
        gbc.writeMem(0x59e6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfd89);
        EXPECT(gbc.pc(), 0x59e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00EC
        gbc.setState(0x8fe3, 0xb6b7, 0xd860, 0xe0e4, 0xc0c0, 0x5a5b, 0x0, 0x0);
        gbc.writeMem(0x8fe3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb6b7);
        EXPECT(gbc.pc(), 0x8fe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe3), 0xcb);
        EXPECT(gbc.readMem(0x8fe4), 0x1b);
        // CB 1B 00ED
        gbc.setState(0x901d, 0xdb98, 0x81c0, 0xe975, 0x3640, 0xdad6, 0x1, 0x1);
        gbc.writeMem(0x901d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xdb98);
        EXPECT(gbc.pc(), 0x901f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x901d), 0xcb);
        EXPECT(gbc.readMem(0x901e), 0x1b);
        // CB 1B 00EE
        gbc.setState(0x823f, 0x95dd, 0x7ab0, 0x3bdd, 0x7b0e, 0xcc15, 0x1, 0x0);
        gbc.writeMem(0x823f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x95dd);
        EXPECT(gbc.pc(), 0x8241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x823f), 0xcb);
        EXPECT(gbc.readMem(0x8240), 0x1b);
        // CB 1B 00EF
        gbc.setState(0x5bf7, 0x9438, 0x6630, 0xa437, 0x64bf, 0x91b0, 0x0, 0x1);
        gbc.writeMem(0x5bf7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9438);
        EXPECT(gbc.pc(), 0x5bf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00F0
        gbc.setState(0x78c, 0xf8d8, 0x6cd0, 0x7be, 0x2f04, 0xfb75, 0x1, 0x0);
        gbc.writeMem(0x78c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf8d8);
        EXPECT(gbc.pc(), 0x78e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00F1
        gbc.setState(0x4be6, 0xf4fb, 0xe30, 0x608e, 0x2053, 0xa75e, 0x0, 0x1);
        gbc.writeMem(0x4be6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf4fb);
        EXPECT(gbc.pc(), 0x4be8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00F2
        gbc.setState(0xd183, 0x9da5, 0xdec0, 0xf588, 0xe90d, 0xb47f, 0x0, 0x0);
        gbc.writeMem(0xd183, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9da5);
        EXPECT(gbc.pc(), 0xd185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd183), 0xcb);
        EXPECT(gbc.readMem(0xd184), 0x1b);
        // CB 1B 00F3
        gbc.setState(0x9ba6, 0x5aa4, 0x9c30, 0x7d1e, 0x89f3, 0xfc16, 0x1, 0x0);
        gbc.writeMem(0x9ba6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5aa4);
        EXPECT(gbc.pc(), 0x9ba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba6), 0xcb);
        EXPECT(gbc.readMem(0x9ba7), 0x1b);
        // CB 1B 00F4
        gbc.setState(0x177f, 0xa947, 0x7240, 0x5bf0, 0x2fca, 0x1318, 0x0, 0x1);
        gbc.writeMem(0x177f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa947);
        EXPECT(gbc.pc(), 0x1781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00F5
        gbc.setState(0x4c10, 0x5659, 0xaf90, 0x8481, 0xe6d6, 0x454a, 0x0, 0x1);
        gbc.writeMem(0x4c10, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5659);
        EXPECT(gbc.pc(), 0x4c12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00F6
        gbc.setState(0x56fe, 0x7d80, 0xe6f0, 0xd940, 0x9c47, 0xb177, 0x0, 0x0);
        gbc.writeMem(0x56fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7d80);
        EXPECT(gbc.pc(), 0x5700);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 00F7
        gbc.setState(0x9ee6, 0xc1df, 0x10e0, 0x27d2, 0x107a, 0x117a, 0x0, 0x1);
        gbc.writeMem(0x9ee6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc1df);
        EXPECT(gbc.pc(), 0x9ee8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee6), 0xcb);
        EXPECT(gbc.readMem(0x9ee7), 0x1b);
        // CB 1B 00F8
        gbc.setState(0xb685, 0xc3c5, 0xdd30, 0xcb36, 0xdc8c, 0xa208, 0x0, 0x0);
        gbc.writeMem(0xb685, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc3c5);
        EXPECT(gbc.pc(), 0xb687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb685), 0xcb);
        EXPECT(gbc.readMem(0xb686), 0x1b);
        // CB 1B 00F9
        gbc.setState(0xbe4c, 0x47d8, 0xe080, 0x9ceb, 0x7caa, 0x5bf0, 0x1, 0x1);
        gbc.writeMem(0xbe4c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x47d8);
        EXPECT(gbc.pc(), 0xbe4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4c), 0xcb);
        EXPECT(gbc.readMem(0xbe4d), 0x1b);
        // CB 1B 00FA
        gbc.setState(0x8cc3, 0xa797, 0x2ad0, 0xa2f6, 0xca3, 0x4563, 0x1, 0x0);
        gbc.writeMem(0x8cc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xa797);
        EXPECT(gbc.pc(), 0x8cc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cc3), 0xcb);
        EXPECT(gbc.readMem(0x8cc4), 0x1b);
        // CB 1B 00FB
        gbc.setState(0xb068, 0xdd17, 0x6ea0, 0x65e9, 0x84df, 0xb67c, 0x0, 0x1);
        gbc.writeMem(0xb068, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xdd17);
        EXPECT(gbc.pc(), 0xb06a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb068), 0xcb);
        EXPECT(gbc.readMem(0xb069), 0x1b);
        // CB 1B 00FC
        gbc.setState(0xaf66, 0xaed6, 0xc160, 0xe4d1, 0x48a5, 0x60ba, 0x1, 0x1);
        gbc.writeMem(0xaf66, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xaed6);
        EXPECT(gbc.pc(), 0xaf68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf66), 0xcb);
        EXPECT(gbc.readMem(0xaf67), 0x1b);
        // CB 1B 00FD
        gbc.setState(0x253c, 0xb763, 0x78a0, 0xc790, 0xfd2a, 0x1385, 0x1, 0x0);
        gbc.writeMem(0x253c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb763);
        EXPECT(gbc.pc(), 0x253e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00FE
        gbc.setState(0x34a8, 0x45e2, 0x6c80, 0xb256, 0xfd8c, 0x4256, 0x1, 0x1);
        gbc.writeMem(0x34a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x45e2);
        EXPECT(gbc.pc(), 0x34aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 00FF
        gbc.setState(0xebd9, 0x1e31, 0xf4c0, 0x6f33, 0xf886, 0xa594, 0x0, 0x1);
        gbc.writeMem(0xebd9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1e31);
        EXPECT(gbc.pc(), 0xebdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebd9), 0xcb);
        EXPECT(gbc.readMem(0xebda), 0x1b);
        // CB 1B 0100
        gbc.setState(0x84de, 0xa61d, 0xdc40, 0xa687, 0x6f34, 0x64a9, 0x0, 0x0);
        gbc.writeMem(0x84de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa61d);
        EXPECT(gbc.pc(), 0x84e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84de), 0xcb);
        EXPECT(gbc.readMem(0x84df), 0x1b);
        // CB 1B 0101
        gbc.setState(0xb123, 0x73af, 0xd50, 0xc278, 0x3793, 0x2fd3, 0x0, 0x1);
        gbc.writeMem(0xb123, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x73af);
        EXPECT(gbc.pc(), 0xb125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb123), 0xcb);
        EXPECT(gbc.readMem(0xb124), 0x1b);
        // CB 1B 0102
        gbc.setState(0x6fd, 0xb7ef, 0x1e0, 0xab5, 0x7959, 0x2a9, 0x1, 0x0);
        gbc.writeMem(0x6fd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb7ef);
        EXPECT(gbc.pc(), 0x6ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0103
        gbc.setState(0x9640, 0x5e8e, 0x1950, 0x8e19, 0xe815, 0xf2f1, 0x1, 0x0);
        gbc.writeMem(0x9640, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5e8e);
        EXPECT(gbc.pc(), 0x9642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9640), 0xcb);
        EXPECT(gbc.readMem(0x9641), 0x1b);
        // CB 1B 0104
        gbc.setState(0x29a4, 0xec6b, 0x3fc0, 0x48f4, 0xbaa3, 0x4a1, 0x1, 0x0);
        gbc.writeMem(0x29a4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xec6b);
        EXPECT(gbc.pc(), 0x29a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0105
        gbc.setState(0x2499, 0x28b1, 0xcc60, 0x5281, 0xc73c, 0xafbe, 0x1, 0x0);
        gbc.writeMem(0x2499, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x28b1);
        EXPECT(gbc.pc(), 0x249b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0106
        gbc.setState(0xc59e, 0x9de7, 0x2650, 0x1146, 0xcdae, 0xf601, 0x0, 0x0);
        gbc.writeMem(0xc59e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9de7);
        EXPECT(gbc.pc(), 0xc5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59e), 0xcb);
        EXPECT(gbc.readMem(0xc59f), 0x1b);
        // CB 1B 0107
        gbc.setState(0x31fc, 0x64c8, 0x4da0, 0x7976, 0xec17, 0x210b, 0x0, 0x1);
        gbc.writeMem(0x31fc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x64c8);
        EXPECT(gbc.pc(), 0x31fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0108
        gbc.setState(0x75cb, 0x6f0a, 0xf270, 0xf05c, 0xc438, 0x8e0e, 0x1, 0x1);
        gbc.writeMem(0x75cb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6f0a);
        EXPECT(gbc.pc(), 0x75cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0109
        gbc.setState(0xd169, 0x68f, 0xe4f0, 0x4f3a, 0xa21f, 0xd59d, 0x0, 0x0);
        gbc.writeMem(0xd169, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x68f);
        EXPECT(gbc.pc(), 0xd16b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd169), 0xcb);
        EXPECT(gbc.readMem(0xd16a), 0x1b);
        // CB 1B 010A
        gbc.setState(0x242e, 0x14c9, 0x92b0, 0x241a, 0x4e7, 0x8def, 0x0, 0x0);
        gbc.writeMem(0x242e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x14c9);
        EXPECT(gbc.pc(), 0x2430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 010B
        gbc.setState(0xbe60, 0x440c, 0x17b0, 0x8ada, 0xc564, 0x73ed, 0x1, 0x1);
        gbc.writeMem(0xbe60, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x440c);
        EXPECT(gbc.pc(), 0xbe62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe60), 0xcb);
        EXPECT(gbc.readMem(0xbe61), 0x1b);
        // CB 1B 010C
        gbc.setState(0x20bb, 0x68ba, 0x26f0, 0xe0c0, 0x59c5, 0x83dc, 0x1, 0x0);
        gbc.writeMem(0x20bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x68ba);
        EXPECT(gbc.pc(), 0x20bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 010D
        gbc.setState(0x5c31, 0xb27e, 0x81a0, 0x4b69, 0x17a4, 0xc2f6, 0x1, 0x1);
        gbc.writeMem(0x5c31, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb27e);
        EXPECT(gbc.pc(), 0x5c33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 010E
        gbc.setState(0x46b0, 0x2ea4, 0xa540, 0x1757, 0xc0bb, 0x49bc, 0x0, 0x1);
        gbc.writeMem(0x46b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2ea4);
        EXPECT(gbc.pc(), 0x46b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 010F
        gbc.setState(0x813d, 0xc362, 0xadd0, 0xe6d6, 0xbe81, 0x7cce, 0x1, 0x1);
        gbc.writeMem(0x813d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc362);
        EXPECT(gbc.pc(), 0x813f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x813d), 0xcb);
        EXPECT(gbc.readMem(0x813e), 0x1b);
        // CB 1B 0110
        gbc.setState(0x67a3, 0xa43d, 0xb360, 0xb585, 0xf8fb, 0x3736, 0x1, 0x0);
        gbc.writeMem(0x67a3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa43d);
        EXPECT(gbc.pc(), 0x67a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0111
        gbc.setState(0x6773, 0xce80, 0xb260, 0x6187, 0x60a1, 0x36e8, 0x1, 0x1);
        gbc.writeMem(0x6773, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xce80);
        EXPECT(gbc.pc(), 0x6775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0112
        gbc.setState(0xfb4, 0xebb4, 0x8e80, 0x342d, 0x4587, 0x454f, 0x1, 0x1);
        gbc.writeMem(0xfb4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xebb4);
        EXPECT(gbc.pc(), 0xfb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0113
        gbc.setState(0xcb49, 0xa547, 0x6e50, 0x3a9e, 0xce88, 0x2a66, 0x1, 0x1);
        gbc.writeMem(0xcb49, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa547);
        EXPECT(gbc.pc(), 0xcb4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb49), 0xcb);
        EXPECT(gbc.readMem(0xcb4a), 0x1b);
        // CB 1B 0115
        gbc.setState(0x8679, 0xea61, 0x1290, 0x2d, 0xdada, 0x95dd, 0x1, 0x0);
        gbc.writeMem(0x8679, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xea61);
        EXPECT(gbc.pc(), 0x867b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8679), 0xcb);
        EXPECT(gbc.readMem(0x867a), 0x1b);
        // CB 1B 0116
        gbc.setState(0x156d, 0x2033, 0x210, 0xe882, 0xfc99, 0x7015, 0x0, 0x0);
        gbc.writeMem(0x156d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2033);
        EXPECT(gbc.pc(), 0x156f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0117
        gbc.setState(0xba60, 0xd7c9, 0xda70, 0x720f, 0x47b1, 0xae66, 0x0, 0x1);
        gbc.writeMem(0xba60, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd7c9);
        EXPECT(gbc.pc(), 0xba62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba60), 0xcb);
        EXPECT(gbc.readMem(0xba61), 0x1b);
        // CB 1B 0118
        gbc.setState(0x5dcb, 0x33c8, 0xe1f0, 0x715a, 0xa103, 0xd284, 0x0, 0x0);
        gbc.writeMem(0x5dcb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x33c8);
        EXPECT(gbc.pc(), 0x5dcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0119
        gbc.setState(0xa95a, 0xbec6, 0x8510, 0x77da, 0xdf91, 0xa47c, 0x0, 0x0);
        gbc.writeMem(0xa95a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbec6);
        EXPECT(gbc.pc(), 0xa95c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa95a), 0xcb);
        EXPECT(gbc.readMem(0xa95b), 0x1b);
        // CB 1B 011A
        gbc.setState(0x92bb, 0xb3b9, 0x7300, 0x34a4, 0xa597, 0x357, 0x0, 0x0);
        gbc.writeMem(0x92bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb3b9);
        EXPECT(gbc.pc(), 0x92bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92bb), 0xcb);
        EXPECT(gbc.readMem(0x92bc), 0x1b);
        // CB 1B 011B
        gbc.setState(0x23e0, 0xb981, 0x4440, 0x9b78, 0xe6e0, 0xef9b, 0x0, 0x0);
        gbc.writeMem(0x23e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb981);
        EXPECT(gbc.pc(), 0x23e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 011C
        gbc.setState(0x89e5, 0x2322, 0x9b40, 0xc3f0, 0x4259, 0x6daf, 0x0, 0x1);
        gbc.writeMem(0x89e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2322);
        EXPECT(gbc.pc(), 0x89e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e5), 0xcb);
        EXPECT(gbc.readMem(0x89e6), 0x1b);
        // CB 1B 011D
        gbc.setState(0xb0f5, 0x5661, 0x4bd0, 0x83c6, 0xf9b3, 0xf8f0, 0x0, 0x1);
        gbc.writeMem(0xb0f5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5661);
        EXPECT(gbc.pc(), 0xb0f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f5), 0xcb);
        EXPECT(gbc.readMem(0xb0f6), 0x1b);
        // CB 1B 011E
        gbc.setState(0xd1f3, 0x7ec5, 0xecd0, 0xe843, 0xd9cc, 0xa05d, 0x1, 0x0);
        gbc.writeMem(0xd1f3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7ec5);
        EXPECT(gbc.pc(), 0xd1f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f3), 0xcb);
        EXPECT(gbc.readMem(0xd1f4), 0x1b);
        // CB 1B 011F
        gbc.setState(0xbe5b, 0x8cca, 0x4800, 0x20, 0xcf97, 0x45f1, 0x1, 0x0);
        gbc.writeMem(0xbe5b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8cca);
        EXPECT(gbc.pc(), 0xbe5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe5b), 0xcb);
        EXPECT(gbc.readMem(0xbe5c), 0x1b);
        // CB 1B 0120
        gbc.setState(0x2d2e, 0x1434, 0x52c0, 0xe68, 0x6c25, 0xf26b, 0x0, 0x1);
        gbc.writeMem(0x2d2e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1434);
        EXPECT(gbc.pc(), 0x2d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0121
        gbc.setState(0x1b43, 0xa623, 0xd2a0, 0xb130, 0x84fc, 0xfeae, 0x0, 0x0);
        gbc.writeMem(0x1b43, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa623);
        EXPECT(gbc.pc(), 0x1b45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0122
        gbc.setState(0x2db1, 0x139, 0xb500, 0xa1f8, 0xebd9, 0x5703, 0x1, 0x1);
        gbc.writeMem(0x2db1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x139);
        EXPECT(gbc.pc(), 0x2db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0123
        gbc.setState(0x7152, 0x9238, 0x29b0, 0xac21, 0x3035, 0xb043, 0x1, 0x1);
        gbc.writeMem(0x7152, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9238);
        EXPECT(gbc.pc(), 0x7154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0124
        gbc.setState(0xbb2, 0x1b9f, 0x41e0, 0x22d0, 0xfd6c, 0x34c8, 0x1, 0x1);
        gbc.writeMem(0xbb2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1b9f);
        EXPECT(gbc.pc(), 0xbb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0125
        gbc.setState(0xd77f, 0xd86f, 0xcde0, 0xbfd9, 0x9aef, 0x8e91, 0x1, 0x1);
        gbc.writeMem(0xd77f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd86f);
        EXPECT(gbc.pc(), 0xd781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd77f), 0xcb);
        EXPECT(gbc.readMem(0xd780), 0x1b);
        // CB 1B 0126
        gbc.setState(0x96f5, 0xa8ba, 0x9520, 0x4e82, 0xb9d3, 0x2dce, 0x0, 0x0);
        gbc.writeMem(0x96f5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa8ba);
        EXPECT(gbc.pc(), 0x96f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96f5), 0xcb);
        EXPECT(gbc.readMem(0x96f6), 0x1b);
        // CB 1B 0127
        gbc.setState(0x82ab, 0x2b1b, 0xb3d0, 0x5879, 0x812f, 0xa8a0, 0x0, 0x0);
        gbc.writeMem(0x82ab, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2b1b);
        EXPECT(gbc.pc(), 0x82ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ab), 0xcb);
        EXPECT(gbc.readMem(0x82ac), 0x1b);
        // CB 1B 0128
        gbc.setState(0x7d8d, 0xae48, 0xb6b0, 0x565a, 0xf6a5, 0x4274, 0x1, 0x1);
        gbc.writeMem(0x7d8d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xae48);
        EXPECT(gbc.pc(), 0x7d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0129
        gbc.setState(0xd252, 0x3f80, 0xb460, 0xc1d7, 0xf2a5, 0x95ca, 0x1, 0x1);
        gbc.writeMem(0xd252, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3f80);
        EXPECT(gbc.pc(), 0xd254);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd252), 0xcb);
        EXPECT(gbc.readMem(0xd253), 0x1b);
        // CB 1B 012A
        gbc.setState(0x8716, 0x9565, 0x6af0, 0xc8d2, 0xc3f2, 0x208b, 0x1, 0x0);
        gbc.writeMem(0x8716, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9565);
        EXPECT(gbc.pc(), 0x8718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8716), 0xcb);
        EXPECT(gbc.readMem(0x8717), 0x1b);
        // CB 1B 012B
        gbc.setState(0x26a9, 0x4443, 0xbc30, 0xe4be, 0x3a87, 0xcfbc, 0x0, 0x0);
        gbc.writeMem(0x26a9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4443);
        EXPECT(gbc.pc(), 0x26ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 012C
        gbc.setState(0x5c89, 0xc571, 0x5ca0, 0x39ec, 0x49b6, 0x8756, 0x1, 0x0);
        gbc.writeMem(0x5c89, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc571);
        EXPECT(gbc.pc(), 0x5c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 012D
        gbc.setState(0x1a50, 0x5e72, 0xf830, 0x1a7b, 0x52d4, 0x1090, 0x0, 0x1);
        gbc.writeMem(0x1a50, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5e72);
        EXPECT(gbc.pc(), 0x1a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 012E
        gbc.setState(0x4d5b, 0xcc69, 0xb600, 0x1004, 0xfd2, 0x441b, 0x1, 0x1);
        gbc.writeMem(0x4d5b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xcc69);
        EXPECT(gbc.pc(), 0x4d5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 012F
        gbc.setState(0x96a7, 0xb3fd, 0x2510, 0x2136, 0xef76, 0xe8ec, 0x0, 0x0);
        gbc.writeMem(0x96a7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb3fd);
        EXPECT(gbc.pc(), 0x96a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a7), 0xcb);
        EXPECT(gbc.readMem(0x96a8), 0x1b);
        // CB 1B 0130
        gbc.setState(0x9b9b, 0x4a4, 0xe800, 0x9f84, 0xda67, 0x7bef, 0x1, 0x1);
        gbc.writeMem(0x9b9b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4a4);
        EXPECT(gbc.pc(), 0x9b9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b9b), 0xcb);
        EXPECT(gbc.readMem(0x9b9c), 0x1b);
        // CB 1B 0131
        gbc.setState(0xecd3, 0x8b9a, 0x61c0, 0x99ea, 0x2e9f, 0x2a20, 0x1, 0x0);
        gbc.writeMem(0xecd3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8b9a);
        EXPECT(gbc.pc(), 0xecd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecd3), 0xcb);
        EXPECT(gbc.readMem(0xecd4), 0x1b);
        // CB 1B 0132
        gbc.setState(0x9350, 0xbf07, 0x1b00, 0xfcfc, 0xcbfb, 0x4a4d, 0x0, 0x1);
        gbc.writeMem(0x9350, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xbf07);
        EXPECT(gbc.pc(), 0x9352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9350), 0xcb);
        EXPECT(gbc.readMem(0x9351), 0x1b);
        // CB 1B 0133
        gbc.setState(0xcc1e, 0x2d4d, 0xcee0, 0xcce0, 0xf527, 0x8efd, 0x1, 0x1);
        gbc.writeMem(0xcc1e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2d4d);
        EXPECT(gbc.pc(), 0xcc20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc1e), 0xcb);
        EXPECT(gbc.readMem(0xcc1f), 0x1b);
        // CB 1B 0134
        gbc.setState(0x4f20, 0x24f2, 0xeca0, 0xd744, 0x241b, 0x5929, 0x0, 0x1);
        gbc.writeMem(0x4f20, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x24f2);
        EXPECT(gbc.pc(), 0x4f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0135
        gbc.setState(0xb3b7, 0x810e, 0xce30, 0x7c84, 0x8ee6, 0xbc29, 0x0, 0x1);
        gbc.writeMem(0xb3b7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x810e);
        EXPECT(gbc.pc(), 0xb3b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b7), 0xcb);
        EXPECT(gbc.readMem(0xb3b8), 0x1b);
        // CB 1B 0136
        gbc.setState(0x9fc, 0x4d3e, 0x4970, 0xc962, 0xc9e9, 0x3f9b, 0x0, 0x1);
        gbc.writeMem(0x9fc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4d3e);
        EXPECT(gbc.pc(), 0x9fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0137
        gbc.setState(0x29b7, 0xa8c1, 0xc1a0, 0x51f8, 0x50c5, 0xd664, 0x1, 0x1);
        gbc.writeMem(0x29b7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa8c1);
        EXPECT(gbc.pc(), 0x29b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0138
        gbc.setState(0xe777, 0x77d, 0xa480, 0xa0a, 0xc847, 0x1763, 0x1, 0x1);
        gbc.writeMem(0xe777, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x77d);
        EXPECT(gbc.pc(), 0xe779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe777), 0xcb);
        EXPECT(gbc.readMem(0xe778), 0x1b);
        // CB 1B 0139
        gbc.setState(0x7f68, 0xb679, 0x78b0, 0x53f5, 0xb52d, 0x8a2d, 0x0, 0x0);
        gbc.writeMem(0x7f68, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb679);
        EXPECT(gbc.pc(), 0x7f6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 013A
        gbc.setState(0xd6c8, 0xbae7, 0x4380, 0xf4ca, 0xfa3b, 0x6dcb, 0x0, 0x1);
        gbc.writeMem(0xd6c8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xbae7);
        EXPECT(gbc.pc(), 0xd6ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6c8), 0xcb);
        EXPECT(gbc.readMem(0xd6c9), 0x1b);
        // CB 1B 013B
        gbc.setState(0x9cad, 0xfd8b, 0xe4b0, 0xd32d, 0x3f50, 0xd412, 0x1, 0x1);
        gbc.writeMem(0x9cad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xfd8b);
        EXPECT(gbc.pc(), 0x9caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cad), 0xcb);
        EXPECT(gbc.readMem(0x9cae), 0x1b);
        // CB 1B 013C
        gbc.setState(0x2b8a, 0xd38a, 0xdf0, 0xe3b9, 0x56a9, 0xac89, 0x0, 0x1);
        gbc.writeMem(0x2b8a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd38a);
        EXPECT(gbc.pc(), 0x2b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 013E
        gbc.setState(0xa7b0, 0xf3cd, 0xecf0, 0x4a70, 0x296a, 0xbfc8, 0x1, 0x1);
        gbc.writeMem(0xa7b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf3cd);
        EXPECT(gbc.pc(), 0xa7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b0), 0xcb);
        EXPECT(gbc.readMem(0xa7b1), 0x1b);
        // CB 1B 013F
        gbc.setState(0x4f8b, 0x4c7b, 0xe0c0, 0x2c2c, 0x4e0e, 0xe443, 0x0, 0x0);
        gbc.writeMem(0x4f8b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4c7b);
        EXPECT(gbc.pc(), 0x4f8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0140
        gbc.setState(0xb51e, 0xe2f1, 0x3e20, 0x59f8, 0x5f66, 0x2202, 0x0, 0x1);
        gbc.writeMem(0xb51e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe2f1);
        EXPECT(gbc.pc(), 0xb520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb51e), 0xcb);
        EXPECT(gbc.readMem(0xb51f), 0x1b);
        // CB 1B 0141
        gbc.setState(0x2a86, 0x6022, 0xe540, 0xf532, 0xb050, 0x78d2, 0x0, 0x0);
        gbc.writeMem(0x2a86, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6022);
        EXPECT(gbc.pc(), 0x2a88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0142
        gbc.setState(0x906a, 0xd5d6, 0x3e40, 0xb039, 0x9a54, 0x6414, 0x0, 0x1);
        gbc.writeMem(0x906a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd5d6);
        EXPECT(gbc.pc(), 0x906c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906a), 0xcb);
        EXPECT(gbc.readMem(0x906b), 0x1b);
        // CB 1B 0143
        gbc.setState(0xb245, 0xa499, 0x21c0, 0x794e, 0xe01c, 0xee08, 0x0, 0x1);
        gbc.writeMem(0xb245, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa499);
        EXPECT(gbc.pc(), 0xb247);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb245), 0xcb);
        EXPECT(gbc.readMem(0xb246), 0x1b);
        // CB 1B 0144
        gbc.setState(0x7bc7, 0x61e1, 0x2720, 0xd140, 0xd643, 0x82d6, 0x0, 0x0);
        gbc.writeMem(0x7bc7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x61e1);
        EXPECT(gbc.pc(), 0x7bc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0145
        gbc.setState(0xc940, 0x5b8d, 0xcf30, 0xdf1e, 0x9e3, 0x6c37, 0x1, 0x0);
        gbc.writeMem(0xc940, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5b8d);
        EXPECT(gbc.pc(), 0xc942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc940), 0xcb);
        EXPECT(gbc.readMem(0xc941), 0x1b);
        // CB 1B 0146
        gbc.setState(0xd853, 0xff8, 0xa740, 0x75b4, 0x8, 0xe9b5, 0x1, 0x0);
        gbc.writeMem(0xd853, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xff8);
        EXPECT(gbc.pc(), 0xd855);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd853), 0xcb);
        EXPECT(gbc.readMem(0xd854), 0x1b);
        // CB 1B 0147
        gbc.setState(0x2658, 0xdfa7, 0x4450, 0x52ce, 0xa060, 0xc4e0, 0x0, 0x0);
        gbc.writeMem(0x2658, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xdfa7);
        EXPECT(gbc.pc(), 0x265a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0148
        gbc.setState(0x8c81, 0xac69, 0xa490, 0x18da, 0x6ea1, 0x582c, 0x1, 0x1);
        gbc.writeMem(0x8c81, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xac69);
        EXPECT(gbc.pc(), 0x8c83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c81), 0xcb);
        EXPECT(gbc.readMem(0x8c82), 0x1b);
        // CB 1B 0149
        gbc.setState(0xcf4c, 0x7cc8, 0x3410, 0x8b64, 0x571c, 0xbb13, 0x1, 0x1);
        gbc.writeMem(0xcf4c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7cc8);
        EXPECT(gbc.pc(), 0xcf4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf4c), 0xcb);
        EXPECT(gbc.readMem(0xcf4d), 0x1b);
        // CB 1B 014A
        gbc.setState(0x6220, 0x3dd0, 0x2700, 0x828c, 0xdeb4, 0xdd55, 0x1, 0x1);
        gbc.writeMem(0x6220, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3dd0);
        EXPECT(gbc.pc(), 0x6222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 014B
        gbc.setState(0x2e17, 0x8b1, 0x98b0, 0xeaec, 0x33a2, 0x6a6b, 0x1, 0x0);
        gbc.writeMem(0x2e17, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8b1);
        EXPECT(gbc.pc(), 0x2e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 014C
        gbc.setState(0x5b97, 0x840c, 0xda60, 0x1194, 0x97e9, 0x45e6, 0x0, 0x1);
        gbc.writeMem(0x5b97, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x840c);
        EXPECT(gbc.pc(), 0x5b99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 014D
        gbc.setState(0x77b0, 0xee52, 0x1990, 0x5664, 0x4344, 0x5640, 0x0, 0x0);
        gbc.writeMem(0x77b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xee52);
        EXPECT(gbc.pc(), 0x77b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 014E
        gbc.setState(0x4a64, 0x60a9, 0x9480, 0xbb64, 0xd295, 0x4aee, 0x0, 0x1);
        gbc.writeMem(0x4a64, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x60a9);
        EXPECT(gbc.pc(), 0x4a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0150
        gbc.setState(0x5d79, 0xb026, 0x8900, 0x281e, 0xf43c, 0xa300, 0x0, 0x1);
        gbc.writeMem(0x5d79, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb026);
        EXPECT(gbc.pc(), 0x5d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0151
        gbc.setState(0xdeb5, 0x321b, 0x9980, 0x563b, 0x8380, 0xfe8a, 0x0, 0x1);
        gbc.writeMem(0xdeb5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x321b);
        EXPECT(gbc.pc(), 0xdeb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb5), 0xcb);
        EXPECT(gbc.readMem(0xdeb6), 0x1b);
        // CB 1B 0152
        gbc.setState(0x6dac, 0x7579, 0xac00, 0x7ce, 0x6ae9, 0x5077, 0x1, 0x0);
        gbc.writeMem(0x6dac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7579);
        EXPECT(gbc.pc(), 0x6dae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0153
        gbc.setState(0x24eb, 0x80cb, 0x31d0, 0x5d24, 0xcac8, 0x4925, 0x0, 0x0);
        gbc.writeMem(0x24eb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x80cb);
        EXPECT(gbc.pc(), 0x24ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0154
        gbc.setState(0xafe2, 0x5be0, 0xe7d0, 0xbd7e, 0x3328, 0x4f2c, 0x0, 0x0);
        gbc.writeMem(0xafe2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5be0);
        EXPECT(gbc.pc(), 0xafe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe2), 0xcb);
        EXPECT(gbc.readMem(0xafe3), 0x1b);
        // CB 1B 0155
        gbc.setState(0xdd05, 0xb355, 0xf510, 0x1baf, 0xc1ff, 0x3b8d, 0x0, 0x0);
        gbc.writeMem(0xdd05, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb355);
        EXPECT(gbc.pc(), 0xdd07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd05), 0xcb);
        EXPECT(gbc.readMem(0xdd06), 0x1b);
        // CB 1B 0157
        gbc.setState(0x682d, 0xabf9, 0x53b0, 0x331f, 0xb866, 0xcd92, 0x0, 0x1);
        gbc.writeMem(0x682d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xabf9);
        EXPECT(gbc.pc(), 0x682f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0158
        gbc.setState(0xf02, 0xd218, 0xb8e0, 0x6e30, 0xd356, 0x9f69, 0x1, 0x1);
        gbc.writeMem(0xf02, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd218);
        EXPECT(gbc.pc(), 0xf04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0159
        gbc.setState(0xe246, 0xf61b, 0x2560, 0x5685, 0xa760, 0x15aa, 0x1, 0x1);
        gbc.writeMem(0xe246, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf61b);
        EXPECT(gbc.pc(), 0xe248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe246), 0xcb);
        EXPECT(gbc.readMem(0xe247), 0x1b);
        // CB 1B 015A
        gbc.setState(0x2f61, 0xaa67, 0xc380, 0xcee3, 0xdf13, 0x71db, 0x1, 0x0);
        gbc.writeMem(0x2f61, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xaa67);
        EXPECT(gbc.pc(), 0x2f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 015B
        gbc.setState(0xb6e7, 0x7d96, 0xe310, 0x77b3, 0x542e, 0x4d4a, 0x0, 0x0);
        gbc.writeMem(0xb6e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7d96);
        EXPECT(gbc.pc(), 0xb6e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e7), 0xcb);
        EXPECT(gbc.readMem(0xb6e8), 0x1b);
        // CB 1B 015C
        gbc.setState(0x6fd3, 0x46e9, 0xfc80, 0xa1bb, 0x3d3d, 0x67d9, 0x1, 0x0);
        gbc.writeMem(0x6fd3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x46e9);
        EXPECT(gbc.pc(), 0x6fd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 015E
        gbc.setState(0x72d8, 0xd3e5, 0x2280, 0xfbd1, 0xf3fb, 0x775e, 0x1, 0x0);
        gbc.writeMem(0x72d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd3e5);
        EXPECT(gbc.pc(), 0x72da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 015F
        gbc.setState(0x78da, 0xfbd8, 0xff90, 0x322a, 0x8e84, 0xc199, 0x1, 0x0);
        gbc.writeMem(0x78da, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xfbd8);
        EXPECT(gbc.pc(), 0x78dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0160
        gbc.setState(0x49b7, 0x78c3, 0x8a00, 0xcc13, 0xdf73, 0x2cec, 0x0, 0x0);
        gbc.writeMem(0x49b7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x78c3);
        EXPECT(gbc.pc(), 0x49b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0161
        gbc.setState(0x572b, 0x6882, 0x5e30, 0x8f2, 0xc14b, 0x9fd6, 0x1, 0x1);
        gbc.writeMem(0x572b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6882);
        EXPECT(gbc.pc(), 0x572d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0162
        gbc.setState(0x931e, 0xfc38, 0x85f0, 0x15f9, 0xdc4, 0x909f, 0x1, 0x1);
        gbc.writeMem(0x931e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfc38);
        EXPECT(gbc.pc(), 0x9320);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x931e), 0xcb);
        EXPECT(gbc.readMem(0x931f), 0x1b);
        // CB 1B 0163
        gbc.setState(0xc290, 0xf2fa, 0x5800, 0x101b, 0x4da, 0x73ab, 0x0, 0x0);
        gbc.writeMem(0xc290, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf2fa);
        EXPECT(gbc.pc(), 0xc292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc290), 0xcb);
        EXPECT(gbc.readMem(0xc291), 0x1b);
        // CB 1B 0164
        gbc.setState(0x9a9c, 0xdf62, 0xc2b0, 0xe240, 0xc95b, 0x630a, 0x1, 0x1);
        gbc.writeMem(0x9a9c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xdf62);
        EXPECT(gbc.pc(), 0x9a9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a9c), 0xcb);
        EXPECT(gbc.readMem(0x9a9d), 0x1b);
        // CB 1B 0165
        gbc.setState(0x431e, 0xf8a1, 0x3d50, 0x8adc, 0x6487, 0x8da6, 0x0, 0x0);
        gbc.writeMem(0x431e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf8a1);
        EXPECT(gbc.pc(), 0x4320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0166
        gbc.setState(0x26b, 0x1322, 0x8420, 0x1071, 0x211b, 0xf65f, 0x0, 0x0);
        gbc.writeMem(0x26b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1322);
        EXPECT(gbc.pc(), 0x26d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0167
        gbc.setState(0xecda, 0x40cf, 0x930, 0x2f6, 0x4d56, 0x1ceb, 0x0, 0x1);
        gbc.writeMem(0xecda, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x40cf);
        EXPECT(gbc.pc(), 0xecdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecda), 0xcb);
        EXPECT(gbc.readMem(0xecdb), 0x1b);
        // CB 1B 0168
        gbc.setState(0xd125, 0xe4aa, 0x62b0, 0x54ef, 0x9834, 0x9b25, 0x0, 0x1);
        gbc.writeMem(0xd125, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe4aa);
        EXPECT(gbc.pc(), 0xd127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd125), 0xcb);
        EXPECT(gbc.readMem(0xd126), 0x1b);
        // CB 1B 0169
        gbc.setState(0x490a, 0x6671, 0x6f40, 0xcb6, 0xe3b2, 0x1875, 0x1, 0x1);
        gbc.writeMem(0x490a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6671);
        EXPECT(gbc.pc(), 0x490c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 016A
        gbc.setState(0x87e7, 0x6c28, 0x7180, 0x6e73, 0x6dcf, 0x6c63, 0x0, 0x0);
        gbc.writeMem(0x87e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6c28);
        EXPECT(gbc.pc(), 0x87e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e7), 0xcb);
        EXPECT(gbc.readMem(0x87e8), 0x1b);
        // CB 1B 016B
        gbc.setState(0x397d, 0xaa31, 0x4d40, 0x9dd6, 0x9bd, 0x3d05, 0x1, 0x1);
        gbc.writeMem(0x397d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xaa31);
        EXPECT(gbc.pc(), 0x397f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 016D
        gbc.setState(0xb643, 0xea30, 0x9f60, 0xe739, 0x3521, 0xe0e0, 0x1, 0x1);
        gbc.writeMem(0xb643, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xea30);
        EXPECT(gbc.pc(), 0xb645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb643), 0xcb);
        EXPECT(gbc.readMem(0xb644), 0x1b);
        // CB 1B 016E
        gbc.setState(0x6865, 0x87f1, 0x4c0, 0x6ce2, 0xf14, 0x3bec, 0x1, 0x1);
        gbc.writeMem(0x6865, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x87f1);
        EXPECT(gbc.pc(), 0x6867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 016F
        gbc.setState(0x9994, 0xaa7a, 0x90d0, 0xb9de, 0x9f8b, 0xf98, 0x1, 0x1);
        gbc.writeMem(0x9994, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xaa7a);
        EXPECT(gbc.pc(), 0x9996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9994), 0xcb);
        EXPECT(gbc.readMem(0x9995), 0x1b);
        // CB 1B 0170
        gbc.setState(0x1a48, 0xdccc, 0x9940, 0xc66f, 0x2a51, 0x680c, 0x1, 0x1);
        gbc.writeMem(0x1a48, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xdccc);
        EXPECT(gbc.pc(), 0x1a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0171
        gbc.setState(0x931e, 0x94bb, 0x6720, 0x8798, 0x4e14, 0xb7bb, 0x1, 0x0);
        gbc.writeMem(0x931e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x94bb);
        EXPECT(gbc.pc(), 0x9320);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x931e), 0xcb);
        EXPECT(gbc.readMem(0x931f), 0x1b);
        // CB 1B 0172
        gbc.setState(0x18fb, 0x3286, 0xe6f0, 0x50c9, 0x861, 0x33c4, 0x1, 0x1);
        gbc.writeMem(0x18fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3286);
        EXPECT(gbc.pc(), 0x18fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0173
        gbc.setState(0x9271, 0x3b23, 0x9530, 0xc954, 0x5a39, 0xe0cb, 0x0, 0x0);
        gbc.writeMem(0x9271, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x3b23);
        EXPECT(gbc.pc(), 0x9273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9271), 0xcb);
        EXPECT(gbc.readMem(0x9272), 0x1b);
        // CB 1B 0175
        gbc.setState(0x92c3, 0x63a0, 0xcf0, 0xd394, 0xf584, 0x7cb5, 0x1, 0x0);
        gbc.writeMem(0x92c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x63a0);
        EXPECT(gbc.pc(), 0x92c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c3), 0xcb);
        EXPECT(gbc.readMem(0x92c4), 0x1b);
        // CB 1B 0176
        gbc.setState(0x33b2, 0x677a, 0x15a0, 0xffe7, 0x2941, 0xd1ae, 0x1, 0x1);
        gbc.writeMem(0x33b2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x677a);
        EXPECT(gbc.pc(), 0x33b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0177
        gbc.setState(0xcd62, 0xc12b, 0x27e0, 0xf3a3, 0x1a73, 0x3d89, 0x1, 0x0);
        gbc.writeMem(0xcd62, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc12b);
        EXPECT(gbc.pc(), 0xcd64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd62), 0xcb);
        EXPECT(gbc.readMem(0xcd63), 0x1b);
        // CB 1B 0178
        gbc.setState(0x1511, 0xcc2a, 0x1b50, 0xc40b, 0xf095, 0x6cf9, 0x1, 0x1);
        gbc.writeMem(0x1511, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xcc2a);
        EXPECT(gbc.pc(), 0x1513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0179
        gbc.setState(0xb3f8, 0x4f4d, 0x4580, 0x3774, 0xc9b3, 0xa6c6, 0x0, 0x1);
        gbc.writeMem(0xb3f8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4f4d);
        EXPECT(gbc.pc(), 0xb3fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f8), 0xcb);
        EXPECT(gbc.readMem(0xb3f9), 0x1b);
        // CB 1B 017A
        gbc.setState(0xc751, 0xa756, 0x8240, 0x9a6c, 0x50af, 0x48aa, 0x1, 0x0);
        gbc.writeMem(0xc751, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa756);
        EXPECT(gbc.pc(), 0xc753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc751), 0xcb);
        EXPECT(gbc.readMem(0xc752), 0x1b);
        // CB 1B 017B
        gbc.setState(0x19d8, 0xdc00, 0xc130, 0xf204, 0x9b4b, 0x50a, 0x0, 0x1);
        gbc.writeMem(0x19d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xdc00);
        EXPECT(gbc.pc(), 0x19da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 017C
        gbc.setState(0x5ecd, 0x9afb, 0xcf20, 0xd535, 0xb4d4, 0x1148, 0x0, 0x0);
        gbc.writeMem(0x5ecd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9afb);
        EXPECT(gbc.pc(), 0x5ecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 017D
        gbc.setState(0xa2bb, 0x7a32, 0x33f0, 0x6caa, 0x97e8, 0x4fa6, 0x1, 0x1);
        gbc.writeMem(0xa2bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7a32);
        EXPECT(gbc.pc(), 0xa2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2bb), 0xcb);
        EXPECT(gbc.readMem(0xa2bc), 0x1b);
        // CB 1B 017E
        gbc.setState(0x3c49, 0xa16a, 0x1d10, 0x96cc, 0x65df, 0xc4ae, 0x1, 0x1);
        gbc.writeMem(0x3c49, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa16a);
        EXPECT(gbc.pc(), 0x3c4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 017F
        gbc.setState(0xe2fe, 0xe356, 0x1630, 0x9576, 0x38fa, 0x562, 0x0, 0x0);
        gbc.writeMem(0xe2fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe356);
        EXPECT(gbc.pc(), 0xe300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2fe), 0xcb);
        EXPECT(gbc.readMem(0xe2ff), 0x1b);
        // CB 1B 0180
        gbc.setState(0x7618, 0x2e6e, 0xc850, 0x6ea1, 0x1aa2, 0x3161, 0x1, 0x0);
        gbc.writeMem(0x7618, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2e6e);
        EXPECT(gbc.pc(), 0x761a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0182
        gbc.setState(0xeadf, 0x8092, 0x4f60, 0x6d0c, 0x3f6f, 0xd152, 0x1, 0x1);
        gbc.writeMem(0xeadf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8092);
        EXPECT(gbc.pc(), 0xeae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeadf), 0xcb);
        EXPECT(gbc.readMem(0xeae0), 0x1b);
        // CB 1B 0183
        gbc.setState(0x73cc, 0xa50, 0x3ca0, 0x73b3, 0x8156, 0x5247, 0x1, 0x1);
        gbc.writeMem(0x73cc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa50);
        EXPECT(gbc.pc(), 0x73ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0184
        gbc.setState(0x74f2, 0xd973, 0x43d0, 0x3e3f, 0xda15, 0x7fa1, 0x0, 0x1);
        gbc.writeMem(0x74f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd973);
        EXPECT(gbc.pc(), 0x74f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0185
        gbc.setState(0x2370, 0x7dec, 0x3870, 0xa6e5, 0x7cb8, 0xbeae, 0x0, 0x0);
        gbc.writeMem(0x2370, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7dec);
        EXPECT(gbc.pc(), 0x2372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0186
        gbc.setState(0xafc9, 0x293b, 0x7e80, 0x82e5, 0x73e5, 0x7e6d, 0x0, 0x0);
        gbc.writeMem(0xafc9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x293b);
        EXPECT(gbc.pc(), 0xafcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafc9), 0xcb);
        EXPECT(gbc.readMem(0xafca), 0x1b);
        // CB 1B 0187
        gbc.setState(0x394d, 0x4c1c, 0xe010, 0x228, 0xd9ff, 0x2a0e, 0x0, 0x0);
        gbc.writeMem(0x394d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4c1c);
        EXPECT(gbc.pc(), 0x394f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0188
        gbc.setState(0xb444, 0x544f, 0x8220, 0x9ac5, 0x313c, 0x8a81, 0x0, 0x1);
        gbc.writeMem(0xb444, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x544f);
        EXPECT(gbc.pc(), 0xb446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb444), 0xcb);
        EXPECT(gbc.readMem(0xb445), 0x1b);
        // CB 1B 0189
        gbc.setState(0x3645, 0x12f8, 0x94b0, 0xbad7, 0xa2bd, 0xf77e, 0x0, 0x0);
        gbc.writeMem(0x3645, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x12f8);
        EXPECT(gbc.pc(), 0x3647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 018A
        gbc.setState(0xaa91, 0x48a8, 0x570, 0x21a2, 0xa52b, 0xf549, 0x1, 0x0);
        gbc.writeMem(0xaa91, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x48a8);
        EXPECT(gbc.pc(), 0xaa93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa91), 0xcb);
        EXPECT(gbc.readMem(0xaa92), 0x1b);
        // CB 1B 018B
        gbc.setState(0x485d, 0x61ca, 0xe6b0, 0x2f52, 0xe3b0, 0x92d1, 0x0, 0x0);
        gbc.writeMem(0x485d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x61ca);
        EXPECT(gbc.pc(), 0x485f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 018C
        gbc.setState(0x2013, 0xb5aa, 0xc680, 0x5db5, 0xffde, 0x3ae1, 0x0, 0x0);
        gbc.writeMem(0x2013, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb5aa);
        EXPECT(gbc.pc(), 0x2015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 018D
        gbc.setState(0x732, 0x4fad, 0xf140, 0x93f5, 0x3266, 0x453c, 0x1, 0x1);
        gbc.writeMem(0x732, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4fad);
        EXPECT(gbc.pc(), 0x734);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 018E
        gbc.setState(0x6d90, 0x1e04, 0x5580, 0x111e, 0x6a9d, 0xeb5a, 0x1, 0x1);
        gbc.writeMem(0x6d90, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1e04);
        EXPECT(gbc.pc(), 0x6d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 018F
        gbc.setState(0xabbd, 0x4941, 0xe130, 0x3133, 0x2620, 0x9cd0, 0x1, 0x1);
        gbc.writeMem(0xabbd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4941);
        EXPECT(gbc.pc(), 0xabbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbd), 0xcb);
        EXPECT(gbc.readMem(0xabbe), 0x1b);
        // CB 1B 0191
        gbc.setState(0xac57, 0xa129, 0xbd60, 0xe89d, 0xa80b, 0x1ccf, 0x1, 0x1);
        gbc.writeMem(0xac57, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa129);
        EXPECT(gbc.pc(), 0xac59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac57), 0xcb);
        EXPECT(gbc.readMem(0xac58), 0x1b);
        // CB 1B 0192
        gbc.setState(0x5dbc, 0x6b67, 0x77c0, 0xaad5, 0x58fc, 0x37ba, 0x1, 0x1);
        gbc.writeMem(0x5dbc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6b67);
        EXPECT(gbc.pc(), 0x5dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0193
        gbc.setState(0x1bb6, 0x1703, 0x2b10, 0x4766, 0xba24, 0xf6f8, 0x0, 0x1);
        gbc.writeMem(0x1bb6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1703);
        EXPECT(gbc.pc(), 0x1bb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0194
        gbc.setState(0x40f, 0x6750, 0xbe20, 0xb0b5, 0xb9c9, 0x5f68, 0x0, 0x1);
        gbc.writeMem(0x40f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6750);
        EXPECT(gbc.pc(), 0x411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0195
        gbc.setState(0x552d, 0x1d7c, 0xf370, 0x740b, 0x3c0c, 0x3eb1, 0x0, 0x1);
        gbc.writeMem(0x552d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1d7c);
        EXPECT(gbc.pc(), 0x552f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0196
        gbc.setState(0x560c, 0x58e9, 0x2240, 0x2aab, 0x9ff2, 0x21, 0x0, 0x0);
        gbc.writeMem(0x560c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x58e9);
        EXPECT(gbc.pc(), 0x560e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0197
        gbc.setState(0xe9ac, 0x9441, 0xe050, 0x5cef, 0x3151, 0xe853, 0x1, 0x0);
        gbc.writeMem(0xe9ac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9441);
        EXPECT(gbc.pc(), 0xe9ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9ac), 0xcb);
        EXPECT(gbc.readMem(0xe9ad), 0x1b);
        // CB 1B 0198
        gbc.setState(0x2cf5, 0x210d, 0xd390, 0x9c18, 0x9326, 0xf1f8, 0x0, 0x0);
        gbc.writeMem(0x2cf5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x210d);
        EXPECT(gbc.pc(), 0x2cf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 019C
        gbc.setState(0xd196, 0x4218, 0xdab0, 0x39e6, 0xc3e2, 0xefd2, 0x1, 0x1);
        gbc.writeMem(0xd196, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4218);
        EXPECT(gbc.pc(), 0xd198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd196), 0xcb);
        EXPECT(gbc.readMem(0xd197), 0x1b);
        // CB 1B 019D
        gbc.setState(0x944a, 0xaa85, 0x470, 0x6a19, 0xf5ff, 0x28d9, 0x1, 0x1);
        gbc.writeMem(0x944a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xaa85);
        EXPECT(gbc.pc(), 0x944c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x944a), 0xcb);
        EXPECT(gbc.readMem(0x944b), 0x1b);
        // CB 1B 019E
        gbc.setState(0xce22, 0x6c05, 0x8010, 0x5772, 0xa691, 0x7f6b, 0x1, 0x1);
        gbc.writeMem(0xce22, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6c05);
        EXPECT(gbc.pc(), 0xce24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce22), 0xcb);
        EXPECT(gbc.readMem(0xce23), 0x1b);
        // CB 1B 019F
        gbc.setState(0xe70f, 0x7c98, 0xb920, 0xb3fa, 0xaa24, 0x7497, 0x1, 0x0);
        gbc.writeMem(0xe70f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7c98);
        EXPECT(gbc.pc(), 0xe711);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70f), 0xcb);
        EXPECT(gbc.readMem(0xe710), 0x1b);
        // CB 1B 01A0
        gbc.setState(0x43ce, 0x8269, 0xd880, 0x794d, 0x5a03, 0x6272, 0x0, 0x1);
        gbc.writeMem(0x43ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8269);
        EXPECT(gbc.pc(), 0x43d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01A1
        gbc.setState(0xed2f, 0x9b10, 0xca20, 0xacaa, 0x7020, 0x908c, 0x1, 0x0);
        gbc.writeMem(0xed2f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9b10);
        EXPECT(gbc.pc(), 0xed31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed2f), 0xcb);
        EXPECT(gbc.readMem(0xed30), 0x1b);
        // CB 1B 01A2
        gbc.setState(0x5e06, 0x2895, 0xd7b0, 0xfea, 0xb4d, 0x39c6, 0x0, 0x1);
        gbc.writeMem(0x5e06, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2895);
        EXPECT(gbc.pc(), 0x5e08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01A3
        gbc.setState(0x6140, 0x32e2, 0x6d0, 0xb6fa, 0x3857, 0x12fd, 0x1, 0x0);
        gbc.writeMem(0x6140, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x32e2);
        EXPECT(gbc.pc(), 0x6142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01A4
        gbc.setState(0x15ce, 0x598b, 0x30a0, 0x8429, 0x8d2d, 0xf3b4, 0x1, 0x1);
        gbc.writeMem(0x15ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x598b);
        EXPECT(gbc.pc(), 0x15d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01A5
        gbc.setState(0x7a75, 0xc929, 0xa240, 0xe7cc, 0xa1a2, 0xec3e, 0x0, 0x0);
        gbc.writeMem(0x7a75, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc929);
        EXPECT(gbc.pc(), 0x7a77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01A6
        gbc.setState(0x18f5, 0xec4f, 0xa720, 0x599a, 0x162f, 0xdcf5, 0x0, 0x0);
        gbc.writeMem(0x18f5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xec4f);
        EXPECT(gbc.pc(), 0x18f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01A8
        gbc.setState(0x3200, 0x163e, 0xf380, 0x5bc3, 0x52fb, 0xf868, 0x1, 0x0);
        gbc.writeMem(0x3200, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x163e);
        EXPECT(gbc.pc(), 0x3202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01A9
        gbc.setState(0x11e5, 0xad54, 0xf2b0, 0xc5fc, 0x77e6, 0x5a1c, 0x1, 0x0);
        gbc.writeMem(0x11e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xad54);
        EXPECT(gbc.pc(), 0x11e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01AB
        gbc.setState(0x4dc2, 0x42be, 0xee00, 0xccfd, 0xa894, 0x308e, 0x1, 0x0);
        gbc.writeMem(0x4dc2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x42be);
        EXPECT(gbc.pc(), 0x4dc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01AC
        gbc.setState(0xa44c, 0xd109, 0x8e90, 0xeb4, 0xccb5, 0x1f2b, 0x1, 0x1);
        gbc.writeMem(0xa44c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd109);
        EXPECT(gbc.pc(), 0xa44e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa44c), 0xcb);
        EXPECT(gbc.readMem(0xa44d), 0x1b);
        // CB 1B 01AD
        gbc.setState(0xa939, 0x4800, 0xd050, 0xdf21, 0x61c4, 0xfc69, 0x1, 0x0);
        gbc.writeMem(0xa939, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4800);
        EXPECT(gbc.pc(), 0xa93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa939), 0xcb);
        EXPECT(gbc.readMem(0xa93a), 0x1b);
        // CB 1B 01AE
        gbc.setState(0xc28e, 0x2d21, 0xc740, 0x8919, 0x9da3, 0x552a, 0x1, 0x0);
        gbc.writeMem(0xc28e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2d21);
        EXPECT(gbc.pc(), 0xc290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc28e), 0xcb);
        EXPECT(gbc.readMem(0xc28f), 0x1b);
        // CB 1B 01AF
        gbc.setState(0x5883, 0x6e62, 0xd660, 0xa4be, 0x9fbd, 0x4000, 0x1, 0x0);
        gbc.writeMem(0x5883, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6e62);
        EXPECT(gbc.pc(), 0x5885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01B0
        gbc.setState(0x8bc7, 0x34db, 0x70c0, 0x117b, 0xc5a9, 0x1a24, 0x1, 0x1);
        gbc.writeMem(0x8bc7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x34db);
        EXPECT(gbc.pc(), 0x8bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bc7), 0xcb);
        EXPECT(gbc.readMem(0x8bc8), 0x1b);
        // CB 1B 01B1
        gbc.setState(0xadc1, 0x9f7b, 0xe860, 0xbe08, 0xe36e, 0x7164, 0x0, 0x0);
        gbc.writeMem(0xadc1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9f7b);
        EXPECT(gbc.pc(), 0xadc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc1), 0xcb);
        EXPECT(gbc.readMem(0xadc2), 0x1b);
        // CB 1B 01B2
        gbc.setState(0xd1dc, 0x256e, 0x7470, 0xdf82, 0xbcd, 0x6c6d, 0x0, 0x1);
        gbc.writeMem(0xd1dc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x256e);
        EXPECT(gbc.pc(), 0xd1de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1dc), 0xcb);
        EXPECT(gbc.readMem(0xd1dd), 0x1b);
        // CB 1B 01B3
        gbc.setState(0x4074, 0xd00a, 0x3c80, 0xfbc6, 0xe8ab, 0x2df4, 0x0, 0x1);
        gbc.writeMem(0x4074, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd00a);
        EXPECT(gbc.pc(), 0x4076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01B4
        gbc.setState(0x59d5, 0xec34, 0x2fc0, 0xc3f9, 0xec9c, 0xfede, 0x0, 0x1);
        gbc.writeMem(0x59d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xec34);
        EXPECT(gbc.pc(), 0x59d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01B5
        gbc.setState(0xa6e7, 0xf8ed, 0xc740, 0xba1, 0x42a4, 0x249, 0x0, 0x1);
        gbc.writeMem(0xa6e7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf8ed);
        EXPECT(gbc.pc(), 0xa6e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e7), 0xcb);
        EXPECT(gbc.readMem(0xa6e8), 0x1b);
        // CB 1B 01B6
        gbc.setState(0x5714, 0x8253, 0x9220, 0xedc4, 0x6239, 0x4ba6, 0x1, 0x0);
        gbc.writeMem(0x5714, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8253);
        EXPECT(gbc.pc(), 0x5716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01B7
        gbc.setState(0xcbde, 0x16cc, 0x6f80, 0x17d3, 0xb6c5, 0x6138, 0x1, 0x0);
        gbc.writeMem(0xcbde, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x16cc);
        EXPECT(gbc.pc(), 0xcbe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbde), 0xcb);
        EXPECT(gbc.readMem(0xcbdf), 0x1b);
        // CB 1B 01B8
        gbc.setState(0x50a6, 0xb628, 0xb110, 0x4ff5, 0x7f0, 0x7df4, 0x1, 0x1);
        gbc.writeMem(0x50a6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb628);
        EXPECT(gbc.pc(), 0x50a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01B9
        gbc.setState(0x2ec6, 0x4f2d, 0xa4a0, 0x4190, 0xe37e, 0x5e94, 0x1, 0x1);
        gbc.writeMem(0x2ec6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4f2d);
        EXPECT(gbc.pc(), 0x2ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01BA
        gbc.setState(0x2a3f, 0xfdb2, 0x7050, 0xd04, 0x32f6, 0xa122, 0x1, 0x0);
        gbc.writeMem(0x2a3f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xfdb2);
        EXPECT(gbc.pc(), 0x2a41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01BB
        gbc.setState(0x7e0b, 0x3261, 0x1870, 0xa9c6, 0x7f28, 0xb614, 0x1, 0x0);
        gbc.writeMem(0x7e0b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x3261);
        EXPECT(gbc.pc(), 0x7e0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01BC
        gbc.setState(0xd8ad, 0x4350, 0xc990, 0x2535, 0x1695, 0x35b4, 0x0, 0x0);
        gbc.writeMem(0xd8ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4350);
        EXPECT(gbc.pc(), 0xd8af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ad), 0xcb);
        EXPECT(gbc.readMem(0xd8ae), 0x1b);
        // CB 1B 01BD
        gbc.setState(0xab1c, 0x62ec, 0x6090, 0xcbb1, 0x686e, 0x873f, 0x1, 0x1);
        gbc.writeMem(0xab1c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x62ec);
        EXPECT(gbc.pc(), 0xab1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab1c), 0xcb);
        EXPECT(gbc.readMem(0xab1d), 0x1b);
        // CB 1B 01BE
        gbc.setState(0x2269, 0x2565, 0x7410, 0x262f, 0xc691, 0xa6a6, 0x0, 0x1);
        gbc.writeMem(0x2269, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2565);
        EXPECT(gbc.pc(), 0x226b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01BF
        gbc.setState(0xccac, 0x7f26, 0xe5f0, 0xcacc, 0x2d84, 0x8fcc, 0x0, 0x1);
        gbc.writeMem(0xccac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7f26);
        EXPECT(gbc.pc(), 0xccae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccac), 0xcb);
        EXPECT(gbc.readMem(0xccad), 0x1b);
        // CB 1B 01C0
        gbc.setState(0xc1ee, 0x902c, 0xbdc0, 0x3c8d, 0x133c, 0x1c0e, 0x1, 0x1);
        gbc.writeMem(0xc1ee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x902c);
        EXPECT(gbc.pc(), 0xc1f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ee), 0xcb);
        EXPECT(gbc.readMem(0xc1ef), 0x1b);
        // CB 1B 01C1
        gbc.setState(0x88f7, 0x7a4e, 0xa420, 0x1c15, 0xc9dc, 0xa3fd, 0x1, 0x0);
        gbc.writeMem(0x88f7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7a4e);
        EXPECT(gbc.pc(), 0x88f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f7), 0xcb);
        EXPECT(gbc.readMem(0x88f8), 0x1b);
        // CB 1B 01C2
        gbc.setState(0xca32, 0x888e, 0x2740, 0x92ac, 0xa915, 0x4035, 0x0, 0x0);
        gbc.writeMem(0xca32, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x888e);
        EXPECT(gbc.pc(), 0xca34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca32), 0xcb);
        EXPECT(gbc.readMem(0xca33), 0x1b);
        // CB 1B 01C3
        gbc.setState(0xb5ca, 0x82e4, 0xd00, 0xa550, 0x7ed5, 0x6b3e, 0x1, 0x0);
        gbc.writeMem(0xb5ca, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x82e4);
        EXPECT(gbc.pc(), 0xb5cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ca), 0xcb);
        EXPECT(gbc.readMem(0xb5cb), 0x1b);
        // CB 1B 01C4
        gbc.setState(0x2466, 0xcd41, 0x5180, 0x8408, 0x2aa, 0xcb8f, 0x1, 0x0);
        gbc.writeMem(0x2466, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcd41);
        EXPECT(gbc.pc(), 0x2468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01C5
        gbc.setState(0x2a5d, 0xfb2b, 0xa6b0, 0x3c09, 0x667d, 0xb5e, 0x1, 0x1);
        gbc.writeMem(0x2a5d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfb2b);
        EXPECT(gbc.pc(), 0x2a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01C6
        gbc.setState(0xa316, 0x5897, 0xcb30, 0x9456, 0xa728, 0x2eed, 0x1, 0x0);
        gbc.writeMem(0xa316, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5897);
        EXPECT(gbc.pc(), 0xa318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa316), 0xcb);
        EXPECT(gbc.readMem(0xa317), 0x1b);
        // CB 1B 01C7
        gbc.setState(0x56bd, 0x6bbc, 0x1250, 0x5598, 0xcca3, 0xb3a8, 0x0, 0x1);
        gbc.writeMem(0x56bd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6bbc);
        EXPECT(gbc.pc(), 0x56bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01C8
        gbc.setState(0x952f, 0xaa83, 0x6210, 0xfa03, 0x103d, 0x1e65, 0x1, 0x0);
        gbc.writeMem(0x952f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xaa83);
        EXPECT(gbc.pc(), 0x9531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x952f), 0xcb);
        EXPECT(gbc.readMem(0x9530), 0x1b);
        // CB 1B 01C9
        gbc.setState(0x1b11, 0x8805, 0xa60, 0xdfaf, 0x802, 0x662d, 0x0, 0x1);
        gbc.writeMem(0x1b11, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8805);
        EXPECT(gbc.pc(), 0x1b13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01CA
        gbc.setState(0x9c28, 0x69ac, 0x7180, 0x593b, 0xe731, 0x436, 0x1, 0x0);
        gbc.writeMem(0x9c28, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x69ac);
        EXPECT(gbc.pc(), 0x9c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c28), 0xcb);
        EXPECT(gbc.readMem(0x9c29), 0x1b);
        // CB 1B 01CB
        gbc.setState(0x79ad, 0xce73, 0x71f0, 0xbc60, 0xc9aa, 0xad2, 0x0, 0x1);
        gbc.writeMem(0x79ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xce73);
        EXPECT(gbc.pc(), 0x79af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01CC
        gbc.setState(0xdf4d, 0xc247, 0x7d30, 0xbbd4, 0xedb1, 0xebf, 0x0, 0x0);
        gbc.writeMem(0xdf4d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc247);
        EXPECT(gbc.pc(), 0xdf4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf4d), 0xcb);
        EXPECT(gbc.readMem(0xdf4e), 0x1b);
        // CB 1B 01CD
        gbc.setState(0x1685, 0x5ab0, 0xfbf0, 0xc5be, 0x33d9, 0x4313, 0x0, 0x0);
        gbc.writeMem(0x1685, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5ab0);
        EXPECT(gbc.pc(), 0x1687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01CE
        gbc.setState(0xd2f6, 0x5de1, 0x97c0, 0x5b15, 0x2382, 0x3380, 0x1, 0x1);
        gbc.writeMem(0xd2f6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5de1);
        EXPECT(gbc.pc(), 0xd2f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f6), 0xcb);
        EXPECT(gbc.readMem(0xd2f7), 0x1b);
        // CB 1B 01CF
        gbc.setState(0x5199, 0xfe9, 0x7c0, 0x2a0a, 0xc134, 0x482c, 0x1, 0x0);
        gbc.writeMem(0x5199, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfe9);
        EXPECT(gbc.pc(), 0x519b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01D0
        gbc.setState(0xbc9b, 0x5a10, 0xef30, 0x4612, 0x8291, 0x341a, 0x1, 0x0);
        gbc.writeMem(0xbc9b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5a10);
        EXPECT(gbc.pc(), 0xbc9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc9b), 0xcb);
        EXPECT(gbc.readMem(0xbc9c), 0x1b);
        // CB 1B 01D1
        gbc.setState(0xbd09, 0x67c6, 0x7cc0, 0x8e6e, 0x7f49, 0x361b, 0x1, 0x1);
        gbc.writeMem(0xbd09, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x67c6);
        EXPECT(gbc.pc(), 0xbd0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd09), 0xcb);
        EXPECT(gbc.readMem(0xbd0a), 0x1b);
        // CB 1B 01D2
        gbc.setState(0x5841, 0x839b, 0x8d60, 0xf9ce, 0xaa2a, 0x4f1b, 0x0, 0x0);
        gbc.writeMem(0x5841, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x839b);
        EXPECT(gbc.pc(), 0x5843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01D4
        gbc.setState(0xcd36, 0xf0c0, 0x8b60, 0x16aa, 0xbe66, 0xa638, 0x0, 0x1);
        gbc.writeMem(0xcd36, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf0c0);
        EXPECT(gbc.pc(), 0xcd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd36), 0xcb);
        EXPECT(gbc.readMem(0xcd37), 0x1b);
        // CB 1B 01D5
        gbc.setState(0xd604, 0x35be, 0x3de0, 0xedfe, 0x9007, 0xed04, 0x0, 0x0);
        gbc.writeMem(0xd604, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x35be);
        EXPECT(gbc.pc(), 0xd606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd604), 0xcb);
        EXPECT(gbc.readMem(0xd605), 0x1b);
        // CB 1B 01D6
        gbc.setState(0xe7e4, 0x34a8, 0xec30, 0x577e, 0x9ade, 0xaea4, 0x0, 0x0);
        gbc.writeMem(0xe7e4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x34a8);
        EXPECT(gbc.pc(), 0xe7e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e4), 0xcb);
        EXPECT(gbc.readMem(0xe7e5), 0x1b);
        // CB 1B 01D7
        gbc.setState(0xbc25, 0x208, 0x6e10, 0xc9d6, 0x7b85, 0xdd6d, 0x0, 0x0);
        gbc.writeMem(0xbc25, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x208);
        EXPECT(gbc.pc(), 0xbc27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc25), 0xcb);
        EXPECT(gbc.readMem(0xbc26), 0x1b);
        // CB 1B 01D8
        gbc.setState(0xb01d, 0x6c7b, 0x8410, 0xaed2, 0x7fda, 0x6d6a, 0x0, 0x0);
        gbc.writeMem(0xb01d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6c7b);
        EXPECT(gbc.pc(), 0xb01f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01d), 0xcb);
        EXPECT(gbc.readMem(0xb01e), 0x1b);
        // CB 1B 01D9
        gbc.setState(0x5954, 0xaa91, 0xc590, 0xd19b, 0x8b51, 0xd176, 0x0, 0x1);
        gbc.writeMem(0x5954, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xaa91);
        EXPECT(gbc.pc(), 0x5956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01DA
        gbc.setState(0x11bb, 0x3675, 0xfd0, 0xce5e, 0xb817, 0x34fc, 0x1, 0x0);
        gbc.writeMem(0x11bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3675);
        EXPECT(gbc.pc(), 0x11bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01DB
        gbc.setState(0xcd9d, 0x3450, 0xac0, 0x1a2f, 0x3cf4, 0x8654, 0x1, 0x1);
        gbc.writeMem(0xcd9d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3450);
        EXPECT(gbc.pc(), 0xcd9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd9d), 0xcb);
        EXPECT(gbc.readMem(0xcd9e), 0x1b);
        // CB 1B 01DC
        gbc.setState(0xded3, 0x1ad5, 0x4760, 0x2c38, 0x90f2, 0x96b4, 0x1, 0x0);
        gbc.writeMem(0xded3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1ad5);
        EXPECT(gbc.pc(), 0xded5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded3), 0xcb);
        EXPECT(gbc.readMem(0xded4), 0x1b);
        // CB 1B 01DD
        gbc.setState(0x8dba, 0x5b1a, 0x70c0, 0x83fd, 0xbf12, 0x6d7c, 0x1, 0x1);
        gbc.writeMem(0x8dba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5b1a);
        EXPECT(gbc.pc(), 0x8dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dba), 0xcb);
        EXPECT(gbc.readMem(0x8dbb), 0x1b);
        // CB 1B 01DE
        gbc.setState(0x76d5, 0xaf82, 0x3a0, 0x8286, 0x5e1d, 0x1013, 0x1, 0x0);
        gbc.writeMem(0x76d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xaf82);
        EXPECT(gbc.pc(), 0x76d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01DF
        gbc.setState(0xcdf7, 0xa786, 0xb2e0, 0xc979, 0x5cf0, 0x175c, 0x0, 0x0);
        gbc.writeMem(0xcdf7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa786);
        EXPECT(gbc.pc(), 0xcdf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf7), 0xcb);
        EXPECT(gbc.readMem(0xcdf8), 0x1b);
        // CB 1B 01E0
        gbc.setState(0x36ed, 0x9441, 0xe9f0, 0x2ea9, 0x5030, 0xe2f6, 0x0, 0x0);
        gbc.writeMem(0x36ed, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9441);
        EXPECT(gbc.pc(), 0x36ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01E1
        gbc.setState(0x3ead, 0x65aa, 0x11d0, 0x41a3, 0xfa8b, 0x76df, 0x0, 0x1);
        gbc.writeMem(0x3ead, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x65aa);
        EXPECT(gbc.pc(), 0x3eaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01E2
        gbc.setState(0x5c05, 0xeea5, 0x4cd0, 0xbce7, 0xed93, 0x551d, 0x0, 0x0);
        gbc.writeMem(0x5c05, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xeea5);
        EXPECT(gbc.pc(), 0x5c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01E3
        gbc.setState(0x5046, 0x9b9c, 0xd490, 0x879b, 0xcf98, 0x26e2, 0x1, 0x1);
        gbc.writeMem(0x5046, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9b9c);
        EXPECT(gbc.pc(), 0x5048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01E4
        gbc.setState(0x6f4e, 0x9d9b, 0xab90, 0xf2ed, 0xb98d, 0xd426, 0x0, 0x0);
        gbc.writeMem(0x6f4e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9d9b);
        EXPECT(gbc.pc(), 0x6f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01E5
        gbc.setState(0x11eb, 0x636e, 0xa040, 0xff3, 0xd799, 0xb4c9, 0x0, 0x0);
        gbc.writeMem(0x11eb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x636e);
        EXPECT(gbc.pc(), 0x11ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01E6
        gbc.setState(0x9311, 0x8b42, 0xa810, 0xc150, 0x4870, 0xaac9, 0x0, 0x0);
        gbc.writeMem(0x9311, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8b42);
        EXPECT(gbc.pc(), 0x9313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9311), 0xcb);
        EXPECT(gbc.readMem(0x9312), 0x1b);
        // CB 1B 01E7
        gbc.setState(0x812c, 0x37ce, 0x2f10, 0x9f09, 0x4a21, 0x949f, 0x1, 0x1);
        gbc.writeMem(0x812c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x37ce);
        EXPECT(gbc.pc(), 0x812e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x812c), 0xcb);
        EXPECT(gbc.readMem(0x812d), 0x1b);
        // CB 1B 01E8
        gbc.setState(0x6874, 0xa9be, 0x8170, 0x244f, 0xfcb7, 0x6006, 0x0, 0x1);
        gbc.writeMem(0x6874, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa9be);
        EXPECT(gbc.pc(), 0x6876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01E9
        gbc.setState(0xf61, 0xb05c, 0xc050, 0x6b6c, 0x94c9, 0x89c4, 0x0, 0x0);
        gbc.writeMem(0xf61, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb05c);
        EXPECT(gbc.pc(), 0xf63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01EA
        gbc.setState(0xedf4, 0xf925, 0xf290, 0x8358, 0xd668, 0x43c6, 0x1, 0x1);
        gbc.writeMem(0xedf4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf925);
        EXPECT(gbc.pc(), 0xedf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf4), 0xcb);
        EXPECT(gbc.readMem(0xedf5), 0x1b);
        // CB 1B 01EB
        gbc.setState(0x5cde, 0xed94, 0xefa0, 0xcbd1, 0xafc5, 0x6407, 0x0, 0x0);
        gbc.writeMem(0x5cde, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xed94);
        EXPECT(gbc.pc(), 0x5ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01EC
        gbc.setState(0x39b, 0x4001, 0xaeb0, 0xfea0, 0x5c25, 0x2, 0x1, 0x0);
        gbc.writeMem(0x39b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4001);
        EXPECT(gbc.pc(), 0x39d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01ED
        gbc.setState(0xa344, 0x84ec, 0x8140, 0x2404, 0xb3f7, 0x6dab, 0x0, 0x1);
        gbc.writeMem(0xa344, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x84ec);
        EXPECT(gbc.pc(), 0xa346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa344), 0xcb);
        EXPECT(gbc.readMem(0xa345), 0x1b);
        // CB 1B 01EE
        gbc.setState(0xb65b, 0xc862, 0x1cf0, 0xb7b0, 0xd11c, 0xce85, 0x1, 0x1);
        gbc.writeMem(0xb65b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc862);
        EXPECT(gbc.pc(), 0xb65d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb65b), 0xcb);
        EXPECT(gbc.readMem(0xb65c), 0x1b);
        // CB 1B 01EF
        gbc.setState(0x2845, 0x26be, 0x83f0, 0x4b62, 0xf802, 0x11e1, 0x0, 0x1);
        gbc.writeMem(0x2845, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x26be);
        EXPECT(gbc.pc(), 0x2847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01F0
        gbc.setState(0x8534, 0x862e, 0x9a80, 0xf94f, 0xf0ec, 0x3d4, 0x0, 0x0);
        gbc.writeMem(0x8534, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x862e);
        EXPECT(gbc.pc(), 0x8536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8534), 0xcb);
        EXPECT(gbc.readMem(0x8535), 0x1b);
        // CB 1B 01F1
        gbc.setState(0x979e, 0xa57b, 0xac20, 0xf123, 0xf527, 0xb40b, 0x1, 0x1);
        gbc.writeMem(0x979e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa57b);
        EXPECT(gbc.pc(), 0x97a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x979e), 0xcb);
        EXPECT(gbc.readMem(0x979f), 0x1b);
        // CB 1B 01F2
        gbc.setState(0x102a, 0xed42, 0xcfe0, 0xf437, 0x4a4d, 0x810c, 0x1, 0x1);
        gbc.writeMem(0x102a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xed42);
        EXPECT(gbc.pc(), 0x102c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01F3
        gbc.setState(0x1ba1, 0xcbdf, 0xc660, 0xe472, 0x91f0, 0xa20a, 0x0, 0x1);
        gbc.writeMem(0x1ba1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcbdf);
        EXPECT(gbc.pc(), 0x1ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01F4
        gbc.setState(0x8400, 0xe44d, 0x62a0, 0xa48f, 0xb031, 0xf32e, 0x0, 0x0);
        gbc.writeMem(0x8400, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe44d);
        EXPECT(gbc.pc(), 0x8402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8400), 0xcb);
        EXPECT(gbc.readMem(0x8401), 0x1b);
        // CB 1B 01F5
        gbc.setState(0x7dd0, 0xa779, 0x1960, 0x27de, 0x952c, 0xd988, 0x0, 0x1);
        gbc.writeMem(0x7dd0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa779);
        EXPECT(gbc.pc(), 0x7dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01F6
        gbc.setState(0x730a, 0x3acd, 0x900, 0x58a9, 0x53d2, 0xf111, 0x1, 0x1);
        gbc.writeMem(0x730a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3acd);
        EXPECT(gbc.pc(), 0x730c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 01F7
        gbc.setState(0xcd36, 0x71de, 0x8cf0, 0xfed6, 0x11cc, 0x6cb8, 0x1, 0x1);
        gbc.writeMem(0xcd36, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x71de);
        EXPECT(gbc.pc(), 0xcd38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd36), 0xcb);
        EXPECT(gbc.readMem(0xcd37), 0x1b);
        // CB 1B 01F8
        gbc.setState(0xe90c, 0x9c0c, 0x6dc0, 0xd0b8, 0xffb4, 0xb80b, 0x1, 0x1);
        gbc.writeMem(0xe90c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9c0c);
        EXPECT(gbc.pc(), 0xe90e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe90c), 0xcb);
        EXPECT(gbc.readMem(0xe90d), 0x1b);
        // CB 1B 01F9
        gbc.setState(0x4f1c, 0xbc8b, 0xe520, 0x7450, 0xc977, 0x9af5, 0x1, 0x1);
        gbc.writeMem(0x4f1c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbc8b);
        EXPECT(gbc.pc(), 0x4f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01FA
        gbc.setState(0xb963, 0x3d2a, 0xbf80, 0x3503, 0xb335, 0x66fc, 0x1, 0x0);
        gbc.writeMem(0xb963, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3d2a);
        EXPECT(gbc.pc(), 0xb965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb963), 0xcb);
        EXPECT(gbc.readMem(0xb964), 0x1b);
        // CB 1B 01FB
        gbc.setState(0xb5fe, 0xdf7c, 0x2780, 0x8c5d, 0xea10, 0xa605, 0x0, 0x0);
        gbc.writeMem(0xb5fe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdf7c);
        EXPECT(gbc.pc(), 0xb600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5fe), 0xcb);
        EXPECT(gbc.readMem(0xb5ff), 0x1b);
        // CB 1B 01FC
        gbc.setState(0x7d59, 0xf873, 0x11e0, 0x25d8, 0x15a9, 0xd2de, 0x1, 0x1);
        gbc.writeMem(0x7d59, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf873);
        EXPECT(gbc.pc(), 0x7d5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 01FD
        gbc.setState(0xe6a2, 0xfce4, 0x7fa0, 0xf602, 0x4772, 0xcd68, 0x0, 0x1);
        gbc.writeMem(0xe6a2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfce4);
        EXPECT(gbc.pc(), 0xe6a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a2), 0xcb);
        EXPECT(gbc.readMem(0xe6a3), 0x1b);
        // CB 1B 01FE
        gbc.setState(0xa7d8, 0xb9e1, 0x67a0, 0xa8fa, 0x8bd0, 0x759c, 0x1, 0x0);
        gbc.writeMem(0xa7d8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb9e1);
        EXPECT(gbc.pc(), 0xa7da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d8), 0xcb);
        EXPECT(gbc.readMem(0xa7d9), 0x1b);
        // CB 1B 01FF
        gbc.setState(0x951, 0xbbe7, 0xb8f0, 0xc883, 0xe650, 0xe9c3, 0x1, 0x0);
        gbc.writeMem(0x951, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xbbe7);
        EXPECT(gbc.pc(), 0x953);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0200
        gbc.setState(0xb231, 0x1b4e, 0x1090, 0x1360, 0xfb4a, 0xebec, 0x0, 0x0);
        gbc.writeMem(0xb231, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1b4e);
        EXPECT(gbc.pc(), 0xb233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb231), 0xcb);
        EXPECT(gbc.readMem(0xb232), 0x1b);
        // CB 1B 0201
        gbc.setState(0xc315, 0x8096, 0x6db0, 0x4688, 0x60ea, 0x8622, 0x1, 0x1);
        gbc.writeMem(0xc315, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8096);
        EXPECT(gbc.pc(), 0xc317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc315), 0xcb);
        EXPECT(gbc.readMem(0xc316), 0x1b);
        // CB 1B 0202
        gbc.setState(0x84ce, 0xf52c, 0x370, 0x84f4, 0xeed9, 0xfe69, 0x1, 0x0);
        gbc.writeMem(0x84ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf52c);
        EXPECT(gbc.pc(), 0x84d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ce), 0xcb);
        EXPECT(gbc.readMem(0x84cf), 0x1b);
        // CB 1B 0203
        gbc.setState(0x50a0, 0xfaae, 0x7260, 0xa57d, 0x69c, 0x9959, 0x0, 0x0);
        gbc.writeMem(0x50a0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfaae);
        EXPECT(gbc.pc(), 0x50a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0204
        gbc.setState(0xa435, 0xd53e, 0xe5f0, 0xa9fe, 0x7aad, 0x2ced, 0x1, 0x1);
        gbc.writeMem(0xa435, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd53e);
        EXPECT(gbc.pc(), 0xa437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa435), 0xcb);
        EXPECT(gbc.readMem(0xa436), 0x1b);
        // CB 1B 0205
        gbc.setState(0x6c46, 0xd815, 0xce90, 0xefb1, 0xbc2f, 0x39e4, 0x0, 0x0);
        gbc.writeMem(0x6c46, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd815);
        EXPECT(gbc.pc(), 0x6c48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0206
        gbc.setState(0x8179, 0x733d, 0x5380, 0x2361, 0xc7c0, 0x8dcd, 0x0, 0x0);
        gbc.writeMem(0x8179, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x733d);
        EXPECT(gbc.pc(), 0x817b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8179), 0xcb);
        EXPECT(gbc.readMem(0x817a), 0x1b);
        // CB 1B 0208
        gbc.setState(0x35e0, 0x35be, 0x2420, 0x8658, 0x7e33, 0x70b6, 0x0, 0x0);
        gbc.writeMem(0x35e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x35be);
        EXPECT(gbc.pc(), 0x35e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0209
        gbc.setState(0x6236, 0x3be3, 0xf8e0, 0xcc0d, 0xfbe2, 0x49b3, 0x0, 0x1);
        gbc.writeMem(0x6236, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3be3);
        EXPECT(gbc.pc(), 0x6238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 020A
        gbc.setState(0xbaba, 0xf86d, 0x7e70, 0x1e2a, 0xe94b, 0x6e88, 0x1, 0x0);
        gbc.writeMem(0xbaba, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf86d);
        EXPECT(gbc.pc(), 0xbabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaba), 0xcb);
        EXPECT(gbc.readMem(0xbabb), 0x1b);
        // CB 1B 020B
        gbc.setState(0xc5c2, 0xed01, 0xa2b0, 0xf85, 0x766d, 0x759d, 0x0, 0x1);
        gbc.writeMem(0xc5c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xed01);
        EXPECT(gbc.pc(), 0xc5c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c2), 0xcb);
        EXPECT(gbc.readMem(0xc5c3), 0x1b);
        // CB 1B 020C
        gbc.setState(0x27cf, 0x4867, 0x9a0, 0xf459, 0xfdcf, 0xc26e, 0x0, 0x0);
        gbc.writeMem(0x27cf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4867);
        EXPECT(gbc.pc(), 0x27d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 020D
        gbc.setState(0x6703, 0x67b4, 0x61a0, 0xe00f, 0x8f3a, 0xe985, 0x1, 0x1);
        gbc.writeMem(0x6703, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x67b4);
        EXPECT(gbc.pc(), 0x6705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 020F
        gbc.setState(0xa8dd, 0xb8c4, 0xfe30, 0xf96e, 0xb5c0, 0x369b, 0x1, 0x0);
        gbc.writeMem(0xa8dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb8c4);
        EXPECT(gbc.pc(), 0xa8df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8dd), 0xcb);
        EXPECT(gbc.readMem(0xa8de), 0x1b);
        // CB 1B 0210
        gbc.setState(0x7f15, 0x857c, 0xcd10, 0x3e48, 0xef02, 0x7928, 0x1, 0x1);
        gbc.writeMem(0x7f15, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x857c);
        EXPECT(gbc.pc(), 0x7f17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0211
        gbc.setState(0x9214, 0xc3d1, 0xc110, 0xad38, 0x28d5, 0xa908, 0x1, 0x1);
        gbc.writeMem(0x9214, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc3d1);
        EXPECT(gbc.pc(), 0x9216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9214), 0xcb);
        EXPECT(gbc.readMem(0x9215), 0x1b);
        // CB 1B 0212
        gbc.setState(0xb514, 0xaf53, 0x430, 0xf3c4, 0x6f64, 0x745f, 0x0, 0x0);
        gbc.writeMem(0xb514, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xaf53);
        EXPECT(gbc.pc(), 0xb516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb514), 0xcb);
        EXPECT(gbc.readMem(0xb515), 0x1b);
        // CB 1B 0213
        gbc.setState(0x9186, 0x4cab, 0x8da0, 0x5196, 0x9b72, 0xffb3, 0x0, 0x1);
        gbc.writeMem(0x9186, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x4cab);
        EXPECT(gbc.pc(), 0x9188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9186), 0xcb);
        EXPECT(gbc.readMem(0x9187), 0x1b);
        // CB 1B 0214
        gbc.setState(0x410f, 0xe1cd, 0x58f0, 0x5994, 0x24c, 0xf8b7, 0x0, 0x1);
        gbc.writeMem(0x410f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe1cd);
        EXPECT(gbc.pc(), 0x4111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0215
        gbc.setState(0x6351, 0x9f67, 0x6810, 0x345f, 0xbba0, 0xc08b, 0x0, 0x1);
        gbc.writeMem(0x6351, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9f67);
        EXPECT(gbc.pc(), 0x6353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0216
        gbc.setState(0xe1c2, 0x74bc, 0xf980, 0x3353, 0x5acc, 0x3797, 0x1, 0x1);
        gbc.writeMem(0xe1c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x74bc);
        EXPECT(gbc.pc(), 0xe1c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1c2), 0xcb);
        EXPECT(gbc.readMem(0xe1c3), 0x1b);
        // CB 1B 0217
        gbc.setState(0xe203, 0x353c, 0xf20, 0xd2a3, 0xd4c3, 0xaa4b, 0x0, 0x1);
        gbc.writeMem(0xe203, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x353c);
        EXPECT(gbc.pc(), 0xe205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe203), 0xcb);
        EXPECT(gbc.readMem(0xe204), 0x1b);
        // CB 1B 0218
        gbc.setState(0x2abb, 0xe455, 0x42c0, 0xbe49, 0x664, 0x2280, 0x1, 0x1);
        gbc.writeMem(0x2abb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe455);
        EXPECT(gbc.pc(), 0x2abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0219
        gbc.setState(0xe00f, 0xbc9d, 0xeaf0, 0x35a4, 0x90db, 0x8fec, 0x1, 0x1);
        gbc.writeMem(0xe00f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbc9d);
        EXPECT(gbc.pc(), 0xe011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe00f), 0xcb);
        EXPECT(gbc.readMem(0xe010), 0x1b);
        // CB 1B 021A
        gbc.setState(0x5a26, 0xc4f5, 0x5320, 0xd8e6, 0x8683, 0xe7e, 0x1, 0x0);
        gbc.writeMem(0x5a26, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc4f5);
        EXPECT(gbc.pc(), 0x5a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 021B
        gbc.setState(0xab37, 0xb16b, 0x9e30, 0x38f4, 0x26fb, 0x5d15, 0x1, 0x0);
        gbc.writeMem(0xab37, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb16b);
        EXPECT(gbc.pc(), 0xab39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab37), 0xcb);
        EXPECT(gbc.readMem(0xab38), 0x1b);
        // CB 1B 021C
        gbc.setState(0xa846, 0x4c3a, 0x9410, 0x7c78, 0x97c4, 0x2a5c, 0x0, 0x1);
        gbc.writeMem(0xa846, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4c3a);
        EXPECT(gbc.pc(), 0xa848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa846), 0xcb);
        EXPECT(gbc.readMem(0xa847), 0x1b);
        // CB 1B 021D
        gbc.setState(0xe68e, 0xc130, 0xa150, 0xbc92, 0x76c6, 0xbe81, 0x1, 0x0);
        gbc.writeMem(0xe68e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc130);
        EXPECT(gbc.pc(), 0xe690);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe68e), 0xcb);
        EXPECT(gbc.readMem(0xe68f), 0x1b);
        // CB 1B 021E
        gbc.setState(0xe065, 0xed8a, 0x62e0, 0x3c5b, 0x3816, 0x2ddd, 0x1, 0x0);
        gbc.writeMem(0xe065, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xed8a);
        EXPECT(gbc.pc(), 0xe067);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe065), 0xcb);
        EXPECT(gbc.readMem(0xe066), 0x1b);
        // CB 1B 021F
        gbc.setState(0xa2c3, 0xb7de, 0x7910, 0x7937, 0xe58b, 0xab0, 0x1, 0x0);
        gbc.writeMem(0xa2c3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb7de);
        EXPECT(gbc.pc(), 0xa2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c3), 0xcb);
        EXPECT(gbc.readMem(0xa2c4), 0x1b);
        // CB 1B 0220
        gbc.setState(0xfbb, 0x514b, 0x4620, 0xa7fe, 0xf7ae, 0xf106, 0x0, 0x0);
        gbc.writeMem(0xfbb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x514b);
        EXPECT(gbc.pc(), 0xfbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0221
        gbc.setState(0xaa77, 0x4000, 0x1170, 0x3b42, 0x508e, 0xc751, 0x1, 0x0);
        gbc.writeMem(0xaa77, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4000);
        EXPECT(gbc.pc(), 0xaa79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa77), 0xcb);
        EXPECT(gbc.readMem(0xaa78), 0x1b);
        // CB 1B 0222
        gbc.setState(0x2e18, 0x7bdb, 0xedf0, 0xa613, 0xb9c0, 0xf546, 0x0, 0x1);
        gbc.writeMem(0x2e18, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7bdb);
        EXPECT(gbc.pc(), 0x2e1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0223
        gbc.setState(0xc116, 0xde39, 0x2d60, 0xd27b, 0x3e9e, 0xdde5, 0x1, 0x1);
        gbc.writeMem(0xc116, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xde39);
        EXPECT(gbc.pc(), 0xc118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc116), 0xcb);
        EXPECT(gbc.readMem(0xc117), 0x1b);
        // CB 1B 0225
        gbc.setState(0xa15a, 0x3360, 0x6880, 0x6476, 0x551c, 0x8c00, 0x1, 0x1);
        gbc.writeMem(0xa15a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3360);
        EXPECT(gbc.pc(), 0xa15c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15a), 0xcb);
        EXPECT(gbc.readMem(0xa15b), 0x1b);
        // CB 1B 0226
        gbc.setState(0x4294, 0x102, 0x8ea0, 0x4d15, 0xc8dc, 0xbc18, 0x1, 0x1);
        gbc.writeMem(0x4294, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x102);
        EXPECT(gbc.pc(), 0x4296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0227
        gbc.setState(0x683f, 0xaeaa, 0xd0, 0x91b, 0xb33d, 0xc4f3, 0x0, 0x0);
        gbc.writeMem(0x683f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xaeaa);
        EXPECT(gbc.pc(), 0x6841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0228
        gbc.setState(0x740a, 0x3597, 0xefe0, 0x8666, 0x3749, 0xb12d, 0x0, 0x0);
        gbc.writeMem(0x740a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3597);
        EXPECT(gbc.pc(), 0x740c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0229
        gbc.setState(0x6538, 0x1dae, 0x84e0, 0x9fa5, 0xbe35, 0xf505, 0x1, 0x0);
        gbc.writeMem(0x6538, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1dae);
        EXPECT(gbc.pc(), 0x653a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 022A
        gbc.setState(0x80e3, 0xec0a, 0x9fd0, 0x401a, 0x8bfb, 0xbb20, 0x0, 0x0);
        gbc.writeMem(0x80e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xec0a);
        EXPECT(gbc.pc(), 0x80e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e3), 0xcb);
        EXPECT(gbc.readMem(0x80e4), 0x1b);
        // CB 1B 022B
        gbc.setState(0x3bc3, 0x1153, 0xe1c0, 0x3cdc, 0x7a4f, 0xb0f0, 0x0, 0x0);
        gbc.writeMem(0x3bc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1153);
        EXPECT(gbc.pc(), 0x3bc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 022C
        gbc.setState(0x113e, 0xc927, 0x3fd0, 0x71cf, 0xd5db, 0x1cf2, 0x0, 0x1);
        gbc.writeMem(0x113e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc927);
        EXPECT(gbc.pc(), 0x1140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 022D
        gbc.setState(0x44f, 0xdc7d, 0x2dd0, 0x3d01, 0xb021, 0x720c, 0x0, 0x1);
        gbc.writeMem(0x44f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xdc7d);
        EXPECT(gbc.pc(), 0x451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 022E
        gbc.setState(0x7dfc, 0x5e3b, 0x9cb0, 0x2898, 0x69ba, 0xe80c, 0x1, 0x1);
        gbc.writeMem(0x7dfc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5e3b);
        EXPECT(gbc.pc(), 0x7dfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 022F
        gbc.setState(0x96f8, 0x2923, 0xf530, 0x3834, 0xefb2, 0xaec4, 0x0, 0x1);
        gbc.writeMem(0x96f8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2923);
        EXPECT(gbc.pc(), 0x96fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f8), 0xcb);
        EXPECT(gbc.readMem(0x96f9), 0x1b);
        // CB 1B 0230
        gbc.setState(0xe506, 0xbadb, 0xd5f0, 0x4235, 0x3407, 0xff58, 0x1, 0x0);
        gbc.writeMem(0xe506, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbadb);
        EXPECT(gbc.pc(), 0xe508);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe506), 0xcb);
        EXPECT(gbc.readMem(0xe507), 0x1b);
        // CB 1B 0231
        gbc.setState(0x60ad, 0x6b08, 0x38c0, 0x50eb, 0x7e85, 0x7d37, 0x0, 0x1);
        gbc.writeMem(0x60ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6b08);
        EXPECT(gbc.pc(), 0x60af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0232
        gbc.setState(0x9712, 0x1223, 0xa320, 0xaa91, 0x7a62, 0xa287, 0x0, 0x0);
        gbc.writeMem(0x9712, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1223);
        EXPECT(gbc.pc(), 0x9714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9712), 0xcb);
        EXPECT(gbc.readMem(0x9713), 0x1b);
        // CB 1B 0233
        gbc.setState(0xa944, 0x99, 0xb9c0, 0x91ee, 0x6cc6, 0x2c9f, 0x0, 0x1);
        gbc.writeMem(0xa944, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x99);
        EXPECT(gbc.pc(), 0xa946);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa944), 0xcb);
        EXPECT(gbc.readMem(0xa945), 0x1b);
        // CB 1B 0234
        gbc.setState(0x1437, 0x5b, 0xbfb0, 0x4150, 0x84bd, 0xa4c8, 0x0, 0x1);
        gbc.writeMem(0x1437, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5b);
        EXPECT(gbc.pc(), 0x1439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0235
        gbc.setState(0x9e66, 0x9e0c, 0xd8f0, 0x78da, 0xcaf8, 0x8513, 0x1, 0x1);
        gbc.writeMem(0x9e66, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9e0c);
        EXPECT(gbc.pc(), 0x9e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e66), 0xcb);
        EXPECT(gbc.readMem(0x9e67), 0x1b);
        // CB 1B 0236
        gbc.setState(0xadc3, 0x8efa, 0x2450, 0x6f3, 0x1d1c, 0x638c, 0x1, 0x1);
        gbc.writeMem(0xadc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8efa);
        EXPECT(gbc.pc(), 0xadc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc3), 0xcb);
        EXPECT(gbc.readMem(0xadc4), 0x1b);
        // CB 1B 0237
        gbc.setState(0x70f8, 0xc738, 0xa8d0, 0x6422, 0x378f, 0x56a0, 0x1, 0x1);
        gbc.writeMem(0x70f8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc738);
        EXPECT(gbc.pc(), 0x70fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0238
        gbc.setState(0x98e4, 0xb2cf, 0x19c0, 0xd7a0, 0x5af5, 0xc1c5, 0x1, 0x1);
        gbc.writeMem(0x98e4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb2cf);
        EXPECT(gbc.pc(), 0x98e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e4), 0xcb);
        EXPECT(gbc.readMem(0x98e5), 0x1b);
        // CB 1B 0239
        gbc.setState(0x16a5, 0x8ac1, 0x7670, 0xda4c, 0x4fbe, 0xc9ae, 0x1, 0x1);
        gbc.writeMem(0x16a5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8ac1);
        EXPECT(gbc.pc(), 0x16a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 023A
        gbc.setState(0x725b, 0x3524, 0x14d0, 0x1fd5, 0xb6d6, 0xc551, 0x0, 0x0);
        gbc.writeMem(0x725b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3524);
        EXPECT(gbc.pc(), 0x725d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 023B
        gbc.setState(0x13b, 0xe429, 0xe700, 0x98aa, 0x37d6, 0xf8ca, 0x1, 0x0);
        gbc.writeMem(0x13b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe429);
        EXPECT(gbc.pc(), 0x13d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 023C
        gbc.setState(0xe762, 0x772a, 0xe570, 0x8689, 0xabaf, 0x83d, 0x0, 0x1);
        gbc.writeMem(0xe762, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x772a);
        EXPECT(gbc.pc(), 0xe764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe762), 0xcb);
        EXPECT(gbc.readMem(0xe763), 0x1b);
        // CB 1B 023D
        gbc.setState(0x328d, 0xd51d, 0x2d70, 0xf8d3, 0x1d08, 0x115, 0x0, 0x0);
        gbc.writeMem(0x328d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd51d);
        EXPECT(gbc.pc(), 0x328f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 023E
        gbc.setState(0x4c56, 0x4b2b, 0x54f0, 0x68e3, 0x45fc, 0xeac8, 0x1, 0x1);
        gbc.writeMem(0x4c56, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4b2b);
        EXPECT(gbc.pc(), 0x4c58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 023F
        gbc.setState(0x9a84, 0xbc60, 0xdf20, 0xa5a5, 0x213c, 0x5403, 0x1, 0x1);
        gbc.writeMem(0x9a84, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbc60);
        EXPECT(gbc.pc(), 0x9a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a84), 0xcb);
        EXPECT(gbc.readMem(0x9a85), 0x1b);
        // CB 1B 0240
        gbc.setState(0x765a, 0xdfd4, 0x3e0, 0xe7ca, 0x7a90, 0xef71, 0x0, 0x1);
        gbc.writeMem(0x765a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xdfd4);
        EXPECT(gbc.pc(), 0x765c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0241
        gbc.setState(0x4901, 0x5b6b, 0x4590, 0xc7a5, 0x9160, 0x9627, 0x1, 0x1);
        gbc.writeMem(0x4901, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5b6b);
        EXPECT(gbc.pc(), 0x4903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0242
        gbc.setState(0x2a06, 0xcb8d, 0xae0, 0x40b4, 0xa6d9, 0x2309, 0x1, 0x0);
        gbc.writeMem(0x2a06, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xcb8d);
        EXPECT(gbc.pc(), 0x2a08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0243
        gbc.setState(0xa6ad, 0x8c71, 0xb5b0, 0x37f4, 0xb2ab, 0x3840, 0x1, 0x1);
        gbc.writeMem(0xa6ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8c71);
        EXPECT(gbc.pc(), 0xa6af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6ad), 0xcb);
        EXPECT(gbc.readMem(0xa6ae), 0x1b);
        // CB 1B 0244
        gbc.setState(0x7dcb, 0xe590, 0xdc60, 0x56f3, 0x4e75, 0x60c7, 0x0, 0x1);
        gbc.writeMem(0x7dcb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe590);
        EXPECT(gbc.pc(), 0x7dcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0245
        gbc.setState(0x101d, 0xd512, 0x1690, 0x931, 0xcf3b, 0xedc6, 0x1, 0x0);
        gbc.writeMem(0x101d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd512);
        EXPECT(gbc.pc(), 0x101f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0246
        gbc.setState(0x825f, 0x2185, 0x60b0, 0x15f4, 0x5c99, 0xd8bc, 0x0, 0x0);
        gbc.writeMem(0x825f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2185);
        EXPECT(gbc.pc(), 0x8261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x825f), 0xcb);
        EXPECT(gbc.readMem(0x8260), 0x1b);
        // CB 1B 0248
        gbc.setState(0xc0ae, 0xca05, 0x8340, 0x48c8, 0xbaf8, 0xc26a, 0x0, 0x1);
        gbc.writeMem(0xc0ae, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xca05);
        EXPECT(gbc.pc(), 0xc0b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ae), 0xcb);
        EXPECT(gbc.readMem(0xc0af), 0x1b);
        // CB 1B 0249
        gbc.setState(0xd5f, 0x5389, 0x7c60, 0xff36, 0xdc2a, 0x2c8c, 0x1, 0x1);
        gbc.writeMem(0xd5f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5389);
        EXPECT(gbc.pc(), 0xd61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 024A
        gbc.setState(0x4ee4, 0x8f30, 0xd00, 0x5d13, 0x204e, 0x67dd, 0x0, 0x1);
        gbc.writeMem(0x4ee4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8f30);
        EXPECT(gbc.pc(), 0x4ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 024B
        gbc.setState(0x3b3e, 0x709, 0x6000, 0xebd2, 0xdba4, 0x6666, 0x1, 0x1);
        gbc.writeMem(0x3b3e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x709);
        EXPECT(gbc.pc(), 0x3b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 024C
        gbc.setState(0xd637, 0x846a, 0x3d90, 0x3dd8, 0x271e, 0x512d, 0x0, 0x1);
        gbc.writeMem(0xd637, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x846a);
        EXPECT(gbc.pc(), 0xd639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd637), 0xcb);
        EXPECT(gbc.readMem(0xd638), 0x1b);
        // CB 1B 024D
        gbc.setState(0x4b67, 0x9a0b, 0x3450, 0xc946, 0xd7f7, 0xd383, 0x1, 0x1);
        gbc.writeMem(0x4b67, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9a0b);
        EXPECT(gbc.pc(), 0x4b69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 024E
        gbc.setState(0xe2fb, 0xb8de, 0x1c40, 0x49b, 0x2835, 0x3b85, 0x1, 0x0);
        gbc.writeMem(0xe2fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb8de);
        EXPECT(gbc.pc(), 0xe2fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2fb), 0xcb);
        EXPECT(gbc.readMem(0xe2fc), 0x1b);
        // CB 1B 024F
        gbc.setState(0x318a, 0x45f8, 0x5490, 0x2fcd, 0xe1a6, 0xbde0, 0x0, 0x1);
        gbc.writeMem(0x318a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x45f8);
        EXPECT(gbc.pc(), 0x318c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0250
        gbc.setState(0x18db, 0x98c1, 0x480, 0x2a9, 0x3e5e, 0x404c, 0x0, 0x0);
        gbc.writeMem(0x18db, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x98c1);
        EXPECT(gbc.pc(), 0x18dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0251
        gbc.setState(0x8653, 0x5f0e, 0x6080, 0xd67e, 0x2e7, 0x3ae6, 0x0, 0x1);
        gbc.writeMem(0x8653, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5f0e);
        EXPECT(gbc.pc(), 0x8655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8653), 0xcb);
        EXPECT(gbc.readMem(0x8654), 0x1b);
        // CB 1B 0252
        gbc.setState(0x2985, 0x9ff8, 0x54d0, 0xe218, 0xc98a, 0x8d83, 0x1, 0x0);
        gbc.writeMem(0x2985, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9ff8);
        EXPECT(gbc.pc(), 0x2987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0253
        gbc.setState(0x40be, 0x31bf, 0x4930, 0xad3e, 0x4295, 0x2c5, 0x0, 0x1);
        gbc.writeMem(0x40be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x31bf);
        EXPECT(gbc.pc(), 0x40c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0254
        gbc.setState(0x94c1, 0xa290, 0xe370, 0xc786, 0xf231, 0x9550, 0x1, 0x1);
        gbc.writeMem(0x94c1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa290);
        EXPECT(gbc.pc(), 0x94c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c1), 0xcb);
        EXPECT(gbc.readMem(0x94c2), 0x1b);
        // CB 1B 0255
        gbc.setState(0x2848, 0xecf6, 0x8de0, 0xb14e, 0xac49, 0x9f9a, 0x0, 0x1);
        gbc.writeMem(0x2848, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xecf6);
        EXPECT(gbc.pc(), 0x284a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0256
        gbc.setState(0x4368, 0x10a5, 0x2640, 0x75ea, 0xb340, 0xae20, 0x1, 0x0);
        gbc.writeMem(0x4368, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x10a5);
        EXPECT(gbc.pc(), 0x436a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0257
        gbc.setState(0xeaf1, 0x78bf, 0xc150, 0x8981, 0xbe0, 0xea8, 0x0, 0x1);
        gbc.writeMem(0xeaf1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x78bf);
        EXPECT(gbc.pc(), 0xeaf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaf1), 0xcb);
        EXPECT(gbc.readMem(0xeaf2), 0x1b);
        // CB 1B 0258
        gbc.setState(0x3dd0, 0x2ce2, 0x1c60, 0xe88a, 0x79bb, 0x5883, 0x1, 0x1);
        gbc.writeMem(0x3dd0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2ce2);
        EXPECT(gbc.pc(), 0x3dd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0259
        gbc.setState(0xe77c, 0xd092, 0x84f0, 0x56bc, 0xa537, 0x385e, 0x0, 0x0);
        gbc.writeMem(0xe77c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd092);
        EXPECT(gbc.pc(), 0xe77e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe77c), 0xcb);
        EXPECT(gbc.readMem(0xe77d), 0x1b);
        // CB 1B 025A
        gbc.setState(0xdde6, 0xb8ae, 0x1210, 0x972c, 0x2319, 0xea32, 0x1, 0x0);
        gbc.writeMem(0xdde6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb8ae);
        EXPECT(gbc.pc(), 0xdde8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde6), 0xcb);
        EXPECT(gbc.readMem(0xdde7), 0x1b);
        // CB 1B 025B
        gbc.setState(0xb152, 0x9471, 0x8870, 0x4a06, 0x5a03, 0xb123, 0x0, 0x1);
        gbc.writeMem(0xb152, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9471);
        EXPECT(gbc.pc(), 0xb154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb152), 0xcb);
        EXPECT(gbc.readMem(0xb153), 0x1b);
        // CB 1B 025C
        gbc.setState(0xceea, 0x2140, 0x5b30, 0x81a6, 0x3a4d, 0x6138, 0x0, 0x1);
        gbc.writeMem(0xceea, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2140);
        EXPECT(gbc.pc(), 0xceec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceea), 0xcb);
        EXPECT(gbc.readMem(0xceeb), 0x1b);
        // CB 1B 025D
        gbc.setState(0x3e5d, 0x52eb, 0xe3a0, 0x86cb, 0x99f1, 0x7cfc, 0x0, 0x1);
        gbc.writeMem(0x3e5d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x52eb);
        EXPECT(gbc.pc(), 0x3e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 025E
        gbc.setState(0x546a, 0x62d4, 0xf130, 0x1636, 0x1d9d, 0x6d24, 0x1, 0x1);
        gbc.writeMem(0x546a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x62d4);
        EXPECT(gbc.pc(), 0x546c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 025F
        gbc.setState(0x2728, 0x2fa1, 0xf560, 0xb4df, 0x11a4, 0xd0b5, 0x1, 0x0);
        gbc.writeMem(0x2728, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2fa1);
        EXPECT(gbc.pc(), 0x272a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0261
        gbc.setState(0xaebf, 0x2a5, 0x4d90, 0xa5b9, 0xf625, 0x71fc, 0x0, 0x0);
        gbc.writeMem(0xaebf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2a5);
        EXPECT(gbc.pc(), 0xaec1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaebf), 0xcb);
        EXPECT(gbc.readMem(0xaec0), 0x1b);
        // CB 1B 0263
        gbc.setState(0x4962, 0x11d7, 0xbee0, 0xd44d, 0x689e, 0xb6a1, 0x0, 0x0);
        gbc.writeMem(0x4962, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x11d7);
        EXPECT(gbc.pc(), 0x4964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0264
        gbc.setState(0x8a01, 0x1004, 0x3770, 0xec5c, 0x8f67, 0xc247, 0x1, 0x1);
        gbc.writeMem(0x8a01, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1004);
        EXPECT(gbc.pc(), 0x8a03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a01), 0xcb);
        EXPECT(gbc.readMem(0x8a02), 0x1b);
        // CB 1B 0265
        gbc.setState(0x8eb5, 0x7fb4, 0xcf30, 0x7ed5, 0x635b, 0x29fc, 0x1, 0x0);
        gbc.writeMem(0x8eb5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7fb4);
        EXPECT(gbc.pc(), 0x8eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb5), 0xcb);
        EXPECT(gbc.readMem(0x8eb6), 0x1b);
        // CB 1B 0266
        gbc.setState(0x5ce2, 0x8e8d, 0xcc00, 0x541b, 0xc193, 0x295a, 0x0, 0x0);
        gbc.writeMem(0x5ce2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8e8d);
        EXPECT(gbc.pc(), 0x5ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0267
        gbc.setState(0xb790, 0xd32b, 0xaca0, 0xc966, 0x1dae, 0x9ffe, 0x0, 0x0);
        gbc.writeMem(0xb790, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd32b);
        EXPECT(gbc.pc(), 0xb792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb790), 0xcb);
        EXPECT(gbc.readMem(0xb791), 0x1b);
        // CB 1B 0268
        gbc.setState(0x7116, 0xaa2a, 0xcbf0, 0x56ec, 0xd5a, 0x15ae, 0x0, 0x1);
        gbc.writeMem(0x7116, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xaa2a);
        EXPECT(gbc.pc(), 0x7118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0269
        gbc.setState(0x584b, 0xf00c, 0xb3b0, 0xdd9c, 0x7be9, 0x9c22, 0x1, 0x0);
        gbc.writeMem(0x584b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf00c);
        EXPECT(gbc.pc(), 0x584d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 026A
        gbc.setState(0x8913, 0xf818, 0x7360, 0x742c, 0xbde3, 0x8021, 0x0, 0x1);
        gbc.writeMem(0x8913, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf818);
        EXPECT(gbc.pc(), 0x8915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8913), 0xcb);
        EXPECT(gbc.readMem(0x8914), 0x1b);
        // CB 1B 026C
        gbc.setState(0xa9b8, 0xe91c, 0xa2f0, 0x7d01, 0xf556, 0xa8aa, 0x1, 0x1);
        gbc.writeMem(0xa9b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe91c);
        EXPECT(gbc.pc(), 0xa9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b8), 0xcb);
        EXPECT(gbc.readMem(0xa9b9), 0x1b);
        // CB 1B 026D
        gbc.setState(0xbd17, 0x1702, 0xc130, 0x3548, 0xea15, 0x6cea, 0x0, 0x0);
        gbc.writeMem(0xbd17, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1702);
        EXPECT(gbc.pc(), 0xbd19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd17), 0xcb);
        EXPECT(gbc.readMem(0xbd18), 0x1b);
        // CB 1B 026E
        gbc.setState(0x906c, 0xf445, 0x7070, 0xa569, 0xab85, 0x603b, 0x0, 0x1);
        gbc.writeMem(0x906c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf445);
        EXPECT(gbc.pc(), 0x906e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x906c), 0xcb);
        EXPECT(gbc.readMem(0x906d), 0x1b);
        // CB 1B 026F
        gbc.setState(0x375d, 0xa572, 0x5540, 0xc003, 0x5a4c, 0xea17, 0x1, 0x1);
        gbc.writeMem(0x375d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa572);
        EXPECT(gbc.pc(), 0x375f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0270
        gbc.setState(0xd1a6, 0x2fa3, 0xa5a0, 0xd778, 0x345a, 0xe473, 0x1, 0x1);
        gbc.writeMem(0xd1a6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2fa3);
        EXPECT(gbc.pc(), 0xd1a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a6), 0xcb);
        EXPECT(gbc.readMem(0xd1a7), 0x1b);
        // CB 1B 0271
        gbc.setState(0xe3ce, 0xe69c, 0x2aa0, 0x6c2a, 0x4421, 0x1598, 0x0, 0x0);
        gbc.writeMem(0xe3ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe69c);
        EXPECT(gbc.pc(), 0xe3d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ce), 0xcb);
        EXPECT(gbc.readMem(0xe3cf), 0x1b);
        // CB 1B 0272
        gbc.setState(0xd320, 0x1580, 0x2160, 0x3413, 0xd44e, 0x3296, 0x1, 0x0);
        gbc.writeMem(0xd320, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1580);
        EXPECT(gbc.pc(), 0xd322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd320), 0xcb);
        EXPECT(gbc.readMem(0xd321), 0x1b);
        // CB 1B 0273
        gbc.setState(0x7440, 0xcdaf, 0x8460, 0xfeb5, 0xe388, 0x7377, 0x0, 0x0);
        gbc.writeMem(0x7440, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xcdaf);
        EXPECT(gbc.pc(), 0x7442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0274
        gbc.setState(0xd44e, 0x73b1, 0xc0c0, 0x75b, 0x3e30, 0x9031, 0x1, 0x0);
        gbc.writeMem(0xd44e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x73b1);
        EXPECT(gbc.pc(), 0xd450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd44e), 0xcb);
        EXPECT(gbc.readMem(0xd44f), 0x1b);
        // CB 1B 0275
        gbc.setState(0x21c6, 0xeefd, 0xe010, 0xa987, 0x1bb7, 0x44d7, 0x1, 0x1);
        gbc.writeMem(0x21c6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xeefd);
        EXPECT(gbc.pc(), 0x21c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0276
        gbc.setState(0xae1a, 0x8500, 0xf650, 0x8d63, 0xd3e2, 0x741d, 0x1, 0x0);
        gbc.writeMem(0xae1a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8500);
        EXPECT(gbc.pc(), 0xae1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae1a), 0xcb);
        EXPECT(gbc.readMem(0xae1b), 0x1b);
        // CB 1B 0278
        gbc.setState(0xaae6, 0x4b5b, 0x5510, 0xf42d, 0x4b4f, 0xa558, 0x1, 0x1);
        gbc.writeMem(0xaae6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4b5b);
        EXPECT(gbc.pc(), 0xaae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae6), 0xcb);
        EXPECT(gbc.readMem(0xaae7), 0x1b);
        // CB 1B 0279
        gbc.setState(0x216a, 0x2754, 0xb890, 0xf7c8, 0xa8d7, 0x2e34, 0x0, 0x1);
        gbc.writeMem(0x216a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2754);
        EXPECT(gbc.pc(), 0x216c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 027A
        gbc.setState(0x56a3, 0xc257, 0xbfa0, 0xb33f, 0x8feb, 0x4751, 0x1, 0x0);
        gbc.writeMem(0x56a3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc257);
        EXPECT(gbc.pc(), 0x56a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 027B
        gbc.setState(0xb494, 0x2884, 0x37a0, 0x6e89, 0x27aa, 0xe83a, 0x0, 0x1);
        gbc.writeMem(0xb494, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2884);
        EXPECT(gbc.pc(), 0xb496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb494), 0xcb);
        EXPECT(gbc.readMem(0xb495), 0x1b);
        // CB 1B 027C
        gbc.setState(0x89f4, 0x2bd2, 0xda00, 0xa1d0, 0xd2b7, 0x28ce, 0x0, 0x0);
        gbc.writeMem(0x89f4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2bd2);
        EXPECT(gbc.pc(), 0x89f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89f4), 0xcb);
        EXPECT(gbc.readMem(0x89f5), 0x1b);
        // CB 1B 027D
        gbc.setState(0xb3e2, 0xa56b, 0x2590, 0x9804, 0x7599, 0x5d4b, 0x1, 0x1);
        gbc.writeMem(0xb3e2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa56b);
        EXPECT(gbc.pc(), 0xb3e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e2), 0xcb);
        EXPECT(gbc.readMem(0xb3e3), 0x1b);
        // CB 1B 027E
        gbc.setState(0x466e, 0xdcd8, 0x6120, 0xdc26, 0x2e65, 0xc903, 0x0, 0x1);
        gbc.writeMem(0x466e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xdcd8);
        EXPECT(gbc.pc(), 0x4670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 027F
        gbc.setState(0xa28e, 0xebbe, 0x7c00, 0xe4c9, 0xec99, 0x6f22, 0x0, 0x1);
        gbc.writeMem(0xa28e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xebbe);
        EXPECT(gbc.pc(), 0xa290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa28e), 0xcb);
        EXPECT(gbc.readMem(0xa28f), 0x1b);
        // CB 1B 0280
        gbc.setState(0xc076, 0xeca0, 0xb410, 0x8fff, 0x2bf3, 0xb2ca, 0x1, 0x1);
        gbc.writeMem(0xc076, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xeca0);
        EXPECT(gbc.pc(), 0xc078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc076), 0xcb);
        EXPECT(gbc.readMem(0xc077), 0x1b);
        // CB 1B 0281
        gbc.setState(0x71be, 0xe4a8, 0x73b0, 0x5744, 0x20ad, 0x26cc, 0x1, 0x0);
        gbc.writeMem(0x71be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe4a8);
        EXPECT(gbc.pc(), 0x71c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0282
        gbc.setState(0x8e21, 0xc596, 0x2b80, 0x7be9, 0xe105, 0xbeae, 0x0, 0x1);
        gbc.writeMem(0x8e21, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc596);
        EXPECT(gbc.pc(), 0x8e23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e21), 0xcb);
        EXPECT(gbc.readMem(0x8e22), 0x1b);
        // CB 1B 0283
        gbc.setState(0x8afc, 0xb277, 0x3c40, 0xbd95, 0x24b3, 0x8d39, 0x0, 0x1);
        gbc.writeMem(0x8afc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb277);
        EXPECT(gbc.pc(), 0x8afe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8afc), 0xcb);
        EXPECT(gbc.readMem(0x8afd), 0x1b);
        // CB 1B 0284
        gbc.setState(0x65c5, 0x16d3, 0xe060, 0x851a, 0xdbfc, 0xad54, 0x1, 0x1);
        gbc.writeMem(0x65c5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x16d3);
        EXPECT(gbc.pc(), 0x65c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0285
        gbc.setState(0x1742, 0x233a, 0x52b0, 0xfa42, 0x3cbc, 0xb1f9, 0x1, 0x0);
        gbc.writeMem(0x1742, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x233a);
        EXPECT(gbc.pc(), 0x1744);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0286
        gbc.setState(0x8155, 0x2b36, 0xced0, 0xbc18, 0x66dc, 0x8cde, 0x0, 0x1);
        gbc.writeMem(0x8155, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2b36);
        EXPECT(gbc.pc(), 0x8157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8155), 0xcb);
        EXPECT(gbc.readMem(0x8156), 0x1b);
        // CB 1B 0287
        gbc.setState(0xb2ef, 0xdc2e, 0x98e0, 0x9631, 0xd793, 0xaa3f, 0x0, 0x0);
        gbc.writeMem(0xb2ef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xdc2e);
        EXPECT(gbc.pc(), 0xb2f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ef), 0xcb);
        EXPECT(gbc.readMem(0xb2f0), 0x1b);
        // CB 1B 0288
        gbc.setState(0xb21b, 0x15ea, 0x2810, 0x931f, 0x9b68, 0xe112, 0x0, 0x1);
        gbc.writeMem(0xb21b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x15ea);
        EXPECT(gbc.pc(), 0xb21d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb21b), 0xcb);
        EXPECT(gbc.readMem(0xb21c), 0x1b);
        // CB 1B 028A
        gbc.setState(0x6a6c, 0x94df, 0xd7a0, 0xe30c, 0xd96a, 0x591d, 0x1, 0x0);
        gbc.writeMem(0x6a6c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x94df);
        EXPECT(gbc.pc(), 0x6a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 028B
        gbc.setState(0xa2f7, 0x49dd, 0x9c50, 0xb65d, 0x28d8, 0xff28, 0x0, 0x1);
        gbc.writeMem(0xa2f7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x49dd);
        EXPECT(gbc.pc(), 0xa2f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f7), 0xcb);
        EXPECT(gbc.readMem(0xa2f8), 0x1b);
        // CB 1B 028C
        gbc.setState(0x47b6, 0x74f7, 0x6600, 0xbe8a, 0x9d1a, 0x6de1, 0x1, 0x0);
        gbc.writeMem(0x47b6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x74f7);
        EXPECT(gbc.pc(), 0x47b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 028D
        gbc.setState(0x5c86, 0x27cc, 0xd7e0, 0xa1e7, 0xd7e5, 0x7bd6, 0x1, 0x0);
        gbc.writeMem(0x5c86, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x27cc);
        EXPECT(gbc.pc(), 0x5c88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 028F
        gbc.setState(0xac1b, 0x5e68, 0x6490, 0x940b, 0x8cdc, 0xf14b, 0x1, 0x1);
        gbc.writeMem(0xac1b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x5e68);
        EXPECT(gbc.pc(), 0xac1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac1b), 0xcb);
        EXPECT(gbc.readMem(0xac1c), 0x1b);
        // CB 1B 0290
        gbc.setState(0x45fa, 0x23bf, 0x2d40, 0xdf01, 0x589a, 0xbb6a, 0x0, 0x1);
        gbc.writeMem(0x45fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x23bf);
        EXPECT(gbc.pc(), 0x45fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0291
        gbc.setState(0x9d44, 0x10f5, 0x7d10, 0xdc59, 0x313f, 0x8dbb, 0x1, 0x0);
        gbc.writeMem(0x9d44, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x10f5);
        EXPECT(gbc.pc(), 0x9d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d44), 0xcb);
        EXPECT(gbc.readMem(0x9d45), 0x1b);
        // CB 1B 0292
        gbc.setState(0x740, 0x2e7, 0x4ee0, 0xbb5f, 0xec19, 0x2b6c, 0x1, 0x1);
        gbc.writeMem(0x740, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2e7);
        EXPECT(gbc.pc(), 0x742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0293
        gbc.setState(0xde52, 0xb7be, 0x41f0, 0xde72, 0xfffe, 0xb5f, 0x1, 0x1);
        gbc.writeMem(0xde52, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb7be);
        EXPECT(gbc.pc(), 0xde54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde52), 0xcb);
        EXPECT(gbc.readMem(0xde53), 0x1b);
        // CB 1B 0294
        gbc.setState(0xe316, 0x28e3, 0x2e70, 0x25b2, 0xb151, 0xca1, 0x0, 0x0);
        gbc.writeMem(0xe316, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x28e3);
        EXPECT(gbc.pc(), 0xe318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe316), 0xcb);
        EXPECT(gbc.readMem(0xe317), 0x1b);
        // CB 1B 0295
        gbc.setState(0x722, 0x531a, 0x28f0, 0x2773, 0x99ff, 0x74f9, 0x1, 0x1);
        gbc.writeMem(0x722, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x531a);
        EXPECT(gbc.pc(), 0x724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0296
        gbc.setState(0x8ca1, 0xd398, 0x5670, 0x1076, 0x2962, 0xb35d, 0x1, 0x1);
        gbc.writeMem(0x8ca1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd398);
        EXPECT(gbc.pc(), 0x8ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca1), 0xcb);
        EXPECT(gbc.readMem(0x8ca2), 0x1b);
        // CB 1B 0297
        gbc.setState(0x878a, 0x6029, 0xf9c0, 0xbec2, 0xa2e8, 0xf5e3, 0x0, 0x1);
        gbc.writeMem(0x878a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6029);
        EXPECT(gbc.pc(), 0x878c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x878a), 0xcb);
        EXPECT(gbc.readMem(0x878b), 0x1b);
        // CB 1B 0298
        gbc.setState(0x9186, 0xbb90, 0x6090, 0x4c91, 0xe19c, 0xc195, 0x0, 0x0);
        gbc.writeMem(0x9186, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbb90);
        EXPECT(gbc.pc(), 0x9188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9186), 0xcb);
        EXPECT(gbc.readMem(0x9187), 0x1b);
        // CB 1B 0299
        gbc.setState(0xc3c1, 0xb962, 0x26f0, 0x7270, 0xc4aa, 0x22bb, 0x0, 0x0);
        gbc.writeMem(0xc3c1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb962);
        EXPECT(gbc.pc(), 0xc3c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c1), 0xcb);
        EXPECT(gbc.readMem(0xc3c2), 0x1b);
        // CB 1B 029A
        gbc.setState(0x50b3, 0x86c3, 0xcd20, 0x2018, 0x71b8, 0xd661, 0x1, 0x1);
        gbc.writeMem(0x50b3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x86c3);
        EXPECT(gbc.pc(), 0x50b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 029B
        gbc.setState(0xd7c4, 0xdc84, 0x1a0, 0x748d, 0x9b0d, 0x8672, 0x0, 0x0);
        gbc.writeMem(0xd7c4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xdc84);
        EXPECT(gbc.pc(), 0xd7c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7c4), 0xcb);
        EXPECT(gbc.readMem(0xd7c5), 0x1b);
        // CB 1B 029C
        gbc.setState(0x84df, 0x6967, 0x9070, 0x74dd, 0xd44c, 0xcbda, 0x1, 0x1);
        gbc.writeMem(0x84df, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6967);
        EXPECT(gbc.pc(), 0x84e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84df), 0xcb);
        EXPECT(gbc.readMem(0x84e0), 0x1b);
        // CB 1B 029D
        gbc.setState(0xe08b, 0x697d, 0x84d0, 0x3f2b, 0xac7e, 0xd297, 0x1, 0x0);
        gbc.writeMem(0xe08b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x697d);
        EXPECT(gbc.pc(), 0xe08d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe08b), 0xcb);
        EXPECT(gbc.readMem(0xe08c), 0x1b);
        // CB 1B 029E
        gbc.setState(0x606c, 0xbc8c, 0x6af0, 0xbc58, 0xb7f3, 0xca6f, 0x0, 0x1);
        gbc.writeMem(0x606c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xbc8c);
        EXPECT(gbc.pc(), 0x606e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 029F
        gbc.setState(0x7230, 0xa079, 0x4d30, 0xffe9, 0xcc5e, 0xd160, 0x1, 0x1);
        gbc.writeMem(0x7230, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa079);
        EXPECT(gbc.pc(), 0x7232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02A0
        gbc.setState(0x5f27, 0xc39d, 0x60e0, 0xec7, 0xe225, 0x81ea, 0x0, 0x1);
        gbc.writeMem(0x5f27, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc39d);
        EXPECT(gbc.pc(), 0x5f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02A1
        gbc.setState(0xe914, 0x9b5b, 0x5550, 0x23bf, 0x37b9, 0x4fd0, 0x0, 0x0);
        gbc.writeMem(0xe914, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9b5b);
        EXPECT(gbc.pc(), 0xe916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe914), 0xcb);
        EXPECT(gbc.readMem(0xe915), 0x1b);
        // CB 1B 02A2
        gbc.setState(0x4362, 0x8b7c, 0x75c0, 0x7b2c, 0xf925, 0xa4cf, 0x1, 0x1);
        gbc.writeMem(0x4362, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8b7c);
        EXPECT(gbc.pc(), 0x4364);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02A3
        gbc.setState(0x6646, 0xfd7, 0x79c0, 0xe3d8, 0xed4e, 0x4ace, 0x1, 0x1);
        gbc.writeMem(0x6646, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfd7);
        EXPECT(gbc.pc(), 0x6648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02A4
        gbc.setState(0x2452, 0x3b9, 0xcc0, 0xfc12, 0x68c0, 0x13d2, 0x1, 0x1);
        gbc.writeMem(0x2452, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3b9);
        EXPECT(gbc.pc(), 0x2454);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02A5
        gbc.setState(0xe2ad, 0x5bac, 0xb8f0, 0xfb3, 0x998c, 0xe98d, 0x1, 0x1);
        gbc.writeMem(0xe2ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5bac);
        EXPECT(gbc.pc(), 0xe2af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2ad), 0xcb);
        EXPECT(gbc.readMem(0xe2ae), 0x1b);
        // CB 1B 02A6
        gbc.setState(0xbd95, 0x1cca, 0xa7f0, 0xb4f4, 0x8003, 0x9ebf, 0x0, 0x1);
        gbc.writeMem(0xbd95, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1cca);
        EXPECT(gbc.pc(), 0xbd97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd95), 0xcb);
        EXPECT(gbc.readMem(0xbd96), 0x1b);
        // CB 1B 02A7
        gbc.setState(0x3f2c, 0x8401, 0x1750, 0xb05d, 0x7010, 0x30e6, 0x0, 0x0);
        gbc.writeMem(0x3f2c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8401);
        EXPECT(gbc.pc(), 0x3f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02A8
        gbc.setState(0x77c2, 0xf32, 0x22a0, 0x9401, 0x1d53, 0xcae8, 0x1, 0x0);
        gbc.writeMem(0x77c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf32);
        EXPECT(gbc.pc(), 0x77c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02A9
        gbc.setState(0x5dee, 0xee6b, 0x2e20, 0xb627, 0x11c1, 0x4b54, 0x0, 0x1);
        gbc.writeMem(0x5dee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xee6b);
        EXPECT(gbc.pc(), 0x5df0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02AA
        gbc.setState(0xc830, 0x625, 0xa8c0, 0x568c, 0xd5e0, 0x958b, 0x0, 0x1);
        gbc.writeMem(0xc830, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x625);
        EXPECT(gbc.pc(), 0xc832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc830), 0xcb);
        EXPECT(gbc.readMem(0xc831), 0x1b);
        // CB 1B 02AB
        gbc.setState(0x2ad4, 0x5894, 0x3640, 0xcc21, 0x14be, 0x3f84, 0x1, 0x0);
        gbc.writeMem(0x2ad4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5894);
        EXPECT(gbc.pc(), 0x2ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02AC
        gbc.setState(0x85a3, 0x61d3, 0x1ba0, 0x1fe8, 0x8477, 0x3696, 0x1, 0x1);
        gbc.writeMem(0x85a3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x61d3);
        EXPECT(gbc.pc(), 0x85a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a3), 0xcb);
        EXPECT(gbc.readMem(0x85a4), 0x1b);
        // CB 1B 02AD
        gbc.setState(0xdfc0, 0x1395, 0x2080, 0xc78d, 0xdb45, 0xf7cb, 0x0, 0x1);
        gbc.writeMem(0xdfc0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1395);
        EXPECT(gbc.pc(), 0xdfc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfc0), 0xcb);
        EXPECT(gbc.readMem(0xdfc1), 0x1b);
        // CB 1B 02AE
        gbc.setState(0xe0ec, 0x2153, 0x2a80, 0xcb43, 0x5f22, 0xfd3b, 0x1, 0x1);
        gbc.writeMem(0xe0ec, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2153);
        EXPECT(gbc.pc(), 0xe0ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ec), 0xcb);
        EXPECT(gbc.readMem(0xe0ed), 0x1b);
        // CB 1B 02AF
        gbc.setState(0xbee7, 0x5c11, 0xe8b0, 0x84ce, 0xb867, 0xc1cb, 0x0, 0x1);
        gbc.writeMem(0xbee7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5c11);
        EXPECT(gbc.pc(), 0xbee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbee7), 0xcb);
        EXPECT(gbc.readMem(0xbee8), 0x1b);
        // CB 1B 02B0
        gbc.setState(0x539e, 0x951d, 0xd640, 0x7891, 0x3196, 0xb436, 0x1, 0x1);
        gbc.writeMem(0x539e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x951d);
        EXPECT(gbc.pc(), 0x53a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02B2
        gbc.setState(0x8658, 0x874d, 0xb980, 0x2cea, 0xf83b, 0xe3bc, 0x1, 0x0);
        gbc.writeMem(0x8658, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x874d);
        EXPECT(gbc.pc(), 0x865a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8658), 0xcb);
        EXPECT(gbc.readMem(0x8659), 0x1b);
        // CB 1B 02B3
        gbc.setState(0x9800, 0xc999, 0xef20, 0x838d, 0x7e09, 0xc842, 0x1, 0x1);
        gbc.writeMem(0x9800, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc999);
        EXPECT(gbc.pc(), 0x9802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9800), 0xcb);
        EXPECT(gbc.readMem(0x9801), 0x1b);
        // CB 1B 02B4
        gbc.setState(0x9a69, 0xd189, 0x3b90, 0xaf1d, 0xb577, 0x33a0, 0x1, 0x0);
        gbc.writeMem(0x9a69, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd189);
        EXPECT(gbc.pc(), 0x9a6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a69), 0xcb);
        EXPECT(gbc.readMem(0x9a6a), 0x1b);
        // CB 1B 02B5
        gbc.setState(0xb289, 0xd020, 0x4320, 0x56b1, 0x33f2, 0xb584, 0x1, 0x0);
        gbc.writeMem(0xb289, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd020);
        EXPECT(gbc.pc(), 0xb28b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb289), 0xcb);
        EXPECT(gbc.readMem(0xb28a), 0x1b);
        // CB 1B 02B6
        gbc.setState(0xad4a, 0x4b0b, 0x3cd0, 0x4275, 0x6d1c, 0x3b2b, 0x0, 0x0);
        gbc.writeMem(0xad4a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x4b0b);
        EXPECT(gbc.pc(), 0xad4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4a), 0xcb);
        EXPECT(gbc.readMem(0xad4b), 0x1b);
        // CB 1B 02B7
        gbc.setState(0x8f14, 0x2d08, 0x8b40, 0x2204, 0x48bd, 0x6cd0, 0x1, 0x0);
        gbc.writeMem(0x8f14, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2d08);
        EXPECT(gbc.pc(), 0x8f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f14), 0xcb);
        EXPECT(gbc.readMem(0x8f15), 0x1b);
        // CB 1B 02B8
        gbc.setState(0xce26, 0xf7e3, 0xd190, 0x1109, 0x3c26, 0xb8dc, 0x0, 0x0);
        gbc.writeMem(0xce26, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf7e3);
        EXPECT(gbc.pc(), 0xce28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce26), 0xcb);
        EXPECT(gbc.readMem(0xce27), 0x1b);
        // CB 1B 02B9
        gbc.setState(0x63d, 0x694c, 0xecb0, 0xe1bd, 0x9ed9, 0xba09, 0x0, 0x0);
        gbc.writeMem(0x63d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x694c);
        EXPECT(gbc.pc(), 0x63f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02BA
        gbc.setState(0xbc68, 0x2664, 0xc0f0, 0x511, 0xd77e, 0xd6b6, 0x1, 0x0);
        gbc.writeMem(0xbc68, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2664);
        EXPECT(gbc.pc(), 0xbc6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc68), 0xcb);
        EXPECT(gbc.readMem(0xbc69), 0x1b);
        // CB 1B 02BB
        gbc.setState(0xc046, 0x86a5, 0x8d0, 0xcf3d, 0x5b9, 0x4e58, 0x0, 0x1);
        gbc.writeMem(0xc046, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x86a5);
        EXPECT(gbc.pc(), 0xc048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc046), 0xcb);
        EXPECT(gbc.readMem(0xc047), 0x1b);
        // CB 1B 02BC
        gbc.setState(0xd719, 0xc2ec, 0x37d0, 0x3423, 0x3d6d, 0xcf0b, 0x0, 0x0);
        gbc.writeMem(0xd719, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc2ec);
        EXPECT(gbc.pc(), 0xd71b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd719), 0xcb);
        EXPECT(gbc.readMem(0xd71a), 0x1b);
        // CB 1B 02BD
        gbc.setState(0xe10c, 0xf2c, 0x5b50, 0x4725, 0x1a7, 0xe01c, 0x1, 0x1);
        gbc.writeMem(0xe10c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf2c);
        EXPECT(gbc.pc(), 0xe10e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe10c), 0xcb);
        EXPECT(gbc.readMem(0xe10d), 0x1b);
        // CB 1B 02BE
        gbc.setState(0x7685, 0x33cb, 0x9280, 0x795b, 0xf754, 0x3067, 0x1, 0x1);
        gbc.writeMem(0x7685, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x33cb);
        EXPECT(gbc.pc(), 0x7687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02BF
        gbc.setState(0xd7dc, 0x9add, 0x6d0, 0xaa6, 0xf827, 0x65c9, 0x1, 0x0);
        gbc.writeMem(0xd7dc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9add);
        EXPECT(gbc.pc(), 0xd7de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7dc), 0xcb);
        EXPECT(gbc.readMem(0xd7dd), 0x1b);
        // CB 1B 02C0
        gbc.setState(0x95c9, 0x17df, 0x2070, 0x6aff, 0xa539, 0x3011, 0x0, 0x0);
        gbc.writeMem(0x95c9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x17df);
        EXPECT(gbc.pc(), 0x95cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95c9), 0xcb);
        EXPECT(gbc.readMem(0x95ca), 0x1b);
        // CB 1B 02C1
        gbc.setState(0x5407, 0x6c9b, 0x1c40, 0x9c66, 0xed67, 0xbef5, 0x0, 0x1);
        gbc.writeMem(0x5407, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6c9b);
        EXPECT(gbc.pc(), 0x5409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02C2
        gbc.setState(0xe3e3, 0xdc8, 0x90f0, 0xe37, 0xa999, 0x9bd2, 0x0, 0x1);
        gbc.writeMem(0xe3e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdc8);
        EXPECT(gbc.pc(), 0xe3e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3e3), 0xcb);
        EXPECT(gbc.readMem(0xe3e4), 0x1b);
        // CB 1B 02C3
        gbc.setState(0x564c, 0x72c6, 0xa6f0, 0x9f72, 0x30, 0x5bbb, 0x0, 0x0);
        gbc.writeMem(0x564c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x72c6);
        EXPECT(gbc.pc(), 0x564e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02C4
        gbc.setState(0xd7c8, 0x238c, 0x1780, 0x1432, 0xc92c, 0x8b00, 0x1, 0x1);
        gbc.writeMem(0xd7c8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x238c);
        EXPECT(gbc.pc(), 0xd7ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7c8), 0xcb);
        EXPECT(gbc.readMem(0xd7c9), 0x1b);
        // CB 1B 02C5
        gbc.setState(0x6de7, 0x60cc, 0xe420, 0x513b, 0x4fb8, 0xb4a1, 0x1, 0x1);
        gbc.writeMem(0x6de7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x60cc);
        EXPECT(gbc.pc(), 0x6de9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02C6
        gbc.setState(0xa1ad, 0x7293, 0x25a0, 0x4cc1, 0xd620, 0xf86e, 0x0, 0x0);
        gbc.writeMem(0xa1ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7293);
        EXPECT(gbc.pc(), 0xa1af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ad), 0xcb);
        EXPECT(gbc.readMem(0xa1ae), 0x1b);
        // CB 1B 02C7
        gbc.setState(0x658e, 0x6c31, 0xb9f0, 0xd2b5, 0xc6e4, 0xcb58, 0x1, 0x1);
        gbc.writeMem(0x658e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6c31);
        EXPECT(gbc.pc(), 0x6590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02C8
        gbc.setState(0x80ef, 0xd223, 0xb590, 0x3bc6, 0x61b4, 0xc521, 0x1, 0x1);
        gbc.writeMem(0x80ef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd223);
        EXPECT(gbc.pc(), 0x80f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ef), 0xcb);
        EXPECT(gbc.readMem(0x80f0), 0x1b);
        // CB 1B 02C9
        gbc.setState(0x606, 0xd0c7, 0x9960, 0x2252, 0x440a, 0xe72b, 0x0, 0x1);
        gbc.writeMem(0x606, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd0c7);
        EXPECT(gbc.pc(), 0x608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02CB
        gbc.setState(0xb1e5, 0xb99b, 0x9f0, 0x81a2, 0x55d6, 0x510a, 0x0, 0x0);
        gbc.writeMem(0xb1e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb99b);
        EXPECT(gbc.pc(), 0xb1e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e5), 0xcb);
        EXPECT(gbc.readMem(0xb1e6), 0x1b);
        // CB 1B 02CC
        gbc.setState(0xc036, 0xf2fa, 0xbb60, 0x8980, 0x6727, 0x948e, 0x0, 0x1);
        gbc.writeMem(0xc036, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf2fa);
        EXPECT(gbc.pc(), 0xc038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc036), 0xcb);
        EXPECT(gbc.readMem(0xc037), 0x1b);
        // CB 1B 02CD
        gbc.setState(0x6623, 0xc80b, 0xbf0, 0xcd52, 0x364a, 0x6ed9, 0x0, 0x1);
        gbc.writeMem(0x6623, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc80b);
        EXPECT(gbc.pc(), 0x6625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02CE
        gbc.setState(0xd8c7, 0xc190, 0x8da0, 0xf937, 0x1a92, 0x957a, 0x0, 0x1);
        gbc.writeMem(0xd8c7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc190);
        EXPECT(gbc.pc(), 0xd8c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8c7), 0xcb);
        EXPECT(gbc.readMem(0xd8c8), 0x1b);
        // CB 1B 02CF
        gbc.setState(0xeb39, 0x58a, 0x6f40, 0x94e8, 0x343c, 0xaf34, 0x1, 0x0);
        gbc.writeMem(0xeb39, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x58a);
        EXPECT(gbc.pc(), 0xeb3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb39), 0xcb);
        EXPECT(gbc.readMem(0xeb3a), 0x1b);
        // CB 1B 02D0
        gbc.setState(0x1a10, 0x448d, 0x9260, 0x377, 0x1be8, 0x9ac, 0x1, 0x0);
        gbc.writeMem(0x1a10, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x448d);
        EXPECT(gbc.pc(), 0x1a12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02D1
        gbc.setState(0x2776, 0x99fb, 0x8fd0, 0xded1, 0x5b3d, 0x7aa8, 0x1, 0x0);
        gbc.writeMem(0x2776, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x99fb);
        EXPECT(gbc.pc(), 0x2778);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02D2
        gbc.setState(0xd430, 0x1915, 0x60, 0x64b6, 0xc0b0, 0xacad, 0x0, 0x0);
        gbc.writeMem(0xd430, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1915);
        EXPECT(gbc.pc(), 0xd432);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd430), 0xcb);
        EXPECT(gbc.readMem(0xd431), 0x1b);
        // CB 1B 02D3
        gbc.setState(0x78dd, 0x84fb, 0x9140, 0x86fe, 0x5bdd, 0x26ba, 0x1, 0x1);
        gbc.writeMem(0x78dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x84fb);
        EXPECT(gbc.pc(), 0x78df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02D4
        gbc.setState(0x20e1, 0x90bd, 0xcbc0, 0x3ec9, 0x8f2e, 0x8026, 0x0, 0x0);
        gbc.writeMem(0x20e1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x90bd);
        EXPECT(gbc.pc(), 0x20e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02D5
        gbc.setState(0x370b, 0xc53, 0xfe20, 0xb1c2, 0x539a, 0xe3b7, 0x1, 0x1);
        gbc.writeMem(0x370b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc53);
        EXPECT(gbc.pc(), 0x370d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02D6
        gbc.setState(0xef3, 0x6753, 0x9d00, 0x6dc1, 0x80f8, 0x1972, 0x1, 0x0);
        gbc.writeMem(0xef3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6753);
        EXPECT(gbc.pc(), 0xef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02D7
        gbc.setState(0xae06, 0x7842, 0x1a80, 0x9a87, 0x747a, 0x26cd, 0x1, 0x0);
        gbc.writeMem(0xae06, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7842);
        EXPECT(gbc.pc(), 0xae08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae06), 0xcb);
        EXPECT(gbc.readMem(0xae07), 0x1b);
        // CB 1B 02D8
        gbc.setState(0xced9, 0x318d, 0xad40, 0x1077, 0x77fb, 0xfb83, 0x0, 0x0);
        gbc.writeMem(0xced9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x318d);
        EXPECT(gbc.pc(), 0xcedb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced9), 0xcb);
        EXPECT(gbc.readMem(0xceda), 0x1b);
        // CB 1B 02D9
        gbc.setState(0x261a, 0x17fb, 0xdfc0, 0xdad5, 0xdb5, 0x9861, 0x1, 0x0);
        gbc.writeMem(0x261a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x17fb);
        EXPECT(gbc.pc(), 0x261c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02DC
        gbc.setState(0xc783, 0x855a, 0x2d50, 0xf756, 0x53dc, 0x45b2, 0x1, 0x0);
        gbc.writeMem(0xc783, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x855a);
        EXPECT(gbc.pc(), 0xc785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc783), 0xcb);
        EXPECT(gbc.readMem(0xc784), 0x1b);
        // CB 1B 02DD
        gbc.setState(0x1a00, 0x5f90, 0xb360, 0x4d42, 0x488b, 0xd447, 0x1, 0x0);
        gbc.writeMem(0x1a00, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5f90);
        EXPECT(gbc.pc(), 0x1a02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02DE
        gbc.setState(0x5385, 0xecce, 0x8c70, 0x4269, 0xb824, 0xa46c, 0x1, 0x1);
        gbc.writeMem(0x5385, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xecce);
        EXPECT(gbc.pc(), 0x5387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02DF
        gbc.setState(0xb3ee, 0xab57, 0x3630, 0x72e6, 0xc45f, 0x49be, 0x0, 0x0);
        gbc.writeMem(0xb3ee, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xab57);
        EXPECT(gbc.pc(), 0xb3f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3ee), 0xcb);
        EXPECT(gbc.readMem(0xb3ef), 0x1b);
        // CB 1B 02E0
        gbc.setState(0x6bbb, 0x711d, 0xa200, 0x8373, 0x113b, 0x38d2, 0x0, 0x1);
        gbc.writeMem(0x6bbb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x711d);
        EXPECT(gbc.pc(), 0x6bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02E1
        gbc.setState(0xaf8e, 0x937a, 0xa50, 0x3b6c, 0x3eef, 0xf607, 0x0, 0x0);
        gbc.writeMem(0xaf8e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x937a);
        EXPECT(gbc.pc(), 0xaf90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf8e), 0xcb);
        EXPECT(gbc.readMem(0xaf8f), 0x1b);
        // CB 1B 02E2
        gbc.setState(0x4605, 0x134c, 0x3dc0, 0x3911, 0x65e1, 0x5255, 0x1, 0x0);
        gbc.writeMem(0x4605, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x134c);
        EXPECT(gbc.pc(), 0x4607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02E3
        gbc.setState(0x12b4, 0x1078, 0x6a10, 0x997b, 0xdb62, 0x1286, 0x1, 0x1);
        gbc.writeMem(0x12b4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1078);
        EXPECT(gbc.pc(), 0x12b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02E4
        gbc.setState(0xd3e0, 0x674f, 0xab30, 0x2f2f, 0x9880, 0x4265, 0x1, 0x0);
        gbc.writeMem(0xd3e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x674f);
        EXPECT(gbc.pc(), 0xd3e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e0), 0xcb);
        EXPECT(gbc.readMem(0xd3e1), 0x1b);
        // CB 1B 02E5
        gbc.setState(0x4318, 0x8aa3, 0x5420, 0x393e, 0xb478, 0x41d9, 0x1, 0x0);
        gbc.writeMem(0x4318, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8aa3);
        EXPECT(gbc.pc(), 0x431a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02E6
        gbc.setState(0xf01, 0xe728, 0x5660, 0x3bd2, 0xbe28, 0x93f8, 0x0, 0x1);
        gbc.writeMem(0xf01, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe728);
        EXPECT(gbc.pc(), 0xf03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02E7
        gbc.setState(0x3862, 0x2eda, 0xaec0, 0x8faa, 0x5f89, 0x1e8c, 0x0, 0x0);
        gbc.writeMem(0x3862, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2eda);
        EXPECT(gbc.pc(), 0x3864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02E8
        gbc.setState(0xd2c8, 0x644d, 0xdc40, 0x83a4, 0x1417, 0x8526, 0x0, 0x1);
        gbc.writeMem(0xd2c8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x644d);
        EXPECT(gbc.pc(), 0xd2ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2c8), 0xcb);
        EXPECT(gbc.readMem(0xd2c9), 0x1b);
        // CB 1B 02E9
        gbc.setState(0xc0e5, 0x2616, 0xde0, 0x8925, 0x1936, 0xf9ed, 0x0, 0x0);
        gbc.writeMem(0xc0e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2616);
        EXPECT(gbc.pc(), 0xc0e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0e5), 0xcb);
        EXPECT(gbc.readMem(0xc0e6), 0x1b);
        // CB 1B 02EA
        gbc.setState(0x3b4c, 0x8bfb, 0x6720, 0xf3b7, 0x9fc6, 0x10cc, 0x1, 0x1);
        gbc.writeMem(0x3b4c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8bfb);
        EXPECT(gbc.pc(), 0x3b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02EB
        gbc.setState(0x550a, 0x2fda, 0xdd90, 0x1db9, 0xb352, 0x87e, 0x1, 0x1);
        gbc.writeMem(0x550a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2fda);
        EXPECT(gbc.pc(), 0x550c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02EC
        gbc.setState(0x96a9, 0x738d, 0x7b80, 0xf49a, 0x4e8a, 0x5736, 0x0, 0x1);
        gbc.writeMem(0x96a9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x738d);
        EXPECT(gbc.pc(), 0x96ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a9), 0xcb);
        EXPECT(gbc.readMem(0x96aa), 0x1b);
        // CB 1B 02ED
        gbc.setState(0x722, 0x14c2, 0x7980, 0xabf8, 0xe36a, 0x1c19, 0x1, 0x0);
        gbc.writeMem(0x722, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x14c2);
        EXPECT(gbc.pc(), 0x724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02EE
        gbc.setState(0xb3e1, 0xb7c4, 0x9210, 0xe3f4, 0x8703, 0xec7e, 0x0, 0x1);
        gbc.writeMem(0xb3e1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb7c4);
        EXPECT(gbc.pc(), 0xb3e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e1), 0xcb);
        EXPECT(gbc.readMem(0xb3e2), 0x1b);
        // CB 1B 02EF
        gbc.setState(0xab74, 0x4dd6, 0x5310, 0x412, 0xb3ce, 0x81ea, 0x1, 0x0);
        gbc.writeMem(0xab74, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4dd6);
        EXPECT(gbc.pc(), 0xab76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab74), 0xcb);
        EXPECT(gbc.readMem(0xab75), 0x1b);
        // CB 1B 02F0
        gbc.setState(0xd576, 0xffa3, 0xa0, 0x3647, 0x9a68, 0x1b92, 0x0, 0x1);
        gbc.writeMem(0xd576, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xffa3);
        EXPECT(gbc.pc(), 0xd578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd576), 0xcb);
        EXPECT(gbc.readMem(0xd577), 0x1b);
        // CB 1B 02F1
        gbc.setState(0x46d5, 0x7c14, 0x7e0, 0x72ab, 0xdd31, 0x73e6, 0x0, 0x0);
        gbc.writeMem(0x46d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7c14);
        EXPECT(gbc.pc(), 0x46d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02F2
        gbc.setState(0x5a7f, 0x55bd, 0x29d0, 0x99f7, 0xcfc5, 0xd58f, 0x1, 0x0);
        gbc.writeMem(0x5a7f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x55bd);
        EXPECT(gbc.pc(), 0x5a81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02F3
        gbc.setState(0xa391, 0x6f67, 0x3870, 0xc337, 0xdfe5, 0xba6b, 0x0, 0x1);
        gbc.writeMem(0xa391, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6f67);
        EXPECT(gbc.pc(), 0xa393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa391), 0xcb);
        EXPECT(gbc.readMem(0xa392), 0x1b);
        // CB 1B 02F4
        gbc.setState(0x1c3b, 0xb9cd, 0xba50, 0xc99c, 0x3b22, 0xcd82, 0x0, 0x1);
        gbc.writeMem(0x1c3b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb9cd);
        EXPECT(gbc.pc(), 0x1c3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 02F5
        gbc.setState(0xa311, 0x4411, 0xf480, 0x9ac4, 0x5fe4, 0x2a69, 0x0, 0x1);
        gbc.writeMem(0xa311, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4411);
        EXPECT(gbc.pc(), 0xa313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa311), 0xcb);
        EXPECT(gbc.readMem(0xa312), 0x1b);
        // CB 1B 02F6
        gbc.setState(0xc233, 0xd464, 0xe260, 0x5380, 0x9b3d, 0x8726, 0x1, 0x0);
        gbc.writeMem(0xc233, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd464);
        EXPECT(gbc.pc(), 0xc235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc233), 0xcb);
        EXPECT(gbc.readMem(0xc234), 0x1b);
        // CB 1B 02F7
        gbc.setState(0x5a72, 0xe37b, 0x2a50, 0x37a2, 0x9b87, 0x980, 0x0, 0x0);
        gbc.writeMem(0x5a72, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe37b);
        EXPECT(gbc.pc(), 0x5a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02F8
        gbc.setState(0x4036, 0x8530, 0x61a0, 0x4fda, 0xb405, 0x1300, 0x0, 0x0);
        gbc.writeMem(0x4036, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8530);
        EXPECT(gbc.pc(), 0x4038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 02F9
        gbc.setState(0xe06c, 0x5645, 0x390, 0x14e0, 0x4191, 0x439c, 0x1, 0x0);
        gbc.writeMem(0xe06c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5645);
        EXPECT(gbc.pc(), 0xe06e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe06c), 0xcb);
        EXPECT(gbc.readMem(0xe06d), 0x1b);
        // CB 1B 02FB
        gbc.setState(0xe5fb, 0xb2c2, 0xd040, 0xf317, 0xd788, 0x8681, 0x0, 0x0);
        gbc.writeMem(0xe5fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb2c2);
        EXPECT(gbc.pc(), 0xe5fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5fb), 0xcb);
        EXPECT(gbc.readMem(0xe5fc), 0x1b);
        // CB 1B 02FC
        gbc.setState(0xe6ce, 0x7007, 0xd370, 0x74dc, 0xa6a, 0x526e, 0x0, 0x0);
        gbc.writeMem(0xe6ce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7007);
        EXPECT(gbc.pc(), 0xe6d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ce), 0xcb);
        EXPECT(gbc.readMem(0xe6cf), 0x1b);
        // CB 1B 02FD
        gbc.setState(0xc401, 0x4818, 0x14d0, 0x8dbb, 0xc6e0, 0x4070, 0x0, 0x1);
        gbc.writeMem(0xc401, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4818);
        EXPECT(gbc.pc(), 0xc403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc401), 0xcb);
        EXPECT(gbc.readMem(0xc402), 0x1b);
        // CB 1B 02FE
        gbc.setState(0x99aa, 0x99a7, 0xa400, 0x1811, 0xf0e2, 0xee4c, 0x1, 0x0);
        gbc.writeMem(0x99aa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x99a7);
        EXPECT(gbc.pc(), 0x99ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99aa), 0xcb);
        EXPECT(gbc.readMem(0x99ab), 0x1b);
        // CB 1B 02FF
        gbc.setState(0x7197, 0x5972, 0x9ea0, 0xbadc, 0x590d, 0xf4d6, 0x1, 0x1);
        gbc.writeMem(0x7197, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5972);
        EXPECT(gbc.pc(), 0x7199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0300
        gbc.setState(0x33da, 0xbd62, 0xdcb0, 0xcc8c, 0x44bf, 0xfe26, 0x1, 0x0);
        gbc.writeMem(0x33da, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xbd62);
        EXPECT(gbc.pc(), 0x33dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0301
        gbc.setState(0x11b, 0x1f23, 0xd60, 0x56f1, 0x63b1, 0x6783, 0x1, 0x0);
        gbc.writeMem(0x11b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1f23);
        EXPECT(gbc.pc(), 0x11d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0302
        gbc.setState(0xbcb8, 0xd778, 0x8820, 0xe8ef, 0xb7d2, 0x3fd1, 0x1, 0x0);
        gbc.writeMem(0xbcb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd778);
        EXPECT(gbc.pc(), 0xbcba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb8), 0xcb);
        EXPECT(gbc.readMem(0xbcb9), 0x1b);
        // CB 1B 0303
        gbc.setState(0xe920, 0x9c41, 0xa600, 0x664c, 0x72da, 0xf3d3, 0x1, 0x1);
        gbc.writeMem(0xe920, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9c41);
        EXPECT(gbc.pc(), 0xe922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe920), 0xcb);
        EXPECT(gbc.readMem(0xe921), 0x1b);
        // CB 1B 0304
        gbc.setState(0x8dbe, 0x47e8, 0xf970, 0xf8f5, 0x67, 0xf447, 0x1, 0x0);
        gbc.writeMem(0x8dbe, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x47e8);
        EXPECT(gbc.pc(), 0x8dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dbe), 0xcb);
        EXPECT(gbc.readMem(0x8dbf), 0x1b);
        // CB 1B 0305
        gbc.setState(0x425e, 0x78ba, 0x9460, 0x4211, 0x74db, 0x6384, 0x1, 0x0);
        gbc.writeMem(0x425e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x78ba);
        EXPECT(gbc.pc(), 0x4260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0306
        gbc.setState(0x4be, 0x8f57, 0xfdf0, 0xcf56, 0xf0dc, 0xd97c, 0x0, 0x1);
        gbc.writeMem(0x4be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x8f57);
        EXPECT(gbc.pc(), 0x4c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0307
        gbc.setState(0x8f, 0xfe55, 0xc830, 0x569d, 0x2679, 0x69ab, 0x1, 0x0);
        gbc.writeMem(0x8f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xfe55);
        EXPECT(gbc.pc(), 0x91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0308
        gbc.setState(0x3a23, 0xf357, 0x45c0, 0xe614, 0xd0a, 0x31b9, 0x0, 0x0);
        gbc.writeMem(0x3a23, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf357);
        EXPECT(gbc.pc(), 0x3a25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0309
        gbc.setState(0x1c87, 0x7982, 0x1cb0, 0xc97f, 0x7156, 0x10af, 0x0, 0x1);
        gbc.writeMem(0x1c87, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7982);
        EXPECT(gbc.pc(), 0x1c89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 030B
        gbc.setState(0xda64, 0xefaa, 0x7940, 0x7c7e, 0x5926, 0xeea9, 0x1, 0x1);
        gbc.writeMem(0xda64, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xefaa);
        EXPECT(gbc.pc(), 0xda66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda64), 0xcb);
        EXPECT(gbc.readMem(0xda65), 0x1b);
        // CB 1B 030C
        gbc.setState(0x1706, 0xead1, 0xa670, 0x91f3, 0xefb9, 0xaa35, 0x1, 0x1);
        gbc.writeMem(0x1706, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xead1);
        EXPECT(gbc.pc(), 0x1708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 030E
        gbc.setState(0x914b, 0x1277, 0xe470, 0x9de0, 0xf1f6, 0x2710, 0x0, 0x0);
        gbc.writeMem(0x914b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1277);
        EXPECT(gbc.pc(), 0x914d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914b), 0xcb);
        EXPECT(gbc.readMem(0x914c), 0x1b);
        // CB 1B 030F
        gbc.setState(0x99f7, 0x7e34, 0x2e30, 0x8aed, 0x5490, 0x60be, 0x0, 0x1);
        gbc.writeMem(0x99f7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7e34);
        EXPECT(gbc.pc(), 0x99f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f7), 0xcb);
        EXPECT(gbc.readMem(0x99f8), 0x1b);
        // CB 1B 0310
        gbc.setState(0x9f1d, 0x2380, 0xc5c0, 0x731c, 0xf665, 0xebc2, 0x0, 0x1);
        gbc.writeMem(0x9f1d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2380);
        EXPECT(gbc.pc(), 0x9f1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f1d), 0xcb);
        EXPECT(gbc.readMem(0x9f1e), 0x1b);
        // CB 1B 0311
        gbc.setState(0x15a9, 0xc83e, 0x4c70, 0x5153, 0x66fb, 0x630e, 0x1, 0x1);
        gbc.writeMem(0x15a9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc83e);
        EXPECT(gbc.pc(), 0x15ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0312
        gbc.setState(0x2744, 0xd89e, 0x8a80, 0xa0db, 0x5b2c, 0x621c, 0x0, 0x0);
        gbc.writeMem(0x2744, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd89e);
        EXPECT(gbc.pc(), 0x2746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0313
        gbc.setState(0x852f, 0x1580, 0x99a0, 0x480, 0xaab1, 0xea28, 0x0, 0x0);
        gbc.writeMem(0x852f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1580);
        EXPECT(gbc.pc(), 0x8531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852f), 0xcb);
        EXPECT(gbc.readMem(0x8530), 0x1b);
        // CB 1B 0314
        gbc.setState(0xc997, 0x3bd3, 0xdcf0, 0xc7fe, 0xcb41, 0xd812, 0x1, 0x1);
        gbc.writeMem(0xc997, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3bd3);
        EXPECT(gbc.pc(), 0xc999);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc997), 0xcb);
        EXPECT(gbc.readMem(0xc998), 0x1b);
        // CB 1B 0315
        gbc.setState(0xee58, 0x584b, 0x31f0, 0xe26f, 0xae8, 0xd481, 0x0, 0x0);
        gbc.writeMem(0xee58, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x584b);
        EXPECT(gbc.pc(), 0xee5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee58), 0xcb);
        EXPECT(gbc.readMem(0xee59), 0x1b);
        // CB 1B 0316
        gbc.setState(0x57a2, 0x4124, 0xbcf0, 0xd0a7, 0x36e, 0xbde9, 0x1, 0x1);
        gbc.writeMem(0x57a2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4124);
        EXPECT(gbc.pc(), 0x57a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0317
        gbc.setState(0x8395, 0x7aba, 0x4850, 0x2fe9, 0x67c, 0xd1d3, 0x0, 0x0);
        gbc.writeMem(0x8395, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7aba);
        EXPECT(gbc.pc(), 0x8397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8395), 0xcb);
        EXPECT(gbc.readMem(0x8396), 0x1b);
        // CB 1B 0318
        gbc.setState(0xb6e8, 0x6cf2, 0xe9a0, 0xa220, 0xee7b, 0x1d41, 0x1, 0x0);
        gbc.writeMem(0xb6e8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6cf2);
        EXPECT(gbc.pc(), 0xb6ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e8), 0xcb);
        EXPECT(gbc.readMem(0xb6e9), 0x1b);
        // CB 1B 0319
        gbc.setState(0x43ef, 0x583a, 0xa2d0, 0xa3f7, 0xc6ce, 0x24e8, 0x0, 0x1);
        gbc.writeMem(0x43ef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x583a);
        EXPECT(gbc.pc(), 0x43f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 031A
        gbc.setState(0xe441, 0xe7a0, 0x78c0, 0x9cbe, 0x4cb1, 0x66a0, 0x0, 0x1);
        gbc.writeMem(0xe441, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe7a0);
        EXPECT(gbc.pc(), 0xe443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe441), 0xcb);
        EXPECT(gbc.readMem(0xe442), 0x1b);
        // CB 1B 031B
        gbc.setState(0xc87a, 0x56c0, 0x5060, 0xdf6e, 0xbb71, 0xa75e, 0x1, 0x1);
        gbc.writeMem(0xc87a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x56c0);
        EXPECT(gbc.pc(), 0xc87c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc87a), 0xcb);
        EXPECT(gbc.readMem(0xc87b), 0x1b);
        // CB 1B 031C
        gbc.setState(0x368d, 0x35ee, 0xf8a0, 0xb884, 0x41a, 0x7912, 0x1, 0x0);
        gbc.writeMem(0x368d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x35ee);
        EXPECT(gbc.pc(), 0x368f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 031D
        gbc.setState(0xec52, 0xa3b, 0xa8c0, 0x9d6e, 0x6b9, 0xdac1, 0x1, 0x0);
        gbc.writeMem(0xec52, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa3b);
        EXPECT(gbc.pc(), 0xec54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec52), 0xcb);
        EXPECT(gbc.readMem(0xec53), 0x1b);
        // CB 1B 031E
        gbc.setState(0x4210, 0x518f, 0x7bb0, 0xd874, 0x5c3d, 0xd3e3, 0x1, 0x0);
        gbc.writeMem(0x4210, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x518f);
        EXPECT(gbc.pc(), 0x4212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 031F
        gbc.setState(0x7b7a, 0x97d5, 0x7190, 0xbdb7, 0xcc45, 0xec7d, 0x0, 0x1);
        gbc.writeMem(0x7b7a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x97d5);
        EXPECT(gbc.pc(), 0x7b7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0320
        gbc.setState(0x64fa, 0x7923, 0x1e80, 0x13f8, 0x37d1, 0xd83c, 0x0, 0x0);
        gbc.writeMem(0x64fa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7923);
        EXPECT(gbc.pc(), 0x64fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0321
        gbc.setState(0x43f, 0x45de, 0x65f0, 0xa06d, 0x3968, 0x6d4d, 0x0, 0x0);
        gbc.writeMem(0x43f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x45de);
        EXPECT(gbc.pc(), 0x441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0322
        gbc.setState(0x6e3d, 0xc4c5, 0x1770, 0x3a85, 0x1b03, 0x2cfc, 0x0, 0x1);
        gbc.writeMem(0x6e3d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc4c5);
        EXPECT(gbc.pc(), 0x6e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0323
        gbc.setState(0xd74a, 0x2dd5, 0x72d0, 0x9e67, 0x5a0d, 0xeb44, 0x0, 0x1);
        gbc.writeMem(0xd74a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2dd5);
        EXPECT(gbc.pc(), 0xd74c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd74a), 0xcb);
        EXPECT(gbc.readMem(0xd74b), 0x1b);
        // CB 1B 0325
        gbc.setState(0xa7de, 0x83d5, 0x7490, 0x34d, 0x55db, 0x732d, 0x0, 0x1);
        gbc.writeMem(0xa7de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x83d5);
        EXPECT(gbc.pc(), 0xa7e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7de), 0xcb);
        EXPECT(gbc.readMem(0xa7df), 0x1b);
        // CB 1B 0326
        gbc.setState(0x1cdd, 0xb783, 0x93a0, 0xf998, 0xb904, 0x5b42, 0x1, 0x0);
        gbc.writeMem(0x1cdd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb783);
        EXPECT(gbc.pc(), 0x1cdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0327
        gbc.setState(0x9769, 0xf98d, 0xc720, 0x46c6, 0x925c, 0x8bd, 0x1, 0x1);
        gbc.writeMem(0x9769, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf98d);
        EXPECT(gbc.pc(), 0x976b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9769), 0xcb);
        EXPECT(gbc.readMem(0x976a), 0x1b);
        // CB 1B 0328
        gbc.setState(0xad8c, 0xf2ff, 0xd690, 0x110d, 0x23f1, 0x14e5, 0x1, 0x0);
        gbc.writeMem(0xad8c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf2ff);
        EXPECT(gbc.pc(), 0xad8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad8c), 0xcb);
        EXPECT(gbc.readMem(0xad8d), 0x1b);
        // CB 1B 032A
        gbc.setState(0x2cf3, 0xf351, 0xc3e0, 0xa4, 0x1ff5, 0xde4b, 0x0, 0x1);
        gbc.writeMem(0x2cf3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf351);
        EXPECT(gbc.pc(), 0x2cf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 032B
        gbc.setState(0x41dd, 0x2238, 0x2750, 0xe335, 0xd84f, 0x8d8f, 0x1, 0x0);
        gbc.writeMem(0x41dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2238);
        EXPECT(gbc.pc(), 0x41df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 032C
        gbc.setState(0xddd4, 0xbeb2, 0x1990, 0xb8f5, 0xf1fb, 0x2f2c, 0x1, 0x0);
        gbc.writeMem(0xddd4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xbeb2);
        EXPECT(gbc.pc(), 0xddd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddd4), 0xcb);
        EXPECT(gbc.readMem(0xddd5), 0x1b);
        // CB 1B 032D
        gbc.setState(0x8a33, 0xe8e3, 0xeaf0, 0x8bee, 0xeee9, 0x1363, 0x0, 0x0);
        gbc.writeMem(0x8a33, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe8e3);
        EXPECT(gbc.pc(), 0x8a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a33), 0xcb);
        EXPECT(gbc.readMem(0x8a34), 0x1b);
        // CB 1B 032E
        gbc.setState(0x5e9e, 0x7db1, 0xb3a0, 0x4d63, 0xe894, 0x5a82, 0x1, 0x1);
        gbc.writeMem(0x5e9e, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7db1);
        EXPECT(gbc.pc(), 0x5ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 032F
        gbc.setState(0x87b3, 0x742f, 0x4220, 0xc238, 0x5ad1, 0x9cdc, 0x1, 0x1);
        gbc.writeMem(0x87b3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x742f);
        EXPECT(gbc.pc(), 0x87b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87b3), 0xcb);
        EXPECT(gbc.readMem(0x87b4), 0x1b);
        // CB 1B 0330
        gbc.setState(0x7f35, 0x23c3, 0x63d0, 0x9493, 0x754b, 0x66d7, 0x1, 0x1);
        gbc.writeMem(0x7f35, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x23c3);
        EXPECT(gbc.pc(), 0x7f37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0332
        gbc.setState(0x6b9d, 0xa5dd, 0x5ba0, 0xe048, 0xdf25, 0x853, 0x0, 0x0);
        gbc.writeMem(0x6b9d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa5dd);
        EXPECT(gbc.pc(), 0x6b9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0333
        gbc.setState(0x5677, 0xf548, 0x9830, 0x9d50, 0x50b0, 0x8491, 0x1, 0x1);
        gbc.writeMem(0x5677, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf548);
        EXPECT(gbc.pc(), 0x5679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0334
        gbc.setState(0xe086, 0xc5e5, 0x6a30, 0x2286, 0x6be2, 0xde27, 0x0, 0x1);
        gbc.writeMem(0xe086, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc5e5);
        EXPECT(gbc.pc(), 0xe088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe086), 0xcb);
        EXPECT(gbc.readMem(0xe087), 0x1b);
        // CB 1B 0335
        gbc.setState(0x877c, 0x165e, 0x9cb0, 0x16a7, 0x2bdb, 0xd223, 0x0, 0x1);
        gbc.writeMem(0x877c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x165e);
        EXPECT(gbc.pc(), 0x877e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877c), 0xcb);
        EXPECT(gbc.readMem(0x877d), 0x1b);
        // CB 1B 0336
        gbc.setState(0xde6a, 0xa690, 0x97a0, 0xc959, 0x422e, 0x49d0, 0x0, 0x0);
        gbc.writeMem(0xde6a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa690);
        EXPECT(gbc.pc(), 0xde6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde6a), 0xcb);
        EXPECT(gbc.readMem(0xde6b), 0x1b);
        // CB 1B 0337
        gbc.setState(0x5c83, 0x3707, 0x5450, 0x8c56, 0xcd4b, 0x8b1, 0x0, 0x1);
        gbc.writeMem(0x5c83, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3707);
        EXPECT(gbc.pc(), 0x5c85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0338
        gbc.setState(0xb00f, 0x6012, 0xf20, 0x455f, 0x1912, 0xb61e, 0x0, 0x0);
        gbc.writeMem(0xb00f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6012);
        EXPECT(gbc.pc(), 0xb011);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb00f), 0xcb);
        EXPECT(gbc.readMem(0xb010), 0x1b);
        // CB 1B 0339
        gbc.setState(0x2ec2, 0x6307, 0x2730, 0xf3fc, 0x4779, 0xf227, 0x0, 0x0);
        gbc.writeMem(0x2ec2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6307);
        EXPECT(gbc.pc(), 0x2ec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 033A
        gbc.setState(0xbd71, 0xecca, 0x6e50, 0x7b1b, 0x38cb, 0xee4b, 0x1, 0x0);
        gbc.writeMem(0xbd71, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xecca);
        EXPECT(gbc.pc(), 0xbd73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd71), 0xcb);
        EXPECT(gbc.readMem(0xbd72), 0x1b);
        // CB 1B 033B
        gbc.setState(0x6bb8, 0xbb9c, 0x7d20, 0x3ec2, 0x8ace, 0x3ca, 0x1, 0x0);
        gbc.writeMem(0x6bb8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbb9c);
        EXPECT(gbc.pc(), 0x6bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 033C
        gbc.setState(0x1fad, 0x98d5, 0x2910, 0xba4f, 0xe33c, 0x65b4, 0x0, 0x0);
        gbc.writeMem(0x1fad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x98d5);
        EXPECT(gbc.pc(), 0x1faf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 033D
        gbc.setState(0x498a, 0x869e, 0x66f0, 0x55d2, 0xef2f, 0x477, 0x1, 0x1);
        gbc.writeMem(0x498a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x869e);
        EXPECT(gbc.pc(), 0x498c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 033E
        gbc.setState(0x2d72, 0x2f4f, 0x6f30, 0xd78e, 0x906f, 0x3503, 0x1, 0x1);
        gbc.writeMem(0x2d72, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2f4f);
        EXPECT(gbc.pc(), 0x2d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 033F
        gbc.setState(0x4727, 0x9a6e, 0x4d50, 0x8dbd, 0xac7e, 0x5d67, 0x1, 0x1);
        gbc.writeMem(0x4727, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9a6e);
        EXPECT(gbc.pc(), 0x4729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0340
        gbc.setState(0x5261, 0x2eb7, 0xac10, 0xc6a2, 0xdb81, 0x1180, 0x0, 0x1);
        gbc.writeMem(0x5261, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2eb7);
        EXPECT(gbc.pc(), 0x5263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0341
        gbc.setState(0xb1fb, 0x43de, 0xa9b0, 0x44ad, 0x27ef, 0xf702, 0x1, 0x1);
        gbc.writeMem(0xb1fb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x43de);
        EXPECT(gbc.pc(), 0xb1fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1fb), 0xcb);
        EXPECT(gbc.readMem(0xb1fc), 0x1b);
        // CB 1B 0342
        gbc.setState(0x154d, 0xaed6, 0xe0c0, 0x4acb, 0xbff6, 0x97b, 0x1, 0x0);
        gbc.writeMem(0x154d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xaed6);
        EXPECT(gbc.pc(), 0x154f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0343
        gbc.setState(0x5236, 0x5307, 0xc2c0, 0x3975, 0x29dd, 0x9e63, 0x0, 0x0);
        gbc.writeMem(0x5236, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5307);
        EXPECT(gbc.pc(), 0x5238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0344
        gbc.setState(0x9d43, 0xc72f, 0xdd20, 0x3450, 0xd19d, 0xaa3b, 0x1, 0x1);
        gbc.writeMem(0x9d43, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc72f);
        EXPECT(gbc.pc(), 0x9d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d43), 0xcb);
        EXPECT(gbc.readMem(0x9d44), 0x1b);
        // CB 1B 0345
        gbc.setState(0x57dc, 0x88d2, 0x91e0, 0x2efe, 0x8416, 0x9147, 0x1, 0x0);
        gbc.writeMem(0x57dc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x88d2);
        EXPECT(gbc.pc(), 0x57de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0346
        gbc.setState(0x20f0, 0x1594, 0x1860, 0xf66, 0x7e90, 0xe0, 0x0, 0x1);
        gbc.writeMem(0x20f0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1594);
        EXPECT(gbc.pc(), 0x20f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0347
        gbc.setState(0xada0, 0x16f9, 0xdfe0, 0xe0df, 0xf866, 0xe0cf, 0x1, 0x1);
        gbc.writeMem(0xada0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x16f9);
        EXPECT(gbc.pc(), 0xada2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada0), 0xcb);
        EXPECT(gbc.readMem(0xada1), 0x1b);
        // CB 1B 0348
        gbc.setState(0x273f, 0xa3d9, 0xcde0, 0x92b, 0x1d9b, 0x32d8, 0x1, 0x1);
        gbc.writeMem(0x273f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa3d9);
        EXPECT(gbc.pc(), 0x2741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0349
        gbc.setState(0x263, 0xa2cc, 0xdd90, 0x31c, 0xac1d, 0xeba0, 0x1, 0x0);
        gbc.writeMem(0x263, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa2cc);
        EXPECT(gbc.pc(), 0x265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 034A
        gbc.setState(0x5cb9, 0x3121, 0xbf60, 0xf657, 0x5660, 0xf3ef, 0x1, 0x0);
        gbc.writeMem(0x5cb9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3121);
        EXPECT(gbc.pc(), 0x5cbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 034B
        gbc.setState(0xda10, 0x20e2, 0xbf10, 0x9191, 0xa974, 0x9b52, 0x0, 0x0);
        gbc.writeMem(0xda10, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x20e2);
        EXPECT(gbc.pc(), 0xda12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda10), 0xcb);
        EXPECT(gbc.readMem(0xda11), 0x1b);
        // CB 1B 034C
        gbc.setState(0x999a, 0xcf6b, 0xa6e0, 0x82bc, 0xb50, 0xc242, 0x1, 0x1);
        gbc.writeMem(0x999a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcf6b);
        EXPECT(gbc.pc(), 0x999c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999a), 0xcb);
        EXPECT(gbc.readMem(0x999b), 0x1b);
        // CB 1B 034D
        gbc.setState(0x9ad, 0x23b9, 0xd290, 0xa9e, 0xee88, 0x2274, 0x1, 0x0);
        gbc.writeMem(0x9ad, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x23b9);
        EXPECT(gbc.pc(), 0x9af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 034E
        gbc.setState(0x239c, 0x7c4e, 0xbcc0, 0xa1a3, 0x6c63, 0x30a6, 0x0, 0x1);
        gbc.writeMem(0x239c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7c4e);
        EXPECT(gbc.pc(), 0x239e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 034F
        gbc.setState(0x25e0, 0xf436, 0xf710, 0x815e, 0x5d55, 0xffe4, 0x1, 0x0);
        gbc.writeMem(0x25e0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf436);
        EXPECT(gbc.pc(), 0x25e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0351
        gbc.setState(0x1b3c, 0x569e, 0x8d50, 0x2f90, 0x6665, 0xfbb, 0x0, 0x0);
        gbc.writeMem(0x1b3c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x569e);
        EXPECT(gbc.pc(), 0x1b3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0352
        gbc.setState(0xb3d6, 0x364b, 0xcd50, 0x3cf6, 0xeb24, 0xa5e9, 0x1, 0x0);
        gbc.writeMem(0xb3d6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x364b);
        EXPECT(gbc.pc(), 0xb3d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d6), 0xcb);
        EXPECT(gbc.readMem(0xb3d7), 0x1b);
        // CB 1B 0353
        gbc.setState(0xd8b0, 0x99a0, 0x100, 0xc8e, 0x511b, 0x29c3, 0x0, 0x1);
        gbc.writeMem(0xd8b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x99a0);
        EXPECT(gbc.pc(), 0xd8b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8b0), 0xcb);
        EXPECT(gbc.readMem(0xd8b1), 0x1b);
        // CB 1B 0354
        gbc.setState(0xb8ff, 0xb599, 0xb360, 0x4933, 0xba12, 0x2691, 0x1, 0x1);
        gbc.writeMem(0xb8ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb599);
        EXPECT(gbc.pc(), 0xb901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ff), 0xcb);
        EXPECT(gbc.readMem(0xb900), 0x1b);
        // CB 1B 0355
        gbc.setState(0x47ea, 0x440a, 0xab60, 0x5b93, 0x8930, 0xae6d, 0x1, 0x1);
        gbc.writeMem(0x47ea, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x440a);
        EXPECT(gbc.pc(), 0x47ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0356
        gbc.setState(0xee90, 0x4328, 0x7150, 0x5f2f, 0xb074, 0xbdf1, 0x1, 0x1);
        gbc.writeMem(0xee90, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4328);
        EXPECT(gbc.pc(), 0xee92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee90), 0xcb);
        EXPECT(gbc.readMem(0xee91), 0x1b);
        // CB 1B 0357
        gbc.setState(0xc628, 0xf01f, 0x0, 0x9f3e, 0xd248, 0x1eb6, 0x1, 0x0);
        gbc.writeMem(0xc628, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf01f);
        EXPECT(gbc.pc(), 0xc62a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc628), 0xcb);
        EXPECT(gbc.readMem(0xc629), 0x1b);
        // CB 1B 0358
        gbc.setState(0x6b1d, 0x36fa, 0x970, 0x7f2d, 0x8668, 0x689b, 0x1, 0x1);
        gbc.writeMem(0x6b1d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x36fa);
        EXPECT(gbc.pc(), 0x6b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0359
        gbc.setState(0x603d, 0x6bbb, 0xb3f0, 0xd9db, 0xba04, 0xc939, 0x0, 0x1);
        gbc.writeMem(0x603d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6bbb);
        EXPECT(gbc.pc(), 0x603f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 035A
        gbc.setState(0x60e5, 0xbdb7, 0x24d0, 0xe1b8, 0xa72d, 0x8e65, 0x1, 0x1);
        gbc.writeMem(0x60e5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbdb7);
        EXPECT(gbc.pc(), 0x60e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 035B
        gbc.setState(0x65f2, 0xffca, 0x2b80, 0x5c25, 0x7f3a, 0x3e27, 0x0, 0x0);
        gbc.writeMem(0x65f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xffca);
        EXPECT(gbc.pc(), 0x65f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 035C
        gbc.setState(0x498f, 0xa826, 0x5700, 0x754b, 0xc3df, 0x549a, 0x0, 0x1);
        gbc.writeMem(0x498f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa826);
        EXPECT(gbc.pc(), 0x4991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 035D
        gbc.setState(0xb244, 0x258c, 0x1b00, 0x14fd, 0xbf5f, 0x6a4d, 0x0, 0x1);
        gbc.writeMem(0xb244, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x258c);
        EXPECT(gbc.pc(), 0xb246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb244), 0xcb);
        EXPECT(gbc.readMem(0xb245), 0x1b);
        // CB 1B 035E
        gbc.setState(0x9b00, 0xedfb, 0xec90, 0x2c61, 0xf3ef, 0x5d9c, 0x1, 0x1);
        gbc.writeMem(0x9b00, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xedfb);
        EXPECT(gbc.pc(), 0x9b02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b00), 0xcb);
        EXPECT(gbc.readMem(0x9b01), 0x1b);
        // CB 1B 035F
        gbc.setState(0xe3b6, 0x2dc4, 0xa9e0, 0xf0c0, 0xc0f6, 0x56b0, 0x1, 0x0);
        gbc.writeMem(0xe3b6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2dc4);
        EXPECT(gbc.pc(), 0xe3b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b6), 0xcb);
        EXPECT(gbc.readMem(0xe3b7), 0x1b);
        // CB 1B 0360
        gbc.setState(0x3f4, 0xfc06, 0xe860, 0x66e3, 0x4328, 0x2f54, 0x0, 0x1);
        gbc.writeMem(0x3f4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xfc06);
        EXPECT(gbc.pc(), 0x3f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0361
        gbc.setState(0xc77d, 0x22e2, 0xd7f0, 0xc55, 0xa194, 0x559c, 0x0, 0x0);
        gbc.writeMem(0xc77d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x22e2);
        EXPECT(gbc.pc(), 0xc77f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc77d), 0xcb);
        EXPECT(gbc.readMem(0xc77e), 0x1b);
        // CB 1B 0362
        gbc.setState(0x6962, 0xb971, 0xa1d0, 0xa207, 0x6d2f, 0xd6b1, 0x1, 0x0);
        gbc.writeMem(0x6962, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb971);
        EXPECT(gbc.pc(), 0x6964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0363
        gbc.setState(0x6792, 0x3d58, 0xb330, 0xb7d1, 0xb76f, 0x4b2a, 0x0, 0x0);
        gbc.writeMem(0x6792, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3d58);
        EXPECT(gbc.pc(), 0x6794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0364
        gbc.setState(0xcf3f, 0x505a, 0x72b0, 0x2c33, 0x1256, 0xf4d2, 0x0, 0x1);
        gbc.writeMem(0xcf3f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x505a);
        EXPECT(gbc.pc(), 0xcf41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf3f), 0xcb);
        EXPECT(gbc.readMem(0xcf40), 0x1b);
        // CB 1B 0365
        gbc.setState(0x4431, 0xa511, 0xa280, 0x689b, 0x481a, 0x8c81, 0x1, 0x0);
        gbc.writeMem(0x4431, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa511);
        EXPECT(gbc.pc(), 0x4433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0366
        gbc.setState(0x8600, 0x1411, 0x6390, 0x6a52, 0xc215, 0xd698, 0x0, 0x0);
        gbc.writeMem(0x8600, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1411);
        EXPECT(gbc.pc(), 0x8602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8600), 0xcb);
        EXPECT(gbc.readMem(0x8601), 0x1b);
        // CB 1B 0367
        gbc.setState(0x1848, 0xb9e2, 0x5810, 0x88d4, 0x4e3e, 0xafb6, 0x0, 0x1);
        gbc.writeMem(0x1848, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb9e2);
        EXPECT(gbc.pc(), 0x184a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0369
        gbc.setState(0x3efa, 0x4f9d, 0xd770, 0x5e30, 0xb94a, 0x5b95, 0x0, 0x0);
        gbc.writeMem(0x3efa, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4f9d);
        EXPECT(gbc.pc(), 0x3efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 036A
        gbc.setState(0xa226, 0x478f, 0xd960, 0x43ab, 0x6fe4, 0xe084, 0x0, 0x1);
        gbc.writeMem(0xa226, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x478f);
        EXPECT(gbc.pc(), 0xa228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa226), 0xcb);
        EXPECT(gbc.readMem(0xa227), 0x1b);
        // CB 1B 036B
        gbc.setState(0x186a, 0x8dc2, 0x6390, 0xb4ca, 0x432c, 0x3e35, 0x0, 0x1);
        gbc.writeMem(0x186a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8dc2);
        EXPECT(gbc.pc(), 0x186c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 036C
        gbc.setState(0xd581, 0x319, 0xc150, 0xbadf, 0xde48, 0x9919, 0x1, 0x1);
        gbc.writeMem(0xd581, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x319);
        EXPECT(gbc.pc(), 0xd583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd581), 0xcb);
        EXPECT(gbc.readMem(0xd582), 0x1b);
        // CB 1B 036D
        gbc.setState(0x5a11, 0x8066, 0x8190, 0xdd5, 0xe2c, 0x96cc, 0x1, 0x1);
        gbc.writeMem(0x5a11, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8066);
        EXPECT(gbc.pc(), 0x5a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 036E
        gbc.setState(0xebc3, 0x78ef, 0x55c0, 0xa2c2, 0x640, 0x207c, 0x1, 0x0);
        gbc.writeMem(0xebc3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x78ef);
        EXPECT(gbc.pc(), 0xebc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebc3), 0xcb);
        EXPECT(gbc.readMem(0xebc4), 0x1b);
        // CB 1B 036F
        gbc.setState(0x7466, 0x7f3f, 0xf560, 0xdd48, 0xd7b6, 0xc26, 0x1, 0x1);
        gbc.writeMem(0x7466, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7f3f);
        EXPECT(gbc.pc(), 0x7468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0370
        gbc.setState(0x5960, 0x1e97, 0x1230, 0x1377, 0xe4e2, 0x2e20, 0x1, 0x1);
        gbc.writeMem(0x5960, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1e97);
        EXPECT(gbc.pc(), 0x5962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0371
        gbc.setState(0x671f, 0x456f, 0x3060, 0xc6be, 0x5abc, 0x9e0d, 0x1, 0x0);
        gbc.writeMem(0x671f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x456f);
        EXPECT(gbc.pc(), 0x6721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0372
        gbc.setState(0xd3db, 0xbfe7, 0x7670, 0x5a2f, 0x40c, 0x9c5d, 0x1, 0x0);
        gbc.writeMem(0xd3db, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xbfe7);
        EXPECT(gbc.pc(), 0xd3dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3db), 0xcb);
        EXPECT(gbc.readMem(0xd3dc), 0x1b);
        // CB 1B 0373
        gbc.setState(0x9ed6, 0x7986, 0xfc10, 0x7782, 0xa527, 0x6bd6, 0x0, 0x1);
        gbc.writeMem(0x9ed6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7986);
        EXPECT(gbc.pc(), 0x9ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ed6), 0xcb);
        EXPECT(gbc.readMem(0x9ed7), 0x1b);
        // CB 1B 0374
        gbc.setState(0xb10c, 0xe05, 0x3920, 0xfda5, 0xad1, 0x257c, 0x0, 0x0);
        gbc.writeMem(0xb10c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe05);
        EXPECT(gbc.pc(), 0xb10e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb10c), 0xcb);
        EXPECT(gbc.readMem(0xb10d), 0x1b);
        // CB 1B 0375
        gbc.setState(0xedb0, 0xca6c, 0xbc90, 0x28ea, 0xc902, 0x9f77, 0x1, 0x1);
        gbc.writeMem(0xedb0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xca6c);
        EXPECT(gbc.pc(), 0xedb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedb0), 0xcb);
        EXPECT(gbc.readMem(0xedb1), 0x1b);
        // CB 1B 0377
        gbc.setState(0x97ff, 0x56fc, 0xc880, 0xac24, 0x92f6, 0xc89, 0x0, 0x0);
        gbc.writeMem(0x97ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x56fc);
        EXPECT(gbc.pc(), 0x9801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97ff), 0xcb);
        EXPECT(gbc.readMem(0x9800), 0x1b);
        // CB 1B 0378
        gbc.setState(0x4011, 0xbb95, 0x5e00, 0x5a92, 0x4e33, 0x798c, 0x0, 0x0);
        gbc.writeMem(0x4011, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xbb95);
        EXPECT(gbc.pc(), 0x4013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0379
        gbc.setState(0xad60, 0xa751, 0x7a30, 0x7ce5, 0x180b, 0xcac7, 0x1, 0x1);
        gbc.writeMem(0xad60, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa751);
        EXPECT(gbc.pc(), 0xad62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad60), 0xcb);
        EXPECT(gbc.readMem(0xad61), 0x1b);
        // CB 1B 037A
        gbc.setState(0x17a, 0xc8f, 0xfe10, 0xec7d, 0x7802, 0xcf65, 0x1, 0x1);
        gbc.writeMem(0x17a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc8f);
        EXPECT(gbc.pc(), 0x17c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 037B
        gbc.setState(0x59fc, 0x78, 0xdc70, 0xd97a, 0x2c33, 0x6030, 0x0, 0x1);
        gbc.writeMem(0x59fc, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x78);
        EXPECT(gbc.pc(), 0x59fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 037C
        gbc.setState(0x3fbd, 0xed67, 0xd8e0, 0x5036, 0x8671, 0xeff0, 0x1, 0x1);
        gbc.writeMem(0x3fbd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xed67);
        EXPECT(gbc.pc(), 0x3fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 037D
        gbc.setState(0xb17b, 0xb4e8, 0x9300, 0xf894, 0x9eb1, 0x46c3, 0x0, 0x0);
        gbc.writeMem(0xb17b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb4e8);
        EXPECT(gbc.pc(), 0xb17d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb17b), 0xcb);
        EXPECT(gbc.readMem(0xb17c), 0x1b);
        // CB 1B 037E
        gbc.setState(0xdd8f, 0xd300, 0x33c0, 0x7184, 0xe5a, 0xb499, 0x1, 0x0);
        gbc.writeMem(0xdd8f, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd300);
        EXPECT(gbc.pc(), 0xdd91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd8f), 0xcb);
        EXPECT(gbc.readMem(0xdd90), 0x1b);
        // CB 1B 037F
        gbc.setState(0x2c29, 0x8987, 0x30d0, 0x7734, 0x683b, 0x7c63, 0x0, 0x1);
        gbc.writeMem(0x2c29, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8987);
        EXPECT(gbc.pc(), 0x2c2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0381
        gbc.setState(0x970c, 0x6819, 0x35b0, 0x677f, 0x7205, 0x6bfd, 0x0, 0x0);
        gbc.writeMem(0x970c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6819);
        EXPECT(gbc.pc(), 0x970e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x970c), 0xcb);
        EXPECT(gbc.readMem(0x970d), 0x1b);
        // CB 1B 0382
        gbc.setState(0x4bef, 0xf3db, 0x9200, 0x391a, 0xe784, 0x335c, 0x1, 0x1);
        gbc.writeMem(0x4bef, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf3db);
        EXPECT(gbc.pc(), 0x4bf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0383
        gbc.setState(0x8d18, 0x1cae, 0x3a80, 0x17b1, 0xa844, 0xb3f2, 0x1, 0x1);
        gbc.writeMem(0x8d18, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1cae);
        EXPECT(gbc.pc(), 0x8d1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d18), 0xcb);
        EXPECT(gbc.readMem(0x8d19), 0x1b);
        // CB 1B 0384
        gbc.setState(0xc96c, 0x6ce0, 0xc9a0, 0xbe0f, 0x749e, 0x630a, 0x1, 0x1);
        gbc.writeMem(0xc96c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6ce0);
        EXPECT(gbc.pc(), 0xc96e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc96c), 0xcb);
        EXPECT(gbc.readMem(0xc96d), 0x1b);
        // CB 1B 0385
        gbc.setState(0x58c2, 0x20a7, 0xdc00, 0x1995, 0x6c0a, 0xc6a7, 0x0, 0x1);
        gbc.writeMem(0x58c2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x20a7);
        EXPECT(gbc.pc(), 0x58c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0386
        gbc.setState(0x2440, 0xf21b, 0xccf0, 0xa621, 0xcd33, 0x70ff, 0x1, 0x0);
        gbc.writeMem(0x2440, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf21b);
        EXPECT(gbc.pc(), 0x2442);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0387
        gbc.setState(0x70b8, 0x14e2, 0xf160, 0xff41, 0xb886, 0x9582, 0x1, 0x1);
        gbc.writeMem(0x70b8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x14e2);
        EXPECT(gbc.pc(), 0x70ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0388
        gbc.setState(0x86ec, 0x709a, 0x2eb0, 0xb788, 0x9e70, 0x949b, 0x0, 0x0);
        gbc.writeMem(0x86ec, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x709a);
        EXPECT(gbc.pc(), 0x86ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86ec), 0xcb);
        EXPECT(gbc.readMem(0x86ed), 0x1b);
        // CB 1B 0389
        gbc.setState(0x48b4, 0x740a, 0xd00, 0x5ba7, 0xb4a2, 0x9825, 0x1, 0x0);
        gbc.writeMem(0x48b4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x740a);
        EXPECT(gbc.pc(), 0x48b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 038B
        gbc.setState(0x4d38, 0x32b8, 0x83d0, 0xc17e, 0xb5b0, 0x8080, 0x1, 0x0);
        gbc.writeMem(0x4d38, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x32b8);
        EXPECT(gbc.pc(), 0x4d3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 038C
        gbc.setState(0xc3b0, 0xc820, 0xb070, 0x41bb, 0xa8d, 0xc7a8, 0x1, 0x0);
        gbc.writeMem(0xc3b0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc820);
        EXPECT(gbc.pc(), 0xc3b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3b0), 0xcb);
        EXPECT(gbc.readMem(0xc3b1), 0x1b);
        // CB 1B 038D
        gbc.setState(0xa49b, 0xa66d, 0x4df0, 0xd666, 0x54b7, 0xd527, 0x1, 0x1);
        gbc.writeMem(0xa49b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa66d);
        EXPECT(gbc.pc(), 0xa49d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa49b), 0xcb);
        EXPECT(gbc.readMem(0xa49c), 0x1b);
        // CB 1B 038E
        gbc.setState(0x5cf5, 0x5b61, 0xaf0, 0x7428, 0x8c9f, 0x12d0, 0x0, 0x0);
        gbc.writeMem(0x5cf5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5b61);
        EXPECT(gbc.pc(), 0x5cf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 038F
        gbc.setState(0x1781, 0xf4fa, 0x4330, 0x415, 0x9f8a, 0x3655, 0x1, 0x1);
        gbc.writeMem(0x1781, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf4fa);
        EXPECT(gbc.pc(), 0x1783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0390
        gbc.setState(0xc050, 0xe894, 0x7960, 0x1517, 0x5ca7, 0x521, 0x1, 0x1);
        gbc.writeMem(0xc050, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe894);
        EXPECT(gbc.pc(), 0xc052);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc050), 0xcb);
        EXPECT(gbc.readMem(0xc051), 0x1b);
        // CB 1B 0391
        gbc.setState(0xb3f2, 0xb49b, 0x58a0, 0x7d3b, 0xad94, 0x6b74, 0x0, 0x0);
        gbc.writeMem(0xb3f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb49b);
        EXPECT(gbc.pc(), 0xb3f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f2), 0xcb);
        EXPECT(gbc.readMem(0xb3f3), 0x1b);
        // CB 1B 0392
        gbc.setState(0x3be5, 0x4a0e, 0x47a0, 0xe976, 0xf4fc, 0xff54, 0x0, 0x1);
        gbc.writeMem(0x3be5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4a0e);
        EXPECT(gbc.pc(), 0x3be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 0393
        gbc.setState(0xe2bf, 0x8b32, 0x9dd0, 0x5b44, 0x7866, 0x1a9b, 0x0, 0x0);
        gbc.writeMem(0xe2bf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8b32);
        EXPECT(gbc.pc(), 0xe2c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2bf), 0xcb);
        EXPECT(gbc.readMem(0xe2c0), 0x1b);
        // CB 1B 0396
        gbc.setState(0xb7f0, 0xb469, 0xa850, 0x30f1, 0x82e4, 0x7a0f, 0x0, 0x0);
        gbc.writeMem(0xb7f0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb469);
        EXPECT(gbc.pc(), 0xb7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f0), 0xcb);
        EXPECT(gbc.readMem(0xb7f1), 0x1b);
        // CB 1B 0397
        gbc.setState(0x7e07, 0x8874, 0x64c0, 0x136, 0xa653, 0x7b0b, 0x0, 0x1);
        gbc.writeMem(0x7e07, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8874);
        EXPECT(gbc.pc(), 0x7e09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 0398
        gbc.setState(0xb45c, 0x5e22, 0xe940, 0x3df2, 0x3646, 0xa360, 0x1, 0x1);
        gbc.writeMem(0xb45c, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5e22);
        EXPECT(gbc.pc(), 0xb45e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45c), 0xcb);
        EXPECT(gbc.readMem(0xb45d), 0x1b);
        // CB 1B 0399
        gbc.setState(0xc206, 0x84ef, 0xfd70, 0x8b8c, 0x6852, 0xc6d9, 0x0, 0x1);
        gbc.writeMem(0xc206, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x84ef);
        EXPECT(gbc.pc(), 0xc208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc206), 0xcb);
        EXPECT(gbc.readMem(0xc207), 0x1b);
        // CB 1B 039A
        gbc.setState(0x5003, 0xa01f, 0x6260, 0x3ec4, 0x1eb0, 0xd01b, 0x0, 0x0);
        gbc.writeMem(0x5003, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa01f);
        EXPECT(gbc.pc(), 0x5005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 039D
        gbc.setState(0x4649, 0xf310, 0xbf30, 0xb65c, 0xa141, 0xb5ad, 0x0, 0x0);
        gbc.writeMem(0x4649, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf310);
        EXPECT(gbc.pc(), 0x464b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 039E
        gbc.setState(0x53cd, 0xe67f, 0xd310, 0xa0ef, 0x9bfc, 0x8e1d, 0x1, 0x0);
        gbc.writeMem(0x53cd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe67f);
        EXPECT(gbc.pc(), 0x53cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 039F
        gbc.setState(0x66d1, 0xac8c, 0x5ad0, 0xbae7, 0x5c22, 0x3fb4, 0x1, 0x1);
        gbc.writeMem(0x66d1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xac8c);
        EXPECT(gbc.pc(), 0x66d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03A1
        gbc.setState(0xeaf4, 0x964f, 0x90c0, 0x5d0b, 0x1fff, 0xd8bb, 0x0, 0x1);
        gbc.writeMem(0xeaf4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x964f);
        EXPECT(gbc.pc(), 0xeaf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf4), 0xcb);
        EXPECT(gbc.readMem(0xeaf5), 0x1b);
        // CB 1B 03A2
        gbc.setState(0xc831, 0x8b49, 0x5d20, 0x144f, 0x4c4d, 0x2720, 0x0, 0x0);
        gbc.writeMem(0xc831, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8b49);
        EXPECT(gbc.pc(), 0xc833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc831), 0xcb);
        EXPECT(gbc.readMem(0xc832), 0x1b);
        // CB 1B 03A3
        gbc.setState(0x1328, 0x90c9, 0x2970, 0x1330, 0xf4d, 0x78b7, 0x0, 0x0);
        gbc.writeMem(0x1328, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x90c9);
        EXPECT(gbc.pc(), 0x132a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03A4
        gbc.setState(0x438, 0x6550, 0x81b0, 0xe04d, 0xf4ed, 0x2057, 0x1, 0x0);
        gbc.writeMem(0x438, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6550);
        EXPECT(gbc.pc(), 0x43a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03A5
        gbc.setState(0xdcf, 0x77e8, 0x7e70, 0x8742, 0x7b2b, 0xf903, 0x0, 0x1);
        gbc.writeMem(0xdcf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x77e8);
        EXPECT(gbc.pc(), 0xdd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03A6
        gbc.setState(0xd5b9, 0x86a2, 0xd6c0, 0x6c97, 0xa083, 0x9294, 0x0, 0x1);
        gbc.writeMem(0xd5b9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x86a2);
        EXPECT(gbc.pc(), 0xd5bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5b9), 0xcb);
        EXPECT(gbc.readMem(0xd5ba), 0x1b);
        // CB 1B 03A7
        gbc.setState(0x38d0, 0x1671, 0x8470, 0x3ed5, 0x6eb8, 0x81d9, 0x0, 0x1);
        gbc.writeMem(0x38d0, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1671);
        EXPECT(gbc.pc(), 0x38d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03A8
        gbc.setState(0x4cfd, 0x8c2d, 0xa8e0, 0x3586, 0x1e16, 0x8045, 0x1, 0x1);
        gbc.writeMem(0x4cfd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8c2d);
        EXPECT(gbc.pc(), 0x4cff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03A9
        gbc.setState(0x790a, 0x66a4, 0xef60, 0xbd7d, 0x90d6, 0x97ba, 0x1, 0x0);
        gbc.writeMem(0x790a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x66a4);
        EXPECT(gbc.pc(), 0x790c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03AA
        gbc.setState(0x66be, 0x5fd9, 0xa200, 0x4232, 0x2587, 0x295b, 0x1, 0x0);
        gbc.writeMem(0x66be, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5fd9);
        EXPECT(gbc.pc(), 0x66c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03AB
        gbc.setState(0xe31a, 0x62c1, 0x7c50, 0xfb1d, 0x46ad, 0x8d50, 0x1, 0x0);
        gbc.writeMem(0xe31a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x62c1);
        EXPECT(gbc.pc(), 0xe31c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe31a), 0xcb);
        EXPECT(gbc.readMem(0xe31b), 0x1b);
        // CB 1B 03AC
        gbc.setState(0x5765, 0xd420, 0xa990, 0xa0b7, 0xf9ef, 0xcaf4, 0x1, 0x0);
        gbc.writeMem(0x5765, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd420);
        EXPECT(gbc.pc(), 0x5767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03AD
        gbc.setState(0x2b89, 0x3a11, 0x53f0, 0xf326, 0x8350, 0xbee6, 0x1, 0x1);
        gbc.writeMem(0x2b89, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3a11);
        EXPECT(gbc.pc(), 0x2b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03AE
        gbc.setState(0xbb9a, 0x3c44, 0x4800, 0xe549, 0xebe3, 0xd576, 0x0, 0x1);
        gbc.writeMem(0xbb9a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3c44);
        EXPECT(gbc.pc(), 0xbb9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb9a), 0xcb);
        EXPECT(gbc.readMem(0xbb9b), 0x1b);
        // CB 1B 03AF
        gbc.setState(0x16c7, 0xf823, 0x6570, 0xd8fd, 0x213d, 0x6a7d, 0x0, 0x1);
        gbc.writeMem(0x16c7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf823);
        EXPECT(gbc.pc(), 0x16c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03B0
        gbc.setState(0xea0d, 0x8acb, 0xd710, 0x6b1a, 0x1379, 0xe9a4, 0x1, 0x0);
        gbc.writeMem(0xea0d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8acb);
        EXPECT(gbc.pc(), 0xea0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea0d), 0xcb);
        EXPECT(gbc.readMem(0xea0e), 0x1b);
        // CB 1B 03B1
        gbc.setState(0x3fab, 0x8991, 0x870, 0x6ede, 0x8b9, 0x71fc, 0x0, 0x0);
        gbc.writeMem(0x3fab, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8991);
        EXPECT(gbc.pc(), 0x3fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03B2
        gbc.setState(0x29ac, 0x471, 0x4b90, 0x52ac, 0xe061, 0xccf5, 0x0, 0x0);
        gbc.writeMem(0x29ac, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x471);
        EXPECT(gbc.pc(), 0x29ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03B3
        gbc.setState(0x70a7, 0x7954, 0x2fb0, 0xb14b, 0xa59d, 0x1742, 0x1, 0x1);
        gbc.writeMem(0x70a7, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7954);
        EXPECT(gbc.pc(), 0x70a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03B4
        gbc.setState(0x9bce, 0xf761, 0xaf60, 0x21ee, 0xbc5b, 0x38a9, 0x0, 0x0);
        gbc.writeMem(0x9bce, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf761);
        EXPECT(gbc.pc(), 0x9bd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bce), 0xcb);
        EXPECT(gbc.readMem(0x9bcf), 0x1b);
        // CB 1B 03B6
        gbc.setState(0x56dd, 0xef68, 0x9430, 0xe025, 0xc628, 0x8cc, 0x1, 0x1);
        gbc.writeMem(0x56dd, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xef68);
        EXPECT(gbc.pc(), 0x56df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03B8
        gbc.setState(0xa7b9, 0xc1c5, 0x3f70, 0x8ade, 0x5fc2, 0x82c, 0x1, 0x0);
        gbc.writeMem(0xa7b9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc1c5);
        EXPECT(gbc.pc(), 0xa7bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b9), 0xcb);
        EXPECT(gbc.readMem(0xa7ba), 0x1b);
        // CB 1B 03B9
        gbc.setState(0xcb11, 0x525c, 0x1e70, 0x73f8, 0x1a44, 0x5a83, 0x1, 0x0);
        gbc.writeMem(0xcb11, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x525c);
        EXPECT(gbc.pc(), 0xcb13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb11), 0xcb);
        EXPECT(gbc.readMem(0xcb12), 0x1b);
        // CB 1B 03BB
        gbc.setState(0x5d78, 0x5f42, 0xb20, 0xc297, 0xf9b0, 0x8cfc, 0x1, 0x0);
        gbc.writeMem(0x5d78, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5f42);
        EXPECT(gbc.pc(), 0x5d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03BC
        gbc.setState(0x2672, 0x19f7, 0x8750, 0xf6fb, 0xee34, 0x4a34, 0x1, 0x1);
        gbc.writeMem(0x2672, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x19f7);
        EXPECT(gbc.pc(), 0x2674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03BD
        gbc.setState(0xc9e3, 0x1941, 0x1650, 0x443b, 0x1cc1, 0xd797, 0x0, 0x0);
        gbc.writeMem(0xc9e3, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1941);
        EXPECT(gbc.pc(), 0xc9e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e3), 0xcb);
        EXPECT(gbc.readMem(0xc9e4), 0x1b);
        // CB 1B 03BE
        gbc.setState(0xb44d, 0x8a1b, 0x450, 0x414b, 0x6a2c, 0xd56c, 0x0, 0x0);
        gbc.writeMem(0xb44d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x8a1b);
        EXPECT(gbc.pc(), 0xb44f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb44d), 0xcb);
        EXPECT(gbc.readMem(0xb44e), 0x1b);
        // CB 1B 03BF
        gbc.setState(0xb1d1, 0xa7cc, 0xd210, 0xc05d, 0x6cd8, 0xb99f, 0x0, 0x1);
        gbc.writeMem(0xb1d1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa7cc);
        EXPECT(gbc.pc(), 0xb1d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d1), 0xcb);
        EXPECT(gbc.readMem(0xb1d2), 0x1b);
        // CB 1B 03C0
        gbc.setState(0x2f92, 0x3307, 0x76d0, 0x4d1, 0xfb62, 0x5678, 0x1, 0x0);
        gbc.writeMem(0x2f92, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3307);
        EXPECT(gbc.pc(), 0x2f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03C1
        gbc.setState(0x5f81, 0xe9f8, 0x6d10, 0x8bf, 0x27cf, 0xff52, 0x1, 0x1);
        gbc.writeMem(0x5f81, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe9f8);
        EXPECT(gbc.pc(), 0x5f83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03C2
        gbc.setState(0xa846, 0xabd5, 0x7820, 0x15f4, 0xeb2d, 0x83bd, 0x1, 0x0);
        gbc.writeMem(0xa846, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xabd5);
        EXPECT(gbc.pc(), 0xa848);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa846), 0xcb);
        EXPECT(gbc.readMem(0xa847), 0x1b);
        // CB 1B 03C3
        gbc.setState(0x2233, 0x5679, 0x6700, 0x513a, 0xbb73, 0xae6c, 0x1, 0x0);
        gbc.writeMem(0x2233, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5679);
        EXPECT(gbc.pc(), 0x2235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03C4
        gbc.setState(0xa8db, 0x4d07, 0xcb10, 0x9e18, 0x6653, 0xa933, 0x1, 0x0);
        gbc.writeMem(0xa8db, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4d07);
        EXPECT(gbc.pc(), 0xa8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8db), 0xcb);
        EXPECT(gbc.readMem(0xa8dc), 0x1b);
        // CB 1B 03C5
        gbc.setState(0xaa26, 0x11bb, 0x6960, 0xd1f8, 0xdce7, 0x4f01, 0x1, 0x0);
        gbc.writeMem(0xaa26, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x11bb);
        EXPECT(gbc.pc(), 0xaa28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa26), 0xcb);
        EXPECT(gbc.readMem(0xaa27), 0x1b);
        // CB 1B 03C6
        gbc.setState(0x16bb, 0xceb6, 0x7e0, 0x1133, 0x8bc9, 0x32b9, 0x0, 0x1);
        gbc.writeMem(0x16bb, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xceb6);
        EXPECT(gbc.pc(), 0x16bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03C7
        gbc.setState(0xd21a, 0x791e, 0x1660, 0x57e8, 0x631e, 0x881b, 0x1, 0x1);
        gbc.writeMem(0xd21a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x791e);
        EXPECT(gbc.pc(), 0xd21c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd21a), 0xcb);
        EXPECT(gbc.readMem(0xd21b), 0x1b);
        // CB 1B 03C8
        gbc.setState(0xda21, 0xf3b4, 0x3360, 0xc64b, 0x94e4, 0xabcf, 0x0, 0x0);
        gbc.writeMem(0xda21, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf3b4);
        EXPECT(gbc.pc(), 0xda23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda21), 0xcb);
        EXPECT(gbc.readMem(0xda22), 0x1b);
        // CB 1B 03C9
        gbc.setState(0xa3e1, 0xc21a, 0x48c0, 0x86ef, 0x43b5, 0xc82f, 0x1, 0x0);
        gbc.writeMem(0xa3e1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc21a);
        EXPECT(gbc.pc(), 0xa3e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3e1), 0xcb);
        EXPECT(gbc.readMem(0xa3e2), 0x1b);
        // CB 1B 03CA
        gbc.setState(0xd6a1, 0x219c, 0x5b80, 0xcc76, 0x1c64, 0x40a8, 0x1, 0x1);
        gbc.writeMem(0xd6a1, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x219c);
        EXPECT(gbc.pc(), 0xd6a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6a1), 0xcb);
        EXPECT(gbc.readMem(0xd6a2), 0x1b);
        // CB 1B 03CB
        gbc.setState(0x6e2d, 0x95ba, 0xf650, 0xfd9e, 0xd69b, 0x3221, 0x1, 0x1);
        gbc.writeMem(0x6e2d, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x95ba);
        EXPECT(gbc.pc(), 0x6e2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03CC
        gbc.setState(0x71af, 0xf66c, 0xa0, 0x412, 0x2241, 0xa48c, 0x1, 0x0);
        gbc.writeMem(0x71af, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf66c);
        EXPECT(gbc.pc(), 0x71b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03CD
        gbc.setState(0xb4f2, 0x3c35, 0x4320, 0x80a7, 0xe6ef, 0xabc4, 0x1, 0x0);
        gbc.writeMem(0xb4f2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3c35);
        EXPECT(gbc.pc(), 0xb4f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4f2), 0xcb);
        EXPECT(gbc.readMem(0xb4f3), 0x1b);
        // CB 1B 03CE
        gbc.setState(0x8faf, 0x7036, 0xaba0, 0x8056, 0xa807, 0x2d54, 0x0, 0x1);
        gbc.writeMem(0x8faf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7036);
        EXPECT(gbc.pc(), 0x8fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8faf), 0xcb);
        EXPECT(gbc.readMem(0x8fb0), 0x1b);
        // CB 1B 03CF
        gbc.setState(0x65de, 0x820b, 0x9220, 0xada6, 0x5a01, 0x49ac, 0x1, 0x1);
        gbc.writeMem(0x65de, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x820b);
        EXPECT(gbc.pc(), 0x65e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03D0
        gbc.setState(0x19d4, 0x50a2, 0x3d0, 0x6f7d, 0x1cd, 0x73fb, 0x0, 0x1);
        gbc.writeMem(0x19d4, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x50a2);
        EXPECT(gbc.pc(), 0x19d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03D2
        gbc.setState(0xc1c6, 0x7ff, 0x5ed0, 0xebd1, 0x78de, 0xaddb, 0x0, 0x0);
        gbc.writeMem(0xc1c6, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7ff);
        EXPECT(gbc.pc(), 0xc1c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c6), 0xcb);
        EXPECT(gbc.readMem(0xc1c7), 0x1b);
        // CB 1B 03D3
        gbc.setState(0x446a, 0x3f64, 0x7580, 0x289f, 0xaab6, 0xd61a, 0x1, 0x0);
        gbc.writeMem(0x446a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3f64);
        EXPECT(gbc.pc(), 0x446c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03D4
        gbc.setState(0x19bf, 0x35c7, 0x910, 0xa6e0, 0x3b1e, 0xcc2, 0x0, 0x0);
        gbc.writeMem(0x19bf, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x35c7);
        EXPECT(gbc.pc(), 0x19c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03D5
        gbc.setState(0x7d5, 0x9147, 0x8ae0, 0xd3ae, 0xabb, 0x4f48, 0x0, 0x1);
        gbc.writeMem(0x7d5, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9147);
        EXPECT(gbc.pc(), 0x7d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03D6
        gbc.setState(0xeee2, 0xbe82, 0xfd80, 0x1df0, 0xc568, 0x1c6c, 0x0, 0x1);
        gbc.writeMem(0xeee2, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbe82);
        EXPECT(gbc.pc(), 0xeee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee2), 0xcb);
        EXPECT(gbc.readMem(0xeee3), 0x1b);
        // CB 1B 03D7
        gbc.setState(0xd77a, 0x5839, 0x6b20, 0x2ddf, 0x8ed9, 0x59dc, 0x0, 0x1);
        gbc.writeMem(0xd77a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5839);
        EXPECT(gbc.pc(), 0xd77c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd77a), 0xcb);
        EXPECT(gbc.readMem(0xd77b), 0x1b);
        // CB 1B 03D8
        gbc.setState(0x7974, 0x50a2, 0x4660, 0x67a3, 0x4be1, 0x1a8b, 0x1, 0x0);
        gbc.writeMem(0x7974, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x50a2);
        EXPECT(gbc.pc(), 0x7976);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03D9
        gbc.setState(0x1d3b, 0x85f9, 0xdd0, 0xff2b, 0x923f, 0xf447, 0x0, 0x1);
        gbc.writeMem(0x1d3b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x85f9);
        EXPECT(gbc.pc(), 0x1d3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03DA
        gbc.setState(0x4880, 0xf84e, 0xf5e0, 0xd083, 0x9271, 0x922f, 0x1, 0x0);
        gbc.writeMem(0x4880, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf84e);
        EXPECT(gbc.pc(), 0x4882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03DB
        gbc.setState(0x2918, 0xdee, 0x6620, 0x8325, 0xb622, 0x16f3, 0x0, 0x1);
        gbc.writeMem(0x2918, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdee);
        EXPECT(gbc.pc(), 0x291a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03DC
        gbc.setState(0x75e9, 0x2bf8, 0x6c50, 0x62fc, 0x7c33, 0x2121, 0x1, 0x0);
        gbc.writeMem(0x75e9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2bf8);
        EXPECT(gbc.pc(), 0x75eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03DD
        gbc.setState(0xd91a, 0x2a04, 0x6460, 0x4008, 0x80d4, 0xa1c7, 0x0, 0x0);
        gbc.writeMem(0xd91a, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2a04);
        EXPECT(gbc.pc(), 0xd91c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd91a), 0xcb);
        EXPECT(gbc.readMem(0xd91b), 0x1b);
        // CB 1B 03DF
        gbc.setState(0x9390, 0x1f3c, 0x7220, 0x54f7, 0xffdc, 0x100e, 0x0, 0x0);
        gbc.writeMem(0x9390, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1f3c);
        EXPECT(gbc.pc(), 0x9392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9390), 0xcb);
        EXPECT(gbc.readMem(0x9391), 0x1b);
        // CB 1B 03E0
        gbc.setState(0xe9ff, 0x2f41, 0x5850, 0x5065, 0x2556, 0x7cfd, 0x1, 0x1);
        gbc.writeMem(0xe9ff, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2f41);
        EXPECT(gbc.pc(), 0xea01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9ff), 0xcb);
        EXPECT(gbc.readMem(0xea00), 0x1b);
        // CB 1B 03E1
        gbc.setState(0x7643, 0xad82, 0x6ca0, 0xc9c, 0x9ca5, 0xe147, 0x1, 0x1);
        gbc.writeMem(0x7643, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0x7645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1B 03E2
        gbc.setState(0xbd29, 0xc4fe, 0xe270, 0xfff9, 0x8af0, 0xa84e, 0x1, 0x1);
        gbc.writeMem(0xbd29, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc4fe);
        EXPECT(gbc.pc(), 0xbd2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd29), 0xcb);
        EXPECT(gbc.readMem(0xbd2a), 0x1b);
        // CB 1B 03E3
        gbc.setState(0x7774, 0x1bed, 0x70b0, 0x6b6e, 0xf66c, 0x5d6b, 0x1, 0x1);
        gbc.writeMem(0x7774, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1bed);
        EXPECT(gbc.pc(), 0x7776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03E4
        gbc.setState(0xc8a8, 0x8260, 0xce60, 0x8c81, 0xfa4b, 0xccc0, 0x0, 0x1);
        gbc.writeMem(0xc8a8, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8260);
        EXPECT(gbc.pc(), 0xc8aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a8), 0xcb);
        EXPECT(gbc.readMem(0xc8a9), 0x1b);
        // CB 1B 03E5
        gbc.setState(0xe4d9, 0x10e9, 0xbda0, 0x5588, 0x61c5, 0xbf7b, 0x0, 0x1);
        gbc.writeMem(0xe4d9, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x10e9);
        EXPECT(gbc.pc(), 0xe4db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4d9), 0xcb);
        EXPECT(gbc.readMem(0xe4da), 0x1b);
        // CB 1B 03E6
        gbc.setState(0x7a0b, 0xa9c2, 0x44f0, 0xf4ef, 0xa650, 0xa49, 0x1, 0x1);
        gbc.writeMem(0x7a0b, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa9c2);
        EXPECT(gbc.pc(), 0x7a0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1B 03E7
        gbc.setState(0x8243, 0xdea6, 0x58c0, 0x6525, 0x2ccd, 0xa70d, 0x1, 0x0);
        gbc.writeMem(0x8243, { 0xcb, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdea6);
        EXPECT(gbc.pc(), 0x8245);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8243), 0xcb);
        EXPECT(gbc.readMem(0x8244), 0x1b);
    }
